import{r as N9,g as Dv,R as el,a as f5,j as z9}from"./index-CdmSDuRd.js";var tE={exports:{}},Ph={},nE={exports:{}},iE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d5;function KW(){return d5||(d5=1,(function(e){function t(R,q){var X=R.length;R.push(q);e:for(;0<X;){var Q=X-1>>>1,ae=R[Q];if(0<r(ae,q))R[Q]=q,R[X]=ae,X=Q;else break e}}function n(R){return R.length===0?null:R[0]}function i(R){if(R.length===0)return null;var q=R[0],X=R.pop();if(X!==q){R[0]=X;e:for(var Q=0,ae=R.length,xe=ae>>>1;Q<xe;){var he=2*(Q+1)-1,ye=R[he],Re=he+1,Me=R[Re];if(0>r(ye,X))Re<ae&&0>r(Me,ye)?(R[Q]=Me,R[Re]=X,Q=Re):(R[Q]=ye,R[he]=X,Q=he);else if(Re<ae&&0>r(Me,X))R[Q]=Me,R[Re]=X,Q=Re;else break e}}return q}function r(R,q){var X=R.sortIndex-q.sortIndex;return X!==0?X:R.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var u=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function $(R){for(var q=n(f);q!==null;){if(q.callback===null)i(f);else if(q.startTime<=R)i(f),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(f)}}function T(R){if(b=!1,$(R),!v)if(n(u)!==null)v=!0,k||(k=!0,G());else{var q=n(f);q!==null&&z(T,q.startTime-R)}}var k=!1,M=-1,D=5,N=-1;function B(){return S?!0:!(e.unstable_now()-N<D)}function F(){if(S=!1,k){var R=e.unstable_now();N=R;var q=!0;try{e:{v=!1,b&&(b=!1,w(M),M=-1),y=!0;var X=p;try{t:{for($(R),h=n(u);h!==null&&!(h.expirationTime>R&&B());){var Q=h.callback;if(typeof Q=="function"){h.callback=null,p=h.priorityLevel;var ae=Q(h.expirationTime<=R);if(R=e.unstable_now(),typeof ae=="function"){h.callback=ae,$(R),q=!0;break t}h===n(u)&&i(u),$(R)}else i(u);h=n(u)}if(h!==null)q=!0;else{var xe=n(f);xe!==null&&z(T,xe.startTime-R),q=!1}}break e}finally{h=null,p=X,y=!1}q=void 0}}finally{q?G():k=!1}}}var G;if(typeof A=="function")G=function(){A(F)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,U=I.port2;I.port1.onmessage=F,G=function(){U.postMessage(null)}}else G=function(){_(F,0)};function z(R,q){M=_(function(){R(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(R){R.callback=null},e.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<R?Math.floor(1e3/R):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(R){switch(p){case 1:case 2:case 3:var q=3;break;default:q=p}var X=p;p=q;try{return R()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(R,q){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var X=p;p=R;try{return q()}finally{p=X}},e.unstable_scheduleCallback=function(R,q,X){var Q=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,R){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=X+ae,R={id:d++,callback:q,priorityLevel:R,startTime:X,expirationTime:ae,sortIndex:-1},X>Q?(R.sortIndex=X,t(f,R),n(u)===null&&R===n(f)&&(b?(w(M),M=-1):b=!0,z(T,X-Q))):(R.sortIndex=ae,t(u,R),v||y||(v=!0,k||(k=!0,G()))),R},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(R){var q=p;return function(){var X=p;p=q;try{return R.apply(this,arguments)}finally{p=X}}}})(iE)),iE}var h5;function JW(){return h5||(h5=1,nE.exports=KW()),nE.exports}var rE={exports:{}},Un={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var g5;function eQ(){if(g5)return Un;g5=1;var e=N9();function t(u){var f="https://react.dev/errors/"+u;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+u+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(u,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:u,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(u,f){if(u==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Un.createPortal=function(u,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(u,f,null,d)},Un.flushSync=function(u){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,u)return u()}finally{s.T=f,i.p=d,i.d.f()}},Un.preconnect=function(u,f){typeof u=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(u,f))},Un.prefetchDNS=function(u){typeof u=="string"&&i.d.D(u)},Un.preinit=function(u,f){if(typeof u=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(u,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(u,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},Un.preinitModule=function(u,f){if(typeof u=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(u,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(u)},Un.preload=function(u,f){if(typeof u=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(u,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},Un.preloadModule=function(u,f){if(typeof u=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(u,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(u)},Un.requestFormReset=function(u){i.d.r(u)},Un.unstable_batchedUpdates=function(u,f){return u(f)},Un.useFormState=function(u,f,d){return s.H.useFormState(u,f,d)},Un.useFormStatus=function(){return s.H.useHostTransitionStatus()},Un.version="19.1.1",Un}var p5;function tQ(){if(p5)return rE.exports;p5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),rE.exports=eQ(),rE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var m5;function nQ(){if(m5)return Ph;m5=1;var e=JW(),t=N9(),n=tQ();function i(l){var c="https://react.dev/errors/"+l;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+l+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function a(l){var c=l,g=l;if(l.alternate)for(;c.return;)c=c.return;else{l=c;do c=l,(c.flags&4098)!==0&&(g=c.return),l=c.return;while(l)}return c.tag===3?g:null}function s(l){if(l.tag===13){var c=l.memoizedState;if(c===null&&(l=l.alternate,l!==null&&(c=l.memoizedState)),c!==null)return c.dehydrated}return null}function o(l){if(a(l)!==l)throw Error(i(188))}function u(l){var c=l.alternate;if(!c){if(c=a(l),c===null)throw Error(i(188));return c!==l?null:l}for(var g=l,m=c;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),l;if(E===m)return o(x),c;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var C=!1,O=x.child;O;){if(O===g){C=!0,g=x,m=E;break}if(O===m){C=!0,m=x,g=E;break}O=O.sibling}if(!C){for(O=E.child;O;){if(O===g){C=!0,g=E,m=x;break}if(O===m){C=!0,m=E,g=x;break}O=O.sibling}if(!C)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?l:c}function f(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l;for(l=l.child;l!==null;){if(c=f(l),c!==null)return c;l=l.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),F=Symbol.iterator;function G(l){return l===null||typeof l!="object"?null:(l=F&&l[F]||l["@@iterator"],typeof l=="function"?l:null)}var I=Symbol.for("react.client.reference");function U(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===I?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case y:return"Portal";case A:return(l.displayName||"Context")+".Provider";case w:return(l._context.displayName||"Context")+".Consumer";case $:var c=l.render;return l=l.displayName,l||(l=c.displayName||c.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case M:return c=l.displayName||null,c!==null?c:U(l.type)||"Memo";case D:c=l._payload,l=l._init;try{return U(l(c))}catch{}}return null}var z=Array.isArray,R=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Q=[],ae=-1;function xe(l){return{current:l}}function he(l){0>ae||(l.current=Q[ae],Q[ae]=null,ae--)}function ye(l,c){ae++,Q[ae]=l.current,l.current=c}var Re=xe(null),Me=xe(null),wt=xe(null),ur=xe(null);function Bi(l,c){switch(ye(wt,c),ye(Me,l),ye(Re,null),c.nodeType){case 9:case 11:l=(l=c.documentElement)&&(l=l.namespaceURI)?UN(l):0;break;default:if(l=c.tagName,c=c.namespaceURI)c=UN(c),l=qN(c,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}he(Re),ye(Re,l)}function pe(){he(Re),he(Me),he(wt)}function Fe(l){l.memoizedState!==null&&ye(ur,l);var c=Re.current,g=qN(c,l.type);c!==g&&(ye(Me,l),ye(Re,g))}function Be(l){Me.current===l&&(he(Re),he(Me)),ur.current===l&&(he(ur),Fh._currentValue=X)}var oe=Object.prototype.hasOwnProperty,Pt=e.unstable_scheduleCallback,Je=e.unstable_cancelCallback,Vt=e.unstable_shouldYield,cn=e.unstable_requestPaint,Wt=e.unstable_now,S0=e.unstable_getCurrentPriorityLevel,bO=e.unstable_ImmediatePriority,xO=e.unstable_UserBlockingPriority,E0=e.unstable_NormalPriority,RX=e.unstable_LowPriority,SO=e.unstable_IdlePriority,NX=e.log,zX=e.unstable_setDisableYieldValue,Hd=null,Ui=null;function uo(l){if(typeof NX=="function"&&zX(l),Ui&&typeof Ui.setStrictMode=="function")try{Ui.setStrictMode(Hd,l)}catch{}}var qi=Math.clz32?Math.clz32:BX,FX=Math.log,LX=Math.LN2;function BX(l){return l>>>=0,l===0?32:31-(FX(l)/LX|0)|0}var _0=256,w0=4194304;function Fl(l){var c=l&42;if(c!==0)return c;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function A0(l,c,g){var m=l.pendingLanes;if(m===0)return 0;var x=0,E=l.suspendedLanes,C=l.pingedLanes;l=l.warmLanes;var O=m&134217727;return O!==0?(m=O&~E,m!==0?x=Fl(m):(C&=O,C!==0?x=Fl(C):g||(g=O&~l,g!==0&&(x=Fl(g))))):(O=m&~E,O!==0?x=Fl(O):C!==0?x=Fl(C):g||(g=m&~l,g!==0&&(x=Fl(g)))),x===0?0:c!==0&&c!==x&&(c&E)===0&&(E=x&-x,g=c&-c,E>=g||E===32&&(g&4194048)!==0)?c:x}function Gd(l,c){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&c)===0}function UX(l,c){switch(l){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function EO(){var l=_0;return _0<<=1,(_0&4194048)===0&&(_0=256),l}function _O(){var l=w0;return w0<<=1,(w0&62914560)===0&&(w0=4194304),l}function Hx(l){for(var c=[],g=0;31>g;g++)c.push(l);return c}function Yd(l,c){l.pendingLanes|=c,c!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function qX(l,c,g,m,x,E){var C=l.pendingLanes;l.pendingLanes=g,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=g,l.entangledLanes&=g,l.errorRecoveryDisabledLanes&=g,l.shellSuspendCounter=0;var O=l.entanglements,L=l.expirationTimes,Y=l.hiddenUpdates;for(g=C&~g;0<g;){var ee=31-qi(g),ie=1<<ee;O[ee]=0,L[ee]=-1;var V=Y[ee];if(V!==null)for(Y[ee]=null,ee=0;ee<V.length;ee++){var W=V[ee];W!==null&&(W.lane&=-536870913)}g&=~ie}m!==0&&wO(l,m,0),E!==0&&x===0&&l.tag!==0&&(l.suspendedLanes|=E&~(C&~c))}function wO(l,c,g){l.pendingLanes|=c,l.suspendedLanes&=~c;var m=31-qi(c);l.entangledLanes|=c,l.entanglements[m]=l.entanglements[m]|1073741824|g&4194090}function AO(l,c){var g=l.entangledLanes|=c;for(l=l.entanglements;g;){var m=31-qi(g),x=1<<m;x&c|l[m]&c&&(l[m]|=c),g&=~x}}function Gx(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function Yx(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function $O(){var l=q.p;return l!==0?l:(l=window.event,l===void 0?32:a5(l.type))}function PX(l,c){var g=q.p;try{return q.p=l,c()}finally{q.p=g}}var co=Math.random().toString(36).slice(2),Ln="__reactFiber$"+co,bi="__reactProps$"+co,bc="__reactContainer$"+co,Xx="__reactEvents$"+co,IX="__reactListeners$"+co,jX="__reactHandles$"+co,CO="__reactResources$"+co,Xd="__reactMarker$"+co;function Vx(l){delete l[Ln],delete l[bi],delete l[Xx],delete l[IX],delete l[jX]}function xc(l){var c=l[Ln];if(c)return c;for(var g=l.parentNode;g;){if(c=g[bc]||g[Ln]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(l=HN(l);l!==null;){if(g=l[Ln])return g;l=HN(l)}return c}l=g,g=l.parentNode}return null}function Sc(l){if(l=l[Ln]||l[bc]){var c=l.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return l}return null}function Vd(l){var c=l.tag;if(c===5||c===26||c===27||c===6)return l.stateNode;throw Error(i(33))}function Ec(l){var c=l[CO];return c||(c=l[CO]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function fn(l){l[Xd]=!0}var TO=new Set,MO={};function Ll(l,c){_c(l,c),_c(l+"Capture",c)}function _c(l,c){for(MO[l]=c,l=0;l<c.length;l++)TO.add(c[l])}var HX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),kO={},OO={};function GX(l){return oe.call(OO,l)?!0:oe.call(kO,l)?!1:HX.test(l)?OO[l]=!0:(kO[l]=!0,!1)}function $0(l,c,g){if(GX(c))if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":l.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){l.removeAttribute(c);return}}l.setAttribute(c,""+g)}}function C0(l,c,g){if(g===null)l.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(c);return}l.setAttribute(c,""+g)}}function cs(l,c,g,m){if(m===null)l.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(g);return}l.setAttributeNS(c,g,""+m)}}var Wx,DO;function wc(l){if(Wx===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Wx=c&&c[1]||"",DO=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wx+l+DO}var Qx=!1;function Zx(l,c){if(!l||Qx)return"";Qx=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var ie=function(){throw Error()};if(Object.defineProperty(ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ie,[])}catch(W){var V=W}Reflect.construct(l,[],ie)}else{try{ie.call()}catch(W){V=W}l.call(ie.prototype)}}else{try{throw Error()}catch(W){V=W}(ie=l())&&typeof ie.catch=="function"&&ie.catch(function(){})}}catch(W){if(W&&V&&typeof W.stack=="string")return[W.stack,V.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),C=E[0],O=E[1];if(C&&O){var L=C.split(`
`),Y=O.split(`
`);for(x=m=0;m<L.length&&!L[m].includes("DetermineComponentFrameRoot");)m++;for(;x<Y.length&&!Y[x].includes("DetermineComponentFrameRoot");)x++;if(m===L.length||x===Y.length)for(m=L.length-1,x=Y.length-1;1<=m&&0<=x&&L[m]!==Y[x];)x--;for(;1<=m&&0<=x;m--,x--)if(L[m]!==Y[x]){if(m!==1||x!==1)do if(m--,x--,0>x||L[m]!==Y[x]){var ee=`
`+L[m].replace(" at new "," at ");return l.displayName&&ee.includes("<anonymous>")&&(ee=ee.replace("<anonymous>",l.displayName)),ee}while(1<=m&&0<=x);break}}}finally{Qx=!1,Error.prepareStackTrace=g}return(g=l?l.displayName||l.name:"")?wc(g):""}function YX(l){switch(l.tag){case 26:case 27:case 5:return wc(l.type);case 16:return wc("Lazy");case 13:return wc("Suspense");case 19:return wc("SuspenseList");case 0:case 15:return Zx(l.type,!1);case 11:return Zx(l.type.render,!1);case 1:return Zx(l.type,!0);case 31:return wc("Activity");default:return""}}function RO(l){try{var c="";do c+=YX(l),l=l.return;while(l);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function cr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function NO(l){var c=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function XX(l){var c=NO(l)?"checked":"value",g=Object.getOwnPropertyDescriptor(l.constructor.prototype,c),m=""+l[c];if(!l.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(l,c,{configurable:!0,get:function(){return x.call(this)},set:function(C){m=""+C,E.call(this,C)}}),Object.defineProperty(l,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function(C){m=""+C},stopTracking:function(){l._valueTracker=null,delete l[c]}}}}function T0(l){l._valueTracker||(l._valueTracker=XX(l))}function zO(l){if(!l)return!1;var c=l._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return l&&(m=NO(l)?l.checked?"true":"false":l.value),l=m,l!==g?(c.setValue(l),!0):!1}function M0(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var VX=/[\n"\\]/g;function fr(l){return l.replace(VX,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Kx(l,c,g,m,x,E,C,O){l.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?l.type=C:l.removeAttribute("type"),c!=null?C==="number"?(c===0&&l.value===""||l.value!=c)&&(l.value=""+cr(c)):l.value!==""+cr(c)&&(l.value=""+cr(c)):C!=="submit"&&C!=="reset"||l.removeAttribute("value"),c!=null?Jx(l,C,cr(c)):g!=null?Jx(l,C,cr(g)):m!=null&&l.removeAttribute("value"),x==null&&E!=null&&(l.defaultChecked=!!E),x!=null&&(l.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?l.name=""+cr(O):l.removeAttribute("name")}function FO(l,c,g,m,x,E,C,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(l.type=E),c!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;g=g!=null?""+cr(g):"",c=c!=null?""+cr(c):g,O||c===l.value||(l.value=c),l.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,l.checked=O?l.checked:!!m,l.defaultChecked=!!m,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(l.name=C)}function Jx(l,c,g){c==="number"&&M0(l.ownerDocument)===l||l.defaultValue===""+g||(l.defaultValue=""+g)}function Ac(l,c,g,m){if(l=l.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<l.length;g++)x=c.hasOwnProperty("$"+l[g].value),l[g].selected!==x&&(l[g].selected=x),x&&m&&(l[g].defaultSelected=!0)}else{for(g=""+cr(g),c=null,x=0;x<l.length;x++){if(l[x].value===g){l[x].selected=!0,m&&(l[x].defaultSelected=!0);return}c!==null||l[x].disabled||(c=l[x])}c!==null&&(c.selected=!0)}}function LO(l,c,g){if(c!=null&&(c=""+cr(c),c!==l.value&&(l.value=c),g==null)){l.defaultValue!==c&&(l.defaultValue=c);return}l.defaultValue=g!=null?""+cr(g):""}function BO(l,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(z(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=cr(c),l.defaultValue=g,m=l.textContent,m===g&&m!==""&&m!==null&&(l.value=m)}function $c(l,c){if(c){var g=l.firstChild;if(g&&g===l.lastChild&&g.nodeType===3){g.nodeValue=c;return}}l.textContent=c}var WX=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function UO(l,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?l.setProperty(c,""):c==="float"?l.cssFloat="":l[c]="":m?l.setProperty(c,g):typeof g!="number"||g===0||WX.has(c)?c==="float"?l.cssFloat=g:l[c]=(""+g).trim():l[c]=g+"px"}function qO(l,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(l=l.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?l.setProperty(m,""):m==="float"?l.cssFloat="":l[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&UO(l,x,m)}else for(var E in c)c.hasOwnProperty(E)&&UO(l,E,c[E])}function e2(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var QX=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZX=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function k0(l){return ZX.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var t2=null;function n2(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Cc=null,Tc=null;function PO(l){var c=Sc(l);if(c&&(l=c.stateNode)){var g=l[bi]||null;e:switch(l=c.stateNode,c.type){case"input":if(Kx(l,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=l;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+fr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==l&&m.form===l.form){var x=m[bi]||null;if(!x)throw Error(i(90));Kx(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===l.form&&zO(m)}break e;case"textarea":LO(l,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Ac(l,!!g.multiple,c,!1)}}}var i2=!1;function IO(l,c,g){if(i2)return l(c,g);i2=!0;try{var m=l(c);return m}finally{if(i2=!1,(Cc!==null||Tc!==null)&&(pm(),Cc&&(c=Cc,l=Tc,Tc=Cc=null,PO(c),l)))for(c=0;c<l.length;c++)PO(l[c])}}function Wd(l,c){var g=l.stateNode;if(g===null)return null;var m=g[bi]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(l=l.type,m=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!m;break e;default:l=!1}if(l)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var fs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),r2=!1;if(fs)try{var Qd={};Object.defineProperty(Qd,"passive",{get:function(){r2=!0}}),window.addEventListener("test",Qd,Qd),window.removeEventListener("test",Qd,Qd)}catch{r2=!1}var fo=null,a2=null,O0=null;function jO(){if(O0)return O0;var l,c=a2,g=c.length,m,x="value"in fo?fo.value:fo.textContent,E=x.length;for(l=0;l<g&&c[l]===x[l];l++);var C=g-l;for(m=1;m<=C&&c[g-m]===x[E-m];m++);return O0=x.slice(l,1<m?1-m:void 0)}function D0(l){var c=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&c===13&&(l=13)):l=c,l===10&&(l=13),32<=l||l===13?l:0}function R0(){return!0}function HO(){return!1}function xi(l){function c(g,m,x,E,C){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=C,this.currentTarget=null;for(var O in l)l.hasOwnProperty(O)&&(g=l[O],this[O]=g?g(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?R0:HO,this.isPropagationStopped=HO,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=R0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=R0)},persist:function(){},isPersistent:R0}),c}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},N0=xi(Bl),Zd=d({},Bl,{view:0,detail:0}),KX=xi(Zd),s2,o2,Kd,z0=d({},Zd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:u2,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==Kd&&(Kd&&l.type==="mousemove"?(s2=l.screenX-Kd.screenX,o2=l.screenY-Kd.screenY):o2=s2=0,Kd=l),s2)},movementY:function(l){return"movementY"in l?l.movementY:o2}}),GO=xi(z0),JX=d({},z0,{dataTransfer:0}),eV=xi(JX),tV=d({},Zd,{relatedTarget:0}),l2=xi(tV),nV=d({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),iV=xi(nV),rV=d({},Bl,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),aV=xi(rV),sV=d({},Bl,{data:0}),YO=xi(sV),oV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function cV(l){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(l):(l=uV[l])?!!c[l]:!1}function u2(){return cV}var fV=d({},Zd,{key:function(l){if(l.key){var c=oV[l.key]||l.key;if(c!=="Unidentified")return c}return l.type==="keypress"?(l=D0(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?lV[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:u2,charCode:function(l){return l.type==="keypress"?D0(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?D0(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),dV=xi(fV),hV=d({},z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),XO=xi(hV),gV=d({},Zd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:u2}),pV=xi(gV),mV=d({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),yV=xi(mV),vV=d({},z0,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),bV=xi(vV),xV=d({},Bl,{newState:0,oldState:0}),SV=xi(xV),EV=[9,13,27,32],c2=fs&&"CompositionEvent"in window,Jd=null;fs&&"documentMode"in document&&(Jd=document.documentMode);var _V=fs&&"TextEvent"in window&&!Jd,VO=fs&&(!c2||Jd&&8<Jd&&11>=Jd),WO=" ",QO=!1;function ZO(l,c){switch(l){case"keyup":return EV.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KO(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var Mc=!1;function wV(l,c){switch(l){case"compositionend":return KO(c);case"keypress":return c.which!==32?null:(QO=!0,WO);case"textInput":return l=c.data,l===WO&&QO?null:l;default:return null}}function AV(l,c){if(Mc)return l==="compositionend"||!c2&&ZO(l,c)?(l=jO(),O0=a2=fo=null,Mc=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return VO&&c.locale!=="ko"?null:c.data;default:return null}}var $V={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JO(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c==="input"?!!$V[l.type]:c==="textarea"}function eD(l,c,g,m){Cc?Tc?Tc.push(m):Tc=[m]:Cc=m,c=Sm(c,"onChange"),0<c.length&&(g=new N0("onChange","change",null,g,m),l.push({event:g,listeners:c}))}var eh=null,th=null;function CV(l){NN(l,0)}function F0(l){var c=Vd(l);if(zO(c))return l}function tD(l,c){if(l==="change")return c}var nD=!1;if(fs){var f2;if(fs){var d2="oninput"in document;if(!d2){var iD=document.createElement("div");iD.setAttribute("oninput","return;"),d2=typeof iD.oninput=="function"}f2=d2}else f2=!1;nD=f2&&(!document.documentMode||9<document.documentMode)}function rD(){eh&&(eh.detachEvent("onpropertychange",aD),th=eh=null)}function aD(l){if(l.propertyName==="value"&&F0(th)){var c=[];eD(c,th,l,n2(l)),IO(CV,c)}}function TV(l,c,g){l==="focusin"?(rD(),eh=c,th=g,eh.attachEvent("onpropertychange",aD)):l==="focusout"&&rD()}function MV(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return F0(th)}function kV(l,c){if(l==="click")return F0(c)}function OV(l,c){if(l==="input"||l==="change")return F0(c)}function DV(l,c){return l===c&&(l!==0||1/l===1/c)||l!==l&&c!==c}var Pi=typeof Object.is=="function"?Object.is:DV;function nh(l,c){if(Pi(l,c))return!0;if(typeof l!="object"||l===null||typeof c!="object"||c===null)return!1;var g=Object.keys(l),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!oe.call(c,x)||!Pi(l[x],c[x]))return!1}return!0}function sD(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function oD(l,c){var g=sD(l);l=0;for(var m;g;){if(g.nodeType===3){if(m=l+g.textContent.length,l<=c&&m>=c)return{node:g,offset:c-l};l=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=sD(g)}}function lD(l,c){return l&&c?l===c?!0:l&&l.nodeType===3?!1:c&&c.nodeType===3?lD(l,c.parentNode):"contains"in l?l.contains(c):l.compareDocumentPosition?!!(l.compareDocumentPosition(c)&16):!1:!1}function uD(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var c=M0(l.document);c instanceof l.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)l=c.contentWindow;else break;c=M0(l.document)}return c}function h2(l){var c=l&&l.nodeName&&l.nodeName.toLowerCase();return c&&(c==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||c==="textarea"||l.contentEditable==="true")}var RV=fs&&"documentMode"in document&&11>=document.documentMode,kc=null,g2=null,ih=null,p2=!1;function cD(l,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;p2||kc==null||kc!==M0(m)||(m=kc,"selectionStart"in m&&h2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ih&&nh(ih,m)||(ih=m,m=Sm(g2,"onSelect"),0<m.length&&(c=new N0("onSelect","select",null,c,g),l.push({event:c,listeners:m}),c.target=kc)))}function Ul(l,c){var g={};return g[l.toLowerCase()]=c.toLowerCase(),g["Webkit"+l]="webkit"+c,g["Moz"+l]="moz"+c,g}var Oc={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionrun:Ul("Transition","TransitionRun"),transitionstart:Ul("Transition","TransitionStart"),transitioncancel:Ul("Transition","TransitionCancel"),transitionend:Ul("Transition","TransitionEnd")},m2={},fD={};fs&&(fD=document.createElement("div").style,"AnimationEvent"in window||(delete Oc.animationend.animation,delete Oc.animationiteration.animation,delete Oc.animationstart.animation),"TransitionEvent"in window||delete Oc.transitionend.transition);function ql(l){if(m2[l])return m2[l];if(!Oc[l])return l;var c=Oc[l],g;for(g in c)if(c.hasOwnProperty(g)&&g in fD)return m2[l]=c[g];return l}var dD=ql("animationend"),hD=ql("animationiteration"),gD=ql("animationstart"),NV=ql("transitionrun"),zV=ql("transitionstart"),FV=ql("transitioncancel"),pD=ql("transitionend"),mD=new Map,y2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");y2.push("scrollEnd");function Ur(l,c){mD.set(l,c),Ll(c,[l])}var yD=new WeakMap;function dr(l,c){if(typeof l=="object"&&l!==null){var g=yD.get(l);return g!==void 0?g:(c={value:l,source:c,stack:RO(c)},yD.set(l,c),c)}return{value:l,source:c,stack:RO(c)}}var hr=[],Dc=0,v2=0;function L0(){for(var l=Dc,c=v2=Dc=0;c<l;){var g=hr[c];hr[c++]=null;var m=hr[c];hr[c++]=null;var x=hr[c];hr[c++]=null;var E=hr[c];if(hr[c++]=null,m!==null&&x!==null){var C=m.pending;C===null?x.next=x:(x.next=C.next,C.next=x),m.pending=x}E!==0&&vD(g,x,E)}}function B0(l,c,g,m){hr[Dc++]=l,hr[Dc++]=c,hr[Dc++]=g,hr[Dc++]=m,v2|=m,l.lanes|=m,l=l.alternate,l!==null&&(l.lanes|=m)}function b2(l,c,g,m){return B0(l,c,g,m),U0(l)}function Rc(l,c){return B0(l,null,null,c),U0(l)}function vD(l,c,g){l.lanes|=g;var m=l.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=l.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(l=E.stateNode,l===null||l._visibility&1||(x=!0)),l=E,E=E.return;return l.tag===3?(E=l.stateNode,x&&c!==null&&(x=31-qi(g),l=E.hiddenUpdates,m=l[x],m===null?l[x]=[c]:m.push(c),c.lane=g|536870912),E):null}function U0(l){if(50<Th)throw Th=0,AS=null,Error(i(185));for(var c=l.return;c!==null;)l=c,c=l.return;return l.tag===3?l.stateNode:null}var Nc={};function LV(l,c,g,m){this.tag=l,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ii(l,c,g,m){return new LV(l,c,g,m)}function x2(l){return l=l.prototype,!(!l||!l.isReactComponent)}function ds(l,c){var g=l.alternate;return g===null?(g=Ii(l.tag,c,l.key,l.mode),g.elementType=l.elementType,g.type=l.type,g.stateNode=l.stateNode,g.alternate=l,l.alternate=g):(g.pendingProps=c,g.type=l.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=l.flags&65011712,g.childLanes=l.childLanes,g.lanes=l.lanes,g.child=l.child,g.memoizedProps=l.memoizedProps,g.memoizedState=l.memoizedState,g.updateQueue=l.updateQueue,c=l.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=l.sibling,g.index=l.index,g.ref=l.ref,g.refCleanup=l.refCleanup,g}function bD(l,c){l.flags&=65011714;var g=l.alternate;return g===null?(l.childLanes=0,l.lanes=c,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=g.childLanes,l.lanes=g.lanes,l.child=g.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=g.memoizedProps,l.memoizedState=g.memoizedState,l.updateQueue=g.updateQueue,l.type=g.type,c=g.dependencies,l.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),l}function q0(l,c,g,m,x,E){var C=0;if(m=l,typeof l=="function")x2(l)&&(C=1);else if(typeof l=="string")C=UW(l,g,Re.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case N:return l=Ii(31,g,c,x),l.elementType=N,l.lanes=E,l;case v:return Pl(g.children,x,E,c);case b:C=8,x|=24;break;case S:return l=Ii(12,g,c,x|2),l.elementType=S,l.lanes=E,l;case T:return l=Ii(13,g,c,x),l.elementType=T,l.lanes=E,l;case k:return l=Ii(19,g,c,x),l.elementType=k,l.lanes=E,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case _:case A:C=10;break e;case w:C=9;break e;case $:C=11;break e;case M:C=14;break e;case D:C=16,m=null;break e}C=29,g=Error(i(130,l===null?"null":typeof l,"")),m=null}return c=Ii(C,g,c,x),c.elementType=l,c.type=m,c.lanes=E,c}function Pl(l,c,g,m){return l=Ii(7,l,m,c),l.lanes=g,l}function S2(l,c,g){return l=Ii(6,l,null,c),l.lanes=g,l}function E2(l,c,g){return c=Ii(4,l.children!==null?l.children:[],l.key,c),c.lanes=g,c.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},c}var zc=[],Fc=0,P0=null,I0=0,gr=[],pr=0,Il=null,hs=1,gs="";function jl(l,c){zc[Fc++]=I0,zc[Fc++]=P0,P0=l,I0=c}function xD(l,c,g){gr[pr++]=hs,gr[pr++]=gs,gr[pr++]=Il,Il=l;var m=hs;l=gs;var x=32-qi(m)-1;m&=~(1<<x),g+=1;var E=32-qi(c)+x;if(30<E){var C=x-x%5;E=(m&(1<<C)-1).toString(32),m>>=C,x-=C,hs=1<<32-qi(c)+x|g<<x|m,gs=E+l}else hs=1<<E|g<<x|m,gs=l}function _2(l){l.return!==null&&(jl(l,1),xD(l,1,0))}function w2(l){for(;l===P0;)P0=zc[--Fc],zc[Fc]=null,I0=zc[--Fc],zc[Fc]=null;for(;l===Il;)Il=gr[--pr],gr[pr]=null,gs=gr[--pr],gr[pr]=null,hs=gr[--pr],gr[pr]=null}var ei=null,zt=null,at=!1,Hl=null,xa=!1,A2=Error(i(519));function Gl(l){var c=Error(i(418,""));throw sh(dr(c,l)),A2}function SD(l){var c=l.stateNode,g=l.type,m=l.memoizedProps;switch(c[Ln]=l,c[bi]=m,g){case"dialog":Xe("cancel",c),Xe("close",c);break;case"iframe":case"object":case"embed":Xe("load",c);break;case"video":case"audio":for(g=0;g<kh.length;g++)Xe(kh[g],c);break;case"source":Xe("error",c);break;case"img":case"image":case"link":Xe("error",c),Xe("load",c);break;case"details":Xe("toggle",c);break;case"input":Xe("invalid",c),FO(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),T0(c);break;case"select":Xe("invalid",c);break;case"textarea":Xe("invalid",c),BO(c,m.value,m.defaultValue,m.children),T0(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||BN(c.textContent,g)?(m.popover!=null&&(Xe("beforetoggle",c),Xe("toggle",c)),m.onScroll!=null&&Xe("scroll",c),m.onScrollEnd!=null&&Xe("scrollend",c),m.onClick!=null&&(c.onclick=Em),c=!0):c=!1,c||Gl(l)}function ED(l){for(ei=l.return;ei;)switch(ei.tag){case 5:case 13:xa=!1;return;case 27:case 3:xa=!0;return;default:ei=ei.return}}function rh(l){if(l!==ei)return!1;if(!at)return ED(l),at=!0,!1;var c=l.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=l.type,g=!(g!=="form"&&g!=="button")||PS(l.type,l.memoizedProps)),g=!g),g&&zt&&Gl(l),ED(l),c===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(i(317));e:{for(l=l.nextSibling,c=0;l;){if(l.nodeType===8)if(g=l.data,g==="/$"){if(c===0){zt=Pr(l.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;l=l.nextSibling}zt=null}}else c===27?(c=zt,To(l.type)?(l=GS,GS=null,zt=l):zt=c):zt=ei?Pr(l.stateNode.nextSibling):null;return!0}function ah(){zt=ei=null,at=!1}function _D(){var l=Hl;return l!==null&&(_i===null?_i=l:_i.push.apply(_i,l),Hl=null),l}function sh(l){Hl===null?Hl=[l]:Hl.push(l)}var $2=xe(null),Yl=null,ps=null;function ho(l,c,g){ye($2,c._currentValue),c._currentValue=g}function ms(l){l._currentValue=$2.current,he($2)}function C2(l,c,g){for(;l!==null;){var m=l.alternate;if((l.childLanes&c)!==c?(l.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),l===g)break;l=l.return}}function T2(l,c,g,m){var x=l.child;for(x!==null&&(x.return=l);x!==null;){var E=x.dependencies;if(E!==null){var C=x.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=x;for(var L=0;L<c.length;L++)if(O.context===c[L]){E.lanes|=g,O=E.alternate,O!==null&&(O.lanes|=g),C2(E.return,g,l),m||(C=null);break e}E=O.next}}else if(x.tag===18){if(C=x.return,C===null)throw Error(i(341));C.lanes|=g,E=C.alternate,E!==null&&(E.lanes|=g),C2(C,g,l),C=null}else C=x.child;if(C!==null)C.return=x;else for(C=x;C!==null;){if(C===l){C=null;break}if(x=C.sibling,x!==null){x.return=C.return,C=x;break}C=C.return}x=C}}function oh(l,c,g,m){l=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var C=x.alternate;if(C===null)throw Error(i(387));if(C=C.memoizedProps,C!==null){var O=x.type;Pi(x.pendingProps.value,C.value)||(l!==null?l.push(O):l=[O])}}else if(x===ur.current){if(C=x.alternate,C===null)throw Error(i(387));C.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(l!==null?l.push(Fh):l=[Fh])}x=x.return}l!==null&&T2(c,l,g,m),c.flags|=262144}function j0(l){for(l=l.firstContext;l!==null;){if(!Pi(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function Xl(l){Yl=l,ps=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function Bn(l){return wD(Yl,l)}function H0(l,c){return Yl===null&&Xl(l),wD(l,c)}function wD(l,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},ps===null){if(l===null)throw Error(i(308));ps=c,l.dependencies={lanes:0,firstContext:c},l.flags|=524288}else ps=ps.next=c;return g}var BV=typeof AbortController<"u"?AbortController:function(){var l=[],c=this.signal={aborted:!1,addEventListener:function(g,m){l.push(m)}};this.abort=function(){c.aborted=!0,l.forEach(function(g){return g()})}},UV=e.unstable_scheduleCallback,qV=e.unstable_NormalPriority,en={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function M2(){return{controller:new BV,data:new Map,refCount:0}}function lh(l){l.refCount--,l.refCount===0&&UV(qV,function(){l.controller.abort()})}var uh=null,k2=0,Lc=0,Bc=null;function PV(l,c){if(uh===null){var g=uh=[];k2=0,Lc=DS(),Bc={status:"pending",value:void 0,then:function(m){g.push(m)}}}return k2++,c.then(AD,AD),c}function AD(){if(--k2===0&&uh!==null){Bc!==null&&(Bc.status="fulfilled");var l=uh;uh=null,Lc=0,Bc=null;for(var c=0;c<l.length;c++)(0,l[c])()}}function IV(l,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return l.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var $D=R.S;R.S=function(l,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&PV(l,c),$D!==null&&$D(l,c)};var Vl=xe(null);function O2(){var l=Vl.current;return l!==null?l:Et.pooledCache}function G0(l,c){c===null?ye(Vl,Vl.current):ye(Vl,c.pool)}function CD(){var l=O2();return l===null?null:{parent:en._currentValue,pool:l}}var ch=Error(i(460)),TD=Error(i(474)),Y0=Error(i(542)),D2={then:function(){}};function MD(l){return l=l.status,l==="fulfilled"||l==="rejected"}function X0(){}function kD(l,c,g){switch(g=l[g],g===void 0?l.push(c):g!==c&&(c.then(X0,X0),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,DD(l),l;default:if(typeof c.status=="string")c.then(X0,X0);else{if(l=Et,l!==null&&100<l.shellSuspendCounter)throw Error(i(482));l=c,l.status="pending",l.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw l=c.reason,DD(l),l}throw fh=c,ch}}var fh=null;function OD(){if(fh===null)throw Error(i(459));var l=fh;return fh=null,l}function DD(l){if(l===ch||l===Y0)throw Error(i(483))}var go=!1;function R2(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function N2(l,c){l=l.updateQueue,c.updateQueue===l&&(c.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function po(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function mo(l,c,g){var m=l.updateQueue;if(m===null)return null;if(m=m.shared,(ut&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=U0(l),vD(l,null,g),c}return B0(l,m,c,g),U0(l)}function dh(l,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,AO(l,g)}}function z2(l,c){var g=l.updateQueue,m=l.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var C={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=C:E=E.next=C,g=g.next}while(g!==null);E===null?x=E=c:E=E.next=c}else x=E=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},l.updateQueue=g;return}l=g.lastBaseUpdate,l===null?g.firstBaseUpdate=c:l.next=c,g.lastBaseUpdate=c}var F2=!1;function hh(){if(F2){var l=Bc;if(l!==null)throw l}}function gh(l,c,g,m){F2=!1;var x=l.updateQueue;go=!1;var E=x.firstBaseUpdate,C=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var L=O,Y=L.next;L.next=null,C===null?E=Y:C.next=Y,C=L;var ee=l.alternate;ee!==null&&(ee=ee.updateQueue,O=ee.lastBaseUpdate,O!==C&&(O===null?ee.firstBaseUpdate=Y:O.next=Y,ee.lastBaseUpdate=L))}if(E!==null){var ie=x.baseState;C=0,ee=Y=L=null,O=E;do{var V=O.lane&-536870913,W=V!==O.lane;if(W?(Ze&V)===V:(m&V)===V){V!==0&&V===Lc&&(F2=!0),ee!==null&&(ee=ee.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var Ne=l,Oe=O;V=c;var mt=g;switch(Oe.tag){case 1:if(Ne=Oe.payload,typeof Ne=="function"){ie=Ne.call(mt,ie,V);break e}ie=Ne;break e;case 3:Ne.flags=Ne.flags&-65537|128;case 0:if(Ne=Oe.payload,V=typeof Ne=="function"?Ne.call(mt,ie,V):Ne,V==null)break e;ie=d({},ie,V);break e;case 2:go=!0}}V=O.callback,V!==null&&(l.flags|=64,W&&(l.flags|=8192),W=x.callbacks,W===null?x.callbacks=[V]:W.push(V))}else W={lane:V,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ee===null?(Y=ee=W,L=ie):ee=ee.next=W,C|=V;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;W=O,O=W.next,W.next=null,x.lastBaseUpdate=W,x.shared.pending=null}}while(!0);ee===null&&(L=ie),x.baseState=L,x.firstBaseUpdate=Y,x.lastBaseUpdate=ee,E===null&&(x.shared.lanes=0),wo|=C,l.lanes=C,l.memoizedState=ie}}function RD(l,c){if(typeof l!="function")throw Error(i(191,l));l.call(c)}function ND(l,c){var g=l.callbacks;if(g!==null)for(l.callbacks=null,l=0;l<g.length;l++)RD(g[l],c)}var Uc=xe(null),V0=xe(0);function zD(l,c){l=_s,ye(V0,l),ye(Uc,c),_s=l|c.baseLanes}function L2(){ye(V0,_s),ye(Uc,Uc.current)}function B2(){_s=V0.current,he(Uc),he(V0)}var yo=0,Pe=null,gt=null,Qt=null,W0=!1,qc=!1,Wl=!1,Q0=0,ph=0,Pc=null,jV=0;function It(){throw Error(i(321))}function U2(l,c){if(c===null)return!1;for(var g=0;g<c.length&&g<l.length;g++)if(!Pi(l[g],c[g]))return!1;return!0}function q2(l,c,g,m,x,E){return yo=E,Pe=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,R.H=l===null||l.memoizedState===null?vR:bR,Wl=!1,E=g(m,x),Wl=!1,qc&&(E=LD(c,g,m,x)),FD(l),E}function FD(l){R.H=nm;var c=gt!==null&&gt.next!==null;if(yo=0,Qt=gt=Pe=null,W0=!1,ph=0,Pc=null,c)throw Error(i(300));l===null||dn||(l=l.dependencies,l!==null&&j0(l)&&(dn=!0))}function LD(l,c,g,m){Pe=l;var x=0;do{if(qc&&(Pc=null),ph=0,qc=!1,25<=x)throw Error(i(301));if(x+=1,Qt=gt=null,l.updateQueue!=null){var E=l.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}R.H=QV,E=c(g,m)}while(qc);return E}function HV(){var l=R.H,c=l.useState()[0];return c=typeof c.then=="function"?mh(c):c,l=l.useState()[0],(gt!==null?gt.memoizedState:null)!==l&&(Pe.flags|=1024),c}function P2(){var l=Q0!==0;return Q0=0,l}function I2(l,c,g){c.updateQueue=l.updateQueue,c.flags&=-2053,l.lanes&=~g}function j2(l){if(W0){for(l=l.memoizedState;l!==null;){var c=l.queue;c!==null&&(c.pending=null),l=l.next}W0=!1}yo=0,Qt=gt=Pe=null,qc=!1,ph=Q0=0,Pc=null}function Si(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Pe.memoizedState=Qt=l:Qt=Qt.next=l,Qt}function Zt(){if(gt===null){var l=Pe.alternate;l=l!==null?l.memoizedState:null}else l=gt.next;var c=Qt===null?Pe.memoizedState:Qt.next;if(c!==null)Qt=c,gt=l;else{if(l===null)throw Pe.alternate===null?Error(i(467)):Error(i(310));gt=l,l={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Qt===null?Pe.memoizedState=Qt=l:Qt=Qt.next=l}return Qt}function H2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function mh(l){var c=ph;return ph+=1,Pc===null&&(Pc=[]),l=kD(Pc,l,c),c=Pe,(Qt===null?c.memoizedState:Qt.next)===null&&(c=c.alternate,R.H=c===null||c.memoizedState===null?vR:bR),l}function Z0(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return mh(l);if(l.$$typeof===A)return Bn(l)}throw Error(i(438,String(l)))}function G2(l){var c=null,g=Pe.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=Pe.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=H2(),Pe.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(l),m=0;m<l;m++)g[m]=B;return c.index++,g}function ys(l,c){return typeof c=="function"?c(l):c}function K0(l){var c=Zt();return Y2(c,gt,l)}function Y2(l,c,g){var m=l.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=l.baseQueue,E=m.pending;if(E!==null){if(x!==null){var C=x.next;x.next=E.next,E.next=C}c.baseQueue=x=E,m.pending=null}if(E=l.baseState,x===null)l.memoizedState=E;else{c=x.next;var O=C=null,L=null,Y=c,ee=!1;do{var ie=Y.lane&-536870913;if(ie!==Y.lane?(Ze&ie)===ie:(yo&ie)===ie){var V=Y.revertLane;if(V===0)L!==null&&(L=L.next={lane:0,revertLane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),ie===Lc&&(ee=!0);else if((yo&V)===V){Y=Y.next,V===Lc&&(ee=!0);continue}else ie={lane:0,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(O=L=ie,C=E):L=L.next=ie,Pe.lanes|=V,wo|=V;ie=Y.action,Wl&&g(E,ie),E=Y.hasEagerState?Y.eagerState:g(E,ie)}else V={lane:ie,revertLane:Y.revertLane,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null},L===null?(O=L=V,C=E):L=L.next=V,Pe.lanes|=ie,wo|=ie;Y=Y.next}while(Y!==null&&Y!==c);if(L===null?C=E:L.next=O,!Pi(E,l.memoizedState)&&(dn=!0,ee&&(g=Bc,g!==null)))throw g;l.memoizedState=E,l.baseState=C,l.baseQueue=L,m.lastRenderedState=E}return x===null&&(m.lanes=0),[l.memoizedState,m.dispatch]}function X2(l){var c=Zt(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=l;var m=g.dispatch,x=g.pending,E=c.memoizedState;if(x!==null){g.pending=null;var C=x=x.next;do E=l(E,C.action),C=C.next;while(C!==x);Pi(E,c.memoizedState)||(dn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),g.lastRenderedState=E}return[E,m]}function BD(l,c,g){var m=Pe,x=Zt(),E=at;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=c();var C=!Pi((gt||x).memoizedState,g);C&&(x.memoizedState=g,dn=!0),x=x.queue;var O=PD.bind(null,m,x,l);if(yh(2048,8,O,[l]),x.getSnapshot!==c||C||Qt!==null&&Qt.memoizedState.tag&1){if(m.flags|=2048,Ic(9,J0(),qD.bind(null,m,x,g,c),null),Et===null)throw Error(i(349));E||(yo&124)!==0||UD(m,c,g)}return g}function UD(l,c,g){l.flags|=16384,l={getSnapshot:c,value:g},c=Pe.updateQueue,c===null?(c=H2(),Pe.updateQueue=c,c.stores=[l]):(g=c.stores,g===null?c.stores=[l]:g.push(l))}function qD(l,c,g,m){c.value=g,c.getSnapshot=m,ID(c)&&jD(l)}function PD(l,c,g){return g(function(){ID(c)&&jD(l)})}function ID(l){var c=l.getSnapshot;l=l.value;try{var g=c();return!Pi(l,g)}catch{return!0}}function jD(l){var c=Rc(l,2);c!==null&&Xi(c,l,2)}function V2(l){var c=Si();if(typeof l=="function"){var g=l;if(l=g(),Wl){uo(!0);try{g()}finally{uo(!1)}}}return c.memoizedState=c.baseState=l,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:l},c}function HD(l,c,g,m){return l.baseState=g,Y2(l,gt,typeof m=="function"?m:ys)}function GV(l,c,g,m,x){if(tm(l))throw Error(i(485));if(l=c.action,l!==null){var E={payload:x,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){E.listeners.push(C)}};R.T!==null?g(!0):E.isTransition=!1,m(E),g=c.pending,g===null?(E.next=c.pending=E,GD(c,E)):(E.next=g.next,c.pending=g.next=E)}}function GD(l,c){var g=c.action,m=c.payload,x=l.state;if(c.isTransition){var E=R.T,C={};R.T=C;try{var O=g(x,m),L=R.S;L!==null&&L(C,O),YD(l,c,O)}catch(Y){W2(l,c,Y)}finally{R.T=E}}else try{E=g(x,m),YD(l,c,E)}catch(Y){W2(l,c,Y)}}function YD(l,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){XD(l,c,m)},function(m){return W2(l,c,m)}):XD(l,c,g)}function XD(l,c,g){c.status="fulfilled",c.value=g,VD(c),l.state=g,c=l.pending,c!==null&&(g=c.next,g===c?l.pending=null:(g=g.next,c.next=g,GD(l,g)))}function W2(l,c,g){var m=l.pending;if(l.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,VD(c),c=c.next;while(c!==m)}l.action=null}function VD(l){l=l.listeners;for(var c=0;c<l.length;c++)(0,l[c])()}function WD(l,c){return c}function QD(l,c){if(at){var g=Et.formState;if(g!==null){e:{var m=Pe;if(at){if(zt){t:{for(var x=zt,E=xa;x.nodeType!==8;){if(!E){x=null;break t}if(x=Pr(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){zt=Pr(x.nextSibling),m=x.data==="F!";break e}}Gl(m)}m=!1}m&&(c=g[0])}}return g=Si(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:WD,lastRenderedState:c},g.queue=m,g=pR.bind(null,Pe,m),m.dispatch=g,m=V2(!1),E=eS.bind(null,Pe,!1,m.queue),m=Si(),x={state:c,dispatch:null,action:l,pending:null},m.queue=x,g=GV.bind(null,Pe,x,E,g),x.dispatch=g,m.memoizedState=l,[c,g,!1]}function ZD(l){var c=Zt();return KD(c,gt,l)}function KD(l,c,g){if(c=Y2(l,c,WD)[0],l=K0(ys)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=mh(c)}catch(C){throw C===ch?Y0:C}else m=c;c=Zt();var x=c.queue,E=x.dispatch;return g!==c.memoizedState&&(Pe.flags|=2048,Ic(9,J0(),YV.bind(null,x,g),null)),[m,E,l]}function YV(l,c){l.action=c}function JD(l){var c=Zt(),g=gt;if(g!==null)return KD(c,g,l);Zt(),c=c.memoizedState,g=Zt();var m=g.queue.dispatch;return g.memoizedState=l,[c,m,!1]}function Ic(l,c,g,m){return l={tag:l,create:g,deps:m,inst:c,next:null},c=Pe.updateQueue,c===null&&(c=H2(),Pe.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=l.next=l:(m=g.next,g.next=l,l.next=m,c.lastEffect=l),l}function J0(){return{destroy:void 0,resource:void 0}}function eR(){return Zt().memoizedState}function em(l,c,g,m){var x=Si();m=m===void 0?null:m,Pe.flags|=l,x.memoizedState=Ic(1|c,J0(),g,m)}function yh(l,c,g,m){var x=Zt();m=m===void 0?null:m;var E=x.memoizedState.inst;gt!==null&&m!==null&&U2(m,gt.memoizedState.deps)?x.memoizedState=Ic(c,E,g,m):(Pe.flags|=l,x.memoizedState=Ic(1|c,E,g,m))}function tR(l,c){em(8390656,8,l,c)}function nR(l,c){yh(2048,8,l,c)}function iR(l,c){return yh(4,2,l,c)}function rR(l,c){return yh(4,4,l,c)}function aR(l,c){if(typeof c=="function"){l=l();var g=c(l);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return l=l(),c.current=l,function(){c.current=null}}function sR(l,c,g){g=g!=null?g.concat([l]):null,yh(4,4,aR.bind(null,c,l),g)}function Q2(){}function oR(l,c){var g=Zt();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&U2(c,m[1])?m[0]:(g.memoizedState=[l,c],l)}function lR(l,c){var g=Zt();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&U2(c,m[1]))return m[0];if(m=l(),Wl){uo(!0);try{l()}finally{uo(!1)}}return g.memoizedState=[m,c],m}function Z2(l,c,g){return g===void 0||(yo&1073741824)!==0?l.memoizedState=c:(l.memoizedState=g,l=fN(),Pe.lanes|=l,wo|=l,g)}function uR(l,c,g,m){return Pi(g,c)?g:Uc.current!==null?(l=Z2(l,g,m),Pi(l,c)||(dn=!0),l):(yo&42)===0?(dn=!0,l.memoizedState=g):(l=fN(),Pe.lanes|=l,wo|=l,c)}function cR(l,c,g,m,x){var E=q.p;q.p=E!==0&&8>E?E:8;var C=R.T,O={};R.T=O,eS(l,!1,c,g);try{var L=x(),Y=R.S;if(Y!==null&&Y(O,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var ee=IV(L,m);vh(l,c,ee,Yi(l))}else vh(l,c,m,Yi(l))}catch(ie){vh(l,c,{then:function(){},status:"rejected",reason:ie},Yi())}finally{q.p=E,R.T=C}}function XV(){}function K2(l,c,g,m){if(l.tag!==5)throw Error(i(476));var x=fR(l).queue;cR(l,x,c,X,g===null?XV:function(){return dR(l),g(m)})}function fR(l){var c=l.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:X},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ys,lastRenderedState:g},next:null},l.memoizedState=c,l=l.alternate,l!==null&&(l.memoizedState=c),c}function dR(l){var c=fR(l).next.queue;vh(l,c,{},Yi())}function J2(){return Bn(Fh)}function hR(){return Zt().memoizedState}function gR(){return Zt().memoizedState}function VV(l){for(var c=l.return;c!==null;){switch(c.tag){case 24:case 3:var g=Yi();l=po(g);var m=mo(c,l,g);m!==null&&(Xi(m,c,g),dh(m,c,g)),c={cache:M2()},l.payload=c;return}c=c.return}}function WV(l,c,g){var m=Yi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},tm(l)?mR(c,g):(g=b2(l,c,g,m),g!==null&&(Xi(g,l,m),yR(g,c,m)))}function pR(l,c,g){var m=Yi();vh(l,c,g,m)}function vh(l,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(tm(l))mR(c,x);else{var E=l.alternate;if(l.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var C=c.lastRenderedState,O=E(C,g);if(x.hasEagerState=!0,x.eagerState=O,Pi(O,C))return B0(l,c,x,0),Et===null&&L0(),!1}catch{}finally{}if(g=b2(l,c,x,m),g!==null)return Xi(g,l,m),yR(g,c,m),!0}return!1}function eS(l,c,g,m){if(m={lane:2,revertLane:DS(),action:m,hasEagerState:!1,eagerState:null,next:null},tm(l)){if(c)throw Error(i(479))}else c=b2(l,g,m,2),c!==null&&Xi(c,l,2)}function tm(l){var c=l.alternate;return l===Pe||c!==null&&c===Pe}function mR(l,c){qc=W0=!0;var g=l.pending;g===null?c.next=c:(c.next=g.next,g.next=c),l.pending=c}function yR(l,c,g){if((g&4194048)!==0){var m=c.lanes;m&=l.pendingLanes,g|=m,c.lanes=g,AO(l,g)}}var nm={readContext:Bn,use:Z0,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useLayoutEffect:It,useInsertionEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useSyncExternalStore:It,useId:It,useHostTransitionStatus:It,useFormState:It,useActionState:It,useOptimistic:It,useMemoCache:It,useCacheRefresh:It},vR={readContext:Bn,use:Z0,useCallback:function(l,c){return Si().memoizedState=[l,c===void 0?null:c],l},useContext:Bn,useEffect:tR,useImperativeHandle:function(l,c,g){g=g!=null?g.concat([l]):null,em(4194308,4,aR.bind(null,c,l),g)},useLayoutEffect:function(l,c){return em(4194308,4,l,c)},useInsertionEffect:function(l,c){em(4,2,l,c)},useMemo:function(l,c){var g=Si();c=c===void 0?null:c;var m=l();if(Wl){uo(!0);try{l()}finally{uo(!1)}}return g.memoizedState=[m,c],m},useReducer:function(l,c,g){var m=Si();if(g!==void 0){var x=g(c);if(Wl){uo(!0);try{g(c)}finally{uo(!1)}}}else x=c;return m.memoizedState=m.baseState=x,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:x},m.queue=l,l=l.dispatch=WV.bind(null,Pe,l),[m.memoizedState,l]},useRef:function(l){var c=Si();return l={current:l},c.memoizedState=l},useState:function(l){l=V2(l);var c=l.queue,g=pR.bind(null,Pe,c);return c.dispatch=g,[l.memoizedState,g]},useDebugValue:Q2,useDeferredValue:function(l,c){var g=Si();return Z2(g,l,c)},useTransition:function(){var l=V2(!1);return l=cR.bind(null,Pe,l.queue,!0,!1),Si().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,c,g){var m=Pe,x=Si();if(at){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),Et===null)throw Error(i(349));(Ze&124)!==0||UD(m,c,g)}x.memoizedState=g;var E={value:g,getSnapshot:c};return x.queue=E,tR(PD.bind(null,m,E,l),[l]),m.flags|=2048,Ic(9,J0(),qD.bind(null,m,E,g,c),null),g},useId:function(){var l=Si(),c=Et.identifierPrefix;if(at){var g=gs,m=hs;g=(m&~(1<<32-qi(m)-1)).toString(32)+g,c="«"+c+"R"+g,g=Q0++,0<g&&(c+="H"+g.toString(32)),c+="»"}else g=jV++,c="«"+c+"r"+g.toString(32)+"»";return l.memoizedState=c},useHostTransitionStatus:J2,useFormState:QD,useActionState:QD,useOptimistic:function(l){var c=Si();c.memoizedState=c.baseState=l;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=eS.bind(null,Pe,!0,g),g.dispatch=c,[l,c]},useMemoCache:G2,useCacheRefresh:function(){return Si().memoizedState=VV.bind(null,Pe)}},bR={readContext:Bn,use:Z0,useCallback:oR,useContext:Bn,useEffect:nR,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:rR,useMemo:lR,useReducer:K0,useRef:eR,useState:function(){return K0(ys)},useDebugValue:Q2,useDeferredValue:function(l,c){var g=Zt();return uR(g,gt.memoizedState,l,c)},useTransition:function(){var l=K0(ys)[0],c=Zt().memoizedState;return[typeof l=="boolean"?l:mh(l),c]},useSyncExternalStore:BD,useId:hR,useHostTransitionStatus:J2,useFormState:ZD,useActionState:ZD,useOptimistic:function(l,c){var g=Zt();return HD(g,gt,l,c)},useMemoCache:G2,useCacheRefresh:gR},QV={readContext:Bn,use:Z0,useCallback:oR,useContext:Bn,useEffect:nR,useImperativeHandle:sR,useInsertionEffect:iR,useLayoutEffect:rR,useMemo:lR,useReducer:X2,useRef:eR,useState:function(){return X2(ys)},useDebugValue:Q2,useDeferredValue:function(l,c){var g=Zt();return gt===null?Z2(g,l,c):uR(g,gt.memoizedState,l,c)},useTransition:function(){var l=X2(ys)[0],c=Zt().memoizedState;return[typeof l=="boolean"?l:mh(l),c]},useSyncExternalStore:BD,useId:hR,useHostTransitionStatus:J2,useFormState:JD,useActionState:JD,useOptimistic:function(l,c){var g=Zt();return gt!==null?HD(g,gt,l,c):(g.baseState=l,[l,g.queue.dispatch])},useMemoCache:G2,useCacheRefresh:gR},jc=null,bh=0;function im(l){var c=bh;return bh+=1,jc===null&&(jc=[]),kD(jc,l,c)}function xh(l,c){c=c.props.ref,l.ref=c!==void 0?c:null}function rm(l,c){throw c.$$typeof===h?Error(i(525)):(l=Object.prototype.toString.call(c),Error(i(31,l==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":l)))}function xR(l){var c=l._init;return c(l._payload)}function SR(l){function c(j,P){if(l){var H=j.deletions;H===null?(j.deletions=[P],j.flags|=16):H.push(P)}}function g(j,P){if(!l)return null;for(;P!==null;)c(j,P),P=P.sibling;return null}function m(j){for(var P=new Map;j!==null;)j.key!==null?P.set(j.key,j):P.set(j.index,j),j=j.sibling;return P}function x(j,P){return j=ds(j,P),j.index=0,j.sibling=null,j}function E(j,P,H){return j.index=H,l?(H=j.alternate,H!==null?(H=H.index,H<P?(j.flags|=67108866,P):H):(j.flags|=67108866,P)):(j.flags|=1048576,P)}function C(j){return l&&j.alternate===null&&(j.flags|=67108866),j}function O(j,P,H,ne){return P===null||P.tag!==6?(P=S2(H,j.mode,ne),P.return=j,P):(P=x(P,H),P.return=j,P)}function L(j,P,H,ne){var Se=H.type;return Se===v?ee(j,P,H.props.children,ne,H.key):P!==null&&(P.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&xR(Se)===P.type)?(P=x(P,H.props),xh(P,H),P.return=j,P):(P=q0(H.type,H.key,H.props,null,j.mode,ne),xh(P,H),P.return=j,P)}function Y(j,P,H,ne){return P===null||P.tag!==4||P.stateNode.containerInfo!==H.containerInfo||P.stateNode.implementation!==H.implementation?(P=E2(H,j.mode,ne),P.return=j,P):(P=x(P,H.children||[]),P.return=j,P)}function ee(j,P,H,ne,Se){return P===null||P.tag!==7?(P=Pl(H,j.mode,ne,Se),P.return=j,P):(P=x(P,H),P.return=j,P)}function ie(j,P,H){if(typeof P=="string"&&P!==""||typeof P=="number"||typeof P=="bigint")return P=S2(""+P,j.mode,H),P.return=j,P;if(typeof P=="object"&&P!==null){switch(P.$$typeof){case p:return H=q0(P.type,P.key,P.props,null,j.mode,H),xh(H,P),H.return=j,H;case y:return P=E2(P,j.mode,H),P.return=j,P;case D:var ne=P._init;return P=ne(P._payload),ie(j,P,H)}if(z(P)||G(P))return P=Pl(P,j.mode,H,null),P.return=j,P;if(typeof P.then=="function")return ie(j,im(P),H);if(P.$$typeof===A)return ie(j,H0(j,P),H);rm(j,P)}return null}function V(j,P,H,ne){var Se=P!==null?P.key:null;if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return Se!==null?null:O(j,P,""+H,ne);if(typeof H=="object"&&H!==null){switch(H.$$typeof){case p:return H.key===Se?L(j,P,H,ne):null;case y:return H.key===Se?Y(j,P,H,ne):null;case D:return Se=H._init,H=Se(H._payload),V(j,P,H,ne)}if(z(H)||G(H))return Se!==null?null:ee(j,P,H,ne,null);if(typeof H.then=="function")return V(j,P,im(H),ne);if(H.$$typeof===A)return V(j,P,H0(j,H),ne);rm(j,H)}return null}function W(j,P,H,ne,Se){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return j=j.get(H)||null,O(P,j,""+ne,Se);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case p:return j=j.get(ne.key===null?H:ne.key)||null,L(P,j,ne,Se);case y:return j=j.get(ne.key===null?H:ne.key)||null,Y(P,j,ne,Se);case D:var je=ne._init;return ne=je(ne._payload),W(j,P,H,ne,Se)}if(z(ne)||G(ne))return j=j.get(H)||null,ee(P,j,ne,Se,null);if(typeof ne.then=="function")return W(j,P,H,im(ne),Se);if(ne.$$typeof===A)return W(j,P,H,H0(P,ne),Se);rm(P,ne)}return null}function Ne(j,P,H,ne){for(var Se=null,je=null,we=P,De=P=0,gn=null;we!==null&&De<H.length;De++){we.index>De?(gn=we,we=null):gn=we.sibling;var et=V(j,we,H[De],ne);if(et===null){we===null&&(we=gn);break}l&&we&&et.alternate===null&&c(j,we),P=E(et,P,De),je===null?Se=et:je.sibling=et,je=et,we=gn}if(De===H.length)return g(j,we),at&&jl(j,De),Se;if(we===null){for(;De<H.length;De++)we=ie(j,H[De],ne),we!==null&&(P=E(we,P,De),je===null?Se=we:je.sibling=we,je=we);return at&&jl(j,De),Se}for(we=m(we);De<H.length;De++)gn=W(we,j,De,H[De],ne),gn!==null&&(l&&gn.alternate!==null&&we.delete(gn.key===null?De:gn.key),P=E(gn,P,De),je===null?Se=gn:je.sibling=gn,je=gn);return l&&we.forEach(function(Ro){return c(j,Ro)}),at&&jl(j,De),Se}function Oe(j,P,H,ne){if(H==null)throw Error(i(151));for(var Se=null,je=null,we=P,De=P=0,gn=null,et=H.next();we!==null&&!et.done;De++,et=H.next()){we.index>De?(gn=we,we=null):gn=we.sibling;var Ro=V(j,we,et.value,ne);if(Ro===null){we===null&&(we=gn);break}l&&we&&Ro.alternate===null&&c(j,we),P=E(Ro,P,De),je===null?Se=Ro:je.sibling=Ro,je=Ro,we=gn}if(et.done)return g(j,we),at&&jl(j,De),Se;if(we===null){for(;!et.done;De++,et=H.next())et=ie(j,et.value,ne),et!==null&&(P=E(et,P,De),je===null?Se=et:je.sibling=et,je=et);return at&&jl(j,De),Se}for(we=m(we);!et.done;De++,et=H.next())et=W(we,j,De,et.value,ne),et!==null&&(l&&et.alternate!==null&&we.delete(et.key===null?De:et.key),P=E(et,P,De),je===null?Se=et:je.sibling=et,je=et);return l&&we.forEach(function(ZW){return c(j,ZW)}),at&&jl(j,De),Se}function mt(j,P,H,ne){if(typeof H=="object"&&H!==null&&H.type===v&&H.key===null&&(H=H.props.children),typeof H=="object"&&H!==null){switch(H.$$typeof){case p:e:{for(var Se=H.key;P!==null;){if(P.key===Se){if(Se=H.type,Se===v){if(P.tag===7){g(j,P.sibling),ne=x(P,H.props.children),ne.return=j,j=ne;break e}}else if(P.elementType===Se||typeof Se=="object"&&Se!==null&&Se.$$typeof===D&&xR(Se)===P.type){g(j,P.sibling),ne=x(P,H.props),xh(ne,H),ne.return=j,j=ne;break e}g(j,P);break}else c(j,P);P=P.sibling}H.type===v?(ne=Pl(H.props.children,j.mode,ne,H.key),ne.return=j,j=ne):(ne=q0(H.type,H.key,H.props,null,j.mode,ne),xh(ne,H),ne.return=j,j=ne)}return C(j);case y:e:{for(Se=H.key;P!==null;){if(P.key===Se)if(P.tag===4&&P.stateNode.containerInfo===H.containerInfo&&P.stateNode.implementation===H.implementation){g(j,P.sibling),ne=x(P,H.children||[]),ne.return=j,j=ne;break e}else{g(j,P);break}else c(j,P);P=P.sibling}ne=E2(H,j.mode,ne),ne.return=j,j=ne}return C(j);case D:return Se=H._init,H=Se(H._payload),mt(j,P,H,ne)}if(z(H))return Ne(j,P,H,ne);if(G(H)){if(Se=G(H),typeof Se!="function")throw Error(i(150));return H=Se.call(H),Oe(j,P,H,ne)}if(typeof H.then=="function")return mt(j,P,im(H),ne);if(H.$$typeof===A)return mt(j,P,H0(j,H),ne);rm(j,H)}return typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint"?(H=""+H,P!==null&&P.tag===6?(g(j,P.sibling),ne=x(P,H),ne.return=j,j=ne):(g(j,P),ne=S2(H,j.mode,ne),ne.return=j,j=ne),C(j)):g(j,P)}return function(j,P,H,ne){try{bh=0;var Se=mt(j,P,H,ne);return jc=null,Se}catch(we){if(we===ch||we===Y0)throw we;var je=Ii(29,we,null,j.mode);return je.lanes=ne,je.return=j,je}finally{}}}var Hc=SR(!0),ER=SR(!1),mr=xe(null),Sa=null;function vo(l){var c=l.alternate;ye(tn,tn.current&1),ye(mr,l),Sa===null&&(c===null||Uc.current!==null||c.memoizedState!==null)&&(Sa=l)}function _R(l){if(l.tag===22){if(ye(tn,tn.current),ye(mr,l),Sa===null){var c=l.alternate;c!==null&&c.memoizedState!==null&&(Sa=l)}}else bo()}function bo(){ye(tn,tn.current),ye(mr,mr.current)}function vs(l){he(mr),Sa===l&&(Sa=null),he(tn)}var tn=xe(0);function am(l){for(var c=l;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||HS(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function tS(l,c,g,m){c=l.memoizedState,g=g(m,c),g=g==null?c:d({},c,g),l.memoizedState=g,l.lanes===0&&(l.updateQueue.baseState=g)}var nS={enqueueSetState:function(l,c,g){l=l._reactInternals;var m=Yi(),x=po(m);x.payload=c,g!=null&&(x.callback=g),c=mo(l,x,m),c!==null&&(Xi(c,l,m),dh(c,l,m))},enqueueReplaceState:function(l,c,g){l=l._reactInternals;var m=Yi(),x=po(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=mo(l,x,m),c!==null&&(Xi(c,l,m),dh(c,l,m))},enqueueForceUpdate:function(l,c){l=l._reactInternals;var g=Yi(),m=po(g);m.tag=2,c!=null&&(m.callback=c),c=mo(l,m,g),c!==null&&(Xi(c,l,g),dh(c,l,g))}};function wR(l,c,g,m,x,E,C){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(m,E,C):c.prototype&&c.prototype.isPureReactComponent?!nh(g,m)||!nh(x,E):!0}function AR(l,c,g,m){l=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==l&&nS.enqueueReplaceState(c,c.state,null)}function Ql(l,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(l=l.defaultProps){g===c&&(g=d({},g));for(var x in l)g[x]===void 0&&(g[x]=l[x])}return g}var sm=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function $R(l){sm(l)}function CR(l){console.error(l)}function TR(l){sm(l)}function om(l,c){try{var g=l.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function MR(l,c,g){try{var m=l.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function iS(l,c,g){return g=po(g),g.tag=3,g.payload={element:null},g.callback=function(){om(l,c)},g}function kR(l){return l=po(l),l.tag=3,l}function OR(l,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;l.payload=function(){return x(E)},l.callback=function(){MR(c,g,m)}}var C=g.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(l.callback=function(){MR(c,g,m),typeof x!="function"&&(Ao===null?Ao=new Set([this]):Ao.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function ZV(l,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&oh(c,g,x,!0),g=mr.current,g!==null){switch(g.tag){case 13:return Sa===null?CS():g.alternate===null&&Ft===0&&(Ft=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===D2?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),MS(l,m,x)),!1;case 22:return g.flags|=65536,m===D2?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),MS(l,m,x)),!1}throw Error(i(435,g.tag))}return MS(l,m,x),CS(),!1}if(at)return c=mr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==A2&&(l=Error(i(422),{cause:m}),sh(dr(l,g)))):(m!==A2&&(c=Error(i(423),{cause:m}),sh(dr(c,g))),l=l.current.alternate,l.flags|=65536,x&=-x,l.lanes|=x,m=dr(m,g),x=iS(l.stateNode,m,x),z2(l,x),Ft!==4&&(Ft=2)),!1;var E=Error(i(520),{cause:m});if(E=dr(E,g),Ch===null?Ch=[E]:Ch.push(E),Ft!==4&&(Ft=2),c===null)return!0;m=dr(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,l=x&-x,g.lanes|=l,l=iS(g.stateNode,m,l),z2(g,l),!1;case 1:if(c=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ao===null||!Ao.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=kR(x),OR(x,l,g,m),z2(g,x),!1}g=g.return}while(g!==null);return!1}var DR=Error(i(461)),dn=!1;function An(l,c,g,m){c.child=l===null?ER(c,null,g,m):Hc(c,l.child,g,m)}function RR(l,c,g,m,x){g=g.render;var E=c.ref;if("ref"in m){var C={};for(var O in m)O!=="ref"&&(C[O]=m[O])}else C=m;return Xl(c),m=q2(l,c,g,C,E,x),O=P2(),l!==null&&!dn?(I2(l,c,x),bs(l,c,x)):(at&&O&&_2(c),c.flags|=1,An(l,c,m,x),c.child)}function NR(l,c,g,m,x){if(l===null){var E=g.type;return typeof E=="function"&&!x2(E)&&E.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=E,zR(l,c,E,m,x)):(l=q0(g.type,null,m,c,c.mode,x),l.ref=c.ref,l.return=c,c.child=l)}if(E=l.child,!fS(l,x)){var C=E.memoizedProps;if(g=g.compare,g=g!==null?g:nh,g(C,m)&&l.ref===c.ref)return bs(l,c,x)}return c.flags|=1,l=ds(E,m),l.ref=c.ref,l.return=c,c.child=l}function zR(l,c,g,m,x){if(l!==null){var E=l.memoizedProps;if(nh(E,m)&&l.ref===c.ref)if(dn=!1,c.pendingProps=m=E,fS(l,x))(l.flags&131072)!==0&&(dn=!0);else return c.lanes=l.lanes,bs(l,c,x)}return rS(l,c,g,m,x)}function FR(l,c,g){var m=c.pendingProps,x=m.children,E=l!==null?l.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,l!==null){for(x=c.child=l.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return LR(l,c,m,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},l!==null&&G0(c,E!==null?E.cachePool:null),E!==null?zD(c,E):L2(),_R(c);else return c.lanes=c.childLanes=536870912,LR(l,c,E!==null?E.baseLanes|g:g,g)}else E!==null?(G0(c,E.cachePool),zD(c,E),bo(),c.memoizedState=null):(l!==null&&G0(c,null),L2(),bo());return An(l,c,x,g),c.child}function LR(l,c,g,m){var x=O2();return x=x===null?null:{parent:en._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},l!==null&&G0(c,null),L2(),_R(c),l!==null&&oh(l,c,m,!0),null}function lm(l,c){var g=c.ref;if(g===null)l!==null&&l.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(l===null||l.ref!==g)&&(c.flags|=4194816)}}function rS(l,c,g,m,x){return Xl(c),g=q2(l,c,g,m,void 0,x),m=P2(),l!==null&&!dn?(I2(l,c,x),bs(l,c,x)):(at&&m&&_2(c),c.flags|=1,An(l,c,g,x),c.child)}function BR(l,c,g,m,x,E){return Xl(c),c.updateQueue=null,g=LD(c,m,g,x),FD(l),m=P2(),l!==null&&!dn?(I2(l,c,E),bs(l,c,E)):(at&&m&&_2(c),c.flags|=1,An(l,c,g,E),c.child)}function UR(l,c,g,m,x){if(Xl(c),c.stateNode===null){var E=Nc,C=g.contextType;typeof C=="object"&&C!==null&&(E=Bn(C)),E=new g(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=nS,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},R2(c),C=g.contextType,E.context=typeof C=="object"&&C!==null?Bn(C):Nc,E.state=c.memoizedState,C=g.getDerivedStateFromProps,typeof C=="function"&&(tS(c,g,C,m),E.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(C=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),C!==E.state&&nS.enqueueReplaceState(E,E.state,null),gh(c,m,E,x),hh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(l===null){E=c.stateNode;var O=c.memoizedProps,L=Ql(g,O);E.props=L;var Y=E.context,ee=g.contextType;C=Nc,typeof ee=="object"&&ee!==null&&(C=Bn(ee));var ie=g.getDerivedStateFromProps;ee=typeof ie=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=c.pendingProps!==O,ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||Y!==C)&&AR(c,E,m,C),go=!1;var V=c.memoizedState;E.state=V,gh(c,m,E,x),hh(),Y=c.memoizedState,O||V!==Y||go?(typeof ie=="function"&&(tS(c,g,ie,m),Y=c.memoizedState),(L=go||wR(c,g,L,m,V,Y,C))?(ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=Y),E.props=m,E.state=Y,E.context=C,m=L):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,N2(l,c),C=c.memoizedProps,ee=Ql(g,C),E.props=ee,ie=c.pendingProps,V=E.context,Y=g.contextType,L=Nc,typeof Y=="object"&&Y!==null&&(L=Bn(Y)),O=g.getDerivedStateFromProps,(Y=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(C!==ie||V!==L)&&AR(c,E,m,L),go=!1,V=c.memoizedState,E.state=V,gh(c,m,E,x),hh();var W=c.memoizedState;C!==ie||V!==W||go||l!==null&&l.dependencies!==null&&j0(l.dependencies)?(typeof O=="function"&&(tS(c,g,O,m),W=c.memoizedState),(ee=go||wR(c,g,ee,m,V,W,L)||l!==null&&l.dependencies!==null&&j0(l.dependencies))?(Y||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,W,L),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,W,L)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||C===l.memoizedProps&&V===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===l.memoizedProps&&V===l.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=W),E.props=m,E.state=W,E.context=L,m=ee):(typeof E.componentDidUpdate!="function"||C===l.memoizedProps&&V===l.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||C===l.memoizedProps&&V===l.memoizedState||(c.flags|=1024),m=!1)}return E=m,lm(l,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,l!==null&&m?(c.child=Hc(c,l.child,null,x),c.child=Hc(c,null,g,x)):An(l,c,g,x),c.memoizedState=E.state,l=c.child):l=bs(l,c,x),l}function qR(l,c,g,m){return ah(),c.flags|=256,An(l,c,g,m),c.child}var aS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sS(l){return{baseLanes:l,cachePool:CD()}}function oS(l,c,g){return l=l!==null?l.childLanes&~g:0,c&&(l|=yr),l}function PR(l,c,g){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,C;if((C=E)||(C=l!==null&&l.memoizedState===null?!1:(tn.current&2)!==0),C&&(x=!0,c.flags&=-129),C=(c.flags&32)!==0,c.flags&=-33,l===null){if(at){if(x?vo(c):bo(),at){var O=zt,L;if(L=O){e:{for(L=O,O=xa;L.nodeType!==8;){if(!O){O=null;break e}if(L=Pr(L.nextSibling),L===null){O=null;break e}}O=L}O!==null?(c.memoizedState={dehydrated:O,treeContext:Il!==null?{id:hs,overflow:gs}:null,retryLane:536870912,hydrationErrors:null},L=Ii(18,null,null,0),L.stateNode=O,L.return=c,c.child=L,ei=c,zt=null,L=!0):L=!1}L||Gl(c)}if(O=c.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return HS(O)?c.lanes=32:c.lanes=536870912,null;vs(c)}return O=m.children,m=m.fallback,x?(bo(),x=c.mode,O=um({mode:"hidden",children:O},x),m=Pl(m,x,g,null),O.return=c,m.return=c,O.sibling=m,c.child=O,x=c.child,x.memoizedState=sS(g),x.childLanes=oS(l,C,g),c.memoizedState=aS,m):(vo(c),lS(c,O))}if(L=l.memoizedState,L!==null&&(O=L.dehydrated,O!==null)){if(E)c.flags&256?(vo(c),c.flags&=-257,c=uS(l,c,g)):c.memoizedState!==null?(bo(),c.child=l.child,c.flags|=128,c=null):(bo(),x=m.fallback,O=c.mode,m=um({mode:"visible",children:m.children},O),x=Pl(x,O,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Hc(c,l.child,null,g),m=c.child,m.memoizedState=sS(g),m.childLanes=oS(l,C,g),c.memoizedState=aS,c=x);else if(vo(c),HS(O)){if(C=O.nextSibling&&O.nextSibling.dataset,C)var Y=C.dgst;C=Y,m=Error(i(419)),m.stack="",m.digest=C,sh({value:m,source:null,stack:null}),c=uS(l,c,g)}else if(dn||oh(l,c,g,!1),C=(g&l.childLanes)!==0,dn||C){if(C=Et,C!==null&&(m=g&-g,m=(m&42)!==0?1:Gx(m),m=(m&(C.suspendedLanes|g))!==0?0:m,m!==0&&m!==L.retryLane))throw L.retryLane=m,Rc(l,m),Xi(C,l,m),DR;O.data==="$?"||CS(),c=uS(l,c,g)}else O.data==="$?"?(c.flags|=192,c.child=l.child,c=null):(l=L.treeContext,zt=Pr(O.nextSibling),ei=c,at=!0,Hl=null,xa=!1,l!==null&&(gr[pr++]=hs,gr[pr++]=gs,gr[pr++]=Il,hs=l.id,gs=l.overflow,Il=c),c=lS(c,m.children),c.flags|=4096);return c}return x?(bo(),x=m.fallback,O=c.mode,L=l.child,Y=L.sibling,m=ds(L,{mode:"hidden",children:m.children}),m.subtreeFlags=L.subtreeFlags&65011712,Y!==null?x=ds(Y,x):(x=Pl(x,O,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,O=l.child.memoizedState,O===null?O=sS(g):(L=O.cachePool,L!==null?(Y=en._currentValue,L=L.parent!==Y?{parent:Y,pool:Y}:L):L=CD(),O={baseLanes:O.baseLanes|g,cachePool:L}),x.memoizedState=O,x.childLanes=oS(l,C,g),c.memoizedState=aS,m):(vo(c),g=l.child,l=g.sibling,g=ds(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,l!==null&&(C=c.deletions,C===null?(c.deletions=[l],c.flags|=16):C.push(l)),c.child=g,c.memoizedState=null,g)}function lS(l,c){return c=um({mode:"visible",children:c},l.mode),c.return=l,l.child=c}function um(l,c){return l=Ii(22,l,null,c),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function uS(l,c,g){return Hc(c,l.child,null,g),l=lS(c,c.pendingProps.children),l.flags|=2,c.memoizedState=null,l}function IR(l,c,g){l.lanes|=c;var m=l.alternate;m!==null&&(m.lanes|=c),C2(l.return,c,g)}function cS(l,c,g,m,x){var E=l.memoizedState;E===null?l.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function jR(l,c,g){var m=c.pendingProps,x=m.revealOrder,E=m.tail;if(An(l,c,m.children,g),m=tn.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=c.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&IR(l,g,c);else if(l.tag===19)IR(l,g,c);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===c)break e;for(;l.sibling===null;){if(l.return===null||l.return===c)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}m&=1}switch(ye(tn,m),x){case"forwards":for(g=c.child,x=null;g!==null;)l=g.alternate,l!==null&&am(l)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),cS(c,!1,x,g,E);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(l=x.alternate,l!==null&&am(l)===null){c.child=x;break}l=x.sibling,x.sibling=g,g=x,x=l}cS(c,!0,g,null,E);break;case"together":cS(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bs(l,c,g){if(l!==null&&(c.dependencies=l.dependencies),wo|=c.lanes,(g&c.childLanes)===0)if(l!==null){if(oh(l,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(l!==null&&c.child!==l.child)throw Error(i(153));if(c.child!==null){for(l=c.child,g=ds(l,l.pendingProps),c.child=g,g.return=c;l.sibling!==null;)l=l.sibling,g=g.sibling=ds(l,l.pendingProps),g.return=c;g.sibling=null}return c.child}function fS(l,c){return(l.lanes&c)!==0?!0:(l=l.dependencies,!!(l!==null&&j0(l)))}function KV(l,c,g){switch(c.tag){case 3:Bi(c,c.stateNode.containerInfo),ho(c,en,l.memoizedState.cache),ah();break;case 27:case 5:Fe(c);break;case 4:Bi(c,c.stateNode.containerInfo);break;case 10:ho(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(vo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?PR(l,c,g):(vo(c),l=bs(l,c,g),l!==null?l.sibling:null);vo(c);break;case 19:var x=(l.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(oh(l,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return jR(l,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ye(tn,tn.current),m)break;return null;case 22:case 23:return c.lanes=0,FR(l,c,g);case 24:ho(c,en,l.memoizedState.cache)}return bs(l,c,g)}function HR(l,c,g){if(l!==null)if(l.memoizedProps!==c.pendingProps)dn=!0;else{if(!fS(l,g)&&(c.flags&128)===0)return dn=!1,KV(l,c,g);dn=(l.flags&131072)!==0}else dn=!1,at&&(c.flags&1048576)!==0&&xD(c,I0,c.index);switch(c.lanes=0,c.tag){case 16:e:{l=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")x2(m)?(l=Ql(m,l),c.tag=1,c=UR(null,c,m,l,g)):(c.tag=0,c=rS(null,c,m,l,g));else{if(m!=null){if(x=m.$$typeof,x===$){c.tag=11,c=RR(null,c,m,l,g);break e}else if(x===M){c.tag=14,c=NR(null,c,m,l,g);break e}}throw c=U(m)||m,Error(i(306,c,""))}}return c;case 0:return rS(l,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=Ql(m,c.pendingProps),UR(l,c,m,x,g);case 3:e:{if(Bi(c,c.stateNode.containerInfo),l===null)throw Error(i(387));m=c.pendingProps;var E=c.memoizedState;x=E.element,N2(l,c),gh(c,m,null,g);var C=c.memoizedState;if(m=C.cache,ho(c,en,m),m!==E.cache&&T2(c,[en],g,!0),hh(),m=C.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:C.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=qR(l,c,m,g);break e}else if(m!==x){x=dr(Error(i(424)),c),sh(x),c=qR(l,c,m,g);break e}else{switch(l=c.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(zt=Pr(l.firstChild),ei=c,at=!0,Hl=null,xa=!0,g=ER(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(ah(),m===x){c=bs(l,c,g);break e}An(l,c,m,g)}c=c.child}return c;case 26:return lm(l,c),l===null?(g=VN(c.type,null,c.pendingProps,null))?c.memoizedState=g:at||(g=c.type,l=c.pendingProps,m=_m(wt.current).createElement(g),m[Ln]=c,m[bi]=l,Cn(m,g,l),fn(m),c.stateNode=m):c.memoizedState=VN(c.type,l.memoizedProps,c.pendingProps,l.memoizedState),null;case 27:return Fe(c),l===null&&at&&(m=c.stateNode=GN(c.type,c.pendingProps,wt.current),ei=c,xa=!0,x=zt,To(c.type)?(GS=x,zt=Pr(m.firstChild)):zt=x),An(l,c,c.pendingProps.children,g),lm(l,c),l===null&&(c.flags|=4194304),c.child;case 5:return l===null&&at&&((x=m=zt)&&(m=$W(m,c.type,c.pendingProps,xa),m!==null?(c.stateNode=m,ei=c,zt=Pr(m.firstChild),xa=!1,x=!0):x=!1),x||Gl(c)),Fe(c),x=c.type,E=c.pendingProps,C=l!==null?l.memoizedProps:null,m=E.children,PS(x,E)?m=null:C!==null&&PS(x,C)&&(c.flags|=32),c.memoizedState!==null&&(x=q2(l,c,HV,null,null,g),Fh._currentValue=x),lm(l,c),An(l,c,m,g),c.child;case 6:return l===null&&at&&((l=g=zt)&&(g=CW(g,c.pendingProps,xa),g!==null?(c.stateNode=g,ei=c,zt=null,l=!0):l=!1),l||Gl(c)),null;case 13:return PR(l,c,g);case 4:return Bi(c,c.stateNode.containerInfo),m=c.pendingProps,l===null?c.child=Hc(c,null,m,g):An(l,c,m,g),c.child;case 11:return RR(l,c,c.type,c.pendingProps,g);case 7:return An(l,c,c.pendingProps,g),c.child;case 8:return An(l,c,c.pendingProps.children,g),c.child;case 12:return An(l,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,ho(c,c.type,m.value),An(l,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Xl(c),x=Bn(x),m=m(x),c.flags|=1,An(l,c,m,g),c.child;case 14:return NR(l,c,c.type,c.pendingProps,g);case 15:return zR(l,c,c.type,c.pendingProps,g);case 19:return jR(l,c,g);case 31:return m=c.pendingProps,g=c.mode,m={mode:m.mode,children:m.children},l===null?(g=um(m,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=ds(l.child,m),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return FR(l,c,g);case 24:return Xl(c),m=Bn(en),l===null?(x=O2(),x===null&&(x=Et,E=M2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),c.memoizedState={parent:m,cache:x},R2(c),ho(c,en,x)):((l.lanes&g)!==0&&(N2(l,c),gh(c,null,null,g),hh()),x=l.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),ho(c,en,m)):(m=E.cache,ho(c,en,m),m!==x.cache&&T2(c,[en],g,!0))),An(l,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function xs(l){l.flags|=4}function GR(l,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!JN(c)){if(c=mr.current,c!==null&&((Ze&4194048)===Ze?Sa!==null:(Ze&62914560)!==Ze&&(Ze&536870912)===0||c!==Sa))throw fh=D2,TD;l.flags|=8192}}function cm(l,c){c!==null&&(l.flags|=4),l.flags&16384&&(c=l.tag!==22?_O():536870912,l.lanes|=c,Vc|=c)}function Sh(l,c){if(!at)switch(l.tailMode){case"hidden":c=l.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?l.tail=null:g.sibling=null;break;case"collapsed":g=l.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||l.tail===null?l.tail=null:l.tail.sibling=null:m.sibling=null}}function Ot(l){var c=l.alternate!==null&&l.alternate.child===l.child,g=0,m=0;if(c)for(var x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=l,x=x.sibling;else for(x=l.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=l,x=x.sibling;return l.subtreeFlags|=m,l.childLanes=g,c}function JV(l,c,g){var m=c.pendingProps;switch(w2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(c),null;case 1:return Ot(c),null;case 3:return g=c.stateNode,m=null,l!==null&&(m=l.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ms(en),pe(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(l===null||l.child===null)&&(rh(c)?xs(c):l===null||l.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,_D())),Ot(c),null;case 26:return g=c.memoizedState,l===null?(xs(c),g!==null?(Ot(c),GR(c,g)):(Ot(c),c.flags&=-16777217)):g?g!==l.memoizedState?(xs(c),Ot(c),GR(c,g)):(Ot(c),c.flags&=-16777217):(l.memoizedProps!==m&&xs(c),Ot(c),c.flags&=-16777217),null;case 27:Be(c),g=wt.current;var x=c.type;if(l!==null&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Ot(c),null}l=Re.current,rh(c)?SD(c):(l=GN(x,m,g),c.stateNode=l,xs(c))}return Ot(c),null;case 5:if(Be(c),g=c.type,l!==null&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Ot(c),null}if(l=Re.current,rh(c))SD(c);else{switch(x=_m(wt.current),l){case 1:l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":l=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":l=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":l=x.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?l.multiple=!0:m.size&&(l.size=m.size);break;default:l=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}l[Ln]=c,l[bi]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)l.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=l;e:switch(Cn(l,g,m),g){case"button":case"input":case"select":case"textarea":l=!!m.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&xs(c)}}return Ot(c),c.flags&=-16777217,null;case 6:if(l&&c.stateNode!=null)l.memoizedProps!==m&&xs(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(l=wt.current,rh(c)){if(l=c.stateNode,g=c.memoizedProps,m=null,x=ei,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}l[Ln]=c,l=!!(l.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||BN(l.nodeValue,g)),l||Gl(c)}else l=_m(l).createTextNode(m),l[Ln]=c,c.stateNode=l}return Ot(c),null;case 13:if(m=c.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(x=rh(c),m!==null&&m.dehydrated!==null){if(l===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[Ln]=c}else ah(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ot(c),x=!1}else x=_D(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(vs(c),c):(vs(c),null)}if(vs(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=m!==null,l=l!==null&&l.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==l&&g&&(c.child.flags|=8192),cm(c,c.updateQueue),Ot(c),null;case 4:return pe(),l===null&&FS(c.stateNode.containerInfo),Ot(c),null;case 10:return ms(c.type),Ot(c),null;case 19:if(he(tn),x=c.memoizedState,x===null)return Ot(c),null;if(m=(c.flags&128)!==0,E=x.rendering,E===null)if(m)Sh(x,!1);else{if(Ft!==0||l!==null&&(l.flags&128)!==0)for(l=c.child;l!==null;){if(E=am(l),E!==null){for(c.flags|=128,Sh(x,!1),l=E.updateQueue,c.updateQueue=l,cm(c,l),c.subtreeFlags=0,l=g,g=c.child;g!==null;)bD(g,l),g=g.sibling;return ye(tn,tn.current&1|2),c.child}l=l.sibling}x.tail!==null&&Wt()>hm&&(c.flags|=128,m=!0,Sh(x,!1),c.lanes=4194304)}else{if(!m)if(l=am(E),l!==null){if(c.flags|=128,m=!0,l=l.updateQueue,c.updateQueue=l,cm(c,l),Sh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!at)return Ot(c),null}else 2*Wt()-x.renderingStartTime>hm&&g!==536870912&&(c.flags|=128,m=!0,Sh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(l=x.last,l!==null?l.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Wt(),c.sibling=null,l=tn.current,ye(tn,m?l&1|2:l&1),c):(Ot(c),null);case 22:case 23:return vs(c),B2(),m=c.memoizedState!==null,l!==null?l.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(Ot(c),c.subtreeFlags&6&&(c.flags|=8192)):Ot(c),g=c.updateQueue,g!==null&&cm(c,g.retryQueue),g=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),l!==null&&he(Vl),null;case 24:return g=null,l!==null&&(g=l.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ms(en),Ot(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function eW(l,c){switch(w2(c),c.tag){case 1:return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 3:return ms(en),pe(),l=c.flags,(l&65536)!==0&&(l&128)===0?(c.flags=l&-65537|128,c):null;case 26:case 27:case 5:return Be(c),null;case 13:if(vs(c),l=c.memoizedState,l!==null&&l.dehydrated!==null){if(c.alternate===null)throw Error(i(340));ah()}return l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 19:return he(tn),null;case 4:return pe(),null;case 10:return ms(c.type),null;case 22:case 23:return vs(c),B2(),l!==null&&he(Vl),l=c.flags,l&65536?(c.flags=l&-65537|128,c):null;case 24:return ms(en),null;case 25:return null;default:return null}}function YR(l,c){switch(w2(c),c.tag){case 3:ms(en),pe();break;case 26:case 27:case 5:Be(c);break;case 4:pe();break;case 13:vs(c);break;case 19:he(tn);break;case 10:ms(c.type);break;case 22:case 23:vs(c),B2(),l!==null&&he(Vl);break;case 24:ms(en)}}function Eh(l,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&l)===l){m=void 0;var E=g.create,C=g.inst;m=E(),C.destroy=m}g=g.next}while(g!==x)}}catch(O){bt(c,c.return,O)}}function xo(l,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&l)===l){var C=m.inst,O=C.destroy;if(O!==void 0){C.destroy=void 0,x=c;var L=g,Y=O;try{Y()}catch(ee){bt(x,L,ee)}}}m=m.next}while(m!==E)}}catch(ee){bt(c,c.return,ee)}}function XR(l){var c=l.updateQueue;if(c!==null){var g=l.stateNode;try{ND(c,g)}catch(m){bt(l,l.return,m)}}}function VR(l,c,g){g.props=Ql(l.type,l.memoizedProps),g.state=l.memoizedState;try{g.componentWillUnmount()}catch(m){bt(l,c,m)}}function _h(l,c){try{var g=l.ref;if(g!==null){switch(l.tag){case 26:case 27:case 5:var m=l.stateNode;break;case 30:m=l.stateNode;break;default:m=l.stateNode}typeof g=="function"?l.refCleanup=g(m):g.current=m}}catch(x){bt(l,c,x)}}function Ea(l,c){var g=l.ref,m=l.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){bt(l,c,x)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){bt(l,c,x)}else g.current=null}function WR(l){var c=l.type,g=l.memoizedProps,m=l.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){bt(l,l.return,x)}}function dS(l,c,g){try{var m=l.stateNode;SW(m,l.type,g,c),m[bi]=c}catch(x){bt(l,l.return,x)}}function QR(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&To(l.type)||l.tag===4}function hS(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||QR(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&To(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function gS(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(l,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(l),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Em));else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode,c=null),l=l.child,l!==null))for(gS(l,c,g),l=l.sibling;l!==null;)gS(l,c,g),l=l.sibling}function fm(l,c,g){var m=l.tag;if(m===5||m===6)l=l.stateNode,c?g.insertBefore(l,c):g.appendChild(l);else if(m!==4&&(m===27&&To(l.type)&&(g=l.stateNode),l=l.child,l!==null))for(fm(l,c,g),l=l.sibling;l!==null;)fm(l,c,g),l=l.sibling}function ZR(l){var c=l.stateNode,g=l.memoizedProps;try{for(var m=l.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Cn(c,m,g),c[Ln]=l,c[bi]=g}catch(E){bt(l,l.return,E)}}var Ss=!1,jt=!1,pS=!1,KR=typeof WeakSet=="function"?WeakSet:Set,hn=null;function tW(l,c){if(l=l.containerInfo,US=Mm,l=uD(l),h2(l)){if("selectionStart"in l)var g={start:l.selectionStart,end:l.selectionEnd};else e:{g=(g=l.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var C=0,O=-1,L=-1,Y=0,ee=0,ie=l,V=null;t:for(;;){for(var W;ie!==g||x!==0&&ie.nodeType!==3||(O=C+x),ie!==E||m!==0&&ie.nodeType!==3||(L=C+m),ie.nodeType===3&&(C+=ie.nodeValue.length),(W=ie.firstChild)!==null;)V=ie,ie=W;for(;;){if(ie===l)break t;if(V===g&&++Y===x&&(O=C),V===E&&++ee===m&&(L=C),(W=ie.nextSibling)!==null)break;ie=V,V=ie.parentNode}ie=W}g=O===-1||L===-1?null:{start:O,end:L}}else g=null}g=g||{start:0,end:0}}else g=null;for(qS={focusedElem:l,selectionRange:g},Mm=!1,hn=c;hn!==null;)if(c=hn,l=c.child,(c.subtreeFlags&1024)!==0&&l!==null)l.return=c,hn=l;else for(;hn!==null;){switch(c=hn,E=c.alternate,l=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&E!==null){l=void 0,g=c,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var Ne=Ql(g.type,x,g.elementType===g.type);l=m.getSnapshotBeforeUpdate(Ne,E),m.__reactInternalSnapshotBeforeUpdate=l}catch(Oe){bt(g,g.return,Oe)}}break;case 3:if((l&1024)!==0){if(l=c.stateNode.containerInfo,g=l.nodeType,g===9)jS(l);else if(g===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":jS(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(i(163))}if(l=c.sibling,l!==null){l.return=c.return,hn=l;break}hn=c.return}}function JR(l,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:So(l,g),m&4&&Eh(5,g);break;case 1:if(So(l,g),m&4)if(l=g.stateNode,c===null)try{l.componentDidMount()}catch(C){bt(g,g.return,C)}else{var x=Ql(g.type,c.memoizedProps);c=c.memoizedState;try{l.componentDidUpdate(x,c,l.__reactInternalSnapshotBeforeUpdate)}catch(C){bt(g,g.return,C)}}m&64&&XR(g),m&512&&_h(g,g.return);break;case 3:if(So(l,g),m&64&&(l=g.updateQueue,l!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{ND(l,c)}catch(C){bt(g,g.return,C)}}break;case 27:c===null&&m&4&&ZR(g);case 26:case 5:So(l,g),c===null&&m&4&&WR(g),m&512&&_h(g,g.return);break;case 12:So(l,g);break;case 13:So(l,g),m&4&&nN(l,g),m&64&&(l=g.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(g=cW.bind(null,g),TW(l,g))));break;case 22:if(m=g.memoizedState!==null||Ss,!m){c=c!==null&&c.memoizedState!==null||jt,x=Ss;var E=jt;Ss=m,(jt=c)&&!E?Eo(l,g,(g.subtreeFlags&8772)!==0):So(l,g),Ss=x,jt=E}break;case 30:break;default:So(l,g)}}function eN(l){var c=l.alternate;c!==null&&(l.alternate=null,eN(c)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(c=l.stateNode,c!==null&&Vx(c)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Ct=null,Ei=!1;function Es(l,c,g){for(g=g.child;g!==null;)tN(l,c,g),g=g.sibling}function tN(l,c,g){if(Ui&&typeof Ui.onCommitFiberUnmount=="function")try{Ui.onCommitFiberUnmount(Hd,g)}catch{}switch(g.tag){case 26:jt||Ea(g,c),Es(l,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:jt||Ea(g,c);var m=Ct,x=Ei;To(g.type)&&(Ct=g.stateNode,Ei=!1),Es(l,c,g),Dh(g.stateNode),Ct=m,Ei=x;break;case 5:jt||Ea(g,c);case 6:if(m=Ct,x=Ei,Ct=null,Es(l,c,g),Ct=m,Ei=x,Ct!==null)if(Ei)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(g.stateNode)}catch(E){bt(g,c,E)}else try{Ct.removeChild(g.stateNode)}catch(E){bt(g,c,E)}break;case 18:Ct!==null&&(Ei?(l=Ct,jN(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,g.stateNode),qh(l)):jN(Ct,g.stateNode));break;case 4:m=Ct,x=Ei,Ct=g.stateNode.containerInfo,Ei=!0,Es(l,c,g),Ct=m,Ei=x;break;case 0:case 11:case 14:case 15:jt||xo(2,g,c),jt||xo(4,g,c),Es(l,c,g);break;case 1:jt||(Ea(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&VR(g,c,m)),Es(l,c,g);break;case 21:Es(l,c,g);break;case 22:jt=(m=jt)||g.memoizedState!==null,Es(l,c,g),jt=m;break;default:Es(l,c,g)}}function nN(l,c){if(c.memoizedState===null&&(l=c.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{qh(l)}catch(g){bt(c,c.return,g)}}function nW(l){switch(l.tag){case 13:case 19:var c=l.stateNode;return c===null&&(c=l.stateNode=new KR),c;case 22:return l=l.stateNode,c=l._retryCache,c===null&&(c=l._retryCache=new KR),c;default:throw Error(i(435,l.tag))}}function mS(l,c){var g=nW(l);c.forEach(function(m){var x=fW.bind(null,l,m);g.has(m)||(g.add(m),m.then(x,x))})}function ji(l,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=l,C=c,O=C;e:for(;O!==null;){switch(O.tag){case 27:if(To(O.type)){Ct=O.stateNode,Ei=!1;break e}break;case 5:Ct=O.stateNode,Ei=!1;break e;case 3:case 4:Ct=O.stateNode.containerInfo,Ei=!0;break e}O=O.return}if(Ct===null)throw Error(i(160));tN(E,C,x),Ct=null,Ei=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)iN(c,l),c=c.sibling}var qr=null;function iN(l,c){var g=l.alternate,m=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:ji(c,l),Hi(l),m&4&&(xo(3,l,l.return),Eh(3,l),xo(5,l,l.return));break;case 1:ji(c,l),Hi(l),m&512&&(jt||g===null||Ea(g,g.return)),m&64&&Ss&&(l=l.updateQueue,l!==null&&(m=l.callbacks,m!==null&&(g=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=qr;if(ji(c,l),Hi(l),m&512&&(jt||g===null||Ea(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=l.memoizedState,g===null)if(m===null)if(l.stateNode===null){e:{m=l.type,g=l.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Xd]||E[Ln]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),Cn(E,m,g),E[Ln]=l,fn(E),m=E;break e;case"link":var C=ZN("link","href",x).get(m+(g.href||""));if(C){for(var O=0;O<C.length;O++)if(E=C[O],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){C.splice(O,1);break t}}E=x.createElement(m),Cn(E,m,g),x.head.appendChild(E);break;case"meta":if(C=ZN("meta","content",x).get(m+(g.content||""))){for(O=0;O<C.length;O++)if(E=C[O],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){C.splice(O,1);break t}}E=x.createElement(m),Cn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[Ln]=l,fn(E),m=E}l.stateNode=m}else KN(x,l.type,l.stateNode);else l.stateNode=QN(x,m,l.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?KN(x,l.type,l.stateNode):QN(x,m,l.memoizedProps)):m===null&&l.stateNode!==null&&dS(l,l.memoizedProps,g.memoizedProps)}break;case 27:ji(c,l),Hi(l),m&512&&(jt||g===null||Ea(g,g.return)),g!==null&&m&4&&dS(l,l.memoizedProps,g.memoizedProps);break;case 5:if(ji(c,l),Hi(l),m&512&&(jt||g===null||Ea(g,g.return)),l.flags&32){x=l.stateNode;try{$c(x,"")}catch(W){bt(l,l.return,W)}}m&4&&l.stateNode!=null&&(x=l.memoizedProps,dS(l,x,g!==null?g.memoizedProps:x)),m&1024&&(pS=!0);break;case 6:if(ji(c,l),Hi(l),m&4){if(l.stateNode===null)throw Error(i(162));m=l.memoizedProps,g=l.stateNode;try{g.nodeValue=m}catch(W){bt(l,l.return,W)}}break;case 3:if($m=null,x=qr,qr=wm(c.containerInfo),ji(c,l),qr=x,Hi(l),m&4&&g!==null&&g.memoizedState.isDehydrated)try{qh(c.containerInfo)}catch(W){bt(l,l.return,W)}pS&&(pS=!1,rN(l));break;case 4:m=qr,qr=wm(l.stateNode.containerInfo),ji(c,l),Hi(l),qr=m;break;case 12:ji(c,l),Hi(l);break;case 13:ji(c,l),Hi(l),l.child.flags&8192&&l.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(ES=Wt()),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,mS(l,m)));break;case 22:x=l.memoizedState!==null;var L=g!==null&&g.memoizedState!==null,Y=Ss,ee=jt;if(Ss=Y||x,jt=ee||L,ji(c,l),jt=ee,Ss=Y,Hi(l),m&8192)e:for(c=l.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(g===null||L||Ss||jt||Zl(l)),g=null,c=l;;){if(c.tag===5||c.tag===26){if(g===null){L=g=c;try{if(E=L.stateNode,x)C=E.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{O=L.stateNode;var ie=L.memoizedProps.style,V=ie!=null&&ie.hasOwnProperty("display")?ie.display:null;O.style.display=V==null||typeof V=="boolean"?"":(""+V).trim()}}catch(W){bt(L,L.return,W)}}}else if(c.tag===6){if(g===null){L=c;try{L.stateNode.nodeValue=x?"":L.memoizedProps}catch(W){bt(L,L.return,W)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===l)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===l)break e;for(;c.sibling===null;){if(c.return===null||c.return===l)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=l.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,mS(l,g))));break;case 19:ji(c,l),Hi(l),m&4&&(m=l.updateQueue,m!==null&&(l.updateQueue=null,mS(l,m)));break;case 30:break;case 21:break;default:ji(c,l),Hi(l)}}function Hi(l){var c=l.flags;if(c&2){try{for(var g,m=l.return;m!==null;){if(QR(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=hS(l);fm(l,E,x);break;case 5:var C=g.stateNode;g.flags&32&&($c(C,""),g.flags&=-33);var O=hS(l);fm(l,O,C);break;case 3:case 4:var L=g.stateNode.containerInfo,Y=hS(l);gS(l,Y,L);break;default:throw Error(i(161))}}catch(ee){bt(l,l.return,ee)}l.flags&=-3}c&4096&&(l.flags&=-4097)}function rN(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var c=l;rN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),l=l.sibling}}function So(l,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)JR(l,c.alternate,c),c=c.sibling}function Zl(l){for(l=l.child;l!==null;){var c=l;switch(c.tag){case 0:case 11:case 14:case 15:xo(4,c,c.return),Zl(c);break;case 1:Ea(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&VR(c,c.return,g),Zl(c);break;case 27:Dh(c.stateNode);case 26:case 5:Ea(c,c.return),Zl(c);break;case 22:c.memoizedState===null&&Zl(c);break;case 30:Zl(c);break;default:Zl(c)}l=l.sibling}}function Eo(l,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=l,E=c,C=E.flags;switch(E.tag){case 0:case 11:case 15:Eo(x,E,g),Eh(4,E);break;case 1:if(Eo(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(Y){bt(m,m.return,Y)}if(m=E,x=m.updateQueue,x!==null){var O=m.stateNode;try{var L=x.shared.hiddenCallbacks;if(L!==null)for(x.shared.hiddenCallbacks=null,x=0;x<L.length;x++)RD(L[x],O)}catch(Y){bt(m,m.return,Y)}}g&&C&64&&XR(E),_h(E,E.return);break;case 27:ZR(E);case 26:case 5:Eo(x,E,g),g&&m===null&&C&4&&WR(E),_h(E,E.return);break;case 12:Eo(x,E,g);break;case 13:Eo(x,E,g),g&&C&4&&nN(x,E);break;case 22:E.memoizedState===null&&Eo(x,E,g),_h(E,E.return);break;case 30:break;default:Eo(x,E,g)}c=c.sibling}}function yS(l,c){var g=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),l=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(l=c.memoizedState.cachePool.pool),l!==g&&(l!=null&&l.refCount++,g!=null&&lh(g))}function vS(l,c){l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&lh(l))}function _a(l,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)aN(l,c,g,m),c=c.sibling}function aN(l,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:_a(l,c,g,m),x&2048&&Eh(9,c);break;case 1:_a(l,c,g,m);break;case 3:_a(l,c,g,m),x&2048&&(l=null,c.alternate!==null&&(l=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==l&&(c.refCount++,l!=null&&lh(l)));break;case 12:if(x&2048){_a(l,c,g,m),l=c.stateNode;try{var E=c.memoizedProps,C=E.id,O=E.onPostCommit;typeof O=="function"&&O(C,c.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(L){bt(c,c.return,L)}}else _a(l,c,g,m);break;case 13:_a(l,c,g,m);break;case 23:break;case 22:E=c.stateNode,C=c.alternate,c.memoizedState!==null?E._visibility&2?_a(l,c,g,m):wh(l,c):E._visibility&2?_a(l,c,g,m):(E._visibility|=2,Gc(l,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&yS(C,c);break;case 24:_a(l,c,g,m),x&2048&&vS(c.alternate,c);break;default:_a(l,c,g,m)}}function Gc(l,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=l,C=c,O=g,L=m,Y=C.flags;switch(C.tag){case 0:case 11:case 15:Gc(E,C,O,L,x),Eh(8,C);break;case 23:break;case 22:var ee=C.stateNode;C.memoizedState!==null?ee._visibility&2?Gc(E,C,O,L,x):wh(E,C):(ee._visibility|=2,Gc(E,C,O,L,x)),x&&Y&2048&&yS(C.alternate,C);break;case 24:Gc(E,C,O,L,x),x&&Y&2048&&vS(C.alternate,C);break;default:Gc(E,C,O,L,x)}c=c.sibling}}function wh(l,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=l,m=c,x=m.flags;switch(m.tag){case 22:wh(g,m),x&2048&&yS(m.alternate,m);break;case 24:wh(g,m),x&2048&&vS(m.alternate,m);break;default:wh(g,m)}c=c.sibling}}var Ah=8192;function Yc(l){if(l.subtreeFlags&Ah)for(l=l.child;l!==null;)sN(l),l=l.sibling}function sN(l){switch(l.tag){case 26:Yc(l),l.flags&Ah&&l.memoizedState!==null&&PW(qr,l.memoizedState,l.memoizedProps);break;case 5:Yc(l);break;case 3:case 4:var c=qr;qr=wm(l.stateNode.containerInfo),Yc(l),qr=c;break;case 22:l.memoizedState===null&&(c=l.alternate,c!==null&&c.memoizedState!==null?(c=Ah,Ah=16777216,Yc(l),Ah=c):Yc(l));break;default:Yc(l)}}function oN(l){var c=l.alternate;if(c!==null&&(l=c.child,l!==null)){c.child=null;do c=l.sibling,l.sibling=null,l=c;while(l!==null)}}function $h(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];hn=m,uN(m,l)}oN(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)lN(l),l=l.sibling}function lN(l){switch(l.tag){case 0:case 11:case 15:$h(l),l.flags&2048&&xo(9,l,l.return);break;case 3:$h(l);break;case 12:$h(l);break;case 22:var c=l.stateNode;l.memoizedState!==null&&c._visibility&2&&(l.return===null||l.return.tag!==13)?(c._visibility&=-3,dm(l)):$h(l);break;default:$h(l)}}function dm(l){var c=l.deletions;if((l.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];hn=m,uN(m,l)}oN(l)}for(l=l.child;l!==null;){switch(c=l,c.tag){case 0:case 11:case 15:xo(8,c,c.return),dm(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,dm(c));break;default:dm(c)}l=l.sibling}}function uN(l,c){for(;hn!==null;){var g=hn;switch(g.tag){case 0:case 11:case 15:xo(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,hn=m;else e:for(g=l;hn!==null;){m=hn;var x=m.sibling,E=m.return;if(eN(m),m===g){hn=null;break e}if(x!==null){x.return=E,hn=x;break e}hn=E}}}var iW={getCacheForType:function(l){var c=Bn(en),g=c.data.get(l);return g===void 0&&(g=l(),c.data.set(l,g)),g}},rW=typeof WeakMap=="function"?WeakMap:Map,ut=0,Et=null,Ye=null,Ze=0,ct=0,Gi=null,_o=!1,Xc=!1,bS=!1,_s=0,Ft=0,wo=0,Kl=0,xS=0,yr=0,Vc=0,Ch=null,_i=null,SS=!1,ES=0,hm=1/0,gm=null,Ao=null,$n=0,$o=null,Wc=null,Qc=0,_S=0,wS=null,cN=null,Th=0,AS=null;function Yi(){if((ut&2)!==0&&Ze!==0)return Ze&-Ze;if(R.T!==null){var l=Lc;return l!==0?l:DS()}return $O()}function fN(){yr===0&&(yr=(Ze&536870912)===0||at?EO():536870912);var l=mr.current;return l!==null&&(l.flags|=32),yr}function Xi(l,c,g){(l===Et&&(ct===2||ct===9)||l.cancelPendingCommit!==null)&&(Zc(l,0),Co(l,Ze,yr,!1)),Yd(l,g),((ut&2)===0||l!==Et)&&(l===Et&&((ut&2)===0&&(Kl|=g),Ft===4&&Co(l,Ze,yr,!1)),wa(l))}function dN(l,c,g){if((ut&6)!==0)throw Error(i(327));var m=!g&&(c&124)===0&&(c&l.expiredLanes)===0||Gd(l,c),x=m?oW(l,c):TS(l,c,!0),E=m;do{if(x===0){Xc&&!m&&Co(l,c,0,!1);break}else{if(g=l.current.alternate,E&&!aW(g)){x=TS(l,c,!1),E=!1;continue}if(x===2){if(E=c,l.errorRecoveryDisabledLanes&E)var C=0;else C=l.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){c=C;e:{var O=l;x=Ch;var L=O.current.memoizedState.isDehydrated;if(L&&(Zc(O,C).flags|=256),C=TS(O,C,!1),C!==2){if(bS&&!L){O.errorRecoveryDisabledLanes|=E,Kl|=E,x=4;break e}E=_i,_i=x,E!==null&&(_i===null?_i=E:_i.push.apply(_i,E))}x=C}if(E=!1,x!==2)continue}}if(x===1){Zc(l,0),Co(l,c,0,!0);break}e:{switch(m=l,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:Co(m,c,yr,!_o);break e;case 2:_i=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=ES+300-Wt(),10<x)){if(Co(m,c,yr,!_o),A0(m,0,!0)!==0)break e;m.timeoutHandle=PN(hN.bind(null,m,g,_i,gm,SS,c,yr,Kl,Vc,_o,E,2,-0,0),x);break e}hN(m,g,_i,gm,SS,c,yr,Kl,Vc,_o,E,0,-0,0)}}break}while(!0);wa(l)}function hN(l,c,g,m,x,E,C,O,L,Y,ee,ie,V,W){if(l.timeoutHandle=-1,ie=c.subtreeFlags,(ie&8192||(ie&16785408)===16785408)&&(zh={stylesheets:null,count:0,unsuspend:qW},sN(c),ie=IW(),ie!==null)){l.cancelPendingCommit=ie(xN.bind(null,l,c,E,g,m,x,C,O,L,ee,1,V,W)),Co(l,E,C,!Y);return}xN(l,c,E,g,m,x,C,O,L)}function aW(l){for(var c=l;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!Pi(E(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===l)break;for(;c.sibling===null;){if(c.return===null||c.return===l)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Co(l,c,g,m){c&=~xS,c&=~Kl,l.suspendedLanes|=c,l.pingedLanes&=~c,m&&(l.warmLanes|=c),m=l.expirationTimes;for(var x=c;0<x;){var E=31-qi(x),C=1<<E;m[E]=-1,x&=~C}g!==0&&wO(l,g,c)}function pm(){return(ut&6)===0?(Mh(0),!1):!0}function $S(){if(Ye!==null){if(ct===0)var l=Ye.return;else l=Ye,ps=Yl=null,j2(l),jc=null,bh=0,l=Ye;for(;l!==null;)YR(l.alternate,l),l=l.return;Ye=null}}function Zc(l,c){var g=l.timeoutHandle;g!==-1&&(l.timeoutHandle=-1,_W(g)),g=l.cancelPendingCommit,g!==null&&(l.cancelPendingCommit=null,g()),$S(),Et=l,Ye=g=ds(l.current,null),Ze=c,ct=0,Gi=null,_o=!1,Xc=Gd(l,c),bS=!1,Vc=yr=xS=Kl=wo=Ft=0,_i=Ch=null,SS=!1,(c&8)!==0&&(c|=c&32);var m=l.entangledLanes;if(m!==0)for(l=l.entanglements,m&=c;0<m;){var x=31-qi(m),E=1<<x;c|=l[x],m&=~E}return _s=c,L0(),g}function gN(l,c){Pe=null,R.H=nm,c===ch||c===Y0?(c=OD(),ct=3):c===TD?(c=OD(),ct=4):ct=c===DR?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Gi=c,Ye===null&&(Ft=1,om(l,dr(c,l.current)))}function pN(){var l=R.H;return R.H=nm,l===null?nm:l}function mN(){var l=R.A;return R.A=iW,l}function CS(){Ft=4,_o||(Ze&4194048)!==Ze&&mr.current!==null||(Xc=!0),(wo&134217727)===0&&(Kl&134217727)===0||Et===null||Co(Et,Ze,yr,!1)}function TS(l,c,g){var m=ut;ut|=2;var x=pN(),E=mN();(Et!==l||Ze!==c)&&(gm=null,Zc(l,c)),c=!1;var C=Ft;e:do try{if(ct!==0&&Ye!==null){var O=Ye,L=Gi;switch(ct){case 8:$S(),C=6;break e;case 3:case 2:case 9:case 6:mr.current===null&&(c=!0);var Y=ct;if(ct=0,Gi=null,Kc(l,O,L,Y),g&&Xc){C=0;break e}break;default:Y=ct,ct=0,Gi=null,Kc(l,O,L,Y)}}sW(),C=Ft;break}catch(ee){gN(l,ee)}while(!0);return c&&l.shellSuspendCounter++,ps=Yl=null,ut=m,R.H=x,R.A=E,Ye===null&&(Et=null,Ze=0,L0()),C}function sW(){for(;Ye!==null;)yN(Ye)}function oW(l,c){var g=ut;ut|=2;var m=pN(),x=mN();Et!==l||Ze!==c?(gm=null,hm=Wt()+500,Zc(l,c)):Xc=Gd(l,c);e:do try{if(ct!==0&&Ye!==null){c=Ye;var E=Gi;t:switch(ct){case 1:ct=0,Gi=null,Kc(l,c,E,1);break;case 2:case 9:if(MD(E)){ct=0,Gi=null,vN(c);break}c=function(){ct!==2&&ct!==9||Et!==l||(ct=7),wa(l)},E.then(c,c);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:MD(E)?(ct=0,Gi=null,vN(c)):(ct=0,Gi=null,Kc(l,c,E,7));break;case 5:var C=null;switch(Ye.tag){case 26:C=Ye.memoizedState;case 5:case 27:var O=Ye;if(!C||JN(C)){ct=0,Gi=null;var L=O.sibling;if(L!==null)Ye=L;else{var Y=O.return;Y!==null?(Ye=Y,mm(Y)):Ye=null}break t}}ct=0,Gi=null,Kc(l,c,E,5);break;case 6:ct=0,Gi=null,Kc(l,c,E,6);break;case 8:$S(),Ft=6;break e;default:throw Error(i(462))}}lW();break}catch(ee){gN(l,ee)}while(!0);return ps=Yl=null,R.H=m,R.A=x,ut=g,Ye!==null?0:(Et=null,Ze=0,L0(),Ft)}function lW(){for(;Ye!==null&&!Vt();)yN(Ye)}function yN(l){var c=HR(l.alternate,l,_s);l.memoizedProps=l.pendingProps,c===null?mm(l):Ye=c}function vN(l){var c=l,g=c.alternate;switch(c.tag){case 15:case 0:c=BR(g,c,c.pendingProps,c.type,void 0,Ze);break;case 11:c=BR(g,c,c.pendingProps,c.type.render,c.ref,Ze);break;case 5:j2(c);default:YR(g,c),c=Ye=bD(c,_s),c=HR(g,c,_s)}l.memoizedProps=l.pendingProps,c===null?mm(l):Ye=c}function Kc(l,c,g,m){ps=Yl=null,j2(c),jc=null,bh=0;var x=c.return;try{if(ZV(l,x,c,g,Ze)){Ft=1,om(l,dr(g,l.current)),Ye=null;return}}catch(E){if(x!==null)throw Ye=x,E;Ft=1,om(l,dr(g,l.current)),Ye=null;return}c.flags&32768?(at||m===1?l=!0:Xc||(Ze&536870912)!==0?l=!1:(_o=l=!0,(m===2||m===9||m===3||m===6)&&(m=mr.current,m!==null&&m.tag===13&&(m.flags|=16384))),bN(c,l)):mm(c)}function mm(l){var c=l;do{if((c.flags&32768)!==0){bN(c,_o);return}l=c.return;var g=JV(c.alternate,c,_s);if(g!==null){Ye=g;return}if(c=c.sibling,c!==null){Ye=c;return}Ye=c=l}while(c!==null);Ft===0&&(Ft=5)}function bN(l,c){do{var g=eW(l.alternate,l);if(g!==null){g.flags&=32767,Ye=g;return}if(g=l.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(l=l.sibling,l!==null)){Ye=l;return}Ye=l=g}while(l!==null);Ft=6,Ye=null}function xN(l,c,g,m,x,E,C,O,L){l.cancelPendingCommit=null;do ym();while($n!==0);if((ut&6)!==0)throw Error(i(327));if(c!==null){if(c===l.current)throw Error(i(177));if(E=c.lanes|c.childLanes,E|=v2,qX(l,g,E,C,O,L),l===Et&&(Ye=Et=null,Ze=0),Wc=c,$o=l,Qc=g,_S=E,wS=x,cN=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,dW(E0,function(){return AN(),null})):(l.callbackNode=null,l.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=R.T,R.T=null,x=q.p,q.p=2,C=ut,ut|=4;try{tW(l,c,g)}finally{ut=C,q.p=x,R.T=m}}$n=1,SN(),EN(),_N()}}function SN(){if($n===1){$n=0;var l=$o,c=Wc,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=R.T,R.T=null;var m=q.p;q.p=2;var x=ut;ut|=4;try{iN(c,l);var E=qS,C=uD(l.containerInfo),O=E.focusedElem,L=E.selectionRange;if(C!==O&&O&&O.ownerDocument&&lD(O.ownerDocument.documentElement,O)){if(L!==null&&h2(O)){var Y=L.start,ee=L.end;if(ee===void 0&&(ee=Y),"selectionStart"in O)O.selectionStart=Y,O.selectionEnd=Math.min(ee,O.value.length);else{var ie=O.ownerDocument||document,V=ie&&ie.defaultView||window;if(V.getSelection){var W=V.getSelection(),Ne=O.textContent.length,Oe=Math.min(L.start,Ne),mt=L.end===void 0?Oe:Math.min(L.end,Ne);!W.extend&&Oe>mt&&(C=mt,mt=Oe,Oe=C);var j=oD(O,Oe),P=oD(O,mt);if(j&&P&&(W.rangeCount!==1||W.anchorNode!==j.node||W.anchorOffset!==j.offset||W.focusNode!==P.node||W.focusOffset!==P.offset)){var H=ie.createRange();H.setStart(j.node,j.offset),W.removeAllRanges(),Oe>mt?(W.addRange(H),W.extend(P.node,P.offset)):(H.setEnd(P.node,P.offset),W.addRange(H))}}}}for(ie=[],W=O;W=W.parentNode;)W.nodeType===1&&ie.push({element:W,left:W.scrollLeft,top:W.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<ie.length;O++){var ne=ie[O];ne.element.scrollLeft=ne.left,ne.element.scrollTop=ne.top}}Mm=!!US,qS=US=null}finally{ut=x,q.p=m,R.T=g}}l.current=c,$n=2}}function EN(){if($n===2){$n=0;var l=$o,c=Wc,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=R.T,R.T=null;var m=q.p;q.p=2;var x=ut;ut|=4;try{JR(l,c.alternate,c)}finally{ut=x,q.p=m,R.T=g}}$n=3}}function _N(){if($n===4||$n===3){$n=0,cn();var l=$o,c=Wc,g=Qc,m=cN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?$n=5:($n=0,Wc=$o=null,wN(l,l.pendingLanes));var x=l.pendingLanes;if(x===0&&(Ao=null),Yx(g),c=c.stateNode,Ui&&typeof Ui.onCommitFiberRoot=="function")try{Ui.onCommitFiberRoot(Hd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=R.T,x=q.p,q.p=2,R.T=null;try{for(var E=l.onRecoverableError,C=0;C<m.length;C++){var O=m[C];E(O.value,{componentStack:O.stack})}}finally{R.T=c,q.p=x}}(Qc&3)!==0&&ym(),wa(l),x=l.pendingLanes,(g&4194090)!==0&&(x&42)!==0?l===AS?Th++:(Th=0,AS=l):Th=0,Mh(0)}}function wN(l,c){(l.pooledCacheLanes&=c)===0&&(c=l.pooledCache,c!=null&&(l.pooledCache=null,lh(c)))}function ym(l){return SN(),EN(),_N(),AN()}function AN(){if($n!==5)return!1;var l=$o,c=_S;_S=0;var g=Yx(Qc),m=R.T,x=q.p;try{q.p=32>g?32:g,R.T=null,g=wS,wS=null;var E=$o,C=Qc;if($n=0,Wc=$o=null,Qc=0,(ut&6)!==0)throw Error(i(331));var O=ut;if(ut|=4,lN(E.current),aN(E,E.current,C,g),ut=O,Mh(0,!1),Ui&&typeof Ui.onPostCommitFiberRoot=="function")try{Ui.onPostCommitFiberRoot(Hd,E)}catch{}return!0}finally{q.p=x,R.T=m,wN(l,c)}}function $N(l,c,g){c=dr(g,c),c=iS(l.stateNode,c,2),l=mo(l,c,2),l!==null&&(Yd(l,2),wa(l))}function bt(l,c,g){if(l.tag===3)$N(l,l,g);else for(;c!==null;){if(c.tag===3){$N(c,l,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ao===null||!Ao.has(m))){l=dr(g,l),g=kR(2),m=mo(c,g,2),m!==null&&(OR(g,m,c,l),Yd(m,2),wa(m));break}}c=c.return}}function MS(l,c,g){var m=l.pingCache;if(m===null){m=l.pingCache=new rW;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(bS=!0,x.add(g),l=uW.bind(null,l,c,g),c.then(l,l))}function uW(l,c,g){var m=l.pingCache;m!==null&&m.delete(c),l.pingedLanes|=l.suspendedLanes&g,l.warmLanes&=~g,Et===l&&(Ze&g)===g&&(Ft===4||Ft===3&&(Ze&62914560)===Ze&&300>Wt()-ES?(ut&2)===0&&Zc(l,0):xS|=g,Vc===Ze&&(Vc=0)),wa(l)}function CN(l,c){c===0&&(c=_O()),l=Rc(l,c),l!==null&&(Yd(l,c),wa(l))}function cW(l){var c=l.memoizedState,g=0;c!==null&&(g=c.retryLane),CN(l,g)}function fW(l,c){var g=0;switch(l.tag){case 13:var m=l.stateNode,x=l.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=l.stateNode;break;case 22:m=l.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),CN(l,g)}function dW(l,c){return Pt(l,c)}var vm=null,Jc=null,kS=!1,bm=!1,OS=!1,Jl=0;function wa(l){l!==Jc&&l.next===null&&(Jc===null?vm=Jc=l:Jc=Jc.next=l),bm=!0,kS||(kS=!0,gW())}function Mh(l,c){if(!OS&&bm){OS=!0;do for(var g=!1,m=vm;m!==null;){if(l!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var C=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-qi(42|l)+1)-1,E&=x&~(C&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,ON(m,E))}else E=Ze,E=A0(m,m===Et?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Gd(m,E)||(g=!0,ON(m,E));m=m.next}while(g);OS=!1}}function hW(){TN()}function TN(){bm=kS=!1;var l=0;Jl!==0&&(EW()&&(l=Jl),Jl=0);for(var c=Wt(),g=null,m=vm;m!==null;){var x=m.next,E=MN(m,c);E===0?(m.next=null,g===null?vm=x:g.next=x,x===null&&(Jc=g)):(g=m,(l!==0||(E&3)!==0)&&(bm=!0)),m=x}Mh(l)}function MN(l,c){for(var g=l.suspendedLanes,m=l.pingedLanes,x=l.expirationTimes,E=l.pendingLanes&-62914561;0<E;){var C=31-qi(E),O=1<<C,L=x[C];L===-1?((O&g)===0||(O&m)!==0)&&(x[C]=UX(O,c)):L<=c&&(l.expiredLanes|=O),E&=~O}if(c=Et,g=Ze,g=A0(l,l===c?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m=l.callbackNode,g===0||l===c&&(ct===2||ct===9)||l.cancelPendingCommit!==null)return m!==null&&m!==null&&Je(m),l.callbackNode=null,l.callbackPriority=0;if((g&3)===0||Gd(l,g)){if(c=g&-g,c===l.callbackPriority)return c;switch(m!==null&&Je(m),Yx(g)){case 2:case 8:g=xO;break;case 32:g=E0;break;case 268435456:g=SO;break;default:g=E0}return m=kN.bind(null,l),g=Pt(g,m),l.callbackPriority=c,l.callbackNode=g,c}return m!==null&&m!==null&&Je(m),l.callbackPriority=2,l.callbackNode=null,2}function kN(l,c){if($n!==0&&$n!==5)return l.callbackNode=null,l.callbackPriority=0,null;var g=l.callbackNode;if(ym()&&l.callbackNode!==g)return null;var m=Ze;return m=A0(l,l===Et?m:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),m===0?null:(dN(l,m,c),MN(l,Wt()),l.callbackNode!=null&&l.callbackNode===g?kN.bind(null,l):null)}function ON(l,c){if(ym())return null;dN(l,c,!0)}function gW(){wW(function(){(ut&6)!==0?Pt(bO,hW):TN()})}function DS(){return Jl===0&&(Jl=EO()),Jl}function DN(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:k0(""+l)}function RN(l,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,l.id&&g.setAttribute("form",l.id),c.parentNode.insertBefore(g,c),l=new FormData(l),g.parentNode.removeChild(g),l}function pW(l,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var E=DN((x[bi]||null).action),C=m.submitter;C&&(c=(c=C[bi]||null)?DN(c.formAction):C.getAttribute("formAction"),c!==null&&(E=c,C=null));var O=new N0("action","action",null,m,x);l.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Jl!==0){var L=C?RN(x,C):new FormData(x);K2(g,{pending:!0,data:L,method:x.method,action:E},null,L)}}else typeof E=="function"&&(O.preventDefault(),L=C?RN(x,C):new FormData(x),K2(g,{pending:!0,data:L,method:x.method,action:E},E,L))},currentTarget:x}]})}}for(var RS=0;RS<y2.length;RS++){var NS=y2[RS],mW=NS.toLowerCase(),yW=NS[0].toUpperCase()+NS.slice(1);Ur(mW,"on"+yW)}Ur(dD,"onAnimationEnd"),Ur(hD,"onAnimationIteration"),Ur(gD,"onAnimationStart"),Ur("dblclick","onDoubleClick"),Ur("focusin","onFocus"),Ur("focusout","onBlur"),Ur(NV,"onTransitionRun"),Ur(zV,"onTransitionStart"),Ur(FV,"onTransitionCancel"),Ur(pD,"onTransitionEnd"),_c("onMouseEnter",["mouseout","mouseover"]),_c("onMouseLeave",["mouseout","mouseover"]),_c("onPointerEnter",["pointerout","pointerover"]),_c("onPointerLeave",["pointerout","pointerover"]),Ll("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ll("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ll("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ll("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ll("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(kh));function NN(l,c){c=(c&4)!==0;for(var g=0;g<l.length;g++){var m=l[g],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var C=m.length-1;0<=C;C--){var O=m[C],L=O.instance,Y=O.currentTarget;if(O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=Y;try{E(x)}catch(ee){sm(ee)}x.currentTarget=null,E=L}else for(C=0;C<m.length;C++){if(O=m[C],L=O.instance,Y=O.currentTarget,O=O.listener,L!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=Y;try{E(x)}catch(ee){sm(ee)}x.currentTarget=null,E=L}}}}function Xe(l,c){var g=c[Xx];g===void 0&&(g=c[Xx]=new Set);var m=l+"__bubble";g.has(m)||(zN(c,l,2,!1),g.add(m))}function zS(l,c,g){var m=0;c&&(m|=4),zN(g,l,m,c)}var xm="_reactListening"+Math.random().toString(36).slice(2);function FS(l){if(!l[xm]){l[xm]=!0,TO.forEach(function(g){g!=="selectionchange"&&(vW.has(g)||zS(g,!1,l),zS(g,!0,l))});var c=l.nodeType===9?l:l.ownerDocument;c===null||c[xm]||(c[xm]=!0,zS("selectionchange",!1,c))}}function zN(l,c,g,m){switch(a5(c)){case 2:var x=GW;break;case 8:x=YW;break;default:x=QS}g=x.bind(null,c,g,l),x=void 0,!r2||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?l.addEventListener(c,g,{capture:!0,passive:x}):l.addEventListener(c,g,!0):x!==void 0?l.addEventListener(c,g,{passive:x}):l.addEventListener(c,g,!1)}function LS(l,c,g,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var C=m.tag;if(C===3||C===4){var O=m.stateNode.containerInfo;if(O===x)break;if(C===4)for(C=m.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===x)return;C=C.return}for(;O!==null;){if(C=xc(O),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){m=E=C;continue e}O=O.parentNode}}m=m.return}IO(function(){var Y=E,ee=n2(g),ie=[];e:{var V=mD.get(l);if(V!==void 0){var W=N0,Ne=l;switch(l){case"keypress":if(D0(g)===0)break e;case"keydown":case"keyup":W=dV;break;case"focusin":Ne="focus",W=l2;break;case"focusout":Ne="blur",W=l2;break;case"beforeblur":case"afterblur":W=l2;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":W=GO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":W=eV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":W=pV;break;case dD:case hD:case gD:W=iV;break;case pD:W=yV;break;case"scroll":case"scrollend":W=KX;break;case"wheel":W=bV;break;case"copy":case"cut":case"paste":W=aV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":W=XO;break;case"toggle":case"beforetoggle":W=SV}var Oe=(c&4)!==0,mt=!Oe&&(l==="scroll"||l==="scrollend"),j=Oe?V!==null?V+"Capture":null:V;Oe=[];for(var P=Y,H;P!==null;){var ne=P;if(H=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||H===null||j===null||(ne=Wd(P,j),ne!=null&&Oe.push(Oh(P,ne,H))),mt)break;P=P.return}0<Oe.length&&(V=new W(V,Ne,null,g,ee),ie.push({event:V,listeners:Oe}))}}if((c&7)===0){e:{if(V=l==="mouseover"||l==="pointerover",W=l==="mouseout"||l==="pointerout",V&&g!==t2&&(Ne=g.relatedTarget||g.fromElement)&&(xc(Ne)||Ne[bc]))break e;if((W||V)&&(V=ee.window===ee?ee:(V=ee.ownerDocument)?V.defaultView||V.parentWindow:window,W?(Ne=g.relatedTarget||g.toElement,W=Y,Ne=Ne?xc(Ne):null,Ne!==null&&(mt=a(Ne),Oe=Ne.tag,Ne!==mt||Oe!==5&&Oe!==27&&Oe!==6)&&(Ne=null)):(W=null,Ne=Y),W!==Ne)){if(Oe=GO,ne="onMouseLeave",j="onMouseEnter",P="mouse",(l==="pointerout"||l==="pointerover")&&(Oe=XO,ne="onPointerLeave",j="onPointerEnter",P="pointer"),mt=W==null?V:Vd(W),H=Ne==null?V:Vd(Ne),V=new Oe(ne,P+"leave",W,g,ee),V.target=mt,V.relatedTarget=H,ne=null,xc(ee)===Y&&(Oe=new Oe(j,P+"enter",Ne,g,ee),Oe.target=H,Oe.relatedTarget=mt,ne=Oe),mt=ne,W&&Ne)t:{for(Oe=W,j=Ne,P=0,H=Oe;H;H=ef(H))P++;for(H=0,ne=j;ne;ne=ef(ne))H++;for(;0<P-H;)Oe=ef(Oe),P--;for(;0<H-P;)j=ef(j),H--;for(;P--;){if(Oe===j||j!==null&&Oe===j.alternate)break t;Oe=ef(Oe),j=ef(j)}Oe=null}else Oe=null;W!==null&&FN(ie,V,W,Oe,!1),Ne!==null&&mt!==null&&FN(ie,mt,Ne,Oe,!0)}}e:{if(V=Y?Vd(Y):window,W=V.nodeName&&V.nodeName.toLowerCase(),W==="select"||W==="input"&&V.type==="file")var Se=tD;else if(JO(V))if(nD)Se=OV;else{Se=MV;var je=TV}else W=V.nodeName,!W||W.toLowerCase()!=="input"||V.type!=="checkbox"&&V.type!=="radio"?Y&&e2(Y.elementType)&&(Se=tD):Se=kV;if(Se&&(Se=Se(l,Y))){eD(ie,Se,g,ee);break e}je&&je(l,V,Y),l==="focusout"&&Y&&V.type==="number"&&Y.memoizedProps.value!=null&&Jx(V,"number",V.value)}switch(je=Y?Vd(Y):window,l){case"focusin":(JO(je)||je.contentEditable==="true")&&(kc=je,g2=Y,ih=null);break;case"focusout":ih=g2=kc=null;break;case"mousedown":p2=!0;break;case"contextmenu":case"mouseup":case"dragend":p2=!1,cD(ie,g,ee);break;case"selectionchange":if(RV)break;case"keydown":case"keyup":cD(ie,g,ee)}var we;if(c2)e:{switch(l){case"compositionstart":var De="onCompositionStart";break e;case"compositionend":De="onCompositionEnd";break e;case"compositionupdate":De="onCompositionUpdate";break e}De=void 0}else Mc?ZO(l,g)&&(De="onCompositionEnd"):l==="keydown"&&g.keyCode===229&&(De="onCompositionStart");De&&(VO&&g.locale!=="ko"&&(Mc||De!=="onCompositionStart"?De==="onCompositionEnd"&&Mc&&(we=jO()):(fo=ee,a2="value"in fo?fo.value:fo.textContent,Mc=!0)),je=Sm(Y,De),0<je.length&&(De=new YO(De,l,null,g,ee),ie.push({event:De,listeners:je}),we?De.data=we:(we=KO(g),we!==null&&(De.data=we)))),(we=_V?wV(l,g):AV(l,g))&&(De=Sm(Y,"onBeforeInput"),0<De.length&&(je=new YO("onBeforeInput","beforeinput",null,g,ee),ie.push({event:je,listeners:De}),je.data=we)),pW(ie,l,Y,g,ee)}NN(ie,c)})}function Oh(l,c,g){return{instance:l,listener:c,currentTarget:g}}function Sm(l,c){for(var g=c+"Capture",m=[];l!==null;){var x=l,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Wd(l,g),x!=null&&m.unshift(Oh(l,x,E)),x=Wd(l,c),x!=null&&m.push(Oh(l,x,E))),l.tag===3)return m;l=l.return}return[]}function ef(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function FN(l,c,g,m,x){for(var E=c._reactName,C=[];g!==null&&g!==m;){var O=g,L=O.alternate,Y=O.stateNode;if(O=O.tag,L!==null&&L===m)break;O!==5&&O!==26&&O!==27||Y===null||(L=Y,x?(Y=Wd(g,E),Y!=null&&C.unshift(Oh(g,Y,L))):x||(Y=Wd(g,E),Y!=null&&C.push(Oh(g,Y,L)))),g=g.return}C.length!==0&&l.push({event:c,listeners:C})}var bW=/\r\n?/g,xW=/\u0000|\uFFFD/g;function LN(l){return(typeof l=="string"?l:""+l).replace(bW,`
`).replace(xW,"")}function BN(l,c){return c=LN(c),LN(l)===c}function Em(){}function pt(l,c,g,m,x,E){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||$c(l,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&$c(l,""+m);break;case"className":C0(l,"class",m);break;case"tabIndex":C0(l,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":C0(l,g,m);break;case"style":qO(l,m,E);break;case"data":if(c!=="object"){C0(l,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){l.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){l.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(c!=="input"&&pt(l,c,"name",x.name,x,null),pt(l,c,"formEncType",x.formEncType,x,null),pt(l,c,"formMethod",x.formMethod,x,null),pt(l,c,"formTarget",x.formTarget,x,null)):(pt(l,c,"encType",x.encType,x,null),pt(l,c,"method",x.method,x,null),pt(l,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){l.removeAttribute(g);break}m=k0(""+m),l.setAttribute(g,m);break;case"onClick":m!=null&&(l.onclick=Em);break;case"onScroll":m!=null&&Xe("scroll",l);break;case"onScrollEnd":m!=null&&Xe("scrollend",l);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"multiple":l.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":l.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){l.removeAttribute("xlink:href");break}g=k0(""+m),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""+m):l.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,""):l.removeAttribute(g);break;case"capture":case"download":m===!0?l.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?l.setAttribute(g,m):l.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?l.setAttribute(g,m):l.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?l.removeAttribute(g):l.setAttribute(g,m);break;case"popover":Xe("beforetoggle",l),Xe("toggle",l),$0(l,"popover",m);break;case"xlinkActuate":cs(l,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":cs(l,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":cs(l,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":cs(l,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":cs(l,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":cs(l,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":cs(l,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":cs(l,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":cs(l,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":$0(l,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=QX.get(g)||g,$0(l,g,m))}}function BS(l,c,g,m,x,E){switch(g){case"style":qO(l,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));l.innerHTML=g}}break;case"children":typeof m=="string"?$c(l,m):(typeof m=="number"||typeof m=="bigint")&&$c(l,""+m);break;case"onScroll":m!=null&&Xe("scroll",l);break;case"onScrollEnd":m!=null&&Xe("scrollend",l);break;case"onClick":m!=null&&(l.onclick=Em);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!MO.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),E=l[bi]||null,E=E!=null?E[g]:null,typeof E=="function"&&l.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in l?l[g]=null:l.hasAttribute(g)&&l.removeAttribute(g)),l.addEventListener(c,m,x);break e}g in l?l[g]=m:m===!0?l.setAttribute(g,""):$0(l,g,m)}}}function Cn(l,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xe("error",l),Xe("load",l);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var C=g[E];if(C!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:pt(l,c,E,C,g,null)}}x&&pt(l,c,"srcSet",g.srcSet,g,null),m&&pt(l,c,"src",g.src,g,null);return;case"input":Xe("invalid",l);var O=E=C=x=null,L=null,Y=null;for(m in g)if(g.hasOwnProperty(m)){var ee=g[m];if(ee!=null)switch(m){case"name":x=ee;break;case"type":C=ee;break;case"checked":L=ee;break;case"defaultChecked":Y=ee;break;case"value":E=ee;break;case"defaultValue":O=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(i(137,c));break;default:pt(l,c,m,ee,g,null)}}FO(l,E,O,L,Y,C,x,!1),T0(l);return;case"select":Xe("invalid",l),m=C=E=null;for(x in g)if(g.hasOwnProperty(x)&&(O=g[x],O!=null))switch(x){case"value":E=O;break;case"defaultValue":C=O;break;case"multiple":m=O;default:pt(l,c,x,O,g,null)}c=E,g=C,l.multiple=!!m,c!=null?Ac(l,!!m,c,!1):g!=null&&Ac(l,!!m,g,!0);return;case"textarea":Xe("invalid",l),E=x=m=null;for(C in g)if(g.hasOwnProperty(C)&&(O=g[C],O!=null))switch(C){case"value":m=O;break;case"defaultValue":x=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:pt(l,c,C,O,g,null)}BO(l,m,x,E),T0(l);return;case"option":for(L in g)if(g.hasOwnProperty(L)&&(m=g[L],m!=null))switch(L){case"selected":l.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:pt(l,c,L,m,g,null)}return;case"dialog":Xe("beforetoggle",l),Xe("toggle",l),Xe("cancel",l),Xe("close",l);break;case"iframe":case"object":Xe("load",l);break;case"video":case"audio":for(m=0;m<kh.length;m++)Xe(kh[m],l);break;case"image":Xe("error",l),Xe("load",l);break;case"details":Xe("toggle",l);break;case"embed":case"source":case"link":Xe("error",l),Xe("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Y in g)if(g.hasOwnProperty(Y)&&(m=g[Y],m!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:pt(l,c,Y,m,g,null)}return;default:if(e2(c)){for(ee in g)g.hasOwnProperty(ee)&&(m=g[ee],m!==void 0&&BS(l,c,ee,m,g,void 0));return}}for(O in g)g.hasOwnProperty(O)&&(m=g[O],m!=null&&pt(l,c,O,m,g,null))}function SW(l,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,C=null,O=null,L=null,Y=null,ee=null;for(W in g){var ie=g[W];if(g.hasOwnProperty(W)&&ie!=null)switch(W){case"checked":break;case"value":break;case"defaultValue":L=ie;default:m.hasOwnProperty(W)||pt(l,c,W,null,m,ie)}}for(var V in m){var W=m[V];if(ie=g[V],m.hasOwnProperty(V)&&(W!=null||ie!=null))switch(V){case"type":E=W;break;case"name":x=W;break;case"checked":Y=W;break;case"defaultChecked":ee=W;break;case"value":C=W;break;case"defaultValue":O=W;break;case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,c));break;default:W!==ie&&pt(l,c,V,W,m,ie)}}Kx(l,C,O,L,Y,ee,E,x);return;case"select":W=C=O=V=null;for(E in g)if(L=g[E],g.hasOwnProperty(E)&&L!=null)switch(E){case"value":break;case"multiple":W=L;default:m.hasOwnProperty(E)||pt(l,c,E,null,m,L)}for(x in m)if(E=m[x],L=g[x],m.hasOwnProperty(x)&&(E!=null||L!=null))switch(x){case"value":V=E;break;case"defaultValue":O=E;break;case"multiple":C=E;default:E!==L&&pt(l,c,x,E,m,L)}c=O,g=C,m=W,V!=null?Ac(l,!!g,V,!1):!!m!=!!g&&(c!=null?Ac(l,!!g,c,!0):Ac(l,!!g,g?[]:"",!1));return;case"textarea":W=V=null;for(O in g)if(x=g[O],g.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:pt(l,c,O,null,m,x)}for(C in m)if(x=m[C],E=g[C],m.hasOwnProperty(C)&&(x!=null||E!=null))switch(C){case"value":V=x;break;case"defaultValue":W=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&pt(l,c,C,x,m,E)}LO(l,V,W);return;case"option":for(var Ne in g)if(V=g[Ne],g.hasOwnProperty(Ne)&&V!=null&&!m.hasOwnProperty(Ne))switch(Ne){case"selected":l.selected=!1;break;default:pt(l,c,Ne,null,m,V)}for(L in m)if(V=m[L],W=g[L],m.hasOwnProperty(L)&&V!==W&&(V!=null||W!=null))switch(L){case"selected":l.selected=V&&typeof V!="function"&&typeof V!="symbol";break;default:pt(l,c,L,V,m,W)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in g)V=g[Oe],g.hasOwnProperty(Oe)&&V!=null&&!m.hasOwnProperty(Oe)&&pt(l,c,Oe,null,m,V);for(Y in m)if(V=m[Y],W=g[Y],m.hasOwnProperty(Y)&&V!==W&&(V!=null||W!=null))switch(Y){case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,c));break;default:pt(l,c,Y,V,m,W)}return;default:if(e2(c)){for(var mt in g)V=g[mt],g.hasOwnProperty(mt)&&V!==void 0&&!m.hasOwnProperty(mt)&&BS(l,c,mt,void 0,m,V);for(ee in m)V=m[ee],W=g[ee],!m.hasOwnProperty(ee)||V===W||V===void 0&&W===void 0||BS(l,c,ee,V,m,W);return}}for(var j in g)V=g[j],g.hasOwnProperty(j)&&V!=null&&!m.hasOwnProperty(j)&&pt(l,c,j,null,m,V);for(ie in m)V=m[ie],W=g[ie],!m.hasOwnProperty(ie)||V===W||V==null&&W==null||pt(l,c,ie,V,m,W)}var US=null,qS=null;function _m(l){return l.nodeType===9?l:l.ownerDocument}function UN(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function qN(l,c){if(l===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&c==="foreignObject"?0:l}function PS(l,c){return l==="textarea"||l==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var IS=null;function EW(){var l=window.event;return l&&l.type==="popstate"?l===IS?!1:(IS=l,!0):(IS=null,!1)}var PN=typeof setTimeout=="function"?setTimeout:void 0,_W=typeof clearTimeout=="function"?clearTimeout:void 0,IN=typeof Promise=="function"?Promise:void 0,wW=typeof queueMicrotask=="function"?queueMicrotask:typeof IN<"u"?function(l){return IN.resolve(null).then(l).catch(AW)}:PN;function AW(l){setTimeout(function(){throw l})}function To(l){return l==="head"}function jN(l,c){var g=c,m=0,x=0;do{var E=g.nextSibling;if(l.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var C=l.ownerDocument;if(g&1&&Dh(C.documentElement),g&2&&Dh(C.body),g&4)for(g=C.head,Dh(g),C=g.firstChild;C;){var O=C.nextSibling,L=C.nodeName;C[Xd]||L==="SCRIPT"||L==="STYLE"||L==="LINK"&&C.rel.toLowerCase()==="stylesheet"||g.removeChild(C),C=O}}if(x===0){l.removeChild(E),qh(c);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);qh(c)}function jS(l){var c=l.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":jS(g),Vx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}l.removeChild(g)}}function $W(l,c,g,m){for(;l.nodeType===1;){var x=g;if(l.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(m){if(!l[Xd])switch(c){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(E=l.getAttribute("rel"),E==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(E!==x.rel||l.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||l.getAttribute("title")!==(x.title==null?null:x.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(E=l.getAttribute("src"),(E!==(x.src==null?null:x.src)||l.getAttribute("type")!==(x.type==null?null:x.type)||l.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(c==="input"&&l.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&l.getAttribute("name")===E)return l}else return l;if(l=Pr(l.nextSibling),l===null)break}return null}function CW(l,c,g){if(c==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!g||(l=Pr(l.nextSibling),l===null))return null;return l}function HS(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function TW(l,c){var g=l.ownerDocument;if(l.data!=="$?"||g.readyState==="complete")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),l._reactRetry=m}}function Pr(l){for(;l!=null;l=l.nextSibling){var c=l.nodeType;if(c===1||c===3)break;if(c===8){if(c=l.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return l}var GS=null;function HN(l){l=l.previousSibling;for(var c=0;l;){if(l.nodeType===8){var g=l.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return l;c--}else g==="/$"&&c++}l=l.previousSibling}return null}function GN(l,c,g){switch(c=_m(g),l){case"html":if(l=c.documentElement,!l)throw Error(i(452));return l;case"head":if(l=c.head,!l)throw Error(i(453));return l;case"body":if(l=c.body,!l)throw Error(i(454));return l;default:throw Error(i(451))}}function Dh(l){for(var c=l.attributes;c.length;)l.removeAttributeNode(c[0]);Vx(l)}var vr=new Map,YN=new Set;function wm(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var ws=q.d;q.d={f:MW,r:kW,D:OW,C:DW,L:RW,m:NW,X:FW,S:zW,M:LW};function MW(){var l=ws.f(),c=pm();return l||c}function kW(l){var c=Sc(l);c!==null&&c.tag===5&&c.type==="form"?dR(c):ws.r(l)}var tf=typeof document>"u"?null:document;function XN(l,c,g){var m=tf;if(m&&typeof c=="string"&&c){var x=fr(c);x='link[rel="'+l+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),YN.has(x)||(YN.add(x),l={rel:l,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),Cn(c,"link",l),fn(c),m.head.appendChild(c)))}}function OW(l){ws.D(l),XN("dns-prefetch",l,null)}function DW(l,c){ws.C(l,c),XN("preconnect",l,c)}function RW(l,c,g){ws.L(l,c,g);var m=tf;if(m&&l&&c){var x='link[rel="preload"][as="'+fr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+fr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+fr(g.imageSizes)+'"]')):x+='[href="'+fr(l)+'"]';var E=x;switch(c){case"style":E=nf(l);break;case"script":E=rf(l)}vr.has(E)||(l=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:l,as:c},g),vr.set(E,l),m.querySelector(x)!==null||c==="style"&&m.querySelector(Rh(E))||c==="script"&&m.querySelector(Nh(E))||(c=m.createElement("link"),Cn(c,"link",l),fn(c),m.head.appendChild(c)))}}function NW(l,c){ws.m(l,c);var g=tf;if(g&&l){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+fr(m)+'"][href="'+fr(l)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=rf(l)}if(!vr.has(E)&&(l=d({rel:"modulepreload",href:l},c),vr.set(E,l),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(Nh(E)))return}m=g.createElement("link"),Cn(m,"link",l),fn(m),g.head.appendChild(m)}}}function zW(l,c,g){ws.S(l,c,g);var m=tf;if(m&&l){var x=Ec(m).hoistableStyles,E=nf(l);c=c||"default";var C=x.get(E);if(!C){var O={loading:0,preload:null};if(C=m.querySelector(Rh(E)))O.loading=5;else{l=d({rel:"stylesheet",href:l,"data-precedence":c},g),(g=vr.get(E))&&YS(l,g);var L=C=m.createElement("link");fn(L),Cn(L,"link",l),L._p=new Promise(function(Y,ee){L.onload=Y,L.onerror=ee}),L.addEventListener("load",function(){O.loading|=1}),L.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Am(C,c,m)}C={type:"stylesheet",instance:C,count:1,state:O},x.set(E,C)}}}function FW(l,c){ws.X(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(Nh(x)),E||(l=d({src:l,async:!0},c),(c=vr.get(x))&&XS(l,c),E=g.createElement("script"),fn(E),Cn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function LW(l,c){ws.M(l,c);var g=tf;if(g&&l){var m=Ec(g).hoistableScripts,x=rf(l),E=m.get(x);E||(E=g.querySelector(Nh(x)),E||(l=d({src:l,async:!0,type:"module"},c),(c=vr.get(x))&&XS(l,c),E=g.createElement("script"),fn(E),Cn(E,"link",l),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function VN(l,c,g,m){var x=(x=wt.current)?wm(x):null;if(!x)throw Error(i(446));switch(l){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=nf(g.href),g=Ec(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){l=nf(g.href);var E=Ec(x).hoistableStyles,C=E.get(l);if(C||(x=x.ownerDocument||x,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(l,C),(E=x.querySelector(Rh(l)))&&!E._p&&(C.instance=E,C.state.loading=5),vr.has(l)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},vr.set(l,g),E||BW(x,l,g,C.state))),c&&m===null)throw Error(i(528,""));return C}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=rf(g),g=Ec(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,l))}}function nf(l){return'href="'+fr(l)+'"'}function Rh(l){return'link[rel="stylesheet"]['+l+"]"}function WN(l){return d({},l,{"data-precedence":l.precedence,precedence:null})}function BW(l,c,g,m){l.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=l.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),Cn(c,"link",g),fn(c),l.head.appendChild(c))}function rf(l){return'[src="'+fr(l)+'"]'}function Nh(l){return"script[async]"+l}function QN(l,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=l.querySelector('style[data-href~="'+fr(g.href)+'"]');if(m)return c.instance=m,fn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(l.ownerDocument||l).createElement("style"),fn(m),Cn(m,"style",x),Am(m,g.precedence,l),c.instance=m;case"stylesheet":x=nf(g.href);var E=l.querySelector(Rh(x));if(E)return c.state.loading|=4,c.instance=E,fn(E),E;m=WN(g),(x=vr.get(x))&&YS(m,x),E=(l.ownerDocument||l).createElement("link"),fn(E);var C=E;return C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Cn(E,"link",m),c.state.loading|=4,Am(E,g.precedence,l),c.instance=E;case"script":return E=rf(g.src),(x=l.querySelector(Nh(E)))?(c.instance=x,fn(x),x):(m=g,(x=vr.get(E))&&(m=d({},g),XS(m,x)),l=l.ownerDocument||l,x=l.createElement("script"),fn(x),Cn(x,"link",m),l.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Am(m,g.precedence,l));return c.instance}function Am(l,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,C=0;C<m.length;C++){var O=m[C];if(O.dataset.precedence===c)E=O;else if(E!==x)break}E?E.parentNode.insertBefore(l,E.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(l,c.firstChild))}function YS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.title==null&&(l.title=c.title)}function XS(l,c){l.crossOrigin==null&&(l.crossOrigin=c.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=c.referrerPolicy),l.integrity==null&&(l.integrity=c.integrity)}var $m=null;function ZN(l,c,g){if($m===null){var m=new Map,x=$m=new Map;x.set(g,m)}else x=$m,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(l))return m;for(m.set(l,null),g=g.getElementsByTagName(l),x=0;x<g.length;x++){var E=g[x];if(!(E[Xd]||E[Ln]||l==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var C=E.getAttribute(c)||"";C=l+C;var O=m.get(C);O?O.push(E):m.set(C,[E])}}return m}function KN(l,c,g){l=l.ownerDocument||l,l.head.insertBefore(g,c==="title"?l.querySelector("head > title"):null)}function UW(l,c,g){if(g===1||c.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return l=c.disabled,typeof c.precedence=="string"&&l==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function JN(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var zh=null;function qW(){}function PW(l,c,g){if(zh===null)throw Error(i(475));var m=zh;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=nf(g.href),E=l.querySelector(Rh(x));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(m.count++,m=Cm.bind(m),l.then(m,m)),c.state.loading|=4,c.instance=E,fn(E);return}E=l.ownerDocument||l,g=WN(g),(x=vr.get(x))&&YS(g,x),E=E.createElement("link"),fn(E);var C=E;C._p=new Promise(function(O,L){C.onload=O,C.onerror=L}),Cn(E,"link",g),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,l),(l=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Cm.bind(m),l.addEventListener("load",c),l.addEventListener("error",c))}}function IW(){if(zh===null)throw Error(i(475));var l=zh;return l.stylesheets&&l.count===0&&VS(l,l.stylesheets),0<l.count?function(c){var g=setTimeout(function(){if(l.stylesheets&&VS(l,l.stylesheets),l.unsuspend){var m=l.unsuspend;l.unsuspend=null,m()}},6e4);return l.unsuspend=c,function(){l.unsuspend=null,clearTimeout(g)}}:null}function Cm(){if(this.count--,this.count===0){if(this.stylesheets)VS(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var Tm=null;function VS(l,c){l.stylesheets=null,l.unsuspend!==null&&(l.count++,Tm=new Map,c.forEach(jW,l),Tm=null,Cm.call(l))}function jW(l,c){if(!(c.state.loading&4)){var g=Tm.get(l);if(g)var m=g.get(null);else{g=new Map,Tm.set(l,g);for(var x=l.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var C=x[E];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(g.set(C.dataset.precedence,C),m=C)}m&&g.set(null,m)}x=c.instance,C=x.getAttribute("data-precedence"),E=g.get(C)||m,E===m&&g.set(null,x),g.set(C,x),this.count++,m=Cm.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(x,l.firstChild)),c.state.loading|=4}}var Fh={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function HW(l,c,g,m,x,E,C,O){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Hx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hx(0),this.hiddenUpdates=Hx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function e5(l,c,g,m,x,E,C,O,L,Y,ee,ie){return l=new HW(l,c,g,C,O,L,Y,ie),c=1,E===!0&&(c|=24),E=Ii(3,null,null,c),l.current=E,E.stateNode=l,c=M2(),c.refCount++,l.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:c},R2(E),l}function t5(l){return l?(l=Nc,l):Nc}function n5(l,c,g,m,x,E){x=t5(x),m.context===null?m.context=x:m.pendingContext=x,m=po(c),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=mo(l,m,c),g!==null&&(Xi(g,l,c),dh(g,l,c))}function i5(l,c){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var g=l.retryLane;l.retryLane=g!==0&&g<c?g:c}}function WS(l,c){i5(l,c),(l=l.alternate)&&i5(l,c)}function r5(l){if(l.tag===13){var c=Rc(l,67108864);c!==null&&Xi(c,l,67108864),WS(l,67108864)}}var Mm=!0;function GW(l,c,g,m){var x=R.T;R.T=null;var E=q.p;try{q.p=2,QS(l,c,g,m)}finally{q.p=E,R.T=x}}function YW(l,c,g,m){var x=R.T;R.T=null;var E=q.p;try{q.p=8,QS(l,c,g,m)}finally{q.p=E,R.T=x}}function QS(l,c,g,m){if(Mm){var x=ZS(m);if(x===null)LS(l,c,m,km,g),s5(l,m);else if(VW(x,l,c,g,m))m.stopPropagation();else if(s5(l,m),c&4&&-1<XW.indexOf(l)){for(;x!==null;){var E=Sc(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var C=Fl(E.pendingLanes);if(C!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;C;){var L=1<<31-qi(C);O.entanglements[1]|=L,C&=~L}wa(E),(ut&6)===0&&(hm=Wt()+500,Mh(0))}}break;case 13:O=Rc(E,2),O!==null&&Xi(O,E,2),pm(),WS(E,2)}if(E=ZS(m),E===null&&LS(l,c,m,km,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else LS(l,c,m,null,g)}}function ZS(l){return l=n2(l),KS(l)}var km=null;function KS(l){if(km=null,l=xc(l),l!==null){var c=a(l);if(c===null)l=null;else{var g=c.tag;if(g===13){if(l=s(c),l!==null)return l;l=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;l=null}else c!==l&&(l=null)}}return km=l,null}function a5(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(S0()){case bO:return 2;case xO:return 8;case E0:case RX:return 32;case SO:return 268435456;default:return 32}default:return 32}}var JS=!1,Mo=null,ko=null,Oo=null,Lh=new Map,Bh=new Map,Do=[],XW="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function s5(l,c){switch(l){case"focusin":case"focusout":Mo=null;break;case"dragenter":case"dragleave":ko=null;break;case"mouseover":case"mouseout":Oo=null;break;case"pointerover":case"pointerout":Lh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bh.delete(c.pointerId)}}function Uh(l,c,g,m,x,E){return l===null||l.nativeEvent!==E?(l={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=Sc(c),c!==null&&r5(c)),l):(l.eventSystemFlags|=m,c=l.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),l)}function VW(l,c,g,m,x){switch(c){case"focusin":return Mo=Uh(Mo,l,c,g,m,x),!0;case"dragenter":return ko=Uh(ko,l,c,g,m,x),!0;case"mouseover":return Oo=Uh(Oo,l,c,g,m,x),!0;case"pointerover":var E=x.pointerId;return Lh.set(E,Uh(Lh.get(E)||null,l,c,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Bh.set(E,Uh(Bh.get(E)||null,l,c,g,m,x)),!0}return!1}function o5(l){var c=xc(l.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){l.blockedOn=c,PX(l.priority,function(){if(g.tag===13){var m=Yi();m=Gx(m);var x=Rc(g,m);x!==null&&Xi(x,g,m),WS(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){l.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Om(l){if(l.blockedOn!==null)return!1;for(var c=l.targetContainers;0<c.length;){var g=ZS(l.nativeEvent);if(g===null){g=l.nativeEvent;var m=new g.constructor(g.type,g);t2=m,g.target.dispatchEvent(m),t2=null}else return c=Sc(g),c!==null&&r5(c),l.blockedOn=g,!1;c.shift()}return!0}function l5(l,c,g){Om(l)&&g.delete(c)}function WW(){JS=!1,Mo!==null&&Om(Mo)&&(Mo=null),ko!==null&&Om(ko)&&(ko=null),Oo!==null&&Om(Oo)&&(Oo=null),Lh.forEach(l5),Bh.forEach(l5)}function Dm(l,c){l.blockedOn===c&&(l.blockedOn=null,JS||(JS=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,WW)))}var Rm=null;function u5(l){Rm!==l&&(Rm=l,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Rm===l&&(Rm=null);for(var c=0;c<l.length;c+=3){var g=l[c],m=l[c+1],x=l[c+2];if(typeof m!="function"){if(KS(m||g)===null)continue;break}var E=Sc(g);E!==null&&(l.splice(c,3),c-=3,K2(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function qh(l){function c(L){return Dm(L,l)}Mo!==null&&Dm(Mo,l),ko!==null&&Dm(ko,l),Oo!==null&&Dm(Oo,l),Lh.forEach(c),Bh.forEach(c);for(var g=0;g<Do.length;g++){var m=Do[g];m.blockedOn===l&&(m.blockedOn=null)}for(;0<Do.length&&(g=Do[0],g.blockedOn===null);)o5(g),g.blockedOn===null&&Do.shift();if(g=(l.ownerDocument||l).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],C=x[bi]||null;if(typeof E=="function")C||u5(g);else if(C){var O=null;if(E&&E.hasAttribute("formAction")){if(x=E,C=E[bi]||null)O=C.formAction;else if(KS(x)!==null)continue}else O=C.action;typeof O=="function"?g[m+1]=O:(g.splice(m,3),m-=3),u5(g)}}}function eE(l){this._internalRoot=l}Nm.prototype.render=eE.prototype.render=function(l){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=Yi();n5(g,m,l,c,null,null)},Nm.prototype.unmount=eE.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var c=l.containerInfo;n5(l.current,2,null,l,null,null),pm(),c[bc]=null}};function Nm(l){this._internalRoot=l}Nm.prototype.unstable_scheduleHydration=function(l){if(l){var c=$O();l={blockedOn:null,target:l,priority:c};for(var g=0;g<Do.length&&c!==0&&c<Do[g].priority;g++);Do.splice(g,0,l),g===0&&o5(l)}};var c5=t.version;if(c5!=="19.1.1")throw Error(i(527,c5,"19.1.1"));q.findDOMNode=function(l){var c=l._reactInternals;if(c===void 0)throw typeof l.render=="function"?Error(i(188)):(l=Object.keys(l).join(","),Error(i(268,l)));return l=u(c),l=l!==null?f(l):null,l=l===null?null:l.stateNode,l};var QW={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{Hd=zm.inject(QW),Ui=zm}catch{}}return Ph.createRoot=function(l,c){if(!r(l))throw Error(i(299));var g=!1,m="",x=$R,E=CR,C=TR,O=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(C=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks)),c=e5(l,1,!1,null,null,g,m,x,E,C,O,null),l[bc]=c.current,FS(l),new eE(c)},Ph.hydrateRoot=function(l,c,g){if(!r(l))throw Error(i(299));var m=!1,x="",E=$R,C=CR,O=TR,L=null,Y=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&(C=g.onCaughtError),g.onRecoverableError!==void 0&&(O=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(L=g.unstable_transitionCallbacks),g.formState!==void 0&&(Y=g.formState)),c=e5(l,1,!0,c,g??null,m,x,E,C,O,L,Y),c.context=t5(null),g=c.current,m=Yi(),m=Gx(m),x=po(m),x.callback=null,mo(g,x,m),g=m,c.current.lanes=g,Yd(c,g),wa(c),l[bc]=c.current,FS(l),new Nm(c)},Ph.version="19.1.1",Ph}var y5;function iQ(){if(y5)return tE.exports;y5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),tE.exports=nQ(),tE.exports}var rQ=iQ(),aE={exports:{}},sE,v5;function aQ(){if(v5)return sE;v5=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return sE=e,sE}var oE,b5;function sQ(){if(b5)return oE;b5=1;var e=aQ();function t(){}function n(){}return n.resetWarningCache=t,oE=function(){function i(s,o,u,f,d,h){if(h!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},oE}var x5;function oQ(){return x5||(x5=1,aE.exports=sQ()()),aE.exports}var lQ=oQ();const S5=Dv(lQ),E5={};function kw(e,t){e===void 0&&(e=E5),t===void 0&&(t=E5);const n=Object.keys(e),i=Object.keys(t);return e===t||n.length===i.length&&n.every(r=>e[r]===t[r])}function Q1(e,t,n,i){function r(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(d){try{f(i.next(d))}catch(h){s(h)}}function u(d){try{f(i.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):r(d.value).then(o,u)}f((i=i.apply(e,t||[])).next())})}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var uQ=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),cQ=Object.prototype.hasOwnProperty;function Ow(e,t){return cQ.call(e,t)}function Dw(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)Ow(e,r)&&i.push(r);return i}function Ki(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Rw(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function cu(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function F9(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Nw(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Nw(e[t]))return!0}else if(typeof e=="object"){for(var i=Dw(e),r=i.length,a=0;a<r;a++)if(Nw(e[i[a]]))return!0}}return!1}function _5(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var L9=(function(e){uQ(t,e);function t(n,i,r,a,s){var o=this.constructor,u=e.call(this,_5(n,{name:i,index:r,operation:a,tree:s}))||this;return u.name=i,u.index=r,u.operation=a,u.tree=s,Object.setPrototypeOf(u,o.prototype),u.message=_5(n,{name:i,index:r,operation:a,tree:s}),u}return t})(Error),Bt=L9,fQ=Ki,xf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Z1(n,this.path);i&&(i=Ki(i));var r=Eu(n,{op:"remove",path:this.from}).removed;return Eu(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Z1(n,this.from);return Eu(n,{op:"add",path:this.path,value:Ki(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Qg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},dQ={add:function(e,t,n){return Rw(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:xf.move,copy:xf.copy,test:xf.test,_get:xf._get};function Z1(e,t){if(t=="")return e;var n={op:"_get",path:t};return Eu(e,n),n.value}function Eu(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):K1(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=Z1(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Qg(e,t.value),s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=Ki(e));var o=t.path||"",u=o.split("/"),f=e,d=1,h=u.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=K1;;){if(y=u[d],y&&y.indexOf("~")!=-1&&(y=F9(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&u[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=u.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!Rw(y))throw new Bt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);Rw(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new Bt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=dQ[t.op].call(t,f,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=xf[t.op].call(t,f,y,e);if(s.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new Bt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function Rv(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=Ki(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=Eu(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function hQ(e,t,n){var i=Eu(e,t);if(i.test===!1)throw new Bt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function K1(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(xf[e.op]){if(typeof e.path!="string")throw new Bt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Nw(e.value))throw new Bt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new Bt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new Bt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=B9([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function B9(e,t,n){try{if(!Array.isArray(e))throw new Bt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)Rv(Ki(t),Ki(e),n||!0);else{n=n||K1;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof Bt)return r;throw r}}function Qg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Qg(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Qg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const gQ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bt,_areEquals:Qg,applyOperation:Eu,applyPatch:Rv,applyReducer:hQ,deepClone:fQ,getValueByPointer:Z1,validate:B9,validator:K1},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var V$=new WeakMap,pQ=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),mQ=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function yQ(e){return V$.get(e)}function vQ(e,t){return e.observers.get(t)}function bQ(e,t){e.observers.delete(t.callback)}function xQ(e,t){t.unobserve()}function SQ(e,t){var n=[],i,r=yQ(e);if(!r)r=new pQ(e),V$.set(e,r);else{var a=vQ(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=Ki(e),t){i.callback=t,i.next=null;var s=function(){zw(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){zw(i),clearTimeout(i.next),bQ(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new mQ(t,i)),i}function zw(e,t){t===void 0&&(t=!1);var n=V$.get(e.object);W$(n.value,e.object,e.patches,"",t),e.patches.length&&Rv(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function W$(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=Dw(t),s=Dw(e),o=!1,u=s.length-1;u>=0;u--){var f=s[u],d=e[f];if(Ow(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?W$(d,h,n,i+"/"+cu(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+cu(f),value:Ki(d)}),n.push({op:"replace",path:i+"/"+cu(f),value:Ki(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+cu(f),value:Ki(d)}),n.push({op:"remove",path:i+"/"+cu(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var u=0;u<a.length;u++){var f=a[u];!Ow(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+cu(f),value:Ki(t[f])})}}}function EQ(e,t,n){n===void 0&&(n=!1);var i=[];return W$(e,t,i,"",n),i}const _Q=Object.freeze(Object.defineProperty({__proto__:null,compare:EQ,generate:zw,observe:SQ,unobserve:xQ},Symbol.toStringTag,{value:"Module"}));Object.assign({},gQ,_Q,{JsonPatchError:L9,deepClone:Ki,escapePathComponent:cu,unescapePathComponent:F9});var lE,w5;function wQ(){if(w5)return lE;w5=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return lE=function(n,i){var r,a,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),a=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,(function o(u,f,d){var h,p,y,v,b,S,_,w,A,$,T,k;if(u&&typeof u.toJSON=="function"&&(u=u.toJSON()),T=JSON.stringify(u,s),T===void 0)return T;if(_=a-f.length-d,T.length<=_&&(A=T.replace(e,function(M,D){return D||M+" "}),A.length<=_))return A;if(s!=null&&(u=JSON.parse(T),s=void 0),typeof u=="object"&&u!==null){if(w=f+r,y=[],p=0,Array.isArray(u))for($="[",h="]",_=u.length;p<_;p++)y.push(o(u[p],w,p===_-1?0:1)||"null");else for($="{",h="}",S=Object.keys(u),_=S.length;p<_;p++)v=S[p],b=JSON.stringify(v)+": ",k=o(u[v],w,b.length+(p===_-1?0:1)),k!==void 0&&y.push(b+k);if(y.length>0)return[$,r+y.join(`,
`+w),h].join(`
`+f)}return T})(n,"",0)},lE}var AQ=wQ();const uE=Dv(AQ);var Fm={exports:{}},cE,A5;function Nv(){if(A5)return cE;A5=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return cE={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},cE}var fE,$5;function zv(){if($5)return fE;$5=1;var e={};return fE=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},fE}var C5;function Cp(){return C5||(C5=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Nv(),a=zv();t=e.exports={};const s=t.re=[],o=t.safeRe=[],u=t.src=[],f=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),$=h++;a(S,$,_),d[S]=$,u[$]=_,f[$]=A,s[$]=new RegExp(_,w?"g":void 0),o[$]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})\\.(${u[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})\\.(${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${u[d.NONNUMERICIDENTIFIER]}|${u[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${u[d.PRERELEASEIDENTIFIER]}(?:\\.${u[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${u[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${u[d.BUILDIDENTIFIER]}(?:\\.${u[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${u[d.MAINVERSION]}${u[d.PRERELEASE]}?${u[d.BUILD]}?`),b("FULL",`^${u[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${u[d.MAINVERSIONLOOSE]}${u[d.PRERELEASELOOSE]}?${u[d.BUILD]}?`),b("LOOSE",`^${u[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${u[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${u[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:\\.(${u[d.XRANGEIDENTIFIER]})(?:${u[d.PRERELEASE]})?${u[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[d.XRANGEIDENTIFIERLOOSE]})(?:${u[d.PRERELEASELOOSE]})?${u[d.BUILD]}?)?)?`),b("XRANGE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${u[d.GTLT]}\\s*${u[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${u[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",u[d.COERCEPLAIN]+`(?:${u[d.PRERELEASE]})?(?:${u[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",u[d.COERCE],!0),b("COERCERTLFULL",u[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${u[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${u[d.LONETILDE]}${u[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${u[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${u[d.LONECARET]}${u[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${u[d.LONECARET]}${u[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${u[d.GTLT]}\\s*(${u[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${u[d.GTLT]}\\s*(${u[d.LOOSEPLAIN]}|${u[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${u[d.XRANGEPLAIN]})\\s+-\\s+(${u[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${u[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Fm,Fm.exports)),Fm.exports}var dE,T5;function Q$(){if(T5)return dE;T5=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return dE=i=>i?typeof i!="object"?e:i:t,dE}var hE,M5;function U9(){if(M5)return hE;M5=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return hE={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},hE}var gE,k5;function mi(){if(k5)return gE;k5=1;const e=zv(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Nv(),{safeRe:i,t:r}=Cp(),a=Q$(),{compareIdentifiers:s}=U9();class o{constructor(f,d){if(d=a(d),f instanceof o){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const h=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!h)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof o)){if(typeof f=="string"&&f===this.version)return 0;f=new o(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof o||(f=new o(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof o||(f=new o(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const h=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}compareBuild(f){f instanceof o||(f=new o(f,this.options));let d=0;do{const h=this.build[d],p=f.build[d];if(e("build compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}inc(f,d,h){if(f.startsWith("pre")){if(!d&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,h),this.inc("pre",d,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,h),this.inc("pre",d,h);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(h)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];h===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return gE=o,gE}var pE,O5;function vd(){if(O5)return pE;O5=1;const e=mi();return pE=(n,i,r=!1)=>{if(n instanceof e)return n;try{return new e(n,i)}catch(a){if(!r)return null;throw a}},pE}var mE,D5;function $Q(){if(D5)return mE;D5=1;const e=vd();return mE=(n,i)=>{const r=e(n,i);return r?r.version:null},mE}var yE,R5;function CQ(){if(R5)return yE;R5=1;const e=vd();return yE=(n,i)=>{const r=e(n.trim().replace(/^[=v]+/,""),i);return r?r.version:null},yE}var vE,N5;function TQ(){if(N5)return vE;N5=1;const e=mi();return vE=(n,i,r,a,s)=>{typeof r=="string"&&(s=a,a=r,r=void 0);try{return new e(n instanceof e?n.version:n,r).inc(i,a,s).version}catch{return null}},vE}var bE,z5;function MQ(){if(z5)return bE;z5=1;const e=vd();return bE=(n,i)=>{const r=e(n,null,!0),a=e(i,null,!0),s=r.compare(a);if(s===0)return null;const o=s>0,u=o?r:a,f=o?a:r,d=!!u.prerelease.length;if(!!f.prerelease.length&&!d){if(!f.patch&&!f.minor)return"major";if(f.compareMain(u)===0)return f.minor&&!f.patch?"minor":"patch"}const p=d?"pre":"";return r.major!==a.major?p+"major":r.minor!==a.minor?p+"minor":r.patch!==a.patch?p+"patch":"prerelease"},bE}var xE,F5;function kQ(){if(F5)return xE;F5=1;const e=mi();return xE=(n,i)=>new e(n,i).major,xE}var SE,L5;function OQ(){if(L5)return SE;L5=1;const e=mi();return SE=(n,i)=>new e(n,i).minor,SE}var EE,B5;function DQ(){if(B5)return EE;B5=1;const e=mi();return EE=(n,i)=>new e(n,i).patch,EE}var _E,U5;function RQ(){if(U5)return _E;U5=1;const e=vd();return _E=(n,i)=>{const r=e(n,i);return r&&r.prerelease.length?r.prerelease:null},_E}var wE,q5;function ca(){if(q5)return wE;q5=1;const e=mi();return wE=(n,i,r)=>new e(n,r).compare(new e(i,r)),wE}var AE,P5;function NQ(){if(P5)return AE;P5=1;const e=ca();return AE=(n,i,r)=>e(i,n,r),AE}var $E,I5;function zQ(){if(I5)return $E;I5=1;const e=ca();return $E=(n,i)=>e(n,i,!0),$E}var CE,j5;function Z$(){if(j5)return CE;j5=1;const e=mi();return CE=(n,i,r)=>{const a=new e(n,r),s=new e(i,r);return a.compare(s)||a.compareBuild(s)},CE}var TE,H5;function FQ(){if(H5)return TE;H5=1;const e=Z$();return TE=(n,i)=>n.sort((r,a)=>e(r,a,i)),TE}var ME,G5;function LQ(){if(G5)return ME;G5=1;const e=Z$();return ME=(n,i)=>n.sort((r,a)=>e(a,r,i)),ME}var kE,Y5;function Fv(){if(Y5)return kE;Y5=1;const e=ca();return kE=(n,i,r)=>e(n,i,r)>0,kE}var OE,X5;function K$(){if(X5)return OE;X5=1;const e=ca();return OE=(n,i,r)=>e(n,i,r)<0,OE}var DE,V5;function q9(){if(V5)return DE;V5=1;const e=ca();return DE=(n,i,r)=>e(n,i,r)===0,DE}var RE,W5;function P9(){if(W5)return RE;W5=1;const e=ca();return RE=(n,i,r)=>e(n,i,r)!==0,RE}var NE,Q5;function J$(){if(Q5)return NE;Q5=1;const e=ca();return NE=(n,i,r)=>e(n,i,r)>=0,NE}var zE,Z5;function eC(){if(Z5)return zE;Z5=1;const e=ca();return zE=(n,i,r)=>e(n,i,r)<=0,zE}var FE,K5;function I9(){if(K5)return FE;K5=1;const e=q9(),t=P9(),n=Fv(),i=J$(),r=K$(),a=eC();return FE=(o,u,f,d)=>{switch(u){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${u}`)}},FE}var LE,J5;function BQ(){if(J5)return LE;J5=1;const e=mi(),t=vd(),{safeRe:n,t:i}=Cp();return LE=(a,s)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;s=s||{};let o=null;if(!s.rtl)o=a.match(s.includePrerelease?n[i.COERCEFULL]:n[i.COERCE]);else{const y=s.includePrerelease?n[i.COERCERTLFULL]:n[i.COERCERTL];let v;for(;(v=y.exec(a))&&(!o||o.index+o[0].length!==a.length);)(!o||v.index+v[0].length!==o.index+o[0].length)&&(o=v),y.lastIndex=v.index+v[1].length+v[2].length;y.lastIndex=-1}if(o===null)return null;const u=o[2],f=o[3]||"0",d=o[4]||"0",h=s.includePrerelease&&o[5]?`-${o[5]}`:"",p=s.includePrerelease&&o[6]?`+${o[6]}`:"";return t(`${u}.${f}.${d}${h}${p}`,s)},LE}var BE,e6;function UQ(){if(e6)return BE;e6=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return BE=e,BE}var UE,t6;function fa(){if(t6)return UE;t6=1;const e=/\s+/g;class t{constructor(z,R){if(R=r(R),z instanceof t)return z.loose===!!R.loose&&z.includePrerelease===!!R.includePrerelease?z:new t(z.raw,R);if(z instanceof a)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=R,this.loose=!!R.loose,this.includePrerelease=!!R.includePrerelease,this.raw=z.trim().replace(e," "),this.set=this.raw.split("||").map(q=>this.parseRange(q.trim())).filter(q=>q.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const q=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[q];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const R=this.set[z];for(let q=0;q<R.length;q++)q>0&&(this.formatted+=" "),this.formatted+=R[q].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const q=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+z,X=i.get(q);if(X)return X;const Q=this.options.loose,ae=Q?u[f.HYPHENRANGELOOSE]:u[f.HYPHENRANGE];z=z.replace(ae,G(this.options.includePrerelease)),s("hyphen replace",z),z=z.replace(u[f.COMPARATORTRIM],d),s("comparator trim",z),z=z.replace(u[f.TILDETRIM],h),s("tilde trim",z),z=z.replace(u[f.CARETTRIM],p),s("caret trim",z);let xe=z.split(" ").map(Me=>w(Me,this.options)).join(" ").split(/\s+/).map(Me=>F(Me,this.options));Q&&(xe=xe.filter(Me=>(s("loose invalid filter",Me,this.options),!!Me.match(u[f.COMPARATORLOOSE])))),s("range list",xe);const he=new Map,ye=xe.map(Me=>new a(Me,this.options));for(const Me of ye){if(b(Me))return[Me];he.set(Me.value,Me)}he.size>1&&he.has("")&&he.delete("");const Re=[...he.values()];return i.set(q,Re),Re}intersects(z,R){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(q=>_(q,R)&&z.set.some(X=>_(X,R)&&q.every(Q=>X.every(ae=>Q.intersects(ae,R)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new o(z,this.options)}catch{return!1}for(let R=0;R<this.set.length;R++)if(I(this.set[R],z,this.options))return!0;return!1}}UE=t;const n=UQ(),i=new n,r=Q$(),a=Lv(),s=zv(),o=mi(),{safeRe:u,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=Cp(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=Nv(),b=U=>U.value==="<0.0.0-0",S=U=>U.value==="",_=(U,z)=>{let R=!0;const q=U.slice();let X=q.pop();for(;R&&q.length;)R=q.every(Q=>X.intersects(Q,z)),X=q.pop();return R},w=(U,z)=>(s("comp",U,z),U=k(U,z),s("caret",U),U=$(U,z),s("tildes",U),U=D(U,z),s("xrange",U),U=B(U,z),s("stars",U),U),A=U=>!U||U.toLowerCase()==="x"||U==="*",$=(U,z)=>U.trim().split(/\s+/).map(R=>T(R,z)).join(" "),T=(U,z)=>{const R=z.loose?u[f.TILDELOOSE]:u[f.TILDE];return U.replace(R,(q,X,Q,ae,xe)=>{s("tilde",U,q,X,Q,ae,xe);let he;return A(X)?he="":A(Q)?he=`>=${X}.0.0 <${+X+1}.0.0-0`:A(ae)?he=`>=${X}.${Q}.0 <${X}.${+Q+1}.0-0`:xe?(s("replaceTilde pr",xe),he=`>=${X}.${Q}.${ae}-${xe} <${X}.${+Q+1}.0-0`):he=`>=${X}.${Q}.${ae} <${X}.${+Q+1}.0-0`,s("tilde return",he),he})},k=(U,z)=>U.trim().split(/\s+/).map(R=>M(R,z)).join(" "),M=(U,z)=>{s("caret",U,z);const R=z.loose?u[f.CARETLOOSE]:u[f.CARET],q=z.includePrerelease?"-0":"";return U.replace(R,(X,Q,ae,xe,he)=>{s("caret",U,X,Q,ae,xe,he);let ye;return A(Q)?ye="":A(ae)?ye=`>=${Q}.0.0${q} <${+Q+1}.0.0-0`:A(xe)?Q==="0"?ye=`>=${Q}.${ae}.0${q} <${Q}.${+ae+1}.0-0`:ye=`>=${Q}.${ae}.0${q} <${+Q+1}.0.0-0`:he?(s("replaceCaret pr",he),Q==="0"?ae==="0"?ye=`>=${Q}.${ae}.${xe}-${he} <${Q}.${ae}.${+xe+1}-0`:ye=`>=${Q}.${ae}.${xe}-${he} <${Q}.${+ae+1}.0-0`:ye=`>=${Q}.${ae}.${xe}-${he} <${+Q+1}.0.0-0`):(s("no pr"),Q==="0"?ae==="0"?ye=`>=${Q}.${ae}.${xe}${q} <${Q}.${ae}.${+xe+1}-0`:ye=`>=${Q}.${ae}.${xe}${q} <${Q}.${+ae+1}.0-0`:ye=`>=${Q}.${ae}.${xe} <${+Q+1}.0.0-0`),s("caret return",ye),ye})},D=(U,z)=>(s("replaceXRanges",U,z),U.split(/\s+/).map(R=>N(R,z)).join(" ")),N=(U,z)=>{U=U.trim();const R=z.loose?u[f.XRANGELOOSE]:u[f.XRANGE];return U.replace(R,(q,X,Q,ae,xe,he)=>{s("xRange",U,q,X,Q,ae,xe,he);const ye=A(Q),Re=ye||A(ae),Me=Re||A(xe),wt=Me;return X==="="&&wt&&(X=""),he=z.includePrerelease?"-0":"",ye?X===">"||X==="<"?q="<0.0.0-0":q="*":X&&wt?(Re&&(ae=0),xe=0,X===">"?(X=">=",Re?(Q=+Q+1,ae=0,xe=0):(ae=+ae+1,xe=0)):X==="<="&&(X="<",Re?Q=+Q+1:ae=+ae+1),X==="<"&&(he="-0"),q=`${X+Q}.${ae}.${xe}${he}`):Re?q=`>=${Q}.0.0${he} <${+Q+1}.0.0-0`:Me&&(q=`>=${Q}.${ae}.0${he} <${Q}.${+ae+1}.0-0`),s("xRange return",q),q})},B=(U,z)=>(s("replaceStars",U,z),U.trim().replace(u[f.STAR],"")),F=(U,z)=>(s("replaceGTE0",U,z),U.trim().replace(u[z.includePrerelease?f.GTE0PRE:f.GTE0],"")),G=U=>(z,R,q,X,Q,ae,xe,he,ye,Re,Me,wt)=>(A(q)?R="":A(X)?R=`>=${q}.0.0${U?"-0":""}`:A(Q)?R=`>=${q}.${X}.0${U?"-0":""}`:ae?R=`>=${R}`:R=`>=${R}${U?"-0":""}`,A(ye)?he="":A(Re)?he=`<${+ye+1}.0.0-0`:A(Me)?he=`<${ye}.${+Re+1}.0-0`:wt?he=`<=${ye}.${Re}.${Me}-${wt}`:U?he=`<${ye}.${Re}.${+Me+1}-0`:he=`<=${he}`,`${R} ${he}`.trim()),I=(U,z,R)=>{for(let q=0;q<U.length;q++)if(!U[q].test(z))return!1;if(z.prerelease.length&&!R.includePrerelease){for(let q=0;q<U.length;q++)if(s(U[q].semver),U[q].semver!==a.ANY&&U[q].semver.prerelease.length>0){const X=U[q].semver;if(X.major===z.major&&X.minor===z.minor&&X.patch===z.patch)return!0}return!1}return!0};return UE}var qE,n6;function Lv(){if(n6)return qE;n6=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new u(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}qE=t;const n=Q$(),{safeRe:i,t:r}=Cp(),a=I9(),s=zv(),o=mi(),u=fa();return qE}var PE,i6;function Bv(){if(i6)return PE;i6=1;const e=fa();return PE=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},PE}var IE,r6;function qQ(){if(r6)return IE;r6=1;const e=fa();return IE=(n,i)=>new e(n,i).set.map(r=>r.map(a=>a.value).join(" ").trim().split(" ")),IE}var jE,a6;function PQ(){if(a6)return jE;a6=1;const e=mi(),t=fa();return jE=(i,r,a)=>{let s=null,o=null,u=null;try{u=new t(r,a)}catch{return null}return i.forEach(f=>{u.test(f)&&(!s||o.compare(f)===-1)&&(s=f,o=new e(s,a))}),s},jE}var HE,s6;function IQ(){if(s6)return HE;s6=1;const e=mi(),t=fa();return HE=(i,r,a)=>{let s=null,o=null,u=null;try{u=new t(r,a)}catch{return null}return i.forEach(f=>{u.test(f)&&(!s||o.compare(f)===1)&&(s=f,o=new e(s,a))}),s},HE}var GE,o6;function jQ(){if(o6)return GE;o6=1;const e=mi(),t=fa(),n=Fv();return GE=(r,a)=>{r=new t(r,a);let s=new e("0.0.0");if(r.test(s)||(s=new e("0.0.0-0"),r.test(s)))return s;s=null;for(let o=0;o<r.set.length;++o){const u=r.set[o];let f=null;u.forEach(d=>{const h=new e(d.semver.version);switch(d.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!f||n(h,f))&&(f=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),f&&(!s||n(s,f))&&(s=f)}return s&&r.test(s)?s:null},GE}var YE,l6;function HQ(){if(l6)return YE;l6=1;const e=fa();return YE=(n,i)=>{try{return new e(n,i).range||"*"}catch{return null}},YE}var XE,u6;function tC(){if(u6)return XE;u6=1;const e=mi(),t=Lv(),{ANY:n}=t,i=fa(),r=Bv(),a=Fv(),s=K$(),o=eC(),u=J$();return XE=(d,h,p,y)=>{d=new e(d,y),h=new i(h,y);let v,b,S,_,w;switch(p){case">":v=a,b=o,S=s,_=">",w=">=";break;case"<":v=s,b=u,S=a,_="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(r(d,h,y))return!1;for(let A=0;A<h.set.length;++A){const $=h.set[A];let T=null,k=null;if($.forEach(M=>{M.semver===n&&(M=new t(">=0.0.0")),T=T||M,k=k||M,v(M.semver,T.semver,y)?T=M:S(M.semver,k.semver,y)&&(k=M)}),T.operator===_||T.operator===w||(!k.operator||k.operator===_)&&b(d,k.semver))return!1;if(k.operator===w&&S(d,k.semver))return!1}return!0},XE}var VE,c6;function GQ(){if(c6)return VE;c6=1;const e=tC();return VE=(n,i,r)=>e(n,i,">",r),VE}var WE,f6;function YQ(){if(f6)return WE;f6=1;const e=tC();return WE=(n,i,r)=>e(n,i,"<",r),WE}var QE,d6;function XQ(){if(d6)return QE;d6=1;const e=fa();return QE=(n,i,r)=>(n=new e(n,r),i=new e(i,r),n.intersects(i,r)),QE}var ZE,h6;function VQ(){if(h6)return ZE;h6=1;const e=Bv(),t=ca();return ZE=(n,i,r)=>{const a=[];let s=null,o=null;const u=n.sort((p,y)=>t(p,y,r));for(const p of u)e(p,i,r)?(o=p,s||(s=p)):(o&&a.push([s,o]),o=null,s=null);s&&a.push([s,null]);const f=[];for(const[p,y]of a)p===y?f.push(p):!y&&p===u[0]?f.push("*"):y?p===u[0]?f.push(`<=${y}`):f.push(`${p} - ${y}`):f.push(`>=${p}`);const d=f.join(" || "),h=typeof i.raw=="string"?i.raw:String(i);return d.length<h.length?d:i},ZE}var KE,g6;function WQ(){if(g6)return KE;g6=1;const e=fa(),t=Lv(),{ANY:n}=t,i=Bv(),r=ca(),a=(h,p,y={})=>{if(h===p)return!0;h=new e(h,y),p=new e(p,y);let v=!1;e:for(const b of h.set){for(const S of p.set){const _=u(b,S,y);if(v=v||_!==null,_)continue e}if(v)return!1}return!0},s=[new t(">=0.0.0-0")],o=[new t(">=0.0.0")],u=(h,p,y)=>{if(h===p)return!0;if(h.length===1&&h[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;y.includePrerelease?h=s:h=o}if(p.length===1&&p[0].semver===n){if(y.includePrerelease)return!0;p=o}const v=new Set;let b,S;for(const D of h)D.operator===">"||D.operator===">="?b=f(b,D,y):D.operator==="<"||D.operator==="<="?S=d(S,D,y):v.add(D.semver);if(v.size>1)return null;let _;if(b&&S){if(_=r(b.semver,S.semver,y),_>0)return null;if(_===0&&(b.operator!==">="||S.operator!=="<="))return null}for(const D of v){if(b&&!i(D,String(b),y)||S&&!i(D,String(S),y))return null;for(const N of p)if(!i(D,String(N),y))return!1;return!0}let w,A,$,T,k=S&&!y.includePrerelease&&S.semver.prerelease.length?S.semver:!1,M=b&&!y.includePrerelease&&b.semver.prerelease.length?b.semver:!1;k&&k.prerelease.length===1&&S.operator==="<"&&k.prerelease[0]===0&&(k=!1);for(const D of p){if(T=T||D.operator===">"||D.operator===">=",$=$||D.operator==="<"||D.operator==="<=",b){if(M&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===M.major&&D.semver.minor===M.minor&&D.semver.patch===M.patch&&(M=!1),D.operator===">"||D.operator===">="){if(w=f(b,D,y),w===D&&w!==b)return!1}else if(b.operator===">="&&!i(b.semver,String(D),y))return!1}if(S){if(k&&D.semver.prerelease&&D.semver.prerelease.length&&D.semver.major===k.major&&D.semver.minor===k.minor&&D.semver.patch===k.patch&&(k=!1),D.operator==="<"||D.operator==="<="){if(A=d(S,D,y),A===D&&A!==S)return!1}else if(S.operator==="<="&&!i(S.semver,String(D),y))return!1}if(!D.operator&&(S||b)&&_!==0)return!1}return!(b&&$&&!S&&_!==0||S&&T&&!b&&_!==0||M||k)},f=(h,p,y)=>{if(!h)return p;const v=r(h.semver,p.semver,y);return v>0?h:v<0||p.operator===">"&&h.operator===">="?p:h},d=(h,p,y)=>{if(!h)return p;const v=r(h.semver,p.semver,y);return v<0?h:v>0||p.operator==="<"&&h.operator==="<="?p:h};return KE=a,KE}var JE,p6;function QQ(){if(p6)return JE;p6=1;const e=Cp(),t=Nv(),n=mi(),i=U9(),r=vd(),a=$Q(),s=CQ(),o=TQ(),u=MQ(),f=kQ(),d=OQ(),h=DQ(),p=RQ(),y=ca(),v=NQ(),b=zQ(),S=Z$(),_=FQ(),w=LQ(),A=Fv(),$=K$(),T=q9(),k=P9(),M=J$(),D=eC(),N=I9(),B=BQ(),F=Lv(),G=fa(),I=Bv(),U=qQ(),z=PQ(),R=IQ(),q=jQ(),X=HQ(),Q=tC(),ae=GQ(),xe=YQ(),he=XQ(),ye=VQ(),Re=WQ();return JE={parse:r,valid:a,clean:s,inc:o,diff:u,major:f,minor:d,patch:h,prerelease:p,compare:y,rcompare:v,compareLoose:b,compareBuild:S,sort:_,rsort:w,gt:A,lt:$,eq:T,neq:k,gte:M,lte:D,cmp:N,coerce:B,Comparator:F,Range:G,satisfies:I,toComparators:U,maxSatisfying:z,minSatisfying:R,minVersion:q,validRange:X,outside:Q,gtr:ae,ltr:xe,intersects:he,simplifyRange:ye,subset:Re,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},JE}var j9=QQ();function Fi(e,t,n){return e.fields=t||[],e.fname=n,e}function qt(e){return e==null?null:e.fname}function Vn(e){return e==null?null:e.fields}function H9(e){return e.length===1?ZQ(e[0]):KQ(e)}const ZQ=e=>function(t){return t[e]},KQ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function J(e){throw Error(e)}function Za(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,u;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(u=e[o],u==="\\")a+=e.substring(s,o++),s=o;else if(u===i)f(),i=null,r=-1;else{if(i)continue;s===r&&u==='"'||s===r&&u==="'"?(s=o+1,i=u):u==="."&&!r?o>s?f():s=o+1:u==="["?(o>s&&f(),r=s=o+1):u==="]"&&(r||J("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&J("Access path missing closing bracket: "+e),i&&J("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function Mr(e,t,n){const i=Za(e);return e=i.length===1?i[0]:e,Fi((n&&n.get||H9)(i),[e],t||e)}const Tp=Mr("id"),Kn=Fi(e=>e,[],"identity"),jo=Fi(()=>0,[],"zero"),bd=Fi(()=>1,[],"one"),kr=Fi(()=>!0,[],"true"),zo=Fi(()=>!1,[],"false");function JQ(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const G9=0,nC=1,iC=2,Y9=3,X9=4;function rC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:JQ,i=e||G9;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=nC&&n(t||"error","ERROR",arguments),this},warn(){return i>=iC&&n(t||"warn","WARN",arguments),this},info(){return i>=Y9&&n(t||"log","INFO",arguments),this},debug(){return i>=X9&&n(t||"log","DEBUG",arguments),this}}}var te=Array.isArray;function me(e){return e===Object(e)}const m6=e=>e!=="__proto__";function Uv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=eZ(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;xd(i,a,r[a],s)}return i},{})}function xd(e,t,n,i){if(!m6(t))return;let r,a;if(me(n)&&!te(n)){a=me(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?xd(a,r,n[r]):m6(r)&&(a[r]=n[r])}else e[t]=n}function eZ(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Qe(e){return e[e.length-1]}function Yn(e){return e==null||e===""?null:+e}const V9=e=>t=>e*Math.exp(t),W9=e=>t=>Math.log(e*t),Q9=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),Z9=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,J1=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function qv(e,t,n,i){const r=n(e[0]),a=n(Qe(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function K9(e,t){return qv(e,t,Yn,Kn)}function J9(e,t){var n=Math.sign(e[0]);return qv(e,t,W9(n),V9(n))}function e7(e,t,n){return qv(e,t,J1(n),J1(1/n))}function t7(e,t,n){return qv(e,t,Q9(n),Z9(n))}function Pv(e,t,n,i,r){const a=i(e[0]),s=i(Qe(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function aC(e,t,n){return Pv(e,t,n,Yn,Kn)}function sC(e,t,n){const i=Math.sign(e[0]);return Pv(e,t,n,W9(i),V9(i))}function ey(e,t,n,i){return Pv(e,t,n,J1(i),J1(1/i))}function oC(e,t,n,i){return Pv(e,t,n,Q9(i),Z9(i))}function n7(e){return 1+~~(new Date(e).getMonth()/3)}function i7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ge(e){return e!=null?te(e)?e:[e]:[]}function r7(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function qe(e){return typeof e=="function"}const tZ="descending";function lC(e,t,n){n=n||{},t=ge(t)||[];const i=[],r=[],a={},s=n.comparator||nZ;return ge(e).forEach((o,u)=>{o!=null&&(i.push(t[u]===tZ?-1:1),r.push(o=qe(o)?o:Mr(o,null,n)),(Vn(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Fi(s(r,i),Object.keys(a))}const Mp=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),nZ=(e,t)=>e.length===1?iZ(e[0],t[0]):rZ(e,t,e.length),iZ=(e,t)=>function(n,i){return Mp(e(n),e(i))*t},rZ=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Mp(a(i),a(r));return s*t[o]});function Jn(e){return qe(e)?e:()=>e}function uC(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function Ue(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function Ia(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function a7(e,t){const n=e.length;let i=-1,r,a,s,o,u;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=u=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,u=i))}return[o,u]}function ve(e,t){return Object.hasOwn(e,t)}const Lm={};function Sd(e){let t={},n;function i(a){return ve(t,a)&&t[a]!==Lm}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===Lm&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=Lm),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const u=t[o];u!==Lm&&(!n||!n(u))&&(a[o]=u,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function s7(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],u=Qe(e),f;u<o&&(f=o,o=u,u=f),f=Math.abs(t-o);const d=Math.abs(u-t);return f<d&&f<=s?i:d<=s?r:a}function fe(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),Ue(i,n)}function Sf(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function ec(e){return typeof e=="boolean"}function tl(e){return Object.prototype.toString.call(e)==="[object Date]"}function o7(e){return e&&qe(e[Symbol.iterator])}function nt(e){return typeof e=="number"}function cC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function be(e){return typeof e=="string"}function fC(e,t,n){e&&(e=t?ge(e).map(o=>o.replace(/\\(.)/g,"$1")):ge(e));const i=e&&e.length,r=n&&n.get||H9,a=o=>r(t?[o]:Za(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(u){return""+o(u)}}else{const o=e.map(a);s=function(u){let f=""+o[0](u),d=0;for(;++d<i;)f+="|"+o[d](u);return f}}return Fi(s,e,"key")}function l7(e,t){const n=e[0],i=Qe(e),r=+t;return r?r===1?i:n+r*(i-n):n}const aZ=1e4;function u7(e){e=+e||aZ;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>ve(t,s)||ve(n,s),get:s=>ve(t,s)?t[s]:ve(n,s)?a(s,n[s]):void 0,set:(s,o)=>ve(t,s)?t[s]=o:a(s,o)}}function c7(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,u=0,f=0;for(;o<r&&u<a;++f)s[f]=e(t[o],n[u])>0?n[u++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;u<a;++u,++f)s[f]=n[u];return s}function dg(e,t){let n="";for(;--t>=0;)n+=e;return n}function f7(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?dg(r,s)+a:i==="center"?dg(r,~~(s/2))+a+dg(r,Math.ceil(s/2)):a+dg(r,s)}function kp(e){return e&&Qe(e)-e[0]||0}function ce(e){return te(e)?"["+e.map(ce)+"]":me(e)||be(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function dC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const sZ=e=>nt(e)||tl(e)?e:Date.parse(e);function hC(e,t){return t=t||sZ,e==null||e===""?null:t(e)}function gC(e){return e==null||e===""?null:e+""}function ia(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function d7(e,t,n,i){const r=i??"…",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Bo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var y6={},e_={},t_=34,Ih=10,n_=13;function h7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function oZ(e,t){var n=h7(e);return function(i,r){return t(n(i),r,e)}}function v6(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function wi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function lZ(e){return e<0?"-"+wi(-e,6):e>9999?"+"+wi(e,6):wi(e,4)}function uZ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":lZ(e.getUTCFullYear())+"-"+wi(e.getUTCMonth()+1,2)+"-"+wi(e.getUTCDate(),2)+(r?"T"+wi(t,2)+":"+wi(n,2)+":"+wi(i,2)+"."+wi(r,3)+"Z":i?"T"+wi(t,2)+":"+wi(n,2)+":"+wi(i,2)+"Z":n||t?"T"+wi(t,2)+":"+wi(n,2)+"Z":"")}function cZ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,_){if(y)return y(S,_-1);v=S,y=p?oZ(S,p):h7(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,_,w=v<=0,A=!1;h.charCodeAt(v-1)===Ih&&--v,h.charCodeAt(v-1)===n_&&--v;function $(){if(w)return e_;if(A)return A=!1,y6;var k,M=b,D;if(h.charCodeAt(M)===t_){for(;b++<v&&h.charCodeAt(b)!==t_||h.charCodeAt(++b)===t_;);return(k=b)>=v?w=!0:(D=h.charCodeAt(b++))===Ih?A=!0:D===n_&&(A=!0,h.charCodeAt(b)===Ih&&++b),h.slice(M+1,k-1).replace(/""/g,'"')}for(;b<v;){if((D=h.charCodeAt(k=b++))===Ih)A=!0;else if(D===n_)A=!0,h.charCodeAt(b)===Ih&&++b;else if(D!==n)continue;return h.slice(M,k)}return w=!0,h.slice(M,v)}for(;(_=$())!==e_;){for(var T=[];_!==y6&&_!==e_;)T.push(_),_=$();p&&(T=p(T,S++))==null||y.push(T)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=v6(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=v6(h)),a(h,p).join(`
`)}function u(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?uZ(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:u,formatRow:f,formatValue:d}}function fZ(e){return e}function dZ(e){if(e==null)return fZ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,u){u||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function hZ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function gZ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return b6(e,n)})}:b6(e,t)}function b6(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=g7(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function g7(e,t){var n=dZ(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&hZ(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function u(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=u(d.arcs);break;case"MultiPolygon":p=d.arcs.map(u);break;default:return null}return{type:h,coordinates:p}}return f(t)}function pZ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function u(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return u(r,i),u(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function mZ(e){return g7(e,yZ.apply(this,arguments))}function yZ(e,t,n){var i,r,a;if(arguments.length>1)i=vZ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:pZ(e,i)}}function vZ(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function u(h){h.forEach(o)}function f(h){h.forEach(u)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":u(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function qs(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ed(e){let t,n,i;e.length!==2?(t=qs,n=(o,u)=>qs(e(o),u),i=(o,u)=>e(o)-u):(t=e===qs||e===bZ?e:xZ,n=e,i=e);function r(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<0?f=h+1:d=h}while(f<d)}return f}function a(o,u,f=0,d=o.length){if(f<d){if(t(u,u)!==0)return d;do{const h=f+d>>>1;n(o[h],u)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,u,f=0,d=o.length){const h=r(o,u,f,d-1);return h>f&&i(o[h-1],u)>-i(o[h],u)?h-1:h}return{left:r,center:s,right:a}}function xZ(){return 0}function p7(e){return e===null?NaN:+e}function*SZ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const m7=Ed(qs),ol=m7.right,EZ=m7.left;Ed(p7).center;function _Z(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function wZ(e,t){const n=_Z(e,t);return n&&Math.sqrt(n)}class fi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class x6 extends Map{constructor(t,n=b7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Fw(this,t))}has(t){return super.has(Fw(this,t))}set(t,n){return super.set(y7(this,t),n)}delete(t){return super.delete(v7(this,t))}}class ty extends Set{constructor(t,n=b7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Fw(this,t))}add(t){return super.add(y7(this,t))}delete(t){return super.delete(v7(this,t))}}function Fw({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function y7({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function v7({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function b7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function AZ(e,t){return Array.from(t,n=>e[n])}function $Z(e=qs){if(e===qs)return x7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function x7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const CZ=Math.sqrt(50),TZ=Math.sqrt(10),MZ=Math.sqrt(2);function ny(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=CZ?10:a>=TZ?5:a>=MZ?2:1;let o,u,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),u=Math.round(t*f),o/f<e&&++o,u/f>t&&--u,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),u=Math.round(t/f),o*f<e&&++o,u*f>t&&--u),u<o&&.5<=n&&n<2?ny(e,t,n*2):[o,u,f]}function Lw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?ny(t,e,n):ny(e,t,n);if(!(a>=r))return[];const o=a-r+1,u=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)u[f]=(a-f)/-s;else for(let f=0;f<o;++f)u[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)u[f]=(r+f)/-s;else for(let f=0;f<o;++f)u[f]=(r+f)*s;return u}function Bw(e,t,n){return t=+t,e=+e,n=+n,ny(e,t,n)[2]}function ll(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?Bw(t,e,n):Bw(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function _u(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Uw(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function S7(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?x7:$Z(r);i>n;){if(i-n>600){const u=i-n+1,f=t-n+1,d=Math.log(u),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(u-h)/u)*(f-u/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/u+p)),v=Math.min(i,Math.floor(t+(u-f)*h/u+p));S7(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(jh(e,n,t),r(e[i],a)>0&&jh(e,n,i);s<o;){for(jh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?jh(e,n,o):(++o,jh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function jh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function qw(e,t,n){if(e=Float64Array.from(SZ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Uw(e);if(t>=1)return _u(e);var i,r=(i-1)*t,a=Math.floor(r),s=_u(S7(e,a).subarray(0,a+1)),o=Uw(e.subarray(a+1));return s+(o-s)*(r-a)}}function E7(e,t,n=p7){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function kZ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function _7(e,t){return qw(e,.5,t)}function*OZ(e){for(const t of e)yield*t}function w7(e){return Array.from(OZ(e))}function Ji(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function A7(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function DZ(e,...t){e=new ty(e),t=t.map(RZ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function RZ(e){return e instanceof ty?e:new ty(e)}function NZ(...e){const t=new ty;for(const n of e)for(const i of n)t.add(i);return t}function zZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function iy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Lf(e){return e=iy(Math.abs(e)),e?e[1]:NaN}function FZ(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],u=0;r>0&&o>0&&(u+o+1>i&&(o=Math.max(1,i-u)),a.push(n.substring(r-=o,r+o)),!((u+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function LZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var BZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Du(e){if(!(t=BZ.exec(e)))throw new Error("invalid format: "+e);var t;return new pC({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Du.prototype=pC.prototype;function pC(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}pC.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function UZ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var $7;function qZ(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-($7=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+iy(e,Math.max(0,t+a-1))[0]}function S6(e,t){var n=iy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const E6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>S6(e*100,t),r:S6,s:qZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function _6(e){return e}var w6=Array.prototype.map,A6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function C7(e){var t=e.grouping===void 0||e.thousands===void 0?_6:FZ(w6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?_6:LZ(w6.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Du(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,_=h.width,w=h.comma,A=h.precision,$=h.trim,T=h.type;T==="n"?(w=!0,T="g"):E6[T]||(A===void 0&&(A=12),$=!0,T="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",M=b==="$"?i:/[%p]/.test(T)?s:"",D=E6[T],N=/[defgprs%]/.test(T);A=A===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function B(F){var G=k,I=M,U,z,R;if(T==="c")I=D(F)+I,F="";else{F=+F;var q=F<0||1/F<0;if(F=isNaN(F)?u:D(Math.abs(F),A),$&&(F=UZ(F)),q&&+F==0&&v!=="+"&&(q=!1),G=(q?v==="("?v:o:v==="-"||v==="("?"":v)+G,I=(T==="s"?A6[8+$7/3]:"")+I+(q&&v==="("?")":""),N){for(U=-1,z=F.length;++U<z;)if(R=F.charCodeAt(U),48>R||R>57){I=(R===46?r+F.slice(U+1):F.slice(U))+I,F=F.slice(0,U);break}}}w&&!S&&(F=t(F,1/0));var X=G.length+F.length+I.length,Q=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(F=t(Q+F,Q.length?_-I.length:1/0),Q=""),y){case"<":F=G+F+I+Q;break;case"=":F=G+Q+F+I;break;case"^":F=Q.slice(0,X=Q.length>>1)+G+F+I+Q.slice(X);break;default:F=Q+G+F+I;break}return a(F)}return B.toString=function(){return h+""},B}function d(h,p){var y=f((h=Du(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Lf(p)/3)))*3,b=Math.pow(10,-v),S=A6[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var Bm,Iv,mC;PZ({thousands:",",grouping:[3],currency:["$",""]});function PZ(e){return Bm=C7(e),Iv=Bm.format,mC=Bm.formatPrefix,Bm}function T7(e){return Math.max(0,-Lf(Math.abs(e)))}function M7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Lf(t)/3)))*3-Lf(Math.abs(e)))}function k7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Lf(t)-Lf(e))+1}const i_=new Date,r_=new Date;function ln(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const u=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return u;let f;do u.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return u},r.filter=a=>ln(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(i_.setTime(+a),r_.setTime(+s),e(i_),e(r_),Math.floor(n(i_,r_))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Bf=ln(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Bf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ln(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Bf);Bf.range;const Ns=1e3,_r=Ns*60,zs=_r*60,Vs=zs*24,yC=Vs*7,$6=Vs*30,a_=Vs*365,Fs=ln(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Ns)},(e,t)=>(t-e)/Ns,e=>e.getUTCSeconds());Fs.range;const jv=ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ns)},(e,t)=>{e.setTime(+e+t*_r)},(e,t)=>(t-e)/_r,e=>e.getMinutes());jv.range;const Hv=ln(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_r)},(e,t)=>(t-e)/_r,e=>e.getUTCMinutes());Hv.range;const Gv=ln(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Ns-e.getMinutes()*_r)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getHours());Gv.range;const Yv=ln(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCHours());Yv.range;const Ps=ln(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_r)/Vs,e=>e.getDate()-1);Ps.range;const nl=ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vs,e=>e.getUTCDate()-1);nl.range;const O7=ln(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Vs,e=>Math.floor(e/Vs));O7.range;function tc(e){return ln(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_r)/yC)}const _d=tc(0),ry=tc(1),IZ=tc(2),jZ=tc(3),Uf=tc(4),HZ=tc(5),GZ=tc(6);_d.range;ry.range;IZ.range;jZ.range;Uf.range;HZ.range;GZ.range;function nc(e){return ln(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/yC)}const wd=nc(0),ay=nc(1),YZ=nc(2),XZ=nc(3),qf=nc(4),VZ=nc(5),WZ=nc(6);wd.range;ay.range;YZ.range;XZ.range;qf.range;VZ.range;WZ.range;const Zg=ln(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Zg.range;const Kg=ln(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Kg.range;const ja=ln(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ja.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ln(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ja.range;const Ha=ln(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ln(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ha.range;function D7(e,t,n,i,r,a){const s=[[Fs,1,Ns],[Fs,5,5*Ns],[Fs,15,15*Ns],[Fs,30,30*Ns],[a,1,_r],[a,5,5*_r],[a,15,15*_r],[a,30,30*_r],[r,1,zs],[r,3,3*zs],[r,6,6*zs],[r,12,12*zs],[i,1,Vs],[i,2,2*Vs],[n,1,yC],[t,1,$6],[t,3,3*$6],[e,1,a_]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:u(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function u(f,d,h){const p=Math.abs(d-f)/h,y=Ed(([,,S])=>S).right(s,p);if(y===s.length)return e.every(ll(f/a_,d/a_,h));if(y===0)return Bf.every(Math.max(ll(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,u]}const[QZ,ZZ]=D7(Ha,Kg,wd,O7,Yv,Hv),[KZ,JZ]=D7(ja,Zg,_d,Ps,Gv,jv),Nn="year",ki="quarter",Wn="month",an="week",Oi="date",Gn="day",Ga="dayofyear",ar="hours",sr="minutes",Or="seconds",ra="milliseconds",vC=[Nn,ki,Wn,an,Oi,Gn,Ga,ar,sr,Or,ra],s_=vC.reduce((e,t,n)=>(e[t]=1+n,e),{});function bC(e){const t=ge(e).slice(),n={};return t.length||J("Missing time unit."),t.forEach(r=>{ve(s_,r)?n[r]=1:J(`Invalid time unit: ${r}.`)}),(n[an]||n[Gn]?1:0)+(n[ki]||n[Wn]||n[Oi]?1:0)+(n[Ga]?1:0)>1&&J(`Incompatible time units: ${e}`),t.sort((r,a)=>s_[r]-s_[a]),t}const eK={[Nn]:"%Y ",[ki]:"Q%q ",[Wn]:"%b ",[Oi]:"%d ",[an]:"W%U ",[Gn]:"%a ",[Ga]:"%j ",[ar]:"%H:00",[sr]:"00:%M",[Or]:":%S",[ra]:".%L",[`${Nn}-${Wn}`]:"%Y-%m ",[`${Nn}-${Wn}-${Oi}`]:"%Y-%m-%d ",[`${ar}-${sr}`]:"%H:%M"};function R7(e,t){const n=Ue({},eK,t),i=bC(e),r=i.length;let a="",s=0,o,u;for(s=0;s<r;)for(o=i.length;o>s;--o)if(u=i.slice(s,o).join("-"),n[u]!=null){a+=n[u],s=o;break}return a.trim()}const hu=new Date;function xC(e){return hu.setFullYear(e),hu.setMonth(0),hu.setDate(1),hu.setHours(0,0,0,0),hu}function N7(e){return F7(new Date(e))}function z7(e){return Pw(new Date(e))}function F7(e){return Ps.count(xC(e.getFullYear())-1,e)}function Pw(e){return _d.count(xC(e.getFullYear())-1,e)}function Iw(e){return xC(e).getDay()}function tK(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function L7(e){return U7(new Date(e))}function B7(e){return jw(new Date(e))}function U7(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return nl.count(t-1,e)}function jw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return wd.count(t-1,e)}function Hw(e){return hu.setTime(Date.UTC(e,0,1)),hu.getUTCDay()}function nK(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function q7(e,t,n,i,r){const a=t||1,s=Qe(e),o=(_,w,A)=>(A=A||_,iK(n[A],i[A],_===s&&a,w)),u=new Date,f=ia(e),d=f[Nn]?o(Nn):Jn(2012),h=f[Wn]?o(Wn):f[ki]?o(ki):jo,p=f[an]&&f[Gn]?o(Gn,1,an+Gn):f[an]?o(an,1):f[Gn]?o(Gn,1):f[Oi]?o(Oi,1):f[Ga]?o(Ga,1):bd,y=f[ar]?o(ar):jo,v=f[sr]?o(sr):jo,b=f[Or]?o(Or):jo,S=f[ra]?o(ra):jo;return function(_){u.setTime(+_);const w=d(u);return r(w,h(u),p(u,w),y(u),v(u),b(u),S(u))}}function iK(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function Pf(e,t,n){return t+e*7-(n+6)%7}const rK={[Nn]:e=>e.getFullYear(),[ki]:e=>Math.floor(e.getMonth()/3),[Wn]:e=>e.getMonth(),[Oi]:e=>e.getDate(),[ar]:e=>e.getHours(),[sr]:e=>e.getMinutes(),[Or]:e=>e.getSeconds(),[ra]:e=>e.getMilliseconds(),[Ga]:e=>F7(e),[an]:e=>Pw(e),[an+Gn]:(e,t)=>Pf(Pw(e),e.getDay(),Iw(t)),[Gn]:(e,t)=>Pf(1,e.getDay(),Iw(t))},aK={[ki]:e=>3*e,[an]:(e,t)=>Pf(e,0,Iw(t))};function P7(e,t){return q7(e,t||1,rK,aK,tK)}const sK={[Nn]:e=>e.getUTCFullYear(),[ki]:e=>Math.floor(e.getUTCMonth()/3),[Wn]:e=>e.getUTCMonth(),[Oi]:e=>e.getUTCDate(),[ar]:e=>e.getUTCHours(),[sr]:e=>e.getUTCMinutes(),[Or]:e=>e.getUTCSeconds(),[ra]:e=>e.getUTCMilliseconds(),[Ga]:e=>U7(e),[an]:e=>jw(e),[Gn]:(e,t)=>Pf(1,e.getUTCDay(),Hw(t)),[an+Gn]:(e,t)=>Pf(jw(e),e.getUTCDay(),Hw(t))},oK={[ki]:e=>3*e,[an]:(e,t)=>Pf(e,0,Hw(t))};function I7(e,t){return q7(e,t||1,sK,oK,nK)}const lK={[Nn]:ja,[ki]:Zg.every(3),[Wn]:Zg,[an]:_d,[Oi]:Ps,[Gn]:Ps,[Ga]:Ps,[ar]:Gv,[sr]:jv,[Or]:Fs,[ra]:Bf},uK={[Nn]:Ha,[ki]:Kg.every(3),[Wn]:Kg,[an]:wd,[Oi]:nl,[Gn]:nl,[Ga]:nl,[ar]:Yv,[sr]:Hv,[Or]:Fs,[ra]:Bf};function Ad(e){return lK[e]}function $d(e){return uK[e]}function j7(e,t,n){return e?e.offset(t,n):void 0}function H7(e,t,n){return j7(Ad(e),t,n)}function G7(e,t,n){return j7($d(e),t,n)}function Y7(e,t,n,i){return e?e.range(t,n,i):void 0}function X7(e,t,n,i){return Y7(Ad(e),t,n,i)}function V7(e,t,n,i){return Y7($d(e),t,n,i)}const hg=1e3,gg=hg*60,pg=gg*60,Xv=pg*24,cK=Xv*7,C6=Xv*30,Gw=Xv*365,W7=[Nn,Wn,Oi,ar,sr,Or,ra],mg=W7.slice(0,-1),yg=mg.slice(0,-1),vg=yg.slice(0,-1),fK=vg.slice(0,-1),dK=[Nn,an],T6=[Nn,Wn],Q7=[Nn],Hh=[[mg,1,hg],[mg,5,5*hg],[mg,15,15*hg],[mg,30,30*hg],[yg,1,gg],[yg,5,5*gg],[yg,15,15*gg],[yg,30,30*gg],[vg,1,pg],[vg,3,3*pg],[vg,6,6*pg],[vg,12,12*pg],[fK,1,Xv],[dK,1,cK],[T6,1,C6],[T6,3,3*C6],[Q7,1,Gw]];function Z7(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(kp(t))/n;let r=Ed(o=>o[2]).right(Hh,i),a,s;return r===Hh.length?(a=Q7,s=ll(t[0]/Gw,t[1]/Gw,n)):r?(r=Hh[i/Hh[r-1][2]<Hh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=W7,s=Math.max(ll(t[0],t[1],n),1)),{units:a,step:s}}function o_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function l_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Gh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function K7(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,u=e.shortMonths,f=Yh(r),d=Xh(r),h=Yh(a),p=Xh(a),y=Yh(s),v=Xh(s),b=Yh(o),S=Xh(o),_=Yh(u),w=Xh(u),A={a:q,A:X,b:Q,B:ae,c:null,d:N6,e:N6,f:zK,g:GK,G:XK,H:DK,I:RK,j:NK,L:J7,m:FK,M:LK,p:xe,q:he,Q:L6,s:B6,S:BK,u:UK,U:qK,V:PK,w:IK,W:jK,x:null,X:null,y:HK,Y:YK,Z:VK,"%":F6},$={a:ye,A:Re,b:Me,B:wt,c:null,d:z6,e:z6,f:KK,g:lJ,G:cJ,H:WK,I:QK,j:ZK,L:tL,m:JK,M:eJ,p:ur,q:Bi,Q:L6,s:B6,S:tJ,u:nJ,U:iJ,V:rJ,w:aJ,W:sJ,x:null,X:null,y:oJ,Y:uJ,Z:fJ,"%":F6},T={a:B,A:F,b:G,B:I,c:U,d:D6,e:D6,f:TK,g:O6,G:k6,H:R6,I:R6,j:wK,L:CK,m:_K,M:AK,p:N,q:EK,Q:kK,s:OK,S:$K,u:yK,U:vK,V:bK,w:mK,W:xK,x:z,X:R,y:O6,Y:k6,Z:SK,"%":MK};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),$.x=k(n,$),$.X=k(i,$),$.c=k(t,$);function k(pe,Fe){return function(Be){var oe=[],Pt=-1,Je=0,Vt=pe.length,cn,Wt,S0;for(Be instanceof Date||(Be=new Date(+Be));++Pt<Vt;)pe.charCodeAt(Pt)===37&&(oe.push(pe.slice(Je,Pt)),(Wt=M6[cn=pe.charAt(++Pt)])!=null?cn=pe.charAt(++Pt):Wt=cn==="e"?" ":"0",(S0=Fe[cn])&&(cn=S0(Be,Wt)),oe.push(cn),Je=Pt+1);return oe.push(pe.slice(Je,Pt)),oe.join("")}}function M(pe,Fe){return function(Be){var oe=Gh(1900,void 0,1),Pt=D(oe,pe,Be+="",0),Je,Vt;if(Pt!=Be.length)return null;if("Q"in oe)return new Date(oe.Q);if("s"in oe)return new Date(oe.s*1e3+("L"in oe?oe.L:0));if(Fe&&!("Z"in oe)&&(oe.Z=0),"p"in oe&&(oe.H=oe.H%12+oe.p*12),oe.m===void 0&&(oe.m="q"in oe?oe.q:0),"V"in oe){if(oe.V<1||oe.V>53)return null;"w"in oe||(oe.w=1),"Z"in oe?(Je=l_(Gh(oe.y,0,1)),Vt=Je.getUTCDay(),Je=Vt>4||Vt===0?ay.ceil(Je):ay(Je),Je=nl.offset(Je,(oe.V-1)*7),oe.y=Je.getUTCFullYear(),oe.m=Je.getUTCMonth(),oe.d=Je.getUTCDate()+(oe.w+6)%7):(Je=o_(Gh(oe.y,0,1)),Vt=Je.getDay(),Je=Vt>4||Vt===0?ry.ceil(Je):ry(Je),Je=Ps.offset(Je,(oe.V-1)*7),oe.y=Je.getFullYear(),oe.m=Je.getMonth(),oe.d=Je.getDate()+(oe.w+6)%7)}else("W"in oe||"U"in oe)&&("w"in oe||(oe.w="u"in oe?oe.u%7:"W"in oe?1:0),Vt="Z"in oe?l_(Gh(oe.y,0,1)).getUTCDay():o_(Gh(oe.y,0,1)).getDay(),oe.m=0,oe.d="W"in oe?(oe.w+6)%7+oe.W*7-(Vt+5)%7:oe.w+oe.U*7-(Vt+6)%7);return"Z"in oe?(oe.H+=oe.Z/100|0,oe.M+=oe.Z%100,l_(oe)):o_(oe)}}function D(pe,Fe,Be,oe){for(var Pt=0,Je=Fe.length,Vt=Be.length,cn,Wt;Pt<Je;){if(oe>=Vt)return-1;if(cn=Fe.charCodeAt(Pt++),cn===37){if(cn=Fe.charAt(Pt++),Wt=T[cn in M6?Fe.charAt(Pt++):cn],!Wt||(oe=Wt(pe,Be,oe))<0)return-1}else if(cn!=Be.charCodeAt(oe++))return-1}return oe}function N(pe,Fe,Be){var oe=f.exec(Fe.slice(Be));return oe?(pe.p=d.get(oe[0].toLowerCase()),Be+oe[0].length):-1}function B(pe,Fe,Be){var oe=y.exec(Fe.slice(Be));return oe?(pe.w=v.get(oe[0].toLowerCase()),Be+oe[0].length):-1}function F(pe,Fe,Be){var oe=h.exec(Fe.slice(Be));return oe?(pe.w=p.get(oe[0].toLowerCase()),Be+oe[0].length):-1}function G(pe,Fe,Be){var oe=_.exec(Fe.slice(Be));return oe?(pe.m=w.get(oe[0].toLowerCase()),Be+oe[0].length):-1}function I(pe,Fe,Be){var oe=b.exec(Fe.slice(Be));return oe?(pe.m=S.get(oe[0].toLowerCase()),Be+oe[0].length):-1}function U(pe,Fe,Be){return D(pe,t,Fe,Be)}function z(pe,Fe,Be){return D(pe,n,Fe,Be)}function R(pe,Fe,Be){return D(pe,i,Fe,Be)}function q(pe){return s[pe.getDay()]}function X(pe){return a[pe.getDay()]}function Q(pe){return u[pe.getMonth()]}function ae(pe){return o[pe.getMonth()]}function xe(pe){return r[+(pe.getHours()>=12)]}function he(pe){return 1+~~(pe.getMonth()/3)}function ye(pe){return s[pe.getUTCDay()]}function Re(pe){return a[pe.getUTCDay()]}function Me(pe){return u[pe.getUTCMonth()]}function wt(pe){return o[pe.getUTCMonth()]}function ur(pe){return r[+(pe.getUTCHours()>=12)]}function Bi(pe){return 1+~~(pe.getUTCMonth()/3)}return{format:function(pe){var Fe=k(pe+="",A);return Fe.toString=function(){return pe},Fe},parse:function(pe){var Fe=M(pe+="",!1);return Fe.toString=function(){return pe},Fe},utcFormat:function(pe){var Fe=k(pe+="",$);return Fe.toString=function(){return pe},Fe},utcParse:function(pe){var Fe=M(pe+="",!0);return Fe.toString=function(){return pe},Fe}}}var M6={"-":"",_:" ",0:"0"},_n=/^\s*\d+/,hK=/^%/,gK=/[\\^$*+?|[\]().{}]/g;function it(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function pK(e){return e.replace(gK,"\\$&")}function Yh(e){return new RegExp("^(?:"+e.map(pK).join("|")+")","i")}function Xh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mK(e,t,n){var i=_n.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function yK(e,t,n){var i=_n.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function vK(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function bK(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function xK(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function k6(e,t,n){var i=_n.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function O6(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function SK(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function EK(e,t,n){var i=_n.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function _K(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function D6(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function wK(e,t,n){var i=_n.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function R6(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function AK(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function $K(e,t,n){var i=_n.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function CK(e,t,n){var i=_n.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function TK(e,t,n){var i=_n.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function MK(e,t,n){var i=hK.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function kK(e,t,n){var i=_n.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function OK(e,t,n){var i=_n.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function N6(e,t){return it(e.getDate(),t,2)}function DK(e,t){return it(e.getHours(),t,2)}function RK(e,t){return it(e.getHours()%12||12,t,2)}function NK(e,t){return it(1+Ps.count(ja(e),e),t,3)}function J7(e,t){return it(e.getMilliseconds(),t,3)}function zK(e,t){return J7(e,t)+"000"}function FK(e,t){return it(e.getMonth()+1,t,2)}function LK(e,t){return it(e.getMinutes(),t,2)}function BK(e,t){return it(e.getSeconds(),t,2)}function UK(e){var t=e.getDay();return t===0?7:t}function qK(e,t){return it(_d.count(ja(e)-1,e),t,2)}function eL(e){var t=e.getDay();return t>=4||t===0?Uf(e):Uf.ceil(e)}function PK(e,t){return e=eL(e),it(Uf.count(ja(e),e)+(ja(e).getDay()===4),t,2)}function IK(e){return e.getDay()}function jK(e,t){return it(ry.count(ja(e)-1,e),t,2)}function HK(e,t){return it(e.getFullYear()%100,t,2)}function GK(e,t){return e=eL(e),it(e.getFullYear()%100,t,2)}function YK(e,t){return it(e.getFullYear()%1e4,t,4)}function XK(e,t){var n=e.getDay();return e=n>=4||n===0?Uf(e):Uf.ceil(e),it(e.getFullYear()%1e4,t,4)}function VK(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+it(t/60|0,"0",2)+it(t%60,"0",2)}function z6(e,t){return it(e.getUTCDate(),t,2)}function WK(e,t){return it(e.getUTCHours(),t,2)}function QK(e,t){return it(e.getUTCHours()%12||12,t,2)}function ZK(e,t){return it(1+nl.count(Ha(e),e),t,3)}function tL(e,t){return it(e.getUTCMilliseconds(),t,3)}function KK(e,t){return tL(e,t)+"000"}function JK(e,t){return it(e.getUTCMonth()+1,t,2)}function eJ(e,t){return it(e.getUTCMinutes(),t,2)}function tJ(e,t){return it(e.getUTCSeconds(),t,2)}function nJ(e){var t=e.getUTCDay();return t===0?7:t}function iJ(e,t){return it(wd.count(Ha(e)-1,e),t,2)}function nL(e){var t=e.getUTCDay();return t>=4||t===0?qf(e):qf.ceil(e)}function rJ(e,t){return e=nL(e),it(qf.count(Ha(e),e)+(Ha(e).getUTCDay()===4),t,2)}function aJ(e){return e.getUTCDay()}function sJ(e,t){return it(ay.count(Ha(e)-1,e),t,2)}function oJ(e,t){return it(e.getUTCFullYear()%100,t,2)}function lJ(e,t){return e=nL(e),it(e.getUTCFullYear()%100,t,2)}function uJ(e,t){return it(e.getUTCFullYear()%1e4,t,4)}function cJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qf(e):qf.ceil(e),it(e.getUTCFullYear()%1e4,t,4)}function fJ(){return"+0000"}function F6(){return"%"}function L6(e){return+e}function B6(e){return Math.floor(+e/1e3)}var af,SC,iL,EC,rL;dJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dJ(e){return af=K7(e),SC=af.format,iL=af.parse,EC=af.utcFormat,rL=af.utcParse,af}function bg(e){const t={};return n=>t[n]||(t[n]=e(n))}function hJ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=gJ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function gJ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function aL(e){const t=bg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Du(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return hJ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Du(s??",f");const o=ll(i,r,a),u=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=M7(o,u))||(s.precision=f),n(s,u);case"":case"e":case"g":case"p":case"r":{isNaN(f=k7(o,u))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=T7(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let Yw;sL();function sL(){return Yw=aL({format:Iv,formatPrefix:mC})}function oL(e){return aL(C7(e))}function sy(e){return arguments.length?Yw=oL(e):Yw}function U6(e,t,n){n=n||{},me(n)||J(`Invalid time multi-format specifier: ${n}`);const i=t(Or),r=t(sr),a=t(ar),s=t(Oi),o=t(an),u=t(Wn),f=t(ki),d=t(Nn),h=e(n[ra]||".%L"),p=e(n[Or]||":%S"),y=e(n[sr]||"%I:%M"),v=e(n[ar]||"%I %p"),b=e(n[Oi]||n[Gn]||"%a %d"),S=e(n[an]||"%b %d"),_=e(n[Wn]||"%B"),w=e(n[ki]||"%B"),A=e(n[Nn]||"%Y");return $=>(i($)<$?h:r($)<$?p:a($)<$?y:s($)<$?v:u($)<$?o($)<$?b:S:d($)<$?f($)<$?_:w:A)($)}function lL(e){const t=bg(e.format),n=bg(e.utcFormat);return{timeFormat:i=>be(i)?t(i):U6(t,Ad,i),utcFormat:i=>be(i)?n(i):U6(n,$d,i),timeParse:bg(e.parse),utcParse:bg(e.utcParse)}}let Xw;uL();function uL(){return Xw=lL({format:SC,parse:iL,utcFormat:EC,utcParse:rL})}function cL(e){return lL(K7(e))}function Jg(e){return arguments.length?Xw=cL(e):Xw}const Vw=(e,t)=>Ue({},e,t);function fL(e,t){const n=e?oL(e):sy(),i=t?cL(t):Jg();return Vw(n,i)}function _C(e,t){const n=arguments.length;return n&&n!==2&&J("defaultLocale expects either zero or two arguments."),n?Vw(sy(e),Jg(t)):Vw(sy(),Jg())}function pJ(){return sL(),uL(),_C()}const mJ=/^(data:|([A-Za-z]+:)?\/\/)/,yJ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,vJ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,q6="file://";function bJ(e,t){return n=>({options:n||{},sanitize:SJ,load:xJ,fileAccess:!1,file:EJ(),http:wJ(e)})}async function xJ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function SJ(e,t){t=Ue({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=yJ.test(e.replace(vJ,""));(e==null||typeof e!="string"||!o)&&J("Sanitize failure, invalid URI: "+ce(e));const u=mJ.test(e);return(s=t.baseURL)&&!u&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(q6))||t.mode==="file"||t.mode!=="http"&&!u&&n,r?e=e.slice(q6.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function EJ(e){return _J}async function _J(){J("No file system access.")}function wJ(e){return e?async function(t,n){const i=Ue({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?qe(a[r])?a[r]():a.text():J(a.status+""+a.statusText)}:AJ}async function AJ(){J("No HTTP fetch method available.")}const $J=e=>e!=null&&e===e,CJ=e=>e==="true"||e==="false"||e===!0||e===!1,TJ=e=>!Number.isNaN(Date.parse(e)),dL=e=>!Number.isNaN(+e)&&!(e instanceof Date),MJ=e=>dL(e)&&Number.isInteger(+e),Ww={boolean:dC,integer:Yn,number:Yn,date:hC,string:gC,unknown:Kn},Um=[CJ,MJ,dL,TJ],kJ=["boolean","integer","number","date"];function hL(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Um.length,r=Um.map((a,s)=>s+1);for(let a=0,s=0,o,u;a<n;++a)for(u=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&$J(u)&&!Um[o](u)&&(r[o]=0,++s,s===Um.length))return"string";return kJ[r.reduce((a,s)=>a===0?s:a,0)-1]}function gL(e,t){return t.reduce((n,i)=>(n[i]=hL(e,i),n),{})}function P6(e){const t=function(n,i){const r={delimiter:e};return wC(n,i?Ue(i,r):r)};return t.responseType="text",t}function wC(e,t){return t.header&&(e=t.header.map(ce).join(t.delimiter)+`
`+e),cZ(t.delimiter).parse(e+"")}wC.responseType="text";function OJ(e){return typeof Buffer=="function"&&qe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function AC(e,t){const n=t&&t.property?Mr(t.property):Kn;return me(e)&&!OJ(e)?DJ(n(e),t):n(JSON.parse(e))}AC.responseType="json";function DJ(e,t){return!te(e)&&o7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const RJ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function pL(e,t){let n,i,r,a;return e=AC(e,t),t&&t.feature?(n=gZ,r=t.feature):t&&t.mesh?(n=mZ,r=t.mesh,a=RJ[t.filter]):J("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):J("Invalid TopoJSON object: "+r),i&&i.features||[i]}pL.responseType="json";const w1={dsv:wC,csv:P6(","),tsv:P6("	"),json:AC,topojson:pL};function $C(e,t){return arguments.length>1?(w1[e]=t,this):ve(w1,e)?w1[e]:null}function mL(e){const t=$C(e);return t&&t.responseType||"text"}function yL(e,t,n,i){t=t||{};const r=$C(t.type||"json");return r||J("Unknown data format type: "+t.type),e=r(e,t),t.parse&&NJ(e,t.parse,n,i),ve(e,"columns")&&delete e.columns,e}function NJ(e,t,n,i){if(!e.length)return;const r=Jg();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,u,f,d,h;t==="auto"&&(t=gL(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!Ww[v])throw Error("Illegal format pattern: "+y+":"+v);return Ww[v]});for(u=0,d=e.length,h=a.length;u<d;++u)for(s=e[u],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const Vv=bJ(typeof fetch<"u"&&fetch);function Wv(e){const t=e||Kn,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function A1(e,t){try{await t(e)}catch(n){e.error(n)}}const vL=Symbol("vega_id");let zJ=1;function Qv(e){return!!(e&&$e(e))}function $e(e){return e[vL]}function bL(e,t){return e[vL]=t,e}function st(e){const t=e===Object(e)?e:{data:e};return $e(t)?t:bL(t,zJ++)}function CC(e){return Zv(e,st({}))}function Zv(e,t){for(const n in e)t[n]=e[n];return t}function xL(e,t){return bL(t,$e(e))}function ic(e,t){return e?t?(n,i)=>e(n,i)||$e(t(n))-$e(t(i)):(n,i)=>e(n,i)||$e(n)-$e(i):null}function SL(e){return e&&e.constructor===rc}function rc(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:rc,insert(o){const u=ge(o),f=u.length;for(let d=0;d<f;++d)e.push(u[d]);return this},remove(o){const u=qe(o)?i:t,f=ge(o),d=f.length;for(let h=0;h<d;++h)u.push(f[h]);return this},modify(o,u,f){const d={field:u,value:Jn(f)};return qe(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,u){return qe(o)?r.push({filter:o,field:u}):n.push({tuple:o,field:u}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,u){const f={},d={};let h,p,y,v,b,S;for(h=0,p=u.length;h<p;++h)f[$e(u[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[$e(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],u.forEach(w=>{v(w)&&(f[$e(w)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=$e(b),f[S]?f[S]=1:o.add.push(st(e[h]));for(h=0,p=u.length;h<p;++h)b=u[h],f[$e(b)]<0&&o.rem.push(b);function _(w,A,$){$?w[A]=$(w):o.encode=A,s||(d[$e(w)]=w)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=f[$e(b)],S>0&&(_(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,u.forEach(w=>{v(w)&&f[$e(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?u.filter(w=>f[$e(w)]>0):u.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const $1="_:mod:_";function Kv(){Object.defineProperty(this,$1,{writable:!0,value:{}})}Kv.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[$1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=te(n)?1+n.length:-1),r},modified(e,t){const n=this[$1];if(arguments.length){if(te(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[$1]={},this}};let FJ=0;const LJ="pulse",BJ=new Kv,UJ=1,qJ=2;function xt(e,t,n,i){this.id=++FJ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function I6(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}xt.prototype={targets(){return this._targets||(this._targets=Wv(Tp))},set(e){return this.value!==e?(this.value=e,1):0},skip:I6(UJ),modified:I6(qJ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new Kv,r=this._argops=this._argops||[],a=[];let s,o,u,f;const d=(h,p,y)=>{y instanceof xt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===LJ)ge(o).forEach(h=>{h instanceof xt?h!==this&&(h.targets().add(this),a.push(h)):J("Pulse parameters must be operator instances.")}),this.source=o;else if(te(o))for(i.set(s,-1,Array(u=o.length)),f=0;f<u;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||BJ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function PJ(e,t,n,i){let r=1,a;return e instanceof xt?a=e:e&&e.prototype instanceof xt?a=new e:qe(e)?a=new xt(null,e):(r=0,a=new xt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function IJ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let jJ=0;function Jv(e,t,n){this.id=++jJ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Fo(e,t,n){return new Jv(e,t,n)}Jv.prototype={_filter:kr,_apply:Kn,targets(){return this._targets||(this._targets=Wv(Tp))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Fo(e);return this.targets().add(t),t},apply(e){const t=Fo(null,e);return this.targets().add(t),t},merge(){const e=Fo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Fo();return this.targets().add(Fo(null,null,uC(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Fo(null,null,()=>n=!0)),t.targets().add(Fo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=kr,this._targets=null}};function HJ(e,t,n,i){const r=this,a=Fo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=ge(e);const u=o.length;for(let f=0;f<u;++f)o[f].addEventListener(t,s);return a}function GJ(e,t){const n=this.locale();return yL(e,t,n.timeParse,n.utcParse)}function YJ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function XJ(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:mL(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function VJ(e,t,n){const i=this,r=i._pending||WJ(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(kr).insert(a.data||[])),r.done(),a}function WJ(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const QJ={skip:!0};function ZJ(e,t,n,i,r){return(e instanceof xt?JJ:KJ)(this,e,t,n,i,r),this}function KJ(e,t,n,i,r,a){const s=Ue({},a,QJ);let o,u;qe(n)||(n=Jn(n)),i===void 0?o=f=>e.touch(n(f)):qe(i)?(u=new xt(null,i,r,!1),o=f=>{u.evaluate(f);const d=n(f),h=u.value;SL(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function JJ(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new xt(null,eee(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function eee(e,t){return t=qe(t)?t:Jn(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function tee(e){e.rank=++this._rank}function nee(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&J("Cycle detected in dataflow graph.")}const oy={},Ta=1,Uo=2,Ms=4,iee=Ta|Uo,j6=Ta|Ms,sf=Ta|Uo|Ms,H6=8,Vh=16,G6=32,Y6=64;function il(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function u_(e,t){const n=[];return Bo(e,t,i=>n.push(i)),n}function X6(e,t){const n={};return e.visit(t,i=>{n[$e(i)]=1}),i=>n[$e(i)]?null:i}function qm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}il.prototype={StopPropagation:oy,ADD:Ta,REM:Uo,MOD:Ms,ADD_REM:iee,ADD_MOD:j6,ALL:sf,REFLOW:H6,SOURCE:Vh,NO_SOURCE:G6,NO_FIELDS:Y6,fork(e){return new il(this.dataflow).init(this,e)},clone(){const e=this.fork(sf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(sf|Vh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new il(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&Y6)&&(n.fields=e.fields),t&Ta?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Uo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ms?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&G6?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||sf;return t&Ta&&this.add.length||t&Uo&&this.rem.length||t&Ms&&this.mod.length},reflow(e){if(e)return this.fork(sf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ms,X6(this,Ta))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return te(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?te(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ta&&(n.addF=qm(n.addF,t)),e&Uo&&(n.remF=qm(n.remF,t)),e&Ms&&(n.modF=qm(n.modF,t)),e&Vh&&(n.srcF=qm(n.srcF,t)),n},materialize(e){e=e||sf;const t=this;return e&Ta&&t.addF&&(t.add=u_(t.add,t.addF),t.addF=null),e&Uo&&t.remF&&(t.rem=u_(t.rem,t.remF),t.remF=null),e&Ms&&t.modF&&(t.mod=u_(t.mod,t.modF),t.modF=null),e&Vh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Vh)return Bo(n.source,n.srcF,i),n;e&Ta&&Bo(n.add,n.addF,i),e&Uo&&Bo(n.rem,n.remF,i),e&Ms&&Bo(n.mod,n.modF,i);const r=n.source;if(e&H6&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Bo(r,X6(n,j6),i):Bo(r,n.srcF,i))}return n}};function TC(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const u in s.fields)o[u]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}fe(TC,il,{fork(e){const t=new il(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?te(e)?e.some(i=>n[i]):n[e]:0},filter(){J("MultiPulse does not support filtering.")},materialize(){J("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function ree(e,t,n){const i=this,r=[];if(i._pulse)return EL(i);if(i._pending&&await i._pending,t&&await A1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new il(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Wv(Tp);let s=0,o,u,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}u=o.run(i._getPulse(o,e)),u.then?u=await u:u.async&&(r.push(u.async),u=oy),u!==oy&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await A1(i,d[h].callback)}return n&&await A1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function aee(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function see(e,t,n){return this._pulse?EL(this):(this.evaluate(e,t,n),this)}function oee(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function EL(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function lee(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function uee(e,t){const n=e.source,i=this._clock;return n&&te(n)?new TC(this,i,n.map(r=>r.pulse),t):this._input[e.id]||cee(this._pulse,n&&n.pulse)}function cee(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==oy&&(e.source=t.source),e)}const MC={skip:!1,force:!1};function fee(e,t){const n=t||MC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function dee(e,t,n){const i=n||MC;return(e.set(t)||i.force)&&this.touch(e,i),this}function hee(e,t,n){this.touch(e,n||MC);const i=new il(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function gee(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),_L(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,pee(t,0,e)):i=n,i}}}function _L(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function pee(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,_L(e,i,t,n)}function Cf(){this.logger(rC()),this.logLevel(nC),this._clock=0,this._rank=0,this._locale=_C();try{this._loader=Vv()}catch{}this._touched=Wv(Tp),this._input={},this._pulse=null,this._heap=gee((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Wh(e){return function(){return this._log[e].apply(this,arguments)}}Cf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Wh("error"),warn:Wh("warn"),info:Wh("info"),debug:Wh("debug"),logLevel:Wh("level"),cleanThreshold:1e4,add:PJ,connect:IJ,rank:tee,rerank:nee,pulse:hee,touch:fee,update:dee,changeset:rc,ingest:YJ,parse:GJ,preload:VJ,request:XJ,events:HJ,on:ZJ,evaluate:ree,run:see,runAsync:aee,runAfter:oee,_enqueue:lee,_getPulse:uee};function Z(e,t){xt.call(this,e,null,t)}fe(Z,xt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const If={};function wL(e){const t=AL(e);return t&&t.Definition||null}function AL(e){return e=e&&e.toLowerCase(),ve(If,e)?If[e]:null}function*$L(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function kC(e,t,n){const i=Float64Array.from($L(e,n));return i.sort(qs),t.map(r=>E7(i,r))}function OC(e,t){return kC(e,[.25,.5,.75],t)}function DC(e,t){const n=e.length,i=wZ(e,t),r=OC(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function CL(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,u,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(u=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-u));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Dr=Math.random;function mee(e){Dr=e}function TL(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from($L(e,i)),a=r.length,s=t;let o,u,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,u=0;u<a;++u)o+=r[~~(Dr()*a)];d[f]=o/a}return d.sort(qs),[qw(d,n/2),qw(d,1-n/2)]}function ML(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,u=i(e[0]),f=u,d=u+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(u+f)/2;s<o;++s)a[s]=f;d=h+t,u=h}f=h}for(f=(u+f)/2;s<o;++s)a[s]=f;return n?yee(a,t+t/4):a}function yee(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function vee(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function bee(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Dr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const kL=Math.sqrt(2*Math.PI),xee=Math.SQRT2;let Qh=NaN;function eb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(Qh===Qh)n=Qh,Qh=NaN;else{do n=Dr()*2-1,i=Dr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,Qh=i*a}return e+n*t}function RC(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*kL)}function tb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function nb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*xee*See(2*e-1)}function See(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function NC(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>eb(n,i),pdf:a=>RC(a,n,i),cdf:a=>tb(a,n,i),icdf:a=>nb(a,n,i)};return r.mean(e).stdev(t)}function zC(e,t){const n=NC();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=DC(e)),r):t},sample(){return e[~~(Dr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function FC(e,t){return e=e||0,t=t??1,Math.exp(e+eb()*t)}function LC(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*kL*e)}function BC(e,t,n){return tb(Math.log(e),t,n)}function UC(e,t,n){return Math.exp(nb(e,t,n))}function OL(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>FC(n,i),pdf:a=>LC(a,n,i),cdf:a=>BC(a,n,i),icdf:a=>UC(a,n,i)};return r.mean(e).stdev(t)}function DL(e,t){let n=0,i;function r(s){const o=[];let u=0,f;for(f=0;f<n;++f)u+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=u;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Dr();let o=e[n-1],u=i[0],f=0;for(;f<n-1;u+=i[++f])if(s<u){o=e[f];break}return o.sample()},pdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].pdf(s);return o},cdf(s){let o=0,u=0;for(;u<n;++u)o+=i[u]*e[u].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function qC(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Dr()}function PC(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function IC(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function jC(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function RL(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>qC(n,i),pdf:a=>PC(a,n,i),cdf:a=>IC(a,n,i),icdf:a=>jC(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function HC(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Op(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function ib(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,u=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,u+=(d-u)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=u,s[o]-=f;return[a,s,u,f]}function Dp(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Cd(e,t,n,i,r){let a=0,s=0;return Dp(e,t,n,(o,u)=>{const f=u-r(o),d=u-i;a+=f*f,s+=d*d}),1-a/s}function GC(e,t,n){let i=0,r=0,a=0,s=0,o=0;Dp(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Op(i,r,a,s),f=d=>u[0]+u[1]*d;return{coef:u,predict:f,rSquared:Cd(e,t,n,r,f)}}function NL(e,t,n){let i=0,r=0,a=0,s=0,o=0;Dp(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const u=Op(i,r,a,s),f=d=>u[0]+u[1]*Math.log(d);return{coef:u,predict:f,rSquared:Cd(e,t,n,r,f)}}function zL(e,t,n){const[i,r,a,s]=ib(e,t,n);let o=0,u=0,f=0,d=0,h=0,p,y,v;Dp(e,t,n,(w,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,u+=(v-u)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,S]=Op(u/s,o/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:Cd(e,t,n,s,_)}}function FL(e,t,n){let i=0,r=0,a=0,s=0,o=0,u=0;Dp(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++u,i+=(y-i)/u,r+=(v-r)/u,a+=(y*v-a)/u,s+=(y*y-s)/u,o+=(p-o)/u});const f=Op(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Cd(e,t,n,o,d)}}function YC(e,t,n){const[i,r,a,s]=ib(e,t,n),o=i.length;let u=0,f=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,u+=(S-u)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const _=d-u*u,w=u*_-f*f,A=(p*u-h*f)/w,$=(h*_-p*f)/w,T=-A*u,k=M=>(M=M-a,A*M*M+$*M+T+s);return{coef:[T-$*a+A*a*a+s,$-2*A*a,A],predict:k,rSquared:Cd(e,t,n,s,k)}}function LL(e,t,n,i){if(i===0)return HC(e,t,n);if(i===1)return GC(e,t,n);if(i===2)return YC(e,t,n);const[r,a,s,o]=ib(e,t,n),u=r.length,f=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<u;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=_ee(d),w=A=>{A-=s;let $=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<h;++p)$+=_[p]*Math.pow(A,p);return $};return{coef:Eee(h,_,-s,o),predict:w,rSquared:Cd(e,t,n,o,w)}}function Eee(e,t,n,i){const r=Array(e);let a,s,o,u;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],u=1,r[a]+=o,s=1;s<=a;++s)u*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*u;return r[0]+=i,r}function _ee(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const V6=2,W6=1e-12;function BL(e,t,n,i){const[r,a,s,o]=ib(e,t,n,!0),u=r.length,f=Math.max(2,~~(i*u)),d=new Float64Array(u),h=new Float64Array(u),p=new Float64Array(u).fill(1);for(let y=-1;++y<=V6;){const v=[0,f-1];for(let S=0;S<u;++S){const _=r[S],w=v[0],A=v[1],$=_-r[w]>r[A]-_?w:A;let T=0,k=0,M=0,D=0,N=0;const B=1/Math.abs(r[$]-_||1);for(let I=w;I<=A;++I){const U=r[I],z=a[I],R=wee(Math.abs(_-U)*B)*p[I],q=U*R;T+=R,k+=q,M+=z*R,D+=z*q,N+=U*q}const[F,G]=Op(k/T,M/T,D/T,N/T);d[S]=F+G*_,h[S]=Math.abs(a[S]-d[S]),Aee(r,S+1,v)}if(y===V6)break;const b=_7(h);if(Math.abs(b)<W6)break;for(let S=0,_,w;S<u;++S)_=h[S]/(6*b),p[S]=_>=1?W6:(w=1-_*_)*w}return $ee(r,d,s,o)}function wee(e){return(e=1-e*e*e)*e*e}function Aee(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function $ee(e,t,n,i){const r=e.length,a=[];let s=0,o=0,u=[],f;for(;s<r;++s)f=e[s]+n,u[0]===f?u[1]+=(t[s]-u[1])/++o:(o=0,u[1]+=i,u=[f,t[s]],a.push(u));return u[1]+=i,a}const Cee=.5*Math.PI/180;function rb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,u=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=Tee(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=u&&Mee(h,b,p,y,v)>Cee?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function Tee(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function Mee(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function kee(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function Qw(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:kee(e)}function UL(e,t,n){return n||e+(t?"_"+t:"")}const c_=()=>{},Oee={init:c_,add:c_,rem:c_,idx:0},ep={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Rp=Object.keys(ep).filter(e=>e!=="__count__");function Dee(e,t){return(n,i)=>Ue({name:e,aggregate_param:i,out:n||e},Oee,t)}[...Rp,"__count__"].forEach(e=>{ep[e]=Dee(e,ep[e])});function qL(e,t,n){return ep[e](n,t)}function PL(e,t){return e.idx-t.idx}function Ree(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=ep[r]())})};return e.forEach(n),Object.values(t).sort(PL)}function Nee(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function zee(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Fee(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Lee(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function IL(e,t){const n=t||Kn,i=Ree(e),r=e.slice().sort(PL);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=Nee,a.prototype.add=zee,a.prototype.rem=Fee,a.prototype.set=Lee,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function XC(e){this._key=e?Mr(e):$e,this.reset()}const Fn=XC.prototype;Fn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Fn.add=function(e){this._add.push(e)};Fn.rem=function(e){this._rem.push(e)};Fn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,u,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,u=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[u++]=f;return this._rem=[],this._add=a};Fn.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",ve(n,a)||(n[a]=1,++r);return r};Fn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=a7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Fn.argmin=function(e){return this.extent(e)[0]||{}};Fn.argmax=function(e){return this.extent(e)[1]||{}};Fn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Fn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Fn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=OC(this.values(),e),this._get=e),this._q};Fn.q1=function(e){return this.quartile(e)[0]};Fn.q2=function(e){return this.quartile(e)[1]};Fn.q3=function(e){return this.quartile(e)[2]};Fn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=TL(this.values(),1e3,.05,e),this._get=e),this._ci};Fn.ci0=function(e){return this.ci(e)[0]};Fn.ci1=function(e){return this.ci(e)[1]};function ul(e){Z.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ul.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};fe(ul,Z,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let u,f,d,h;for(u in o)for(d=o[u].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,u,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;u[d]=h[p],f<r?s(y,u,f):t[y]||e.cell(y,u)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=ge(Vn(w)),$=A.length;let T=0,k;for(;T<$;++T)i[k=A[T]]||(i[k]=1,t.push(k))}this._dims=ge(e.groupby),this._dnames=this._dims.map(w=>{const A=qt(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:Qw(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],u=e.as||[],f=a.length,d={};let h,p,y,v,b,S,_;for(f!==s.length&&J("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(h=a[_],p=s[_],y=o[_]||null,h==null&&p!=="count"&&J("Null aggregate field specified."),b=qt(h),S=UL(p,b,u[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(qL(p,y,S))}return this._measures=this._measures.map(w=>IL(w,w.field)),Object.create(null)},cellkey:Qw(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new XC),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?xL(t.tuple,a):st(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let u,f,d,h;if(i)for(f in i)u=i[f],(!r||u.num)&&s.push(u.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)u=n[d],(u.num===0&&r?s:o).push(this.celltuple(u)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Bee=1e-14;function VC(e){Z.call(this,null,e)}VC.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};fe(VC,Z,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],u=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Vn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[u]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=CL(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const u=function(f){let d=Yn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(Bee+(d-r)/i))};return u.start=r,u.stop=n.stop,u.step=i,this.value=Fi(u,Vn(t),e.name||"bin_"+qt(t))}});function jL(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:u=>a.push(u),remove:u=>s[i(u)]=++o,size:()=>r.length,data:(u,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&u&&r.sort(u),a.length&&(r=u?c7(u,r,a.sort(u)):r.concat(a),a=[]),r)}}function WC(e){Z.call(this,[],e)}WC.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};fe(WC,Z,{transform(e,t){const n=t.fork(t.ALL),i=jL($e,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(ic(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function HL(e){xt.call(this,null,Uee,e)}fe(HL,xt);function Uee(e){return this.value&&!e.modified()?this.value:lC(e.fields,e.orders)}function QC(e){Z.call(this,null,e)}QC.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function qee(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}fe(QC,Z,{transform(e,t){const n=h=>p=>{for(var y=qee(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,u=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,u,f;for(o in n)u=i[o],f=n[o]||0,!u&&f?(i[o]=u=st({}),u[r]=o,u[a]=f,s.add.push(u)):f===0?(u&&s.rem.push(u),n[o]=null,i[o]=null):u[a]!==f&&(u[a]=f,s.mod.push(u));return s.modifies(t)}});function ZC(e){Z.call(this,null,e)}ZC.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};fe(ZC,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=Pee(o,r,a,e.filter||kr)):n.mod=o,n.source=this.value,n.modifies(i)}});function Pee(e,t,n,i){for(var r=[],a={},s=e.length,o=0,u,f;o<s;++o)for(a[t]=f=e[o],u=0;u<s;++u)a[n]=e[u],i(a)&&(r.push(st(a)),a={},a[t]=f);return r}const Q6={kde:zC,mixture:DL,normal:NC,lognormal:OL,uniform:RL},Iee="distributions",Z6="function",jee="field";function GL(e,t){const n=e[Z6];ve(Q6,n)||J("Unknown distribution function: "+n);const i=Q6[n]();for(const r in e)r===jee?i.data((e.from||t()).map(e[r])):r===Iee?i[r](e[r].map(a=>GL(a,t))):typeof i[r]===Z6&&i[r](e[r]);return i}function KC(e){Z.call(this,null,e)}const YL=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],Hee={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:YL},{name:"weights",type:"number",array:!0}]};KC.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:YL.concat(Hee)},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(KC,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=GL(e.distribution,Gee(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&J("Invalid density method: "+s),!e.extent&&!i.data&&J("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],u=e.extent||Ia(i.data()),f=rb(s,u,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],st(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function Gee(e){return()=>e.materialize(e.SOURCE).source}function XL(e,t){return e?e.map((n,i)=>t[i]||qt(n)):null}function JC(e,t,n){const i=[],r=h=>h(u);let a,s,o,u,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)u=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(u));return i}const VL="bin";function e3(e){Z.call(this,null,e)}e3.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:VL}]};const Yee=(e,t)=>kp(Ia(e,t))/30;fe(e3,Z,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=JC(t.source,e.groupby,Kn),r=e.smooth||!1,a=e.field,s=e.step||Yee(n,a),o=ic((v,b)=>a(v)-a(b)),u=e.as||VL,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of ML(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][u]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(u)}});function WL(e){xt.call(this,null,Xee,e),this.modified(!0)}fe(WL,xt);function Xee(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Fi(n=>t(n,e),Vn(t),qt(t))}function t3(e){Z.call(this,[void 0,void 0],e)}t3.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};fe(t3,Z,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const u=Yn(i(o));u!=null&&(u<a&&(a=u),u>s&&(s=u))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=qt(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function n3(e,t){xt.call(this,e),this.parent=t,this.count=0}fe(n3,xt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ab(e){Z.call(this,{},e),this._keys=Sd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}fe(ab,Z,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=ve(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new n3(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=u=>this.subflow(u,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const f=$e(u),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(u))}),t.visit(t.ADD,u=>{const f=i(u);a.set($e(u),f),o(f).add(u)}),s||t.modified(i.fields)?t.visit(t.MOD,u=>{const f=$e(u),d=a.get(f),h=i(u);d===h?o(h).mod(u):(a.set(f,h),o(d).rem(u),o(h).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{o(a.get($e(u))).mod(u)}),s&&t.visit(t.REFLOW,u=>{const f=$e(u),d=a.get(f),h=i(u);d!==h&&(a.set(f,h),o(d).rem(u),o(h).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function QL(e){xt.call(this,null,Vee,e)}fe(QL,xt);function Vee(e){return this.value&&!e.modified()?this.value:te(e.name)?ge(e.name).map(t=>Mr(t)):Mr(e.name,e.as)}function i3(e){Z.call(this,Sd(),e)}i3.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};fe(i3,Z,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,u=e.expr;let f=!0;t.visit(t.REM,h=>{const p=$e(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{u(h,e)?a.push(h):i.set($e(h),1)});function d(h){const p=$e(h),y=u(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function r3(e){Z.call(this,[],e)}r3.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};fe(r3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=XL(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const u=i.map(v=>v(o)),f=u.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=CC(o),h=0;h<s;++h)p[r[h]]=(y=u[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function a3(e){Z.call(this,[],e)}a3.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};fe(a3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(qt),a=e.as||["key","value"],s=a[0],o=a[1],u=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<u;++d)h=CC(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function s3(e){Z.call(this,null,e)}s3.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};fe(s3,Z,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function ZL(e){Z.call(this,[],e)}fe(ZL,Z,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,u;if(a>0){for(s=[];--a>=0;)s.push(u=st(i(e))),r.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const Pm={value:"value",median:_7,mean:kZ,min:Uw,max:_u},Wee=[];function o3(e){Z.call(this,[],e)}o3.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function Qee(e){var t=e.method||Pm.value,n;if(Pm[t]==null)J("Unrecognized imputation method: "+t);else return t===Pm.value?(n=e.value!==void 0?e.value:0,()=>n):Pm[t]}function Zee(e){const t=e.field;return n=>n?t(n):NaN}fe(o3,Z,{transform(e,t){var n=t.fork(t.ALL),i=Qee(e),r=Zee(e),a=qt(e.field),s=qt(e.key),o=(e.groupby||[]).map(qt),u=Kee(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=u.domain.length,p,y,v,b,S,_,w,A,$,T;for(S=0,A=u.length;S<A;++S)for(p=u[S],v=p.values,y=NaN,w=0;w<h;++w)if(p[w]==null){for(b=u.domain[w],T={_impute:!0},_=0,$=v.length;_<$;++_)T[o[_]]=v[_];T[s]=b,T[a]=Number.isNaN(y)?y=i(p,r):y,f.push(st(T))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function Kee(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],o={},u={},f,d,h,p,y,v,b,S;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):Wee)+"",(h=u[d])||(h=u[d]=[],a.push(h),h.values=f),h[y-1]=S;return a.domain=s,a}function l3(e){ul.call(this,e)}l3.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Rp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};fe(l3,ul,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{Ue(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function u3(e){Z.call(this,null,e)}u3.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};fe(u3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=JC(i,e.groupby,e.field),a=(e.groupby||[]).map(qt),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&J("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=Ia(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=zC(y,s)[o],b=e.counts?y.length:1,S=d||Ia(y);rb(v,S,h,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[u[0]]=_[0],w[u[1]]=_[1]*b,f.push(st(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function KL(e){xt.call(this,null,Jee,e)}fe(KL,xt);function Jee(e){return this.value&&!e.modified()?this.value:fC(e.fields,e.flat)}function JL(e){Z.call(this,[],e),this._pending=null}fe(JL,Z,{transform(e,t){const n=t.dataflow;return this._pending?f_(this,t,this._pending):ete(e)?t.StopPropagation:e.values?f_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ge(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>f_(this,t,ge(i.data)))}});function ete(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function f_(e,t,n){n.forEach(st);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function c3(e){Z.call(this,{},e)}c3.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};fe(c3,Z,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let u=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&J('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&J('The "as" parameter has too few output field names.'),d=d||r.map(qt),h=function(v){for(var b=0,S=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||J("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),u|=y?t.MOD:0),t.visit(u,h),f.modifies(d)}});function eB(e){xt.call(this,null,tte,e)}fe(eB,xt);function tte(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function tB(e){xt.call(this,null,nte,e)}fe(tB,xt);function nte(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function nB(e){Z.call(this,null,e)}fe(nB,Z,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function f3(e){ul.call(this,e)}f3.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Rp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};fe(f3,ul,{_transform:ul.prototype.transform,transform(e,t){return this._transform(ite(e,t),t)}});function ite(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Vn(n).concat(Vn(i)),s=ate(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>rte(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function rte(e,t,n,i){return Fi(r=>t(r)===e?n(r):NaN,i,e+"")}function ate(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Mp),t?r.slice(0,t):r}function iB(e){ab.call(this,e)}fe(iB,ab,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow($e(a),n,t,a);return(e.modified("field")||i&&t.modified(Vn(i)))&&J("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(st(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function d3(e){Z.call(this,null,e)}d3.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};fe(d3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=XL(e.fields,e.as||[]),a=i?(o,u)=>ste(o,u,i,r):Zv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const u=$e(o);n.rem.push(s[u]),s[u]=null}),t.visit(t.ADD,o=>{const u=a(o,st({}));s[$e(o)]=u,n.add.push(u)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[$e(o)]))}),n}});function ste(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function rB(e){Z.call(this,null,e)}fe(rB,Z,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function h3(e){Z.call(this,null,e)}h3.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const ote=1e-14;fe(h3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=JC(r,e.groupby,e.field),s=(e.groupby||[]).map(qt),o=[],u=e.step||.01,f=e.probs||Ji(u/2,1-ote,u),d=f.length;return a.forEach(h=>{const p=kC(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(st(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function aB(e){Z.call(this,null,e)}fe(aB,Z,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=$e(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=CC(r);i[$e(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[$e(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function g3(e){Z.call(this,[],e),this.count=0}g3.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};fe(g3,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[$e(h)]=1,d),{});let s=this.value,o=this.count,u=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Dr()),p<s.length&&p>=u&&(h=s[p],a[$e(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=$e(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[$e(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(u=o=s.length,t.visit(t.SOURCE,d=>{a[$e(d)]||f(d)}),u=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[$e(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[$e(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||u<0)&&(n.add=s.filter(d=>!a[$e(d)])),this.count=o,this.value=n.source=s,n}});function p3(e){Z.call(this,null,e)}p3.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};fe(p3,Z,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Ji(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,st(a)}),n.add=t.add.concat(this.value),n}});function sB(e){Z.call(this,null,e),this.modified(!0)}fe(sB,Z,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function m3(e){Z.call(this,null,e)}const oB=["unit0","unit1"];m3.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:vC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:oB}]};fe(m3,Z,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?$d:Ad)(a.unit).offset,o=e.as||oB,u=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Vn(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[u]=null,i&&(v[f]=null)):(v[u]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<h&&(h=S),_>p&&(p=_))}),a.start=h,a.stop=p,t.modifies(i?o:u)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:Z7({extent:e.extent||Ia(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=bC(i),s=this.value||{},o=(n?I7:P7)(a,r);return o.unit=Qe(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function lB(e){Z.call(this,Sd(),e)}fe(lB,Z,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function uB(e){Z.call(this,null,e)}fe(uB,Z,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(ic(e.sort)):t.source).map(e.field))}});function lte(e,t,n,i){const r=tp[e](t,n);return{init:r.init||jo,update:function(a,s){s[i]=r.next(a)}}}const tp={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=tp.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||J("ntile num must be greater than zero.");const n=tp.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||J("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=ute(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function ute(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const cte=Object.keys(tp);function cB(e){const t=ge(e.ops),n=ge(e.fields),i=ge(e.params),r=ge(e.aggregate_params),a=ge(e.as),s=this.outputs=[],o=this.windows=[],u={},f={},d=[],h=[];let p=!0;function y(v){ge(Vn(v)).forEach(b=>u[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=qt(S),$=UL(v,A,a[b]);if(y(S),s.push($),ve(tp,v))o.push(lte(v,S,_,$));else{if(S==null&&v!=="count"&&J("Null aggregate field specified."),v==="count"){d.push($);return}p=!1;let T=f[A];T||(T=f[A]=[],T.field=S,h.push(T)),T.push(qL(v,w,$))}}),(d.length||h.length)&&(this.cell=fte(h,d,p)),this.inputs=Object.keys(u)}const fB=cB.prototype;fB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};fB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function fte(e,t,n){e=e.map(u=>IL(u,u.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new XC;return i.add=function(u){if(i.num+=1,!n){o&&o.add(u);for(let f=0;f<r;++f)a[f].add(a[f].get(u),u)}},i.rem=function(u){if(i.num-=1,!n){o&&o.rem(u);for(let f=0;f<r;++f)a[f].rem(a[f].get(u),u)}},i.set=function(u){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)u[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(u)},i.init=function(){i.num=0,o&&o.reset();for(let u=0;u<r;++u)a[u].init()},i}function y3(e){Z.call(this,{},e),this._mlen=0,this._mods=[]}y3.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:cte.concat(Rp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};fe(y3,Z,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=ic(e.sort),r=Qw(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new cB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,u=this._mlen;o<u;++o)dte(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=jL($e),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function dte(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),u=o.length,f=a?Ed(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||Jn(-1)};t.init();for(let h=0;h<u;++h)hte(d,s,h,u),a&&gte(d,f),t.update(d,o[h])}function hte(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function gte(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const pte=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ul,bin:VC,collect:WC,compare:HL,countpattern:QC,cross:ZC,density:KC,dotbin:e3,expression:WL,extent:t3,facet:ab,field:QL,filter:i3,flatten:r3,fold:a3,formula:s3,generate:ZL,impute:o3,joinaggregate:l3,kde:u3,key:KL,load:JL,lookup:c3,multiextent:eB,multivalues:tB,params:nB,pivot:f3,prefacet:iB,project:d3,proxy:rB,quantile:h3,relay:aB,sample:g3,sequence:p3,sieve:sB,subflow:n3,timeunit:m3,tupleindex:lB,values:uB,window:y3},Symbol.toStringTag,{value:"Module"}));function ot(e){return function(){return e}}const K6=Math.abs,qn=Math.atan2,eu=Math.cos,mte=Math.max,d_=Math.min,Aa=Math.sin,vu=Math.sqrt,In=1e-12,jf=Math.PI,ly=jf/2,dB=2*jf;function yte(e){return e>1?0:e<-1?jf:Math.acos(e)}function J6(e){return e>=1?ly:e<=-1?-ly:Math.asin(e)}const Zw=Math.PI,Kw=2*Zw,fu=1e-6,vte=Kw-fu;function hB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function bte(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return hB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let v3=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?hB:bte(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,u=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>fu)if(!(Math.abs(h*u-f*d)>fu)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=u*u+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((Zw-Math.acos((b+p-S)/(2*_*w)))/2),$=A/w,T=A/_;Math.abs($-1)>fu&&this._append`L${t+$*d},${n+$*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+T*u},${this._y1=n+T*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),u=i*Math.sin(r),f=t+o,d=n+u,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>fu||Math.abs(this._y1-d)>fu)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%Kw+Kw),p>vte?this._append`A${i},${i},0,1,${h},${t-o},${n-u}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>fu&&this._append`A${i},${i},0,${+(p>=Zw)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function sb(){return new v3}sb.prototype=v3.prototype;function ob(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new v3(t)}function xte(e){return e.innerRadius}function Ste(e){return e.outerRadius}function Ete(e){return e.startAngle}function _te(e){return e.endAngle}function wte(e){return e&&e.padAngle}function Ate(e,t,n,i,r,a,s,o){var u=n-e,f=i-t,d=s-r,h=o-a,p=h*u-d*f;if(!(p*p<In))return p=(d*(t-a)-h*(e-r))/p,[e+p*u,t+p*f]}function Im(e,t,n,i,r,a,s){var o=e-n,u=t-i,f=(s?a:-a)/vu(o*o+u*u),d=f*u,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,$=w*w+A*A,T=r-a,k=p*b-v*y,M=(A<0?-1:1)*vu(mte(0,T*T*$-k*k)),D=(k*A-w*M)/$,N=(-k*w-A*M)/$,B=(k*A+w*M)/$,F=(-k*w+A*M)/$,G=D-S,I=N-_,U=B-S,z=F-_;return G*G+I*I>U*U+z*z&&(D=B,N=F),{cx:D,cy:N,x01:-d,y01:-h,x11:D*(r/T-1),y11:N*(r/T-1)}}function $te(){var e=xte,t=Ste,n=ot(0),i=null,r=Ete,a=_te,s=wte,o=null,u=ob(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-ly,b=a.apply(this,arguments)-ly,S=K6(b-v),_=b>v;if(o||(o=d=u()),y<p&&(h=y,y=p,p=h),!(y>In))o.moveTo(0,0);else if(S>dB-In)o.moveTo(y*eu(v),y*Aa(v)),o.arc(0,0,y,v,b,!_),p>In&&(o.moveTo(p*eu(b),p*Aa(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,$=v,T=b,k=S,M=S,D=s.apply(this,arguments)/2,N=D>In&&(i?+i.apply(this,arguments):vu(p*p+y*y)),B=d_(K6(y-p)/2,+n.apply(this,arguments)),F=B,G=B,I,U;if(N>In){var z=J6(N/p*Aa(D)),R=J6(N/y*Aa(D));(k-=z*2)>In?(z*=_?1:-1,$+=z,T-=z):(k=0,$=T=(v+b)/2),(M-=R*2)>In?(R*=_?1:-1,w+=R,A-=R):(M=0,w=A=(v+b)/2)}var q=y*eu(w),X=y*Aa(w),Q=p*eu(T),ae=p*Aa(T);if(B>In){var xe=y*eu(A),he=y*Aa(A),ye=p*eu($),Re=p*Aa($),Me;if(S<jf)if(Me=Ate(q,X,ye,Re,xe,he,Q,ae)){var wt=q-Me[0],ur=X-Me[1],Bi=xe-Me[0],pe=he-Me[1],Fe=1/Aa(yte((wt*Bi+ur*pe)/(vu(wt*wt+ur*ur)*vu(Bi*Bi+pe*pe)))/2),Be=vu(Me[0]*Me[0]+Me[1]*Me[1]);F=d_(B,(p-Be)/(Fe-1)),G=d_(B,(y-Be)/(Fe+1))}else F=G=0}M>In?G>In?(I=Im(ye,Re,q,X,y,G,_),U=Im(xe,he,Q,ae,y,G,_),o.moveTo(I.cx+I.x01,I.cy+I.y01),G<B?o.arc(I.cx,I.cy,G,qn(I.y01,I.x01),qn(U.y01,U.x01),!_):(o.arc(I.cx,I.cy,G,qn(I.y01,I.x01),qn(I.y11,I.x11),!_),o.arc(0,0,y,qn(I.cy+I.y11,I.cx+I.x11),qn(U.cy+U.y11,U.cx+U.x11),!_),o.arc(U.cx,U.cy,G,qn(U.y11,U.x11),qn(U.y01,U.x01),!_))):(o.moveTo(q,X),o.arc(0,0,y,w,A,!_)):o.moveTo(q,X),!(p>In)||!(k>In)?o.lineTo(Q,ae):F>In?(I=Im(Q,ae,xe,he,p,-F,_),U=Im(q,X,ye,Re,p,-F,_),o.lineTo(I.cx+I.x01,I.cy+I.y01),F<B?o.arc(I.cx,I.cy,F,qn(I.y01,I.x01),qn(U.y01,U.x01),!_):(o.arc(I.cx,I.cy,F,qn(I.y01,I.x01),qn(I.y11,I.x11),!_),o.arc(0,0,p,qn(I.cy+I.y11,I.cx+I.x11),qn(U.cy+U.y11,U.cx+U.x11),_),o.arc(U.cx,U.cy,F,qn(U.y11,U.x11),qn(U.y01,U.x01),!_))):o.arc(0,0,p,T,$,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-jf/2;return[eu(h)*d,Aa(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ot(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ot(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ot(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ot(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ot(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ot(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ot(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function gB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pB(e){this._context=e}pB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function b3(e){return new pB(e)}function mB(e){return e[0]}function yB(e){return e[1]}function vB(e,t){var n=ot(!0),i=null,r=b3,a=null,s=ob(o);e=typeof e=="function"?e:e===void 0?mB:ot(e),t=typeof t=="function"?t:t===void 0?yB:ot(t);function o(u){var f,d=(u=gB(u)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=u[f],f,u))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,u),+t(h,f,u));if(y)return a=null,y+""||null}return o.x=function(u){return arguments.length?(e=typeof u=="function"?u:ot(+u),o):e},o.y=function(u){return arguments.length?(t=typeof u=="function"?u:ot(+u),o):t},o.defined=function(u){return arguments.length?(n=typeof u=="function"?u:ot(!!u),o):n},o.curve=function(u){return arguments.length?(r=u,i!=null&&(a=r(i)),o):r},o.context=function(u){return arguments.length?(u==null?i=a=null:a=r(i=u),o):i},o}function bB(e,t,n){var i=null,r=ot(!0),a=null,s=b3,o=null,u=ob(f);e=typeof e=="function"?e:e===void 0?mB:ot(+e),t=typeof t=="function"?t:ot(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?yB:ot(+n);function f(h){var p,y,v,b=(h=gB(h)).length,S,_=!1,w,A=new Array(b),$=new Array(b);for(a==null&&(o=s(w=u())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],$[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(S,p,h),$[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):$[p]))}if(w)return o=null,w+""||null}function d(){return vB().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ot(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ot(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ot(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ot(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ot(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const Cte={draw(e,t){const n=vu(t/jf);e.moveTo(n,0),e.arc(0,0,n,0,dB)}};function Tte(e,t){let n=null,i=ob(r);e=typeof e=="function"?e:ot(e||Cte),t=typeof t=="function"?t:ot(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ot(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ot(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function cl(){}function uy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function lb(e){this._context=e}lb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:uy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mte(e){return new lb(e)}function xB(e){this._context=e}xB.prototype={areaStart:cl,areaEnd:cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function kte(e){return new xB(e)}function SB(e){this._context=e}SB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:uy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ote(e){return new SB(e)}function EB(e,t){this._basis=new lb(e),this._beta=t}EB.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,u;++o<=n;)u=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+u*a),this._beta*t[o]+(1-this._beta)*(r+u*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Dte=(function e(t){function n(i){return t===1?new lb(i):new EB(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function cy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function x3(e,t){this._context=e,this._k=(1-t)/6}x3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:cy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Rte=(function e(t){function n(i){return new x3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function S3(e,t){this._context=e,this._k=(1-t)/6}S3.prototype={areaStart:cl,areaEnd:cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Nte=(function e(t){function n(i){return new S3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function E3(e,t){this._context=e,this._k=(1-t)/6}E3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:cy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zte=(function e(t){function n(i){return new E3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function _3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>In){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>In){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function _B(e,t){this._context=e,this._alpha=t}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:_3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Fte=(function e(t){function n(i){return t?new _B(i,t):new x3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function wB(e,t){this._context=e,this._alpha=t}wB.prototype={areaStart:cl,areaEnd:cl,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:_3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Lte=(function e(t){function n(i){return t?new wB(i,t):new S3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function AB(e,t){this._context=e,this._alpha=t}AB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:_3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bte=(function e(t){function n(i){return t?new AB(i,t):new E3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function $B(e){this._context=e}$B.prototype={areaStart:cl,areaEnd:cl,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Ute(e){return new $B(e)}function e4(e){return e<0?-1:1}function t4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(e4(a)+e4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function n4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function h_(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function fy(e){this._context=e}fy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h_(this,this._t0,n4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,h_(this,n4(this,n=t4(this,e,t)),n);break;default:h_(this,this._t0,n=t4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function CB(e){this._context=new TB(e)}(CB.prototype=Object.create(fy.prototype)).point=function(e,t){fy.prototype.point.call(this,t,e)};function TB(e){this._context=e}TB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function qte(e){return new fy(e)}function Pte(e){return new CB(e)}function MB(e){this._context=e}MB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=i4(e),r=i4(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function i4(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function Ite(e){return new MB(e)}function ub(e,t){this._context=e,this._t=t}ub.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function jte(e){return new ub(e,.5)}function Hte(e){return new ub(e,0)}function Gte(e){return new ub(e,1)}function rl(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const Yte=()=>typeof Image<"u"?Image:null;function Ka(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function El(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const Jw=Symbol("implicit");function w3(){var e=new x6,t=[],n=[],i=Jw;function r(a){let s=e.get(a);if(s===void 0){if(i!==Jw)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new x6;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return w3(t,n).unknown(i)},Ka.apply(r,arguments),r}function Td(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Np(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function _l(){}var Ru=.7,Hf=1/Ru,Tf="\\s*([+-]?\\d+)\\s*",np="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Xte=/^#([0-9a-f]{3,8})$/,Vte=new RegExp(`^rgb\\(${Tf},${Tf},${Tf}\\)$`),Wte=new RegExp(`^rgb\\(${Fa},${Fa},${Fa}\\)$`),Qte=new RegExp(`^rgba\\(${Tf},${Tf},${Tf},${np}\\)$`),Zte=new RegExp(`^rgba\\(${Fa},${Fa},${Fa},${np}\\)$`),Kte=new RegExp(`^hsl\\(${np},${Fa},${Fa}\\)$`),Jte=new RegExp(`^hsla\\(${np},${Fa},${Fa},${np}\\)$`),r4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Td(_l,ip,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:a4,formatHex:a4,formatHex8:ene,formatHsl:tne,formatRgb:s4,toString:s4});function a4(){return this.rgb().formatHex()}function ene(){return this.rgb().formatHex8()}function tne(){return kB(this).formatHsl()}function s4(){return this.rgb().formatRgb()}function ip(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Xte.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?o4(t):n===3?new mn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?jm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?jm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Vte.exec(e))?new mn(t[1],t[2],t[3],1):(t=Wte.exec(e))?new mn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Qte.exec(e))?jm(t[1],t[2],t[3],t[4]):(t=Zte.exec(e))?jm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kte.exec(e))?c4(t[1],t[2]/100,t[3]/100,1):(t=Jte.exec(e))?c4(t[1],t[2]/100,t[3]/100,t[4]):r4.hasOwnProperty(e)?o4(r4[e]):e==="transparent"?new mn(NaN,NaN,NaN,0):null}function o4(e){return new mn(e>>16&255,e>>8&255,e&255,1)}function jm(e,t,n,i){return i<=0&&(e=t=n=NaN),new mn(e,t,n,i)}function A3(e){return e instanceof _l||(e=ip(e)),e?(e=e.rgb(),new mn(e.r,e.g,e.b,e.opacity)):new mn}function fl(e,t,n,i){return arguments.length===1?A3(e):new mn(e,t,n,i??1)}function mn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Td(mn,fl,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new mn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new mn(wu(this.r),wu(this.g),wu(this.b),dy(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:l4,formatHex:l4,formatHex8:nne,formatRgb:u4,toString:u4}));function l4(){return`#${bu(this.r)}${bu(this.g)}${bu(this.b)}`}function nne(){return`#${bu(this.r)}${bu(this.g)}${bu(this.b)}${bu((isNaN(this.opacity)?1:this.opacity)*255)}`}function u4(){const e=dy(this.opacity);return`${e===1?"rgb(":"rgba("}${wu(this.r)}, ${wu(this.g)}, ${wu(this.b)}${e===1?")":`, ${e})`}`}function dy(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wu(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function bu(e){return e=wu(e),(e<16?"0":"")+e.toString(16)}function c4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Wr(e,t,n,i)}function kB(e){if(e instanceof Wr)return new Wr(e.h,e.s,e.l,e.opacity);if(e instanceof _l||(e=ip(e)),!e)return new Wr;if(e instanceof Wr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,u=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=u<.5?a+r:2-a-r,s*=60):o=u>0&&u<1?0:s,new Wr(s,o,u,e.opacity)}function hy(e,t,n,i){return arguments.length===1?kB(e):new Wr(e,t,n,i??1)}function Wr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Wr,hy,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Wr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new Wr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new mn(g_(e>=240?e-240:e+120,r,i),g_(e,r,i),g_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Wr(f4(this.h),Hm(this.s),Hm(this.l),dy(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=dy(this.opacity);return`${e===1?"hsl(":"hsla("}${f4(this.h)}, ${Hm(this.s)*100}%, ${Hm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function f4(e){return e=(e||0)%360,e<0?e+360:e}function Hm(e){return Math.max(0,Math.min(1,e||0))}function g_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const OB=Math.PI/180,DB=180/Math.PI,gy=18,RB=.96422,NB=1,zB=.82521,FB=4/29,Mf=6/29,LB=3*Mf*Mf,ine=Mf*Mf*Mf;function BB(e){if(e instanceof La)return new La(e.l,e.a,e.b,e.opacity);if(e instanceof Ls)return UB(e);e instanceof mn||(e=A3(e));var t=v_(e.r),n=v_(e.g),i=v_(e.b),r=p_((.2225045*t+.7168786*n+.0606169*i)/NB),a,s;return t===n&&n===i?a=s=r:(a=p_((.4360747*t+.3850649*n+.1430804*i)/RB),s=p_((.0139322*t+.0971045*n+.7141733*i)/zB)),new La(116*r-16,500*(a-r),200*(r-s),e.opacity)}function py(e,t,n,i){return arguments.length===1?BB(e):new La(e,t,n,i??1)}function La(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Td(La,py,Np(_l,{brighter(e){return new La(this.l+gy*(e??1),this.a,this.b,this.opacity)},darker(e){return new La(this.l-gy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=RB*m_(t),e=NB*m_(e),n=zB*m_(n),new mn(y_(3.1338561*t-1.6168667*e-.4906146*n),y_(-.9787684*t+1.9161415*e+.033454*n),y_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function p_(e){return e>ine?Math.pow(e,1/3):e/LB+FB}function m_(e){return e>Mf?e*e*e:LB*(e-FB)}function y_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function v_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function rne(e){if(e instanceof Ls)return new Ls(e.h,e.c,e.l,e.opacity);if(e instanceof La||(e=BB(e)),e.a===0&&e.b===0)return new Ls(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*DB;return new Ls(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function my(e,t,n,i){return arguments.length===1?rne(e):new Ls(e,t,n,i??1)}function Ls(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function UB(e){if(isNaN(e.h))return new La(e.l,0,0,e.opacity);var t=e.h*OB;return new La(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Td(Ls,my,Np(_l,{brighter(e){return new Ls(this.h,this.c,this.l+gy*(e??1),this.opacity)},darker(e){return new Ls(this.h,this.c,this.l-gy*(e??1),this.opacity)},rgb(){return UB(this).rgb()}}));var qB=-.14861,$3=1.78277,C3=-.29227,cb=-.90649,rp=1.97294,d4=rp*cb,h4=rp*$3,g4=$3*C3-cb*qB;function ane(e){if(e instanceof Au)return new Au(e.h,e.s,e.l,e.opacity);e instanceof mn||(e=A3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(g4*i+d4*t-h4*n)/(g4+d4-h4),a=i-r,s=(rp*(n-r)-C3*a)/cb,o=Math.sqrt(s*s+a*a)/(rp*r*(1-r)),u=o?Math.atan2(s,a)*DB-120:NaN;return new Au(u<0?u+360:u,o,r,e.opacity)}function eA(e,t,n,i){return arguments.length===1?ane(e):new Au(e,t,n,i??1)}function Au(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Td(Au,eA,Np(_l,{brighter(e){return e=e==null?Hf:Math.pow(Hf,e),new Au(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ru:Math.pow(Ru,e),new Au(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*OB,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new mn(255*(t+n*(qB*i+$3*r)),255*(t+n*(C3*i+cb*r)),255*(t+n*(rp*i)),this.opacity)}}));function PB(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function IB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return PB((n-i/t)*t,s,r,a,o)}}function jB(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return PB((n-i/t)*t,r,a,s,o)}}const fb=e=>()=>e;function HB(e,t){return function(n){return e+n*t}}function sne(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function db(e,t){var n=t-e;return n?HB(e,n>180||n<-180?n-360*Math.round(n/360):n):fb(isNaN(e)?t:e)}function one(e){return(e=+e)==1?yn:function(t,n){return n-t?sne(t,n,e):fb(isNaN(t)?n:t)}}function yn(e,t){var n=t-e;return n?HB(e,n):fb(isNaN(e)?t:e)}const tA=(function e(t){var n=one(t);function i(r,a){var s=n((r=fl(r)).r,(a=fl(a)).r),o=n(r.g,a.g),u=n(r.b,a.b),f=yn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=u(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function GB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=fl(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(u){return o.r=i(u),o.g=r(u),o.b=a(u),o+""}}}var lne=GB(IB),une=GB(jB);function T3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function YB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function cne(e,t){return(YB(t)?T3:XB)(e,t)}function XB(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=wl(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function VB(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Xr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function WB(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=wl(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var nA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,b_=new RegExp(nA.source,"g");function fne(e){return function(){return e}}function dne(e){return function(t){return e(t)+""}}function QB(e,t){var n=nA.lastIndex=b_.lastIndex=0,i,r,a,s=-1,o=[],u=[];for(e=e+"",t=t+"";(i=nA.exec(e))&&(r=b_.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,u.push({i:s,x:Xr(i,r)})),n=b_.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?u[0]?dne(u[0].x):fne(t):(t=u.length,function(f){for(var d=0,h;d<t;++d)o[(h=u[d]).i]=h.x(f);return o.join("")})}function wl(e,t){var n=typeof t,i;return t==null||n==="boolean"?fb(t):(n==="number"?Xr:n==="string"?(i=ip(t))?(t=i,tA):QB:t instanceof ip?tA:t instanceof Date?VB:YB(t)?T3:Array.isArray(t)?XB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?WB:Xr)(e,t)}function hne(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function gne(e,t){var n=db(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function zp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var p4=180/Math.PI,iA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ZB(e,t,n,i,r,a){var s,o,u;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(u=e*n+t*i)&&(n-=e*u,i-=t*u),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,u/=o),e*i<t*n&&(e=-e,t=-t,u=-u,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*p4,skewX:Math.atan(u)*p4,scaleX:s,scaleY:o}}var Gm;function pne(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?iA:ZB(t.a,t.b,t.c,t.d,t.e,t.f)}function mne(e){return e==null||(Gm||(Gm=document.createElementNS("http://www.w3.org/2000/svg","g")),Gm.setAttribute("transform",e),!(e=Gm.transform.baseVal.consolidate()))?iA:(e=e.matrix,ZB(e.a,e.b,e.c,e.d,e.e,e.f))}function KB(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Xr(f,h)},{i:b-2,x:Xr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Xr(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Xr(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function u(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Xr(f,h)},{i:b-2,x:Xr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),u(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var yne=KB(pne,"px, ","px)","deg)"),vne=KB(mne,", ",")",")"),bne=1e-12;function m4(e){return((e=Math.exp(e))+1/e)/2}function xne(e){return((e=Math.exp(e))-1/e)/2}function Sne(e){return((e=Math.exp(2*e))-1)/(e+1)}const Ene=(function e(t,n,i){function r(a,s){var o=a[0],u=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-u,b=y*y+v*v,S,_;if(b<bne)_=Math.log(p/f)/t,S=function(M){return[o+M*y,u+M*v,f*Math.exp(t*M*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),$=(p*p-f*f-i*b)/(2*p*n*w),T=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt($*$+1)-$);_=(k-T)/t,S=function(M){var D=M*_,N=m4(T),B=f/(n*w)*(N*Sne(t*D+T)-xne(T));return[o+B*y,u+B*v,f*N/m4(t*D+T)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,u=o*o;return e(s,o,u)},r})(Math.SQRT2,2,4);function JB(e){return function(t,n){var i=e((t=hy(t)).h,(n=hy(n)).h),r=yn(t.s,n.s),a=yn(t.l,n.l),s=yn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const _ne=JB(db);var wne=JB(yn);function Ane(e,t){var n=yn((e=py(e)).l,(t=py(t)).l),i=yn(e.a,t.a),r=yn(e.b,t.b),a=yn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function eU(e){return function(t,n){var i=e((t=my(t)).h,(n=my(n)).h),r=yn(t.c,n.c),a=yn(t.l,n.l),s=yn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const $ne=eU(db);var Cne=eU(yn);function tU(e){return(function t(n){n=+n;function i(r,a){var s=e((r=eA(r)).h,(a=eA(a)).h),o=yn(r.s,a.s),u=yn(r.l,a.l),f=yn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=u(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const Tne=tU(db);var Mne=tU(yn);function M3(e,t){t===void 0&&(t=e,e=wl);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function kne(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const One=Object.freeze(Object.defineProperty({__proto__:null,interpolate:wl,interpolateArray:cne,interpolateBasis:IB,interpolateBasisClosed:jB,interpolateCubehelix:Tne,interpolateCubehelixLong:Mne,interpolateDate:VB,interpolateDiscrete:hne,interpolateHcl:$ne,interpolateHclLong:Cne,interpolateHsl:_ne,interpolateHslLong:wne,interpolateHue:gne,interpolateLab:Ane,interpolateNumber:Xr,interpolateNumberArray:T3,interpolateObject:WB,interpolateRgb:tA,interpolateRgbBasis:lne,interpolateRgbBasisClosed:une,interpolateRound:zp,interpolateString:QB,interpolateTransformCss:yne,interpolateTransformSvg:vne,interpolateZoom:Ene,piecewise:M3,quantize:kne},Symbol.toStringTag,{value:"Module"}));function Dne(e){return function(){return e}}function rA(e){return+e}var y4=[0,1];function Ti(e){return e}function aA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Dne(isNaN(t)?NaN:.5)}function Rne(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Nne(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=aA(r,i),a=n(s,a)):(i=aA(i,r),a=n(a,s)),function(o){return a(i(o))}}function zne(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=aA(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var u=ol(e,o,1,i)-1;return a[u](r[u](o))}}function Fp(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function hb(){var e=y4,t=y4,n=wl,i,r,a,s=Ti,o,u,f;function d(){var p=Math.min(e.length,t.length);return s!==Ti&&(s=Rne(e[0],e[p-1])),o=p>2?zne:Nne,u=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(u||(u=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),Xr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,rA),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=zp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Ti,d()):s!==Ti},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function nU(){return hb()(Ti,Ti)}function iU(e,t,n,i){var r=ll(e,t,n),a;switch(i=Du(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=M7(r,s))&&(i.precision=a),mC(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=k7(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=T7(r))&&(i.precision=a-(i.type==="%")*2);break}}return Iv(i)}function ac(e){var t=e.domain;return e.ticks=function(n){var i=t();return Lw(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return iU(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],u,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=Bw(s,o,n),f===u)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;u=f}return e},e}function rU(){var e=nU();return e.copy=function(){return Fp(e,rU())},Ka.apply(e,arguments),ac(e)}function aU(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,rA),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return aU(e).unknown(t)},e=arguments.length?Array.from(e,rA):[0,1],ac(n)}function sU(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function v4(e){return Math.log(e)}function b4(e){return Math.exp(e)}function Fne(e){return-Math.log(-e)}function Lne(e){return-Math.exp(-e)}function Bne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Une(e){return e===10?Bne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function qne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function x4(e){return(t,n)=>-e(-t,n)}function k3(e){const t=e(v4,b4),n=t.domain;let i=10,r,a;function s(){return r=qne(i),a=Une(i),n()[0]<0?(r=x4(r),a=x4(a),e(Fne,Lne)):e(v4,b4),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const u=n();let f=u[0],d=u[u.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=o==null?10:+o;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=Lw(f,d,S))}else _=Lw(p,y,Math.min(y-p,S)).map(a);return h?_.reverse():_},t.tickFormat=(o,u)=>{if(o==null&&(o=10),u==null&&(u=i===10?"s":","),typeof u!="function"&&(!(i%1)&&(u=Du(u)).precision==null&&(u.trim=!0),u=Iv(u)),o===1/0)return u;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?u(d):""}},t.nice=()=>n(sU(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function oU(){const e=k3(hb()).domain([1,10]);return e.copy=()=>Fp(e,oU()).base(e.base()),Ka.apply(e,arguments),e}function S4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function E4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function O3(e){var t=1,n=e(S4(t),E4(t));return n.constant=function(i){return arguments.length?e(S4(t=+i),E4(t)):t},ac(n)}function lU(){var e=O3(hb());return e.copy=function(){return Fp(e,lU()).constant(e.constant())},Ka.apply(e,arguments)}function _4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Pne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Ine(e){return e<0?-e*e:e*e}function D3(e){var t=e(Ti,Ti),n=1;function i(){return n===1?e(Ti,Ti):n===.5?e(Pne,Ine):e(_4(n),_4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},ac(t)}function R3(){var e=D3(hb());return e.copy=function(){return Fp(e,R3()).exponent(e.exponent())},Ka.apply(e,arguments),e}function jne(){return R3.apply(null,arguments).exponent(.5)}function uU(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=E7(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[ol(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(qs),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return uU().domain(e).range(t).unknown(i)},Ka.apply(a,arguments)}function cU(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(u){return u!=null&&u<=u?r[ol(i,u,0,n)]:a}function o(){var u=-1;for(i=new Array(n);++u<n;)i[u]=((u+1)*t-(u-n)*e)/(n+1);return s}return s.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,o()):[e,t]},s.range=function(u){return arguments.length?(n=(r=Array.from(u)).length-1,o()):r.slice()},s.invertExtent=function(u){var f=r.indexOf(u);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(u){return arguments.length&&(a=u),s},s.thresholds=function(){return i.slice()},s.copy=function(){return cU().domain([e,t]).range(r).unknown(a)},Ka.apply(ac(s),arguments)}function fU(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[ol(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return fU().domain(e).range(t).unknown(n)},Ka.apply(r,arguments)}function Hne(e){return new Date(e)}function Gne(e){return e instanceof Date?+e:+new Date(+e)}function N3(e,t,n,i,r,a,s,o,u,f){var d=nU(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),$=f("%Y");function T(k){return(u(k)<k?y:o(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:$)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Gne)):p().map(Hne)},d.ticks=function(k){var M=p();return e(M[0],M[M.length-1],k??10)},d.tickFormat=function(k,M){return M==null?T:f(M)},d.nice=function(k){var M=p();return(!k||typeof k.range!="function")&&(k=t(M[0],M[M.length-1],k??10)),k?p(sU(M,k)):d},d.copy=function(){return Fp(d,N3(e,t,n,i,r,a,s,o,u,f))},d}function Yne(){return Ka.apply(N3(KZ,JZ,ja,Zg,_d,Ps,Gv,jv,Fs,SC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Xne(){return Ka.apply(N3(QZ,ZZ,Ha,Kg,wd,nl,Yv,Hv,Fs,EC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function gb(){var e=0,t=1,n,i,r,a,s=Ti,o=!1,u;function f(h){return h==null||isNaN(h=+h)?u:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(wl),f.rangeRound=d(zp),f.unknown=function(h){return arguments.length?(u=h,f):u},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Al(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function z3(){var e=ac(gb()(Ti));return e.copy=function(){return Al(e,z3())},El.apply(e,arguments)}function dU(){var e=k3(gb()).domain([1,10]);return e.copy=function(){return Al(e,dU()).base(e.base())},El.apply(e,arguments)}function hU(){var e=O3(gb());return e.copy=function(){return Al(e,hU()).constant(e.constant())},El.apply(e,arguments)}function F3(){var e=D3(gb());return e.copy=function(){return Al(e,F3()).exponent(e.exponent())},El.apply(e,arguments)}function Vne(){return F3.apply(null,arguments).exponent(.5)}function pb(){var e=0,t=.5,n=1,i=1,r,a,s,o,u,f=Ti,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:u),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=M3(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(wl),y.rangeRound=v(zp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),u=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function gU(){var e=ac(pb()(Ti));return e.copy=function(){return Al(e,gU())},El.apply(e,arguments)}function pU(){var e=k3(pb()).domain([.1,1,10]);return e.copy=function(){return Al(e,pU()).base(e.base())},El.apply(e,arguments)}function mU(){var e=O3(pb());return e.copy=function(){return Al(e,mU()).constant(e.constant())},El.apply(e,arguments)}function L3(){var e=D3(pb());return e.copy=function(){return Al(e,L3()).exponent(e.exponent())},El.apply(e,arguments)}function Wne(){return L3.apply(null,arguments).exponent(.5)}function Ja(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const Qne=Ja("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Zne=Ja("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Kne=Ja("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Jne=Ja("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),eie=Ja("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),tie=Ja("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),nie=Ja("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),iie=Ja("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),rie=Ja("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),aie=Ja("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function B3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const sie="identity",Gf="linear",Ws="log",Lp="pow",Bp="sqrt",mb="symlog",Nu="time",zu="utc",Ba="sequential",Md="diverging",Yf="quantile",yb="quantize",vb="threshold",U3="ordinal",sA="point",yU="band",q3="bin-ordinal",un="continuous",Up="discrete",qp="discretizing",Fr="interpolating",P3="temporal";function oie(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function lie(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,u,f;for(r<i&&(o=i,i=r,r=o),u=0,f=n.length;u<f;++u)n[u]>=i&&n[u]<=r&&(a<0&&(a=u),s=u);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function I3(){const e=w3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,u=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=B3(h,o,u);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=Ji(h).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),o=u,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,ol(y,b)-1),w=b===S?_:ol(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return I3().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(u).align(f)},d()}function vU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return vU(t())},e}function uie(){return vU(I3().paddingInner(1))}var cie=Array.prototype.map;function fie(e){return cie.call(e,Yn)}const die=Array.prototype.slice;function bU(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(ol(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=fie(i),n):e.slice()},n.range=function(i){return arguments.length?(t=die.call(i),n):t.slice()},n.tickFormat=function(i,r){return iU(e[0],Qe(e),i??10,r)},n.copy=function(){return bU().domain(n.domain()).range(n.range())},n}const yy=new Map,xU=Symbol("vega_scale");function SU(e){return e[xU]=!0,e}function w4(e){return e&&e[xU]===!0}function hie(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?oie(a):a.invertExtent?lie(a):void 0),a.type=e,SU(a)};return i.metadata=ia(ge(n)),i}function rt(e,t,n){return arguments.length>1?(yy.set(e,hie(e,t,n)),this):EU(e)?yy.get(e):void 0}rt(sie,aU);rt(Gf,rU,un);rt(Ws,oU,[un,Ws]);rt(Lp,R3,un);rt(Bp,jne,un);rt(mb,lU,un);rt(Nu,Yne,[un,P3]);rt(zu,Xne,[un,P3]);rt(Ba,z3,[un,Fr]);rt(`${Ba}-${Gf}`,z3,[un,Fr]);rt(`${Ba}-${Ws}`,dU,[un,Fr,Ws]);rt(`${Ba}-${Lp}`,F3,[un,Fr]);rt(`${Ba}-${Bp}`,Vne,[un,Fr]);rt(`${Ba}-${mb}`,hU,[un,Fr]);rt(`${Md}-${Gf}`,gU,[un,Fr]);rt(`${Md}-${Ws}`,pU,[un,Fr,Ws]);rt(`${Md}-${Lp}`,L3,[un,Fr]);rt(`${Md}-${Bp}`,Wne,[un,Fr]);rt(`${Md}-${mb}`,mU,[un,Fr]);rt(Yf,uU,[qp,Yf]);rt(yb,cU,qp);rt(vb,fU,qp);rt(q3,bU,[Up,qp]);rt(U3,w3,Up);rt(yU,I3,Up);rt(sA,uie,Up);function EU(e){return yy.has(e)}function sc(e,t){const n=yy.get(e);return n&&n.metadata[t]}function j3(e){return sc(e,un)}function Xf(e){return sc(e,Up)}function oA(e){return sc(e,qp)}function _U(e){return sc(e,Ws)}function gie(e){return sc(e,P3)}function wU(e){return sc(e,Fr)}function AU(e){return sc(e,Yf)}const pie=["clamp","base","constant","exponent"];function $U(e,t){const n=t[0],i=Qe(t)-n;return function(r){return e(n+r*i)}}function bb(e,t,n){return M3(H3(t||"rgb",n),e)}function CU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function TU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?Jn(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=rt(a)().domain([t,n]).range([0,1]),pie.forEach(o=>e[o]?s[o](e[o]()):0),s)}function H3(e,t){const n=One[mie(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function mie(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const yie={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},vie={accent:Zne,category10:Qne,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Kne,observable10:Jne,paired:eie,pastel1:tie,pastel2:nie,set1:iie,set2:rie,set3:aie,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function MU(e){if(te(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function kU(e,t){for(const n in e)G3(n,t(e[n]))}const A4={};kU(vie,MU);kU(yie,e=>bb(MU(e)));function G3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(A4[e]=t,this):A4[e]}const C1="symbol",bie="discrete",xie="gradient",Sie=e=>te(e)?e.map(t=>String(t)):String(e),Eie=(e,t)=>e[1]-t[1],_ie=(e,t)=>t[1]-e[1];function Y3(e,t,n){let i;return nt(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(kp(e.domain())/n||1)+1))),me(t)&&(i=t.step,t=t.interval),be(t)&&(t=e.type===Nu?Ad(t):e.type==zu?$d(t):J("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function OU(e,t,n){let i=e.range(),r=i[0],a=Qe(i),s=Eie;if(r>a&&(i=a,a=r,r=i,s=_ie),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Qe(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,f)=>!(f%2));t.length<3&&(t=o)}return t}function X3(e,t){return e.bins?OU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function DU(e,t,n,i,r,a){const s=t.type;let o=Sie;if(s===Nu||r===Nu)o=e.timeFormat(i);else if(s===zu||r===zu)o=e.utcFormat(i);else if(_U(s)){const u=e.formatFloat(i);if(a||t.bins)o=u;else{const f=RU(t,n,!1);o=d=>f(d)?u(d):""}}else if(t.tickFormat){const u=t.domain();o=e.formatSpan(u[0],u[u.length-1],n,i)}else i&&(o=e.format(i));return o}function RU(e,t,n){const i=X3(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=u=>{let f=u/Math.pow(r,Math.round(Math.log(u)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const lA={[Yf]:"quantiles",[yb]:"thresholds",[vb]:"domain"},NU={[Yf]:"quantiles",[yb]:"domain"};function zU(e,t){return e.bins?$ie(e.bins):e.type===Ws?RU(e,t,!0):lA[e.type]?Aie(e[lA[e.type]]()):X3(e,t)}function wie(e,t,n){const i=t[NU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function Aie(e){const t=[-1/0].concat(e);return t.max=1/0,t}function $ie(e){const t=e.slice(0,-1);return t.max=Qe(e),t}const Cie=e=>lA[e.type]||e.bins;function FU(e,t,n,i,r,a,s){const o=NU[t.type]&&a!==Nu&&a!==zu?wie(e,t,r):DU(e,t,n,r,a,s);return i===C1&&Cie(t)?Tie(o):i===bie?Mie(o):kie(o)}const Tie=e=>(t,n,i)=>{const r=$4(i[n+1],$4(i.max,1/0)),a=C4(t,e),s=C4(r,e);return a&&s?a+" – "+s:s?"< "+s:"≥ "+a},$4=(e,t)=>e??t,Mie=e=>(t,n)=>n?e(t):null,kie=e=>t=>e(t),C4=(e,t)=>Number.isFinite(e)?t(e):null;function Oie(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Qe(t),a=r-i;if(e.type===vb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function Die(e,t,n,i){const r=i||t.type;return be(n)&&gie(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===Nu?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===zu?e.utcFormat("%A, %d %B %Y, %X UTC"):FU(e,t,5,null,n,i,!0)}function LU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Die(e,t,n.format,n.formatType);if(oA(t.type)){const a=zU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Xf(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Qe(a))}`}}let BU=0;function Rie(){BU=0}const vy="p_";function V3(e){return e&&e.gradient}function UU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?vy:"";return r||(r=e.id="gradient_"+BU++,i==="radial"?(e.x1=$a(e.x1,.5),e.y1=$a(e.y1,.5),e.r1=$a(e.r1,0),e.x2=$a(e.x2,.5),e.y2=$a(e.y2,.5),e.r2=$a(e.r2,.5),a=vy):(e.x1=$a(e.x1,0),e.y1=$a(e.y1,0),e.x2=$a(e.x2,1),e.y2=$a(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function $a(e,t){return e??t}function qU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const T4={basis:{curve:Mte},"basis-closed":{curve:kte},"basis-open":{curve:Ote},bundle:{curve:Dte,tension:"beta",value:.85},cardinal:{curve:Rte,tension:"tension",value:0},"cardinal-open":{curve:zte,tension:"tension",value:0},"cardinal-closed":{curve:Nte,tension:"tension",value:0},"catmull-rom":{curve:Fte,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Lte,tension:"alpha",value:.5},"catmull-rom-open":{curve:Bte,tension:"alpha",value:.5},linear:{curve:b3},"linear-closed":{curve:Ute},monotone:{horizontal:Pte,vertical:qte},natural:{curve:Ite},step:{curve:jte},"step-after":{curve:Gte},"step-before":{curve:Hte}};function W3(e,t,n){var i=ve(T4,e)&&T4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Nie={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},zie=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Fie=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Lie=/^((\s+,?\s*)|(,\s*))/,Bie=/^[01]/;function Vf(e){const t=[];return(e.match(zie)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=Nie[a],o=Uie(a,s,i.slice(1).trim()),u=o.length;if(u<s||u&&u%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),u!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<u;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function Uie(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Bie:Fie,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const u=n.slice(r).match(Lie);u!==null&&(r+=u[0].length)}return i}const dl=Math.PI/180,qie=1e-14,gu=Math.PI/2,Oa=Math.PI*2,of=Math.sqrt(3)/2;var x_={},S_={},PU=[].join;function Pie(e,t,n,i,r,a,s,o,u){const f=PU.call(arguments);if(x_[f])return x_[f];const d=s*dl,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(u-t)*.5,v=p*(u-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=h/n,w=-h/i,A=p/i,$=S*o+_*u,T=w*o+A*u,k=S*e+_*t,M=w*e+A*t;let N=1/((k-$)*(k-$)+(M-T)*(M-T))-.25;N<0&&(N=0);let B=Math.sqrt(N);a==r&&(B=-B);const F=.5*($+k)-B*(M-T),G=.5*(T+M)+B*(k-$),I=Math.atan2(T-G,$-F);let z=Math.atan2(M-G,k-F)-I;z<0&&a===1?z+=Oa:z>0&&a===0&&(z-=Oa);const R=Math.ceil(Math.abs(z/(gu+.001))),q=[];for(let X=0;X<R;++X){const Q=I+X*z/R,ae=I+(X+1)*z/R;q[X]=[F,G,Q,ae,n,i,h,p]}return x_[f]=q}function Iie(e){const t=PU.call(e);if(S_[t])return S_[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],u=e[6],f=e[7];const d=f*s,h=-u*o,p=u*s,y=f*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),$=8/3*A*A/Math.sin(w),T=n+v-$*b,k=i+b+$*v,M=n+S,D=i+_,N=M+$*_,B=D-$*S;return S_[t]=[d*T+h*k,p*T+y*k,d*N+h*B,p*N+y*B,d*M+h*D,p*M+y*D]}const br=["l",0,0,0,0,0,0,0];function jie(e,t,n){const i=br[0]=e[0];if(i==="a"||i==="A")br[1]=t*e[1],br[2]=n*e[2],br[3]=e[3],br[4]=e[4],br[5]=e[5],br[6]=t*e[6],br[7]=n*e[7];else if(i==="h"||i==="H")br[1]=t*e[1];else if(i==="v"||i==="V")br[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)br[r]=(r%2==1?t:n)*e[r];return br}function ap(e,t,n,i,r,a){var s,o=null,u=0,f=0,d=0,h=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=jie(s,r,a)),s[0]){case"l":u+=s[1],f+=s[2],e.lineTo(u+n,f+i);break;case"L":u=s[1],f=s[2],e.lineTo(u+n,f+i);break;case"h":u+=s[1],e.lineTo(u+n,f+i);break;case"H":u=s[1],e.lineTo(u+n,f+i);break;case"v":f+=s[1],e.lineTo(u+n,f+i);break;case"V":f=s[1],e.lineTo(u+n,f+i);break;case"m":u+=s[1],f+=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"M":u=s[1],f=s[2],S=u,_=f,e.moveTo(u+n,f+i);break;case"c":p=u+s[5],y=f+s[6],d=u+s[3],h=f+s[4],e.bezierCurveTo(u+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),u=p,f=y;break;case"C":u=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,u+n,f+i);break;case"s":p=u+s[3],y=f+s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,u+s[1]+n,f+s[2]+i,p+n,y+i),d=u+s[1],h=f+s[2],u=p,f=y;break;case"S":p=s[3],y=s[4],d=2*u-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"q":p=u+s[3],y=f+s[4],d=u+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),u=p,f=y,d=s[1],h=s[2];break;case"t":p=u+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=u,h=f):o[0]==="t"?(d=2*u-v,h=2*f-b):o[0]==="q"&&(d=2*u-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y,d=u+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*u-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),u=p,f=y;break;case"a":M4(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+u+n,s[7]+f+i]),u+=s[6],f+=s[7];break;case"A":M4(e,u+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),u=s[6],f=s[7];break;case"z":case"Z":u=S,f=_,e.closePath();break}o=s}}function M4(e,t,n,i){const r=Pie(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Iie(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const k4=.5773502691896257,O4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Oa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*k4,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n,r=i-n*k4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=of*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function IU(e){return ve(O4,e)?O4[e]:Hie(e)}var E_={};function Hie(e){if(!ve(E_,e)){const t=Vf(e);E_[e]={draw:function(n,i){ap(n,t,0,0,Math.sqrt(i)/2)}}}return E_[e]}const No=.448084975506;function Gie(e){return e.x}function Yie(e){return e.y}function Xie(e){return e.width}function Vie(e){return e.height}function As(e){return typeof e=="function"?e:()=>+e}function Ym(e,t,n){return Math.max(t,Math.min(e,n))}function jU(){var e=Gie,t=Yie,n=Xie,i=Vie,r=As(0),a=r,s=r,o=r,u=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Ym(+r.call(this,d),0,w),$=Ym(+a.call(this,d),0,w),T=Ym(+s.call(this,d),0,w),k=Ym(+o.call(this,d),0,w);if(u||(u=y=sb()),A<=0&&$<=0&&T<=0&&k<=0)u.rect(v,b,S,_);else{var M=v+S,D=b+_;u.moveTo(v+A,b),u.lineTo(M-$,b),u.bezierCurveTo(M-No*$,b,M,b+No*$,M,b+$),u.lineTo(M,D-k),u.bezierCurveTo(M,D-No*k,M-No*k,D,M-k,D),u.lineTo(v+T,D),u.bezierCurveTo(v+No*T,D,v,D-No*T,v,D-T),u.lineTo(v,b+A),u.bezierCurveTo(v,b+No*A,v+No*A,b,v+A,b),u.closePath()}if(y)return u=null,y+""||null}return f.x=function(d){return arguments.length?(e=As(d),f):e},f.y=function(d){return arguments.length?(t=As(d),f):t},f.width=function(d){return arguments.length?(n=As(d),f):n},f.height=function(d){return arguments.length?(i=As(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=As(d),a=h!=null?As(h):r,o=p!=null?As(p):r,s=y!=null?As(y):a,f):r},f.context=function(d){return arguments.length?(u=d??null,f):u},f}function HU(){var e,t,n,i,r=null,a,s,o,u;function f(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*u,A=(S/=_)*u,$=Math.atan2(S,b);r.moveTo(s-w,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,$-Math.PI,$),r.lineTo(s+w,o+A),r.arc(s,o,u,$,$+Math.PI)}else r.arc(h,p,v,0,Oa);r.closePath()}else a=1;s=h,o=p,u=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=sb()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function Pp(e,t){return e??t}const Ip=e=>e.x||0,jp=e=>e.y||0,Wie=e=>e.width||0,Qie=e=>e.height||0,Zie=e=>(e.x||0)+(e.width||0),Kie=e=>(e.y||0)+(e.height||0),Jie=e=>e.startAngle||0,ere=e=>e.endAngle||0,tre=e=>e.padAngle||0,nre=e=>e.innerRadius||0,ire=e=>e.outerRadius||0,rre=e=>e.cornerRadius||0,are=e=>Pp(e.cornerRadiusTopLeft,e.cornerRadius)||0,sre=e=>Pp(e.cornerRadiusTopRight,e.cornerRadius)||0,ore=e=>Pp(e.cornerRadiusBottomRight,e.cornerRadius)||0,lre=e=>Pp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,ure=e=>Pp(e.size,64),cre=e=>e.size||1,xb=e=>e.defined!==!1,fre=e=>IU(e.shape||"circle"),dre=$te().startAngle(Jie).endAngle(ere).padAngle(tre).innerRadius(nre).outerRadius(ire).cornerRadius(rre),hre=bB().x(Ip).y1(jp).y0(Kie).defined(xb),gre=bB().y(jp).x1(Ip).x0(Zie).defined(xb),pre=vB().x(Ip).y(jp).defined(xb),mre=jU().x(Ip).y(jp).width(Wie).height(Qie).cornerRadius(are,sre,ore,lre),yre=Tte().type(fre).size(ure),vre=HU().x(Ip).y(jp).defined(xb).size(cre);function Q3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function bre(e,t){return dre.context(e)(t)}function xre(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?gre:hre).curve(W3(i,n.orient,n.tension)).context(e)(t)}function Sre(e,t){const n=t[0],i=n.interpolate||"linear";return pre.curve(W3(i,n.orient,n.tension)).context(e)(t)}function kd(e,t,n,i){return mre.context(e)(t,n,i)}function Ere(e,t){return(t.mark.shape||t.shape).context(e)(t)}function _re(e,t){return yre.context(e)(t)}function wre(e,t){return vre.context(e)(t)}var GU=1;function Are(){GU=1}function Z3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+GU++),s=r.clipping[a]||(r.clipping[a]={id:a});return qe(i)?s.path=i(null):Q3(n)?s.path=kd(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function Jt(e){this.clear(),e&&this.union(e)}Jt.prototype={clone(){return new Jt(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),u=Math.sin(e),f=t-t*o+n*u,d=n-t*u-n*o;return[o*i-u*r+f,u*i+o*r+d,o*i-u*s+f,u*i+o*s+d,o*a-u*r+f,u*a+o*r+d,o*a-u*s+f,u*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Sb(e){this.mark=e,this.bounds=this.bounds||new Jt}function Eb(e){Sb.call(this,e),this.items=this.items||[]}fe(Eb,Sb);class YU{constructor(t){this._pending=0,this._loader=t||Vv()}pending(){return this._pending}sanitizeURL(t){const n=this;return D4(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Zh(n),i)).catch(()=>(Zh(n),null))}loadImage(t){const n=this,i=Yte();return D4(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=ve(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Zh(n),s.onerror=()=>Zh(n),s.src=a,s}).catch(r=>(Zh(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function D4(e){e._pending+=1}function Zh(e){e._pending-=1}function eo(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?$re(t,i):0))}return e}function $re(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Cre=Oa-1e-8;let _b,T1,M1,xu,uA,k1,cA,fA;const Go=(e,t)=>_b.add(e,t),O1=(e,t)=>Go(T1=e,M1=t),R4=e=>Go(e,_b.y1),N4=e=>Go(_b.x1,e),pu=(e,t)=>uA*e+cA*t,mu=(e,t)=>k1*e+fA*t,__=(e,t)=>Go(pu(e,t),mu(e,t)),w_=(e,t)=>O1(pu(e,t),mu(e,t));function Hp(e,t){return _b=e,t?(xu=t*dl,uA=fA=Math.cos(xu),k1=Math.sin(xu),cA=-k1):(uA=fA=1,xu=k1=cA=0),Tre}const Tre={beginPath(){},closePath(){},moveTo:w_,lineTo:w_,rect(e,t,n,i){xu?(__(e+n,t),__(e+n,t+i),__(e,t+i),w_(e,t)):(Go(e+n,t+i),O1(e,t))},quadraticCurveTo(e,t,n,i){const r=pu(e,t),a=mu(e,t),s=pu(n,i),o=mu(n,i);z4(T1,r,s,R4),z4(M1,a,o,N4),O1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=pu(e,t),o=mu(e,t),u=pu(n,i),f=mu(n,i),d=pu(r,a),h=mu(r,a);F4(T1,s,u,d,R4),F4(M1,o,f,h,N4),O1(d,h)},arc(e,t,n,i,r,a){if(i+=xu,r+=xu,T1=n*Math.cos(r)+e,M1=n*Math.sin(r)+t,Math.abs(r-i)>Cre)Go(e-n,t-n),Go(e+n,t+n);else{const s=f=>Go(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,u;if(s(i),s(r),r!==i)if(i=i%Oa,i<0&&(i+=Oa),r=r%Oa,r<0&&(r+=Oa),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Oa,o=i-i%gu,u=0;u<4&&o>r;++u,o-=gu)s(o);else for(o=i-i%gu+gu,u=0;u<4&&o<r;++u,o=o+gu)s(o)}}};function z4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function F4(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let u=0,f=0,d;Math.abs(a)>qie?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),u=(-s+d)/a,f=(-s-d)/a)):u=.5*o/s,0<u&&u<1&&r(L4(u,e,t,n,i)),0<f&&f<1&&r(L4(f,e,t,n,i))}function L4(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var al=(al=rl(1,1))?al.getContext("2d"):null;const dA=new Jt;function K3(e){return function(t,n){if(!al)return!0;e(al,t),dA.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=dA;for(let o=r;o<=s;++o)for(let u=i;u<=a;++u)if(al.isPointInPath(u,o))return!0;return!1}}function J3(e,t){return t.contains(e.x||0,e.y||0)}function XU(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(dA.set(n,i,n+r,i+a))}function VU(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Ef(t,n,i,r,a)}function Ef(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:u}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=u-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Wf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function jr(e,t){return e??t}function B4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Mre(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+jr(t.x1,.5)*i,n.y1+jr(t.y1,.5)*r,Math.max(i,r)*jr(t.r1,0),n.x1+jr(t.x2,.5)*i,n.y1+jr(t.y2,.5)*r,Math.max(i,r)*jr(t.r2,.5));else{const s=jr(t.x1,0),o=jr(t.y1,0),u=jr(t.x2,1),f=jr(t.y2,0);if(s===u||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+u*i,n.y1+f*r);else{const d=rl(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=B4(h.createLinearGradient(s,o,u,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return B4(a,t.stops)}function WU(e,t,n){return V3(n)?Mre(e,n,t.bounds):n}function by(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=WU(e,t,t.fill),!0):!1}var kre=[];function Qf(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=WU(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||kre),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Ore(e,t){return e.zindex-t.zindex||e.index-t.index}function eT(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Ore)}function aa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=eT(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function xy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=eT(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function tT(e){return function(t,n,i){aa(n,r=>{(!i||i.intersects(r.bounds))&&QU(e,t,r,r)})}}function Dre(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&QU(e,t,n.items[0],n.items)}}function QU(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Wf(t,n),n.fill&&by(t,n,r)&&t.fill(),n.stroke&&Qf(t,n,r)&&t.stroke()))}function wb(e){return e=e||kr,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,xy(n,o=>{const u=o.bounds;if(!(u&&!u.contains(a,s)||!u)&&e(t,o,i,r,a,s))return o})}}function Gp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,u=s.stroke&&n.isPointInStroke,f,d;return u&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||u&&n.isPointInStroke(r,a)}}function nT(e){return wb(Gp(e))}function $u(e,t){return"translate("+e+","+t+")"}function iT(e){return"rotate("+e+")"}function Rre(e,t){return"scale("+e+","+t+")"}function ZU(e){return $u(e.x||0,e.y||0)}function Nre(e){return $u(e.x||0,e.y||0)+(e.angle?" "+iT(e.angle):"")}function zre(e){return $u(e.x||0,e.y||0)+(e.angle?" "+iT(e.angle):"")+(e.scaleX||e.scaleY?" "+Rre(e.scaleX||1,e.scaleY||1):"")}function rT(e,t,n){function i(s,o){s("transform",Nre(o)),s("d",t(null,o))}function r(s,o){return t(Hp(s,o.angle),o),eo(s,o).translate(o.x||0,o.y||0)}function a(s,o){var u=o.x||0,f=o.y||0,d=o.angle||0;s.translate(u,f),d&&s.rotate(d*=dl),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-u,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:tT(a),pick:nT(a),isect:n||K3(a)}}var Fre=rT("arc",bre);function Lre(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function Bre(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function Ure(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function aT(e,t,n){function i(u,f){var d=f.mark.items;d.length&&u("d",t(null,d))}function r(u,f){var d=f.items;return d.length===0?u:(t(Hp(u),d),eo(u,d[0]))}function a(u,f){u.beginPath(),t(u,f)}const s=Gp(a);function o(u,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=u.pixelRatio,h*=u.pixelRatio,s(u,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Dre(a),pick:o,isect:J3,tip:n}}var qre=aT("area",xre,Lre);function Pre(e,t){var n=t.clip;e.save(),qe(n)?(e.beginPath(),n(e),e.clip()):KU(e,t.group)}function KU(e,t){e.beginPath(),Q3(t)?kd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function JU(e){const t=jr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Ire(e,t){e("transform",ZU(t))}function eq(e,t){const n=JU(t);e("d",kd(null,t,n,n))}function jre(e,t){e("class","background"),e("aria-hidden",!0),eq(e,t)}function Hre(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?eq(e,t):e("d","")}function Gre(e,t,n){const i=t.clip?Z3(n,t,t):null;e("clip-path",i)}function Yre(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),eo(e,t),e.translate(t.x||0,t.y||0)}function sp(e,t,n,i){const r=JU(t);e.beginPath(),kd(e,t,(n||0)+r,(i||0)+r)}const Xre=Gp(sp),Vre=Gp(sp,!1),Wre=Gp(sp,!0);function Qre(e,t,n,i){aa(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,u=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&u&&(sp(e,r,a,s),Wf(e,r),r.fill&&by(e,r,u)&&e.fill(),r.stroke&&!o&&Qf(e,r,u)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&KU(e,r),n&&n.translate(-a,-s),aa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&u&&(sp(e,r,a,s),Wf(e,r),Qf(e,r,u)&&e.stroke())})}function Zre(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return xy(t,u=>{let f,d,h;const p=u.bounds;if(p&&!p.contains(r,a))return;d=u.x||0,h=u.y||0;const y=d+(u.width||0),v=h+(u.height||0),b=u.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&Q3(u)&&!Wre(e,u,s,o))return e.restore(),null;const S=u.strokeForeground,_=t.interactive!==!1;return _&&S&&u.stroke&&Vre(e,u,s,o)?(e.restore(),u):(f=xy(u,w=>Kre(w,d,h)?this.pick(w,n,i,d,h):null),!f&&_&&(u.fill||!S&&u.stroke)&&Xre(e,u,s,o)&&(f=u),e.restore(),f||null)})}function Kre(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var Jre={type:"group",tag:"g",nested:!1,attr:Ire,bound:Yre,draw:Qre,pick:Zre,isect:XU,content:Gre,background:jre,foreground:Hre},op={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function sT(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function oT(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function lT(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Ab(e,t){return e==="center"?t/2:e==="right"?t:0}function $b(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function eae(e,t,n){const i=sT(t,n),r=oT(t,i),a=lT(t,i),s=(t.x||0)-Ab(t.align,r),o=(t.y||0)-$b(t.baseline,a),u=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",u,op["xmlns:xlink"],"xlink:href"),e("transform",$u(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function tae(e,t){const n=t.image,i=oT(t,n),r=lT(t,n),a=(t.x||0)-Ab(t.align,i),s=(t.y||0)-$b(t.baseline,r);return e.set(a,s,a+i,s+r)}function nae(e,t,n){aa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=sT(i,this);let a=oT(i,r),s=lT(i,r);if(a===0||s===0)return;let o=(i.x||0)-Ab(i.align,a),u=(i.y||0)-$b(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,u+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Wf(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,u,a,s))})}var iae={type:"image",tag:"image",nested:!1,attr:eae,bound:tae,draw:nae,pick:wb(),isect:kr,get:sT,xOffset:Ab,yOffset:$b},rae=aT("line",Sre,Bre);function aae(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",zre(t)),e("d",t.path)}function D1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*dl,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=Vf(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),ap(e,u,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):ap(e,u,i,r,a,s)}function sae(e,t){return D1(Hp(e,t.angle),t)?e.set(0,0,0,0):eo(e,t,!0)}var oae={type:"path",tag:"path",nested:!1,attr:aae,bound:sae,draw:tT(D1),pick:nT(D1),isect:K3(D1)};function lae(e,t){e("d",kd(null,t))}function uae(e,t){var n,i;return eo(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function U4(e,t){e.beginPath(),kd(e,t)}var cae={type:"rect",tag:"path",nested:!1,attr:lae,bound:uae,draw:tT(U4),pick:nT(U4),isect:XU};function fae(e,t){e("transform",ZU(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function dae(e,t){var n,i;return eo(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function tq(e,t,n){var i,r,a,s;return t.stroke&&Qf(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function hae(e,t,n){aa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&tq(e,i,r)&&(Wf(e,i),e.stroke())}})}function gae(e,t,n,i){return e.isPointInStroke?tq(e,t,1)&&e.isPointInStroke(n,i):!1}var pae={type:"rule",tag:"line",nested:!1,attr:fae,bound:dae,draw:hae,pick:wb(gae),isect:VU},mae=rT("shape",Ere),yae=rT("symbol",_re,J3);const q4=u7();var tr={height:es,measureWidth:uT,estimateWidth:Sy,width:Sy,canvas:nq};nq(!0);function nq(e){tr.width=e&&al?uT:Sy}function Sy(e,t){return iq(gl(e,t),es(e))}function iq(e,t){return~~(.8*e.length*t)}function uT(e,t){return es(e)<=0||!(t=gl(e,t))?0:rq(t,Cb(e))}function rq(e,t){const n=`(${t}) ${e}`;let i=q4.get(n);return i===void 0&&(al.font=t,i=al.measureText(e).width,q4.set(n,i)),i}function es(e){return e.fontSize!=null?+e.fontSize||0:11}function hl(e){return e.lineHeight!=null?e.lineHeight:es(e)+2}function vae(e){return te(e)?e.length>1?e:e[0]:e}function Yp(e){return vae(e.lineBreak&&e.text&&!te(e.text)?e.text.split(e.lineBreak):e.text)}function cT(e){const t=Yp(e);return(te(t)?t.length-1:0)*hl(e)}function gl(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?xae(e,n):n}function bae(e){if(tr.width===uT){const t=Cb(e);return n=>rq(n,t)}else if(tr.width===Sy){const t=es(e);return n=>iq(n,t)}else return t=>tr.width(e,t)}function xae(e,t){var n=+e.limit,i=bae(e);if(i(t)<n)return t;var r=e.ellipsis||"…",a=e.dir==="rtl",s=0,o=t.length,u;if(n-=i(r),a){for(;s<o;)u=s+o>>>1,i(t.slice(u))>n?s=u+1:o=u;return r+t.slice(s)}else{for(;s<o;)u=1+(s+o>>>1),i(t.slice(0,u))<n?s=u:o=u-1;return t.slice(0,s)+r}}function Xp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Cb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+es(e)+"px "+Xp(e,t)}function fT(e){var t=e.baseline,n=es(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*hl(e):t==="line-bottom"?.29*n-.5*hl(e):0)}const Sae={left:"start",center:"middle",right:"end"},Fg=new Jt;function Tb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-gu,t+=i*Math.cos(r),n+=i*Math.sin(r)),Fg.x1=t,Fg.y1=n,Fg}function Eae(e,t){var n=t.dx||0,i=(t.dy||0)+fT(t),r=Tb(t),a=r.x1,s=r.y1,o=t.angle||0,u;e("text-anchor",Sae[t.align]||"start"),o?(u=$u(a,s)+" "+iT(o),(n||i)&&(u+=" "+$u(n,i))):u=$u(a+n,s+i),e("transform",u)}function dT(e,t,n){var i=tr.height(t),r=t.align,a=Tb(t),s=a.x1,o=a.y1,u=t.dx||0,f=(t.dy||0)+fT(t)-Math.round(.8*i),d=Yp(t),h;if(te(d)?(i+=hl(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,tr.width(t,y)),0)):h=tr.width(t,d),r==="center"?u-=h/2:r==="right"&&(u-=h),e.set(u+=s,f+=o,u+h,f+i),t.angle&&!n)e.rotate(t.angle*dl,s,o);else if(n===2)return e.rotatedPoints(t.angle*dl,s,o);return e}function _ae(e,t,n){aa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,u,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Cb(i),e.textAlign=i.align||"left",a=Tb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*dl),s=o=0),s+=i.dx||0,o+=(i.dy||0)+fT(i),d=Yp(i),Wf(e,i),te(d))for(f=hl(i),u=0;u<d.length;++u)h=gl(i,d[u]),i.fill&&by(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=gl(i,d),i.fill&&by(e,i,r)&&e.fillText(h,s,o),i.stroke&&Qf(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function wae(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=Tb(t),o=s.x1,u=s.y1,f=dT(Fg,t,1),d=-t.angle*dl,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*u),v=p*r+h*a+(u-p*o-h*u);return f.contains(y,v)}function Aae(e,t){const n=dT(Fg,e,2);return Ef(t,n[0],n[1],n[2],n[3])||Ef(t,n[0],n[1],n[4],n[5])||Ef(t,n[4],n[5],n[6],n[7])||Ef(t,n[2],n[3],n[6],n[7])}var $ae={type:"text",tag:"text",nested:!1,attr:Eae,bound:dT,draw:_ae,pick:wb(wae),isect:Aae},Cae=aT("trail",wre,Ure),or={arc:Fre,area:qre,group:Jre,image:iae,line:rae,path:oae,rect:cae,rule:pae,shape:mae,symbol:yae,text:$ae,trail:Cae};function hA(e,t,n){var i=or[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Jt),e,n)}var P4={mark:null};function aq(e,t,n){var i=or[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,u,f,d;if(i.nested)return s?f=a[0]:(P4.mark=e,f=P4),d=hA(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new Jt,s)for(o=0,u=a.length;o<u;++o)t.union(hA(a[o],r,n));return e.bounds=t}const Tae=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function sq(e,t){return JSON.stringify(e,Tae,t)}function oq(e){const t=typeof e=="string"?JSON.parse(e):e;return lq(t)}function lq(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&lq(n[r]);return t&&aq(e),e}class uq{constructor(t){arguments.length?this.root=oq(t):(this.root=I4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Eb(this.root)])}toJSON(t){return sq(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=I4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function I4(e,t){const n={bounds:new Jt,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Yo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function hT(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function rn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Yo(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Sr(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function cq(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Mb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Mae(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=or[r.marktype]).tip){for(s=Mb(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let gT=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Vv(),this._tooltip=n||kae}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Yo(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Mae(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let u=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,f+=t.y||0;return{x:u,y:f,width:s,height:o,left:u,top:f,right:u+s,bottom:f+o}}};function kae(e,t,n,i){e.element().setAttribute("title",i||"")}class Vp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new YU(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Oae="keydown",Dae="keypress",Rae="keyup",fq="dragenter",R1="dragleave",dq="dragover",gA="pointerdown",Nae="pointerup",Ey="pointermove",N1="pointerout",hq="pointerover",pA="mousedown",zae="mouseup",gq="mousemove",_y="mouseout",pq="mouseover",wy="click",Fae="dblclick",Lae="wheel",mq="mousewheel",Ay="touchstart",$y="touchmove",Cy="touchend",Bae=[Oae,Dae,Rae,fq,R1,dq,gA,Nae,Ey,N1,hq,pA,zae,gq,_y,pq,wy,Fae,Lae,mq,Ay,$y,Cy],mA=Ey,Lg=_y,yA=wy;class Wp extends gT{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Bae,this.pointermove=H4([Ey,gq],[hq,pq],[N1,_y]),this.dragover=H4([dq],[fq],[R1]),this.pointerout=G4([N1,_y]),this.dragleave=G4([R1])}initialize(t,n,i){return this._canvas=t&&hT(t,"canvas"),[wy,pA,gA,Ey,N1,R1].forEach(r=>j4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(mq,t)}pointerdown(t){this._down=this._active,this.fire(gA,t)}mousedown(t){this._down=this._active,this.fire(pA,t)}click(t){this._down===this._active&&(this.fire(wy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ay,t,!0)}touchmove(t){this.fire($y,t,!0)}touchend(t){this.fire(Cy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===yA&&r&&r.href?this.handleHref(n,r,r.href):(t===mA||t===Lg)&&this.handleTooltip(n,r,t!==Lg),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(j4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Mb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return or[t.marktype].pick.call(this,s,t,n,i,r,a)}}const Uae=e=>e===Ay||e===$y||e===Cy?[Ay,$y,Cy]:[e];function j4(e,t){Uae(t).forEach(n=>qae(e,n))}function qae(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function xg(e,t,n){t.forEach(i=>e.fire(i,n))}function H4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?xg(this,e,i):((!r||!r.exit)&&xg(this,n,i),this._active=a,xg(this,t,i),xg(this,e,i))}}function G4(e){return function(t){xg(this,e,t),this._active=null}}function Pae(){return typeof window<"u"&&window.devicePixelRatio||1}function Iae(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),u=s?Pae():r;e.width=t*u,e.height=n*u;for(const f in a)o[f]=a[f];return s&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=u,o.setTransform(u,0,0,u,u*i[0],u*i[1]),e}class Ty extends Vp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Jt,this._tempb=new Jt}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:rl(1,1,this._options.type),t&&this._canvas&&(Sr(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Iae(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||J("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,u=jae(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,u.expand(1)):Hae(i,u.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=or[n.marktype];n.clip&&Pre(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const jae=(e,t,n)=>new Jt().set(0,0,t,n).translate(-e[0],-e[1]);function Hae(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class yq extends gT{constructor(t,n){super(t,n);const i=this;i._hrefHandler=A_(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=A_(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Lg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(yA,this._hrefHandler),r.removeEventListener(mA,this._tooltipHandler),r.removeEventListener(Lg,this._tooltipHandler)),this._svg=r=t&&hT(t,"svg"),r&&(r.addEventListener(yA,this._hrefHandler),r.addEventListener(mA,this._tooltipHandler),r.addEventListener(Lg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:A_(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const A_=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},vq="aria-hidden",pT="aria-label",mT="role",yT="aria-roledescription",bq="graphics-object",vT="graphics-symbol",xq=(e,t,n)=>({[mT]:e,[yT]:t,[pT]:n||void 0}),Gae=ia(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Y4={axis:{desc:"axis",caption:Vae},legend:{desc:"legend",caption:Wae},"title-text":{desc:"title",caption:e=>`Title text '${V4(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${V4(e)}'`}},X4={ariaRole:mT,ariaRoleDescription:yT,description:pT};function Sq(e,t){const n=t.aria===!1;if(e(vq,n||void 0),n||t.description==null)for(const i in X4)e(X4[i],void 0);else{const i=t.mark.marktype;e(pT,t.description),e(mT,t.ariaRole||(i==="group"?bq:vT)),e(yT,t.ariaRoleDescription||`${i} mark`)}}function Eq(e){return e.aria===!1?{[vq]:!0}:Gae[e.role]?null:Y4[e.role]?Xae(e,Y4[e.role]):Yae(e)}function Yae(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return xq(n?bq:vT,`${t} mark container`,e.description)}function Xae(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return xq(t.role||vT,t.desc,n.description||i(n))}catch{return null}}function V4(e){return ge(e.text).join(" ")}function Vae(e){const t=e.datum,n=e.orient,i=t.title?_q(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Xf(o)?"discrete":o} scale with ${LU(s,a,e)}`}function Wae(e){const t=e.datum,n=t.title?_q(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,u=s.dataflow.locale();return Zae(i)+(n?` titled '${n}'`:"")+` for ${Qae(a)} with ${LU(u,o,e)}`}function _q(e){try{return ge(Qe(e.items).items[0].text).join(" ")}catch{return null}}function Qae(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qe(e)}function Zae(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const wq=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Kae=e=>wq(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function bT(){let e="",t="",n="";const i=[],r=()=>t=n="",a=u=>{t&&(e+=`${t}>${n}`,r()),i.push(u)},s=(u,f)=>(f!=null&&(t+=` ${u}="${Kae(f)}"`),o),o={open(u){a(u),t="<"+u;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const u=i.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,r(),o},attr:s,text:u=>(n+=wq(u),o),toString:()=>e};return o}const Aq=e=>$q(bT(),e)+"";function $q(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):$q(e,i)}return e.close()}const My={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},ky={blend:"mix-blend-mode"},Cq={fill:"none","stroke-miterlimit":10},Kh=0,W4="http://www.w3.org/2000/xmlns/",nn=op.xmlns;class xT extends Vp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=rn(t,0,"svg",nn),this._svg.setAttributeNS(W4,"xmlns",nn),this._svg.setAttributeNS(W4,"xmlns:xlink",op["xmlns:xlink"]),this._svg.setAttribute("version",op.version),this._svg.setAttribute("class","marks"),Sr(t,1),this._root=rn(this._svg,Kh,"g",nn),Xo(this._root,Cq),Sr(this._svg,Kh+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Xo(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=rn(t,Kh,"rect",nn),Xo(i,{width:this._width,height:this._height,fill:n}));const r=Aq(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Sr(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,u,f;for(o=0,u=t.length;o<u;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=or[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,Q4(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,Q4(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=or[s],u=n.interactive===!1?"none":null,f=o.tag==="g",d=Z4(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Sr(d,0),n._svg;d.setAttribute("class",cq(n));const h=Eq(n);for(const b in h)ii(d,b,h[b]);f||ii(d,"pointer-events",u),ii(d,"clip-path",n.clip?Z3(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=Z4(b,d,p,o.tag,a);S&&(this._update(o,_,b),f&&tse(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):aa(n,v),Sr(d,y),d}_update(t,n,i){Bs=n,Hn=n.__values__,Sq(Bg,i),t.attr(Bg,i,this);const r=ise[t.type];r&&r.call(this,t,n,i),Bs&&this.style(Bs,i)}style(t,n){if(n!=null){for(const i in My){let r=i==="font"?Xp(n):n[i];if(r===Hn[i])continue;const a=My[i];r==null?t.removeAttribute(a):(V3(r)&&(r=UU(r,this._defs.gradient,Tq())),t.setAttribute(a,r+"")),Hn[i]=r}for(const i in ky)z1(t,ky[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=rn(t,Kh+1,"defs",nn)),r=Jae(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=rn(t,Kh+1,"defs",nn)),r=ese(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Sr(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Q4(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function Jae(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=rn(e,n++,"pattern",nn);Xo(s,{id:vy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=rn(s,0,"rect",nn),Xo(s,{width:1,height:1,fill:`url(${Tq()}#${t.id})`}),e=rn(e,n++,"radialGradient",nn),Xo(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=rn(e,n++,"linearGradient",nn),Xo(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=rn(e,i,"stop",nn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Sr(e,i),n}function ese(e,t,n){let i;return e=rn(e,n,"clipPath",nn),e.setAttribute("id",t.id),t.path?(i=rn(e,0,"path",nn),i.setAttribute("d",t.path)):(i=rn(e,0,"rect",nn),Xo(i,{x:0,y:0,width:t.width,height:t.height})),Sr(e,1),n+1}function tse(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;aa(n,s=>{r=e.mark(t,s,r,i),++a}),Sr(t,1+a)}function Z4(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Yo(s,i,nn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Yo(s,"path",nn);a.appendChild(o),o.__data__=e;const u=Yo(s,"g",nn);a.appendChild(u),u.__data__=e;const f=Yo(s,"path",nn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||nse(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function nse(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Bs=null,Hn=null;const ise={group(e,t,n){const i=Bs=t.childNodes[2];Hn=i.__values__,e.foreground(Bg,n,this),Hn=t.__values__,Bs=t.childNodes[1],e.content(Bg,n,this);const r=Bs=t.childNodes[0];e.background(Bg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Hn.events&&(ii(i,"pointer-events",a),ii(r,"pointer-events",a),Hn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;ii(i,"display",null),this.style(r,n),ii(r,"stroke",null),s&&(n.fill=null),Hn=i.__values__,this.style(i,n),s&&(n.fill=s),Bs=null}else ii(i,"display","none")},image(e,t,n){n.smooth===!1?(z1(t,"image-rendering","optimizeSpeed"),z1(t,"image-rendering","pixelated")):z1(t,"image-rendering",null)},text(e,t,n){const i=Yp(n);let r,a,s,o;te(i)?(a=i.map(u=>gl(n,u)),r=a.join(`
`),r!==Hn.text&&(Sr(t,0),s=t.ownerDocument,o=hl(n),a.forEach((u,f)=>{const d=Yo(s,"tspan",nn);d.__data__=n,d.textContent=u,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Hn.text=r)):(a=gl(n,i),a!==Hn.text&&(t.textContent=a,Hn.text=a)),ii(t,"font-family",Xp(n)),ii(t,"font-size",es(n)+"px"),ii(t,"font-style",n.fontStyle),ii(t,"font-variant",n.fontVariant),ii(t,"font-weight",n.fontWeight)}};function Bg(e,t,n){t!==Hn[e]&&(n?rse(Bs,e,t,n):ii(Bs,e,t),Hn[e]=t)}function z1(e,t,n){n!==Hn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Hn[t]=n)}function Xo(e,t){for(const n in t)ii(e,n,t[n])}function ii(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function rse(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function Tq(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Mq extends Vp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=bT();n.open("svg",Ue({},op,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",Cq,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=or[n.marktype],r=i.tag,a=[Sq,i.attr];t.open("g",{class:cq(n),"clip-path":n.clip?Z3(this,n,n.group):null},Eq(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const u=this.href(o);if(u&&t.open("a",u),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=Yp(o);if(te(f)){const d={x:0,dy:hl(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text(gl(o,f[h])).close()}else t.text(gl(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),aa(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),u&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):aa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,u,f,d)=>{a[d||o]=u};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&ase(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:vy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let u=0;u<o.length;++u)t.open("stop",{offset:o[u].offset,"stop-color":o[u].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function ase(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Xp(t),e["font-size"]=es(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in My){let o=t[s];const u=My[s];o==="transparent"&&(u==="fill"||u==="stroke")||o!=null&&(V3(o)&&(o=UU(o,r.gradient,"")),e[u]=o)}for(const s in ky){const o=t[s];o!=null&&(a=a||[],a.push(`${ky[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Gr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function sse(e){Gr.svgMarkTypes=e.svgMarkTypes??["text"],Gr.svgOnTop=e.svgOnTop??!0,Gr.debug=e.debug??!1}class vA extends Vp{constructor(t){super(t),this._svgRenderer=new xT(t),this._canvasRenderer=new Ty(t)}initialize(t,n,i,r,a){this._root_el=rn(t,0,"div");const s=rn(this._root_el,0,"div"),o=rn(this._root_el,1,"div");return this._root_el.style.position="relative",Gr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Gr.svgOnTop?o:s,this._canvasEl=Gr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Gr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Gr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Gr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Gr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class kq extends Wp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=rn(rn(t,0,"div"),Gr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const Oq="canvas",Dq="hybrid",Rq="png",Nq="svg",zq="none",Vo={Canvas:Oq,PNG:Rq,SVG:Nq,Hybrid:Dq,None:zq},Fu={};Fu[Oq]=Fu[Rq]={renderer:Ty,headless:Ty,handler:Wp};Fu[Nq]={renderer:xT,headless:Mq,handler:yq};Fu[Dq]={renderer:vA,headless:vA,handler:kq};Fu[zq]={};function kb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Fu[e]=t,this):Fu[e]}function Fq(e,t,n){const i=[],r=new Jt().union(t),a=e.marktype;return a?Lq(e,r,n,i):a==="group"?Bq(e,r,n,i):J("Intersect scene must be mark node or group item.")}function Lq(e,t,n,i){if(ose(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)Bq(r[o],t,n,i);else for(const u=or[a].isect;o<s;++o){const f=r[o];Uq(f,t,u)&&i.push(f)}}return i}function ose(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Bq(e,t,n,i){n&&n(e.mark)&&Uq(e,t,or.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let u=0;u<a;++u)Lq(r[u],t,n,i);t.translate(s,o)}return i}function Uq(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const $_=new Jt;function qq(e){const t=e.clip;if(qe(t))t(Hp($_.clear()));else if(t)$_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect($_)}const lse=1e-9;function ST(e,t,n){return e===t?!0:n==="path"?Pq(e,t):e instanceof Date&&t instanceof Date?+e==+t:nt(e)&&nt(t)?Math.abs(e-t)<=lse:!e||!t||!me(e)&&!me(t)?e==t:use(e,t)}function Pq(e,t){return ST(Vf(e),Vf(t))}function use(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!ST(e[r],t[r],r))return!1;return typeof e==typeof t}function cse(){Are(),Rie()}const Zf="top",Qr="left",Zr="right",pl="bottom",fse="top-left",dse="top-right",hse="bottom-left",gse="bottom-right",ET="start",bA="middle",ri="end",pse="x",mse="y",Ob="group",_T="axis",wT="title",yse="frame",vse="scope",AT="legend",Iq="row-header",jq="row-footer",Hq="row-title",Gq="column-header",Yq="column-footer",Xq="column-title",bse="padding",xse="symbol",Vq="fit",Wq="fit-x",Qq="fit-y",Sse="pad",$T="none",Xm="all",xA="each",CT="flush",Wo="column",Qo="row";function Zq(e){Z.call(this,null,e)}fe(Zq,Z,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=or[r],s=a.bound;let o=i.bounds,u;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=Vm(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===Ob||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(Vm(f,s))),i.role){case _T:case AT:case wT:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(Vm(f,s))}),t.visit(t.MOD,f=>{u=u||o.alignsWith(f.bounds),n.dirty(f),o.union(Vm(f,s))}),u&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return qq(i),t.modifies("bounds")}});function Vm(e,t,n){return t(e.bounds.clear(),e,n)}const K4=":vega_identifier:";function TT(e){Z.call(this,0,e)}TT.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};fe(TT,Z,{transform(e,t){const n=Ese(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Ese(e){return e._signals[K4]||(e._signals[K4]=e.add(0))}function Kq(e){Z.call(this,null,e)}fe(Kq,Z,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,_se(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Ob?Eb:Sb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function _se(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function Jq(e){Z.call(this,null,e)}const J4={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!eP(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},eP=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),ez=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(eP(r,a=e[n].bounds,t))return!0},wse=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Ase=(e,t,n)=>{var i=e.range(),r=new Jt;return t===Zf||t===pl?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},tz=e=>(e.forEach(t=>t.opacity=1),e),nz=(e,t)=>e.reflow(t.modified()).modifies("opacity");fe(Jq,Z,{transform(e,t){const n=J4[e.method]||J4.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(tz(r),t=nz(t,e)),t;if(r=r.filter(wse),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=tz(r),t=nz(t,e),a.length>=3&&ez(a,i)){do a=n(a,i);while(a.length>=3&&ez(a,i));a.length<3&&!Qe(r).opacity&&(a.length>1&&(Qe(a).opacity=0),Qe(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Ase(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(u=>{s(u)||(u.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(u=>{u.opacity&&o.union(u.bounds)}),t}});function tP(e){Z.call(this,null,e)}fe(tP,Z,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const jn=new Jt;function _f(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $se(e){var t=e.items[0].orient;return t===Qr||t===Zr}function Cse(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Tse(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,u=Cse(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[u[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&cT(v),w=0,A=0,$,T;switch(jn.clear().union(S),S.clear(),($=u[0])>-1&&S.union(r.items[$].bounds),($=u[1])>-1&&S.union(r.items[$].bounds),o){case Zf:w=h||0,A=-d,T=Math.max(p,Math.min(y,-S.y1)),S.add(0,-T).add(f,0),v&&Wm(e,v,T,b,_,0,-1,S);break;case Qr:w=-d,A=h||0,T=Math.max(p,Math.min(y,-S.x1)),S.add(-T,0).add(0,f),v&&Wm(e,v,T,b,_,1,-1,S);break;case Zr:w=n+d,A=h||0,T=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(T,f),v&&Wm(e,v,T,b,_,1,1,S);break;case pl:w=h||0,A=i+d,T=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,T),v&&Wm(e,v,T,b,0,0,1,S);break;default:w=r.x,A=r.y}return eo(S.translate(w,A),r),_f(r,"x",w+s)|_f(r,"y",A+s)&&(r.bounds=jn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function Wm(e,t,n,i,r,a,s,o){const u=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(u.translate(-d,-h)),e.dirty(t)}o.union(u)}const iz=(e,t)=>Math.floor(Math.min(e,t)),rz=(e,t)=>Math.ceil(Math.max(e,t));function Mse(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Ob)switch(r.role){case _T:case AT:case wT:break;case Iq:s.rowheaders.push(...a);break;case jq:s.rowfooters.push(...a);break;case Gq:s.colheaders.push(...a);break;case Yq:s.colfooters.push(...a);break;case Hq:s.rowtitle=a[0];break;case Xq:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function kse(e){return new Jt().set(0,0,e.width||0,e.height||0)}function Ose(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Tt(e,t,n){const i=me(e)?e[t]:e;return i??(n!==void 0?n:0)}function az(e){return e<0?Math.ceil(-e):0}function nP(e,t,n){var i=!n.nodirty,r=n.bounds===CT?kse:Ose,a=jn.set(0,0,0,0),s=Tt(n.align,Wo),o=Tt(n.align,Qo),u=Tt(n.padding,Wo),f=Tt(n.padding,Qo),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(h),w=0,A=Array(p),$=Array(p),T=Array(p),k,M,D,N,B,F,G,I,U,z,R;for(M=0;M<d;++M)v[M]=0;for(M=0;M<h;++M)_[M]=0;for(M=0;M<p;++M)F=t[M],B=T[M]=r(F),F.x=F.x||0,A[M]=0,F.y=F.y||0,$[M]=0,D=M%d,N=~~(M/d),b=Math.max(b,G=Math.ceil(B.x2)),w=Math.max(w,I=Math.ceil(B.y2)),v[D]=Math.max(v[D],G),_[N]=Math.max(_[N],I),y[M]=u+az(B.x1),S[M]=f+az(B.y1),i&&e.dirty(t[M]);for(M=0;M<p;++M)M%d===0&&(y[M]=0),M<d&&(S[M]=0);if(s===xA)for(D=1;D<d;++D){for(R=0,M=D;M<p;M+=d)R<y[M]&&(R=y[M]);for(M=D;M<p;M+=d)y[M]=R+v[D-1]}else if(s===Xm){for(R=0,M=0;M<p;++M)M%d&&R<y[M]&&(R=y[M]);for(M=0;M<p;++M)M%d&&(y[M]=R+b)}else for(s=!1,D=1;D<d;++D)for(M=D;M<p;M+=d)y[M]+=v[D-1];if(o===xA)for(N=1;N<h;++N){for(R=0,M=N*d,k=M+d;M<k;++M)R<S[M]&&(R=S[M]);for(M=N*d;M<k;++M)S[M]=R+_[N-1]}else if(o===Xm){for(R=0,M=d;M<p;++M)R<S[M]&&(R=S[M]);for(M=d;M<p;++M)S[M]=R+w}else for(o=!1,N=1;N<h;++N)for(M=N*d,k=M+d;M<k;++M)S[M]+=_[N-1];for(U=0,M=0;M<p;++M)U=y[M]+(M%d?U:0),A[M]+=U-t[M].x;for(D=0;D<d;++D)for(z=0,M=D;M<p;M+=d)z+=S[M],$[M]+=z-t[M].y;if(s&&Tt(n.center,Wo)&&h>1)for(M=0;M<p;++M)B=s===Xm?b:v[M%d],U=B-T[M].x2-t[M].x-A[M],U>0&&(A[M]+=U/2);if(o&&Tt(n.center,Qo)&&d!==1)for(M=0;M<p;++M)B=o===Xm?w:_[~~(M/d)],z=B-T[M].y2-t[M].y-$[M],z>0&&($[M]+=z/2);for(M=0;M<p;++M)a.union(T[M].translate(A[M],$[M]));switch(U=Tt(n.anchor,pse),z=Tt(n.anchor,mse),Tt(n.anchor,Wo)){case ri:U-=a.width();break;case bA:U-=a.width()/2}switch(Tt(n.anchor,Qo)){case ri:z-=a.height();break;case bA:z-=a.height()/2}for(U=Math.round(U),z=Math.round(z),a.clear(),M=0;M<p;++M)t[M].mark.bounds.clear();for(M=0;M<p;++M)F=t[M],F.x+=A[M]+=U,F.y+=$[M]+=z,a.union(F.mark.bounds.union(F.bounds.translate(A[M],$[M]))),i&&e.dirty(F);return a}function Dse(e,t,n){var i=Mse(t),r=i.marks,a=n.bounds===CT?Rse:Nse,s=n.offset,o=n.columns||r.length,u=o<=0?1:Math.ceil(r.length/o),f=u*o,d,h,p,y,v,b,S;const _=nP(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=Tt(n.headerBand,Qo,null),d=Qm(e,i.rowheaders,r,o,u,-Tt(s,"rowHeader"),iz,0,a,"x1",0,o,1,b)),i.colheaders&&(b=Tt(n.headerBand,Wo,null),h=Qm(e,i.colheaders,r,o,o,-Tt(s,"columnHeader"),iz,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=Tt(n.footerBand,Qo,null),p=Qm(e,i.rowfooters,r,o,u,Tt(s,"rowFooter"),rz,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=Tt(n.footerBand,Wo,null),y=Qm(e,i.colfooters,r,o,o,Tt(s,"columnFooter"),rz,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=Tt(n.titleAnchor,Qo),S=Tt(s,"rowTitle"),S=v===ri?p+S:d-S,b=Tt(n.titleBand,Qo,.5),sz(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=Tt(n.titleAnchor,Wo),S=Tt(s,"columnTitle"),S=v===ri?y+S:h-S,b=Tt(n.titleBand,Wo,.5),sz(e,i.coltitle,S,1,_,b))}function Rse(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Nse(e,t){return e.bounds[t]}function Qm(e,t,n,i,r,a,s,o,u,f,d,h,p,y){var v=n.length,b=0,S=0,_,w,A,$,T,k,M,D,N;if(!v)return b;for(_=d;_<v;_+=h)n[_]&&(b=s(b,u(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,$=t.length;w<$;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,$=t.length;w<$;++w,_+=h){for(k=t[w],T=k.mark.bounds,A=_;A>=0&&(M=n[A])==null;A-=p);o?(D=y==null?M.x:Math.round(M.bounds.x1+y*M.bounds.width()),N=b):(D=b,N=y==null?M.y:Math.round(M.bounds.y1+y*M.bounds.height())),T.union(k.bounds.translate(D-(k.x||0),N-(k.y||0))),k.x=D,k.y=N,e.dirty(k),S=s(S,T[f])}return S}function sz(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function zse(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Fse(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Lse(e,t,n,i,r,a,s){const o=zse(n,t),u=Fse(e,o("offset",0)),f=o("anchor",ET),d=f===ri?1:f===bA?.5:0,h={align:xA,bounds:o("bounds",CT),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Qr:h.anchor={x:Math.floor(i.x1)-u,column:ri,y:d*(s||i.height()+2*i.y1),row:f};break;case Zr:h.anchor={x:Math.ceil(i.x2)+u,y:d*(s||i.height()+2*i.y1),row:f};break;case Zf:h.anchor={y:Math.floor(r.y1)-u,row:ri,x:d*(a||r.width()+2*r.x1),column:f};break;case pl:h.anchor={y:Math.ceil(r.y2)+u,x:d*(a||r.width()+2*r.x1),column:f};break;case fse:h.anchor={x:u,y:u};break;case dse:h.anchor={x:a-u,y:u,column:ri};break;case hse:h.anchor={x:u,y:s-u,row:ri};break;case gse:h.anchor={x:a-u,y:s-u,column:ri,row:ri};break}return h}function Bse(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,u,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),qse(e,n,n.items[0].items[0]),a=Use(n,a),u=2*n.padding,f=2*n.padding,a.empty()||(u=Math.ceil(a.width()+u),f=Math.ceil(a.height()+f)),i.type===xse&&Pse(n.items[0].items[0].items[0].items),r!==$T&&(n.x=s=0,n.y=o=0),n.width=u,n.height=f,eo(a.set(s,o,s+u,o+f),n),n.mark.bounds.clear().union(a),n}function Use(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function qse(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&Jh(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,u=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case Qr:r+=Math.ceil(s.bounds.width())+u;break;case Zr:case pl:break;default:a+=s.bounds.height()+u}switch((r||a)&&Jh(e,n,r,a),s.orient){case Qr:d+=lf(t,n,s,o,1,1);break;case Zr:f+=lf(t,n,s,ri,0,0)+u,d+=lf(t,n,s,o,1,1);break;case pl:f+=lf(t,n,s,o,0,0),d+=lf(t,n,s,ri,-1,0,1)+u;break;default:f+=lf(t,n,s,o,0,0)}(f||d)&&Jh(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(Jh(e,n,-f,0),Jh(e,s,-f,0))}}function lf(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",u=n.datum.vgrad,f=o&&(a||!u)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=u&&a?d:0,p=u&&a?0:d,y=r<=0?0:cT(n);return Math.round(i===ET?h:i===ri?p-y:.5*(d-y))}function Jh(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Pse(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Ise(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,u=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Qr||o===Zr?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==Ob?o===Qr?(v=r.y2,y=r.y1):o===Zr?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Qr&&(v=i,y=0),A=u===ET?v:u===ri?y:(v+y)/2,p&&p.text){switch(o){case Zf:case pl:w=h.bounds.height()+d;break;case Qr:_=h.bounds.width()+d;break;case Zr:_=-h.bounds.width()-d;break}jn.clear().union(p.bounds),jn.translate(_-(p.x||0),w-(p.y||0)),_f(p,"x",_)|_f(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(jn),p.mark.bounds.clear().union(jn),e.dirty(p)),jn.clear().union(p.bounds)}else jn.clear();switch(jn.union(h.bounds),o){case Zf:b=A,S=r.y1-jn.height()-f;break;case Qr:b=r.x1-jn.width()-f,S=A;break;case Zr:b=r.x2+jn.width()+f,S=A;break;case pl:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return _f(a,"x",b)|_f(a,"y",S)&&(jn.translate(b,S),e.dirty(a),a.bounds.clear().union(jn),t.bounds.clear().union(jn),e.dirty(a)),a.bounds}function iP(e){Z.call(this,null,e)}fe(iP,Z,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Dse(n,i,e.layout),Hse(n,i,e)}),jse(e.mark.group)?t.reflow():t}});function jse(e){return e&&e.mark.role!=="legend-entry"}function Hse(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new Jt().set(0,0,r,a),o=s.clone(),u=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case _T:y=$se(h)?o:u,y.union(Tse(e,h,r,a));break;case wT:d=h;break;case AT:f.push(Bse(e,h));break;case yse:case vse:case Iq:case jq:case Hq:case Gq:case Yq:case Xq:o.union(h.bounds),u.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||Zr,p!==$T&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];nP(e,w,Lse(w,_,n.legends,o,u,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===Vq||n.autosize.type===Wq||n.autosize.type===Qq))switch(_.orient){case Qr:case Zr:s.add(w.x1,0).add(w.x2,0);break;case Zf:case pl:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(u),d&&s.union(Ise(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),Gse(e,t,s,n)}function Gse(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,u=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-u)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===bse){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===$T?(f=0,h=0,u=s,d=o):a===Vq?(u=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===Wq?(u=Math.max(0,s-f-p),o=d+h+y):a===Qq?(s=u+f+p,d=Math.max(0,o-h-y)):a===Sse&&(s=u+f+p,o=d+h+y),e._resizeView(s,o,u,d,[f,h],r.resize)}const Yse=Object.freeze(Object.defineProperty({__proto__:null,bound:Zq,identifier:TT,mark:Kq,overlap:Jq,render:tP,viewlayout:iP},Symbol.toStringTag,{value:"Module"}));function rP(e){Z.call(this,null,e)}fe(rP,Z,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=Y3(a,s,e.minstep),u=e.format||DU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?OU(a,e.values,o):X3(a,o);return r&&(i.rem=r),r=f.map((d,h)=>st({index:h/(f.length-1||1),value:d,label:u(d)})),e.extra&&r.length&&r.push(st({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function aP(e){Z.call(this,null,e)}function Xse(){return st({})}function Vse(e){const t=Sd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}fe(aP,Z,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||Xse,a=e.key||$e,s=this.value;return te(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&J("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=Vse(a)),t.visit(t.ADD,o=>{const u=a(o);let f=s.get(u);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(u,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const u=a(o),f=s.get(u);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const u=a(o),f=s.get(u);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function sP(e){Z.call(this,null,e)}fe(sP,Z,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(te(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||zo,u=r.enter||zo,f=r.exit||zo,d=(a&&!s?r[a]:o)||zo;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{u(h,e),o(h,e)}),n.modifies(u.output),n.modifies(o.output),d!==zo&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==zo&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==zo){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=u(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(u.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function oP(e){Z.call(this,[],e)}fe(oP,Z,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||C1,s=e.scale,o=+e.limit,u=Y3(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===C1,d=e.format||FU(n,s,u,a,e.formatSpecifier,e.formatType,f),h=e.values||zU(s,u),p,y,v,b,S;return r&&(i.rem=r),a===C1?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,qe(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=Jn(b=v||8),r=r.map((_,w)=>st({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=h[r.length],r.push(st({index:r.length,label:`…${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===xie?(p=s.domain(),y=TU(s,p[0],Qe(p)),h.length<3&&!e.values&&p[0]!==Qe(p)&&(h=[p[0],Qe(p)]),r=h.map((_,w)=>st({index:w,label:d(_,w,h),value:_,perc:y(_)}))):(v=h.length-1,y=Oie(s),r=h.map((_,w)=>st({index:w,label:d(_,w,h),value:_,perc:w?y(_):0,perc2:w===v?1:y(h[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const Wse=e=>e.source.x,Qse=e=>e.source.y,Zse=e=>e.target.x,Kse=e=>e.target.y;function MT(e){Z.call(this,{},e)}MT.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};fe(MT,Z,{transform(e,t){var n=e.sourceX||Wse,i=e.sourceY||Qse,r=e.targetX||Zse,a=e.targetY||Kse,s=e.as||"path",o=e.orient||"vertical",u=e.shape||"line",f=oz.get(u+"-"+o)||oz.get(u);return f||J("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const lP=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,Jse=(e,t,n,i)=>lP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),uP=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},eoe=(e,t,n,i)=>uP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),cP=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},toe=(e,t,n,i)=>cP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),noe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,ioe=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,roe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},aoe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},soe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},ooe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),u=(t+i)/2;return"M"+t*r+","+t*a+"C"+u*r+","+u*a+" "+u*s+","+u*o+" "+i*s+","+i*o},oz=Sd({line:lP,"line-radial":Jse,arc:uP,"arc-radial":eoe,curve:cP,"curve-radial":toe,"orthogonal-horizontal":noe,"orthogonal-vertical":ioe,"orthogonal-radial":roe,"diagonal-horizontal":aoe,"diagonal-vertical":soe,"diagonal-radial":ooe});function kT(e){Z.call(this,null,e)}kT.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};fe(kT,Z,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||bd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,f=u.map(a),d=f.length,h=s,p=(o-s)/A7(f),y=Ji(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=u[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const loe=5;function uoe(e){const t=e.type;return!e.bins&&(t===Gf||t===Lp||t===Bp)}function fP(e){return j3(e)&&e!==Ba}const coe=ia(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function dP(e){Z.call(this,null,e),this.modified(!0)}fe(dP,Z,{transform(e,t){var n=t.dataflow,i=this.value,r=foe(e);(!i||r!==i.type)&&(this.value=i=rt(r)());for(r in e)if(!coe[r]){if(r==="padding"&&fP(i.type))continue;qe(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return yoe(i,e,moe(i,e,hoe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function foe(e){var t=e.type,n="",i;return t===Ba?Ba+"-"+Gf:(doe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ba+"-":i===3?Md+"-":""),(n+t||Gf).toLowerCase())}function doe(e){const t=e.type;return j3(t)&&t!==Nu&&t!==zu&&(e.scheme||e.range&&e.range.length&&e.range.every(be))}function hoe(e,t,n){const i=goe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&uoe(e),o,u;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const f=u>r[o]?o+1:u<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",u),r.splice(f,0,u)}return fP(a)&&t.padding&&r[0]!==Qe(r)&&(r=poe(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(hP(a,r,n)),a===U3&&e.unknown(t.domainImplicit?Jw:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Y3(e,t.nice)||null),r.length}function goe(e,t,n){return t?(e.domain(hP(e.type,t,n)),t.length):-1}function poe(e,t,n,i,r,a){var s=Math.abs(Qe(n)-n[0]),o=s/(s-2*i),u=e===Ws?sC(t,null,o):e===Bp?ey(t,null,o,.5):e===Lp?ey(t,null,o,r||1):e===mb?oC(t,null,o,a||1):aC(t,null,o);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function hP(e,t,n){if(_U(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+ce(t))}return t}function moe(e,t,n){let i=t.bins;if(i&&!te(i)){const r=e.domain(),a=r[0],s=Qe(r),o=i.step;let u=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||J("Scale bins parameter missing step property."),u<a&&(u=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=Ji(u,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===q3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function yoe(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=voe(i,t,n);else if(t.scheme&&(a=boe(i,t,n),qe(a))){if(e.interpolator)return e.interpolator(a);J(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&wU(i))return e.interpolator(bb(SA(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(H3(t.interpolate,t.interpolateGamma)):qe(e.round)?e.round(r):qe(e.rangeRound)&&e.interpolate(r?zp:wl),a&&e.range(SA(a,t.reverse))}function voe(e,t,n){e!==yU&&e!==sA&&J("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===sA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*B3(n,r,i)]}function boe(e,t,n){var i=t.schemeExtent,r,a;return te(t.scheme)?a=bb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=G3(r),a||J(`Unrecognized scheme name: ${t.scheme}`)),n=e===vb?n+1:e===q3?n-1:e===Yf||e===yb?+t.schemeCount||loe:n,wU(e)?lz(a,i,t.reverse):qe(a)?CU(lz(a,i),n):e===U3?a:a.slice(0,n)}function lz(e,t,n){return qe(e)&&(t||n)?$U(e,SA(t||[0,1],n)):e}function SA(e,t){return t?e.slice().reverse():e}function gP(e){Z.call(this,null,e)}fe(gP,Z,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(ic(e.sort)),this.modified(n),t}});const uz="zero",pP="center",mP="normalize",yP=["y0","y1"];function OT(e){Z.call(this,null,e)}OT.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:uz,values:[uz,pP,mP]},{name:"as",type:"string",array:!0,length:2,default:yP}]};fe(OT,Z,{transform(e,t){var n=e.as||yP,i=n[0],r=n[1],a=ic(e.sort),s=e.field||bd,o=e.offset===pP?xoe:e.offset===mP?Soe:Eoe,u,f,d,h;for(u=_oe(t.source,e.groupby,a,s),f=0,d=u.length,h=u.max;f<d;++f)o(u[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function xoe(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,u;o<s;++o)u=e[o],u[i]=a,u[r]=a+=Math.abs(n(u))}function Soe(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,u=0,f=0,d;u<o;++u)d=e[u],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Eoe(e,t,n,i,r){for(var a=0,s=0,o=e.length,u=0,f,d;u<o;++u)d=e[u],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function _oe(e,t,n,i){var r=[],a=b=>b(d),s,o,u,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,u=e.length;o<u;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,u=p.length;o<u;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const woe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:rP,datajoin:aP,encode:sP,legendentries:oP,linkpath:MT,pie:kT,scale:dP,sortitems:gP,stack:OT},Symbol.toStringTag,{value:"Module"}));var Te=1e-6,Oy=1e-12,He=Math.PI,Ut=He/2,Dy=He/4,hi=He*2,Ht=180/He,Ie=He/180,We=Math.abs,Od=Math.atan,Rr=Math.atan2,ke=Math.cos,Zm=Math.ceil,vP=Math.exp,EA=Math.hypot,Ry=Math.log,C_=Math.pow,Ce=Math.sin,wr=Math.sign||function(e){return e>0?1:e<0?-1:0},gi=Math.sqrt,DT=Math.tan;function bP(e){return e>1?0:e<-1?He:Math.acos(e)}function Di(e){return e>1?Ut:e<-1?-Ut:Math.asin(e)}function Dn(){}function Ny(e,t){e&&fz.hasOwnProperty(e.type)&&fz[e.type](e,t)}var cz={Feature:function(e,t){Ny(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ny(n[i].geometry,t)}},fz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){_A(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)_A(n[i],t,0)},Polygon:function(e,t){dz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)dz(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ny(n[i],t)}};function _A(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function dz(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)_A(e[n],t,1);t.polygonEnd()}function Ds(e,t){e&&cz.hasOwnProperty(e.type)?cz[e.type](e,t):Ny(e,t)}var zy=new fi,Fy=new fi,xP,SP,wA,AA,$A,Ya={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){zy=new fi,Ya.lineStart=Aoe,Ya.lineEnd=$oe},polygonEnd:function(){var e=+zy;Fy.add(e<0?hi+e:e),this.lineStart=this.lineEnd=this.point=Dn},sphere:function(){Fy.add(hi)}};function Aoe(){Ya.point=Coe}function $oe(){EP(xP,SP)}function Coe(e,t){Ya.point=EP,xP=e,SP=t,e*=Ie,t*=Ie,wA=e,AA=ke(t=t/2+Dy),$A=Ce(t)}function EP(e,t){e*=Ie,t*=Ie,t=t/2+Dy;var n=e-wA,i=n>=0?1:-1,r=i*n,a=ke(t),s=Ce(t),o=$A*s,u=AA*a+o*ke(r),f=o*i*Ce(r);zy.add(Rr(f,u)),wA=e,AA=a,$A=s}function Toe(e){return Fy=new fi,Ds(e,Ya),Fy*2}function Ly(e){return[Rr(e[1],e[0]),Di(e[2])]}function Lu(e){var t=e[0],n=e[1],i=ke(n);return[i*ke(t),i*Ce(t),Ce(n)]}function Km(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Kf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function T_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function Jm(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function By(e){var t=gi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Dt,$i,Lt,Qi,du,_P,wP,kf,Ug,qo,Qs,ks={point:CA,lineStart:hz,lineEnd:gz,polygonStart:function(){ks.point=$P,ks.lineStart=Moe,ks.lineEnd=koe,Ug=new fi,Ya.polygonStart()},polygonEnd:function(){Ya.polygonEnd(),ks.point=CA,ks.lineStart=hz,ks.lineEnd=gz,zy<0?(Dt=-(Lt=180),$i=-(Qi=90)):Ug>Te?Qi=90:Ug<-Te&&($i=-90),Qs[0]=Dt,Qs[1]=Lt},sphere:function(){Dt=-(Lt=180),$i=-(Qi=90)}};function CA(e,t){qo.push(Qs=[Dt=e,Lt=e]),t<$i&&($i=t),t>Qi&&(Qi=t)}function AP(e,t){var n=Lu([e*Ie,t*Ie]);if(kf){var i=Kf(kf,n),r=[i[1],-i[0],0],a=Kf(r,i);By(a),a=Ly(a);var s=e-du,o=s>0?1:-1,u=a[0]*Ht*o,f,d=We(s)>180;d^(o*du<u&&u<o*e)?(f=a[1]*Ht,f>Qi&&(Qi=f)):(u=(u+360)%360-180,d^(o*du<u&&u<o*e)?(f=-a[1]*Ht,f<$i&&($i=f)):(t<$i&&($i=t),t>Qi&&(Qi=t))),d?e<du?Wi(Dt,e)>Wi(Dt,Lt)&&(Lt=e):Wi(e,Lt)>Wi(Dt,Lt)&&(Dt=e):Lt>=Dt?(e<Dt&&(Dt=e),e>Lt&&(Lt=e)):e>du?Wi(Dt,e)>Wi(Dt,Lt)&&(Lt=e):Wi(e,Lt)>Wi(Dt,Lt)&&(Dt=e)}else qo.push(Qs=[Dt=e,Lt=e]);t<$i&&($i=t),t>Qi&&(Qi=t),kf=n,du=e}function hz(){ks.point=AP}function gz(){Qs[0]=Dt,Qs[1]=Lt,ks.point=CA,kf=null}function $P(e,t){if(kf){var n=e-du;Ug.add(We(n)>180?n+(n>0?360:-360):n)}else _P=e,wP=t;Ya.point(e,t),AP(e,t)}function Moe(){Ya.lineStart()}function koe(){$P(_P,wP),Ya.lineEnd(),We(Ug)>Te&&(Dt=-(Lt=180)),Qs[0]=Dt,Qs[1]=Lt,kf=null}function Wi(e,t){return(t-=e)<0?t+360:t}function Ooe(e,t){return e[0]-t[0]}function pz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Doe(e){var t,n,i,r,a,s,o;if(Qi=Lt=-(Dt=$i=1/0),qo=[],Ds(e,ks),n=qo.length){for(qo.sort(Ooe),t=1,i=qo[0],a=[i];t<n;++t)r=qo[t],pz(i,r[0])||pz(i,r[1])?(Wi(i[0],r[1])>Wi(i[0],i[1])&&(i[1]=r[1]),Wi(r[0],i[1])>Wi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Wi(i[1],r[0]))>s&&(s=o,Dt=r[0],Lt=i[1])}return qo=Qs=null,Dt===1/0||$i===1/0?[[NaN,NaN],[NaN,NaN]]:[[Dt,$i],[Lt,Qi]]}var Sg,Uy,qy,Py,Iy,jy,Hy,Gy,TA,MA,kA,CP,TP,ai,si,oi,Kr={sphere:Dn,point:RT,lineStart:mz,lineEnd:yz,polygonStart:function(){Kr.lineStart=zoe,Kr.lineEnd=Foe},polygonEnd:function(){Kr.lineStart=mz,Kr.lineEnd=yz}};function RT(e,t){e*=Ie,t*=Ie;var n=ke(t);Qp(n*ke(e),n*Ce(e),Ce(t))}function Qp(e,t,n){++Sg,qy+=(e-qy)/Sg,Py+=(t-Py)/Sg,Iy+=(n-Iy)/Sg}function mz(){Kr.point=Roe}function Roe(e,t){e*=Ie,t*=Ie;var n=ke(t);ai=n*ke(e),si=n*Ce(e),oi=Ce(t),Kr.point=Noe,Qp(ai,si,oi)}function Noe(e,t){e*=Ie,t*=Ie;var n=ke(t),i=n*ke(e),r=n*Ce(e),a=Ce(t),s=Rr(gi((s=si*a-oi*r)*s+(s=oi*i-ai*a)*s+(s=ai*r-si*i)*s),ai*i+si*r+oi*a);Uy+=s,jy+=s*(ai+(ai=i)),Hy+=s*(si+(si=r)),Gy+=s*(oi+(oi=a)),Qp(ai,si,oi)}function yz(){Kr.point=RT}function zoe(){Kr.point=Loe}function Foe(){MP(CP,TP),Kr.point=RT}function Loe(e,t){CP=e,TP=t,e*=Ie,t*=Ie,Kr.point=MP;var n=ke(t);ai=n*ke(e),si=n*Ce(e),oi=Ce(t),Qp(ai,si,oi)}function MP(e,t){e*=Ie,t*=Ie;var n=ke(t),i=n*ke(e),r=n*Ce(e),a=Ce(t),s=si*a-oi*r,o=oi*i-ai*a,u=ai*r-si*i,f=EA(s,o,u),d=Di(f),h=f&&-d/f;TA.add(h*s),MA.add(h*o),kA.add(h*u),Uy+=d,jy+=d*(ai+(ai=i)),Hy+=d*(si+(si=r)),Gy+=d*(oi+(oi=a)),Qp(ai,si,oi)}function Boe(e){Sg=Uy=qy=Py=Iy=jy=Hy=Gy=0,TA=new fi,MA=new fi,kA=new fi,Ds(e,Kr);var t=+TA,n=+MA,i=+kA,r=EA(t,n,i);return r<Oy&&(t=jy,n=Hy,i=Gy,Uy<Te&&(t=qy,n=Py,i=Iy),r=EA(t,n,i),r<Oy)?[NaN,NaN]:[Rr(n,t)*Ht,Di(i/r)*Ht]}function OA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function DA(e,t){return We(e)>He&&(e-=Math.round(e/hi)*hi),[e,t]}DA.invert=DA;function kP(e,t,n){return(e%=hi)?t||n?OA(bz(e),xz(t,n)):bz(e):t||n?xz(t,n):DA}function vz(e){return function(t,n){return t+=e,We(t)>He&&(t-=Math.round(t/hi)*hi),[t,n]}}function bz(e){var t=vz(e);return t.invert=vz(-e),t}function xz(e,t){var n=ke(e),i=Ce(e),r=ke(t),a=Ce(t);function s(o,u){var f=ke(u),d=ke(o)*f,h=Ce(o)*f,p=Ce(u),y=p*n+d*i;return[Rr(h*r-y*a,d*n-p*i),Di(y*r+h*a)]}return s.invert=function(o,u){var f=ke(u),d=ke(o)*f,h=Ce(o)*f,p=Ce(u),y=p*r-h*a;return[Rr(h*r+p*a,d*n+y*i),Di(y*n-d*i)]},s}function Uoe(e){e=kP(e[0]*Ie,e[1]*Ie,e.length>2?e[2]*Ie:0);function t(n){return n=e(n[0]*Ie,n[1]*Ie),n[0]*=Ht,n[1]*=Ht,n}return t.invert=function(n){return n=e.invert(n[0]*Ie,n[1]*Ie),n[0]*=Ht,n[1]*=Ht,n},t}function qoe(e,t,n,i,r,a){if(n){var s=ke(t),o=Ce(t),u=i*n;r==null?(r=t+i*hi,a=t-u/2):(r=Sz(s,r),a=Sz(s,a),(i>0?r<a:r>a)&&(r+=i*hi));for(var f,d=r;i>0?d>a:d<a;d-=u)f=Ly([s,-o*ke(d),-o*Ce(d)]),e.point(f[0],f[1])}}function Sz(e,t){t=Lu(t),t[0]-=e,By(t);var n=bP(-t[1]);return((-t[2]<0?-n:n)+hi-Te)%hi}function OP(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:Dn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function F1(e,t){return We(e[0]-t[0])<Te&&We(e[1]-t[1])<Te}function e1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function DP(e,t,n,i,r){var a=[],s=[],o,u;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(F1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}_[0]+=2*Te}a.push(w=new e1(S,v,null,!0)),s.push(w.o=new e1(S,null,w,!1)),a.push(w=new e1(_,v,null,!1)),s.push(w.o=new e1(_,null,w,!0))}}),!!a.length){for(s.sort(t),Ez(a),Ez(s),o=0,u=s.length;o<u;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,u=d.length;o<u;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function Ez(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function M_(e){return We(e[0])<=He?e[0]:wr(e[0])*((We(e[0])+He)%hi-He)}function Poe(e,t){var n=M_(t),i=t[1],r=Ce(i),a=[Ce(n),-ke(n),0],s=0,o=0,u=new fi;r===1?i=Ut+Te:r===-1&&(i=-Ut-Te);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=M_(y),b=y[1]/2+Dy,S=Ce(b),_=ke(b),w=0;w<p;++w,v=$,S=k,_=M,y=A){var A=h[w],$=M_(A),T=A[1]/2+Dy,k=Ce(T),M=ke(T),D=$-v,N=D>=0?1:-1,B=N*D,F=B>He,G=S*k;if(u.add(Rr(G*N*Ce(B),_*M+G*ke(B))),s+=F?D+N*hi:D,F^v>=n^$>=n){var I=Kf(Lu(y),Lu(A));By(I);var U=Kf(a,I);By(U);var z=(F^D>=0?-1:1)*Di(U[2]);(i>z||i===z&&(I[0]||I[1]))&&(o+=F^D>=0?1:-1)}}return(s<-Te||s<Te&&u<-Oy)^o&1}function RP(e,t,n,i){return function(r){var a=t(r),s=OP(),o=t(s),u=!1,f,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=w7(d);var $=Poe(f,i);d.length?(u||(r.polygonStart(),u=!0),DP(d,joe,$,n,r)):$&&(u||(r.polygonStart(),u=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),u&&(r.polygonEnd(),u=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y($,T){e($,T)&&r.point($,T)}function v($,T){a.point($,T)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _($,T){h.push([$,T]),o.point($,T)}function w(){o.lineStart(),h=[]}function A(){_(h[0][0],h[0][1]),o.lineEnd();var $=o.clean(),T=s.result(),k,M=T.length,D,N,B;if(h.pop(),f.push(h),h=null,!!M){if($&1){if(N=T[0],(D=N.length-1)>0){for(u||(r.polygonStart(),u=!0),r.lineStart(),k=0;k<D;++k)r.point((B=N[k])[0],B[1]);r.lineEnd()}return}M>1&&$&2&&T.push(T.pop().concat(T.shift())),d.push(T.filter(Ioe))}}return p}}function Ioe(e){return e.length>1}function joe(e,t){return((e=e.x)[0]<0?e[1]-Ut-Te:Ut-e[1])-((t=t.x)[0]<0?t[1]-Ut-Te:Ut-t[1])}const _z=RP(function(){return!0},Hoe,Yoe,[-He,-Ut]);function Hoe(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?He:-He,u=We(a-t);We(u-He)<Te?(e.point(t,n=(n+s)/2>0?Ut:-Ut),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&u>=He&&(We(t-i)<Te&&(t-=i*Te),We(a-o)<Te&&(a-=o*Te),n=Goe(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Goe(e,t,n,i){var r,a,s=Ce(e-n);return We(s)>Te?Od((Ce(t)*(a=ke(i))*Ce(n)-Ce(i)*(r=ke(t))*Ce(e))/(r*a*s)):(t+i)/2}function Yoe(e,t,n,i){var r;if(e==null)r=n*Ut,i.point(-He,r),i.point(0,r),i.point(He,r),i.point(He,0),i.point(He,-r),i.point(0,-r),i.point(-He,-r),i.point(-He,0),i.point(-He,r);else if(We(e[0]-t[0])>Te){var a=e[0]<t[0]?He:-He;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function Xoe(e){var t=ke(e),n=2*Ie,i=t>0,r=We(t)>Te;function a(d,h,p,y){qoe(y,e,n,p,d,h)}function s(d,h){return ke(d)*ke(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,$=s(S,_),T=i?$?0:f(S,_):$?f(S+(S<0?He:-He),_):0;if(!h&&(v=y=$)&&d.lineStart(),$!==y&&(A=u(h,w),(!A||F1(h,A)||F1(w,A))&&(w[2]=1)),$!==y)b=0,$?(d.lineStart(),A=u(w,h),d.point(A[0],A[1])):(A=u(h,w),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^$){var k;!(T&p)&&(k=u(w,h,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}$&&(!h||!F1(h,w))&&d.point(w[0],w[1]),h=w,y=$,p=T},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function u(d,h,p){var y=Lu(d),v=Lu(h),b=[1,0,0],S=Kf(y,v),_=Km(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var $=t*_/A,T=-t*w/A,k=Kf(b,S),M=Jm(b,$),D=Jm(S,T);T_(M,D);var N=k,B=Km(M,N),F=Km(N,N),G=B*B-F*(Km(M,M)-1);if(!(G<0)){var I=gi(G),U=Jm(N,(-B-I)/F);if(T_(U,M),U=Ly(U),!p)return U;var z=d[0],R=h[0],q=d[1],X=h[1],Q;R<z&&(Q=z,z=R,R=Q);var ae=R-z,xe=We(ae-He)<Te,he=xe||ae<Te;if(!xe&&X<q&&(Q=q,q=X,X=Q),he?xe?q+X>0^U[1]<(We(U[0]-z)<Te?q:X):q<=U[1]&&U[1]<=X:ae>He^(z<=U[0]&&U[0]<=R)){var ye=Jm(N,(-B+I)/F);return T_(ye,M),[U,Ly(ye)]}}}function f(d,h){var p=i?e:He-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return RP(s,o,a,i?[0,-e]:[-He,e-He])}function Voe(e,t,n,i,r,a){var s=e[0],o=e[1],u=t[0],f=t[1],d=0,h=1,p=u-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var Eg=1e9,t1=-Eg;function NP(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||u(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return We(f[0]-e)<Te?d>0?0:3:We(f[0]-n)<Te?d>0?2:1:We(f[1]-t)<Te?d>0?1:0:d>0?3:2}function o(f,d){return u(f.x,d.x)}function u(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=OP(),p,y,v,b,S,_,w,A,$,T,k,M={point:D,lineStart:G,lineEnd:I,polygonStart:B,polygonEnd:F};function D(z,R){r(z,R)&&d.point(z,R)}function N(){for(var z=0,R=0,q=y.length;R<q;++R)for(var X=y[R],Q=1,ae=X.length,xe=X[0],he,ye,Re=xe[0],Me=xe[1];Q<ae;++Q)he=Re,ye=Me,xe=X[Q],Re=xe[0],Me=xe[1],ye<=i?Me>i&&(Re-he)*(i-ye)>(Me-ye)*(e-he)&&++z:Me<=i&&(Re-he)*(i-ye)<(Me-ye)*(e-he)&&--z;return z}function B(){d=h,p=[],y=[],k=!0}function F(){var z=N(),R=k&&z,q=(p=w7(p)).length;(R||q)&&(f.polygonStart(),R&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),q&&DP(p,o,z,a,f),f.polygonEnd()),d=f,p=y=v=null}function G(){M.point=U,y&&y.push(v=[]),T=!0,$=!1,w=A=NaN}function I(){p&&(U(b,S),_&&$&&h.rejoin(),p.push(h.result())),M.point=D,$&&d.lineEnd()}function U(z,R){var q=r(z,R);if(y&&v.push([z,R]),T)b=z,S=R,_=q,T=!1,q&&(d.lineStart(),d.point(z,R));else if(q&&$)d.point(z,R);else{var X=[w=Math.max(t1,Math.min(Eg,w)),A=Math.max(t1,Math.min(Eg,A))],Q=[z=Math.max(t1,Math.min(Eg,z)),R=Math.max(t1,Math.min(Eg,R))];Voe(X,Q,e,t,n,i)?($||(d.lineStart(),d.point(X[0],X[1])),d.point(Q[0],Q[1]),q||d.lineEnd(),k=!1):q&&(d.lineStart(),d.point(z,R),k=!1)}w=z,A=R,$=q}return M}}function wz(e,t,n){var i=Ji(e,t-Te,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function Az(e,t,n){var i=Ji(e,t-Te,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function Woe(){var e,t,n,i,r,a,s,o,u=10,f=u,d=90,h=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return Ji(Zm(i/d)*d,n,d).map(v).concat(Ji(Zm(o/h)*h,s,h).map(b)).concat(Ji(Zm(t/u)*u,e,u).filter(function(A){return We(A%d)>Te}).map(p)).concat(Ji(Zm(a/f)*f,r,f).filter(function(A){return We(A%h)>Te}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(S)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],_):[d,h]},_.stepMinor=function(A){return arguments.length?(u=+A[0],f=+A[1],_):[u,f]},_.precision=function(A){return arguments.length?(S=+A,p=wz(a,r,90),y=Az(t,e,S),v=wz(o,s,90),b=Az(i,n,S),_):S},_.extentMajor([[-180,-90+Te],[180,90-Te]]).extentMinor([[-180,-80-Te],[180,80+Te]])}const lp=e=>e;var k_=new fi,RA=new fi,zP,FP,NA,zA,Rs={point:Dn,lineStart:Dn,lineEnd:Dn,polygonStart:function(){Rs.lineStart=Qoe,Rs.lineEnd=Koe},polygonEnd:function(){Rs.lineStart=Rs.lineEnd=Rs.point=Dn,k_.add(We(RA)),RA=new fi},result:function(){var e=k_/2;return k_=new fi,e}};function Qoe(){Rs.point=Zoe}function Zoe(e,t){Rs.point=LP,zP=NA=e,FP=zA=t}function LP(e,t){RA.add(zA*e-NA*t),NA=e,zA=t}function Koe(){LP(zP,FP)}var Jf=1/0,Yy=Jf,up=-Jf,Xy=up,Vy={point:Joe,lineStart:Dn,lineEnd:Dn,polygonStart:Dn,polygonEnd:Dn,result:function(){var e=[[Jf,Yy],[up,Xy]];return up=Xy=-(Yy=Jf=1/0),e}};function Joe(e,t){e<Jf&&(Jf=e),e>up&&(up=e),t<Yy&&(Yy=t),t>Xy&&(Xy=t)}var FA=0,LA=0,_g=0,Wy=0,Qy=0,wf=0,BA=0,UA=0,wg=0,BP,UP,Da,Ra,Er={point:Bu,lineStart:$z,lineEnd:Cz,polygonStart:function(){Er.lineStart=nle,Er.lineEnd=ile},polygonEnd:function(){Er.point=Bu,Er.lineStart=$z,Er.lineEnd=Cz},result:function(){var e=wg?[BA/wg,UA/wg]:wf?[Wy/wf,Qy/wf]:_g?[FA/_g,LA/_g]:[NaN,NaN];return FA=LA=_g=Wy=Qy=wf=BA=UA=wg=0,e}};function Bu(e,t){FA+=e,LA+=t,++_g}function $z(){Er.point=ele}function ele(e,t){Er.point=tle,Bu(Da=e,Ra=t)}function tle(e,t){var n=e-Da,i=t-Ra,r=gi(n*n+i*i);Wy+=r*(Da+e)/2,Qy+=r*(Ra+t)/2,wf+=r,Bu(Da=e,Ra=t)}function Cz(){Er.point=Bu}function nle(){Er.point=rle}function ile(){qP(BP,UP)}function rle(e,t){Er.point=qP,Bu(BP=Da=e,UP=Ra=t)}function qP(e,t){var n=e-Da,i=t-Ra,r=gi(n*n+i*i);Wy+=r*(Da+e)/2,Qy+=r*(Ra+t)/2,wf+=r,r=Ra*e-Da*t,BA+=r*(Da+e),UA+=r*(Ra+t),wg+=r*3,Bu(Da=e,Ra=t)}function PP(e){this._context=e}PP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,hi);break}}},result:Dn};var qA=new fi,O_,IP,jP,Ag,$g,cp={point:Dn,lineStart:function(){cp.point=ale},lineEnd:function(){O_&&HP(IP,jP),cp.point=Dn},polygonStart:function(){O_=!0},polygonEnd:function(){O_=null},result:function(){var e=+qA;return qA=new fi,e}};function ale(e,t){cp.point=HP,IP=Ag=e,jP=$g=t}function HP(e,t){Ag-=e,$g-=t,qA.add(gi(Ag*Ag+$g*$g)),Ag=e,$g=t}let Tz,Zy,Mz,kz;class Oz{constructor(t){this._append=t==null?GP:sle(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Mz||this._append!==Zy){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Mz=i,Zy=this._append,kz=this._,this._=r}this._+=kz;break}}}result(){const t=this._;return this._="",t.length?t:null}}function GP(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function sle(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return GP;if(t!==Tz){const n=10**t;Tz=t,Zy=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return Zy}function YP(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Ds(o,r(a))),a.result()}return s.area=function(o){return Ds(o,r(Rs)),Rs.result()},s.measure=function(o){return Ds(o,r(cp)),cp.result()},s.bounds=function(o){return Ds(o,r(Vy)),Vy.result()},s.centroid=function(o){return Ds(o,r(Er)),Er.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,lp):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new Oz(n)):new PP(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const u=Math.floor(o);if(!(u>=0))throw new RangeError(`invalid digits: ${o}`);n=u}return t===null&&(a=new Oz(n)),s},s.projection(e).digits(n).context(t)}function Db(e){return function(t){var n=new PA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function PA(){}PA.prototype={constructor:PA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function NT(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ds(n,e.stream(Vy)),t(Vy.result()),i!=null&&e.clipExtent(i),e}function Rb(e,t,n){return NT(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,u=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,u])},n)}function zT(e,t,n){return Rb(e,[[0,0],t],n)}function FT(e,t,n){return NT(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function LT(e,t,n){return NT(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var Dz=16,ole=ke(30*Ie);function Rz(e,t){return+t?ule(e,t):lle(e)}function lle(e){return Db({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ule(e,t){function n(i,r,a,s,o,u,f,d,h,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var $=s+p,T=o+y,k=u+v,M=gi($*$+T*T+k*k),D=Di(k/=M),N=We(We(k)-1)<Te||We(a-h)<Te?(a+h)/2:Rr(T,$),B=e(N,D),F=B[0],G=B[1],I=F-i,U=G-r,z=w*I-_*U;(z*z/A>t||We((_*I+w*U)/A-.5)>.3||s*p+o*y+u*v<ole)&&(n(i,r,a,s,o,u,F,G,N,$/=M,T/=M,k,b,S),S.point(F,G),n(F,G,N,$,T,k,f,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,u,f,d,h,p,y,v,b,S={point:_,lineStart:w,lineEnd:$,polygonStart:function(){i.polygonStart(),S.lineStart=T},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(D,N){D=e(D,N),i.point(D[0],D[1])}function w(){h=NaN,S.point=A,i.lineStart()}function A(D,N){var B=Lu([D,N]),F=e(D,N);n(h,p,d,y,v,b,h=F[0],p=F[1],d=D,y=B[0],v=B[1],b=B[2],Dz,i),i.point(h,p)}function $(){S.point=_,i.lineEnd()}function T(){w(),S.point=k,S.lineEnd=M}function k(D,N){A(r=D,N),a=h,s=p,o=y,u=v,f=b,S.point=A}function M(){n(h,p,d,y,v,b,a,s,r,o,u,f,Dz,i),S.lineEnd=$,$()}return S}}var cle=Db({point:function(e,t){this.stream.point(e*Ie,t*Ie)}});function fle(e){return Db({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function dle(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function Nz(e,t,n,i,r,a){if(!a)return dle(e,t,n,i,r);var s=ke(a),o=Ce(a),u=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[u*b-f*S+t,n-f*b-u*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ts(e){return XP(function(){return e})()}function XP(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,u=0,f=0,d,h=0,p=1,y=1,v=null,b=_z,S=null,_,w,A,$=lp,T=.5,k,M,D,N,B;function F(z){return D(z[0]*Ie,z[1]*Ie)}function G(z){return z=D.invert(z[0],z[1]),z&&[z[0]*Ht,z[1]*Ht]}F.stream=function(z){return N&&B===z?N:N=cle(fle(d)(b(k($(B=z)))))},F.preclip=function(z){return arguments.length?(b=z,v=void 0,U()):b},F.postclip=function(z){return arguments.length?($=z,S=_=w=A=null,U()):$},F.clipAngle=function(z){return arguments.length?(b=+z?Xoe(v=z*Ie):(v=null,_z),U()):v*Ht},F.clipExtent=function(z){return arguments.length?($=z==null?(S=_=w=A=null,lp):NP(S=+z[0][0],_=+z[0][1],w=+z[1][0],A=+z[1][1]),U()):S==null?null:[[S,_],[w,A]]},F.scale=function(z){return arguments.length?(n=+z,I()):n},F.translate=function(z){return arguments.length?(i=+z[0],r=+z[1],I()):[i,r]},F.center=function(z){return arguments.length?(a=z[0]%360*Ie,s=z[1]%360*Ie,I()):[a*Ht,s*Ht]},F.rotate=function(z){return arguments.length?(o=z[0]%360*Ie,u=z[1]%360*Ie,f=z.length>2?z[2]%360*Ie:0,I()):[o*Ht,u*Ht,f*Ht]},F.angle=function(z){return arguments.length?(h=z%360*Ie,I()):h*Ht},F.reflectX=function(z){return arguments.length?(p=z?-1:1,I()):p<0},F.reflectY=function(z){return arguments.length?(y=z?-1:1,I()):y<0},F.precision=function(z){return arguments.length?(k=Rz(M,T=z*z),U()):gi(T)},F.fitExtent=function(z,R){return Rb(F,z,R)},F.fitSize=function(z,R){return zT(F,z,R)},F.fitWidth=function(z,R){return FT(F,z,R)},F.fitHeight=function(z,R){return LT(F,z,R)};function I(){var z=Nz(n,0,0,p,y,h).apply(null,t(a,s)),R=Nz(n,i-z[0],r-z[1],p,y,h);return d=kP(o,u,f),M=OA(t,R),D=OA(d,M),k=Rz(M,T),U()}function U(){return N=B=null,F}return function(){return t=e.apply(this,arguments),F.invert=t.invert&&G,I()}}function BT(e){var t=0,n=He/3,i=XP(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*Ie,n=a[1]*Ie):[t*Ht,n*Ht]},r}function hle(e){var t=ke(e);function n(i,r){return[i*t,Ce(r)/t]}return n.invert=function(i,r){return[i/t,Di(r*t)]},n}function gle(e,t){var n=Ce(e),i=(n+Ce(t))/2;if(We(i)<Te)return hle(e);var r=1+n*(2*i-n),a=gi(r)/i;function s(o,u){var f=gi(r-2*i*Ce(u))/i;return[f*Ce(o*=i),a-f*ke(o)]}return s.invert=function(o,u){var f=a-u,d=Rr(o,We(f))*wr(f);return f*i<0&&(d-=He*wr(o)*wr(f)),[d/i,Di((r-(o*o+f*f)*i*i)/(2*i))]},s}function Ky(){return BT(gle).scale(155.424).center([0,33.6442])}function VP(){return Ky().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function ple(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function mle(){var e,t,n=VP(),i,r=Ky().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=Ky().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,u,f={point:function(p,y){u=[p,y]}};function d(p){var y=p[0],v=p[1];return u=null,i.point(y,v),u||(a.point(y,v),u)||(o.point(y,v),u)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=ple([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Te,b+.12*y+Te],[v-.214*y-Te,b+.234*y-Te]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Te,b+.166*y+Te],[v-.115*y-Te,b+.234*y-Te]]).stream(f),h()},d.fitExtent=function(p,y){return Rb(d,p,y)},d.fitSize=function(p,y){return zT(d,p,y)},d.fitWidth=function(p,y){return FT(d,p,y)},d.fitHeight=function(p,y){return LT(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function WP(e){return function(t,n){var i=ke(t),r=ke(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Ce(t),a*Ce(n)]}}function Zp(e){return function(t,n){var i=gi(t*t+n*n),r=e(i),a=Ce(r),s=ke(r);return[Rr(t*a,i*s),Di(i&&n*a/i)]}}var QP=WP(function(e){return gi(2/(1+e))});QP.invert=Zp(function(e){return 2*Di(e/2)});function yle(){return ts(QP).scale(124.75).clipAngle(180-.001)}var ZP=WP(function(e){return(e=bP(e))&&e/Ce(e)});ZP.invert=Zp(function(e){return e});function vle(){return ts(ZP).scale(79.4188).clipAngle(180-.001)}function Nb(e,t){return[e,Ry(DT((Ut+t)/2))]}Nb.invert=function(e,t){return[e,2*Od(vP(t))-Ut]};function ble(){return KP(Nb).scale(961/hi)}function KP(e){var t=ts(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,u,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=u=f=null:(s=+h[0][0],o=+h[0][1],u=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[u,f]]};function d(){var h=He*i(),p=t(Uoe(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Nb?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,u),f]]:[[s,Math.max(p[1]-h,o)],[u,Math.min(p[1]+h,f)]])}return d()}function n1(e){return DT((Ut+e)/2)}function xle(e,t){var n=ke(e),i=e===t?Ce(e):Ry(n/ke(t))/Ry(n1(t)/n1(e)),r=n*C_(n1(e),i)/i;if(!i)return Nb;function a(s,o){r>0?o<-Ut+Te&&(o=-Ut+Te):o>Ut-Te&&(o=Ut-Te);var u=r/C_(n1(o),i);return[u*Ce(i*s),r-u*ke(i*s)]}return a.invert=function(s,o){var u=r-o,f=wr(i)*gi(s*s+u*u),d=Rr(s,We(u))*wr(u);return u*i<0&&(d-=He*wr(s)*wr(u)),[d/i,2*Od(C_(r/f,1/i))-Ut]},a}function Sle(){return BT(xle).scale(109.5).parallels([30,30])}function Jy(e,t){return[e,t]}Jy.invert=Jy;function Ele(){return ts(Jy).scale(152.63)}function _le(e,t){var n=ke(e),i=e===t?Ce(e):(n-ke(t))/(t-e),r=n/i+e;if(We(i)<Te)return Jy;function a(s,o){var u=r-o,f=i*s;return[u*Ce(f),r-u*ke(f)]}return a.invert=function(s,o){var u=r-o,f=Rr(s,We(u))*wr(u);return u*i<0&&(f-=He*wr(s)*wr(u)),[f/i,r-wr(i)*gi(s*s+u*u)]},a}function wle(){return BT(_le).scale(131.154).center([0,13.9389])}var qg=1.340264,Pg=-.081106,Ig=893e-6,jg=.003796,ev=gi(3)/2,Ale=12;function JP(e,t){var n=Di(ev*Ce(t)),i=n*n,r=i*i*i;return[e*ke(n)/(ev*(qg+3*Pg*i+r*(7*Ig+9*jg*i))),n*(qg+Pg*i+r*(Ig+jg*i))]}JP.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,u;a<Ale&&(o=n*(qg+Pg*i+r*(Ig+jg*i))-t,u=qg+3*Pg*i+r*(7*Ig+9*jg*i),n-=s=o/u,i=n*n,r=i*i*i,!(We(s)<Oy));++a);return[ev*e*(qg+3*Pg*i+r*(7*Ig+9*jg*i))/ke(n),Di(Ce(n)/ev)]};function $le(){return ts(JP).scale(177.158)}function eI(e,t){var n=ke(t),i=ke(e)*n;return[n*Ce(e)/i,Ce(t)/i]}eI.invert=Zp(Od);function Cle(){return ts(eI).scale(144.049).clipAngle(60)}function Tle(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,u=null,f,d,h,p=1,y=1,v=Db({point:function($,T){var k=A([$,T]);this.stream.point(k[0],k[1])}}),b=lp,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A($){var T=$[0]*p,k=$[1]*y;if(a){var M=k*s-T*o;T=T*s+k*o,k=M}return[T+t,k+n]}return A.invert=function($){var T=$[0]-t,k=$[1]-n;if(a){var M=k*s+T*o;T=T*s-k*o,k=M}return[T/p,k/y]},A.stream=function($){return S&&_===$?S:S=v(b(_=$))},A.postclip=function($){return arguments.length?(b=$,u=f=d=h=null,w()):b},A.clipExtent=function($){return arguments.length?(b=$==null?(u=f=d=h=null,lp):NP(u=+$[0][0],f=+$[0][1],d=+$[1][0],h=+$[1][1]),w()):u==null?null:[[u,f],[d,h]]},A.scale=function($){return arguments.length?(e=+$,w()):e},A.translate=function($){return arguments.length?(t=+$[0],n=+$[1],w()):[t,n]},A.angle=function($){return arguments.length?(a=$%360*Ie,o=Ce(a),s=ke(a),w()):a*Ht},A.reflectX=function($){return arguments.length?(i=$?-1:1,w()):i<0},A.reflectY=function($){return arguments.length?(r=$?-1:1,w()):r<0},A.fitExtent=function($,T){return Rb(A,$,T)},A.fitSize=function($,T){return zT(A,$,T)},A.fitWidth=function($,T){return FT(A,$,T)},A.fitHeight=function($,T){return LT(A,$,T)},A}function tI(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}tI.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(We(r)>Te&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Mle(){return ts(tI).scale(175.295)}function nI(e,t){return[ke(t)*Ce(e),Ce(t)]}nI.invert=Zp(Di);function kle(){return ts(nI).scale(249.5).clipAngle(90+Te)}function iI(e,t){var n=ke(t),i=1+ke(e)*n;return[n*Ce(e)/i,Ce(t)/i]}iI.invert=Zp(function(e){return 2*Od(e)});function Ole(){return ts(iI).scale(250).clipAngle(142)}function rI(e,t){return[Ry(DT((Ut+t)/2)),-e]}rI.invert=function(e,t){return[-t,2*Od(vP(e))-Ut]};function Dle(){var e=KP(rI),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Rle=Math.abs,IA=Math.cos,tv=Math.sin,Nle=1e-6,aI=Math.PI,jA=aI/2,zz=zle(2);function Fz(e){return e>1?jA:e<-1?-jA:Math.asin(e)}function zle(e){return e>0?Math.sqrt(e):0}function Fle(e,t){var n=e*tv(t),i=30,r;do t-=r=(t+tv(t)-n)/(1+IA(t));while(Rle(r)>Nle&&--i>0);return t/2}function Lle(e,t,n){function i(r,a){return[e*r*IA(a=Fle(n,a)),t*tv(a)]}return i.invert=function(r,a){return a=Fz(a/t),[r/(e*IA(a)),Fz((2*a+tv(2*a))/n)]},i}var Ble=Lle(zz/jA,zz,aI);function Ule(){return ts(Ble).scale(169.529)}const qle=YP(),HA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Ple(e,t){return function n(){const i=t();return i.type=e,i.path=YP().projection(i),i.copy=i.copy||function(){const r=n();return HA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},SU(i)}}function UT(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(nv[e]=Ple(e,t),this):nv[e]||null}function sI(e){return e&&e.path||qle}const nv={albers:VP,albersusa:mle,azimuthalequalarea:yle,azimuthalequidistant:vle,conicconformal:Sle,conicequalarea:Ky,conicequidistant:wle,equalEarth:$le,equirectangular:Ele,gnomonic:Cle,identity:Tle,mercator:ble,mollweide:Ule,naturalEarth1:Mle,orthographic:kle,stereographic:Ole,transversemercator:Dle};for(const e in nv)UT(e,nv[e]);function Ile(){}const $s=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function oI(){var e=1,t=1,n=o;function i(u,f){return f.map(d=>r(u,d))}function r(u,f){var d=[],h=[];return a(u,f,p=>{n(p,u,f),jle(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Hle((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(u,f,d){var h=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=u[0]>=f,$s[S<<1].forEach(A);++y<e-1;)b=S,S=u[y+1]>=f,$s[b|S<<1].forEach(A);for($s[S<<0].forEach(A);++v<t-1;){for(y=-1,S=u[v*e+e]>=f,_=u[v*e]>=f,$s[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=u[v*e+e+y+1]>=f,w=_,_=u[v*e+y+1]>=f,$s[b|S<<1|_<<2|w<<3].forEach(A);$s[S|_<<3].forEach(A)}for(y=-1,_=u[v*e]>=f,$s[_<<2].forEach(A);++y<e-1;)w=_,_=u[v*e+y+1]>=f,$s[_<<2|w<<3].forEach(A);$s[_<<3].forEach(A);function A($){var T=[$[0][0]+y,$[0][1]+v],k=[$[1][0]+y,$[1][1]+v],M=s(T),D=s(k),N,B;(N=p[M])?(B=h[D])?(delete p[N.end],delete h[B.start],N===B?(N.ring.push(k),d(N.ring)):h[N.start]=p[B.end]={start:N.start,end:B.end,ring:N.ring.concat(B.ring)}):(delete p[N.end],N.ring.push(k),p[N.end=D]=N):(N=h[D])?(B=p[M])?(delete h[N.start],delete p[B.end],N===B?(N.ring.push(k),d(N.ring)):h[B.start]=p[N.end]={start:B.start,end:N.end,ring:B.ring.concat(N.ring)}):(delete h[N.start],N.ring.unshift(T),h[N.start=M]=N):h[M]=p[D]={start:M,end:D,ring:[T,k]}}}function s(u){return u[0]*2+u[1]*(e+1)*4}function o(u,f,d){u.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],h[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],h[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(u){if(!arguments.length)return[e,t];var f=Math.floor(u[0]),d=Math.floor(u[1]);return f>=0&&d>=0||J("invalid size"),e=f,t=d,i},i.smooth=function(u){return arguments.length?(n=u?o:Ile,i):n===o},i}function jle(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Hle(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Gle(e,t[n]))return r;return 0}function Gle(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var u=e[a],f=u[0],d=u[1],h=e[o],p=h[0],y=h[1];if(Yle(u,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function Yle(e,t,n){var i;return Xle(e,t,n)&&Vle(e[i=+(e[0]===t[0])],n[i],t[i])}function Xle(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function Vle(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function lI(e,t,n){return function(i){var r=Ia(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,u=t?ll(a,s,e):o/(e+1);return Ji(a+u,s,u)}}function qT(e){Z.call(this,null,e)}qT.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};fe(qT,Z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Kn,a=oI().smooth(e.smooth!==!1),s=e.thresholds||Wle(i,r,e),o=e.as===null?null:e.as||"contour",u=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,te(s)?s:s(d.values));Qle(h,d,f,e),h.forEach(p=>{u.push(Zv(f,st(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Wle(e,t,n){const i=lI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>_u(t(r).values)))}function Qle(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(qe(r)&&(r=r(n,i)),qe(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(nt(r)?r:r[0])||1,o=(nt(r)?r:r[1])||1,u=a&&a[0]||0,f=a&&a[1]||0;e.forEach(uI(t,s,o,u,f))}function uI(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function u(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(u),h}}function Lz(e,t,n){const i=e>=0?e:DC(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function D_(e){return qe(e)?e:Jn(+e)}function cI(){var e=u=>u[0],t=u=>u[1],n=bd,i=[-1,-1],r=960,a=500,s=2;function o(u,f){const d=Lz(i[0],u,e)>>s,h=Lz(i[1],u,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;u.forEach($=>{const T=p+(+e($)>>s),k=y+(+t($)>>s);T>=0&&T<v&&k>=0&&k<b&&(S[T+k*v]+=+n($))}),d>0&&h>0?(uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h),uf(v,b,S,_,d),cf(v,b,_,S,h)):d>0?(uf(v,b,S,_,d),uf(v,b,_,S,d),uf(v,b,S,_,d),w=_):h>0&&(cf(v,b,S,_,h),cf(v,b,_,S,h),cf(v,b,S,_,h),w=_);const A=f?Math.pow(2,-2*s):1/A7(w);for(let $=0,T=v*b;$<T;++$)w[$]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(u){return arguments.length?(e=D_(u),o):e},o.y=function(u){return arguments.length?(t=D_(u),o):t},o.weight=function(u){return arguments.length?(n=D_(u),o):n},o.size=function(u){if(!arguments.length)return[r,a];var f=+u[0],d=+u[1];return f>=0&&d>=0||J("invalid size"),r=f,a=d,o},o.cellSize=function(u){return arguments.length?((u=+u)>=1||J("invalid cell size"),s=Math.floor(Math.log(u)/Math.LN2),o):1<<s},o.bandwidth=function(u){return arguments.length?(u=ge(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&J("invalid bandwidth"),i=u,o):i},o}function uf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,u=0;o<e+r;++o)o<e&&(u+=n[o+s*e]),o>=r&&(o>=a&&(u-=n[o-a+s*e]),i[o-r+s*e]=u/Math.min(o+1,e-1+a-o,a))}function cf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,u=0;o<t+r;++o)o<t&&(u+=n[s+o*e]),o>=r&&(o>=a&&(u-=n[s+(o-a)*e]),i[s+(o-r)*e]=u/Math.min(o+1,t-1+a-o,a))}function PT(e){Z.call(this,null,e)}PT.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const Zle=["x","y","weight","size","cellSize","bandwidth"];function fI(e,t){return Zle.forEach(n=>t[n]!=null?e[n](t[n]):0),e}fe(PT,Z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=Kle(i,e.groupby),a=(e.groupby||[]).map(qt),s=fI(cI(),e),o=e.as||"grid",u=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return u=r.map(d=>st(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function Kle(e,t){var n=[],i=d=>d(o),r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function IT(e){Z.call(this,null,e)}IT.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};fe(IT,Z,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=oI().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||lI(e.count||10,e.nice,!!r),s=e.size,o,u;return r||(r=t.materialize(t.SOURCE).source,o=fI(cI(),e)(r,!0),u=uI(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=te(a)?a:a(r),r=i.size(s)(r,a),u&&r.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(st),n}});const GA="Feature",jT="FeatureCollection",Jle="MultiPoint";function HT(e){Z.call(this,null,e)}HT.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};fe(HT,Z,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&Kn,u=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Vn(o))||a&&t.modified(Vn(a))||s&&t.modified(Vn(s)),(!this.value||f)&&(u=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(u,d=>n.push(o(d))),a&&s&&(t.visit(u,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:GA,geometry:{type:Jle,coordinates:i}})),this.value={type:jT,features:n}}});function GT(e){Z.call(this,null,e)}GT.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};fe(GT,Z,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Kn,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=sI(e.projection),n.materialize().reflow()):s=r===Kn||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=eue(i,e.pointRadius);return n.visit(s,u=>u[a]=i(r(u))),i.pointRadius(o),n.modifies(a)}});function eue(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function YT(e){Z.call(this,null,e)}YT.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};fe(YT,Z,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],u;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(u=t.modified(i.fields)||t.modified(r.fields),t.visit(u?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function XT(e){Z.call(this,null,e)}XT.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};fe(XT,Z,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=tue(sI(e.projection),e.field||Mr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function tue(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function VT(e){Z.call(this,[],e),this.generator=Woe()}VT.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};fe(VT,Z,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)qe(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(xL(n[0],r)):t.add.push(st(r)),n[0]=r,t}});function WT(e){Z.call(this,null,e)}WT.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};fe(WT,Z,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Kn,a=iue(e.opacity,e),s=nue(e.color,e),o=e.as||"image",u={$x:0,$y:0,$value:0,$max:i?_u(n.map(f=>_u(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=Ue({},f,u);i||(h.$max=_u(d.values||[])),f[o]=rue(d,h,s.dep?s:Jn(s(h)),a.dep?a:Jn(a(h)))}),t.reflow(!0).modifies(o)}});function nue(e,t){let n;return qe(e)?(n=i=>fl(e(i,t)),n.dep=dI(e)):n=Jn(fl(e||"#888")),n}function iue(e,t){let n;return qe(e)?(n=i=>e(i,t),n.dep=dI(e)):e?n=Jn(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function dI(e){if(!qe(e))return!1;const t=ia(Vn(e));return t.$x||t.$y||t.$value||t.$max}function rue(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,u=e.x2||r,f=e.y2||a,d=e.values,h=d?S=>d[S]:jo,p=rl(u-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,u-s,f-o),b=v.data;for(let S=o,_=0;S<f;++S){t.$y=S-o;for(let w=s,A=S*r;w<u;++w,_+=4){t.$x=w-s,t.$value=h(w+A);const $=n(t);b[_+0]=$.r,b[_+1]=$.g,b[_+2]=$.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function hI(e){Z.call(this,null,e),this.modified(!0)}fe(hI,Z,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=sue(e.type),HA.forEach(i=>{e[i]!=null&&Bz(n,i,e[i])})):HA.forEach(i=>{e.modified(i)&&Bz(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&aue(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function aue(e,t){const n=oue(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function sue(e){const t=UT((e||"mercator").toLowerCase());return t||J("Unrecognized projection type: "+e),t()}function Bz(e,t,n){qe(e[t])&&e[t](n)}function oue(e){return e=ge(e),e.length===1?e[0]:{type:jT,features:e.reduce((t,n)=>t.concat(lue(n)),[])}}function lue(e){return e.type===jT?e.features:ge(e).filter(t=>t!=null).map(t=>t.type===GA?t:{type:GA,geometry:t})}const uue=Object.freeze(Object.defineProperty({__proto__:null,contour:IT,geojson:HT,geopath:GT,geopoint:YT,geoshape:XT,graticule:VT,heatmap:WT,isocontour:qT,kde2d:PT,projection:hI},Symbol.toStringTag,{value:"Module"}));function cue(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,u=0,f=0;for(a=0;a<s;++a)o=n[a],u+=o.x,f+=o.y;for(u=(u/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=u,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function fue(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return gI(this.cover(t,n),t,n,e)}function gI(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,u=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(u+d)/2))?u=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=h));return r[w]=a,r[_]=s,e}function due(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),u=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<u&&(u=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(u>d||f>h)return this;for(this.cover(u,f).cover(d,h),n=0;n<i;++n)gI(this,s[n],o[n],e[n]);return this}function hue(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,u,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,u=new Array(4),u[f]=o,o=u,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function gue(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function pue(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function li(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function mue(e,t,n){var i,r=this._x0,a=this._y0,s,o,u,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new li(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(u=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+u)/2,_=(o+f)/2;p.push(new li(y[3],S,_,u,f),new li(y[2],s,_,S,f),new li(y[1],S,o,u,_),new li(y[0],s,o,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),$=w*w+A*A;if($<n){var T=Math.sqrt(n=$);r=e-T,a=t-T,d=e+T,h=t+T,i=y.data}}return i}function yue(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,u=this._x1,f=this._y1,d,h,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+u)/2))?s=p:u=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function vue(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function bue(){return this._root}function xue(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Sue(e){var t=[],n,i=this._root,r,a,s,o,u;for(i&&t.push(new li(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,u=n.y1)&&i.length){var f=(a+o)/2,d=(s+u)/2;(r=i[3])&&t.push(new li(r,f,d,o,u)),(r=i[2])&&t.push(new li(r,a,d,f,u)),(r=i[1])&&t.push(new li(r,f,s,o,d)),(r=i[0])&&t.push(new li(r,a,s,f,d))}return this}function Eue(e){var t=[],n=[],i;for(this._root&&t.push(new li(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,u=i.x1,f=i.y1,d=(s+u)/2,h=(o+f)/2;(a=r[0])&&t.push(new li(a,s,o,d,h)),(a=r[1])&&t.push(new li(a,d,o,u,h)),(a=r[2])&&t.push(new li(a,s,h,d,f)),(a=r[3])&&t.push(new li(a,d,h,u,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function _ue(e){return e[0]}function wue(e){return arguments.length?(this._x=e,this):this._x}function Aue(e){return e[1]}function $ue(e){return arguments.length?(this._y=e,this):this._y}function QT(e,t,n){var i=new ZT(t??_ue,n??Aue,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function ZT(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function Uz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var yi=QT.prototype=ZT.prototype;yi.copy=function(){var e=new ZT(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Uz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Uz(i));return e};yi.add=fue;yi.addAll=due;yi.cover=hue;yi.data=gue;yi.extent=pue;yi.find=mue;yi.remove=yue;yi.removeAll=vue;yi.root=bue;yi.size=xue;yi.visit=Sue;yi.visitAfter=Eue;yi.x=wue;yi.y=$ue;function ui(e){return function(){return e}}function Zo(e){return(e()-.5)*1e-6}function Cue(e){return e.x+e.vx}function Tue(e){return e.y+e.vy}function Mue(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=ui(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,S,_=0;_<a;++_)for(h=QT(t,Cue,Tue).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(w);function w(A,$,T,k,M){var D=A.data,N=A.r,B=b+N;if(D){if(D.index>p.index){var F=y-D.x-D.vx,G=v-D.y-D.vy,I=F*F+G*G;I<B*B&&(F===0&&(F=Zo(i),I+=F*F),G===0&&(G=Zo(i),I+=G*G),I=(B-(I=Math.sqrt(I)))/I*r,p.vx+=(F*=I)*(B=(N*=N)/(S+N)),p.vy+=(G*=I)*B,D.vx-=F*(B=1-B),D.vy-=G*B)}return}return $>y+B||k<y-B||T>v+B||M<v-B}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function u(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,u()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:ui(+f),u(),s):e},s}function kue(e){return e.index}function qz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Oue(e){var t=kue,n=h,i,r=ui(30),a,s,o,u,f,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,$,T,k,M,D,N,B;A<w;++A)$=e[A],T=$.source,k=$.target,M=k.x+k.vx-T.x-T.vx||Zo(f),D=k.y+k.vy-T.y-T.vy||Zo(f),N=Math.sqrt(M*M+D*D),N=(N-a[A])/N*S*i[A],M*=N,D*=N,k.vx-=M*(B=u[A]),k.vy-=D*B,T.vx+=M*(B=1-B),T.vy+=D*B}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map((T,k)=>[t(T,k,s),T])),$;for(S=0,o=new Array(_);S<w;++S)$=e[S],$.index=S,typeof $.source!="object"&&($.source=qz(A,$.source)),typeof $.target!="object"&&($.target=qz(A,$.target)),o[$.source.index]=(o[$.source.index]||0)+1,o[$.target.index]=(o[$.target.index]||0)+1;for(S=0,u=new Array(w);S<w;++S)$=e[S],u[S]=o[$.source.index]/(o[$.source.index]+o[$.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:ui(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:ui(+S),b(),p):r},p}var Due={value:()=>{}};function pI(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new L1(n)}function L1(e){this._=e}function Rue(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}L1.prototype=pI.prototype={constructor:L1,on:function(e,t){var n=this._,i=Rue(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Nue(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=Pz(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Pz(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new L1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Nue(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Pz(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Due,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var ed=0,Cg=0,eg=0,mI=1e3,iv,Tg,rv=0,Uu=0,zb=0,fp=typeof performance=="object"&&performance.now?performance:Date,yI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function KT(){return Uu||(yI(zue),Uu=fp.now()+zb)}function zue(){Uu=0}function av(){this._call=this._time=this._next=null}av.prototype=vI.prototype={constructor:av,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?KT():+n)+(t==null?0:+t),!this._next&&Tg!==this&&(Tg?Tg._next=this:iv=this,Tg=this),this._call=e,this._time=n,YA()},stop:function(){this._call&&(this._call=null,this._time=1/0,YA())}};function vI(e,t,n){var i=new av;return i.restart(e,t,n),i}function Fue(){KT(),++ed;for(var e=iv,t;e;)(t=Uu-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ed}function Iz(){Uu=(rv=fp.now())+zb,ed=Cg=0;try{Fue()}finally{ed=0,Bue(),Uu=0}}function Lue(){var e=fp.now(),t=e-rv;t>mI&&(zb-=t,rv=e)}function Bue(){for(var e,t=iv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:iv=n);Tg=e,YA(i)}function YA(e){if(!ed){Cg&&(Cg=clearTimeout(Cg));var t=e-Uu;t>24?(e<1/0&&(Cg=setTimeout(Iz,e-fp.now()-zb)),eg&&(eg=clearInterval(eg))):(eg||(rv=fp.now(),eg=setInterval(Lue,mI)),ed=1,yI(Iz))}}function Uue(e,t,n){var i=new av,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?KT():+o,i._restart(function u(f){f+=r,i._restart(u,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const que=1664525,Pue=1013904223,jz=4294967296;function Iue(){let e=1;return()=>(e=(que*e+Pue)%jz)/jz}function jue(e){return e.x}function Hue(e){return e.y}var Gue=10,Yue=Math.PI*(3-Math.sqrt(5));function Xue(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,u=vI(h),f=pI("tick","end"),d=Iue();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(u.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function($){$(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=Gue*Math.sqrt(.5+b),A=b*Yue;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return u.restart(h),t},stop:function(){return u.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,_){var w=0,A=e.length,$,T,k,M,D;for(_==null?_=1/0:_*=_,w=0;w<A;++w)M=e[w],$=b-M.x,T=S-M.y,k=$*$+T*T,k<_&&(D=M,_=k);return D},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function Vue(){var e,t,n,i,r=ui(-30),a,s=1,o=1/0,u=.81;function f(y){var v,b=e.length,S=QT(e,jue,Hue).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,_=0,w,A,$;if(y.length){for(w=A=$=0;$<4;++$)(b=y[$])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,$=_*_+w*w;if(A*A/u<$)return $<o&&(_===0&&(_=Zo(n),$+=_*_),w===0&&(w=Zo(n),$+=w*w),$<s&&($=Math.sqrt(s*$)),t.vx+=_*y.value*i/$,t.vy+=w*y.value*i/$),!0;if(y.length||$>=o)return;(y.data!==t||y.next)&&(_===0&&(_=Zo(n),$+=_*_),w===0&&(w=Zo(n),$+=w*w),$<s&&($=Math.sqrt(s*$)));do y.data!==t&&(A=a[y.data.index]*i/$,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:ui(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(u=y*y,f):Math.sqrt(u)},f}function Wue(e){var t=ui(.1),n,i,r;typeof e!="function"&&(e=ui(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vx+=(r[u]-d.x)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:ui(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:ui(+o),s(),a):e},a}function Que(e){var t=ui(.1),n,i,r;typeof e!="function"&&(e=ui(e==null?0:+e));function a(o){for(var u=0,f=n.length,d;u<f;++u)d=n[u],d.vy+=(r[u]-d.y)*i[u]*o}function s(){if(n){var o,u=n.length;for(i=new Array(u),r=new Array(u),o=0;o<u;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:ui(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:ui(+o),s(),a):e},a}const Hz={center:cue,collide:Mue,nbody:Vue,link:Oue,x:Wue,y:Que},Mg="forces",XA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],Zue=["static","iterations"],bI=["x","y","vx","vy"];function JT(e){Z.call(this,null,e)}JT.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:bI}]};fe(JT,Z,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(XA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&xI(n,e,0,t)):(this.value=n=Jue(t.source,e),n.on("tick",Kue(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(Zue)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,u=0,f=o.length,d;u<f;++u)if(d=o[u],!(d.name!==Mg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(bI)}});function Kue(e,t){return()=>e.touch(t).run()}function Jue(e,t){const n=Xue(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),xI(n,t,!0).on("end",()=>a=!0)}function xI(e,t,n,i){var r=ge(t.forces),a,s,o,u;for(a=0,s=XA.length;a<s;++a)o=XA[a],o!==Mg&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)u=Mg+a,o=n||t.modified(Mg,a)?tce(r[a]):i&&ece(r[a],i)?e.force(u):null,o&&e.force(u,o);for(s=e.numForces||0;a<s;++a)e.force(Mg+a,null);return e.numForces=r.length,e}function ece(e,t){var n,i;for(n in e)if(qe(i=e[n])&&t.modified(Vn(i)))return 1;return 0}function tce(e){var t,n;ve(Hz,e.force)||J("Unrecognized force: "+e.force),t=Hz[e.force]();for(n in e)qe(t[n])&&nce(t[n],e[n],e);return t}function nce(e,t,n){e(qe(t)?i=>t(i,n):t)}const ice=Object.freeze(Object.defineProperty({__proto__:null,force:JT},Symbol.toStringTag,{value:"Module"}));function rce(e,t){return e.parent===t.parent?1:2}function ace(e){return e.reduce(sce,0)/e.length}function sce(e,t){return e+t.x}function oce(e){return 1+e.reduce(lce,0)}function lce(e,t){return Math.max(e,t.y)}function uce(e){for(var t;t=e.children;)e=t[0];return e}function cce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function fce(){var e=rce,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=ace(y),p.y=oce(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var u=uce(a),f=cce(a),d=u.x-e(u,f)/2,h=f.x+e(f,u)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function dce(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function hce(){return this.eachAfter(dce)}function gce(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function pce(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function mce(e,t){for(var n=this,i=[n],r=[],a,s,o,u=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++u,this);return this}function yce(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function vce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function bce(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function xce(e){for(var t=this,n=Sce(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Sce(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Ece(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function _ce(){return Array.from(this)}function wce(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Ace(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*$ce(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function eM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Mce)):t===void 0&&(t=Tce);for(var n=new td(e),i,r=[n],a,s,o,u;i=r.pop();)if((s=t(i.data))&&(u=(s=Array.from(s)).length))for(i.children=s,o=u-1;o>=0;--o)r.push(a=s[o]=new td(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(SI)}function Cce(){return eM(this).eachBefore(kce)}function Tce(e){return e.children}function Mce(e){return Array.isArray(e)?e[1]:null}function kce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function SI(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function td(e){this.data=e,this.depth=this.height=0,this.parent=null}td.prototype=eM.prototype={constructor:td,count:hce,each:gce,eachAfter:mce,eachBefore:pce,find:yce,sum:vce,sort:bce,path:xce,ancestors:Ece,descendants:_ce,leaves:wce,links:Ace,copy:Cce,[Symbol.iterator]:$ce};function B1(e){return e==null?null:EI(e)}function EI(e){if(typeof e!="function")throw new Error;return e}function yu(){return 0}function yf(e){return function(){return e}}const Oce=1664525,Dce=1013904223,Gz=4294967296;function Rce(){let e=1;return()=>(e=(Oce*e+Dce)%Gz)/Gz}function Nce(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zce(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Fce(e,t){for(var n=0,i=(e=zce(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&_I(s,a)?++n:(s=Bce(r=Lce(r,a)),n=0);return s}function Lce(e,t){var n,i;if(R_(t,e))return[t];for(n=0;n<e.length;++n)if(i1(t,e[n])&&R_(kg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(i1(kg(e[n],e[i]),t)&&i1(kg(e[n],t),e[i])&&i1(kg(e[i],t),e[n])&&R_(wI(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function i1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function _I(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function R_(e,t){for(var n=0;n<t.length;++n)if(!_I(e,t[n]))return!1;return!0}function Bce(e){switch(e.length){case 1:return Uce(e[0]);case 2:return kg(e[0],e[1]);case 3:return wI(e[0],e[1],e[2])}}function Uce(e){return{x:e.x,y:e.y,r:e.r}}function kg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,u=a-n,f=s-i,d=o-r,h=Math.sqrt(u*u+f*f);return{x:(n+a+u/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function wI(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,u=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,S=u-a,_=h-a,w=i*i+r*r-a*a,A=w-s*s-o*o+u*u,$=w-f*f-d*d+h*h,T=y*v-p*b,k=(v*$-b*A)/(T*2)-i,M=(b*S-v*_)/T,D=(y*A-p*$)/(T*2)-r,N=(p*_-y*S)/T,B=M*M+N*N-1,F=2*(a+k*M+D*N),G=k*k+D*D-a*a,I=-(Math.abs(B)>1e-6?(F+Math.sqrt(F*F-4*B*G))/(2*B):G/F);return{x:i+k+M*I,y:r+D+N*I,r:I}}function Yz(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,u,f=i*i+s*s;f?(a=t.r+n.r,a*=a,u=e.r+n.r,u*=u,a>u?(r=(f+u-a)/(2*f),o=Math.sqrt(Math.max(0,u/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-u)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function Xz(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function Vz(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function r1(e){this._=e,this.next=null,this.previous=null}function qce(e,t){if(!(a=(e=Nce(e)).length))return 0;var n,i,r,a,s,o,u,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;Yz(i,n,r=e[2]),n=new r1(n),i=new r1(i),r=new r1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(u=3;u<a;++u){Yz(n._,i._,r=e[u]),r=new r1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(Xz(f._,r._)){i=f,n.next=i,i.previous=n,--u;continue e}h+=f._.r,f=f.next}else{if(Xz(d._,r._)){n=d,n.next=i,i.previous=n,--u;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=Vz(n);(r=r.next)!==i;)(o=Vz(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Fce(n,t),u=0;u<a;++u)n=e[u],n.x-=r.x,n.y-=r.y;return r.r}function Pce(e){return Math.sqrt(e.value)}function Ice(){var e=null,t=1,n=1,i=yu;function r(a){const s=Rce();return a.x=t/2,a.y=n/2,e?a.eachBefore(Wz(e)).eachAfter(N_(i,.5,s)).eachBefore(Qz(1)):a.eachBefore(Wz(Pce)).eachAfter(N_(yu,1,s)).eachAfter(N_(i,a.r/Math.min(t,n),s)).eachBefore(Qz(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=B1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:yf(+a),r):i},r}function Wz(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function N_(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,u;if(o)for(a=0;a<s;++a)r[a].r+=o;if(u=qce(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=u+o}}}function Qz(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function AI(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Kp(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(i-t)/e.value;++o<u;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function jce(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(AI),s}function a(s,o){return function(u){u.children&&Kp(u,u.x0,s*(u.depth+1)/o,u.x1,s*(u.depth+2)/o);var f=u.x0,d=u.y0,h=u.x1-n,p=u.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),u.x0=f,u.y0=d,u.x1=h,u.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var Hce={depth:-1},Zz={},z_={};function Gce(e){return e.id}function Yce(e){return e.parentId}function Kz(){var e=Gce,t=Yce,n;function i(r){var a=Array.from(r),s=e,o=t,u,f,d,h,p,y,v,b,S=new Map;if(n!=null){const _=a.map(($,T)=>Xce(n($,T,r))),w=_.map(Jz),A=new Set(_).add("");for(const $ of w)A.has($)||(A.add($),_.push($),w.push(Jz($)),a.push(z_));s=($,T)=>_[T],o=($,T)=>w[T]}for(d=0,u=a.length;d<u;++d)f=a[d],y=a[d]=new td(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?Zz:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<u;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===Zz)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===z_&&h.children.length===1;)h=h.children[0],--u;for(let _=a.length-1;_>=0&&(y=a[_],y.data===z_);--_)y.data=null}if(h.parent=Hce,h.eachBefore(function(_){_.depth=_.parent.depth+1,--u}).eachBefore(SI),h.parent=null,u>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=B1(r),i):e},i.parentId=function(r){return arguments.length?(t=B1(r),i):t},i.path=function(r){return arguments.length?(n=B1(r),i):n},i}function Xce(e){e=`${e}`;let t=e.length;return VA(e,t-1)&&!VA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Jz(e){let t=e.length;if(t<2)return"";for(;--t>1&&!VA(e,t););return e.slice(0,t)}function VA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function Vce(e,t){return e.parent===t.parent?1:2}function F_(e){var t=e.children;return t?t[0]:e.t}function L_(e){var t=e.children;return t?t[t.length-1]:e.t}function Wce(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function Qce(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function Zce(e,t,n){return e.a.parent===t.parent?e.a:n}function U1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}U1.prototype=Object.create(td.prototype);function Kce(e){for(var t=new U1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new U1(a[s],s)),r.parent=n;return(t.parent=new U1(null,0)).children=[t],t}function Jce(){var e=Vce,t=1,n=1,i=null;function r(f){var d=Kce(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(u);else{var h=f,p=f,y=f;f.eachBefore(function(w){w.x<h.x&&(h=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){Qce(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,$;v=L_(v),p=F_(p),v&&p;)b=F_(b),y=L_(y),y.a=f,$=v.z+w-p.z-S+e(v._,p._),$>0&&(Wce(Zce(v,f,h),f,$),S+=$,_+=$),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!L_(y)&&(y.t=v,y.m+=w-_),p&&!F_(b)&&(b.t=p,b.m+=S-A,h=f)}return h}function u(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Fb(e,t,n,i,r){for(var a=e.children,s,o=-1,u=a.length,f=e.value&&(r-n)/e.value;++o<u;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var $I=(1+Math.sqrt(5))/2;function CI(e,t,n,i,r,a){for(var s=[],o=t.children,u,f,d=0,h=0,p=o.length,y,v,b=t.value,S,_,w,A,$,T,k;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(_=w=S,T=Math.max(v/y,y/v)/(b*e),k=S*S*T,$=Math.max(w/k,k/_);h<p;++h){if(S+=f=o[h].value,f<_&&(_=f),f>w&&(w=f),k=S*S*T,A=Math.max(w/k,k/_),A>$){S-=f;break}$=A}s.push(u={value:S,dice:y<v,children:o.slice(d,h)}),u.dice?Kp(u,n,i,r,b?i+=v*S/b:a):Fb(u,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const TI=(function e(t){function n(i,r,a,s,o){CI(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})($I);function efe(){var e=TI,t=!1,n=1,i=1,r=[0],a=yu,s=yu,o=yu,u=yu,f=yu;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(AI),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=o(p)-y,_-=u(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=EI(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:yf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:yf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:yf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(u=typeof p=="function"?p:yf(+p),d):u},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:yf(+p),d):f},d}function tfe(e,t,n,i,r){var a=e.children,s,o=a.length,u,f=new Array(o+1);for(f[0]=u=s=0;s<o;++s)f[s+1]=u+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,_){if(h>=p-1){var w=a[h];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[h],$=y/2+A,T=h+1,k=p-1;T<k;){var M=T+k>>>1;f[M]<$?T=M+1:k=M}$-f[T-1]<f[T]-$&&h+1<T&&--T;var D=f[T]-A,N=y-D;if(S-v>_-b){var B=y?(v*N+S*D)/y:S;d(h,T,D,v,b,B,_),d(T,p,N,B,b,S,_)}else{var F=y?(b*N+_*D)/y:_;d(h,T,D,v,b,S,F),d(T,p,N,v,F,S,_)}}}function nfe(e,t,n,i,r){(e.depth&1?Fb:Kp)(e,t,n,i,r)}const ife=(function e(t){function n(i,r,a,s,o){if((u=i._squarify)&&u.ratio===t)for(var u,f,d,h,p=-1,y,v=u.length,b=i.value;++p<v;){for(f=u[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?Kp(f,r,a,s,b?a+=(o-a)*f.value/b:o):Fb(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=u=CI(t,i,r,a,s,o),u.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})($I);function WA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function tM(e){Z.call(this,null,e)}tM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const rfe=e=>e.values;fe(tM,Z,{transform(e,t){t.source||J("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Qv(s.data)&&r.rem.push(s.data)}),this.value=a=eM({values:ge(e.keys).reduce((s,o)=>(s.key(o),s),afe()).entries(r.source)},rfe),n&&a.each(s=>{s.children&&(s=st(s.data),r.add.push(s),r.source.push(s))}),WA(a,$e,$e)),r.source.root=a,r}});function afe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],u={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=u[h])?y.push(p):u[h]=[p];for(h in u)f[h]=n(u[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function to(e){Z.call(this,null,e)}const sfe=(e,t)=>e.parent===t.parent?1:2;fe(to,Z,{transform(e,t){(!t.source||!t.source.root)&&J(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(ic(e.sort,s=>s.data)),ofe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?sfe:bd);try{this.value=n(r)}catch(s){J(s)}return r.each(s=>lfe(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function ofe(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function lfe(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const QA=["x","y","r","depth","children"];function nM(e){to.call(this,e)}nM.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:QA.length,default:QA}]};fe(nM,to,{layout:Ice,params:["radius","size","padding"],fields:QA});const ZA=["x0","y0","x1","y1","depth","children"];function iM(e){to.call(this,e)}iM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ZA.length,default:ZA}]};fe(iM,to,{layout:jce,params:["size","round","padding"],fields:ZA});function rM(e){Z.call(this,null,e)}rM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};fe(rM,Z,{transform(e,t){t.source||J("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?WA(Kz().id(e.key).parentId(e.parentKey)(r.source),e.key,kr):WA(Kz()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const e8={tidy:Jce,cluster:fce},KA=["x","y","depth","children"];function aM(e){to.call(this,e)}aM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:KA.length,default:KA}]};fe(aM,to,{layout(e){const t=e||"tidy";if(ve(e8,t))return e8[t]();J("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:KA});function sM(e){Z.call(this,[],e)}sM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};fe(sM,Z,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||J("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[$e(s)]=1),i.each(s=>{const o=s.data,u=s.parent&&s.parent.data;u&&a[$e(o)]&&a[$e(u)]&&r.add.push(st({source:u,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[$e(s)]=1),n.forEach(s=>{(a[$e(s.source)]||a[$e(s.target)])&&r.mod.push(s)})),r}});const t8={binary:tfe,dice:Kp,slice:Fb,slicedice:nfe,squarify:TI,resquarify:ife},JA=["x0","y0","x1","y1","depth","children"];function oM(e){to.call(this,e)}oM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:JA.length,default:JA}]};fe(oM,to,{layout(){const e=efe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{ve(t8,t)?e.tile(t8[t]):J("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:JA});const ufe=Object.freeze(Object.defineProperty({__proto__:null,nest:tM,pack:nM,partition:iM,stratify:rM,tree:aM,treelinks:sM,treemap:oM},Symbol.toStringTag,{value:"Module"})),B_=4278190080;function cfe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function ffe(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,u=rl(a,s).getContext("2d"),f=rl(a,s).getContext("2d"),d=o&&rl(a,s).getContext("2d");n.forEach(D=>q1(u,D,!1)),q1(f,t,!1),o&&q1(d,t,!0);const h=U_(u,a,s),p=U_(f,a,s),y=o&&U_(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,_,w,A,$,T,k,M;for(_=0;_<s;++_)for(S=0;S<a;++S)$=_*a+S,T=h[$]&B_,M=p[$]&B_,k=o&&y[$]&B_,(T||k||M)&&(w=e(S),A=e(_),!r&&(T||M)&&v.set(w,A),o&&(T||k)&&b.set(w,A));return[v,b]}function U_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function q1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>q1(e,a.items,n))}):or[i].draw(e,{items:n?t.map(dfe):t})}function dfe(e){const t=Zv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Cs=5,ti=31,dp=32,Po=new Uint32Array(dp+1),Vr=new Uint32Array(dp+1);Vr[0]=0;Po[0]=~Vr[0];for(let e=1;e<=dp;++e)Vr[e]=Vr[e-1]<<1|1,Po[e]=~Vr[e];function hfe(e,t){const n=new Uint32Array(~~((e*t+dp)/dp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Cs]&1<<(o&ti)},set:(a,s)=>{const o=s*e+a;i(o>>>Cs,1<<(o&ti))},clear:(a,s)=>{const o=s*e+a;r(o>>>Cs,~(1<<(o&ti)))},getRange:(a,s,o,u)=>{let f=u,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>Cs,y=h>>>Cs,p===y){if(n[p]&Po[d&ti]&Vr[(h&ti)+1])return!0}else{if(n[p]&Po[d&ti]||n[y]&Vr[(h&ti)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>Cs,p=d>>>Cs,h===p)i(h,Po[f&ti]&Vr[(d&ti)+1]);else for(i(h,Po[f&ti]),i(p,Vr[(d&ti)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,u)=>{let f,d,h,p,y;for(;s<=u;++s)if(f=s*e+a,d=s*e+o,h=f>>>Cs,p=d>>>Cs,h===p)r(h,Vr[f&ti]|Po[(d&ti)+1]);else for(r(h,Vr[f&ti]),r(p,Po[(d&ti)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,u)=>a<0||s<0||u>=t||o>=e}}function gfe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>hfe(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function pfe(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,u=o.length,f=s.datum.fontSize,d=tr.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,_,w;for(let A=0;A<u;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=h&&(h=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function sv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Ko(e,t,n,i,r,a,s,o){const u=r*a/(i*2),f=e(t-u),d=e(t+u),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function mfe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function u(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let S=h,_=a,w;if(!sv(v,b,p,y,r,a)&&!Ko(e,v,b,y,p,S,s,o)&&!Ko(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,Ko(e,v,b,y,p,w,s,o)?_=w:S=w;if(S>h)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=tr.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,$,T,k,M,D,N,B,F,G,I,U,z,R,q,X;for(let Q=0;Q<h;++Q){for(w=d[Q].x,$=d[Q].y,A=d[Q].x2===void 0?w:d[Q].x2,T=d[Q].y2===void 0?$:d[Q].y2,w>A&&(X=w,w=A,A=X),$>T&&(X=$,$=T,T=X),B=e(w),G=e(A),F=~~((B+G)/2),I=e($),z=e(T),U=~~((I+z)/2),D=F;D>=B;--D)for(N=U;N>=I;--N)q=u(D,N,v,y,p),q&&([f.x,f.y,v,b]=q);for(D=F;D<=G;++D)for(N=U;N<=z;++N)q=u(D,N,v,y,p),q&&([f.x,f.y,v,b]=q);!b&&!n&&(R=Math.abs(A-w+T-$),k=(w+A)/2,M=($+T)/2,R>=_&&!sv(k,M,y,p,r,a)&&!Ko(e,k,M,p,y,p,s,null)&&(_=R,f.x=k,f.y=M,S=!0))}return b||S?(k=y/2,M=p/2,s.setRange(e(f.x-k),e(f.y-M),e(f.x+k),e(f.y+M)),f.align="center",f.baseline="middle",!0):!1}}const yfe=[-1,-1,1,1],vfe=[-1,1,-1,1];function bfe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=tr.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,$,T,k,M,D,N,B,F,G,I,U;for(let z=0;z<h;++z){for(A=d[z].x,T=d[z].y,$=d[z].x2===void 0?A:d[z].x2,k=d[z].y2===void 0?T:d[z].y2,v.push([e((A+$)/2),e((T+k)/2)]);v.length;)if([N,B]=v.pop(),!(s.get(N,B)||o.get(N,B)||u.get(N,B))){u.set(N,B);for(let R=0;R<4;++R)M=N+yfe[R],D=B+vfe[R],u.outOfBounds(M,D,M,D)||v.push([M,D]);if(M=e.invert(N),D=e.invert(B),F=b,G=a,!sv(M,D,y,p,r,a)&&!Ko(e,M,D,p,y,F,s,o)&&!Ko(e,M,D,p,y,p,s,null)){for(;G-F>=1;)I=(F+G)/2,Ko(e,M,D,p,y,I,s,o)?G=I:F=I;F>b&&(f.x=M,f.y=D,b=F,S=!0)}}!S&&!n&&(U=Math.abs($-A+k-T),M=(A+$)/2,D=(T+k)/2,U>=w&&!sv(M,D,y,p,r,a)&&!Ko(e,M,D,p,y,p,s,null)&&(w=U,f.x=M,f.y=D,_=!0))}return S||_?(M=y/2,D=p/2,s.setRange(e(f.x-M),e(f.y-D),e(f.x+M),e(f.y+D)),f.align="center",f.baseline="middle",!0):!1}}const xfe=["right","center","left"],Sfe=["bottom","middle","top"];function Efe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],u=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,$,T,k,M,D,N,B,F;for(let G=0;G<u;++G){if(y=(n[G]&3)-1,v=(n[G]>>>2&3)-1,b=y===0&&v===0||i[G]<0,S=y&&v?Math.SQRT1_2:1,_=i[G]<0?-1:1,w=d[1+y]+i[G]*y*S,M=d[4+v]+_*h*v/2+i[G]*v*S,$=M-h/2,T=M+h/2,D=e(w),B=e($),F=e(T),!p)if(n8(D,D,B,F,s,o,w,w,$,T,d,b))p=tr.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,D=e(w),N=e(A),n8(D,N,B,F,s,o,w,A,$,T,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?T:$:M,f.align=xfe[y*_+1],f.baseline=Sfe[v*_+1],s.setRange(D,B,N,F),!0}return!1}}function n8(e,t,n,i,r,a,s,o,u,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const q_=0,P_=4,I_=8,j_=0,H_=1,G_=2,_fe={"top-left":q_+j_,top:q_+H_,"top-right":q_+G_,left:P_+j_,middle:P_+H_,right:P_+G_,"bottom-left":I_+j_,bottom:I_+H_,"bottom-right":I_+G_},wfe={naive:pfe,"reduced-search":mfe,floodfill:bfe};function Afe(e,t,n,i,r,a,s,o,u,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=$fe(i,h),y=Cfe(r,h),v=Tfe(e[0].datum),b=v==="group"&&e[0].datum.items[u].marktype,S=b==="area",_=Mfe(v,b,o,u),w=f===null||f===1/0,A=S&&d==="naive";let $=-1,T=-1;const k=e.map(B=>{const F=w?tr.width(B,B.text):void 0;return $=Math.max($,F),T=Math.max(T,B.fontSize),{datum:B,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(B),textWidth:F}});f=f===null||f===1/0?Math.max($,T)+Math.max(...i):f;const M=gfe(t[0],t[1],f);let D;if(!A){n&&k.sort((G,I)=>n(G.datum,I.datum));let B=!1;for(let G=0;G<y.length&&!B;++G)B=y[G]===5||p[G]<0;const F=(v&&s||S)&&e.map(G=>G.datum);D=a.length||F?ffe(M,F||[],a,B,S):cfe(M,s&&k)}const N=S?wfe[d](M,D,s,u):Efe(M,D,y,p);return k.forEach(B=>B.opacity=+N(B)),k}function $fe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Cfe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=_fe[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Tfe(e){return e&&e.mark&&e.mark.marktype}function Mfe(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const e$=["x","y","opacity","align","baseline"],MI=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function lM(e){Z.call(this,null,e)}lM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:MI},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:e$.length,default:e$}]};fe(lM,Z,{transform(e,t){function n(a){const s=e[a];return qe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&J("Size parameter should be specified as a [width, height] array.");const r=e.as||e$;return Afe(t.materialize(t.SOURCE).source||[],e.size,e.sort,ge(e.offset==null?1:e.offset),ge(e.anchor||MI),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const kfe=Object.freeze(Object.defineProperty({__proto__:null,label:lM},Symbol.toStringTag,{value:"Module"}));function kI(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,u,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],u=t.map(i),f=r[u],f||(r[u]=f=[],f.dims=u,n.push(f)),f.push(o);return n}function uM(e){Z.call(this,null,e)}uM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};fe(uM,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=kI(i,e.groupby),a=(e.groupby||[]).map(qt),s=a.length,o=e.as||[qt(e.x),qt(e.y)],u=[];r.forEach(f=>{BL(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],u.push(st(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const t$={constant:HC,linear:GC,log:NL,exp:zL,pow:FL,quad:YC,poly:LL},Ofe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function cM(e){Z.call(this,null,e)}cM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(t$)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};fe(cM,Z,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=kI(i,e.groupby),a=(e.groupby||[]).map(qt),s=e.method||"linear",o=e.order==null?3:e.order,u=Ofe(s,o),f=e.as||[qt(e.x),qt(e.y)],d=t$[s],h=[];let p=e.extent;ve(t$,s)||J("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(st({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||Ia(y,e.x),_=w=>{const A={};for(let $=0;$<a.length;++$)A[a[$]]=y.dims[$];A[f[0]]=w[0],A[f[1]]=w[1],h.push(st(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):rb(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const Dfe=Object.freeze(Object.defineProperty({__proto__:null,loess:uM,regression:cM},Symbol.toStringTag,{value:"Module"})),Is=11102230246251565e-32,Pn=134217729,Rfe=(3+8*Is)*Is;function Y_(e,t,n,i,r){let a,s,o,u,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h]):(s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,u=s-a,o=a-(s-u)+(f-u),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,u=s-a,o=a-(s-u)+(d-u),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function Nfe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Jp(e){return new Float64Array(e)}const zfe=(3+16*Is)*Is,Ffe=(2+12*Is)*Is,Lfe=(9+64*Is)*Is*Is,ff=Jp(4),i8=Jp(8),r8=Jp(12),a8=Jp(16),ni=Jp(4);function Bfe(e,t,n,i,r,a,s){let o,u,f,d,h,p,y,v,b,S,_,w,A,$,T,k,M,D;const N=e-r,B=n-r,F=t-a,G=i-a;$=N*G,p=Pn*N,y=p-(p-N),v=N-y,p=Pn*G,b=p-(p-G),S=G-b,T=v*S-($-y*b-v*b-y*S),k=F*B,p=Pn*F,y=p-(p-F),v=F-y,p=Pn*B,b=p-(p-B),S=B-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ff[0]=T-(_+h)+(h-M),w=$+_,h=w-$,A=$-(w-h)+(_-h),_=A-k,h=A-_,ff[1]=A-(_+h)+(h-k),D=w+_,h=D-w,ff[2]=w-(D-h)+(_-h),ff[3]=D;let I=Nfe(4,ff),U=Ffe*s;if(I>=U||-I>=U||(h=e-N,o=e-(N+h)+(h-r),h=n-B,f=n-(B+h)+(h-r),h=t-F,u=t-(F+h)+(h-a),h=i-G,d=i-(G+h)+(h-a),o===0&&u===0&&f===0&&d===0)||(U=Lfe*s+Rfe*Math.abs(I),I+=N*d+G*o-(F*f+B*u),I>=U||-I>=U))return I;$=o*G,p=Pn*o,y=p-(p-o),v=o-y,p=Pn*G,b=p-(p-G),S=G-b,T=v*S-($-y*b-v*b-y*S),k=u*B,p=Pn*u,y=p-(p-u),v=u-y,p=Pn*B,b=p-(p-B),S=B-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ni[0]=T-(_+h)+(h-M),w=$+_,h=w-$,A=$-(w-h)+(_-h),_=A-k,h=A-_,ni[1]=A-(_+h)+(h-k),D=w+_,h=D-w,ni[2]=w-(D-h)+(_-h),ni[3]=D;const z=Y_(4,ff,4,ni,i8);$=N*d,p=Pn*N,y=p-(p-N),v=N-y,p=Pn*d,b=p-(p-d),S=d-b,T=v*S-($-y*b-v*b-y*S),k=F*f,p=Pn*F,y=p-(p-F),v=F-y,p=Pn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ni[0]=T-(_+h)+(h-M),w=$+_,h=w-$,A=$-(w-h)+(_-h),_=A-k,h=A-_,ni[1]=A-(_+h)+(h-k),D=w+_,h=D-w,ni[2]=w-(D-h)+(_-h),ni[3]=D;const R=Y_(z,i8,4,ni,r8);$=o*d,p=Pn*o,y=p-(p-o),v=o-y,p=Pn*d,b=p-(p-d),S=d-b,T=v*S-($-y*b-v*b-y*S),k=u*f,p=Pn*u,y=p-(p-u),v=u-y,p=Pn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ni[0]=T-(_+h)+(h-M),w=$+_,h=w-$,A=$-(w-h)+(_-h),_=A-k,h=A-_,ni[1]=A-(_+h)+(h-k),D=w+_,h=D-w,ni[2]=w-(D-h)+(_-h),ni[3]=D;const q=Y_(R,r8,4,ni,a8);return a8[q-1]}function a1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),u=s-o,f=Math.abs(s+o);return Math.abs(u)>=zfe*f?u:-Bfe(e,t,n,i,r,a,f)}const s8=Math.pow(2,-52),s1=new Uint32Array(512);class ov{static from(t,n=jfe,i=Hfe){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new ov(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,u=1/0,f=-1/0,d=-1/0;for(let N=0;N<s;N++){const B=t[2*N],F=t[2*N+1];B<o&&(o=B),F<u&&(u=F),B>f&&(f=B),F>d&&(d=F),this._ids[N]=N}const h=(o+f)/2,p=(u+d)/2;let y,v,b;for(let N=0,B=1/0;N<s;N++){const F=X_(h,p,t[2*N],t[2*N+1]);F<B&&(y=N,B=F)}const S=t[2*y],_=t[2*y+1];for(let N=0,B=1/0;N<s;N++){if(N===y)continue;const F=X_(S,_,t[2*N],t[2*N+1]);F<B&&F>0&&(v=N,B=F)}let w=t[2*v],A=t[2*v+1],$=1/0;for(let N=0;N<s;N++){if(N===y||N===v)continue;const B=Pfe(S,_,w,A,t[2*N],t[2*N+1]);B<$&&(b=N,$=B)}let T=t[2*b],k=t[2*b+1];if($===1/0){for(let F=0;F<s;F++)this._dists[F]=t[2*F]-t[0]||t[2*F+1]-t[1];Af(this._ids,this._dists,0,s-1);const N=new Uint32Array(s);let B=0;for(let F=0,G=-1/0;F<s;F++){const I=this._ids[F],U=this._dists[I];U>G&&(N[B++]=I,G=U)}this.hull=N.subarray(0,B),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(a1(S,_,w,A,T,k)<0){const N=v,B=w,F=A;v=b,w=T,A=k,b=N,T=B,k=F}const M=Ife(S,_,w,A,T,k);this._cx=M.x,this._cy=M.y;for(let N=0;N<s;N++)this._dists[N]=X_(t[2*N],t[2*N+1],M.x,M.y);Af(this._ids,this._dists,0,s-1),this._hullStart=y;let D=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(T,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let N=0,B,F;N<this._ids.length;N++){const G=this._ids[N],I=t[2*G],U=t[2*G+1];if(N>0&&Math.abs(I-B)<=s8&&Math.abs(U-F)<=s8||(B=I,F=U,G===y||G===v||G===b))continue;let z=0;for(let ae=0,xe=this._hashKey(I,U);ae<this._hashSize&&(z=a[(xe+ae)%this._hashSize],!(z!==-1&&z!==i[z]));ae++);z=n[z];let R=z,q;for(;q=i[R],a1(I,U,t[2*R],t[2*R+1],t[2*q],t[2*q+1])>=0;)if(R=q,R===z){R=-1;break}if(R===-1)continue;let X=this._addTriangle(R,G,i[R],-1,-1,r[R]);r[G]=this._legalize(X+2),r[R]=X,D++;let Q=i[R];for(;q=i[Q],a1(I,U,t[2*Q],t[2*Q+1],t[2*q],t[2*q+1])<0;)X=this._addTriangle(Q,G,q,r[G],-1,r[Q]),r[G]=this._legalize(X+2),i[Q]=Q,D--,Q=q;if(R===z)for(;q=n[R],a1(I,U,t[2*q],t[2*q+1],t[2*R],t[2*R+1])<0;)X=this._addTriangle(q,G,R,-1,r[R],r[q]),this._legalize(X+2),r[q]=X,i[R]=R,D--,R=q;this._hullStart=n[G]=R,i[R]=n[Q]=G,i[G]=Q,a[this._hashKey(I,U)]=G,a[this._hashKey(t[2*R],t[2*R+1])]=R}this.hull=new Uint32Array(D);for(let N=0,B=this._hullStart;N<D;N++)this.hull[N]=B,B=i[B];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Ufe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],u=t-t%3;if(s=u+(t+2)%3,o===-1){if(a===0)break;t=s1[--a];continue}const f=o-o%3,d=u+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(qfe(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[h];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,h);const w=f+(o+1)%3;a<s1.length&&(s1[a++]=w)}else{if(a===0)break;t=s1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Ufe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function X_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function qfe(e,t,n,i,r,a,s,o){const u=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=u*u+f*f,b=d*d+h*h,S=p*p+y*y;return u*(h*S-b*y)-f*(d*S-b*p)+v*(d*y-h*p)<0}function Pfe(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=(f*d-o*h)*p,v=(s*h-u*d)*p;return y*y+v*v}function Ife(e,t,n,i,r,a){const s=n-e,o=i-t,u=r-e,f=a-t,d=s*s+o*o,h=u*u+f*f,p=.5/(s*f-o*u),y=e+(f*d-o*h)*p,v=t+(s*h-u*d)*p;return{x:y,y:v}}function Af(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;tg(e,r,a),t[e[n]]>t[e[i]]&&tg(e,n,i),t[e[a]]>t[e[i]]&&tg(e,a,i),t[e[n]]>t[e[a]]&&tg(e,n,a);const o=e[a],u=t[o];for(;;){do a++;while(t[e[a]]<u);do s--;while(t[e[s]]>u);if(s<a)break;tg(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(Af(e,t,a,i),Af(e,t,n,s-1)):(Af(e,t,n,s-1),Af(e,t,a,i))}}function tg(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function jfe(e){return e[0]}function Hfe(e){return e[1]}const o8=1e-6;class Su{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>o8||Math.abs(this._y1-a)>o8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class n${constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Gfe=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const $=i[b]*2,T=i[b+1]*2,k=i[b+2]*2,M=t[$],D=t[$+1],N=t[T],B=t[T+1],F=t[k],G=t[k+1],I=N-M,U=B-D,z=F-M,R=G-D,q=(I*R-U*z)*2;if(Math.abs(q)<1e-9){if(a===void 0){a=s=0;for(const Q of n)a+=t[Q*2],s+=t[Q*2+1];a/=n.length,s/=n.length}const X=1e9*Math.sign((a-M)*R-(s-D)*z);w=(M+F)/2-X*R,A=(D+G)/2+X*z}else{const X=1/q,Q=I*I+U*U,ae=z*z+R*R;w=M+(R*Q-U*ae)*X,A=D+(I*ae-z*Q)*X}o[S]=w,o[S+1]=A}let u=n[n.length-1],f,d=u*4,h,p=t[2*u],y,v=t[2*u+1];r.fill(0);for(let b=0;b<n.length;++b)u=n[b],f=d,h=p,y=v,d=u*4,p=t[2*u],v=t[2*u+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Su:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let u,f=a[a.length-1];for(let d=0;d<a.length;++d){u=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=u*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Su:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Su:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new n$;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),u=this._regioncode(i,r);o===0&&u===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,u))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,u=r.length;o<u;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+u-2)%u]&&n[(a+3)%s]===r[(o+u-1)%u]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let u=s;do{const f=Math.floor(u/3);if(o.push(n[f*2],n[f*2+1]),u=u%3===2?u-2:u+1,a[u]!==t)break;u=r[u]}while(u!==s&&u!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],u=n[i-1],f,d=this._regioncode(o,u),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=u,o=n[y],u=n[y+1],f=d,d=this._regioncode(o,u),f===0&&d===0)h=p,p=0,r?r.push(o,u):r=[o,u];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,o,u,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(o,u,a,s,d,f))===null)continue;[_,w,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(_,w),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let u,f,d=a||s;d&8?(u=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(u=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),u=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),u=this.xmin),a?(t=u,n=f,a=this._regioncode(t,n)):(i=u,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),u;if((u=this._project(o[0],o[1],i,r))&&o.unshift(u[0],u[1]),(u=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(u[0],u[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,u;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(u=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(u=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,u=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,u=n+(a=s)*r)}return[o,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Yfe=2*Math.PI,df=Math.pow;function Xfe(e){return e[0]}function Vfe(e){return e[1]}function Wfe(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function Qfe(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class fM{static from(t,n=Xfe,i=Vfe,r){return new fM("length"in t?Zfe(t,n,i,r):Float64Array.from(Kfe(t,n,i,r)))}constructor(t){this._delaunator=new ov(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Wfe(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const u=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*u],n[2*u+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=Qfe(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new ov(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let u=0,f=i.length;u<f;++u){const d=a[u%3===2?u-2:u+1];(i[u]===-1||s[d]===-1)&&(s[d]=u)}for(let u=0,f=r.length;u<f;++u)o[r[u]]=u;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Gfe(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const u=n[t];if(u===-1)return;let f=u,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==u)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:u,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=df(n-f[t*2],2)+df(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=u[y];const b=df(n-f[v*2],2)+df(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,u[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&df(n-f[y*2],2)+df(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Su:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const u=r[s];if(u<s)continue;const f=a[s]*2,d=a[u]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Su:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],u=r[a+1];t.moveTo(o+n,u),t.arc(o,u,n,0,Yfe)}return i&&i.value()}renderHull(t){const n=t==null?t=new Su:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const u=2*i[o];t.lineTo(r[u],r[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new n$;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Su:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,u=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new n$;return this.renderTriangle(t,n),n.value()}}function Zfe(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*Kfe(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function dM(e){Z.call(this,null,e)}dM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const Jfe=[-1e5,-1e5,1e5,1e5];fe(dM,Z,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:Jfe;const a=this.value=fM.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const u=a.cellPolygon(s);i[s][n]=u&&!tde(u)?ede(u):null}return t.reflow(e.modified()).modifies(n)}});function ede(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function tde(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const nde=Object.freeze(Object.defineProperty({__proto__:null,voronoi:dM},Symbol.toStringTag,{value:"Module"}));var V_=Math.PI/180,Og=64,P1=2048;function ide(){var e=[256,256],t,n,i,r,a,s,o,u=OI,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(rl()),b=ude((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],$=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:o(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,M)=>M.size-k.size);++w<_;){var T=$[w];T.x=e[0]*(d()+.5)>>1,T.y=e[1]*(d()+.5)>>1,rde(v,T,$,w),T.hasText&&y(b,T,S)&&(A.push(T),S?sde(S,T):S=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Og<<5)/b,v.height=P1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),$=u(e),T=d()<.5?1:-1,k=-T,M,D,N;(M=$(k+=T))&&(D=~~M[0],N=~~M[1],!(Math.min(Math.abs(D),Math.abs(N))>=A));)if(b.x=_+D,b.y=w+N,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!ade(b,v,e[0]))&&(!S||ode(b,S))){for(var B=b.sprite,F=b.width>>5,G=e[0]>>5,I=b.x-(F<<4),U=I&127,z=32-U,R=b.y1-b.y0,q=(b.y+b.y0)*G+(I>>5),X,Q=0;Q<R;Q++){X=0;for(var ae=0;ae<=F;ae++)v[q+ae]|=X<<z|(ae<F?(X=B[Q*F+ae])>>>U:0);q+=G}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=tu(v),h):n},h.fontStyle=function(v){return arguments.length?(r=tu(v),h):r},h.fontWeight=function(v){return arguments.length?(a=tu(v),h):a},h.rotate=function(v){return arguments.length?(s=tu(v),h):s},h.text=function(v){return arguments.length?(t=tu(v),h):t},h.spiral=function(v){return arguments.length?(u=cde[v]||v,h):u},h.fontSize=function(v){return arguments.length?(i=tu(v),h):i},h.padding=function(v){return arguments.length?(o=tu(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function rde(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Og<<5)/a,P1/a);var s=0,o=0,u=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*V_),S=Math.cos(t.rotate*V_),_=d*S,w=d*b,A=p*S,$=p*b;d=Math.max(Math.abs(_+$),Math.abs(_-$))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>u&&(u=p),s+d>=Og<<5&&(s=0,o+=u,u=0),o+p>=P1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*V_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var T=r.getImageData(0,0,(Og<<5)/a,P1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)k[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var M=0,D=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=h*v+(y>>5),B=T[(o+v)*(Og<<5)+(s+y)<<2]?1<<31-y%32:0;k[N]|=B,M|=B}M?D=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+D,t.sprite=k.slice(0,(t.y1-t.y0)*h)}}}function ade(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,u=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<u;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function sde(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function ode(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function OI(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function lde(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function ude(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function tu(e){return typeof e=="function"?e:function(){return e}}var cde={archimedean:OI,rectangular:lde};const DI=["x","y","font","fontSize","fontStyle","fontWeight","angle"],fde=["text","font","rotate","fontSize","fontStyle","fontWeight"];function hM(e){Z.call(this,ide(),e)}hM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:DI}]};fe(hM,Z,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&J("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return qe(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||fde.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||DI;let o=e.fontSize||14,u;if(qe(o)?u=e.fontSizeRange:o=Jn(o),u){const v=o,b=rt("sqrt")().domain(Ia(r,v)).range(u);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Dr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const dde=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:hM},Symbol.toStringTag,{value:"Module"})),hde=e=>new Uint8Array(e),gde=e=>new Uint16Array(e),Hg=e=>new Uint32Array(e);function pde(){let e=8,t=[],n=Hg(0),i=o1(0,e),r=o1(0,e);return{data:()=>t,seen:()=>n=mde(n,t.length),add(a){for(let s=0,o=t.length,u=a.length,f;s<u;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,u=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)u[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],u[p]=d,d._index=p++),i[h]=0;return t=u,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=o1(a,e,i),r=o1(a,e))}}}function mde(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function o1(e,t,n){const i=(t<257?hde:t<65537?gde:Hg)(e);return n&&i.set(n),i}function l8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),u=r.index,f=o[0],d=o[1],h=u.length;let p;for(p=0;p<f;++p)a[u[p]]|=i;for(p=d;p<h;++p)a[u[p]]|=i;return s}}}function u8(){let e=Hg(0),t=[],n=0;function i(o,u,f){if(!u.length)return[];const d=n,h=u.length,p=Hg(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(u[S]),p[S]=S;if(y=yde(y,p),d)v=t,b=e,t=Array(d+h),e=Hg(d+h),vde(f,v,b,d,y,p,h,t,e);else{if(f>0)for(S=0;S<h;++S)p[S]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,u){const f=n;let d,h,p;for(h=0;!u[e[h]]&&h<f;++h);for(p=h;h<f;++h)u[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let u=0,f=n;u<f;++u)e[u]=o[e[u]]}function s(o,u){let f;return u?f=u.length:(u=t,f=n),[EZ(u,o[0],0,f),ol(u,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function yde(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),AZ(e,t)}function vde(e,t,n,i,r,a,s,o,u){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],u[h]=n[f++]):(o[h]=r[d],u[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],u[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],u[h]=a[d]+e}function gM(e){Z.call(this,pde(),e),this._indices=null,this._dims=null}gM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};fe(gM,Z,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,u,f;for(;o<s;++o)u=n[o].fname,f=r[u]||(r[u]=u8()),a.push(l8(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,u=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,$,T,k,M;if(f.set(u),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for($={},w=t.mod,T=0,k=w.length;T<k;++T)$[w[T]._index]=1;for(T=0;T<y;++T)M=i[T],(!s[T]||e.modified("fields",T)||t.modified(M.fields))&&(_=M.fname,(b=v[_])||(a[_]=S=u8(),v[_]=b=S.insert(M,t.source,0)),s[T]=l8(S,T,r[T]).onAdd(b,u));for(T=0,k=o.data().length;T<k;++T)A[T]||(f[T]!==u[T]?h.push(T):$[T]&&u[T]!==d&&p.push(T));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,u={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<h;++y)v=o[y].fname,b=u[v]||(u[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,u,f;for(o=0,u=s.length;o<u;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),u={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,u[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,u);return this.reindex(t,p,u),u},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,u,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(u=f,++o);if(o===1)o=i[u].one,this.incrementOne(i[u],r[u],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),u=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(h<y)for(S=h,_=Math.min(y,p);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(h>y)for(S=y,_=Math.min(h,v);S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(h,v),_=p;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=u[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),u=e.bisect(t),f=u[0],d=u[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function pM(e){Z.call(this,null,e)}pM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};fe(pM,Z,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),u=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^u[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^u[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const bde=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:gM,resolvefilter:pM},Symbol.toStringTag,{value:"Module"})),xde="RawCode",qu="Literal",Sde="Property",Ede="Identifier",_de="ArrayExpression",wde="BinaryExpression",RI="CallExpression",Ade="ConditionalExpression",$de="LogicalExpression",Cde="MemberExpression",Tde="ObjectExpression",Mde="UnaryExpression";function da(e){this.type=e}da.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=kde(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function kde(e){switch(e.type){case _de:return e.elements;case wde:case $de:return[e.left,e.right];case RI:return[e.callee].concat(e.arguments);case Ade:return[e.test,e.consequent,e.alternate];case Cde:return[e.object,e.property];case Tde:return e.properties;case Sde:return[e.key,e.value];case Mde:return[e.argument];case Ede:case qu:case xde:default:return[]}}var ns,Ee,K,Qn,dt,Lb=1,e0=2,Pu=3,$l=4,Bb=5,oc=6,Ai=7,t0=8,Ode=9;ns={};ns[Lb]="Boolean";ns[e0]="<end>";ns[Pu]="Identifier";ns[$l]="Keyword";ns[Bb]="Null";ns[oc]="Numeric";ns[Ai]="Punctuator";ns[t0]="String";ns[Ode]="RegularExpression";var Dde="ArrayExpression",Rde="BinaryExpression",Nde="CallExpression",zde="ConditionalExpression",NI="Identifier",Fde="Literal",Lde="LogicalExpression",Bde="MemberExpression",Ude="ObjectExpression",qde="Property",Pde="UnaryExpression",vn="Unexpected token %0",Ide="Unexpected number",jde="Unexpected string",Hde="Unexpected identifier",Gde="Unexpected reserved word",Yde="Unexpected end of input",i$="Invalid regular expression",W_="Invalid regular expression: missing /",zI="Octal literals are not allowed in strict mode.",Xde="Duplicate data property in object literal not allowed in strict mode",Rn="ILLEGAL",hp="Disabled.",Vde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Wde=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Ub(e,t){if(!e)throw new Error("ASSERT: "+t)}function Os(e){return e>=48&&e<=57}function mM(e){return"0123456789abcdefABCDEF".includes(e)}function Gg(e){return"01234567".includes(e)}function Qde(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function gp(e){return e===10||e===13||e===8232||e===8233}function n0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Vde.test(String.fromCharCode(e))}function lv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Wde.test(String.fromCharCode(e))}const Zde={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function FI(){for(;K<Qn;){const e=Ee.charCodeAt(K);if(Qde(e)||gp(e))++K;else break}}function r$(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)K<Qn&&mM(Ee[K])?(i=Ee[K++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):tt({},vn,Rn);return String.fromCharCode(r)}function Kde(){var e,t,n,i;for(e=Ee[K],t=0,e==="}"&&tt({},vn,Rn);K<Qn&&(e=Ee[K++],!!mM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&tt({},vn,Rn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function LI(){var e,t;for(e=Ee.charCodeAt(K++),t=String.fromCharCode(e),e===92&&(Ee.charCodeAt(K)!==117&&tt({},vn,Rn),++K,e=r$("u"),(!e||e==="\\"||!n0(e.charCodeAt(0)))&&tt({},vn,Rn),t=e);K<Qn&&(e=Ee.charCodeAt(K),!!lv(e));)++K,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Ee.charCodeAt(K)!==117&&tt({},vn,Rn),++K,e=r$("u"),(!e||e==="\\"||!lv(e.charCodeAt(0)))&&tt({},vn,Rn),t+=e);return t}function Jde(){var e,t;for(e=K++;K<Qn;){if(t=Ee.charCodeAt(K),t===92)return K=e,LI();if(lv(t))++K;else break}return Ee.slice(e,K)}function ehe(){var e,t,n;return e=K,t=Ee.charCodeAt(K)===92?LI():Jde(),t.length===1?n=Pu:Zde.hasOwnProperty(t)?n=$l:t==="null"?n=Bb:t==="true"||t==="false"?n=Lb:n=Pu,{type:n,value:t,start:e,end:K}}function Q_(){var e=K,t=Ee.charCodeAt(K),n,i=Ee[K],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++K,{type:Ai,value:String.fromCharCode(t),start:e,end:K};default:if(n=Ee.charCodeAt(K+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return K+=2,{type:Ai,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:K};case 33:case 61:return K+=2,Ee.charCodeAt(K)===61&&++K,{type:Ai,value:Ee.slice(e,K),start:e,end:K}}}if(s=Ee.substr(K,4),s===">>>=")return K+=4,{type:Ai,value:s,start:e,end:K};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return K+=3,{type:Ai,value:a,start:e,end:K};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return K+=2,{type:Ai,value:r,start:e,end:K};if(r==="//"&&tt({},vn,Rn),"<>=!+-*%&|^/".includes(i))return++K,{type:Ai,value:i,start:e,end:K};tt({},vn,Rn)}function the(e){let t="";for(;K<Qn&&mM(Ee[K]);)t+=Ee[K++];return t.length===0&&tt({},vn,Rn),n0(Ee.charCodeAt(K))&&tt({},vn,Rn),{type:oc,value:parseInt("0x"+t,16),start:e,end:K}}function nhe(e){let t="0"+Ee[K++];for(;K<Qn&&Gg(Ee[K]);)t+=Ee[K++];return(n0(Ee.charCodeAt(K))||Os(Ee.charCodeAt(K)))&&tt({},vn,Rn),{type:oc,value:parseInt(t,8),octal:!0,start:e,end:K}}function c8(){var e,t,n;if(n=Ee[K],Ub(Os(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=K,e="",n!=="."){if(e=Ee[K++],n=Ee[K],e==="0"){if(n==="x"||n==="X")return++K,the(t);if(Gg(n))return nhe(t);n&&Os(n.charCodeAt(0))&&tt({},vn,Rn)}for(;Os(Ee.charCodeAt(K));)e+=Ee[K++];n=Ee[K]}if(n==="."){for(e+=Ee[K++];Os(Ee.charCodeAt(K));)e+=Ee[K++];n=Ee[K]}if(n==="e"||n==="E")if(e+=Ee[K++],n=Ee[K],(n==="+"||n==="-")&&(e+=Ee[K++]),Os(Ee.charCodeAt(K)))for(;Os(Ee.charCodeAt(K));)e+=Ee[K++];else tt({},vn,Rn);return n0(Ee.charCodeAt(K))&&tt({},vn,Rn),{type:oc,value:parseFloat(e),start:t,end:K}}function ihe(){var e="",t,n,i,r,a=!1;for(t=Ee[K],Ub(t==="'"||t==='"',"String literal must starts with a quote"),n=K,++K;K<Qn;)if(i=Ee[K++],i===t){t="";break}else if(i==="\\")if(i=Ee[K++],!i||!gp(i.charCodeAt(0)))switch(i){case"u":case"x":Ee[K]==="{"?(++K,e+=Kde()):e+=r$(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Gg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),K<Qn&&Gg(Ee[K])&&(a=!0,r=r*8+"01234567".indexOf(Ee[K++]),"0123".includes(i)&&K<Qn&&Gg(Ee[K])&&(r=r*8+"01234567".indexOf(Ee[K++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&Ee[K]===`
`&&++K;else{if(gp(i.charCodeAt(0)))break;e+=i}return t!==""&&tt({},vn,Rn),{type:t0,value:e,octal:a,start:n,end:K}}function rhe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";tt({},i$)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{tt({},i$)}try{return new RegExp(e,t)}catch{return null}}function ahe(){var e,t,n,i,r;for(e=Ee[K],Ub(e==="/","Regular expression literal must start with a slash"),t=Ee[K++],n=!1,i=!1;K<Qn;)if(e=Ee[K++],t+=e,e==="\\")e=Ee[K++],gp(e.charCodeAt(0))&&tt({},W_),t+=e;else if(gp(e.charCodeAt(0)))tt({},W_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||tt({},W_),r=t.substr(1,t.length-2),{value:r,literal:t}}function she(){var e,t,n;for(t="",n="";K<Qn&&(e=Ee[K],!!lv(e.charCodeAt(0)));)++K,e==="\\"&&K<Qn?tt({},vn,Rn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&tt({},i$,n),{value:n,literal:t}}function ohe(){var e,t,n,i;return dt=null,FI(),e=K,t=ahe(),n=she(),i=rhe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:K}}function lhe(e){return e.type===Pu||e.type===$l||e.type===Lb||e.type===Bb}function BI(){if(FI(),K>=Qn)return{type:e0,start:K,end:K};const e=Ee.charCodeAt(K);return n0(e)?ehe():e===40||e===41||e===59?Q_():e===39||e===34?ihe():e===46?Os(Ee.charCodeAt(K+1))?c8():Q_():Os(e)?c8():Q_()}function Ci(){const e=dt;return K=e.end,dt=BI(),K=e.end,e}function UI(){const e=K;dt=BI(),K=e}function uhe(e){const t=new da(Dde);return t.elements=e,t}function f8(e,t,n){const i=new da(e==="||"||e==="&&"?Lde:Rde);return i.operator=e,i.left=t,i.right=n,i}function che(e,t){const n=new da(Nde);return n.callee=e,n.arguments=t,n}function fhe(e,t,n){const i=new da(zde);return i.test=e,i.consequent=t,i.alternate=n,i}function yM(e){const t=new da(NI);return t.name=e,t}function Dg(e){const t=new da(Fde);return t.value=e.value,t.raw=Ee.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function d8(e,t,n){const i=new da(Bde);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function dhe(e){const t=new da(Ude);return t.properties=e,t}function h8(e,t,n){const i=new da(qde);return i.key=t,i.value=n,i.kind=e,i}function hhe(e,t){const n=new da(Pde);return n.operator=e,n.argument=t,n.prefix=!0,n}function tt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Ub(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=K,n.description=r,n}function qb(e){e.type===e0&&tt(e,Yde),e.type===oc&&tt(e,Ide),e.type===t0&&tt(e,jde),e.type===Pu&&tt(e,Hde),e.type===$l&&tt(e,Gde),tt(e,vn,e.value)}function Zn(e){const t=Ci();(t.type!==Ai||t.value!==e)&&qb(t)}function At(e){return dt.type===Ai&&dt.value===e}function Z_(e){return dt.type===$l&&dt.value===e}function ghe(){const e=[];for(K=dt.start,Zn("[");!At("]");)At(",")?(Ci(),e.push(null)):(e.push(Iu()),At("]")||Zn(","));return Ci(),uhe(e)}function g8(){K=dt.start;const e=Ci();return e.type===t0||e.type===oc?(e.octal&&tt(e,zI),Dg(e)):yM(e.value)}function phe(){var e,t,n,i;if(K=dt.start,e=dt,e.type===Pu)return n=g8(),Zn(":"),i=Iu(),h8("init",n,i);if(e.type===e0||e.type===Ai)qb(e);else return t=g8(),Zn(":"),i=Iu(),h8("init",t,i)}function mhe(){var e=[],t,n,i,r={},a=String;for(K=dt.start,Zn("{");!At("}");)t=phe(),t.key.type===NI?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?tt({},Xde):r[i]=!0,e.push(t),At("}")||Zn(",");return Zn("}"),dhe(e)}function yhe(){Zn("(");const e=vM();return Zn(")"),e}const vhe={if:1};function bhe(){var e,t,n;if(At("("))return yhe();if(At("["))return ghe();if(At("{"))return mhe();if(e=dt.type,K=dt.start,e===Pu||vhe[dt.value])n=yM(Ci().value);else if(e===t0||e===oc)dt.octal&&tt(dt,zI),n=Dg(Ci());else{if(e===$l)throw new Error(hp);e===Lb?(t=Ci(),t.value=t.value==="true",n=Dg(t)):e===Bb?(t=Ci(),t.value=null,n=Dg(t)):At("/")||At("/=")?(n=Dg(ohe()),UI()):qb(Ci())}return n}function xhe(){const e=[];if(Zn("("),!At(")"))for(;K<Qn&&(e.push(Iu()),!At(")"));)Zn(",");return Zn(")"),e}function She(){K=dt.start;const e=Ci();return lhe(e)||qb(e),yM(e.value)}function Ehe(){return Zn("."),She()}function _he(){Zn("[");const e=vM();return Zn("]"),e}function whe(){var e,t,n;for(e=bhe();;)if(At("."))n=Ehe(),e=d8(".",e,n);else if(At("("))t=xhe(),e=che(e,t);else if(At("["))n=_he(),e=d8("[",e,n);else break;return e}function p8(){const e=whe();if(dt.type===Ai&&(At("++")||At("--")))throw new Error(hp);return e}function I1(){var e,t;if(dt.type!==Ai&&dt.type!==$l)t=p8();else{if(At("++")||At("--"))throw new Error(hp);if(At("+")||At("-")||At("~")||At("!"))e=Ci(),t=I1(),t=hhe(e.value,t);else{if(Z_("delete")||Z_("void")||Z_("typeof"))throw new Error(hp);t=p8()}}return t}function m8(e){let t=0;if(e.type!==Ai&&e.type!==$l)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Ahe(){var e,t,n,i,r,a,s,o,u,f;if(e=dt,u=I1(),i=dt,r=m8(i),r===0)return u;for(i.prec=r,Ci(),t=[e,dt],s=I1(),a=[u,i,s];(r=m8(dt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,u=a.pop(),t.pop(),n=f8(o,u,s),a.push(n);i=Ci(),i.prec=r,a.push(i),t.push(dt),n=I1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=f8(a[f-1].value,a[f-2],n),f-=2;return n}function Iu(){var e,t,n;return e=Ahe(),At("?")&&(Ci(),t=Iu(),Zn(":"),n=Iu(),e=fhe(e,t,n)),e}function vM(){const e=Iu();if(At(","))throw new Error(hp);return e}function bM(e){Ee=e,K=0,Qn=Ee.length,dt=null,UI();const t=vM();if(dt.type!==e0)throw new Error("Unexpect token after expression.");return t}var qI={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function PI(e){function t(s,o,u,f){let d=e(o[0]);return u&&(d=u+"("+d+")",u.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,u){return f=>t(s,f,o,u)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&J("Missing arguments to clamp function."),s.length>3&&J("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&J("Missing arguments to if function."),s.length>3&&J("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function $he(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function II(e){e=e||{};const t=e.allowed?ia(e.allowed):{},n=e.forbidden?ia(e.forbidden):{},i=e.constants||qI,r=(e.functions||PI)(h),a=e.globalvar,s=e.fieldvar,o=qe(a)?a:v=>`${a}["${v}"]`;let u={},f={},d=0;function h(v){if(be(v))return v;const b=p[v.type];return b==null&&J("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:ve(n,b)?J("Illegal identifier: "+b):ve(i,b)?i[b]:ve(t,b)?b:(u[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const _=h(v.property);return S===s&&(f[$he(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&J("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=ve(r,b)&&r[b];return _||J("Unrecognized function: "+b),qe(_)?_(S):_+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(u),fields:Object.keys(f)};return u={},f={},b}return y.functions=r,y.constants=i,y}const y8=Symbol("vega_selection_getter");function jI(e){return(!e.getter||!e.getter[y8])&&(e.getter=Mr(e.field),e.getter[y8]=!0),e.getter}const xM="intersect",v8="union",Che="vlMulti",The="vlPoint",b8="or",Mhe="and",ka="_vgsid_",pp=Mr(ka),khe="E",Ohe="R",Dhe="R-E",Rhe="R-LE",Nhe="R-RE",zhe="E-LT",Fhe="E-LTE",Lhe="E-GT",Bhe="E-GTE",Uhe="E-VALID",qhe="E-ONE",uv="index:unit";function x8(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=jI(o)(e),tl(s)&&(s=Yn(s)),tl(i[a])&&(i[a]=Yn(i[a])),te(i[a])&&tl(i[a][0])&&(i[a]=i[a].map(Yn)),o.type===khe){if(te(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Ohe){if(!Sf(s,i[a]))return!1}else if(o.type===Nhe){if(!Sf(s,i[a],!0,!1))return!1}else if(o.type===Dhe){if(!Sf(s,i[a],!1,!1))return!1}else if(o.type===Rhe){if(!Sf(s,i[a],!1,!0))return!1}else if(o.type===zhe){if(s>=i[a])return!1}else if(o.type===Fhe){if(s>i[a])return!1}else if(o.type===Lhe){if(s<=i[a])return!1}else if(o.type===Bhe){if(s<i[a])return!1}else if(o.type===Uhe){if(s===null||isNaN(s))return!1}else if(o.type===qhe&&i[a].indexOf(s)===-1)return!1;return!0}function Phe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===xM,o=r.length,u=0,f,d,h,p,y;u<o;++u)if(f=r[u],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=x8(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=x8(t,f),s^y)return y;return o&&s}const HI=Ed(pp),Ihe=HI.left,jhe=HI.right;function Hhe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[uv]&&i[uv].value:void 0,s=n===xM,o=pp(t),u=Ihe(r,o);if(u===r.length||pp(r[u])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(jhe(r,o)-u<a.size)return!1}return!0}function Ghe(e,t){return e.map(n=>Ue(t.fields?{values:t.fields.map(i=>jI(i)(n.datum))}:{[ka]:pp(n.datum)},t))}function Yhe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},u={},f,d,h,p,y,v,b,S,_,w,A=a.length,$=0,T,k;$<A;++$)if(f=a[$],p=f.unit,d=f.fields,h=f.values,d&&h){for(T=0,k=d.length;T<k;++T)y=d[T],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),u[y.field]=_=y.type.charAt(0),w=K_[`${_}_union`],b[p]=w(S,ge(h[T]));n&&(S=o[p]||(o[p]=[]),S.push(ge(h).reduce((M,D,N)=>(M[d[N].field]=D,M),{})))}else y=ka,v=pp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[ka]:v}));if(t=t||v8,s[ka]?s[ka]=K_[`${ka}_${t}`](...Object.values(s[ka])):Object.keys(s).forEach(M=>{s[M]=Object.keys(s[M]).map(D=>s[M][D]).reduce((D,N)=>D===void 0?N:K_[`${u[M]}_${t}`](D,N))}),a=Object.keys(o),n&&a.length){const M=i?The:Che;s[M]=t===v8?{[b8]:a.reduce((D,N)=>(D.push(...o[N]),D),[])}:{[Mhe]:a.map(D=>({[b8]:o[D]}))}}return s}var K_={[`${ka}_union`]:NZ,[`${ka}_intersect`]:DZ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Yn(t[0]),i=Yn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Yn(t[0]),i=Yn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const Xhe=":",Vhe="@";function SM(e,t,n,i){t[0].type!==qu&&J("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Qe(t).value,s="unit",o=Vhe+s,u=Xhe+r;a===xM&&!ve(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),ve(i,u)||(i[u]=n.getData(r).tuplesRef())}function GI(e){const t=this.context.data[e];return t?t.values.value:[]}function Whe(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function Qhe(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(kr).insert(t)),1}function Zhe(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const i0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},Khe=i0("format"),YI=i0("timeFormat"),Jhe=i0("utcFormat"),ege=i0("timeParse"),tge=i0("utcParse"),l1=new Date(2e3,0,1);function Pb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(l1.setYear(2e3),l1.setMonth(e),l1.setDate(t),YI.call(this,l1,n))}function nge(e){return Pb.call(this,e,1,"%B")}function ige(e){return Pb.call(this,e,1,"%b")}function rge(e){return Pb.call(this,0,2+e,"%A")}function age(e){return Pb.call(this,0,2+e,"%a")}const sge=":",oge="@",a$="%",XI="$";function EM(e,t,n,i){t[0].type!==qu&&J("First argument to data functions must be a string literal.");const r=t[0].value,a=sge+r;if(!ve(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function lge(e,t,n,i){t[0].type!==qu&&J("First argument to indata must be a string literal."),t[1].type!==qu&&J("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=oge+a;ve(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function di(e,t,n,i){if(t[0].type===qu)S8(n,i,t[0].value);else for(e in n.scales)S8(n,i,e)}function S8(e,t,n){const i=a$+n;if(!ve(t,i))try{t[i]=e.scaleRef(n)}catch{}}function is(e,t){if(be(e)){const n=t.scales[e];return n&&w4(n.value)?n.value:void 0}else if(qe(e))return w4(e)?e:void 0}function uge(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=di,n._range=di,n._scale=di;const i=r=>"_["+(r.type===qu?ce(a$+r.value):ce(a$)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function _M(e,t){return function(n,i,r){if(n){const a=is(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const cge=_M("area",Toe),fge=_M("bounds",Doe),dge=_M("centroid",Boe);function hge(e,t){const n=is(e,(t||this).context);return n&&n.scale()}function gge(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function wM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function pge(){return wM(this.context.dataflow,"warn",arguments)}function mge(){return wM(this.context.dataflow,"info",arguments)}function yge(){return wM(this.context.dataflow,"debug",arguments)}function J_(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function s$(e){const t=fl(e),n=J_(t.r),i=J_(t.g),r=J_(t.b);return .2126*n+.7152*i+.0722*r}function vge(e,t){const n=s$(e),i=s$(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function bge(){const e=[].slice.call(arguments);return e.unshift({}),Ue(...e)}function VI(e,t){return e===t||e!==e&&t!==t?!0:te(e)?te(t)&&e.length===t.length?xge(e,t):!1:me(e)&&me(t)?WI(e,t):!1}function xge(e,t){for(let n=0,i=e.length;n<i;++n)if(!VI(e[n],t[n]))return!1;return!0}function WI(e,t){for(const n in e)if(!VI(e[n],t[n]))return!1;return!0}function E8(e){return t=>WI(e,t)}function Sge(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],u=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(u.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(u,d).run()},!0,1)),n&&(h=n===!0?kr:te(n)||Qv(n)?n:E8(n),d.remove(h)),t&&d.insert(t),i&&(h=E8(i),u.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Ege(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function _ge(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const _8={};function wge(e,t){const n=_8[t]||(_8[t]=Mr(t));return te(e)?e.map(n):n(e)}function Ib(e){return te(e)||ArrayBuffer.isView(e)?e:null}function AM(e){return Ib(e)||(be(e)?e:null)}function Age(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Ib(e).join(...n)}function $ge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return AM(e).indexOf(...n)}function Cge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return AM(e).lastIndexOf(...n)}function Tge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return AM(e).slice(...n)}function Mge(e,t,n){return qe(n)&&J("Function argument passed to replace."),!be(t)&&!cC(t)&&J("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function kge(e){return Ib(e).slice().reverse()}function Oge(e){return Ib(e).slice().sort(Mp)}function Dge(e,t,n){return B3(e||0,t||0,n||0)}function Rge(e,t){const n=is(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Nge(e,t){const n=is(e,(t||this).context);return n?n.copy():void 0}function zge(e,t){const n=is(e,(t||this).context);return n?n.domain():[]}function Fge(e,t,n){const i=is(e,(n||this).context);return i?te(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Lge(e,t){const n=is(e,(t||this).context);return n&&n.range?n.range():[]}function Bge(e,t,n){const i=is(e,(n||this).context);return i?i(t):void 0}function Uge(e,t,n,i,r){e=is(e,(r||this).context);const a=qU(t,n);let s=e.domain(),o=s[0],u=Qe(s),f=Kn;return u-o?f=TU(e,o,u):e=(e.interpolator?rt("sequential")().interpolator(e.interpolator()):rt("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,u=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),u!==Qe(s)&&s.push(u)),s.forEach(d=>a.stop(f(d),e(d))),a}function qge(e,t,n){const i=is(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Pge(e){let t=null;return function(n){return n?ap(n,t=t||Vf(e)):e}}const QI=e=>e.data;function ZI(e,t){const n=GI.call(t,e);return n.root&&n.root.lookup||{}}function Ige(e,t,n){const i=ZI(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(QI):void 0}function jge(e,t){const n=ZI(e,this)[t];return n?n.ancestors().map(QI):void 0}const KI=()=>typeof window<"u"&&window||null;function Hge(){const e=KI();return e?e.screen:{}}function Gge(){const e=KI();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Yge(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function JI(e,t,n){if(!e)return[];const[i,r]=e,a=new Jt().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return Fq(s,a,Xge(t))}function Xge(e){let t=null;if(e){const n=ge(e.marktype),i=ge(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function Vge(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ge(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function Wge(e){return ge(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function Qge(e,t,n){const{x:i,y:r,mark:a}=n,s=new Jt().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,f]of t)u<s.x1&&(s.x1=u),u>s.x2&&(s.x2=u),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),JI([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(u=>Zge(u.x,u.y,t))}function Zge(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[u,f]=n[r];f>t!=o>t&&e<(s-u)*(t-f)/(o-f)+u&&i++}return i&1}const mp={random(){return Dr()},cumulativeNormal:tb,cumulativeLogNormal:BC,cumulativeUniform:IC,densityNormal:RC,densityLogNormal:LC,densityUniform:PC,quantileNormal:nb,quantileLogNormal:UC,quantileUniform:jC,sampleNormal:eb,sampleLogNormal:FC,sampleUniform:qC,isArray:te,isBoolean:ec,isDate:tl,isDefined(e){return e!==void 0},isNumber:nt,isObject:me,isRegExp:cC,isString:be,isTuple:Qv,isValid(e){return e!=null&&e===e},toBoolean:dC,toDate(e){return hC(e)},toNumber:Yn,toString:gC,indexof:$ge,join:Age,lastindexof:Cge,replace:Mge,reverse:kge,sort:Oge,slice:Tge,flush:s7,lerp:l7,merge:bge,pad:f7,peek:Qe,pluck:wge,span:kp,inrange:Sf,truncate:d7,rgb:fl,lab:py,hcl:my,hsl:hy,luminance:s$,contrast:vge,sequence:Ji,format:Khe,utcFormat:Jhe,utcParse:tge,utcOffset:G7,utcSequence:V7,timeFormat:YI,timeParse:ege,timeOffset:H7,timeSequence:X7,timeUnitSpecifier:R7,monthFormat:nge,monthAbbrevFormat:ige,dayFormat:rge,dayAbbrevFormat:age,quarter:n7,utcquarter:i7,week:z7,utcweek:B7,dayofyear:N7,utcdayofyear:L7,warn:pge,info:mge,debug:yge,extent(e){return Ia(e)},inScope:gge,intersect:JI,clampRange:r7,pinchDistance:Ege,pinchAngle:_ge,screen:Hge,containerSize:Yge,windowSize:Gge,bandspace:Dge,setdata:Qhe,pathShape:Pge,panLinear:K9,panLog:J9,panPow:e7,panSymlog:t7,zoomLinear:aC,zoomLog:sC,zoomPow:ey,zoomSymlog:oC,encode:Zhe,modify:Sge,lassoAppend:Vge,lassoPath:Wge,intersectLasso:Qge},Kge=["view","item","group","xy","x","y"],Jge="event.vega.",ej="this.",$M={},tj={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${ce(XI+e)}]`,functions:epe,constants:qI,visitors:$M},o$=II(tj);function epe(e){const t=PI(e);Kge.forEach(n=>t[n]=Jge+n);for(const n in mp)t[n]=ej+n;return Ue(t,uge(e,mp,$M)),t}function Xt(e,t,n){return arguments.length===1?mp[e]:(mp[e]=t,n&&($M[e]=n),o$&&(o$.functions[e]=ej+e),this)}Xt("bandwidth",Rge,di);Xt("copy",Nge,di);Xt("domain",zge,di);Xt("range",Lge,di);Xt("invert",Fge,di);Xt("scale",Bge,di);Xt("gradient",Uge,di);Xt("geoArea",cge,di);Xt("geoBounds",fge,di);Xt("geoCentroid",dge,di);Xt("geoShape",qge,di);Xt("geoScale",hge,di);Xt("indata",Whe,lge);Xt("data",GI,EM);Xt("treePath",Ige,EM);Xt("treeAncestors",jge,EM);Xt("vlSelectionTest",Phe,SM);Xt("vlSelectionIdTest",Hhe,SM);Xt("vlSelectionResolve",Yhe,SM);Xt("vlSelectionTuples",Ghe);function Xa(e,t){const n={};let i;try{e=be(e)?e:ce(e)+"",i=bM(e)}catch{J("Expression parse error: "+e)}i.visit(a=>{if(a.type!==RI)return;const s=a.callee.name,o=tj.visitors[s];o&&o(s,a.arguments,t,n)});const r=o$(i);return r.globals.forEach(a=>{const s=XI+a;!ve(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:Ue({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function tpe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const npe=ia(["rule"]),w8=ia(["group","image","rect"]);function ipe(e,t){let n="";return npe[t]||(e.x2&&(e.x?(w8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(w8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function CM(e){return(e+"").toLowerCase()}function rpe(e){return CM(e)==="operator"}function ape(e){return CM(e)==="collect"}function ng(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function spe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var ope={operator:(e,t)=>ng(e,["_"],t.code),parameter:(e,t)=>ng(e,["datum","_"],t.code),event:(e,t)=>ng(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return ng(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+ce(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=ipe(i,n),r+="return m;",ng(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(ce).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let u,f;return a.path?(u=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,u=`this.f${s}(a)`,f=`this.f${s}(b)`),spe(u,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function lpe(e){const t=this;rpe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function upe(e){const t=this;if(e.params){const n=t.get(e.id);n||J("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function cpe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=te(r)?r.map(a=>A8(a,n,t)):A8(r,n,t)}return t}function A8(e,t,n){if(!e||!me(e))return e;for(let i=0,r=$8.length,a;i<r;++i)if(a=$8[i],ve(e,a.key))return a.parse(e,t,n);return e}var $8=[{key:"$ref",parse:fpe},{key:"$key",parse:hpe},{key:"$expr",parse:dpe},{key:"$field",parse:gpe},{key:"$encode",parse:mpe},{key:"$compare",parse:ppe},{key:"$context",parse:ype},{key:"$subflow",parse:vpe},{key:"$tupleid",parse:bpe}];function fpe(e,t){return t.get(e.$ref)||J("Operator not defined: "+e.$ref)}function dpe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Fi(t.parameterExpression(e.$expr),e.$fields))}function hpe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=fC(e.$key,e.$flat,t.expr.codegen))}function gpe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Mr(e.$field,e.$name,t.expr.codegen))}function ppe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=ge(e.$compare).map(r=>r&&r.$tupleid?$e:r);return t.fn[n]||(t.fn[n]=lC(i,e.$order,t.expr.codegen))}function mpe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Fi(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function ype(e,t){return t}function vpe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),u=s.signals.parent;return u&&u.set(a),o.detachSubflow=()=>t.detach(s),o}}function bpe(){return $e}function xpe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&J("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Spe(e){var t=this,n=me(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||J("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const Epe={skip:!0};function _pe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function wpe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Epe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(kr).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function nj(e,t,n,i){return new ij(e,t,n,i)}function ij(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||ope,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function C8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}ij.prototype=C8.prototype={fork(){const e=new C8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),ape(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[CM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:tpe,parseOperator:lpe,parseOperatorParameters:upe,parseParameters:cpe,parseStream:xpe,parseUpdate:Spe,getState:_pe,setState:wpe};function Ape(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),rj(t,e.description()))}function rj(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function $pe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const ew="default";function Cpe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:ew,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?be(r)?r:r.user:ew,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return be(i)||(r=i.item,i=i.user),l$(e,i&&i!==ew?i:r||i),r},{cursor:t})}function l$(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function cv(e,t){var n=e._runtime.data;return ve(n,t)||J("Unrecognized data set: "+t),n[t]}function Tpe(e,t){return arguments.length<2?cv(this,e).values.value:jb.call(this,e,rc().remove(kr).insert(t))}function jb(e,t){SL(t)||J("Second argument to changes must be a changeset.");const n=cv(this,e);return n.modified=!0,this.pulse(n.input,t)}function Mpe(e,t){return jb.call(this,e,rc().insert(t))}function kpe(e,t){return jb.call(this,e,rc().remove(t))}function aj(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function sj(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Hb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ope(e){var t=Hb(e),n=aj(e),i=sj(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Dpe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=Hb(e),s=t.changedTouches?t.changedTouches[0]:t,a=Mb(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Rpe(e,n,a),t}function Rpe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,u;if(s){for(u=t;u;u=u.mark.group)if(u.mark.name===s){o=u;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;be(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:Jn(e),item:Jn(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const T8="view",Npe="timer",zpe="window",Fpe={trap:!1};function Lpe(e){const t=Ue({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{te(i[a])&&(i[a]=ia(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function oj(e,t,n,i){e._eventListeners.push({type:n,sources:ge(t),handler:i})}function Bpe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function u1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||me(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Upe(e,t,n){var i=this,r=new Jv(n),a=function(f,d){i.runAsync(null,()=>{e===T8&&Bpe(i,t)&&f.preventDefault(),r.receive(Dpe(i,f,d))})},s;if(e===Npe)u1(i,"timer",t)&&i.timer(a,t);else if(e===T8)u1(i,"view",t)&&i.addEventListener(t,a,Fpe);else if(e===zpe?u1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&u1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,u=s.length;o<u;++o)s[o].addEventListener(t,a);oj(i,s,t,a)}return r}function M8(e){return e.item}function k8(e){return e.item.mark.source}function O8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function qpe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",M8),k8,O8(e)),this.on(this.events("view","pointerout",M8),k8,O8(t)),this}function Ppe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,u;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)u=n[r].type,o=n[r].handler,this._handler.off(u,o);return this}function nr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Ipe="vega-bind",jpe="vega-bind-name",Hpe="vega-bind-radio";function Gpe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=uC(i.debounce,r.update))),(i.input==null&&i.element?Ype:Vpe)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Ype(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),oj(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(Xpe(r))}}function Xpe(e){return typeof Event<"u"?new Event(e):{type:e}}function Vpe(e,t,n,i){const r=i.signal(n.signal),a=nr("div",{class:Ipe}),s=n.input==="radio"?a:a.appendChild(nr("label"));s.appendChild(nr("span",{class:jpe},n.name||n.signal)),t.appendChild(a);let o=Wpe;switch(n.input){case"checkbox":o=Qpe;break;case"select":o=Zpe;break;case"radio":o=Kpe;break;case"range":o=Jpe;break}o(e,s,n,r)}function Wpe(e,t,n,i){const r=nr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function Qpe(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=nr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function Zpe(e,t,n,i){const r=nr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const u={value:s};fv(s,i)&&(u.selected=!0),r.appendChild(nr("option",u,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,u=n.options.length;o<u;++o)if(fv(n.options[o],s)){r.selectedIndex=o;return}}}function Kpe(e,t,n,i){const r=nr("span",{class:Hpe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const u={type:"radio",name:n.signal,value:s};fv(s,i)&&(u.checked=!0);const f=nr("input",u);f.addEventListener("change",()=>e.update(s));const d=nr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,u=o.length;for(let f=0;f<u;++f)fv(o[f].value,s)&&(o[f].checked=!0)}}function Jpe(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||ll(a,r,100),o=nr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const u=nr("span",{},+i);t.appendChild(o),t.appendChild(u);const f=()=>{u.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,u.textContent=d}}function fv(e,t){return e===t||e+""==t+""}function lj(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,aj(e),sj(e),Hb(e),r,a).background(e.background())}function TM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function e0e(e,t,n,i){const r=new i(e.loader(),TM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Hb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function t0e(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=kb(i);e=n._el=e?tw(n,e,!0):null,Ape(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Wp,o=e?a.renderer:a.headless;return n._renderer=o?lj(n,n._renderer,e,o):null,n._handler=e0e(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=tw(n,t,!0):e.appendChild(nr("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&r!=="container"&&(u.element=tw(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{Gpe(n,u.element||t,u)})),n}function tw(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ig=e=>+e||0,n0e=e=>({top:e,bottom:e,left:e,right:e});function D8(e){return me(e)?{top:ig(e.top),bottom:ig(e.bottom),left:ig(e.left),right:ig(e.right)}:n0e(ig(e))}async function MM(e,t,n,i){const r=kb(t),a=r&&r.headless;return a||J("Unrecognized renderer type: "+t),await e.runAsync(),lj(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function i0e(e,t){e!==Vo.Canvas&&e!==Vo.SVG&&e!==Vo.PNG&&J("Unrecognized image type: "+e);const n=await MM(this,e,t);return e===Vo.SVG?r0e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function r0e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function a0e(e,t){return(await MM(this,Vo.Canvas,e,t)).canvas()}async function s0e(e){return(await MM(this,Vo.SVG,e)).svg()}function o0e(e,t,n){return nj(e,If,mp,n).parse(t)}function l0e(e){var t=this._runtime.scales;return ve(t,e)||J("Unrecognized scale or projection: "+e),t[e].value}var uj="width",cj="height",kM="padding",R8={skip:!0};function fj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===kM?i.left+i.right:0)}function dj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===kM?i.top+i.bottom:0)}function u0e(e){var t=e._signals,n=t[uj],i=t[cj],r=t[kM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=fj(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=dj(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function c0e(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(uj,n,R8),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(cj,i,R8),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(u=>u.resize())},!1,1)}function f0e(e){return this._runtime.getState(e||{data:d0e,signals:h0e,recurse:!0})}function d0e(e,t){return t.modified&&te(t.input.value)&&!e.startsWith("_:vega:_")}function h0e(e,t){return!(e==="parent"||t instanceof If.proxy)}function g0e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function p0e(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Uue(n,t))}function m0e(e,t,n,i){const r=e.element();r&&r.setAttribute("title",y0e(i))}function y0e(e){return e==null?"":te(e)?hj(e):me(e)&&!tl(e)?v0e(e):e+""}function v0e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(te(n)?hj(n):gj(n))}).join(`
`)}function hj(e){return"["+e.map(gj).join(", ")+"]"}function gj(e){return te(e)?"[…]":me(e)&&!tl(e)?"{…}":e}function b0e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function pj(e,t){const n=this;if(t=t||{},Cf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=Ue({},e.locale,t.locale);n.locale(fL(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Vo.Canvas,n._scenegraph=new uq;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||m0e,n._redraw=!0,n._handler=new Wp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Lpe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=o0e(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:Ue({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=fj(n,n._width),n._viewHeight=dj(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,u0e(n),$pe(n),Cpe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function c1(e,t){return ve(e._signals,t)?e._signals[t]:J("Unrecognized signal name: "+ce(t))}function mj(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function N8(e,t,n,i){let r=mj(n,i);return r||(r=TM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function z8(e,t,n){const i=mj(t,n);return i&&t._targets.remove(i),e}fe(pj,Cf,{async evaluate(e,t,n){if(await Cf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ope(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&A1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&rj(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=c1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",D8(e)):D8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(kb(e)||J("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Cf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(c1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:c0e,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=TM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return N8(this,e,c1(this,e),t)},removeSignalListener(e,t){return z8(this,c1(this,e),t)},addDataListener(e,t){return N8(this,e,cv(this,e).values,t)},removeDataListener(e,t){return z8(this,cv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=l$(this,null);this._globalCursor=!!e,t&&l$(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:p0e,events:Upe,finalize:Ppe,hover:qpe,data:Tpe,change:jb,insert:Mpe,remove:kpe,scale:l0e,initialize:t0e,toImageURL:i0e,toCanvas:a0e,toSVG:s0e,getState:f0e,setState:g0e,_watchPixelRatio:b0e});const x0e="view",dv="[",hv="]",yj="{",vj="}",S0e=":",bj=",",E0e="@",_0e=">",w0e=/[[\]{}]/,A0e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let xj,Sj;function Cl(e,t,n){return xj=t||x0e,Sj=n||A0e,Ej(e.trim()).map(u$)}function $0e(e){return Sj[e]}function Yg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function Ej(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Yg(e,r,bj,dv+yj,hv+vj),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function u$(e){return e[0]==="["?C0e(e):T0e(e)}function C0e(e){const t=e.length;let n=1,i;if(n=Yg(e,n,hv,dv,hv),n===t)throw"Empty between selector: "+e;if(i=Ej(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==_0e)throw"Expected '>' after between selector: "+e;i=i.map(u$);const r=u$(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function T0e(e){const t={source:xj},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,u,f;if(e[s-1]===vj){if(o=e.lastIndexOf(yj),o>=0){try{i=M0e(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===E0e&&(r=++o),u=Yg(e,o,S0e),u<s&&(n.push(e.substring(a,u).trim()),a=o=++u),o=Yg(e,o,dv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Yg(e,o,hv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==dv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||w0e.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):$0e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function M0e(e){const t=e.split(bj);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function k0e(e){return me(e)?e:{type:e||"pad"}}const rg=e=>+e||0,O0e=e=>({top:e,bottom:e,left:e,right:e});function D0e(e){return me(e)?e.signal?e:{top:rg(e.top),bottom:rg(e.bottom),left:rg(e.left),right:rg(e.right)}:O0e(rg(e))}const bn=e=>me(e)&&!te(e)?Ue({},e):{value:e};function F8(e,t,n,i){return n!=null?(me(n)&&!te(n)||te(n)&&n.length&&me(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function zn(e,t,n){for(const i in t)F8(e,i,t[i]);for(const i in n)F8(e,i,n[i],"update")}function Dd(e,t,n){for(const i in t)n&&ve(n,i)||(e[i]=Ue(e[i]||{},t[i]));return e}function vf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const OM="mark",DM="frame",RM="scope",R0e="axis",N0e="axis-domain",z0e="axis-grid",F0e="axis-label",L0e="axis-tick",B0e="axis-title",U0e="legend",q0e="legend-band",P0e="legend-entry",I0e="legend-gradient",_j="legend-label",j0e="legend-symbol",H0e="legend-title",G0e="title",Y0e="title-text",X0e="title-subtitle";function V0e(e,t,n,i,r){const a={},s={};let o,u,f,d;u="lineBreak",t==="text"&&r[u]!=null&&!vf(u,e)&&nw(a,u,r[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===DM?r.group:n===OM?Ue({},r.mark,r[t]):null;for(u in d)f=vf(u,e)||(u==="fill"||u==="stroke")&&(vf("fill",e)||vf("stroke",e)),f||nw(a,u,d[u]);ge(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)vf(y,e)||nw(a,y,p[y])}),e=Ue({},e);for(u in a)d=a[u],d.signal?(o=o||{})[u]=d:s[u]=d;return e.enter=Ue(s,e.enter),o&&(e.update=Ue(o,e.update)),e}function nw(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const wj=e=>be(e)?ce(e):e.signal?`(${e.signal})`:Aj(e);function Gb(e){if(e.gradient!=null)return Q0e(e);let t=e.signal?`(${e.signal})`:e.color?W0e(e.color):e.field!=null?Aj(e.field):e.value!==void 0?ce(e.value):void 0;return e.scale!=null&&(t=Z0e(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${j1(e.exponent)})`),e.mult!=null&&(t+=`*${j1(e.mult)}`),e.offset!=null&&(t+=`+${j1(e.offset)}`),e.round&&(t=`round(${t})`),t}const f1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Gb).join(",")})+'')`;function W0e(e){return e.c?f1("hcl",e.h,e.c,e.l):e.h||e.s?f1("hsl",e.h,e.s,e.l):e.l||e.a?f1("lab",e.l,e.a,e.b):e.r||e.g||e.b?f1("rgb",e.r,e.g,e.b):null}function Q0e(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:ce(n));for(;t.length&&Qe(t)==null;)t.pop();return t.unshift(wj(e.gradient)),`gradient(${t.join(",")})`}function j1(e){return me(e)?"("+Gb(e)+")":e}function Aj(e){return $j(me(e)?e:{datum:e})}function $j(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):J("Invalid field reference: "+ce(e));return e.signal||(i=be(i)?Za(i).map(ce).join("]["):$j(i)),t+"["+i+"]"}function Z0e(e,t){const n=wj(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+j1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function K0e(e){let t="";return e.forEach(n=>{const i=Gb(n);t+=n.test?`(${n.test})?${i}:`:i}),Qe(t)===":"&&(t+="null"),t}function Cj(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=V0e(e,t,n,i,r.config);for(const o in e)s[o]=J0e(e[o],t,a,r);return a}function J0e(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=tme(eme(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function eme(e){return te(e)?K0e(e):Gb(e)}function tme(e,t,n,i){const r=Xa(e,t);return r.$fields.forEach(a=>i[a]=1),Ue(n,r.$params),r.$expr}const nme="outer",ime=["value","update","init","react","bind"];function L8(e,t){J(e+' for "outer" push: '+ce(t))}function Tj(e,t){const n=e.name;if(e.push===nme)t.signals[n]||L8("No prior signal definition",n),ime.forEach(i=>{e[i]!==void 0&&L8("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function c$(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Yb(e,t,n,i){return new c$(e,t,n,i)}function gv(e,t){return Yb("operator",e,t)}function Ae(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function yp(e,t){return t?{$field:e,$name:t}:{$field:e}}const f$=yp("key");function B8(e,t){return{$compare:e,$order:t}}function rme(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const ame="ascending",sme="descending";function ome(e){return me(e)?(e.order===sme?"-":"+")+Xb(e.op,e.field):""}function Xb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const NM="scope",d$="view";function on(e){return e&&e.signal}function lme(e){return e&&e.expr}function H1(e){if(on(e))return!0;if(me(e)){for(const t in e)if(H1(e[t]))return!0}return!1}function Yr(e,t){return e??t}function Cu(e){return e&&e.signal||e}const U8="timer";function vp(e,t){return(e.merge?cme:e.stream?fme:e.type?dme:J("Invalid stream specification: "+ce(e)))(e,t)}function ume(e){return e===NM?d$:e||d$}function cme(e,t){const n=e.merge.map(r=>vp(r,t)),i=zM({merge:n},e,t);return t.addStream(i).id}function fme(e,t){const n=vp(e.stream,t),i=zM({stream:n},e,t);return t.addStream(i).id}function dme(e,t){let n;e.type===U8?(n=t.event(U8,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(ume(e.source),e.type);const i=zM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function zM(e,t,n){let i=t.between;return i&&(i.length!==2&&J('Stream "between" parameter must have 2 entries: '+ce(t)),e.between=[vp(i[0],n),vp(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(hme(t.marktype,t.markname,t.markrole)),t.source===NM&&i.push("inScope(event.item)"),i.length&&(e.filter=Xa("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function hme(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const gme={code:"_.$value",ast:{type:"Identifier",value:"value"}};function pme(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||J("Signal update missing events specification."),be(a)&&(a=Cl(a,t.isSubscope()?NM:d$)),a=ge(a).filter(u=>u.signal||u.scale?(o.push(u),0):1),o.length>1&&(o=[yme(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&J("Signal encode and update are mutually exclusive."),s="encode(item(),"+ce(i)+")"),r.update=be(s)?Xa(s,t):s.expr!=null?Xa(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:gme,$params:{$value:t.signalRef(s.signal)}}:J("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(u=>t.addUpdate(Ue(mme(u,t),r)))}function mme(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):vp(e,t)}}function yme(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function vme(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?J("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Xa(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>pme(r,t,n.id))}const vt=e=>(t,n,i)=>Yb(e,n,t||void 0,i),Mj=vt("aggregate"),bme=vt("axisticks"),kj=vt("bound"),ha=vt("collect"),q8=vt("compare"),xme=vt("datajoin"),Oj=vt("encode"),Sme=vt("expression"),Eme=vt("facet"),_me=vt("field"),wme=vt("key"),Ame=vt("legendentries"),$me=vt("load"),Cme=vt("mark"),Tme=vt("multiextent"),Mme=vt("multivalues"),kme=vt("overlap"),Ome=vt("params"),Dj=vt("prefacet"),Dme=vt("projection"),Rme=vt("proxy"),Nme=vt("relay"),Rj=vt("render"),zme=vt("scale"),lc=vt("sieve"),Fme=vt("sortitems"),Nj=vt("viewlayout"),Lme=vt("values");let Bme=0;const zj={min:"min",max:"max",count:"sum"};function Ume(e,t){const n=e.type||"linear";EU(n)||J("Unrecognized scale type: "+ce(n)),t.addScale(e.name,{type:n,domain:void 0})}function qme(e,t){const n=t.getScale(e.name).params;let i;n.domain=Fj(e.domain,e,t),e.range!=null&&(n.range=Bj(e,t,n)),e.interpolate!=null&&Qme(e.interpolate,n),e.nice!=null&&(n.nice=Wme(e.nice,t)),e.bins!=null&&(n.bins=Vme(e.bins,t));for(i in e)ve(n,i)||i==="name"||(n[i]=Ar(e[i],t))}function Ar(e,t){return me(e)?e.signal?t.signalRef(e.signal):J("Unsupported object: "+ce(e)):e}function G1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ar(n,t))}function Vb(e){J("Can not find data set: "+ce(e))}function Fj(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&J("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(te(e)?Pme:e.fields?jme:Ime)(e,t,n)}function Pme(e,t,n){return e.map(i=>Ar(i,n))}function Ime(e,t,n){const i=n.getData(e.data);return i||Vb(e.data),Xf(t.type)?i.valuesRef(n,e.field,Lj(e.sort,!1)):AU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function jme(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=be(s)?{data:i,field:s}:te(s)||s.signal?Hme(s,n):s,a.push(s),a),[]);return(Xf(t.type)?Gme:AU(t.type)?Yme:Xme)(e,n,r)}function Hme(e,t){const n="_:vega:_"+Bme++,i=ha({});if(te(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+ce(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,lc({})]),{data:n,field:"data"}}function Gme(e,t,n){const i=Lj(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Vb(f.data),d.countsRef(t,f.field,i)}),o={groupby:f$,pulse:s};i&&(r=i.op||"count",a=i.field?Xb(r,i.field):"count",o.ops=[zj[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(Mj(o));const u=t.add(ha({pulse:Ae(r)}));return a=t.add(Lme({field:f$,sort:t.sortRef(i),pulse:Ae(u)})),Ae(a)}function Lj(e,t){return e&&(!e.field&&!e.op?me(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?J("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!zj[e.op]&&J("Multiple domain scales can not be sorted using "+e.op)),e}function Yme(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Vb(r.data),a.domainRef(t,r.field)});return Ae(t.add(Mme({values:i})))}function Xme(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Vb(r.data),a.extentRef(t,r.field)});return Ae(t.add(Tme({extents:i})))}function Vme(e,t){return e.signal||te(e)?G1(e,t):t.objectProperty(e)}function Wme(e,t){return e.signal?t.signalRef(e.signal):me(e)?{interval:Ar(e.interval),step:Ar(e.step)}:Ar(e)}function Qme(e,t){t.interpolate=Ar(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ar(e.gamma))}function Bj(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(be(r)){if(i&&ve(i,r))return e=Ue({},e,{range:i[r]}),Bj(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Xf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:J("Unrecognized scale range value: "+ce(r))}else if(r.scheme){n.scheme=te(r.scheme)?G1(r.scheme,t):Ar(r.scheme,t),r.extent&&(n.schemeExtent=G1(r.extent,t)),r.count&&(n.schemeCount=Ar(r.count,t));return}else if(r.step){n.rangeStep=Ar(r.step,t);return}else{if(Xf(e.type)&&!te(r))return Fj(r,e,t);te(r)||J("Unsupported range type: "+ce(r))}return r.map(a=>(te(a)?G1:Ar)(a,t))}function Zme(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=h$(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=h$(n[r],r,t));t.addProjection(e.name,i)}function h$(e,t,n){return te(e)?e.map(i=>h$(i,t,n)):me(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:J("Unsupported parameter object: "+ce(e)):e}const ga="top",Rd="left",Nd="right",ml="bottom",Uj="center",Kme="vertical",Jme="start",e1e="middle",t1e="end",g$="index",FM="label",n1e="offset",nd="perc",i1e="perc2",Cr="value",r0="guide-label",LM="guide-title",r1e="group-title",a1e="group-subtitle",P8="symbol",Y1="gradient",p$="discrete",m$="size",s1e="shape",o1e="fill",l1e="stroke",u1e="strokeWidth",c1e="strokeDash",f1e="opacity",BM=[m$,s1e,o1e,l1e,u1e,c1e,f1e],a0={name:1,style:1,interactive:1},Ke={value:0},Tr={value:1},Wb="group",qj="rect",UM="rule",d1e="symbol",uc="text";function bp(e){return e.type=Wb,e.interactive=e.interactive||!1,e}function Li(e,t){const n=(i,r)=>Yr(e[i],Yr(t[i],r));return n.isVertical=i=>Kme===Yr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Yr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Yr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Yr(e.columns,Yr(t.columns,+n.isVertical(!0))),n}function Pj(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function h1e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Qb(e,t,n){return`item.anchor === '${Jme}' ? ${e} : item.anchor === '${t1e}' ? ${t} : ${n}`}const qM=Qb(ce(Rd),ce(Nd),ce(Uj));function g1e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},me(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function Ij(e,t){return t?e?me(e)?Object.assign({},e,{offset:Ij(e.offset,t)}):{value:e,offset:t}:t:e}function lr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Dd(e.encode,t,a0)):e.interactive=!1,e}function p1e(e,t,n,i){const r=Li(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let u,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:u={opacity:Ke,x:Ke,y:Ke,width:bn(h),height:bn(p)},update:Ue({},u,{opacity:Tr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:Ke}};return zn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),lr({type:qj,role:I0e,encode:y},i)}function m1e(e,t,n,i,r){const a=Li(e,n),s=a.isVertical(),o=a.gradientThickness(),u=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:Ke,fill:{scale:t,field:Cr}};v[f]={signal:y+"datum."+nd,mult:u},v[d]=Ke,v[h]={signal:y+"datum."+i1e,mult:u},v[p]=bn(o);const b={enter:v,update:Ue({},v,{opacity:Tr}),exit:{opacity:Ke}};return zn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),lr({type:qj,role:q0e,key:Cr,from:r,encode:b},i)}const y1e=`datum.${nd}<=0?"${Rd}":datum.${nd}>=1?"${Nd}":"${Uj}"`,v1e=`datum.${nd}<=0?"${ml}":datum.${nd}>=1?"${ga}":"${e1e}"`;function I8(e,t,n,i){const r=Li(e,t),a=r.isVertical(),s=bn(r.gradientThickness()),o=r.gradientLength();let u=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:Ke},update:d={opacity:Tr,text:{field:FM}},exit:{opacity:Ke}};return zn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Yr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:v1e},h="y",p="x",y="1-"):(f.align=d.align={signal:y1e},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+nd,mult:o},f[p]=d[p]=s,s.offset=Yr(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:r("labelSeparation"),method:u,order:"datum."+g$}:void 0,lr({type:uc,role:_j,style:r0,key:Cr,from:i,encode:v,overlap:u},n)}function b1e(e,t,n,i,r){const a=Li(e,t),s=n.entries,o=!!(s&&s.interactive),u=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${n1e} : datum.${m$}`,y=f?bn(f):{field:m$},v=`datum.${g$}`,b=`max(1, ${r})`;let S,_,w,A,$;y.mult=.5,S={enter:_={opacity:Ke,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Tr,x:_.x,y:_.y},exit:{opacity:Ke}};let T=null,k=null;e.fill||(T=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),zn(S,{fill:a("symbolFillColor",T),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),BM.forEach(B=>{e[B]&&(w[B]=_[B]={scale:e[B],field:Cr})});const M=lr({type:d1e,role:j0e,key:Cr,from:h,clip:f?!0:void 0,encode:S},n.symbols),D=bn(d);D.offset=a("labelOffset"),S={enter:_={opacity:Ke,x:{signal:p,offset:D},y},update:w={opacity:Tr,text:{field:FM},x:_.x,y:_.y},exit:{opacity:Ke}},zn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=lr({type:uc,role:_j,style:r0,key:Cr,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:Ke,height:f?bn(f):Ke,opacity:Ke},exit:{opacity:Ke},update:w={opacity:Tr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,$={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,$={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:g$}},bp({role:RM,from:i,encode:Dd(S,s,a0),marks:[M,N],name:u,interactive:o,sort:$})}function x1e(e,t){const n=Li(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const PM='item.orient === "left"',IM='item.orient === "right"',Zb=`(${PM} || ${IM})`,S1e=`datum.vgrad && ${Zb}`,E1e=Qb('"top"','"bottom"','"middle"'),_1e=Qb('"right"','"left"','"center"'),w1e=`datum.vgrad && ${IM} ? (${_1e}) : (${Zb} && !(datum.vgrad && ${PM})) ? "left" : ${qM}`,A1e=`item._anchor || (${Zb} ? "middle" : "start")`,$1e=`${S1e} ? (${PM} ? -90 : 90) : 0`,C1e=`${Zb} ? (datum.vgrad ? (${IM} ? "bottom" : "top") : ${E1e}) : "top"`;function T1e(e,t,n,i){const r=Li(e,t),a={enter:{opacity:Ke},update:{opacity:Tr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Ke}};return zn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:A1e},angle:{signal:$1e},align:{signal:w1e},baseline:{signal:C1e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),lr({type:uc,role:H0e,style:LM,from:i,encode:a},n)}function M1e(e,t){let n;return me(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+j8(e.path)+")":e.sphere&&(n="geoShape("+j8(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function j8(e){return me(e)&&e.signal?e.signal:ce(e)}function jj(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Wb?RM:t||OM}function k1e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||jj(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function O1e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function jM(e,t){const n=wL(e.type);n||J("Unrecognized transform type: "+ce(e.type));const i=Yb(n.type.toLowerCase(),null,Hj(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Hj(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=D1e(s,t,n)}return i}function D1e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return R1e(e,t,n);if(r===void 0){e.required&&J("Missing required "+ce(t.type)+" parameter: "+ce(e.name));return}else{if(i==="param")return N1e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!on(r)?r.map(a=>H8(e,a,n)):H8(e,r,n)}function H8(e,t,n){const i=e.type;if(on(t))return Y8(i)?J("Expression references can not be signals."):iw(i)?n.fieldRef(t):X8(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||iw(i);return r&&z1e(t)?n.exprRef(t.expr,t.as):r&&F1e(t)?yp(t.field,t.as):Y8(i)?Xa(t,n):L1e(i)?Ae(n.getData(t).values):iw(i)?yp(t):X8(i)?n.compareRef(t):t}}function R1e(e,t,n){return be(t.from)||J('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function N1e(e,t,n){const i=t[e.name];return e.array?(te(i)||J("Expected an array of sub-parameters. Instead: "+ce(i)),i.map(r=>G8(e,r,n))):G8(e,i,n)}function G8(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||J("Unsupported parameter: "+ce(t));const a=Ue(Hj(r,t,n),r.key);return Ae(n.add(Ome(a)))}const z1e=e=>e&&e.expr,F1e=e=>e&&e.field,L1e=e=>e==="data",Y8=e=>e==="expr",iw=e=>e==="field",X8=e=>e==="compare";function B1e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||J("Only group marks can be faceted."),i.field!=null?s=o=X1(i,n):(e.data?o=Ae(n.getData(e.data).aggregate):(a=jM(Ue({type:"aggregate",groupby:ge(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=X1(i,n),s=o=Ae(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Ae(n.add(ha(null,[{}]))),s||(s=X1(e,n)),{key:r,pulse:s,parent:o}}function X1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ae(t.getData(e.data).output)}function ju(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}ju.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Ae(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new ju(e,a,r,i,s)};function Gj(e){return be(e)?e:null}function V8(e,t,n){const i=Xb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function ag(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),u=ome(a);let f=Gj(r),d,h;if(f!=null&&(e=t.scope,f=f+(u?"|"+u:""),d=o[f]),!d){const p=a?{field:f$,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Ae(t.output)};u&&(p.sort=e.sortRef(a)),h=e.add(Yb(i,void 0,p)),s&&(t.index[r]=h),d=Ae(h),f!=null&&(o[f]=d)}return d}ju.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=Gj(t);let s,o,u;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&V8(e,s.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Ae(i.output)},n&&n.field&&V8(e,u,n),o=e.add(Mj(u)),s=e.add(ha({pulse:Ae(o)})),s={agg:o,ref:Ae(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Ae(this.values)},extentRef(e,t){return ag(e,this,"extent","extent",t,!1)},domainRef(e,t){return ag(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ag(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ag(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ag(e,this,"indata","tupleindex",t,!0,!0)}};function U1e(e,t,n){const i=e.from.facet,r=i.name,a=X1(i,t);let s;i.name||J("Facet must have a name: "+ce(i)),i.data||J("Facet must reference a data set: "+ce(i)),i.field?s=t.add(Dj({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(Eme({key:t.keyRef(i.groupby),group:Ae(t.proxy(n.parent)),pulse:a})):J("Facet must specify groupby or field: "+ce(i));const o=t.fork(),u=o.add(ha()),f=o.add(lc({pulse:Ae(u)}));o.addData(r,new ju(o,u,u,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function q1e(e,t,n){const i=t.add(Dj({pulse:n.pulse})),r=t.fork();r.add(lc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function Yj(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,u=t.add(gv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=Xa(f,t);u.update=d.$expr,u.params=d.$params}function Kb(e,t){const n=jj(e),i=e.type===Wb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===RM||n===DM,o,u,f,d,h,p,y;const v=n===OM||s||r,b=B1e(e.from,i,t);u=t.add(xme({key:b.key||(e.key?yp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Ae(u);u=f=t.add(ha({pulse:S})),u=t.add(Cme({markdef:k1e(e),interactive:O1e(e.interactive,t),clip:M1e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ae(u)}));const _=Ae(u);u=d=t.add(Oj(Cj(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const M=jM(k,t),D=M.metadata;(D.generates||D.changes)&&J("Mark transforms should not generate new data."),D.nomod||(d.params.mod=!0),M.params.pulse=Ae(u),t.add(u=M)}),e.sort&&(u=t.add(Fme({sort:t.compareRef(e.sort),pulse:Ae(u)})));const w=Ae(u);(r||s)&&(s=t.add(Nj({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Ae(s));const A=t.add(kj({mark:_,pulse:p||w}));y=Ae(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,S),r?U1e(e,t,b):v?q1e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=P1e(a,y,t));const $=t.add(Rj({pulse:y})),T=t.add(lc({pulse:Ae($)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new ju(t,f,$,T)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&J("Marks only support modify triggers."),Yj(k,t,h)}))}function P1e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:on(a)?n.signalRef(a.signal):a,method:on(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=on(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Ae(n.add(kme(s)))}function I1e(e,t){const n=t.config.legend,i=e.encode||{},r=Li(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,u=a.style,f={};let d=0,h,p,y;BM.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||J("Missing valid scale for legend.");const v=j1e(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Ae(t.add(ha(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Ae(t.add(Ame(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===Y1?(y=[p1e(e,d,n,i.gradient),I8(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Cu(r.gradientLength())})/100))`)):v===p$?y=[m1e(e,d,n,i.gradient,w),I8(e,n,i.labels,w)]:(h=x1e(e,n),y=[b1e(e,n,i,w,Cu(h.columns))],p.size=Y1e(e,t,y[0].marks)),y=[bp({role:P0e,from:S,encode:_,marks:y,layout:h,interactive:o})],b.title&&y.push(T1e(e,n,i.title,S)),Kb(bp({role:U0e,from:S,encode:Dd(G1e(r,e,n),a,a0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:u}),t)}function j1e(e,t){let n=e.type||P8;return!e.type&&H1e(e)===1&&(e.fill||e.stroke)&&(n=j3(t)?Y1:oA(t)?p$:P8),n!==Y1?n:oA(t)?p$:Y1}function H1e(e){return BM.reduce((t,n)=>t+(e[n]?1:0),0)}function G1e(e,t,n){const i={enter:{},update:{}};return zn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Y1e(e,t,n){const i=Cu(W8("size",e,n)),r=Cu(W8("strokeWidth",e,n)),a=Cu(X1e(n[1].encode,t,r0));return Xa(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function W8(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Pj(e,n[0].encode)}function X1e(e,t,n){return Pj("fontSize",e)||h1e("fontSize",t,n)}const V1e=`item.orient==="${Rd}"?-90:item.orient==="${Nd}"?90:0`;function W1e(e,t){e=be(e)?{text:e}:e;const n=Li(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,u=[],f={},d=Ae(t.add(ha(null,[f])));return u.push(K1e(e,n,Q1e(e),d)),e.subtitle&&u.push(J1e(e,n,i.subtitle,d)),Kb(bp({role:G0e,from:d,encode:Z1e(n,r),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function Q1e(e){const t=e.encode;return t&&t.title||Ue({name:e.name,interactive:e.interactive,style:e.style},t)}function Z1e(e,t){const n={enter:{},update:{}};return zn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:qM},angle:{signal:V1e},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Dd(n,t,a0)}function K1e(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return zn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),lr({type:uc,role:Y0e,style:r1e,from:i,encode:s},n)}function J1e(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return zn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),lr({type:uc,role:X0e,style:a1e,from:i,encode:s},n)}function eye(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(jM(i,t))}),e.on&&e.on.forEach(i=>{Yj(i,t,e.name)}),t.addDataPipeline(e.name,tye(e,t,n))}function tye(e,t,n){const i=[];let r=null,a=!1,s=!1,o,u,f,d,h;for(e.values?on(e.values)||H1(e.format)?(i.push(Q8(t,e)),i.push(r=nu())):i.push(r=nu({$ingest:e.values,$format:e.format})):e.url?H1(e.url)||H1(e.format)?(i.push(Q8(t,e)),i.push(r=nu())):i.push(r=nu({$request:e.url,$format:e.format})):e.source&&(r=o=ge(e.source).map(p=>Ae(t.getData(p).output)),i.push(null)),u=0,f=n.length;u<f;++u)d=n[u],h=d.metadata,!r&&!h.source&&i.push(r=nu()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=Nme({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,nu())),r||i.push(nu()),i.push(lc({})),i}function nu(e){const t=ha({},e);return t.metadata={source:!0},t}function Q8(e,t){return $me({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Xj=e=>e===ml||e===ga,Jb=(e,t,n)=>on(e)?aye(e.signal,t,n):e===Rd||e===ga?t:n,xn=(e,t,n)=>on(e)?iye(e.signal,t,n):Xj(e)?t:n,ta=(e,t,n)=>on(e)?rye(e.signal,t,n):Xj(e)?n:t,Vj=(e,t,n)=>on(e)?sye(e.signal,t,n):e===ga?{value:t}:{value:n},nye=(e,t,n)=>on(e)?oye(e.signal,t,n):e===Nd?{value:t}:{value:n},iye=(e,t,n)=>Wj(`${e} === '${ga}' || ${e} === '${ml}'`,t,n),rye=(e,t,n)=>Wj(`${e} !== '${ga}' && ${e} !== '${ml}'`,t,n),aye=(e,t,n)=>HM(`${e} === '${Rd}' || ${e} === '${ga}'`,t,n),sye=(e,t,n)=>HM(`${e} === '${ga}'`,t,n),oye=(e,t,n)=>HM(`${e} === '${Nd}'`,t,n),Wj=(e,t,n)=>(t=t!=null?bn(t):t,n=n!=null?bn(n):n,Z8(t)&&Z8(n)?(t=t?t.signal||ce(t.value):null,n=n?n.signal||ce(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[Ue({test:e},t)].concat(n||[])),Z8=e=>e==null||Object.keys(e).length===1,HM=(e,t,n)=>({signal:`${e} ? (${$f(t)}) : (${$f(n)})`}),lye=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Rd}' ? (${$f(i)}) : `:"")+(n!=null?`${e} === '${ml}' ? (${$f(n)}) : `:"")+(r!=null?`${e} === '${Nd}' ? (${$f(r)}) : `:"")+(t!=null?`${e} === '${ga}' ? (${$f(t)}) : `:"")+"(null)"}),$f=e=>on(e)?e.signal:e==null?null:ce(e),uye=(e,t)=>t===0?0:on(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Of=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function hf(e,t,n,i){let r;if(t&&ve(t,e))return t[e];if(ve(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[LM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[r0][r]}return null}function K8(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function cye(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,u,f;if(on(s)){const h=K8([n.axisX,n.axisY]),p=K8([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=xn(s,hf(f,n.axisX,r,i),hf(f,n.axisY,r,i));u={};for(f of p)u[f]=lye(s.signal,hf(f,n.axisTop,r,i),hf(f,n.axisBottom,r,i),hf(f,n.axisLeft,r,i),hf(f,n.axisRight,r,i))}else o=s===ga||s===ml?n.axisX:n.axisY,u=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||u||a?Ue({},r,o,u,a):r}function fye(e,t,n,i){const r=Li(e,t),a=e.orient;let s,o;const u={enter:s={opacity:Ke},update:o={opacity:Tr},exit:{opacity:Ke}};zn(u,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=J8(e,0),d=J8(e,1);return s.x=o.x=xn(a,f,Ke),s.x2=o.x2=xn(a,d),s.y=o.y=ta(a,f,Ke),s.y2=o.y2=ta(a,d),lr({type:UM,role:N0e,from:i,encode:u},n)}function J8(e,t){return{scale:e.scale,range:t}}function dye(e,t,n,i,r){const a=Li(e,t),s=e.orient,o=e.gridScale,u=Jb(s,1,-1),f=hye(e.offset,u);let d,h,p;const y={enter:d={opacity:Ke},update:p={opacity:Tr},exit:h={opacity:Ke}};zn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Cr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=xn(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:u,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:u,offset:f}:Ue(b,{mult:u,offset:f});return d.x=p.x=xn(s,v,S),d.y=p.y=ta(s,v,S),d.x2=p.x2=ta(s,_),d.y2=p.y2=xn(s,_),h.x=xn(s,v),h.y=ta(s,v),lr({type:UM,role:z0e,key:Cr,from:i,encode:y},n)}function hye(e,t){if(t!==1)if(!me(e))e=on(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=Ue({},e);for(;n.mult!=null;)if(me(n.mult))n=n.mult=Ue({},n.mult);else return n.mult=on(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function gye(e,t,n,i,r,a){const s=Li(e,t),o=e.orient,u=Jb(o,-1,1);let f,d,h;const p={enter:f={opacity:Ke},update:h={opacity:Tr},exit:d={opacity:Ke}};zn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=bn(r);y.mult=u;const v={scale:e.scale,field:Cr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=xn(o,Ke,v),h.y2=f.y2=xn(o,y),d.x=xn(o,v),h.x=f.x=ta(o,Ke,v),h.x2=f.x2=ta(o,y),d.y=ta(o,v),lr({type:UM,role:L0e,key:Cr,from:i,encode:p},n)}function rw(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function pye(e,t,n,i,r,a){const s=Li(e,t),o=e.orient,u=e.scale,f=Jb(o,-1,1),d=Cu(s("labelFlush")),h=Cu(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=bn(r);S.mult=f,S.offset=bn(s("labelPadding")||0),S.offset.mult=f;const _={scale:u,field:Cr,band:.5,offset:Ij(a.offset,s("labelOffset"))},w=xn(o,v?rw(u,d,'"left"','"right"','"center"'):{value:"center"},nye(o,"left","right")),A=xn(o,Vj(o,"bottom","top"),v?rw(u,d,'"top"','"bottom"','"middle"'):{value:"middle"}),$=rw(u,d,`-(${h})`,h,0);v=v&&h;const T={opacity:Ke,x:xn(o,_,S),y:ta(o,_,S)},k={enter:T,update:b={opacity:Tr,text:{field:FM},x:T.x,y:T.y,align:w,baseline:A},exit:{opacity:Ke,x:T.x,y:T.y}};zn(k,{dx:!p&&v?xn(o,$):null,dy:!y&&v?ta(o,$):null}),zn(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const M=s("labelBound");let D=s("labelOverlap");return D=D||M?{separation:s("labelSeparation"),method:D,order:"datum.index",bound:M?{scale:u,orient:o,tolerance:M}:null}:void 0,b.align!==w&&(b.align=Of(b.align,w)),b.baseline!==A&&(b.baseline=Of(b.baseline,A)),lr({type:uc,role:F0e,style:r0,key:Cr,from:i,encode:k,overlap:D},n)}function mye(e,t,n,i){const r=Li(e,t),a=e.orient,s=Jb(a,-1,1);let o,u;const f={enter:o={opacity:Ke,anchor:bn(r("titleAnchor",null)),align:{signal:qM}},update:u=Ue({},o,{opacity:Tr,text:bn(e.title)}),exit:{opacity:Ke}},d={signal:`lerp(range("${e.scale}"), ${Qb(0,1,.5)})`};return u.x=xn(a,d),u.y=ta(a,d),o.angle=xn(a,Ke,uye(s,90)),o.baseline=xn(a,Vj(a,ml,ga),{value:ml}),u.angle=o.angle,u.baseline=o.baseline,zn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),yye(r,a,f,n),f.update.align=Of(f.update.align,o.align),f.update.angle=Of(f.update.angle,o.angle),f.update.baseline=Of(f.update.baseline,o.baseline),lr({type:uc,role:B0e,style:LM,from:i,encode:f},n)}function yye(e,t,n,i){const r=(o,u)=>o!=null?(n.update[u]=Of(bn(o),n.update[u]),!1):!vf(u,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?bn(s):xn(t,bn(s),bn(a))}function vye(e,t){const n=cye(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,u=Li(e,n),f=g1e(u),d={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},h=Ae(t.add(ha({},[d]))),p=Ae(t.add(bme({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(dye(e,n,i.grid,p,f)),d.ticks&&(v=u("tickSize"),y.push(gye(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(pye(e,n,i.labels,p,v,f))),d.domain&&y.push(fye(e,n,i.domain,h)),d.title&&y.push(mye(e,n,i.title,h)),Kb(bp({role:R0e,from:h,encode:Dd(bye(u,e),r,a0),marks:y,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:a,interactive:s,style:o}),t)}function bye(e,t){const n={enter:{},update:{}};return zn(n,{orient:e("orient"),offset:e("offset")||0,position:Yr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Qj(e,t,n){const i=ge(e.signals),r=ge(e.scales);return n||i.forEach(a=>Tj(a,t)),ge(e.projections).forEach(a=>Zme(a,t)),r.forEach(a=>Ume(a,t)),ge(e.data).forEach(a=>eye(a,t)),r.forEach(a=>qme(a,t)),(n||i).forEach(a=>vme(a,t)),ge(e.axes).forEach(a=>vye(a,t)),ge(e.marks).forEach(a=>Kb(a,t)),ge(e.legends).forEach(a=>I1e(a,t)),e.title&&W1e(e.title,t),t.parseLambdas(),t}const xye=e=>Dd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Sye(e,t){const n=t.config,i=Ae(t.root=t.add(gv())),r=Eye(e,n);r.forEach(f=>Tj(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ha()),s=t.add(Oj(Cj(xye(e.encode),Wb,DM,e.style,t,{pulse:Ae(a)}))),o=t.add(Nj({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ae(s)}));t.operators.pop(),t.pushState(Ae(s),Ae(o),null),Qj(e,t,r),t.operators.push(o);let u=t.add(kj({mark:i,pulse:Ae(o)}));return u=t.add(Rj({pulse:Ae(u)})),u=t.add(lc({pulse:Ae(u)})),t.addData("root",new ju(t,a,a,u)),t}function sg(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Eye(e,t){const n=s=>Yr(e[s],t[s]),i=[sg("background",n("background")),sg("autosize",k0e(n("autosize"))),sg("padding",D0e(n("padding"))),sg("width",n("width")||0),sg("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return ge(e.signals).forEach(s=>{ve(r,s.name)?s=Ue(r[s.name],s):i.push(s),a[s.name]=s}),ge(t.signals).forEach(s=>{!ve(a,s.name)&&!ve(r,s.name)&&i.push(s)}),i}function Zj(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function eF(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Zj.prototype=eF.prototype={parse(e){return Qj(e,this)},fork(){return new eF(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof c$?Ae(e):e;return this.add(Rme({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ae(this.add(lc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ae(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qe(this._parent)},encode(){return Qe(this._encode)},lookup(){return Qe(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(be(e))return yp(e,t);e.signal||J("Unsupported field reference: "+ce(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ae(this.add(_me(r)))}return i},compareRef(e){let t=!1;const n=a=>on(a)?(t=!0,this.signalRef(a.signal)):lme(a)?(t=!0,this.exprRef(a.expr)):a,i=ge(e.field).map(n),r=ge(e.order).map(n);return t?Ae(this.add(q8({fields:i,orders:r}))):B8(i,r)},keyRef(e,t){let n=!1;const i=a=>on(a)?(n=!0,Ae(r[a.signal])):a,r=this.signals;return e=ge(e).map(i),n?Ae(this.add(wme({fields:e,flat:t}))):rme(e,t)},sortRef(e){if(!e)return e;const t=Xb(e.op,e.field),n=e.order||ame;return n.signal?Ae(this.add(q8({fields:t,orders:this.signalRef(n.signal)}))):B8(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return ve(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&J("Duplicate signal name: "+ce(e));const n=t instanceof c$?t:this.add(gv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||J("Unrecognized signal name: "+ce(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ae(this.signals[e]):(ve(this.lambdas,e)||(this.lambdas[e]=this.add(gv(null))),Ae(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Xa(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!me(e)?e:this.signalRef(e.signal||GM(e))},exprRef(e,t){const n={expr:Xa(e,this)};return t&&(n.expr.$name=t),Ae(this.add(Sme(n)))},addBinding(e,t){this.bindings||J("Nested signals do not support binding: "+ce(e)),this.bindings.push(Ue({signal:e},t))},addScaleProj(e,t){ve(this.scales,e)&&J("Duplicate scale or projection name: "+ce(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,zme(t))},addProjection(e,t){this.addScaleProj(e,Dme(t))},getScale(e){return this.scales[e]||J("Unrecognized scale name: "+ce(e)),this.scales[e]},scaleRef(e){return Ae(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return ve(this.data,e)&&J("Duplicate data set name: "+ce(e)),this.data[e]=t},getData(e){return this.data[e]||J("Undefined data set name: "+ce(e)),this.data[e]},addDataPipeline(e,t){return ve(this.data,e)&&J("Duplicate data set name: "+ce(e)),this.addData(e,ju.fromEntries(this,t))}};function GM(e){return(te(e)?_ye:wye)(e)}function _ye(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(me(r)?r.signal||GM(r):ce(r))}return n+"]"}function wye(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+ce(i)+":"+(me(r)?r.signal||GM(r):ce(r));return t+"}"}function Aye(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function $ye(e,t,n){return me(e)||J("Input Vega specification must be an object."),t=Uv(Aye(),t,e.config),Sye(e,new Zj(t,n)).toRuntime()}var Cye="6.1.2";Ue(If,pte,Yse,woe,uue,ice,kfe,ufe,Dfe,nde,dde,bde);const Tye=Cye,Mye=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Jt,CanvasHandler:Wp,CanvasRenderer:Ty,DATE:Oi,DAY:Gn,DAYOFYEAR:Ga,Dataflow:Cf,Debug:X9,Error:nC,EventStream:Jv,Gradient:qU,GroupItem:Eb,HOURS:ar,Handler:gT,HybridHandler:kq,HybridRenderer:vA,Info:Y9,Item:Sb,MILLISECONDS:ra,MINUTES:sr,MONTH:Wn,Marks:or,MultiPulse:TC,None:G9,Operator:xt,Parameters:Kv,Pulse:il,QUARTER:ki,RenderType:Vo,Renderer:Vp,ResourceLoader:YU,SECONDS:Or,SVGHandler:yq,SVGRenderer:xT,SVGStringRenderer:Mq,Scenegraph:uq,TIME_UNITS:vC,Transform:Z,View:pj,WEEK:an,Warn:iC,YEAR:Nn,accessor:Fi,accessorFields:Vn,accessorName:qt,array:ge,ascending:Mp,bandwidthNRD:DC,bin:CL,bootstrapCI:TL,boundClip:qq,boundContext:Hp,boundItem:hA,boundMark:aq,boundStroke:eo,changeset:rc,clampRange:r7,codegenExpression:II,compare:lC,constant:Jn,cumulativeLogNormal:BC,cumulativeNormal:tb,cumulativeUniform:IC,dayofyear:N7,debounce:uC,defaultLocale:_C,definition:wL,densityLogNormal:LC,densityNormal:RC,densityUniform:PC,domChild:rn,domClear:Sr,domCreate:Yo,domFind:hT,dotbin:ML,error:J,expressionFunction:Xt,extend:Ue,extent:Ia,extentIndex:a7,falsy:zo,fastmap:Sd,field:Mr,flush:s7,font:Cb,fontFamily:Xp,fontSize:es,format:w1,formatLocale:sy,formats:$C,hasOwnProperty:ve,id:Tp,identity:Kn,inferType:hL,inferTypes:gL,ingest:st,inherits:fe,inrange:Sf,interpolate:H3,interpolateColors:bb,interpolateRange:$U,intersect:Fq,intersectBoxLine:Ef,intersectPath:K3,intersectPoint:J3,intersectRule:VU,isArray:te,isBoolean:ec,isDate:tl,isFunction:qe,isIterable:o7,isNumber:nt,isObject:me,isRegExp:cC,isString:be,isTuple:Qv,key:fC,lerp:l7,lineHeight:hl,loader:Vv,locale:fL,logger:rC,lruCache:u7,markup:bT,merge:c7,mergeConfig:Uv,multiLineOffset:cT,one:bd,pad:f7,panLinear:K9,panLog:J9,panPow:e7,panSymlog:t7,parse:$ye,parseExpression:bM,parseSelector:Cl,path:sb,pathCurves:W3,pathEqual:Pq,pathParse:Vf,pathRectangle:jU,pathRender:ap,pathSymbols:IU,pathTrail:HU,peek:Qe,point:Mb,projection:UT,quantileLogNormal:UC,quantileNormal:nb,quantileUniform:jC,quantiles:kC,quantizeInterpolator:CU,quarter:n7,quartiles:OC,get random(){return Dr},randomInteger:bee,randomKDE:zC,randomLCG:vee,randomLogNormal:OL,randomMixture:DL,randomNormal:NC,randomUniform:RL,read:yL,regressionConstant:HC,regressionExp:zL,regressionLinear:GC,regressionLoess:BL,regressionLog:NL,regressionPoly:LL,regressionPow:FL,regressionQuad:YC,renderModule:kb,repeat:dg,resetDefaultLocale:pJ,resetSVGDefIds:cse,responseType:mL,runtimeContext:nj,sampleCurve:rb,sampleLogNormal:FC,sampleNormal:eb,sampleUniform:qC,scale:rt,sceneEqual:ST,sceneFromJSON:oq,scenePickVisit:xy,sceneToJSON:sq,sceneVisit:aa,sceneZOrder:eT,scheme:G3,serializeXML:Aq,setHybridRendererOptions:sse,setRandom:mee,span:kp,splitAccessPath:Za,stringValue:ce,textMetrics:tr,timeBin:Z7,timeFloor:P7,timeFormatLocale:Jg,timeInterval:Ad,timeOffset:H7,timeSequence:X7,timeUnitSpecifier:R7,timeUnits:bC,toBoolean:dC,toDate:hC,toNumber:Yn,toSet:ia,toString:gC,transform:AL,transforms:If,truncate:d7,truthy:kr,tupleid:$e,typeParsers:Ww,utcFloor:I7,utcInterval:$d,utcOffset:G7,utcSequence:V7,utcdayofyear:L7,utcquarter:i7,utcweek:B7,version:Tye,visitArray:Bo,week:z7,writeConfig:xd,zero:jo,zoomLinear:aC,zoomLog:sC,zoomPow:ey,zoomSymlog:oC},Symbol.toStringTag,{value:"Module"}));var kye="6.2.0",Oye={version:kye};function YM(e){return se(e,"or")}function XM(e){return se(e,"and")}function VM(e){return se(e,"not")}function V1(e,t){if(VM(e))V1(e.not,t);else if(XM(e))for(const n of e.and)V1(n,t);else if(YM(e))for(const n of e.or)V1(n,t);else t(e)}function Df(e,t){return VM(e)?{not:Df(e.not,t)}:XM(e)?{and:e.and.map(n=>Df(n,t))}:YM(e)?{or:e.or.map(n=>Df(n,t))}:t(e)}const ze=structuredClone;function Kj(e){throw new Error(e)}function id(e,t){const n={};for(const i of t)ve(e,i)&&(n[i]=e[i]);return n}function ir(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>lt(e)).join(",")})`};function Ve(e){if(nt(e))return e;const t=be(e)?e:lt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function y$(e){return e===!1||e===null}function Ge(e,t){return e.includes(t)}function rd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function WM(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Jj(e,...t){for(const n of t)Dye(e,n??{});return e}function Dye(e,t){for(const n of re(t))xd(e,n,t[n],!0)}function Na(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Rye(e,t){const n=re(e),i=re(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function eH(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function QM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function v$(e){const t=new Set;for(const n of e){const r=Za(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function ZM(e,t){return e===void 0||t===void 0?!0:QM(v$(e),v$(t))}function St(e){return re(e).length===0}const re=Object.keys,Kt=Object.values,yl=Object.entries;function xp(e){return e===!0||e===!1}function Mt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Xg(e,t){return VM(e)?`!(${Xg(e.not,t)})`:XM(e)?`(${e.and.map(n=>Xg(n,t)).join(") && (")})`:YM(e)?`(${e.or.map(n=>Xg(n,t)).join(") || (")})`:t(e)}function pv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&pv(e[n],t)&&delete e[n],St(e)}function s0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function KM(e,t="datum"){const n=Za(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(ce).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function tH(e,t="datum"){return`${t}[${ce(Za(e).join("."))}]`}function ft(e){return`datum['${e.replaceAll("'","\\'")}']`}function Nye(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Nr(e){return`${Za(e).map(Nye).join("\\.")}`}function Hu(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function zd(e){return`${Za(e).join(".")}`}function ad(e){return e?Za(e).length:0}function Gt(...e){return e.find(t=>t!==void 0)}let nH=42;function iH(e){const t=++nH;return e?String(e)+t:t}function zye(){nH=42}function rH(e){return aH(e)?e:`__${e}`}function aH(e){return e.startsWith("__")}function Sp(e){if(e!==void 0)return(e%360+360)%360}function ex(e){return nt(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const tF=Object.getPrototypeOf(structuredClone({}));function er(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!er(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!er(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==tF.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==tF.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!er(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function lt(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const u=o[r],f=n(i[u]);f&&(a&&(a+=","),a+=`${JSON.stringify(u)}:${f}`)}return t.splice(s,1),`{${a}}`})(e)}function se(e,t){return me(e)&&ve(e,t)&&e[t]!==void 0}const js="row",Hs="column",tx="facet",kt="x",wn="y",pa="x2",rs="y2",Tl="xOffset",Fd="yOffset",ma="radius",no="radius2",Lr="theta",io="theta2",ya="latitude",va="longitude",ba="latitude2",zr="longitude2",Ml="time",Ri="color",as="fill",ss="stroke",Ni="shape",ro="size",cc="angle",ao="opacity",kl="fillOpacity",Ol="strokeOpacity",Dl="strokeWidth",Rl="strokeDash",o0="text",sd="order",l0="detail",nx="key",Gu="tooltip",ix="href",rx="url",ax="description",Fye={x:1,y:1,x2:1,y2:1},sH={theta:1,theta2:1,radius:1,radius2:1};function oH(e){return ve(sH,e)}const JM={longitude:1,longitude2:1,latitude:1,latitude2:1};function lH(e){switch(e){case ya:return"y";case ba:return"y2";case va:return"x";case zr:return"x2"}}function uH(e){return ve(JM,e)}const Lye=re(JM),ek={...Fye,...sH,...JM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Rf(e){return e===Ri||e===as||e===ss}const cH={row:1,column:1,facet:1},$r=re(cH),tk={...ek,...cH},Bye=re(tk),{order:U$e,detail:q$e,tooltip:P$e,...Uye}=tk,{row:I$e,column:j$e,facet:H$e,...qye}=Uye;function Pye(e){return ve(qye,e)}function fH(e){return ve(tk,e)}const Iye=[pa,rs,ba,zr,io,no];function dH(e){return fc(e)!==e}function fc(e){switch(e){case pa:return kt;case rs:return wn;case ba:return ya;case zr:return va;case io:return Lr;case no:return ma}return e}function vl(e){if(oH(e))switch(e){case Lr:return"startAngle";case io:return"endAngle";case ma:return"outerRadius";case no:return"innerRadius"}return e}function os(e){switch(e){case kt:return pa;case wn:return rs;case ya:return ba;case va:return zr;case Lr:return io;case ma:return no}}function zi(e){switch(e){case kt:case pa:return"width";case wn:case rs:return"height"}}function hH(e){switch(e){case kt:return"xOffset";case wn:return"yOffset";case pa:return"x2Offset";case rs:return"y2Offset";case Lr:return"thetaOffset";case ma:return"radiusOffset";case io:return"theta2Offset";case no:return"radius2Offset"}}function nk(e){switch(e){case kt:return"xOffset";case wn:return"yOffset"}}function jye(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Hye=re(ek),{x:G$e,y:Y$e,x2:X$e,y2:V$e,xOffset:W$e,yOffset:Q$e,latitude:Z$e,longitude:K$e,latitude2:J$e,longitude2:eCe,theta:tCe,theta2:nCe,radius:iCe,radius2:rCe,...ik}=ek,Gye=re(ik),rk={x:1,y:1},so=re(rk);function Yt(e){return ve(rk,e)}const ak={theta:1,radius:1},Yye=re(ak);function sx(e){return e==="width"?kt:wn}const gH={xOffset:1,yOffset:1};function u0(e){return ve(gH,e)}const Xye={time:1};function aw(e){return e in Xye}const{text:aCe,tooltip:sCe,href:oCe,url:lCe,description:uCe,detail:cCe,key:fCe,order:dCe,...pH}=ik,Vye=re(pH);function Wye(e){return ve(ik,e)}function Qye(e){switch(e){case Ri:case as:case ss:case ro:case Ni:case ao:case Dl:case Rl:return!0;case kl:case Ol:case cc:case Ml:return!1}}const mH={...rk,...ak,...gH,...pH},sk=re(mH);function ls(e){return ve(mH,e)}function Zye(e,t){return Jye(e)[t]}const yH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:hCe,...Kye}=yH;function Jye(e){switch(e){case Ri:case as:case ss:case ax:case l0:case nx:case Gu:case ix:case sd:case ao:case kl:case Ol:case Dl:case tx:case js:case Hs:return yH;case kt:case wn:case Tl:case Fd:case ya:case va:case Ml:return Kye;case pa:case rs:case ba:case zr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ro:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Rl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Ni:return{point:"always",geoshape:"always"};case o0:return{text:"always"};case cc:return{point:"always",square:"always",text:"always"};case rx:return{image:"always"};case Lr:return{text:"always",arc:"always"};case ma:return{text:"always",arc:"always"};case io:case no:return{arc:"always"}}}function sw(e){switch(e){case kt:case wn:case Lr:case ma:case Tl:case Fd:case ro:case cc:case Dl:case ao:case kl:case Ol:case Ml:case pa:case rs:case io:case no:return;case tx:case js:case Hs:case Ni:case Rl:case o0:case Gu:case ix:case rx:case ax:return"discrete";case Ri:case as:case ss:return"flexible";case ya:case va:case ba:case zr:case l0:case nx:case sd:return}}const eve={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},tve={count:1,min:1,max:1};function Zs(e){return se(e,"argmin")}function Nl(e){return se(e,"argmax")}function ok(e){return be(e)&&ve(eve,e)}const nve=new Set(["count","valid","missing","distinct"]);function ox(e){return be(e)&&nve.has(e)}function ive(e){return be(e)&&Ge(["min","max"],e)}const rve=new Set(["count","sum","distinct","valid","missing"]),ave=new Set(["mean","average","median","q1","q3","min","max"]);function vH(e){return ec(e)&&(e=bx(e,void 0)),`bin${re(e).map(t=>lx(e[t])?Mt(`_${t}_${yl(e[t])}`):Mt(`_${t}_${e[t]}`)).join("")}`}function _t(e){return e===!0||dc(e)&&!e.binned}function Tn(e){return e==="binned"||dc(e)&&e.binned===!0}function dc(e){return me(e)}function lx(e){return se(e,"param")}function nF(e){switch(e){case js:case Hs:case ro:case Ri:case as:case ss:case Dl:case ao:case kl:case Ol:case Ni:return 6;case Rl:return 4;default:return 10}}function c0(e){return se(e,"expr")}function Mn(e,{level:t}={level:0}){const n=re(e||{}),i={};for(const r of n)i[r]=t===0?Zi(e[r]):Mn(e[r],{level:t-1});return i}function bH(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:u,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...u?{subtitleColor:u}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=id(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function Io(e){return be(e)||te(e)&&be(e[0])}function _e(e){return se(e,"signal")}function hc(e){return se(e,"step")}function sve(e){return te(e)?!1:se(e,"fields")&&!se(e,"data")}function ove(e){return te(e)?!1:se(e,"fields")&&se(e,"data")}function Us(e){return te(e)?!1:se(e,"field")&&se(e,"data")}const lve={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},uve=re(lve),cve={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},b$=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],fve=" – ";function xH(e){const t=te(e.condition)?e.condition.map(iF):iF(e.condition);return{...Zi(e),condition:t}}function Zi(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function iF(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function $t(e){if(c0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return _e(e)?e:e!==void 0?{value:e}:void 0}function dve(e){return _e(e)?e.signal:ce(e)}function rF(e){return _e(e)?e.signal:ce(e.value)}function Jr(e){return _e(e)?e.signal:e==null?null:ce(e)}function hve(e,t,n){for(const i of n){const r=Va(i,t.markDef,t.config);r!==void 0&&(e[i]=$t(r))}return e}function SH(e){return[].concat(e.type,e.style??[])}function yt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&se(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Va(e,t,n,i)}function Va(e,t,n,{vgChannel:i}={}){const r=x$(e,t,n.style);return Gt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function x$(e,t,n){return EH(e,SH(t),n)}function EH(e,t,n){t=ge(t);let i;for(const r of t){const a=n[r];se(a,e)&&(i=a[e])}return i}function _H(e,t){return ge(e).reduce((n,i)=>(n.field.push(de(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function wH(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(er(r,i))return;n.push(i)}),n}function AH(e,t){return er(e,t)||!t?e:e?[...ge(e),...ge(t)].join(", "):t}function $H(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((Io(n)||_e(n))&&(Io(i)||_e(i)))return{explicit:e.explicit,value:AH(n,i)};if(Io(n)||_e(n))return{explicit:e.explicit,value:n};if(Io(i)||_e(i))return{explicit:e.explicit,value:i};if(!Io(n)&&!_e(n)&&!Io(i)&&!_e(i))return{explicit:e.explicit,value:wH(n,i)};throw new Error("It should never reach here")}function lk(e){return`Invalid specification ${lt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const gve='Autosize "fit" only works for single views and layered views.';function aF(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function sF(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function oF(e){return e?`Dropping "fit-${e}" because spec has discrete ${zi(e)}.`:'Dropping "fit" because spec has discrete size.'}function uk(e){return`Unknown field for ${e}. Cannot calculate view size.`}function lF(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function pve(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function mve(e){return`The "nearest" transform is not supported for ${e} marks.`}function CH(e){return`Selection not supported for ${e} yet.`}function yve(e){return`Cannot find a selection named "${e}".`}const vve="Scale bindings are currently only supported for scales with unbinned, continuous domains.",bve="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",xve="Legend bindings are only supported for selections over an individual field or encoding channel.";function Sve(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Eve(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const _ve="The same selection must be used to override scale domains in a layered view.",wve='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Ave(e){return`Unknown repeated value "${e}".`}function uF(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const $ve="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",ck="Animation involving facet, layer, or concat is currently unsupported.";function Cve(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${ce(e)}.`}function Tve(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${ce(t)} encoding found for selection ${ce(n.param)}. Using "field": ${ce(i)}.`}const Mve="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function kve(e){return`Unrecognized parse "${e}".`}function cF(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Ove="Attempt to add the same child twice.";function Dve(e){return`Ignoring an invalid transform: ${lt(e)}.`}const Rve='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function fF(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Nve(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${lt(t)} is overridden by a child projection ${lt(n)}.`}const zve="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Fve(e){return`${e}Offset dropped because ${e} is continuous`}function Lve(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${lt(n)}}.`}function TH(e){return`Invalid field type "${e}".`}function Bve(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Uve(e){return`Invalid aggregation operator "${e}".`}function MH(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function qve(e){return`Position range does not support relative band size for ${e}.`}function S$(e,t){return`Dropping ${lt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Pve="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function ux(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Ive(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function jve(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Hve(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Gve(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function ow(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Yve(e){return`The ${e} for range marks cannot be an expression`}function Xve(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Vve(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Wve(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Qve(e){return`Cannot use the relative band size with ${e} scale.`}function Zve(e){return`Using unaggregated domain with raw field has no effect (${lt(e)}).`}function Kve(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function Jve(e){return`Unaggregated domain is currently unsupported for log scale (${lt(e)}).`}function ebe(e){return`Cannot apply size to non-oriented mark "${e}".`}function tbe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function nbe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function kH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function OH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function ibe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${lt(n)} and ${lt(i)}). Using ${lt(n)}.`}function rbe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${lt(n)} and ${lt(i)}). Using the union of the two domains.`}function abe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function sbe(e){return`Dropping sort property ${lt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const dF="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",obe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",lbe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",ube="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function cbe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function fbe(e){return`Stack is applied to a non-linear scale (${e}).`}function dbe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function mv(e,t){return`Invalid ${e}: ${lt(t)}.`}function hbe(e){return`Dropping day from datetime ${lt(e)} as day cannot be combined with other units.`}function gbe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function pbe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function mbe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function hF(e){return`1D error band does not support ${e}.`}function DH(e){return`Channel ${e} is required for "binned" bin.`}function ybe(e){return`Channel ${e} should not be used with "binned" bin.`}function vbe(e){return`Domain for ${e} is required for threshold scale.`}const RH=rC(iC);let Yu=RH;function bbe(e){return Yu=e,Yu}function xbe(){return Yu=RH,Yu}function fk(...e){Yu.error(...e)}function le(...e){Yu.warn(...e)}function Sbe(...e){Yu.debug(...e)}function gc(e){if(e&&me(e)){for(const t of hk)if(se(e,t))return!0}return!1}const NH=["january","february","march","april","may","june","july","august","september","october","november","december"],Ebe=NH.map(e=>e.substr(0,3)),zH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],_be=zH.map(e=>e.substr(0,3));function wbe(e){if(ex(e)&&(e=+e),nt(e))return e>4&&le(mv("quarter",e)),e-1;throw new Error(mv("quarter",e))}function Abe(e){if(ex(e)&&(e=+e),nt(e))return e-1;{const t=e.toLowerCase(),n=NH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Ebe.indexOf(i);if(r!==-1)return r;throw new Error(mv("month",e))}}function $be(e){if(ex(e)&&(e=+e),nt(e))return e%7;{const t=e.toLowerCase(),n=zH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=_be.indexOf(i);if(r!==-1)return r;throw new Error(mv("day",e))}}function dk(e,t){const n=[];if(t&&e.day!==void 0&&re(e).length>1&&(le(hbe(e)),e=ze(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Abe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?wbe(e.quarter):e.quarter;n.push(nt(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?$be(e.day):e.day;n.push(nt(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Xu(e){const n=dk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Cbe(e){const n=dk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Tbe(e){const t=dk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const FH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},hk=re(FH);function Mbe(e){return ve(FH,e)}function pc(e){return me(e)?e.binned:LH(e)}function LH(e){return e?.startsWith("binned")}function gk(e){return e.startsWith("utc")}function kbe(e){return e.substring(3)}const Obe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function cx(e){return hk.filter(t=>UH(e,t))}function BH(e){const t=cx(e);return t[t.length-1]}function UH(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Dbe(e,t,{end:n}={end:!1}){const i=KM(t),r=gk(e)?"utc":"";function a(u){return u==="quarter"?`(${r}quarter(${i})-1)`:`${r}${u}(${i})`}let s;const o={};for(const u of hk)UH(e,u)&&(o[u]=a(u),s=u);return n&&(o[s]+="+1"),Cbe(o)}function qH(e){if(!e)return;const t=cx(e);return`timeUnitSpecifier(${lt(t)}, ${lt(Obe)})`}function Rbe(e,t,n){if(!e)return;const i=qH(e);return`${n||gk(e)?"utc":"time"}Format(${t}, ${i})`}function Sn(e){if(!e)return;let t;return be(e)?LH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:me(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),gk(t.unit)&&(t.utc=!0,t.unit=kbe(t.unit)),t}function Nbe(e){const{utc:t,...n}=Sn(e);return n.unit?(t?"utc":"")+re(n).map(i=>Mt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${re(n).map(i=>Mt(`_${i}_${n[i]}`)).join("")}`}function PH(e,t=n=>n){const n=Sn(e),i=BH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=IH(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Xu(o))} - ${t(Xu(r))}`}}const zbe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Fbe(e){return ve(zbe,e)}function IH(e,t=1){if(Fbe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Lbe(e){return se(e,"param")}function pk(e){return!!e?.field&&e.equal!==void 0}function mk(e){return!!e?.field&&e.lt!==void 0}function yk(e){return!!e?.field&&e.lte!==void 0}function vk(e){return!!e?.field&&e.gt!==void 0}function bk(e){return!!e?.field&&e.gte!==void 0}function xk(e){if(e?.field){if(te(e.range)&&e.range.length===2)return!0;if(_e(e.range))return!0}return!1}function Sk(e){return!!e?.field&&(te(e.oneOf)||te(e.in))}function Bbe(e){return!!e?.field&&e.valid!==void 0}function jH(e){return Sk(e)||pk(e)||xk(e)||mk(e)||vk(e)||yk(e)||bk(e)}function Ca(e,t){return xx(e,{timeUnit:t,wrapTime:!0})}function Ube(e,t){return e.map(n=>Ca(n,t))}function HH(e,t=!0){const{field:n}=e,i=Sn(e.timeUnit),{unit:r,binned:a}=i||{},s=de(e,{expr:"datum"}),o=r?`time(${a?s:Dbe(r,n)})`:s;if(pk(e))return`${o}===${Ca(e.equal,r)}`;if(mk(e)){const u=e.lt;return`${o}<${Ca(u,r)}`}else if(vk(e)){const u=e.gt;return`${o}>${Ca(u,r)}`}else if(yk(e)){const u=e.lte;return`${o}<=${Ca(u,r)}`}else if(bk(e)){const u=e.gte;return`${o}>=${Ca(u,r)}`}else{if(Sk(e))return`indexof([${Ube(e.oneOf,r).join(",")}], ${o}) !== -1`;if(Bbe(e))return fx(o,e.valid);if(xk(e)){const{range:u}=Mn(e),f=_e(u)?{signal:`${u.signal}[0]`}:u[0],d=_e(u)?{signal:`${u.signal}[1]`}:u[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${Ca(f,r)}, ${Ca(d,r)}])`;const h=[];return f!==null&&h.push(`${o} >= ${Ca(f,r)}`),d!==null&&h.push(`${o} <= ${Ca(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${lt(e)}`)}function fx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function qbe(e){return jH(e)&&e.timeUnit?{...e,timeUnit:Sn(e.timeUnit)}:e}const f0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Pbe(e){return e==="quantitative"||e==="temporal"}function GH(e){return e==="ordinal"||e==="nominal"}const Vu=f0.quantitative,Ek=f0.ordinal,od=f0.temporal,_k=f0.nominal,Ld=f0.geojson;function Ibe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Vu:return"quantitative";case"t":case od:return"temporal";case"o":case Ek:return"ordinal";case"n":case _k:return"nominal";case Ld:return"geojson"}}const kn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},E$={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function jbe(e,t){const n=E$[e],i=E$[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const Hbe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function gF(e){return Hbe[e]}const YH=new Set(["linear","log","pow","sqrt","symlog"]),XH=new Set([...YH,"time","utc"]);function VH(e){return YH.has(e)}const WH=new Set(["quantile","quantize","threshold"]),Gbe=new Set([...XH,...WH,"sequential","identity"]),Ybe=new Set(["ordinal","bin-ordinal","point","band"]);function En(e){return Ybe.has(e)}function sa(e){return Gbe.has(e)}function za(e){return XH.has(e)}function ld(e){return WH.has(e)}const Xbe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function Vbe(e){return!be(e)&&se(e,"name")}function QH(e){return se(e,"param")}function Wbe(e){return se(e,"unionWith")}function Qbe(e){return me(e)&&"field"in e}const Zbe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:gCe,domain:pCe,range:mCe,rangeMax:yCe,rangeMin:vCe,scheme:bCe,...Kbe}=Zbe,Jbe=re(Kbe);function _$(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return za(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return za(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return za(e);case"nice":return za(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return sa(e)&&!Ge(["log","time","utc","threshold","quantile"],e)}}function ZH(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Rf(e)?void 0:Wve(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function exe(e,t){return Ge([Ek,_k],t)?e===void 0||En(e):t===od?Ge([kn.TIME,kn.UTC,void 0],e):t===Vu?VH(e)||ld(e)||e===void 0:!0}function txe(e,t,n=!1){if(!ls(e))return!1;switch(e){case kt:case wn:case Tl:case Fd:case Lr:case ma:return za(t)||t==="band"?!0:t==="point"?!n:!1;case Ml:return Ge(["linear","band"],t);case ro:case Dl:case ao:case kl:case Ol:case cc:return za(t)||ld(t)||Ge(["band","point","ordinal"],t);case Ri:case as:case ss:return t!=="band";case Rl:case Ni:return t==="ordinal"||ld(t)}}function nxe(e){return me(e)&&"value"in e}const vi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},KH=vi.arc,dx=vi.area,hx=vi.bar,ixe=vi.image,gx=vi.line,px=vi.point,rxe=vi.rect,yv=vi.rule,JH=vi.text,wk=vi.tick,axe=vi.trail,Ak=vi.circle,$k=vi.square,eG=vi.geoshape;function zl(e){return["line","area","trail"].includes(e)}function Ep(e){return["rect","bar","image","arc","tick"].includes(e)}const sxe=new Set(re(vi));function Wa(e){return se(e,"type")}const oxe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],lxe=["fill","fillOpacity"],uxe=[...oxe,...lxe],cxe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},pF=re(cxe),lw=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],fxe={area:["line","point"],bar:lw,rect:lw,line:["point"],tick:["bandSize","thickness",...lw]},dxe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},hxe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},tG=re(hxe);function Wu(e){return se(e,"band")}const gxe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},pxe=5,Ck={binSpacing:0,continuousBandSize:pxe,minBandSize:.25,timeUnitBandPosition:.5},mxe={...Ck,binSpacing:1},yxe={...Ck,thickness:1};function vxe(e){return Wa(e)?e.type:e}function nG(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Tk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!sa(i)||r)return"always-valid";const a=nG(yt("invalid",e,t),{isPath:zl(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function bxe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function iG({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function rG({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=la(t),u=ox(o?.aggregate),f=Tk({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:u});if(o&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:fx(de(o,{expr:"datum"}),!1),...xxe(d,n,i)}}}function xxe(e,t,n){if(nxe(e)){const{value:i}=e;return _e(i)?{signal:i.signal}:{value:i}}return iG({scale:t,scaleName:n,mode:"zeroOrMin"})}function Mk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=fc(t),u=kk(e),f=rG({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,u]:u}function Sxe(e){const{datum:t}=e;return gc(t)?Xu(t):`${lt(t)}`}function Tu(e,t,n,i){const r={};if(t&&(r.scale=t),us(e)){const{datum:a}=e;gc(a)?r.signal=Xu(a):_e(a)?r.signal=a.signal:c0(a)?r.signal=a.expr:r.value=a}else r.field=de(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function vv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!_e(s)&&0<s&&s<1?"datum":void 0,u=de(t,{expr:o,suffix:r}),f=n!==void 0?de(n,{expr:o}):de(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?u:f;d.field=h}else{const h=_e(s)?`(1-${s.signal}) * ${u} + ${s.signal} * ${f}`:`${1-s} * ${u} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function Exe({scaleName:e,fieldDef:t}){const n=de(t,{expr:"datum"}),i=de(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function kk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f,bandPosition:d}){if(t){if(Le(t)){const h=s?.get("type");if(pi(t)){d??=bl({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(_t(p)||d&&y&&v===od)return o?.impute?Tu(t,a,{binSuffix:"mid"},{offset:u}):d&&!En(h)?vv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:u}):Tu(t,a,m0(t,e)?{binSuffix:"range"}:{},{offset:u});if(Tn(p)){if(ue(n))return vv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:u});le(DH(e===kt?pa:rs))}}return Tu(t,a,En(h)?{binSuffix:"range"}:{},{offset:u,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(oa(t)){const h=t.value,p=u?{offset:u}:{};return{...Vg(e,h),...p}}}return qe(f)&&(f=f()),f&&{...f,...u?{offset:u}:{}}}function Vg(e,t){return Ge(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Ge(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:$t(t)}function Qu(e){return e&&e!=="number"&&e!=="time"}function aG(e,t,n){return`${e}(${t}${n?`, ${lt(n)}`:""})`}function Ok({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Qu(n))return ea({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=sG(e,i,r),o=ud(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ea({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ea({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&ue(e)&&e.timeUnit===void 0)return ea({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function u(f){return ue(f)?Sn(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(fd(e)){const{unit:f,utc:d}=u(e),h=wxe({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||mc(e)&&e.scale?.type===kn.UTC});return h?{signal:h}:void 0}if(t=w$({type:o,specifiedFormat:t,config:a,normalizeStack:r}),ue(e)&&_t(e.bin)){const f=de(e,{expr:i,binSuffix:"end"});return{signal:d0(s,f,t,n,a)}}else return t||ud(e)==="quantitative"?{signal:`${uG(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function sG(e,t,n){return ue(e)?n?`${de(e,{expr:t,suffix:"end"})}-${de(e,{expr:t,suffix:"start"})}`:de(e,{expr:t}):Sxe(e)}function ea({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=sG(e,i,r),s!=="datum.value"&&ue(e)&&_t(e.bin)){const o=de(e,{expr:i,binSuffix:"end"});return{signal:d0(s,o,t,n,a)}}return{signal:aG(n,s,t)}}function oG(e,t,n,i,r,a){if(!(be(i)&&Qu(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&ud(e)==="quantitative"&&(r.normalizedNumberFormatType&&cd(e)&&e.stack==="normalize"||r.numberFormatType))){if(cd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return w$({type:"quantitative",config:r,normalizeStack:!0});if(fd(e)){const s=ue(e)?Sn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:_xe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return w$({type:t,specifiedFormat:n,config:r})}}function lG(e,t,n){if(e&&(_e(e)||e==="number"||e==="time"))return e;if(fd(t)&&n!=="time"&&n!=="utc")return ue(t)&&Sn(t?.timeUnit)?.utc?"utc":"time"}function w$({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(be(t))return t;if(e===Vu)return i?n.normalizedNumberFormat:n.numberFormat}function _xe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:qH(t)}:i?void 0:n.timeFormat)}function uG(e,t){return`format(${e}, "${t||""}")`}function mF(e,t,n,i){return Qu(n)?aG(n,e,t):uG(e,(be(t)?t:void 0)??i.numberFormat)}function d0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return d0(e,t,r.numberFormat,r.numberFormatType,r);const a=mF(e,n,i,r),s=mF(t,n,i,r);return`${fx(e,!1)} ? "null" : ${a} + "${fve}" + ${s}`}function wxe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${lt(n)})`:(n=be(n)?n:r,`${a?"utc":"time"}Format(${e}, ${lt(n)})`):Rbe(t,e,a)}const mx="min",Axe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function yF(e){return ve(Axe,e)}function $xe(e){return se(e,"encoding")}function Gs(e){return e&&(e.op==="count"||se(e,"field"))}function cG(e){return e&&te(e)}function h0(e){return se(e,"row")||se(e,"column")}function Dk(e){return se(e,"header")}function yx(e){return se(e,"facet")}function Cxe(e){return se(e,"param")}function Txe(e){return!be(e)&&se(e,"repeat")}function vF(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Rk(e){return se(e,"sort")}function bl({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Le(e)&&e.bandPosition!==void 0)return e.bandPosition;if(ue(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Va("timeUnitBandPosition",n,i);if(_t(a))return .5}}function fG({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=zi(e),u=yt(s?"size":o,i,r,{vgChannel:o});if(u!==void 0)return u;if(ue(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Va("timeUnitBandSize",i,r)};if(_t(d)&&!En(a))return{band:1}}if(Ep(i.type))return a?En(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function dG(e,t,n,i){return _t(e.bin)||e.timeUnit&&pi(e)&&e.type==="temporal"?bl({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function hG(e){return se(e,"sort")&&!se(e,"field")}function g0(e){return se(e,"condition")}function vx(e){const t=e?.condition;return!!t&&!te(t)&&ue(t)}function p0(e){const t=e?.condition;return!!t&&!te(t)&&Le(t)}function Mxe(e){const t=e?.condition;return!!t&&(te(t)||oa(t))}function ue(e){return se(e,"field")||e?.aggregate==="count"}function ud(e){return e?.type}function us(e){return se(e,"datum")}function Jo(e){return pi(e)&&!xv(e)||bv(e)}function bF(e){return pi(e)&&e.type==="quantitative"&&!e.bin||bv(e)}function bv(e){return us(e)&&nt(e.datum)}function Le(e){return ue(e)||us(e)}function pi(e){return e&&(se(e,"field")||e.aggregate==="count")&&se(e,"type")}function oa(e){return se(e,"value")}function mc(e){return se(e,"scale")||se(e,"sort")}function cd(e){return se(e,"axis")||se(e,"stack")||se(e,"impute")}function gG(e){return se(e,"legend")}function pG(e){return se(e,"format")||se(e,"formatType")}function kxe(e){return ir(e,["legend","axis","header","scale"])}function Oxe(e){return se(e,"op")}function de(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Rxe(e))n=rH("count");else{let s;if(!t.nofn)if(Oxe(e))s=e.op;else{const{bin:o,aggregate:u,timeUnit:f}=e;_t(o)?(s=vH(o),r=(t.binSuffix??"")+(t.suffix??"")):u?Nl(u)?(a=`["${n}"]`,n=`argmax_${u.argmax}`):Zs(u)?(a=`["${n}"]`,n=`argmin_${u.argmin}`):s=String(u):f&&!pc(f)&&(s=Nbe(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?zd(n):t.expr?tH(n,t.expr)+a:Nr(n)+a}function xv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return ue(e)&&!!e.bin;case"temporal":return!1}throw new Error(TH(e.type))}function Dxe(e){return mc(e)&&ld(e.scale?.type)}function Rxe(e){return e.aggregate==="count"}function Nxe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(_t(i))return`${n} (binned)`;if(r&&!pc(r)){const s=Sn(r)?.unit;if(s)return`${n} (${cx(s).join("-")})`}else if(a)return Nl(a)?`${n} for max ${a.argmax}`:Zs(a)?`${n} for min ${a.argmin}`:`${s0(a)} of ${n}`;return n}function zxe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(Nl(t))return`${r} for argmax(${t.argmax})`;if(Zs(t))return`${r} for argmin(${t.argmin})`;const a=i&&!pc(i)?Sn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||_t(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const mG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return zxe(e);default:return Nxe(e,t)}};let yG=mG;function vG(e){yG=e}function Fxe(){vG(mG)}function Nf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=Nk(e)?.title;if(!ue(e))return r??e.title;const a=e,s=i?zk(a,t):void 0;return n?Gt(r,a.title,s):r??a.title??s}function Nk(e){if(cd(e)&&e.axis)return e.axis;if(gG(e)&&e.legend)return e.legend;if(Dk(e)&&e.header)return e.header}function zk(e,t){return yG(e,t)}function Sv(e){if(pG(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Nk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Lxe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Rk(e)&&te(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!Nl(n)&&!Zs(n))return"quantitative";if(mc(e)&&e.scale?.type)switch(E$[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function la(e){if(ue(e))return e;if(vx(e))return e.condition}function sn(e){if(Le(e))return e;if(p0(e))return e.condition}function bG(e,t,n,i={}){if(be(e)||nt(e)||ec(e)){const r=be(e)?"string":nt(e)?"number":"boolean";return le(Lve(t,r,e)),{value:e}}return Le(e)?Ev(e,t,n,i):p0(e)?{...e,condition:Ev(e.condition,t,n,i)}:e}function Ev(e,t,n,i){if(pG(e)){const{format:r,formatType:a,...s}=e;if(Qu(a)&&!n.customFormatTypes)return le(fF(t)),Ev(s,t,n,i)}else{const r=cd(e)?"axis":gG(e)?"legend":Dk(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Qu(s)&&!n.customFormatTypes)return le(fF(t)),Ev({...e,[r]:o},t,n,i)}}return ue(e)?Fk(e,t,i):Bxe(e)}function Bxe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=nt(n)?"quantitative":be(n)?"nominal":gc(n)?"temporal":void 0,{...e,type:t}}function Fk(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!ok(i)&&!Nl(i)&&!Zs(i)&&(le(Uve(i)),delete o.aggregate),r&&(o.timeUnit=Sn(r)),s&&(o.field=`${s}`),_t(a)&&(o.bin=bx(a,t)),Tn(a)&&!Yt(t)&&le(ybe(t)),pi(o)){const{type:u}=o,f=Ibe(u);u!==f&&(o.type=f),u!=="quantitative"&&ox(i)&&(le(Bve(u,i)),o.type="quantitative")}else if(!dH(t)){const u=Lxe(o,t);o.type=u}if(pi(o)){const{compatible:u,warning:f}=Uxe(o,t)||{};u===!1&&le(f)}if(Rk(o)&&be(o.sort)){const{sort:u}=o;if(yF(u))return{...o,sort:{encoding:u}};const f=u.substring(1);if(u.charAt(0)==="-"&&yF(f))return{...o,sort:{encoding:f,order:"descending"}}}if(Dk(o)){const{header:u}=o;if(u){const{orient:f,...d}=u;if(f)return{...o,header:{...d,labelOrient:u.labelOrient||f,titleOrient:u.titleOrient||f}}}}return o}function bx(e,t){return ec(e)?{maxbins:nF(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:nF(t)}:e}const gf={compatible:!0};function Uxe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case js:case Hs:case tx:return xv(e)?gf:{compatible:!1,warning:jve(t)};case kt:case wn:case Tl:case Fd:case Ri:case as:case ss:case o0:case l0:case nx:case Gu:case ix:case rx:case cc:case Lr:case ma:case ax:return gf;case va:case zr:case ya:case ba:return n!==Vu?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:gf;case ao:case kl:case Ol:case Dl:case ro:case io:case no:case pa:case rs:case Ml:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:gf;case Ni:case Rl:return!xv(e)&&!Dxe(e)?{compatible:!1,warning:Hve(t)}:gf;case sd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:gf}}function fd(e){const{formatType:t}=Sv(e);return t==="time"||!t&&qxe(e)}function qxe(e){return e&&(e.type==="temporal"||ue(e)&&!!e.timeUnit)}function xx(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Sn(t)?.unit;let s=a||n==="temporal",o;return c0(e)?o=e.expr:_e(e)?o=e.signal:gc(e)?(s=!0,o=Xu(e)):(be(e)||nt(e))&&s&&(o=`datetime(${lt(e)})`,Mbe(a)&&(nt(e)&&e<1e4||be(e)&&isNaN(Date.parse(e)))&&(o=Xu({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:lt(e)}function xG(e,t){const{type:n}=e;return t.map(i=>{const r=ue(e)&&!pc(e.timeUnit)?e.timeUnit:void 0,a=xx(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function m0(e,t){return _t(e.bin)?ls(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const xF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function y0(e){return e?.condition}const SG=["domain","grid","labels","ticks","title"],Pxe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},EG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Ixe={...EG,style:1,labelExpr:1,encoding:1};function SF(e){return ve(Ixe,e)}const jxe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},_G=re(jxe);function oo(e){return se(e,"mark")}class Sx{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return oo(t)?vxe(t.mark)===this.name:!1}}function Mu(e,t){const n=e?.[t];return n?te(n)?rd(n,i=>!!i.field):ue(n)||vx(n):!1}function wG(e,t){const n=e?.[t];return n?te(n)?rd(n,i=>!!i.field):ue(n)||us(n)||p0(n):!1}function AG(e,t){if(Yt(t)){const n=e[t];if((ue(n)||us(n))&&(GH(n.type)||ue(n)&&n.timeUnit)){const i=nk(t);return wG(e,i)}}return!1}function $G(e){return rd(Bye,t=>{if(Mu(e,t)){const n=e[t];if(te(n))return rd(n,i=>!!i.aggregate);{const i=la(n);return i&&!!i.aggregate}}return!1})}function CG(e,t){const n=[],i=[],r=[],a=[],s={};return Lk(e,(o,u)=>{if(ue(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=Nk(o)?.title;let S=de(o,{forAs:!0});const _={...b?[]:{title:Nf(o,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(Nl(d)?(w="argmax",S=de({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):Zs(d)?(w="argmin",S=de({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),pi(o)&&_t(h)){if(i.push({bin:h,field:f,as:S}),n.push(de(o,{binSuffix:"end"})),m0(o,u)&&n.push(de(o,{binSuffix:"range"})),Yt(u)){const w={field:`${S}_end`};s[`${u}2`]=w}_.bin="binned",dH(u)||(_.type=Vu)}else if(p&&!pc(p)){r.push({timeUnit:p,field:f,as:S});const w=pi(o)&&o.type!==od&&"time";w&&(u===o0||u===Gu?_.formatType=w:Wye(u)?_.legend={formatType:w,..._.legend}:Yt(u)&&(_.axis={formatType:w,..._.axis}))}s[u]=_}else n.push(f),s[u]=e[u]}else s[u]=e[u]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function Hxe(e,t,n){const i=Zye(t,n);if(i){if(i==="binned"){const r=e[t===pa?kt:wn];return!!(ue(r)&&ue(e[t])&&Tn(r.bin))}}else return!1;return!0}function Gxe(e,t,n,i){const r={};for(const a of re(e))fH(a)||le(Ive(a));for(let a of Hye){if(!e[a])continue;const s=e[a];if(u0(a)){const o=jye(a),u=r[o];if(ue(u)&&Pbe(u.type)&&ue(s)&&!u.timeUnit){le(Fve(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(le(zve),a=Lr),!Hxe(e,a,t)){le(ux(a,t));continue}if(a===ro&&t==="line"&&la(e[a])?.aggregate){le(Pve);continue}if(a===Ri&&(n?"fill"in e:"stroke"in e)){le(MH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===l0||a===sd&&!te(s)&&!oa(s)||a===Gu&&te(s)){if(s){if(a===sd){const o=e[a];if(hG(o)){r[a]=o;continue}}r[a]=ge(s).reduce((o,u)=>(ue(u)?o.push(Fk(u,a)):le(S$(u,a)),o),[])}}else{if(a===Gu&&s===null)r[a]=null;else if(!ue(s)&&!us(s)&&!oa(s)&&!g0(s)&&!_e(s)){le(S$(s,a));continue}r[a]=bG(s,a,i)}}return r}function Ex(e,t){const n={};for(const i of re(e)){const r=bG(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function Yxe(e){const t=[];for(const n of re(e))if(Mu(e,n)){const i=e[n],r=ge(i);for(const a of r)ue(a)?t.push(a):vx(a)&&t.push(a.condition)}return t}function Lk(e,t,n){if(e)for(const i of re(e)){const r=e[i];if(te(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function Xxe(e,t,n,i){return e?re(e).reduce((r,a)=>{const s=e[a];return te(s)?s.reduce((o,u)=>t.call(i,o,u,a),r):t.call(i,r,s,a)},n):n}function TG(e,t){return re(t).reduce((n,i)=>{switch(i){case kt:case wn:case ix:case ax:case rx:case pa:case rs:case Tl:case Fd:case Lr:case io:case ma:case no:case Ml:case ya:case va:case ba:case zr:case o0:case Ni:case cc:case Gu:return n;case sd:if(e==="line"||e==="trail")return n;case l0:case nx:{const r=t[i];if(te(r)||ue(r))for(const a of ge(r))a.aggregate||n.push(de(a,{}));return n}case ro:if(e==="trail")return n;case Ri:case as:case ss:case ao:case kl:case Ol:case Rl:case Dl:{const r=la(t[i]);return r&&!r.aggregate&&n.push(de(r,{})),n}}},[])}function Vxe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(te(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return te(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function A$(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const u=i?` of ${Bk(t)}`:"";return{field:s+t.field,type:t.type,title:_e(o)?{signal:`${o}"${escape(u)}"`}:o+u}}),a=Yxe(n).map(kxe);return{tooltip:[...r,...Na(a,Ve)]}}function Bk(e){const{title:t,field:n}=e;return Gt(t,n)}function Uk(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:u,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=Bk(n);return MG(e,o,r,{mark:u,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...be(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function MG(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...Wa(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...ec(e[t])?{}:e[t]}}]:[]}function kG(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],u=i[`${r}Error2`];return{continuousAxisChannelDef:d1(a,n),continuousAxisChannelDef2:d1(s,n),continuousAxisChannelDefError:d1(o,n),continuousAxisChannelDefError2:d1(u,n),continuousAxis:r}}function d1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&le(mbe(n,t)),i}else return e}function OG(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Wa(n)&&n.orient)return n.orient;if(Jo(r)){if(Jo(a)){const s=ue(r)&&r.aggregate,o=ue(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return fd(a)&&!fd(r)?"horizontal":"vertical"}return"horizontal"}else{if(Jo(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const _v="boxplot",Wxe=["box","median","outliers","rule","ticks"],Qxe=new Sx(_v,RG);function DG(e){return nt(e)?"tukey":e}function RG(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=Wa(n)?n:{type:n};r&&le(CH("boxplot"));const u=o.extent??t.boxplot.extent,f=yt("size",o,t),d=o.invalid,h=DG(u),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:T,customTooltipWithoutAggregatedField:k}=Zxe(e,u,t),M=zd(b.field),{color:D,size:N,...B}=A,F=Wt=>Uk(o,S,b,Wt,t.boxplot),G=F(B),I=F(A),U=(me(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=F({...B,...N?{size:N}:{},color:{condition:{test:`${ft(`lower_box_${b.field}`)} >= ${ft(`upper_box_${b.field}`)}`,...D||{value:U}}}}),R=A$([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),q={type:"tick",color:"black",opacity:1,orient:$,invalid:d,aria:!1},X=h==="min-max"?R:A$([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),Q=[...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...G({partName:"ticks",mark:q,positionPrefix:"lower_whisker",extraEncoding:X}),...G({partName:"ticks",mark:q,positionPrefix:"upper_whisker",extraEncoding:X})],ae=[...h!=="tukey"?Q:[],...I({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:T,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:R}),...z({partName:"median",mark:{type:"tick",invalid:d,...me(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:$,aria:!1},positionPrefix:"mid_box",extraEncoding:R})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:ae};const xe=ft(`lower_box_${b.field}`),he=ft(`upper_box_${b.field}`),ye=`(${he} - ${xe})`,Re=`${xe} - ${u} * ${ye}`,Me=`${he} + ${u} * ${ye}`,wt=ft(b.field),ur={joinaggregate:NG(b.field),groupby:_},Bi={transform:[{filter:`(${Re} <= ${wt}) && (${wt} <= ${Me})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${M}`},{op:"max",field:b.field,as:`upper_whisker_${M}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${M}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${M}`},...w],groupby:_}],layer:Q},{tooltip:pe,...Fe}=B,{scale:Be,axis:oe}=b,Pt=Bk(b),Je=MG(o,"outliers",t.boxplot,{transform:[{filter:`(${wt} < ${Re}) || (${wt} > ${Me})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...Pt!==void 0?{title:Pt}:{},...Be!==void 0?{scale:Be}:{},...oe!==void 0?{axis:oe}:{}},...Fe,...D?{color:D}:{},...k?{tooltip:k}:{}}})[0];let Vt;const cn=[...p,...y,ur];return Je?Vt={transform:cn,layer:[Je,Bi]}:(Vt=Bi,Vt.transform.unshift(...cn)),{...s,layer:[Vt,{transform:v,layer:ae}]}}function NG(e){const t=zd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Zxe(e,t,n){const i=OG(e,_v),{continuousAxisChannelDef:r,continuousAxis:a}=kG(e,i,_v),s=r.field,o=zd(s),u=DG(t),f=[...NG(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(u==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(u==="min-max"?"upper_whisker_":"max_")+o}],d=u==="min-max"||u==="tukey"?[]:[{calculate:`${ft(`upper_box_${o}`)} - ${ft(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${ft(`upper_box_${o}`)} + ${ft(`iqr_${o}`)} * ${t}, ${ft(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${ft(`lower_box_${o}`)} - ${ft(`iqr_${o}`)} * ${t}, ${ft(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=Vxe(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=CG(v,n),$=i==="vertical"?"horizontal":"vertical",T=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:$,boxOrient:T,customTooltipWithoutAggregatedField:y}}const qk="errorbar",Kxe=["ticks","rule"],Jxe=new Sx(qk,zG);function zG(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:u,tooltipEncoding:f}=FG(e,qk,t);delete a.size;const d=Uk(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...u,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function e2e(e,t){const{encoding:n}=e;if(t2e(n))return{orient:OG(e,t),inputType:"raw"};const i=n2e(n),r=i2e(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,u=n.y2;if(Le(o)&&Le(u))throw new Error(`${t} cannot have both x2 and y2`);if(Le(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Le(u)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,u=n.xError2,f=n.yError,d=n.yError2;if(Le(u)&&!Le(o))throw new Error(`${t} cannot have xError2 without xError`);if(Le(d)&&!Le(f))throw new Error(`${t} cannot have yError2 without yError`);if(Le(o)&&Le(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Le(o)){if(Jo(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Le(f)){if(Jo(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function t2e(e){return(Le(e.x)||Le(e.y))&&!Le(e.x2)&&!Le(e.y2)&&!Le(e.xError)&&!Le(e.xError2)&&!Le(e.yError)&&!Le(e.yError2)}function n2e(e){return Le(e.x2)||Le(e.y2)}function i2e(e){return Le(e.xError)||Le(e.xError2)||Le(e.yError)||Le(e.yError2)}function FG(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,u=Wa(i)?i:{type:i};a&&le(CH(t));const{orient:f,inputType:d}=e2e(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=kG(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=r2e(u,h,p,y,v,d,t,n),{[b]:$,[b==="x"?"x2":"y2"]:T,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:M,...D}=r,{bins:N,timeUnits:B,aggregate:F,groupby:G,encoding:I}=CG(D,n),U=[...F,...S],z=d!=="raw"?[]:G,R=A$(w,h,I,A);return{transform:[...o.transform??[],...N,...B,...U.length===0?[]:[{aggregate:U,groupby:z}],..._],groupby:z,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:I,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:o,tooltipEncoding:R}}function r2e(e,t,n,i,r,a,s,o){let u=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&le(pbe(y,v,s)),v==="stderr"||v==="stdev")u=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${ft(`center_${d}`)} + ${ft(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${ft(`center_${d}`)} - ${ft(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:s0(y)},{fieldPrefix:"upper_",titlePrefix:EF(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:EF(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),u=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:Nf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:Nf({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:Nf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&le(gbe(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:ft(n.field),as:`upper_${d}`},{calculate:ft(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${ft(d)} + ${ft(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${ft(d)} + ${ft(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${ft(d)} - ${ft(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Hu(Hu(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:u,tooltipSummary:h,tooltipTitleWithFieldName:p}}function EF(e,t,n){return`${s0(e)} ${n} ${t}`}const Pk="errorband",a2e=["band","borders"],s2e=new Sx(Pk,LG);function LG(e,{config:t}){e={...e,encoding:Ex(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:u}=FG(e,Pk,t),f=s,d=Uk(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?le(hF("interpolate")):f.tension&&le(hF("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:u}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:u})]}}const BG={};function Ik(e,t,n){const i=new Sx(e,t);BG[e]={normalizer:i,parts:n}}function o2e(){return re(BG)}Ik(_v,RG,Wxe);Ik(qk,zG,Kxe);Ik(Pk,LG,a2e);const l2e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],UG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},qG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},u2e=re(UG),c2e=re(qG),f2e={header:1,headerRow:1,headerColumn:1,headerFacet:1},PG=re(f2e),IG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],d2e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},h2e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ua="_vgsid_",g2e={point:{on:"click",fields:[ua],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function jk(e){return e==="legend"||!!e?.legend}function uw(e){return jk(e)&&me(e)}function Hk(e){return!!e?.select}function jG(e){const t=[];for(const n of e||[]){if(Hk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function p2e(e){return _x(e)||Yk(e)||Gk(e)}function Gk(e){return se(e,"concat")}function _x(e){return se(e,"vconcat")}function Yk(e){return se(e,"hconcat")}function HG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Qa(e){return se(e,"step")}function _F(e){return se(e,"view")||se(e,"width")||se(e,"height")}const wF=20,m2e={align:1,bounds:1,center:1,columns:1,spacing:1},y2e=re(m2e);function v2e(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(yx(e)&&!h0(e.facet)||Gk(e))&&(r.columns=s),_x(e)&&(r.columns=1);for(const o of y2e)if(e[o]!==void 0)if(o==="spacing"){const u=e[o];r[o]=nt(u)?u:{row:u.row??a,column:u.column??a}}else r[o]=e[o];return r}function $$(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function C$(e,t){const n=wv(e,t);return Qa(n)?n.step:GG}function wv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Gt(n,{step:e.step})}const GG=20,b2e={continuousWidth:300,continuousHeight:300,step:GG},x2e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:b2e,mark:dxe,arc:{},area:{},bar:mxe,circle:{},geoshape:{},image:{},line:{},point:{},rect:Ck,rule:{color:"black"},square:{},text:{color:"black"},tick:yxe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:Xbe,projection:{},legend:d2e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:g2e,style:{},title:{},facet:{spacing:wF},concat:{spacing:wF},normalizedNumberFormat:".0%"},Ts=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],AF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},$F={blue:Ts[0],orange:Ts[1],red:Ts[2],teal:Ts[3],green:Ts[4],yellow:Ts[5],purple:Ts[6],pink:Ts[7],brown:Ts[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function S2e(e={}){return{signals:[{name:"color",value:me(e)?{...$F,...e}:$F}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function E2e(e){return{signals:[{name:"fontSize",value:me(e)?{...AF,...e}:AF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function _2e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function YG(e){const t=re(e||{}),n={};for(const i of t){const r=e[i];n[i]=y0(r)?xH(r):Zi(r)}return n}function w2e(e){const t=re(e),n={};for(const i of t)n[i]=YG(e[i]);return n}const A2e=[...tG,..._G,...PG,"background","padding","legend","lineBreak","scale","style","title","view"];function XG(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Uv({},ze(x2e),n?_2e(n):{},t?S2e(t):{},i?E2e(i):{},a||{});r&&xd(s,"selection",r,!0);const o=ir(s,A2e);for(const u of["background","lineBreak","padding"])s[u]&&(o[u]=Zi(s[u]));for(const u of tG)s[u]&&(o[u]=Mn(s[u]));for(const u of _G)s[u]&&(o[u]=YG(s[u]));for(const u of PG)s[u]&&(o[u]=Mn(s[u]));if(s.legend&&(o.legend=Mn(s.legend)),s.scale){const{invalid:u,...f}=s.scale,d=Mn(u,{level:1});o.scale={...Mn(f),...re(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=w2e(s.style)),s.title&&(o.title=Mn(s.title)),s.view&&(o.view=Mn(s.view)),o}const $2e=new Set(["view",...sxe]),C2e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],T2e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...fxe};function M2e(e){e=ze(e);for(const t of C2e)delete e[t];if(e.axis)for(const t in e.axis)y0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of l2e)delete e.legend[t];if(e.mark){for(const t of pF)delete e.mark[t];e.mark.tooltip&&me(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(jG(e.params)),delete e.params);for(const t of $2e){for(const i of pF)delete e[t][i];const n=T2e[t];if(n)for(const i of n)delete e[t][i];O2e(e,t)}for(const t of o2e())delete e[t];k2e(e);for(const t in e)me(e[t])&&St(e[t])&&delete e[t];return St(e)?void 0:e}function k2e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=bH(e.title);St(t)||(e.style["group-title"]={...e.style["group-title"],...t}),St(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),St(i)?delete e.title:e.title=i}function O2e(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};St(a)||(e.style[n??t]=a),delete e[t]}function wx(e){return se(e,"layer")}function D2e(e){return se(e,"repeat")}function R2e(e){return!te(e.repeat)&&se(e.repeat,"layer")}class Xk{map(t,n){return yx(t)?this.mapFacet(t,n):D2e(t)?this.mapRepeat(t,n):Yk(t)?this.mapHConcat(t,n):_x(t)?this.mapVConcat(t,n):Gk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(wx(t))return this.mapLayer(t,n);if(oo(t))return this.mapUnit(t,n);throw new Error(lk(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const N2e={zero:1,center:1,normalize:1};function z2e(e){return ve(N2e,e)}const F2e=new Set([KH,hx,dx,yv,px,Ak,$k,gx,JH,wk]),L2e=new Set([hx,dx,KH]);function pf(e){return ue(e)&&ud(e)==="quantitative"&&!e.bin}function CF(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(ue(s)&&ue(o))if(pf(s)&&pf(o)){if(s.stack)return t;if(o.stack)return r;const u=ue(s)&&!!s.aggregate,f=ue(o)&&!!o.aggregate;if(u!==f)return u?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(pf(s))return t;if(pf(o))return r}else{if(pf(s))return a&&n==="vertical"?void 0:t;if(pf(o))return a&&n==="horizontal"?void 0:r}}function B2e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function VG(e,t){const n=Wa(e)?e:{type:e},i=n.type;if(!F2e.has(i))return null;const r=CF(t,"x",n)||CF(t,"theta",n);if(!r)return null;const a=t[r],s=ue(a)?de(a,{}):void 0,o=B2e(r),u=[],f=new Set;if(t[o]){const b=t[o],S=ue(b)?de(b,{}):void 0;S&&S!==s&&(u.push(o),f.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=ue(h)?de(h,{}):void 0;p&&p!==s&&(u.push(d),f.add(p));const y=Gye.reduce((b,S)=>{if(S!=="tooltip"&&Mu(t,S)){const _=t[S];for(const w of ge(_)){const A=la(w);if(A.aggregate)continue;const $=de(A,{});(!$||!f.has($))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?ec(a.stack)?v=a.stack?"zero":null:v=a.stack:L2e.has(i)&&(v="zero"),!v||!z2e(v)||$G(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==kn.LINEAR&&a?.stack&&le(fbe(a.scale.type)),Le(t[os(r)])?(a.stack!==void 0&&le(cbe(r)),null):(ue(a)&&a.aggregate&&!rve.has(a.aggregate)&&le(dbe(a.aggregate)),{groupbyChannels:u,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:zl(i),stackBy:y,offset:v}))}function WG(e,t,n){const i=Mn(e),r=yt("orient",i,n);if(i.orient=I2e(i.type,t,r),r!==void 0&&r!==i.orient&&le(Vve(i.orient,r)),i.type==="bar"&&i.orient){const u=yt("cornerRadiusEnd",i,n);if(u!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:gxe[i.orient];for(const d of f)i[d]=u;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=yt("opacity",i,n),s=yt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=q2e(i.type,t)),yt("cursor",i,n)===void 0&&(i.cursor=U2e(i,t,n)),i}function U2e(e,t,n){return t.href||e.href||yt("href",e,n)?"pointer":e.cursor}function q2e(e,t){if(Ge([px,wk,Ak,$k],e)&&!$G(t))return .7}function P2e(e,t,{graticule:n}){if(n)return!1;const i=Va("filled",e,t),r=e.type;return Gt(i,r!==px&&r!==gx&&r!==yv)}function I2e(e,t,n){switch(e){case px:case Ak:case $k:case JH:case rxe:case ixe:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case hx:if(ue(i)&&(Tn(i.bin)||ue(r)&&r.aggregate&&!i.aggregate))return"vertical";if(ue(r)&&(Tn(r.bin)||ue(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(ue(i)&&i.type===Vu&&!_t(i.bin)||bv(i))&&ue(r)&&Tn(r.bin)?"horizontal":"vertical";if(!s)return(ue(r)&&r.type===Vu&&!_t(r.bin)||bv(r))&&ue(i)&&Tn(i.bin)?"vertical":"horizontal"}case yv:if(a&&!(ue(i)&&Tn(i.bin))&&s&&!(ue(r)&&Tn(r.bin)))return;case dx:if(s)return ue(r)&&Tn(r.bin)?"horizontal":"vertical";if(a)return ue(i)&&Tn(i.bin)?"vertical":"horizontal";if(e===yv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case gx:case wk:{const o=bF(i),u=bF(r);if(n)return n;if(o&&!u)return e!=="tick"?"horizontal":"vertical";if(!o&&u)return e!=="tick"?"vertical":"horizontal";if(o&&u)return"vertical";{const f=pi(i)&&i.type===od,d=pi(r)&&r.type===od;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function j2e(e){const{point:t,line:n,...i}=e;return re(i).length>1?i:i.type}function H2e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ir(e[t],["point","line"])});return e}function cw(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?me(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?me(t.point)?t.point:{}:void 0}function TF(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class G2e{name="path-overlay";hasMatchingType(t,n){if(oo(t)){const{mark:i,encoding:r}=t,a=Wa(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!cw(a,n[a.type],r);case"area":return!!cw(a,n[a.type],r)||!!TF(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:u,encoding:f,...d}=t,h=Ex(f,r),p=Wa(o)?o:{type:o},y=cw(p,r[p.type],h),v=p.type==="area"&&TF(p,r[p.type]),b=[{name:u,...a?{params:a}:{},mark:j2e({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ir(h,["shape"])}],S=VG(WG(p,h,r),h);let _=h;if(S){const{fieldChannel:w,offset:A}=S;_={...h,[w]:{...h[w],...A?{stack:A}:{}}}}return _=ir(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...id(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...id(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:H2e(r)})}}function Y2e(e,t){return t?h0(e)?ZG(e,t):QG(e,t):e}function fw(e,t){return t?ZG(e,t):e}function T$(e,t,n){const i=t[e];if(Txe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};le(Ave(i.repeat));return}return t}function QG(e,t){if(e=T$("field",e,t),e!==void 0){if(e===null)return null;if(Rk(e)&&Gs(e.sort)){const n=T$("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function MF(e,t){if(ue(e))return QG(e,t);{const n=T$("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function kF(e,t){if(Le(e)){const n=MF(e,t);if(n)return n;if(g0(e))return{condition:e.condition}}else{if(p0(e)){const n=MF(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function ZG(e,t){const n={};for(const i in e)if(se(e,i)){const r=e[i];if(te(r))n[i]=r.map(a=>kF(a,t)).filter(a=>a);else{const a=kF(r,t);a!==void 0&&(n[i]=a)}}return n}class X2e{name="RuleForRangedLine";hasMatchingType(t){if(oo(t)){const{encoding:n,mark:i}=t;if(i==="line"||Wa(i)&&i.type==="line")for(const r of Iye){const a=fc(r),s=n[a];if(n[r]&&(ue(s)&&!Tn(s.bin)||us(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return le(Xve(!!r.x2,!!r.y2)),i({...t,mark:me(a)?{...a,type:"rule"}:"rule"},n)}}class V2e extends Xk{nonFacetUnitNormalizers=[Qxe,Jxe,s2e,new G2e,new X2e];map(t,n){if(oo(t)){const i=Mu(t.encoding,js),r=Mu(t.encoding,Hs),a=Mu(t.encoding,tx);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=fw(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(s,n.config))return u.run(s,n,o);return s}mapRepeat(t,n){return R2e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:u}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:u},spec:r}},n):{...a,layer:u.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Mt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!te(i)&&t.columns&&(t=ir(t,["columns"]),le(uF("repeat")));const o=[],{repeater:u={},repeaterPrefix:f=""}=n,d=!te(i)&&i.row||[u?u.row:null],h=!te(i)&&i.column||[u?u.column:null],p=te(i)&&i||[u?u.repeat:null];for(const v of p)for(const b of d)for(const S of h){const _={repeat:v,row:b,column:S,layer:u.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${te(i)?`${Mt(v)}`:(i.row?`row_${Mt(b)}`:"")+(i.column?`column_${Mt(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,o.push(ir(A,["data"]))}const y=te(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return h0(i)&&t.columns&&(t=ir(t,["columns"]),le(uF("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,u=DF({parentProjection:s,projection:r}),f=OF({parentEncoding:a,encoding:fw(i,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:u,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=fw(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...u?{width:u}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&le(Gve([...i?[js]:[],...r?[Hs]:[]]));const s={},o={};for(const u of[js,Hs]){const f=t[u];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[u]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??={},o[b][u]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:u,columns:f,...d}=a;return{facetMapping:Y2e(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...u?{spacing:u}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,u={...r,parentEncoding:OF({parentEncoding:n,encoding:a,layer:!0}),parentProjection:DF({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[u.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},u)}}function OF({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...re(e),...re(t)]);for(const a of r){const s=t[a],o=e[a];if(Le(s)){const u={...o,...s};i[a]=u}else p0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||oa(o)||_e(o)||Le(o)||te(o))&&(i[a]=o)}}else i=t;return!i||St(i)?void 0:i}function DF(e){const{parentProjection:t,projection:n}=e;return t&&n&&le(Nve({parentProjection:t,projection:n})),n??t}function Vk(e){return se(e,"filter")}function W2e(e){return se(e,"stop")}function KG(e){return se(e,"lookup")}function Q2e(e){return se(e,"data")}function Z2e(e){return se(e,"param")}function K2e(e){return se(e,"pivot")}function J2e(e){return se(e,"density")}function eSe(e){return se(e,"quantile")}function tSe(e){return se(e,"regression")}function nSe(e){return se(e,"loess")}function iSe(e){return se(e,"sample")}function rSe(e){return se(e,"window")}function aSe(e){return se(e,"joinaggregate")}function sSe(e){return se(e,"flatten")}function oSe(e){return se(e,"calculate")}function JG(e){return se(e,"bin")}function lSe(e){return se(e,"impute")}function uSe(e){return se(e,"timeUnit")}function cSe(e){return se(e,"aggregate")}function fSe(e){return se(e,"stack")}function dSe(e){return se(e,"fold")}function hSe(e){return se(e,"extent")&&!se(e,"density")&&!se(e,"regression")}function gSe(e){return e.map(t=>Vk(t)?{filter:Df(t.filter,qbe)}:t)}class pSe extends Xk{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=RF(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=RF(t,n),t.encoding){const i={};for(const[r,a]of yl(t.encoding))i[r]=eY(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:yl(i).map(([a,s])=>{const{init:o,bind:u,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of Kt(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:u}})}:t}}function RF(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(Vk(a))return{filter:M$(a,t)};if(JG(a)&&dc(a.bin))return{...a,bin:tY(a.bin)};if(KG(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function eY(e,t){const n=ze(e);if(ue(n)&&dc(n.bin)&&(n.bin=tY(n.bin)),mc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(g0(n))if(te(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:M$(i,t)}});else{const{selection:i,param:r,test:a,...s}=eY(n.condition,t);n.condition=r?n.condition:{...s,test:M$(n.condition,t)}}return n}function tY(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function M$(e,t){const n=i=>Df(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Df(e.test||e.filter,i=>i.selection?n(i.selection):i)}class k$ extends Xk{map(t,n){const i=n.selections??[];if(t.params&&!oo(t)){const r=[];for(const a of t.params)Hk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(be(o)&&(o===t.name||r.includes(o))||te(o)&&o.map(u=>r.indexOf(u)).every((u,f,d)=>u!==-1&&(f===0||u>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=k$.prototype[e];k$.prototype[e]=function(n,i){return t.call(this,n,mSe(n,i))}}function mSe(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function nY(e,t){t===void 0&&(t=XG(e.config));const n=xSe(e,t),{width:i,height:r}=e,a=SSe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const ySe=new V2e,vSe=new pSe,bSe=new k$;function xSe(e,t={}){const n={config:t};return bSe.map(ySe.map(vSe.map(e,n),n),n)}function NF(e){return be(e)?{type:e}:e??{}}function SSe(e,t,n){let{width:i,height:r}=t;const a=oo(e)||wx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(le(aF("width")),i=void 0),r=="container"&&(le(aF("height")),r=void 0));const o={type:"pad",...s,...n?NF(n.autosize):{},...NF(e.autosize)};if(o.type==="fit"&&!a&&(le(gve),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&le(sF("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&le(sF("height")),!er(o,{type:"pad"}))return o}function ESe(e){return["fit","fit-x","fit-y"].includes(e)}function _Se(e){return e?`fit-${sx(e)}`:"fit"}const wSe=["background","padding"];function zF(e,t){const n={};for(const i of wSe)e&&e[i]!==void 0&&(n[i]=Zi(e[i]));return t&&(n.params=e.params),n}class lo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new lo(ze(this.explicit),ze(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Gt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of re(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Ma(e){return{explicit:!0,value:e}}function Vi(e){return{explicit:!1,value:e}}function iY(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:Ax(t,n,i,r)}}function Ax(e,t,n,i){return e.explicit&&t.explicit&&le(ibe(n,i,e.value,t.value)),e}function xl(e,t,n,i,r=Ax){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:er(e.value,t.value)?e:r(e,t,n,i)}class ASe extends lo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function dd(e){return se(e,"url")}function _p(e){return se(e,"values")}function rY(e){return se(e,"name")&&!dd(e)&&!_p(e)&&!sl(e)}function sl(e){return e&&(aY(e)||sY(e)||Wk(e))}function aY(e){return se(e,"sequence")}function sY(e){return se(e,"sphere")}function Wk(e){return se(e,"graticule")}var Nt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Nt||(Nt={}));function oY({invalid:e,isPath:t}){switch(nG(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function $Se(e){const{marks:t,scales:n}=oY(e);return t===n?Nt.Main:n==="include-invalid-values"?Nt.PreFilterInvalid:Nt.PostFilterInvalid}class ht{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){le(Ove);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Mi extends ht{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${iH()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function dw(e){return e.as!==void 0}function FF(e){return`${e}_end`}class Ua extends ht{timeUnits;clone(){return new Ua(null,ze(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:u}=a;if(u){let f;if(pc(u)){if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=bl({fieldDef:a,markDef:h,config:p});(Ep(d)||y)&&(f={timeUnit:Sn(u),field:o})}}else f={as:de(a,{forAs:!0}),field:o,timeUnit:u};if(Rt(n)){const{mark:d,markDef:h,config:p}=n,y=bl({fieldDef:a,markDef:h,config:p});Ep(d)&&Yt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[Ve(f)]=f)}return r},{});return St(i)?null:new Ua(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Sn(i),s={...r,timeUnit:a};return new Ua(t,{[Ve(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of yl(this.timeUnits)){const a=dw(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Kt(this.timeUnits).map(t=>dw(t)?t.as:FF(t.field)))}dependentFields(){return new Set(Kt(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Ve(this.timeUnits)}`}assemble(){const t=[];for(const n of Kt(this.timeUnits)){const{rectBandPosition:i}=n,r=Sn(n.timeUnit);if(dw(n)){const{field:a,as:s}=n,{unit:o,utc:u,...f}=r,d=[s,`${s}_end`];t.push({field:Nr(a),type:"timeunit",...o?{units:cx(o)}:{},...u?{timezone:"utc"}:{},...f,as:d}),t.push(...LF(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=lY({timeUnit:r,field:s}),u=FF(s);t.push({type:"formula",expr:o,as:u}),t.push(...LF([s,u],i,r))}}return t}}const $x="offsetted_rect_start",Cx="offsetted_rect_end";function lY({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=BH(i),{part:s,step:o}=IH(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${ft(t)}, ${n?-o:o})`}function LF([e,t],n,i){if(n!==void 0&&n!==.5){const r=ft(e),a=ft(t);return[{type:"formula",expr:BF([lY({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${$x}`},{type:"formula",expr:BF([r,a],n+.5),as:`${e}_${Cx}`}]}return[]}function BF([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const v0="_tuple_fields";class CSe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const TSe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new CSe,a={},s={},o=new Set,u=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Mt(`${i}_${S}`);for(let w=1;o.has(_);w++)_=Mt(`${i}_${S}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?ge(n.value):null;let{fields:p,encodings:y}=me(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(me(v))for(const b of re(v))Pye(b)?(y||(y=[])).push(b):f==="interval"?(le(wve),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){le(pve(v,b.aggregate));continue}else if(!S){le(lF(v));continue}if(b.timeUnit&&!pc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[Ve(_)]=_}if(!a[S]){const _=f==="interval"&&ls(v)&&sa(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...u(w,"data"),...u(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ua,uH(v)?(w.geoChannel=v,w.channel=lH(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else le(lF(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...u(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ua}h&&(t.init=h.map(v=>r.items.map(b=>me(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),St(s)||(r.timeUnit=new Ua(null,s))},signals:(e,t,n)=>{const i=t.name+v0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(dY)})}},uY="_curr",W1="anim_value",bf="anim_clock",O$="eased_anim_clock",cY="min_extent",fY="max_range_extent",hw="last_tick_at",gw="is_playing",MSe=1/60*1e3,kSe=(e,t)=>[{name:O$,update:bf},{name:`${e}_domain`,init:`domain('${t}')`},{name:cY,init:`extent(${e}_domain)[0]`},{name:fY,init:`extent(range('${t}'))[1]`},{name:W1,update:`invert('${t}', ${O$})`}],OSe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(qa(t)&&(n=n.concat([{name:bf,init:"0",on:[{events:{type:"timer",throttle:MSe},update:`${gw} ? (${bf} + (now() - ${hw}) > ${fY} ? 0 : ${bf} + (now() - ${hw})) : ${bf}`}]},{name:hw,init:"now()",on:[{events:[{signal:bf},{signal:gw}],update:"now()"}]},{name:gw,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+v0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=Kt(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+zf):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${ku(e)}, `;if(t.project.hasSelectionId)f+=`${ua}: ${s}[${ce(ua)}]`;else if(qa(t))f+=`fields: ${r}, values: [${W1} ? ${W1} : ${cY}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${ce(e.vgField(h.channel,{}))}], ${s}[${ce(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${ce(h.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(qa(t))return n.concat(kSe(t.name,e.scaleName(Ml)),[{name:i+Js,on:[{events:[{signal:O$},{signal:W1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+Js,on:d?[{events:d,update:`${u} ? {${f}} : null`,force:!0}]:[]}])}}};function dY(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Nr(r.field),r}function Zu(e,t=!0,n=Kn){if(te(e)){const i=e.map(r=>Zu(r,t,n));return t?`[${i.join(", ")}]`:i}else if(gc(e))return n(t?Xu(e):Tbe(e));return t?n(lt(e)):e}function DSe(e,t){for(const n of Kt(e.component.selection??{})){const i=n.name;let r=`${i}${Js}, ${n.resolve==="global"?"true":`{unit: ${ku(e)}}`}`;for(const a of Mx)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+aEe,on:[{events:{signal:n.name+Js},update:`modify(${ce(n.name+Ku)}, ${r})`}]})}return Qk(t)}function RSe(e,t){if(e.component.selection&&re(e.component.selection).length){const n=ce(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Cl("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Qk(t)}function NSe(e,t){let n=!1;for(const i of Kt(e.component.selection??{})){const r=i.name,a=ce(r+Ku);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,u=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${MY}(${a}, ${ce(o)}${u}`})}n=!0;for(const o of Mx)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Qk(t)}function zSe(e,t){const n=[],i=[],r=ku(e,{escape:!1});for(const a of Kt(e.component.selection??{})){const s={name:a.name+Ku};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ua}}]),a.init){const u=a.project.items.map(dY);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ua]:Zu(f,!1)[0]})):a.init.map(f=>({unit:r,fields:u,values:Zu(f,!1)}))}if([...n,...t].filter(u=>u.name===a.name+Ku).length||n.push(s),qa(a)&&t.length){const u=e.lookupDataSource(e.getDataName(Nt.Main)),f=t.find(h=>h.name===u),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+uY,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function hY(e,t){for(const n of Kt(e.component.selection??{}))for(const i of Mx)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function FSe(e,t){for(const n of e.children)Rt(n)&&(t=hY(n,t));return t}function LSe(e,t,n,i){const r=NY(e,t.param,t);return{signal:sa(n.get("type"))&&te(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function Qk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Ys={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ls(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&le(bve),!a||!sa(s)){le(vve);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||R$(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(MY))r.update=`{${i.map(s=>`${ce(Nr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${ce(Nr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!R$(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function D$(e,t){return`domain(${ce(e.scaleName(t))})`}function R$(e){return e.parent&&Id(e.parent)&&(!e.parent.parent||R$(e.parent.parent))}const zf="_brush",gY="_scale_trigger",og="geo_interval_init_tick",pY="_init",BSe="_center",USe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...me(n.select)?n.select:{}};i.fields=[ua],i.encodings||(i.encodings=n.value?re(n.value):[va,ya]),n.select={type:"interval",...i}}if(t.translate&&!Ys.defined(t)){const i=`!event.item || event.item.mark.name !== ${ce(t.name+zf)}`;for(const r of t.events){if(!r.between){le(`${r} is not an ordered event stream for interval selections.`);continue}const a=ge(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+Js,a=Kt(t.project.hasChannel).filter(o=>o.channel===kt||o.channel===wn),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,u)=>o.concat(qSe(e,t,u,s?.[u.index])),[])),e.hasProjection){const o=ce(e.projectionName()),u=e.projectionName()+BSe,{x:f,y:d}=t.project.hasChannel,h=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${u}[0]`,v=d?s?.[d.index]:`${u}[1]`,b=T=>e.getSizeSignalRef(T).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+pY,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===u)||n.unshift({name:u,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${ce(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${ku(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,$=a.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[...$.length?[{signal:$.join(" || ")}]:[],...s?[{signal:og}]:[]],update:A}]})}else{if(!Ys.defined(t)){const f=i+gY,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=ce(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=sa(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),u=`unit: ${ku(e)}, fields: ${i+v0}, values`;return n.concat({name:r,...s?{init:`{${u}: ${Zu(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${u}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Rt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===og).length||n.unshift({name:og,value:null,on:[{events:"timer{1}",update:`${og} === null ? {} : ${og}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,u=`data(${ce(t.name+Ku)})`;if(Ys.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of re(f))f[S]=[{test:`${u}.length && ${u}[0].unit === ${ku(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=re(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+zf}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+zf,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function qSe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=ce(r?e.scaleName(a):e.projectionName()),u=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===kt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=Ys.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Zu(i,!0,u)}:{value:[]};return h.push({events:{signal:t.name+gY},update:sa(b)?`[${u(`${p}[0]`)}, ${u(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Zu(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===kt?0:1,y=t.name+pY,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Bd({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=g0(t)&&t.condition;let s=[];a&&(s=ge(a).map(f=>{const d=r(f);if(Cxe(f)){const{param:h,empty:p}=f;return{test:RY(e,{param:h,empty:p}),...d}}else return{test:Cv(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function Zk(e,t="text"){const n=e.encoding[t];return Bd({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>Tx(i,e.config),invalidValueRef:void 0})}function Tx(e,t,n="datum"){if(e){if(oa(e))return $t(e.value);if(Le(e)){const{format:i,formatType:r}=Sv(e);return Ok({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function mY(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(te(s))return{tooltip:UF({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Bd({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=Tx(f,r,o);if(d)return d;if(f===null)return;let h=yt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),be(h))return{value:h};if(me(h))return _e(h)?h:h.content==="encoding"?UF(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function yY(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function u(d,h){const p=fc(h),y=pi(d)?d:{...d,type:e[p].type},v=y.title||zk(y,r),b=ge(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Yt(h)){const _=h==="x"?"x2":"y2",w=la(e[_]);if(Tn(y.bin)&&w){const A=de(y,{expr:s}),$=de(w,{expr:s}),{format:T,formatType:k}=Sv(y);S=d0(A,$,T,k,r),a.add(_)}}if((Yt(h)||h===Lr||h===ma)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:_,formatType:w}=Sv(y);S=Ok({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=Tx(y,r,s).signal,o.push({channel:h,key:b,value:S})}Lk(e,(d,h)=>{ue(d)?u(d,h):vx(d)&&u(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function UF(e,t,n,{reactiveGeom:i}={}){const r=yY(e,t,n,{reactiveGeom:i}),a=yl(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function PSe(e){const{markDef:t,config:n}=e,i=yt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...ISe(e),...jSe(e)}}function ISe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=yt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:ve(cve,t)?{}:{ariaRoleDescription:{value:t}}}function jSe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Bd({model:e,channelDef:a,vgChannel:"description",mainRefFn:u=>Tx(u,e.config),invalidValueRef:void 0});const s=yt("description",n,i);if(s!=null)return{description:$t(s)};if(i.aria===!1)return{};const o=yY(t,r,i);if(!St(o))return{description:{signal:yl(o).map(([u,f],d)=>`"${d>0?"; ":""}${u}: " + (${f})`).join(" + ")}}}function On(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:u}=n;const f=r[e];o===void 0&&(u??=yt(e,i,a,{vgChannel:s,ignoreVgConfig:!g0(f)}),u!==void 0&&(o=$t(u)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=rG({...d,scaleChannel:e,channelDef:f});return Bd({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>kk({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function vY(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??yt("filled",n,r),o=Ge(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,u=yt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=yt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...u?{fill:$t(u)}:{},...f?{stroke:$t(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&le(MH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...On("color",e,{vgChannel:d,defaultValue:s?u:f}),...On("fill",e,{defaultValue:i.fill?u:void 0}),...On("stroke",e,{defaultValue:i.stroke?f:void 0})}}function HSe(e){const{encoding:t,mark:n}=e,i=t.order;return!zl(n)&&oa(i)?Bd({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>$t(r.value),invalidValueRef:void 0}):{}}function hd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:kk({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:$t(s),bandPosition:r})};const u=t[a];return u?{offsetType:"visual",offset:u}:{}}function ci(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,u=r[e],f=r[os(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=hd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=Kk({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!u&&Yt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:GSe({channel:e,channelDef:u,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function GSe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Le(n)&&r&&t===r.fieldChannel){if(ue(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return vv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return Tu(n,i,{suffix:"end"},{offset:a})}return Mk(e)}function Kk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=fc(n),u=vl(n),f=yt(n,a,s,{vgChannel:u});if(f!==void 0)return Vg(n,f);switch(t){case"zeroOrMin":return qF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return qF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[zi(n)],mult:.5}}}}function qF({mainChannel:e,config:t,...n}){const i=iG(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const YSe={left:"x",center:"xc",right:"x2"},XSe={top:"y",middle:"yc",bottom:"y2"};function bY(e,t,n,i="middle"){if(e==="radius"||e==="theta")return vl(e);const r=e==="x"?"align":"baseline",a=yt(r,t,n);let s;return _e(a)?(le(Yve(r)),s=void 0):s=a,e==="x"?YSe[s||(i==="top"?"left":"center")]:XSe[s||i]}function Av(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?xY(e,t,{defaultPos:n,defaultPos2:i}):ci(e,t,{defaultPos:n})}function xY(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=os(e),o=zi(e),u=VSe(t,i,s),f=u[o]?bY(e,r,a):vl(e);return{...ci(e,t,{defaultPos:n,vgChannel:f}),...u}}function VSe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,u=fc(n),f=zi(n),d=vl(n),h=i[u],p=e.scaleName(u),y=e.getScaleComponent(u),{offset:v}=n in i||n in a?hd({channel:n,markDef:a,encoding:i,model:e}):hd({channel:u,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=zi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=WSe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:h1(n,a)||h1(n,{[n]:x$(n,a,o.style),[f]:x$(f,a,o.style)})||h1(n,o[r])||h1(n,o.mark)||{[d]:Kk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function WSe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:u,defaultRef:f}){return Le(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Tu(t,a,{suffix:"start"},{offset:u}):Mk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:u,defaultRef:f})}function h1(e,t){const n=zi(e),i=vl(e);if(t[i]!==void 0)return{[i]:Vg(e,t[i])};if(t[e]!==void 0)return{[i]:Vg(e,t[e])};if(t[n]){const r=t[n];if(Wu(r))le(qve(n));else return{[n]:Vg(e,r)}}}function Ks(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=os(t),o=zi(t),u=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??yt("size",r,n,{vgChannel:o}),v=hH(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return ue(u)&&(_t(u.bin)||Tn(u.bin)||u.timeUnit&&!f)&&!(y&&!Wu(y))&&!i[v]&&!En(h)?KSe({fieldDef:u,fieldDef2:f,channel:t,model:e}):(Le(u)&&En(h)||b)&&!f?ZSe(u,t,e):xY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function QSe(e,t,n,i,r,a,s){if(Wu(r))if(n){const u=n.get("type");if(u==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Va("minBandSize",{type:s},i);return{signal:d?`max(${Jr(d)}, ${f})`:f}}else r.band!==1&&(le(Qve(u)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(_e(r))return r;if(r)return{value:r}}if(n){const u=n.get("range");if(hc(u)&&nt(u.step))return{value:u.step-2}}if(!a){const{bandPaddingInner:u,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Gt(u,s==="tick"?h:s==="bar"?f:d);if(_e(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(nt(p))return{signal:`${1-p} * ${e}`}}return{value:C$(i.view,e)-2}}function ZSe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,u=n.scaleName(t),f=n.getScaleComponent(t),d=zi(t),h=os(t),p=hH(t),y=n.scaleName(p),v=n.getScaleComponent(nk(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=On("size",n,{vgChannel:d,defaultRef:$t(i.size)}):le(ebe(i.type)));const _=!!S,w=fG({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:QSe(d,y||u,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&Wu(w)&&!_?"top":"middle",$=bY(t,i,a,A),T=$==="xc"||$==="yc",{offset:k,offsetType:M}=hd({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),D=Mk({channel:t,channelDef:e,markDef:i,config:a,scaleName:u,scale:f,stack:s,offset:k,defaultRef:Kk({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:f}),bandPosition:T?M==="encoding"?0:.5:_e(w)?{signal:`(1-${w})/2`}:Wu(w)?(1-w.band)/2:0});if(d)return{[$]:D,...S};{const N=vl(h),B=S[d],F=k?{...B,offset:k}:B;return{[$]:D,[N]:te(D)?[D[0],{...D[1],offset:F}]:{...D,offset:F}}}}function PF(e,t,n,i,r,a,s){if(oH(e))return 0;const o=e==="x"||e==="y2",u=o?-t/2:t/2;if(_e(n)||_e(r)||_e(i)||a){const f=Jr(n),d=Jr(r),h=Jr(i),p=Jr(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${u})`:u,b=h?`${h} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-u:+r+u)}function KSe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),u=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=fG({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Yt(n)?yt("binSpacing",a,r)??0:0,b=os(n),S=vl(n),_=vl(b),w=Va("minBandSize",a,r),{offset:A}=hd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:$}=hd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),T=Exe({fieldDef:e,scaleName:u}),k=PF(n,v,d,y,A,w,T),M=PF(b,v,d,y,$??A,w,T),D=_e(h)?{signal:`(1-${h.signal})/2`}:Wu(h)?(1-h.band)/2:.5,N=bl({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(_t(e.bin)||e.timeUnit){const B=e.timeUnit&&N!==.5;return{[_]:IF({fieldDef:e,scaleName:u,bandPosition:D,offset:M,useRectOffsetField:B}),[S]:IF({fieldDef:e,scaleName:u,bandPosition:_e(D)?{signal:`1-${D.signal}`}:1-D,offset:k,useRectOffsetField:B})}}else if(Tn(e.bin)){const B=Tu(e,u,{},{offset:M});if(ue(t))return{[_]:B,[S]:Tu(t,u,{},{offset:k})};if(dc(e.bin)&&e.bin.step)return{[_]:B,[S]:{signal:`scale("${u}", ${de(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}le(DH(b))}function IF({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return vv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:$x,endSuffix:Cx}:{}})}const JSe=new Set(["aria","width","height"]);function Br(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?vY(e):{};return{...eEe(e.markDef,t),...jF("fill",n),...jF("stroke",i),...On("opacity",e),...On("fillOpacity",e),...On("strokeOpacity",e),...On("strokeWidth",e),...On("strokeDash",e),...HSe(e),...mY(e),...Zk(e,"href"),...PSe(e)}}function jF(e,t){return t?{[e]:t}:{}}function eEe(e,t){return uve.reduce((n,i)=>(!JSe.has(i)&&se(e,i)&&t[i]!=="ignore"&&(n[i]=$t(e[i])),n),{})}function Jk(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!ls(a)||!(s=e.getScaleType(a)))return;const o=ox(r.aggregate),u=Tk({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(bxe(u)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>fx(a,!0)).join(" && ")}}}function HF(e,t){if(t!==void 0)return{[e]:$t(t)}}const pw="voronoi",SY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(pw)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(zl(a))return le(mve(a)),n;const s={name:e.getName(pw),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...mY(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,u=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(pw)&&(u=!0)}),u||n.splice(o+1,0,s),n}},EY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!jk(e.bind),parse:(e,t,n)=>kY(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=SY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((u,f)=>{const d=Mt(`${i}_${u.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Zu(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${ce(u.field)}] : null`}]:[],bind:a[u.field]??a[u.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+Js),s=i+v0,o=r.items.map(f=>Mt(`${i}_${f.field}`)),u=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${u} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},$v="_toggle",_Y={defined:e=>e.type==="point"&&!qa(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+$v,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Js,i=t.name+$v;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ku(e)}}, `}${i} ? ${n} : null`}},tEe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!qa(e),parse:(e,t)=>{t.clear&&(t.clear=be(t.clear)?Cl(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(EY.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Mt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+Js);i(r,"null"),_Y.defined(t)&&(r=n.findIndex(a=>a.name===t.name+$v),i(r,"false"))}return n}},wY={defined:e=>{const t=e.resolve==="global"&&e.bind&&jk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ua;return t&&!n&&le(xve),t&&n},parse:(e,t,n)=>{const i=ze(n);if(i.select=be(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},kY(t,i),me(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=ge(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=uw(t.bind)?t.bind.legend:"click",a=be(r)?Cl(r,"view"):ge(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=uw(t.bind)&&t.bind.legend,a=s=>o=>{const u=ze(o);return u.markname=s,u};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Mt(s.field)}_legend`,u=`${i}_${o}`;if(n.filter(d=>d.name===u).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+Js),s=i+v0,o=r.items.filter(p=>p.hasLegend).map(p=>Mt(`${i}_${Mt(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+$v),h=uw(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function nEe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of Kt(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&wY.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const AY="_translate_anchor",$Y="_translate_delta",iEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Ys.defined(t),a=i+AY,{x:s,y:o}=t.project.hasChannel;let u=Cl(t.translate,"scope");return r||(u=u.map(f=>(f.between[0].markname=i+zf,f))),n.push({name:a,value:{},on:[{events:u.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?D$(e,kt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?D$(e,wn):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+$Y,value:{},on:[{events:u,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&GF(e,t,s,"width",n),o!==void 0&&GF(e,t,o,"height",n),n}};function GF(e,t,n,i,r){const a=t.name,s=a+AY,o=a+$Y,u=n.channel,f=Ys.defined(t),d=r.find(T=>T.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(u),y=p?.get("type"),v=p?.get("reverse"),b=f?u===kt?v?"":"-":v?"-":"":"",S=`${s}.extent_${u}`,_=`${b}${o}.${u} / ${f?`${h}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",$=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:o},update:f?$:`clampRange(${$}, 0, ${h})`})}const CY="_zoom_anchor",TY="_zoom_delta",rEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Ys.defined(t),a=i+TY,{x:s,y:o}=t.project.hasChannel,u=ce(e.scaleName(kt)),f=ce(e.scaleName(wn));let d=Cl(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+zf,h))),n.push({name:i+CY,on:[{events:d,update:r?`{${[u?`x: invert(${u}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&YF(e,t,s,"width",n),o!==void 0&&YF(e,t,o,"height",n),n}};function YF(e,t,n,i,r){const a=t.name,s=n.channel,o=Ys.defined(t),u=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?D$(e,s):u.name,y=a+TY,v=`${a}${CY}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;u.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const Ku="_store",Js="_tuple",aEe="_modify",MY="vlSelectionResolve",Mx=[OSe,USe,TSe,_Y,EY,Ys,wY,tEe,iEe,rEe,SY];function sEe(e){let t=e.parent;for(;t&&!rr(t);)t=t.parent;return t}function ku(e,{escape:t}={escape:!0}){let n=t?ce(e.name):e.name;const i=sEe(e);if(i){const{facet:r}=i;for(const a of $r)r[a]&&(n+=` + '__facet_${a}_' + (facet[${ce(i.vgField(a))}])`)}return n}function eO(e){return Kt(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function kY(e,t){(be(t.select)||!t.select.on)&&delete e.events,(be(t.select)||!t.select.clear)&&delete e.clear,(be(t.select)||!t.select.toggle)&&delete e.toggle}function qa(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function N$(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...N$(e.object)),t.push(...N$(e.property))),t)}function OY(e){return e.object.type==="MemberExpression"?OY(e.object):e.object.name==="datum"}function DY(e){const t=bM(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&OY(i)&&n.add(N$(i).slice(1).join("."))}),n}class Ud extends ht{model;filter;expr;_dependentFields;clone(){return new Ud(null,this.model,ze(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Cv(this.model,this.filter,this),this._dependentFields=DY(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function oEe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Mt(a.name),o=a.select,u=be(o)?o:o.type,f=me(o)?ze(o):{type:u},d=i[u];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=ze(d[y]??f[y])));const h=n[s]={...f,name:s,type:u,init:a.value,bind:a.bind,events:be(f.on)?Cl(f.on,"scope"):ge(ze(f.on))};if(qa(h)&&(r++,r>1)){delete n[s];continue}const p=ze(a);for(const y of Mx)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&le($ve),n}function RY(e,t,n,i="datum"){const r=be(t)?t:t.param,a=Mt(r),s=ce(a+Ku);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const u=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${ce(o.resolve)})`,d=`${u}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function NY(e,t,n){const i=Mt(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&le(Cve(a));else if(r&&!a){const o=s.project.items.filter(u=>u.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,le(Tve(o,r,n,a))):a=o[0].field}return`${s.name}[${ce(Nr(a))}]`}function lEe(e,t){for(const[n,i]of yl(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Mi(new Ud(t,e,{param:n}),r,Nt.Lookup,e.component.data.outputNodeRefCounts)}}function Cv(e,t,n){return Xg(t,i=>be(i)?i:Lbe(i)?RY(e,i,n):HH(i))}function uEe(e,t){if(e)return te(e)&&!Io(e)?e.map(n=>zk(n,t)).join(", "):e}function mw(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function Rg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:u,zindex:f,...d}=e.combine();if(!r){for(const h in d){const p=h,y=Pxe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(y0(v)){const{condition:b,...S}=v,_=ge(b),w=xF[p];if(w){const{vgProp:A,part:$}=w,T=[..._.map(k=>{const{test:M,...D}=k;return{test:Cv(null,M),...D}}),S];mw(d,$,A,T),delete d[p]}else if(w===null){const A={signal:_.map($=>{const{test:T,...k}=$;return`${Cv(null,T)} ? ${rF(k)} : `}).join("")+rF(S)};d[p]=A}}else if(_e(v)){const b=xF[p];if(b){const{vgProp:S,part:_}=b;mw(d,_,S,v),delete d[p]}}Ge(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},St(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Gt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&_e(d.encode.labels.update.text)&&(p=Hu(o,"datum.label",d.encode.labels.update.text.signal)),mw(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of SG)e.hasAxisPart(p)||delete d.encode[p];St(d.encode)&&delete d.encode}const h=uEe(u,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Gt(f,0)}}}}function zY(e){const{axes:t}=e.component,n=[];for(const i of so)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function cEe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>Rg(r,"grid",t)),...i.map(r=>Rg(r,"grid",t)),...n.map(r=>Rg(r,"main",t)),...i.map(r=>Rg(r,"main",t))].filter(r=>r)}function XF(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...re(s),...re(o)]),f={};for(const d of u.values())f[d]={signal:`${i.signal} === "${a}" ? ${Jr(s[d])} : ${Jr(o[d])}`};return f}return t[r]})])}function fEe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:VH(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=_e(n)?"axisOrient":`axis${s0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],u=["axis",s,a];return{vlOnlyAxisConfig:XF(o,i,e,n),vgAxisConfig:XF(u,i,e,n),axisConfigStyle:dEe([...u,...o],i)}}function dEe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=ge(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function z$(e,t,n,i={}){const r=EH(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const VF={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??hEe(n,e),gridScale:({model:e,channel:t})=>gEe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||LY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||FY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??mEe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??yEe(t.type,n,ue(t)&&!!t.timeUnit,ue(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??bEe({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??xEe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=BY(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return wH(r?[vF(r)]:[],ue(s)?[vF(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>SEe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??EEe(n,t)};function hEe(e,t){return!En(e)&&ue(t)&&!_t(t?.bin)&&!Tn(t?.bin)}function gEe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function pEe(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return _e(a)?a:Sp(a);{const{configValue:s}=z$("labelAngle",i,t?.style,r);return s!==void 0?Sp(s):n===kt&&Ge([_k,Ek],e.type)&&!(ue(e)&&e.timeUnit)?270:void 0}}function F$(e){return`(((${e.signal} % 360) + 360) % 360)`}function FY(e,t,n,i){if(e!==void 0)if(n==="x"){if(_e(e)){const r=F$(e),a=_e(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(_e(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(_e(e)){const r=F$(e),a=_e(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(_e(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function LY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(_e(e)){const s=F$(e),o=_e(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(_e(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function mEe(e,t){if(t==="x"&&Ge(["quantitative","temporal"],e))return!0}function yEe(e,t,n,i){if(n&&!me(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function vEe(e){return e==="x"?"bottom":"left"}function bEe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!En(t)&&t!=="log"){if(ue(e)){if(_t(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Ge(["month","hours","day","quarter"],Sn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function xEe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(ue(t)){const{timeUnit:n}=t;if(n){const i=PH(n);if(i)return{signal:i}}}}function BY(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return AH(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function SEe(e,t){const n=e.values;if(te(n))return xG(t,n);if(_e(n))return n}function EEe(e,t){return e==="rect"&&xv(t)?1:0}class gd extends ht{transform;_dependentFields;clone(){return new gd(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=DY(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(mc(i)&&cG(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,u=o.map((f,d)=>`${HH({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new gd(t,{calculate:u,as:pd(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Ve(this.transform)}`}}function pd(e,t,n){return de(e,{prefix:t,suffix:"sort_index",...n})}function kx(e,t){return Ge(["top","bottom"],t)?"column":Ge(["left","right"],t)||e==="row"?"row":"column"}function md(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Gt((t||{})[e],r[e],n.header[e])}function Ox(e,t,n,i){const r={};for(const a of e){const s=md(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const tO=["row","column"],nO=["header","footer"];function _Ee(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=Ox(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),u=kx(t,o),f=Sp(s);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...qY(f,u),...UY(u,f,a),...PY(i,r,t,u2e,UG)}}}function UY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=LY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function qY(e,t){const n=FY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function wEe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of nO)if(n[r])for(const a of n[r]){const s=$Ee(e,t,r,n,a);s!=null&&i.push(s)}return i}function AEe(e,t){const{sort:n}=e;return Gs(n)?{field:de(n,{expr:"datum"}),order:n.order??"ascending"}:te(n)?{field:pd(e,t,{expr:"datum"}),order:"ascending"}:{field:de(e,{expr:"datum"}),order:n??"ascending"}}function L$(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:u}=Ox(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=Ok({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=kx(t,o);return{text:{signal:u?Hu(Hu(u,"datum.label",f),"datum.value",de(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...qY(a,d),...UY(d,a,s),...PY(n,e,t,c2e,qG)}}function $Ee(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=Ox(["labelOrient"],s.header,o,t);(t==="row"&&!Ge(["top","bottom"],h)||t==="column"&&!Ge(["left","right"],h))&&(a=L$(s,t,o))}const u=rr(e)&&!h0(e.facet),f=r.axes,d=f?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:AEe(s,t)}:{},...d&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const CEe={column:{start:0,end:1},row:{start:1,end:0}};function TEe(e,t){return CEe[t][e]}function MEe(e,t){const n={};for(const i of $r){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Ox(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=kx(i,s),u=TEe(a,o);u!==void 0&&(n[o]=u)}}return St(n)?void 0:n}function PY(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=md(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function iO(e){return[...g1(e,"width"),...g1(e,"height"),...g1(e,"childWidth"),...g1(e,"childHeight")]}function g1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(En(s)&&hc(o)){const u=e.scaleName(n);return rr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[WF(u,o)]:[WF(u,o),{name:r,update:IY(u,a,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=$$(e.config.view,a?"width":"height"),u=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:r,value:i}]}function WF(e,t){const n=`${e}_step`;return _e(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function IY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Gt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${Jr(s)}, ${Jr(a)}) * ${e}_step`}function jY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function HY(e,t){return re(e).reduce((n,i)=>({...n,...Bd({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>$t(r.value),invalidValueRef:void 0})}),{})}function GY(e,t){if(rr(t))return e==="theta"?"independent":"shared";if(Id(t))return"shared";if(cO(t))return Yt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function rO(e,t){const n=e.scale[t],i=Yt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&le(abe(t)),"independent"):e[i][t]||"shared"}const kEe={...h2e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},YY=re(kEe);class OEe extends lo{}const QF={symbols:DEe,gradient:REe,labels:NEe,entries:zEe};function DEe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:u,mark:f}=n,d=s.filled&&f!=="trail";let h={...hve({},n,uxe),...vY(n,{filled:d})};const p=r.get("symbolOpacity")??u.legend.symbolOpacity,y=r.get("symbolFillColor")??u.legend.symbolFillColor,v=r.get("symbolStrokeColor")??u.legend.symbolStrokeColor,b=p===void 0?XY(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Ri)delete h.fill;else if(se(h.fill,"field"))y?delete h.fill:(h.fill=$t(u.legend.symbolBaseFillColor??"black"),h.fillOpacity=$t(b??1));else if(te(h.fill)){const S=B$(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=$t(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Ri)delete h.stroke;else if(se(h.stroke,"field")||v)delete h.stroke;else if(te(h.stroke)){const S=Gt(B$(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==ao){const S=ue(t)&&WY(n,r,t);S?h.opacity=[{test:S,...$t(b??1)},$t(u.legend.unselectedOpacity)]:b&&(h.opacity=$t(b))}return h={...h,...e},St(h)?void 0:h}function REe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?XY(s.opacity)||a.opacity:void 0;return f&&(o.opacity=$t(f)),o={...o,...e},St(o)?void 0:o}function NEe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=ue(t)?WY(n,r,t):void 0,u=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;Qu(d)?h=ea({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=ea({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&ue(t)&&t.timeUnit===void 0&&(h=ea({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...u?{opacity:u}:{},...h?{text:h}:{},...e};return St(p)?void 0:p}function zEe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function XY(e){return VY(e,(t,n)=>Math.max(t,n.value))}function B$(e){return VY(e,(t,n)=>Gt(t,n.value))}function VY(e,t){if(Mxe(e))return ge(e.condition).reduce(t,e.value);if(oa(e))return e.value}function WY(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=ce(n.field);return i.map(a=>`(!length(data(${ce(Mt(a)+Ku)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const ZF={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return oG(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return lG(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??IEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??jEe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??LEe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>Nf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Rf(n)&&za(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>FEe(t,e)};function FEe(e,t){const n=e.values;if(te(n))return xG(t,n);if(_e(n))return n}function LEe(e,t,n,i){if(t!=="shape"){const r=B$(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function BEe(e){const{legend:t}=e;return Gt(t.type,UEe(e))}function UEe({channel:e,timeUnit:t,scaleType:n}){if(Rf(e)){if(Ge(["quarter","month","day"],t))return"symbol";if(za(n))return"gradient"}return"symbol"}function qEe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??PEe(n,t)}function PEe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function IEe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:u}=e;if(za(r))return n==="horizontal"?i==="top"||i==="bottom"?KF(t,"width",s,a):s:KF(t,"height",u,o)}function KF(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function jEe(e){if(Ge(["quantile","threshold","log","symlog"],e))return"greedy"}function QY(e){const t=Rt(e)?HEe(e):VEe(e);return e.component.legends=t,t}function HEe(e){const{encoding:t}=e,n={};for(const i of[Ri,...IG]){const r=sn(t[i]);!r||!e.getScaleComponent(i)||i===Ni&&ue(r)&&r.type===Ld||(n[i]=XEe(e,i))}return n}function GEe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function YEe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function XEe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new OEe({},GEe(e,t));nEe(e,t,o);const u=n!==void 0?!n:s.disable;if(o.set("disable",u,n!==void 0),u)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=sn(r[t]),h=ue(d)?Sn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=BEe({legend:n,channel:t,timeUnit:h,scaleType:f}),v=qEe({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const $ of YY){if(y==="gradient"&&$.startsWith("symbol")||y==="symbol"&&$.startsWith("gradient"))continue;const T=$ in ZF?ZF[$](b):n[$];if(T!==void 0){const k=YEe(T,$,n,e.fieldDef(t));(k||a.legend[$]===void 0)&&o.set($,T,k)}}const S=n?.encoding??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const $ of["labels","legend","title","symbols","gradient","entries"]){const T=HY(S[$]??{},e),k=$ in QF?QF[$](T,A):T;k!==void 0&&!St(k)&&(w[$]={..._?.length&&ue(d)?{name:`${Mt(d.field)}_legend_${$}`}:{},..._?.length?{interactive:!!_}:{},update:k})}return St(w)||o.set("encode",w,!!n?.encoding),o}function VEe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){QY(i);for(const r of re(i.component.legends))n.legend[r]=rO(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=ZY(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of re(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function ZY(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of YY){const s=xl(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,u)=>{switch(a){case"symbolType":return WEe(o,u);case"title":return $H(o,u);case"type":return r=!0,Vi("symbol")}return Ax(o,u,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&pv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&pv(e.explicit,["encode","gradient"])),e}function WEe(e,t){return t.value==="circle"?t:e}function QEe(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function KY(e){const t=e.component.legends,n={};for(const r of re(t)){const a=e.getScaleComponent(r),s=lt(a.get("domains"));if(n[s])for(const o of n[s])ZY(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return Kt(n).flat().map(r=>ZEe(r,e.config)).filter(r=>r!==void 0)}function ZEe(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of IG)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&_e(a.encode.labels.update.text)&&(s=Hu(i,"datum.label",a.encode.labels.update.text.signal)),QEe(a,"labels","text",{signal:s})}return a}}function KEe(e){return Id(e)||cO(e)?JEe(e):JY(e)}function JEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),JY(e))}function JY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const u=_e(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Ge(s,u)||s.push(u),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const e_e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class eX extends lo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function tX(e){e.component.projection=Rt(e)?t_e(e):r_e(e)}function t_e(e){if(e.hasProjection){const t=Mn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?n_e(e):void 0,a=new eX(e.projectionName(!0),{...Mn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function n_e(e){const t=[],{encoding:n}=e;for(const i of[[va,ya],[zr,ba]])(sn(n[i[0]])||sn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Ni)&&e.typedFieldDef(Ni).type===Ld&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Nt.Main)),t}function i_e(e,t){const n=WM(e_e,r=>!!(!ve(e.explicit,r)&&!ve(t.explicit,r)||ve(e.explicit,r)&&ve(t.explicit,r)&&er(e.get(r),t.get(r))));if(er(e.size,t.size)){if(n)return e;if(er(e.explicit,{}))return t;if(er(t.explicit,{}))return e}return null}function r_e(e){if(e.children.length===0)return;let t;for(const i of e.children)tX(i);const n=WM(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=i_e(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new eX(i,t.specifiedProjection,t.size,ze(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function a_e(e,t,n,i){if(m0(t,n)){const r=Rt(e)?e.axis(n)??e.legend(n)??{}:{},a=de(t,{expr:"datum"}),s=de(t,{expr:"datum",binSuffix:"end"});return{formulaAs:de(t,{binSuffix:"range",forAs:!0}),formula:d0(a,s,r.format,r.formatType,i)}}return{}}function nX(e,t){return`${vH(e)}_${t}`}function s_e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function aO(e,t,n){const i=bx(n,void 0)??{},r=nX(i,t);return e.getName(`${r}_bins`)}function o_e(e){return"as"in e}function JF(e,t,n){let i,r;o_e(e)?i=be(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[de(e,{forAs:!0}),de(e,{binSuffix:"end",forAs:!0})];const a={...bx(t,void 0)},s=nX(a,e.field),{signal:o,extentSignal:u}=s_e(n,s);if(lx(a.extent)){const d=a.extent;r=NY(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...u?{extentSignal:u}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Pa extends ht{bins;clone(){return new Pa(null,ze(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(pi(a)&&_t(a.bin)){const{key:o,binComponent:u}=JF(a,a.bin,n);r[o]={...u,...r[o],...a_e(n,a,s,n.config)}}return r},{});return St(i)?null:new Pa(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=JF(n,n.bin,i);return new Pa(t,{[r]:a})}merge(t,n){for(const i of re(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=Na([...this.bins[i].as,...t.bins[i].as],Ve)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Kt(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Kt(this.bins).map(t=>t.field))}hash(){return`Bin ${Ve(this.bins)}`}assemble(){return Kt(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:Nr(t.field),as:i,signal:t.signal,...lx(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:Nr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const u of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:de({field:i[f]},{expr:"datum"}),as:u[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function l_e(e,t,n,i){const r=Rt(i)?i.encoding[os(t)]:void 0;if(pi(n)&&Rt(i)&&dG(n,r,i.markDef,i.config)){e.add(de(n,{})),e.add(de(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,u=bl({fieldDef:n,markDef:s,config:o});Ep(a)&&u!==.5&&Yt(t)&&(e.add(de(n,{suffix:$x})),e.add(de(n,{suffix:Cx}))),n.bin&&m0(n,t)&&e.add(de(n,{binSuffix:"range"}))}else if(uH(t)){const a=lH(t);e.add(i.getName(a))}else e.add(de(n));return mc(n)&&Qbe(n.scale?.range)&&e.add(n.scale.range.field),e}function u_e(e,t){for(const n of re(t)){const i=t[n];for(const r of re(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class na extends ht{dimensions;measures;clone(){return new na(null,new Set(this.dimensions),ze(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:u,field:f}=s;if(u)if(u==="count")r["*"]??={},r["*"].count=new Set([de(s,{forAs:!0})]);else{if(Zs(u)||Nl(u)){const d=Zs(u)?"argmin":"argmax",h=u[d];r[h]??={},r[h][d]=new Set([de({op:d,field:h},{forAs:!0})])}else r[f]??={},r[f][u]=new Set([de(s,{forAs:!0})]);ls(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??={},r[f].min=new Set([de({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([de({field:f,aggregate:"max"},{forAs:!0})]))}else l_e(a,o,s,n)}),a.size+re(r).length===0)?null:new na(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:u}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([u||de(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(u||de(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+re(r).length===0?null:new na(t,i,r)}merge(t){return eH(this.dimensions,t.dimensions)?(u_e(this.measures,t.measures),!0):(Sbe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...re(this.measures)])}producedFields(){const t=new Set;for(const n of re(this.measures))for(const i of re(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Ve({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of re(this.measures))for(const s of re(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:Nr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Nr),ops:t,fields:n,as:i}}}class qd extends ht{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of $r){const s=n.facet[a];if(s){const{bin:o,sort:u}=s;this[a]={name:n.getName(`${a}_domain`),fields:[de(s),..._t(o)?[de(s,{binSuffix:"end"})]:[]],...Gs(u)?{sortField:u}:te(u)?{sortIndexField:pd(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of $r)this[n]&&(t+=` ${n.charAt(0)}:${Ve(this[n])}`);return t}get fields(){const t=[];for(const n of $r)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of $r)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of so){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(En(r)&&hc(a)){const s=Dx(this.childModel,n),o=uO(s);o?t[n]=o:le(uk(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:u,sortIndexField:f}=this[t];if(u){const{op:d=mx,field:h}=u;a.push(h),s.push(d),o.push(de(u,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const u of tO){for(const f of nO){const d=i[u]?.[f]??[];for(const h of d)if(h.axes?.length>0){a[u]=!0;break}}if(a[u]){const f=`length(data("${this.facet.name}"))`,d=u==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${u}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),u=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:u}]})}for(const o of[Hs,js])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function e9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function c_e(e,t){const n=KM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=e9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=e9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return le(kve(t)),null}function f_e(e){const t={};return V1(e.filter,n=>{if(jH(n)){let i=null;pk(n)?i=Zi(n.equal):yk(n)?i=Zi(n.lte):mk(n)?i=Zi(n.lt):vk(n)?i=Zi(n.gt):bk(n)?i=Zi(n.gte):xk(n)?i=n.range[0]:Sk(n)&&(i=(n.oneOf??n.in)[0]),i&&(gc(i)?t[n.field]="date":nt(i)?t[n.field]="number":be(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function d_e(e){const t={};function n(i){fd(i)?t[i.field]="date":i.type==="quantitative"&&ive(i.aggregate)?t[i.field]="number":ad(i.field)>1?i.field in t||(t[i.field]="flatten"):mc(i)&&Gs(i.sort)&&ad(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((Rt(e)||rr(e))&&e.forEachFieldDef((i,r)=>{if(pi(i))n(i);else{const a=fc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),Rt(e)){const{mark:i,markDef:r,encoding:a}=e;if(zl(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];ue(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function h_e(e){const t={};if(Rt(e)&&e.component.selection)for(const n of re(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&ad(r.field)>1&&(t[r.field]="flatten")}return t}class Xn extends ht{_parse;clone(){return new Xn(null,ze(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Ve(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!sl(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of re(i)){const u=r.getWithExplicit(o);u.value!==void 0&&(u.explicit||u.value===i[o]||u.value==="derived"||i[o]==="flatten"?delete i[o]:le(cF(o,i[o],u.value)))}for(const o of re(n)){const u=r.get(o);u!==void 0&&(u===n[o]?delete n[o]:le(cF(o,n[o],u)))}const a=new lo(n,i);r.copyAll(a);const s={};for(const o of re(a.combine())){const u=a.get(o);u!==null&&(s[o]=u)}return re(s).length===0||r.parseNothing?null:new Xn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of re(this._parse)){const i=this._parse[n];ad(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(re(this._parse))}dependentFields(){return new Set(re(this._parse))}assembleTransforms(t=!1){return re(this._parse).filter(n=>t?ad(n)>1:!0).map(n=>{const i=c_e(n,this._parse[n]);return i?{type:"formula",expr:i,as:zd(n)}:null}).filter(n=>n!==null)}}class Sl extends ht{clone(){return new Sl(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ua])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ua}}}class b0 extends ht{params;clone(){return new b0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Ve(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class x0 extends ht{params;clone(){return new x0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Ve(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Ju extends ht{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(sl(t)||(n=t.format?{...ir(t.format,["parse"])}:{}),_p(t))this._data={values:t.values};else if(dd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Ge(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else sY(t)?this._data={values:[{type:"Sphere"}]}:(rY(t)||sl(t))&&(this._data={});this._generator=sl(t),t.name&&(this._name=t.name),n&&!St(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function sO(e){return e instanceof Ju||e instanceof b0||e instanceof x0}class oO{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class yc extends oO{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class lO extends oO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class g_e extends lO{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of re(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class p_e extends lO{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&eO(t)}run(t){t instanceof Sl&&(this.requiresSelectionId&&(sO(t.parent)||t.parent instanceof na||t.parent instanceof Xn)||(this.setModified(),t.remove()))}}class m_e extends oO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof Ua&&(i=t.producedFields(),QM(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class y_e extends lO{constructor(){super()}run(t){t instanceof Mi&&!t.isRequired()&&(this.setModified(),t.remove())}}class v_e extends yc{run(t){if(!sO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Xn)if(t instanceof Xn)this.setModified(),t.merge(n);else{if(ZM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class b_e extends yc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Xn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const u of re(o))u in r?r[u]!==o[u]&&a.add(u):r[u]=o[u]}for(const s of a)delete r[s];if(!St(r)){this.setModified();const s=new Xn(t,r);for(const o of n){if(o instanceof Xn)for(const u of re(r))delete o.parse[u];t.removeChild(o),o.parent=s,o instanceof Xn&&re(o.parse).length===0&&o.remove()}}}}}class x_e extends yc{run(t){t instanceof Mi||t.numChildren()>0||t instanceof qd||t instanceof Ju||(this.setModified(),t.remove())}}class S_e extends yc{run(t){const n=t.children.filter(r=>r instanceof Ua),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class E_e extends yc{run(t){const n=t.children.filter(r=>r instanceof na),i={};for(const r of n){const a=Ve(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of re(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class __e extends yc{model;constructor(t){super(),this.model=t}run(t){const n=!(sO(t)||t instanceof Ud||t instanceof Xn||t instanceof Sl),i=[],r=[];for(const a of t.children)a instanceof Pa&&(n&&!ZM(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Pa?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class w_e extends yc{run(t){const n=[...t.children];if(!rd(n,s=>s instanceof Mi)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Mi){let o=s;for(;o.numChildren()===1;){const[u]=o.children;if(u instanceof Mi)o=u;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class vc extends ht{transform;clone(){return new vc(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??de(t)}hash(){return`JoinAggregateTransform ${Ve(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class yd extends ht{filter;clone(){return new yd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const u=n.reduceFieldDef((f,d,h)=>{const p=ls(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=Tk({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:ox(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return re(u).length?new yd(t,u):null}dependentFields(){return new Set(re(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Ve(this.filter)}`}assemble(){const t=re(this.filter).reduce((n,i)=>{const r=this.filter[i],a=de(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${U$(a)}))`):r.type==="quantitative"&&n.push(U$(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function U$(e){return`isValid(${e}) && isFinite(+${e})`}function A_e(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=de(i);return r&&t.push(r),t},[])}function $_e(e){return te(e)&&e.every(t=>be(t))&&e.length>1}class Xs extends ht{_stack;clone(){return new Xs(null,ze(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],u=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),u.push(Gt(h.order,"ascending"));const f={field:o,order:u};let d;return $_e(a)?d=a:be(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Xs(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:u}=i,f=a.map(y=>{const v=r[y];return la(v)}).filter(y=>!!y),d=A_e(n),h=n.encoding.order;let p;if(te(h)||ue(h))p=_H(h);else{const y=hG(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new Xs(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:u,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Ve(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[de(r,{binSuffix:"mid"})]:[de(r,{}),de(r,{binSuffix:"end"})]:[de(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:u,as:f}=this._stack;if(u)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=de(d,{expr:"datum"}),v=de(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${U$(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:de(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:de(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class Pd extends ht{transform;clone(){return new Pd(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??de(t)}hash(){return`WindowTransform ${Ve(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>ok(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],u=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),u.push(h.order??"ascending");const f={field:o,order:u},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function C_e(e){function t(n){if(!(n instanceof qd)){const i=n.clone();if(i instanceof Mi){const r=P$+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof na||i instanceof Xs||i instanceof Pd||i instanceof vc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function q$(e){if(e instanceof qd)if(e.numChildren()===1&&!(e.children[0]instanceof Mi)){const t=e.children[0];(t instanceof na||t instanceof Xs||t instanceof Pd||t instanceof vc)&&t.addDimensions(e.fields),t.swapWithParent(),q$(e)}else{const t=e.model.component.data.main;iX(t);const n=C_e(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(q$)}function iX(e){if(e instanceof Mi&&e.type===Nt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof qd||(t.swapWithParent(),iX(e))}}const P$="scale_",p1=5;function I$(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!I$(t.children))return!1}return!0}function Ir(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function t9(e,t,n){let i=e.sources,r=!1;return r=Ir(new y_e,i)||r,r=Ir(new p_e(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=Ir(new x_e,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=Ir(new v_e,i)||r,r=Ir(new __e(t),i)||r,r=Ir(new m_e,i)||r,r=Ir(new b_e,i)||r,r=Ir(new E_e,i)||r,r=Ir(new S_e,i)||r,r=Ir(new g_e,i)||r,r=Ir(new w_e,i)||r),e.sources=i,r}function T_e(e,t){I$(e.sources);let n=0,i=0;for(let r=0;r<p1&&t9(e,t,!0);r++)n++;e.sources.map(q$);for(let r=0;r<p1&&t9(e,t,!1);r++)i++;I$(e.sources),Math.max(n,i)===p1&&le(`Maximum optimization runs(${p1}) reached.`)}class pn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new pn(()=>t(n))}}function rX(e){Rt(e)?M_e(e):k_e(e)}function M_e(e){const t=e.component.scales;for(const n of re(t)){const i=D_e(e,n);if(t[n].setWithExplicit("domains",i),N_e(e,n),e.component.data.isFaceted){let a=e;for(;!rr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)Us(o)&&(o.data=P$+o.data.replace(P$,""))}}}function k_e(e){for(const n of e.children)rX(n);const t=e.component.scales;for(const n of re(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=xl(i,s.getWithExplicit("domains"),"domains","scale",j$);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&le(_ve),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function O_e(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=n9(t,n);if(!r){le(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=n9(t,n);if(r)return"unaggregated"}return e}function D_e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=O_e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&sn(i.x2)?sn(i.x)?xl(Lo(n,r,e,"x"),Lo(n,r,e,"x2"),"domain","scale",j$):Lo(n,r,e,"x2"):t==="y"&&sn(i.y2)?sn(i.y)?xl(Lo(n,r,e,"y"),Lo(n,r,e,"y2"),"domain","scale",j$):Lo(n,r,e,"y2"):Lo(n,r,e,t)}function R_e(e,t,n){return e.map(i=>({signal:`{data: ${xx(i,{timeUnit:n,type:t})}}`}))}function yw(e,t,n){const i=Sn(n)?.unit;return t==="temporal"||i?R_e(e,t,i):[e]}function Lo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:u}=n,f=sn(r[i]),{type:d}=f,h=f.timeUnit,p=$Se({invalid:Va("invalid",a,o),isPath:zl(s)});if(Wbe(t)){const b=Lo(e,void 0,n,i),S=yw(t.unionWith,d,h);return Ma([...S,...b.value])}else{if(_e(t))return Ma([t]);if(t&&t!=="unaggregated"&&!QH(t))return Ma(yw(t,d,h))}if(u&&i===u.fieldChannel){if(u.offset==="normalize")return Vi([[0,1]]);const b=n.requestDataName(p);return Vi([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ls(i)&&ue(f)?z_e(n,i,e):void 0;if(us(f)){const b=yw([f.datum],d,h);return Vi(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Vi([{data:n.requestDataName(p),field:de({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:de({field:b,aggregate:"max"})}])}else if(_t(v.bin)){if(En(e))return Vi(e==="bin-ordinal"?[]:[{data:xp(y)?n.requestDataName(p):n.requestDataName(Nt.Raw),field:n.vgField(i,m0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!me(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(_t(b)){const S=aO(n,v.field,b);return Vi([new pn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return Vi([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Ge(["time","utc"],e)){const b=r[os(i)];if(dG(v,b,a,o)){const S=n.requestDataName(p),_=bl({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=Ep(s)&&_!==.5&&Yt(i);return Vi([{data:S,field:n.vgField(i,w?{suffix:$x}:{})},{data:S,field:n.vgField(i,{suffix:w?Cx:"end"})}])}}return Vi(y?[{data:xp(y)?n.requestDataName(p):n.requestDataName(Nt.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function vw(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":mx),...i?{field:Nr(i)}:{},...r?{order:r}:{}}}function N_e(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=QH(i)?i:void 0,s=dc(r)&&lx(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function z_e(e,t,n){if(!En(n))return;const i=e.fieldDef(t),r=i.sort;if(cG(r))return{op:"min",field:pd(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Gs(r)){const o=a&&!s.has(r.field);return vw(r,o)}else if($xe(r)){const{encoding:o,order:u}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(Zs(d)||Nl(d))return vw({field:de(f),order:u},p);if(ok(d)||!d)return vw({op:d,field:h,order:u},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Ge(["ascending",void 0],r))return!0}}function n9(e,t){const{aggregate:n,type:i}=e;return n?be(n)&&!ave.has(n)?{valid:!1,reason:Kve(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:Jve(e)}:{valid:!0}:{valid:!1,reason:Zve(e)}}function j$(e,t,n,i){return e.explicit&&t.explicit&&le(rbe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function F_e(e){const t=Na(e.map(s=>{if(Us(s)){const{sort:o,...u}=s;return u}return s}),Ve),n=Na(e.map(s=>{if(Us(s)){const o=s.sort;return o!==void 0&&!xp(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Ve);if(t.length===0)return;if(t.length===1){const s=e[0];if(Us(s)&&n.length>0){let o=n[0];if(n.length>1){le(dF);const u=n.filter(f=>me(f)&&"op"in f&&f.op!=="min");n.every(f=>me(f)&&"op"in f)&&u.length===1?o=u[0]:o=!0}else if(me(o)&&"field"in o){const u=o.field;s.field===u&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=Na(n.map(s=>xp(s)||!("op"in s)||be(s.op)&&ve(tve,s.op)?s:(le(sbe(s)),!0)),Ve);let r;i.length===1?r=i[0]:i.length>1&&(le(dF),r=!0);const a=Na(e.map(s=>Us(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function uO(e){if(Us(e)&&be(e.field))return e.field;if(sve(e)){let t;for(const n of e.fields)if(Us(n)&&be(n.field)){if(!t)t=n.field;else if(t!==n.field)return le(obe),t}return le(lbe),t}else if(ove(e)){le(ube);const t=e.fields[0];return be(t)?t:void 0}}function Dx(e,t){const i=e.component.scales[t].get("domains").map(r=>(Us(r)&&(r.data=e.lookupDataSource(r.data)),r));return F_e(i)}function aX(e){return Id(e)||cO(e)?e.children.reduce((t,n)=>t.concat(aX(n)),i9(e)):i9(e)}function i9(e){return re(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:u,range:f,reverse:d,...h}=r,p=L_e(r.range,a,n,e),y=Dx(e,n),v=o?LSe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function L_e(e,t,n,i){if(Yt(n)){if(hc(e))return{step:{signal:`${t}_step`}}}else if(me(e)&&Us(e))return{...e,data:i.lookupDataSource(e.data)};return e}class sX extends lo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Ge([kn.LOG,kn.TIME,kn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Ge([kn.LINEAR,kn.SQRT,kn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(te(o)){const u=o[0],f=o[o.length-1];if(nt(u)&&nt(f))if(u<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const B_e=["range","scheme"];function U_e(e){const t=e.component.scales;for(const n of sk){const i=t[n];if(!i)continue;const r=q_e(n,e);i.setWithExplicit("range",r)}}function r9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=zi(t),s=e.getName(a);if(me(i)&&i.binned&&i.step!==void 0)return new pn(()=>{const o=e.scaleName(t),u=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${u})`});if(_t(i)){const o=aO(e,r,i);return new pn(()=>{const u=e.getSignalName(o),f=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function q_e(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of B_e)if(n[h]!==void 0){const p=_$(a,h),y=ZH(e,h);if(!p)le(kH(a,h,e));else if(y)le(y);else switch(h){case"range":{const v=n.range;if(te(v)){if(Yt(e))return Ma(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return pn.fromName(_,S)}return b}))}else if(me(v))return Ma({data:t.requestDataName(Nt.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Ma(v)}case"scheme":return Ma(P_e(n[h]))}}const s=e===kt||e==="xOffset"?"width":"height",o=i[s];if(Qa(o)){if(Yt(e))if(En(a)){const h=lX(o,t,e);if(h)return Ma({step:h})}else le(OH(s));else if(u0(e)){const h=e===Tl?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=uX(o,a);if(v)return Ma(v)}}}const{rangeMin:u,rangeMax:f}=n,d=I_e(e,t);return(u!==void 0||f!==void 0)&&_$(a,"rangeMin")&&te(d)&&d.length===2?Ma([u??d[0],f??d[1]]):Vi(d)}function P_e(e){return Vbe(e)?{scheme:e.name,...ir(e,["name"])}:{scheme:e}}function oX(e,t,n,{center:i}={}){const r=zi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===wn&&sa(n)?i?[pn.fromName(o=>`${s(o)}/2`,a),pn.fromName(o=>`-${s(o)}/2`,a)]:[pn.fromName(s,a),0]:i?[pn.fromName(o=>`-${s(o)}/2`,a),pn.fromName(o=>`${s(o)}/2`,a)]:[0,pn.fromName(s,a)]}function I_e(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=sn(a[e]),u=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case kt:case wn:{if(Ge(["point","band"],u)){const h=cX(e,n,i.view);if(Qa(h))return{step:lX(h,t,e)}}return oX(e,t,u)}case Tl:case Fd:return j_e(e,t,u);case ro:{const h=Y_e(r,i),p=X_e(r,n,t,i);return ld(u)?G_e(h,p,H_e(u,i,f,e)):[h,p]}case Lr:return[0,Math.PI*2];case cc:return[0,360];case ma:return[0,new pn(()=>{const h=t.getSignalName(rr(t.parent)?"child_width":"width"),p=t.getSignalName(rr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Ml:return{step:1e3/i.scale.framesPerSecond};case Dl:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Rl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Ni:return"symbol";case Ri:case as:case ss:return u==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ao:case kl:case Ol:return[i.scale.minOpacity,i.scale.maxOpacity]}}function lX(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=nk(n),s=i[a];if(HG({step:e,offsetIsDiscrete:Le(s)&&GH(s.type)})==="offset"&&wG(i,a)){const u=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(u.get("type")==="band"){const p=u.get("paddingInner")??u.get("padding")??0,y=u.get("paddingOuter")??u.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${dve(h)})`}}else return e.step}function uX(e,t){if(HG({step:e,offsetIsDiscrete:En(t)})==="offset")return{step:e.step}}function j_e(e,t,n){const i=e===Tl?"x":"y",r=t.getScaleComponent(i);if(!r)return oX(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:u}=t;if(a==="band"){const f=cX(i,t.size,t.config.view);if(Qa(f)){const d=uX(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(ue(f)&&f.timeUnit){const d=PH(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=bl({fieldDef:f,markDef:o,config:u})-.5,y=p!==0?` + ${p}`:"";if(h){const v=_e(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=_e(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return Kj(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function cX(e,t,n){const i=e===kt?"width":"height",r=t[i];return r||wv(n,i)}function H_e(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&te(n)?n.length+1:(le(vbe(i)),3)}}function G_e(e,t,n){const i=()=>{const r=Jr(t),a=Jr(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return _e(t)?new pn(i):{signal:i()}}function Y_e(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(ux("size",e))}const a9=.95;function X_e(e,t,n,i){const r={x:r9(n,"x"),y:r9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=s9(t,r,i.view);return nt(a)?a-1:new pn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=s9(t,r,i.view);return nt(a)?Math.pow(a9*a,2):new pn(()=>`pow(${a9} * ${a.signal}, 2)`)}}throw new Error(ux("size",e))}function s9(e,t,n){const i=Qa(e.width)?e.width.step:C$(n,"width"),r=Qa(e.height)?e.height.step:C$(n,"height");return t.x||t.y?new pn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function fX(e,t){Rt(e)?V_e(e,t):hX(e,t)}function V_e(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of re(n)){const u=s[o],f=n[o],d=e.getScaleComponent(o),h=sn(r[o]),p=u[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=_$(y,t),_=ZH(o,t);if(p!==void 0&&(S?_&&le(_):le(kH(y,t,o))),S&&_===void 0)if(p!==void 0){const w=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":gc(u[t])||A==="temporal"||w?f.set(t,{signal:xx(u[t],{type:A,timeUnit:w})},!0):f.set(t,u[t],!0);break;default:f.copyKeyFromObject(t,u)}}else{const w=se(o9,t)?o9[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:a,config:i,hasNestedOffsetScale:AG(r,o),hasSecondaryRangeChannel:!!r[os(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const o9={bins:({model:e,fieldOrDatumDef:t})=>ue(t)?W_e(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Q_e(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>Z_e(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>K_e(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>J_e(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>ewe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=ue(e)?e.sort:void 0;return twe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>nwe(e,t,n,i,r,a.scale,s)};function dX(e){Rt(e)?U_e(e):hX(e,"range")}function hX(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?dX(i):fX(i,t);for(const i of re(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=xl(r,o,t,"scale",iY((u,f)=>{switch(t){case"range":return u.step&&f.step?u.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function W_e(e,t){const n=t.bin;if(_t(n)){const i=aO(e,t.field,n);return new pn(()=>e.getSignalName(i))}else if(Tn(n)&&dc(n)&&n.step!==void 0)return{step:n.step}}function Q_e(e,t){if(Ge([Ri,as,ss],e)&&t!=="nominal")return"hcl"}function Z_e(e,t,n,i,r,a){if(!(la(a)?.bin||te(n)||r!=null||i!=null||Ge([kn.TIME,kn.UTC],e)))return Yt(t)?!0:void 0}function K_e(e,t,n,i,r,a){if(Yt(e)){if(za(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(ue(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===kn.POINT)return n.pointPadding}}function J_e(e,t,n,i,r,a=!1){if(e===void 0){if(Yt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:u,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Gt(s,n==="bar"?o:n==="tick"?f:u)}else if(u0(t)&&i===kn.BAND)return r.offsetBandPaddingInner}}function ewe(e,t,n,i,r,a=!1){if(e===void 0){if(Yt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===kn.BAND)return Gt(s,_e(i)?{signal:`${i.signal}/2`}:i/2)}else if(u0(t)){if(n===kn.POINT)return .5;if(n===kn.BAND)return r.offsetBandPaddingOuter}}}function twe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return sa(e)&&t==="descending"?_e(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(sa(e)&&t==="descending")return!0}function nwe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&sa(r)){if(te(n)){const u=n[0],f=n[n.length-1];if(nt(u)&&u<=0&&nt(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ld(r))return!0;if(!(ue(t)&&t.bin)&&Ge([...so,...Yye],e)){const{orient:u,type:f}=i;return Ge(["bar","area","line","trail"],f)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Ge(["bar","area"],f)&&!s?!0:a?.zero}return!1}function iwe(e,t,n,i,r=!1){const a=rwe(t,n,i,r),{type:s}=e;return ls(t)?s!==void 0?txe(t,s)?ue(n)&&!exe(s,n.type)?(le(nbe(s,a)),a):s:(le(tbe(t,s,a)),a):a:null}function rwe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(Rf(e)||sw(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&le(ow(e,"ordinal")),"ordinal";if(aw(e))return"band";if(Yt(e)||u0(e)){if(Ge(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in ak)return"band";const r=n[zi(e)];return Wu(r)||cd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Rf(e)?"time":sw(e)==="discrete"?(le(ow(e,"temporal")),"ordinal"):ue(t)&&t.timeUnit&&Sn(t.timeUnit).utc?"utc":aw(e)?"band":"time";case"quantitative":return Rf(e)?ue(t)&&_t(t.bin)?"bin-ordinal":"linear":sw(e)==="discrete"?(le(ow(e,"quantitative")),"ordinal"):aw(e)?"band":"linear";case"geojson":return}throw new Error(TH(t.type))}function awe(e,{ignoreRange:t}={}){gX(e),rX(e);for(const n of Jbe)fX(e,n);t||dX(e)}function gX(e){Rt(e)?e.component.scales=swe(e):e.component.scales=lwe(e)}function swe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of sk){const s=sn(t[a]);if(s&&n===eG&&a===Ni&&s.type===Ld)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const u=AG(t,a),f=iwe(o,a,s,i,u);r[a]=new sX(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const owe=iY((e,t)=>gF(e)-gF(t));function lwe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){gX(r);for(const a of re(r.component.scales))if(i.scale[a]??=GY(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?jbe(s.value,o.value)?n[a]=xl(s,o,"type","scale",owe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of re(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new sX(a,s);for(const o of e.children){const u=o.component.scales[r];u&&(o.renameScale(u.get("name"),a),u.merged=!0)}}return t}class bw{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Rt(e){return e?.type==="unit"}function rr(e){return e?.type==="facet"}function cO(e){return e?.type==="concat"}function Id(e){return e?.type==="layer"}class fO{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Mn(o),this.name=t.name??r,this.title=Io(t.title)?{text:t.title}:t.title?Mn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new bw,this.projectionNameMap=i?i.projectionNameMap:new bw,this.signalNameMap=i?i.signalNameMap:new bw,this.data=t.data,this.description=t.description,this.transforms=gSe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:v2e(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:yx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new lo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?ze(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){awe(this)}parseProjection(){tX(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){QY(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of re(i)){const s=i[a];s!==void 0&&(r[a]=$t(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=$t(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:St(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=MEe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of $r)t[i].title&&n.push(_Ee(this,i));for(const i of tO)n=n.concat(wEe(this,i));return n}assembleAxes(){return cEe(this.component.axes,this.config)}assembleLegends(){return KY(this)}assembleProjections(){return KEe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...bH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Ge(["unit","layer"],this.type)?Ge(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",St(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||rr(this.parent)?aX(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Mt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Nt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(rr(this.parent)){const n=jY(t),i=sx(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(En(a)&&hc(s)){const o=r.get("name"),u=Dx(this,i),f=uO(u);if(f){const d=de({aggregate:"distinct",field:f},{expr:"datum"});return{signal:IY(o,r,d)}}else return le(uk(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(fH(t)&&ls(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(yve(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class pX extends fO{vgField(t,n={}){const i=this.fieldDef(t);if(i)return de(i,n)}reduceFieldDef(t,n){return Xxe(this.getMapping(),(i,r,a)=>{const s=la(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){Lk(this.getMapping(),(i,r)=>{const a=la(i);a&&t(a,r)},n)}}class Rx extends ht{transform;clone(){return new Rx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Ve(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Nx extends ht{transform;clone(){return new Nx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Ve(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class zx extends ht{transform;clone(){return new zx(this.parent,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Ve(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Fx extends ht{transform;clone(){return new Fx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Ve(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Ff extends ht{fields;geojson;signal;clone(){return new Ff(null,ze(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[va,ya],[zr,ba]]){const a=r.map(s=>{const o=sn(n.encoding[s]);return ue(o)?o.field:us(o)?{expr:`${o.datum}`}:oa(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Ff(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Ni)){const r=n.typedFieldDef(Ni);r.type===Ld&&(t=new Ff(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(be);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Ve(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class wp extends ht{projection;fields;as;clone(){return new wp(null,this.projection,ze(this.fields),ze(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[va,ya],[zr,ba]]){const r=i.map(s=>{const o=sn(n.encoding[s]);return ue(o)?o.field:us(o)?{expr:`${o.datum}`}:oa(o)?{expr:`${o.value}`}:void 0}),a=i[0]===zr?"2":"";(r[0]||r[1])&&(t=new wp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(be))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Ve(this.fields)} ${Ve(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Ou extends ht{transform;clone(){return new Ou(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Ou(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(ue(r)&&ue(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:u,value:f,frame:d,keyvals:h}=s.impute,p=TG(n.mark,i);return new Ou(t,{impute:s.field,key:o.field,...u?{method:u}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Ve(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...i?{keyvals:W2e(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,f,d]}else return[u]}}class Lx extends ht{transform;clone(){return new Lx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Ve(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Ap extends ht{transform;secondary;clone(){return new Ap(null,ze(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(Q2e(s)){let u=vX(s.data,a);u||(u=new Ju(s.data),a.push(u));const f=n.getName(`lookup_${r}`);o=new Mi(u,f,Nt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(Z2e(s)){const u=s.param;i={as:u,...i};let f;try{f=n.getSelectionComponent(Mt(u),u)}catch{throw new Error(Sve(u))}if(o=f.materialized,!o)throw new Error(Eve(u))}return new Ap(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ge(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Ve({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ge(this.transform.as)}:{}};else{let n=this.transform.as;be(n)||(le(Rve),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class Bx extends ht{transform;clone(){return new Bx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Ve(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Ux extends ht{transform;clone(){return new Ux(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=ze(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Ve(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class qx extends ht{transform;clone(){return new qx(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Na((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Ve(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class Px extends ht{transform;clone(){return new Px(null,ze(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Ve(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function mX(e){let t=0;function n(i,r){if(i instanceof Ju&&!i.isGenerator&&!dd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Xn&&(i.parent instanceof Ju&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof qd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof b0||i instanceof x0||i instanceof yd||i instanceof Ud||i instanceof gd||i instanceof wp||i instanceof na||i instanceof Ap||i instanceof Pd||i instanceof vc||i instanceof Fx||i instanceof zx||i instanceof Rx||i instanceof Lx||i instanceof Bx||i instanceof Ux||i instanceof Sl||i instanceof Px||i instanceof qx||i instanceof Nx)&&r.transform.push(i.assemble()),(i instanceof Pa||i instanceof Ua||i instanceof Ou||i instanceof Xs||i instanceof Ff)&&r.transform.push(...i.assemble()),i instanceof Mi&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Mi?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Mi&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function uwe(e){const t=[],n=mX(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function cwe(e,t){const n=[],i=mX(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function fwe(e){return e==="top"||e==="left"||_e(e)?"header":"footer"}function dwe(e){for(const t of $r)hwe(e,t);l9(e,"x"),l9(e,"y")}function hwe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=md("title",null,i,t);let u=Nf(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(u=te(u)?u.join(", "):u,u+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=md("labelOrient",s.header,i,t),d=s.header!==null?Gt(s.header?.labels,i.header.labels,!0):!1,h=Ge(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?u:null,facetFieldDef:s,[h]:t==="facet"?[]:[yX(e,t,d)]}}}function yX(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function l9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=rO(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const u=fwe(o.get("orient"));s[u]??=[yX(e,a,!1)];const f=Rg(o,"main",e.config,{header:!0});f&&s[u][0].axes.push(f),o.mainExtracted=!0}}}}function gwe(e){dO(e),Tv(e,"width"),Tv(e,"height")}function pwe(e){dO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Tv(e,t),Tv(e,n)}function dO(e){for(const t of e.children)t.parseLayoutSize()}function Tv(e,t){const n=jY(t),i=sx(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const u=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??GY(i,e);if(f==="independent"&&u.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==u.value){s=void 0;break}s=xl(s,u,n,"")}else s=u}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function mwe(e){const{size:t,component:n}=e;for(const i of so){const r=zi(i);if(t[r]){const a=t[r];n.layoutSize.set(r,Qa(a)?"step":a,!0)}else{const a=ywe(e,r);n.layoutSize.set(r,a,!1)}}}function ywe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(En(a)){const o=wv(i.view,t);return hc(s)||Qa(o)?"step":o}else return $$(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return $$(i.view,t);{const a=wv(i.view,t);return Qa(a)?a.step:a}}}function H$(e,t,n){return de(t,{suffix:`by_${de(e)}`,...n})}class Wg extends pX{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=yO(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!h0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=re(t),i={};for(const r of n){if(![js,Hs].includes(r)){le(ux(r,"facet"));break}const a=t[r];if(a.field===void 0){le(S$(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Fk(t,n);return i.header?i.header=Mn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return se(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Ix(this),this.child.parseData()}parseLayoutSize(){dO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Kt(this.component.selection).some(t=>qa(t))&&fk(ck)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),dwe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of $r)for(const i of nO){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=md("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const u=kx(n,o);t.titleAnchor??={},t.titleAnchor[u]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",u=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[u]??={},t[u][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Wg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Wg?{...this.channelHasField("column")?{encode:{update:{columns:{field:de(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Wg){if(this.child.channelHasField("column")){const r=de(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of so){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(En(s)&&hc(o)){const u=Dx(this.child,r),f=uO(u);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):le(uk(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),u=[];for(const d of $r){const h=this.facet[d];if(h){u.push(de(h));const{bin:p,sort:y}=h;if(_t(p)&&u.push(de(h,{binSuffix:"end"})),Gs(y)){const{field:v,op:b=mx}=y,S=H$(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(te(y)){const v=pd(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:u,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Gs(i.sort)?[H$(i,i.sort,{expr:"datum"})]:te(i.sort)?[pd(i,t,{expr:"datum"})]:[de(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Gs(r)?r.order:!te(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return L$(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of tO)if(t[r]){const a=md("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return L$(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=uwe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:$r.map(u=>this.facetSortFields(u)).flat(),order:$r.map(u=>this.facetSortOrder(u)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(RSe(this,[]))}]}getMapping(){return this.facet}}function vwe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Gs(a.sort)){const{field:s,op:o=mx}=a.sort;e=r=new vc(e,{joinaggregate:[{op:o,field:s,as:H$(a,a.sort,{forAs:!0})}],groupby:[de(a)]})}return r}return null}function vX(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(_p(e)&&_p(i)){if(er(e.values,i.values))return n}else if(dd(e)&&dd(i)){if(e.url===i.url)return n}else if(rY(e)&&e.name===n.dataName)return n}}return null}function bwe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Ju({values:[]});return t.push(i),i}const n=vX(e.data,t);if(n)return sl(e.data)||(n.data.format=Jj({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Ju(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function xwe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(oSe(r))s=e=new gd(e,r),a="derived";else if(Vk(r)){const o=f_e(r);s=e=Xn.makeWithAncestors(e,{},o,n)??e,e=new Ud(e,t,r.filter)}else if(JG(r))s=e=Pa.makeFromTransform(e,r,t),a="number";else if(uSe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Xn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=Ua.makeFromTransform(e,r);else if(cSe(r))s=e=na.makeFromTransform(e,r),a="number",eO(t)&&(e=new Sl(e));else if(KG(r))s=e=Ap.make(e,t,r,i++),a="derived";else if(rSe(r))s=e=new Pd(e,r),a="number";else if(aSe(r))s=e=new vc(e,r),a="number";else if(fSe(r))s=e=Xs.makeFromTransform(e,r),a="derived";else if(dSe(r))s=e=new Fx(e,r),a="derived";else if(hSe(r))s=e=new Nx(e,r),a="derived";else if(sSe(r))s=e=new zx(e,r),a="derived";else if(K2e(r))s=e=new qx(e,r),a="derived";else if(iSe(r))e=new Px(e,r);else if(lSe(r))s=e=Ou.makeFromTransform(e,r),a="derived";else if(J2e(r))s=e=new Rx(e,r),a="derived";else if(eSe(r))s=e=new Bx(e,r),a="derived";else if(tSe(r))s=e=new Ux(e,r),a="derived";else if(nSe(r))s=e=new Lx(e,r),a="derived";else{le(Dve(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Ix(e){let t=bwe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(sl(r)||dd(r)||_p(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new ASe;sl(r)?(aY(r)?t=new x0(t,r.sequence):Wk(r)&&(t=new b0(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Xn.makeExplicit(t,e,s)??t,t=new Sl(t);const o=e.parent&&Id(e.parent);(Rt(e)||rr(e))&&o&&(t=Pa.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=xwe(t,e,s));const u=h_e(e),f=d_e(e);t=Xn.makeWithAncestors(t,{},{...u,...f},s)??t,Rt(e)&&(t=Ff.parseAll(t,e),t=wp.parseAll(t,e)),(Rt(e)||rr(e))&&(o||(t=Pa.makeFromEncoding(t,e)??t),t=Ua.makeFromEncoding(t,e)??t,t=gd.parseAllForSortIndex(t,e));const d=t=m1(Nt.Raw,e,t);if(Rt(e)){const S=na.makeFromEncoding(t,e);S&&(t=S,eO(e)&&(t=new Sl(t))),t=Ou.makeFromEncoding(t,e)??t,t=Xs.makeFromEncoding(t,e)??t}let h,p;if(Rt(e)){const{markDef:S,mark:_,config:w}=e,A=yt("invalid",S,w),{marks:$,scales:T}=p=oY({invalid:A,isPath:zl(_)});$!==T&&T==="include-invalid-values"&&(h=t=m1(Nt.PreFilterInvalid,e,t)),$==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t)}const y=t=m1(Nt.Main,e,t);let v;if(Rt(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=yd.make(t,e,p)??t,v=t=m1(Nt.PostFilterInvalid,e,t))}Rt(e)&&lEe(e,y);let b=null;if(rr(e)){const S=e.getName("facet");t=vwe(t,e.facet)??t,b=new qd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function m1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Mi(n,a,e,r);return i[a]=s,s}class Swe extends fO{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&le(Mve),this.children=this.getChildren(t).map((a,s)=>yO(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Ix(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of re(t.component.selection))this.component.selection[n]=t.component.selection[n]}Kt(this.component.selection).some(t=>qa(t))&&fk(ck)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return _x(t)?t.vconcat:Yk(t)?t.hconcat:t.concat}parseLayoutSize(){pwe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=iO(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Ewe(e){return e===!1||e===null}const _we={disable:1,gridScale:1,scale:1,...EG,labelExpr:1,encode:1},bX=re(_we);class hO extends lo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new hO(ze(this.explicit),ze(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Ewe(this.get(t))}hasOrientSignalRef(){return _e(this.explicit.orient)}}function wwe(e,t,n){const{encoding:i,config:r}=e,a=sn(i[t])??sn(i[os(t)]),s=e.axis(t)||{},{format:o,formatType:u}=s;if(Qu(u))return{text:ea({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:u,config:r}),...n};if(o===void 0&&u===void 0&&r.customFormatTypes){if(ud(a)==="quantitative"){if(cd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ea({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ea({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(ud(a)==="temporal"&&r.timeFormatType&&ue(a)&&!a.timeUnit)return{text:ea({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function Awe(e){return so.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Dwe(n,e)]),t),{})}const $we={bottom:"top",top:"bottom",left:"right",right:"left"};function Cwe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of re(r.component.axes))n.axis[a]=rO(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=Twe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of so){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:u}=s.getWithExplicit("orient");if(!_e(o)){if(i[o]>0&&!u){const f=$we[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Twe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=Mwe(r,a)}}}else return t.map(n=>n.clone());return e}function Mwe(e,t){for(const n of bX){const i=xl(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return $H(r,a);case"gridScale":return{explicit:r.explicit,value:Gt(r.value,a.value)}}return Ax(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function kwe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(_e(n.labelAngle)?n.labelAngle:Sp(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===BY(i,r))return!0}return e===n[t]}const Owe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Dwe(e,t){let n=t.axis(e);const i=new hO,r=sn(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||vEe(e),u=t.getScaleComponent(e).get("type"),f=fEe(e,u,o,t.config),d=n!==void 0?!n:z$("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=pEe(r,n,e,s.style,f),p=lG(n.formatType,r,u),y=oG(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:u,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const _ of bX){const w=_ in VF?VF[_](v):SF(_)?n[_]:void 0,A=w!==void 0,$=kwe(w,_,n,t,e);if(A&&$)i.set(_,w,$);else{const{configValue:T=void 0,configFrom:k=void 0}=SF(_)&&_!=="values"?z$(_,s.style,n.style,f):{},M=T!==void 0;A&&!M?i.set(_,w,$):(k!=="vgAxisConfig"||Owe.has(_)&&M||y0(T)||_e(T))&&i.set(_,T,!1)}}const b=n.encoding??{},S=SG.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=HY(b[w]??{},t),$=w==="labels"?wwe(t,e,A):A;return $!==void 0&&!St($)&&(_[w]={update:$}),_},{});return St(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function Rwe({encoding:e,size:t}){for(const n of so){const i=zi(n);Qa(t[i])&&Jo(e[n])&&(delete t[i],le(OH(i)))}return t}const Nwe={vgMark:"arc",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ci("x",e,{defaultPos:"mid"}),...ci("y",e,{defaultPos:"mid"}),...Ks(e,"radius"),...Ks(e,"theta")})},zwe={vgMark:"area",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Av("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Av("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Jk(e)})},Fwe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y")})},Lwe={vgMark:"shape",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&ue(n)&&n.type===Ld?{field:de(n,{expr:"datum"})}:{}}]}},Bwe={vgMark:"image",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y"),...Zk(e,"url")})},Uwe={vgMark:"line",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ci("x",e,{defaultPos:"mid"}),...ci("y",e,{defaultPos:"mid"}),...On("size",e,{vgChannel:"strokeWidth"}),...Jk(e)})},qwe={vgMark:"trail",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ci("x",e,{defaultPos:"mid"}),...ci("y",e,{defaultPos:"mid"}),...On("size",e),...Jk(e)})};function gO(e,t){const{config:n}=e;return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ci("x",e,{defaultPos:"mid"}),...ci("y",e,{defaultPos:"mid"}),...On("size",e),...On("angle",e),...Pwe(e,n,t)}}function Pwe(e,t,n){return n?{shape:{value:n}}:On("shape",e)}const Iwe={vgMark:"symbol",encodeEntry:e=>gO(e)},jwe={vgMark:"symbol",encodeEntry:e=>gO(e,"circle")},Hwe={vgMark:"symbol",encodeEntry:e=>gO(e,"square")},Gwe={vgMark:"rect",encodeEntry:e=>({...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,"x"),...Ks(e,"y")})},Ywe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Av("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Av("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...On("size",e,{vgChannel:"strokeWidth"})}}},Xwe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Br(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ci("x",e,{defaultPos:"mid"}),...ci("y",e,{defaultPos:"mid"}),...Zk(e),...On("size",e,{vgChannel:"fontSize"}),...On("angle",e),...HF("align",Vwe(e.markDef,n,t)),...HF("baseline",Wwe(e.markDef,n,t)),...ci("radius",e,{defaultPos:null}),...ci("theta",e,{defaultPos:null})}}};function Vwe(e,t,n){if(yt("align",e,n)===void 0)return"center"}function Wwe(e,t,n){if(yt("baseline",e,n)===void 0)return"middle"}const Qwe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Br(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Ks(e,r),...ci(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:$t(yt("thickness",n,t))}}},y1={arc:Nwe,area:zwe,bar:Fwe,circle:jwe,geoshape:Lwe,image:Bwe,line:Uwe,point:Iwe,rect:Gwe,rule:Ywe,square:Hwe,text:Xwe,tick:Qwe,trail:qwe};function Zwe(e){if(Ge([gx,dx,axe],e.mark)){const t=TG(e.mark,e.encoding);if(t.length>0)return Kwe(e,t)}else if(e.mark===hx){const t=b$.some(n=>yt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Jwe(e)}return pO(e)}const u9="faceted_path_";function Kwe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:u9+e.requestDataName(Nt.Main),data:e.requestDataName(Nt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:pO(e,{fromPrefix:u9})}]}const c9="stack_group_";function Jwe(e){const[t]=pO(e,{fromPrefix:c9}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...id(t.encode.update,["y","yc","y2","height",...b$]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ir(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...id(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ir(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of b$){const d=Va(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=$t(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),h=de(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(de(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const h=Va(d,e.markDef,e.config);return h!==void 0?{...f,[d]:$t(h)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Nt.Main),name:c9+e.requestDataName(Nt.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function eAe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!te(s)&&oa(s)&&y$(s.value)||!s&&y$(yt("order",r,a)))){if((te(s)||ue(s))&&!n)return _H(s,{expr:"datum"});if(zl(i)){const o=r.orient==="horizontal"?"y":"x",u=t[o];if(ue(u))return{field:o}}}}function pO(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Gt(i.clip,tAe(e),nAe(e)),o=SH(i),u=r.key,f=eAe(e),d=iAe(e),h=yt("aria",i,a),p=y1[n].postEncodingTransform?y1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:y1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...u?{key:u.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Nt.Main)},encode:{update:y1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function tAe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function nAe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function iAe(e){if(!e.component.selection)return null;const t=re(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=re(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class xX extends pX{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,_F(t)?t.view:void 0);const s=Wa(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=P2e(s,a,{graticule:t.data&&Wk(t.data)}));const u=this.encoding=Gxe(t.encoding||{},o,s.filled,a);this.markDef=WG(s,u,a),this.size=Rwe({encoding:u,size:_F(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=VG(this.markDef,u),this.specifiedScales=this.initScales(o,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>Hk(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===eG,i=t&&Lye.some(r=>Le(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return sk.reduce((i,r)=>{const a=sn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Mn(t);return te(n)&&(r.domain=n.map(Zi)),te(i)&&(r.range=i.map(Zi)),r}initAxes(t){return so.reduce((n,i)=>{const r=t[i];if(Le(r)||i===kt&&Le(t.x2)||i===wn&&Le(t.y2)){const a=Le(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=re(t),i={};for(const r of n){const a=t[r];i[r]=y0(a)?xH(a):Zi(a)}return i}initLegends(t){return Vye.reduce((n,i)=>{const r=sn(t[i]);if(r&&Qye(i)){const a=r.legend;n[i]=a&&Mn(a)}return n},{})}parseData(){this.component.data=Ix(this)}parseLayoutSize(){mwe(this)}parseSelections(){this.component.selection=oEe(this,this.selection)}parseMarkGroup(){this.component.mark=Zwe(this)}parseAxesAndHeaders(){this.component.axes=Awe(this)}assembleSelectionTopLevelSignals(t){return NSe(this,t)}assembleSignals(){return[...zY(this),...DSe(this,[])]}assembleSelectionData(t){return zSe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return iO(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+uY)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!Id(this.parent))&&(t=hY(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Mu(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return la(n)}typedFieldDef(t){const n=this.fieldDef(t);return pi(n)?n:null}}class mO extends fO{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,u)=>{if(wx(o))return new mO(o,this,this.getName(`layer_${u}`),s,a);if(oo(o))return new xX(o,this,this.getName(`layer_${u}`),s,a);throw new Error(lk(o))})}parseData(){this.component.data=Ix(this);for(const t of this.children)t.parseData()}parseLayoutSize(){gwe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of re(t.component.selection))this.component.selection[n]=t.component.selection[n]}Kt(this.component.selection).some(t=>qa(t))&&fk(ck)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Cwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),zY(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),iO(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of ge(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return FSe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),KY(this))}}function yO(e,t,n,i,r){if(yx(e))return new Wg(e,t,n,r);if(wx(e))return new mO(e,t,n,i,r);if(oo(e))return new xX(e,t,n,i,r);if(p2e(e))return new Swe(e,t,n,r);throw new Error(lk(e))}function rAe(e,t={}){t.logger&&bbe(t.logger),t.fieldTitle&&vG(t.fieldTitle);try{const n=XG(Uv(t.config,e.config)),i=nY(e,n),r=yO(i,null,"",void 0,n);return r.parse(),T_e(r.component.data,r),{spec:sAe(r,aAe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&xbe(),t.fieldTitle&&Fxe()}}function aAe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):be(t)&&(t={type:t}),r&&a&&ESe(t.type)){if(r==="step"&&a==="step")le(oF()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";le(oF(sx(s)));const o=s==="width"?"height":"width";t.type=_Se(o)}}return{...re(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...zF(n,!1),...zF(e,!0)}}function sAe(e,t,n={},i){const r=e.config?M2e(e.config):void 0,a=cwe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),u=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...u?{title:u}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...jG(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const oAe=Oye.version,lAe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:ad,accessPathWithDatum:KM,accessWithDatumToUnescapedPath:ft,compile:rAe,contains:Ge,deepEqual:er,deleteNestedProperty:pv,duplicate:ze,entries:yl,every:WM,fieldIntersection:ZM,flatAccessWithDatum:tH,getFirstDefined:Gt,hasIntersection:QM,hasProperty:se,hash:Ve,internalField:rH,isBoolean:xp,isEmpty:St,isEqual:Rye,isInternalField:aH,isNullOrFalse:y$,isNumeric:ex,keys:re,logicalExpr:Xg,mergeDeep:Jj,never:Kj,normalize:nY,normalizeAngle:Sp,omit:ir,pick:id,prefixGenerator:v$,removePathFromField:zd,replaceAll:Hu,replacePathInField:Nr,resetIdCounter:zye,setEqual:eH,some:rd,stringify:lt,titleCase:s0,unique:Na,uniqueId:iH,vals:Kt,varName:Mt,version:oAe},Symbol.toStringTag,{value:"Module"}));var v1={},f9;function uAe(){if(f9)return v1;f9=1,Object.defineProperty(v1,"__esModule",{value:!0});function e(t){var n=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,i=n.exec(t).slice(1,3),r=i[0],a=i[1];return{library:r,version:a}}return v1.default=e,v1}var cAe=uAe();const SX=Dv(cAe);var fAe="2.15.0",dAe={version:fAe};const mf="#fff",d9="#888",hAe={background:"#333",view:{stroke:d9},title:{color:mf,subtitleColor:mf},style:{"guide-label":{fill:mf},"guide-title":{fill:mf}},axis:{domainColor:mf,gridColor:d9,tickColor:mf}},iu="#4572a7",gAe={background:"#fff",arc:{fill:iu},area:{fill:iu},line:{stroke:iu,strokeWidth:2},path:{stroke:iu},rect:{fill:iu},shape:{stroke:iu},symbol:{fill:iu,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},ru="#30a2da",xw="#cbcbcb",pAe="#999",mAe="#333",h9="#f0f0f0",g9="#333",yAe={arc:{fill:ru},area:{fill:ru},axis:{domainColor:xw,grid:!0,gridColor:xw,gridWidth:1,labelColor:pAe,labelFontSize:10,titleColor:mAe,tickColor:xw,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:h9,group:{fill:h9},legend:{labelColor:g9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:g9,titleFontSize:14,titlePadding:10},line:{stroke:ru,strokeWidth:2},path:{stroke:ru,strokeWidth:.5},rect:{fill:ru},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:ru},bar:{binSpacing:2,fill:ru,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},au="#000",vAe={group:{fill:"#e5e5e5"},arc:{fill:au},area:{fill:au},line:{stroke:au},path:{stroke:au},rect:{fill:au},shape:{stroke:au},symbol:{fill:au,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},bAe=22,xAe="normal",p9="Benton Gothic, sans-serif",m9=11.5,SAe="normal",su="#82c6df",Sw="Benton Gothic Bold, sans-serif",y9="normal",v9=13,lg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},EAe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Sw,fontSize:bAe,fontWeight:xAe},arc:{fill:su},area:{fill:su},line:{stroke:su,strokeWidth:2},path:{stroke:su},rect:{fill:su},shape:{stroke:su},symbol:{fill:su,size:30},axis:{labelFont:p9,labelFontSize:m9,labelFontWeight:SAe,titleFont:Sw,titleFontSize:v9,titleFontWeight:y9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:p9,labelFontSize:m9,symbolType:"square",titleFont:Sw,titleFontSize:v9,titleFontWeight:y9},range:{category:lg["category-6"],diverging:lg["fireandice-6"],heatmap:lg["fire-7"],ordinal:lg["fire-7"],ramp:lg["fire-7"]}},ou="#ab5787",b1="#979797",_Ae={background:"#f9f9f9",arc:{fill:ou},area:{fill:ou},line:{stroke:ou},path:{stroke:ou},rect:{fill:ou},shape:{stroke:ou},symbol:{fill:ou,size:30},axis:{domainColor:b1,domainWidth:.5,gridWidth:.2,labelColor:b1,tickColor:b1,tickWidth:.2,titleColor:b1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},lu="#3e5c69",wAe={background:"#fff",arc:{fill:lu},area:{fill:lu},line:{stroke:lu},path:{stroke:lu},rect:{fill:lu},shape:{stroke:lu},symbol:{fill:lu},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},xr="#1696d2",b9="#000000",AAe="#FFFFFF",x1="Lato",Ew="Lato",$Ae="Lato",CAe="#DEDDDD",TAe=18,ug={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},MAe={background:AAe,title:{anchor:"start",fontSize:TAe,font:x1},axisX:{domain:!0,domainColor:b9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Ew,labelAngle:0,tickColor:b9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:x1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:CAe,gridWidth:1,labelFontSize:12,labelFont:Ew,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:x1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Ew,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:x1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:ug["six-groups-cat-1"],diverging:ug["diverging-colors"],heatmap:ug["diverging-colors"],ordinal:ug["six-groups-seq"],ramp:ug["shades-blue"]},area:{fill:xr},rect:{fill:xr},line:{color:xr,stroke:xr,strokeWidth:5},trail:{color:xr,stroke:xr,strokeWidth:0,size:1},path:{stroke:xr,strokeWidth:.5},point:{filled:!0},text:{font:$Ae,color:xr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:xr,stroke:null}},arc:{fill:xr},shape:{stroke:xr},symbol:{fill:xr,size:30}},uu="#3366CC",x9="#ccc",S1="Arial, sans-serif",kAe={arc:{fill:uu},area:{fill:uu},path:{stroke:uu},rect:{fill:uu},shape:{stroke:uu},symbol:{stroke:uu},circle:{fill:uu},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:S1,fontSize:12},"guide-title":{font:S1,fontSize:12},"group-title":{font:S1,fontSize:12}},title:{font:S1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:x9,tickColor:x9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},vO=e=>e*(1/3+1),S9=vO(9),E9=vO(10),_9=vO(12),cg="Segoe UI",w9="wf_standard-font, helvetica, arial, sans-serif",A9="#252423",fg="#605E5C",$9="transparent",OAe="#C8C6C4",Hr="#118DFF",DAe="#12239E",RAe="#E66C37",NAe="#6B007B",zAe="#E044A7",FAe="#744EC2",LAe="#D9B300",BAe="#D64550",EX=Hr,_X="#DEEFFF",C9=[_X,EX],UAe=[_X,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",EX],qAe={view:{stroke:$9},background:$9,font:cg,header:{titleFont:w9,titleFontSize:_9,titleColor:A9,labelFont:cg,labelFontSize:E9,labelColor:fg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:fg,labelFontSize:S9,titleFont:w9,titleColor:A9,titleFontSize:_9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:OAe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Hr},line:{stroke:Hr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:cg,fontSize:S9,fill:fg},arc:{fill:Hr},area:{fill:Hr,line:!0,opacity:.6},path:{stroke:Hr},rect:{fill:Hr},point:{fill:Hr,filled:!0,size:75},shape:{stroke:Hr},symbol:{fill:Hr,strokeWidth:1.5,size:50},legend:{titleFont:cg,titleFontWeight:"bold",titleColor:fg,labelFont:cg,labelFontSize:E9,labelColor:fg,symbolType:"circle",symbolSize:75},range:{category:[Hr,DAe,RAe,NAe,zAe,FAe,LAe,BAe],diverging:C9,heatmap:C9,ordinal:UAe}},_w='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',PAe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',ww=400,E1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},IAe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],jAe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function jx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=E1.gridBg[e],r=E1.textPrimary[e],a=E1.textSecondary[e],s=n==="dark"?IAe:jAe,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:_w,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:PAe,labelFontWeight:ww,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:E1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:_w,fill:a,fontWeight:ww},"guide-title":{font:_w,fill:a,fontWeight:ww}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const HAe=jx({theme:"white",background:"#ffffff"}),GAe=jx({theme:"g10",background:"#f4f4f4"}),YAe=jx({theme:"g90",background:"#262626"}),XAe=jx({theme:"g100",background:"#161616"}),VAe=dAe.version,WAe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:GAe,carbong100:XAe,carbong90:YAe,carbonwhite:HAe,dark:hAe,excel:gAe,fivethirtyeight:yAe,ggplot2:vAe,googlecharts:kAe,latimes:EAe,powerbi:qAe,quartz:_Ae,urbaninstitute:MAe,version:VAe,vox:wAe},Symbol.toStringTag,{value:"Module"})),QAe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,wX="vg-tooltip-element",ZAe={offsetX:10,offsetY:10,id:wX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:KAe,maxDepth:2};function KAe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function JAe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return QAe.toString().replace(wX,e)}function jd(e,t,n){return e.fields=t||[],e.fname=n,e}function e$e(e){return e.length===1?t$e(e[0]):n$e(e)}const t$e=e=>function(t){return t[e]},n$e=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Aw(e){throw Error(e)}function i$e(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,u;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(u=e[o],u==="\\")a+=e.substring(s,o++),s=o;else if(u===i)f(),i=null,r=-1;else{if(i)continue;s===r&&u==='"'||s===r&&u==="'"?(s=o+1,i=u):u==="."&&!r?o>s?f():s=o+1:u==="["?(o>s&&f(),r=s=o+1):u==="]"&&(r||Aw("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&Aw("Access path missing closing bracket: "+e),i&&Aw("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function r$e(e,t,n){const i=i$e(e);return e=i.length===1?i[0]:e,jd(e$e(i),[e],e)}r$e("id");jd(e=>e,[],"identity");jd(()=>0,[],"zero");jd(()=>1,[],"one");jd(()=>!0,[],"true");jd(()=>!1,[],"false");var AX=Array.isArray;function Mv(e){return e===Object(e)}const T9=e=>e!=="__proto__";function $X(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=a$e(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;CX(i,a,r[a],s)}return i},{})}function CX(e,t,n,i){if(!T9(t))return;let r,a;if(Mv(n)&&!AX(n)){a=Mv(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?CX(a,r,n[r]):T9(r)&&(a[r]=n[r])}else e[t]=n}function a$e(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function s$e(e){return typeof e=="boolean"}function kv(e){return typeof e=="string"}var o$e=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function l$e(e,t,n){if(AX(e))return`[${e.map(i=>t(kv(i)?i:M9(i,n))).join(", ")}]`;if(Mv(e)){let i="";const r=e,{title:a}=r,s=o$e(r,["title"]);a&&(i+=`<h2>${t(a)}</h2>`);const o=Object.keys(s);if(o.length>0){i+="<table>";for(const u of o){let f=s[u];f!==void 0&&(Mv(f)&&(f=M9(f,n)),i+=`<tr><td class="key">${t(u)}:</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function u$e(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function M9(e,t){return JSON.stringify(e,u$e(t))}function c$e(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:r,y:a}}class f$e{constructor(t){this.options=Object.assign(Object.assign({},ZAe),t);const n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=JAe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,n,i,r){if(r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=l$e(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=c$e(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${s}px; left: ${a}px`)}}function d$e(e,t,n){const i=e.open(t),r=250;let a=40;function s(u){u.source===i&&(a=0,e.removeEventListener("message",s,!1))}e.addEventListener("message",s,!1);function o(){a<=0||(i.postMessage(n,"*"),setTimeout(o,r),a-=1)}setTimeout(o,r)}const h$e=`.vega-embed {
  position: relative;
  display: inline-block; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: scroll;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function TX(e,...t){for(const n of t)g$e(e,n);return e}function g$e(e,t){for(const n of Object.keys(t))xd(e,n,t[n],!0)}var $w;const Ho=Mye;let $p=lAe;const _1=typeof window<"u"?window:void 0;$p===void 0&&(!(($w=_1?.vl)===null||$w===void 0)&&$w.compile)&&($p=_1.vl);const p$e={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},m$e={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Ng={vega:"Vega","vega-lite":"Vega-Lite"},Ov={vega:Ho.version,"vega-lite":$p?$p.version:"not available"},y$e={vega:e=>e,"vega-lite":(e,t)=>$p.compile(e,{config:t}).spec},v$e=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`;function b$e(e){return typeof e=="function"}function k9(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Ng[i]} JSON Source`}function x$e(e,t){var n;if(e.$schema){const i=SX(e.$schema);t&&t!==i.library&&console.warn(`The given visualization spec is written in ${Ng[i.library]}, but mode argument sets ${(n=Ng[t])!==null&&n!==void 0?n:t}.`);const r=i.library;return j9.satisfies(Ov[r],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${Ng[r]} ${i.version}, but the current version of ${Ng[r]} is v${Ov[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function S$e(e){return!!(e&&"load"in e)}function E$e(e,t,n={}){var i,r,a;return Q1(this,void 0,void 0,function*(){const s=S$e(n.loader)?n.loader:Ho.loader(n.loader),o=kv(t)?JSON.parse(yield s.load(t)):t,u=yield O9((i=o.usermeta&&o.usermeta.embedOptions)!==null&&i!==void 0?i:{},s),f=yield O9(n,s),d=Object.assign(Object.assign({},TX(f,u)),{config:$X((r=f.config)!==null&&r!==void 0?r:{},(a=u.config)!==null&&a!==void 0?a:{})});return yield _$e(e,o,d,s)})}function O9(e,t){var n;return Q1(this,void 0,void 0,function*(){const i=kv(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},r=kv(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),r?{patch:r}:{}),i?{config:i}:{})})}function _$e(e,t,n={},i){var r,a,s,o,u,f;return Q1(this,void 0,void 0,function*(){const d=n.theme?$X(WAe[n.theme],(r=n.config)!==null&&r!==void 0?r:{}):n.config,h=s$e(n.actions)?n.actions:TX({},p$e,(a=n.actions)!==null&&a!==void 0?a:{}),p=Object.assign(Object.assign({},m$e),n.i18n),y=(s=n.renderer)!==null&&s!==void 0?s:"canvas",v=(o=n.logLevel)!==null&&o!==void 0?o:Ho.Warn,b=(u=n.downloadFileName)!==null&&u!==void 0?u:"visualization";if(n.defaultStyle!==!1){const N="vega-embed-style";if(!document.getElementById(N)){const B=document.createElement("style");B.id=N,B.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?h$e.toString():n.defaultStyle,document.head.appendChild(B)}}const S=x$e(t,n.mode);let _=y$e[S](t,d);if(S==="vega-lite"&&_.$schema){const N=SX(_.$schema);j9.satisfies(Ov.vega,`^${N.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${N.version}, but current version is v${Ov.vega}.`)}const w=typeof e=="string"?document.querySelector(e):e;if(!w)throw Error(`${e} does not exist`);w.classList.add("vega-embed"),h&&w.classList.add("has-actions"),w.innerHTML="";const A=n.patch;A&&(A instanceof Function?_=A(_):_=Rv(_,A,!0,!1).newDocument),n.formatLocale&&Ho.formatLocale(n.formatLocale),n.timeFormatLocale&&Ho.timeFormatLocale(n.timeFormatLocale);const $=Ho.parse(_,S==="vega-lite"?{}:d),T=new Ho.View($,{loader:i,logLevel:v,renderer:y});if(n.tooltip!==!1){let N;b$e(n.tooltip)?N=n.tooltip:N=new f$e(n.tooltip===!0?{}:n.tooltip).call,T.tooltip(N)}let{hover:k}=n;if(k===void 0&&(k=S==="vega"),k){const{hoverSet:N,updateSet:B}=typeof k=="boolean"?{}:k;T.hover(N,B)}n&&(n.width!=null&&T.width(n.width),n.height!=null&&T.height(n.height),n.padding!=null&&T.padding(n.padding)),yield T.initialize(e).runAsync();let M;if(h!==!1){let N=w;if(n.defaultStyle!==!1){const F=document.createElement("details");F.title=p.CLICK_TO_VIEW_ACTIONS,w.append(F),N=F;const G=document.createElement("summary");G.innerHTML=v$e,F.append(G),M=I=>{F.contains(I.target)||F.removeAttribute("open")},document.addEventListener("click",M)}const B=document.createElement("div");if(N.append(B),B.classList.add("vega-actions"),h===!0||h.export!==!1){for(const F of["svg","png"])if(h===!0||h.export===!0||h.export[F]){const G=p[`${F.toUpperCase()}_ACTION`],I=document.createElement("a");I.text=G,I.href="#",I.target="_blank",I.download=`${b}.${F}`,I.addEventListener("mousedown",function(U){return Q1(this,void 0,void 0,function*(){U.preventDefault();const z=yield T.toImageURL(F,n.scaleFactor);this.href=z})}),B.append(I)}}if(h===!0||h.source!==!1){const F=document.createElement("a");F.text=p.SOURCE_ACTION,F.href="#",F.addEventListener("mousedown",function(G){var I,U;k9(uE(t),(I=n.sourceHeader)!==null&&I!==void 0?I:"",(U=n.sourceFooter)!==null&&U!==void 0?U:"",S),G.preventDefault()}),B.append(F)}if(S==="vega-lite"&&(h===!0||h.compiled!==!1)){const F=document.createElement("a");F.text=p.COMPILED_ACTION,F.href="#",F.addEventListener("mousedown",function(G){var I,U;k9(uE(_),(I=n.sourceHeader)!==null&&I!==void 0?I:"",(U=n.sourceFooter)!==null&&U!==void 0?U:"","vega"),G.preventDefault()}),B.append(F)}if(h===!0||h.editor!==!1){const F=(f=n.editorUrl)!==null&&f!==void 0?f:"https://vega.github.io/editor/",G=document.createElement("a");G.text=p.EDITOR_ACTION,G.href="#",G.addEventListener("mousedown",function(I){d$e(window,F,{config:d,mode:S,renderer:y,spec:uE(t)}),I.preventDefault()}),B.append(G)}}function D(){M&&document.removeEventListener("click",M),T.finalize()}return{view:T,spec:t,vgSpec:_,finalize:D}})}function w$e(e){return!!e&&{}.toString.call(e)==="[object Function]"}function A$e(e,t,n){n&&(w$e(n)?n(e.data(t)):e.change(t,Ho.changeset().remove(()=>!0).insert(n)))}function $$e(e,t){Object.keys(t).forEach(n=>{A$e(e,n,t[n])})}function MX(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}const kX=()=>{};function Cw(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var Tw,D9;function C$e(){return D9||(D9=1,Tw=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var s=a[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),Tw}var T$e=C$e();const M$e=Dv(T$e);function k$e(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i=MX([e,t]);return i.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),i.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in e)||!(r in t)||!M$e(e[r],t[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function R9(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function Mw(e){const{spec:t,width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function zg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class OX extends el.PureComponent{constructor(){super(...arguments),zg(this,"containerRef",el.createRef()),zg(this,"resultPromise",void 0),zg(this,"handleError",t=>{const{onError:n=kX}=this.props;n(t,this.containerRef.current),console.warn(t)}),zg(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=MX([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=k$e(Mw(this.props),Mw(t)),{signalListeners:r}=this.props,{signalListeners:a}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const s=!kw(r,a);this.modifyView(o=>{i.width!==!1&&o.width(i.width),i.height!==!1&&o.height(i.height),s&&(a&&R9(o,a),r&&Cw(o,r)),o.run()})}else kw(r,a)||this.modifyView(s=>{a&&R9(s,a),r&&Cw(s,r),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:i={},width:r,height:a,...s}=this.props;if(this.containerRef.current){const o=Mw(this.props);this.resultPromise=E$e(this.containerRef.current,o,s).then(u=>{if(u){const{view:f}=u;Cw(f,i)&&f.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return el.createElement("div",{ref:this.containerRef,className:t,style:n})}}zg(OX,"propTypes",{className:S5.string,onError:S5.func});function G$(){return G$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},G$.apply(this,arguments)}function Y$(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O$e={};class DX extends el.PureComponent{constructor(){super(...arguments),Y$(this,"vegaEmbed",el.createRef()),Y$(this,"handleNewView",t=>{this.update();const{onNewView:n=kX}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){kw(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{$$e(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return el.createElement(OX,G$({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}Y$(DX,"defaultProps",{data:O$e});function X$(){return X$=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},X$.apply(this,arguments)}function D$e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R$e(e){let{mode:t,spec:n}=e;class i extends el.PureComponent{render(){return el.createElement(DX,X$({mode:t,spec:n},this.props))}}return D$e(i,"getSpec",function(){return n}),i}function N$e(e){f5.useEffect(()=>{console.debug("[Extension.jsx] useEffect props changed:",e)},[e]),f5.useEffect(()=>{console.debug("[Extension.jsx] useEffect"),tableau.extensions.initializeAsync({configure:t}).then(()=>{console.debug("[Extension.jsx] initializeAsync completed")})},[]);function t(){console.debug("[Extension.jsx] Opening configure popup");const i=`${window.location.origin}/tableau-ext-vega/configure.html`;tableau.extensions.ui.displayDialogAsync(i,null,{height:500,width:500}).then(r=>{console.debug("[Extension.jsx] displayDialogAsync was closed with payload:",r),console.debug("[Extension.jsx] Config window closed",e)}).catch(r=>{switch(r.errorCode){case tableau.ErrorCodes.DialogClosedByUser:console.debug("[Extension.jsx] Dialog was closed by user");break;default:console.error("[Extension.jsx]",r.message)}})}const n=R$e({spec:{$schema:"https://vega.github.io/schema/vega-lite/v6.json",data:{values:[{"i-type":"A",count:3,color:"rgb(121, 199, 227)"},{"i-type":"B",count:20,color:"rgb(26, 49, 119)"},{"i-type":"C",count:24,color:"rgb(18, 147, 154)"}]},description:"A simple pie chart with labels.",encoding:{theta:{field:"count",type:"quantitative",stack:!0},color:{field:"color",type:"nominal",legend:null,scale:null}},layer:[{mark:{type:"arc",outerRadius:80}}]}});return z9.jsx(n,{})}rQ.createRoot(document.getElementById("root")).render(z9.jsx(N$e,{}));
