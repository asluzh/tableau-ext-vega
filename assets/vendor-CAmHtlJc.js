var yD={exports:{}},f0={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XT;function WV(){if(XT)return f0;XT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var o=null;if(a!==void 0&&(o=""+a),r.key!==void 0&&(o=""+r.key),"key"in r){a={};for(var u in r)u!=="key"&&(a[u]=r[u])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:o,ref:r!==void 0?r:null,props:a}}return f0.Fragment=t,f0.jsx=n,f0.jsxs=n,f0}var VT;function QV(){return VT||(VT=1,yD.exports=WV()),yD.exports}var xAe=QV(),vD={exports:{}},d0={},bD={exports:{}},xD={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT;function ZV(){return WT||(WT=1,(function(e){function t(T,R){var q=T.length;T.push(R);e:for(;0<q;){var G=q-1>>>1,O=T[G];if(0<r(O,R))T[G]=R,T[q]=O,q=G;else break e}}function n(T){return T.length===0?null:T[0]}function i(T){if(T.length===0)return null;var R=T[0],q=T.pop();if(q!==R){T[0]=q;e:for(var G=0,O=T.length,Z=O>>>1;G<Z;){var ee=2*(G+1)-1,X=T[ee],Q=ee+1,ne=T[Q];if(0>r(X,q))Q<O&&0>r(ne,X)?(T[G]=ne,T[Q]=q,G=Q):(T[G]=X,T[ee]=q,G=ee);else if(Q<O&&0>r(ne,q))T[G]=ne,T[Q]=q,G=Q;else break e}}return R}function r(T,R){var q=T.sortIndex-R.sortIndex;return q!==0?q:T.id-R.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,u=o.now();e.unstable_now=function(){return o.now()-u}}var c=[],l=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,x=!1,D=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function w(T){for(var R=n(l);R!==null;){if(R.callback===null)i(l);else if(R.startTime<=T)i(l),R.sortIndex=R.expirationTime,t(c,R);else break;R=n(l)}}function _(T){if(b=!1,w(T),!v)if(n(c)!==null)v=!0,k||(k=!0,H());else{var R=n(l);R!==null&&z(_,R.startTime-T)}}var k=!1,F=-1,M=5,N=-1;function P(){return x?!0:!(e.unstable_now()-N<M)}function L(){if(x=!1,k){var T=e.unstable_now();N=T;var R=!0;try{e:{v=!1,b&&(b=!1,S(F),F=-1),y=!0;var q=p;try{t:{for(w(T),h=n(c);h!==null&&!(h.expirationTime>T&&P());){var G=h.callback;if(typeof G=="function"){h.callback=null,p=h.priorityLevel;var O=G(h.expirationTime<=T);if(T=e.unstable_now(),typeof O=="function"){h.callback=O,w(T),R=!0;break t}h===n(c)&&i(c),w(T)}else i(c);h=n(c)}if(h!==null)R=!0;else{var Z=n(l);Z!==null&&z(_,Z.startTime-T),R=!1}}break e}finally{h=null,p=q,y=!1}R=void 0}}finally{R?H():k=!1}}}var H;if(typeof A=="function")H=function(){A(L)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,U=I.port2;I.port1.onmessage=L,H=function(){U.postMessage(null)}}else H=function(){D(L,0)};function z(T,R){F=D(function(){T(e.unstable_now())},R)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(T){switch(p){case 1:case 2:case 3:var R=3;break;default:R=p}var q=p;p=R;try{return T()}finally{p=q}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(T,R){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var q=p;p=T;try{return R()}finally{p=q}},e.unstable_scheduleCallback=function(T,R,q){var G=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?G+q:G):q=G,T){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=q+O,T={id:d++,callback:R,priorityLevel:T,startTime:q,expirationTime:O,sortIndex:-1},q>G?(T.sortIndex=q,t(l,T),n(c)===null&&T===n(l)&&(b?(S(F),F=-1):b=!0,z(_,q-G))):(T.sortIndex=O,t(c,T),v||y||(v=!0,k||(k=!0,H()))),T},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(T){var R=p;return function(){var q=p;p=R;try{return T.apply(this,arguments)}finally{p=q}}}})(xD)),xD}var QT;function KV(){return QT||(QT=1,bD.exports=ZV()),bD.exports}var ED={exports:{}},at={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZT;function JV(){if(ZT)return at;ZT=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),l=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(O){return O===null||typeof O!="object"?null:(O=h&&O[h]||O["@@iterator"],typeof O=="function"?O:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function x(O,Z,ee){this.props=O,this.context=Z,this.refs=b,this.updater=ee||y}x.prototype.isReactComponent={},x.prototype.setState=function(O,Z){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,Z,"setState")},x.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function D(){}D.prototype=x.prototype;function S(O,Z,ee){this.props=O,this.context=Z,this.refs=b,this.updater=ee||y}var A=S.prototype=new D;A.constructor=S,v(A,x.prototype),A.isPureReactComponent=!0;var w=Array.isArray,_={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function F(O,Z,ee,X,Q,ne){return ee=ne.ref,{$$typeof:e,type:O,key:Z,ref:ee!==void 0?ee:null,props:ne}}function M(O,Z){return F(O.type,Z,void 0,void 0,void 0,O.props)}function N(O){return typeof O=="object"&&O!==null&&O.$$typeof===e}function P(O){var Z={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ee){return Z[ee]})}var L=/\/+/g;function H(O,Z){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):Z.toString(36)}function I(){}function U(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(I,I):(O.status="pending",O.then(function(Z){O.status==="pending"&&(O.status="fulfilled",O.value=Z)},function(Z){O.status==="pending"&&(O.status="rejected",O.reason=Z)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function z(O,Z,ee,X,Q){var ne=typeof O;(ne==="undefined"||ne==="boolean")&&(O=null);var ce=!1;if(O===null)ce=!0;else switch(ne){case"bigint":case"string":case"number":ce=!0;break;case"object":switch(O.$$typeof){case e:case t:ce=!0;break;case d:return ce=O._init,z(ce(O._payload),Z,ee,X,Q)}}if(ce)return Q=Q(O),ce=X===""?"."+H(O,0):X,w(Q)?(ee="",ce!=null&&(ee=ce.replace(L,"$&/")+"/"),z(Q,Z,ee,"",function(j){return j})):Q!=null&&(N(Q)&&(Q=M(Q,ee+(Q.key==null||O&&O.key===Q.key?"":(""+Q.key).replace(L,"$&/")+"/")+ce)),Z.push(Q)),1;ce=0;var Fe=X===""?".":X+":";if(w(O))for(var Me=0;Me<O.length;Me++)X=O[Me],ne=Fe+H(X,Me),ce+=z(X,Z,ee,ne,Q);else if(Me=p(O),typeof Me=="function")for(O=Me.call(O),Me=0;!(X=O.next()).done;)X=X.value,ne=Fe+H(X,Me++),ce+=z(X,Z,ee,ne,Q);else if(ne==="object"){if(typeof O.then=="function")return z(U(O),Z,ee,X,Q);throw Z=String(O),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return ce}function T(O,Z,ee){if(O==null)return O;var X=[],Q=0;return z(O,X,"","",function(ne){return Z.call(ee,ne,Q++)}),X}function R(O){if(O._status===-1){var Z=O._result;Z=Z(),Z.then(function(ee){(O._status===0||O._status===-1)&&(O._status=1,O._result=ee)},function(ee){(O._status===0||O._status===-1)&&(O._status=2,O._result=ee)}),O._status===-1&&(O._status=0,O._result=Z)}if(O._status===1)return O._result.default;throw O._result}var q=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)};function G(){}return at.Children={map:T,forEach:function(O,Z,ee){T(O,function(){Z.apply(this,arguments)},ee)},count:function(O){var Z=0;return T(O,function(){Z++}),Z},toArray:function(O){return T(O,function(Z){return Z})||[]},only:function(O){if(!N(O))throw Error("React.Children.only expected to receive a single React element child.");return O}},at.Component=x,at.Fragment=n,at.Profiler=r,at.PureComponent=S,at.StrictMode=i,at.Suspense=c,at.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,at.__COMPILER_RUNTIME={__proto__:null,c:function(O){return _.H.useMemoCache(O)}},at.cache=function(O){return function(){return O.apply(null,arguments)}},at.cloneElement=function(O,Z,ee){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var X=v({},O.props),Q=O.key,ne=void 0;if(Z!=null)for(ce in Z.ref!==void 0&&(ne=void 0),Z.key!==void 0&&(Q=""+Z.key),Z)!k.call(Z,ce)||ce==="key"||ce==="__self"||ce==="__source"||ce==="ref"&&Z.ref===void 0||(X[ce]=Z[ce]);var ce=arguments.length-2;if(ce===1)X.children=ee;else if(1<ce){for(var Fe=Array(ce),Me=0;Me<ce;Me++)Fe[Me]=arguments[Me+2];X.children=Fe}return F(O.type,Q,void 0,void 0,ne,X)},at.createContext=function(O){return O={$$typeof:o,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:a,_context:O},O},at.createElement=function(O,Z,ee){var X,Q={},ne=null;if(Z!=null)for(X in Z.key!==void 0&&(ne=""+Z.key),Z)k.call(Z,X)&&X!=="key"&&X!=="__self"&&X!=="__source"&&(Q[X]=Z[X]);var ce=arguments.length-2;if(ce===1)Q.children=ee;else if(1<ce){for(var Fe=Array(ce),Me=0;Me<ce;Me++)Fe[Me]=arguments[Me+2];Q.children=Fe}if(O&&O.defaultProps)for(X in ce=O.defaultProps,ce)Q[X]===void 0&&(Q[X]=ce[X]);return F(O,ne,void 0,void 0,null,Q)},at.createRef=function(){return{current:null}},at.forwardRef=function(O){return{$$typeof:u,render:O}},at.isValidElement=N,at.lazy=function(O){return{$$typeof:d,_payload:{_status:-1,_result:O},_init:R}},at.memo=function(O,Z){return{$$typeof:l,type:O,compare:Z===void 0?null:Z}},at.startTransition=function(O){var Z=_.T,ee={};_.T=ee;try{var X=O(),Q=_.S;Q!==null&&Q(ee,X),typeof X=="object"&&X!==null&&typeof X.then=="function"&&X.then(G,q)}catch(ne){q(ne)}finally{_.T=Z}},at.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},at.use=function(O){return _.H.use(O)},at.useActionState=function(O,Z,ee){return _.H.useActionState(O,Z,ee)},at.useCallback=function(O,Z){return _.H.useCallback(O,Z)},at.useContext=function(O){return _.H.useContext(O)},at.useDebugValue=function(){},at.useDeferredValue=function(O,Z){return _.H.useDeferredValue(O,Z)},at.useEffect=function(O,Z,ee){var X=_.H;if(typeof ee=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return X.useEffect(O,Z)},at.useId=function(){return _.H.useId()},at.useImperativeHandle=function(O,Z,ee){return _.H.useImperativeHandle(O,Z,ee)},at.useInsertionEffect=function(O,Z){return _.H.useInsertionEffect(O,Z)},at.useLayoutEffect=function(O,Z){return _.H.useLayoutEffect(O,Z)},at.useMemo=function(O,Z){return _.H.useMemo(O,Z)},at.useOptimistic=function(O,Z){return _.H.useOptimistic(O,Z)},at.useReducer=function(O,Z,ee){return _.H.useReducer(O,Z,ee)},at.useRef=function(O){return _.H.useRef(O)},at.useState=function(O){return _.H.useState(O)},at.useSyncExternalStore=function(O,Z,ee){return _.H.useSyncExternalStore(O,Z,ee)},at.useTransition=function(){return _.H.useTransition()},at.version="19.1.1",at}var KT;function Jv(){return KT||(KT=1,ED.exports=JV()),ED.exports}var DD={exports:{}},si={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT;function eW(){if(JT)return si;JT=1;var e=Jv();function t(c){var l="https://react.dev/errors/"+c;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)l+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+c+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(c,l,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:c,containerInfo:l,implementation:d}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(c,l){if(c==="font")return"";if(typeof l=="string")return l==="use-credentials"?l:""}return si.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,si.createPortal=function(c,l){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)throw Error(t(299));return a(c,l,null,d)},si.flushSync=function(c){var l=o.T,d=i.p;try{if(o.T=null,i.p=2,c)return c()}finally{o.T=l,i.p=d,i.d.f()}},si.preconnect=function(c,l){typeof c=="string"&&(l?(l=l.crossOrigin,l=typeof l=="string"?l==="use-credentials"?l:"":void 0):l=null,i.d.C(c,l))},si.prefetchDNS=function(c){typeof c=="string"&&i.d.D(c)},si.preinit=function(c,l){if(typeof c=="string"&&l&&typeof l.as=="string"){var d=l.as,h=u(d,l.crossOrigin),p=typeof l.integrity=="string"?l.integrity:void 0,y=typeof l.fetchPriority=="string"?l.fetchPriority:void 0;d==="style"?i.d.S(c,typeof l.precedence=="string"?l.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(c,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof l.nonce=="string"?l.nonce:void 0})}},si.preinitModule=function(c,l){if(typeof c=="string")if(typeof l=="object"&&l!==null){if(l.as==null||l.as==="script"){var d=u(l.as,l.crossOrigin);i.d.M(c,{crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0})}}else l==null&&i.d.M(c)},si.preload=function(c,l){if(typeof c=="string"&&typeof l=="object"&&l!==null&&typeof l.as=="string"){var d=l.as,h=u(d,l.crossOrigin);i.d.L(c,d,{crossOrigin:h,integrity:typeof l.integrity=="string"?l.integrity:void 0,nonce:typeof l.nonce=="string"?l.nonce:void 0,type:typeof l.type=="string"?l.type:void 0,fetchPriority:typeof l.fetchPriority=="string"?l.fetchPriority:void 0,referrerPolicy:typeof l.referrerPolicy=="string"?l.referrerPolicy:void 0,imageSrcSet:typeof l.imageSrcSet=="string"?l.imageSrcSet:void 0,imageSizes:typeof l.imageSizes=="string"?l.imageSizes:void 0,media:typeof l.media=="string"?l.media:void 0})}},si.preloadModule=function(c,l){if(typeof c=="string")if(l){var d=u(l.as,l.crossOrigin);i.d.m(c,{as:typeof l.as=="string"&&l.as!=="script"?l.as:void 0,crossOrigin:d,integrity:typeof l.integrity=="string"?l.integrity:void 0})}else i.d.m(c)},si.requestFormReset=function(c){i.d.r(c)},si.unstable_batchedUpdates=function(c,l){return c(l)},si.useFormState=function(c,l,d){return o.H.useFormState(c,l,d)},si.useFormStatus=function(){return o.H.useHostTransitionStatus()},si.version="19.1.1",si}var e9;function UN(){if(e9)return DD.exports;e9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),DD.exports=eW(),DD.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t9;function tW(){if(t9)return d0;t9=1;var e=KV(),t=Jv(),n=UN();function i(s){var f="https://react.dev/errors/"+s;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)f+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+s+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function a(s){var f=s,g=s;if(s.alternate)for(;f.return;)f=f.return;else{s=f;do f=s,(f.flags&4098)!==0&&(g=f.return),s=f.return;while(s)}return f.tag===3?g:null}function o(s){if(s.tag===13){var f=s.memoizedState;if(f===null&&(s=s.alternate,s!==null&&(f=s.memoizedState)),f!==null)return f.dehydrated}return null}function u(s){if(a(s)!==s)throw Error(i(188))}function c(s){var f=s.alternate;if(!f){if(f=a(s),f===null)throw Error(i(188));return f!==s?null:s}for(var g=s,m=f;;){var E=g.return;if(E===null)break;var C=E.alternate;if(C===null){if(m=E.return,m!==null){g=m;continue}break}if(E.child===C.child){for(C=E.child;C;){if(C===g)return u(E),s;if(C===m)return u(E),f;C=C.sibling}throw Error(i(188))}if(g.return!==m.return)g=E,m=C;else{for(var $=!1,B=E.child;B;){if(B===g){$=!0,g=E,m=C;break}if(B===m){$=!0,m=E,g=C;break}B=B.sibling}if(!$){for(B=C.child;B;){if(B===g){$=!0,g=C,m=E;break}if(B===m){$=!0,m=C,g=E;break}B=B.sibling}if(!$)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?s:f}function l(s){var f=s.tag;if(f===5||f===26||f===27||f===6)return s;for(s=s.child;s!==null;){if(f=l(s),f!==null)return f;s=s.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),D=Symbol.for("react.provider"),S=Symbol.for("react.consumer"),A=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),F=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),N=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function H(s){return s===null||typeof s!="object"?null:(s=L&&s[L]||s["@@iterator"],typeof s=="function"?s:null)}var I=Symbol.for("react.client.reference");function U(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===I?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case v:return"Fragment";case x:return"Profiler";case b:return"StrictMode";case _:return"Suspense";case k:return"SuspenseList";case N:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case y:return"Portal";case A:return(s.displayName||"Context")+".Provider";case S:return(s._context.displayName||"Context")+".Consumer";case w:var f=s.render;return s=s.displayName,s||(s=f.displayName||f.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case F:return f=s.displayName||null,f!==null?f:U(s.type)||"Memo";case M:f=s._payload,s=s._init;try{return U(s(f))}catch{}}return null}var z=Array.isArray,T=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},G=[],O=-1;function Z(s){return{current:s}}function ee(s){0>O||(s.current=G[O],G[O]=null,O--)}function X(s,f){O++,G[O]=s.current,s.current=f}var Q=Z(null),ne=Z(null),ce=Z(null),Fe=Z(null);function Me(s,f){switch(X(ce,f),X(ne,s),X(Q,null),f.nodeType){case 9:case 11:s=(s=f.documentElement)&&(s=s.namespaceURI)?ET(s):0;break;default:if(s=f.tagName,f=f.namespaceURI)f=ET(f),s=DT(f,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}ee(Q),X(Q,s)}function j(){ee(Q),ee(ne),ee(ce)}function W(s){s.memoizedState!==null&&X(Fe,s);var f=Q.current,g=DT(f,s.type);f!==g&&(X(ne,s),X(Q,g))}function te(s){ne.current===s&&(ee(Q),ee(ne)),Fe.current===s&&(ee(Fe),o0._currentValue=q)}var Y=Object.prototype.hasOwnProperty,le=e.unstable_scheduleCallback,Te=e.unstable_cancelCallback,oe=e.unstable_shouldYield,ge=e.unstable_requestPaint,Ae=e.unstable_now,K=e.unstable_getCurrentPriorityLevel,re=e.unstable_ImmediatePriority,he=e.unstable_UserBlockingPriority,ye=e.unstable_NormalPriority,Se=e.unstable_LowPriority,Ce=e.unstable_IdlePriority,Ne=e.log,tt=e.unstable_setDisableYieldValue,dt=null,Rt=null;function tn(s){if(typeof Ne=="function"&&tt(s),Rt&&typeof Rt.setStrictMode=="function")try{Rt.setStrictMode(dt,s)}catch{}}var Qt=Math.clz32?Math.clz32:RY,ra=Math.log,NY=Math.LN2;function RY(s){return s>>>=0,s===0?32:31-(ra(s)/NY|0)|0}var Yp=256,Xp=4194304;function rl(s){var f=s&42;if(f!==0)return f;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function Vp(s,f,g){var m=s.pendingLanes;if(m===0)return 0;var E=0,C=s.suspendedLanes,$=s.pingedLanes;s=s.warmLanes;var B=m&134217727;return B!==0?(m=B&~C,m!==0?E=rl(m):($&=B,$!==0?E=rl($):g||(g=B&~s,g!==0&&(E=rl(g))))):(B=m&~C,B!==0?E=rl(B):$!==0?E=rl($):g||(g=m&~s,g!==0&&(E=rl(g)))),E===0?0:f!==0&&f!==E&&(f&C)===0&&(C=E&-E,g=f&-f,C>=g||C===32&&(g&4194048)!==0)?f:E}function ph(s,f){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&f)===0}function BY(s,f){switch(s){case 1:case 2:case 4:case 8:case 64:return f+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r4(){var s=Yp;return Yp<<=1,(Yp&4194048)===0&&(Yp=256),s}function a4(){var s=Xp;return Xp<<=1,(Xp&62914560)===0&&(Xp=4194304),s}function ox(s){for(var f=[],g=0;31>g;g++)f.push(s);return f}function mh(s,f){s.pendingLanes|=f,f!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function zY(s,f,g,m,E,C){var $=s.pendingLanes;s.pendingLanes=g,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=g,s.entangledLanes&=g,s.errorRecoveryDisabledLanes&=g,s.shellSuspendCounter=0;var B=s.entanglements,V=s.expirationTimes,ue=s.hiddenUpdates;for(g=$&~g;0<g;){var ve=31-Qt(g),Ee=1<<ve;B[ve]=0,V[ve]=-1;var se=ue[ve];if(se!==null)for(ue[ve]=null,ve=0;ve<se.length;ve++){var fe=se[ve];fe!==null&&(fe.lane&=-536870913)}g&=~Ee}m!==0&&o4(s,m,0),C!==0&&E===0&&s.tag!==0&&(s.suspendedLanes|=C&~($&~f))}function o4(s,f,g){s.pendingLanes|=f,s.suspendedLanes&=~f;var m=31-Qt(f);s.entangledLanes|=f,s.entanglements[m]=s.entanglements[m]|1073741824|g&4194090}function u4(s,f){var g=s.entangledLanes|=f;for(s=s.entanglements;g;){var m=31-Qt(g),E=1<<m;E&f|s[m]&f&&(s[m]|=f),g&=~E}}function ux(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function sx(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function s4(){var s=R.p;return s!==0?s:(s=window.event,s===void 0?32:PT(s.type))}function LY(s,f){var g=R.p;try{return R.p=s,f()}finally{R.p=g}}var Ou=Math.random().toString(36).slice(2),oi="__reactFiber$"+Ou,ji="__reactProps$"+Ou,qc="__reactContainer$"+Ou,lx="__reactEvents$"+Ou,IY="__reactListeners$"+Ou,UY="__reactHandles$"+Ou,l4="__reactResources$"+Ou,yh="__reactMarker$"+Ou;function cx(s){delete s[oi],delete s[ji],delete s[lx],delete s[IY],delete s[UY]}function Hc(s){var f=s[oi];if(f)return f;for(var g=s.parentNode;g;){if(f=g[qc]||g[oi]){if(g=f.alternate,f.child!==null||g!==null&&g.child!==null)for(s=_T(s);s!==null;){if(g=s[oi])return g;s=_T(s)}return f}s=g,g=s.parentNode}return null}function Gc(s){if(s=s[oi]||s[qc]){var f=s.tag;if(f===5||f===6||f===13||f===26||f===27||f===3)return s}return null}function vh(s){var f=s.tag;if(f===5||f===26||f===27||f===6)return s.stateNode;throw Error(i(33))}function Yc(s){var f=s[l4];return f||(f=s[l4]={hoistableStyles:new Map,hoistableScripts:new Map}),f}function On(s){s[yh]=!0}var c4=new Set,f4={};function al(s,f){Xc(s,f),Xc(s+"Capture",f)}function Xc(s,f){for(f4[s]=f,s=0;s<f.length;s++)c4.add(f[s])}var PY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),d4={},h4={};function jY(s){return Y.call(h4,s)?!0:Y.call(d4,s)?!1:PY.test(s)?h4[s]=!0:(d4[s]=!0,!1)}function Wp(s,f,g){if(jY(f))if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":s.removeAttribute(f);return;case"boolean":var m=f.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(f);return}}s.setAttribute(f,""+g)}}function Qp(s,f,g){if(g===null)s.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(f);return}s.setAttribute(f,""+g)}}function $o(s,f,g,m){if(m===null)s.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(g);return}s.setAttributeNS(f,g,""+m)}}var fx,g4;function Vc(s){if(fx===void 0)try{throw Error()}catch(g){var f=g.stack.trim().match(/\n( *(at )?)/);fx=f&&f[1]||"",g4=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+fx+s+g4}var dx=!1;function hx(s,f){if(!s||dx)return"";dx=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(f){var Ee=function(){throw Error()};if(Object.defineProperty(Ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ee,[])}catch(fe){var se=fe}Reflect.construct(s,[],Ee)}else{try{Ee.call()}catch(fe){se=fe}s.call(Ee.prototype)}}else{try{throw Error()}catch(fe){se=fe}(Ee=s())&&typeof Ee.catch=="function"&&Ee.catch(function(){})}}catch(fe){if(fe&&se&&typeof fe.stack=="string")return[fe.stack,se.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),$=C[0],B=C[1];if($&&B){var V=$.split(`
`),ue=B.split(`
`);for(E=m=0;m<V.length&&!V[m].includes("DetermineComponentFrameRoot");)m++;for(;E<ue.length&&!ue[E].includes("DetermineComponentFrameRoot");)E++;if(m===V.length||E===ue.length)for(m=V.length-1,E=ue.length-1;1<=m&&0<=E&&V[m]!==ue[E];)E--;for(;1<=m&&0<=E;m--,E--)if(V[m]!==ue[E]){if(m!==1||E!==1)do if(m--,E--,0>E||V[m]!==ue[E]){var ve=`
`+V[m].replace(" at new "," at ");return s.displayName&&ve.includes("<anonymous>")&&(ve=ve.replace("<anonymous>",s.displayName)),ve}while(1<=m&&0<=E);break}}}finally{dx=!1,Error.prepareStackTrace=g}return(g=s?s.displayName||s.name:"")?Vc(g):""}function qY(s){switch(s.tag){case 26:case 27:case 5:return Vc(s.type);case 16:return Vc("Lazy");case 13:return Vc("Suspense");case 19:return Vc("SuspenseList");case 0:case 15:return hx(s.type,!1);case 11:return hx(s.type.render,!1);case 1:return hx(s.type,!0);case 31:return Vc("Activity");default:return""}}function p4(s){try{var f="";do f+=qY(s),s=s.return;while(s);return f}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function kr(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function m4(s){var f=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(f==="checkbox"||f==="radio")}function HY(s){var f=m4(s)?"checked":"value",g=Object.getOwnPropertyDescriptor(s.constructor.prototype,f),m=""+s[f];if(!s.hasOwnProperty(f)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,C=g.set;return Object.defineProperty(s,f,{configurable:!0,get:function(){return E.call(this)},set:function($){m=""+$,C.call(this,$)}}),Object.defineProperty(s,f,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){s._valueTracker=null,delete s[f]}}}}function Zp(s){s._valueTracker||(s._valueTracker=HY(s))}function y4(s){if(!s)return!1;var f=s._valueTracker;if(!f)return!0;var g=f.getValue(),m="";return s&&(m=m4(s)?s.checked?"true":"false":s.value),s=m,s!==g?(f.setValue(s),!0):!1}function Kp(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var GY=/[\n"\\]/g;function Tr(s){return s.replace(GY,function(f){return"\\"+f.charCodeAt(0).toString(16)+" "})}function gx(s,f,g,m,E,C,$,B){s.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?s.type=$:s.removeAttribute("type"),f!=null?$==="number"?(f===0&&s.value===""||s.value!=f)&&(s.value=""+kr(f)):s.value!==""+kr(f)&&(s.value=""+kr(f)):$!=="submit"&&$!=="reset"||s.removeAttribute("value"),f!=null?px(s,$,kr(f)):g!=null?px(s,$,kr(g)):m!=null&&s.removeAttribute("value"),E==null&&C!=null&&(s.defaultChecked=!!C),E!=null&&(s.checked=E&&typeof E!="function"&&typeof E!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?s.name=""+kr(B):s.removeAttribute("name")}function v4(s,f,g,m,E,C,$,B){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(s.type=C),f!=null||g!=null){if(!(C!=="submit"&&C!=="reset"||f!=null))return;g=g!=null?""+kr(g):"",f=f!=null?""+kr(f):g,B||f===s.value||(s.value=f),s.defaultValue=f}m=m??E,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=B?s.checked:!!m,s.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(s.name=$)}function px(s,f,g){f==="number"&&Kp(s.ownerDocument)===s||s.defaultValue===""+g||(s.defaultValue=""+g)}function Wc(s,f,g,m){if(s=s.options,f){f={};for(var E=0;E<g.length;E++)f["$"+g[E]]=!0;for(g=0;g<s.length;g++)E=f.hasOwnProperty("$"+s[g].value),s[g].selected!==E&&(s[g].selected=E),E&&m&&(s[g].defaultSelected=!0)}else{for(g=""+kr(g),f=null,E=0;E<s.length;E++){if(s[E].value===g){s[E].selected=!0,m&&(s[E].defaultSelected=!0);return}f!==null||s[E].disabled||(f=s[E])}f!==null&&(f.selected=!0)}}function b4(s,f,g){if(f!=null&&(f=""+kr(f),f!==s.value&&(s.value=f),g==null)){s.defaultValue!==f&&(s.defaultValue=f);return}s.defaultValue=g!=null?""+kr(g):""}function x4(s,f,g,m){if(f==null){if(m!=null){if(g!=null)throw Error(i(92));if(z(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),f=g}g=kr(f),s.defaultValue=g,m=s.textContent,m===g&&m!==""&&m!==null&&(s.value=m)}function Qc(s,f){if(f){var g=s.firstChild;if(g&&g===s.lastChild&&g.nodeType===3){g.nodeValue=f;return}}s.textContent=f}var YY=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function E4(s,f,g){var m=f.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?s.setProperty(f,""):f==="float"?s.cssFloat="":s[f]="":m?s.setProperty(f,g):typeof g!="number"||g===0||YY.has(f)?f==="float"?s.cssFloat=g:s[f]=(""+g).trim():s[f]=g+"px"}function D4(s,f,g){if(f!=null&&typeof f!="object")throw Error(i(62));if(s=s.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||f!=null&&f.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var E in f)m=f[E],f.hasOwnProperty(E)&&g[E]!==m&&E4(s,E,m)}else for(var C in f)f.hasOwnProperty(C)&&E4(s,C,f[C])}function mx(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XY=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),VY=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Jp(s){return VY.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var yx=null;function vx(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Zc=null,Kc=null;function C4(s){var f=Gc(s);if(f&&(s=f.stateNode)){var g=s[ji]||null;e:switch(s=f.stateNode,f.type){case"input":if(gx(s,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),f=g.name,g.type==="radio"&&f!=null){for(g=s;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+Tr(""+f)+'"][type="radio"]'),f=0;f<g.length;f++){var m=g[f];if(m!==s&&m.form===s.form){var E=m[ji]||null;if(!E)throw Error(i(90));gx(m,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(f=0;f<g.length;f++)m=g[f],m.form===s.form&&y4(m)}break e;case"textarea":b4(s,g.value,g.defaultValue);break e;case"select":f=g.value,f!=null&&Wc(s,!!g.multiple,f,!1)}}}var bx=!1;function S4(s,f,g){if(bx)return s(f,g);bx=!0;try{var m=s(f);return m}finally{if(bx=!1,(Zc!==null||Kc!==null)&&(Lm(),Zc&&(f=Zc,s=Kc,Kc=Zc=null,C4(f),s)))for(f=0;f<s.length;f++)C4(s[f])}}function bh(s,f){var g=s.stateNode;if(g===null)return null;var m=g[ji]||null;if(m===null)return null;g=m[f];e:switch(f){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(g&&typeof g!="function")throw Error(i(231,f,typeof g));return g}var Mo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xx=!1;if(Mo)try{var xh={};Object.defineProperty(xh,"passive",{get:function(){xx=!0}}),window.addEventListener("test",xh,xh),window.removeEventListener("test",xh,xh)}catch{xx=!1}var Nu=null,Ex=null,em=null;function A4(){if(em)return em;var s,f=Ex,g=f.length,m,E="value"in Nu?Nu.value:Nu.textContent,C=E.length;for(s=0;s<g&&f[s]===E[s];s++);var $=g-s;for(m=1;m<=$&&f[g-m]===E[C-m];m++);return em=E.slice(s,1<m?1-m:void 0)}function tm(s){var f=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&f===13&&(s=13)):s=f,s===10&&(s=13),32<=s||s===13?s:0}function nm(){return!0}function _4(){return!1}function qi(s){function f(g,m,E,C,$){this._reactName=g,this._targetInst=E,this.type=m,this.nativeEvent=C,this.target=$,this.currentTarget=null;for(var B in s)s.hasOwnProperty(B)&&(g=s[B],this[B]=g?g(C):C[B]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?nm:_4,this.isPropagationStopped=_4,this}return d(f.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=nm)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=nm)},persist:function(){},isPersistent:nm}),f}var ol={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},im=qi(ol),Eh=d({},ol,{view:0,detail:0}),WY=qi(Eh),Dx,Cx,Dh,rm=d({},Eh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ax,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==Dh&&(Dh&&s.type==="mousemove"?(Dx=s.screenX-Dh.screenX,Cx=s.screenY-Dh.screenY):Cx=Dx=0,Dh=s),Dx)},movementY:function(s){return"movementY"in s?s.movementY:Cx}}),w4=qi(rm),QY=d({},rm,{dataTransfer:0}),ZY=qi(QY),KY=d({},Eh,{relatedTarget:0}),Sx=qi(KY),JY=d({},ol,{animationName:0,elapsedTime:0,pseudoElement:0}),eX=qi(JY),tX=d({},ol,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),nX=qi(tX),iX=d({},ol,{data:0}),F4=qi(iX),rX={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aX={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oX={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uX(s){var f=this.nativeEvent;return f.getModifierState?f.getModifierState(s):(s=oX[s])?!!f[s]:!1}function Ax(){return uX}var sX=d({},Eh,{key:function(s){if(s.key){var f=rX[s.key]||s.key;if(f!=="Unidentified")return f}return s.type==="keypress"?(s=tm(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?aX[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ax,charCode:function(s){return s.type==="keypress"?tm(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?tm(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),lX=qi(sX),cX=d({},rm,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),k4=qi(cX),fX=d({},Eh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ax}),dX=qi(fX),hX=d({},ol,{propertyName:0,elapsedTime:0,pseudoElement:0}),gX=qi(hX),pX=d({},rm,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),mX=qi(pX),yX=d({},ol,{newState:0,oldState:0}),vX=qi(yX),bX=[9,13,27,32],_x=Mo&&"CompositionEvent"in window,Ch=null;Mo&&"documentMode"in document&&(Ch=document.documentMode);var xX=Mo&&"TextEvent"in window&&!Ch,T4=Mo&&(!_x||Ch&&8<Ch&&11>=Ch),$4=" ",M4=!1;function O4(s,f){switch(s){case"keyup":return bX.indexOf(f.keyCode)!==-1;case"keydown":return f.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N4(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Jc=!1;function EX(s,f){switch(s){case"compositionend":return N4(f);case"keypress":return f.which!==32?null:(M4=!0,$4);case"textInput":return s=f.data,s===$4&&M4?null:s;default:return null}}function DX(s,f){if(Jc)return s==="compositionend"||!_x&&O4(s,f)?(s=A4(),em=Ex=Nu=null,Jc=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(f.ctrlKey||f.altKey||f.metaKey)||f.ctrlKey&&f.altKey){if(f.char&&1<f.char.length)return f.char;if(f.which)return String.fromCharCode(f.which)}return null;case"compositionend":return T4&&f.locale!=="ko"?null:f.data;default:return null}}var CX={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function R4(s){var f=s&&s.nodeName&&s.nodeName.toLowerCase();return f==="input"?!!CX[s.type]:f==="textarea"}function B4(s,f,g,m){Zc?Kc?Kc.push(m):Kc=[m]:Zc=m,f=Hm(f,"onChange"),0<f.length&&(g=new im("onChange","change",null,g,m),s.push({event:g,listeners:f}))}var Sh=null,Ah=null;function SX(s){mT(s,0)}function am(s){var f=vh(s);if(y4(f))return s}function z4(s,f){if(s==="change")return f}var L4=!1;if(Mo){var wx;if(Mo){var Fx="oninput"in document;if(!Fx){var I4=document.createElement("div");I4.setAttribute("oninput","return;"),Fx=typeof I4.oninput=="function"}wx=Fx}else wx=!1;L4=wx&&(!document.documentMode||9<document.documentMode)}function U4(){Sh&&(Sh.detachEvent("onpropertychange",P4),Ah=Sh=null)}function P4(s){if(s.propertyName==="value"&&am(Ah)){var f=[];B4(f,Ah,s,vx(s)),S4(SX,f)}}function AX(s,f,g){s==="focusin"?(U4(),Sh=f,Ah=g,Sh.attachEvent("onpropertychange",P4)):s==="focusout"&&U4()}function _X(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return am(Ah)}function wX(s,f){if(s==="click")return am(f)}function FX(s,f){if(s==="input"||s==="change")return am(f)}function kX(s,f){return s===f&&(s!==0||1/s===1/f)||s!==s&&f!==f}var ur=typeof Object.is=="function"?Object.is:kX;function _h(s,f){if(ur(s,f))return!0;if(typeof s!="object"||s===null||typeof f!="object"||f===null)return!1;var g=Object.keys(s),m=Object.keys(f);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var E=g[m];if(!Y.call(f,E)||!ur(s[E],f[E]))return!1}return!0}function j4(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function q4(s,f){var g=j4(s);s=0;for(var m;g;){if(g.nodeType===3){if(m=s+g.textContent.length,s<=f&&m>=f)return{node:g,offset:f-s};s=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=j4(g)}}function H4(s,f){return s&&f?s===f?!0:s&&s.nodeType===3?!1:f&&f.nodeType===3?H4(s,f.parentNode):"contains"in s?s.contains(f):s.compareDocumentPosition?!!(s.compareDocumentPosition(f)&16):!1:!1}function G4(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var f=Kp(s.document);f instanceof s.HTMLIFrameElement;){try{var g=typeof f.contentWindow.location.href=="string"}catch{g=!1}if(g)s=f.contentWindow;else break;f=Kp(s.document)}return f}function kx(s){var f=s&&s.nodeName&&s.nodeName.toLowerCase();return f&&(f==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||f==="textarea"||s.contentEditable==="true")}var TX=Mo&&"documentMode"in document&&11>=document.documentMode,ef=null,Tx=null,wh=null,$x=!1;function Y4(s,f,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;$x||ef==null||ef!==Kp(m)||(m=ef,"selectionStart"in m&&kx(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),wh&&_h(wh,m)||(wh=m,m=Hm(Tx,"onSelect"),0<m.length&&(f=new im("onSelect","select",null,f,g),s.push({event:f,listeners:m}),f.target=ef)))}function ul(s,f){var g={};return g[s.toLowerCase()]=f.toLowerCase(),g["Webkit"+s]="webkit"+f,g["Moz"+s]="moz"+f,g}var tf={animationend:ul("Animation","AnimationEnd"),animationiteration:ul("Animation","AnimationIteration"),animationstart:ul("Animation","AnimationStart"),transitionrun:ul("Transition","TransitionRun"),transitionstart:ul("Transition","TransitionStart"),transitioncancel:ul("Transition","TransitionCancel"),transitionend:ul("Transition","TransitionEnd")},Mx={},X4={};Mo&&(X4=document.createElement("div").style,"AnimationEvent"in window||(delete tf.animationend.animation,delete tf.animationiteration.animation,delete tf.animationstart.animation),"TransitionEvent"in window||delete tf.transitionend.transition);function sl(s){if(Mx[s])return Mx[s];if(!tf[s])return s;var f=tf[s],g;for(g in f)if(f.hasOwnProperty(g)&&g in X4)return Mx[s]=f[g];return s}var V4=sl("animationend"),W4=sl("animationiteration"),Q4=sl("animationstart"),$X=sl("transitionrun"),MX=sl("transitionstart"),OX=sl("transitioncancel"),Z4=sl("transitionend"),K4=new Map,Ox="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Ox.push("scrollEnd");function aa(s,f){K4.set(s,f),al(f,[s])}var J4=new WeakMap;function $r(s,f){if(typeof s=="object"&&s!==null){var g=J4.get(s);return g!==void 0?g:(f={value:s,source:f,stack:p4(f)},J4.set(s,f),f)}return{value:s,source:f,stack:p4(f)}}var Mr=[],nf=0,Nx=0;function om(){for(var s=nf,f=Nx=nf=0;f<s;){var g=Mr[f];Mr[f++]=null;var m=Mr[f];Mr[f++]=null;var E=Mr[f];Mr[f++]=null;var C=Mr[f];if(Mr[f++]=null,m!==null&&E!==null){var $=m.pending;$===null?E.next=E:(E.next=$.next,$.next=E),m.pending=E}C!==0&&e8(g,E,C)}}function um(s,f,g,m){Mr[nf++]=s,Mr[nf++]=f,Mr[nf++]=g,Mr[nf++]=m,Nx|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Rx(s,f,g,m){return um(s,f,g,m),sm(s)}function rf(s,f){return um(s,null,null,f),sm(s)}function e8(s,f,g){s.lanes|=g;var m=s.alternate;m!==null&&(m.lanes|=g);for(var E=!1,C=s.return;C!==null;)C.childLanes|=g,m=C.alternate,m!==null&&(m.childLanes|=g),C.tag===22&&(s=C.stateNode,s===null||s._visibility&1||(E=!0)),s=C,C=C.return;return s.tag===3?(C=s.stateNode,E&&f!==null&&(E=31-Qt(g),s=C.hiddenUpdates,m=s[E],m===null?s[E]=[f]:m.push(f),f.lane=g|536870912),C):null}function sm(s){if(50<Kh)throw Kh=0,PE=null,Error(i(185));for(var f=s.return;f!==null;)s=f,f=s.return;return s.tag===3?s.stateNode:null}var af={};function NX(s,f,g,m){this.tag=s,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sr(s,f,g,m){return new NX(s,f,g,m)}function Bx(s){return s=s.prototype,!(!s||!s.isReactComponent)}function Oo(s,f){var g=s.alternate;return g===null?(g=sr(s.tag,f,s.key,s.mode),g.elementType=s.elementType,g.type=s.type,g.stateNode=s.stateNode,g.alternate=s,s.alternate=g):(g.pendingProps=f,g.type=s.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=s.flags&65011712,g.childLanes=s.childLanes,g.lanes=s.lanes,g.child=s.child,g.memoizedProps=s.memoizedProps,g.memoizedState=s.memoizedState,g.updateQueue=s.updateQueue,f=s.dependencies,g.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},g.sibling=s.sibling,g.index=s.index,g.ref=s.ref,g.refCleanup=s.refCleanup,g}function t8(s,f){s.flags&=65011714;var g=s.alternate;return g===null?(s.childLanes=0,s.lanes=f,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=g.childLanes,s.lanes=g.lanes,s.child=g.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=g.memoizedProps,s.memoizedState=g.memoizedState,s.updateQueue=g.updateQueue,s.type=g.type,f=g.dependencies,s.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext}),s}function lm(s,f,g,m,E,C){var $=0;if(m=s,typeof s=="function")Bx(s)&&($=1);else if(typeof s=="string")$=BV(s,g,Q.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case N:return s=sr(31,g,f,E),s.elementType=N,s.lanes=C,s;case v:return ll(g.children,E,C,f);case b:$=8,E|=24;break;case x:return s=sr(12,g,f,E|2),s.elementType=x,s.lanes=C,s;case _:return s=sr(13,g,f,E),s.elementType=_,s.lanes=C,s;case k:return s=sr(19,g,f,E),s.elementType=k,s.lanes=C,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case D:case A:$=10;break e;case S:$=9;break e;case w:$=11;break e;case F:$=14;break e;case M:$=16,m=null;break e}$=29,g=Error(i(130,s===null?"null":typeof s,"")),m=null}return f=sr($,g,f,E),f.elementType=s,f.type=m,f.lanes=C,f}function ll(s,f,g,m){return s=sr(7,s,m,f),s.lanes=g,s}function zx(s,f,g){return s=sr(6,s,null,f),s.lanes=g,s}function Lx(s,f,g){return f=sr(4,s.children!==null?s.children:[],s.key,f),f.lanes=g,f.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},f}var of=[],uf=0,cm=null,fm=0,Or=[],Nr=0,cl=null,No=1,Ro="";function fl(s,f){of[uf++]=fm,of[uf++]=cm,cm=s,fm=f}function n8(s,f,g){Or[Nr++]=No,Or[Nr++]=Ro,Or[Nr++]=cl,cl=s;var m=No;s=Ro;var E=32-Qt(m)-1;m&=~(1<<E),g+=1;var C=32-Qt(f)+E;if(30<C){var $=E-E%5;C=(m&(1<<$)-1).toString(32),m>>=$,E-=$,No=1<<32-Qt(f)+E|g<<E|m,Ro=C+s}else No=1<<C|g<<E|m,Ro=s}function Ix(s){s.return!==null&&(fl(s,1),n8(s,1,0))}function Ux(s){for(;s===cm;)cm=of[--uf],of[uf]=null,fm=of[--uf],of[uf]=null;for(;s===cl;)cl=Or[--Nr],Or[Nr]=null,Ro=Or[--Nr],Or[Nr]=null,No=Or[--Nr],Or[Nr]=null}var Ci=null,un=null,_t=!1,dl=null,Ia=!1,Px=Error(i(519));function hl(s){var f=Error(i(418,""));throw Th($r(f,s)),Px}function i8(s){var f=s.stateNode,g=s.type,m=s.memoizedProps;switch(f[oi]=s,f[ji]=m,g){case"dialog":gt("cancel",f),gt("close",f);break;case"iframe":case"object":case"embed":gt("load",f);break;case"video":case"audio":for(g=0;g<e0.length;g++)gt(e0[g],f);break;case"source":gt("error",f);break;case"img":case"image":case"link":gt("error",f),gt("load",f);break;case"details":gt("toggle",f);break;case"input":gt("invalid",f),v4(f,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),Zp(f);break;case"select":gt("invalid",f);break;case"textarea":gt("invalid",f),x4(f,m.value,m.defaultValue,m.children),Zp(f)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||f.textContent===""+g||m.suppressHydrationWarning===!0||xT(f.textContent,g)?(m.popover!=null&&(gt("beforetoggle",f),gt("toggle",f)),m.onScroll!=null&&gt("scroll",f),m.onScrollEnd!=null&&gt("scrollend",f),m.onClick!=null&&(f.onclick=Gm),f=!0):f=!1,f||hl(s)}function r8(s){for(Ci=s.return;Ci;)switch(Ci.tag){case 5:case 13:Ia=!1;return;case 27:case 3:Ia=!0;return;default:Ci=Ci.return}}function Fh(s){if(s!==Ci)return!1;if(!_t)return r8(s),_t=!0,!1;var f=s.tag,g;if((g=f!==3&&f!==27)&&((g=f===5)&&(g=s.type,g=!(g!=="form"&&g!=="button")||iD(s.type,s.memoizedProps)),g=!g),g&&un&&hl(s),r8(s),f===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(i(317));e:{for(s=s.nextSibling,f=0;s;){if(s.nodeType===8)if(g=s.data,g==="/$"){if(f===0){un=ua(s.nextSibling);break e}f--}else g!=="$"&&g!=="$!"&&g!=="$?"||f++;s=s.nextSibling}un=null}}else f===27?(f=un,Qu(s.type)?(s=uD,uD=null,un=s):un=f):un=Ci?ua(s.stateNode.nextSibling):null;return!0}function kh(){un=Ci=null,_t=!1}function a8(){var s=dl;return s!==null&&(Yi===null?Yi=s:Yi.push.apply(Yi,s),dl=null),s}function Th(s){dl===null?dl=[s]:dl.push(s)}var jx=Z(null),gl=null,Bo=null;function Ru(s,f,g){X(jx,f._currentValue),f._currentValue=g}function zo(s){s._currentValue=jx.current,ee(jx)}function qx(s,f,g){for(;s!==null;){var m=s.alternate;if((s.childLanes&f)!==f?(s.childLanes|=f,m!==null&&(m.childLanes|=f)):m!==null&&(m.childLanes&f)!==f&&(m.childLanes|=f),s===g)break;s=s.return}}function Hx(s,f,g,m){var E=s.child;for(E!==null&&(E.return=s);E!==null;){var C=E.dependencies;if(C!==null){var $=E.child;C=C.firstContext;e:for(;C!==null;){var B=C;C=E;for(var V=0;V<f.length;V++)if(B.context===f[V]){C.lanes|=g,B=C.alternate,B!==null&&(B.lanes|=g),qx(C.return,g,s),m||($=null);break e}C=B.next}}else if(E.tag===18){if($=E.return,$===null)throw Error(i(341));$.lanes|=g,C=$.alternate,C!==null&&(C.lanes|=g),qx($,g,s),$=null}else $=E.child;if($!==null)$.return=E;else for($=E;$!==null;){if($===s){$=null;break}if(E=$.sibling,E!==null){E.return=$.return,$=E;break}$=$.return}E=$}}function $h(s,f,g,m){s=null;for(var E=f,C=!1;E!==null;){if(!C){if((E.flags&524288)!==0)C=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var $=E.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var B=E.type;ur(E.pendingProps.value,$.value)||(s!==null?s.push(B):s=[B])}}else if(E===Fe.current){if($=E.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(s!==null?s.push(o0):s=[o0])}E=E.return}s!==null&&Hx(f,s,g,m),f.flags|=262144}function dm(s){for(s=s.firstContext;s!==null;){if(!ur(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function pl(s){gl=s,Bo=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ui(s){return o8(gl,s)}function hm(s,f){return gl===null&&pl(s),o8(s,f)}function o8(s,f){var g=f._currentValue;if(f={context:f,memoizedValue:g,next:null},Bo===null){if(s===null)throw Error(i(308));Bo=f,s.dependencies={lanes:0,firstContext:f},s.flags|=524288}else Bo=Bo.next=f;return g}var RX=typeof AbortController<"u"?AbortController:function(){var s=[],f=this.signal={aborted:!1,addEventListener:function(g,m){s.push(m)}};this.abort=function(){f.aborted=!0,s.forEach(function(g){return g()})}},BX=e.unstable_scheduleCallback,zX=e.unstable_NormalPriority,Sn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Gx(){return{controller:new RX,data:new Map,refCount:0}}function Mh(s){s.refCount--,s.refCount===0&&BX(zX,function(){s.controller.abort()})}var Oh=null,Yx=0,sf=0,lf=null;function LX(s,f){if(Oh===null){var g=Oh=[];Yx=0,sf=VE(),lf={status:"pending",value:void 0,then:function(m){g.push(m)}}}return Yx++,f.then(u8,u8),f}function u8(){if(--Yx===0&&Oh!==null){lf!==null&&(lf.status="fulfilled");var s=Oh;Oh=null,sf=0,lf=null;for(var f=0;f<s.length;f++)(0,s[f])()}}function IX(s,f){var g=[],m={status:"pending",value:null,reason:null,then:function(E){g.push(E)}};return s.then(function(){m.status="fulfilled",m.value=f;for(var E=0;E<g.length;E++)(0,g[E])(f)},function(E){for(m.status="rejected",m.reason=E,E=0;E<g.length;E++)(0,g[E])(void 0)}),m}var s8=T.S;T.S=function(s,f){typeof f=="object"&&f!==null&&typeof f.then=="function"&&LX(s,f),s8!==null&&s8(s,f)};var ml=Z(null);function Xx(){var s=ml.current;return s!==null?s:Ht.pooledCache}function gm(s,f){f===null?X(ml,ml.current):X(ml,f.pool)}function l8(){var s=Xx();return s===null?null:{parent:Sn._currentValue,pool:s}}var Nh=Error(i(460)),c8=Error(i(474)),pm=Error(i(542)),Vx={then:function(){}};function f8(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mm(){}function d8(s,f,g){switch(g=s[g],g===void 0?s.push(f):g!==f&&(f.then(mm,mm),f=g),f.status){case"fulfilled":return f.value;case"rejected":throw s=f.reason,g8(s),s;default:if(typeof f.status=="string")f.then(mm,mm);else{if(s=Ht,s!==null&&100<s.shellSuspendCounter)throw Error(i(482));s=f,s.status="pending",s.then(function(m){if(f.status==="pending"){var E=f;E.status="fulfilled",E.value=m}},function(m){if(f.status==="pending"){var E=f;E.status="rejected",E.reason=m}})}switch(f.status){case"fulfilled":return f.value;case"rejected":throw s=f.reason,g8(s),s}throw Rh=f,Nh}}var Rh=null;function h8(){if(Rh===null)throw Error(i(459));var s=Rh;return Rh=null,s}function g8(s){if(s===Nh||s===pm)throw Error(i(483))}var Bu=!1;function Wx(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qx(s,f){s=s.updateQueue,f.updateQueue===s&&(f.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function zu(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Lu(s,f,g){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Tt&2)!==0){var E=m.pending;return E===null?f.next=f:(f.next=E.next,E.next=f),m.pending=f,f=sm(s),e8(s,null,g),f}return um(s,m,f,g),sm(s)}function Bh(s,f,g){if(f=f.updateQueue,f!==null&&(f=f.shared,(g&4194048)!==0)){var m=f.lanes;m&=s.pendingLanes,g|=m,f.lanes=g,u4(s,g)}}function Zx(s,f){var g=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var E=null,C=null;if(g=g.firstBaseUpdate,g!==null){do{var $={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};C===null?E=C=$:C=C.next=$,g=g.next}while(g!==null);C===null?E=C=f:C=C.next=f}else E=C=f;g={baseState:m.baseState,firstBaseUpdate:E,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},s.updateQueue=g;return}s=g.lastBaseUpdate,s===null?g.firstBaseUpdate=f:s.next=f,g.lastBaseUpdate=f}var Kx=!1;function zh(){if(Kx){var s=lf;if(s!==null)throw s}}function Lh(s,f,g,m){Kx=!1;var E=s.updateQueue;Bu=!1;var C=E.firstBaseUpdate,$=E.lastBaseUpdate,B=E.shared.pending;if(B!==null){E.shared.pending=null;var V=B,ue=V.next;V.next=null,$===null?C=ue:$.next=ue,$=V;var ve=s.alternate;ve!==null&&(ve=ve.updateQueue,B=ve.lastBaseUpdate,B!==$&&(B===null?ve.firstBaseUpdate=ue:B.next=ue,ve.lastBaseUpdate=V))}if(C!==null){var Ee=E.baseState;$=0,ve=ue=V=null,B=C;do{var se=B.lane&-536870913,fe=se!==B.lane;if(fe?(bt&se)===se:(m&se)===se){se!==0&&se===sf&&(Kx=!0),ve!==null&&(ve=ve.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var Ke=s,Qe=B;se=f;var Lt=g;switch(Qe.tag){case 1:if(Ke=Qe.payload,typeof Ke=="function"){Ee=Ke.call(Lt,Ee,se);break e}Ee=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=Qe.payload,se=typeof Ke=="function"?Ke.call(Lt,Ee,se):Ke,se==null)break e;Ee=d({},Ee,se);break e;case 2:Bu=!0}}se=B.callback,se!==null&&(s.flags|=64,fe&&(s.flags|=8192),fe=E.callbacks,fe===null?E.callbacks=[se]:fe.push(se))}else fe={lane:se,tag:B.tag,payload:B.payload,callback:B.callback,next:null},ve===null?(ue=ve=fe,V=Ee):ve=ve.next=fe,$|=se;if(B=B.next,B===null){if(B=E.shared.pending,B===null)break;fe=B,B=fe.next,fe.next=null,E.lastBaseUpdate=fe,E.shared.pending=null}}while(!0);ve===null&&(V=Ee),E.baseState=V,E.firstBaseUpdate=ue,E.lastBaseUpdate=ve,C===null&&(E.shared.lanes=0),Yu|=$,s.lanes=$,s.memoizedState=Ee}}function p8(s,f){if(typeof s!="function")throw Error(i(191,s));s.call(f)}function m8(s,f){var g=s.callbacks;if(g!==null)for(s.callbacks=null,s=0;s<g.length;s++)p8(g[s],f)}var cf=Z(null),ym=Z(0);function y8(s,f){s=Ho,X(ym,s),X(cf,f),Ho=s|f.baseLanes}function Jx(){X(ym,Ho),X(cf,cf.current)}function eE(){Ho=ym.current,ee(cf),ee(ym)}var Iu=0,ut=null,Bt=null,xn=null,vm=!1,ff=!1,yl=!1,bm=0,Ih=0,df=null,UX=0;function hn(){throw Error(i(321))}function tE(s,f){if(f===null)return!1;for(var g=0;g<f.length&&g<s.length;g++)if(!ur(s[g],f[g]))return!1;return!0}function nE(s,f,g,m,E,C){return Iu=C,ut=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,T.H=s===null||s.memoizedState===null?e6:t6,yl=!1,C=g(m,E),yl=!1,ff&&(C=b8(f,g,m,E)),v8(s),C}function v8(s){T.H=Am;var f=Bt!==null&&Bt.next!==null;if(Iu=0,xn=Bt=ut=null,vm=!1,Ih=0,df=null,f)throw Error(i(300));s===null||Nn||(s=s.dependencies,s!==null&&dm(s)&&(Nn=!0))}function b8(s,f,g,m){ut=s;var E=0;do{if(ff&&(df=null),Ih=0,ff=!1,25<=E)throw Error(i(301));if(E+=1,xn=Bt=null,s.updateQueue!=null){var C=s.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}T.H=XX,C=f(g,m)}while(ff);return C}function PX(){var s=T.H,f=s.useState()[0];return f=typeof f.then=="function"?Uh(f):f,s=s.useState()[0],(Bt!==null?Bt.memoizedState:null)!==s&&(ut.flags|=1024),f}function iE(){var s=bm!==0;return bm=0,s}function rE(s,f,g){f.updateQueue=s.updateQueue,f.flags&=-2053,s.lanes&=~g}function aE(s){if(vm){for(s=s.memoizedState;s!==null;){var f=s.queue;f!==null&&(f.pending=null),s=s.next}vm=!1}Iu=0,xn=Bt=ut=null,ff=!1,Ih=bm=0,df=null}function Hi(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xn===null?ut.memoizedState=xn=s:xn=xn.next=s,xn}function En(){if(Bt===null){var s=ut.alternate;s=s!==null?s.memoizedState:null}else s=Bt.next;var f=xn===null?ut.memoizedState:xn.next;if(f!==null)xn=f,Bt=s;else{if(s===null)throw ut.alternate===null?Error(i(467)):Error(i(310));Bt=s,s={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},xn===null?ut.memoizedState=xn=s:xn=xn.next=s}return xn}function oE(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Uh(s){var f=Ih;return Ih+=1,df===null&&(df=[]),s=d8(df,s,f),f=ut,(xn===null?f.memoizedState:xn.next)===null&&(f=f.alternate,T.H=f===null||f.memoizedState===null?e6:t6),s}function xm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return Uh(s);if(s.$$typeof===A)return ui(s)}throw Error(i(438,String(s)))}function uE(s){var f=null,g=ut.updateQueue;if(g!==null&&(f=g.memoCache),f==null){var m=ut.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(f={data:m.data.map(function(E){return E.slice()}),index:0})))}if(f==null&&(f={data:[],index:0}),g===null&&(g=oE(),ut.updateQueue=g),g.memoCache=f,g=f.data[f.index],g===void 0)for(g=f.data[f.index]=Array(s),m=0;m<s;m++)g[m]=P;return f.index++,g}function Lo(s,f){return typeof f=="function"?f(s):f}function Em(s){var f=En();return sE(f,Bt,s)}function sE(s,f,g){var m=s.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var E=s.baseQueue,C=m.pending;if(C!==null){if(E!==null){var $=E.next;E.next=C.next,C.next=$}f.baseQueue=E=C,m.pending=null}if(C=s.baseState,E===null)s.memoizedState=C;else{f=E.next;var B=$=null,V=null,ue=f,ve=!1;do{var Ee=ue.lane&-536870913;if(Ee!==ue.lane?(bt&Ee)===Ee:(Iu&Ee)===Ee){var se=ue.revertLane;if(se===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null}),Ee===sf&&(ve=!0);else if((Iu&se)===se){ue=ue.next,se===sf&&(ve=!0);continue}else Ee={lane:0,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},V===null?(B=V=Ee,$=C):V=V.next=Ee,ut.lanes|=se,Yu|=se;Ee=ue.action,yl&&g(C,Ee),C=ue.hasEagerState?ue.eagerState:g(C,Ee)}else se={lane:Ee,revertLane:ue.revertLane,action:ue.action,hasEagerState:ue.hasEagerState,eagerState:ue.eagerState,next:null},V===null?(B=V=se,$=C):V=V.next=se,ut.lanes|=Ee,Yu|=Ee;ue=ue.next}while(ue!==null&&ue!==f);if(V===null?$=C:V.next=B,!ur(C,s.memoizedState)&&(Nn=!0,ve&&(g=lf,g!==null)))throw g;s.memoizedState=C,s.baseState=$,s.baseQueue=V,m.lastRenderedState=C}return E===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function lE(s){var f=En(),g=f.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=s;var m=g.dispatch,E=g.pending,C=f.memoizedState;if(E!==null){g.pending=null;var $=E=E.next;do C=s(C,$.action),$=$.next;while($!==E);ur(C,f.memoizedState)||(Nn=!0),f.memoizedState=C,f.baseQueue===null&&(f.baseState=C),g.lastRenderedState=C}return[C,m]}function x8(s,f,g){var m=ut,E=En(),C=_t;if(C){if(g===void 0)throw Error(i(407));g=g()}else g=f();var $=!ur((Bt||E).memoizedState,g);$&&(E.memoizedState=g,Nn=!0),E=E.queue;var B=C8.bind(null,m,E,s);if(Ph(2048,8,B,[s]),E.getSnapshot!==f||$||xn!==null&&xn.memoizedState.tag&1){if(m.flags|=2048,hf(9,Dm(),D8.bind(null,m,E,g,f),null),Ht===null)throw Error(i(349));C||(Iu&124)!==0||E8(m,f,g)}return g}function E8(s,f,g){s.flags|=16384,s={getSnapshot:f,value:g},f=ut.updateQueue,f===null?(f=oE(),ut.updateQueue=f,f.stores=[s]):(g=f.stores,g===null?f.stores=[s]:g.push(s))}function D8(s,f,g,m){f.value=g,f.getSnapshot=m,S8(f)&&A8(s)}function C8(s,f,g){return g(function(){S8(f)&&A8(s)})}function S8(s){var f=s.getSnapshot;s=s.value;try{var g=f();return!ur(s,g)}catch{return!0}}function A8(s){var f=rf(s,2);f!==null&&hr(f,s,2)}function cE(s){var f=Hi();if(typeof s=="function"){var g=s;if(s=g(),yl){tn(!0);try{g()}finally{tn(!1)}}}return f.memoizedState=f.baseState=s,f.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:s},f}function _8(s,f,g,m){return s.baseState=g,sE(s,Bt,typeof m=="function"?m:Lo)}function jX(s,f,g,m,E){if(Sm(s))throw Error(i(485));if(s=f.action,s!==null){var C={payload:E,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){C.listeners.push($)}};T.T!==null?g(!0):C.isTransition=!1,m(C),g=f.pending,g===null?(C.next=f.pending=C,w8(f,C)):(C.next=g.next,f.pending=g.next=C)}}function w8(s,f){var g=f.action,m=f.payload,E=s.state;if(f.isTransition){var C=T.T,$={};T.T=$;try{var B=g(E,m),V=T.S;V!==null&&V($,B),F8(s,f,B)}catch(ue){fE(s,f,ue)}finally{T.T=C}}else try{C=g(E,m),F8(s,f,C)}catch(ue){fE(s,f,ue)}}function F8(s,f,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){k8(s,f,m)},function(m){return fE(s,f,m)}):k8(s,f,g)}function k8(s,f,g){f.status="fulfilled",f.value=g,T8(f),s.state=g,f=s.pending,f!==null&&(g=f.next,g===f?s.pending=null:(g=g.next,f.next=g,w8(s,g)))}function fE(s,f,g){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do f.status="rejected",f.reason=g,T8(f),f=f.next;while(f!==m)}s.action=null}function T8(s){s=s.listeners;for(var f=0;f<s.length;f++)(0,s[f])()}function $8(s,f){return f}function M8(s,f){if(_t){var g=Ht.formState;if(g!==null){e:{var m=ut;if(_t){if(un){t:{for(var E=un,C=Ia;E.nodeType!==8;){if(!C){E=null;break t}if(E=ua(E.nextSibling),E===null){E=null;break t}}C=E.data,E=C==="F!"||C==="F"?E:null}if(E){un=ua(E.nextSibling),m=E.data==="F!";break e}}hl(m)}m=!1}m&&(f=g[0])}}return g=Hi(),g.memoizedState=g.baseState=f,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$8,lastRenderedState:f},g.queue=m,g=Z8.bind(null,ut,m),m.dispatch=g,m=cE(!1),C=mE.bind(null,ut,!1,m.queue),m=Hi(),E={state:f,dispatch:null,action:s,pending:null},m.queue=E,g=jX.bind(null,ut,E,C,g),E.dispatch=g,m.memoizedState=s,[f,g,!1]}function O8(s){var f=En();return N8(f,Bt,s)}function N8(s,f,g){if(f=sE(s,f,$8)[0],s=Em(Lo)[0],typeof f=="object"&&f!==null&&typeof f.then=="function")try{var m=Uh(f)}catch($){throw $===Nh?pm:$}else m=f;f=En();var E=f.queue,C=E.dispatch;return g!==f.memoizedState&&(ut.flags|=2048,hf(9,Dm(),qX.bind(null,E,g),null)),[m,C,s]}function qX(s,f){s.action=f}function R8(s){var f=En(),g=Bt;if(g!==null)return N8(f,g,s);En(),f=f.memoizedState,g=En();var m=g.queue.dispatch;return g.memoizedState=s,[f,m,!1]}function hf(s,f,g,m){return s={tag:s,create:g,deps:m,inst:f,next:null},f=ut.updateQueue,f===null&&(f=oE(),ut.updateQueue=f),g=f.lastEffect,g===null?f.lastEffect=s.next=s:(m=g.next,g.next=s,s.next=m,f.lastEffect=s),s}function Dm(){return{destroy:void 0,resource:void 0}}function B8(){return En().memoizedState}function Cm(s,f,g,m){var E=Hi();m=m===void 0?null:m,ut.flags|=s,E.memoizedState=hf(1|f,Dm(),g,m)}function Ph(s,f,g,m){var E=En();m=m===void 0?null:m;var C=E.memoizedState.inst;Bt!==null&&m!==null&&tE(m,Bt.memoizedState.deps)?E.memoizedState=hf(f,C,g,m):(ut.flags|=s,E.memoizedState=hf(1|f,C,g,m))}function z8(s,f){Cm(8390656,8,s,f)}function L8(s,f){Ph(2048,8,s,f)}function I8(s,f){return Ph(4,2,s,f)}function U8(s,f){return Ph(4,4,s,f)}function P8(s,f){if(typeof f=="function"){s=s();var g=f(s);return function(){typeof g=="function"?g():f(null)}}if(f!=null)return s=s(),f.current=s,function(){f.current=null}}function j8(s,f,g){g=g!=null?g.concat([s]):null,Ph(4,4,P8.bind(null,f,s),g)}function dE(){}function q8(s,f){var g=En();f=f===void 0?null:f;var m=g.memoizedState;return f!==null&&tE(f,m[1])?m[0]:(g.memoizedState=[s,f],s)}function H8(s,f){var g=En();f=f===void 0?null:f;var m=g.memoizedState;if(f!==null&&tE(f,m[1]))return m[0];if(m=s(),yl){tn(!0);try{s()}finally{tn(!1)}}return g.memoizedState=[m,f],m}function hE(s,f,g){return g===void 0||(Iu&1073741824)!==0?s.memoizedState=f:(s.memoizedState=g,s=X6(),ut.lanes|=s,Yu|=s,g)}function G8(s,f,g,m){return ur(g,f)?g:cf.current!==null?(s=hE(s,g,m),ur(s,f)||(Nn=!0),s):(Iu&42)===0?(Nn=!0,s.memoizedState=g):(s=X6(),ut.lanes|=s,Yu|=s,f)}function Y8(s,f,g,m,E){var C=R.p;R.p=C!==0&&8>C?C:8;var $=T.T,B={};T.T=B,mE(s,!1,f,g);try{var V=E(),ue=T.S;if(ue!==null&&ue(B,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ve=IX(V,m);jh(s,f,ve,dr(s))}else jh(s,f,m,dr(s))}catch(Ee){jh(s,f,{then:function(){},status:"rejected",reason:Ee},dr())}finally{R.p=C,T.T=$}}function HX(){}function gE(s,f,g,m){if(s.tag!==5)throw Error(i(476));var E=X8(s).queue;Y8(s,E,f,q,g===null?HX:function(){return V8(s),g(m)})}function X8(s){var f=s.memoizedState;if(f!==null)return f;f={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:q},next:null};var g={};return f.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:g},next:null},s.memoizedState=f,s=s.alternate,s!==null&&(s.memoizedState=f),f}function V8(s){var f=X8(s).next.queue;jh(s,f,{},dr())}function pE(){return ui(o0)}function W8(){return En().memoizedState}function Q8(){return En().memoizedState}function GX(s){for(var f=s.return;f!==null;){switch(f.tag){case 24:case 3:var g=dr();s=zu(g);var m=Lu(f,s,g);m!==null&&(hr(m,f,g),Bh(m,f,g)),f={cache:Gx()},s.payload=f;return}f=f.return}}function YX(s,f,g){var m=dr();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},Sm(s)?K8(f,g):(g=Rx(s,f,g,m),g!==null&&(hr(g,s,m),J8(g,f,m)))}function Z8(s,f,g){var m=dr();jh(s,f,g,m)}function jh(s,f,g,m){var E={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(Sm(s))K8(f,E);else{var C=s.alternate;if(s.lanes===0&&(C===null||C.lanes===0)&&(C=f.lastRenderedReducer,C!==null))try{var $=f.lastRenderedState,B=C($,g);if(E.hasEagerState=!0,E.eagerState=B,ur(B,$))return um(s,f,E,0),Ht===null&&om(),!1}catch{}finally{}if(g=Rx(s,f,E,m),g!==null)return hr(g,s,m),J8(g,f,m),!0}return!1}function mE(s,f,g,m){if(m={lane:2,revertLane:VE(),action:m,hasEagerState:!1,eagerState:null,next:null},Sm(s)){if(f)throw Error(i(479))}else f=Rx(s,g,m,2),f!==null&&hr(f,s,2)}function Sm(s){var f=s.alternate;return s===ut||f!==null&&f===ut}function K8(s,f){ff=vm=!0;var g=s.pending;g===null?f.next=f:(f.next=g.next,g.next=f),s.pending=f}function J8(s,f,g){if((g&4194048)!==0){var m=f.lanes;m&=s.pendingLanes,g|=m,f.lanes=g,u4(s,g)}}var Am={readContext:ui,use:xm,useCallback:hn,useContext:hn,useEffect:hn,useImperativeHandle:hn,useLayoutEffect:hn,useInsertionEffect:hn,useMemo:hn,useReducer:hn,useRef:hn,useState:hn,useDebugValue:hn,useDeferredValue:hn,useTransition:hn,useSyncExternalStore:hn,useId:hn,useHostTransitionStatus:hn,useFormState:hn,useActionState:hn,useOptimistic:hn,useMemoCache:hn,useCacheRefresh:hn},e6={readContext:ui,use:xm,useCallback:function(s,f){return Hi().memoizedState=[s,f===void 0?null:f],s},useContext:ui,useEffect:z8,useImperativeHandle:function(s,f,g){g=g!=null?g.concat([s]):null,Cm(4194308,4,P8.bind(null,f,s),g)},useLayoutEffect:function(s,f){return Cm(4194308,4,s,f)},useInsertionEffect:function(s,f){Cm(4,2,s,f)},useMemo:function(s,f){var g=Hi();f=f===void 0?null:f;var m=s();if(yl){tn(!0);try{s()}finally{tn(!1)}}return g.memoizedState=[m,f],m},useReducer:function(s,f,g){var m=Hi();if(g!==void 0){var E=g(f);if(yl){tn(!0);try{g(f)}finally{tn(!1)}}}else E=f;return m.memoizedState=m.baseState=E,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:E},m.queue=s,s=s.dispatch=YX.bind(null,ut,s),[m.memoizedState,s]},useRef:function(s){var f=Hi();return s={current:s},f.memoizedState=s},useState:function(s){s=cE(s);var f=s.queue,g=Z8.bind(null,ut,f);return f.dispatch=g,[s.memoizedState,g]},useDebugValue:dE,useDeferredValue:function(s,f){var g=Hi();return hE(g,s,f)},useTransition:function(){var s=cE(!1);return s=Y8.bind(null,ut,s.queue,!0,!1),Hi().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,f,g){var m=ut,E=Hi();if(_t){if(g===void 0)throw Error(i(407));g=g()}else{if(g=f(),Ht===null)throw Error(i(349));(bt&124)!==0||E8(m,f,g)}E.memoizedState=g;var C={value:g,getSnapshot:f};return E.queue=C,z8(C8.bind(null,m,C,s),[s]),m.flags|=2048,hf(9,Dm(),D8.bind(null,m,C,g,f),null),g},useId:function(){var s=Hi(),f=Ht.identifierPrefix;if(_t){var g=Ro,m=No;g=(m&~(1<<32-Qt(m)-1)).toString(32)+g,f=""+f+"R"+g,g=bm++,0<g&&(f+="H"+g.toString(32)),f+=""}else g=UX++,f=""+f+"r"+g.toString(32)+"";return s.memoizedState=f},useHostTransitionStatus:pE,useFormState:M8,useActionState:M8,useOptimistic:function(s){var f=Hi();f.memoizedState=f.baseState=s;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return f.queue=g,f=mE.bind(null,ut,!0,g),g.dispatch=f,[s,f]},useMemoCache:uE,useCacheRefresh:function(){return Hi().memoizedState=GX.bind(null,ut)}},t6={readContext:ui,use:xm,useCallback:q8,useContext:ui,useEffect:L8,useImperativeHandle:j8,useInsertionEffect:I8,useLayoutEffect:U8,useMemo:H8,useReducer:Em,useRef:B8,useState:function(){return Em(Lo)},useDebugValue:dE,useDeferredValue:function(s,f){var g=En();return G8(g,Bt.memoizedState,s,f)},useTransition:function(){var s=Em(Lo)[0],f=En().memoizedState;return[typeof s=="boolean"?s:Uh(s),f]},useSyncExternalStore:x8,useId:W8,useHostTransitionStatus:pE,useFormState:O8,useActionState:O8,useOptimistic:function(s,f){var g=En();return _8(g,Bt,s,f)},useMemoCache:uE,useCacheRefresh:Q8},XX={readContext:ui,use:xm,useCallback:q8,useContext:ui,useEffect:L8,useImperativeHandle:j8,useInsertionEffect:I8,useLayoutEffect:U8,useMemo:H8,useReducer:lE,useRef:B8,useState:function(){return lE(Lo)},useDebugValue:dE,useDeferredValue:function(s,f){var g=En();return Bt===null?hE(g,s,f):G8(g,Bt.memoizedState,s,f)},useTransition:function(){var s=lE(Lo)[0],f=En().memoizedState;return[typeof s=="boolean"?s:Uh(s),f]},useSyncExternalStore:x8,useId:W8,useHostTransitionStatus:pE,useFormState:R8,useActionState:R8,useOptimistic:function(s,f){var g=En();return Bt!==null?_8(g,Bt,s,f):(g.baseState=s,[s,g.queue.dispatch])},useMemoCache:uE,useCacheRefresh:Q8},gf=null,qh=0;function _m(s){var f=qh;return qh+=1,gf===null&&(gf=[]),d8(gf,s,f)}function Hh(s,f){f=f.props.ref,s.ref=f!==void 0?f:null}function wm(s,f){throw f.$$typeof===h?Error(i(525)):(s=Object.prototype.toString.call(f),Error(i(31,s==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":s)))}function n6(s){var f=s._init;return f(s._payload)}function i6(s){function f(ie,J){if(s){var ae=ie.deletions;ae===null?(ie.deletions=[J],ie.flags|=16):ae.push(J)}}function g(ie,J){if(!s)return null;for(;J!==null;)f(ie,J),J=J.sibling;return null}function m(ie){for(var J=new Map;ie!==null;)ie.key!==null?J.set(ie.key,ie):J.set(ie.index,ie),ie=ie.sibling;return J}function E(ie,J){return ie=Oo(ie,J),ie.index=0,ie.sibling=null,ie}function C(ie,J,ae){return ie.index=ae,s?(ae=ie.alternate,ae!==null?(ae=ae.index,ae<J?(ie.flags|=67108866,J):ae):(ie.flags|=67108866,J)):(ie.flags|=1048576,J)}function $(ie){return s&&ie.alternate===null&&(ie.flags|=67108866),ie}function B(ie,J,ae,xe){return J===null||J.tag!==6?(J=zx(ae,ie.mode,xe),J.return=ie,J):(J=E(J,ae),J.return=ie,J)}function V(ie,J,ae,xe){var Pe=ae.type;return Pe===v?ve(ie,J,ae.props.children,xe,ae.key):J!==null&&(J.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===M&&n6(Pe)===J.type)?(J=E(J,ae.props),Hh(J,ae),J.return=ie,J):(J=lm(ae.type,ae.key,ae.props,null,ie.mode,xe),Hh(J,ae),J.return=ie,J)}function ue(ie,J,ae,xe){return J===null||J.tag!==4||J.stateNode.containerInfo!==ae.containerInfo||J.stateNode.implementation!==ae.implementation?(J=Lx(ae,ie.mode,xe),J.return=ie,J):(J=E(J,ae.children||[]),J.return=ie,J)}function ve(ie,J,ae,xe,Pe){return J===null||J.tag!==7?(J=ll(ae,ie.mode,xe,Pe),J.return=ie,J):(J=E(J,ae),J.return=ie,J)}function Ee(ie,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=zx(""+J,ie.mode,ae),J.return=ie,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case p:return ae=lm(J.type,J.key,J.props,null,ie.mode,ae),Hh(ae,J),ae.return=ie,ae;case y:return J=Lx(J,ie.mode,ae),J.return=ie,J;case M:var xe=J._init;return J=xe(J._payload),Ee(ie,J,ae)}if(z(J)||H(J))return J=ll(J,ie.mode,ae,null),J.return=ie,J;if(typeof J.then=="function")return Ee(ie,_m(J),ae);if(J.$$typeof===A)return Ee(ie,hm(ie,J),ae);wm(ie,J)}return null}function se(ie,J,ae,xe){var Pe=J!==null?J.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return Pe!==null?null:B(ie,J,""+ae,xe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return ae.key===Pe?V(ie,J,ae,xe):null;case y:return ae.key===Pe?ue(ie,J,ae,xe):null;case M:return Pe=ae._init,ae=Pe(ae._payload),se(ie,J,ae,xe)}if(z(ae)||H(ae))return Pe!==null?null:ve(ie,J,ae,xe,null);if(typeof ae.then=="function")return se(ie,J,_m(ae),xe);if(ae.$$typeof===A)return se(ie,J,hm(ie,ae),xe);wm(ie,ae)}return null}function fe(ie,J,ae,xe,Pe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return ie=ie.get(ae)||null,B(J,ie,""+xe,Pe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case p:return ie=ie.get(xe.key===null?ae:xe.key)||null,V(J,ie,xe,Pe);case y:return ie=ie.get(xe.key===null?ae:xe.key)||null,ue(J,ie,xe,Pe);case M:var lt=xe._init;return xe=lt(xe._payload),fe(ie,J,ae,xe,Pe)}if(z(xe)||H(xe))return ie=ie.get(ae)||null,ve(J,ie,xe,Pe,null);if(typeof xe.then=="function")return fe(ie,J,ae,_m(xe),Pe);if(xe.$$typeof===A)return fe(ie,J,ae,hm(J,xe),Pe);wm(J,xe)}return null}function Ke(ie,J,ae,xe){for(var Pe=null,lt=null,He=J,Ze=J=0,Bn=null;He!==null&&Ze<ae.length;Ze++){He.index>Ze?(Bn=He,He=null):Bn=He.sibling;var Et=se(ie,He,ae[Ze],xe);if(Et===null){He===null&&(He=Bn);break}s&&He&&Et.alternate===null&&f(ie,He),J=C(Et,J,Ze),lt===null?Pe=Et:lt.sibling=Et,lt=Et,He=Bn}if(Ze===ae.length)return g(ie,He),_t&&fl(ie,Ze),Pe;if(He===null){for(;Ze<ae.length;Ze++)He=Ee(ie,ae[Ze],xe),He!==null&&(J=C(He,J,Ze),lt===null?Pe=He:lt.sibling=He,lt=He);return _t&&fl(ie,Ze),Pe}for(He=m(He);Ze<ae.length;Ze++)Bn=fe(He,ie,Ze,ae[Ze],xe),Bn!==null&&(s&&Bn.alternate!==null&&He.delete(Bn.key===null?Ze:Bn.key),J=C(Bn,J,Ze),lt===null?Pe=Bn:lt.sibling=Bn,lt=Bn);return s&&He.forEach(function(ts){return f(ie,ts)}),_t&&fl(ie,Ze),Pe}function Qe(ie,J,ae,xe){if(ae==null)throw Error(i(151));for(var Pe=null,lt=null,He=J,Ze=J=0,Bn=null,Et=ae.next();He!==null&&!Et.done;Ze++,Et=ae.next()){He.index>Ze?(Bn=He,He=null):Bn=He.sibling;var ts=se(ie,He,Et.value,xe);if(ts===null){He===null&&(He=Bn);break}s&&He&&ts.alternate===null&&f(ie,He),J=C(ts,J,Ze),lt===null?Pe=ts:lt.sibling=ts,lt=ts,He=Bn}if(Et.done)return g(ie,He),_t&&fl(ie,Ze),Pe;if(He===null){for(;!Et.done;Ze++,Et=ae.next())Et=Ee(ie,Et.value,xe),Et!==null&&(J=C(Et,J,Ze),lt===null?Pe=Et:lt.sibling=Et,lt=Et);return _t&&fl(ie,Ze),Pe}for(He=m(He);!Et.done;Ze++,Et=ae.next())Et=fe(He,ie,Ze,Et.value,xe),Et!==null&&(s&&Et.alternate!==null&&He.delete(Et.key===null?Ze:Et.key),J=C(Et,J,Ze),lt===null?Pe=Et:lt.sibling=Et,lt=Et);return s&&He.forEach(function(VV){return f(ie,VV)}),_t&&fl(ie,Ze),Pe}function Lt(ie,J,ae,xe){if(typeof ae=="object"&&ae!==null&&ae.type===v&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:e:{for(var Pe=ae.key;J!==null;){if(J.key===Pe){if(Pe=ae.type,Pe===v){if(J.tag===7){g(ie,J.sibling),xe=E(J,ae.props.children),xe.return=ie,ie=xe;break e}}else if(J.elementType===Pe||typeof Pe=="object"&&Pe!==null&&Pe.$$typeof===M&&n6(Pe)===J.type){g(ie,J.sibling),xe=E(J,ae.props),Hh(xe,ae),xe.return=ie,ie=xe;break e}g(ie,J);break}else f(ie,J);J=J.sibling}ae.type===v?(xe=ll(ae.props.children,ie.mode,xe,ae.key),xe.return=ie,ie=xe):(xe=lm(ae.type,ae.key,ae.props,null,ie.mode,xe),Hh(xe,ae),xe.return=ie,ie=xe)}return $(ie);case y:e:{for(Pe=ae.key;J!==null;){if(J.key===Pe)if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){g(ie,J.sibling),xe=E(J,ae.children||[]),xe.return=ie,ie=xe;break e}else{g(ie,J);break}else f(ie,J);J=J.sibling}xe=Lx(ae,ie.mode,xe),xe.return=ie,ie=xe}return $(ie);case M:return Pe=ae._init,ae=Pe(ae._payload),Lt(ie,J,ae,xe)}if(z(ae))return Ke(ie,J,ae,xe);if(H(ae)){if(Pe=H(ae),typeof Pe!="function")throw Error(i(150));return ae=Pe.call(ae),Qe(ie,J,ae,xe)}if(typeof ae.then=="function")return Lt(ie,J,_m(ae),xe);if(ae.$$typeof===A)return Lt(ie,J,hm(ie,ae),xe);wm(ie,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint"?(ae=""+ae,J!==null&&J.tag===6?(g(ie,J.sibling),xe=E(J,ae),xe.return=ie,ie=xe):(g(ie,J),xe=zx(ae,ie.mode,xe),xe.return=ie,ie=xe),$(ie)):g(ie,J)}return function(ie,J,ae,xe){try{qh=0;var Pe=Lt(ie,J,ae,xe);return gf=null,Pe}catch(He){if(He===Nh||He===pm)throw He;var lt=sr(29,He,null,ie.mode);return lt.lanes=xe,lt.return=ie,lt}finally{}}}var pf=i6(!0),r6=i6(!1),Rr=Z(null),Ua=null;function Uu(s){var f=s.alternate;X(An,An.current&1),X(Rr,s),Ua===null&&(f===null||cf.current!==null||f.memoizedState!==null)&&(Ua=s)}function a6(s){if(s.tag===22){if(X(An,An.current),X(Rr,s),Ua===null){var f=s.alternate;f!==null&&f.memoizedState!==null&&(Ua=s)}}else Pu()}function Pu(){X(An,An.current),X(Rr,Rr.current)}function Io(s){ee(Rr),Ua===s&&(Ua=null),ee(An)}var An=Z(0);function Fm(s){for(var f=s;f!==null;){if(f.tag===13){var g=f.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||oD(g)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if((f.flags&128)!==0)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}function yE(s,f,g,m){f=s.memoizedState,g=g(m,f),g=g==null?f:d({},f,g),s.memoizedState=g,s.lanes===0&&(s.updateQueue.baseState=g)}var vE={enqueueSetState:function(s,f,g){s=s._reactInternals;var m=dr(),E=zu(m);E.payload=f,g!=null&&(E.callback=g),f=Lu(s,E,m),f!==null&&(hr(f,s,m),Bh(f,s,m))},enqueueReplaceState:function(s,f,g){s=s._reactInternals;var m=dr(),E=zu(m);E.tag=1,E.payload=f,g!=null&&(E.callback=g),f=Lu(s,E,m),f!==null&&(hr(f,s,m),Bh(f,s,m))},enqueueForceUpdate:function(s,f){s=s._reactInternals;var g=dr(),m=zu(g);m.tag=2,f!=null&&(m.callback=f),f=Lu(s,m,g),f!==null&&(hr(f,s,g),Bh(f,s,g))}};function o6(s,f,g,m,E,C,$){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,C,$):f.prototype&&f.prototype.isPureReactComponent?!_h(g,m)||!_h(E,C):!0}function u6(s,f,g,m){s=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(g,m),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(g,m),f.state!==s&&vE.enqueueReplaceState(f,f.state,null)}function vl(s,f){var g=f;if("ref"in f){g={};for(var m in f)m!=="ref"&&(g[m]=f[m])}if(s=s.defaultProps){g===f&&(g=d({},g));for(var E in s)g[E]===void 0&&(g[E]=s[E])}return g}var km=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var f=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(f))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function s6(s){km(s)}function l6(s){console.error(s)}function c6(s){km(s)}function Tm(s,f){try{var g=s.onUncaughtError;g(f.value,{componentStack:f.stack})}catch(m){setTimeout(function(){throw m})}}function f6(s,f,g){try{var m=s.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:f.tag===1?f.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function bE(s,f,g){return g=zu(g),g.tag=3,g.payload={element:null},g.callback=function(){Tm(s,f)},g}function d6(s){return s=zu(s),s.tag=3,s}function h6(s,f,g,m){var E=g.type.getDerivedStateFromError;if(typeof E=="function"){var C=m.value;s.payload=function(){return E(C)},s.callback=function(){f6(f,g,m)}}var $=g.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(s.callback=function(){f6(f,g,m),typeof E!="function"&&(Xu===null?Xu=new Set([this]):Xu.add(this));var B=m.stack;this.componentDidCatch(m.value,{componentStack:B!==null?B:""})})}function VX(s,f,g,m,E){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(f=g.alternate,f!==null&&$h(f,g,E,!0),g=Rr.current,g!==null){switch(g.tag){case 13:return Ua===null?qE():g.alternate===null&&sn===0&&(sn=3),g.flags&=-257,g.flags|=65536,g.lanes=E,m===Vx?g.flags|=16384:(f=g.updateQueue,f===null?g.updateQueue=new Set([m]):f.add(m),GE(s,m,E)),!1;case 22:return g.flags|=65536,m===Vx?g.flags|=16384:(f=g.updateQueue,f===null?(f={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=f):(g=f.retryQueue,g===null?f.retryQueue=new Set([m]):g.add(m)),GE(s,m,E)),!1}throw Error(i(435,g.tag))}return GE(s,m,E),qE(),!1}if(_t)return f=Rr.current,f!==null?((f.flags&65536)===0&&(f.flags|=256),f.flags|=65536,f.lanes=E,m!==Px&&(s=Error(i(422),{cause:m}),Th($r(s,g)))):(m!==Px&&(f=Error(i(423),{cause:m}),Th($r(f,g))),s=s.current.alternate,s.flags|=65536,E&=-E,s.lanes|=E,m=$r(m,g),E=bE(s.stateNode,m,E),Zx(s,E),sn!==4&&(sn=2)),!1;var C=Error(i(520),{cause:m});if(C=$r(C,g),Zh===null?Zh=[C]:Zh.push(C),sn!==4&&(sn=2),f===null)return!0;m=$r(m,g),g=f;do{switch(g.tag){case 3:return g.flags|=65536,s=E&-E,g.lanes|=s,s=bE(g.stateNode,m,s),Zx(g,s),!1;case 1:if(f=g.type,C=g.stateNode,(g.flags&128)===0&&(typeof f.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Xu===null||!Xu.has(C))))return g.flags|=65536,E&=-E,g.lanes|=E,E=d6(E),h6(E,s,g,m),Zx(g,E),!1}g=g.return}while(g!==null);return!1}var g6=Error(i(461)),Nn=!1;function Vn(s,f,g,m){f.child=s===null?r6(f,null,g,m):pf(f,s.child,g,m)}function p6(s,f,g,m,E){g=g.render;var C=f.ref;if("ref"in m){var $={};for(var B in m)B!=="ref"&&($[B]=m[B])}else $=m;return pl(f),m=nE(s,f,g,$,C,E),B=iE(),s!==null&&!Nn?(rE(s,f,E),Uo(s,f,E)):(_t&&B&&Ix(f),f.flags|=1,Vn(s,f,m,E),f.child)}function m6(s,f,g,m,E){if(s===null){var C=g.type;return typeof C=="function"&&!Bx(C)&&C.defaultProps===void 0&&g.compare===null?(f.tag=15,f.type=C,y6(s,f,C,m,E)):(s=lm(g.type,null,m,f,f.mode,E),s.ref=f.ref,s.return=f,f.child=s)}if(C=s.child,!wE(s,E)){var $=C.memoizedProps;if(g=g.compare,g=g!==null?g:_h,g($,m)&&s.ref===f.ref)return Uo(s,f,E)}return f.flags|=1,s=Oo(C,m),s.ref=f.ref,s.return=f,f.child=s}function y6(s,f,g,m,E){if(s!==null){var C=s.memoizedProps;if(_h(C,m)&&s.ref===f.ref)if(Nn=!1,f.pendingProps=m=C,wE(s,E))(s.flags&131072)!==0&&(Nn=!0);else return f.lanes=s.lanes,Uo(s,f,E)}return xE(s,f,g,m,E)}function v6(s,f,g){var m=f.pendingProps,E=m.children,C=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((f.flags&128)!==0){if(m=C!==null?C.baseLanes|g:g,s!==null){for(E=f.child=s.child,C=0;E!==null;)C=C|E.lanes|E.childLanes,E=E.sibling;f.childLanes=C&~m}else f.childLanes=0,f.child=null;return b6(s,f,m,g)}if((g&536870912)!==0)f.memoizedState={baseLanes:0,cachePool:null},s!==null&&gm(f,C!==null?C.cachePool:null),C!==null?y8(f,C):Jx(),a6(f);else return f.lanes=f.childLanes=536870912,b6(s,f,C!==null?C.baseLanes|g:g,g)}else C!==null?(gm(f,C.cachePool),y8(f,C),Pu(),f.memoizedState=null):(s!==null&&gm(f,null),Jx(),Pu());return Vn(s,f,E,g),f.child}function b6(s,f,g,m){var E=Xx();return E=E===null?null:{parent:Sn._currentValue,pool:E},f.memoizedState={baseLanes:g,cachePool:E},s!==null&&gm(f,null),Jx(),a6(f),s!==null&&$h(s,f,m,!0),null}function $m(s,f){var g=f.ref;if(g===null)s!==null&&s.ref!==null&&(f.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(s===null||s.ref!==g)&&(f.flags|=4194816)}}function xE(s,f,g,m,E){return pl(f),g=nE(s,f,g,m,void 0,E),m=iE(),s!==null&&!Nn?(rE(s,f,E),Uo(s,f,E)):(_t&&m&&Ix(f),f.flags|=1,Vn(s,f,g,E),f.child)}function x6(s,f,g,m,E,C){return pl(f),f.updateQueue=null,g=b8(f,m,g,E),v8(s),m=iE(),s!==null&&!Nn?(rE(s,f,C),Uo(s,f,C)):(_t&&m&&Ix(f),f.flags|=1,Vn(s,f,g,C),f.child)}function E6(s,f,g,m,E){if(pl(f),f.stateNode===null){var C=af,$=g.contextType;typeof $=="object"&&$!==null&&(C=ui($)),C=new g(m,C),f.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=vE,f.stateNode=C,C._reactInternals=f,C=f.stateNode,C.props=m,C.state=f.memoizedState,C.refs={},Wx(f),$=g.contextType,C.context=typeof $=="object"&&$!==null?ui($):af,C.state=f.memoizedState,$=g.getDerivedStateFromProps,typeof $=="function"&&(yE(f,g,$,m),C.state=f.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||($=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),$!==C.state&&vE.enqueueReplaceState(C,C.state,null),Lh(f,m,C,E),zh(),C.state=f.memoizedState),typeof C.componentDidMount=="function"&&(f.flags|=4194308),m=!0}else if(s===null){C=f.stateNode;var B=f.memoizedProps,V=vl(g,B);C.props=V;var ue=C.context,ve=g.contextType;$=af,typeof ve=="object"&&ve!==null&&($=ui(ve));var Ee=g.getDerivedStateFromProps;ve=typeof Ee=="function"||typeof C.getSnapshotBeforeUpdate=="function",B=f.pendingProps!==B,ve||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(B||ue!==$)&&u6(f,C,m,$),Bu=!1;var se=f.memoizedState;C.state=se,Lh(f,m,C,E),zh(),ue=f.memoizedState,B||se!==ue||Bu?(typeof Ee=="function"&&(yE(f,g,Ee,m),ue=f.memoizedState),(V=Bu||o6(f,g,V,m,se,ue,$))?(ve||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(f.flags|=4194308)):(typeof C.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=m,f.memoizedState=ue),C.props=m,C.state=ue,C.context=$,m=V):(typeof C.componentDidMount=="function"&&(f.flags|=4194308),m=!1)}else{C=f.stateNode,Qx(s,f),$=f.memoizedProps,ve=vl(g,$),C.props=ve,Ee=f.pendingProps,se=C.context,ue=g.contextType,V=af,typeof ue=="object"&&ue!==null&&(V=ui(ue)),B=g.getDerivedStateFromProps,(ue=typeof B=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||($!==Ee||se!==V)&&u6(f,C,m,V),Bu=!1,se=f.memoizedState,C.state=se,Lh(f,m,C,E),zh();var fe=f.memoizedState;$!==Ee||se!==fe||Bu||s!==null&&s.dependencies!==null&&dm(s.dependencies)?(typeof B=="function"&&(yE(f,g,B,m),fe=f.memoizedState),(ve=Bu||o6(f,g,ve,m,se,fe,V)||s!==null&&s.dependencies!==null&&dm(s.dependencies))?(ue||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,fe,V),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,fe,V)),typeof C.componentDidUpdate=="function"&&(f.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof C.componentDidUpdate!="function"||$===s.memoizedProps&&se===s.memoizedState||(f.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&se===s.memoizedState||(f.flags|=1024),f.memoizedProps=m,f.memoizedState=fe),C.props=m,C.state=fe,C.context=V,m=ve):(typeof C.componentDidUpdate!="function"||$===s.memoizedProps&&se===s.memoizedState||(f.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||$===s.memoizedProps&&se===s.memoizedState||(f.flags|=1024),m=!1)}return C=m,$m(s,f),m=(f.flags&128)!==0,C||m?(C=f.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:C.render(),f.flags|=1,s!==null&&m?(f.child=pf(f,s.child,null,E),f.child=pf(f,null,g,E)):Vn(s,f,g,E),f.memoizedState=C.state,s=f.child):s=Uo(s,f,E),s}function D6(s,f,g,m){return kh(),f.flags|=256,Vn(s,f,g,m),f.child}var EE={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function DE(s){return{baseLanes:s,cachePool:l8()}}function CE(s,f,g){return s=s!==null?s.childLanes&~g:0,f&&(s|=Br),s}function C6(s,f,g){var m=f.pendingProps,E=!1,C=(f.flags&128)!==0,$;if(($=C)||($=s!==null&&s.memoizedState===null?!1:(An.current&2)!==0),$&&(E=!0,f.flags&=-129),$=(f.flags&32)!==0,f.flags&=-33,s===null){if(_t){if(E?Uu(f):Pu(),_t){var B=un,V;if(V=B){e:{for(V=B,B=Ia;V.nodeType!==8;){if(!B){B=null;break e}if(V=ua(V.nextSibling),V===null){B=null;break e}}B=V}B!==null?(f.memoizedState={dehydrated:B,treeContext:cl!==null?{id:No,overflow:Ro}:null,retryLane:536870912,hydrationErrors:null},V=sr(18,null,null,0),V.stateNode=B,V.return=f,f.child=V,Ci=f,un=null,V=!0):V=!1}V||hl(f)}if(B=f.memoizedState,B!==null&&(B=B.dehydrated,B!==null))return oD(B)?f.lanes=32:f.lanes=536870912,null;Io(f)}return B=m.children,m=m.fallback,E?(Pu(),E=f.mode,B=Mm({mode:"hidden",children:B},E),m=ll(m,E,g,null),B.return=f,m.return=f,B.sibling=m,f.child=B,E=f.child,E.memoizedState=DE(g),E.childLanes=CE(s,$,g),f.memoizedState=EE,m):(Uu(f),SE(f,B))}if(V=s.memoizedState,V!==null&&(B=V.dehydrated,B!==null)){if(C)f.flags&256?(Uu(f),f.flags&=-257,f=AE(s,f,g)):f.memoizedState!==null?(Pu(),f.child=s.child,f.flags|=128,f=null):(Pu(),E=m.fallback,B=f.mode,m=Mm({mode:"visible",children:m.children},B),E=ll(E,B,g,null),E.flags|=2,m.return=f,E.return=f,m.sibling=E,f.child=m,pf(f,s.child,null,g),m=f.child,m.memoizedState=DE(g),m.childLanes=CE(s,$,g),f.memoizedState=EE,f=E);else if(Uu(f),oD(B)){if($=B.nextSibling&&B.nextSibling.dataset,$)var ue=$.dgst;$=ue,m=Error(i(419)),m.stack="",m.digest=$,Th({value:m,source:null,stack:null}),f=AE(s,f,g)}else if(Nn||$h(s,f,g,!1),$=(g&s.childLanes)!==0,Nn||$){if($=Ht,$!==null&&(m=g&-g,m=(m&42)!==0?1:ux(m),m=(m&($.suspendedLanes|g))!==0?0:m,m!==0&&m!==V.retryLane))throw V.retryLane=m,rf(s,m),hr($,s,m),g6;B.data==="$?"||qE(),f=AE(s,f,g)}else B.data==="$?"?(f.flags|=192,f.child=s.child,f=null):(s=V.treeContext,un=ua(B.nextSibling),Ci=f,_t=!0,dl=null,Ia=!1,s!==null&&(Or[Nr++]=No,Or[Nr++]=Ro,Or[Nr++]=cl,No=s.id,Ro=s.overflow,cl=f),f=SE(f,m.children),f.flags|=4096);return f}return E?(Pu(),E=m.fallback,B=f.mode,V=s.child,ue=V.sibling,m=Oo(V,{mode:"hidden",children:m.children}),m.subtreeFlags=V.subtreeFlags&65011712,ue!==null?E=Oo(ue,E):(E=ll(E,B,g,null),E.flags|=2),E.return=f,m.return=f,m.sibling=E,f.child=m,m=E,E=f.child,B=s.child.memoizedState,B===null?B=DE(g):(V=B.cachePool,V!==null?(ue=Sn._currentValue,V=V.parent!==ue?{parent:ue,pool:ue}:V):V=l8(),B={baseLanes:B.baseLanes|g,cachePool:V}),E.memoizedState=B,E.childLanes=CE(s,$,g),f.memoizedState=EE,m):(Uu(f),g=s.child,s=g.sibling,g=Oo(g,{mode:"visible",children:m.children}),g.return=f,g.sibling=null,s!==null&&($=f.deletions,$===null?(f.deletions=[s],f.flags|=16):$.push(s)),f.child=g,f.memoizedState=null,g)}function SE(s,f){return f=Mm({mode:"visible",children:f},s.mode),f.return=s,s.child=f}function Mm(s,f){return s=sr(22,s,null,f),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function AE(s,f,g){return pf(f,s.child,null,g),s=SE(f,f.pendingProps.children),s.flags|=2,f.memoizedState=null,s}function S6(s,f,g){s.lanes|=f;var m=s.alternate;m!==null&&(m.lanes|=f),qx(s.return,f,g)}function _E(s,f,g,m,E){var C=s.memoizedState;C===null?s.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:E}:(C.isBackwards=f,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=g,C.tailMode=E)}function A6(s,f,g){var m=f.pendingProps,E=m.revealOrder,C=m.tail;if(Vn(s,f,m.children,g),m=An.current,(m&2)!==0)m=m&1|2,f.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=f.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&S6(s,g,f);else if(s.tag===19)S6(s,g,f);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===f)break e;for(;s.sibling===null;){if(s.return===null||s.return===f)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(X(An,m),E){case"forwards":for(g=f.child,E=null;g!==null;)s=g.alternate,s!==null&&Fm(s)===null&&(E=g),g=g.sibling;g=E,g===null?(E=f.child,f.child=null):(E=g.sibling,g.sibling=null),_E(f,!1,E,g,C);break;case"backwards":for(g=null,E=f.child,f.child=null;E!==null;){if(s=E.alternate,s!==null&&Fm(s)===null){f.child=E;break}s=E.sibling,E.sibling=g,g=E,E=s}_E(f,!0,g,null,C);break;case"together":_E(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function Uo(s,f,g){if(s!==null&&(f.dependencies=s.dependencies),Yu|=f.lanes,(g&f.childLanes)===0)if(s!==null){if($h(s,f,g,!1),(g&f.childLanes)===0)return null}else return null;if(s!==null&&f.child!==s.child)throw Error(i(153));if(f.child!==null){for(s=f.child,g=Oo(s,s.pendingProps),f.child=g,g.return=f;s.sibling!==null;)s=s.sibling,g=g.sibling=Oo(s,s.pendingProps),g.return=f;g.sibling=null}return f.child}function wE(s,f){return(s.lanes&f)!==0?!0:(s=s.dependencies,!!(s!==null&&dm(s)))}function WX(s,f,g){switch(f.tag){case 3:Me(f,f.stateNode.containerInfo),Ru(f,Sn,s.memoizedState.cache),kh();break;case 27:case 5:W(f);break;case 4:Me(f,f.stateNode.containerInfo);break;case 10:Ru(f,f.type,f.memoizedProps.value);break;case 13:var m=f.memoizedState;if(m!==null)return m.dehydrated!==null?(Uu(f),f.flags|=128,null):(g&f.child.childLanes)!==0?C6(s,f,g):(Uu(f),s=Uo(s,f,g),s!==null?s.sibling:null);Uu(f);break;case 19:var E=(s.flags&128)!==0;if(m=(g&f.childLanes)!==0,m||($h(s,f,g,!1),m=(g&f.childLanes)!==0),E){if(m)return A6(s,f,g);f.flags|=128}if(E=f.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),X(An,An.current),m)break;return null;case 22:case 23:return f.lanes=0,v6(s,f,g);case 24:Ru(f,Sn,s.memoizedState.cache)}return Uo(s,f,g)}function _6(s,f,g){if(s!==null)if(s.memoizedProps!==f.pendingProps)Nn=!0;else{if(!wE(s,g)&&(f.flags&128)===0)return Nn=!1,WX(s,f,g);Nn=(s.flags&131072)!==0}else Nn=!1,_t&&(f.flags&1048576)!==0&&n8(f,fm,f.index);switch(f.lanes=0,f.tag){case 16:e:{s=f.pendingProps;var m=f.elementType,E=m._init;if(m=E(m._payload),f.type=m,typeof m=="function")Bx(m)?(s=vl(m,s),f.tag=1,f=E6(null,f,m,s,g)):(f.tag=0,f=xE(null,f,m,s,g));else{if(m!=null){if(E=m.$$typeof,E===w){f.tag=11,f=p6(null,f,m,s,g);break e}else if(E===F){f.tag=14,f=m6(null,f,m,s,g);break e}}throw f=U(m)||m,Error(i(306,f,""))}}return f;case 0:return xE(s,f,f.type,f.pendingProps,g);case 1:return m=f.type,E=vl(m,f.pendingProps),E6(s,f,m,E,g);case 3:e:{if(Me(f,f.stateNode.containerInfo),s===null)throw Error(i(387));m=f.pendingProps;var C=f.memoizedState;E=C.element,Qx(s,f),Lh(f,m,null,g);var $=f.memoizedState;if(m=$.cache,Ru(f,Sn,m),m!==C.cache&&Hx(f,[Sn],g,!0),zh(),m=$.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:$.cache},f.updateQueue.baseState=C,f.memoizedState=C,f.flags&256){f=D6(s,f,m,g);break e}else if(m!==E){E=$r(Error(i(424)),f),Th(E),f=D6(s,f,m,g);break e}else{switch(s=f.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(un=ua(s.firstChild),Ci=f,_t=!0,dl=null,Ia=!0,g=r6(f,null,m,g),f.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(kh(),m===E){f=Uo(s,f,g);break e}Vn(s,f,m,g)}f=f.child}return f;case 26:return $m(s,f),s===null?(g=TT(f.type,null,f.pendingProps,null))?f.memoizedState=g:_t||(g=f.type,s=f.pendingProps,m=Ym(ce.current).createElement(g),m[oi]=f,m[ji]=s,Qn(m,g,s),On(m),f.stateNode=m):f.memoizedState=TT(f.type,s.memoizedProps,f.pendingProps,s.memoizedState),null;case 27:return W(f),s===null&&_t&&(m=f.stateNode=wT(f.type,f.pendingProps,ce.current),Ci=f,Ia=!0,E=un,Qu(f.type)?(uD=E,un=ua(m.firstChild)):un=E),Vn(s,f,f.pendingProps.children,g),$m(s,f),s===null&&(f.flags|=4194304),f.child;case 5:return s===null&&_t&&((E=m=un)&&(m=CV(m,f.type,f.pendingProps,Ia),m!==null?(f.stateNode=m,Ci=f,un=ua(m.firstChild),Ia=!1,E=!0):E=!1),E||hl(f)),W(f),E=f.type,C=f.pendingProps,$=s!==null?s.memoizedProps:null,m=C.children,iD(E,C)?m=null:$!==null&&iD(E,$)&&(f.flags|=32),f.memoizedState!==null&&(E=nE(s,f,PX,null,null,g),o0._currentValue=E),$m(s,f),Vn(s,f,m,g),f.child;case 6:return s===null&&_t&&((s=g=un)&&(g=SV(g,f.pendingProps,Ia),g!==null?(f.stateNode=g,Ci=f,un=null,s=!0):s=!1),s||hl(f)),null;case 13:return C6(s,f,g);case 4:return Me(f,f.stateNode.containerInfo),m=f.pendingProps,s===null?f.child=pf(f,null,m,g):Vn(s,f,m,g),f.child;case 11:return p6(s,f,f.type,f.pendingProps,g);case 7:return Vn(s,f,f.pendingProps,g),f.child;case 8:return Vn(s,f,f.pendingProps.children,g),f.child;case 12:return Vn(s,f,f.pendingProps.children,g),f.child;case 10:return m=f.pendingProps,Ru(f,f.type,m.value),Vn(s,f,m.children,g),f.child;case 9:return E=f.type._context,m=f.pendingProps.children,pl(f),E=ui(E),m=m(E),f.flags|=1,Vn(s,f,m,g),f.child;case 14:return m6(s,f,f.type,f.pendingProps,g);case 15:return y6(s,f,f.type,f.pendingProps,g);case 19:return A6(s,f,g);case 31:return m=f.pendingProps,g=f.mode,m={mode:m.mode,children:m.children},s===null?(g=Mm(m,g),g.ref=f.ref,f.child=g,g.return=f,f=g):(g=Oo(s.child,m),g.ref=f.ref,f.child=g,g.return=f,f=g),f;case 22:return v6(s,f,g);case 24:return pl(f),m=ui(Sn),s===null?(E=Xx(),E===null&&(E=Ht,C=Gx(),E.pooledCache=C,C.refCount++,C!==null&&(E.pooledCacheLanes|=g),E=C),f.memoizedState={parent:m,cache:E},Wx(f),Ru(f,Sn,E)):((s.lanes&g)!==0&&(Qx(s,f),Lh(f,null,null,g),zh()),E=s.memoizedState,C=f.memoizedState,E.parent!==m?(E={parent:m,cache:m},f.memoizedState=E,f.lanes===0&&(f.memoizedState=f.updateQueue.baseState=E),Ru(f,Sn,m)):(m=C.cache,Ru(f,Sn,m),m!==E.cache&&Hx(f,[Sn],g,!0))),Vn(s,f,f.pendingProps.children,g),f.child;case 29:throw f.pendingProps}throw Error(i(156,f.tag))}function Po(s){s.flags|=4}function w6(s,f){if(f.type!=="stylesheet"||(f.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!RT(f)){if(f=Rr.current,f!==null&&((bt&4194048)===bt?Ua!==null:(bt&62914560)!==bt&&(bt&536870912)===0||f!==Ua))throw Rh=Vx,c8;s.flags|=8192}}function Om(s,f){f!==null&&(s.flags|=4),s.flags&16384&&(f=s.tag!==22?a4():536870912,s.lanes|=f,bf|=f)}function Gh(s,f){if(!_t)switch(s.tailMode){case"hidden":f=s.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?s.tail=null:g.sibling=null;break;case"collapsed":g=s.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?f||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function nn(s){var f=s.alternate!==null&&s.alternate.child===s.child,g=0,m=0;if(f)for(var E=s.child;E!==null;)g|=E.lanes|E.childLanes,m|=E.subtreeFlags&65011712,m|=E.flags&65011712,E.return=s,E=E.sibling;else for(E=s.child;E!==null;)g|=E.lanes|E.childLanes,m|=E.subtreeFlags,m|=E.flags,E.return=s,E=E.sibling;return s.subtreeFlags|=m,s.childLanes=g,f}function QX(s,f,g){var m=f.pendingProps;switch(Ux(f),f.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(f),null;case 1:return nn(f),null;case 3:return g=f.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),f.memoizedState.cache!==m&&(f.flags|=2048),zo(Sn),j(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(s===null||s.child===null)&&(Fh(f)?Po(f):s===null||s.memoizedState.isDehydrated&&(f.flags&256)===0||(f.flags|=1024,a8())),nn(f),null;case 26:return g=f.memoizedState,s===null?(Po(f),g!==null?(nn(f),w6(f,g)):(nn(f),f.flags&=-16777217)):g?g!==s.memoizedState?(Po(f),nn(f),w6(f,g)):(nn(f),f.flags&=-16777217):(s.memoizedProps!==m&&Po(f),nn(f),f.flags&=-16777217),null;case 27:te(f),g=ce.current;var E=f.type;if(s!==null&&f.stateNode!=null)s.memoizedProps!==m&&Po(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return nn(f),null}s=Q.current,Fh(f)?i8(f):(s=wT(E,m,g),f.stateNode=s,Po(f))}return nn(f),null;case 5:if(te(f),g=f.type,s!==null&&f.stateNode!=null)s.memoizedProps!==m&&Po(f);else{if(!m){if(f.stateNode===null)throw Error(i(166));return nn(f),null}if(s=Q.current,Fh(f))i8(f);else{switch(E=Ym(ce.current),s){case 1:s=E.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:s=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":s=E.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":s=E.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":s=E.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?E.createElement("select",{is:m.is}):E.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?E.createElement(g,{is:m.is}):E.createElement(g)}}s[oi]=f,s[ji]=m;e:for(E=f.child;E!==null;){if(E.tag===5||E.tag===6)s.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===f)break e;for(;E.sibling===null;){if(E.return===null||E.return===f)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}f.stateNode=s;e:switch(Qn(s,g,m),g){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Po(f)}}return nn(f),f.flags&=-16777217,null;case 6:if(s&&f.stateNode!=null)s.memoizedProps!==m&&Po(f);else{if(typeof m!="string"&&f.stateNode===null)throw Error(i(166));if(s=ce.current,Fh(f)){if(s=f.stateNode,g=f.memoizedProps,m=null,E=Ci,E!==null)switch(E.tag){case 27:case 5:m=E.memoizedProps}s[oi]=f,s=!!(s.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||xT(s.nodeValue,g)),s||hl(f)}else s=Ym(s).createTextNode(m),s[oi]=f,f.stateNode=s}return nn(f),null;case 13:if(m=f.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(E=Fh(f),m!==null&&m.dehydrated!==null){if(s===null){if(!E)throw Error(i(318));if(E=f.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(i(317));E[oi]=f}else kh(),(f.flags&128)===0&&(f.memoizedState=null),f.flags|=4;nn(f),E=!1}else E=a8(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=E),E=!0;if(!E)return f.flags&256?(Io(f),f):(Io(f),null)}if(Io(f),(f.flags&128)!==0)return f.lanes=g,f;if(g=m!==null,s=s!==null&&s.memoizedState!==null,g){m=f.child,E=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(E=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==E&&(m.flags|=2048)}return g!==s&&g&&(f.child.flags|=8192),Om(f,f.updateQueue),nn(f),null;case 4:return j(),s===null&&KE(f.stateNode.containerInfo),nn(f),null;case 10:return zo(f.type),nn(f),null;case 19:if(ee(An),E=f.memoizedState,E===null)return nn(f),null;if(m=(f.flags&128)!==0,C=E.rendering,C===null)if(m)Gh(E,!1);else{if(sn!==0||s!==null&&(s.flags&128)!==0)for(s=f.child;s!==null;){if(C=Fm(s),C!==null){for(f.flags|=128,Gh(E,!1),s=C.updateQueue,f.updateQueue=s,Om(f,s),f.subtreeFlags=0,s=g,g=f.child;g!==null;)t8(g,s),g=g.sibling;return X(An,An.current&1|2),f.child}s=s.sibling}E.tail!==null&&Ae()>Bm&&(f.flags|=128,m=!0,Gh(E,!1),f.lanes=4194304)}else{if(!m)if(s=Fm(C),s!==null){if(f.flags|=128,m=!0,s=s.updateQueue,f.updateQueue=s,Om(f,s),Gh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!C.alternate&&!_t)return nn(f),null}else 2*Ae()-E.renderingStartTime>Bm&&g!==536870912&&(f.flags|=128,m=!0,Gh(E,!1),f.lanes=4194304);E.isBackwards?(C.sibling=f.child,f.child=C):(s=E.last,s!==null?s.sibling=C:f.child=C,E.last=C)}return E.tail!==null?(f=E.tail,E.rendering=f,E.tail=f.sibling,E.renderingStartTime=Ae(),f.sibling=null,s=An.current,X(An,m?s&1|2:s&1),f):(nn(f),null);case 22:case 23:return Io(f),eE(),m=f.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(f.flags|=8192):m&&(f.flags|=8192),m?(g&536870912)!==0&&(f.flags&128)===0&&(nn(f),f.subtreeFlags&6&&(f.flags|=8192)):nn(f),g=f.updateQueue,g!==null&&Om(f,g.retryQueue),g=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),m=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(m=f.memoizedState.cachePool.pool),m!==g&&(f.flags|=2048),s!==null&&ee(ml),null;case 24:return g=null,s!==null&&(g=s.memoizedState.cache),f.memoizedState.cache!==g&&(f.flags|=2048),zo(Sn),nn(f),null;case 25:return null;case 30:return null}throw Error(i(156,f.tag))}function ZX(s,f){switch(Ux(f),f.tag){case 1:return s=f.flags,s&65536?(f.flags=s&-65537|128,f):null;case 3:return zo(Sn),j(),s=f.flags,(s&65536)!==0&&(s&128)===0?(f.flags=s&-65537|128,f):null;case 26:case 27:case 5:return te(f),null;case 13:if(Io(f),s=f.memoizedState,s!==null&&s.dehydrated!==null){if(f.alternate===null)throw Error(i(340));kh()}return s=f.flags,s&65536?(f.flags=s&-65537|128,f):null;case 19:return ee(An),null;case 4:return j(),null;case 10:return zo(f.type),null;case 22:case 23:return Io(f),eE(),s!==null&&ee(ml),s=f.flags,s&65536?(f.flags=s&-65537|128,f):null;case 24:return zo(Sn),null;case 25:return null;default:return null}}function F6(s,f){switch(Ux(f),f.tag){case 3:zo(Sn),j();break;case 26:case 27:case 5:te(f);break;case 4:j();break;case 13:Io(f);break;case 19:ee(An);break;case 10:zo(f.type);break;case 22:case 23:Io(f),eE(),s!==null&&ee(ml);break;case 24:zo(Sn)}}function Yh(s,f){try{var g=f.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var E=m.next;g=E;do{if((g.tag&s)===s){m=void 0;var C=g.create,$=g.inst;m=C(),$.destroy=m}g=g.next}while(g!==E)}}catch(B){Pt(f,f.return,B)}}function ju(s,f,g){try{var m=f.updateQueue,E=m!==null?m.lastEffect:null;if(E!==null){var C=E.next;m=C;do{if((m.tag&s)===s){var $=m.inst,B=$.destroy;if(B!==void 0){$.destroy=void 0,E=f;var V=g,ue=B;try{ue()}catch(ve){Pt(E,V,ve)}}}m=m.next}while(m!==C)}}catch(ve){Pt(f,f.return,ve)}}function k6(s){var f=s.updateQueue;if(f!==null){var g=s.stateNode;try{m8(f,g)}catch(m){Pt(s,s.return,m)}}}function T6(s,f,g){g.props=vl(s.type,s.memoizedProps),g.state=s.memoizedState;try{g.componentWillUnmount()}catch(m){Pt(s,f,m)}}function Xh(s,f){try{var g=s.ref;if(g!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof g=="function"?s.refCleanup=g(m):g.current=m}}catch(E){Pt(s,f,E)}}function Pa(s,f){var g=s.ref,m=s.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(E){Pt(s,f,E)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(E){Pt(s,f,E)}else g.current=null}function $6(s){var f=s.type,g=s.memoizedProps,m=s.stateNode;try{e:switch(f){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(E){Pt(s,s.return,E)}}function FE(s,f,g){try{var m=s.stateNode;vV(m,s.type,g,f),m[ji]=f}catch(E){Pt(s,s.return,E)}}function M6(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Qu(s.type)||s.tag===4}function kE(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||M6(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Qu(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function TE(s,f,g){var m=s.tag;if(m===5||m===6)s=s.stateNode,f?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(s,f):(f=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,f.appendChild(s),g=g._reactRootContainer,g!=null||f.onclick!==null||(f.onclick=Gm));else if(m!==4&&(m===27&&Qu(s.type)&&(g=s.stateNode,f=null),s=s.child,s!==null))for(TE(s,f,g),s=s.sibling;s!==null;)TE(s,f,g),s=s.sibling}function Nm(s,f,g){var m=s.tag;if(m===5||m===6)s=s.stateNode,f?g.insertBefore(s,f):g.appendChild(s);else if(m!==4&&(m===27&&Qu(s.type)&&(g=s.stateNode),s=s.child,s!==null))for(Nm(s,f,g),s=s.sibling;s!==null;)Nm(s,f,g),s=s.sibling}function O6(s){var f=s.stateNode,g=s.memoizedProps;try{for(var m=s.type,E=f.attributes;E.length;)f.removeAttributeNode(E[0]);Qn(f,m,g),f[oi]=s,f[ji]=g}catch(C){Pt(s,s.return,C)}}var jo=!1,gn=!1,$E=!1,N6=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function KX(s,f){if(s=s.containerInfo,tD=Km,s=G4(s),kx(s)){if("selectionStart"in s)var g={start:s.selectionStart,end:s.selectionEnd};else e:{g=(g=s.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var E=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{g.nodeType,C.nodeType}catch{g=null;break e}var $=0,B=-1,V=-1,ue=0,ve=0,Ee=s,se=null;t:for(;;){for(var fe;Ee!==g||E!==0&&Ee.nodeType!==3||(B=$+E),Ee!==C||m!==0&&Ee.nodeType!==3||(V=$+m),Ee.nodeType===3&&($+=Ee.nodeValue.length),(fe=Ee.firstChild)!==null;)se=Ee,Ee=fe;for(;;){if(Ee===s)break t;if(se===g&&++ue===E&&(B=$),se===C&&++ve===m&&(V=$),(fe=Ee.nextSibling)!==null)break;Ee=se,se=Ee.parentNode}Ee=fe}g=B===-1||V===-1?null:{start:B,end:V}}else g=null}g=g||{start:0,end:0}}else g=null;for(nD={focusedElem:s,selectionRange:g},Km=!1,Rn=f;Rn!==null;)if(f=Rn,s=f.child,(f.subtreeFlags&1024)!==0&&s!==null)s.return=f,Rn=s;else for(;Rn!==null;){switch(f=Rn,C=f.alternate,s=f.flags,f.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&C!==null){s=void 0,g=f,E=C.memoizedProps,C=C.memoizedState,m=g.stateNode;try{var Ke=vl(g.type,E,g.elementType===g.type);s=m.getSnapshotBeforeUpdate(Ke,C),m.__reactInternalSnapshotBeforeUpdate=s}catch(Qe){Pt(g,g.return,Qe)}}break;case 3:if((s&1024)!==0){if(s=f.stateNode.containerInfo,g=s.nodeType,g===9)aD(s);else if(g===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":aD(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(i(163))}if(s=f.sibling,s!==null){s.return=f.return,Rn=s;break}Rn=f.return}}function R6(s,f,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:qu(s,g),m&4&&Yh(5,g);break;case 1:if(qu(s,g),m&4)if(s=g.stateNode,f===null)try{s.componentDidMount()}catch($){Pt(g,g.return,$)}else{var E=vl(g.type,f.memoizedProps);f=f.memoizedState;try{s.componentDidUpdate(E,f,s.__reactInternalSnapshotBeforeUpdate)}catch($){Pt(g,g.return,$)}}m&64&&k6(g),m&512&&Xh(g,g.return);break;case 3:if(qu(s,g),m&64&&(s=g.updateQueue,s!==null)){if(f=null,g.child!==null)switch(g.child.tag){case 27:case 5:f=g.child.stateNode;break;case 1:f=g.child.stateNode}try{m8(s,f)}catch($){Pt(g,g.return,$)}}break;case 27:f===null&&m&4&&O6(g);case 26:case 5:qu(s,g),f===null&&m&4&&$6(g),m&512&&Xh(g,g.return);break;case 12:qu(s,g);break;case 13:qu(s,g),m&4&&L6(s,g),m&64&&(s=g.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(g=uV.bind(null,g),AV(s,g))));break;case 22:if(m=g.memoizedState!==null||jo,!m){f=f!==null&&f.memoizedState!==null||gn,E=jo;var C=gn;jo=m,(gn=f)&&!C?Hu(s,g,(g.subtreeFlags&8772)!==0):qu(s,g),jo=E,gn=C}break;case 30:break;default:qu(s,g)}}function B6(s){var f=s.alternate;f!==null&&(s.alternate=null,B6(f)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(f=s.stateNode,f!==null&&cx(f)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var Zt=null,Gi=!1;function qo(s,f,g){for(g=g.child;g!==null;)z6(s,f,g),g=g.sibling}function z6(s,f,g){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(dt,g)}catch{}switch(g.tag){case 26:gn||Pa(g,f),qo(s,f,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:gn||Pa(g,f);var m=Zt,E=Gi;Qu(g.type)&&(Zt=g.stateNode,Gi=!1),qo(s,f,g),n0(g.stateNode),Zt=m,Gi=E;break;case 5:gn||Pa(g,f);case 6:if(m=Zt,E=Gi,Zt=null,qo(s,f,g),Zt=m,Gi=E,Zt!==null)if(Gi)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(g.stateNode)}catch(C){Pt(g,f,C)}else try{Zt.removeChild(g.stateNode)}catch(C){Pt(g,f,C)}break;case 18:Zt!==null&&(Gi?(s=Zt,AT(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,g.stateNode),c0(s)):AT(Zt,g.stateNode));break;case 4:m=Zt,E=Gi,Zt=g.stateNode.containerInfo,Gi=!0,qo(s,f,g),Zt=m,Gi=E;break;case 0:case 11:case 14:case 15:gn||ju(2,g,f),gn||ju(4,g,f),qo(s,f,g);break;case 1:gn||(Pa(g,f),m=g.stateNode,typeof m.componentWillUnmount=="function"&&T6(g,f,m)),qo(s,f,g);break;case 21:qo(s,f,g);break;case 22:gn=(m=gn)||g.memoizedState!==null,qo(s,f,g),gn=m;break;default:qo(s,f,g)}}function L6(s,f){if(f.memoizedState===null&&(s=f.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{c0(s)}catch(g){Pt(f,f.return,g)}}function JX(s){switch(s.tag){case 13:case 19:var f=s.stateNode;return f===null&&(f=s.stateNode=new N6),f;case 22:return s=s.stateNode,f=s._retryCache,f===null&&(f=s._retryCache=new N6),f;default:throw Error(i(435,s.tag))}}function ME(s,f){var g=JX(s);f.forEach(function(m){var E=sV.bind(null,s,m);g.has(m)||(g.add(m),m.then(E,E))})}function lr(s,f){var g=f.deletions;if(g!==null)for(var m=0;m<g.length;m++){var E=g[m],C=s,$=f,B=$;e:for(;B!==null;){switch(B.tag){case 27:if(Qu(B.type)){Zt=B.stateNode,Gi=!1;break e}break;case 5:Zt=B.stateNode,Gi=!1;break e;case 3:case 4:Zt=B.stateNode.containerInfo,Gi=!0;break e}B=B.return}if(Zt===null)throw Error(i(160));z6(C,$,E),Zt=null,Gi=!1,C=E.alternate,C!==null&&(C.return=null),E.return=null}if(f.subtreeFlags&13878)for(f=f.child;f!==null;)I6(f,s),f=f.sibling}var oa=null;function I6(s,f){var g=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:lr(f,s),cr(s),m&4&&(ju(3,s,s.return),Yh(3,s),ju(5,s,s.return));break;case 1:lr(f,s),cr(s),m&512&&(gn||g===null||Pa(g,g.return)),m&64&&jo&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(g=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var E=oa;if(lr(f,s),cr(s),m&512&&(gn||g===null||Pa(g,g.return)),m&4){var C=g!==null?g.memoizedState:null;if(m=s.memoizedState,g===null)if(m===null)if(s.stateNode===null){e:{m=s.type,g=s.memoizedProps,E=E.ownerDocument||E;t:switch(m){case"title":C=E.getElementsByTagName("title")[0],(!C||C[yh]||C[oi]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=E.createElement(m),E.head.insertBefore(C,E.querySelector("head > title"))),Qn(C,m,g),C[oi]=s,On(C),m=C;break e;case"link":var $=OT("link","href",E).get(m+(g.href||""));if($){for(var B=0;B<$.length;B++)if(C=$[B],C.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&C.getAttribute("rel")===(g.rel==null?null:g.rel)&&C.getAttribute("title")===(g.title==null?null:g.title)&&C.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){$.splice(B,1);break t}}C=E.createElement(m),Qn(C,m,g),E.head.appendChild(C);break;case"meta":if($=OT("meta","content",E).get(m+(g.content||""))){for(B=0;B<$.length;B++)if(C=$[B],C.getAttribute("content")===(g.content==null?null:""+g.content)&&C.getAttribute("name")===(g.name==null?null:g.name)&&C.getAttribute("property")===(g.property==null?null:g.property)&&C.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&C.getAttribute("charset")===(g.charSet==null?null:g.charSet)){$.splice(B,1);break t}}C=E.createElement(m),Qn(C,m,g),E.head.appendChild(C);break;default:throw Error(i(468,m))}C[oi]=s,On(C),m=C}s.stateNode=m}else NT(E,s.type,s.stateNode);else s.stateNode=MT(E,m,s.memoizedProps);else C!==m?(C===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):C.count--,m===null?NT(E,s.type,s.stateNode):MT(E,m,s.memoizedProps)):m===null&&s.stateNode!==null&&FE(s,s.memoizedProps,g.memoizedProps)}break;case 27:lr(f,s),cr(s),m&512&&(gn||g===null||Pa(g,g.return)),g!==null&&m&4&&FE(s,s.memoizedProps,g.memoizedProps);break;case 5:if(lr(f,s),cr(s),m&512&&(gn||g===null||Pa(g,g.return)),s.flags&32){E=s.stateNode;try{Qc(E,"")}catch(fe){Pt(s,s.return,fe)}}m&4&&s.stateNode!=null&&(E=s.memoizedProps,FE(s,E,g!==null?g.memoizedProps:E)),m&1024&&($E=!0);break;case 6:if(lr(f,s),cr(s),m&4){if(s.stateNode===null)throw Error(i(162));m=s.memoizedProps,g=s.stateNode;try{g.nodeValue=m}catch(fe){Pt(s,s.return,fe)}}break;case 3:if(Wm=null,E=oa,oa=Xm(f.containerInfo),lr(f,s),oa=E,cr(s),m&4&&g!==null&&g.memoizedState.isDehydrated)try{c0(f.containerInfo)}catch(fe){Pt(s,s.return,fe)}$E&&($E=!1,U6(s));break;case 4:m=oa,oa=Xm(s.stateNode.containerInfo),lr(f,s),cr(s),oa=m;break;case 12:lr(f,s),cr(s);break;case 13:lr(f,s),cr(s),s.child.flags&8192&&s.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(LE=Ae()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,ME(s,m)));break;case 22:E=s.memoizedState!==null;var V=g!==null&&g.memoizedState!==null,ue=jo,ve=gn;if(jo=ue||E,gn=ve||V,lr(f,s),gn=ve,jo=ue,cr(s),m&8192)e:for(f=s.stateNode,f._visibility=E?f._visibility&-2:f._visibility|1,E&&(g===null||V||jo||gn||bl(s)),g=null,f=s;;){if(f.tag===5||f.tag===26){if(g===null){V=g=f;try{if(C=V.stateNode,E)$=C.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{B=V.stateNode;var Ee=V.memoizedProps.style,se=Ee!=null&&Ee.hasOwnProperty("display")?Ee.display:null;B.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(fe){Pt(V,V.return,fe)}}}else if(f.tag===6){if(g===null){V=f;try{V.stateNode.nodeValue=E?"":V.memoizedProps}catch(fe){Pt(V,V.return,fe)}}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===s)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===s)break e;for(;f.sibling===null;){if(f.return===null||f.return===s)break e;g===f&&(g=null),f=f.return}g===f&&(g=null),f.sibling.return=f.return,f=f.sibling}m&4&&(m=s.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,ME(s,g))));break;case 19:lr(f,s),cr(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,ME(s,m)));break;case 30:break;case 21:break;default:lr(f,s),cr(s)}}function cr(s){var f=s.flags;if(f&2){try{for(var g,m=s.return;m!==null;){if(M6(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var E=g.stateNode,C=kE(s);Nm(s,C,E);break;case 5:var $=g.stateNode;g.flags&32&&(Qc($,""),g.flags&=-33);var B=kE(s);Nm(s,B,$);break;case 3:case 4:var V=g.stateNode.containerInfo,ue=kE(s);TE(s,ue,V);break;default:throw Error(i(161))}}catch(ve){Pt(s,s.return,ve)}s.flags&=-3}f&4096&&(s.flags&=-4097)}function U6(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var f=s;U6(f),f.tag===5&&f.flags&1024&&f.stateNode.reset(),s=s.sibling}}function qu(s,f){if(f.subtreeFlags&8772)for(f=f.child;f!==null;)R6(s,f.alternate,f),f=f.sibling}function bl(s){for(s=s.child;s!==null;){var f=s;switch(f.tag){case 0:case 11:case 14:case 15:ju(4,f,f.return),bl(f);break;case 1:Pa(f,f.return);var g=f.stateNode;typeof g.componentWillUnmount=="function"&&T6(f,f.return,g),bl(f);break;case 27:n0(f.stateNode);case 26:case 5:Pa(f,f.return),bl(f);break;case 22:f.memoizedState===null&&bl(f);break;case 30:bl(f);break;default:bl(f)}s=s.sibling}}function Hu(s,f,g){for(g=g&&(f.subtreeFlags&8772)!==0,f=f.child;f!==null;){var m=f.alternate,E=s,C=f,$=C.flags;switch(C.tag){case 0:case 11:case 15:Hu(E,C,g),Yh(4,C);break;case 1:if(Hu(E,C,g),m=C,E=m.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(ue){Pt(m,m.return,ue)}if(m=C,E=m.updateQueue,E!==null){var B=m.stateNode;try{var V=E.shared.hiddenCallbacks;if(V!==null)for(E.shared.hiddenCallbacks=null,E=0;E<V.length;E++)p8(V[E],B)}catch(ue){Pt(m,m.return,ue)}}g&&$&64&&k6(C),Xh(C,C.return);break;case 27:O6(C);case 26:case 5:Hu(E,C,g),g&&m===null&&$&4&&$6(C),Xh(C,C.return);break;case 12:Hu(E,C,g);break;case 13:Hu(E,C,g),g&&$&4&&L6(E,C);break;case 22:C.memoizedState===null&&Hu(E,C,g),Xh(C,C.return);break;case 30:break;default:Hu(E,C,g)}f=f.sibling}}function OE(s,f){var g=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(g=s.memoizedState.cachePool.pool),s=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(s=f.memoizedState.cachePool.pool),s!==g&&(s!=null&&s.refCount++,g!=null&&Mh(g))}function NE(s,f){s=null,f.alternate!==null&&(s=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==s&&(f.refCount++,s!=null&&Mh(s))}function ja(s,f,g,m){if(f.subtreeFlags&10256)for(f=f.child;f!==null;)P6(s,f,g,m),f=f.sibling}function P6(s,f,g,m){var E=f.flags;switch(f.tag){case 0:case 11:case 15:ja(s,f,g,m),E&2048&&Yh(9,f);break;case 1:ja(s,f,g,m);break;case 3:ja(s,f,g,m),E&2048&&(s=null,f.alternate!==null&&(s=f.alternate.memoizedState.cache),f=f.memoizedState.cache,f!==s&&(f.refCount++,s!=null&&Mh(s)));break;case 12:if(E&2048){ja(s,f,g,m),s=f.stateNode;try{var C=f.memoizedProps,$=C.id,B=C.onPostCommit;typeof B=="function"&&B($,f.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(V){Pt(f,f.return,V)}}else ja(s,f,g,m);break;case 13:ja(s,f,g,m);break;case 23:break;case 22:C=f.stateNode,$=f.alternate,f.memoizedState!==null?C._visibility&2?ja(s,f,g,m):Vh(s,f):C._visibility&2?ja(s,f,g,m):(C._visibility|=2,mf(s,f,g,m,(f.subtreeFlags&10256)!==0)),E&2048&&OE($,f);break;case 24:ja(s,f,g,m),E&2048&&NE(f.alternate,f);break;default:ja(s,f,g,m)}}function mf(s,f,g,m,E){for(E=E&&(f.subtreeFlags&10256)!==0,f=f.child;f!==null;){var C=s,$=f,B=g,V=m,ue=$.flags;switch($.tag){case 0:case 11:case 15:mf(C,$,B,V,E),Yh(8,$);break;case 23:break;case 22:var ve=$.stateNode;$.memoizedState!==null?ve._visibility&2?mf(C,$,B,V,E):Vh(C,$):(ve._visibility|=2,mf(C,$,B,V,E)),E&&ue&2048&&OE($.alternate,$);break;case 24:mf(C,$,B,V,E),E&&ue&2048&&NE($.alternate,$);break;default:mf(C,$,B,V,E)}f=f.sibling}}function Vh(s,f){if(f.subtreeFlags&10256)for(f=f.child;f!==null;){var g=s,m=f,E=m.flags;switch(m.tag){case 22:Vh(g,m),E&2048&&OE(m.alternate,m);break;case 24:Vh(g,m),E&2048&&NE(m.alternate,m);break;default:Vh(g,m)}f=f.sibling}}var Wh=8192;function yf(s){if(s.subtreeFlags&Wh)for(s=s.child;s!==null;)j6(s),s=s.sibling}function j6(s){switch(s.tag){case 26:yf(s),s.flags&Wh&&s.memoizedState!==null&&LV(oa,s.memoizedState,s.memoizedProps);break;case 5:yf(s);break;case 3:case 4:var f=oa;oa=Xm(s.stateNode.containerInfo),yf(s),oa=f;break;case 22:s.memoizedState===null&&(f=s.alternate,f!==null&&f.memoizedState!==null?(f=Wh,Wh=16777216,yf(s),Wh=f):yf(s));break;default:yf(s)}}function q6(s){var f=s.alternate;if(f!==null&&(s=f.child,s!==null)){f.child=null;do f=s.sibling,s.sibling=null,s=f;while(s!==null)}}function Qh(s){var f=s.deletions;if((s.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];Rn=m,G6(m,s)}q6(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)H6(s),s=s.sibling}function H6(s){switch(s.tag){case 0:case 11:case 15:Qh(s),s.flags&2048&&ju(9,s,s.return);break;case 3:Qh(s);break;case 12:Qh(s);break;case 22:var f=s.stateNode;s.memoizedState!==null&&f._visibility&2&&(s.return===null||s.return.tag!==13)?(f._visibility&=-3,Rm(s)):Qh(s);break;default:Qh(s)}}function Rm(s){var f=s.deletions;if((s.flags&16)!==0){if(f!==null)for(var g=0;g<f.length;g++){var m=f[g];Rn=m,G6(m,s)}q6(s)}for(s=s.child;s!==null;){switch(f=s,f.tag){case 0:case 11:case 15:ju(8,f,f.return),Rm(f);break;case 22:g=f.stateNode,g._visibility&2&&(g._visibility&=-3,Rm(f));break;default:Rm(f)}s=s.sibling}}function G6(s,f){for(;Rn!==null;){var g=Rn;switch(g.tag){case 0:case 11:case 15:ju(8,g,f);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Mh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,Rn=m;else e:for(g=s;Rn!==null;){m=Rn;var E=m.sibling,C=m.return;if(B6(m),m===g){Rn=null;break e}if(E!==null){E.return=C,Rn=E;break e}Rn=C}}}var eV={getCacheForType:function(s){var f=ui(Sn),g=f.data.get(s);return g===void 0&&(g=s(),f.data.set(s,g)),g}},tV=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Ht=null,ht=null,bt=0,$t=0,fr=null,Gu=!1,vf=!1,RE=!1,Ho=0,sn=0,Yu=0,xl=0,BE=0,Br=0,bf=0,Zh=null,Yi=null,zE=!1,LE=0,Bm=1/0,zm=null,Xu=null,Wn=0,Vu=null,xf=null,Ef=0,IE=0,UE=null,Y6=null,Kh=0,PE=null;function dr(){if((Tt&2)!==0&&bt!==0)return bt&-bt;if(T.T!==null){var s=sf;return s!==0?s:VE()}return s4()}function X6(){Br===0&&(Br=(bt&536870912)===0||_t?r4():536870912);var s=Rr.current;return s!==null&&(s.flags|=32),Br}function hr(s,f,g){(s===Ht&&($t===2||$t===9)||s.cancelPendingCommit!==null)&&(Df(s,0),Wu(s,bt,Br,!1)),mh(s,g),((Tt&2)===0||s!==Ht)&&(s===Ht&&((Tt&2)===0&&(xl|=g),sn===4&&Wu(s,bt,Br,!1)),qa(s))}function V6(s,f,g){if((Tt&6)!==0)throw Error(i(327));var m=!g&&(f&124)===0&&(f&s.expiredLanes)===0||ph(s,f),E=m?rV(s,f):HE(s,f,!0),C=m;do{if(E===0){vf&&!m&&Wu(s,f,0,!1);break}else{if(g=s.current.alternate,C&&!nV(g)){E=HE(s,f,!1),C=!1;continue}if(E===2){if(C=f,s.errorRecoveryDisabledLanes&C)var $=0;else $=s.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){f=$;e:{var B=s;E=Zh;var V=B.current.memoizedState.isDehydrated;if(V&&(Df(B,$).flags|=256),$=HE(B,$,!1),$!==2){if(RE&&!V){B.errorRecoveryDisabledLanes|=C,xl|=C,E=4;break e}C=Yi,Yi=E,C!==null&&(Yi===null?Yi=C:Yi.push.apply(Yi,C))}E=$}if(C=!1,E!==2)continue}}if(E===1){Df(s,0),Wu(s,f,0,!0);break}e:{switch(m=s,C=E,C){case 0:case 1:throw Error(i(345));case 4:if((f&4194048)!==f)break;case 6:Wu(m,f,Br,!Gu);break e;case 2:Yi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((f&62914560)===f&&(E=LE+300-Ae(),10<E)){if(Wu(m,f,Br,!Gu),Vp(m,0,!0)!==0)break e;m.timeoutHandle=CT(W6.bind(null,m,g,Yi,zm,zE,f,Br,xl,bf,Gu,C,2,-0,0),E);break e}W6(m,g,Yi,zm,zE,f,Br,xl,bf,Gu,C,0,-0,0)}}break}while(!0);qa(s)}function W6(s,f,g,m,E,C,$,B,V,ue,ve,Ee,se,fe){if(s.timeoutHandle=-1,Ee=f.subtreeFlags,(Ee&8192||(Ee&16785408)===16785408)&&(a0={stylesheets:null,count:0,unsuspend:zV},j6(f),Ee=IV(),Ee!==null)){s.cancelPendingCommit=Ee(nT.bind(null,s,f,C,g,m,E,$,B,V,ve,1,se,fe)),Wu(s,C,$,!ue);return}nT(s,f,C,g,m,E,$,B,V)}function nV(s){for(var f=s;;){var g=f.tag;if((g===0||g===11||g===15)&&f.flags&16384&&(g=f.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var E=g[m],C=E.getSnapshot;E=E.value;try{if(!ur(C(),E))return!1}catch{return!1}}if(g=f.child,f.subtreeFlags&16384&&g!==null)g.return=f,f=g;else{if(f===s)break;for(;f.sibling===null;){if(f.return===null||f.return===s)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function Wu(s,f,g,m){f&=~BE,f&=~xl,s.suspendedLanes|=f,s.pingedLanes&=~f,m&&(s.warmLanes|=f),m=s.expirationTimes;for(var E=f;0<E;){var C=31-Qt(E),$=1<<C;m[C]=-1,E&=~$}g!==0&&o4(s,g,f)}function Lm(){return(Tt&6)===0?(Jh(0),!1):!0}function jE(){if(ht!==null){if($t===0)var s=ht.return;else s=ht,Bo=gl=null,aE(s),gf=null,qh=0,s=ht;for(;s!==null;)F6(s.alternate,s),s=s.return;ht=null}}function Df(s,f){var g=s.timeoutHandle;g!==-1&&(s.timeoutHandle=-1,xV(g)),g=s.cancelPendingCommit,g!==null&&(s.cancelPendingCommit=null,g()),jE(),Ht=s,ht=g=Oo(s.current,null),bt=f,$t=0,fr=null,Gu=!1,vf=ph(s,f),RE=!1,bf=Br=BE=xl=Yu=sn=0,Yi=Zh=null,zE=!1,(f&8)!==0&&(f|=f&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=f;0<m;){var E=31-Qt(m),C=1<<E;f|=s[E],m&=~C}return Ho=f,om(),g}function Q6(s,f){ut=null,T.H=Am,f===Nh||f===pm?(f=h8(),$t=3):f===c8?(f=h8(),$t=4):$t=f===g6?8:f!==null&&typeof f=="object"&&typeof f.then=="function"?6:1,fr=f,ht===null&&(sn=1,Tm(s,$r(f,s.current)))}function Z6(){var s=T.H;return T.H=Am,s===null?Am:s}function K6(){var s=T.A;return T.A=eV,s}function qE(){sn=4,Gu||(bt&4194048)!==bt&&Rr.current!==null||(vf=!0),(Yu&134217727)===0&&(xl&134217727)===0||Ht===null||Wu(Ht,bt,Br,!1)}function HE(s,f,g){var m=Tt;Tt|=2;var E=Z6(),C=K6();(Ht!==s||bt!==f)&&(zm=null,Df(s,f)),f=!1;var $=sn;e:do try{if($t!==0&&ht!==null){var B=ht,V=fr;switch($t){case 8:jE(),$=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(f=!0);var ue=$t;if($t=0,fr=null,Cf(s,B,V,ue),g&&vf){$=0;break e}break;default:ue=$t,$t=0,fr=null,Cf(s,B,V,ue)}}iV(),$=sn;break}catch(ve){Q6(s,ve)}while(!0);return f&&s.shellSuspendCounter++,Bo=gl=null,Tt=m,T.H=E,T.A=C,ht===null&&(Ht=null,bt=0,om()),$}function iV(){for(;ht!==null;)J6(ht)}function rV(s,f){var g=Tt;Tt|=2;var m=Z6(),E=K6();Ht!==s||bt!==f?(zm=null,Bm=Ae()+500,Df(s,f)):vf=ph(s,f);e:do try{if($t!==0&&ht!==null){f=ht;var C=fr;t:switch($t){case 1:$t=0,fr=null,Cf(s,f,C,1);break;case 2:case 9:if(f8(C)){$t=0,fr=null,eT(f);break}f=function(){$t!==2&&$t!==9||Ht!==s||($t=7),qa(s)},C.then(f,f);break e;case 3:$t=7;break e;case 4:$t=5;break e;case 7:f8(C)?($t=0,fr=null,eT(f)):($t=0,fr=null,Cf(s,f,C,7));break;case 5:var $=null;switch(ht.tag){case 26:$=ht.memoizedState;case 5:case 27:var B=ht;if(!$||RT($)){$t=0,fr=null;var V=B.sibling;if(V!==null)ht=V;else{var ue=B.return;ue!==null?(ht=ue,Im(ue)):ht=null}break t}}$t=0,fr=null,Cf(s,f,C,5);break;case 6:$t=0,fr=null,Cf(s,f,C,6);break;case 8:jE(),sn=6;break e;default:throw Error(i(462))}}aV();break}catch(ve){Q6(s,ve)}while(!0);return Bo=gl=null,T.H=m,T.A=E,Tt=g,ht!==null?0:(Ht=null,bt=0,om(),sn)}function aV(){for(;ht!==null&&!oe();)J6(ht)}function J6(s){var f=_6(s.alternate,s,Ho);s.memoizedProps=s.pendingProps,f===null?Im(s):ht=f}function eT(s){var f=s,g=f.alternate;switch(f.tag){case 15:case 0:f=x6(g,f,f.pendingProps,f.type,void 0,bt);break;case 11:f=x6(g,f,f.pendingProps,f.type.render,f.ref,bt);break;case 5:aE(f);default:F6(g,f),f=ht=t8(f,Ho),f=_6(g,f,Ho)}s.memoizedProps=s.pendingProps,f===null?Im(s):ht=f}function Cf(s,f,g,m){Bo=gl=null,aE(f),gf=null,qh=0;var E=f.return;try{if(VX(s,E,f,g,bt)){sn=1,Tm(s,$r(g,s.current)),ht=null;return}}catch(C){if(E!==null)throw ht=E,C;sn=1,Tm(s,$r(g,s.current)),ht=null;return}f.flags&32768?(_t||m===1?s=!0:vf||(bt&536870912)!==0?s=!1:(Gu=s=!0,(m===2||m===9||m===3||m===6)&&(m=Rr.current,m!==null&&m.tag===13&&(m.flags|=16384))),tT(f,s)):Im(f)}function Im(s){var f=s;do{if((f.flags&32768)!==0){tT(f,Gu);return}s=f.return;var g=QX(f.alternate,f,Ho);if(g!==null){ht=g;return}if(f=f.sibling,f!==null){ht=f;return}ht=f=s}while(f!==null);sn===0&&(sn=5)}function tT(s,f){do{var g=ZX(s.alternate,s);if(g!==null){g.flags&=32767,ht=g;return}if(g=s.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!f&&(s=s.sibling,s!==null)){ht=s;return}ht=s=g}while(s!==null);sn=6,ht=null}function nT(s,f,g,m,E,C,$,B,V){s.cancelPendingCommit=null;do Um();while(Wn!==0);if((Tt&6)!==0)throw Error(i(327));if(f!==null){if(f===s.current)throw Error(i(177));if(C=f.lanes|f.childLanes,C|=Nx,zY(s,g,C,$,B,V),s===Ht&&(ht=Ht=null,bt=0),xf=f,Vu=s,Ef=g,IE=C,UE=E,Y6=m,(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,lV(ye,function(){return uT(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(f.flags&13878)!==0,(f.subtreeFlags&13878)!==0||m){m=T.T,T.T=null,E=R.p,R.p=2,$=Tt,Tt|=4;try{KX(s,f,g)}finally{Tt=$,R.p=E,T.T=m}}Wn=1,iT(),rT(),aT()}}function iT(){if(Wn===1){Wn=0;var s=Vu,f=xf,g=(f.flags&13878)!==0;if((f.subtreeFlags&13878)!==0||g){g=T.T,T.T=null;var m=R.p;R.p=2;var E=Tt;Tt|=4;try{I6(f,s);var C=nD,$=G4(s.containerInfo),B=C.focusedElem,V=C.selectionRange;if($!==B&&B&&B.ownerDocument&&H4(B.ownerDocument.documentElement,B)){if(V!==null&&kx(B)){var ue=V.start,ve=V.end;if(ve===void 0&&(ve=ue),"selectionStart"in B)B.selectionStart=ue,B.selectionEnd=Math.min(ve,B.value.length);else{var Ee=B.ownerDocument||document,se=Ee&&Ee.defaultView||window;if(se.getSelection){var fe=se.getSelection(),Ke=B.textContent.length,Qe=Math.min(V.start,Ke),Lt=V.end===void 0?Qe:Math.min(V.end,Ke);!fe.extend&&Qe>Lt&&($=Lt,Lt=Qe,Qe=$);var ie=q4(B,Qe),J=q4(B,Lt);if(ie&&J&&(fe.rangeCount!==1||fe.anchorNode!==ie.node||fe.anchorOffset!==ie.offset||fe.focusNode!==J.node||fe.focusOffset!==J.offset)){var ae=Ee.createRange();ae.setStart(ie.node,ie.offset),fe.removeAllRanges(),Qe>Lt?(fe.addRange(ae),fe.extend(J.node,J.offset)):(ae.setEnd(J.node,J.offset),fe.addRange(ae))}}}}for(Ee=[],fe=B;fe=fe.parentNode;)fe.nodeType===1&&Ee.push({element:fe,left:fe.scrollLeft,top:fe.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<Ee.length;B++){var xe=Ee[B];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}Km=!!tD,nD=tD=null}finally{Tt=E,R.p=m,T.T=g}}s.current=f,Wn=2}}function rT(){if(Wn===2){Wn=0;var s=Vu,f=xf,g=(f.flags&8772)!==0;if((f.subtreeFlags&8772)!==0||g){g=T.T,T.T=null;var m=R.p;R.p=2;var E=Tt;Tt|=4;try{R6(s,f.alternate,f)}finally{Tt=E,R.p=m,T.T=g}}Wn=3}}function aT(){if(Wn===4||Wn===3){Wn=0,ge();var s=Vu,f=xf,g=Ef,m=Y6;(f.subtreeFlags&10256)!==0||(f.flags&10256)!==0?Wn=5:(Wn=0,xf=Vu=null,oT(s,s.pendingLanes));var E=s.pendingLanes;if(E===0&&(Xu=null),sx(g),f=f.stateNode,Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(dt,f,void 0,(f.current.flags&128)===128)}catch{}if(m!==null){f=T.T,E=R.p,R.p=2,T.T=null;try{for(var C=s.onRecoverableError,$=0;$<m.length;$++){var B=m[$];C(B.value,{componentStack:B.stack})}}finally{T.T=f,R.p=E}}(Ef&3)!==0&&Um(),qa(s),E=s.pendingLanes,(g&4194090)!==0&&(E&42)!==0?s===PE?Kh++:(Kh=0,PE=s):Kh=0,Jh(0)}}function oT(s,f){(s.pooledCacheLanes&=f)===0&&(f=s.pooledCache,f!=null&&(s.pooledCache=null,Mh(f)))}function Um(s){return iT(),rT(),aT(),uT()}function uT(){if(Wn!==5)return!1;var s=Vu,f=IE;IE=0;var g=sx(Ef),m=T.T,E=R.p;try{R.p=32>g?32:g,T.T=null,g=UE,UE=null;var C=Vu,$=Ef;if(Wn=0,xf=Vu=null,Ef=0,(Tt&6)!==0)throw Error(i(331));var B=Tt;if(Tt|=4,H6(C.current),P6(C,C.current,$,g),Tt=B,Jh(0,!1),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(dt,C)}catch{}return!0}finally{R.p=E,T.T=m,oT(s,f)}}function sT(s,f,g){f=$r(g,f),f=bE(s.stateNode,f,2),s=Lu(s,f,2),s!==null&&(mh(s,2),qa(s))}function Pt(s,f,g){if(s.tag===3)sT(s,s,g);else for(;f!==null;){if(f.tag===3){sT(f,s,g);break}else if(f.tag===1){var m=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Xu===null||!Xu.has(m))){s=$r(g,s),g=d6(2),m=Lu(f,g,2),m!==null&&(h6(g,m,f,s),mh(m,2),qa(m));break}}f=f.return}}function GE(s,f,g){var m=s.pingCache;if(m===null){m=s.pingCache=new tV;var E=new Set;m.set(f,E)}else E=m.get(f),E===void 0&&(E=new Set,m.set(f,E));E.has(g)||(RE=!0,E.add(g),s=oV.bind(null,s,f,g),f.then(s,s))}function oV(s,f,g){var m=s.pingCache;m!==null&&m.delete(f),s.pingedLanes|=s.suspendedLanes&g,s.warmLanes&=~g,Ht===s&&(bt&g)===g&&(sn===4||sn===3&&(bt&62914560)===bt&&300>Ae()-LE?(Tt&2)===0&&Df(s,0):BE|=g,bf===bt&&(bf=0)),qa(s)}function lT(s,f){f===0&&(f=a4()),s=rf(s,f),s!==null&&(mh(s,f),qa(s))}function uV(s){var f=s.memoizedState,g=0;f!==null&&(g=f.retryLane),lT(s,g)}function sV(s,f){var g=0;switch(s.tag){case 13:var m=s.stateNode,E=s.memoizedState;E!==null&&(g=E.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(f),lT(s,g)}function lV(s,f){return le(s,f)}var Pm=null,Sf=null,YE=!1,jm=!1,XE=!1,El=0;function qa(s){s!==Sf&&s.next===null&&(Sf===null?Pm=Sf=s:Sf=Sf.next=s),jm=!0,YE||(YE=!0,fV())}function Jh(s,f){if(!XE&&jm){XE=!0;do for(var g=!1,m=Pm;m!==null;){if(s!==0){var E=m.pendingLanes;if(E===0)var C=0;else{var $=m.suspendedLanes,B=m.pingedLanes;C=(1<<31-Qt(42|s)+1)-1,C&=E&~($&~B),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(g=!0,hT(m,C))}else C=bt,C=Vp(m,m===Ht?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||ph(m,C)||(g=!0,hT(m,C));m=m.next}while(g);XE=!1}}function cV(){cT()}function cT(){jm=YE=!1;var s=0;El!==0&&(bV()&&(s=El),El=0);for(var f=Ae(),g=null,m=Pm;m!==null;){var E=m.next,C=fT(m,f);C===0?(m.next=null,g===null?Pm=E:g.next=E,E===null&&(Sf=g)):(g=m,(s!==0||(C&3)!==0)&&(jm=!0)),m=E}Jh(s)}function fT(s,f){for(var g=s.suspendedLanes,m=s.pingedLanes,E=s.expirationTimes,C=s.pendingLanes&-62914561;0<C;){var $=31-Qt(C),B=1<<$,V=E[$];V===-1?((B&g)===0||(B&m)!==0)&&(E[$]=BY(B,f)):V<=f&&(s.expiredLanes|=B),C&=~B}if(f=Ht,g=bt,g=Vp(s,s===f?g:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,g===0||s===f&&($t===2||$t===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Te(m),s.callbackNode=null,s.callbackPriority=0;if((g&3)===0||ph(s,g)){if(f=g&-g,f===s.callbackPriority)return f;switch(m!==null&&Te(m),sx(g)){case 2:case 8:g=he;break;case 32:g=ye;break;case 268435456:g=Ce;break;default:g=ye}return m=dT.bind(null,s),g=le(g,m),s.callbackPriority=f,s.callbackNode=g,f}return m!==null&&m!==null&&Te(m),s.callbackPriority=2,s.callbackNode=null,2}function dT(s,f){if(Wn!==0&&Wn!==5)return s.callbackNode=null,s.callbackPriority=0,null;var g=s.callbackNode;if(Um()&&s.callbackNode!==g)return null;var m=bt;return m=Vp(s,s===Ht?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(V6(s,m,f),fT(s,Ae()),s.callbackNode!=null&&s.callbackNode===g?dT.bind(null,s):null)}function hT(s,f){if(Um())return null;V6(s,f,!0)}function fV(){EV(function(){(Tt&6)!==0?le(re,cV):cT()})}function VE(){return El===0&&(El=r4()),El}function gT(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:Jp(""+s)}function pT(s,f){var g=f.ownerDocument.createElement("input");return g.name=f.name,g.value=f.value,s.id&&g.setAttribute("form",s.id),f.parentNode.insertBefore(g,f),s=new FormData(s),g.parentNode.removeChild(g),s}function dV(s,f,g,m,E){if(f==="submit"&&g&&g.stateNode===E){var C=gT((E[ji]||null).action),$=m.submitter;$&&(f=(f=$[ji]||null)?gT(f.formAction):$.getAttribute("formAction"),f!==null&&(C=f,$=null));var B=new im("action","action",null,m,E);s.push({event:B,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(El!==0){var V=$?pT(E,$):new FormData(E);gE(g,{pending:!0,data:V,method:E.method,action:C},null,V)}}else typeof C=="function"&&(B.preventDefault(),V=$?pT(E,$):new FormData(E),gE(g,{pending:!0,data:V,method:E.method,action:C},C,V))},currentTarget:E}]})}}for(var WE=0;WE<Ox.length;WE++){var QE=Ox[WE],hV=QE.toLowerCase(),gV=QE[0].toUpperCase()+QE.slice(1);aa(hV,"on"+gV)}aa(V4,"onAnimationEnd"),aa(W4,"onAnimationIteration"),aa(Q4,"onAnimationStart"),aa("dblclick","onDoubleClick"),aa("focusin","onFocus"),aa("focusout","onBlur"),aa($X,"onTransitionRun"),aa(MX,"onTransitionStart"),aa(OX,"onTransitionCancel"),aa(Z4,"onTransitionEnd"),Xc("onMouseEnter",["mouseout","mouseover"]),Xc("onMouseLeave",["mouseout","mouseover"]),Xc("onPointerEnter",["pointerout","pointerover"]),Xc("onPointerLeave",["pointerout","pointerover"]),al("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),al("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),al("onBeforeInput",["compositionend","keypress","textInput","paste"]),al("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),al("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var e0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),pV=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(e0));function mT(s,f){f=(f&4)!==0;for(var g=0;g<s.length;g++){var m=s[g],E=m.event;m=m.listeners;e:{var C=void 0;if(f)for(var $=m.length-1;0<=$;$--){var B=m[$],V=B.instance,ue=B.currentTarget;if(B=B.listener,V!==C&&E.isPropagationStopped())break e;C=B,E.currentTarget=ue;try{C(E)}catch(ve){km(ve)}E.currentTarget=null,C=V}else for($=0;$<m.length;$++){if(B=m[$],V=B.instance,ue=B.currentTarget,B=B.listener,V!==C&&E.isPropagationStopped())break e;C=B,E.currentTarget=ue;try{C(E)}catch(ve){km(ve)}E.currentTarget=null,C=V}}}}function gt(s,f){var g=f[lx];g===void 0&&(g=f[lx]=new Set);var m=s+"__bubble";g.has(m)||(yT(f,s,2,!1),g.add(m))}function ZE(s,f,g){var m=0;f&&(m|=4),yT(g,s,m,f)}var qm="_reactListening"+Math.random().toString(36).slice(2);function KE(s){if(!s[qm]){s[qm]=!0,c4.forEach(function(g){g!=="selectionchange"&&(pV.has(g)||ZE(g,!1,s),ZE(g,!0,s))});var f=s.nodeType===9?s:s.ownerDocument;f===null||f[qm]||(f[qm]=!0,ZE("selectionchange",!1,f))}}function yT(s,f,g,m){switch(PT(f)){case 2:var E=jV;break;case 8:E=qV;break;default:E=dD}g=E.bind(null,f,g,s),E=void 0,!xx||f!=="touchstart"&&f!=="touchmove"&&f!=="wheel"||(E=!0),m?E!==void 0?s.addEventListener(f,g,{capture:!0,passive:E}):s.addEventListener(f,g,!0):E!==void 0?s.addEventListener(f,g,{passive:E}):s.addEventListener(f,g,!1)}function JE(s,f,g,m,E){var C=m;if((f&1)===0&&(f&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var B=m.stateNode.containerInfo;if(B===E)break;if($===4)for($=m.return;$!==null;){var V=$.tag;if((V===3||V===4)&&$.stateNode.containerInfo===E)return;$=$.return}for(;B!==null;){if($=Hc(B),$===null)return;if(V=$.tag,V===5||V===6||V===26||V===27){m=C=$;continue e}B=B.parentNode}}m=m.return}S4(function(){var ue=C,ve=vx(g),Ee=[];e:{var se=K4.get(s);if(se!==void 0){var fe=im,Ke=s;switch(s){case"keypress":if(tm(g)===0)break e;case"keydown":case"keyup":fe=lX;break;case"focusin":Ke="focus",fe=Sx;break;case"focusout":Ke="blur",fe=Sx;break;case"beforeblur":case"afterblur":fe=Sx;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=w4;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ZY;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=dX;break;case V4:case W4:case Q4:fe=eX;break;case Z4:fe=gX;break;case"scroll":case"scrollend":fe=WY;break;case"wheel":fe=mX;break;case"copy":case"cut":case"paste":fe=nX;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=k4;break;case"toggle":case"beforetoggle":fe=vX}var Qe=(f&4)!==0,Lt=!Qe&&(s==="scroll"||s==="scrollend"),ie=Qe?se!==null?se+"Capture":null:se;Qe=[];for(var J=ue,ae;J!==null;){var xe=J;if(ae=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ae===null||ie===null||(xe=bh(J,ie),xe!=null&&Qe.push(t0(J,xe,ae))),Lt)break;J=J.return}0<Qe.length&&(se=new fe(se,Ke,null,g,ve),Ee.push({event:se,listeners:Qe}))}}if((f&7)===0){e:{if(se=s==="mouseover"||s==="pointerover",fe=s==="mouseout"||s==="pointerout",se&&g!==yx&&(Ke=g.relatedTarget||g.fromElement)&&(Hc(Ke)||Ke[qc]))break e;if((fe||se)&&(se=ve.window===ve?ve:(se=ve.ownerDocument)?se.defaultView||se.parentWindow:window,fe?(Ke=g.relatedTarget||g.toElement,fe=ue,Ke=Ke?Hc(Ke):null,Ke!==null&&(Lt=a(Ke),Qe=Ke.tag,Ke!==Lt||Qe!==5&&Qe!==27&&Qe!==6)&&(Ke=null)):(fe=null,Ke=ue),fe!==Ke)){if(Qe=w4,xe="onMouseLeave",ie="onMouseEnter",J="mouse",(s==="pointerout"||s==="pointerover")&&(Qe=k4,xe="onPointerLeave",ie="onPointerEnter",J="pointer"),Lt=fe==null?se:vh(fe),ae=Ke==null?se:vh(Ke),se=new Qe(xe,J+"leave",fe,g,ve),se.target=Lt,se.relatedTarget=ae,xe=null,Hc(ve)===ue&&(Qe=new Qe(ie,J+"enter",Ke,g,ve),Qe.target=ae,Qe.relatedTarget=Lt,xe=Qe),Lt=xe,fe&&Ke)t:{for(Qe=fe,ie=Ke,J=0,ae=Qe;ae;ae=Af(ae))J++;for(ae=0,xe=ie;xe;xe=Af(xe))ae++;for(;0<J-ae;)Qe=Af(Qe),J--;for(;0<ae-J;)ie=Af(ie),ae--;for(;J--;){if(Qe===ie||ie!==null&&Qe===ie.alternate)break t;Qe=Af(Qe),ie=Af(ie)}Qe=null}else Qe=null;fe!==null&&vT(Ee,se,fe,Qe,!1),Ke!==null&&Lt!==null&&vT(Ee,Lt,Ke,Qe,!0)}}e:{if(se=ue?vh(ue):window,fe=se.nodeName&&se.nodeName.toLowerCase(),fe==="select"||fe==="input"&&se.type==="file")var Pe=z4;else if(R4(se))if(L4)Pe=FX;else{Pe=_X;var lt=AX}else fe=se.nodeName,!fe||fe.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?ue&&mx(ue.elementType)&&(Pe=z4):Pe=wX;if(Pe&&(Pe=Pe(s,ue))){B4(Ee,Pe,g,ve);break e}lt&&lt(s,se,ue),s==="focusout"&&ue&&se.type==="number"&&ue.memoizedProps.value!=null&&px(se,"number",se.value)}switch(lt=ue?vh(ue):window,s){case"focusin":(R4(lt)||lt.contentEditable==="true")&&(ef=lt,Tx=ue,wh=null);break;case"focusout":wh=Tx=ef=null;break;case"mousedown":$x=!0;break;case"contextmenu":case"mouseup":case"dragend":$x=!1,Y4(Ee,g,ve);break;case"selectionchange":if(TX)break;case"keydown":case"keyup":Y4(Ee,g,ve)}var He;if(_x)e:{switch(s){case"compositionstart":var Ze="onCompositionStart";break e;case"compositionend":Ze="onCompositionEnd";break e;case"compositionupdate":Ze="onCompositionUpdate";break e}Ze=void 0}else Jc?O4(s,g)&&(Ze="onCompositionEnd"):s==="keydown"&&g.keyCode===229&&(Ze="onCompositionStart");Ze&&(T4&&g.locale!=="ko"&&(Jc||Ze!=="onCompositionStart"?Ze==="onCompositionEnd"&&Jc&&(He=A4()):(Nu=ve,Ex="value"in Nu?Nu.value:Nu.textContent,Jc=!0)),lt=Hm(ue,Ze),0<lt.length&&(Ze=new F4(Ze,s,null,g,ve),Ee.push({event:Ze,listeners:lt}),He?Ze.data=He:(He=N4(g),He!==null&&(Ze.data=He)))),(He=xX?EX(s,g):DX(s,g))&&(Ze=Hm(ue,"onBeforeInput"),0<Ze.length&&(lt=new F4("onBeforeInput","beforeinput",null,g,ve),Ee.push({event:lt,listeners:Ze}),lt.data=He)),dV(Ee,s,ue,g,ve)}mT(Ee,f)})}function t0(s,f,g){return{instance:s,listener:f,currentTarget:g}}function Hm(s,f){for(var g=f+"Capture",m=[];s!==null;){var E=s,C=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||C===null||(E=bh(s,g),E!=null&&m.unshift(t0(s,E,C)),E=bh(s,f),E!=null&&m.push(t0(s,E,C))),s.tag===3)return m;s=s.return}return[]}function Af(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function vT(s,f,g,m,E){for(var C=f._reactName,$=[];g!==null&&g!==m;){var B=g,V=B.alternate,ue=B.stateNode;if(B=B.tag,V!==null&&V===m)break;B!==5&&B!==26&&B!==27||ue===null||(V=ue,E?(ue=bh(g,C),ue!=null&&$.unshift(t0(g,ue,V))):E||(ue=bh(g,C),ue!=null&&$.push(t0(g,ue,V)))),g=g.return}$.length!==0&&s.push({event:f,listeners:$})}var mV=/\r\n?/g,yV=/\u0000|\uFFFD/g;function bT(s){return(typeof s=="string"?s:""+s).replace(mV,`
`).replace(yV,"")}function xT(s,f){return f=bT(f),bT(s)===f}function Gm(){}function zt(s,f,g,m,E,C){switch(g){case"children":typeof m=="string"?f==="body"||f==="textarea"&&m===""||Qc(s,m):(typeof m=="number"||typeof m=="bigint")&&f!=="body"&&Qc(s,""+m);break;case"className":Qp(s,"class",m);break;case"tabIndex":Qp(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":Qp(s,g,m);break;case"style":D4(s,m,C);break;case"data":if(f!=="object"){Qp(s,"data",m);break}case"src":case"href":if(m===""&&(f!=="a"||g!=="href")){s.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(g);break}m=Jp(""+m),s.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(g==="formAction"?(f!=="input"&&zt(s,f,"name",E.name,E,null),zt(s,f,"formEncType",E.formEncType,E,null),zt(s,f,"formMethod",E.formMethod,E,null),zt(s,f,"formTarget",E.formTarget,E,null)):(zt(s,f,"encType",E.encType,E,null),zt(s,f,"method",E.method,E,null),zt(s,f,"target",E.target,E,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(g);break}m=Jp(""+m),s.setAttribute(g,m);break;case"onClick":m!=null&&(s.onclick=Gm);break;case"onScroll":m!=null&&gt("scroll",s);break;case"onScrollEnd":m!=null&&gt("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(E.children!=null)throw Error(i(60));s.innerHTML=g}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}g=Jp(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(g,""+m):s.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(g,""):s.removeAttribute(g);break;case"capture":case"download":m===!0?s.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(g,m):s.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(g,m):s.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(g):s.setAttribute(g,m);break;case"popover":gt("beforetoggle",s),gt("toggle",s),Wp(s,"popover",m);break;case"xlinkActuate":$o(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":$o(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":$o(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":$o(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":$o(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":$o(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":$o(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":$o(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":$o(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Wp(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=XY.get(g)||g,Wp(s,g,m))}}function eD(s,f,g,m,E,C){switch(g){case"style":D4(s,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(E.children!=null)throw Error(i(60));s.innerHTML=g}}break;case"children":typeof m=="string"?Qc(s,m):(typeof m=="number"||typeof m=="bigint")&&Qc(s,""+m);break;case"onScroll":m!=null&&gt("scroll",s);break;case"onScrollEnd":m!=null&&gt("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Gm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!f4.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(E=g.endsWith("Capture"),f=g.slice(2,E?g.length-7:void 0),C=s[ji]||null,C=C!=null?C[g]:null,typeof C=="function"&&s.removeEventListener(f,C,E),typeof m=="function")){typeof C!="function"&&C!==null&&(g in s?s[g]=null:s.hasAttribute(g)&&s.removeAttribute(g)),s.addEventListener(f,m,E);break e}g in s?s[g]=m:m===!0?s.setAttribute(g,""):Wp(s,g,m)}}}function Qn(s,f,g){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gt("error",s),gt("load",s);var m=!1,E=!1,C;for(C in g)if(g.hasOwnProperty(C)){var $=g[C];if($!=null)switch(C){case"src":m=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:zt(s,f,C,$,g,null)}}E&&zt(s,f,"srcSet",g.srcSet,g,null),m&&zt(s,f,"src",g.src,g,null);return;case"input":gt("invalid",s);var B=C=$=E=null,V=null,ue=null;for(m in g)if(g.hasOwnProperty(m)){var ve=g[m];if(ve!=null)switch(m){case"name":E=ve;break;case"type":$=ve;break;case"checked":V=ve;break;case"defaultChecked":ue=ve;break;case"value":C=ve;break;case"defaultValue":B=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(i(137,f));break;default:zt(s,f,m,ve,g,null)}}v4(s,C,B,V,ue,$,E,!1),Zp(s);return;case"select":gt("invalid",s),m=$=C=null;for(E in g)if(g.hasOwnProperty(E)&&(B=g[E],B!=null))switch(E){case"value":C=B;break;case"defaultValue":$=B;break;case"multiple":m=B;default:zt(s,f,E,B,g,null)}f=C,g=$,s.multiple=!!m,f!=null?Wc(s,!!m,f,!1):g!=null&&Wc(s,!!m,g,!0);return;case"textarea":gt("invalid",s),C=E=m=null;for($ in g)if(g.hasOwnProperty($)&&(B=g[$],B!=null))switch($){case"value":m=B;break;case"defaultValue":E=B;break;case"children":C=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(i(91));break;default:zt(s,f,$,B,g,null)}x4(s,m,E,C),Zp(s);return;case"option":for(V in g)if(g.hasOwnProperty(V)&&(m=g[V],m!=null))switch(V){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:zt(s,f,V,m,g,null)}return;case"dialog":gt("beforetoggle",s),gt("toggle",s),gt("cancel",s),gt("close",s);break;case"iframe":case"object":gt("load",s);break;case"video":case"audio":for(m=0;m<e0.length;m++)gt(e0[m],s);break;case"image":gt("error",s),gt("load",s);break;case"details":gt("toggle",s);break;case"embed":case"source":case"link":gt("error",s),gt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ue in g)if(g.hasOwnProperty(ue)&&(m=g[ue],m!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,f));default:zt(s,f,ue,m,g,null)}return;default:if(mx(f)){for(ve in g)g.hasOwnProperty(ve)&&(m=g[ve],m!==void 0&&eD(s,f,ve,m,g,void 0));return}}for(B in g)g.hasOwnProperty(B)&&(m=g[B],m!=null&&zt(s,f,B,m,g,null))}function vV(s,f,g,m){switch(f){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,C=null,$=null,B=null,V=null,ue=null,ve=null;for(fe in g){var Ee=g[fe];if(g.hasOwnProperty(fe)&&Ee!=null)switch(fe){case"checked":break;case"value":break;case"defaultValue":V=Ee;default:m.hasOwnProperty(fe)||zt(s,f,fe,null,m,Ee)}}for(var se in m){var fe=m[se];if(Ee=g[se],m.hasOwnProperty(se)&&(fe!=null||Ee!=null))switch(se){case"type":C=fe;break;case"name":E=fe;break;case"checked":ue=fe;break;case"defaultChecked":ve=fe;break;case"value":$=fe;break;case"defaultValue":B=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(i(137,f));break;default:fe!==Ee&&zt(s,f,se,fe,m,Ee)}}gx(s,$,B,V,ue,ve,C,E);return;case"select":fe=$=B=se=null;for(C in g)if(V=g[C],g.hasOwnProperty(C)&&V!=null)switch(C){case"value":break;case"multiple":fe=V;default:m.hasOwnProperty(C)||zt(s,f,C,null,m,V)}for(E in m)if(C=m[E],V=g[E],m.hasOwnProperty(E)&&(C!=null||V!=null))switch(E){case"value":se=C;break;case"defaultValue":B=C;break;case"multiple":$=C;default:C!==V&&zt(s,f,E,C,m,V)}f=B,g=$,m=fe,se!=null?Wc(s,!!g,se,!1):!!m!=!!g&&(f!=null?Wc(s,!!g,f,!0):Wc(s,!!g,g?[]:"",!1));return;case"textarea":fe=se=null;for(B in g)if(E=g[B],g.hasOwnProperty(B)&&E!=null&&!m.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:zt(s,f,B,null,m,E)}for($ in m)if(E=m[$],C=g[$],m.hasOwnProperty($)&&(E!=null||C!=null))switch($){case"value":se=E;break;case"defaultValue":fe=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(i(91));break;default:E!==C&&zt(s,f,$,E,m,C)}b4(s,se,fe);return;case"option":for(var Ke in g)if(se=g[Ke],g.hasOwnProperty(Ke)&&se!=null&&!m.hasOwnProperty(Ke))switch(Ke){case"selected":s.selected=!1;break;default:zt(s,f,Ke,null,m,se)}for(V in m)if(se=m[V],fe=g[V],m.hasOwnProperty(V)&&se!==fe&&(se!=null||fe!=null))switch(V){case"selected":s.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:zt(s,f,V,se,m,fe)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Qe in g)se=g[Qe],g.hasOwnProperty(Qe)&&se!=null&&!m.hasOwnProperty(Qe)&&zt(s,f,Qe,null,m,se);for(ue in m)if(se=m[ue],fe=g[ue],m.hasOwnProperty(ue)&&se!==fe&&(se!=null||fe!=null))switch(ue){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(i(137,f));break;default:zt(s,f,ue,se,m,fe)}return;default:if(mx(f)){for(var Lt in g)se=g[Lt],g.hasOwnProperty(Lt)&&se!==void 0&&!m.hasOwnProperty(Lt)&&eD(s,f,Lt,void 0,m,se);for(ve in m)se=m[ve],fe=g[ve],!m.hasOwnProperty(ve)||se===fe||se===void 0&&fe===void 0||eD(s,f,ve,se,m,fe);return}}for(var ie in g)se=g[ie],g.hasOwnProperty(ie)&&se!=null&&!m.hasOwnProperty(ie)&&zt(s,f,ie,null,m,se);for(Ee in m)se=m[Ee],fe=g[Ee],!m.hasOwnProperty(Ee)||se===fe||se==null&&fe==null||zt(s,f,Ee,se,m,fe)}var tD=null,nD=null;function Ym(s){return s.nodeType===9?s:s.ownerDocument}function ET(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function DT(s,f){if(s===0)switch(f){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&f==="foreignObject"?0:s}function iD(s,f){return s==="textarea"||s==="noscript"||typeof f.children=="string"||typeof f.children=="number"||typeof f.children=="bigint"||typeof f.dangerouslySetInnerHTML=="object"&&f.dangerouslySetInnerHTML!==null&&f.dangerouslySetInnerHTML.__html!=null}var rD=null;function bV(){var s=window.event;return s&&s.type==="popstate"?s===rD?!1:(rD=s,!0):(rD=null,!1)}var CT=typeof setTimeout=="function"?setTimeout:void 0,xV=typeof clearTimeout=="function"?clearTimeout:void 0,ST=typeof Promise=="function"?Promise:void 0,EV=typeof queueMicrotask=="function"?queueMicrotask:typeof ST<"u"?function(s){return ST.resolve(null).then(s).catch(DV)}:CT;function DV(s){setTimeout(function(){throw s})}function Qu(s){return s==="head"}function AT(s,f){var g=f,m=0,E=0;do{var C=g.nextSibling;if(s.removeChild(g),C&&C.nodeType===8)if(g=C.data,g==="/$"){if(0<m&&8>m){g=m;var $=s.ownerDocument;if(g&1&&n0($.documentElement),g&2&&n0($.body),g&4)for(g=$.head,n0(g),$=g.firstChild;$;){var B=$.nextSibling,V=$.nodeName;$[yh]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&$.rel.toLowerCase()==="stylesheet"||g.removeChild($),$=B}}if(E===0){s.removeChild(C),c0(f);return}E--}else g==="$"||g==="$?"||g==="$!"?E++:m=g.charCodeAt(0)-48;else m=0;g=C}while(g);c0(f)}function aD(s){var f=s.firstChild;for(f&&f.nodeType===10&&(f=f.nextSibling);f;){var g=f;switch(f=f.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":aD(g),cx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}s.removeChild(g)}}function CV(s,f,g,m){for(;s.nodeType===1;){var E=g;if(s.nodeName.toLowerCase()!==f.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[yh])switch(f){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(C=s.getAttribute("rel"),C==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(C!==E.rel||s.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||s.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||s.getAttribute("title")!==(E.title==null?null:E.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(C=s.getAttribute("src"),(C!==(E.src==null?null:E.src)||s.getAttribute("type")!==(E.type==null?null:E.type)||s.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&C&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(f==="input"&&s.type==="hidden"){var C=E.name==null?null:""+E.name;if(E.type==="hidden"&&s.getAttribute("name")===C)return s}else return s;if(s=ua(s.nextSibling),s===null)break}return null}function SV(s,f,g){if(f==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!g||(s=ua(s.nextSibling),s===null))return null;return s}function oD(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function AV(s,f){var g=s.ownerDocument;if(s.data!=="$?"||g.readyState==="complete")f();else{var m=function(){f(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function ua(s){for(;s!=null;s=s.nextSibling){var f=s.nodeType;if(f===1||f===3)break;if(f===8){if(f=s.data,f==="$"||f==="$!"||f==="$?"||f==="F!"||f==="F")break;if(f==="/$")return null}}return s}var uD=null;function _T(s){s=s.previousSibling;for(var f=0;s;){if(s.nodeType===8){var g=s.data;if(g==="$"||g==="$!"||g==="$?"){if(f===0)return s;f--}else g==="/$"&&f++}s=s.previousSibling}return null}function wT(s,f,g){switch(f=Ym(g),s){case"html":if(s=f.documentElement,!s)throw Error(i(452));return s;case"head":if(s=f.head,!s)throw Error(i(453));return s;case"body":if(s=f.body,!s)throw Error(i(454));return s;default:throw Error(i(451))}}function n0(s){for(var f=s.attributes;f.length;)s.removeAttributeNode(f[0]);cx(s)}var zr=new Map,FT=new Set;function Xm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Go=R.d;R.d={f:_V,r:wV,D:FV,C:kV,L:TV,m:$V,X:OV,S:MV,M:NV};function _V(){var s=Go.f(),f=Lm();return s||f}function wV(s){var f=Gc(s);f!==null&&f.tag===5&&f.type==="form"?V8(f):Go.r(s)}var _f=typeof document>"u"?null:document;function kT(s,f,g){var m=_f;if(m&&typeof f=="string"&&f){var E=Tr(f);E='link[rel="'+s+'"][href="'+E+'"]',typeof g=="string"&&(E+='[crossorigin="'+g+'"]'),FT.has(E)||(FT.add(E),s={rel:s,crossOrigin:g,href:f},m.querySelector(E)===null&&(f=m.createElement("link"),Qn(f,"link",s),On(f),m.head.appendChild(f)))}}function FV(s){Go.D(s),kT("dns-prefetch",s,null)}function kV(s,f){Go.C(s,f),kT("preconnect",s,f)}function TV(s,f,g){Go.L(s,f,g);var m=_f;if(m&&s&&f){var E='link[rel="preload"][as="'+Tr(f)+'"]';f==="image"&&g&&g.imageSrcSet?(E+='[imagesrcset="'+Tr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(E+='[imagesizes="'+Tr(g.imageSizes)+'"]')):E+='[href="'+Tr(s)+'"]';var C=E;switch(f){case"style":C=wf(s);break;case"script":C=Ff(s)}zr.has(C)||(s=d({rel:"preload",href:f==="image"&&g&&g.imageSrcSet?void 0:s,as:f},g),zr.set(C,s),m.querySelector(E)!==null||f==="style"&&m.querySelector(i0(C))||f==="script"&&m.querySelector(r0(C))||(f=m.createElement("link"),Qn(f,"link",s),On(f),m.head.appendChild(f)))}}function $V(s,f){Go.m(s,f);var g=_f;if(g&&s){var m=f&&typeof f.as=="string"?f.as:"script",E='link[rel="modulepreload"][as="'+Tr(m)+'"][href="'+Tr(s)+'"]',C=E;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Ff(s)}if(!zr.has(C)&&(s=d({rel:"modulepreload",href:s},f),zr.set(C,s),g.querySelector(E)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(r0(C)))return}m=g.createElement("link"),Qn(m,"link",s),On(m),g.head.appendChild(m)}}}function MV(s,f,g){Go.S(s,f,g);var m=_f;if(m&&s){var E=Yc(m).hoistableStyles,C=wf(s);f=f||"default";var $=E.get(C);if(!$){var B={loading:0,preload:null};if($=m.querySelector(i0(C)))B.loading=5;else{s=d({rel:"stylesheet",href:s,"data-precedence":f},g),(g=zr.get(C))&&sD(s,g);var V=$=m.createElement("link");On(V),Qn(V,"link",s),V._p=new Promise(function(ue,ve){V.onload=ue,V.onerror=ve}),V.addEventListener("load",function(){B.loading|=1}),V.addEventListener("error",function(){B.loading|=2}),B.loading|=4,Vm($,f,m)}$={type:"stylesheet",instance:$,count:1,state:B},E.set(C,$)}}}function OV(s,f){Go.X(s,f);var g=_f;if(g&&s){var m=Yc(g).hoistableScripts,E=Ff(s),C=m.get(E);C||(C=g.querySelector(r0(E)),C||(s=d({src:s,async:!0},f),(f=zr.get(E))&&lD(s,f),C=g.createElement("script"),On(C),Qn(C,"link",s),g.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(E,C))}}function NV(s,f){Go.M(s,f);var g=_f;if(g&&s){var m=Yc(g).hoistableScripts,E=Ff(s),C=m.get(E);C||(C=g.querySelector(r0(E)),C||(s=d({src:s,async:!0,type:"module"},f),(f=zr.get(E))&&lD(s,f),C=g.createElement("script"),On(C),Qn(C,"link",s),g.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(E,C))}}function TT(s,f,g,m){var E=(E=ce.current)?Xm(E):null;if(!E)throw Error(i(446));switch(s){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(f=wf(g.href),g=Yc(E).hoistableStyles,m=g.get(f),m||(m={type:"style",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){s=wf(g.href);var C=Yc(E).hoistableStyles,$=C.get(s);if($||(E=E.ownerDocument||E,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(s,$),(C=E.querySelector(i0(s)))&&!C._p&&($.instance=C,$.state.loading=5),zr.has(s)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},zr.set(s,g),C||RV(E,s,g,$.state))),f&&m===null)throw Error(i(528,""));return $}if(f&&m!==null)throw Error(i(529,""));return null;case"script":return f=g.async,g=g.src,typeof g=="string"&&f&&typeof f!="function"&&typeof f!="symbol"?(f=Ff(g),g=Yc(E).hoistableScripts,m=g.get(f),m||(m={type:"script",instance:null,count:0,state:null},g.set(f,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,s))}}function wf(s){return'href="'+Tr(s)+'"'}function i0(s){return'link[rel="stylesheet"]['+s+"]"}function $T(s){return d({},s,{"data-precedence":s.precedence,precedence:null})}function RV(s,f,g,m){s.querySelector('link[rel="preload"][as="style"]['+f+"]")?m.loading=1:(f=s.createElement("link"),m.preload=f,f.addEventListener("load",function(){return m.loading|=1}),f.addEventListener("error",function(){return m.loading|=2}),Qn(f,"link",g),On(f),s.head.appendChild(f))}function Ff(s){return'[src="'+Tr(s)+'"]'}function r0(s){return"script[async]"+s}function MT(s,f,g){if(f.count++,f.instance===null)switch(f.type){case"style":var m=s.querySelector('style[data-href~="'+Tr(g.href)+'"]');if(m)return f.instance=m,On(m),m;var E=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),On(m),Qn(m,"style",E),Vm(m,g.precedence,s),f.instance=m;case"stylesheet":E=wf(g.href);var C=s.querySelector(i0(E));if(C)return f.state.loading|=4,f.instance=C,On(C),C;m=$T(g),(E=zr.get(E))&&sD(m,E),C=(s.ownerDocument||s).createElement("link"),On(C);var $=C;return $._p=new Promise(function(B,V){$.onload=B,$.onerror=V}),Qn(C,"link",m),f.state.loading|=4,Vm(C,g.precedence,s),f.instance=C;case"script":return C=Ff(g.src),(E=s.querySelector(r0(C)))?(f.instance=E,On(E),E):(m=g,(E=zr.get(C))&&(m=d({},g),lD(m,E)),s=s.ownerDocument||s,E=s.createElement("script"),On(E),Qn(E,"link",m),s.head.appendChild(E),f.instance=E);case"void":return null;default:throw Error(i(443,f.type))}else f.type==="stylesheet"&&(f.state.loading&4)===0&&(m=f.instance,f.state.loading|=4,Vm(m,g.precedence,s));return f.instance}function Vm(s,f,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=m.length?m[m.length-1]:null,C=E,$=0;$<m.length;$++){var B=m[$];if(B.dataset.precedence===f)C=B;else if(C!==E)break}C?C.parentNode.insertBefore(s,C.nextSibling):(f=g.nodeType===9?g.head:g,f.insertBefore(s,f.firstChild))}function sD(s,f){s.crossOrigin==null&&(s.crossOrigin=f.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=f.referrerPolicy),s.title==null&&(s.title=f.title)}function lD(s,f){s.crossOrigin==null&&(s.crossOrigin=f.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=f.referrerPolicy),s.integrity==null&&(s.integrity=f.integrity)}var Wm=null;function OT(s,f,g){if(Wm===null){var m=new Map,E=Wm=new Map;E.set(g,m)}else E=Wm,m=E.get(g),m||(m=new Map,E.set(g,m));if(m.has(s))return m;for(m.set(s,null),g=g.getElementsByTagName(s),E=0;E<g.length;E++){var C=g[E];if(!(C[yh]||C[oi]||s==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var $=C.getAttribute(f)||"";$=s+$;var B=m.get($);B?B.push(C):m.set($,[C])}}return m}function NT(s,f,g){s=s.ownerDocument||s,s.head.insertBefore(g,f==="title"?s.querySelector("head > title"):null)}function BV(s,f,g){if(g===1||f.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof f.precedence!="string"||typeof f.href!="string"||f.href==="")break;return!0;case"link":if(typeof f.rel!="string"||typeof f.href!="string"||f.href===""||f.onLoad||f.onError)break;switch(f.rel){case"stylesheet":return s=f.disabled,typeof f.precedence=="string"&&s==null;default:return!0}case"script":if(f.async&&typeof f.async!="function"&&typeof f.async!="symbol"&&!f.onLoad&&!f.onError&&f.src&&typeof f.src=="string")return!0}return!1}function RT(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var a0=null;function zV(){}function LV(s,f,g){if(a0===null)throw Error(i(475));var m=a0;if(f.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(f.state.loading&4)===0){if(f.instance===null){var E=wf(g.href),C=s.querySelector(i0(E));if(C){s=C._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Qm.bind(m),s.then(m,m)),f.state.loading|=4,f.instance=C,On(C);return}C=s.ownerDocument||s,g=$T(g),(E=zr.get(E))&&sD(g,E),C=C.createElement("link"),On(C);var $=C;$._p=new Promise(function(B,V){$.onload=B,$.onerror=V}),Qn(C,"link",g),f.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(f,s),(s=f.state.preload)&&(f.state.loading&3)===0&&(m.count++,f=Qm.bind(m),s.addEventListener("load",f),s.addEventListener("error",f))}}function IV(){if(a0===null)throw Error(i(475));var s=a0;return s.stylesheets&&s.count===0&&cD(s,s.stylesheets),0<s.count?function(f){var g=setTimeout(function(){if(s.stylesheets&&cD(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=f,function(){s.unsuspend=null,clearTimeout(g)}}:null}function Qm(){if(this.count--,this.count===0){if(this.stylesheets)cD(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zm=null;function cD(s,f){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zm=new Map,f.forEach(UV,s),Zm=null,Qm.call(s))}function UV(s,f){if(!(f.state.loading&4)){var g=Zm.get(s);if(g)var m=g.get(null);else{g=new Map,Zm.set(s,g);for(var E=s.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<E.length;C++){var $=E[C];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(g.set($.dataset.precedence,$),m=$)}m&&g.set(null,m)}E=f.instance,$=E.getAttribute("data-precedence"),C=g.get($)||m,C===m&&g.set(null,E),g.set($,E),this.count++,m=Qm.bind(this),E.addEventListener("load",m),E.addEventListener("error",m),C?C.parentNode.insertBefore(E,C.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(E,s.firstChild)),f.state.loading|=4}}var o0={$$typeof:A,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function PV(s,f,g,m,E,C,$,B){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ox(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ox(0),this.hiddenUpdates=ox(null),this.identifierPrefix=m,this.onUncaughtError=E,this.onCaughtError=C,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function BT(s,f,g,m,E,C,$,B,V,ue,ve,Ee){return s=new PV(s,f,g,$,B,V,ue,Ee),f=1,C===!0&&(f|=24),C=sr(3,null,null,f),s.current=C,C.stateNode=s,f=Gx(),f.refCount++,s.pooledCache=f,f.refCount++,C.memoizedState={element:m,isDehydrated:g,cache:f},Wx(C),s}function zT(s){return s?(s=af,s):af}function LT(s,f,g,m,E,C){E=zT(E),m.context===null?m.context=E:m.pendingContext=E,m=zu(f),m.payload={element:g},C=C===void 0?null:C,C!==null&&(m.callback=C),g=Lu(s,m,f),g!==null&&(hr(g,s,f),Bh(g,s,f))}function IT(s,f){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var g=s.retryLane;s.retryLane=g!==0&&g<f?g:f}}function fD(s,f){IT(s,f),(s=s.alternate)&&IT(s,f)}function UT(s){if(s.tag===13){var f=rf(s,67108864);f!==null&&hr(f,s,67108864),fD(s,67108864)}}var Km=!0;function jV(s,f,g,m){var E=T.T;T.T=null;var C=R.p;try{R.p=2,dD(s,f,g,m)}finally{R.p=C,T.T=E}}function qV(s,f,g,m){var E=T.T;T.T=null;var C=R.p;try{R.p=8,dD(s,f,g,m)}finally{R.p=C,T.T=E}}function dD(s,f,g,m){if(Km){var E=hD(m);if(E===null)JE(s,f,m,Jm,g),jT(s,m);else if(GV(E,s,f,g,m))m.stopPropagation();else if(jT(s,m),f&4&&-1<HV.indexOf(s)){for(;E!==null;){var C=Gc(E);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var $=rl(C.pendingLanes);if($!==0){var B=C;for(B.pendingLanes|=2,B.entangledLanes|=2;$;){var V=1<<31-Qt($);B.entanglements[1]|=V,$&=~V}qa(C),(Tt&6)===0&&(Bm=Ae()+500,Jh(0))}}break;case 13:B=rf(C,2),B!==null&&hr(B,C,2),Lm(),fD(C,2)}if(C=hD(m),C===null&&JE(s,f,m,Jm,g),C===E)break;E=C}E!==null&&m.stopPropagation()}else JE(s,f,m,null,g)}}function hD(s){return s=vx(s),gD(s)}var Jm=null;function gD(s){if(Jm=null,s=Hc(s),s!==null){var f=a(s);if(f===null)s=null;else{var g=f.tag;if(g===13){if(s=o(f),s!==null)return s;s=null}else if(g===3){if(f.stateNode.current.memoizedState.isDehydrated)return f.tag===3?f.stateNode.containerInfo:null;s=null}else f!==s&&(s=null)}}return Jm=s,null}function PT(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(K()){case re:return 2;case he:return 8;case ye:case Se:return 32;case Ce:return 268435456;default:return 32}default:return 32}}var pD=!1,Zu=null,Ku=null,Ju=null,u0=new Map,s0=new Map,es=[],HV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function jT(s,f){switch(s){case"focusin":case"focusout":Zu=null;break;case"dragenter":case"dragleave":Ku=null;break;case"mouseover":case"mouseout":Ju=null;break;case"pointerover":case"pointerout":u0.delete(f.pointerId);break;case"gotpointercapture":case"lostpointercapture":s0.delete(f.pointerId)}}function l0(s,f,g,m,E,C){return s===null||s.nativeEvent!==C?(s={blockedOn:f,domEventName:g,eventSystemFlags:m,nativeEvent:C,targetContainers:[E]},f!==null&&(f=Gc(f),f!==null&&UT(f)),s):(s.eventSystemFlags|=m,f=s.targetContainers,E!==null&&f.indexOf(E)===-1&&f.push(E),s)}function GV(s,f,g,m,E){switch(f){case"focusin":return Zu=l0(Zu,s,f,g,m,E),!0;case"dragenter":return Ku=l0(Ku,s,f,g,m,E),!0;case"mouseover":return Ju=l0(Ju,s,f,g,m,E),!0;case"pointerover":var C=E.pointerId;return u0.set(C,l0(u0.get(C)||null,s,f,g,m,E)),!0;case"gotpointercapture":return C=E.pointerId,s0.set(C,l0(s0.get(C)||null,s,f,g,m,E)),!0}return!1}function qT(s){var f=Hc(s.target);if(f!==null){var g=a(f);if(g!==null){if(f=g.tag,f===13){if(f=o(g),f!==null){s.blockedOn=f,LY(s.priority,function(){if(g.tag===13){var m=dr();m=ux(m);var E=rf(g,m);E!==null&&hr(E,g,m),fD(g,m)}});return}}else if(f===3&&g.stateNode.current.memoizedState.isDehydrated){s.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}s.blockedOn=null}function e1(s){if(s.blockedOn!==null)return!1;for(var f=s.targetContainers;0<f.length;){var g=hD(s.nativeEvent);if(g===null){g=s.nativeEvent;var m=new g.constructor(g.type,g);yx=m,g.target.dispatchEvent(m),yx=null}else return f=Gc(g),f!==null&&UT(f),s.blockedOn=g,!1;f.shift()}return!0}function HT(s,f,g){e1(s)&&g.delete(f)}function YV(){pD=!1,Zu!==null&&e1(Zu)&&(Zu=null),Ku!==null&&e1(Ku)&&(Ku=null),Ju!==null&&e1(Ju)&&(Ju=null),u0.forEach(HT),s0.forEach(HT)}function t1(s,f){s.blockedOn===f&&(s.blockedOn=null,pD||(pD=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,YV)))}var n1=null;function GT(s){n1!==s&&(n1=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){n1===s&&(n1=null);for(var f=0;f<s.length;f+=3){var g=s[f],m=s[f+1],E=s[f+2];if(typeof m!="function"){if(gD(m||g)===null)continue;break}var C=Gc(g);C!==null&&(s.splice(f,3),f-=3,gE(C,{pending:!0,data:E,method:g.method,action:m},m,E))}}))}function c0(s){function f(V){return t1(V,s)}Zu!==null&&t1(Zu,s),Ku!==null&&t1(Ku,s),Ju!==null&&t1(Ju,s),u0.forEach(f),s0.forEach(f);for(var g=0;g<es.length;g++){var m=es[g];m.blockedOn===s&&(m.blockedOn=null)}for(;0<es.length&&(g=es[0],g.blockedOn===null);)qT(g),g.blockedOn===null&&es.shift();if(g=(s.ownerDocument||s).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var E=g[m],C=g[m+1],$=E[ji]||null;if(typeof C=="function")$||GT(g);else if($){var B=null;if(C&&C.hasAttribute("formAction")){if(E=C,$=C[ji]||null)B=$.formAction;else if(gD(E)!==null)continue}else B=$.action;typeof B=="function"?g[m+1]=B:(g.splice(m,3),m-=3),GT(g)}}}function mD(s){this._internalRoot=s}i1.prototype.render=mD.prototype.render=function(s){var f=this._internalRoot;if(f===null)throw Error(i(409));var g=f.current,m=dr();LT(g,m,s,f,null,null)},i1.prototype.unmount=mD.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var f=s.containerInfo;LT(s.current,2,null,s,null,null),Lm(),f[qc]=null}};function i1(s){this._internalRoot=s}i1.prototype.unstable_scheduleHydration=function(s){if(s){var f=s4();s={blockedOn:null,target:s,priority:f};for(var g=0;g<es.length&&f!==0&&f<es[g].priority;g++);es.splice(g,0,s),g===0&&qT(s)}};var YT=t.version;if(YT!=="19.1.1")throw Error(i(527,YT,"19.1.1"));R.findDOMNode=function(s){var f=s._reactInternals;if(f===void 0)throw typeof s.render=="function"?Error(i(188)):(s=Object.keys(s).join(","),Error(i(268,s)));return s=c(f),s=s!==null?l(s):null,s=s===null?null:s.stateNode,s};var XV={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:T,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var r1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!r1.isDisabled&&r1.supportsFiber)try{dt=r1.inject(XV),Rt=r1}catch{}}return d0.createRoot=function(s,f){if(!r(s))throw Error(i(299));var g=!1,m="",E=s6,C=l6,$=c6,B=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(m=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(C=f.onCaughtError),f.onRecoverableError!==void 0&&($=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(B=f.unstable_transitionCallbacks)),f=BT(s,1,!1,null,null,g,m,E,C,$,B,null),s[qc]=f.current,KE(s),new mD(f)},d0.hydrateRoot=function(s,f,g){if(!r(s))throw Error(i(299));var m=!1,E="",C=s6,$=l6,B=c6,V=null,ue=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(E=g.identifierPrefix),g.onUncaughtError!==void 0&&(C=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(B=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(V=g.unstable_transitionCallbacks),g.formState!==void 0&&(ue=g.formState)),f=BT(s,1,!0,f,g??null,m,E,C,$,B,V,ue),f.context=zT(null),g=f.current,m=dr(),m=ux(m),E=zu(m),E.callback=null,Lu(g,E,m),g=m,f.current.lanes=g,mh(f,g),qa(f),s[qc]=f.current,KE(s),new i1(f)},d0.version="19.1.1",d0}var n9;function nW(){if(n9)return vD.exports;n9=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vD.exports=tW(),vD.exports}var EAe=nW(),DAe=Jv();const iW=/("(?:[^\\"]|\\.)*")|[:,]/g;function CD(e,t={}){const n=JSON.stringify([1],void 0,t.indent===void 0?2:t.indent).slice(2,-3),i=n===""?1/0:t.maxLength===void 0?80:t.maxLength;let{replacer:r}=t;return(function a(o,u,c){o&&typeof o.toJSON=="function"&&(o=o.toJSON());const l=JSON.stringify(o,r);if(l===void 0)return l;const d=i-u.length-c;if(l.length<=d){const h=l.replace(iW,(p,y)=>y||`${p} `);if(h.length<=d)return h}if(r!=null&&(o=JSON.parse(l),r=void 0),typeof o=="object"&&o!==null){const h=u+n,p=[];let y=0,v,b;if(Array.isArray(o)){v="[",b="]";const{length:x}=o;for(;y<x;y++)p.push(a(o[y],h,y===x-1?0:1)||"null")}else{v="{",b="}";const x=Object.keys(o),{length:D}=x;for(;y<D;y++){const S=x[y],A=`${JSON.stringify(S)}: `,w=a(o[S],h,A.length+(y===D-1?0:1));w!==void 0&&p.push(A+w)}}if(p.length>0)return[v,n+p.join(`,
${h}`),b].join(`
${u}`)}return l})(e,"",0)}function ar(e,t,n){return e.fields=t||[],e.fname=n,e}function dn(e){return e==null?null:e.fname}function yi(e){return e==null?null:e.fields}function PN(e){return e.length===1?rW(e[0]):aW(e)}const rW=e=>function(t){return t[e]},aW=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function me(e){throw Error(e)}function vo(e){const t=[],n=e.length;let i=null,r=0,a="",o,u,c;e=e+"";function l(){t.push(a+e.substring(o,u)),a="",o=u+1}for(o=u=0;u<n;++u)if(c=e[u],c==="\\")a+=e.substring(o,u++),o=u;else if(c===i)l(),i=null,r=-1;else{if(i)continue;o===r&&c==='"'||o===r&&c==="'"?(o=u+1,i=c):c==="."&&!r?u>o?l():o=u+1:c==="["?(u>o&&l(),r=o=u+1):c==="]"&&(r||me("Access path missing open bracket: "+e),r>0&&l(),r=0,o=u+1)}return r&&me("Access path missing closing bracket: "+e),i&&me("Access path missing closing quote: "+e),u>o&&(u++,l()),t}function Vr(e,t,n){const i=vo(e);return e=i.length===1?i[0]:e,ar((n&&n.get||PN)(i),[e],t||e)}const ep=Vr("id"),Ei=ar(e=>e,[],"identity"),fs=ar(()=>0,[],"zero"),jd=ar(()=>1,[],"one"),Wr=ar(()=>!0,[],"true"),is=ar(()=>!1,[],"false");function oW(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const jN=0,N_=1,R_=2,qN=3,HN=4;function B_(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:oW,i=e||jN;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=N_&&n(t||"error","ERROR",arguments),this},warn(){return i>=R_&&n(t||"warn","WARN",arguments),this},info(){return i>=qN&&n(t||"log","INFO",arguments),this},debug(){return i>=HN&&n(t||"log","DEBUG",arguments),this}}}var be=Array.isArray;function Le(e){return e===Object(e)}const i9=e=>e!=="__proto__";function qd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=uW(i.signals,r.signals);else{const o=a==="legend"?{layout:1}:a==="style"?!0:null;Hd(i,a,r[a],o)}return i},{})}function Hd(e,t,n,i){if(!i9(t))return;let r,a;if(Le(n)&&!be(n)){a=Le(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Hd(a,r,n[r]):i9(r)&&(a[r]=n[r])}else e[t]=n}function uW(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function vt(e){return e[e.length-1]}function pi(e){return e==null||e===""?null:+e}const GN=e=>t=>e*Math.exp(t),YN=e=>t=>Math.log(e*t),XN=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),VN=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,vy=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function eb(e,t,n,i){const r=n(e[0]),a=n(vt(e)),o=(a-r)*t;return[i(r-o),i(a-o)]}function WN(e,t){return eb(e,t,pi,Ei)}function QN(e,t){var n=Math.sign(e[0]);return eb(e,t,YN(n),GN(n))}function ZN(e,t,n){return eb(e,t,vy(n),vy(1/n))}function KN(e,t,n){return eb(e,t,XN(n),VN(n))}function tb(e,t,n,i,r){const a=i(e[0]),o=i(vt(e)),u=t!=null?i(t):(a+o)/2;return[r(u+(a-u)*n),r(u+(o-u)*n)]}function z_(e,t,n){return tb(e,t,n,pi,Ei)}function L_(e,t,n){const i=Math.sign(e[0]);return tb(e,t,n,YN(i),GN(i))}function by(e,t,n,i){return tb(e,t,n,vy(i),vy(1/i))}function I_(e,t,n,i){return tb(e,t,n,XN(i),VN(i))}function JN(e){return 1+~~(new Date(e).getMonth()/3)}function eR(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Ie(e){return e!=null?be(e)?e:[e]:[]}function tR(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function rt(e){return typeof e=="function"}const sW="descending";function U_(e,t,n){n=n||{},t=Ie(t)||[];const i=[],r=[],a={},o=n.comparator||lW;return Ie(e).forEach((u,c)=>{u!=null&&(i.push(t[c]===sW?-1:1),r.push(u=rt(u)?u:Vr(u,null,n)),(yi(u)||[]).forEach(l=>a[l]=1))}),r.length===0?null:ar(o(r,i),Object.keys(a))}const Gd=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),lW=(e,t)=>e.length===1?cW(e[0],t[0]):fW(e,t,e.length),cW=(e,t)=>function(n,i){return Gd(e(n),e(i))*t},fW=(e,t,n)=>(t.push(0),function(i,r){let a,o=0,u=-1;for(;o===0&&++u<n;)a=e[u],o=Gd(a(i),a(r));return o*t[u]});function Di(e){return rt(e)?e:()=>e}function P_(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function it(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function so(e,t){let n=0,i,r,a,o;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=o=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>o&&(o=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=o=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>o&&(o=r))}return[a,o]}function nR(e,t){const n=e.length;let i=-1,r,a,o,u,c;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(u=c=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,u=i),o<a&&(o=a,c=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=o=a;break}if(i===n)return[-1,-1];for(u=c=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,u=i),o<a&&(o=a,c=i))}return[u,c]}function Ue(e,t){return Object.hasOwn(e,t)}const a1={};function Yd(e){let t={},n;function i(a){return Ue(t,a)&&t[a]!==a1}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,o){return i(a)||(++r.size,t[a]===a1&&--r.empty),t[a]=o,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=a1),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let o=0;for(const u in t){const c=t[u];c!==a1&&(!n||!n(c))&&(a[u]=c,++o)}r.size=o,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function iR(e,t,n,i,r,a){if(!n&&n!==0)return a;const o=+n;let u=e[0],c=vt(e),l;c<u&&(l=u,u=c,c=l),l=Math.abs(t-u);const d=Math.abs(c-t);return l<d&&l<=o?i:d<=o?r:a}function Re(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),it(i,n)}function Hf(e,t,n,i){let r=t[0],a=t[t.length-1],o;return r>a&&(o=r,r=a,a=o),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function qs(e){return typeof e=="boolean"}function Es(e){return Object.prototype.toString.call(e)==="[object Date]"}function rR(e){return e&&rt(e[Symbol.iterator])}function Ct(e){return typeof e=="number"}function j_(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function ze(e){return typeof e=="string"}function q_(e,t,n){e&&(e=t?Ie(e).map(u=>u.replace(/\\(.)/g,"$1")):Ie(e));const i=e&&e.length,r=n&&n.get||PN,a=u=>r(t?[u]:vo(u));let o;if(!i)o=function(){return""};else if(i===1){const u=a(e[0]);o=function(c){return""+u(c)}}else{const u=e.map(a);o=function(c){let l=""+u[0](c),d=0;for(;++d<i;)l+="|"+u[d](c);return l}}return ar(o,e,"key")}function aR(e,t){const n=e[0],i=vt(e),r=+t;return r?r===1?i:n+r*(i-n):n}const dW=1e4;function oR(e){e=+e||dW;let t,n,i;const r=()=>{t={},n={},i=0},a=(o,u)=>(++i>e&&(n=t,t={},i=1),t[o]=u);return r(),{clear:r,has:o=>Ue(t,o)||Ue(n,o),get:o=>Ue(t,o)?t[o]:Ue(n,o)?a(o,n[o]):void 0,set:(o,u)=>Ue(t,o)?t[o]=u:a(o,u)}}function uR(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const o=i||new t.constructor(r+a);let u=0,c=0,l=0;for(;u<r&&c<a;++l)o[l]=e(t[u],n[c])>0?n[c++]:t[u++];for(;u<r;++u,++l)o[l]=t[u];for(;c<a;++c,++l)o[l]=n[c];return o}function L0(e,t){let n="";for(;--t>=0;)n+=e;return n}function sR(e,t,n,i){const r=n||" ",a=e+"",o=t-a.length;return o<=0?a:i==="left"?L0(r,o)+a:i==="center"?L0(r,~~(o/2))+a+L0(r,Math.ceil(o/2)):a+L0(r,o)}function tp(e){return e&&vt(e)-e[0]||0}function Oe(e){return be(e)?"["+e.map(Oe)+"]":Le(e)||ze(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function H_(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const hW=e=>Ct(e)||Es(e)?e:Date.parse(e);function G_(e,t){return t=t||hW,e==null||e===""?null:t(e)}function Y_(e){return e==null||e===""?null:e+""}function Sa(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function lR(e,t,n,i){const r=i??"",a=e+"",o=a.length,u=Math.max(0,t-r.length);return o<=t?a:n==="left"?r+a.slice(o-u):n==="center"?a.slice(0,Math.ceil(u/2))+r+a.slice(o-~~(u/2)):a.slice(0,u)+r}function os(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var r9={},SD={},AD=34,h0=10,_D=13;function cR(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function gW(e,t){var n=cR(e);return function(i,r){return t(n(i),r,e)}}function a9(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function Xi(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function pW(e){return e<0?"-"+Xi(-e,6):e>9999?"+"+Xi(e,6):Xi(e,4)}function mW(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":pW(e.getUTCFullYear())+"-"+Xi(e.getUTCMonth()+1,2)+"-"+Xi(e.getUTCDate(),2)+(r?"T"+Xi(t,2)+":"+Xi(n,2)+":"+Xi(i,2)+"."+Xi(r,3)+"Z":i?"T"+Xi(t,2)+":"+Xi(n,2)+":"+Xi(i,2)+"Z":n||t?"T"+Xi(t,2)+":"+Xi(n,2)+"Z":"")}function yW(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(x,D){if(y)return y(x,D-1);v=x,y=p?gW(x,p):cR(x)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,x=0,D,S=v<=0,A=!1;h.charCodeAt(v-1)===h0&&--v,h.charCodeAt(v-1)===_D&&--v;function w(){if(S)return SD;if(A)return A=!1,r9;var k,F=b,M;if(h.charCodeAt(F)===AD){for(;b++<v&&h.charCodeAt(b)!==AD||h.charCodeAt(++b)===AD;);return(k=b)>=v?S=!0:(M=h.charCodeAt(b++))===h0?A=!0:M===_D&&(A=!0,h.charCodeAt(b)===h0&&++b),h.slice(F+1,k-1).replace(/""/g,'"')}for(;b<v;){if((M=h.charCodeAt(k=b++))===h0)A=!0;else if(M===_D)A=!0,h.charCodeAt(b)===h0&&++b;else if(M!==n)continue;return h.slice(F,k)}return S=!0,h.slice(F,v)}for(;(D=w())!==SD;){for(var _=[];D!==r9&&D!==SD;)_.push(D),D=w();p&&(_=p(_,x++))==null||y.push(_)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function o(h,p){return p==null&&(p=a9(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function u(h,p){return p==null&&(p=a9(h)),a(h,p).join(`
`)}function c(h){return h.map(l).join(`
`)}function l(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?mW(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:o,formatBody:u,formatRows:c,formatRow:l,formatValue:d}}function vW(e){return e}function bW(e){if(e==null)return vW;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],o=e.translate[1];return function(u,c){c||(t=n=0);var l=2,d=u.length,h=new Array(d);for(h[0]=(t+=u[0])*i+a,h[1]=(n+=u[1])*r+o;l<d;)h[l]=u[l],++l;return h}}function xW(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function EW(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return o9(e,n)})}:o9(e,t)}function o9(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=fR(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function fR(e,t){var n=bW(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&xW(h,v)}function a(d){return n(d)}function o(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function u(d){for(var h=o(d);h.length<4;)h.push(h[0]);return h}function c(d){return d.map(u)}function l(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(l)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=o(d.arcs);break;case"MultiLineString":p=d.arcs.map(o);break;case"Polygon":p=c(d.arcs);break;case"MultiPolygon":p=d.arcs.map(c);break;default:return null}return{type:h,coordinates:p}}return l(t)}function DW(e,t){var n={},i={},r={},a=[],o=-1;t.forEach(function(l,d){var h=e.arcs[l<0?~l:l],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++o],t[o]=l,t[d]=p)}),t.forEach(function(l){var d=u(l),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(l),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(l),y.start=h,v=r[h]){delete r[v.end];var x=v===y?y:v.concat(y);i[x.start=v.start]=r[x.end=y.end]=x}else i[y.start]=r[y.end]=y;else y=[l],i[y.start=h]=r[y.end=p]=y});function u(l){var d=e.arcs[l<0?~l:l],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],l<0?[p,h]:[h,p]}function c(l,d){for(var h in l){var p=l[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return c(r,i),c(i,r),t.forEach(function(l){n[l<0?~l:l]||a.push([l])}),a}function CW(e){return fR(e,SW.apply(this,arguments))}function SW(e,t,n){var i,r,a;if(arguments.length>1)i=AW(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:DW(e,i)}}function AW(e,t,n){var i=[],r=[],a;function o(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function u(h){h.forEach(o)}function c(h){h.forEach(u)}function l(h){h.forEach(c)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":u(h.arcs);break;case"MultiLineString":case"Polygon":c(h.arcs);break;case"MultiPolygon":l(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function lu(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function _W(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xd(e){let t,n,i;e.length!==2?(t=lu,n=(u,c)=>lu(e(u),c),i=(u,c)=>e(u)-c):(t=e===lu||e===_W?e:wW,n=e,i=e);function r(u,c,l=0,d=u.length){if(l<d){if(t(c,c)!==0)return d;do{const h=l+d>>>1;n(u[h],c)<0?l=h+1:d=h}while(l<d)}return l}function a(u,c,l=0,d=u.length){if(l<d){if(t(c,c)!==0)return d;do{const h=l+d>>>1;n(u[h],c)<=0?l=h+1:d=h}while(l<d)}return l}function o(u,c,l=0,d=u.length){const h=r(u,c,l,d-1);return h>l&&i(u[h-1],c)>-i(u[h],c)?h-1:h}return{left:r,center:o,right:a}}function wW(){return 0}function dR(e){return e===null?NaN:+e}function*FW(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const hR=Xd(lu),ws=hR.right,kW=hR.left;Xd(dR).center;function TW(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r));else{let o=-1;for(let u of e)(u=t(u,++o,e))!=null&&(u=+u)>=u&&(i=u-r,r+=i/++n,a+=i*(u-r))}if(n>1)return a/(n-1)}function $W(e,t){const n=TW(e,t);return n&&Math.sqrt(n)}class Ri{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],o=t+a,u=Math.abs(t)<Math.abs(a)?t-(o-a):a-(o-t);u&&(n[i++]=u),t=o}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,o=0;if(n>0){for(o=t[--n];n>0&&(i=o,r=t[--n],o=i+r,a=r-(o-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=o+r,r==i-o&&(o=i))}return o}}class u9 extends Map{constructor(t,n=mR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(mS(this,t))}has(t){return super.has(mS(this,t))}set(t,n){return super.set(gR(this,t),n)}delete(t){return super.delete(pR(this,t))}}class xy extends Set{constructor(t,n=mR){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(mS(this,t))}add(t){return super.add(gR(this,t))}delete(t){return super.delete(pR(this,t))}}function mS({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function gR({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function pR({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function mR(e){return e!==null&&typeof e=="object"?e.valueOf():e}function MW(e,t){return Array.from(t,n=>e[n])}function OW(e=lu){if(e===lu)return yR;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function yR(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const NW=Math.sqrt(50),RW=Math.sqrt(10),BW=Math.sqrt(2);function Ey(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),o=a>=NW?10:a>=RW?5:a>=BW?2:1;let u,c,l;return r<0?(l=Math.pow(10,-r)/o,u=Math.round(e*l),c=Math.round(t*l),u/l<e&&++u,c/l>t&&--c,l=-l):(l=Math.pow(10,r)*o,u=Math.round(e/l),c=Math.round(t/l),u*l<e&&++u,c*l>t&&--c),c<u&&.5<=n&&n<2?Ey(e,t,n*2):[u,c,l]}function yS(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,o]=i?Ey(t,e,n):Ey(e,t,n);if(!(a>=r))return[];const u=a-r+1,c=new Array(u);if(i)if(o<0)for(let l=0;l<u;++l)c[l]=(a-l)/-o;else for(let l=0;l<u;++l)c[l]=(a-l)*o;else if(o<0)for(let l=0;l<u;++l)c[l]=(r+l)/-o;else for(let l=0;l<u;++l)c[l]=(r+l)*o;return c}function vS(e,t,n){return t=+t,e=+e,n=+n,Ey(e,t,n)[2]}function Fs(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?vS(t,e,n):vS(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function Xl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function bS(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function vR(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?yR:OW(r);i>n;){if(i-n>600){const c=i-n+1,l=t-n+1,d=Math.log(c),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(c-h)/c)*(l-c/2<0?-1:1),y=Math.max(n,Math.floor(t-l*h/c+p)),v=Math.min(i,Math.floor(t+(c-l)*h/c+p));vR(e,t,y,v,r)}const a=e[t];let o=n,u=i;for(g0(e,n,t),r(e[i],a)>0&&g0(e,n,i);o<u;){for(g0(e,o,u),++o,--u;r(e[o],a)<0;)++o;for(;r(e[u],a)>0;)--u}r(e[n],a)===0?g0(e,n,u):(++u,g0(e,u,i)),u<=t&&(n=u+1),t<=u&&(i=u-1)}return e}function g0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function xS(e,t,n){if(e=Float64Array.from(FW(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return bS(e);if(t>=1)return Xl(e);var i,r=(i-1)*t,a=Math.floor(r),o=Xl(vR(e,a).subarray(0,a+1)),u=bS(e.subarray(a+1));return o+(u-o)*(r-a)}}function bR(e,t,n=dR){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),o=+n(e[a],a,e),u=+n(e[a+1],a+1,e);return o+(u-o)*(r-a)}}function zW(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function xR(e,t){return xS(e,.5,t)}function*LW(e){for(const t of e)yield*t}function ER(e){return Array.from(LW(e))}function vr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function DR(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function IW(e,...t){e=new xy(e),t=t.map(UW);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function UW(e){return e instanceof xy?e:new xy(e)}function PW(...e){const t=new xy;for(const n of e)for(const i of n)t.add(i);return t}function jW(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function ud(e){return e=Dy(Math.abs(e)),e?e[1]:NaN}function qW(e,t){return function(n,i){for(var r=n.length,a=[],o=0,u=e[0],c=0;r>0&&u>0&&(c+u+1>i&&(u=Math.max(1,i-c)),a.push(n.substring(r-=u,r+u)),!((c+=u+1)>i));)u=e[o=(o+1)%e.length];return a.reverse().join(t)}}function HW(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var GW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ic(e){if(!(t=GW.exec(e)))throw new Error("invalid format: "+e);var t;return new X_({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ic.prototype=X_.prototype;function X_(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}X_.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function YW(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var CR;function XW(e,t){var n=Dy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(CR=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=i.length;return a===o?i:a>o?i+new Array(a-o+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+Dy(e,Math.max(0,t+a-1))[0]}function s9(e,t){var n=Dy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const l9={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:jW,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>s9(e*100,t),r:s9,s:XW,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function c9(e){return e}var f9=Array.prototype.map,d9=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function SR(e){var t=e.grouping===void 0||e.thousands===void 0?c9:qW(f9.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?c9:HW(f9.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function l(h){h=ic(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,x=h.zero,D=h.width,S=h.comma,A=h.precision,w=h.trim,_=h.type;_==="n"?(S=!0,_="g"):l9[_]||(A===void 0&&(A=12),w=!0,_="g"),(x||p==="0"&&y==="=")&&(x=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(_)?"0"+_.toLowerCase():"",F=b==="$"?i:/[%p]/.test(_)?o:"",M=l9[_],N=/[defgprs%]/.test(_);A=A===void 0?6:/[gprs]/.test(_)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function P(L){var H=k,I=F,U,z,T;if(_==="c")I=M(L)+I,L="";else{L=+L;var R=L<0||1/L<0;if(L=isNaN(L)?c:M(Math.abs(L),A),w&&(L=YW(L)),R&&+L==0&&v!=="+"&&(R=!1),H=(R?v==="("?v:u:v==="-"||v==="("?"":v)+H,I=(_==="s"?d9[8+CR/3]:"")+I+(R&&v==="("?")":""),N){for(U=-1,z=L.length;++U<z;)if(T=L.charCodeAt(U),48>T||T>57){I=(T===46?r+L.slice(U+1):L.slice(U))+I,L=L.slice(0,U);break}}}S&&!x&&(L=t(L,1/0));var q=H.length+L.length+I.length,G=q<D?new Array(D-q+1).join(p):"";switch(S&&x&&(L=t(G+L,G.length?D-I.length:1/0),G=""),y){case"<":L=H+L+I+G;break;case"=":L=H+G+L+I;break;case"^":L=G.slice(0,q=G.length>>1)+H+L+I+G.slice(q);break;default:L=G+H+L+I;break}return a(L)}return P.toString=function(){return h+""},P}function d(h,p){var y=l((h=ic(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(ud(p)/3)))*3,b=Math.pow(10,-v),x=d9[8+v/3];return function(D){return y(b*D)+x}}return{format:l,formatPrefix:d}}var o1,nb,V_;VW({thousands:",",grouping:[3],currency:["$",""]});function VW(e){return o1=SR(e),nb=o1.format,V_=o1.formatPrefix,o1}function AR(e){return Math.max(0,-ud(Math.abs(e)))}function _R(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ud(t)/3)))*3-ud(Math.abs(e)))}function wR(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ud(t)-ud(e))+1}const wD=new Date,FD=new Date;function $n(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const o=r(a),u=r.ceil(a);return a-o<u-a?o:u},r.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),r.range=(a,o,u)=>{const c=[];if(a=r.ceil(a),u=u==null?1:Math.floor(u),!(a<o)||!(u>0))return c;let l;do c.push(l=new Date(+a)),t(a,u),e(a);while(l<a&&a<o);return c},r.filter=a=>$n(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,u)=>{if(o>=o)if(u<0)for(;++u<=0;)for(;t(o,-1),!a(o););else for(;--u>=0;)for(;t(o,1),!a(o););}),n&&(r.count=(a,o)=>(wD.setTime(+a),FD.setTime(+o),e(wD),e(FD),Math.floor(n(wD,FD))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?o=>i(o)%a===0:o=>r.count(0,o)%a===0):r)),r}const sd=$n(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);sd.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?$n(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):sd);sd.range;const iu=1e3,jr=iu*60,ru=jr*60,vu=ru*24,W_=vu*7,h9=vu*30,kD=vu*365,au=$n(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*iu)},(e,t)=>(t-e)/iu,e=>e.getUTCSeconds());au.range;const ib=$n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*iu)},(e,t)=>{e.setTime(+e+t*jr)},(e,t)=>(t-e)/jr,e=>e.getMinutes());ib.range;const rb=$n(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*jr)},(e,t)=>(t-e)/jr,e=>e.getUTCMinutes());rb.range;const ab=$n(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*iu-e.getMinutes()*jr)},(e,t)=>{e.setTime(+e+t*ru)},(e,t)=>(t-e)/ru,e=>e.getHours());ab.range;const ob=$n(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ru)},(e,t)=>(t-e)/ru,e=>e.getUTCHours());ob.range;const cu=$n(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*jr)/vu,e=>e.getDate()-1);cu.range;const Ds=$n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vu,e=>e.getUTCDate()-1);Ds.range;const FR=$n(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/vu,e=>Math.floor(e/vu));FR.range;function Ac(e){return $n(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*jr)/W_)}const Vd=Ac(0),Cy=Ac(1),WW=Ac(2),QW=Ac(3),ld=Ac(4),ZW=Ac(5),KW=Ac(6);Vd.range;Cy.range;WW.range;QW.range;ld.range;ZW.range;KW.range;function _c(e){return $n(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/W_)}const Wd=_c(0),Sy=_c(1),JW=_c(2),eQ=_c(3),cd=_c(4),tQ=_c(5),nQ=_c(6);Wd.range;Sy.range;JW.range;eQ.range;cd.range;tQ.range;nQ.range;const Cg=$n(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Cg.range;const Sg=$n(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Sg.range;const lo=$n(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());lo.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$n(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});lo.range;const co=$n(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());co.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:$n(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});co.range;function kR(e,t,n,i,r,a){const o=[[au,1,iu],[au,5,5*iu],[au,15,15*iu],[au,30,30*iu],[a,1,jr],[a,5,5*jr],[a,15,15*jr],[a,30,30*jr],[r,1,ru],[r,3,3*ru],[r,6,6*ru],[r,12,12*ru],[i,1,vu],[i,2,2*vu],[n,1,W_],[t,1,h9],[t,3,3*h9],[e,1,kD]];function u(l,d,h){const p=d<l;p&&([l,d]=[d,l]);const y=h&&typeof h.range=="function"?h:c(l,d,h),v=y?y.range(l,+d+1):[];return p?v.reverse():v}function c(l,d,h){const p=Math.abs(d-l)/h,y=Xd(([,,x])=>x).right(o,p);if(y===o.length)return e.every(Fs(l/kD,d/kD,h));if(y===0)return sd.every(Math.max(Fs(l,d,h),1));const[v,b]=o[p/o[y-1][2]<o[y][2]/p?y-1:y];return v.every(b)}return[u,c]}const[iQ,rQ]=kR(co,Sg,Wd,FR,ob,rb),[aQ,oQ]=kR(lo,Cg,Vd,cu,ab,ib),ii="year",Ji="quarter",vi="month",Fn="week",er="date",gi="day",fo="dayofyear",Ar="hours",_r="minutes",Qr="seconds",Aa="milliseconds",Q_=[ii,Ji,vi,Fn,er,gi,fo,Ar,_r,Qr,Aa],TD=Q_.reduce((e,t,n)=>(e[t]=1+n,e),{});function Z_(e){const t=Ie(e).slice(),n={};return t.length||me("Missing time unit."),t.forEach(r=>{Ue(TD,r)?n[r]=1:me(`Invalid time unit: ${r}.`)}),(n[Fn]||n[gi]?1:0)+(n[Ji]||n[vi]||n[er]?1:0)+(n[fo]?1:0)>1&&me(`Incompatible time units: ${e}`),t.sort((r,a)=>TD[r]-TD[a]),t}const uQ={[ii]:"%Y ",[Ji]:"Q%q ",[vi]:"%b ",[er]:"%d ",[Fn]:"W%U ",[gi]:"%a ",[fo]:"%j ",[Ar]:"%H:00",[_r]:"00:%M",[Qr]:":%S",[Aa]:".%L",[`${ii}-${vi}`]:"%Y-%m ",[`${ii}-${vi}-${er}`]:"%Y-%m-%d ",[`${Ar}-${_r}`]:"%H:%M"};function TR(e,t){const n=it({},uQ,t),i=Z_(e),r=i.length;let a="",o=0,u,c;for(o=0;o<r;)for(u=i.length;u>o;--u)if(c=i.slice(o,u).join("-"),n[c]!=null){a+=n[c],o=u;break}return a.trim()}const Ll=new Date;function K_(e){return Ll.setFullYear(e),Ll.setMonth(0),Ll.setDate(1),Ll.setHours(0,0,0,0),Ll}function $R(e){return OR(new Date(e))}function MR(e){return ES(new Date(e))}function OR(e){return cu.count(K_(e.getFullYear())-1,e)}function ES(e){return Vd.count(K_(e.getFullYear())-1,e)}function DS(e){return K_(e).getDay()}function sQ(e,t,n,i,r,a,o){if(0<=e&&e<100){const u=new Date(-1,t,n,i,r,a,o);return u.setFullYear(e),u}return new Date(e,t,n,i,r,a,o)}function NR(e){return BR(new Date(e))}function RR(e){return CS(new Date(e))}function BR(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ds.count(t-1,e)}function CS(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Wd.count(t-1,e)}function SS(e){return Ll.setTime(Date.UTC(e,0,1)),Ll.getUTCDay()}function lQ(e,t,n,i,r,a,o){if(0<=e&&e<100){const u=new Date(Date.UTC(-1,t,n,i,r,a,o));return u.setUTCFullYear(n.y),u}return new Date(Date.UTC(e,t,n,i,r,a,o))}function zR(e,t,n,i,r){const a=t||1,o=vt(e),u=(D,S,A)=>(A=A||D,cQ(n[A],i[A],D===o&&a,S)),c=new Date,l=Sa(e),d=l[ii]?u(ii):Di(2012),h=l[vi]?u(vi):l[Ji]?u(Ji):fs,p=l[Fn]&&l[gi]?u(gi,1,Fn+gi):l[Fn]?u(Fn,1):l[gi]?u(gi,1):l[er]?u(er,1):l[fo]?u(fo,1):jd,y=l[Ar]?u(Ar):fs,v=l[_r]?u(_r):fs,b=l[Qr]?u(Qr):fs,x=l[Aa]?u(Aa):fs;return function(D){c.setTime(+D);const S=d(c);return r(S,h(c),p(c,S),y(c),v(c),b(c),x(c))}}function cQ(e,t,n,i){const r=n<=1?e:i?(a,o)=>i+n*Math.floor((e(a,o)-i)/n):(a,o)=>n*Math.floor(e(a,o)/n);return t?(a,o)=>t(r(a,o),o):r}function fd(e,t,n){return t+e*7-(n+6)%7}const fQ={[ii]:e=>e.getFullYear(),[Ji]:e=>Math.floor(e.getMonth()/3),[vi]:e=>e.getMonth(),[er]:e=>e.getDate(),[Ar]:e=>e.getHours(),[_r]:e=>e.getMinutes(),[Qr]:e=>e.getSeconds(),[Aa]:e=>e.getMilliseconds(),[fo]:e=>OR(e),[Fn]:e=>ES(e),[Fn+gi]:(e,t)=>fd(ES(e),e.getDay(),DS(t)),[gi]:(e,t)=>fd(1,e.getDay(),DS(t))},dQ={[Ji]:e=>3*e,[Fn]:(e,t)=>fd(e,0,DS(t))};function LR(e,t){return zR(e,t||1,fQ,dQ,sQ)}const hQ={[ii]:e=>e.getUTCFullYear(),[Ji]:e=>Math.floor(e.getUTCMonth()/3),[vi]:e=>e.getUTCMonth(),[er]:e=>e.getUTCDate(),[Ar]:e=>e.getUTCHours(),[_r]:e=>e.getUTCMinutes(),[Qr]:e=>e.getUTCSeconds(),[Aa]:e=>e.getUTCMilliseconds(),[fo]:e=>BR(e),[Fn]:e=>CS(e),[gi]:(e,t)=>fd(1,e.getUTCDay(),SS(t)),[Fn+gi]:(e,t)=>fd(CS(e),e.getUTCDay(),SS(t))},gQ={[Ji]:e=>3*e,[Fn]:(e,t)=>fd(e,0,SS(t))};function IR(e,t){return zR(e,t||1,hQ,gQ,lQ)}const pQ={[ii]:lo,[Ji]:Cg.every(3),[vi]:Cg,[Fn]:Vd,[er]:cu,[gi]:cu,[fo]:cu,[Ar]:ab,[_r]:ib,[Qr]:au,[Aa]:sd},mQ={[ii]:co,[Ji]:Sg.every(3),[vi]:Sg,[Fn]:Wd,[er]:Ds,[gi]:Ds,[fo]:Ds,[Ar]:ob,[_r]:rb,[Qr]:au,[Aa]:sd};function Qd(e){return pQ[e]}function Zd(e){return mQ[e]}function UR(e,t,n){return e?e.offset(t,n):void 0}function PR(e,t,n){return UR(Qd(e),t,n)}function jR(e,t,n){return UR(Zd(e),t,n)}function qR(e,t,n,i){return e?e.range(t,n,i):void 0}function HR(e,t,n,i){return qR(Qd(e),t,n,i)}function GR(e,t,n,i){return qR(Zd(e),t,n,i)}const I0=1e3,U0=I0*60,P0=U0*60,ub=P0*24,yQ=ub*7,g9=ub*30,AS=ub*365,YR=[ii,vi,er,Ar,_r,Qr,Aa],j0=YR.slice(0,-1),q0=j0.slice(0,-1),H0=q0.slice(0,-1),vQ=H0.slice(0,-1),bQ=[ii,Fn],p9=[ii,vi],XR=[ii],p0=[[j0,1,I0],[j0,5,5*I0],[j0,15,15*I0],[j0,30,30*I0],[q0,1,U0],[q0,5,5*U0],[q0,15,15*U0],[q0,30,30*U0],[H0,1,P0],[H0,3,3*P0],[H0,6,6*P0],[H0,12,12*P0],[vQ,1,ub],[bQ,1,yQ],[p9,1,g9],[p9,3,3*g9],[XR,1,AS]];function VR(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(tp(t))/n;let r=Xd(u=>u[2]).right(p0,i),a,o;return r===p0.length?(a=XR,o=Fs(t[0]/AS,t[1]/AS,n)):r?(r=p0[i/p0[r-1][2]<p0[r][2]/i?r-1:r],a=r[0],o=r[1]):(a=YR,o=Math.max(Fs(t[0],t[1],n),1)),{units:a,step:o}}function $D(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function MD(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function m0(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function WR(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,o=e.shortDays,u=e.months,c=e.shortMonths,l=y0(r),d=v0(r),h=y0(a),p=v0(a),y=y0(o),v=v0(o),b=y0(u),x=v0(u),D=y0(c),S=v0(c),A={a:R,A:q,b:G,B:O,c:null,d:E9,e:E9,f:jQ,g:KQ,G:eZ,H:IQ,I:UQ,j:PQ,L:QR,m:qQ,M:HQ,p:Z,q:ee,Q:S9,s:A9,S:GQ,u:YQ,U:XQ,V:VQ,w:WQ,W:QQ,x:null,X:null,y:ZQ,Y:JQ,Z:tZ,"%":C9},w={a:X,A:Q,b:ne,B:ce,c:null,d:D9,e:D9,f:aZ,g:pZ,G:yZ,H:nZ,I:iZ,j:rZ,L:KR,m:oZ,M:uZ,p:Fe,q:Me,Q:S9,s:A9,S:sZ,u:lZ,U:cZ,V:fZ,w:dZ,W:hZ,x:null,X:null,y:gZ,Y:mZ,Z:vZ,"%":C9},_={a:P,A:L,b:H,B:I,c:U,d:b9,e:b9,f:RQ,g:v9,G:y9,H:x9,I:x9,j:$Q,L:NQ,m:TQ,M:MQ,p:N,q:kQ,Q:zQ,s:LQ,S:OQ,u:SQ,U:AQ,V:_Q,w:CQ,W:wQ,x:z,X:T,y:v9,Y:y9,Z:FQ,"%":BQ};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),w.x=k(n,w),w.X=k(i,w),w.c=k(t,w);function k(j,W){return function(te){var Y=[],le=-1,Te=0,oe=j.length,ge,Ae,K;for(te instanceof Date||(te=new Date(+te));++le<oe;)j.charCodeAt(le)===37&&(Y.push(j.slice(Te,le)),(Ae=m9[ge=j.charAt(++le)])!=null?ge=j.charAt(++le):Ae=ge==="e"?" ":"0",(K=W[ge])&&(ge=K(te,Ae)),Y.push(ge),Te=le+1);return Y.push(j.slice(Te,le)),Y.join("")}}function F(j,W){return function(te){var Y=m0(1900,void 0,1),le=M(Y,j,te+="",0),Te,oe;if(le!=te.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(W&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(Te=MD(m0(Y.y,0,1)),oe=Te.getUTCDay(),Te=oe>4||oe===0?Sy.ceil(Te):Sy(Te),Te=Ds.offset(Te,(Y.V-1)*7),Y.y=Te.getUTCFullYear(),Y.m=Te.getUTCMonth(),Y.d=Te.getUTCDate()+(Y.w+6)%7):(Te=$D(m0(Y.y,0,1)),oe=Te.getDay(),Te=oe>4||oe===0?Cy.ceil(Te):Cy(Te),Te=cu.offset(Te,(Y.V-1)*7),Y.y=Te.getFullYear(),Y.m=Te.getMonth(),Y.d=Te.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),oe="Z"in Y?MD(m0(Y.y,0,1)).getUTCDay():$D(m0(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(oe+5)%7:Y.w+Y.U*7-(oe+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,MD(Y)):$D(Y)}}function M(j,W,te,Y){for(var le=0,Te=W.length,oe=te.length,ge,Ae;le<Te;){if(Y>=oe)return-1;if(ge=W.charCodeAt(le++),ge===37){if(ge=W.charAt(le++),Ae=_[ge in m9?W.charAt(le++):ge],!Ae||(Y=Ae(j,te,Y))<0)return-1}else if(ge!=te.charCodeAt(Y++))return-1}return Y}function N(j,W,te){var Y=l.exec(W.slice(te));return Y?(j.p=d.get(Y[0].toLowerCase()),te+Y[0].length):-1}function P(j,W,te){var Y=y.exec(W.slice(te));return Y?(j.w=v.get(Y[0].toLowerCase()),te+Y[0].length):-1}function L(j,W,te){var Y=h.exec(W.slice(te));return Y?(j.w=p.get(Y[0].toLowerCase()),te+Y[0].length):-1}function H(j,W,te){var Y=D.exec(W.slice(te));return Y?(j.m=S.get(Y[0].toLowerCase()),te+Y[0].length):-1}function I(j,W,te){var Y=b.exec(W.slice(te));return Y?(j.m=x.get(Y[0].toLowerCase()),te+Y[0].length):-1}function U(j,W,te){return M(j,t,W,te)}function z(j,W,te){return M(j,n,W,te)}function T(j,W,te){return M(j,i,W,te)}function R(j){return o[j.getDay()]}function q(j){return a[j.getDay()]}function G(j){return c[j.getMonth()]}function O(j){return u[j.getMonth()]}function Z(j){return r[+(j.getHours()>=12)]}function ee(j){return 1+~~(j.getMonth()/3)}function X(j){return o[j.getUTCDay()]}function Q(j){return a[j.getUTCDay()]}function ne(j){return c[j.getUTCMonth()]}function ce(j){return u[j.getUTCMonth()]}function Fe(j){return r[+(j.getUTCHours()>=12)]}function Me(j){return 1+~~(j.getUTCMonth()/3)}return{format:function(j){var W=k(j+="",A);return W.toString=function(){return j},W},parse:function(j){var W=F(j+="",!1);return W.toString=function(){return j},W},utcFormat:function(j){var W=k(j+="",w);return W.toString=function(){return j},W},utcParse:function(j){var W=F(j+="",!0);return W.toString=function(){return j},W}}}var m9={"-":"",_:" ",0:"0"},Yn=/^\s*\d+/,xQ=/^%/,EQ=/[\\^$*+?|[\]().{}]/g;function St(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function DQ(e){return e.replace(EQ,"\\$&")}function y0(e){return new RegExp("^(?:"+e.map(DQ).join("|")+")","i")}function v0(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function CQ(e,t,n){var i=Yn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function SQ(e,t,n){var i=Yn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function AQ(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function _Q(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function wQ(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function y9(e,t,n){var i=Yn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function v9(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function FQ(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function kQ(e,t,n){var i=Yn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function TQ(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function b9(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function $Q(e,t,n){var i=Yn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function x9(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function MQ(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function OQ(e,t,n){var i=Yn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function NQ(e,t,n){var i=Yn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function RQ(e,t,n){var i=Yn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function BQ(e,t,n){var i=xQ.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function zQ(e,t,n){var i=Yn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function LQ(e,t,n){var i=Yn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function E9(e,t){return St(e.getDate(),t,2)}function IQ(e,t){return St(e.getHours(),t,2)}function UQ(e,t){return St(e.getHours()%12||12,t,2)}function PQ(e,t){return St(1+cu.count(lo(e),e),t,3)}function QR(e,t){return St(e.getMilliseconds(),t,3)}function jQ(e,t){return QR(e,t)+"000"}function qQ(e,t){return St(e.getMonth()+1,t,2)}function HQ(e,t){return St(e.getMinutes(),t,2)}function GQ(e,t){return St(e.getSeconds(),t,2)}function YQ(e){var t=e.getDay();return t===0?7:t}function XQ(e,t){return St(Vd.count(lo(e)-1,e),t,2)}function ZR(e){var t=e.getDay();return t>=4||t===0?ld(e):ld.ceil(e)}function VQ(e,t){return e=ZR(e),St(ld.count(lo(e),e)+(lo(e).getDay()===4),t,2)}function WQ(e){return e.getDay()}function QQ(e,t){return St(Cy.count(lo(e)-1,e),t,2)}function ZQ(e,t){return St(e.getFullYear()%100,t,2)}function KQ(e,t){return e=ZR(e),St(e.getFullYear()%100,t,2)}function JQ(e,t){return St(e.getFullYear()%1e4,t,4)}function eZ(e,t){var n=e.getDay();return e=n>=4||n===0?ld(e):ld.ceil(e),St(e.getFullYear()%1e4,t,4)}function tZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+St(t/60|0,"0",2)+St(t%60,"0",2)}function D9(e,t){return St(e.getUTCDate(),t,2)}function nZ(e,t){return St(e.getUTCHours(),t,2)}function iZ(e,t){return St(e.getUTCHours()%12||12,t,2)}function rZ(e,t){return St(1+Ds.count(co(e),e),t,3)}function KR(e,t){return St(e.getUTCMilliseconds(),t,3)}function aZ(e,t){return KR(e,t)+"000"}function oZ(e,t){return St(e.getUTCMonth()+1,t,2)}function uZ(e,t){return St(e.getUTCMinutes(),t,2)}function sZ(e,t){return St(e.getUTCSeconds(),t,2)}function lZ(e){var t=e.getUTCDay();return t===0?7:t}function cZ(e,t){return St(Wd.count(co(e)-1,e),t,2)}function JR(e){var t=e.getUTCDay();return t>=4||t===0?cd(e):cd.ceil(e)}function fZ(e,t){return e=JR(e),St(cd.count(co(e),e)+(co(e).getUTCDay()===4),t,2)}function dZ(e){return e.getUTCDay()}function hZ(e,t){return St(Sy.count(co(e)-1,e),t,2)}function gZ(e,t){return St(e.getUTCFullYear()%100,t,2)}function pZ(e,t){return e=JR(e),St(e.getUTCFullYear()%100,t,2)}function mZ(e,t){return St(e.getUTCFullYear()%1e4,t,4)}function yZ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?cd(e):cd.ceil(e),St(e.getUTCFullYear()%1e4,t,4)}function vZ(){return"+0000"}function C9(){return"%"}function S9(e){return+e}function A9(e){return Math.floor(+e/1e3)}var kf,J_,eB,ew,tB;bZ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function bZ(e){return kf=WR(e),J_=kf.format,eB=kf.parse,ew=kf.utcFormat,tB=kf.utcParse,kf}function G0(e){const t={};return n=>t[n]||(t[n]=e(n))}function xZ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=EZ(i,r);const o=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+o}}function EZ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function nB(e){const t=G0(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=ic(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return xZ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,o){o=ic(o??",f");const u=Fs(i,r,a),c=Math.max(Math.abs(i),Math.abs(r));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=_R(u,c))||(o.precision=l),n(o,c);case"":case"e":case"g":case"p":case"r":{isNaN(l=wR(u,c))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=AR(u))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let _S;iB();function iB(){return _S=nB({format:nb,formatPrefix:V_})}function rB(e){return nB(SR(e))}function Ay(e){return arguments.length?_S=rB(e):_S}function _9(e,t,n){n=n||{},Le(n)||me(`Invalid time multi-format specifier: ${n}`);const i=t(Qr),r=t(_r),a=t(Ar),o=t(er),u=t(Fn),c=t(vi),l=t(Ji),d=t(ii),h=e(n[Aa]||".%L"),p=e(n[Qr]||":%S"),y=e(n[_r]||"%I:%M"),v=e(n[Ar]||"%I %p"),b=e(n[er]||n[gi]||"%a %d"),x=e(n[Fn]||"%b %d"),D=e(n[vi]||"%B"),S=e(n[Ji]||"%B"),A=e(n[ii]||"%Y");return w=>(i(w)<w?h:r(w)<w?p:a(w)<w?y:o(w)<w?v:c(w)<w?u(w)<w?b:x:d(w)<w?l(w)<w?D:S:A)(w)}function aB(e){const t=G0(e.format),n=G0(e.utcFormat);return{timeFormat:i=>ze(i)?t(i):_9(t,Qd,i),utcFormat:i=>ze(i)?n(i):_9(n,Zd,i),timeParse:G0(e.parse),utcParse:G0(e.utcParse)}}let wS;oB();function oB(){return wS=aB({format:J_,parse:eB,utcFormat:ew,utcParse:tB})}function uB(e){return aB(WR(e))}function Ag(e){return arguments.length?wS=uB(e):wS}const FS=(e,t)=>it({},e,t);function sB(e,t){const n=e?rB(e):Ay(),i=t?uB(t):Ag();return FS(n,i)}function tw(e,t){const n=arguments.length;return n&&n!==2&&me("defaultLocale expects either zero or two arguments."),n?FS(Ay(e),Ag(t)):FS(Ay(),Ag())}function DZ(){return iB(),oB(),tw()}const CZ=/^(data:|([A-Za-z]+:)?\/\/)/,SZ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,AZ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,w9="file://";function _Z(e,t){return n=>({options:n||{},sanitize:FZ,load:wZ,fileAccess:!1,file:kZ(),http:$Z(e)})}async function wZ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function FZ(e,t){t=it({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,o;const u=SZ.test(e.replace(AZ,""));(e==null||typeof e!="string"||!u)&&me("Sanitize failure, invalid URI: "+Oe(e));const c=CZ.test(e);return(o=t.baseURL)&&!c&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),a=(r=e.startsWith(w9))||t.mode==="file"||t.mode!=="http"&&!c&&n,r?e=e.slice(w9.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function kZ(e){return TZ}async function TZ(){me("No file system access.")}function $Z(e){return e?async function(t,n){const i=it({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?rt(a[r])?a[r]():a.text():me(a.status+""+a.statusText)}:MZ}async function MZ(){me("No HTTP fetch method available.")}const OZ=e=>e!=null&&e===e,NZ=e=>e==="true"||e==="false"||e===!0||e===!1,RZ=e=>!Number.isNaN(Date.parse(e)),lB=e=>!Number.isNaN(+e)&&!(e instanceof Date),BZ=e=>lB(e)&&Number.isInteger(+e),kS={boolean:H_,integer:pi,number:pi,date:G_,string:Y_,unknown:Ei},u1=[NZ,BZ,lB,RZ],zZ=["boolean","integer","number","date"];function cB(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=u1.length,r=u1.map((a,o)=>o+1);for(let a=0,o=0,u,c;a<n;++a)for(c=t?e[a][t]:e[a],u=0;u<i;++u)if(r[u]&&OZ(c)&&!u1[u](c)&&(r[u]=0,++o,o===u1.length))return"string";return zZ[r.reduce((a,o)=>a===0?o:a,0)-1]}function fB(e,t){return t.reduce((n,i)=>(n[i]=cB(e,i),n),{})}function F9(e){const t=function(n,i){const r={delimiter:e};return nw(n,i?it(i,r):r)};return t.responseType="text",t}function nw(e,t){return t.header&&(e=t.header.map(Oe).join(t.delimiter)+`
`+e),yW(t.delimiter).parse(e+"")}nw.responseType="text";function LZ(e){return typeof Buffer=="function"&&rt(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function iw(e,t){const n=t&&t.property?Vr(t.property):Ei;return Le(e)&&!LZ(e)?IZ(n(e),t):n(JSON.parse(e))}iw.responseType="json";function IZ(e,t){return!be(e)&&rR(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const UZ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function dB(e,t){let n,i,r,a;return e=iw(e,t),t&&t.feature?(n=EW,r=t.feature):t&&t.mesh?(n=CW,r=t.mesh,a=UZ[t.filter]):me("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):me("Invalid TopoJSON object: "+r),i&&i.features||[i]}dB.responseType="json";const Y1={dsv:nw,csv:F9(","),tsv:F9("	"),json:iw,topojson:dB};function rw(e,t){return arguments.length>1?(Y1[e]=t,this):Ue(Y1,e)?Y1[e]:null}function hB(e){const t=rw(e);return t&&t.responseType||"text"}function gB(e,t,n,i){t=t||{};const r=rw(t.type||"json");return r||me("Unknown data format type: "+t.type),e=r(e,t),t.parse&&PZ(e,t.parse,n,i),Ue(e,"columns")&&delete e.columns,e}function PZ(e,t,n,i){if(!e.length)return;const r=Ag();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),o,u,c,l,d,h;t==="auto"&&(t=fB(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,x;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),x=b[1],(x[0]==="'"&&x[x.length-1]==="'"||x[0]==='"'&&x[x.length-1]==='"')&&(x=x.slice(1,-1)),(b[0]==="utc"?i:n)(x);if(!kS[v])throw Error("Illegal format pattern: "+y+":"+v);return kS[v]});for(c=0,d=e.length,h=a.length;c<d;++c)for(o=e[c],l=0;l<h;++l)u=a[l],o[u]=p[l](o[u])}const sb=_Z(typeof fetch<"u"&&fetch);function lb(e){const t=e||Ei,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const o=n.indexOf(r);o>=0&&n.splice(o,1)}return n},n}async function X1(e,t){try{await t(e)}catch(n){e.error(n)}}const pB=Symbol("vega_id");let jZ=1;function cb(e){return!!(e&&Ye(e))}function Ye(e){return e[pB]}function mB(e,t){return e[pB]=t,e}function wt(e){const t=e===Object(e)?e:{data:e};return Ye(t)?t:mB(t,jZ++)}function aw(e){return fb(e,wt({}))}function fb(e,t){for(const n in e)t[n]=e[n];return t}function yB(e,t){return mB(t,Ye(e))}function wc(e,t){return e?t?(n,i)=>e(n,i)||Ye(t(n))-Ye(t(i)):(n,i)=>e(n,i)||Ye(n)-Ye(i):null}function vB(e){return e&&e.constructor===Fc}function Fc(){const e=[],t=[],n=[],i=[],r=[];let a=null,o=!1;return{constructor:Fc,insert(u){const c=Ie(u),l=c.length;for(let d=0;d<l;++d)e.push(c[d]);return this},remove(u){const c=rt(u)?i:t,l=Ie(u),d=l.length;for(let h=0;h<d;++h)c.push(l[h]);return this},modify(u,c,l){const d={field:c,value:Di(l)};return rt(u)?(d.filter=u,r.push(d)):(d.tuple=u,n.push(d)),this},encode(u,c){return rt(u)?r.push({filter:u,field:c}):n.push({tuple:u,field:c}),this},clean(u){return a=u,this},reflow(){return o=!0,this},pulse(u,c){const l={},d={};let h,p,y,v,b,x;for(h=0,p=c.length;h<p;++h)l[Ye(c[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],l[Ye(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],c.forEach(S=>{v(S)&&(l[Ye(S)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],x=Ye(b),l[x]?l[x]=1:u.add.push(wt(e[h]));for(h=0,p=c.length;h<p;++h)b=c[h],l[Ye(b)]<0&&u.rem.push(b);function D(S,A,w){w?S[A]=w(S):u.encode=A,o||(d[Ye(S)]=S)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,x=l[Ye(b)],x>0&&(D(b,v,y.value),u.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,c.forEach(S=>{v(S)&&l[Ye(S)]>0&&D(S,y.field,y.value)}),u.modifies(y.field);if(o)u.mod=t.length||i.length?c.filter(S=>l[Ye(S)]>0):c.slice();else for(x in d)u.mod.push(d[x]);return(a||a==null&&(t.length||i.length))&&u.clean(!0),u}}}const V1="_:mod:_";function db(){Object.defineProperty(this,V1,{writable:!0,value:{}})}db.prototype={set(e,t,n,i){const r=this,a=r[e],o=r[V1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,o[t+":"+e]=-1,o[e]=-1):(a!==n||i)&&(r[e]=n,o[e]=be(n)?1+n.length:-1),r},modified(e,t){const n=this[V1];if(arguments.length){if(be(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[V1]={},this}};let qZ=0;const HZ="pulse",GZ=new db,YZ=1,XZ=2;function jt(e,t,n,i){this.id=++qZ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function k9(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}jt.prototype={targets(){return this._targets||(this._targets=lb(ep))},set(e){return this.value!==e?(this.value=e,1):0},skip:k9(YZ),modified:k9(XZ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new db,r=this._argops=this._argops||[],a=[];let o,u,c,l;const d=(h,p,y)=>{y instanceof jt?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(o in e)if(u=e[o],o===HZ)Ie(u).forEach(h=>{h instanceof jt?h!==this&&(h.targets().add(this),a.push(h)):me("Pulse parameters must be operator instances.")}),this.source=u;else if(be(u))for(i.set(o,-1,Array(c=u.length)),l=0;l<c;++l)d(o,l,u[l]);else d(o,-1,u);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||GZ,n=this._argops;let i,r,a,o;if(n){const u=n.length;for(r=0;r<u;++r)i=n[r],a=i.op,o=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,o);if(n.initonly){for(r=0;r<u;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function VZ(e,t,n,i){let r=1,a;return e instanceof jt?a=e:e&&e.prototype instanceof jt?a=new e:rt(e)?a=new jt(null,e):(r=0,a=new jt(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function WZ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let QZ=0;function hb(e,t,n){this.id=++QZ,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function rs(e,t,n){return new hb(e,t,n)}hb.prototype={_filter:Wr,_apply:Ei,targets(){return this._targets||(this._targets=lb(ep))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=rs(e);return this.targets().add(t),t},apply(e){const t=rs(null,e);return this.targets().add(t),t},merge(){const e=rs();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=rs();return this.targets().add(rs(null,null,P_(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(rs(null,null,()=>n=!0)),t.targets().add(rs(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Wr,this._targets=null}};function ZZ(e,t,n,i){const r=this,a=rs(n,i),o=function(l){l.dataflow=r;try{a.receive(l)}catch(d){r.error(d)}finally{r.run()}};let u;typeof e=="string"&&typeof document<"u"?u=document.querySelectorAll(e):u=Ie(e);const c=u.length;for(let l=0;l<c;++l)u[l].addEventListener(t,o);return a}function KZ(e,t){const n=this.locale();return gB(e,t,n.timeParse,n.utcParse)}function JZ(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function eK(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:hB(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function tK(e,t,n){const i=this,r=i._pending||nK(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Wr).insert(a.data||[])),r.done(),a}function nK(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const iK={skip:!0};function rK(e,t,n,i,r){return(e instanceof jt?oK:aK)(this,e,t,n,i,r),this}function aK(e,t,n,i,r,a){const o=it({},a,iK);let u,c;rt(n)||(n=Di(n)),i===void 0?u=l=>e.touch(n(l)):rt(i)?(c=new jt(null,i,r,!1),u=l=>{c.evaluate(l);const d=n(l),h=c.value;vB(h)?e.pulse(d,h,a):e.update(d,h,o)}):u=l=>e.update(n(l),i,o),t.apply(u)}function oK(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const o=a||{},u=new jt(null,uK(n,i),r,!1);u.modified(o.force),u.rank=t.rank,t.targets().add(u),n&&(u.skip(!0),u.value=n.value,u.targets().add(n),e.connect(n,[u]))}}function uK(e,t){return t=rt(t)?t:Di(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function sK(e){e.rank=++this._rank}function lK(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&me("Cycle detected in dataflow graph.")}const _y={},Va=1,us=2,Zo=4,cK=Va|us,T9=Va|Zo,Tf=Va|us|Zo,$9=8,b0=16,M9=32,O9=64;function Cs(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function OD(e,t){const n=[];return os(e,t,i=>n.push(i)),n}function N9(e,t){const n={};return e.visit(t,i=>{n[Ye(i)]=1}),i=>n[Ye(i)]?null:i}function s1(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}Cs.prototype={StopPropagation:_y,ADD:Va,REM:us,MOD:Zo,ADD_REM:cK,ADD_MOD:T9,ALL:Tf,REFLOW:$9,SOURCE:b0,NO_SOURCE:M9,NO_FIELDS:O9,fork(e){return new Cs(this.dataflow).init(this,e)},clone(){const e=this.fork(Tf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Tf|b0)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new Cs(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&O9)&&(n.fields=e.fields),t&Va?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&us?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Zo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&M9?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Tf;return t&Va&&this.add.length||t&us&&this.rem.length||t&Zo&&this.mod.length},reflow(e){if(e)return this.fork(Tf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Zo,N9(this,Va))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return be(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?be(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Va&&(n.addF=s1(n.addF,t)),e&us&&(n.remF=s1(n.remF,t)),e&Zo&&(n.modF=s1(n.modF,t)),e&b0&&(n.srcF=s1(n.srcF,t)),n},materialize(e){e=e||Tf;const t=this;return e&Va&&t.addF&&(t.add=OD(t.add,t.addF),t.addF=null),e&us&&t.remF&&(t.rem=OD(t.rem,t.remF),t.remF=null),e&Zo&&t.modF&&(t.mod=OD(t.mod,t.modF),t.modF=null),e&b0&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&b0)return os(n.source,n.srcF,i),n;e&Va&&os(n.add,n.addF,i),e&us&&os(n.rem,n.remF,i),e&Zo&&os(n.mod,n.modF,i);const r=n.source;if(e&$9&&r){const a=n.add.length+n.mod.length;a===r.length||(a?os(r,N9(n,T9),i):os(r,n.srcF,i))}return n}};function ow(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const u=r.fields||(r.fields={});for(const c in o.fields)u[c]=1}o.changed(r.ADD)&&(a|=r.ADD),o.changed(r.REM)&&(a|=r.REM),o.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}Re(ow,Cs,{fork(e){const t=new Cs(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?be(e)?e.some(i=>n[i]):n[e]:0},filter(){me("MultiPulse does not support filtering.")},materialize(){me("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function fK(e,t,n){const i=this,r=[];if(i._pulse)return bB(i);if(i._pending&&await i._pending,t&&await X1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new Cs(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=lb(ep);let o=0,u,c,l;try{for(;i._heap.size()>0;){if(u=i._heap.pop(),u.rank!==u.qrank){i._enqueue(u,!0);continue}c=u.run(i._getPulse(u,e)),c.then?c=await c:c.async&&(r.push(c.async),c=_y),c!==_y&&u._targets&&u._targets.forEach(d=>i._enqueue(d)),++o}}catch(d){i._heap.clear(),l=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${o} operators`),l&&(i._postrun=[],i.error(l)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await X1(i,d[h].callback)}return n&&await X1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function dK(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function hK(e,t,n){return this._pulse?bB(this):(this.evaluate(e,t,n),this)}function gK(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function bB(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function pK(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function mK(e,t){const n=e.source,i=this._clock;return n&&be(n)?new ow(this,i,n.map(r=>r.pulse),t):this._input[e.id]||yK(this._pulse,n&&n.pulse)}function yK(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==_y&&(e.source=t.source),e)}const uw={skip:!1,force:!1};function vK(e,t){const n=t||uw;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function bK(e,t,n){const i=n||uw;return(e.set(t)||i.force)&&this.touch(e,i),this}function xK(e,t,n){this.touch(e,n||uw);const i=new Cs(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function EK(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),xB(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,DK(t,0,e)):i=n,i}}}function xB(e,t,n,i){let r,a;const o=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(o,r)<0){e[n]=r,n=a;continue}break}return e[n]=o}function DK(e,t,n){const i=t,r=e.length,a=e[t];let o=(t<<1)+1,u;for(;o<r;)u=o+1,u<r&&n(e[o],e[u])>=0&&(o=u),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=a,xB(e,i,t,n)}function Zf(){this.logger(B_()),this.logLevel(N_),this._clock=0,this._rank=0,this._locale=tw();try{this._loader=sb()}catch{}this._touched=lb(ep),this._input={},this._pulse=null,this._heap=EK((e,t)=>e.qrank-t.qrank),this._postrun=[]}function x0(e){return function(){return this._log[e].apply(this,arguments)}}Zf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:x0("error"),warn:x0("warn"),info:x0("info"),debug:x0("debug"),logLevel:x0("level"),cleanThreshold:1e4,add:VZ,connect:WZ,rank:sK,rerank:lK,pulse:xK,touch:vK,update:bK,changeset:Fc,ingest:JZ,parse:KZ,preload:tK,request:eK,events:ZZ,on:rK,evaluate:fK,run:hK,runAsync:dK,runAfter:gK,_enqueue:pK,_getPulse:mK};function de(e,t){jt.call(this,e,null,t)}Re(de,jt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const dd={};function EB(e){const t=DB(e);return t&&t.Definition||null}function DB(e){return e=e&&e.toLowerCase(),Ue(dd,e)?dd[e]:null}function*CB(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function sw(e,t,n){const i=Float64Array.from(CB(e,n));return i.sort(lu),t.map(r=>bR(i,r))}function lw(e,t){return sw(e,[.25,.5,.75],t)}function cw(e,t){const n=e.length,i=$W(e,t),r=lw(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function SB(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],o=e.extent[1],u,c,l,d,h,p;const y=e.span||o-a||Math.abs(a)||1;if(e.step)u=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);u=e.steps[Math.max(0,h-1)]}else{for(c=Math.ceil(Math.log(t)/i),l=e.minstep||0,u=Math.max(l,Math.pow(n,Math.round(Math.log(y)/i)-c));Math.ceil(y/u)>t;)u*=n;for(h=0,p=r.length;h<p;++h)d=u/r[h],d>=l&&y/d<=t&&(u=d)}d=Math.log(u);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/u+b)*u,a=a<d?d-u:d,o=Math.ceil(o/u)*u),{start:a,stop:o===a?a+u:o,step:u}}var Zr=Math.random;function CK(e){Zr=e}function AB(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(CB(e,i)),a=r.length,o=t;let u,c,l,d;for(l=0,d=Array(o);l<o;++l){for(u=0,c=0;c<a;++c)u+=r[~~(Zr()*a)];d[l]=u/a}return d.sort(lu),[xS(d,n/2),xS(d,1-n/2)]}function _B(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let o=0,u=1,c=i(e[0]),l=c,d=c+t,h;for(;u<r;++u){if(h=i(e[u]),h>=d){for(l=(c+l)/2;o<u;++o)a[o]=l;d=h+t,c=h}l=h}for(l=(c+l)/2;o<u;++o)a[o]=l;return n?SK(a,t+t/4):a}function SK(e,t){const n=e.length;let i=0,r=1,a,o;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(o=r+(i+a-r-r>>1);o<r;)e[o++]=e[r];for(;o>r;)e[o--]=e[i]}i=r,r=a}return e}function AK(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function _K(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(o){return arguments.length?(n=o||0,r=i-n,a):n},max(o){return arguments.length?(i=o||0,r=i-n,a):i},sample(){return n+Math.floor(r*Zr())},pdf(o){return o===Math.floor(o)&&o>=n&&o<i?1/r:0},cdf(o){const u=Math.floor(o);return u<n?0:u>=i?1:(u-n+1)/r},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*r):NaN}};return a.min(e).max(t)}const wB=Math.sqrt(2*Math.PI),wK=Math.SQRT2;let E0=NaN;function gb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(E0===E0)n=E0,E0=NaN;else{do n=Zr()*2-1,i=Zr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,E0=i*a}return e+n*t}function fw(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*wB)}function pb(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const o=Math.exp(-r*r/2);let u;r<7.07106781186547?(u=.0352624965998911*r+.700383064443688,u=u*r+6.37396220353165,u=u*r+33.912866078383,u=u*r+112.079291497871,u=u*r+221.213596169931,u=u*r+220.206867912376,a=o*u,u=.0883883476483184*r+1.75566716318264,u=u*r+16.064177579207,u=u*r+86.7807322029461,u=u*r+296.564248779674,u=u*r+637.333633378831,u=u*r+793.826512519948,u=u*r+440.413735824752,a=a/u):(u=r+.65,u=r+4/u,u=r+3/u,u=r+2/u,u=r+1/u,a=o/u/2.506628274631)}return i>0?1-a:a}function mb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*wK*FK(2*e-1)}function FK(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function dw(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>gb(n,i),pdf:a=>fw(a,n,i),cdf:a=>pb(a,n,i),icdf:a=>mb(a,n,i)};return r.mean(e).stdev(t)}function hw(e,t){const n=dw();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=cw(e)),r):t},sample(){return e[~~(Zr()*i)]+t*n.sample()},pdf(a){let o=0,u=0;for(;u<i;++u)o+=n.pdf((a-e[u])/t);return o/t/i},cdf(a){let o=0,u=0;for(;u<i;++u)o+=n.cdf((a-e[u])/t);return o/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function gw(e,t){return e=e||0,t=t??1,Math.exp(e+gb()*t)}function pw(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*wB*e)}function mw(e,t,n){return pb(Math.log(e),t,n)}function yw(e,t,n){return Math.exp(mb(e,t,n))}function FB(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>gw(n,i),pdf:a=>pw(a,n,i),cdf:a=>mw(a,n,i),icdf:a=>yw(a,n,i)};return r.mean(e).stdev(t)}function kB(e,t){let n=0,i;function r(o){const u=[];let c=0,l;for(l=0;l<n;++l)c+=u[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)u[l]/=c;return u}const a={weights(o){return arguments.length?(i=r(t=o||[]),a):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),a.weights(t)):e},sample(){const o=Zr();let u=e[n-1],c=i[0],l=0;for(;l<n-1;c+=i[++l])if(o<c){u=e[l];break}return u.sample()},pdf(o){let u=0,c=0;for(;c<n;++c)u+=i[c]*e[c].pdf(o);return u},cdf(o){let u=0,c=0;for(;c<n;++c)u+=i[c]*e[c].cdf(o);return u},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function vw(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Zr()}function bw(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function xw(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Ew(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function TB(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>vw(n,i),pdf:a=>bw(a,n,i),cdf:a=>xw(a,n,i),icdf:a=>Ew(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function Dw(e,t,n){let i=0,r=0;for(const a of e){const o=n(a);t(a)==null||o==null||isNaN(o)||(i+=(o-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function np(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function yb(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),o=new Float64Array(r);let u=0,c=0,l=0,d,h,p;for(p of e)a[u]=d=+t(p),o[u]=h=+n(p),++u,c+=(d-c)/u,l+=(h-l)/u;for(u=0;u<r;++u)a[u]-=c,o[u]-=l;return[a,o,c,l]}function ip(e,t,n,i){let r=-1,a,o;for(const u of e)a=t(u),o=n(u),a!=null&&(a=+a)>=a&&o!=null&&(o=+o)>=o&&i(a,o,++r)}function Kd(e,t,n,i,r){let a=0,o=0;return ip(e,t,n,(u,c)=>{const l=c-r(u),d=c-i;a+=l*l,o+=d*d}),1-a/o}function Cw(e,t,n){let i=0,r=0,a=0,o=0,u=0;ip(e,t,n,(d,h)=>{++u,i+=(d-i)/u,r+=(h-r)/u,a+=(d*h-a)/u,o+=(d*d-o)/u});const c=np(i,r,a,o),l=d=>c[0]+c[1]*d;return{coef:c,predict:l,rSquared:Kd(e,t,n,r,l)}}function $B(e,t,n){let i=0,r=0,a=0,o=0,u=0;ip(e,t,n,(d,h)=>{++u,d=Math.log(d),i+=(d-i)/u,r+=(h-r)/u,a+=(d*h-a)/u,o+=(d*d-o)/u});const c=np(i,r,a,o),l=d=>c[0]+c[1]*Math.log(d);return{coef:c,predict:l,rSquared:Kd(e,t,n,r,l)}}function MB(e,t,n){const[i,r,a,o]=yb(e,t,n);let u=0,c=0,l=0,d=0,h=0,p,y,v;ip(e,t,n,(S,A)=>{p=i[h++],y=Math.log(A),v=p*A,u+=(A*y-u)/h,c+=(v-c)/h,l+=(v*y-l)/h,d+=(p*v-d)/h});const[b,x]=np(c/o,u/o,l/o,d/o),D=S=>Math.exp(b+x*(S-a));return{coef:[Math.exp(b-x*a),x],predict:D,rSquared:Kd(e,t,n,o,D)}}function OB(e,t,n){let i=0,r=0,a=0,o=0,u=0,c=0;ip(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++c,i+=(y-i)/c,r+=(v-r)/c,a+=(y*v-a)/c,o+=(y*y-o)/c,u+=(p-u)/c});const l=np(i,r,a,o),d=h=>l[0]*Math.pow(h,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:d,rSquared:Kd(e,t,n,u,d)}}function Sw(e,t,n){const[i,r,a,o]=yb(e,t,n),u=i.length;let c=0,l=0,d=0,h=0,p=0,y,v,b,x;for(y=0;y<u;)v=i[y],b=r[y++],x=v*v,c+=(x-c)/y,l+=(x*v-l)/y,d+=(x*x-d)/y,h+=(v*b-h)/y,p+=(x*b-p)/y;const D=d-c*c,S=c*D-l*l,A=(p*c-h*l)/S,w=(h*D-p*l)/S,_=-A*c,k=F=>(F=F-a,A*F*F+w*F+_+o);return{coef:[_-w*a+A*a*a+o,w-2*A*a,A],predict:k,rSquared:Kd(e,t,n,o,k)}}function NB(e,t,n,i){if(i===0)return Dw(e,t,n);if(i===1)return Cw(e,t,n);if(i===2)return Sw(e,t,n);const[r,a,o,u]=yb(e,t,n),c=r.length,l=[],d=[],h=i+1;let p,y,v,b,x;for(p=0;p<h;++p){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p)*a[v];for(l.push(b),x=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<c;++v)b+=Math.pow(r[v],p+y);x[y]=b}d.push(x)}d.push(l);const D=TK(d),S=A=>{A-=o;let w=u+D[0]+D[1]*A+D[2]*A*A;for(p=3;p<h;++p)w+=D[p]*Math.pow(A,p);return w};return{coef:kK(h,D,-o,u),predict:S,rSquared:Kd(e,t,n,u,S)}}function kK(e,t,n,i){const r=Array(e);let a,o,u,c;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(u=t[a],c=1,r[a]+=u,o=1;o<=a;++o)c*=(a+1-o)/o,r[a-o]+=u*Math.pow(n,o)*c;return r[0]+=i,r}function TK(e){const t=e.length-1,n=[];let i,r,a,o,u;for(i=0;i<t;++i){for(o=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][o])&&(o=r);for(a=i;a<t+1;++a)u=e[a][i],e[a][i]=e[a][o],e[a][o]=u;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(u=0,a=r+1;a<t;++a)u+=e[a][r]*n[a];n[r]=(e[t][r]-u)/e[r][r]}return n}const R9=2,B9=1e-12;function RB(e,t,n,i){const[r,a,o,u]=yb(e,t,n,!0),c=r.length,l=Math.max(2,~~(i*c)),d=new Float64Array(c),h=new Float64Array(c),p=new Float64Array(c).fill(1);for(let y=-1;++y<=R9;){const v=[0,l-1];for(let x=0;x<c;++x){const D=r[x],S=v[0],A=v[1],w=D-r[S]>r[A]-D?S:A;let _=0,k=0,F=0,M=0,N=0;const P=1/Math.abs(r[w]-D||1);for(let I=S;I<=A;++I){const U=r[I],z=a[I],T=$K(Math.abs(D-U)*P)*p[I],R=U*T;_+=T,k+=R,F+=z*T,M+=z*R,N+=U*R}const[L,H]=np(k/_,F/_,M/_,N/_);d[x]=L+H*D,h[x]=Math.abs(a[x]-d[x]),MK(r,x+1,v)}if(y===R9)break;const b=xR(h);if(Math.abs(b)<B9)break;for(let x=0,D,S;x<c;++x)D=h[x]/(6*b),p[x]=D>=1?B9:(S=1-D*D)*S}return OK(r,d,o,u)}function $K(e){return(e=1-e*e*e)*e*e}function MK(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function OK(e,t,n,i){const r=e.length,a=[];let o=0,u=0,c=[],l;for(;o<r;++o)l=e[o]+n,c[0]===l?c[1]+=(t[o]-c[1])/++u:(u=0,c[1]+=i,c=[l,t[o]],a.push(c));return c[1]+=i,a}const NK=.5*Math.PI/180;function vb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],o=t[1],u=o-a,c=u/i,l=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)l.push(r(a+b/n*u));return l.push(r(o)),l}else{d.push(r(o));for(let b=n;--b>0;)d.push(r(a+b/n*u))}let h=l[0],p=d[d.length-1];const y=1/u,v=RK(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=c&&BK(h,b,p,y,v)>NK?d.push(b):(h=p,l.push(p),d.pop()),p=d[d.length-1]}return l}function RK(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const o=t[a][1];o<n&&(n=o),o>i&&(i=o)}return 1/(i-n)}function BK(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),o=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-o)}function zK(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function TS(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:zK(e)}function BB(e,t,n){return n||e+(t?"_"+t:"")}const ND=()=>{},LK={init:ND,add:ND,rem:ND,idx:0},_g={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},rp=Object.keys(_g).filter(e=>e!=="__count__");function IK(e,t){return(n,i)=>it({name:e,aggregate_param:i,out:n||e},LK,t)}[...rp,"__count__"].forEach(e=>{_g[e]=IK(e,_g[e])});function zB(e,t,n){return _g[e](n,t)}function LB(e,t){return e.idx-t.idx}function UK(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=_g[r]())})};return e.forEach(n),Object.values(t).sort(LB)}function PK(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function jK(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function qK(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function HK(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function IB(e,t){const n=t||Ei,i=UK(e),r=e.slice().sort(LB);function a(o){this._ops=i,this._out=r,this.cell=o,this.init()}return a.prototype.init=PK,a.prototype.add=jK,a.prototype.rem=qK,a.prototype.set=HK,a.prototype.get=n,a.fields=e.map(o=>o.out),a}function Aw(e){this._key=e?Vr(e):Ye,this.reset()}const ai=Aw.prototype;ai.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};ai.add=function(e){this._add.push(e)};ai.rem=function(e){this._rem.push(e)};ai.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),o={};let u,c,l;for(u=0;u<r;++u)o[n(t[u])]=1;for(u=0,c=0;u<i;++u)o[n(l=e[u])]?o[n(l)]=0:a[c++]=l;return this._rem=[],this._add=a};ai.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Ue(n,a)||(n[a]=1,++r);return r};ai.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=nR(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};ai.argmin=function(e){return this.extent(e)[0]||{}};ai.argmax=function(e){return this.extent(e)[1]||{}};ai.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};ai.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};ai.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=lw(this.values(),e),this._get=e),this._q};ai.q1=function(e){return this.quartile(e)[0]};ai.q2=function(e){return this.quartile(e)[1]};ai.q3=function(e){return this.quartile(e)[2]};ai.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=AB(this.values(),1e3,.05,e),this._get=e),this._ci};ai.ci0=function(e){return this.ci(e)[0]};ai.ci1=function(e){return this.ci(e)[1]};function ks(e){de.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ks.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:rp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};Re(ks,de,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(u){let c,l,d,h;for(c in u)for(d=u[c].tuple,l=0;l<r;++l)i[l][h=d[n[l]]]=h}a(e._prev),a(t);function o(u,c,l){const d=n[l],h=i[l++];for(const p in h){const y=u?u+"|"+p:p;c[d]=h[p],l<r?o(y,c,l):t[y]||e.cell(y,c)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(S){const A=Ie(yi(S)),w=A.length;let _=0,k;for(;_<w;++_)i[k=A[_]]||(i[k]=1,t.push(k))}this._dims=Ie(e.groupby),this._dnames=this._dims.map(S=>{const A=dn(S);return r(S),n.push(A),A}),this.cellkey=e.key?e.key:TS(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],o=e.ops||["count"],u=e.aggregate_params||[null],c=e.as||[],l=a.length,d={};let h,p,y,v,b,x,D;for(l!==o.length&&me("Unmatched number of fields and aggregate ops."),D=0;D<l;++D){if(h=a[D],p=o[D],y=u[D]||null,h==null&&p!=="count"&&me("Null aggregate field specified."),b=dn(h),x=BB(p,b,c[D]),n.push(x),p==="count"){this._counts.push(x);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(zB(p,y,x))}return this._measures=this._measures.map(S=>IB(S,S.field)),Object.create(null)},cellkey:TS(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new Aw),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let o=0;o<r;++o)a[n[o]]=i[o](e);return t?yB(t.tuple,a):wt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,o=e.rem,u=e.mod;let c,l,d,h;if(i)for(l in i)c=i[l],(!r||c.num)&&o.push(c.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)c=n[d],(c.num===0&&r?o:u).push(this.celltuple(c)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const GK=1e-14;function _w(e){de.call(this,null,e)}_w.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};Re(_w,de,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,o=e.as||["bin0","bin1"],u=o[0],c=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(yi(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?d=>{const h=i(d);d[u]=h,d[c]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[u]=i(d)),t.modifies(n?o:u)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=SB(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,o,u;(o=e.anchor)!=null&&(u=o-(r+i*Math.floor((o-r)/i)),r+=u,a+=u);const c=function(l){let d=pi(t(l));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(GK+(d-r)/i))};return c.start=r,c.stop=n.stop,c.step=i,this.value=ar(c,yi(t),e.name||"bin_"+dn(t))}});function UB(e,t,n){const i=e;let r=t||[],a=n||[],o={},u=0;return{add:c=>a.push(c),remove:c=>o[i(c)]=++u,size:()=>r.length,data:(c,l)=>(u&&(r=r.filter(d=>!o[i(d)]),o={},u=0),l&&c&&r.sort(c),a.length&&(r=c?uR(c,r,a.sort(c)):r.concat(a),a=[]),r)}}function ww(e){de.call(this,[],e)}ww.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};Re(ww,de,{transform(e,t){const n=t.fork(t.ALL),i=UB(Ye,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(wc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function PB(e){jt.call(this,null,YK,e)}Re(PB,jt);function YK(e){return this.value&&!e.modified()?this.value:U_(e.fields,e.orders)}function Fw(e){de.call(this,null,e)}Fw.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function XK(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}Re(Fw,de,{transform(e,t){const n=h=>p=>{for(var y=XK(u(p),e.case,a)||[],v,b=0,x=y.length;b<x;++b)o.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,o=this._stop,u=e.field,c=e.as||["text","count"],l=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,d)),this._finish(t,c)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let u,c,l;for(u in n)c=i[u],l=n[u]||0,!c&&l?(i[u]=c=wt({}),c[r]=u,c[a]=l,o.add.push(c)):l===0?(c&&o.rem.push(c),n[u]=null,i[u]=null):c[a]!==l&&(c[a]=l,o.mod.push(c));return o.modifies(t)}});function kw(e){de.call(this,null,e)}kw.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};Re(kw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let u=this.value;return o?(u&&(n.rem=u),u=t.materialize(t.SOURCE).source,n.add=this.value=VK(u,r,a,e.filter||Wr)):n.mod=u,n.source=this.value,n.modifies(i)}});function VK(e,t,n,i){for(var r=[],a={},o=e.length,u=0,c,l;u<o;++u)for(a[t]=l=e[u],c=0;c<o;++c)a[n]=e[c],i(a)&&(r.push(wt(a)),a={},a[t]=l);return r}const z9={kde:hw,mixture:kB,normal:dw,lognormal:FB,uniform:TB},WK="distributions",L9="function",QK="field";function jB(e,t){const n=e[L9];Ue(z9,n)||me("Unknown distribution function: "+n);const i=z9[n]();for(const r in e)r===QK?i.data((e.from||t()).map(e[r])):r===WK?i[r](e[r].map(a=>jB(a,t))):typeof i[r]===L9&&i[r](e[r]);return i}function Tw(e){de.call(this,null,e)}const qB=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],ZK={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:qB},{name:"weights",type:"number",array:!0}]};Tw.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:qB.concat(ZK)},{name:"as",type:"string",array:!0,default:["value","density"]}]};Re(Tw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=jB(e.distribution,KK(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&me("Invalid density method: "+o),!e.extent&&!i.data&&me("Missing density extent parameter."),o=i[o];const u=e.as||["value","density"],c=e.extent||so(i.data()),l=vb(o,c,r,a).map(d=>{const h={};return h[u[0]]=d[0],h[u[1]]=d[1],wt(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function KK(e){return()=>e.materialize(e.SOURCE).source}function HB(e,t){return e?e.map((n,i)=>t[i]||dn(n)):null}function $w(e,t,n){const i=[],r=h=>h(c);let a,o,u,c,l,d;if(t==null)i.push(e.map(n));else for(a={},o=0,u=e.length;o<u;++o)c=e[o],l=t.map(r),d=a[l],d||(a[l]=d=[],d.dims=l,i.push(d)),d.push(n(c));return i}const GB="bin";function Mw(e){de.call(this,null,e)}Mw.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:GB}]};const JK=(e,t)=>tp(so(e,t))/30;Re(Mw,de,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=$w(t.source,e.groupby,Ei),r=e.smooth||!1,a=e.field,o=e.step||JK(n,a),u=wc((v,b)=>a(v)-a(b)),c=e.as||GB,l=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<l;++p){const v=i[p].sort(u);y=-1;for(const b of _B(v,o,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][c]=b}return this.value={start:d,stop:h,step:o},t.reflow(!0).modifies(c)}});function YB(e){jt.call(this,null,eJ,e),this.modified(!0)}Re(YB,jt);function eJ(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ar(n=>t(n,e),yi(t),dn(t))}function Ow(e){de.call(this,[void 0,void 0],e)}Ow.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};Re(Ow,de,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],o=n[1];if((r||a==null)&&(a=1/0,o=-1/0),t.visit(r?t.SOURCE:t.ADD,u=>{const c=pi(i(u));c!=null&&(c<a&&(a=c),c>o&&(o=c))}),!Number.isFinite(a)||!Number.isFinite(o)){let u=dn(i);u&&(u=` for field "${u}"`),t.dataflow.warn(`Infinite extent${u}: [${a}, ${o}]`),a=o=void 0}this.value=[a,o]}});function Nw(e,t){jt.call(this,e),this.parent=t,this.count=0}Re(Nw,jt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function bb(e){de.call(this,{},e),this._keys=Yd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}Re(bb,de,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Ue(r,e)&&r[e],o,u;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(u=i||(u=this._group[e])&&u.tuple,o=n.dataflow,a=new Nw(n.fork(n.NO_SOURCE),this),o.add(a).connect(t(o,e,u)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,o=e.modified("key"),u=c=>this.subflow(c,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,c=>{const l=Ye(c),d=a.get(l);d!==void 0&&(a.delete(l),u(d).rem(c))}),t.visit(t.ADD,c=>{const l=i(c);a.set(Ye(c),l),u(l).add(c)}),o||t.modified(i.fields)?t.visit(t.MOD,c=>{const l=Ye(c),d=a.get(l),h=i(c);d===h?u(h).mod(c):(a.set(l,h),u(d).rem(c),u(h).add(c))}):t.changed(t.MOD)&&t.visit(t.MOD,c=>{u(a.get(Ye(c))).mod(c)}),o&&t.visit(t.REFLOW,c=>{const l=Ye(c),d=a.get(l),h=i(c);d!==h&&(a.set(l,h),u(d).rem(c),u(h).add(c))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function XB(e){jt.call(this,null,tJ,e)}Re(XB,jt);function tJ(e){return this.value&&!e.modified()?this.value:be(e.name)?Ie(e.name).map(t=>Vr(t)):Vr(e.name,e.as)}function Rw(e){de.call(this,Yd(),e)}Rw.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};Re(Rw,de,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,o=r.rem,u=r.mod,c=e.expr;let l=!0;t.visit(t.REM,h=>{const p=Ye(h);i.has(p)?i.delete(p):o.push(h)}),t.visit(t.ADD,h=>{c(h,e)?a.push(h):i.set(Ye(h),1)});function d(h){const p=Ye(h),y=c(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),o.push(h)):l&&y&&!v&&u.push(h)}return t.visit(t.MOD,d),e.modified()&&(l=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function Bw(e){de.call(this,[],e)}Bw.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};Re(Bw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=HB(i,e.as||[]),a=e.index||null,o=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{const c=i.map(v=>v(u)),l=c.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<l;++d){for(p=aw(u),h=0;h<o;++h)p[r[h]]=(y=c[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function zw(e){de.call(this,[],e)}zw.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};Re(zw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(dn),a=e.as||["key","value"],o=a[0],u=a[1],c=i.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let d=0,h;d<c;++d)h=aw(l),h[o]=r[d],h[u]=i[d](l),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function Lw(e){de.call(this,null,e)}Lw.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};Re(Lw,de,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,o=>o[i]=n(o,e))}});function VB(e){de.call(this,[],e)}Re(VB,de,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,o,u,c;if(a>0){for(o=[];--a>=0;)o.push(c=wt(i(e))),r.push(c);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else u=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(u):u,r=r.slice(-a);return n.source=this.value=r,n}});const l1={value:"value",median:xR,mean:zW,min:bS,max:Xl},nJ=[];function Iw(e){de.call(this,[],e)}Iw.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function iJ(e){var t=e.method||l1.value,n;if(l1[t]==null)me("Unrecognized imputation method: "+t);else return t===l1.value?(n=e.value!==void 0?e.value:0,()=>n):l1[t]}function rJ(e){const t=e.field;return n=>n?t(n):NaN}Re(Iw,de,{transform(e,t){var n=t.fork(t.ALL),i=iJ(e),r=rJ(e),a=dn(e.field),o=dn(e.key),u=(e.groupby||[]).map(dn),c=aJ(t.source,e.groupby,e.key,e.keyvals),l=[],d=this.value,h=c.domain.length,p,y,v,b,x,D,S,A,w,_;for(x=0,A=c.length;x<A;++x)for(p=c[x],v=p.values,y=NaN,S=0;S<h;++S)if(p[S]==null){for(b=c.domain[S],_={_impute:!0},D=0,w=v.length;D<w;++D)_[u[D]]=v[D];_[o]=b,_[a]=Number.isNaN(y)?y=i(p,r):y,l.push(wt(_))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=l,n}});function aJ(e,t,n,i){var r=D=>D(x),a=[],o=i?i.slice():[],u={},c={},l,d,h,p,y,v,b,x;for(o.forEach((D,S)=>u[D]=S+1),p=0,b=e.length;p<b;++p)x=e[p],v=n(x),y=u[v]||(u[v]=o.push(v)),d=(l=t?t.map(r):nJ)+"",(h=c[d])||(h=c[d]=[],a.push(h),h.values=l),h[y-1]=x;return a.domain=o,a}function Uw(e){ks.call(this,e)}Uw.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:rp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};Re(Uw,ks,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{it(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Pw(e){de.call(this,null,e)}Pw.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};Re(Pw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=$w(i,e.groupby,e.field),a=(e.groupby||[]).map(dn),o=e.bandwidth,u=e.cumulative?"cdf":"pdf",c=e.as||["value","density"],l=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;u!=="pdf"&&u!=="cdf"&&me("Invalid density method: "+u),e.resolve==="shared"&&(d||(d=so(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=hw(y,o)[u],b=e.counts?y.length:1,x=d||so(y);vb(v,x,h,p).forEach(D=>{const S={};for(let A=0;A<a.length;++A)S[a[A]]=y.dims[A];S[c[0]]=D[0],S[c[1]]=D[1]*b,l.push(wt(S))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function WB(e){jt.call(this,null,oJ,e)}Re(WB,jt);function oJ(e){return this.value&&!e.modified()?this.value:q_(e.fields,e.flat)}function QB(e){de.call(this,[],e),this._pending=null}Re(QB,de,{transform(e,t){const n=t.dataflow;return this._pending?RD(this,t,this._pending):uJ(e)?t.StopPropagation:e.values?RD(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=Ie(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>RD(this,t,Ie(i.data)))}});function uJ(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function RD(e,t,n){n.forEach(wt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function jw(e){de.call(this,{},e)}jw.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};Re(jw,de,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,o=e.modified(),u=n.length;let c=o?t.SOURCE:t.ADD,l=t,d=e.as,h,p,y;return r?(p=r.length,u>1&&!d&&me('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==u*p&&me('The "as" parameter has too few output field names.'),d=d||r.map(dn),h=function(v){for(var b=0,x=0,D,S;b<u;++b)if(S=i.get(n[b](v)),S==null)for(D=0;D<p;++D,++x)v[d[x]]=a;else for(D=0;D<p;++D,++x)v[d[x]]=r[D](S)}):(d||me("Missing output field names."),h=function(v){for(var b=0,x;b<u;++b)x=i.get(n[b](v)),v[d[b]]=x??a}),o?l=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),c|=y?t.MOD:0),t.visit(c,h),l.modifies(d)}});function ZB(e){jt.call(this,null,sJ,e)}Re(ZB,jt);function sJ(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,o;for(a=0;a<n;++a)o=t[a],o[0]<i&&(i=o[0]),o[1]>r&&(r=o[1]);return[i,r]}function KB(e){jt.call(this,null,lJ,e)}Re(KB,jt);function lJ(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function JB(e){de.call(this,null,e)}Re(JB,de,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function qw(e){ks.call(this,e)}qw.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:rp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};Re(qw,ks,{_transform:ks.prototype.transform,transform(e,t){return this._transform(cJ(e,t),t)}});function cJ(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=yi(n).concat(yi(i)),o=dJ(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>r),fields:o.map(u=>fJ(u,n,i,a)),as:o.map(u=>u+""),modified:e.modified.bind(e)}}function fJ(e,t,n,i){return ar(r=>t(r)===e?n(r):NaN,i,e+"")}function dJ(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const o=e(a);i[o]||(i[o]=1,r.push(o))}),r.sort(Gd),t?r.slice(0,t):r}function ez(e){bb.call(this,e)}Re(ez,bb,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(Ye(a),n,t,a);return(e.modified("field")||i&&t.modified(yi(i)))&&me("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const o=r(a);i(a).forEach(u=>o.mod(u))}),t.visit(t.ADD,a=>{const o=r(a);i(a).forEach(u=>o.add(wt(u)))}),t.visit(t.REM,a=>{const o=r(a);i(a).forEach(u=>o.rem(u))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Hw(e){de.call(this,null,e)}Hw.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};Re(Hw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=HB(e.fields,e.as||[]),a=i?(u,c)=>hJ(u,c,i,r):fb;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,u=>{const c=Ye(u);n.rem.push(o[c]),o[c]=null}),t.visit(t.ADD,u=>{const c=a(u,wt({}));o[Ye(u)]=c,n.add.push(c)}),t.visit(t.MOD,u=>{n.mod.push(a(u,o[Ye(u)]))}),n}});function hJ(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function tz(e){de.call(this,null,e)}Re(tz,de,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Gw(e){de.call(this,null,e)}Gw.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const gJ=1e-14;Re(Gw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=$w(r,e.groupby,e.field),o=(e.groupby||[]).map(dn),u=[],c=e.step||.01,l=e.probs||vr(c/2,1-gJ,c),d=l.length;return a.forEach(h=>{const p=sw(h,l);for(let y=0;y<d;++y){const v={};for(let b=0;b<o.length;++b)v[o[b]]=h.dims[b];v[i[0]]=l[y],v[i[1]]=p[y],u.push(wt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u,n}});function nz(e){de.call(this,null,e)}Re(nz,de,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=Ye(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=aw(r);i[Ye(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[Ye(r)];for(const o in r)a[o]=r[o],n.modifies(o);n.mod.push(a)})),n}});function Yw(e){de.call(this,[],e),this.count=0}Yw.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};Re(Yw,de,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[Ye(h)]=1,d),{});let o=this.value,u=this.count,c=0;function l(d){let h,p;o.length<r?o.push(d):(p=~~((u+1)*Zr()),p<o.length&&p>=c&&(h=o[p],a[Ye(h)]&&n.rem.push(h),o[p]=d)),++u}if(t.rem.length&&(t.visit(t.REM,d=>{const h=Ye(d);a[h]&&(a[h]=-1,n.rem.push(d)),--u}),o=o.filter(d=>a[Ye(d)]!==-1)),(t.rem.length||i)&&o.length<r&&t.source&&(c=u=o.length,t.visit(t.SOURCE,d=>{a[Ye(d)]||l(d)}),c=-1),i&&o.length>r){const d=o.length-r;for(let h=0;h<d;++h)a[Ye(o[h])]=-1,n.rem.push(o[h]);o=o.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[Ye(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||c<0)&&(n.add=o.filter(d=>!a[Ye(d)])),this.count=u,this.value=n.source=o,n}});function Xw(e){de.call(this,null,e)}Xw.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};Re(Xw,de,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=vr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,wt(a)}),n.add=t.add.concat(this.value),n}});function iz(e){de.call(this,null,e),this.modified(!0)}Re(iz,de,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Vw(e){de.call(this,null,e)}const rz=["unit0","unit1"];Vw.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:Q_,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:rz}]};Re(Vw,de,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),o=(r?Zd:Qd)(a.unit).offset,u=e.as||rz,c=u[0],l=u[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(yi(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let x,D;b==null?(v[c]=null,i&&(v[l]=null)):(v[c]=x=D=a(b),i&&(v[l]=D=o(x,d)),x<h&&(h=x),D>p&&(p=D))}),a.start=h,a.stop=p,t.modifies(i?u:c)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:VR({extent:e.extent||so(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=Z_(i),o=this.value||{},u=(n?IR:LR)(a,r);return u.unit=vt(a),u.units=a,u.step=r,u.start=o.start,u.stop=o.stop,this.value=u}});function az(e){de.call(this,Yd(),e)}Re(az,de,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=u=>r.set(i(u),u);let o=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,u=>r.delete(i(u))),t.visit(t.ADD,a)):o=!1,this.modified(o),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function oz(e){de.call(this,null,e)}Re(oz,de,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(wc(e.sort)):t.source).map(e.field))}});function pJ(e,t,n,i){const r=wg[e](t,n);return{init:r.init||fs,update:function(a,o){o[i]=r.next(a)}}}const wg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=wg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||me("ntile num must be greater than zero.");const n=wg.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||me("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=mJ(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function mJ(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const yJ=Object.keys(wg);function uz(e){const t=Ie(e.ops),n=Ie(e.fields),i=Ie(e.params),r=Ie(e.aggregate_params),a=Ie(e.as),o=this.outputs=[],u=this.windows=[],c={},l={},d=[],h=[];let p=!0;function y(v){Ie(yi(v)).forEach(b=>c[b]=1)}y(e.sort),t.forEach((v,b)=>{const x=n[b],D=i[b],S=r[b]||null,A=dn(x),w=BB(v,A,a[b]);if(y(x),o.push(w),Ue(wg,v))u.push(pJ(v,x,D,w));else{if(x==null&&v!=="count"&&me("Null aggregate field specified."),v==="count"){d.push(w);return}p=!1;let _=l[A];_||(_=l[A]=[],_.field=x,h.push(_)),_.push(zB(v,S,w))}}),(d.length||h.length)&&(this.cell=vJ(h,d,p)),this.inputs=Object.keys(c)}const sz=uz.prototype;sz.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};sz.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(r[o]);for(o=e.p1;o<e.i1;++o)n.add(r[o]);n.set(t)}for(o=0;o<a;++o)i[o].update(e,t)};function vJ(e,t,n){e=e.map(c=>IB(c,c.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),o=0;o<r;++o)a[o]=new e[o](i);if(i.store)var u=i.data=new Aw;return i.add=function(c){if(i.num+=1,!n){u&&u.add(c);for(let l=0;l<r;++l)a[l].add(a[l].get(c),c)}},i.rem=function(c){if(i.num-=1,!n){u&&u.rem(c);for(let l=0;l<r;++l)a[l].rem(a[l].get(c),c)}},i.set=function(c){let l,d;for(u&&u.values(),l=0,d=t.length;l<d;++l)c[t[l]]=i.num;if(!n)for(l=0,d=a.length;l<d;++l)a[l].set(c)},i.init=function(){i.num=0,u&&u.reset();for(let c=0;c<r;++c)a[c].init()},i}function Ww(e){de.call(this,{},e),this._mlen=0,this._mods=[]}Ww.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:yJ.concat(rp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};Re(Ww,de,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=wc(e.sort),r=TS(e.groupby),a=u=>this.group(r(u));let o=this.state;(!o||n)&&(o=this.state=new uz(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,u=>a(u).add(u))):(t.visit(t.REM,u=>a(u).remove(u)),t.visit(t.ADD,u=>a(u).add(u)));for(let u=0,c=this._mlen;u<c;++u)bJ(this._mods[u],o,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=UB(Ye),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function bJ(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,o=i.frame||[null,0],u=e.data(n),c=u.length,l=a?Xd(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:u,compare:r||Di(-1)};t.init();for(let h=0;h<c;++h)xJ(d,o,h,c),a&&EJ(d,l),t.update(d,u[h])}function xJ(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function EJ(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,o=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<o&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const DJ=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ks,bin:_w,collect:ww,compare:PB,countpattern:Fw,cross:kw,density:Tw,dotbin:Mw,expression:YB,extent:Ow,facet:bb,field:XB,filter:Rw,flatten:Bw,fold:zw,formula:Lw,generate:VB,impute:Iw,joinaggregate:Uw,kde:Pw,key:WB,load:QB,lookup:jw,multiextent:ZB,multivalues:KB,params:JB,pivot:qw,prefacet:ez,project:Hw,proxy:tz,quantile:Gw,relay:nz,sample:Yw,sequence:Xw,sieve:iz,subflow:Nw,timeunit:Vw,tupleindex:az,values:oz,window:Ww},Symbol.toStringTag,{value:"Module"}));function Ft(e){return function(){return e}}const I9=Math.abs,li=Math.atan2,Dl=Math.cos,CJ=Math.max,BD=Math.min,Ha=Math.sin,ql=Math.sqrt,fi=1e-12,hd=Math.PI,wy=hd/2,lz=2*hd;function SJ(e){return e>1?0:e<-1?hd:Math.acos(e)}function U9(e){return e>=1?wy:e<=-1?-wy:Math.asin(e)}const $S=Math.PI,MS=2*$S,Rl=1e-6,AJ=MS-Rl;function cz(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function _J(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return cz;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let Qw=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?cz:_J(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,o){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+o}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let o=this._x1,u=this._y1,c=i-t,l=r-n,d=o-t,h=u-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Rl)if(!(Math.abs(h*c-l*d)>Rl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-o,v=r-u,b=c*c+l*l,x=y*y+v*v,D=Math.sqrt(b),S=Math.sqrt(p),A=a*Math.tan(($S-Math.acos((b+p-x)/(2*D*S)))/2),w=A/S,_=A/D;Math.abs(w-1)>Rl&&this._append`L${t+w*d},${n+w*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+_*c},${this._y1=n+_*l}`}}arc(t,n,i,r,a,o){if(t=+t,n=+n,i=+i,o=!!o,i<0)throw new Error(`negative radius: ${i}`);let u=i*Math.cos(r),c=i*Math.sin(r),l=t+u,d=n+c,h=1^o,p=o?r-a:a-r;this._x1===null?this._append`M${l},${d}`:(Math.abs(this._x1-l)>Rl||Math.abs(this._y1-d)>Rl)&&this._append`L${l},${d}`,i&&(p<0&&(p=p%MS+MS),p>AJ?this._append`A${i},${i},0,1,${h},${t-u},${n-c}A${i},${i},0,1,${h},${this._x1=l},${this._y1=d}`:p>Rl&&this._append`A${i},${i},0,${+(p>=$S)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function xb(){return new Qw}xb.prototype=Qw.prototype;function Eb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new Qw(t)}function wJ(e){return e.innerRadius}function FJ(e){return e.outerRadius}function kJ(e){return e.startAngle}function TJ(e){return e.endAngle}function $J(e){return e&&e.padAngle}function MJ(e,t,n,i,r,a,o,u){var c=n-e,l=i-t,d=o-r,h=u-a,p=h*c-d*l;if(!(p*p<fi))return p=(d*(t-a)-h*(e-r))/p,[e+p*c,t+p*l]}function c1(e,t,n,i,r,a,o){var u=e-n,c=t-i,l=(o?a:-a)/ql(u*u+c*c),d=l*c,h=-l*u,p=e+d,y=t+h,v=n+d,b=i+h,x=(p+v)/2,D=(y+b)/2,S=v-p,A=b-y,w=S*S+A*A,_=r-a,k=p*b-v*y,F=(A<0?-1:1)*ql(CJ(0,_*_*w-k*k)),M=(k*A-S*F)/w,N=(-k*S-A*F)/w,P=(k*A+S*F)/w,L=(-k*S+A*F)/w,H=M-x,I=N-D,U=P-x,z=L-D;return H*H+I*I>U*U+z*z&&(M=P,N=L),{cx:M,cy:N,x01:-d,y01:-h,x11:M*(r/_-1),y11:N*(r/_-1)}}function OJ(){var e=wJ,t=FJ,n=Ft(0),i=null,r=kJ,a=TJ,o=$J,u=null,c=Eb(l);function l(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-wy,b=a.apply(this,arguments)-wy,x=I9(b-v),D=b>v;if(u||(u=d=c()),y<p&&(h=y,y=p,p=h),!(y>fi))u.moveTo(0,0);else if(x>lz-fi)u.moveTo(y*Dl(v),y*Ha(v)),u.arc(0,0,y,v,b,!D),p>fi&&(u.moveTo(p*Dl(b),p*Ha(b)),u.arc(0,0,p,b,v,D));else{var S=v,A=b,w=v,_=b,k=x,F=x,M=o.apply(this,arguments)/2,N=M>fi&&(i?+i.apply(this,arguments):ql(p*p+y*y)),P=BD(I9(y-p)/2,+n.apply(this,arguments)),L=P,H=P,I,U;if(N>fi){var z=U9(N/p*Ha(M)),T=U9(N/y*Ha(M));(k-=z*2)>fi?(z*=D?1:-1,w+=z,_-=z):(k=0,w=_=(v+b)/2),(F-=T*2)>fi?(T*=D?1:-1,S+=T,A-=T):(F=0,S=A=(v+b)/2)}var R=y*Dl(S),q=y*Ha(S),G=p*Dl(_),O=p*Ha(_);if(P>fi){var Z=y*Dl(A),ee=y*Ha(A),X=p*Dl(w),Q=p*Ha(w),ne;if(x<hd)if(ne=MJ(R,q,X,Q,Z,ee,G,O)){var ce=R-ne[0],Fe=q-ne[1],Me=Z-ne[0],j=ee-ne[1],W=1/Ha(SJ((ce*Me+Fe*j)/(ql(ce*ce+Fe*Fe)*ql(Me*Me+j*j)))/2),te=ql(ne[0]*ne[0]+ne[1]*ne[1]);L=BD(P,(p-te)/(W-1)),H=BD(P,(y-te)/(W+1))}else L=H=0}F>fi?H>fi?(I=c1(X,Q,R,q,y,H,D),U=c1(Z,ee,G,O,y,H,D),u.moveTo(I.cx+I.x01,I.cy+I.y01),H<P?u.arc(I.cx,I.cy,H,li(I.y01,I.x01),li(U.y01,U.x01),!D):(u.arc(I.cx,I.cy,H,li(I.y01,I.x01),li(I.y11,I.x11),!D),u.arc(0,0,y,li(I.cy+I.y11,I.cx+I.x11),li(U.cy+U.y11,U.cx+U.x11),!D),u.arc(U.cx,U.cy,H,li(U.y11,U.x11),li(U.y01,U.x01),!D))):(u.moveTo(R,q),u.arc(0,0,y,S,A,!D)):u.moveTo(R,q),!(p>fi)||!(k>fi)?u.lineTo(G,O):L>fi?(I=c1(G,O,Z,ee,p,-L,D),U=c1(R,q,X,Q,p,-L,D),u.lineTo(I.cx+I.x01,I.cy+I.y01),L<P?u.arc(I.cx,I.cy,L,li(I.y01,I.x01),li(U.y01,U.x01),!D):(u.arc(I.cx,I.cy,L,li(I.y01,I.x01),li(I.y11,I.x11),!D),u.arc(0,0,p,li(I.cy+I.y11,I.cx+I.x11),li(U.cy+U.y11,U.cx+U.x11),D),u.arc(U.cx,U.cy,L,li(U.y11,U.x11),li(U.y01,U.x01),!D))):u.arc(0,0,p,_,w,D)}if(u.closePath(),d)return u=null,d+""||null}return l.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-hd/2;return[Dl(h)*d,Ha(h)*d]},l.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:Ft(+d),l):e},l.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:Ft(+d),l):t},l.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:Ft(+d),l):n},l.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:Ft(+d),l):i},l.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:Ft(+d),l):r},l.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:Ft(+d),l):a},l.padAngle=function(d){return arguments.length?(o=typeof d=="function"?d:Ft(+d),l):o},l.context=function(d){return arguments.length?(u=d??null,l):u},l}function fz(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function dz(e){this._context=e}dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Zw(e){return new dz(e)}function hz(e){return e[0]}function gz(e){return e[1]}function pz(e,t){var n=Ft(!0),i=null,r=Zw,a=null,o=Eb(u);e=typeof e=="function"?e:e===void 0?hz:Ft(e),t=typeof t=="function"?t:t===void 0?gz:Ft(t);function u(c){var l,d=(c=fz(c)).length,h,p=!1,y;for(i==null&&(a=r(y=o())),l=0;l<=d;++l)!(l<d&&n(h=c[l],l,c))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,l,c),+t(h,l,c));if(y)return a=null,y+""||null}return u.x=function(c){return arguments.length?(e=typeof c=="function"?c:Ft(+c),u):e},u.y=function(c){return arguments.length?(t=typeof c=="function"?c:Ft(+c),u):t},u.defined=function(c){return arguments.length?(n=typeof c=="function"?c:Ft(!!c),u):n},u.curve=function(c){return arguments.length?(r=c,i!=null&&(a=r(i)),u):r},u.context=function(c){return arguments.length?(c==null?i=a=null:a=r(i=c),u):i},u}function mz(e,t,n){var i=null,r=Ft(!0),a=null,o=Zw,u=null,c=Eb(l);e=typeof e=="function"?e:e===void 0?hz:Ft(+e),t=typeof t=="function"?t:Ft(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?gz:Ft(+n);function l(h){var p,y,v,b=(h=fz(h)).length,x,D=!1,S,A=new Array(b),w=new Array(b);for(a==null&&(u=o(S=c())),p=0;p<=b;++p){if(!(p<b&&r(x=h[p],p,h))===D)if(D=!D)y=p,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),v=p-1;v>=y;--v)u.point(A[v],w[v]);u.lineEnd(),u.areaEnd()}D&&(A[p]=+e(x,p,h),w[p]=+t(x,p,h),u.point(i?+i(x,p,h):A[p],n?+n(x,p,h):w[p]))}if(S)return u=null,S+""||null}function d(){return pz().defined(r).curve(o).context(a)}return l.x=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),i=null,l):e},l.x0=function(h){return arguments.length?(e=typeof h=="function"?h:Ft(+h),l):e},l.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:Ft(+h),l):i},l.y=function(h){return arguments.length?(t=typeof h=="function"?h:Ft(+h),n=null,l):t},l.y0=function(h){return arguments.length?(t=typeof h=="function"?h:Ft(+h),l):t},l.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:Ft(+h),l):n},l.lineX0=l.lineY0=function(){return d().x(e).y(t)},l.lineY1=function(){return d().x(e).y(n)},l.lineX1=function(){return d().x(i).y(t)},l.defined=function(h){return arguments.length?(r=typeof h=="function"?h:Ft(!!h),l):r},l.curve=function(h){return arguments.length?(o=h,a!=null&&(u=o(a)),l):o},l.context=function(h){return arguments.length?(h==null?a=u=null:u=o(a=h),l):a},l}const NJ={draw(e,t){const n=ql(t/hd);e.moveTo(n,0),e.arc(0,0,n,0,lz)}};function RJ(e,t){let n=null,i=Eb(r);e=typeof e=="function"?e:Ft(e||NJ),t=typeof t=="function"?t:Ft(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:Ft(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:Ft(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function Ts(){}function Fy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Db(e){this._context=e}Db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Fy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function BJ(e){return new Db(e)}function yz(e){this._context=e}yz.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function zJ(e){return new yz(e)}function vz(e){this._context=e}vz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:Fy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function LJ(e){return new vz(e)}function bz(e,t){this._basis=new Db(e),this._beta=t}bz.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,o=t[n]-r,u=-1,c;++u<=n;)c=u/n,this._basis.point(this._beta*e[u]+(1-this._beta)*(i+c*a),this._beta*t[u]+(1-this._beta)*(r+c*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const IJ=(function e(t){function n(i){return t===1?new Db(i):new bz(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function ky(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function Kw(e,t){this._context=e,this._k=(1-t)/6}Kw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:ky(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:ky(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const UJ=(function e(t){function n(i){return new Kw(i,t)}return n.tension=function(i){return e(+i)},n})(0);function Jw(e,t){this._context=e,this._k=(1-t)/6}Jw.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:ky(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const PJ=(function e(t){function n(i){return new Jw(i,t)}return n.tension=function(i){return e(+i)},n})(0);function e3(e,t){this._context=e,this._k=(1-t)/6}e3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ky(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const jJ=(function e(t){function n(i){return new e3(i,t)}return n.tension=function(i){return e(+i)},n})(0);function t3(e,t,n){var i=e._x1,r=e._y1,a=e._x2,o=e._y2;if(e._l01_a>fi){var u=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,c=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*u-e._x0*e._l12_2a+e._x2*e._l01_2a)/c,r=(r*u-e._y0*e._l12_2a+e._y2*e._l01_2a)/c}if(e._l23_a>fi){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*l+e._x1*e._l23_2a-t*e._l12_2a)/d,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,o,e._x2,e._y2)}function xz(e,t){this._context=e,this._alpha=t}xz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:t3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qJ=(function e(t){function n(i){return t?new xz(i,t):new Kw(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Ez(e,t){this._context=e,this._alpha=t}Ez.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:t3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const HJ=(function e(t){function n(i){return t?new Ez(i,t):new Jw(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Dz(e,t){this._context=e,this._alpha=t}Dz.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:t3(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const GJ=(function e(t){function n(i){return t?new Dz(i,t):new e3(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function Cz(e){this._context=e}Cz.prototype={areaStart:Ts,areaEnd:Ts,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function YJ(e){return new Cz(e)}function P9(e){return e<0?-1:1}function j9(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),o=(n-e._y1)/(r||i<0&&-0),u=(a*r+o*i)/(i+r);return(P9(a)+P9(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function q9(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function zD(e,t,n){var i=e._x0,r=e._y0,a=e._x1,o=e._y1,u=(a-i)/3;e._context.bezierCurveTo(i+u,r+u*t,a-u,o-u*n,a,o)}function Ty(e){this._context=e}Ty.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:zD(this,this._t0,q9(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,zD(this,q9(this,n=j9(this,e,t)),n);break;default:zD(this,this._t0,n=j9(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function Sz(e){this._context=new Az(e)}(Sz.prototype=Object.create(Ty.prototype)).point=function(e,t){Ty.prototype.point.call(this,t,e)};function Az(e){this._context=e}Az.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function XJ(e){return new Ty(e)}function VJ(e){return new Sz(e)}function _z(e){this._context=e}_z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=H9(e),r=H9(t),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function H9(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),o=new Array(n);for(r[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,o[t]-=i*o[t-1];for(r[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(o[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function WJ(e){return new _z(e)}function Cb(e,t){this._context=e,this._t=t}Cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function QJ(e){return new Cb(e,.5)}function ZJ(e){return new Cb(e,0)}function KJ(e){return new Cb(e,1)}function Ss(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const JJ=()=>typeof Image<"u"?Image:null;function bo(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Hs(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const OS=Symbol("implicit");function n3(){var e=new u9,t=[],n=[],i=OS;function r(a){let o=e.get(a);if(o===void 0){if(i!==OS)return i;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new u9;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return n3(t,n).unknown(i)},bo.apply(r,arguments),r}function Jd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function ap(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function Gs(){}var rc=.7,gd=1/rc,Kf="\\s*([+-]?\\d+)\\s*",Fg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",no="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",eee=/^#([0-9a-f]{3,8})$/,tee=new RegExp(`^rgb\\(${Kf},${Kf},${Kf}\\)$`),nee=new RegExp(`^rgb\\(${no},${no},${no}\\)$`),iee=new RegExp(`^rgba\\(${Kf},${Kf},${Kf},${Fg}\\)$`),ree=new RegExp(`^rgba\\(${no},${no},${no},${Fg}\\)$`),aee=new RegExp(`^hsl\\(${Fg},${no},${no}\\)$`),oee=new RegExp(`^hsla\\(${Fg},${no},${no},${Fg}\\)$`),G9={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Jd(Gs,kg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Y9,formatHex:Y9,formatHex8:uee,formatHsl:see,formatRgb:X9,toString:X9});function Y9(){return this.rgb().formatHex()}function uee(){return this.rgb().formatHex8()}function see(){return wz(this).formatHsl()}function X9(){return this.rgb().formatRgb()}function kg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=eee.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?V9(t):n===3?new In(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?f1(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?f1(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=tee.exec(e))?new In(t[1],t[2],t[3],1):(t=nee.exec(e))?new In(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=iee.exec(e))?f1(t[1],t[2],t[3],t[4]):(t=ree.exec(e))?f1(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=aee.exec(e))?Z9(t[1],t[2]/100,t[3]/100,1):(t=oee.exec(e))?Z9(t[1],t[2]/100,t[3]/100,t[4]):G9.hasOwnProperty(e)?V9(G9[e]):e==="transparent"?new In(NaN,NaN,NaN,0):null}function V9(e){return new In(e>>16&255,e>>8&255,e&255,1)}function f1(e,t,n,i){return i<=0&&(e=t=n=NaN),new In(e,t,n,i)}function i3(e){return e instanceof Gs||(e=kg(e)),e?(e=e.rgb(),new In(e.r,e.g,e.b,e.opacity)):new In}function $s(e,t,n,i){return arguments.length===1?i3(e):new In(e,t,n,i??1)}function In(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Jd(In,$s,ap(Gs,{brighter(e){return e=e==null?gd:Math.pow(gd,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new In(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new In(Vl(this.r),Vl(this.g),Vl(this.b),$y(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:W9,formatHex:W9,formatHex8:lee,formatRgb:Q9,toString:Q9}));function W9(){return`#${Hl(this.r)}${Hl(this.g)}${Hl(this.b)}`}function lee(){return`#${Hl(this.r)}${Hl(this.g)}${Hl(this.b)}${Hl((isNaN(this.opacity)?1:this.opacity)*255)}`}function Q9(){const e=$y(this.opacity);return`${e===1?"rgb(":"rgba("}${Vl(this.r)}, ${Vl(this.g)}, ${Vl(this.b)}${e===1?")":`, ${e})`}`}function $y(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Vl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Hl(e){return e=Vl(e),(e<16?"0":"")+e.toString(16)}function Z9(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new pa(e,t,n,i)}function wz(e){if(e instanceof pa)return new pa(e.h,e.s,e.l,e.opacity);if(e instanceof Gs||(e=kg(e)),!e)return new pa;if(e instanceof pa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),o=NaN,u=a-r,c=(a+r)/2;return u?(t===a?o=(n-i)/u+(n<i)*6:n===a?o=(i-t)/u+2:o=(t-n)/u+4,u/=c<.5?a+r:2-a-r,o*=60):u=c>0&&c<1?0:o,new pa(o,u,c,e.opacity)}function My(e,t,n,i){return arguments.length===1?wz(e):new pa(e,t,n,i??1)}function pa(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Jd(pa,My,ap(Gs,{brighter(e){return e=e==null?gd:Math.pow(gd,e),new pa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new pa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new In(LD(e>=240?e-240:e+120,r,i),LD(e,r,i),LD(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new pa(K9(this.h),d1(this.s),d1(this.l),$y(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=$y(this.opacity);return`${e===1?"hsl(":"hsla("}${K9(this.h)}, ${d1(this.s)*100}%, ${d1(this.l)*100}%${e===1?")":`, ${e})`}`}}));function K9(e){return e=(e||0)%360,e<0?e+360:e}function d1(e){return Math.max(0,Math.min(1,e||0))}function LD(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Fz=Math.PI/180,kz=180/Math.PI,Oy=18,Tz=.96422,$z=1,Mz=.82521,Oz=4/29,Jf=6/29,Nz=3*Jf*Jf,cee=Jf*Jf*Jf;function Rz(e){if(e instanceof io)return new io(e.l,e.a,e.b,e.opacity);if(e instanceof ou)return Bz(e);e instanceof In||(e=i3(e));var t=jD(e.r),n=jD(e.g),i=jD(e.b),r=ID((.2225045*t+.7168786*n+.0606169*i)/$z),a,o;return t===n&&n===i?a=o=r:(a=ID((.4360747*t+.3850649*n+.1430804*i)/Tz),o=ID((.0139322*t+.0971045*n+.7141733*i)/Mz)),new io(116*r-16,500*(a-r),200*(r-o),e.opacity)}function Ny(e,t,n,i){return arguments.length===1?Rz(e):new io(e,t,n,i??1)}function io(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Jd(io,Ny,ap(Gs,{brighter(e){return new io(this.l+Oy*(e??1),this.a,this.b,this.opacity)},darker(e){return new io(this.l-Oy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Tz*UD(t),e=$z*UD(e),n=Mz*UD(n),new In(PD(3.1338561*t-1.6168667*e-.4906146*n),PD(-.9787684*t+1.9161415*e+.033454*n),PD(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function ID(e){return e>cee?Math.pow(e,1/3):e/Nz+Oz}function UD(e){return e>Jf?e*e*e:Nz*(e-Oz)}function PD(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function jD(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function fee(e){if(e instanceof ou)return new ou(e.h,e.c,e.l,e.opacity);if(e instanceof io||(e=Rz(e)),e.a===0&&e.b===0)return new ou(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*kz;return new ou(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Ry(e,t,n,i){return arguments.length===1?fee(e):new ou(e,t,n,i??1)}function ou(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function Bz(e){if(isNaN(e.h))return new io(e.l,0,0,e.opacity);var t=e.h*Fz;return new io(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Jd(ou,Ry,ap(Gs,{brighter(e){return new ou(this.h,this.c,this.l+Oy*(e??1),this.opacity)},darker(e){return new ou(this.h,this.c,this.l-Oy*(e??1),this.opacity)},rgb(){return Bz(this).rgb()}}));var zz=-.14861,r3=1.78277,a3=-.29227,Sb=-.90649,Tg=1.97294,J9=Tg*Sb,e$=Tg*r3,t$=r3*a3-Sb*zz;function dee(e){if(e instanceof Wl)return new Wl(e.h,e.s,e.l,e.opacity);e instanceof In||(e=i3(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(t$*i+J9*t-e$*n)/(t$+J9-e$),a=i-r,o=(Tg*(n-r)-a3*a)/Sb,u=Math.sqrt(o*o+a*a)/(Tg*r*(1-r)),c=u?Math.atan2(o,a)*kz-120:NaN;return new Wl(c<0?c+360:c,u,r,e.opacity)}function NS(e,t,n,i){return arguments.length===1?dee(e):new Wl(e,t,n,i??1)}function Wl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Jd(Wl,NS,ap(Gs,{brighter(e){return e=e==null?gd:Math.pow(gd,e),new Wl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?rc:Math.pow(rc,e),new Wl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Fz,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new In(255*(t+n*(zz*i+r3*r)),255*(t+n*(a3*i+Sb*r)),255*(t+n*(Tg*i)),this.opacity)}}));function Lz(e,t,n,i,r){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*i+o*r)/6}function Iz(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],o=i>0?e[i-1]:2*r-a,u=i<t-1?e[i+2]:2*a-r;return Lz((n-i/t)*t,o,r,a,u)}}function Uz(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],o=e[(i+1)%t],u=e[(i+2)%t];return Lz((n-i/t)*t,r,a,o,u)}}const Ab=e=>()=>e;function Pz(e,t){return function(n){return e+n*t}}function hee(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function _b(e,t){var n=t-e;return n?Pz(e,n>180||n<-180?n-360*Math.round(n/360):n):Ab(isNaN(e)?t:e)}function gee(e){return(e=+e)==1?Un:function(t,n){return n-t?hee(t,n,e):Ab(isNaN(t)?n:t)}}function Un(e,t){var n=t-e;return n?Pz(e,n):Ab(isNaN(e)?t:e)}const RS=(function e(t){var n=gee(t);function i(r,a){var o=n((r=$s(r)).r,(a=$s(a)).r),u=n(r.g,a.g),c=n(r.b,a.b),l=Un(r.opacity,a.opacity);return function(d){return r.r=o(d),r.g=u(d),r.b=c(d),r.opacity=l(d),r+""}}return i.gamma=e,i})(1);function jz(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),o,u;for(o=0;o<n;++o)u=$s(t[o]),i[o]=u.r||0,r[o]=u.g||0,a[o]=u.b||0;return i=e(i),r=e(r),a=e(a),u.opacity=1,function(c){return u.r=i(c),u.g=r(c),u.b=a(c),u+""}}}var pee=jz(Iz),mee=jz(Uz);function o3(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function qz(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function yee(e,t){return(qz(t)?o3:Hz)(e,t)}function Hz(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),o;for(o=0;o<i;++o)r[o]=Ys(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(u){for(o=0;o<i;++o)a[o]=r[o](u);return a}}function Gz(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function ha(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Yz(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Ys(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var BS=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,qD=new RegExp(BS.source,"g");function vee(e){return function(){return e}}function bee(e){return function(t){return e(t)+""}}function Xz(e,t){var n=BS.lastIndex=qD.lastIndex=0,i,r,a,o=-1,u=[],c=[];for(e=e+"",t=t+"";(i=BS.exec(e))&&(r=qD.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),u[o]?u[o]+=a:u[++o]=a),(i=i[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,c.push({i:o,x:ha(i,r)})),n=qD.lastIndex;return n<t.length&&(a=t.slice(n),u[o]?u[o]+=a:u[++o]=a),u.length<2?c[0]?bee(c[0].x):vee(t):(t=c.length,function(l){for(var d=0,h;d<t;++d)u[(h=c[d]).i]=h.x(l);return u.join("")})}function Ys(e,t){var n=typeof t,i;return t==null||n==="boolean"?Ab(t):(n==="number"?ha:n==="string"?(i=kg(t))?(t=i,RS):Xz:t instanceof kg?RS:t instanceof Date?Gz:qz(t)?o3:Array.isArray(t)?Hz:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Yz:ha)(e,t)}function xee(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Eee(e,t){var n=_b(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function op(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var n$=180/Math.PI,zS={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vz(e,t,n,i,r,a){var o,u,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*i)&&(n-=e*c,i-=t*c),(u=Math.sqrt(n*n+i*i))&&(n/=u,i/=u,c/=u),e*i<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*n$,skewX:Math.atan(c)*n$,scaleX:o,scaleY:u}}var h1;function Dee(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?zS:Vz(t.a,t.b,t.c,t.d,t.e,t.f)}function Cee(e){return e==null||(h1||(h1=document.createElementNS("http://www.w3.org/2000/svg","g")),h1.setAttribute("transform",e),!(e=h1.transform.baseVal.consolidate()))?zS:(e=e.matrix,Vz(e.a,e.b,e.c,e.d,e.e,e.f))}function Wz(e,t,n,i){function r(l){return l.length?l.pop()+" ":""}function a(l,d,h,p,y,v){if(l!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:ha(l,h)},{i:b-2,x:ha(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function o(l,d,h,p){l!==d?(l-d>180?d+=360:d-l>180&&(l+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:ha(l,d)})):d&&h.push(r(h)+"rotate("+d+i)}function u(l,d,h,p){l!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:ha(l,d)}):d&&h.push(r(h)+"skewX("+d+i)}function c(l,d,h,p,y,v){if(l!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:ha(l,h)},{i:b-2,x:ha(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(l,d){var h=[],p=[];return l=e(l),d=e(d),a(l.translateX,l.translateY,d.translateX,d.translateY,h,p),o(l.rotate,d.rotate,h,p),u(l.skewX,d.skewX,h,p),c(l.scaleX,l.scaleY,d.scaleX,d.scaleY,h,p),l=d=null,function(y){for(var v=-1,b=p.length,x;++v<b;)h[(x=p[v]).i]=x.x(y);return h.join("")}}}var See=Wz(Dee,"px, ","px)","deg)"),Aee=Wz(Cee,", ",")",")"),_ee=1e-12;function i$(e){return((e=Math.exp(e))+1/e)/2}function wee(e){return((e=Math.exp(e))-1/e)/2}function Fee(e){return((e=Math.exp(2*e))-1)/(e+1)}const kee=(function e(t,n,i){function r(a,o){var u=a[0],c=a[1],l=a[2],d=o[0],h=o[1],p=o[2],y=d-u,v=h-c,b=y*y+v*v,x,D;if(b<_ee)D=Math.log(p/l)/t,x=function(F){return[u+F*y,c+F*v,l*Math.exp(t*F*D)]};else{var S=Math.sqrt(b),A=(p*p-l*l+i*b)/(2*l*n*S),w=(p*p-l*l-i*b)/(2*p*n*S),_=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(w*w+1)-w);D=(k-_)/t,x=function(F){var M=F*D,N=i$(_),P=l/(n*S)*(N*Fee(t*M+_)-wee(_));return[u+P*y,c+P*v,l*N/i$(t*M+_)]}}return x.duration=D*1e3*t/Math.SQRT2,x}return r.rho=function(a){var o=Math.max(.001,+a),u=o*o,c=u*u;return e(o,u,c)},r})(Math.SQRT2,2,4);function Qz(e){return function(t,n){var i=e((t=My(t)).h,(n=My(n)).h),r=Un(t.s,n.s),a=Un(t.l,n.l),o=Un(t.opacity,n.opacity);return function(u){return t.h=i(u),t.s=r(u),t.l=a(u),t.opacity=o(u),t+""}}}const Tee=Qz(_b);var $ee=Qz(Un);function Mee(e,t){var n=Un((e=Ny(e)).l,(t=Ny(t)).l),i=Un(e.a,t.a),r=Un(e.b,t.b),a=Un(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=i(o),e.b=r(o),e.opacity=a(o),e+""}}function Zz(e){return function(t,n){var i=e((t=Ry(t)).h,(n=Ry(n)).h),r=Un(t.c,n.c),a=Un(t.l,n.l),o=Un(t.opacity,n.opacity);return function(u){return t.h=i(u),t.c=r(u),t.l=a(u),t.opacity=o(u),t+""}}}const Oee=Zz(_b);var Nee=Zz(Un);function Kz(e){return(function t(n){n=+n;function i(r,a){var o=e((r=NS(r)).h,(a=NS(a)).h),u=Un(r.s,a.s),c=Un(r.l,a.l),l=Un(r.opacity,a.opacity);return function(d){return r.h=o(d),r.s=u(d),r.l=c(Math.pow(d,n)),r.opacity=l(d),r+""}}return i.gamma=t,i})(1)}const Ree=Kz(_b);var Bee=Kz(Un);function u3(e,t){t===void 0&&(t=e,e=Ys);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(o){var u=Math.max(0,Math.min(i-1,Math.floor(o*=i)));return a[u](o-u)}}function zee(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Lee=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Ys,interpolateArray:yee,interpolateBasis:Iz,interpolateBasisClosed:Uz,interpolateCubehelix:Ree,interpolateCubehelixLong:Bee,interpolateDate:Gz,interpolateDiscrete:xee,interpolateHcl:Oee,interpolateHclLong:Nee,interpolateHsl:Tee,interpolateHslLong:$ee,interpolateHue:Eee,interpolateLab:Mee,interpolateNumber:ha,interpolateNumberArray:o3,interpolateObject:Yz,interpolateRgb:RS,interpolateRgbBasis:pee,interpolateRgbBasisClosed:mee,interpolateRound:op,interpolateString:Xz,interpolateTransformCss:See,interpolateTransformSvg:Aee,interpolateZoom:kee,piecewise:u3,quantize:zee},Symbol.toStringTag,{value:"Module"}));function Iee(e){return function(){return e}}function LS(e){return+e}var r$=[0,1];function Zi(e){return e}function IS(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Iee(isNaN(t)?NaN:.5)}function Uee(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Pee(e,t,n){var i=e[0],r=e[1],a=t[0],o=t[1];return r<i?(i=IS(r,i),a=n(o,a)):(i=IS(i,r),a=n(a,o)),function(u){return a(i(u))}}function jee(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),o=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<i;)r[o]=IS(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(u){var c=ws(e,u,1,i)-1;return a[c](r[c](u))}}function up(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function wb(){var e=r$,t=r$,n=Ys,i,r,a,o=Zi,u,c,l;function d(){var p=Math.min(e.length,t.length);return o!==Zi&&(o=Uee(e[0],e[p-1])),u=p>2?jee:Pee,c=l=null,h}function h(p){return p==null||isNaN(p=+p)?a:(c||(c=u(e.map(i),t,n)))(i(o(p)))}return h.invert=function(p){return o(r((l||(l=u(t,e.map(i),ha)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,LS),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=op,d()},h.clamp=function(p){return arguments.length?(o=p?!0:Zi,d()):o!==Zi},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function Jz(){return wb()(Zi,Zi)}function eL(e,t,n,i){var r=Fs(e,t,n),a;switch(i=ic(i??",f"),i.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=_R(r,o))&&(i.precision=a),V_(i,o)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=wR(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=AR(r))&&(i.precision=a-(i.type==="%")*2);break}}return nb(i)}function kc(e){var t=e.domain;return e.ticks=function(n){var i=t();return yS(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return eL(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,o=i[r],u=i[a],c,l,d=10;for(u<o&&(l=o,o=u,u=l,l=r,r=a,a=l);d-- >0;){if(l=vS(o,u,n),l===c)return i[r]=o,i[a]=u,t(i);if(l>0)o=Math.floor(o/l)*l,u=Math.ceil(u/l)*l;else if(l<0)o=Math.ceil(o*l)/l,u=Math.floor(u*l)/l;else break;c=l}return e},e}function tL(){var e=Jz();return e.copy=function(){return up(e,tL())},bo.apply(e,arguments),kc(e)}function nL(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,LS),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return nL(e).unknown(t)},e=arguments.length?Array.from(e,LS):[0,1],kc(n)}function iL(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],o;return a<r&&(o=n,n=i,i=o,o=r,r=a,a=o),e[n]=t.floor(r),e[i]=t.ceil(a),e}function a$(e){return Math.log(e)}function o$(e){return Math.exp(e)}function qee(e){return-Math.log(-e)}function Hee(e){return-Math.exp(-e)}function Gee(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Yee(e){return e===10?Gee:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xee(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function u$(e){return(t,n)=>-e(-t,n)}function s3(e){const t=e(a$,o$),n=t.domain;let i=10,r,a;function o(){return r=Xee(i),a=Yee(i),n()[0]<0?(r=u$(r),a=u$(a),e(qee,Hee)):e(a$,o$),t}return t.base=function(u){return arguments.length?(i=+u,o()):i},t.domain=function(u){return arguments.length?(n(u),o()):n()},t.ticks=u=>{const c=n();let l=c[0],d=c[c.length-1];const h=d<l;h&&([l,d]=[d,l]);let p=r(l),y=r(d),v,b;const x=u==null?10:+u;let D=[];if(!(i%1)&&y-p<x){if(p=Math.floor(p),y=Math.ceil(y),l>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<l)){if(b>d)break;D.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<l)){if(b>d)break;D.push(b)}D.length*2<x&&(D=yS(l,d,x))}else D=yS(p,y,Math.min(y-p,x)).map(a);return h?D.reverse():D},t.tickFormat=(u,c)=>{if(u==null&&(u=10),c==null&&(c=i===10?"s":","),typeof c!="function"&&(!(i%1)&&(c=ic(c)).precision==null&&(c.trim=!0),c=nb(c)),u===1/0)return c;const l=Math.max(1,i*u/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=l?c(d):""}},t.nice=()=>n(iL(n(),{floor:u=>a(Math.floor(r(u))),ceil:u=>a(Math.ceil(r(u)))})),t}function rL(){const e=s3(wb()).domain([1,10]);return e.copy=()=>up(e,rL()).base(e.base()),bo.apply(e,arguments),e}function s$(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function l$(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function l3(e){var t=1,n=e(s$(t),l$(t));return n.constant=function(i){return arguments.length?e(s$(t=+i),l$(t)):t},kc(n)}function aL(){var e=l3(wb());return e.copy=function(){return up(e,aL()).constant(e.constant())},bo.apply(e,arguments)}function c$(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Vee(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Wee(e){return e<0?-e*e:e*e}function c3(e){var t=e(Zi,Zi),n=1;function i(){return n===1?e(Zi,Zi):n===.5?e(Vee,Wee):e(c$(n),c$(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},kc(t)}function f3(){var e=c3(wb());return e.copy=function(){return up(e,f3()).exponent(e.exponent())},bo.apply(e,arguments),e}function Qee(){return f3.apply(null,arguments).exponent(.5)}function oL(){var e=[],t=[],n=[],i;function r(){var o=0,u=Math.max(1,t.length);for(n=new Array(u-1);++o<u;)n[o-1]=bR(e,o/u);return a}function a(o){return o==null||isNaN(o=+o)?i:t[ws(n,o)]}return a.invertExtent=function(o){var u=t.indexOf(o);return u<0?[NaN,NaN]:[u>0?n[u-1]:e[0],u<n.length?n[u]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let u of o)u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(lu),r()},a.range=function(o){return arguments.length?(t=Array.from(o),r()):t.slice()},a.unknown=function(o){return arguments.length?(i=o,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return oL().domain(e).range(t).unknown(i)},bo.apply(a,arguments)}function uL(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function o(c){return c!=null&&c<=c?r[ws(i,c,0,n)]:a}function u(){var c=-1;for(i=new Array(n);++c<n;)i[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,u()):[e,t]},o.range=function(c){return arguments.length?(n=(r=Array.from(c)).length-1,u()):r.slice()},o.invertExtent=function(c){var l=r.indexOf(c);return l<0?[NaN,NaN]:l<1?[e,i[0]]:l>=n?[i[n-1],t]:[i[l-1],i[l]]},o.unknown=function(c){return arguments.length&&(a=c),o},o.thresholds=function(){return i.slice()},o.copy=function(){return uL().domain([e,t]).range(r).unknown(a)},bo.apply(kc(o),arguments)}function sL(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[ws(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return sL().domain(e).range(t).unknown(n)},bo.apply(r,arguments)}function Zee(e){return new Date(e)}function Kee(e){return e instanceof Date?+e:+new Date(+e)}function d3(e,t,n,i,r,a,o,u,c,l){var d=Jz(),h=d.invert,p=d.domain,y=l(".%L"),v=l(":%S"),b=l("%I:%M"),x=l("%I %p"),D=l("%a %d"),S=l("%b %d"),A=l("%B"),w=l("%Y");function _(k){return(c(k)<k?y:u(k)<k?v:o(k)<k?b:a(k)<k?x:i(k)<k?r(k)<k?D:S:n(k)<k?A:w)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?p(Array.from(k,Kee)):p().map(Zee)},d.ticks=function(k){var F=p();return e(F[0],F[F.length-1],k??10)},d.tickFormat=function(k,F){return F==null?_:l(F)},d.nice=function(k){var F=p();return(!k||typeof k.range!="function")&&(k=t(F[0],F[F.length-1],k??10)),k?p(iL(F,k)):d},d.copy=function(){return up(d,d3(e,t,n,i,r,a,o,u,c,l))},d}function Jee(){return bo.apply(d3(aQ,oQ,lo,Cg,Vd,cu,ab,ib,au,J_).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ete(){return bo.apply(d3(iQ,rQ,co,Sg,Wd,Ds,ob,rb,au,ew).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Fb(){var e=0,t=1,n,i,r,a,o=Zi,u=!1,c;function l(h){return h==null||isNaN(h=+h)?c:o(r===0?.5:(h=(a(h)-n)*r,u?Math.max(0,Math.min(1,h)):h))}l.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),l):[e,t]},l.clamp=function(h){return arguments.length?(u=!!h,l):u},l.interpolator=function(h){return arguments.length?(o=h,l):o};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,o=h(y,v),l):[o(0),o(1)]}}return l.range=d(Ys),l.rangeRound=d(op),l.unknown=function(h){return arguments.length?(c=h,l):c},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),l}}function Xs(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function h3(){var e=kc(Fb()(Zi));return e.copy=function(){return Xs(e,h3())},Hs.apply(e,arguments)}function lL(){var e=s3(Fb()).domain([1,10]);return e.copy=function(){return Xs(e,lL()).base(e.base())},Hs.apply(e,arguments)}function cL(){var e=l3(Fb());return e.copy=function(){return Xs(e,cL()).constant(e.constant())},Hs.apply(e,arguments)}function g3(){var e=c3(Fb());return e.copy=function(){return Xs(e,g3()).exponent(e.exponent())},Hs.apply(e,arguments)}function tte(){return g3.apply(null,arguments).exponent(.5)}function kb(){var e=0,t=.5,n=1,i=1,r,a,o,u,c,l=Zi,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?u:c),l(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),o=d(n=+n),u=r===a?0:.5/(a-r),c=a===o?0:.5/(o-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(l=b,y):l};function v(b){return function(x){var D,S,A;return arguments.length?([D,S,A]=x,l=u3(b,[D,S,A]),y):[l(0),l(.5),l(1)]}}return y.range=v(Ys),y.rangeRound=v(op),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),o=b(n),u=r===a?0:.5/(a-r),c=a===o?0:.5/(o-a),i=a<r?-1:1,y}}function fL(){var e=kc(kb()(Zi));return e.copy=function(){return Xs(e,fL())},Hs.apply(e,arguments)}function dL(){var e=s3(kb()).domain([.1,1,10]);return e.copy=function(){return Xs(e,dL()).base(e.base())},Hs.apply(e,arguments)}function hL(){var e=l3(kb());return e.copy=function(){return Xs(e,hL()).constant(e.constant())},Hs.apply(e,arguments)}function p3(){var e=c3(kb());return e.copy=function(){return Xs(e,p3()).exponent(e.exponent())},Hs.apply(e,arguments)}function nte(){return p3.apply(null,arguments).exponent(.5)}function xo(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const ite=xo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),rte=xo("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),ate=xo("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),ote=xo("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),ute=xo("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),ste=xo("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),lte=xo("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),cte=xo("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),fte=xo("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),dte=xo("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function m3(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const hte="identity",pd="linear",bu="log",sp="pow",lp="sqrt",Tb="symlog",ac="time",oc="utc",ro="sequential",eh="diverging",md="quantile",$b="quantize",Mb="threshold",y3="ordinal",US="point",gL="band",v3="bin-ordinal",Mn="continuous",cp="discrete",fp="discretizing",ta="interpolating",b3="temporal";function gte(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function pte(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,o,u,c,l;for(r<i&&(u=i,i=r,r=u),c=0,l=n.length;c<l;++c)n[c]>=i&&n[c]<=r&&(a<0&&(a=c),o=c);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[o]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function x3(){const e=n3().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,o=!1,u=0,c=0,l=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=m3(h,u,c);let b=i[p-0];r=(y-b)/(v||1),o&&(r=Math.floor(r)),b+=(y-b-r*(h-u))*l,a=r*(1-u),o&&(b=Math.round(b),a=Math.round(a));const x=vr(h).map(D=>b+r*D);return n(p?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],o=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(o=!!h,d()):o},e.padding=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),u=c,d()):u},e.paddingInner=function(h){return arguments.length?(u=Math.max(0,Math.min(1,h)),d()):u},e.paddingOuter=function(h){return arguments.length?(c=Math.max(0,Math.min(1,h)),d()):c},e.align=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],x=+h[1],D,S,A;if(!(b!==b||x!==x)&&(x<b&&(A=b,b=x,x=A),!(x<y[0]||b>i[1-p])))return D=Math.max(0,ws(y,b)-1),S=b===x?D:ws(y,x)-1,b-y[D]>a+1e-10&&++D,p&&(A=D,D=v-S,S=v-A),D>S?void 0:t().slice(D,S+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return x3().domain(t()).range(i).round(o).paddingInner(u).paddingOuter(c).align(l)},d()}function pL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return pL(t())},e}function mte(){return pL(x3().paddingInner(1))}var yte=Array.prototype.map;function vte(e){return yte.call(e,pi)}const bte=Array.prototype.slice;function mL(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(ws(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=vte(i),n):e.slice()},n.range=function(i){return arguments.length?(t=bte.call(i),n):t.slice()},n.tickFormat=function(i,r){return eL(e[0],vt(e),i??10,r)},n.copy=function(){return mL().domain(n.domain()).range(n.range())},n}const By=new Map,yL=Symbol("vega_scale");function vL(e){return e[yL]=!0,e}function f$(e){return e&&e[yL]===!0}function xte(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?gte(a):a.invertExtent?pte(a):void 0),a.type=e,vL(a)};return i.metadata=Sa(Ie(n)),i}function At(e,t,n){return arguments.length>1?(By.set(e,xte(e,t,n)),this):bL(e)?By.get(e):void 0}At(hte,nL);At(pd,tL,Mn);At(bu,rL,[Mn,bu]);At(sp,f3,Mn);At(lp,Qee,Mn);At(Tb,aL,Mn);At(ac,Jee,[Mn,b3]);At(oc,ete,[Mn,b3]);At(ro,h3,[Mn,ta]);At(`${ro}-${pd}`,h3,[Mn,ta]);At(`${ro}-${bu}`,lL,[Mn,ta,bu]);At(`${ro}-${sp}`,g3,[Mn,ta]);At(`${ro}-${lp}`,tte,[Mn,ta]);At(`${ro}-${Tb}`,cL,[Mn,ta]);At(`${eh}-${pd}`,fL,[Mn,ta]);At(`${eh}-${bu}`,dL,[Mn,ta,bu]);At(`${eh}-${sp}`,p3,[Mn,ta]);At(`${eh}-${lp}`,nte,[Mn,ta]);At(`${eh}-${Tb}`,hL,[Mn,ta]);At(md,oL,[fp,md]);At($b,uL,fp);At(Mb,sL,fp);At(v3,mL,[cp,fp]);At(y3,n3,cp);At(gL,x3,cp);At(US,mte,cp);function bL(e){return By.has(e)}function Tc(e,t){const n=By.get(e);return n&&n.metadata[t]}function E3(e){return Tc(e,Mn)}function yd(e){return Tc(e,cp)}function PS(e){return Tc(e,fp)}function xL(e){return Tc(e,bu)}function Ete(e){return Tc(e,b3)}function EL(e){return Tc(e,ta)}function DL(e){return Tc(e,md)}const Dte=["clamp","base","constant","exponent"];function CL(e,t){const n=t[0],i=vt(t)-n;return function(r){return e(n+r*i)}}function Ob(e,t,n){return u3(D3(t||"rgb",n),e)}function SL(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function AL(e,t,n){const i=n-t;let r,a,o;return!i||!Number.isFinite(i)?Di(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),o=At(a)().domain([t,n]).range([0,1]),Dte.forEach(u=>e[u]?o[u](e[u]()):0),o)}function D3(e,t){const n=Lee[Cte(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Cte(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Ste={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ate={accent:rte,category10:ite,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:ate,observable10:ote,paired:ute,pastel1:ste,pastel2:lte,set1:cte,set2:fte,set3:dte,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function _L(e){if(be(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function wL(e,t){for(const n in e)C3(n,t(e[n]))}const d$={};wL(Ate,_L);wL(Ste,e=>Ob(_L(e)));function C3(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(d$[e]=t,this):d$[e]}const W1="symbol",_te="discrete",wte="gradient",Fte=e=>be(e)?e.map(t=>String(t)):String(e),kte=(e,t)=>e[1]-t[1],Tte=(e,t)=>t[1]-e[1];function S3(e,t,n){let i;return Ct(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(tp(e.domain())/n||1)+1))),Le(t)&&(i=t.step,t=t.interval),ze(t)&&(t=e.type===ac?Qd(t):e.type==oc?Zd(t):me("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function FL(e,t,n){let i=e.range(),r=i[0],a=vt(i),o=kte;if(r>a&&(i=a,a=r,r=i,o=Tte),r=Math.floor(r),a=Math.ceil(a),t=t.map(u=>[u,e(u)]).filter(u=>r<=u[1]&&u[1]<=a).sort(o).map(u=>u[0]),n>0&&t.length>1){const u=[t[0],vt(t)];for(;t.length>n&&t.length>=3;)t=t.filter((c,l)=>!(l%2));t.length<3&&(t=u)}return t}function A3(e,t){return e.bins?FL(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function kL(e,t,n,i,r,a){const o=t.type;let u=Fte;if(o===ac||r===ac)u=e.timeFormat(i);else if(o===oc||r===oc)u=e.utcFormat(i);else if(xL(o)){const c=e.formatFloat(i);if(a||t.bins)u=c;else{const l=TL(t,n,!1);u=d=>l(d)?c(d):""}}else if(t.tickFormat){const c=t.domain();u=e.formatSpan(c[0],c[c.length-1],n,i)}else i&&(u=e.format(i));return u}function TL(e,t,n){const i=A3(e,t),r=e.base(),a=Math.log(r),o=Math.max(1,r*t/i.length),u=c=>{let l=c/Math.pow(r,Math.round(Math.log(c)/a));return l*r<r-.5&&(l*=r),l<=o};return n?i.filter(u):u}const jS={[md]:"quantiles",[$b]:"thresholds",[Mb]:"domain"},$L={[md]:"quantiles",[$b]:"domain"};function ML(e,t){return e.bins?Ote(e.bins):e.type===bu?TL(e,t,!0):jS[e.type]?Mte(e[jS[e.type]]()):A3(e,t)}function $te(e,t,n){const i=t[$L[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],o;for(o=1;o<r;++o)a=Math.min(a,i[o]-i[o-1]);return e.formatSpan(0,a,30,n)}function Mte(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Ote(e){const t=e.slice(0,-1);return t.max=vt(e),t}const Nte=e=>jS[e.type]||e.bins;function OL(e,t,n,i,r,a,o){const u=$L[t.type]&&a!==ac&&a!==oc?$te(e,t,r):kL(e,t,n,r,a,o);return i===W1&&Nte(t)?Rte(u):i===_te?Bte(u):zte(u)}const Rte=e=>(t,n,i)=>{const r=h$(i[n+1],h$(i.max,1/0)),a=g$(t,e),o=g$(r,e);return a&&o?a+"  "+o:o?"< "+o:" "+a},h$=(e,t)=>e??t,Bte=e=>(t,n)=>n?e(t):null,zte=e=>t=>e(t),g$=(e,t)=>Number.isFinite(e)?t(e):null;function Lte(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+vt(t),a=r-i;if(e.type===Mb){const o=n?a/n:.1;i-=o,r+=o,a=r-i}return o=>(o-i)/a}function Ite(e,t,n,i){const r=i||t.type;return ze(n)&&Ete(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===ac?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===oc?e.utcFormat("%A, %d %B %Y, %X UTC"):OL(e,t,5,null,n,i,!0)}function NL(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=Ite(e,t,n.format,n.formatType);if(PS(t.type)){const a=ML(t).slice(1).map(r),o=a.length;return`${o} boundar${o===1?"y":"ies"}: ${a.join(", ")}`}else if(yd(t.type)){const a=t.domain(),o=a.length,u=o>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${o} value${o===1?"":"s"}: ${u}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(vt(a))}`}}let RL=0;function Ute(){RL=0}const zy="p_";function _3(e){return e&&e.gradient}function BL(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?zy:"";return r||(r=e.id="gradient_"+RL++,i==="radial"?(e.x1=Ga(e.x1,.5),e.y1=Ga(e.y1,.5),e.r1=Ga(e.r1,0),e.x2=Ga(e.x2,.5),e.y2=Ga(e.y2,.5),e.r2=Ga(e.r2,.5),a=zy):(e.x1=Ga(e.x1,0),e.y1=Ga(e.y1,0),e.x2=Ga(e.x2,1),e.y2=Ga(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function Ga(e,t){return e??t}function zL(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const p$={basis:{curve:BJ},"basis-closed":{curve:zJ},"basis-open":{curve:LJ},bundle:{curve:IJ,tension:"beta",value:.85},cardinal:{curve:UJ,tension:"tension",value:0},"cardinal-open":{curve:jJ,tension:"tension",value:0},"cardinal-closed":{curve:PJ,tension:"tension",value:0},"catmull-rom":{curve:qJ,tension:"alpha",value:.5},"catmull-rom-closed":{curve:HJ,tension:"alpha",value:.5},"catmull-rom-open":{curve:GJ,tension:"alpha",value:.5},linear:{curve:Zw},"linear-closed":{curve:YJ},monotone:{horizontal:VJ,vertical:XJ},natural:{curve:WJ},step:{curve:QJ},"step-after":{curve:KJ},"step-before":{curve:ZJ}};function w3(e,t,n){var i=Ue(p$,e)&&p$[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Pte={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},jte=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,qte=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Hte=/^((\s+,?\s*)|(,\s*))/,Gte=/^[01]/;function vd(e){const t=[];return(e.match(jte)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),o=Pte[a],u=Yte(a,o,i.slice(1).trim()),c=u.length;if(c<o||c&&c%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...u.slice(0,o)]),c!==o){a==="m"&&(r=r==="M"?"L":"l");for(let l=o;l<c;l+=o)t.push([r,...u.slice(l,l+o)])}}),t}function Yte(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const o=e==="a"&&(a===3||a===4)?Gte:qte,u=n.slice(r).match(o);if(u===null)throw Error("Invalid SVG path, incorrect parameter type");r+=u[0].length,i.push(+u[0]);const c=n.slice(r).match(Hte);c!==null&&(r+=c[0].length)}return i}const Ms=Math.PI/180,Xte=1e-14,Il=Math.PI/2,Za=Math.PI*2,$f=Math.sqrt(3)/2;var HD={},GD={},LL=[].join;function Vte(e,t,n,i,r,a,o,u,c){const l=LL.call(arguments);if(HD[l])return HD[l];const d=o*Ms,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(u-e)*.5+h*(c-t)*.5,v=p*(c-t)*.5-h*(u-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const x=p/n,D=h/n,S=-h/i,A=p/i,w=x*u+D*c,_=S*u+A*c,k=x*e+D*t,F=S*e+A*t;let N=1/((k-w)*(k-w)+(F-_)*(F-_))-.25;N<0&&(N=0);let P=Math.sqrt(N);a==r&&(P=-P);const L=.5*(w+k)-P*(F-_),H=.5*(_+F)+P*(k-w),I=Math.atan2(_-H,w-L);let z=Math.atan2(F-H,k-L)-I;z<0&&a===1?z+=Za:z>0&&a===0&&(z-=Za);const T=Math.ceil(Math.abs(z/(Il+.001))),R=[];for(let q=0;q<T;++q){const G=I+q*z/T,O=I+(q+1)*z/T;R[q]=[L,H,G,O,n,i,h,p]}return HD[l]=R}function Wte(e){const t=LL.call(e);if(GD[t])return GD[t];var n=e[0],i=e[1],r=e[2],a=e[3],o=e[4],u=e[5],c=e[6],l=e[7];const d=l*o,h=-c*u,p=c*o,y=l*u,v=Math.cos(r),b=Math.sin(r),x=Math.cos(a),D=Math.sin(a),S=.5*(a-r),A=Math.sin(S*.5),w=8/3*A*A/Math.sin(S),_=n+v-w*b,k=i+b+w*v,F=n+x,M=i+D,N=F+w*D,P=M-w*x;return GD[t]=[d*_+h*k,p*_+y*k,d*N+h*P,p*N+y*P,d*F+h*M,p*F+y*M]}const Lr=["l",0,0,0,0,0,0,0];function Qte(e,t,n){const i=Lr[0]=e[0];if(i==="a"||i==="A")Lr[1]=t*e[1],Lr[2]=n*e[2],Lr[3]=e[3],Lr[4]=e[4],Lr[5]=e[5],Lr[6]=t*e[6],Lr[7]=n*e[7];else if(i==="h"||i==="H")Lr[1]=t*e[1];else if(i==="v"||i==="V")Lr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)Lr[r]=(r%2==1?t:n)*e[r];return Lr}function $g(e,t,n,i,r,a){var o,u=null,c=0,l=0,d=0,h=0,p,y,v,b,x=0,D=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var S=0,A=t.length;S<A;++S){switch(o=t[S],(r!==1||a!==1)&&(o=Qte(o,r,a)),o[0]){case"l":c+=o[1],l+=o[2],e.lineTo(c+n,l+i);break;case"L":c=o[1],l=o[2],e.lineTo(c+n,l+i);break;case"h":c+=o[1],e.lineTo(c+n,l+i);break;case"H":c=o[1],e.lineTo(c+n,l+i);break;case"v":l+=o[1],e.lineTo(c+n,l+i);break;case"V":l=o[1],e.lineTo(c+n,l+i);break;case"m":c+=o[1],l+=o[2],x=c,D=l,e.moveTo(c+n,l+i);break;case"M":c=o[1],l=o[2],x=c,D=l,e.moveTo(c+n,l+i);break;case"c":p=c+o[5],y=l+o[6],d=c+o[3],h=l+o[4],e.bezierCurveTo(c+o[1]+n,l+o[2]+i,d+n,h+i,p+n,y+i),c=p,l=y;break;case"C":c=o[5],l=o[6],d=o[3],h=o[4],e.bezierCurveTo(o[1]+n,o[2]+i,d+n,h+i,c+n,l+i);break;case"s":p=c+o[3],y=l+o[4],d=2*c-d,h=2*l-h,e.bezierCurveTo(d+n,h+i,c+o[1]+n,l+o[2]+i,p+n,y+i),d=c+o[1],h=l+o[2],c=p,l=y;break;case"S":p=o[3],y=o[4],d=2*c-d,h=2*l-h,e.bezierCurveTo(d+n,h+i,o[1]+n,o[2]+i,p+n,y+i),c=p,l=y,d=o[1],h=o[2];break;case"q":p=c+o[3],y=l+o[4],d=c+o[1],h=l+o[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),c=p,l=y;break;case"Q":p=o[3],y=o[4],e.quadraticCurveTo(o[1]+n,o[2]+i,p+n,y+i),c=p,l=y,d=o[1],h=o[2];break;case"t":p=c+o[1],y=l+o[2],u[0].match(/[QqTt]/)===null?(d=c,h=l):u[0]==="t"?(d=2*c-v,h=2*l-b):u[0]==="q"&&(d=2*c-d,h=2*l-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),c=p,l=y,d=c+o[1],h=l+o[2];break;case"T":p=o[1],y=o[2],d=2*c-d,h=2*l-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),c=p,l=y;break;case"a":m$(e,c+n,l+i,[o[1],o[2],o[3],o[4],o[5],o[6]+c+n,o[7]+l+i]),c+=o[6],l+=o[7];break;case"A":m$(e,c+n,l+i,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+i]),c=o[6],l=o[7];break;case"z":case"Z":c=x,l=D,e.closePath();break}u=o}}function m$(e,t,n,i){const r=Vte(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const o=Wte(r[a]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const y$=.5773502691896257,v$={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Za)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n,r=i-n*y$,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n,r=i-n*y$;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=$f*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function IL(e){return Ue(v$,e)?v$[e]:Zte(e)}var YD={};function Zte(e){if(!Ue(YD,e)){const t=vd(e);YD[e]={draw:function(n,i){$g(n,t,0,0,Math.sqrt(i)/2)}}}return YD[e]}const ns=.448084975506;function Kte(e){return e.x}function Jte(e){return e.y}function ene(e){return e.width}function tne(e){return e.height}function Yo(e){return typeof e=="function"?e:()=>+e}function g1(e,t,n){return Math.max(t,Math.min(e,n))}function UL(){var e=Kte,t=Jte,n=ene,i=tne,r=Yo(0),a=r,o=r,u=r,c=null;function l(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),x=+n.call(this,d),D=+i.call(this,d),S=Math.min(x,D)/2,A=g1(+r.call(this,d),0,S),w=g1(+a.call(this,d),0,S),_=g1(+o.call(this,d),0,S),k=g1(+u.call(this,d),0,S);if(c||(c=y=xb()),A<=0&&w<=0&&_<=0&&k<=0)c.rect(v,b,x,D);else{var F=v+x,M=b+D;c.moveTo(v+A,b),c.lineTo(F-w,b),c.bezierCurveTo(F-ns*w,b,F,b+ns*w,F,b+w),c.lineTo(F,M-k),c.bezierCurveTo(F,M-ns*k,F-ns*k,M,F-k,M),c.lineTo(v+_,M),c.bezierCurveTo(v+ns*_,M,v,M-ns*_,v,M-_),c.lineTo(v,b+A),c.bezierCurveTo(v,b+ns*A,v+ns*A,b,v+A,b),c.closePath()}if(y)return c=null,y+""||null}return l.x=function(d){return arguments.length?(e=Yo(d),l):e},l.y=function(d){return arguments.length?(t=Yo(d),l):t},l.width=function(d){return arguments.length?(n=Yo(d),l):n},l.height=function(d){return arguments.length?(i=Yo(d),l):i},l.cornerRadius=function(d,h,p,y){return arguments.length?(r=Yo(d),a=h!=null?Yo(h):r,u=p!=null?Yo(p):r,o=y!=null?Yo(y):a,l):r},l.context=function(d){return arguments.length?(c=d??null,l):c},l}function PL(){var e,t,n,i,r=null,a,o,u,c;function l(h,p,y){const v=y/2;if(a){var b=u-p,x=h-o;if(b||x){var D=Math.hypot(b,x),S=(b/=D)*c,A=(x/=D)*c,w=Math.atan2(x,b);r.moveTo(o-S,u-A),r.lineTo(h-b*v,p-x*v),r.arc(h,p,v,w-Math.PI,w),r.lineTo(o+S,u+A),r.arc(o,u,c,w,w+Math.PI)}else r.arc(h,p,v,0,Za);r.closePath()}else a=1;o=h,u=p,c=v}function d(h){var p,y=h.length,v,b=!1,x;for(r==null&&(r=x=xb()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&l(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(x)return r=null,x+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function dp(e,t){return e??t}const hp=e=>e.x||0,gp=e=>e.y||0,nne=e=>e.width||0,ine=e=>e.height||0,rne=e=>(e.x||0)+(e.width||0),ane=e=>(e.y||0)+(e.height||0),one=e=>e.startAngle||0,une=e=>e.endAngle||0,sne=e=>e.padAngle||0,lne=e=>e.innerRadius||0,cne=e=>e.outerRadius||0,fne=e=>e.cornerRadius||0,dne=e=>dp(e.cornerRadiusTopLeft,e.cornerRadius)||0,hne=e=>dp(e.cornerRadiusTopRight,e.cornerRadius)||0,gne=e=>dp(e.cornerRadiusBottomRight,e.cornerRadius)||0,pne=e=>dp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,mne=e=>dp(e.size,64),yne=e=>e.size||1,Nb=e=>e.defined!==!1,vne=e=>IL(e.shape||"circle"),bne=OJ().startAngle(one).endAngle(une).padAngle(sne).innerRadius(lne).outerRadius(cne).cornerRadius(fne),xne=mz().x(hp).y1(gp).y0(ane).defined(Nb),Ene=mz().y(gp).x1(hp).x0(rne).defined(Nb),Dne=pz().x(hp).y(gp).defined(Nb),Cne=UL().x(hp).y(gp).width(nne).height(ine).cornerRadius(dne,hne,gne,pne),Sne=RJ().type(vne).size(mne),Ane=PL().x(hp).y(gp).defined(Nb).size(yne);function F3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function _ne(e,t){return bne.context(e)(t)}function wne(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Ene:xne).curve(w3(i,n.orient,n.tension)).context(e)(t)}function Fne(e,t){const n=t[0],i=n.interpolate||"linear";return Dne.curve(w3(i,n.orient,n.tension)).context(e)(t)}function th(e,t,n,i){return Cne.context(e)(t,n,i)}function kne(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Tne(e,t){return Sne.context(e)(t)}function $ne(e,t){return Ane.context(e)(t)}var jL=1;function Mne(){jL=1}function k3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+jL++),o=r.clipping[a]||(r.clipping[a]={id:a});return rt(i)?o.path=i(null):F3(n)?o.path=th(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+a+")"}function Cn(e){this.clear(),e&&this.union(e)}Cn.prototype={clone(){return new Cn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:o}=this,u=Math.cos(e),c=Math.sin(e),l=t-t*u+n*c,d=n-t*c-n*u;return[u*i-c*r+l,c*i+u*r+d,u*i-c*o+l,c*i+u*o+d,u*a-c*r+l,c*a+u*r+d,u*a-c*o+l,c*a+u*o+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function Rb(e){this.mark=e,this.bounds=this.bounds||new Cn}function Bb(e){Rb.call(this,e),this.items=this.items||[]}Re(Bb,Rb);class qL{constructor(t){this._pending=0,this._loader=t||sb()}pending(){return this._pending}sanitizeURL(t){const n=this;return b$(n),n._loader.sanitize(t,{context:"href"}).then(i=>(D0(n),i)).catch(()=>(D0(n),null))}loadImage(t){const n=this,i=JJ();return b$(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const o=new i,u=Ue(r,"crossOrigin")?r.crossOrigin:"anonymous";return u!=null&&(o.crossOrigin=u),o.onload=()=>D0(n),o.onerror=()=>D0(n),o.src=a,o}).catch(r=>(D0(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function b$(e){e._pending+=1}function D0(e){e._pending-=1}function Su(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?One(t,i):0))}return e}function One(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Nne=Za-1e-8;let zb,Q1,Z1,Gl,qS,K1,HS,GS;const ds=(e,t)=>zb.add(e,t),J1=(e,t)=>ds(Q1=e,Z1=t),x$=e=>ds(e,zb.y1),E$=e=>ds(zb.x1,e),Ul=(e,t)=>qS*e+HS*t,Pl=(e,t)=>K1*e+GS*t,XD=(e,t)=>ds(Ul(e,t),Pl(e,t)),VD=(e,t)=>J1(Ul(e,t),Pl(e,t));function pp(e,t){return zb=e,t?(Gl=t*Ms,qS=GS=Math.cos(Gl),K1=Math.sin(Gl),HS=-K1):(qS=GS=1,Gl=K1=HS=0),Rne}const Rne={beginPath(){},closePath(){},moveTo:VD,lineTo:VD,rect(e,t,n,i){Gl?(XD(e+n,t),XD(e+n,t+i),XD(e,t+i),VD(e,t)):(ds(e+n,t+i),J1(e,t))},quadraticCurveTo(e,t,n,i){const r=Ul(e,t),a=Pl(e,t),o=Ul(n,i),u=Pl(n,i);D$(Q1,r,o,x$),D$(Z1,a,u,E$),J1(o,u)},bezierCurveTo(e,t,n,i,r,a){const o=Ul(e,t),u=Pl(e,t),c=Ul(n,i),l=Pl(n,i),d=Ul(r,a),h=Pl(r,a);C$(Q1,o,c,d,x$),C$(Z1,u,l,h,E$),J1(d,h)},arc(e,t,n,i,r,a){if(i+=Gl,r+=Gl,Q1=n*Math.cos(r)+e,Z1=n*Math.sin(r)+t,Math.abs(r-i)>Nne)ds(e-n,t-n),ds(e+n,t+n);else{const o=l=>ds(n*Math.cos(l)+e,n*Math.sin(l)+t);let u,c;if(o(i),o(r),r!==i)if(i=i%Za,i<0&&(i+=Za),r=r%Za,r<0&&(r+=Za),r<i&&(a=!a,u=i,i=r,r=u),a)for(r-=Za,u=i-i%Il,c=0;c<4&&u>r;++c,u-=Il)o(u);else for(u=i-i%Il+Il,c=0;c<4&&u<r;++c,u=u+Il)o(u)}}};function D$(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function C$(e,t,n,i,r){const a=i-e+3*t-3*n,o=e+n-2*t,u=e-t;let c=0,l=0,d;Math.abs(a)>Xte?(d=o*o+u*a,d>=0&&(d=Math.sqrt(d),c=(-o+d)/a,l=(-o-d)/a)):c=.5*u/o,0<c&&c<1&&r(S$(c,e,t,n,i)),0<l&&l<1&&r(S$(l,e,t,n,i))}function S$(e,t,n,i,r){const a=1-e,o=a*a,u=e*e;return o*a*t+3*o*e*n+3*a*u*i+u*e*r}var As=(As=Ss(1,1))?As.getContext("2d"):null;const YS=new Cn;function T3(e){return function(t,n){if(!As)return!0;e(As,t),YS.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:o}=YS;for(let u=r;u<=o;++u)for(let c=i;c<=a;++c)if(As.isPointInPath(c,u))return!0;return!1}}function $3(e,t){return t.contains(e.x||0,e.y||0)}function HL(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(YS.set(n,i,n+r,i+a))}function GL(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return Gf(t,n,i,r,a)}function Gf(e,t,n,i,r){const{x1:a,y1:o,x2:u,y2:c}=e,l=i-t,d=r-n;let h=0,p=1,y,v,b,x;for(x=0;x<4;++x){if(x===0&&(y=-l,v=-(a-t)),x===1&&(y=l,v=u-t),x===2&&(y=-d,v=-(o-n)),x===3&&(y=d,v=c-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function bd(e,t){e.globalCompositeOperation=t.blend||"source-over"}function la(e,t){return e??t}function A$(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function Bne(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+la(t.x1,.5)*i,n.y1+la(t.y1,.5)*r,Math.max(i,r)*la(t.r1,0),n.x1+la(t.x2,.5)*i,n.y1+la(t.y2,.5)*r,Math.max(i,r)*la(t.r2,.5));else{const o=la(t.x1,0),u=la(t.y1,0),c=la(t.x2,1),l=la(t.y2,0);if(o===c||u===l||i===r)a=e.createLinearGradient(n.x1+o*i,n.y1+u*r,n.x1+c*i,n.y1+l*r);else{const d=Ss(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=A$(h.createLinearGradient(o,u,c,l),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return A$(a,t.stops)}function YL(e,t,n){return _3(n)?Bne(e,n,t.bounds):n}function Ly(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=YL(e,t,t.fill),!0):!1}var zne=[];function xd(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=YL(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||zne),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Lne(e,t){return e.zindex-t.zindex||e.index-t.index}function M3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Lne)}function _a(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=M3(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function Iy(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=M3(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function O3(e){return function(t,n,i){_a(n,r=>{(!i||i.intersects(r.bounds))&&XL(e,t,r,r)})}}function Ine(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&XL(e,t,n.items[0],n.items)}}function XL(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(bd(t,n),n.fill&&Ly(t,n,r)&&t.fill(),n.stroke&&xd(t,n,r)&&t.stroke()))}function Lb(e){return e=e||Wr,function(t,n,i,r,a,o){return i*=t.pixelRatio,r*=t.pixelRatio,Iy(n,u=>{const c=u.bounds;if(!(c&&!c.contains(a,o)||!c)&&e(t,u,i,r,a,o))return u})}}function mp(e,t){return function(n,i,r,a){var o=Array.isArray(i)?i[0]:i,u=t??o.fill,c=o.stroke&&n.isPointInStroke,l,d;return c&&(l=o.strokeWidth,d=o.strokeCap,n.lineWidth=l??1,n.lineCap=d??"butt"),e(n,i)?!1:u&&n.isPointInPath(r,a)||c&&n.isPointInStroke(r,a)}}function N3(e){return Lb(mp(e))}function Ql(e,t){return"translate("+e+","+t+")"}function R3(e){return"rotate("+e+")"}function Une(e,t){return"scale("+e+","+t+")"}function VL(e){return Ql(e.x||0,e.y||0)}function Pne(e){return Ql(e.x||0,e.y||0)+(e.angle?" "+R3(e.angle):"")}function jne(e){return Ql(e.x||0,e.y||0)+(e.angle?" "+R3(e.angle):"")+(e.scaleX||e.scaleY?" "+Une(e.scaleX||1,e.scaleY||1):"")}function B3(e,t,n){function i(o,u){o("transform",Pne(u)),o("d",t(null,u))}function r(o,u){return t(pp(o,u.angle),u),Su(o,u).translate(u.x||0,u.y||0)}function a(o,u){var c=u.x||0,l=u.y||0,d=u.angle||0;o.translate(c,l),d&&o.rotate(d*=Ms),o.beginPath(),t(o,u),d&&o.rotate(-d),o.translate(-c,-l)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:O3(a),pick:N3(a),isect:n||T3(a)}}var qne=B3("arc",_ne);function Hne(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,o,u;--r>=0;)e[r].defined!==!1&&(u=Math.abs(e[r][i]-n),u<a&&(a=u,o=e[r]));return o}function Gne(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,o;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],o=r*r+a*a,o<n))return e[i];return null}function Yne(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function z3(e,t,n){function i(c,l){var d=l.mark.items;d.length&&c("d",t(null,d))}function r(c,l){var d=l.items;return d.length===0?c:(t(pp(c),d),Su(c,d[0]))}function a(c,l){c.beginPath(),t(c,l)}const o=mp(a);function u(c,l,d,h,p,y){var v=l.items,b=l.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=c.pixelRatio,h*=c.pixelRatio,o(c,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:Ine(a),pick:u,isect:$3,tip:n}}var Xne=z3("area",wne,Hne);function Vne(e,t){var n=t.clip;e.save(),rt(n)?(e.beginPath(),n(e),e.clip()):WL(e,t.group)}function WL(e,t){e.beginPath(),F3(t)?th(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function QL(e){const t=la(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Wne(e,t){e("transform",VL(t))}function ZL(e,t){const n=QL(t);e("d",th(null,t,n,n))}function Qne(e,t){e("class","background"),e("aria-hidden",!0),ZL(e,t)}function Zne(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?ZL(e,t):e("d","")}function Kne(e,t,n){const i=t.clip?k3(n,t,t):null;e("clip-path",i)}function Jne(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),Su(e,t),e.translate(t.x||0,t.y||0)}function Mg(e,t,n,i){const r=QL(t);e.beginPath(),th(e,t,(n||0)+r,(i||0)+r)}const eie=mp(Mg),tie=mp(Mg,!1),nie=mp(Mg,!0);function iie(e,t,n,i){_a(t,r=>{const a=r.x||0,o=r.y||0,u=r.strokeForeground,c=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&c&&(Mg(e,r,a,o),bd(e,r),r.fill&&Ly(e,r,c)&&e.fill(),r.stroke&&!u&&xd(e,r,c)&&e.stroke()),e.save(),e.translate(a,o),r.clip&&WL(e,r),n&&n.translate(-a,-o),_a(r,l=>{(l.marktype==="group"||i==null||i.includes(l.marktype))&&this.draw(e,l,n,i)}),n&&n.translate(a,o),e.restore(),u&&r.stroke&&c&&(Mg(e,r,a,o),bd(e,r),xd(e,r,c)&&e.stroke())})}function rie(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const o=n*e.pixelRatio,u=i*e.pixelRatio;return Iy(t,c=>{let l,d,h;const p=c.bounds;if(p&&!p.contains(r,a))return;d=c.x||0,h=c.y||0;const y=d+(c.width||0),v=h+(c.height||0),b=c.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&F3(c)&&!nie(e,c,o,u))return e.restore(),null;const x=c.strokeForeground,D=t.interactive!==!1;return D&&x&&c.stroke&&tie(e,c,o,u)?(e.restore(),c):(l=Iy(c,S=>aie(S,d,h)?this.pick(S,n,i,d,h):null),!l&&D&&(c.fill||!x&&c.stroke)&&eie(e,c,o,u)&&(l=c),e.restore(),l||null)})}function aie(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var oie={type:"group",tag:"g",nested:!1,attr:Wne,bound:Jne,draw:iie,pick:rie,isect:HL,content:Kne,background:Qne,foreground:Zne},Og={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function L3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function I3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function U3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Ib(e,t){return e==="center"?t/2:e==="right"?t:0}function Ub(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function uie(e,t,n){const i=L3(t,n),r=I3(t,i),a=U3(t,i),o=(t.x||0)-Ib(t.align,r),u=(t.y||0)-Ub(t.baseline,a),c=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",c,Og["xmlns:xlink"],"xlink:href"),e("transform",Ql(o,u)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function sie(e,t){const n=t.image,i=I3(t,n),r=U3(t,n),a=(t.x||0)-Ib(t.align,i),o=(t.y||0)-Ub(t.baseline,r);return e.set(a,o,a+i,o+r)}function lie(e,t,n){_a(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=L3(i,this);let a=I3(i,r),o=U3(i,r);if(a===0||o===0)return;let u=(i.x||0)-Ib(i.align,a),c=(i.y||0)-Ub(i.baseline,o),l,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,c+=(o-p)/2,o=p):(p=o*d,u+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(bd(e,i),e.globalAlpha=(l=i.opacity)!=null?l:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,u,c,a,o))})}var cie={type:"image",tag:"image",nested:!1,attr:uie,bound:sie,draw:lie,pick:Lb(),isect:Wr,get:L3,xOffset:Ib,yOffset:Ub},fie=z3("line",Fne,Gne);function die(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",jne(t)),e("d",t.path)}function ey(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,o=t.scaleY||1,u=(t.angle||0)*Ms,c=t.pathCache;(!c||c.path!==n)&&((t.pathCache=c=vd(n)).path=n),u&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(u),$g(e,c,0,0,a,o),e.rotate(-u),e.translate(-i,-r)):$g(e,c,i,r,a,o)}function hie(e,t){return ey(pp(e,t.angle),t)?e.set(0,0,0,0):Su(e,t,!0)}var gie={type:"path",tag:"path",nested:!1,attr:die,bound:hie,draw:O3(ey),pick:N3(ey),isect:T3(ey)};function pie(e,t){e("d",th(null,t))}function mie(e,t){var n,i;return Su(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function _$(e,t){e.beginPath(),th(e,t)}var yie={type:"rect",tag:"path",nested:!1,attr:pie,bound:mie,draw:O3(_$),pick:N3(_$),isect:HL};function vie(e,t){e("transform",VL(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function bie(e,t){var n,i;return Su(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function KL(e,t,n){var i,r,a,o;return t.stroke&&xd(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,o=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,o),!0):!1}function xie(e,t,n){_a(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&KL(e,i,r)&&(bd(e,i),e.stroke())}})}function Eie(e,t,n,i){return e.isPointInStroke?KL(e,t,1)&&e.isPointInStroke(n,i):!1}var Die={type:"rule",tag:"line",nested:!1,attr:vie,bound:bie,draw:xie,pick:Lb(Eie),isect:GL},Cie=B3("shape",kne),Sie=B3("symbol",Tne,$3);const w$=oR();var Er={height:Eo,measureWidth:P3,estimateWidth:Uy,width:Uy,canvas:JL};JL(!0);function JL(e){Er.width=e&&As?P3:Uy}function Uy(e,t){return eI(Ns(e,t),Eo(e))}function eI(e,t){return~~(.8*e.length*t)}function P3(e,t){return Eo(e)<=0||!(t=Ns(e,t))?0:tI(t,Pb(e))}function tI(e,t){const n=`(${t}) ${e}`;let i=w$.get(n);return i===void 0&&(As.font=t,i=As.measureText(e).width,w$.set(n,i)),i}function Eo(e){return e.fontSize!=null?+e.fontSize||0:11}function Os(e){return e.lineHeight!=null?e.lineHeight:Eo(e)+2}function Aie(e){return be(e)?e.length>1?e:e[0]:e}function yp(e){return Aie(e.lineBreak&&e.text&&!be(e.text)?e.text.split(e.lineBreak):e.text)}function j3(e){const t=yp(e);return(be(t)?t.length-1:0)*Os(e)}function Ns(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?wie(e,n):n}function _ie(e){if(Er.width===P3){const t=Pb(e);return n=>tI(n,t)}else if(Er.width===Uy){const t=Eo(e);return n=>eI(n,t)}else return t=>Er.width(e,t)}function wie(e,t){var n=+e.limit,i=_ie(e);if(i(t)<n)return t;var r=e.ellipsis||"",a=e.dir==="rtl",o=0,u=t.length,c;if(n-=i(r),a){for(;o<u;)c=o+u>>>1,i(t.slice(c))>n?o=c+1:u=c;return r+t.slice(o)}else{for(;o<u;)c=1+(o+u>>>1),i(t.slice(0,c))<n?o=c:u=c-1;return t.slice(0,o)+r}}function vp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Pb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+Eo(e)+"px "+vp(e,t)}function q3(e){var t=e.baseline,n=Eo(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Os(e):t==="line-bottom"?.29*n-.5*Os(e):0)}const Fie={left:"start",center:"middle",right:"end"},sg=new Cn;function jb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-Il,t+=i*Math.cos(r),n+=i*Math.sin(r)),sg.x1=t,sg.y1=n,sg}function kie(e,t){var n=t.dx||0,i=(t.dy||0)+q3(t),r=jb(t),a=r.x1,o=r.y1,u=t.angle||0,c;e("text-anchor",Fie[t.align]||"start"),u?(c=Ql(a,o)+" "+R3(u),(n||i)&&(c+=" "+Ql(n,i))):c=Ql(a+n,o+i),e("transform",c)}function H3(e,t,n){var i=Er.height(t),r=t.align,a=jb(t),o=a.x1,u=a.y1,c=t.dx||0,l=(t.dy||0)+q3(t)-Math.round(.8*i),d=yp(t),h;if(be(d)?(i+=Os(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,Er.width(t,y)),0)):h=Er.width(t,d),r==="center"?c-=h/2:r==="right"&&(c-=h),e.set(c+=o,l+=u,c+h,l+i),t.angle&&!n)e.rotate(t.angle*Ms,o,u);else if(n===2)return e.rotatedPoints(t.angle*Ms,o,u);return e}function Tie(e,t,n){_a(t,i=>{var r=i.opacity==null?1:i.opacity,a,o,u,c,l,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Pb(i),e.textAlign=i.align||"left",a=jb(i),o=a.x1,u=a.y1,i.angle&&(e.save(),e.translate(o,u),e.rotate(i.angle*Ms),o=u=0),o+=i.dx||0,u+=(i.dy||0)+q3(i),d=yp(i),bd(e,i),be(d))for(l=Os(i),c=0;c<d.length;++c)h=Ns(i,d[c]),i.fill&&Ly(e,i,r)&&e.fillText(h,o,u),i.stroke&&xd(e,i,r)&&e.strokeText(h,o,u),u+=l;else h=Ns(i,d),i.fill&&Ly(e,i,r)&&e.fillText(h,o,u),i.stroke&&xd(e,i,r)&&e.strokeText(h,o,u);i.angle&&e.restore()}})}function $ie(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=jb(t),u=o.x1,c=o.y1,l=H3(sg,t,1),d=-t.angle*Ms,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(u-h*u+p*c),v=p*r+h*a+(c-p*u-h*c);return l.contains(y,v)}function Mie(e,t){const n=H3(sg,e,2);return Gf(t,n[0],n[1],n[2],n[3])||Gf(t,n[0],n[1],n[4],n[5])||Gf(t,n[4],n[5],n[6],n[7])||Gf(t,n[2],n[3],n[6],n[7])}var Oie={type:"text",tag:"text",nested:!1,attr:kie,bound:H3,draw:Tie,pick:Lb($ie),isect:Mie},Nie=z3("trail",$ne,Yne),wr={arc:qne,area:Xne,group:oie,image:cie,line:fie,path:gie,rect:yie,rule:Die,shape:Cie,symbol:Sie,text:Oie,trail:Nie};function XS(e,t,n){var i=wr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new Cn),e,n)}var F$={mark:null};function nI(e,t,n){var i=wr[e.marktype],r=i.bound,a=e.items,o=a&&a.length,u,c,l,d;if(i.nested)return o?l=a[0]:(F$.mark=e,l=F$),d=XS(l,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new Cn,o)for(u=0,c=a.length;u<c;++u)t.union(XS(a[u],r,n));return e.bounds=t}const Rie=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function iI(e,t){return JSON.stringify(e,Rie,t)}function rI(e){const t=typeof e=="string"?JSON.parse(e):e;return aI(t)}function aI(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&aI(n[r]);return t&&nI(e),e}class oI{constructor(t){arguments.length?this.root=rI(t):(this.root=k$({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Bb(this.root)])}toJSON(t){return iI(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=k$(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function k$(e,t){const n={bounds:new Cn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function hs(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function G3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function wn(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=hs(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Ur(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function uI(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function qb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function Bie(e,t,n,i){var r=e&&e.mark,a,o;if(r&&(a=wr[r.marktype]).tip){for(o=qb(t,n),o[0]-=i[0],o[1]-=i[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=a.tip(r.items,o)}return e}let Y3=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||sb(),this._tooltip=n||zie}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),o=hs(null,"a");for(const u in r)o.setAttribute(u,r[u]);o.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=Bie(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,o=a.width(),u=a.height();let c=a.x1+r[0]+i.left,l=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)c+=t.x||0,l+=t.y||0;return{x:c,y:l,width:o,height:u,left:c,top:l,right:c+o,bottom:l+u}}};function zie(e,t,n,i){e.element().setAttribute("title",i||"")}class bp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new qL(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(o=>{o&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Lie="keydown",Iie="keypress",Uie="keyup",sI="dragenter",ty="dragleave",lI="dragover",VS="pointerdown",Pie="pointerup",Py="pointermove",ny="pointerout",cI="pointerover",WS="mousedown",jie="mouseup",fI="mousemove",jy="mouseout",dI="mouseover",qy="click",qie="dblclick",Hie="wheel",hI="mousewheel",Hy="touchstart",Gy="touchmove",Yy="touchend",Gie=[Lie,Iie,Uie,sI,ty,lI,VS,Pie,Py,ny,cI,WS,jie,fI,jy,dI,qy,qie,Hie,hI,Hy,Gy,Yy],QS=Py,lg=jy,ZS=qy;class xp extends Y3{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Gie,this.pointermove=$$([Py,fI],[cI,dI],[ny,jy]),this.dragover=$$([lI],[sI],[ty]),this.pointerout=M$([ny,jy]),this.dragleave=M$([ty])}initialize(t,n,i){return this._canvas=t&&G3(t,"canvas"),[qy,WS,VS,Py,ny,ty].forEach(r=>T$(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(hI,t)}pointerdown(t){this._down=this._active,this.fire(VS,t)}mousedown(t){this._down=this._active,this.fire(WS,t)}click(t){this._down===this._active&&(this.fire(qy,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Hy,t,!0)}touchmove(t){this.fire(Gy,t,!0)}touchend(t){this.fire(Yy,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===ZS&&r&&r.href?this.handleHref(n,r,r.href):(t===QS||t===lg)&&this.handleTooltip(n,r,t!==lg),a)for(let o=0,u=a.length;o<u;++o)a[o].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(T$(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=qb(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const o=this.context();return wr[t.marktype].pick.call(this,o,t,n,i,r,a)}}const Yie=e=>e===Hy||e===Gy||e===Yy?[Hy,Gy,Yy]:[e];function T$(e,t){Yie(t).forEach(n=>Xie(e,n))}function Xie(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Y0(e,t,n){t.forEach(i=>e.fire(i,n))}function $$(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Y0(this,e,i):((!r||!r.exit)&&Y0(this,n,i),this._active=a,Y0(this,t,i),Y0(this,e,i))}}function M$(e){return function(t){Y0(this,e,t),this._active=null}}function Vie(){return typeof window<"u"&&window.devicePixelRatio||1}function Wie(e,t,n,i,r,a){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,u=e.getContext("2d"),c=o?Vie():r;e.width=t*c,e.height=n*c;for(const l in a)u[l]=a[l];return o&&c!==1&&(e.style.width=t+"px",e.style.height=n+"px"),u.pixelRatio=c,u.setTransform(c,0,0,c,c*i[0],c*i[1]),e}class Xy extends bp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Cn,this._tempb=new Cn}initialize(t,n,i,r,a,o){return this._options=o||{},this._canvas=this._options.externalContext?null:Ss(1,1,this._options.type),t&&this._canvas&&(Ur(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Wie(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||me("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,o=this._height,u=this._dirty,c=Qie(r,a,o);i.save();const l=this._redraw||u.empty()?(this._redraw=!1,c.expand(1)):Zie(i,c.intersect(u),r);return this.clear(-r[0],-r[1],a,o),this.draw(i,t,l,n),i.restore(),u.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=wr[n.marktype];n.clip&&Vne(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,o=this.context();a.type!=="pdf"&&!a.externalContext&&o.clearRect(t,n,i,r),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,i,r))}}const Qie=(e,t,n)=>new Cn().set(0,0,t,n).translate(-e[0],-e[1]);function Zie(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class gI extends Y3{constructor(t,n){super(t,n);const i=this;i._hrefHandler=WD(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=WD(i,(r,a)=>{i.handleTooltip(r,a,r.type!==lg)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(ZS,this._hrefHandler),r.removeEventListener(QS,this._tooltipHandler),r.removeEventListener(lg,this._tooltipHandler)),this._svg=r=t&&G3(t,"svg"),r&&(r.addEventListener(ZS,this._hrefHandler),r.addEventListener(QS,this._tooltipHandler),r.addEventListener(lg,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const o={type:t,handler:n,listener:WD(this,n)};(r[i]||(r[i]=[])).push(o),this._svg&&this._svg.addEventListener(i,o.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const WD=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},pI="aria-hidden",X3="aria-label",V3="role",W3="aria-roledescription",mI="graphics-object",Q3="graphics-symbol",yI=(e,t,n)=>({[V3]:e,[W3]:t,[X3]:n||void 0}),Kie=Sa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),O$={axis:{desc:"axis",caption:tre},legend:{desc:"legend",caption:nre},"title-text":{desc:"title",caption:e=>`Title text '${R$(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${R$(e)}'`}},N$={ariaRole:V3,ariaRoleDescription:W3,description:X3};function vI(e,t){const n=t.aria===!1;if(e(pI,n||void 0),n||t.description==null)for(const i in N$)e(N$[i],void 0);else{const i=t.mark.marktype;e(X3,t.description),e(V3,t.ariaRole||(i==="group"?mI:Q3)),e(W3,t.ariaRoleDescription||`${i} mark`)}}function bI(e){return e.aria===!1?{[pI]:!0}:Kie[e.role]?null:O$[e.role]?ere(e,O$[e.role]):Jie(e)}function Jie(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return yI(n?mI:Q3,`${t} mark container`,e.description)}function ere(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return yI(t.role||Q3,t.desc,n.description||i(n))}catch{return null}}function R$(e){return Ie(e.text).join(" ")}function tre(e){const t=e.datum,n=e.orient,i=t.title?xI(e):null,r=e.context,a=r.scales[t.scale].value,o=r.dataflow.locale(),u=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${yd(u)?"discrete":u} scale with ${NL(o,a,e)}`}function nre(e){const t=e.datum,n=t.title?xI(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),o=e.context,u=o.scales[r[a[0]]].value,c=o.dataflow.locale();return rre(i)+(n?` titled '${n}'`:"")+` for ${ire(a)} with ${NL(c,u,e)}`}function xI(e){try{return Ie(vt(e.items).items[0].text).join(" ")}catch{return null}}function ire(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+vt(e)}function rre(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const EI=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),are=e=>EI(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function Z3(){let e="",t="",n="";const i=[],r=()=>t=n="",a=c=>{t&&(e+=`${t}>${n}`,r()),i.push(c)},o=(c,l)=>(l!=null&&(t+=` ${c}="${are(l)}"`),u),u={open(c){a(c),t="<"+c;for(var l=arguments.length,d=new Array(l>1?l-1:0),h=1;h<l;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)o(y,p[y]);return u},close(){const c=i.pop();return t?e+=t+(n?`>${n}</${c}>`:"/>"):e+=`</${c}>`,r(),u},attr:o,text:c=>(n+=EI(c),u),toString:()=>e};return u}const DI=e=>CI(Z3(),e)+"";function CI(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):CI(e,i)}return e.close()}const Vy={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Wy={blend:"mix-blend-mode"},SI={fill:"none","stroke-miterlimit":10},C0=0,B$="http://www.w3.org/2000/xmlns/",_n=Og.xmlns;class K3 extends bp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=wn(t,0,"svg",_n),this._svg.setAttributeNS(B$,"xmlns",_n),this._svg.setAttributeNS(B$,"xmlns:xlink",Og["xmlns:xlink"]),this._svg.setAttribute("version",Og.version),this._svg.setAttribute("class","marks"),Ur(t,1),this._root=wn(this._svg,C0,"g",_n),gs(this._root,SI),Ur(this._svg,C0+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(gs(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=wn(t,C0,"rect",_n),gs(i,{width:this._width,height:this._height,fill:n}));const r=DI(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Ur(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,o,u,c,l;for(u=0,c=t.length;u<c;++u)if(i=t[u],r=i.mark,r.marktype!==a&&(a=r.marktype,o=wr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,z$(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){o.nested&&r.items.length?(l=r.items[0],l._svg&&this._update(o,l._svg,l)):i._svg&&(l=i._svg.parentNode,l&&l.removeChild(i._svg)),i._svg=null;continue}i=o.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,z$(i,n)):this._update(o,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,o=n.marktype,u=wr[o],c=n.interactive===!1?"none":null,l=u.tag==="g",d=L$(n,t,i,"g",a);if(o!=="group"&&r!=null&&!r.includes(o))return Ur(d,0),n._svg;d.setAttribute("class",uI(n));const h=bI(n);for(const b in h)_i(d,b,h[b]);l||_i(d,"pointer-events",c),_i(d,"clip-path",n.clip?k3(this,n,n.group):null);let p=null,y=0;const v=b=>{const x=this.isDirty(b),D=L$(b,d,p,u.tag,a);x&&(this._update(u,D,b),l&&sre(this,D,b,r)),p=D,++y};return u.nested?n.items.length&&v(n.items[0]):_a(n,v),Ur(d,y),d}_update(t,n,i){uu=n,hi=n.__values__,vI(cg,i),t.attr(cg,i,this);const r=cre[t.type];r&&r.call(this,t,n,i),uu&&this.style(uu,i)}style(t,n){if(n!=null){for(const i in Vy){let r=i==="font"?vp(n):n[i];if(r===hi[i])continue;const a=Vy[i];r==null?t.removeAttribute(a):(_3(r)&&(r=BL(r,this._defs.gradient,AI())),t.setAttribute(a,r+"")),hi[i]=r}for(const i in Wy)iy(t,Wy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=wn(t,C0+1,"defs",_n)),r=ore(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=wn(t,C0+1,"defs",_n)),r=ure(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Ur(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function z$(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function ore(e,t,n){let i,r,a;if(t.gradient==="radial"){let o=wn(e,n++,"pattern",_n);gs(o,{id:zy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=wn(o,0,"rect",_n),gs(o,{width:1,height:1,fill:`url(${AI()}#${t.id})`}),e=wn(e,n++,"radialGradient",_n),gs(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=wn(e,n++,"linearGradient",_n),gs(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=wn(e,i,"stop",_n),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Ur(e,i),n}function ure(e,t,n){let i;return e=wn(e,n,"clipPath",_n),e.setAttribute("id",t.id),t.path?(i=wn(e,0,"path",_n),i.setAttribute("d",t.path)):(i=wn(e,0,"rect",_n),gs(i,{x:0,y:0,width:t.width,height:t.height})),Ur(e,1),n+1}function sre(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;_a(n,o=>{r=e.mark(t,o,r,i),++a}),Ur(t,1+a)}function L$(e,t,n,i,r){let a=e._svg,o;if(!a&&(o=t.ownerDocument,a=hs(o,i,_n),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const u=hs(o,"path",_n);a.appendChild(u),u.__data__=e;const c=hs(o,"g",_n);a.appendChild(c),c.__data__=e;const l=hs(o,"path",_n);a.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(a.ownerSVGElement!==r||lre(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function lre(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let uu=null,hi=null;const cre={group(e,t,n){const i=uu=t.childNodes[2];hi=i.__values__,e.foreground(cg,n,this),hi=t.__values__,uu=t.childNodes[1],e.content(cg,n,this);const r=uu=t.childNodes[0];e.background(cg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==hi.events&&(_i(i,"pointer-events",a),_i(r,"pointer-events",a),hi.events=a),n.strokeForeground&&n.stroke){const o=n.fill;_i(i,"display",null),this.style(r,n),_i(r,"stroke",null),o&&(n.fill=null),hi=i.__values__,this.style(i,n),o&&(n.fill=o),uu=null}else _i(i,"display","none")},image(e,t,n){n.smooth===!1?(iy(t,"image-rendering","optimizeSpeed"),iy(t,"image-rendering","pixelated")):iy(t,"image-rendering",null)},text(e,t,n){const i=yp(n);let r,a,o,u;be(i)?(a=i.map(c=>Ns(n,c)),r=a.join(`
`),r!==hi.text&&(Ur(t,0),o=t.ownerDocument,u=Os(n),a.forEach((c,l)=>{const d=hs(o,"tspan",_n);d.__data__=n,d.textContent=c,l&&(d.setAttribute("x",0),d.setAttribute("dy",u)),t.appendChild(d)}),hi.text=r)):(a=Ns(n,i),a!==hi.text&&(t.textContent=a,hi.text=a)),_i(t,"font-family",vp(n)),_i(t,"font-size",Eo(n)+"px"),_i(t,"font-style",n.fontStyle),_i(t,"font-variant",n.fontVariant),_i(t,"font-weight",n.fontWeight)}};function cg(e,t,n){t!==hi[e]&&(n?fre(uu,e,t,n):_i(uu,e,t),hi[e]=t)}function iy(e,t,n){n!==hi[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),hi[t]=n)}function gs(e,t){for(const n in t)_i(e,n,t[n])}function _i(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function fre(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function AI(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class _I extends bp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=Z3();n.open("svg",it({},Og,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",SI,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=wr[n.marktype],r=i.tag,a=[vI,i.attr];t.open("g",{class:uI(n),"clip-path":n.clip?k3(this,n,n.group):null},bI(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const o=u=>{const c=this.href(u);if(c&&t.open("a",c),t.open(r,this.attr(n,u,a,r!=="g"?r:null)),r==="text"){const l=yp(u);if(be(l)){const d={x:0,dy:Os(u)};for(let h=0;h<l.length;++h)t.open("tspan",h?d:null).text(Ns(u,l[h])).close()}else t.text(Ns(u,l))}else if(r==="g"){const l=u.strokeForeground,d=u.fill,h=u.stroke;l&&h&&(u.stroke=null),t.open("path",this.attr(n,u,i.background,"bgrect")).close(),t.open("g",this.attr(n,u,i.content)),_a(u,p=>this.mark(t,p)),t.close(),l&&h?(d&&(u.fill=null),u.stroke=h,t.open("path",this.attr(n,u,i.foreground,"bgrect")).close(),d&&(u.fill=d)):t.open("path",this.attr(n,u,i.foreground,"bgfore")).close()}t.close(),c&&t.close()};return i.nested?n.items&&n.items.length&&o(n.items[0]):_a(n,o),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},o=(u,c,l,d)=>{a[d||u]=c};return Array.isArray(i)?i.forEach(u=>u(o,n,this)):i(o,n,this),r&&dre(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const o=n[a],u=o.stops;o.gradient==="radial"?(t.open("pattern",{id:zy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:a,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let c=0;c<u.length;++c)t.open("stop",{offset:u[c].offset,"stop-color":u[c].color}).close();t.close()}for(const a in i){const o=i[a];t.open("clipPath",{id:a}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function dre(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=vp(t),e["font-size"]=Eo(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in Vy){let u=t[o];const c=Vy[o];u==="transparent"&&(c==="fill"||c==="stroke")||u!=null&&(_3(u)&&(u=BL(u,r.gradient,"")),e[c]=u)}for(const o in Wy){const u=t[o];u!=null&&(a=a||[],a.push(`${Wy[o]}: ${u};`))}return a&&(e.style=a.join(" ")),e}const fa={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function hre(e){fa.svgMarkTypes=e.svgMarkTypes??["text"],fa.svgOnTop=e.svgOnTop??!0,fa.debug=e.debug??!1}class KS extends bp{constructor(t){super(t),this._svgRenderer=new K3(t),this._canvasRenderer=new Xy(t)}initialize(t,n,i,r,a){this._root_el=wn(t,0,"div");const o=wn(this._root_el,0,"div"),u=wn(this._root_el,1,"div");return this._root_el.style.position="relative",fa.debug||(o.style.height="100%",u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.height="100%",u.style.width="100%"),this._svgEl=fa.svgOnTop?u:o,this._canvasEl=fa.svgOnTop?o:u,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return fa.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!fa.svgMarkTypes.includes(a));this._svgRenderer.render(t,fa.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return fa.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class wI extends xp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=wn(wn(t,0,"div"),fa.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const FI="canvas",kI="hybrid",TI="png",$I="svg",MI="none",ps={Canvas:FI,PNG:TI,SVG:$I,Hybrid:kI,None:MI},uc={};uc[FI]=uc[TI]={renderer:Xy,headless:Xy,handler:xp};uc[$I]={renderer:K3,headless:_I,handler:gI};uc[kI]={renderer:KS,headless:KS,handler:wI};uc[MI]={};function Hb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(uc[e]=t,this):uc[e]}function OI(e,t,n){const i=[],r=new Cn().union(t),a=e.marktype;return a?NI(e,r,n,i):a==="group"?RI(e,r,n,i):me("Intersect scene must be mark node or group item.")}function NI(e,t,n,i){if(gre(e,t,n)){const r=e.items,a=e.marktype,o=r.length;let u=0;if(a==="group")for(;u<o;++u)RI(r[u],t,n,i);else for(const c=wr[a].isect;u<o;++u){const l=r[u];BI(l,t,c)&&i.push(l)}}return i}function gre(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function RI(e,t,n,i){n&&n(e.mark)&&BI(e,t,wr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const o=e.x||0,u=e.y||0;t.translate(-o,-u);for(let c=0;c<a;++c)NI(r[c],t,n,i);t.translate(o,u)}return i}function BI(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const QD=new Cn;function zI(e){const t=e.clip;if(rt(t))t(pp(QD.clear()));else if(t)QD.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(QD)}const pre=1e-9;function J3(e,t,n){return e===t?!0:n==="path"?LI(e,t):e instanceof Date&&t instanceof Date?+e==+t:Ct(e)&&Ct(t)?Math.abs(e-t)<=pre:!e||!t||!Le(e)&&!Le(t)?e==t:mre(e,t)}function LI(e,t){return J3(vd(e),vd(t))}function mre(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!J3(e[r],t[r],r))return!1;return typeof e==typeof t}function yre(){Mne(),Ute()}const Ed="top",ma="left",ya="right",Rs="bottom",vre="top-left",bre="top-right",xre="bottom-left",Ere="bottom-right",eF="start",JS="middle",wi="end",Dre="x",Cre="y",Gb="group",tF="axis",nF="title",Sre="frame",Are="scope",iF="legend",II="row-header",UI="row-footer",PI="row-title",jI="column-header",qI="column-footer",HI="column-title",_re="padding",wre="symbol",GI="fit",YI="fit-x",XI="fit-y",Fre="pad",rF="none",p1="all",eA="each",aF="flush",ms="column",ys="row";function VI(e){de.call(this,null,e)}Re(VI,de,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=wr[r],o=a.bound;let u=i.bounds,c;if(a.nested)i.items.length&&n.dirty(i.items[0]),u=m1(i,o),i.items.forEach(l=>{l.bounds.clear().union(u)});else if(r===Gb||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),u.clear(),i.items.forEach(l=>u.union(m1(l,o))),i.role){case tF:case iF:case nF:t.reflow()}else c=t.changed(t.REM),t.visit(t.ADD,l=>{u.union(m1(l,o))}),t.visit(t.MOD,l=>{c=c||u.alignsWith(l.bounds),n.dirty(l),u.union(m1(l,o))}),c&&(u.clear(),i.items.forEach(l=>u.union(l.bounds)));return zI(i),t.modifies("bounds")}});function m1(e,t,n){return t(e.bounds.clear(),e,n)}const I$=":vega_identifier:";function oF(e){de.call(this,0,e)}oF.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};Re(oF,de,{transform(e,t){const n=kre(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function kre(e){return e._signals[I$]||(e._signals[I$]=e.add(0))}function WI(e){de.call(this,null,e)}Re(WI,de,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Tre(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Gb?Bb:Rb;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Tre(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function QI(e){de.call(this,null,e)}const U$={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!ZI(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},ZI=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),P$=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(ZI(r,a=e[n].bounds,t))return!0},$re=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Mre=(e,t,n)=>{var i=e.range(),r=new Cn;return t===Ed||t===Rs?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},j$=e=>(e.forEach(t=>t.opacity=1),e),q$=(e,t)=>e.reflow(t.modified()).modifies("opacity");Re(QI,de,{transform(e,t){const n=U$[e.method]||U$.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,o;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(j$(r),t=q$(t,e)),t;if(r=r.filter($re),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=j$(r),t=q$(t,e),a.length>=3&&P$(a,i)){do a=n(a,i);while(a.length>=3&&P$(a,i));a.length<3&&!vt(r).opacity&&(a.length>1&&(vt(a).opacity=0),vt(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=Mre(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(c=>{o(c)||(c.opacity=0)}));const u=a[0].mark.bounds.clear();return r.forEach(c=>{c.opacity&&u.union(c.bounds)}),t}});function KI(e){de.call(this,null,e)}Re(KI,de,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const di=new Cn;function Yf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Ore(e){var t=e.items[0].orient;return t===ma||t===ya}function Nre(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Rre(e,t,n,i){var r=t.items[0],a=r.datum,o=r.translate!=null?r.translate:.5,u=r.orient,c=Nre(a),l=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[c[2]].items[0],b=r.titlePadding,x=r.bounds,D=v&&j3(v),S=0,A=0,w,_;switch(di.clear().union(x),x.clear(),(w=c[0])>-1&&x.union(r.items[w].bounds),(w=c[1])>-1&&x.union(r.items[w].bounds),u){case Ed:S=h||0,A=-d,_=Math.max(p,Math.min(y,-x.y1)),x.add(0,-_).add(l,0),v&&y1(e,v,_,b,D,0,-1,x);break;case ma:S=-d,A=h||0,_=Math.max(p,Math.min(y,-x.x1)),x.add(-_,0).add(0,l),v&&y1(e,v,_,b,D,1,-1,x);break;case ya:S=n+d,A=h||0,_=Math.max(p,Math.min(y,x.x2)),x.add(0,0).add(_,l),v&&y1(e,v,_,b,D,1,1,x);break;case Rs:S=h||0,A=i+d,_=Math.max(p,Math.min(y,x.y2)),x.add(0,0).add(l,_),v&&y1(e,v,_,b,0,0,1,x);break;default:S=r.x,A=r.y}return Su(x.translate(S,A),r),Yf(r,"x",S+o)|Yf(r,"y",A+o)&&(r.bounds=di,e.dirty(r),r.bounds=x,e.dirty(r)),r.mark.bounds.clear().union(x)}function y1(e,t,n,i,r,a,o,u){const c=t.bounds;if(t.auto){const l=o*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=l):h=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(c.translate(-d,-h)),e.dirty(t)}u.union(c)}const H$=(e,t)=>Math.floor(Math.min(e,t)),G$=(e,t)=>Math.ceil(Math.max(e,t));function Bre(e){var t=e.items,n=t.length,i=0,r,a;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Gb)switch(r.role){case tF:case iF:case nF:break;case II:o.rowheaders.push(...a);break;case UI:o.rowfooters.push(...a);break;case jI:o.colheaders.push(...a);break;case qI:o.colfooters.push(...a);break;case PI:o.rowtitle=a[0];break;case HI:o.coltitle=a[0];break;default:o.marks.push(...a)}return o}function zre(e){return new Cn().set(0,0,e.width||0,e.height||0)}function Lre(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Kt(e,t,n){const i=Le(e)?e[t]:e;return i??(n!==void 0?n:0)}function Y$(e){return e<0?Math.ceil(-e):0}function JI(e,t,n){var i=!n.nodirty,r=n.bounds===aF?zre:Lre,a=di.set(0,0,0,0),o=Kt(n.align,ms),u=Kt(n.align,ys),c=Kt(n.padding,ms),l=Kt(n.padding,ys),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,x=Array(p),D=Array(h),S=0,A=Array(p),w=Array(p),_=Array(p),k,F,M,N,P,L,H,I,U,z,T;for(F=0;F<d;++F)v[F]=0;for(F=0;F<h;++F)D[F]=0;for(F=0;F<p;++F)L=t[F],P=_[F]=r(L),L.x=L.x||0,A[F]=0,L.y=L.y||0,w[F]=0,M=F%d,N=~~(F/d),b=Math.max(b,H=Math.ceil(P.x2)),S=Math.max(S,I=Math.ceil(P.y2)),v[M]=Math.max(v[M],H),D[N]=Math.max(D[N],I),y[F]=c+Y$(P.x1),x[F]=l+Y$(P.y1),i&&e.dirty(t[F]);for(F=0;F<p;++F)F%d===0&&(y[F]=0),F<d&&(x[F]=0);if(o===eA)for(M=1;M<d;++M){for(T=0,F=M;F<p;F+=d)T<y[F]&&(T=y[F]);for(F=M;F<p;F+=d)y[F]=T+v[M-1]}else if(o===p1){for(T=0,F=0;F<p;++F)F%d&&T<y[F]&&(T=y[F]);for(F=0;F<p;++F)F%d&&(y[F]=T+b)}else for(o=!1,M=1;M<d;++M)for(F=M;F<p;F+=d)y[F]+=v[M-1];if(u===eA)for(N=1;N<h;++N){for(T=0,F=N*d,k=F+d;F<k;++F)T<x[F]&&(T=x[F]);for(F=N*d;F<k;++F)x[F]=T+D[N-1]}else if(u===p1){for(T=0,F=d;F<p;++F)T<x[F]&&(T=x[F]);for(F=d;F<p;++F)x[F]=T+S}else for(u=!1,N=1;N<h;++N)for(F=N*d,k=F+d;F<k;++F)x[F]+=D[N-1];for(U=0,F=0;F<p;++F)U=y[F]+(F%d?U:0),A[F]+=U-t[F].x;for(M=0;M<d;++M)for(z=0,F=M;F<p;F+=d)z+=x[F],w[F]+=z-t[F].y;if(o&&Kt(n.center,ms)&&h>1)for(F=0;F<p;++F)P=o===p1?b:v[F%d],U=P-_[F].x2-t[F].x-A[F],U>0&&(A[F]+=U/2);if(u&&Kt(n.center,ys)&&d!==1)for(F=0;F<p;++F)P=u===p1?S:D[~~(F/d)],z=P-_[F].y2-t[F].y-w[F],z>0&&(w[F]+=z/2);for(F=0;F<p;++F)a.union(_[F].translate(A[F],w[F]));switch(U=Kt(n.anchor,Dre),z=Kt(n.anchor,Cre),Kt(n.anchor,ms)){case wi:U-=a.width();break;case JS:U-=a.width()/2}switch(Kt(n.anchor,ys)){case wi:z-=a.height();break;case JS:z-=a.height()/2}for(U=Math.round(U),z=Math.round(z),a.clear(),F=0;F<p;++F)t[F].mark.bounds.clear();for(F=0;F<p;++F)L=t[F],L.x+=A[F]+=U,L.y+=w[F]+=z,a.union(L.mark.bounds.union(L.bounds.translate(A[F],w[F]))),i&&e.dirty(L);return a}function Ire(e,t,n){var i=Bre(t),r=i.marks,a=n.bounds===aF?Ure:Pre,o=n.offset,u=n.columns||r.length,c=u<=0?1:Math.ceil(r.length/u),l=c*u,d,h,p,y,v,b,x;const D=JI(e,r,n);D.empty()&&D.set(0,0,0,0),i.rowheaders&&(b=Kt(n.headerBand,ys,null),d=v1(e,i.rowheaders,r,u,c,-Kt(o,"rowHeader"),H$,0,a,"x1",0,u,1,b)),i.colheaders&&(b=Kt(n.headerBand,ms,null),h=v1(e,i.colheaders,r,u,u,-Kt(o,"columnHeader"),H$,1,a,"y1",0,1,u,b)),i.rowfooters&&(b=Kt(n.footerBand,ys,null),p=v1(e,i.rowfooters,r,u,c,Kt(o,"rowFooter"),G$,0,a,"x2",u-1,u,1,b)),i.colfooters&&(b=Kt(n.footerBand,ms,null),y=v1(e,i.colfooters,r,u,u,Kt(o,"columnFooter"),G$,1,a,"y2",l-u,1,u,b)),i.rowtitle&&(v=Kt(n.titleAnchor,ys),x=Kt(o,"rowTitle"),x=v===wi?p+x:d-x,b=Kt(n.titleBand,ys,.5),X$(e,i.rowtitle,x,0,D,b)),i.coltitle&&(v=Kt(n.titleAnchor,ms),x=Kt(o,"columnTitle"),x=v===wi?y+x:h-x,b=Kt(n.titleBand,ms,.5),X$(e,i.coltitle,x,1,D,b))}function Ure(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Pre(e,t){return e.bounds[t]}function v1(e,t,n,i,r,a,o,u,c,l,d,h,p,y){var v=n.length,b=0,x=0,D,S,A,w,_,k,F,M,N;if(!v)return b;for(D=d;D<v;D+=h)n[D]&&(b=o(b,c(n[D],l)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,S=0,w=t.length;S<w;++S)e.dirty(t[S]),t[S].mark.bounds.clear();for(D=d,S=0,w=t.length;S<w;++S,D+=h){for(k=t[S],_=k.mark.bounds,A=D;A>=0&&(F=n[A])==null;A-=p);u?(M=y==null?F.x:Math.round(F.bounds.x1+y*F.bounds.width()),N=b):(M=b,N=y==null?F.y:Math.round(F.bounds.y1+y*F.bounds.height())),_.union(k.bounds.translate(M-(k.x||0),N-(k.y||0))),k.x=M,k.y=N,e.dirty(k),x=o(x,_[l])}return x}function X$(e,t,n,i,r,a){if(t){e.dirty(t);var o=n,u=n;i?o=Math.round(r.x1+a*r.width()):u=Math.round(r.y1+a*r.height()),t.bounds.translate(o-(t.x||0),u-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=u,e.dirty(t)}}function jre(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function qre(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Hre(e,t,n,i,r,a,o){const u=jre(n,t),c=qre(e,u("offset",0)),l=u("anchor",eF),d=l===wi?1:l===JS?.5:0,h={align:eA,bounds:u("bounds",aF),columns:u("direction")==="vertical"?1:e.length,padding:u("margin",8),center:u("center"),nodirty:!0};switch(t){case ma:h.anchor={x:Math.floor(i.x1)-c,column:wi,y:d*(o||i.height()+2*i.y1),row:l};break;case ya:h.anchor={x:Math.ceil(i.x2)+c,y:d*(o||i.height()+2*i.y1),row:l};break;case Ed:h.anchor={y:Math.floor(r.y1)-c,row:wi,x:d*(a||r.width()+2*r.x1),column:l};break;case Rs:h.anchor={y:Math.ceil(r.y2)+c,x:d*(a||r.width()+2*r.x1),column:l};break;case vre:h.anchor={x:c,y:c};break;case bre:h.anchor={x:a-c,y:c,column:wi};break;case xre:h.anchor={x:c,y:o-c,row:wi};break;case Ere:h.anchor={x:a-c,y:o-c,column:wi,row:wi};break}return h}function Gre(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,o=n.x,u=n.y,c,l;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Xre(e,n,n.items[0].items[0]),a=Yre(n,a),c=2*n.padding,l=2*n.padding,a.empty()||(c=Math.ceil(a.width()+c),l=Math.ceil(a.height()+l)),i.type===wre&&Vre(n.items[0].items[0].items[0].items),r!==rF&&(n.x=o=0,n.y=u=0),n.width=c,n.height=l,Su(a.set(o,u,o+c,u+l),n),n.mark.bounds.clear().union(a),n}function Yre(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Xre(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&S0(e,n,r,a);else{var o=t.items[1].items[0],u=o.anchor,c=t.titlePadding||0,l=i-o.x,d=i-o.y;switch(o.orient){case ma:r+=Math.ceil(o.bounds.width())+c;break;case ya:case Rs:break;default:a+=o.bounds.height()+c}switch((r||a)&&S0(e,n,r,a),o.orient){case ma:d+=Mf(t,n,o,u,1,1);break;case ya:l+=Mf(t,n,o,wi,0,0)+c,d+=Mf(t,n,o,u,1,1);break;case Rs:l+=Mf(t,n,o,u,0,0),d+=Mf(t,n,o,wi,-1,0,1)+c;break;default:l+=Mf(t,n,o,u,0,0)}(l||d)&&S0(e,o,l,d),(l=Math.round(o.bounds.x1-i))<0&&(S0(e,n,-l,0),S0(e,o,-l,0))}}function Mf(e,t,n,i,r,a,o){const u=e.datum.type!=="symbol",c=n.datum.vgrad,l=u&&(a||!c)&&!o?t.items[0]:t,d=l.bounds[r?"y2":"x2"]-e.padding,h=c&&a?d:0,p=c&&a?0:d,y=r<=0?0:j3(n);return Math.round(i===eF?h:i===wi?p-y:.5*(d-y))}function S0(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Vre(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Wre(e,t,n,i,r){var a=t.items[0],o=a.frame,u=a.orient,c=a.anchor,l=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=u===ma||u===ya?i:n,v=0,b=0,x=0,D=0,S=0,A;if(o!==Gb?u===ma?(v=r.y2,y=r.y1):u===ya?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):u===ma&&(v=i,y=0),A=c===eF?v:c===wi?y:(v+y)/2,p&&p.text){switch(u){case Ed:case Rs:S=h.bounds.height()+d;break;case ma:D=h.bounds.width()+d;break;case ya:D=-h.bounds.width()-d;break}di.clear().union(p.bounds),di.translate(D-(p.x||0),S-(p.y||0)),Yf(p,"x",D)|Yf(p,"y",S)&&(e.dirty(p),p.bounds.clear().union(di),p.mark.bounds.clear().union(di),e.dirty(p)),di.clear().union(p.bounds)}else di.clear();switch(di.union(h.bounds),u){case Ed:b=A,x=r.y1-di.height()-l;break;case ma:b=r.x1-di.width()-l,x=A;break;case ya:b=r.x2+di.width()+l,x=A;break;case Rs:b=A,x=r.y2+l;break;default:b=a.x,x=a.y}return Yf(a,"x",b)|Yf(a,"y",x)&&(di.translate(b,x),e.dirty(a),a.bounds.clear().union(di),t.bounds.clear().union(di),e.dirty(a)),a.bounds}function eU(e){de.call(this,null,e)}Re(eU,de,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&Ire(n,i,e.layout),Zre(n,i,e)}),Qre(e.mark.group)?t.reflow():t}});function Qre(e){return e&&e.mark.role!=="legend-entry"}function Zre(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),o=new Cn().set(0,0,r,a),u=o.clone(),c=o.clone(),l=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case tF:y=Ore(h)?u:c,y.union(Rre(e,h,r,a));break;case nF:d=h;break;case iF:l.push(Gre(e,h));break;case Sre:case Are:case II:case UI:case PI:case jI:case qI:case HI:u.union(h.bounds),c.union(h.bounds);break;default:o.union(h.bounds)}if(l.length){const x={};l.forEach(D=>{p=D.orient||ya,p!==rF&&(x[p]||(x[p]=[])).push(D)});for(const D in x){const S=x[D];JI(e,S,Hre(S,D,n.legends,u,c,r,a))}l.forEach(D=>{const S=D.bounds;if(S.equals(D._bounds)||(D.bounds=D._bounds,e.dirty(D),D.bounds=S,e.dirty(D)),n.autosize&&(n.autosize.type===GI||n.autosize.type===YI||n.autosize.type===XI))switch(D.orient){case ma:case ya:o.add(S.x1,0).add(S.x2,0);break;case Ed:case Rs:o.add(0,S.y1).add(0,S.y2)}else o.union(S)})}o.union(u).union(c),d&&o.union(Wre(e,d,r,a,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),Kre(e,t,o,n)}function Kre(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let o=e._width,u=e._height,c=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-c)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===_re){const v=e.padding();o-=v.left+v.right,u-=v.top+v.bottom}a===rF?(l=0,h=0,c=o,d=u):a===GI?(c=Math.max(0,o-l-p),d=Math.max(0,u-h-y)):a===YI?(c=Math.max(0,o-l-p),u=d+h+y):a===XI?(o=c+l+p,d=Math.max(0,u-h-y)):a===Fre&&(o=c+l+p,u=d+h+y),e._resizeView(o,u,c,d,[l,h],r.resize)}const Jre=Object.freeze(Object.defineProperty({__proto__:null,bound:VI,identifier:oF,mark:WI,overlap:QI,render:KI,viewlayout:eU},Symbol.toStringTag,{value:"Module"}));function tU(e){de.call(this,null,e)}Re(tU,de,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,u=S3(a,o,e.minstep),c=e.format||kL(n,a,u,e.formatSpecifier,e.formatType,!!e.values),l=e.values?FL(a,e.values,u):A3(a,u);return r&&(i.rem=r),r=l.map((d,h)=>wt({index:h/(l.length-1||1),value:d,label:c(d)})),e.extra&&r.length&&r.push(wt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function nU(e){de.call(this,null,e)}function eae(){return wt({})}function tae(e){const t=Yd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}Re(nU,de,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||eae,a=e.key||Ye,o=this.value;return be(i.encode)&&(i.encode=null),o&&(e.modified("key")||t.modified(a))&&me("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=tae(a)),t.visit(t.ADD,u=>{const c=a(u);let l=o.get(c);l?l.exit?(o.empty--,i.add.push(l)):i.mod.push(l):(l=r(u),o.set(c,l),i.add.push(l)),l.datum=u,l.exit=!1}),t.visit(t.MOD,u=>{const c=a(u),l=o.get(c);l&&(l.datum=u,i.mod.push(l))}),t.visit(t.REM,u=>{const c=a(u),l=o.get(c);u===l.datum&&!l.exit&&(i.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),i}});function iU(e){de.call(this,null,e)}Re(iU,de,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(be(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var o=a==="enter",u=r.update||is,c=r.enter||is,l=r.exit||is,d=(a&&!o?r[a]:u)||is;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{c(h,e),u(h,e)}),n.modifies(c.output),n.modifies(u.output),d!==is&&d!==u&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&l!==is&&(t.visit(t.REM,h=>{l(h,e)}),n.modifies(l.output)),o||d!==is){const h=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(h,p=>{const y=c(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(c.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function rU(e){de.call(this,[],e)}Re(rU,de,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||W1,o=e.scale,u=+e.limit,c=S3(o,e.count==null?5:e.count,e.minstep),l=!!e.values||a===W1,d=e.format||OL(n,o,c,a,e.formatSpecifier,e.formatType,l),h=e.values||ML(o,c),p,y,v,b,x;return r&&(i.rem=r),a===W1?(u&&h.length>u?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,u-1),x=!0):r=h,rt(v=e.size)?(!e.values&&o(r[0])===0&&(r=r.slice(1)),b=r.reduce((D,S)=>Math.max(D,v(S,e)),0)):v=Di(b=v||8),r=r.map((D,S)=>wt({index:S,label:d(D,S,r),value:D,offset:b,size:v(D,e)})),x&&(x=h[r.length],r.push(wt({index:r.length,label:`${h.length-r.length} entries`,value:x,offset:b,size:v(x,e)})))):a===wte?(p=o.domain(),y=AL(o,p[0],vt(p)),h.length<3&&!e.values&&p[0]!==vt(p)&&(h=[p[0],vt(p)]),r=h.map((D,S)=>wt({index:S,label:d(D,S,h),value:D,perc:y(D)}))):(v=h.length-1,y=Lte(o),r=h.map((D,S)=>wt({index:S,label:d(D,S,h),value:D,perc:S?y(D):0,perc2:S===v?1:y(h[S+1])}))),i.source=r,i.add=r,this.value=r,i}});const nae=e=>e.source.x,iae=e=>e.source.y,rae=e=>e.target.x,aae=e=>e.target.y;function uF(e){de.call(this,{},e)}uF.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};Re(uF,de,{transform(e,t){var n=e.sourceX||nae,i=e.sourceY||iae,r=e.targetX||rae,a=e.targetY||aae,o=e.as||"path",u=e.orient||"vertical",c=e.shape||"line",l=V$.get(c+"-"+u)||V$.get(c);return l||me("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[o]=l(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(o)}});const aU=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,oae=(e,t,n,i)=>aU(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),oU=(e,t,n,i)=>{var r=n-e,a=i-t,o=Math.hypot(r,a)/2,u=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+u+" 0 1 "+n+","+i},uae=(e,t,n,i)=>oU(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),uU=(e,t,n,i)=>{const r=n-e,a=i-t,o=.2*(r+a),u=.2*(a-r);return"M"+e+","+t+"C"+(e+o)+","+(t+u)+" "+(n+u)+","+(i-o)+" "+n+","+i},sae=(e,t,n,i)=>uU(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),lae=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,cae=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,fae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),c=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(c?1:0)+" "+t*o+","+t*u+"L"+i*o+","+i*u},dae=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},hae=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},gae=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),o=Math.cos(n),u=Math.sin(n),c=(t+i)/2;return"M"+t*r+","+t*a+"C"+c*r+","+c*a+" "+c*o+","+c*u+" "+i*o+","+i*u},V$=Yd({line:aU,"line-radial":oae,arc:oU,"arc-radial":uae,curve:uU,"curve-radial":sae,"orthogonal-horizontal":lae,"orthogonal-vertical":cae,"orthogonal-radial":fae,"diagonal-horizontal":dae,"diagonal-vertical":hae,"diagonal-radial":gae});function sF(e){de.call(this,null,e)}sF.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};Re(sF,de,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||jd,o=e.startAngle||0,u=e.endAngle!=null?e.endAngle:2*Math.PI,c=t.source,l=c.map(a),d=l.length,h=o,p=(u-o)/DR(l),y=vr(d),v,b,x;for(e.sort&&y.sort((D,S)=>l[D]-l[S]),v=0;v<d;++v)x=l[y[v]],b=c[y[v]],b[i]=h,b[r]=h+=x*p;return this.value=l,t.reflow(e.modified()).modifies(n)}});const pae=5;function mae(e){const t=e.type;return!e.bins&&(t===pd||t===sp||t===lp)}function sU(e){return E3(e)&&e!==ro}const yae=Sa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function lU(e){de.call(this,null,e),this.modified(!0)}Re(lU,de,{transform(e,t){var n=t.dataflow,i=this.value,r=vae(e);(!i||r!==i.type)&&(this.value=i=At(r)());for(r in e)if(!yae[r]){if(r==="padding"&&sU(i.type))continue;rt(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Sae(i,e,Cae(i,e,xae(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function vae(e){var t=e.type,n="",i;return t===ro?ro+"-"+pd:(bae(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?ro+"-":i===3?eh+"-":""),(n+t||pd).toLowerCase())}function bae(e){const t=e.type;return E3(t)&&t!==ac&&t!==oc&&(e.scheme||e.range&&e.range.length&&e.range.every(ze))}function xae(e,t,n){const i=Eae(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,o=t.zero||t.zero===void 0&&mae(e),u,c;if(!r)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(u=(r=r.slice()).length-1||1,o&&(r[0]>0&&(r[0]=0),r[u]<0&&(r[u]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[u]=t.domainMax),t.domainMid!=null)){c=t.domainMid;const l=c>r[u]?u+1:c<r[0]?0:u;l!==u&&n.warn("Scale domainMid exceeds domain min or max.",c),r.splice(l,0,c)}return sU(a)&&t.padding&&r[0]!==vt(r)&&(r=Dae(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(cU(a,r,n)),a===y3&&e.unknown(t.domainImplicit?OS:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&S3(e,t.nice)||null),r.length}function Eae(e,t,n){return t?(e.domain(cU(e.type,t,n)),t.length):-1}function Dae(e,t,n,i,r,a){var o=Math.abs(vt(n)-n[0]),u=o/(o-2*i),c=e===bu?L_(t,null,u):e===lp?by(t,null,u,.5):e===sp?by(t,null,u,r||1):e===Tb?I_(t,null,u,a||1):z_(t,null,u);return t=t.slice(),t[0]=c[0],t[t.length-1]=c[1],t}function cU(e,t,n){if(xL(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+Oe(t))}return t}function Cae(e,t,n){let i=t.bins;if(i&&!be(i)){const r=e.domain(),a=r[0],o=vt(r),u=i.step;let c=i.start==null?a:i.start,l=i.stop==null?o:i.stop;u||me("Scale bins parameter missing step property."),c<a&&(c=u*Math.ceil(a/u)),l>o&&(l=u*Math.floor(o/u)),i=vr(c,l+u/2,u)}return i?e.bins=i:e.bins&&delete e.bins,e.type===v3&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Sae(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Aae(i,t,n);else if(t.scheme&&(a=_ae(i,t,n),rt(a))){if(e.interpolator)return e.interpolator(a);me(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&EL(i))return e.interpolator(Ob(tA(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(D3(t.interpolate,t.interpolateGamma)):rt(e.round)?e.round(r):rt(e.rangeRound)&&e.interpolate(r?op:Ys),a&&e.range(tA(a,t.reverse))}function Aae(e,t,n){e!==gL&&e!==US&&me("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===US?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*m3(n,r,i)]}function _ae(e,t,n){var i=t.schemeExtent,r,a;return be(t.scheme)?a=Ob(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=C3(r),a||me(`Unrecognized scheme name: ${t.scheme}`)),n=e===Mb?n+1:e===v3?n-1:e===md||e===$b?+t.schemeCount||pae:n,EL(e)?W$(a,i,t.reverse):rt(a)?SL(W$(a,i),n):e===y3?a:a.slice(0,n)}function W$(e,t,n){return rt(e)&&(t||n)?CL(e,tA(t||[0,1],n)):e}function tA(e,t){return t?e.slice().reverse():e}function fU(e){de.call(this,null,e)}Re(fU,de,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(wc(e.sort)),this.modified(n),t}});const Q$="zero",dU="center",hU="normalize",gU=["y0","y1"];function lF(e){de.call(this,null,e)}lF.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Q$,values:[Q$,dU,hU]},{name:"as",type:"string",array:!0,length:2,default:gU}]};Re(lF,de,{transform(e,t){var n=e.as||gU,i=n[0],r=n[1],a=wc(e.sort),o=e.field||jd,u=e.offset===dU?wae:e.offset===hU?Fae:kae,c,l,d,h;for(c=Tae(t.source,e.groupby,a,o),l=0,d=c.length,h=c.max;l<d;++l)u(c[l],h,o,i,r);return t.reflow(e.modified()).modifies(n)}});function wae(e,t,n,i,r){for(var a=(t-e.sum)/2,o=e.length,u=0,c;u<o;++u)c=e[u],c[i]=a,c[r]=a+=Math.abs(n(c))}function Fae(e,t,n,i,r){for(var a=1/e.sum,o=0,u=e.length,c=0,l=0,d;c<u;++c)d=e[c],d[i]=o,d[r]=o=a*(l+=Math.abs(n(d)))}function kae(e,t,n,i,r){for(var a=0,o=0,u=e.length,c=0,l,d;c<u;++c)d=e[c],l=+n(d),l<0?(d[i]=o,d[r]=o+=l):(d[i]=a,d[r]=a+=l)}function Tae(e,t,n,i){var r=[],a=b=>b(d),o,u,c,l,d,h,p,y,v;if(t==null)r.push(e.slice());else for(o={},u=0,c=e.length;u<c;++u)d=e[u],h=t.map(a),p=o[h],p||(o[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,l=r.length;h<l;++h){for(p=r[h],u=0,y=0,c=p.length;u<c;++u)y+=Math.abs(i(p[u]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const $ae=Object.freeze(Object.defineProperty({__proto__:null,axisticks:tU,datajoin:nU,encode:iU,legendentries:rU,linkpath:uF,pie:sF,scale:lU,sortitems:fU,stack:lF},Symbol.toStringTag,{value:"Module"}));var Ve=1e-6,Qy=1e-12,ct=Math.PI,fn=ct/2,Zy=ct/4,zi=ct*2,mn=180/ct,st=ct/180,yt=Math.abs,nh=Math.atan,Kr=Math.atan2,We=Math.cos,b1=Math.ceil,pU=Math.exp,nA=Math.hypot,Ky=Math.log,ZD=Math.pow,Xe=Math.sin,qr=Math.sign||function(e){return e>0?1:e<0?-1:0},Li=Math.sqrt,cF=Math.tan;function mU(e){return e>1?0:e<-1?ct:Math.acos(e)}function tr(e){return e>1?fn:e<-1?-fn:Math.asin(e)}function ti(){}function Jy(e,t){e&&K$.hasOwnProperty(e.type)&&K$[e.type](e,t)}var Z$={Feature:function(e,t){Jy(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Jy(n[i].geometry,t)}},K$={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){iA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)iA(n[i],t,0)},Polygon:function(e,t){J$(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)J$(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Jy(n[i],t)}};function iA(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function J$(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)iA(e[n],t,1);t.polygonEnd()}function eu(e,t){e&&Z$.hasOwnProperty(e.type)?Z$[e.type](e,t):Jy(e,t)}var ev=new Ri,tv=new Ri,yU,vU,rA,aA,oA,ho={point:ti,lineStart:ti,lineEnd:ti,polygonStart:function(){ev=new Ri,ho.lineStart=Mae,ho.lineEnd=Oae},polygonEnd:function(){var e=+ev;tv.add(e<0?zi+e:e),this.lineStart=this.lineEnd=this.point=ti},sphere:function(){tv.add(zi)}};function Mae(){ho.point=Nae}function Oae(){bU(yU,vU)}function Nae(e,t){ho.point=bU,yU=e,vU=t,e*=st,t*=st,rA=e,aA=We(t=t/2+Zy),oA=Xe(t)}function bU(e,t){e*=st,t*=st,t=t/2+Zy;var n=e-rA,i=n>=0?1:-1,r=i*n,a=We(t),o=Xe(t),u=oA*o,c=aA*a+u*We(r),l=u*i*Xe(r);ev.add(Kr(l,c)),rA=e,aA=a,oA=o}function Rae(e){return tv=new Ri,eu(e,ho),tv*2}function nv(e){return[Kr(e[1],e[0]),tr(e[2])]}function sc(e){var t=e[0],n=e[1],i=We(n);return[i*We(t),i*Xe(t),Xe(n)]}function x1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Dd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function KD(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function E1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function iv(e){var t=Li(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var rn,Wi,ln,mr,Bl,xU,EU,ed,fg,ss,xu,Ko={point:uA,lineStart:eM,lineEnd:tM,polygonStart:function(){Ko.point=CU,Ko.lineStart=Bae,Ko.lineEnd=zae,fg=new Ri,ho.polygonStart()},polygonEnd:function(){ho.polygonEnd(),Ko.point=uA,Ko.lineStart=eM,Ko.lineEnd=tM,ev<0?(rn=-(ln=180),Wi=-(mr=90)):fg>Ve?mr=90:fg<-Ve&&(Wi=-90),xu[0]=rn,xu[1]=ln},sphere:function(){rn=-(ln=180),Wi=-(mr=90)}};function uA(e,t){ss.push(xu=[rn=e,ln=e]),t<Wi&&(Wi=t),t>mr&&(mr=t)}function DU(e,t){var n=sc([e*st,t*st]);if(ed){var i=Dd(ed,n),r=[i[1],-i[0],0],a=Dd(r,i);iv(a),a=nv(a);var o=e-Bl,u=o>0?1:-1,c=a[0]*mn*u,l,d=yt(o)>180;d^(u*Bl<c&&c<u*e)?(l=a[1]*mn,l>mr&&(mr=l)):(c=(c+360)%360-180,d^(u*Bl<c&&c<u*e)?(l=-a[1]*mn,l<Wi&&(Wi=l)):(t<Wi&&(Wi=t),t>mr&&(mr=t))),d?e<Bl?pr(rn,e)>pr(rn,ln)&&(ln=e):pr(e,ln)>pr(rn,ln)&&(rn=e):ln>=rn?(e<rn&&(rn=e),e>ln&&(ln=e)):e>Bl?pr(rn,e)>pr(rn,ln)&&(ln=e):pr(e,ln)>pr(rn,ln)&&(rn=e)}else ss.push(xu=[rn=e,ln=e]);t<Wi&&(Wi=t),t>mr&&(mr=t),ed=n,Bl=e}function eM(){Ko.point=DU}function tM(){xu[0]=rn,xu[1]=ln,Ko.point=uA,ed=null}function CU(e,t){if(ed){var n=e-Bl;fg.add(yt(n)>180?n+(n>0?360:-360):n)}else xU=e,EU=t;ho.point(e,t),DU(e,t)}function Bae(){ho.lineStart()}function zae(){CU(xU,EU),ho.lineEnd(),yt(fg)>Ve&&(rn=-(ln=180)),xu[0]=rn,xu[1]=ln,ed=null}function pr(e,t){return(t-=e)<0?t+360:t}function Lae(e,t){return e[0]-t[0]}function nM(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Iae(e){var t,n,i,r,a,o,u;if(mr=ln=-(rn=Wi=1/0),ss=[],eu(e,Ko),n=ss.length){for(ss.sort(Lae),t=1,i=ss[0],a=[i];t<n;++t)r=ss[t],nM(i,r[0])||nM(i,r[1])?(pr(i[0],r[1])>pr(i[0],i[1])&&(i[1]=r[1]),pr(r[0],i[1])>pr(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(o=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(u=pr(i[1],r[0]))>o&&(o=u,rn=r[0],ln=i[1])}return ss=xu=null,rn===1/0||Wi===1/0?[[NaN,NaN],[NaN,NaN]]:[[rn,Wi],[ln,mr]]}var X0,rv,av,ov,uv,sv,lv,cv,sA,lA,cA,SU,AU,Fi,ki,Ti,va={sphere:ti,point:fF,lineStart:iM,lineEnd:rM,polygonStart:function(){va.lineStart=jae,va.lineEnd=qae},polygonEnd:function(){va.lineStart=iM,va.lineEnd=rM}};function fF(e,t){e*=st,t*=st;var n=We(t);Ep(n*We(e),n*Xe(e),Xe(t))}function Ep(e,t,n){++X0,av+=(e-av)/X0,ov+=(t-ov)/X0,uv+=(n-uv)/X0}function iM(){va.point=Uae}function Uae(e,t){e*=st,t*=st;var n=We(t);Fi=n*We(e),ki=n*Xe(e),Ti=Xe(t),va.point=Pae,Ep(Fi,ki,Ti)}function Pae(e,t){e*=st,t*=st;var n=We(t),i=n*We(e),r=n*Xe(e),a=Xe(t),o=Kr(Li((o=ki*a-Ti*r)*o+(o=Ti*i-Fi*a)*o+(o=Fi*r-ki*i)*o),Fi*i+ki*r+Ti*a);rv+=o,sv+=o*(Fi+(Fi=i)),lv+=o*(ki+(ki=r)),cv+=o*(Ti+(Ti=a)),Ep(Fi,ki,Ti)}function rM(){va.point=fF}function jae(){va.point=Hae}function qae(){_U(SU,AU),va.point=fF}function Hae(e,t){SU=e,AU=t,e*=st,t*=st,va.point=_U;var n=We(t);Fi=n*We(e),ki=n*Xe(e),Ti=Xe(t),Ep(Fi,ki,Ti)}function _U(e,t){e*=st,t*=st;var n=We(t),i=n*We(e),r=n*Xe(e),a=Xe(t),o=ki*a-Ti*r,u=Ti*i-Fi*a,c=Fi*r-ki*i,l=nA(o,u,c),d=tr(l),h=l&&-d/l;sA.add(h*o),lA.add(h*u),cA.add(h*c),rv+=d,sv+=d*(Fi+(Fi=i)),lv+=d*(ki+(ki=r)),cv+=d*(Ti+(Ti=a)),Ep(Fi,ki,Ti)}function Gae(e){X0=rv=av=ov=uv=sv=lv=cv=0,sA=new Ri,lA=new Ri,cA=new Ri,eu(e,va);var t=+sA,n=+lA,i=+cA,r=nA(t,n,i);return r<Qy&&(t=sv,n=lv,i=cv,rv<Ve&&(t=av,n=ov,i=uv),r=nA(t,n,i),r<Qy)?[NaN,NaN]:[Kr(n,t)*mn,tr(i/r)*mn]}function fA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function dA(e,t){return yt(e)>ct&&(e-=Math.round(e/zi)*zi),[e,t]}dA.invert=dA;function wU(e,t,n){return(e%=zi)?t||n?fA(oM(e),uM(t,n)):oM(e):t||n?uM(t,n):dA}function aM(e){return function(t,n){return t+=e,yt(t)>ct&&(t-=Math.round(t/zi)*zi),[t,n]}}function oM(e){var t=aM(e);return t.invert=aM(-e),t}function uM(e,t){var n=We(e),i=Xe(e),r=We(t),a=Xe(t);function o(u,c){var l=We(c),d=We(u)*l,h=Xe(u)*l,p=Xe(c),y=p*n+d*i;return[Kr(h*r-y*a,d*n-p*i),tr(y*r+h*a)]}return o.invert=function(u,c){var l=We(c),d=We(u)*l,h=Xe(u)*l,p=Xe(c),y=p*r-h*a;return[Kr(h*r+p*a,d*n+y*i),tr(y*n-d*i)]},o}function Yae(e){e=wU(e[0]*st,e[1]*st,e.length>2?e[2]*st:0);function t(n){return n=e(n[0]*st,n[1]*st),n[0]*=mn,n[1]*=mn,n}return t.invert=function(n){return n=e.invert(n[0]*st,n[1]*st),n[0]*=mn,n[1]*=mn,n},t}function Xae(e,t,n,i,r,a){if(n){var o=We(t),u=Xe(t),c=i*n;r==null?(r=t+i*zi,a=t-c/2):(r=sM(o,r),a=sM(o,a),(i>0?r<a:r>a)&&(r+=i*zi));for(var l,d=r;i>0?d>a:d<a;d-=c)l=nv([o,-u*We(d),-u*Xe(d)]),e.point(l[0],l[1])}}function sM(e,t){t=sc(t),t[0]-=e,iv(t);var n=mU(-t[1]);return((-t[2]<0?-n:n)+zi-Ve)%zi}function FU(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:ti,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function ry(e,t){return yt(e[0]-t[0])<Ve&&yt(e[1]-t[1])<Ve}function D1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function kU(e,t,n,i,r){var a=[],o=[],u,c;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,x=v[0],D=v[b],S;if(ry(x,D)){if(!x[2]&&!D[2]){for(r.lineStart(),u=0;u<b;++u)r.point((x=v[u])[0],x[1]);r.lineEnd();return}D[0]+=2*Ve}a.push(S=new D1(x,v,null,!0)),o.push(S.o=new D1(x,null,S,!1)),a.push(S=new D1(D,v,null,!1)),o.push(S.o=new D1(D,null,S,!0))}}),!!a.length){for(o.sort(t),lM(a),lM(o),u=0,c=o.length;u<c;++u)o[u].e=n=!n;for(var l=a[0],d,h;;){for(var p=l,y=!0;p.v;)if((p=p.n)===l)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(u=0,c=d.length;u<c;++u)r.point((h=d[u])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,u=d.length-1;u>=0;--u)r.point((h=d[u])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function lM(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function JD(e){return yt(e[0])<=ct?e[0]:qr(e[0])*((yt(e[0])+ct)%zi-ct)}function Vae(e,t){var n=JD(t),i=t[1],r=Xe(i),a=[Xe(n),-We(n),0],o=0,u=0,c=new Ri;r===1?i=fn+Ve:r===-1&&(i=-fn-Ve);for(var l=0,d=e.length;l<d;++l)if(p=(h=e[l]).length)for(var h,p,y=h[p-1],v=JD(y),b=y[1]/2+Zy,x=Xe(b),D=We(b),S=0;S<p;++S,v=w,x=k,D=F,y=A){var A=h[S],w=JD(A),_=A[1]/2+Zy,k=Xe(_),F=We(_),M=w-v,N=M>=0?1:-1,P=N*M,L=P>ct,H=x*k;if(c.add(Kr(H*N*Xe(P),D*F+H*We(P))),o+=L?M+N*zi:M,L^v>=n^w>=n){var I=Dd(sc(y),sc(A));iv(I);var U=Dd(a,I);iv(U);var z=(L^M>=0?-1:1)*tr(U[2]);(i>z||i===z&&(I[0]||I[1]))&&(u+=L^M>=0?1:-1)}}return(o<-Ve||o<Ve&&c<-Qy)^u&1}function TU(e,t,n,i){return function(r){var a=t(r),o=FU(),u=t(o),c=!1,l,d,h,p={point:y,lineStart:b,lineEnd:x,polygonStart:function(){p.point=D,p.lineStart=S,p.lineEnd=A,d=[],l=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=x,d=ER(d);var w=Vae(l,i);d.length?(c||(r.polygonStart(),c=!0),kU(d,Qae,w,n,r)):w&&(c||(r.polygonStart(),c=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),c&&(r.polygonEnd(),c=!1),d=l=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(w,_){e(w,_)&&r.point(w,_)}function v(w,_){a.point(w,_)}function b(){p.point=v,a.lineStart()}function x(){p.point=y,a.lineEnd()}function D(w,_){h.push([w,_]),u.point(w,_)}function S(){u.lineStart(),h=[]}function A(){D(h[0][0],h[0][1]),u.lineEnd();var w=u.clean(),_=o.result(),k,F=_.length,M,N,P;if(h.pop(),l.push(h),h=null,!!F){if(w&1){if(N=_[0],(M=N.length-1)>0){for(c||(r.polygonStart(),c=!0),r.lineStart(),k=0;k<M;++k)r.point((P=N[k])[0],P[1]);r.lineEnd()}return}F>1&&w&2&&_.push(_.pop().concat(_.shift())),d.push(_.filter(Wae))}}return p}}function Wae(e){return e.length>1}function Qae(e,t){return((e=e.x)[0]<0?e[1]-fn-Ve:fn-e[1])-((t=t.x)[0]<0?t[1]-fn-Ve:fn-t[1])}const cM=TU(function(){return!0},Zae,Jae,[-ct,-fn]);function Zae(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,o){var u=a>0?ct:-ct,c=yt(a-t);yt(c-ct)<Ve?(e.point(t,n=(n+o)/2>0?fn:-fn),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),e.point(a,n),r=0):i!==u&&c>=ct&&(yt(t-i)<Ve&&(t-=i*Ve),yt(a-u)<Ve&&(a-=u*Ve),n=Kae(t,n,a,o),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(u,n),r=0),e.point(t=a,n=o),i=u},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function Kae(e,t,n,i){var r,a,o=Xe(e-n);return yt(o)>Ve?nh((Xe(t)*(a=We(i))*Xe(n)-Xe(i)*(r=We(t))*Xe(e))/(r*a*o)):(t+i)/2}function Jae(e,t,n,i){var r;if(e==null)r=n*fn,i.point(-ct,r),i.point(0,r),i.point(ct,r),i.point(ct,0),i.point(ct,-r),i.point(0,-r),i.point(-ct,-r),i.point(-ct,0),i.point(-ct,r);else if(yt(e[0]-t[0])>Ve){var a=e[0]<t[0]?ct:-ct;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function eoe(e){var t=We(e),n=2*st,i=t>0,r=yt(t)>Ve;function a(d,h,p,y){Xae(y,e,n,p,d,h)}function o(d,h){return We(d)*We(h)>t}function u(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(x,D){var S=[x,D],A,w=o(x,D),_=i?w?0:l(x,D):w?l(x+(x<0?ct:-ct),D):0;if(!h&&(v=y=w)&&d.lineStart(),w!==y&&(A=c(h,S),(!A||ry(h,A)||ry(S,A))&&(S[2]=1)),w!==y)b=0,w?(d.lineStart(),A=c(S,h),d.point(A[0],A[1])):(A=c(h,S),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^w){var k;!(_&p)&&(k=c(S,h,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}w&&(!h||!ry(h,S))&&d.point(S[0],S[1]),h=S,y=w,p=_},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function c(d,h,p){var y=sc(d),v=sc(h),b=[1,0,0],x=Dd(y,v),D=x1(x,x),S=x[0],A=D-S*S;if(!A)return!p&&d;var w=t*D/A,_=-t*S/A,k=Dd(b,x),F=E1(b,w),M=E1(x,_);KD(F,M);var N=k,P=x1(F,N),L=x1(N,N),H=P*P-L*(x1(F,F)-1);if(!(H<0)){var I=Li(H),U=E1(N,(-P-I)/L);if(KD(U,F),U=nv(U),!p)return U;var z=d[0],T=h[0],R=d[1],q=h[1],G;T<z&&(G=z,z=T,T=G);var O=T-z,Z=yt(O-ct)<Ve,ee=Z||O<Ve;if(!Z&&q<R&&(G=R,R=q,q=G),ee?Z?R+q>0^U[1]<(yt(U[0]-z)<Ve?R:q):R<=U[1]&&U[1]<=q:O>ct^(z<=U[0]&&U[0]<=T)){var X=E1(N,(-P+I)/L);return KD(X,F),[U,nv(X)]}}}function l(d,h){var p=i?e:ct-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return TU(o,u,a,i?[0,-e]:[-ct,e-ct])}function toe(e,t,n,i,r,a){var o=e[0],u=e[1],c=t[0],l=t[1],d=0,h=1,p=c-o,y=l-u,v;if(v=n-o,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-o,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-u,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-u,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=o+d*p,e[1]=u+d*y),h<1&&(t[0]=o+h*p,t[1]=u+h*y),!0}}}}}var V0=1e9,C1=-V0;function $U(e,t,n,i){function r(l,d){return e<=l&&l<=n&&t<=d&&d<=i}function a(l,d,h,p){var y=0,v=0;if(l==null||(y=o(l,h))!==(v=o(d,h))||c(l,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function o(l,d){return yt(l[0]-e)<Ve?d>0?0:3:yt(l[0]-n)<Ve?d>0?2:1:yt(l[1]-t)<Ve?d>0?1:0:d>0?3:2}function u(l,d){return c(l.x,d.x)}function c(l,d){var h=o(l,1),p=o(d,1);return h!==p?h-p:h===0?d[1]-l[1]:h===1?l[0]-d[0]:h===2?l[1]-d[1]:d[0]-l[0]}return function(l){var d=l,h=FU(),p,y,v,b,x,D,S,A,w,_,k,F={point:M,lineStart:H,lineEnd:I,polygonStart:P,polygonEnd:L};function M(z,T){r(z,T)&&d.point(z,T)}function N(){for(var z=0,T=0,R=y.length;T<R;++T)for(var q=y[T],G=1,O=q.length,Z=q[0],ee,X,Q=Z[0],ne=Z[1];G<O;++G)ee=Q,X=ne,Z=q[G],Q=Z[0],ne=Z[1],X<=i?ne>i&&(Q-ee)*(i-X)>(ne-X)*(e-ee)&&++z:ne<=i&&(Q-ee)*(i-X)<(ne-X)*(e-ee)&&--z;return z}function P(){d=h,p=[],y=[],k=!0}function L(){var z=N(),T=k&&z,R=(p=ER(p)).length;(T||R)&&(l.polygonStart(),T&&(l.lineStart(),a(null,null,1,l),l.lineEnd()),R&&kU(p,u,z,a,l),l.polygonEnd()),d=l,p=y=v=null}function H(){F.point=U,y&&y.push(v=[]),_=!0,w=!1,S=A=NaN}function I(){p&&(U(b,x),D&&w&&h.rejoin(),p.push(h.result())),F.point=M,w&&d.lineEnd()}function U(z,T){var R=r(z,T);if(y&&v.push([z,T]),_)b=z,x=T,D=R,_=!1,R&&(d.lineStart(),d.point(z,T));else if(R&&w)d.point(z,T);else{var q=[S=Math.max(C1,Math.min(V0,S)),A=Math.max(C1,Math.min(V0,A))],G=[z=Math.max(C1,Math.min(V0,z)),T=Math.max(C1,Math.min(V0,T))];toe(q,G,e,t,n,i)?(w||(d.lineStart(),d.point(q[0],q[1])),d.point(G[0],G[1]),R||d.lineEnd(),k=!1):R&&(d.lineStart(),d.point(z,T),k=!1)}S=z,A=T,w=R}return F}}function fM(e,t,n){var i=vr(e,t-Ve,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function dM(e,t,n){var i=vr(e,t-Ve,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function noe(){var e,t,n,i,r,a,o,u,c=10,l=c,d=90,h=360,p,y,v,b,x=2.5;function D(){return{type:"MultiLineString",coordinates:S()}}function S(){return vr(b1(i/d)*d,n,d).map(v).concat(vr(b1(u/h)*h,o,h).map(b)).concat(vr(b1(t/c)*c,e,c).filter(function(A){return yt(A%d)>Ve}).map(p)).concat(vr(b1(a/l)*l,r,l).filter(function(A){return yt(A%h)>Ve}).map(y))}return D.lines=function(){return S().map(function(A){return{type:"LineString",coordinates:A}})},D.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(o).slice(1),v(n).reverse().slice(1),b(u).reverse().slice(1))]}},D.extent=function(A){return arguments.length?D.extentMajor(A).extentMinor(A):D.extentMinor()},D.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],u=+A[0][1],o=+A[1][1],i>n&&(A=i,i=n,n=A),u>o&&(A=u,u=o,o=A),D.precision(x)):[[i,u],[n,o]]},D.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),D.precision(x)):[[t,a],[e,r]]},D.step=function(A){return arguments.length?D.stepMajor(A).stepMinor(A):D.stepMinor()},D.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],D):[d,h]},D.stepMinor=function(A){return arguments.length?(c=+A[0],l=+A[1],D):[c,l]},D.precision=function(A){return arguments.length?(x=+A,p=fM(a,r,90),y=dM(t,e,x),v=fM(u,o,90),b=dM(i,n,x),D):x},D.extentMajor([[-180,-90+Ve],[180,90-Ve]]).extentMinor([[-180,-80-Ve],[180,80+Ve]])}const Ng=e=>e;var eC=new Ri,hA=new Ri,MU,OU,gA,pA,tu={point:ti,lineStart:ti,lineEnd:ti,polygonStart:function(){tu.lineStart=ioe,tu.lineEnd=aoe},polygonEnd:function(){tu.lineStart=tu.lineEnd=tu.point=ti,eC.add(yt(hA)),hA=new Ri},result:function(){var e=eC/2;return eC=new Ri,e}};function ioe(){tu.point=roe}function roe(e,t){tu.point=NU,MU=gA=e,OU=pA=t}function NU(e,t){hA.add(pA*e-gA*t),gA=e,pA=t}function aoe(){NU(MU,OU)}var Cd=1/0,fv=Cd,Rg=-Cd,dv=Rg,hv={point:ooe,lineStart:ti,lineEnd:ti,polygonStart:ti,polygonEnd:ti,result:function(){var e=[[Cd,fv],[Rg,dv]];return Rg=dv=-(fv=Cd=1/0),e}};function ooe(e,t){e<Cd&&(Cd=e),e>Rg&&(Rg=e),t<fv&&(fv=t),t>dv&&(dv=t)}var mA=0,yA=0,W0=0,gv=0,pv=0,Xf=0,vA=0,bA=0,Q0=0,RU,BU,Ka,Ja,Pr={point:lc,lineStart:hM,lineEnd:gM,polygonStart:function(){Pr.lineStart=loe,Pr.lineEnd=coe},polygonEnd:function(){Pr.point=lc,Pr.lineStart=hM,Pr.lineEnd=gM},result:function(){var e=Q0?[vA/Q0,bA/Q0]:Xf?[gv/Xf,pv/Xf]:W0?[mA/W0,yA/W0]:[NaN,NaN];return mA=yA=W0=gv=pv=Xf=vA=bA=Q0=0,e}};function lc(e,t){mA+=e,yA+=t,++W0}function hM(){Pr.point=uoe}function uoe(e,t){Pr.point=soe,lc(Ka=e,Ja=t)}function soe(e,t){var n=e-Ka,i=t-Ja,r=Li(n*n+i*i);gv+=r*(Ka+e)/2,pv+=r*(Ja+t)/2,Xf+=r,lc(Ka=e,Ja=t)}function gM(){Pr.point=lc}function loe(){Pr.point=foe}function coe(){zU(RU,BU)}function foe(e,t){Pr.point=zU,lc(RU=Ka=e,BU=Ja=t)}function zU(e,t){var n=e-Ka,i=t-Ja,r=Li(n*n+i*i);gv+=r*(Ka+e)/2,pv+=r*(Ja+t)/2,Xf+=r,r=Ja*e-Ka*t,vA+=r*(Ka+e),bA+=r*(Ja+t),Q0+=r*3,lc(Ka=e,Ja=t)}function LU(e){this._context=e}LU.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,zi);break}}},result:ti};var xA=new Ri,tC,IU,UU,Z0,K0,Bg={point:ti,lineStart:function(){Bg.point=doe},lineEnd:function(){tC&&PU(IU,UU),Bg.point=ti},polygonStart:function(){tC=!0},polygonEnd:function(){tC=null},result:function(){var e=+xA;return xA=new Ri,e}};function doe(e,t){Bg.point=PU,IU=Z0=e,UU=K0=t}function PU(e,t){Z0-=e,K0-=t,xA.add(Li(Z0*Z0+K0*K0)),Z0=e,K0=t}let pM,mv,mM,yM;class vM{constructor(t){this._append=t==null?jU:hoe(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==mM||this._append!==mv){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,mM=i,mv=this._append,yM=this._,this._=r}this._+=yM;break}}}result(){const t=this._;return this._="",t.length?t:null}}function jU(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function hoe(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return jU;if(t!==pM){const n=10**t;pM=t,mv=function(r){let a=1;this._+=r[0];for(const o=r.length;a<o;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return mv}function qU(e,t){let n=3,i=4.5,r,a;function o(u){return u&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),eu(u,r(a))),a.result()}return o.area=function(u){return eu(u,r(tu)),tu.result()},o.measure=function(u){return eu(u,r(Bg)),Bg.result()},o.bounds=function(u){return eu(u,r(hv)),hv.result()},o.centroid=function(u){return eu(u,r(Pr)),Pr.result()},o.projection=function(u){return arguments.length?(r=u==null?(e=null,Ng):(e=u).stream,o):e},o.context=function(u){return arguments.length?(a=u==null?(t=null,new vM(n)):new LU(t=u),typeof i!="function"&&a.pointRadius(i),o):t},o.pointRadius=function(u){return arguments.length?(i=typeof u=="function"?u:(a.pointRadius(+u),+u),o):i},o.digits=function(u){if(!arguments.length)return n;if(u==null)n=null;else{const c=Math.floor(u);if(!(c>=0))throw new RangeError(`invalid digits: ${u}`);n=c}return t===null&&(a=new vM(n)),o},o.projection(e).digits(n).context(t)}function Yb(e){return function(t){var n=new EA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function EA(){}EA.prototype={constructor:EA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function dF(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),eu(n,e.stream(hv)),t(hv.result()),i!=null&&e.clipExtent(i),e}function Xb(e,t,n){return dF(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],o=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),u=+t[0][0]+(r-o*(i[1][0]+i[0][0]))/2,c=+t[0][1]+(a-o*(i[1][1]+i[0][1]))/2;e.scale(150*o).translate([u,c])},n)}function hF(e,t,n){return Xb(e,[[0,0],t],n)}function gF(e,t,n){return dF(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),o=(r-a*(i[1][0]+i[0][0]))/2,u=-a*i[0][1];e.scale(150*a).translate([o,u])},n)}function pF(e,t,n){return dF(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),o=-a*i[0][0],u=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([o,u])},n)}var bM=16,goe=We(30*st);function xM(e,t){return+t?moe(e,t):poe(e)}function poe(e){return Yb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function moe(e,t){function n(i,r,a,o,u,c,l,d,h,p,y,v,b,x){var D=l-i,S=d-r,A=D*D+S*S;if(A>4*t&&b--){var w=o+p,_=u+y,k=c+v,F=Li(w*w+_*_+k*k),M=tr(k/=F),N=yt(yt(k)-1)<Ve||yt(a-h)<Ve?(a+h)/2:Kr(_,w),P=e(N,M),L=P[0],H=P[1],I=L-i,U=H-r,z=S*I-D*U;(z*z/A>t||yt((D*I+S*U)/A-.5)>.3||o*p+u*y+c*v<goe)&&(n(i,r,a,o,u,c,L,H,N,w/=F,_/=F,k,b,x),x.point(L,H),n(L,H,N,w,_,k,l,d,h,p,y,v,b,x))}}return function(i){var r,a,o,u,c,l,d,h,p,y,v,b,x={point:D,lineStart:S,lineEnd:w,polygonStart:function(){i.polygonStart(),x.lineStart=_},polygonEnd:function(){i.polygonEnd(),x.lineStart=S}};function D(M,N){M=e(M,N),i.point(M[0],M[1])}function S(){h=NaN,x.point=A,i.lineStart()}function A(M,N){var P=sc([M,N]),L=e(M,N);n(h,p,d,y,v,b,h=L[0],p=L[1],d=M,y=P[0],v=P[1],b=P[2],bM,i),i.point(h,p)}function w(){x.point=D,i.lineEnd()}function _(){S(),x.point=k,x.lineEnd=F}function k(M,N){A(r=M,N),a=h,o=p,u=y,c=v,l=b,x.point=A}function F(){n(h,p,d,y,v,b,a,o,r,u,c,l,bM,i),x.lineEnd=w,w()}return x}}var yoe=Yb({point:function(e,t){this.stream.point(e*st,t*st)}});function voe(e){return Yb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function boe(e,t,n,i,r){function a(o,u){return o*=i,u*=r,[t+e*o,n-e*u]}return a.invert=function(o,u){return[(o-t)/e*i,(n-u)/e*r]},a}function EM(e,t,n,i,r,a){if(!a)return boe(e,t,n,i,r);var o=We(a),u=Xe(a),c=o*e,l=u*e,d=o/e,h=u/e,p=(u*n-o*t)/e,y=(u*t+o*n)/e;function v(b,x){return b*=i,x*=r,[c*b-l*x+t,n-l*b-c*x]}return v.invert=function(b,x){return[i*(d*b-h*x+p),r*(y-h*b-d*x)]},v}function Do(e){return HU(function(){return e})()}function HU(e){var t,n=150,i=480,r=250,a=0,o=0,u=0,c=0,l=0,d,h=0,p=1,y=1,v=null,b=cM,x=null,D,S,A,w=Ng,_=.5,k,F,M,N,P;function L(z){return M(z[0]*st,z[1]*st)}function H(z){return z=M.invert(z[0],z[1]),z&&[z[0]*mn,z[1]*mn]}L.stream=function(z){return N&&P===z?N:N=yoe(voe(d)(b(k(w(P=z)))))},L.preclip=function(z){return arguments.length?(b=z,v=void 0,U()):b},L.postclip=function(z){return arguments.length?(w=z,x=D=S=A=null,U()):w},L.clipAngle=function(z){return arguments.length?(b=+z?eoe(v=z*st):(v=null,cM),U()):v*mn},L.clipExtent=function(z){return arguments.length?(w=z==null?(x=D=S=A=null,Ng):$U(x=+z[0][0],D=+z[0][1],S=+z[1][0],A=+z[1][1]),U()):x==null?null:[[x,D],[S,A]]},L.scale=function(z){return arguments.length?(n=+z,I()):n},L.translate=function(z){return arguments.length?(i=+z[0],r=+z[1],I()):[i,r]},L.center=function(z){return arguments.length?(a=z[0]%360*st,o=z[1]%360*st,I()):[a*mn,o*mn]},L.rotate=function(z){return arguments.length?(u=z[0]%360*st,c=z[1]%360*st,l=z.length>2?z[2]%360*st:0,I()):[u*mn,c*mn,l*mn]},L.angle=function(z){return arguments.length?(h=z%360*st,I()):h*mn},L.reflectX=function(z){return arguments.length?(p=z?-1:1,I()):p<0},L.reflectY=function(z){return arguments.length?(y=z?-1:1,I()):y<0},L.precision=function(z){return arguments.length?(k=xM(F,_=z*z),U()):Li(_)},L.fitExtent=function(z,T){return Xb(L,z,T)},L.fitSize=function(z,T){return hF(L,z,T)},L.fitWidth=function(z,T){return gF(L,z,T)},L.fitHeight=function(z,T){return pF(L,z,T)};function I(){var z=EM(n,0,0,p,y,h).apply(null,t(a,o)),T=EM(n,i-z[0],r-z[1],p,y,h);return d=wU(u,c,l),F=fA(t,T),M=fA(d,F),k=xM(F,_),U()}function U(){return N=P=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&H,I()}}function mF(e){var t=0,n=ct/3,i=HU(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*st,n=a[1]*st):[t*mn,n*mn]},r}function xoe(e){var t=We(e);function n(i,r){return[i*t,Xe(r)/t]}return n.invert=function(i,r){return[i/t,tr(r*t)]},n}function Eoe(e,t){var n=Xe(e),i=(n+Xe(t))/2;if(yt(i)<Ve)return xoe(e);var r=1+n*(2*i-n),a=Li(r)/i;function o(u,c){var l=Li(r-2*i*Xe(c))/i;return[l*Xe(u*=i),a-l*We(u)]}return o.invert=function(u,c){var l=a-c,d=Kr(u,yt(l))*qr(l);return l*i<0&&(d-=ct*qr(u)*qr(l)),[d/i,tr((r-(u*u+l*l)*i*i)/(2*i))]},o}function yv(){return mF(Eoe).scale(155.424).center([0,33.6442])}function GU(){return yv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Doe(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Coe(){var e,t,n=GU(),i,r=yv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,o=yv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u,c,l={point:function(p,y){c=[p,y]}};function d(p){var y=p[0],v=p[1];return c=null,i.point(y,v),c||(a.point(y,v),c)||(u.point(y,v),c)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,x=(p[1]-v[1])/y;return(x>=.12&&x<.234&&b>=-.425&&b<-.214?r:x>=.166&&x<.234&&b>=-.214&&b<-.115?o:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Doe([n.stream(t=p),r.stream(p),o.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),o.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),o.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(l),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Ve,b+.12*y+Ve],[v-.214*y-Ve,b+.234*y-Ve]]).stream(l),u=o.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Ve,b+.166*y+Ve],[v-.115*y-Ve,b+.234*y-Ve]]).stream(l),h()},d.fitExtent=function(p,y){return Xb(d,p,y)},d.fitSize=function(p,y){return hF(d,p,y)},d.fitWidth=function(p,y){return gF(d,p,y)},d.fitHeight=function(p,y){return pF(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function YU(e){return function(t,n){var i=We(t),r=We(n),a=e(i*r);return a===1/0?[2,0]:[a*r*Xe(t),a*Xe(n)]}}function Dp(e){return function(t,n){var i=Li(t*t+n*n),r=e(i),a=Xe(r),o=We(r);return[Kr(t*a,i*o),tr(i&&n*a/i)]}}var XU=YU(function(e){return Li(2/(1+e))});XU.invert=Dp(function(e){return 2*tr(e/2)});function Soe(){return Do(XU).scale(124.75).clipAngle(180-.001)}var VU=YU(function(e){return(e=mU(e))&&e/Xe(e)});VU.invert=Dp(function(e){return e});function Aoe(){return Do(VU).scale(79.4188).clipAngle(180-.001)}function Vb(e,t){return[e,Ky(cF((fn+t)/2))]}Vb.invert=function(e,t){return[e,2*nh(pU(t))-fn]};function _oe(){return WU(Vb).scale(961/zi)}function WU(e){var t=Do(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,o=null,u,c,l;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?o=u=c=l=null:(o=+h[0][0],u=+h[0][1],c=+h[1][0],l=+h[1][1]),d()):o==null?null:[[o,u],[c,l]]};function d(){var h=ct*i(),p=t(Yae(t.rotate()).invert([0,0]));return a(o==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Vb?[[Math.max(p[0]-h,o),u],[Math.min(p[0]+h,c),l]]:[[o,Math.max(p[1]-h,u)],[c,Math.min(p[1]+h,l)]])}return d()}function S1(e){return cF((fn+e)/2)}function woe(e,t){var n=We(e),i=e===t?Xe(e):Ky(n/We(t))/Ky(S1(t)/S1(e)),r=n*ZD(S1(e),i)/i;if(!i)return Vb;function a(o,u){r>0?u<-fn+Ve&&(u=-fn+Ve):u>fn-Ve&&(u=fn-Ve);var c=r/ZD(S1(u),i);return[c*Xe(i*o),r-c*We(i*o)]}return a.invert=function(o,u){var c=r-u,l=qr(i)*Li(o*o+c*c),d=Kr(o,yt(c))*qr(c);return c*i<0&&(d-=ct*qr(o)*qr(c)),[d/i,2*nh(ZD(r/l,1/i))-fn]},a}function Foe(){return mF(woe).scale(109.5).parallels([30,30])}function vv(e,t){return[e,t]}vv.invert=vv;function koe(){return Do(vv).scale(152.63)}function Toe(e,t){var n=We(e),i=e===t?Xe(e):(n-We(t))/(t-e),r=n/i+e;if(yt(i)<Ve)return vv;function a(o,u){var c=r-u,l=i*o;return[c*Xe(l),r-c*We(l)]}return a.invert=function(o,u){var c=r-u,l=Kr(o,yt(c))*qr(c);return c*i<0&&(l-=ct*qr(o)*qr(c)),[l/i,r-qr(i)*Li(o*o+c*c)]},a}function $oe(){return mF(Toe).scale(131.154).center([0,13.9389])}var dg=1.340264,hg=-.081106,gg=893e-6,pg=.003796,bv=Li(3)/2,Moe=12;function QU(e,t){var n=tr(bv*Xe(t)),i=n*n,r=i*i*i;return[e*We(n)/(bv*(dg+3*hg*i+r*(7*gg+9*pg*i))),n*(dg+hg*i+r*(gg+pg*i))]}QU.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,o,u,c;a<Moe&&(u=n*(dg+hg*i+r*(gg+pg*i))-t,c=dg+3*hg*i+r*(7*gg+9*pg*i),n-=o=u/c,i=n*n,r=i*i*i,!(yt(o)<Qy));++a);return[bv*e*(dg+3*hg*i+r*(7*gg+9*pg*i))/We(n),tr(Xe(n)/bv)]};function Ooe(){return Do(QU).scale(177.158)}function ZU(e,t){var n=We(t),i=We(e)*n;return[n*Xe(e)/i,Xe(t)/i]}ZU.invert=Dp(nh);function Noe(){return Do(ZU).scale(144.049).clipAngle(60)}function Roe(){var e=1,t=0,n=0,i=1,r=1,a=0,o,u,c=null,l,d,h,p=1,y=1,v=Yb({point:function(w,_){var k=A([w,_]);this.stream.point(k[0],k[1])}}),b=Ng,x,D;function S(){return p=e*i,y=e*r,x=D=null,A}function A(w){var _=w[0]*p,k=w[1]*y;if(a){var F=k*o-_*u;_=_*o+k*u,k=F}return[_+t,k+n]}return A.invert=function(w){var _=w[0]-t,k=w[1]-n;if(a){var F=k*o+_*u;_=_*o-k*u,k=F}return[_/p,k/y]},A.stream=function(w){return x&&D===w?x:x=v(b(D=w))},A.postclip=function(w){return arguments.length?(b=w,c=l=d=h=null,S()):b},A.clipExtent=function(w){return arguments.length?(b=w==null?(c=l=d=h=null,Ng):$U(c=+w[0][0],l=+w[0][1],d=+w[1][0],h=+w[1][1]),S()):c==null?null:[[c,l],[d,h]]},A.scale=function(w){return arguments.length?(e=+w,S()):e},A.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],S()):[t,n]},A.angle=function(w){return arguments.length?(a=w%360*st,u=Xe(a),o=We(a),S()):a*mn},A.reflectX=function(w){return arguments.length?(i=w?-1:1,S()):i<0},A.reflectY=function(w){return arguments.length?(r=w?-1:1,S()):r<0},A.fitExtent=function(w,_){return Xb(A,w,_)},A.fitSize=function(w,_){return hF(A,w,_)},A.fitWidth=function(w,_){return gF(A,w,_)},A.fitHeight=function(w,_){return pF(A,w,_)},A}function KU(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}KU.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,o=a*a;n-=r=(n*(1.007226+a*(.015085+o*(-.044475+.028874*a-.005916*o)))-t)/(1.007226+a*(.015085*3+o*(-.044475*7+.028874*9*a-.005916*11*o)))}while(yt(r)>Ve&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function Boe(){return Do(KU).scale(175.295)}function JU(e,t){return[We(t)*Xe(e),Xe(t)]}JU.invert=Dp(tr);function zoe(){return Do(JU).scale(249.5).clipAngle(90+Ve)}function eP(e,t){var n=We(t),i=1+We(e)*n;return[n*Xe(e)/i,Xe(t)/i]}eP.invert=Dp(function(e){return 2*nh(e)});function Loe(){return Do(eP).scale(250).clipAngle(142)}function tP(e,t){return[Ky(cF((fn+t)/2)),-e]}tP.invert=function(e,t){return[-t,2*nh(pU(e))-fn]};function Ioe(){var e=WU(tP),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Uoe=Math.abs,DA=Math.cos,xv=Math.sin,Poe=1e-6,nP=Math.PI,CA=nP/2,DM=joe(2);function CM(e){return e>1?CA:e<-1?-CA:Math.asin(e)}function joe(e){return e>0?Math.sqrt(e):0}function qoe(e,t){var n=e*xv(t),i=30,r;do t-=r=(t+xv(t)-n)/(1+DA(t));while(Uoe(r)>Poe&&--i>0);return t/2}function Hoe(e,t,n){function i(r,a){return[e*r*DA(a=qoe(n,a)),t*xv(a)]}return i.invert=function(r,a){return a=CM(a/t),[r/(e*DA(a)),CM((2*a+xv(2*a))/n)]},i}var Goe=Hoe(DM/CA,DM,nP);function Yoe(){return Do(Goe).scale(169.529)}const Xoe=qU(),SA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Voe(e,t){return function n(){const i=t();return i.type=e,i.path=qU().projection(i),i.copy=i.copy||function(){const r=n();return SA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},vL(i)}}function yF(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(Ev[e]=Voe(e,t),this):Ev[e]||null}function iP(e){return e&&e.path||Xoe}const Ev={albers:GU,albersusa:Coe,azimuthalequalarea:Soe,azimuthalequidistant:Aoe,conicconformal:Foe,conicequalarea:yv,conicequidistant:$oe,equalEarth:Ooe,equirectangular:koe,gnomonic:Noe,identity:Roe,mercator:_oe,mollweide:Yoe,naturalEarth1:Boe,orthographic:zoe,stereographic:Loe,transversemercator:Ioe};for(const e in Ev)yF(e,Ev[e]);function Woe(){}const Xo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function rP(){var e=1,t=1,n=u;function i(c,l){return l.map(d=>r(c,d))}function r(c,l){var d=[],h=[];return a(c,l,p=>{n(p,c,l),Qoe(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(Zoe((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:l,coordinates:d}}function a(c,l,d){var h=[],p=[],y,v,b,x,D,S;for(y=v=-1,x=c[0]>=l,Xo[x<<1].forEach(A);++y<e-1;)b=x,x=c[y+1]>=l,Xo[b|x<<1].forEach(A);for(Xo[x<<0].forEach(A);++v<t-1;){for(y=-1,x=c[v*e+e]>=l,D=c[v*e]>=l,Xo[x<<1|D<<2].forEach(A);++y<e-1;)b=x,x=c[v*e+e+y+1]>=l,S=D,D=c[v*e+y+1]>=l,Xo[b|x<<1|D<<2|S<<3].forEach(A);Xo[x|D<<3].forEach(A)}for(y=-1,D=c[v*e]>=l,Xo[D<<2].forEach(A);++y<e-1;)S=D,D=c[v*e+y+1]>=l,Xo[D<<2|S<<3].forEach(A);Xo[D<<3].forEach(A);function A(w){var _=[w[0][0]+y,w[0][1]+v],k=[w[1][0]+y,w[1][1]+v],F=o(_),M=o(k),N,P;(N=p[F])?(P=h[M])?(delete p[N.end],delete h[P.start],N===P?(N.ring.push(k),d(N.ring)):h[N.start]=p[P.end]={start:N.start,end:P.end,ring:N.ring.concat(P.ring)}):(delete p[N.end],N.ring.push(k),p[N.end=M]=N):(N=h[M])?(P=p[F])?(delete h[N.start],delete p[P.end],N===P?(N.ring.push(k),d(N.ring)):h[P.start]=p[N.end]={start:P.start,end:N.end,ring:P.ring.concat(N.ring)}):(delete h[N.start],N.ring.unshift(_),h[N.start=F]=N):h[F]=p[M]={start:F,end:M,ring:[_,k]}}}function o(c){return c[0]*2+c[1]*(e+1)*4}function u(c,l,d){c.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,x,D=l[b*e+v];p>0&&p<e&&v===p&&(x=l[b*e+v-1],h[0]=p+(d-x)/(D-x)-.5),y>0&&y<t&&b===y&&(x=l[(b-1)*e+v],h[1]=y+(d-x)/(D-x)-.5)})}return i.contour=r,i.size=function(c){if(!arguments.length)return[e,t];var l=Math.floor(c[0]),d=Math.floor(c[1]);return l>=0&&d>=0||me("invalid size"),e=l,t=d,i},i.smooth=function(c){return arguments.length?(n=c?u:Woe,i):n===u},i}function Qoe(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function Zoe(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=Koe(e,t[n]))return r;return 0}function Koe(e,t){for(var n=t[0],i=t[1],r=-1,a=0,o=e.length,u=o-1;a<o;u=a++){var c=e[a],l=c[0],d=c[1],h=e[u],p=h[0],y=h[1];if(Joe(c,h,t))return 0;d>i!=y>i&&n<(p-l)*(i-d)/(y-d)+l&&(r=-r)}return r}function Joe(e,t,n){var i;return eue(e,t,n)&&tue(e[i=+(e[0]===t[0])],n[i],t[i])}function eue(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function tue(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function aP(e,t,n){return function(i){var r=so(i),a=n?Math.min(r[0],0):r[0],o=r[1],u=o-a,c=t?Fs(a,o,e):u/(e+1);return vr(a+c,o,c)}}function vF(e){de.call(this,null,e)}vF.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};Re(vF,de,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||Ei,a=rP().smooth(e.smooth!==!1),o=e.thresholds||nue(i,r,e),u=e.as===null?null:e.as||"contour",c=[];return i.forEach(l=>{const d=r(l),h=a.size([d.width,d.height])(d.values,be(o)?o:o(d.values));iue(h,d,l,e),h.forEach(p=>{c.push(fb(l,wt(u!=null?{[u]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function nue(e,t,n){const i=aP(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>Xl(t(r).values)))}function iue(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(rt(r)&&(r=r(n,i)),rt(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const o=(Ct(r)?r:r[0])||1,u=(Ct(r)?r:r[1])||1,c=a&&a[0]||0,l=a&&a[1]||0;e.forEach(oP(t,o,u,c,l))}function oP(e,t,n,i,r){const a=e.x1||0,o=e.y1||0,u=t*n<0;function c(h){h.forEach(l)}function l(h){u&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-o)*n+r}return function(h){return h.coordinates.forEach(c),h}}function SM(e,t,n){const i=e>=0?e:cw(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function nC(e){return rt(e)?e:Di(+e)}function uP(){var e=c=>c[0],t=c=>c[1],n=jd,i=[-1,-1],r=960,a=500,o=2;function u(c,l){const d=SM(i[0],c,e)>>o,h=SM(i[1],c,t)>>o,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>o),b=2*y+(a>>o),x=new Float32Array(v*b),D=new Float32Array(v*b);let S=x;c.forEach(w=>{const _=p+(+e(w)>>o),k=y+(+t(w)>>o);_>=0&&_<v&&k>=0&&k<b&&(x[_+k*v]+=+n(w))}),d>0&&h>0?(Of(v,b,x,D,d),Nf(v,b,D,x,h),Of(v,b,x,D,d),Nf(v,b,D,x,h),Of(v,b,x,D,d),Nf(v,b,D,x,h)):d>0?(Of(v,b,x,D,d),Of(v,b,D,x,d),Of(v,b,x,D,d),S=D):h>0&&(Nf(v,b,x,D,h),Nf(v,b,D,x,h),Nf(v,b,x,D,h),S=D);const A=l?Math.pow(2,-2*o):1/DR(S);for(let w=0,_=v*b;w<_;++w)S[w]*=A;return{values:S,scale:1<<o,width:v,height:b,x1:p,y1:y,x2:p+(r>>o),y2:y+(a>>o)}}return u.x=function(c){return arguments.length?(e=nC(c),u):e},u.y=function(c){return arguments.length?(t=nC(c),u):t},u.weight=function(c){return arguments.length?(n=nC(c),u):n},u.size=function(c){if(!arguments.length)return[r,a];var l=+c[0],d=+c[1];return l>=0&&d>=0||me("invalid size"),r=l,a=d,u},u.cellSize=function(c){return arguments.length?((c=+c)>=1||me("invalid cell size"),o=Math.floor(Math.log(c)/Math.LN2),u):1<<o},u.bandwidth=function(c){return arguments.length?(c=Ie(c),c.length===1&&(c=[+c[0],+c[0]]),c.length!==2&&me("invalid bandwidth"),i=c,u):i},u}function Of(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<t;++o)for(let u=0,c=0;u<e+r;++u)u<e&&(c+=n[u+o*e]),u>=r&&(u>=a&&(c-=n[u-a+o*e]),i[u-r+o*e]=c/Math.min(u+1,e-1+a-u,a))}function Nf(e,t,n,i,r){const a=(r<<1)+1;for(let o=0;o<e;++o)for(let u=0,c=0;u<t+r;++u)u<t&&(c+=n[o+u*e]),u>=r&&(u>=a&&(c-=n[o+(u-a)*e]),i[o+(u-r)*e]=c/Math.min(u+1,t-1+a-u,a))}function bF(e){de.call(this,null,e)}bF.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const rue=["x","y","weight","size","cellSize","bandwidth"];function sP(e,t){return rue.forEach(n=>t[n]!=null?e[n](t[n]):0),e}Re(bF,de,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=aue(i,e.groupby),a=(e.groupby||[]).map(dn),o=sP(uP(),e),u=e.as||"grid",c=[];function l(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return c=r.map(d=>wt(l({[u]:o(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=c,n}});function aue(e,t){var n=[],i=d=>d(u),r,a,o,u,c,l;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)u=e[a],c=t.map(i),l=r[c],l||(r[c]=l=[],l.dims=c,n.push(l)),l.push(u);return n}function xF(e){de.call(this,null,e)}xF.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};Re(xF,de,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=rP().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||aP(e.count||10,e.nice,!!r),o=e.size,u,c;return r||(r=t.materialize(t.SOURCE).source,u=sP(uP(),e)(r,!0),c=oP(u,u.scale||1,u.scale||1,0,0),o=[u.width,u.height],r=u.values),a=be(a)?a:a(r),r=i.size(o)(r,a),c&&r.forEach(c),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(wt),n}});const AA="Feature",EF="FeatureCollection",oue="MultiPoint";function DF(e){de.call(this,null,e)}DF.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};Re(DF,de,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],o=r&&r[1],u=e.geojson||!r&&Ei,c=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(yi(u))||a&&t.modified(yi(a))||o&&t.modified(yi(o)),(!this.value||l)&&(c=t.SOURCE,this._features=n=[],this._points=i=[]),u&&t.visit(c,d=>n.push(u(d))),a&&o&&(t.visit(c,d=>{var h=a(d),p=o(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:AA,geometry:{type:oue,coordinates:i}})),this.value={type:EF,features:n}}});function CF(e){de.call(this,null,e)}CF.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};Re(CF,de,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||Ei,a=e.as||"path",o=n.SOURCE;!i||e.modified()?(this.value=i=iP(e.projection),n.materialize().reflow()):o=r===Ei||t.modified(r.fields)?n.ADD_MOD:n.ADD;const u=uue(i,e.pointRadius);return n.visit(o,c=>c[a]=i(r(c))),i.pointRadius(u),n.modifies(a)}});function uue(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function SF(e){de.call(this,null,e)}SF.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};Re(SF,de,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],o=a[0],u=a[1],c;function l(d){const h=n([i(d),r(d)]);h?(d[o]=h[0],d[u]=h[1]):(d[o]=void 0,d[u]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(c=t.modified(i.fields)||t.modified(r.fields),t.visit(c?t.ADD_MOD:t.ADD,l)),t.modifies(a)}});function AF(e){de.call(this,null,e)}AF.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};Re(AF,de,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=sue(iP(e.projection),e.field||Vr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,o=>o[r]=i),n.modifies(r)}});function sue(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),o=e.pointRadius(n)(t(r));return e.pointRadius(a),o};return i.context=r=>(e.context(r),i),i}function _F(e){de.call(this,[],e),this.generator=noe()}_F.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};Re(_F,de,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)rt(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(yB(n[0],r)):t.add.push(wt(r)),n[0]=r,t}});function wF(e){de.call(this,null,e)}wF.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};Re(wF,de,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||Ei,a=cue(e.opacity,e),o=lue(e.color,e),u=e.as||"image",c={$x:0,$y:0,$value:0,$max:i?Xl(n.map(l=>Xl(r(l).values))):0};return n.forEach(l=>{const d=r(l),h=it({},l,c);i||(h.$max=Xl(d.values||[])),l[u]=fue(d,h,o.dep?o:Di(o(h)),a.dep?a:Di(a(h)))}),t.reflow(!0).modifies(u)}});function lue(e,t){let n;return rt(e)?(n=i=>$s(e(i,t)),n.dep=lP(e)):n=Di($s(e||"#888")),n}function cue(e,t){let n;return rt(e)?(n=i=>e(i,t),n.dep=lP(e)):e?n=Di(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function lP(e){if(!rt(e))return!1;const t=Sa(yi(e));return t.$x||t.$y||t.$value||t.$max}function fue(e,t,n,i){const r=e.width,a=e.height,o=e.x1||0,u=e.y1||0,c=e.x2||r,l=e.y2||a,d=e.values,h=d?x=>d[x]:fs,p=Ss(c-o,l-u),y=p.getContext("2d"),v=y.getImageData(0,0,c-o,l-u),b=v.data;for(let x=u,D=0;x<l;++x){t.$y=x-u;for(let S=o,A=x*r;S<c;++S,D+=4){t.$x=S-o,t.$value=h(S+A);const w=n(t);b[D+0]=w.r,b[D+1]=w.g,b[D+2]=w.b,b[D+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function cP(e){de.call(this,null,e),this.modified(!0)}Re(cP,de,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=hue(e.type),SA.forEach(i=>{e[i]!=null&&AM(n,i,e[i])})):SA.forEach(i=>{e.modified(i)&&AM(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&due(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function due(e,t){const n=gue(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function hue(e){const t=yF((e||"mercator").toLowerCase());return t||me("Unrecognized projection type: "+e),t()}function AM(e,t,n){rt(e[t])&&e[t](n)}function gue(e){return e=Ie(e),e.length===1?e[0]:{type:EF,features:e.reduce((t,n)=>t.concat(pue(n)),[])}}function pue(e){return e.type===EF?e.features:Ie(e).filter(t=>t!=null).map(t=>t.type===AA?t:{type:AA,geometry:t})}const mue=Object.freeze(Object.defineProperty({__proto__:null,contour:xF,geojson:DF,geopath:CF,geopoint:SF,geoshape:AF,graticule:_F,heatmap:wF,isocontour:vF,kde2d:bF,projection:cP},Symbol.toStringTag,{value:"Module"}));function yue(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,o=n.length,u,c=0,l=0;for(a=0;a<o;++a)u=n[a],c+=u.x,l+=u.y;for(c=(c/o-e)*i,l=(l/o-t)*i,a=0;a<o;++a)u=n[a],u.x-=c,u.y-=l}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function vue(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return fP(this.cover(t,n),t,n,e)}function fP(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,o={data:i},u=e._x0,c=e._y0,l=e._x1,d=e._y1,h,p,y,v,b,x,D,S;if(!a)return e._root=o,e;for(;a.length;)if((b=t>=(h=(u+l)/2))?u=h:l=h,(x=n>=(p=(c+d)/2))?c=p:d=p,r=a,!(a=a[D=x<<1|b]))return r[D]=o,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return o.next=a,r?r[D]=o:e._root=o,e;do r=r?r[D]=new Array(4):e._root=new Array(4),(b=t>=(h=(u+l)/2))?u=h:l=h,(x=n>=(p=(c+d)/2))?c=p:d=p;while((D=x<<1|b)===(S=(v>=p)<<1|y>=h));return r[S]=a,r[D]=o,e}function bue(e){var t,n,i=e.length,r,a,o=new Array(i),u=new Array(i),c=1/0,l=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(o[n]=r,u[n]=a,r<c&&(c=r),r>d&&(d=r),a<l&&(l=a),a>h&&(h=a));if(c>d||l>h)return this;for(this.cover(c,l).cover(d,h),n=0;n<i;++n)fP(this,o[n],u[n],e[n]);return this}function xue(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var o=r-n||1,u=this._root,c,l;n>e||e>=r||i>t||t>=a;)switch(l=(t<i)<<1|e<n,c=new Array(4),c[l]=u,u=c,o*=2,l){case 0:r=n+o,a=i+o;break;case 1:n=r-o,a=i+o;break;case 2:r=n+o,i=a-o;break;case 3:n=r-o,i=a-o;break}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Eue(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Due(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function $i(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function Cue(e,t,n){var i,r=this._x0,a=this._y0,o,u,c,l,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new $i(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(o=v.x0)>d||(u=v.y0)>h||(c=v.x1)<r||(l=v.y1)<a))if(y.length){var x=(o+c)/2,D=(u+l)/2;p.push(new $i(y[3],x,D,c,l),new $i(y[2],o,D,x,l),new $i(y[1],x,u,c,D),new $i(y[0],o,u,x,D)),(b=(t>=D)<<1|e>=x)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var S=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),w=S*S+A*A;if(w<n){var _=Math.sqrt(n=w);r=e-_,a=t-_,d=e+_,h=t+_,i=y.data}}return i}function Sue(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,o=this._x0,u=this._y0,c=this._x1,l=this._y1,d,h,p,y,v,b,x,D;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(o+c)/2))?o=p:c=p,(b=h>=(y=(u+l)/2))?u=y:l=y,t=n,!(n=n[x=b<<1|v]))return this;if(!n.length)break;(t[x+1&3]||t[x+2&3]||t[x+3&3])&&(i=t,D=x)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[x]=a:delete t[x],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[D]=n:this._root=n),this):(this._root=a,this)}function Aue(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function _ue(){return this._root}function wue(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Fue(e){var t=[],n,i=this._root,r,a,o,u,c;for(i&&t.push(new $i(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,o=n.y0,u=n.x1,c=n.y1)&&i.length){var l=(a+u)/2,d=(o+c)/2;(r=i[3])&&t.push(new $i(r,l,d,u,c)),(r=i[2])&&t.push(new $i(r,a,d,l,c)),(r=i[1])&&t.push(new $i(r,l,o,u,d)),(r=i[0])&&t.push(new $i(r,a,o,l,d))}return this}function kue(e){var t=[],n=[],i;for(this._root&&t.push(new $i(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,o=i.x0,u=i.y0,c=i.x1,l=i.y1,d=(o+c)/2,h=(u+l)/2;(a=r[0])&&t.push(new $i(a,o,u,d,h)),(a=r[1])&&t.push(new $i(a,d,u,c,h)),(a=r[2])&&t.push(new $i(a,o,h,d,l)),(a=r[3])&&t.push(new $i(a,d,h,c,l))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Tue(e){return e[0]}function $ue(e){return arguments.length?(this._x=e,this):this._x}function Mue(e){return e[1]}function Oue(e){return arguments.length?(this._y=e,this):this._y}function FF(e,t,n){var i=new kF(t??Tue,n??Mue,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function kF(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function _M(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Ui=FF.prototype=kF.prototype;Ui.copy=function(){var e=new kF(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=_M(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=_M(i));return e};Ui.add=vue;Ui.addAll=bue;Ui.cover=xue;Ui.data=Eue;Ui.extent=Due;Ui.find=Cue;Ui.remove=Sue;Ui.removeAll=Aue;Ui.root=_ue;Ui.size=wue;Ui.visit=Fue;Ui.visitAfter=kue;Ui.x=$ue;Ui.y=Oue;function Oi(e){return function(){return e}}function vs(e){return(e()-.5)*1e-6}function Nue(e){return e.x+e.vx}function Rue(e){return e.y+e.vy}function Bue(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=Oi(e==null?1:+e));function o(){for(var l,d=t.length,h,p,y,v,b,x,D=0;D<a;++D)for(h=FF(t,Nue,Rue).visitAfter(u),l=0;l<d;++l)p=t[l],b=n[p.index],x=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(S);function S(A,w,_,k,F){var M=A.data,N=A.r,P=b+N;if(M){if(M.index>p.index){var L=y-M.x-M.vx,H=v-M.y-M.vy,I=L*L+H*H;I<P*P&&(L===0&&(L=vs(i),I+=L*L),H===0&&(H=vs(i),I+=H*H),I=(P-(I=Math.sqrt(I)))/I*r,p.vx+=(L*=I)*(P=(N*=N)/(x+N)),p.vy+=(H*=I)*P,M.vx-=L*(P=1-P),M.vy-=H*P)}return}return w>y+P||k<y-P||_>v+P||F<v-P}}function u(l){if(l.data)return l.r=n[l.data.index];for(var d=l.r=0;d<4;++d)l[d]&&l[d].r>l.r&&(l.r=l[d].r)}function c(){if(t){var l,d=t.length,h;for(n=new Array(d),l=0;l<d;++l)h=t[l],n[h.index]=+e(h,l,t)}}return o.initialize=function(l,d){t=l,i=d,c()},o.iterations=function(l){return arguments.length?(a=+l,o):a},o.strength=function(l){return arguments.length?(r=+l,o):r},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Oi(+l),c(),o):e},o}function zue(e){return e.index}function wM(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Lue(e){var t=zue,n=h,i,r=Oi(30),a,o,u,c,l,d=1;e==null&&(e=[]);function h(x){return 1/Math.min(u[x.source.index],u[x.target.index])}function p(x){for(var D=0,S=e.length;D<d;++D)for(var A=0,w,_,k,F,M,N,P;A<S;++A)w=e[A],_=w.source,k=w.target,F=k.x+k.vx-_.x-_.vx||vs(l),M=k.y+k.vy-_.y-_.vy||vs(l),N=Math.sqrt(F*F+M*M),N=(N-a[A])/N*x*i[A],F*=N,M*=N,k.vx-=F*(P=c[A]),k.vy-=M*P,_.vx+=F*(P=1-P),_.vy+=M*P}function y(){if(o){var x,D=o.length,S=e.length,A=new Map(o.map((_,k)=>[t(_,k,o),_])),w;for(x=0,u=new Array(D);x<S;++x)w=e[x],w.index=x,typeof w.source!="object"&&(w.source=wM(A,w.source)),typeof w.target!="object"&&(w.target=wM(A,w.target)),u[w.source.index]=(u[w.source.index]||0)+1,u[w.target.index]=(u[w.target.index]||0)+1;for(x=0,c=new Array(S);x<S;++x)w=e[x],c[x]=u[w.source.index]/(u[w.source.index]+u[w.target.index]);i=new Array(S),v(),a=new Array(S),b()}}function v(){if(o)for(var x=0,D=e.length;x<D;++x)i[x]=+n(e[x],x,e)}function b(){if(o)for(var x=0,D=e.length;x<D;++x)a[x]=+r(e[x],x,e)}return p.initialize=function(x,D){o=x,l=D,y()},p.links=function(x){return arguments.length?(e=x,y(),p):e},p.id=function(x){return arguments.length?(t=x,p):t},p.iterations=function(x){return arguments.length?(d=+x,p):d},p.strength=function(x){return arguments.length?(n=typeof x=="function"?x:Oi(+x),v(),p):n},p.distance=function(x){return arguments.length?(r=typeof x=="function"?x:Oi(+x),b(),p):r},p}var Iue={value:()=>{}};function dP(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new ay(n)}function ay(e){this._=e}function Uue(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}ay.prototype=dP.prototype={constructor:ay,on:function(e,t){var n=this._,i=Uue(e+"",n),r,a=-1,o=i.length;if(arguments.length<2){for(;++a<o;)if((r=(e=i[a]).type)&&(r=Pue(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(r=(e=i[a]).type)n[r]=FM(n[r],e.name,t);else if(t==null)for(r in n)n[r]=FM(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new ay(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Pue(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function FM(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=Iue,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var Sd=0,J0=0,A0=0,hP=1e3,Dv,eg,Cv=0,cc=0,Wb=0,zg=typeof performance=="object"&&performance.now?performance:Date,gP=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function TF(){return cc||(gP(jue),cc=zg.now()+Wb)}function jue(){cc=0}function Sv(){this._call=this._time=this._next=null}Sv.prototype=pP.prototype={constructor:Sv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?TF():+n)+(t==null?0:+t),!this._next&&eg!==this&&(eg?eg._next=this:Dv=this,eg=this),this._call=e,this._time=n,_A()},stop:function(){this._call&&(this._call=null,this._time=1/0,_A())}};function pP(e,t,n){var i=new Sv;return i.restart(e,t,n),i}function que(){TF(),++Sd;for(var e=Dv,t;e;)(t=cc-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sd}function kM(){cc=(Cv=zg.now())+Wb,Sd=J0=0;try{que()}finally{Sd=0,Gue(),cc=0}}function Hue(){var e=zg.now(),t=e-Cv;t>hP&&(Wb-=t,Cv=e)}function Gue(){for(var e,t=Dv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Dv=n);eg=e,_A(i)}function _A(e){if(!Sd){J0&&(J0=clearTimeout(J0));var t=e-cc;t>24?(e<1/0&&(J0=setTimeout(kM,e-zg.now()-Wb)),A0&&(A0=clearInterval(A0))):(A0||(Cv=zg.now(),A0=setInterval(Hue,hP)),Sd=1,gP(kM))}}function Yue(e,t,n){var i=new Sv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,o,u){o=+o,u=u==null?TF():+u,i._restart(function c(l){l+=r,i._restart(c,r+=o,u),a(l)},o,u)},i.restart(e,t,n),i)}const Xue=1664525,Vue=1013904223,TM=4294967296;function Wue(){let e=1;return()=>(e=(Xue*e+Vue)%TM)/TM}function Que(e){return e.x}function Zue(e){return e.y}var Kue=10,Jue=Math.PI*(3-Math.sqrt(5));function ese(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,o=.6,u=new Map,c=pP(h),l=dP("tick","end"),d=Wue();e==null&&(e=[]);function h(){p(),l.call("tick",t),n<i&&(c.stop(),l.call("end",t))}function p(b){var x,D=e.length,S;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,u.forEach(function(w){w(n)}),x=0;x<D;++x)S=e[x],S.fx==null?S.x+=S.vx*=o:(S.x=S.fx,S.vx=0),S.fy==null?S.y+=S.vy*=o:(S.y=S.fy,S.vy=0);return t}function y(){for(var b=0,x=e.length,D;b<x;++b){if(D=e[b],D.index=b,D.fx!=null&&(D.x=D.fx),D.fy!=null&&(D.y=D.fy),isNaN(D.x)||isNaN(D.y)){var S=Kue*Math.sqrt(.5+b),A=b*Jue;D.x=S*Math.cos(A),D.y=S*Math.sin(A)}(isNaN(D.vx)||isNaN(D.vy))&&(D.vx=D.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return c.restart(h),t},stop:function(){return c.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),u.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(o=1-b,t):1-o},randomSource:function(b){return arguments.length?(d=b,u.forEach(v),t):d},force:function(b,x){return arguments.length>1?(x==null?u.delete(b):u.set(b,v(x)),t):u.get(b)},find:function(b,x,D){var S=0,A=e.length,w,_,k,F,M;for(D==null?D=1/0:D*=D,S=0;S<A;++S)F=e[S],w=b-F.x,_=x-F.y,k=w*w+_*_,k<D&&(M=F,D=k);return M},on:function(b,x){return arguments.length>1?(l.on(b,x),t):l.on(b)}}}function tse(){var e,t,n,i,r=Oi(-30),a,o=1,u=1/0,c=.81;function l(y){var v,b=e.length,x=FF(e,Que,Zue).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],x.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,x,D=0,S,A,w;if(y.length){for(S=A=w=0;w<4;++w)(b=y[w])&&(x=Math.abs(b.value))&&(v+=b.value,D+=x,S+=x*b.x,A+=x*b.y);y.x=S/D,y.y=A/D}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,x){if(!y.value)return!0;var D=y.x-t.x,S=y.y-t.y,A=x-v,w=D*D+S*S;if(A*A/c<w)return w<u&&(D===0&&(D=vs(n),w+=D*D),S===0&&(S=vs(n),w+=S*S),w<o&&(w=Math.sqrt(o*w)),t.vx+=D*y.value*i/w,t.vy+=S*y.value*i/w),!0;if(y.length||w>=u)return;(y.data!==t||y.next)&&(D===0&&(D=vs(n),w+=D*D),S===0&&(S=vs(n),w+=S*S),w<o&&(w=Math.sqrt(o*w)));do y.data!==t&&(A=a[y.data.index]*i/w,t.vx+=D*A,t.vy+=S*A);while(y=y.next)}return l.initialize=function(y,v){e=y,n=v,d()},l.strength=function(y){return arguments.length?(r=typeof y=="function"?y:Oi(+y),d(),l):r},l.distanceMin=function(y){return arguments.length?(o=y*y,l):Math.sqrt(o)},l.distanceMax=function(y){return arguments.length?(u=y*y,l):Math.sqrt(u)},l.theta=function(y){return arguments.length?(c=y*y,l):Math.sqrt(c)},l}function nse(e){var t=Oi(.1),n,i,r;typeof e!="function"&&(e=Oi(e==null?0:+e));function a(u){for(var c=0,l=n.length,d;c<l;++c)d=n[c],d.vx+=(r[c]-d.x)*i[c]*u}function o(){if(n){var u,c=n.length;for(i=new Array(c),r=new Array(c),u=0;u<c;++u)i[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,o()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Oi(+u),o(),a):t},a.x=function(u){return arguments.length?(e=typeof u=="function"?u:Oi(+u),o(),a):e},a}function ise(e){var t=Oi(.1),n,i,r;typeof e!="function"&&(e=Oi(e==null?0:+e));function a(u){for(var c=0,l=n.length,d;c<l;++c)d=n[c],d.vy+=(r[c]-d.y)*i[c]*u}function o(){if(n){var u,c=n.length;for(i=new Array(c),r=new Array(c),u=0;u<c;++u)i[u]=isNaN(r[u]=+e(n[u],u,n))?0:+t(n[u],u,n)}}return a.initialize=function(u){n=u,o()},a.strength=function(u){return arguments.length?(t=typeof u=="function"?u:Oi(+u),o(),a):t},a.y=function(u){return arguments.length?(e=typeof u=="function"?u:Oi(+u),o(),a):e},a}const $M={center:yue,collide:Bue,nbody:tse,link:Lue,x:nse,y:ise},tg="forces",wA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],rse=["static","iterations"],mP=["x","y","vx","vy"];function $F(e){de.call(this,null,e)}$F.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:mP}]};Re($F,de,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(wA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&yP(n,e,0,t)):(this.value=n=ose(t.source,e),n.on("tick",ase(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(rse)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let u=this._argops,c=0,l=u.length,d;c<l;++c)if(d=u[c],!(d.name!==tg||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,o;r<a;++r)if(i[r].name==="links"&&(o=i[r].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(mP)}});function ase(e,t){return()=>e.touch(t).run()}function ose(e,t){const n=ese(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),yP(n,t,!0).on("end",()=>a=!0)}function yP(e,t,n,i){var r=Ie(t.forces),a,o,u,c;for(a=0,o=wA.length;a<o;++a)u=wA[a],u!==tg&&t.modified(u)&&e[u](t[u]);for(a=0,o=r.length;a<o;++a)c=tg+a,u=n||t.modified(tg,a)?sse(r[a]):i&&use(r[a],i)?e.force(c):null,u&&e.force(c,u);for(o=e.numForces||0;a<o;++a)e.force(tg+a,null);return e.numForces=r.length,e}function use(e,t){var n,i;for(n in e)if(rt(i=e[n])&&t.modified(yi(i)))return 1;return 0}function sse(e){var t,n;Ue($M,e.force)||me("Unrecognized force: "+e.force),t=$M[e.force]();for(n in e)rt(t[n])&&lse(t[n],e[n],e);return t}function lse(e,t,n){e(rt(t)?i=>t(i,n):t)}const cse=Object.freeze(Object.defineProperty({__proto__:null,force:$F},Symbol.toStringTag,{value:"Module"}));function fse(e,t){return e.parent===t.parent?1:2}function dse(e){return e.reduce(hse,0)/e.length}function hse(e,t){return e+t.x}function gse(e){return 1+e.reduce(pse,0)}function pse(e,t){return Math.max(e,t.y)}function mse(e){for(var t;t=e.children;)e=t[0];return e}function yse(e){for(var t;t=e.children;)e=t[t.length-1];return e}function vse(){var e=fse,t=1,n=1,i=!1;function r(a){var o,u=0;a.eachAfter(function(p){var y=p.children;y?(p.x=dse(y),p.y=gse(y)):(p.x=o?u+=e(p,o):0,p.y=0,o=p)});var c=mse(a),l=yse(a),d=c.x-e(c,l)/2,h=l.x+e(l,c)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function bse(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function xse(){return this.eachAfter(bse)}function Ese(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Dse(e,t){for(var n=this,i=[n],r,a,o=-1;n=i.pop();)if(e.call(t,n,++o,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function Cse(e,t){for(var n=this,i=[n],r=[],a,o,u,c=-1;n=i.pop();)if(r.push(n),a=n.children)for(o=0,u=a.length;o<u;++o)i.push(a[o]);for(;n=r.pop();)e.call(t,n,++c,this);return this}function Sse(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Ase(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function _se(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function wse(e){for(var t=this,n=Fse(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Fse(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function kse(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Tse(){return Array.from(this)}function $se(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Mse(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Ose(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function MF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=Bse)):t===void 0&&(t=Rse);for(var n=new Ad(e),i,r=[n],a,o,u,c;i=r.pop();)if((o=t(i.data))&&(c=(o=Array.from(o)).length))for(i.children=o,u=c-1;u>=0;--u)r.push(a=o[u]=new Ad(o[u])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(vP)}function Nse(){return MF(this).eachBefore(zse)}function Rse(e){return e.children}function Bse(e){return Array.isArray(e)?e[1]:null}function zse(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vP(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function Ad(e){this.data=e,this.depth=this.height=0,this.parent=null}Ad.prototype=MF.prototype={constructor:Ad,count:xse,each:Ese,eachAfter:Cse,eachBefore:Dse,find:Sse,sum:Ase,sort:_se,path:wse,ancestors:kse,descendants:Tse,leaves:$se,links:Mse,copy:Nse,[Symbol.iterator]:Ose};function oy(e){return e==null?null:bP(e)}function bP(e){if(typeof e!="function")throw new Error;return e}function jl(){return 0}function Pf(e){return function(){return e}}const Lse=1664525,Ise=1013904223,MM=4294967296;function Use(){let e=1;return()=>(e=(Lse*e+Ise)%MM)/MM}function Pse(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function jse(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function qse(e,t){for(var n=0,i=(e=jse(Array.from(e),t)).length,r=[],a,o;n<i;)a=e[n],o&&xP(o,a)?++n:(o=Gse(r=Hse(r,a)),n=0);return o}function Hse(e,t){var n,i;if(iC(t,e))return[t];for(n=0;n<e.length;++n)if(A1(t,e[n])&&iC(ng(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(A1(ng(e[n],e[i]),t)&&A1(ng(e[n],t),e[i])&&A1(ng(e[i],t),e[n])&&iC(EP(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function A1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function xP(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function iC(e,t){for(var n=0;n<t.length;++n)if(!xP(e,t[n]))return!1;return!0}function Gse(e){switch(e.length){case 1:return Yse(e[0]);case 2:return ng(e[0],e[1]);case 3:return EP(e[0],e[1],e[2])}}function Yse(e){return{x:e.x,y:e.y,r:e.r}}function ng(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,o=t.y,u=t.r,c=a-n,l=o-i,d=u-r,h=Math.sqrt(c*c+l*l);return{x:(n+a+c/h*d)/2,y:(i+o+l/h*d)/2,r:(h+r+u)/2}}function EP(e,t,n){var i=e.x,r=e.y,a=e.r,o=t.x,u=t.y,c=t.r,l=n.x,d=n.y,h=n.r,p=i-o,y=i-l,v=r-u,b=r-d,x=c-a,D=h-a,S=i*i+r*r-a*a,A=S-o*o-u*u+c*c,w=S-l*l-d*d+h*h,_=y*v-p*b,k=(v*w-b*A)/(_*2)-i,F=(b*x-v*D)/_,M=(y*A-p*w)/(_*2)-r,N=(p*D-y*x)/_,P=F*F+N*N-1,L=2*(a+k*F+M*N),H=k*k+M*M-a*a,I=-(Math.abs(P)>1e-6?(L+Math.sqrt(L*L-4*P*H))/(2*P):H/L);return{x:i+k+F*I,y:r+M+N*I,r:I}}function OM(e,t,n){var i=e.x-t.x,r,a,o=e.y-t.y,u,c,l=i*i+o*o;l?(a=t.r+n.r,a*=a,c=e.r+n.r,c*=c,a>c?(r=(l+c-a)/(2*l),u=Math.sqrt(Math.max(0,c/l-r*r)),n.x=e.x-r*i-u*o,n.y=e.y-r*o+u*i):(r=(l+a-c)/(2*l),u=Math.sqrt(Math.max(0,a/l-r*r)),n.x=t.x+r*i-u*o,n.y=t.y+r*o+u*i)):(n.x=t.x+n.r,n.y=t.y)}function NM(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function RM(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function _1(e){this._=e,this.next=null,this.previous=null}function Xse(e,t){if(!(a=(e=Pse(e)).length))return 0;var n,i,r,a,o,u,c,l,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;OM(i,n,r=e[2]),n=new _1(n),i=new _1(i),r=new _1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(c=3;c<a;++c){OM(n._,i._,r=e[c]),r=new _1(r),l=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(NM(l._,r._)){i=l,n.next=i,i.previous=n,--c;continue e}h+=l._.r,l=l.next}else{if(NM(d._,r._)){n=d,n.next=i,i.previous=n,--c;continue e}p+=d._.r,d=d.previous}while(l!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,o=RM(n);(r=r.next)!==i;)(u=RM(r))<o&&(n=r,o=u);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=qse(n,t),c=0;c<a;++c)n=e[c],n.x-=r.x,n.y-=r.y;return r.r}function Vse(e){return Math.sqrt(e.value)}function Wse(){var e=null,t=1,n=1,i=jl;function r(a){const o=Use();return a.x=t/2,a.y=n/2,e?a.eachBefore(BM(e)).eachAfter(rC(i,.5,o)).eachBefore(zM(1)):a.eachBefore(BM(Vse)).eachAfter(rC(jl,1,o)).eachAfter(rC(i,a.r/Math.min(t,n),o)).eachBefore(zM(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=oy(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:Pf(+a),r):i},r}function BM(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function rC(e,t,n){return function(i){if(r=i.children){var r,a,o=r.length,u=e(i)*t||0,c;if(u)for(a=0;a<o;++a)r[a].r+=u;if(c=Xse(r,n),u)for(a=0;a<o;++a)r[a].r-=u;i.r=c+u}}}function zM(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function DP(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Cp(e,t,n,i,r){for(var a=e.children,o,u=-1,c=a.length,l=e.value&&(i-t)/e.value;++u<c;)o=a[u],o.y0=n,o.y1=r,o.x0=t,o.x1=t+=o.value*l}function Qse(){var e=1,t=1,n=0,i=!1;function r(o){var u=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/u,o.eachBefore(a(t,u)),i&&o.eachBefore(DP),o}function a(o,u){return function(c){c.children&&Cp(c,c.x0,o*(c.depth+1)/u,c.x1,o*(c.depth+2)/u);var l=c.x0,d=c.y0,h=c.x1-n,p=c.y1-n;h<l&&(l=h=(l+h)/2),p<d&&(d=p=(d+p)/2),c.x0=l,c.y0=d,c.x1=h,c.y1=p}}return r.round=function(o){return arguments.length?(i=!!o,r):i},r.size=function(o){return arguments.length?(e=+o[0],t=+o[1],r):[e,t]},r.padding=function(o){return arguments.length?(n=+o,r):n},r}var Zse={depth:-1},LM={},aC={};function Kse(e){return e.id}function Jse(e){return e.parentId}function IM(){var e=Kse,t=Jse,n;function i(r){var a=Array.from(r),o=e,u=t,c,l,d,h,p,y,v,b,x=new Map;if(n!=null){const D=a.map((w,_)=>ele(n(w,_,r))),S=D.map(UM),A=new Set(D).add("");for(const w of S)A.has(w)||(A.add(w),D.push(w),S.push(UM(w)),a.push(aC));o=(w,_)=>D[_],u=(w,_)=>S[_]}for(d=0,c=a.length;d<c;++d)l=a[d],y=a[d]=new Ad(l),(v=o(l,d,r))!=null&&(v+="")&&(b=y.id=v,x.set(b,x.has(b)?LM:y)),(v=u(l,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<c;++d)if(y=a[d],v=y.parent){if(p=x.get(v),!p)throw new Error("missing: "+v);if(p===LM)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===aC&&h.children.length===1;)h=h.children[0],--c;for(let D=a.length-1;D>=0&&(y=a[D],y.data===aC);--D)y.data=null}if(h.parent=Zse,h.eachBefore(function(D){D.depth=D.parent.depth+1,--c}).eachBefore(vP),h.parent=null,c>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=oy(r),i):e},i.parentId=function(r){return arguments.length?(t=oy(r),i):t},i.path=function(r){return arguments.length?(n=oy(r),i):n},i}function ele(e){e=`${e}`;let t=e.length;return FA(e,t-1)&&!FA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function UM(e){let t=e.length;if(t<2)return"";for(;--t>1&&!FA(e,t););return e.slice(0,t)}function FA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function tle(e,t){return e.parent===t.parent?1:2}function oC(e){var t=e.children;return t?t[0]:e.t}function uC(e){var t=e.children;return t?t[t.length-1]:e.t}function nle(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function ile(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function rle(e,t,n){return e.a.parent===t.parent?e.a:n}function uy(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}uy.prototype=Object.create(Ad.prototype);function ale(e){for(var t=new uy(e,0),n,i=[t],r,a,o,u;n=i.pop();)if(a=n._.children)for(n.children=new Array(u=a.length),o=u-1;o>=0;--o)i.push(r=n.children[o]=new uy(a[o],o)),r.parent=n;return(t.parent=new uy(null,0)).children=[t],t}function ole(){var e=tle,t=1,n=1,i=null;function r(l){var d=ale(l);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(o),i)l.eachBefore(c);else{var h=l,p=l,y=l;l.eachBefore(function(S){S.x<h.x&&(h=S),S.x>p.x&&(p=S),S.depth>y.depth&&(y=S)});var v=h===p?1:e(h,p)/2,b=v-h.x,x=t/(p.x+v+b),D=n/(y.depth||1);l.eachBefore(function(S){S.x=(S.x+b)*x,S.y=S.depth*D})}return l}function a(l){var d=l.children,h=l.parent.children,p=l.i?h[l.i-1]:null;if(d){ile(l);var y=(d[0].z+d[d.length-1].z)/2;p?(l.z=p.z+e(l._,p._),l.m=l.z-y):l.z=y}else p&&(l.z=p.z+e(l._,p._));l.parent.A=u(l,p,l.parent.A||h[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function u(l,d,h){if(d){for(var p=l,y=l,v=d,b=p.parent.children[0],x=p.m,D=y.m,S=v.m,A=b.m,w;v=uC(v),p=oC(p),v&&p;)b=oC(b),y=uC(y),y.a=l,w=v.z+S-p.z-x+e(v._,p._),w>0&&(nle(rle(v,l,h),l,w),x+=w,D+=w),S+=v.m,x+=p.m,A+=b.m,D+=y.m;v&&!uC(y)&&(y.t=v,y.m+=S-D),p&&!oC(b)&&(b.t=p,b.m+=x-A,h=l)}return h}function c(l){l.x*=t,l.y=l.depth*n}return r.separation=function(l){return arguments.length?(e=l,r):e},r.size=function(l){return arguments.length?(i=!1,t=+l[0],n=+l[1],r):i?null:[t,n]},r.nodeSize=function(l){return arguments.length?(i=!0,t=+l[0],n=+l[1],r):i?[t,n]:null},r}function Qb(e,t,n,i,r){for(var a=e.children,o,u=-1,c=a.length,l=e.value&&(r-n)/e.value;++u<c;)o=a[u],o.x0=t,o.x1=i,o.y0=n,o.y1=n+=o.value*l}var CP=(1+Math.sqrt(5))/2;function SP(e,t,n,i,r,a){for(var o=[],u=t.children,c,l,d=0,h=0,p=u.length,y,v,b=t.value,x,D,S,A,w,_,k;d<p;){y=r-n,v=a-i;do x=u[h++].value;while(!x&&h<p);for(D=S=x,_=Math.max(v/y,y/v)/(b*e),k=x*x*_,w=Math.max(S/k,k/D);h<p;++h){if(x+=l=u[h].value,l<D&&(D=l),l>S&&(S=l),k=x*x*_,A=Math.max(S/k,k/D),A>w){x-=l;break}w=A}o.push(c={value:x,dice:y<v,children:u.slice(d,h)}),c.dice?Cp(c,n,i,r,b?i+=v*x/b:a):Qb(c,n,i,b?n+=y*x/b:r,a),b-=x,d=h}return o}const AP=(function e(t){function n(i,r,a,o,u){SP(t,i,r,a,o,u)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(CP);function ule(){var e=AP,t=!1,n=1,i=1,r=[0],a=jl,o=jl,u=jl,c=jl,l=jl;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(DP),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,x=p.x1-y,D=p.y1-y;x<v&&(v=x=(v+x)/2),D<b&&(b=D=(b+D)/2),p.x0=v,p.y0=b,p.x1=x,p.y1=D,p.children&&(y=r[p.depth+1]=a(p)/2,v+=l(p)-y,b+=o(p)-y,x-=u(p)-y,D-=c(p)-y,x<v&&(v=x=(v+x)/2),D<b&&(b=D=(b+D)/2),e(p,v,b,x,D))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=bP(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:Pf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(o=typeof p=="function"?p:Pf(+p),d):o},d.paddingRight=function(p){return arguments.length?(u=typeof p=="function"?p:Pf(+p),d):u},d.paddingBottom=function(p){return arguments.length?(c=typeof p=="function"?p:Pf(+p),d):c},d.paddingLeft=function(p){return arguments.length?(l=typeof p=="function"?p:Pf(+p),d):l},d}function sle(e,t,n,i,r){var a=e.children,o,u=a.length,c,l=new Array(u+1);for(l[0]=c=o=0;o<u;++o)l[o+1]=c+=a[o].value;d(0,u,e.value,t,n,i,r);function d(h,p,y,v,b,x,D){if(h>=p-1){var S=a[h];S.x0=v,S.y0=b,S.x1=x,S.y1=D;return}for(var A=l[h],w=y/2+A,_=h+1,k=p-1;_<k;){var F=_+k>>>1;l[F]<w?_=F+1:k=F}w-l[_-1]<l[_]-w&&h+1<_&&--_;var M=l[_]-A,N=y-M;if(x-v>D-b){var P=y?(v*N+x*M)/y:x;d(h,_,M,v,b,P,D),d(_,p,N,P,b,x,D)}else{var L=y?(b*N+D*M)/y:D;d(h,_,M,v,b,x,L),d(_,p,N,v,L,x,D)}}}function lle(e,t,n,i,r){(e.depth&1?Qb:Cp)(e,t,n,i,r)}const cle=(function e(t){function n(i,r,a,o,u){if((c=i._squarify)&&c.ratio===t)for(var c,l,d,h,p=-1,y,v=c.length,b=i.value;++p<v;){for(l=c[p],d=l.children,h=l.value=0,y=d.length;h<y;++h)l.value+=d[h].value;l.dice?Cp(l,r,a,o,b?a+=(u-a)*l.value/b:u):Qb(l,r,a,b?r+=(o-r)*l.value/b:o,u),b-=l.value}else i._squarify=c=SP(t,i,r,a,o,u),c.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(CP);function kA(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function OF(e){de.call(this,null,e)}OF.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const fle=e=>e.values;Re(OF,de,{transform(e,t){t.source||me("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(o=>{o.children&&cb(o.data)&&r.rem.push(o.data)}),this.value=a=MF({values:Ie(e.keys).reduce((o,u)=>(o.key(u),o),dle()).entries(r.source)},fle),n&&a.each(o=>{o.children&&(o=wt(o.data),r.add.push(o),r.source.push(o))}),kA(a,Ye,Ye)),r.source.root=a,r}});function dle(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const o=r.length,u=e[a++],c={},l={};let d=-1,h,p,y;for(;++d<o;)h=u(p=r[d])+"",(y=c[h])?y.push(p):c[h]=[p];for(h in c)l[h]=n(c[h],a);return l}function i(r,a){if(++a>e.length)return r;const o=[];for(const u in r)o.push({key:u,values:i(r[u],a)});return o}return t}function Au(e){de.call(this,null,e)}const hle=(e,t)=>e.parent===t.parent?1:2;Re(Au,de,{transform(e,t){(!t.source||!t.source.root)&&me(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(wc(e.sort,o=>o.data)),gle(n,this.params,e),n.separation&&n.separation(e.separation!==!1?hle:jd);try{this.value=n(r)}catch(o){me(o)}return r.each(o=>ple(o,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function gle(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function ple(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const TA=["x","y","r","depth","children"];function NF(e){Au.call(this,e)}NF.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:TA.length,default:TA}]};Re(NF,Au,{layout:Wse,params:["radius","size","padding"],fields:TA});const $A=["x0","y0","x1","y1","depth","children"];function RF(e){Au.call(this,e)}RF.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:$A.length,default:$A}]};Re(RF,Au,{layout:Qse,params:["size","round","padding"],fields:$A});function BF(e){de.call(this,null,e)}BF.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};Re(BF,de,{transform(e,t){t.source||me("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?kA(IM().id(e.key).parentId(e.parentKey)(r.source),e.key,Wr):kA(IM()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const PM={tidy:ole,cluster:vse},MA=["x","y","depth","children"];function zF(e){Au.call(this,e)}zF.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:MA.length,default:MA}]};Re(zF,Au,{layout(e){const t=e||"tidy";if(Ue(PM,t))return PM[t]();me("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:MA});function LF(e){de.call(this,[],e)}LF.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};Re(LF,de,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||me("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,o=>a[Ye(o)]=1),i.each(o=>{const u=o.data,c=o.parent&&o.parent.data;c&&a[Ye(u)]&&a[Ye(c)]&&r.add.push(wt({source:c,target:u}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>a[Ye(o)]=1),n.forEach(o=>{(a[Ye(o.source)]||a[Ye(o.target)])&&r.mod.push(o)})),r}});const jM={binary:sle,dice:Cp,slice:Qb,slicedice:lle,squarify:AP,resquarify:cle},OA=["x0","y0","x1","y1","depth","children"];function IF(e){Au.call(this,e)}IF.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:OA.length,default:OA}]};Re(IF,Au,{layout(){const e=ule();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Ue(jM,t)?e.tile(jM[t]):me("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:OA});const mle=Object.freeze(Object.defineProperty({__proto__:null,nest:OF,pack:NF,partition:RF,stratify:BF,tree:zF,treelinks:LF,treemap:IF},Symbol.toStringTag,{value:"Module"})),sC=4278190080;function yle(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function vle(e,t,n,i,r){const a=e.width,o=e.height,u=i||r,c=Ss(a,o).getContext("2d"),l=Ss(a,o).getContext("2d"),d=u&&Ss(a,o).getContext("2d");n.forEach(M=>sy(c,M,!1)),sy(l,t,!1),u&&sy(d,t,!0);const h=lC(c,a,o),p=lC(l,a,o),y=u&&lC(d,a,o),v=e.bitmap(),b=u&&e.bitmap();let x,D,S,A,w,_,k,F;for(D=0;D<o;++D)for(x=0;x<a;++x)w=D*a+x,_=h[w]&sC,F=p[w]&sC,k=u&&y[w]&sC,(_||k||F)&&(S=e(x),A=e(D),!r&&(_||F)&&v.set(S,A),u&&(_||k)&&b.set(S,A));return[v,b]}function lC(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function sy(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>sy(e,a.items,n))}):wr[i].draw(e,{items:n?t.map(ble):t})}function ble(e){const t=fb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Vo=5,Si=31,Lg=32,ls=new Uint32Array(Lg+1),ga=new Uint32Array(Lg+1);ga[0]=0;ls[0]=~ga[0];for(let e=1;e<=Lg;++e)ga[e]=ga[e-1]<<1|1,ls[e]=~ga[e];function xle(e,t){const n=new Uint32Array(~~((e*t+Lg)/Lg));function i(a,o){n[a]|=o}function r(a,o){n[a]&=o}return{array:n,get:(a,o)=>{const u=o*e+a;return n[u>>>Vo]&1<<(u&Si)},set:(a,o)=>{const u=o*e+a;i(u>>>Vo,1<<(u&Si))},clear:(a,o)=>{const u=o*e+a;r(u>>>Vo,~(1<<(u&Si)))},getRange:(a,o,u,c)=>{let l=c,d,h,p,y;for(;l>=o;--l)if(d=l*e+a,h=l*e+u,p=d>>>Vo,y=h>>>Vo,p===y){if(n[p]&ls[d&Si]&ga[(h&Si)+1])return!0}else{if(n[p]&ls[d&Si]||n[y]&ga[(h&Si)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,o,u,c)=>{let l,d,h,p,y;for(;o<=c;++o)if(l=o*e+a,d=o*e+u,h=l>>>Vo,p=d>>>Vo,h===p)i(h,ls[l&Si]&ga[(d&Si)+1]);else for(i(h,ls[l&Si]),i(p,ga[(d&Si)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,o,u,c)=>{let l,d,h,p,y;for(;o<=c;++o)if(l=o*e+a,d=o*e+u,h=l>>>Vo,p=d>>>Vo,h===p)r(h,ga[l&Si]|ls[(d&Si)+1]);else for(r(h,ga[l&Si]),r(p,ls[(d&Si)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,o,u,c)=>a<0||o<0||c>=t||u>=e}}function Ele(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),o=u=>~~((u+n)/i);return o.invert=u=>u*i-n,o.bitmap=()=>xle(r,a),o.ratio=i,o.padding=n,o.width=e,o.height=t,o}function Dle(e,t,n,i){const r=e.width,a=e.height;return function(o){const u=o.datum.datum.items[i].items,c=u.length,l=o.datum.fontSize,d=Er.width(o.datum,o.datum.text);let h=0,p,y,v,b,x,D,S;for(let A=0;A<c;++A)p=u[A].x,v=u[A].y,y=u[A].x2===void 0?p:u[A].x2,b=u[A].y2===void 0?v:u[A].y2,x=(p+y)/2,D=(v+b)/2,S=Math.abs(y-p+b-v),S>=h&&(h=S,o.x=x,o.y=D);return x=d/2,D=l/2,p=o.x-x,y=o.x+x,v=o.y-D,b=o.y+D,o.align="center",p<0&&y<=r?o.align="left":0<=p&&r<y&&(o.align="right"),o.baseline="middle",v<0&&b<=a?o.baseline="top":0<=v&&a<b&&(o.baseline="bottom"),!0}}function Av(e,t,n,i,r,a){let o=n/2;return e-o<0||e+o>r||t-(o=i/2)<0||t+o>a}function bs(e,t,n,i,r,a,o,u){const c=r*a/(i*2),l=e(t-c),d=e(t+c),h=e(n-(a=a/2)),p=e(n+a);return o.outOfBounds(l,h,d,p)||o.getRange(l,h,d,p)||u&&u.getRange(l,h,d,p)}function Cle(e,t,n,i){const r=e.width,a=e.height,o=t[0],u=t[1];function c(l,d,h,p,y){const v=e.invert(l),b=e.invert(d);let x=h,D=a,S;if(!Av(v,b,p,y,r,a)&&!bs(e,v,b,y,p,x,o,u)&&!bs(e,v,b,y,p,y,o,null)){for(;D-x>=1;)S=(x+D)/2,bs(e,v,b,y,p,S,o,u)?D=S:x=S;if(x>h)return[v,b,x,!0]}}return function(l){const d=l.datum.datum.items[i].items,h=d.length,p=l.datum.fontSize,y=Er.width(l.datum,l.datum.text);let v=n?p:0,b=!1,x=!1,D=0,S,A,w,_,k,F,M,N,P,L,H,I,U,z,T,R,q;for(let G=0;G<h;++G){for(S=d[G].x,w=d[G].y,A=d[G].x2===void 0?S:d[G].x2,_=d[G].y2===void 0?w:d[G].y2,S>A&&(q=S,S=A,A=q),w>_&&(q=w,w=_,_=q),P=e(S),H=e(A),L=~~((P+H)/2),I=e(w),z=e(_),U=~~((I+z)/2),M=L;M>=P;--M)for(N=U;N>=I;--N)R=c(M,N,v,y,p),R&&([l.x,l.y,v,b]=R);for(M=L;M<=H;++M)for(N=U;N<=z;++N)R=c(M,N,v,y,p),R&&([l.x,l.y,v,b]=R);!b&&!n&&(T=Math.abs(A-S+_-w),k=(S+A)/2,F=(w+_)/2,T>=D&&!Av(k,F,y,p,r,a)&&!bs(e,k,F,p,y,p,o,null)&&(D=T,l.x=k,l.y=F,x=!0))}return b||x?(k=y/2,F=p/2,o.setRange(e(l.x-k),e(l.y-F),e(l.x+k),e(l.y+F)),l.align="center",l.baseline="middle",!0):!1}}const Sle=[-1,-1,1,1],Ale=[-1,1,-1,1];function _le(e,t,n,i){const r=e.width,a=e.height,o=t[0],u=t[1],c=e.bitmap();return function(l){const d=l.datum.datum.items[i].items,h=d.length,p=l.datum.fontSize,y=Er.width(l.datum,l.datum.text),v=[];let b=n?p:0,x=!1,D=!1,S=0,A,w,_,k,F,M,N,P,L,H,I,U;for(let z=0;z<h;++z){for(A=d[z].x,_=d[z].y,w=d[z].x2===void 0?A:d[z].x2,k=d[z].y2===void 0?_:d[z].y2,v.push([e((A+w)/2),e((_+k)/2)]);v.length;)if([N,P]=v.pop(),!(o.get(N,P)||u.get(N,P)||c.get(N,P))){c.set(N,P);for(let T=0;T<4;++T)F=N+Sle[T],M=P+Ale[T],c.outOfBounds(F,M,F,M)||v.push([F,M]);if(F=e.invert(N),M=e.invert(P),L=b,H=a,!Av(F,M,y,p,r,a)&&!bs(e,F,M,p,y,L,o,u)&&!bs(e,F,M,p,y,p,o,null)){for(;H-L>=1;)I=(L+H)/2,bs(e,F,M,p,y,I,o,u)?H=I:L=I;L>b&&(l.x=F,l.y=M,b=L,x=!0)}}!x&&!n&&(U=Math.abs(w-A+k-_),F=(A+w)/2,M=(_+k)/2,U>=S&&!Av(F,M,y,p,r,a)&&!bs(e,F,M,p,y,p,o,null)&&(S=U,l.x=F,l.y=M,D=!0))}return x||D?(F=y/2,M=p/2,o.setRange(e(l.x-F),e(l.y-M),e(l.x+F),e(l.y+M)),l.align="center",l.baseline="middle",!0):!1}}const wle=["right","center","left"],Fle=["bottom","middle","top"];function kle(e,t,n,i){const r=e.width,a=e.height,o=t[0],u=t[1],c=i.length;return function(l){const d=l.boundary,h=l.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=l.textWidth??0,y,v,b,x,D,S,A,w,_,k,F,M,N,P,L;for(let H=0;H<c;++H){if(y=(n[H]&3)-1,v=(n[H]>>>2&3)-1,b=y===0&&v===0||i[H]<0,x=y&&v?Math.SQRT1_2:1,D=i[H]<0?-1:1,S=d[1+y]+i[H]*y*x,F=d[4+v]+D*h*v/2+i[H]*v*x,w=F-h/2,_=F+h/2,M=e(S),P=e(w),L=e(_),!p)if(qM(M,M,P,L,o,u,S,S,w,_,d,b))p=Er.width(l.datum,l.datum.text);else continue;if(k=S+D*p*y/2,S=k-p/2,A=k+p/2,M=e(S),N=e(A),qM(M,N,P,L,o,u,S,A,w,_,d,b))return l.x=y?y*D<0?A:S:k,l.y=v?v*D<0?_:w:F,l.align=wle[y*D+1],l.baseline=Fle[v*D+1],o.setRange(M,P,N,L),!0}return!1}}function qM(e,t,n,i,r,a,o,u,c,l,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const cC=0,fC=4,dC=8,hC=0,gC=1,pC=2,Tle={"top-left":cC+hC,top:cC+gC,"top-right":cC+pC,left:fC+hC,middle:fC+gC,right:fC+pC,"bottom-left":dC+hC,bottom:dC+gC,"bottom-right":dC+pC},$le={naive:Dle,"reduced-search":Cle,floodfill:_le};function Mle(e,t,n,i,r,a,o,u,c,l,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=Ole(i,h),y=Nle(r,h),v=Rle(e[0].datum),b=v==="group"&&e[0].datum.items[c].marktype,x=b==="area",D=Ble(v,b,u,c),S=l===null||l===1/0,A=x&&d==="naive";let w=-1,_=-1;const k=e.map(P=>{const L=S?Er.width(P,P.text):void 0;return w=Math.max(w,L),_=Math.max(_,P.fontSize),{datum:P,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:D(P),textWidth:L}});l=l===null||l===1/0?Math.max(w,_)+Math.max(...i):l;const F=Ele(t[0],t[1],l);let M;if(!A){n&&k.sort((H,I)=>n(H.datum,I.datum));let P=!1;for(let H=0;H<y.length&&!P;++H)P=y[H]===5||p[H]<0;const L=(v&&o||x)&&e.map(H=>H.datum);M=a.length||L?vle(F,L||[],a,P,x):yle(F,o&&k)}const N=x?$le[d](F,M,o,c):kle(F,M,y,p);return k.forEach(P=>P.opacity=+N(P)),k}function Ole(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Nle(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Tle[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Rle(e){return e&&e.mark&&e.mark.marktype}function Ble(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const o=a.datum.items[i].items;return r(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:a=>{const o=a.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:r}const NA=["x","y","opacity","align","baseline"],_P=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function UF(e){de.call(this,null,e)}UF.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:_P},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:NA.length,default:NA}]};Re(UF,de,{transform(e,t){function n(a){const o=e[a];return rt(o)&&t.modified(o.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&me("Size parameter should be specified as a [width, height] array.");const r=e.as||NA;return Mle(t.materialize(t.SOURCE).source||[],e.size,e.sort,Ie(e.offset==null?1:e.offset),Ie(e.anchor||_P),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const o=a.datum;o[r[0]]=a.x,o[r[1]]=a.y,o[r[2]]=a.opacity,o[r[3]]=a.align,o[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const zle=Object.freeze(Object.defineProperty({__proto__:null,label:UF},Symbol.toStringTag,{value:"Module"}));function wP(e,t){var n=[],i=function(d){return d(u)},r,a,o,u,c,l;if(t==null)n.push(e);else for(r={},a=0,o=e.length;a<o;++a)u=e[a],c=t.map(i),l=r[c],l||(r[c]=l=[],l.dims=c,n.push(l)),l.push(u);return n}function PF(e){de.call(this,null,e)}PF.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};Re(PF,de,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=wP(i,e.groupby),a=(e.groupby||[]).map(dn),o=a.length,u=e.as||[dn(e.x),dn(e.y)],c=[];r.forEach(l=>{RB(l,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<o;++p)h[a[p]]=l.dims[p];h[u[0]]=d[0],h[u[1]]=d[1],c.push(wt(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=c}return n}});const RA={constant:Dw,linear:Cw,log:$B,exp:MB,pow:OB,quad:Sw,poly:NB},Lle=(e,t)=>e==="poly"?t:e==="quad"?2:1;function jF(e){de.call(this,null,e)}jF.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(RA)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};Re(jF,de,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=wP(i,e.groupby),a=(e.groupby||[]).map(dn),o=e.method||"linear",u=e.order==null?3:e.order,c=Lle(o,u),l=e.as||[dn(e.x),dn(e.y)],d=RA[o],h=[];let p=e.extent;Ue(RA,o)||me("Invalid regression method: "+o),p!=null&&o==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=c){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,u);if(e.params){h.push(wt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const x=p||so(y,e.x),D=S=>{const A={};for(let w=0;w<a.length;++w)A[a[w]]=y.dims[w];A[l[0]]=S[0],A[l[1]]=S[1],h.push(wt(A))};o==="linear"||o==="constant"?x.forEach(S=>D([S,b.predict(S)])):vb(b.predict,x,25,200).forEach(D)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const Ile=Object.freeze(Object.defineProperty({__proto__:null,loess:PF,regression:jF},Symbol.toStringTag,{value:"Module"})),fu=11102230246251565e-32,ci=134217729,Ule=(3+8*fu)*fu;function mC(e,t,n,i,r){let a,o,u,c,l=t[0],d=i[0],h=0,p=0;d>l==d>-l?(a=l,l=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>l==d>-l?(o=l+a,u=a-(o-l),l=t[++h]):(o=d+a,u=a-(o-d),d=i[++p]),a=o,u!==0&&(r[y++]=u);h<e&&p<n;)d>l==d>-l?(o=a+l,c=o-a,u=a-(o-c)+(l-c),l=t[++h]):(o=a+d,c=o-a,u=a-(o-c)+(d-c),d=i[++p]),a=o,u!==0&&(r[y++]=u);for(;h<e;)o=a+l,c=o-a,u=a-(o-c)+(l-c),l=t[++h],a=o,u!==0&&(r[y++]=u);for(;p<n;)o=a+d,c=o-a,u=a-(o-c)+(d-c),d=i[++p],a=o,u!==0&&(r[y++]=u);return(a!==0||y===0)&&(r[y++]=a),y}function Ple(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function Sp(e){return new Float64Array(e)}const jle=(3+16*fu)*fu,qle=(2+12*fu)*fu,Hle=(9+64*fu)*fu*fu,Rf=Sp(4),HM=Sp(8),GM=Sp(12),YM=Sp(16),Ai=Sp(4);function Gle(e,t,n,i,r,a,o){let u,c,l,d,h,p,y,v,b,x,D,S,A,w,_,k,F,M;const N=e-r,P=n-r,L=t-a,H=i-a;w=N*H,p=ci*N,y=p-(p-N),v=N-y,p=ci*H,b=p-(p-H),x=H-b,_=v*x-(w-y*b-v*b-y*x),k=L*P,p=ci*L,y=p-(p-L),v=L-y,p=ci*P,b=p-(p-P),x=P-b,F=v*x-(k-y*b-v*b-y*x),D=_-F,h=_-D,Rf[0]=_-(D+h)+(h-F),S=w+D,h=S-w,A=w-(S-h)+(D-h),D=A-k,h=A-D,Rf[1]=A-(D+h)+(h-k),M=S+D,h=M-S,Rf[2]=S-(M-h)+(D-h),Rf[3]=M;let I=Ple(4,Rf),U=qle*o;if(I>=U||-I>=U||(h=e-N,u=e-(N+h)+(h-r),h=n-P,l=n-(P+h)+(h-r),h=t-L,c=t-(L+h)+(h-a),h=i-H,d=i-(H+h)+(h-a),u===0&&c===0&&l===0&&d===0)||(U=Hle*o+Ule*Math.abs(I),I+=N*d+H*u-(L*l+P*c),I>=U||-I>=U))return I;w=u*H,p=ci*u,y=p-(p-u),v=u-y,p=ci*H,b=p-(p-H),x=H-b,_=v*x-(w-y*b-v*b-y*x),k=c*P,p=ci*c,y=p-(p-c),v=c-y,p=ci*P,b=p-(p-P),x=P-b,F=v*x-(k-y*b-v*b-y*x),D=_-F,h=_-D,Ai[0]=_-(D+h)+(h-F),S=w+D,h=S-w,A=w-(S-h)+(D-h),D=A-k,h=A-D,Ai[1]=A-(D+h)+(h-k),M=S+D,h=M-S,Ai[2]=S-(M-h)+(D-h),Ai[3]=M;const z=mC(4,Rf,4,Ai,HM);w=N*d,p=ci*N,y=p-(p-N),v=N-y,p=ci*d,b=p-(p-d),x=d-b,_=v*x-(w-y*b-v*b-y*x),k=L*l,p=ci*L,y=p-(p-L),v=L-y,p=ci*l,b=p-(p-l),x=l-b,F=v*x-(k-y*b-v*b-y*x),D=_-F,h=_-D,Ai[0]=_-(D+h)+(h-F),S=w+D,h=S-w,A=w-(S-h)+(D-h),D=A-k,h=A-D,Ai[1]=A-(D+h)+(h-k),M=S+D,h=M-S,Ai[2]=S-(M-h)+(D-h),Ai[3]=M;const T=mC(z,HM,4,Ai,GM);w=u*d,p=ci*u,y=p-(p-u),v=u-y,p=ci*d,b=p-(p-d),x=d-b,_=v*x-(w-y*b-v*b-y*x),k=c*l,p=ci*c,y=p-(p-c),v=c-y,p=ci*l,b=p-(p-l),x=l-b,F=v*x-(k-y*b-v*b-y*x),D=_-F,h=_-D,Ai[0]=_-(D+h)+(h-F),S=w+D,h=S-w,A=w-(S-h)+(D-h),D=A-k,h=A-D,Ai[1]=A-(D+h)+(h-k),M=S+D,h=M-S,Ai[2]=S-(M-h)+(D-h),Ai[3]=M;const R=mC(T,GM,4,Ai,YM);return YM[R-1]}function w1(e,t,n,i,r,a){const o=(t-a)*(n-r),u=(e-r)*(i-a),c=o-u,l=Math.abs(o+u);return Math.abs(c)>=jle*l?c:-Gle(e,t,n,i,r,a,l)}const XM=Math.pow(2,-52),F1=new Uint32Array(512);class _v{static from(t,n=Qle,i=Zle){const r=t.length,a=new Float64Array(r*2);for(let o=0;o<r;o++){const u=t[o];a[2*o]=n(u),a[2*o+1]=i(u)}return new _v(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,o=t.length>>1;let u=1/0,c=1/0,l=-1/0,d=-1/0;for(let N=0;N<o;N++){const P=t[2*N],L=t[2*N+1];P<u&&(u=P),L<c&&(c=L),P>l&&(l=P),L>d&&(d=L),this._ids[N]=N}const h=(u+l)/2,p=(c+d)/2;let y,v,b;for(let N=0,P=1/0;N<o;N++){const L=yC(h,p,t[2*N],t[2*N+1]);L<P&&(y=N,P=L)}const x=t[2*y],D=t[2*y+1];for(let N=0,P=1/0;N<o;N++){if(N===y)continue;const L=yC(x,D,t[2*N],t[2*N+1]);L<P&&L>0&&(v=N,P=L)}let S=t[2*v],A=t[2*v+1],w=1/0;for(let N=0;N<o;N++){if(N===y||N===v)continue;const P=Vle(x,D,S,A,t[2*N],t[2*N+1]);P<w&&(b=N,w=P)}let _=t[2*b],k=t[2*b+1];if(w===1/0){for(let L=0;L<o;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];Vf(this._ids,this._dists,0,o-1);const N=new Uint32Array(o);let P=0;for(let L=0,H=-1/0;L<o;L++){const I=this._ids[L],U=this._dists[I];U>H&&(N[P++]=I,H=U)}this.hull=N.subarray(0,P),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(w1(x,D,S,A,_,k)<0){const N=v,P=S,L=A;v=b,S=_,A=k,b=N,_=P,k=L}const F=Wle(x,D,S,A,_,k);this._cx=F.x,this._cy=F.y;for(let N=0;N<o;N++)this._dists[N]=yC(t[2*N],t[2*N+1],F.x,F.y);Vf(this._ids,this._dists,0,o-1),this._hullStart=y;let M=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(x,D)]=y,a[this._hashKey(S,A)]=v,a[this._hashKey(_,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let N=0,P,L;N<this._ids.length;N++){const H=this._ids[N],I=t[2*H],U=t[2*H+1];if(N>0&&Math.abs(I-P)<=XM&&Math.abs(U-L)<=XM||(P=I,L=U,H===y||H===v||H===b))continue;let z=0;for(let O=0,Z=this._hashKey(I,U);O<this._hashSize&&(z=a[(Z+O)%this._hashSize],!(z!==-1&&z!==i[z]));O++);z=n[z];let T=z,R;for(;R=i[T],w1(I,U,t[2*T],t[2*T+1],t[2*R],t[2*R+1])>=0;)if(T=R,T===z){T=-1;break}if(T===-1)continue;let q=this._addTriangle(T,H,i[T],-1,-1,r[T]);r[H]=this._legalize(q+2),r[T]=q,M++;let G=i[T];for(;R=i[G],w1(I,U,t[2*G],t[2*G+1],t[2*R],t[2*R+1])<0;)q=this._addTriangle(G,H,R,r[H],-1,r[G]),r[H]=this._legalize(q+2),i[G]=G,M--,G=R;if(T===z)for(;R=n[T],w1(I,U,t[2*R],t[2*R+1],t[2*T],t[2*T+1])<0;)q=this._addTriangle(R,H,T,-1,r[T],r[R]),this._legalize(q+2),r[R]=q,i[T]=T,M--,T=R;this._hullStart=n[H]=T,i[T]=n[G]=H,i[H]=G,a[this._hashKey(I,U)]=H,a[this._hashKey(t[2*T],t[2*T+1])]=T}this.hull=new Uint32Array(M);for(let N=0,P=this._hullStart;N<M;N++)this.hull[N]=P,P=i[P];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Yle(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,o=0;for(;;){const u=i[t],c=t-t%3;if(o=c+(t+2)%3,u===-1){if(a===0)break;t=F1[--a];continue}const l=u-u%3,d=c+(t+1)%3,h=l+(u+2)%3,p=n[o],y=n[t],v=n[d],b=n[h];if(Xle(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[u]=p;const D=i[h];if(D===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,D),this._link(u,i[o]),this._link(o,h);const S=l+(u+1)%3;a<F1.length&&(F1[a++]=S)}else{if(a===0)break;t=F1[--a]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,o){const u=this.trianglesLen;return this._triangles[u]=t,this._triangles[u+1]=n,this._triangles[u+2]=i,this._link(u,r),this._link(u+1,a),this._link(u+2,o),this.trianglesLen+=3,u}}function Yle(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function yC(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Xle(e,t,n,i,r,a,o,u){const c=e-o,l=t-u,d=n-o,h=i-u,p=r-o,y=a-u,v=c*c+l*l,b=d*d+h*h,x=p*p+y*y;return c*(h*x-b*y)-l*(d*x-b*p)+v*(d*y-h*p)<0}function Vle(e,t,n,i,r,a){const o=n-e,u=i-t,c=r-e,l=a-t,d=o*o+u*u,h=c*c+l*l,p=.5/(o*l-u*c),y=(l*d-u*h)*p,v=(o*h-c*d)*p;return y*y+v*v}function Wle(e,t,n,i,r,a){const o=n-e,u=i-t,c=r-e,l=a-t,d=o*o+u*u,h=c*c+l*l,p=.5/(o*l-u*c),y=e+(l*d-u*h)*p,v=t+(o*h-c*d)*p;return{x:y,y:v}}function Vf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],o=t[a];let u=r-1;for(;u>=n&&t[e[u]]>o;)e[u+1]=e[u--];e[u+1]=a}else{const r=n+i>>1;let a=n+1,o=i;_0(e,r,a),t[e[n]]>t[e[i]]&&_0(e,n,i),t[e[a]]>t[e[i]]&&_0(e,a,i),t[e[n]]>t[e[a]]&&_0(e,n,a);const u=e[a],c=t[u];for(;;){do a++;while(t[e[a]]<c);do o--;while(t[e[o]]>c);if(o<a)break;_0(e,a,o)}e[n+1]=e[o],e[o]=u,i-a+1>=o-n?(Vf(e,t,a,i),Vf(e,t,n,o-1)):(Vf(e,t,n,o-1),Vf(e,t,a,i))}}function _0(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Qle(e){return e[0]}function Zle(e){return e[1]}const VM=1e-6;class Yl{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>VM||Math.abs(this._y1-a)>VM)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class BA{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Kle=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,o;const u=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,x=0,D=i.length,S,A;b<D;b+=3,x+=2){const w=i[b]*2,_=i[b+1]*2,k=i[b+2]*2,F=t[w],M=t[w+1],N=t[_],P=t[_+1],L=t[k],H=t[k+1],I=N-F,U=P-M,z=L-F,T=H-M,R=(I*T-U*z)*2;if(Math.abs(R)<1e-9){if(a===void 0){a=o=0;for(const G of n)a+=t[G*2],o+=t[G*2+1];a/=n.length,o/=n.length}const q=1e9*Math.sign((a-F)*T-(o-M)*z);S=(F+L)/2-q*T,A=(M+H)/2+q*z}else{const q=1/R,G=I*I+U*U,O=z*z+T*T;S=F+(T*G-U*O)*q,A=M+(I*O-z*G)*q}u[x]=S,u[x+1]=A}let c=n[n.length-1],l,d=c*4,h,p=t[2*c],y,v=t[2*c+1];r.fill(0);for(let b=0;b<n.length;++b)c=n[b],l=d,h=p,y=v,d=c*4,p=t[2*c],v=t[2*c+1],r[l+2]=r[d]=y-v,r[l+3]=r[d+1]=p-h}render(t){const n=t==null?t=new Yl:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:o,vectors:u}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=o[y],x=o[y+1],D=o[v],S=o[v+1];this._renderSegment(b,x,D,S,t)}let c,l=a[a.length-1];for(let d=0;d<a.length;++d){c=l,l=a[d];const h=Math.floor(r[l]/3)*2,p=o[h],y=o[h+1],v=c*4,b=this._project(p,y,u[v+2],u[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Yl:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new Yl:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let o=2;o<a;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&n.lineTo(r[o],r[o+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new BA;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let o;const u=this._regioncode(t,n),c=this._regioncode(i,r);u===0&&c===0?(a.moveTo(t,n),a.lineTo(i,r)):(o=this._clipSegment(t,n,i,r,u,c))&&(a.moveTo(o[0],o[1]),a.lineTo(o[2],o[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,o=n.length;a<o;a+=2)for(let u=0,c=r.length;u<c;u+=2)if(n[a]===r[u]&&n[a+1]===r[u+1]&&n[(a+2)%o]===r[(u+c-2)%c]&&n[(a+3)%o]===r[(u+c-1)%c]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,o=i[t];if(o===-1)return null;const u=[];let c=o;do{const l=Math.floor(c/3);if(u.push(n[l*2],n[l*2+1]),c=c%3===2?c-2:c+1,a[c]!==t)break;c=r[c]}while(c!==o&&c!==-1);return u}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,o,u=n[i-2],c=n[i-1],l,d=this._regioncode(u,c),h,p=0;for(let y=0;y<i;y+=2)if(a=u,o=c,u=n[y],c=n[y+1],l=d,d=this._regioncode(u,c),l===0&&d===0)h=p,p=0,r?r.push(u,c):r=[u,c];else{let v,b,x,D,S;if(l===0){if((v=this._clipSegment(a,o,u,c,l,d))===null)continue;[b,x,D,S]=v}else{if((v=this._clipSegment(u,c,a,o,d,l))===null)continue;[D,S,b,x]=v,h=p,p=this._edgecode(b,x),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,x):r=[b,x]}h=p,p=this._edgecode(D,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(D,S):r=[D,S]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,o){const u=a<o;for(u&&([t,n,i,r,a,o]=[i,r,t,n,o,a]);;){if(a===0&&o===0)return u?[i,r,t,n]:[t,n,i,r];if(a&o)return null;let c,l,d=a||o;d&8?(c=t+(i-t)*(this.ymax-n)/(r-n),l=this.ymax):d&4?(c=t+(i-t)*(this.ymin-n)/(r-n),l=this.ymin):d&2?(l=n+(r-n)*(this.xmax-t)/(i-t),c=this.xmax):(l=n+(r-n)*(this.xmin-t)/(i-t),c=this.xmin),a?(t=c,n=l,a=this._regioncode(t,n)):(i=c,r=l,o=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,o){let u=Array.from(n),c;if((c=this._project(u[0],u[1],i,r))&&u.unshift(c[0],c[1]),(c=this._project(u[u.length-2],u[u.length-1],a,o))&&u.push(c[0],c[1]),u=this._clipFinite(t,u))for(let l=0,d=u.length,h,p=this._edgecode(u[d-2],u[d-1]);l<d;l+=2)h=p,p=this._edgecode(u[l],u[l+1]),h&&p&&(l=this._edge(t,h,p,u,l),d=u.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(u=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return u}_edge(t,n,i,r,a){for(;n!==i;){let o,u;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,u=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,u=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,u=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,u=this.ymin;break}(r[a]!==o||r[a+1]!==u)&&this.contains(t,o,u)&&(r.splice(a,0,o,u),a+=2)}return a}_project(t,n,i,r){let a=1/0,o,u,c;if(r<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/r)<a&&(c=this.ymin,u=t+(a=o)*i)}else if(r>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/r)<a&&(c=this.ymax,u=t+(a=o)*i)}if(i>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/i)<a&&(u=this.xmax,c=n+(a=o)*r)}else if(i<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/i)<a&&(u=this.xmin,c=n+(a=o)*r)}return[u,c]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const Jle=2*Math.PI,Bf=Math.pow;function ece(e){return e[0]}function tce(e){return e[1]}function nce(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],o=2*t[i+2];if((n[o]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[o+1]-n[r+1])>1e-10)return!1}return!0}function ice(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class qF{static from(t,n=ece,i=tce,r){return new qF("length"in t?rce(t,n,i,r):Float64Array.from(ace(t,n,i,r)))}constructor(t){this._delaunator=new _v(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&nce(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const c=this.collinear[0],l=this.collinear[this.collinear.length-1],d=[n[2*c],n[2*c+1],n[2*l],n[2*l+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=ice(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new _v(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),u=this._hullIndex.fill(-1);for(let c=0,l=i.length;c<l;++c){const d=a[c%3===2?c-2:c+1];(i[c]===-1||o[d]===-1)&&(o[d]=c)}for(let c=0,l=r.length;c<l;++c)u[r[c]]=c;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new Kle(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:o,collinear:u}=this;if(u){const h=u.indexOf(t);h>0&&(yield u[h-1]),h<u.length-1&&(yield u[h+1]);return}const c=n[t];if(c===-1)return;let l=c,d=-1;do{if(yield d=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=a[l],l===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(l!==c)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:o,halfedges:u,triangles:c,points:l}=this;if(r[t]===-1||!l.length)return(t+1)%(l.length>>1);let d=t,h=Bf(n-l[t*2],2)+Bf(i-l[t*2+1],2);const p=r[t];let y=p;do{let v=c[y];const b=Bf(n-l[v*2],2)+Bf(i-l[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,c[y]!==t)break;if(y=u[y],y===-1){if(y=a[(o[t]+1)%a.length],y!==v&&Bf(n-l[y*2],2)+Bf(i-l[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new Yl:void 0,{points:i,halfedges:r,triangles:a}=this;for(let o=0,u=r.length;o<u;++o){const c=r[o];if(c<o)continue;const l=a[o]*2,d=a[c]*2;t.moveTo(i[l],i[l+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new Yl:void 0,{points:r}=this;for(let a=0,o=r.length;a<o;a+=2){const u=r[a],c=r[a+1];t.moveTo(u+n,c),t.arc(u,c,n,0,Jle)}return i&&i.value()}renderHull(t){const n=t==null?t=new Yl:void 0,{hull:i,points:r}=this,a=i[0]*2,o=i.length;t.moveTo(r[a],r[a+1]);for(let u=1;u<o;++u){const c=2*i[u];t.lineTo(r[c],r[c+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new BA;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new Yl:void 0,{points:r,triangles:a}=this,o=a[t*=3]*2,u=a[t+1]*2,c=a[t+2]*2;return n.moveTo(r[o],r[o+1]),n.lineTo(r[u],r[u+1]),n.lineTo(r[c],r[c+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new BA;return this.renderTriangle(t,n),n.value()}}function rce(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let o=0;o<r;++o){const u=e[o];a[o*2]=t.call(i,u,o,e),a[o*2+1]=n.call(i,u,o,e)}return a}function*ace(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function HF(e){de.call(this,null,e)}HF.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const oce=[-1e5,-1e5,1e5,1e5];Re(HF,de,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:oce;const a=this.value=qF.from(i,e.x,e.y).voronoi(r);for(let o=0,u=i.length;o<u;++o){const c=a.cellPolygon(o);i[o][n]=c&&!sce(c)?uce(c):null}return t.reflow(e.modified()).modifies(n)}});function uce(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function sce(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const lce=Object.freeze(Object.defineProperty({__proto__:null,voronoi:HF},Symbol.toStringTag,{value:"Module"}));var vC=Math.PI/180,ig=64,ly=2048;function cce(){var e=[256,256],t,n,i,r,a,o,u,c=FP,l=[],d=Math.random,h={};h.layout=function(){for(var v=p(Ss()),b=mce((e[0]>>5)*e[1]),x=null,D=l.length,S=-1,A=[],w=l.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:o(k),size:~~(i(k)+1e-14),padding:u(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,F)=>F.size-k.size);++S<D;){var _=w[S];_.x=e[0]*(d()+.5)>>1,_.y=e[1]*(d()+.5)>>1,fce(v,_,w,S),_.hasText&&y(b,_,x)&&(A.push(_),x?hce(x,_):x=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=e[0]>>1,_.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(ig<<5)/b,v.height=ly/b;var x=v.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",{context:x,ratio:b}}function y(v,b,x){for(var D=b.x,S=b.y,A=Math.hypot(e[0],e[1]),w=c(e),_=d()<.5?1:-1,k=-_,F,M,N;(F=w(k+=_))&&(M=~~F[0],N=~~F[1],!(Math.min(Math.abs(M),Math.abs(N))>=A));)if(b.x=D+M,b.y=S+N,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!x||!dce(b,v,e[0]))&&(!x||gce(b,x))){for(var P=b.sprite,L=b.width>>5,H=e[0]>>5,I=b.x-(L<<4),U=I&127,z=32-U,T=b.y1-b.y0,R=(b.y+b.y0)*H+(I>>5),q,G=0;G<T;G++){q=0;for(var O=0;O<=L;O++)v[R+O]|=q<<z|(O<L?(q=P[G*L+O])>>>U:0);R+=H}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(l=v,h):l},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=Cl(v),h):n},h.fontStyle=function(v){return arguments.length?(r=Cl(v),h):r},h.fontWeight=function(v){return arguments.length?(a=Cl(v),h):a},h.rotate=function(v){return arguments.length?(o=Cl(v),h):o},h.text=function(v){return arguments.length?(t=Cl(v),h):t},h.spiral=function(v){return arguments.length?(c=yce[v]||v,h):c},h.fontSize=function(v){return arguments.length?(i=Cl(v),h):i},h.padding=function(v){return arguments.length?(u=Cl(v),h):u},h.random=function(v){return arguments.length?(d=v,h):d},h}function fce(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(ig<<5)/a,ly/a);var o=0,u=0,c=0,l=n.length,d,h,p,y,v;for(--i;++i<l;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*vC),x=Math.cos(t.rotate*vC),D=d*x,S=d*b,A=p*x,w=p*b;d=Math.max(Math.abs(D+w),Math.abs(D-w))+31>>5<<5,p=~~Math.max(Math.abs(S+A),Math.abs(S-A))}else d=d+31>>5<<5;if(p>c&&(c=p),o+d>=ig<<5&&(o=0,u+=c,c=0),u+p>=ly)break;r.translate((o+(d>>1))/a,(u+(p>>1))/a),t.rotate&&r.rotate(t.rotate*vC),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=o,t.yoff=u,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=d}for(var _=r.getImageData(0,0,(ig<<5)/a,ly/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)k[y]=0;if(o=t.xoff,o==null)return;u=t.yoff;var F=0,M=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var N=h*v+(y>>5),P=_[(u+v)*(ig<<5)+(o+y)<<2]?1<<31-y%32:0;k[N]|=P,F|=P}F?M=v:(t.y0++,p--,v--,u++)}t.y1=t.y0+M,t.sprite=k.slice(0,(t.y1-t.y0)*h)}}}function dce(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),o=a&127,u=32-o,c=e.y1-e.y0,l=(e.y+e.y0)*n+(a>>5),d,h=0;h<c;h++){d=0;for(var p=0;p<=r;p++)if((d<<u|(p<r?(d=i[h*r+p])>>>o:0))&t[l+p])return!0;l+=n}return!1}function hce(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function gce(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function FP(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function pce(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function mce(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Cl(e){return typeof e=="function"?e:function(){return e}}var yce={archimedean:FP,rectangular:pce};const kP=["x","y","font","fontSize","fontStyle","fontWeight","angle"],vce=["text","font","rotate","fontSize","fontStyle","fontWeight"];function GF(e){de.call(this,cce(),e)}GF.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:kP}]};Re(GF,de,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&me("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return rt(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||vce.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,o=e.as||kP;let u=e.fontSize||14,c;if(rt(u)?c=e.fontSizeRange:u=Di(u),c){const v=u,b=At("sqrt")().domain(so(r,v)).range(c);u=x=>b(v(x))}r.forEach(v=>{v[o[0]]=NaN,v[o[1]]=NaN,v[o[3]]=0});const l=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(u).random(Zr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=l.length;for(let v=0,b,x;v<y;++v)b=l[v],x=b.datum,x[o[0]]=b.x+h,x[o[1]]=b.y+p,x[o[2]]=b.font,x[o[3]]=b.size,x[o[4]]=b.style,x[o[5]]=b.weight,x[o[6]]=b.rotate;return t.reflow(i).modifies(o)}});const bce=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:GF},Symbol.toStringTag,{value:"Module"})),xce=e=>new Uint8Array(e),Ece=e=>new Uint16Array(e),mg=e=>new Uint32Array(e);function Dce(){let e=8,t=[],n=mg(0),i=k1(0,e),r=k1(0,e);return{data:()=>t,seen:()=>n=Cce(n,t.length),add(a){for(let o=0,u=t.length,c=a.length,l;o<c;++o)l=a[o],l._index=u++,t.push(l)},remove(a,o){const u=t.length,c=Array(u-a),l=t;let d,h,p;for(h=0;!o[h]&&h<u;++h)c[h]=t[h],l[h]=h;for(p=h;h<u;++h)d=t[h],o[h]?l[h]=-1:(l[h]=p,i[p]=i[h],r[p]=r[h],c[p]=d,d._index=p++),i[h]=0;return t=c,l},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,o){i[a]|=o},clear(a,o){i[a]&=~o},resize(a,o){const u=i.length;(a>u||o>e)&&(e=Math.max(o,e),i=k1(a,e,i),r=k1(a,e))}}}function Cce(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function k1(e,t,n){const i=(t<257?xce:t<65537?Ece:mg)(e);return n&&i.set(n),i}function WM(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const o=this,u=o.bisect(o.range,r.value),c=r.index,l=u[0],d=u[1],h=c.length;let p;for(p=0;p<l;++p)a[c[p]]|=i;for(p=d;p<h;++p)a[c[p]]|=i;return o}}}function QM(){let e=mg(0),t=[],n=0;function i(u,c,l){if(!c.length)return[];const d=n,h=c.length,p=mg(h);let y=Array(h),v,b,x;for(x=0;x<h;++x)y[x]=u(c[x]),p[x]=x;if(y=Sce(y,p),d)v=t,b=e,t=Array(d+h),e=mg(d+h),Ace(l,v,b,d,y,p,h,t,e);else{if(l>0)for(x=0;x<h;++x)p[x]+=l;t=y,e=p}return n=d+h,{index:p,value:y}}function r(u,c){const l=n;let d,h,p;for(h=0;!c[e[h]]&&h<l;++h);for(p=h;h<l;++h)c[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=l-u}function a(u){for(let c=0,l=n;c<l;++c)e[c]=u[e[c]]}function o(u,c){let l;return c?l=c.length:(c=t,l=n),[kW(c,u[0],0,l),ws(c,u[1],0,l)]}return{insert:i,remove:r,bisect:o,reindex:a,index:()=>e,size:()=>n}}function Sce(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),MW(e,t)}function Ace(e,t,n,i,r,a,o,u,c){let l=0,d=0,h;for(h=0;l<i&&d<o;++h)t[l]<r[d]?(u[h]=t[l],c[h]=n[l++]):(u[h]=r[d],c[h]=a[d++]+e);for(;l<i;++l,++h)u[h]=t[l],c[h]=n[l];for(;d<o;++d,++h)u[h]=r[d],c[h]=a[d]+e}function YF(e){de.call(this,Dce(),e),this._indices=null,this._dims=null}YF.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};Re(YF,de,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],o=i.length;let u=0,c,l;for(;u<o;++u)c=n[u].fname,l=r[c]||(r[c]=QM()),a.push(WM(l,u,i[u]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,o=this._dims,u=this.value,c=u.curr(),l=u.prev(),d=u.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,x,D,S,A,w,_,k,F;if(l.set(c),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&u.add(t.add),t.mod.length)for(w={},S=t.mod,_=0,k=S.length;_<k;++_)w[S[_]._index]=1;for(_=0;_<y;++_)F=i[_],(!o[_]||e.modified("fields",_)||t.modified(F.fields))&&(D=F.fname,(b=v[D])||(a[D]=x=QM(),v[D]=b=x.insert(F,t.source,0)),o[_]=WM(x,_,r[_]).onAdd(b,c));for(_=0,k=u.data().length;_<k;++_)A[_]||(l[_]!==c[_]?h.push(_):w[_]&&c[_]!==d&&p.push(_));return u.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,o=this._indices,u=e.fields,c={},l=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const x=r.curr(),D=r.prev(),S=r.all();for(y=0;y<h;++y)v=u[y].fname,b=c[v]||(c[v]=o[v].insert(u[y],i,p)),a[y].onAdd(b,x);for(;p<d;++p)D[p]=S,x[p]!==S&&l.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),o=e.mod;let u,c,l;for(u=0,c=o.length;u<c;++u)l=o[u]._index,r[l]!==a&&n.push(l)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),o=r.prev(),u=r.all(),c={},l=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,c[y]=1,o[y]=v=a[y],a[y]=u,v!==u&&l.push(y);for(y in i)i[y].remove(p,c);return this.reindex(t,p,c),c},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const o in i)i[o].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,o=i.length;let u=0,c,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(c=l,++u);if(u===1)u=i[c].one,this.incrementOne(i[c],r[c],n.add,n.rem);else for(l=0,u=0;l<o;++l)e.modified("query",l)&&(u|=i[l].one,this.incrementAll(i[l],r[l],a,n.add),n.rem=n.add);return u},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),o=r.curr(),u=r.prev(),c=e.index(),l=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=l[0],v=l[1],b=e.one;let x,D,S;if(h<y)for(x=h,D=Math.min(y,p);x<D;++x)S=c[x],a[S]!==n&&(u[S]=o[S],a[S]=n,i.push(S)),o[S]^=b;else if(h>y)for(x=y,D=Math.min(h,v);x<D;++x)S=c[x],a[S]!==n&&(u[S]=o[S],a[S]=n,i.push(S)),o[S]^=b;if(p>v)for(x=Math.max(h,v),D=p;x<D;++x)S=c[x],a[S]!==n&&(u[S]=o[S],a[S]=n,i.push(S)),o[S]^=b;else if(p<v)for(x=Math.max(y,p),D=v;x<D;++x)S=c[x],a[S]!==n&&(u[S]=o[S],a[S]=n,i.push(S)),o[S]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),o=e.index(),u=e.bisect(e.range),c=e.bisect(t),l=c[0],d=c[1],h=u[0],p=u[1],y=e.one;let v,b,x;if(l<h)for(v=l,b=Math.min(h,d);v<b;++v)x=o[v],a[x]^=y,n.push(x);else if(l>h)for(v=h,b=Math.min(l,p);v<b;++v)x=o[v],a[x]^=y,i.push(x);if(d>p)for(v=Math.max(l,p),b=d;v<b;++v)x=o[v],a[x]^=y,n.push(x);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)x=o[v],a[x]^=y,i.push(x);e.range=t.slice()}});function XF(e){de.call(this,null,e)}XF.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};Re(XF,de,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),o=i.data(),u=i.curr(),c=i.prev(),l=d=>u[d]&n?null:o[d];return a.filter(a.MOD,l),r&r-1?(a.filter(a.ADD,d=>{const h=u[d]&n;return!h&&h^c[d]&n?o[d]:null}),a.filter(a.REM,d=>{const h=u[d]&n;return h&&!(h^(h^c[d]&n))?o[d]:null})):(a.filter(a.ADD,l),a.filter(a.REM,d=>(u[d]&n)===r?o[d]:null)),a.filter(a.SOURCE,d=>l(d._index))}});const _ce=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:YF,resolvefilter:XF},Symbol.toStringTag,{value:"Module"})),wce="RawCode",fc="Literal",Fce="Property",kce="Identifier",Tce="ArrayExpression",$ce="BinaryExpression",TP="CallExpression",Mce="ConditionalExpression",Oce="LogicalExpression",Nce="MemberExpression",Rce="ObjectExpression",Bce="UnaryExpression";function $a(e){this.type=e}$a.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=zce(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function zce(e){switch(e.type){case Tce:return e.elements;case $ce:case Oce:return[e.left,e.right];case TP:return[e.callee].concat(e.arguments);case Mce:return[e.test,e.consequent,e.alternate];case Nce:return[e.object,e.property];case Rce:return e.properties;case Fce:return[e.key,e.value];case Bce:return[e.argument];case kce:case fc:case wce:default:return[]}}var Co,je,pe,bi,Ot,Zb=1,Ap=2,dc=3,Vs=4,Kb=5,$c=6,Vi=7,_p=8,Lce=9;Co={};Co[Zb]="Boolean";Co[Ap]="<end>";Co[dc]="Identifier";Co[Vs]="Keyword";Co[Kb]="Null";Co[$c]="Numeric";Co[Vi]="Punctuator";Co[_p]="String";Co[Lce]="RegularExpression";var Ice="ArrayExpression",Uce="BinaryExpression",Pce="CallExpression",jce="ConditionalExpression",$P="Identifier",qce="Literal",Hce="LogicalExpression",Gce="MemberExpression",Yce="ObjectExpression",Xce="Property",Vce="UnaryExpression",Pn="Unexpected token %0",Wce="Unexpected number",Qce="Unexpected string",Zce="Unexpected identifier",Kce="Unexpected reserved word",Jce="Unexpected end of input",zA="Invalid regular expression",bC="Invalid regular expression: missing /",MP="Octal literals are not allowed in strict mode.",efe="Duplicate data property in object literal not allowed in strict mode",ni="ILLEGAL",Ig="Disabled.",tfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),nfe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Jb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Jo(e){return e>=48&&e<=57}function VF(e){return"0123456789abcdefABCDEF".includes(e)}function yg(e){return"01234567".includes(e)}function ife(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Ug(e){return e===10||e===13||e===8232||e===8233}function wp(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&tfe.test(String.fromCharCode(e))}function wv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&nfe.test(String.fromCharCode(e))}const rfe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function OP(){for(;pe<bi;){const e=je.charCodeAt(pe);if(ife(e)||Ug(e))++pe;else break}}function LA(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)pe<bi&&VF(je[pe])?(i=je[pe++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):Dt({},Pn,ni);return String.fromCharCode(r)}function afe(){var e,t,n,i;for(e=je[pe],t=0,e==="}"&&Dt({},Pn,ni);pe<bi&&(e=je[pe++],!!VF(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&Dt({},Pn,ni),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function NP(){var e,t;for(e=je.charCodeAt(pe++),t=String.fromCharCode(e),e===92&&(je.charCodeAt(pe)!==117&&Dt({},Pn,ni),++pe,e=LA("u"),(!e||e==="\\"||!wp(e.charCodeAt(0)))&&Dt({},Pn,ni),t=e);pe<bi&&(e=je.charCodeAt(pe),!!wv(e));)++pe,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),je.charCodeAt(pe)!==117&&Dt({},Pn,ni),++pe,e=LA("u"),(!e||e==="\\"||!wv(e.charCodeAt(0)))&&Dt({},Pn,ni),t+=e);return t}function ofe(){var e,t;for(e=pe++;pe<bi;){if(t=je.charCodeAt(pe),t===92)return pe=e,NP();if(wv(t))++pe;else break}return je.slice(e,pe)}function ufe(){var e,t,n;return e=pe,t=je.charCodeAt(pe)===92?NP():ofe(),t.length===1?n=dc:rfe.hasOwnProperty(t)?n=Vs:t==="null"?n=Kb:t==="true"||t==="false"?n=Zb:n=dc,{type:n,value:t,start:e,end:pe}}function xC(){var e=pe,t=je.charCodeAt(pe),n,i=je[pe],r,a,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++pe,{type:Vi,value:String.fromCharCode(t),start:e,end:pe};default:if(n=je.charCodeAt(pe+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return pe+=2,{type:Vi,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:pe};case 33:case 61:return pe+=2,je.charCodeAt(pe)===61&&++pe,{type:Vi,value:je.slice(e,pe),start:e,end:pe}}}if(o=je.substr(pe,4),o===">>>=")return pe+=4,{type:Vi,value:o,start:e,end:pe};if(a=o.substr(0,3),a===">>>"||a==="<<="||a===">>=")return pe+=3,{type:Vi,value:a,start:e,end:pe};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return pe+=2,{type:Vi,value:r,start:e,end:pe};if(r==="//"&&Dt({},Pn,ni),"<>=!+-*%&|^/".includes(i))return++pe,{type:Vi,value:i,start:e,end:pe};Dt({},Pn,ni)}function sfe(e){let t="";for(;pe<bi&&VF(je[pe]);)t+=je[pe++];return t.length===0&&Dt({},Pn,ni),wp(je.charCodeAt(pe))&&Dt({},Pn,ni),{type:$c,value:parseInt("0x"+t,16),start:e,end:pe}}function lfe(e){let t="0"+je[pe++];for(;pe<bi&&yg(je[pe]);)t+=je[pe++];return(wp(je.charCodeAt(pe))||Jo(je.charCodeAt(pe)))&&Dt({},Pn,ni),{type:$c,value:parseInt(t,8),octal:!0,start:e,end:pe}}function ZM(){var e,t,n;if(n=je[pe],Jb(Jo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=pe,e="",n!=="."){if(e=je[pe++],n=je[pe],e==="0"){if(n==="x"||n==="X")return++pe,sfe(t);if(yg(n))return lfe(t);n&&Jo(n.charCodeAt(0))&&Dt({},Pn,ni)}for(;Jo(je.charCodeAt(pe));)e+=je[pe++];n=je[pe]}if(n==="."){for(e+=je[pe++];Jo(je.charCodeAt(pe));)e+=je[pe++];n=je[pe]}if(n==="e"||n==="E")if(e+=je[pe++],n=je[pe],(n==="+"||n==="-")&&(e+=je[pe++]),Jo(je.charCodeAt(pe)))for(;Jo(je.charCodeAt(pe));)e+=je[pe++];else Dt({},Pn,ni);return wp(je.charCodeAt(pe))&&Dt({},Pn,ni),{type:$c,value:parseFloat(e),start:t,end:pe}}function cfe(){var e="",t,n,i,r,a=!1;for(t=je[pe],Jb(t==="'"||t==='"',"String literal must starts with a quote"),n=pe,++pe;pe<bi;)if(i=je[pe++],i===t){t="";break}else if(i==="\\")if(i=je[pe++],!i||!Ug(i.charCodeAt(0)))switch(i){case"u":case"x":je[pe]==="{"?(++pe,e+=afe()):e+=LA(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:yg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),pe<bi&&yg(je[pe])&&(a=!0,r=r*8+"01234567".indexOf(je[pe++]),"0123".includes(i)&&pe<bi&&yg(je[pe])&&(r=r*8+"01234567".indexOf(je[pe++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&je[pe]===`
`&&++pe;else{if(Ug(i.charCodeAt(0)))break;e+=i}return t!==""&&Dt({},Pn,ni),{type:_p,value:e,octal:a,start:n,end:pe}}function ffe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";Dt({},zA)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{Dt({},zA)}try{return new RegExp(e,t)}catch{return null}}function dfe(){var e,t,n,i,r;for(e=je[pe],Jb(e==="/","Regular expression literal must start with a slash"),t=je[pe++],n=!1,i=!1;pe<bi;)if(e=je[pe++],t+=e,e==="\\")e=je[pe++],Ug(e.charCodeAt(0))&&Dt({},bC),t+=e;else if(Ug(e.charCodeAt(0)))Dt({},bC);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||Dt({},bC),r=t.substr(1,t.length-2),{value:r,literal:t}}function hfe(){var e,t,n;for(t="",n="";pe<bi&&(e=je[pe],!!wv(e.charCodeAt(0)));)++pe,e==="\\"&&pe<bi?Dt({},Pn,ni):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&Dt({},zA,n),{value:n,literal:t}}function gfe(){var e,t,n,i;return Ot=null,OP(),e=pe,t=dfe(),n=hfe(),i=ffe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:pe}}function pfe(e){return e.type===dc||e.type===Vs||e.type===Zb||e.type===Kb}function RP(){if(OP(),pe>=bi)return{type:Ap,start:pe,end:pe};const e=je.charCodeAt(pe);return wp(e)?ufe():e===40||e===41||e===59?xC():e===39||e===34?cfe():e===46?Jo(je.charCodeAt(pe+1))?ZM():xC():Jo(e)?ZM():xC()}function Qi(){const e=Ot;return pe=e.end,Ot=RP(),pe=e.end,e}function BP(){const e=pe;Ot=RP(),pe=e}function mfe(e){const t=new $a(Ice);return t.elements=e,t}function KM(e,t,n){const i=new $a(e==="||"||e==="&&"?Hce:Uce);return i.operator=e,i.left=t,i.right=n,i}function yfe(e,t){const n=new $a(Pce);return n.callee=e,n.arguments=t,n}function vfe(e,t,n){const i=new $a(jce);return i.test=e,i.consequent=t,i.alternate=n,i}function WF(e){const t=new $a($P);return t.name=e,t}function rg(e){const t=new $a(qce);return t.value=e.value,t.raw=je.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function JM(e,t,n){const i=new $a(Gce);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function bfe(e){const t=new $a(Yce);return t.properties=e,t}function eO(e,t,n){const i=new $a(Xce);return i.key=t,i.value=n,i.kind=e,i}function xfe(e,t){const n=new $a(Vce);return n.operator=e,n.argument=t,n.prefix=!0,n}function Dt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,o)=>(Jb(o<i.length,"Message reference must be in range"),i[o]));throw n=new Error(r),n.index=pe,n.description=r,n}function e2(e){e.type===Ap&&Dt(e,Jce),e.type===$c&&Dt(e,Wce),e.type===_p&&Dt(e,Qce),e.type===dc&&Dt(e,Zce),e.type===Vs&&Dt(e,Kce),Dt(e,Pn,e.value)}function xi(e){const t=Qi();(t.type!==Vi||t.value!==e)&&e2(t)}function Vt(e){return Ot.type===Vi&&Ot.value===e}function EC(e){return Ot.type===Vs&&Ot.value===e}function Efe(){const e=[];for(pe=Ot.start,xi("[");!Vt("]");)Vt(",")?(Qi(),e.push(null)):(e.push(hc()),Vt("]")||xi(","));return Qi(),mfe(e)}function tO(){pe=Ot.start;const e=Qi();return e.type===_p||e.type===$c?(e.octal&&Dt(e,MP),rg(e)):WF(e.value)}function Dfe(){var e,t,n,i;if(pe=Ot.start,e=Ot,e.type===dc)return n=tO(),xi(":"),i=hc(),eO("init",n,i);if(e.type===Ap||e.type===Vi)e2(e);else return t=tO(),xi(":"),i=hc(),eO("init",t,i)}function Cfe(){var e=[],t,n,i,r={},a=String;for(pe=Ot.start,xi("{");!Vt("}");)t=Dfe(),t.key.type===$P?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?Dt({},efe):r[i]=!0,e.push(t),Vt("}")||xi(",");return xi("}"),bfe(e)}function Sfe(){xi("(");const e=QF();return xi(")"),e}const Afe={if:1};function _fe(){var e,t,n;if(Vt("("))return Sfe();if(Vt("["))return Efe();if(Vt("{"))return Cfe();if(e=Ot.type,pe=Ot.start,e===dc||Afe[Ot.value])n=WF(Qi().value);else if(e===_p||e===$c)Ot.octal&&Dt(Ot,MP),n=rg(Qi());else{if(e===Vs)throw new Error(Ig);e===Zb?(t=Qi(),t.value=t.value==="true",n=rg(t)):e===Kb?(t=Qi(),t.value=null,n=rg(t)):Vt("/")||Vt("/=")?(n=rg(gfe()),BP()):e2(Qi())}return n}function wfe(){const e=[];if(xi("("),!Vt(")"))for(;pe<bi&&(e.push(hc()),!Vt(")"));)xi(",");return xi(")"),e}function Ffe(){pe=Ot.start;const e=Qi();return pfe(e)||e2(e),WF(e.value)}function kfe(){return xi("."),Ffe()}function Tfe(){xi("[");const e=QF();return xi("]"),e}function $fe(){var e,t,n;for(e=_fe();;)if(Vt("."))n=kfe(),e=JM(".",e,n);else if(Vt("("))t=wfe(),e=yfe(e,t);else if(Vt("["))n=Tfe(),e=JM("[",e,n);else break;return e}function nO(){const e=$fe();if(Ot.type===Vi&&(Vt("++")||Vt("--")))throw new Error(Ig);return e}function cy(){var e,t;if(Ot.type!==Vi&&Ot.type!==Vs)t=nO();else{if(Vt("++")||Vt("--"))throw new Error(Ig);if(Vt("+")||Vt("-")||Vt("~")||Vt("!"))e=Qi(),t=cy(),t=xfe(e.value,t);else{if(EC("delete")||EC("void")||EC("typeof"))throw new Error(Ig);t=nO()}}return t}function iO(e){let t=0;if(e.type!==Vi&&e.type!==Vs)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Mfe(){var e,t,n,i,r,a,o,u,c,l;if(e=Ot,c=cy(),i=Ot,r=iO(i),r===0)return c;for(i.prec=r,Qi(),t=[e,Ot],o=cy(),a=[c,i,o];(r=iO(Ot))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,c=a.pop(),t.pop(),n=KM(u,c,o),a.push(n);i=Qi(),i.prec=r,a.push(i),t.push(Ot),n=cy(),a.push(n)}for(l=a.length-1,n=a[l],t.pop();l>1;)t.pop(),n=KM(a[l-1].value,a[l-2],n),l-=2;return n}function hc(){var e,t,n;return e=Mfe(),Vt("?")&&(Qi(),t=hc(),xi(":"),n=hc(),e=vfe(e,t,n)),e}function QF(){const e=hc();if(Vt(","))throw new Error(Ig);return e}function ZF(e){je=e,pe=0,bi=je.length,Ot=null,BP();const t=QF();if(Ot.type!==Ap)throw new Error("Unexpect token after expression.");return t}var zP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function LP(e){function t(o,u,c,l){let d=e(u[0]);return c&&(d=c+"("+d+")",c.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+o+(l<0?"":l===0?"()":"("+u.slice(1).map(e).join(",")+")")}function n(o,u,c){return l=>t(o,l,u,c)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&me("Missing arguments to clamp function."),o.length>3&&me("Too many arguments to clamp function.");const u=o.map(e);return"Math.max("+u[1]+", Math.min("+u[2]+","+u[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(o){o.length<3&&me("Missing arguments to if function."),o.length>3&&me("Too many arguments to if function.");const u=o.map(e);return"("+u[0]+"?"+u[1]+":"+u[2]+")"}}}function Ofe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function IP(e){e=e||{};const t=e.allowed?Sa(e.allowed):{},n=e.forbidden?Sa(e.forbidden):{},i=e.constants||zP,r=(e.functions||LP)(h),a=e.globalvar,o=e.fieldvar,u=rt(a)?a:v=>`${a}["${v}"]`;let c={},l={},d=0;function h(v){if(ze(v))return v;const b=p[v.type];return b==null&&me("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:Ue(n,b)?me("Illegal identifier: "+b):Ue(i,b)?i[b]:Ue(t,b)?b:(c[b]=1,u(b))},MemberExpression:v=>{const b=!v.computed,x=h(v.object);b&&(d+=1);const D=h(v.property);return x===o&&(l[Ofe(D)]=1),b&&(d-=1),x+(b?"."+D:"["+D+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&me("Illegal callee type: "+v.callee.type);const b=v.callee.name,x=v.arguments,D=Ue(r,b)&&r[b];return D||me("Unrecognized function: "+b),rt(D)?D(x):D+"("+x.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(c),fields:Object.keys(l)};return c={},l={},b}return y.functions=r,y.constants=i,y}const rO=Symbol("vega_selection_getter");function UP(e){return(!e.getter||!e.getter[rO])&&(e.getter=Vr(e.field),e.getter[rO]=!0),e.getter}const KF="intersect",aO="union",Nfe="vlMulti",Rfe="vlPoint",oO="or",Bfe="and",Qa="_vgsid_",Pg=Vr(Qa),zfe="E",Lfe="R",Ife="R-E",Ufe="R-LE",Pfe="R-RE",jfe="E-LT",qfe="E-LTE",Hfe="E-GT",Gfe="E-GTE",Yfe="E-VALID",Xfe="E-ONE",Fv="index:unit";function uO(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,o,u;a<r;++a)if(u=n[a],o=UP(u)(e),Es(o)&&(o=pi(o)),Es(i[a])&&(i[a]=pi(i[a])),be(i[a])&&Es(i[a][0])&&(i[a]=i[a].map(pi)),u.type===zfe){if(be(i[a])?!i[a].includes(o):o!==i[a])return!1}else if(u.type===Lfe){if(!Hf(o,i[a]))return!1}else if(u.type===Pfe){if(!Hf(o,i[a],!0,!1))return!1}else if(u.type===Ife){if(!Hf(o,i[a],!1,!1))return!1}else if(u.type===Ufe){if(!Hf(o,i[a],!1,!0))return!1}else if(u.type===jfe){if(o>=i[a])return!1}else if(u.type===qfe){if(o>i[a])return!1}else if(u.type===Hfe){if(o<=i[a])return!1}else if(u.type===Gfe){if(o<i[a])return!1}else if(u.type===Yfe){if(o===null||isNaN(o))return!1}else if(u.type===Xfe&&i[a].indexOf(o)===-1)return!1;return!0}function Vfe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[Fv]&&i[Fv].value:void 0,o=n===KF,u=r.length,c=0,l,d,h,p,y;c<u;++c)if(l=r[c],a&&o){if(d=d||{},h=d[p=l.unit]||0,h===-1)continue;if(y=uO(t,l),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=uO(t,l),o^y)return y;return u&&o}const PP=Xd(Pg),Wfe=PP.left,Qfe=PP.right;function Zfe(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[Fv]&&i[Fv].value:void 0,o=n===KF,u=Pg(t),c=Wfe(r,u);if(c===r.length||Pg(r[c])!==u)return!1;if(a&&o){if(a.size===1)return!0;if(Qfe(r,u)-c<a.size)return!1}return!0}function Kfe(e,t){return e.map(n=>it(t.fields?{values:t.fields.map(i=>UP(i)(n.datum))}:{[Qa]:Pg(n.datum)},t))}function Jfe(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],o={},u={},c={},l,d,h,p,y,v,b,x,D,S,A=a.length,w=0,_,k;w<A;++w)if(l=a[w],p=l.unit,d=l.fields,h=l.values,d&&h){for(_=0,k=d.length;_<k;++_)y=d[_],b=o[y.field]||(o[y.field]={}),x=b[p]||(b[p]=[]),c[y.field]=D=y.type.charAt(0),S=DC[`${D}_union`],b[p]=S(x,Ie(h[_]));n&&(x=u[p]||(u[p]=[]),x.push(Ie(h).reduce((F,M,N)=>(F[d[N].field]=M,F),{})))}else y=Qa,v=Pg(l),b=o[y]||(o[y]={}),x=b[p]||(b[p]=[]),x.push(v),n&&(x=u[p]||(u[p]=[]),x.push({[Qa]:v}));if(t=t||aO,o[Qa]?o[Qa]=DC[`${Qa}_${t}`](...Object.values(o[Qa])):Object.keys(o).forEach(F=>{o[F]=Object.keys(o[F]).map(M=>o[F][M]).reduce((M,N)=>M===void 0?N:DC[`${c[F]}_${t}`](M,N))}),a=Object.keys(u),n&&a.length){const F=i?Rfe:Nfe;o[F]=t===aO?{[oO]:a.reduce((M,N)=>(M.push(...u[N]),M),[])}:{[Bfe]:a.map(M=>({[oO]:u[M]}))}}return o}var DC={[`${Qa}_union`]:PW,[`${Qa}_intersect`]:IW,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=pi(t[0]),i=pi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=pi(t[0]),i=pi(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const ede=":",tde="@";function JF(e,t,n,i){t[0].type!==fc&&me("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&vt(t).value,o="unit",u=tde+o,c=ede+r;a===KF&&!Ue(i,u)&&(i[u]=n.getData(r).indataRef(n,o)),Ue(i,c)||(i[c]=n.getData(r).tuplesRef())}function jP(e){const t=this.context.data[e];return t?t.values.value:[]}function nde(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function ide(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Wr).insert(t)),1}function rde(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const Fp=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},ade=Fp("format"),qP=Fp("timeFormat"),ode=Fp("utcFormat"),ude=Fp("timeParse"),sde=Fp("utcParse"),T1=new Date(2e3,0,1);function t2(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(T1.setYear(2e3),T1.setMonth(e),T1.setDate(t),qP.call(this,T1,n))}function lde(e){return t2.call(this,e,1,"%B")}function cde(e){return t2.call(this,e,1,"%b")}function fde(e){return t2.call(this,0,2+e,"%A")}function dde(e){return t2.call(this,0,2+e,"%a")}const hde=":",gde="@",IA="%",HP="$";function e5(e,t,n,i){t[0].type!==fc&&me("First argument to data functions must be a string literal.");const r=t[0].value,a=hde+r;if(!Ue(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function pde(e,t,n,i){t[0].type!==fc&&me("First argument to indata must be a string literal."),t[1].type!==fc&&me("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,o=gde+a;Ue(o,i)||(i[o]=n.getData(r).indataRef(n,a))}function Bi(e,t,n,i){if(t[0].type===fc)sO(n,i,t[0].value);else for(e in n.scales)sO(n,i,e)}function sO(e,t,n){const i=IA+n;if(!Ue(t,i))try{t[i]=e.scaleRef(n)}catch{}}function So(e,t){if(ze(e)){const n=t.scales[e];return n&&f$(n.value)?n.value:void 0}else if(rt(e))return f$(e)?e:void 0}function mde(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=Bi,n._range=Bi,n._scale=Bi;const i=r=>"_["+(r.type===fc?Oe(IA+r.value):Oe(IA)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function t5(e,t){return function(n,i,r){if(n){const a=So(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const yde=t5("area",Rae),vde=t5("bounds",Iae),bde=t5("centroid",Gae);function xde(e,t){const n=So(e,(t||this).context);return n&&n.scale()}function Ede(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function n5(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Dde(){return n5(this.context.dataflow,"warn",arguments)}function Cde(){return n5(this.context.dataflow,"info",arguments)}function Sde(){return n5(this.context.dataflow,"debug",arguments)}function CC(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function UA(e){const t=$s(e),n=CC(t.r),i=CC(t.g),r=CC(t.b);return .2126*n+.7152*i+.0722*r}function Ade(e,t){const n=UA(e),i=UA(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function _de(){const e=[].slice.call(arguments);return e.unshift({}),it(...e)}function GP(e,t){return e===t||e!==e&&t!==t?!0:be(e)?be(t)&&e.length===t.length?wde(e,t):!1:Le(e)&&Le(t)?YP(e,t):!1}function wde(e,t){for(let n=0,i=e.length;n<i;++n)if(!GP(e[n],t[n]))return!1;return!0}function YP(e,t){for(const n in e)if(!GP(e[n],t[n]))return!1;return!0}function lO(e){return t=>YP(e,t)}function Fde(e,t,n,i,r,a){const o=this.context.dataflow,u=this.context.data[e],c=u.input,l=o.stamp();let d=u.changes,h,p;if(o._trigger===!1||!(c.value.length||t||i))return 0;if((!d||d.stamp<l)&&(u.changes=d=o.changeset(),d.stamp=l,o.runAfter(()=>{u.modified=!0,o.pulse(c,d).run()},!0,1)),n&&(h=n===!0?Wr:be(n)||cb(n)?n:lO(n),d.remove(h)),t&&d.insert(t),i&&(h=lO(i),c.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function kde(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Tde(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const cO={};function $de(e,t){const n=cO[t]||(cO[t]=Vr(t));return be(e)?e.map(n):n(e)}function n2(e){return be(e)||ArrayBuffer.isView(e)?e:null}function i5(e){return n2(e)||(ze(e)?e:null)}function Mde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return n2(e).join(...n)}function Ode(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return i5(e).indexOf(...n)}function Nde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return i5(e).lastIndexOf(...n)}function Rde(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return i5(e).slice(...n)}function Bde(e,t,n){return rt(n)&&me("Function argument passed to replace."),!ze(t)&&!j_(t)&&me("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function zde(e){return n2(e).slice().reverse()}function Lde(e){return n2(e).slice().sort(Gd)}function Ide(e,t,n){return m3(e||0,t||0,n||0)}function Ude(e,t){const n=So(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Pde(e,t){const n=So(e,(t||this).context);return n?n.copy():void 0}function jde(e,t){const n=So(e,(t||this).context);return n?n.domain():[]}function qde(e,t,n){const i=So(e,(n||this).context);return i?be(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Hde(e,t){const n=So(e,(t||this).context);return n&&n.range?n.range():[]}function Gde(e,t,n){const i=So(e,(n||this).context);return i?i(t):void 0}function Yde(e,t,n,i,r){e=So(e,(r||this).context);const a=zL(t,n);let o=e.domain(),u=o[0],c=vt(o),l=Ei;return c-u?l=AL(e,u,c):e=(e.interpolator?At("sequential")().interpolator(e.interpolator()):At("linear")().interpolate(e.interpolate()).range(e.range())).domain([u=0,c=1]),e.ticks&&(o=e.ticks(+i||15),u!==o[0]&&o.unshift(u),c!==vt(o)&&o.push(c)),o.forEach(d=>a.stop(l(d),e(d))),a}function Xde(e,t,n){const i=So(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Vde(e){let t=null;return function(n){return n?$g(n,t=t||vd(e)):e}}const XP=e=>e.data;function VP(e,t){const n=jP.call(t,e);return n.root&&n.root.lookup||{}}function Wde(e,t,n){const i=VP(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(XP):void 0}function Qde(e,t){const n=VP(e,this)[t];return n?n.ancestors().map(XP):void 0}const WP=()=>typeof window<"u"&&window||null;function Zde(){const e=WP();return e?e.screen:{}}function Kde(){const e=WP();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function Jde(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function QP(e,t,n){if(!e)return[];const[i,r]=e,a=new Cn().set(i[0],i[1],r[0],r[1]),o=n||this.context.dataflow.scenegraph().root;return OI(o,a,ehe(t))}function ehe(e){let t=null;if(e){const n=Ie(e.marktype),i=Ie(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function the(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Ie(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function nhe(e){return Ie(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function ihe(e,t,n){const{x:i,y:r,mark:a}=n,o=new Cn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[c,l]of t)c<o.x1&&(o.x1=c),c>o.x2&&(o.x2=c),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(i,r),QP([[o.x1,o.y1],[o.x2,o.y2]],e,a).filter(c=>rhe(c.x,c.y,t))}function rhe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[o,u]=n[a],[c,l]=n[r];l>t!=u>t&&e<(o-c)*(t-l)/(u-l)+c&&i++}return i&1}const jg={random(){return Zr()},cumulativeNormal:pb,cumulativeLogNormal:mw,cumulativeUniform:xw,densityNormal:fw,densityLogNormal:pw,densityUniform:bw,quantileNormal:mb,quantileLogNormal:yw,quantileUniform:Ew,sampleNormal:gb,sampleLogNormal:gw,sampleUniform:vw,isArray:be,isBoolean:qs,isDate:Es,isDefined(e){return e!==void 0},isNumber:Ct,isObject:Le,isRegExp:j_,isString:ze,isTuple:cb,isValid(e){return e!=null&&e===e},toBoolean:H_,toDate(e){return G_(e)},toNumber:pi,toString:Y_,indexof:Ode,join:Mde,lastindexof:Nde,replace:Bde,reverse:zde,sort:Lde,slice:Rde,flush:iR,lerp:aR,merge:_de,pad:sR,peek:vt,pluck:$de,span:tp,inrange:Hf,truncate:lR,rgb:$s,lab:Ny,hcl:Ry,hsl:My,luminance:UA,contrast:Ade,sequence:vr,format:ade,utcFormat:ode,utcParse:sde,utcOffset:jR,utcSequence:GR,timeFormat:qP,timeParse:ude,timeOffset:PR,timeSequence:HR,timeUnitSpecifier:TR,monthFormat:lde,monthAbbrevFormat:cde,dayFormat:fde,dayAbbrevFormat:dde,quarter:JN,utcquarter:eR,week:MR,utcweek:RR,dayofyear:$R,utcdayofyear:NR,warn:Dde,info:Cde,debug:Sde,extent(e){return so(e)},inScope:Ede,intersect:QP,clampRange:tR,pinchDistance:kde,pinchAngle:Tde,screen:Zde,containerSize:Jde,windowSize:Kde,bandspace:Ide,setdata:ide,pathShape:Vde,panLinear:WN,panLog:QN,panPow:ZN,panSymlog:KN,zoomLinear:z_,zoomLog:L_,zoomPow:by,zoomSymlog:I_,encode:rde,modify:Fde,lassoAppend:the,lassoPath:nhe,intersectLasso:ihe},ahe=["view","item","group","xy","x","y"],ohe="event.vega.",ZP="this.",r5={},KP={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${Oe(HP+e)}]`,functions:uhe,constants:zP,visitors:r5},PA=IP(KP);function uhe(e){const t=LP(e);ahe.forEach(n=>t[n]=ohe+n);for(const n in jg)t[n]=ZP+n;return it(t,mde(e,jg,r5)),t}function bn(e,t,n){return arguments.length===1?jg[e]:(jg[e]=t,n&&(r5[e]=n),PA&&(PA.functions[e]=ZP+e),this)}bn("bandwidth",Ude,Bi);bn("copy",Pde,Bi);bn("domain",jde,Bi);bn("range",Hde,Bi);bn("invert",qde,Bi);bn("scale",Gde,Bi);bn("gradient",Yde,Bi);bn("geoArea",yde,Bi);bn("geoBounds",vde,Bi);bn("geoCentroid",bde,Bi);bn("geoShape",Xde,Bi);bn("geoScale",xde,Bi);bn("indata",nde,pde);bn("data",jP,e5);bn("treePath",Wde,e5);bn("treeAncestors",Qde,e5);bn("vlSelectionTest",Vfe,JF);bn("vlSelectionIdTest",Zfe,JF);bn("vlSelectionResolve",Jfe,JF);bn("vlSelectionTuples",Kfe);function go(e,t){const n={};let i;try{e=ze(e)?e:Oe(e)+"",i=ZF(e)}catch{me("Expression parse error: "+e)}i.visit(a=>{if(a.type!==TP)return;const o=a.callee.name,u=KP.visitors[o];u&&u(o,a.arguments,t,n)});const r=PA(i);return r.globals.forEach(a=>{const o=HP+a;!Ue(n,o)&&t.getSignal(a)&&(n[o]=t.signalRef(a))}),{$expr:it({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function she(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const lhe=Sa(["rule"]),fO=Sa(["group","image","rect"]);function che(e,t){let n="";return lhe[t]||(e.x2&&(e.x?(fO[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(fO[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function a5(e){return(e+"").toLowerCase()}function fhe(e){return a5(e)==="operator"}function dhe(e){return a5(e)==="collect"}function w0(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function hhe(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var ghe={operator:(e,t)=>w0(e,["_"],t.code),parameter:(e,t)=>w0(e,["datum","_"],t.code),event:(e,t)=>w0(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return w0(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const o="o["+Oe(a)+"]";r+=`$=${i[a].code};if(${o}!==$)${o}=$,m=1;`}return r+=che(i,n),r+="return m;",w0(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(Oe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,o)=>{const u=t[o];let c,l;return a.path?(c=`a${a.path}`,l=`b${a.path}`):((n=n||{})["f"+o]=a,c=`this.f${o}(a)`,l=`this.f${o}(b)`),hhe(c,l,-u,u)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function phe(e){const t=this;fhe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function mhe(e){const t=this;if(e.params){const n=t.get(e.id);n||me("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function yhe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=be(r)?r.map(a=>dO(a,n,t)):dO(r,n,t)}return t}function dO(e,t,n){if(!e||!Le(e))return e;for(let i=0,r=hO.length,a;i<r;++i)if(a=hO[i],Ue(e,a.key))return a.parse(e,t,n);return e}var hO=[{key:"$ref",parse:vhe},{key:"$key",parse:xhe},{key:"$expr",parse:bhe},{key:"$field",parse:Ehe},{key:"$encode",parse:Che},{key:"$compare",parse:Dhe},{key:"$context",parse:She},{key:"$subflow",parse:Ahe},{key:"$tupleid",parse:_he}];function vhe(e,t){return t.get(e.$ref)||me("Operator not defined: "+e.$ref)}function bhe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=ar(t.parameterExpression(e.$expr),e.$fields))}function xhe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=q_(e.$key,e.$flat,t.expr.codegen))}function Ehe(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Vr(e.$field,e.$name,t.expr.codegen))}function Dhe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=Ie(e.$compare).map(r=>r&&r.$tupleid?Ye:r);return t.fn[n]||(t.fn[n]=U_(i,e.$order,t.expr.codegen))}function Che(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=ar(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function She(e,t){return t}function Ahe(e,t){const n=e.$subflow;return function(i,r,a){const o=t.fork().parse(n),u=o.get(n.operators[0].id),c=o.signals.parent;return c&&c.set(a),u.detachSubflow=()=>t.detach(o),u}}function _he(){return Ye}function whe(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&me("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Fhe(e){var t=this,n=Le(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,o=void 0;i||me("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(o=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,o)}const khe={skip:!0};function The(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const o=t.signals[a];e.signals(a,o)&&(i[a]=o.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const o=t.data[a];e.data(a,o)&&(r[a]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function $he(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],khe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Wr).insert(i[a]))}),(e.subcontext||[]).forEach((a,o)=>{const u=t.subcontext[o];u&&u.setState(a)})}function JP(e,t,n,i){return new ej(e,t,n,i)}function ej(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||ghe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function gO(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}ej.prototype=gO.prototype={fork(){const e=new gO(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),dhe(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const o=n.data[a]||(n.data[a]={});e.data[a].forEach(u=>o[u]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[a5(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:she,parseOperator:phe,parseOperatorParameters:mhe,parseParameters:yhe,parseStream:whe,parseUpdate:Fhe,getState:The,setState:$he};function Mhe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),tj(t,e.description()))}function tj(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Ohe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const SC="default";function Nhe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:SC,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?ze(r)?r:r.user:SC,o=i.item&&i.item.cursor||null;return r&&a===r.user&&o==r.item?r:{user:a,item:o}}),e.add(null,function(n){let i=n.cursor,r=this.value;return ze(i)||(r=i.item,i=i.user),jA(e,i&&i!==SC?i:r||i),r},{cursor:t})}function jA(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function kv(e,t){var n=e._runtime.data;return Ue(n,t)||me("Unrecognized data set: "+t),n[t]}function Rhe(e,t){return arguments.length<2?kv(this,e).values.value:i2.call(this,e,Fc().remove(Wr).insert(t))}function i2(e,t){vB(t)||me("Second argument to changes must be a changeset.");const n=kv(this,e);return n.modified=!0,this.pulse(n.input,t)}function Bhe(e,t){return i2.call(this,e,Fc().insert(t))}function zhe(e,t){return i2.call(this,e,Fc().remove(t))}function nj(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function ij(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function r2(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Lhe(e){var t=r2(e),n=nj(e),i=ij(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function Ihe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,o,u;return r&&(u=r2(e),o=t.changedTouches?t.changedTouches[0]:t,a=qb(o,r),a[0]-=u[0],a[1]-=u[1]),t.dataflow=e,t.item=n,t.vega=Uhe(e,n,a),t}function Uhe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(o){var u=i,c;if(o){for(c=t;c;c=c.mark.group)if(c.mark.name===o){u=c;break}}return u&&u.mark&&u.mark.interactive?u:{}}function a(o){if(!o)return n;ze(o)&&(o=r(o));const u=n.slice();for(;o;)u[0]-=o.x||0,u[1]-=o.y||0,o=o.mark&&o.mark.group;return u}return{view:Di(e),item:Di(t||{}),group:r,xy:a,x:o=>a(o)[0],y:o=>a(o)[1]}}const pO="view",Phe="timer",jhe="window",qhe={trap:!1};function Hhe(e){const t=it({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{be(i[a])&&(i[a]=Sa(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function rj(e,t,n,i){e._eventListeners.push({type:n,sources:Ie(t),handler:i})}function Ghe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function $1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||Le(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Yhe(e,t,n){var i=this,r=new hb(n),a=function(l,d){i.runAsync(null,()=>{e===pO&&Ghe(i,t)&&l.preventDefault(),r.receive(Ihe(i,l,d))})},o;if(e===Phe)$1(i,"timer",t)&&i.timer(a,t);else if(e===pO)$1(i,"view",t)&&i.addEventListener(t,a,qhe);else if(e===jhe?$1(i,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&$1(i,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)i.warn("Can not resolve event source: "+e);else{for(var u=0,c=o.length;u<c;++u)o[u].addEventListener(t,a);rj(i,o,t,a)}return r}function mO(e){return e.item}function yO(e){return e.item.mark.source}function vO(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Xhe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",mO),yO,vO(e)),this.on(this.events("view","pointerout",mO),yO,vO(t)),this}function Vhe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,o,u,c;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(o=i[r],a=o.sources.length;--a>=0;)o.sources[a].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)c=n[r].type,u=n[r].handler,this._handler.off(c,u);return this}function Dr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Whe="vega-bind",Qhe="vega-bind-name",Zhe="vega-bind-radio";function Khe(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,o)})}},i.debounce&&(r.update=P_(i.debounce,r.update))),(i.input==null&&i.element?Jhe:t0e)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function Jhe(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),rj(i,t,r,a),e.set=o=>{t.value=o,t.dispatchEvent(e0e(r))}}function e0e(e){return typeof Event<"u"?new Event(e):{type:e}}function t0e(e,t,n,i){const r=i.signal(n.signal),a=Dr("div",{class:Whe}),o=n.input==="radio"?a:a.appendChild(Dr("label"));o.appendChild(Dr("span",{class:Qhe},n.name||n.signal)),t.appendChild(a);let u=n0e;switch(n.input){case"checkbox":u=i0e;break;case"select":u=r0e;break;case"radio":u=a0e;break;case"range":u=o0e;break}u(e,o,n,r)}function n0e(e,t,n,i){const r=Dr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function i0e(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=Dr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=o=>a.checked=!!o||null}function r0e(e,t,n,i){const r=Dr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((o,u)=>{const c={value:o};Tv(o,i)&&(c.selected=!0),r.appendChild(Dr("option",c,(a[u]||o)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=o=>{for(let u=0,c=n.options.length;u<c;++u)if(Tv(n.options[u],o)){r.selectedIndex=u;return}}}function a0e(e,t,n,i){const r=Dr("span",{class:Zhe}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((o,u)=>{const c={type:"radio",name:n.signal,value:o};Tv(o,i)&&(c.checked=!0);const l=Dr("input",c);l.addEventListener("change",()=>e.update(o));const d=Dr("label",{},(a[u]||o)+"");return d.prepend(l),r.appendChild(d),l}),e.set=o=>{const u=e.elements,c=u.length;for(let l=0;l<c;++l)Tv(u[l].value,o)&&(u[l].checked=!0)}}function o0e(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,o=n.step||Fs(a,r,100),u=Dr("input",{type:"range",name:n.signal,min:a,max:r,step:o});u.value=i;const c=Dr("span",{},+i);t.appendChild(u),t.appendChild(c);const l=()=>{c.textContent=u.value,e.update(+u.value)};u.addEventListener("input",l),u.addEventListener("change",l),e.elements=[u],e.set=d=>{u.value=d,c.textContent=d}}function Tv(e,t){return e===t||e+""==t+""}function aj(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,nj(e),ij(e),r2(e),r,a).background(e.background())}function o5(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function u0e(e,t,n,i){const r=new i(e.loader(),o5(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,r2(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function s0e(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Hb(i);e=n._el=e?AC(n,e,!0):null,Mhe(n),a||n.error("Unrecognized renderer type: "+i);const o=a.handler||xp,u=e?a.renderer:a.headless;return n._renderer=u?aj(n,n._renderer,e,u):null,n._handler=u0e(n,n._handler,e,o),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=AC(n,t,!0):e.appendChild(Dr("form",{class:"vega-bindings"})),n._bind.forEach(c=>{c.param.element&&r!=="container"&&(c.element=AC(n,c.param.element,!!c.param.input))}),n._bind.forEach(c=>{Khe(n,c.element||t,c)})),n}function AC(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const F0=e=>+e||0,l0e=e=>({top:e,bottom:e,left:e,right:e});function bO(e){return Le(e)?{top:F0(e.top),bottom:F0(e.bottom),left:F0(e.left),right:F0(e.right)}:l0e(F0(e))}async function u5(e,t,n,i){const r=Hb(t),a=r&&r.headless;return a||me("Unrecognized renderer type: "+t),await e.runAsync(),aj(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function c0e(e,t){e!==ps.Canvas&&e!==ps.SVG&&e!==ps.PNG&&me("Unrecognized image type: "+e);const n=await u5(this,e,t);return e===ps.SVG?f0e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function f0e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function d0e(e,t){return(await u5(this,ps.Canvas,e,t)).canvas()}async function h0e(e){return(await u5(this,ps.SVG,e)).svg()}function g0e(e,t,n){return JP(e,dd,jg,n).parse(t)}function p0e(e){var t=this._runtime.scales;return Ue(t,e)||me("Unrecognized scale or projection: "+e),t[e].value}var oj="width",uj="height",s5="padding",xO={skip:!0};function sj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===s5?i.left+i.right:0)}function lj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===s5?i.top+i.bottom:0)}function m0e(e){var t=e._signals,n=t[oj],i=t[uj],r=t[s5];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,u=>{e._width=u.size,e._viewWidth=sj(e,u.size),a()},{size:n}),e._resizeHeight=e.add(null,u=>{e._height=u.size,e._viewHeight=lj(e,u.size),a()},{size:i});const o=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,o.rank=r.rank+1}function y0e(e,t,n,i,r,a){this.runAfter(o=>{let u=0;o._autosize=0,o.width()!==n&&(u=1,o.signal(oj,n,xO),o._resizeWidth.skip(!0)),o.height()!==i&&(u=1,o.signal(uj,i,xO),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==r[0]||o._origin[1]!==r[1])&&(o._resize=1,o._origin=r),u&&o.run("enter"),a&&o.runAfter(c=>c.resize())},!1,1)}function v0e(e){return this._runtime.getState(e||{data:b0e,signals:x0e,recurse:!0})}function b0e(e,t){return t.modified&&be(t.input.value)&&!e.startsWith("_:vega:_")}function x0e(e,t){return!(e==="parent"||t instanceof dd.proxy)}function E0e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function D0e(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Yue(n,t))}function C0e(e,t,n,i){const r=e.element();r&&r.setAttribute("title",S0e(i))}function S0e(e){return e==null?"":be(e)?cj(e):Le(e)&&!Es(e)?A0e(e):e+""}function A0e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(be(n)?cj(n):fj(n))}).join(`
`)}function cj(e){return"["+e.map(fj).join(", ")+"]"}function fj(e){return be(e)?"[]":Le(e)&&!Es(e)?"{}":e}function _0e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function dj(e,t){const n=this;if(t=t||{},Zf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=it({},e.locale,t.locale);n.locale(sB(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||ps.Canvas,n._scenegraph=new oI;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||C0e,n._redraw=!0,n._handler=new xp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Hhe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=g0e(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:it({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=sj(n,n._width),n._viewHeight=lj(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,m0e(n),Ohe(n),Nhe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function M1(e,t){return Ue(e._signals,t)?e._signals[t]:me("Unrecognized signal name: "+Oe(t))}function hj(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function EO(e,t,n,i){let r=hj(n,i);return r||(r=o5(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function DO(e,t,n){const i=hj(t,n);return i&&t._targets.remove(i),e}Re(dj,Zf,{async evaluate(e,t,n){if(await Zf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Lhe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&X1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&tj(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=M1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",bO(e)):bO(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Hb(e)||me("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Zf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(M1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:y0e,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=o5(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return EO(this,e,M1(this,e),t)},removeSignalListener(e,t){return DO(this,M1(this,e),t)},addDataListener(e,t){return EO(this,e,kv(this,e).values,t)},removeDataListener(e,t){return DO(this,kv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=jA(this,null);this._globalCursor=!!e,t&&jA(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:D0e,events:Yhe,finalize:Vhe,hover:Xhe,data:Rhe,change:i2,insert:Bhe,remove:zhe,scale:p0e,initialize:s0e,toImageURL:c0e,toCanvas:d0e,toSVG:h0e,getState:v0e,setState:E0e,_watchPixelRatio:_0e});const w0e="view",$v="[",Mv="]",gj="{",pj="}",F0e=":",mj=",",k0e="@",T0e=">",$0e=/[[\]{}]/,M0e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let yj,vj;function Ws(e,t,n){return yj=t||w0e,vj=n||M0e,bj(e.trim()).map(qA)}function O0e(e){return vj[e]}function vg(e,t,n,i,r){const a=e.length;let o=0,u;for(;t<a;++t){if(u=e[t],!o&&u===n)return t;r&&r.includes(u)?--o:i&&i.includes(u)&&++o}return t}function bj(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=vg(e,r,mj,$v+gj,Mv+pj),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function qA(e){return e[0]==="["?N0e(e):R0e(e)}function N0e(e){const t=e.length;let n=1,i;if(n=vg(e,n,Mv,$v,Mv),n===t)throw"Empty between selector: "+e;if(i=bj(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==T0e)throw"Expected '>' after between selector: "+e;i=i.map(qA);const r=qA(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function R0e(e){const t={source:yj},n=[];let i=[0,0],r=0,a=0,o=e.length,u=0,c,l;if(e[o-1]===pj){if(u=e.lastIndexOf(gj),u>=0){try{i=B0e(e.substring(u+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,u).trim(),o=e.length}else throw"Unmatched right brace: "+e;u=0}if(!o)throw e;if(e[0]===k0e&&(r=++u),c=vg(e,u,F0e),c<o&&(n.push(e.substring(a,c).trim()),a=u=++c),u=vg(e,u,$v),u===o)n.push(e.substring(a,o).trim());else if(n.push(e.substring(a,u).trim()),l=[],a=++u,a===o)throw"Unmatched left bracket: "+e;for(;u<o;){if(u=vg(e,u,Mv),u===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(a,u).trim()),u<o-1&&e[++u]!==$v)throw"Expected left bracket: "+e;a=++u}if(!(o=n.length)||$0e.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],r?t.markname=n[0].slice(1):O0e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function B0e(e){const t=e.split(mj);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function z0e(e){return Le(e)?e:{type:e||"pad"}}const k0=e=>+e||0,L0e=e=>({top:e,bottom:e,left:e,right:e});function I0e(e){return Le(e)?e.signal?e:{top:k0(e.top),bottom:k0(e.bottom),left:k0(e.left),right:k0(e.right)}:L0e(k0(e))}const jn=e=>Le(e)&&!be(e)?it({},e):{value:e};function CO(e,t,n,i){return n!=null?(Le(n)&&!be(n)||be(n)&&n.length&&Le(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function ri(e,t,n){for(const i in t)CO(e,i,t[i]);for(const i in n)CO(e,i,n[i],"update")}function ih(e,t,n){for(const i in t)n&&Ue(n,i)||(e[i]=it(e[i]||{},t[i]));return e}function jf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const l5="mark",c5="frame",f5="scope",U0e="axis",P0e="axis-domain",j0e="axis-grid",q0e="axis-label",H0e="axis-tick",G0e="axis-title",Y0e="legend",X0e="legend-band",V0e="legend-entry",W0e="legend-gradient",xj="legend-label",Q0e="legend-symbol",Z0e="legend-title",K0e="title",J0e="title-text",ege="title-subtitle";function tge(e,t,n,i,r){const a={},o={};let u,c,l,d;c="lineBreak",t==="text"&&r[c]!=null&&!jf(c,e)&&_C(a,c,r[c]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===c5?r.group:n===l5?it({},r.mark,r[t]):null;for(c in d)l=jf(c,e)||(c==="fill"||c==="stroke")&&(jf("fill",e)||jf("stroke",e)),l||_C(a,c,d[c]);Ie(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)jf(y,e)||_C(a,y,p[y])}),e=it({},e);for(c in a)d=a[c],d.signal?(u=u||{})[c]=d:o[c]=d;return e.enter=it(o,e.enter),u&&(e.update=it(u,e.update)),e}function _C(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Ej=e=>ze(e)?Oe(e):e.signal?`(${e.signal})`:Dj(e);function a2(e){if(e.gradient!=null)return ige(e);let t=e.signal?`(${e.signal})`:e.color?nge(e.color):e.field!=null?Dj(e.field):e.value!==void 0?Oe(e.value):void 0;return e.scale!=null&&(t=rge(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${fy(e.exponent)})`),e.mult!=null&&(t+=`*${fy(e.mult)}`),e.offset!=null&&(t+=`+${fy(e.offset)}`),e.round&&(t=`round(${t})`),t}const O1=(e,t,n,i)=>`(${e}(${[t,n,i].map(a2).join(",")})+'')`;function nge(e){return e.c?O1("hcl",e.h,e.c,e.l):e.h||e.s?O1("hsl",e.h,e.s,e.l):e.l||e.a?O1("lab",e.l,e.a,e.b):e.r||e.g||e.b?O1("rgb",e.r,e.g,e.b):null}function ige(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:Oe(n));for(;t.length&&vt(t)==null;)t.pop();return t.unshift(Ej(e.gradient)),`gradient(${t.join(",")})`}function fy(e){return Le(e)?"("+a2(e)+")":e}function Dj(e){return Cj(Le(e)?e:{datum:e})}function Cj(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):me("Invalid field reference: "+Oe(e));return e.signal||(i=ze(i)?vo(i).map(Oe).join("]["):Cj(i)),t+"["+i+"]"}function rge(e,t){const n=Ej(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+fy(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function age(e){let t="";return e.forEach(n=>{const i=a2(n);t+=n.test?`(${n.test})?${i}:`:i}),vt(t)===":"&&(t+="null"),t}function Sj(e,t,n,i,r,a){const o={};a=a||{},a.encoders={$encode:o},e=tge(e,t,n,i,r.config);for(const u in e)o[u]=oge(e[u],t,a,r);return a}function oge(e,t,n,i){const r={},a={};for(const o in e)e[o]!=null&&(r[o]=sge(uge(e[o]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function uge(e){return be(e)?age(e):a2(e)}function sge(e,t,n,i){const r=go(e,t);return r.$fields.forEach(a=>i[a]=1),it(n,r.$params),r.$expr}const lge="outer",cge=["value","update","init","react","bind"];function SO(e,t){me(e+' for "outer" push: '+Oe(t))}function Aj(e,t){const n=e.name;if(e.push===lge)t.signals[n]||SO("No prior signal definition",n),cge.forEach(i=>{e[i]!==void 0&&SO("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function HA(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function o2(e,t,n,i){return new HA(e,t,n,i)}function Ov(e,t){return o2("operator",e,t)}function Ge(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function qg(e,t){return t?{$field:e,$name:t}:{$field:e}}const GA=qg("key");function AO(e,t){return{$compare:e,$order:t}}function fge(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const dge="ascending",hge="descending";function gge(e){return Le(e)?(e.order===hge?"-":"+")+u2(e.op,e.field):""}function u2(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const d5="scope",YA="view";function Tn(e){return e&&e.signal}function pge(e){return e&&e.expr}function dy(e){if(Tn(e))return!0;if(Le(e)){for(const t in e)if(dy(e[t]))return!0}return!1}function da(e,t){return e??t}function Zl(e){return e&&e.signal||e}const _O="timer";function Hg(e,t){return(e.merge?yge:e.stream?vge:e.type?bge:me("Invalid stream specification: "+Oe(e)))(e,t)}function mge(e){return e===d5?YA:e||YA}function yge(e,t){const n=e.merge.map(r=>Hg(r,t)),i=h5({merge:n},e,t);return t.addStream(i).id}function vge(e,t){const n=Hg(e.stream,t),i=h5({stream:n},e,t);return t.addStream(i).id}function bge(e,t){let n;e.type===_O?(n=t.event(_O,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(mge(e.source),e.type);const i=h5({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function h5(e,t,n){let i=t.between;return i&&(i.length!==2&&me('Stream "between" parameter must have 2 entries: '+Oe(t)),e.between=[Hg(i[0],n),Hg(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(xge(t.marktype,t.markname,t.markrole)),t.source===d5&&i.push("inScope(event.item)"),i.length&&(e.filter=go("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function xge(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Ege={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Dge(e,t,n){const i=e.encode,r={target:n};let a=e.events,o=e.update,u=[];a||me("Signal update missing events specification."),ze(a)&&(a=Ws(a,t.isSubscope()?d5:YA)),a=Ie(a).filter(c=>c.signal||c.scale?(u.push(c),0):1),u.length>1&&(u=[Sge(u)]),a.length&&u.push(a.length>1?{merge:a}:a[0]),i!=null&&(o&&me("Signal encode and update are mutually exclusive."),o="encode(item(),"+Oe(i)+")"),r.update=ze(o)?go(o,t):o.expr!=null?go(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:Ege,$params:{$value:t.signalRef(o.signal)}}:me("Invalid signal update specification."),e.force&&(r.options={force:!0}),u.forEach(c=>t.addUpdate(it(Cge(c,t),r)))}function Cge(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):Hg(e,t)}}function Sge(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Age(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?me("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=go(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Dge(r,t,n.id))}const Ut=e=>(t,n,i)=>o2(e,n,t||void 0,i),_j=Ut("aggregate"),_ge=Ut("axisticks"),wj=Ut("bound"),Ma=Ut("collect"),wO=Ut("compare"),wge=Ut("datajoin"),Fj=Ut("encode"),Fge=Ut("expression"),kge=Ut("facet"),Tge=Ut("field"),$ge=Ut("key"),Mge=Ut("legendentries"),Oge=Ut("load"),Nge=Ut("mark"),Rge=Ut("multiextent"),Bge=Ut("multivalues"),zge=Ut("overlap"),Lge=Ut("params"),kj=Ut("prefacet"),Ige=Ut("projection"),Uge=Ut("proxy"),Pge=Ut("relay"),Tj=Ut("render"),jge=Ut("scale"),Mc=Ut("sieve"),qge=Ut("sortitems"),$j=Ut("viewlayout"),Hge=Ut("values");let Gge=0;const Mj={min:"min",max:"max",count:"sum"};function Yge(e,t){const n=e.type||"linear";bL(n)||me("Unrecognized scale type: "+Oe(n)),t.addScale(e.name,{type:n,domain:void 0})}function Xge(e,t){const n=t.getScale(e.name).params;let i;n.domain=Oj(e.domain,e,t),e.range!=null&&(n.range=Rj(e,t,n)),e.interpolate!=null&&ipe(e.interpolate,n),e.nice!=null&&(n.nice=npe(e.nice,t)),e.bins!=null&&(n.bins=tpe(e.bins,t));for(i in e)Ue(n,i)||i==="name"||(n[i]=Hr(e[i],t))}function Hr(e,t){return Le(e)?e.signal?t.signalRef(e.signal):me("Unsupported object: "+Oe(e)):e}function hy(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Hr(n,t))}function s2(e){me("Can not find data set: "+Oe(e))}function Oj(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&me("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(be(e)?Vge:e.fields?Qge:Wge)(e,t,n)}function Vge(e,t,n){return e.map(i=>Hr(i,n))}function Wge(e,t,n){const i=n.getData(e.data);return i||s2(e.data),yd(t.type)?i.valuesRef(n,e.field,Nj(e.sort,!1)):DL(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function Qge(e,t,n){const i=e.data,r=e.fields.reduce((a,o)=>(o=ze(o)?{data:i,field:o}:be(o)||o.signal?Zge(o,n):o,a.push(o),a),[]);return(yd(t.type)?Kge:DL(t.type)?Jge:epe)(e,n,r)}function Zge(e,t){const n="_:vega:_"+Gge++,i=Ma({});if(be(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+Oe(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,Mc({})]),{data:n,field:"data"}}function Kge(e,t,n){const i=Nj(e.sort,!0);let r,a;const o=n.map(l=>{const d=t.getData(l.data);return d||s2(l.data),d.countsRef(t,l.field,i)}),u={groupby:GA,pulse:o};i&&(r=i.op||"count",a=i.field?u2(r,i.field):"count",u.ops=[Mj[r]],u.fields=[t.fieldRef(a)],u.as=[a]),r=t.add(_j(u));const c=t.add(Ma({pulse:Ge(r)}));return a=t.add(Hge({field:GA,sort:t.sortRef(i),pulse:Ge(c)})),Ge(a)}function Nj(e,t){return e&&(!e.field&&!e.op?Le(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?me("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!Mj[e.op]&&me("Multiple domain scales can not be sorted using "+e.op)),e}function Jge(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||s2(r.data),a.domainRef(t,r.field)});return Ge(t.add(Bge({values:i})))}function epe(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||s2(r.data),a.extentRef(t,r.field)});return Ge(t.add(Rge({extents:i})))}function tpe(e,t){return e.signal||be(e)?hy(e,t):t.objectProperty(e)}function npe(e,t){return e.signal?t.signalRef(e.signal):Le(e)?{interval:Hr(e.interval),step:Hr(e.step)}:Hr(e)}function ipe(e,t){t.interpolate=Hr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Hr(e.gamma))}function Rj(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(ze(r)){if(i&&Ue(i,r))return e=it({},e,{range:i[r]}),Rj(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=yd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:me("Unrecognized scale range value: "+Oe(r))}else if(r.scheme){n.scheme=be(r.scheme)?hy(r.scheme,t):Hr(r.scheme,t),r.extent&&(n.schemeExtent=hy(r.extent,t)),r.count&&(n.schemeCount=Hr(r.count,t));return}else if(r.step){n.rangeStep=Hr(r.step,t);return}else{if(yd(e.type)&&!be(r))return Oj(r,e,t);be(r)||me("Unsupported range type: "+Oe(r))}return r.map(a=>(be(a)?hy:Hr)(a,t))}function rpe(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=XA(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=XA(n[r],r,t));t.addProjection(e.name,i)}function XA(e,t,n){return be(e)?e.map(i=>XA(i,t,n)):Le(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:me("Unsupported parameter object: "+Oe(e)):e}const Oa="top",rh="left",ah="right",Bs="bottom",Bj="center",ape="vertical",ope="start",upe="middle",spe="end",VA="index",g5="label",lpe="offset",_d="perc",cpe="perc2",Yr="value",kp="guide-label",p5="guide-title",fpe="group-title",dpe="group-subtitle",FO="symbol",gy="gradient",WA="discrete",QA="size",hpe="shape",gpe="fill",ppe="stroke",mpe="strokeWidth",ype="strokeDash",vpe="opacity",m5=[QA,hpe,gpe,ppe,mpe,ype,vpe],Tp={name:1,style:1,interactive:1},xt={value:0},Xr={value:1},l2="group",zj="rect",y5="rule",bpe="symbol",Oc="text";function Gg(e){return e.type=l2,e.interactive=e.interactive||!1,e}function or(e,t){const n=(i,r)=>da(e[i],da(t[i],r));return n.isVertical=i=>ape===da(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>da(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>da(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>da(e.columns,da(t.columns,+n.isVertical(!0))),n}function Lj(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function xpe(e,t,n){const i=t.config.style[n];return i&&i[e]}function c2(e,t,n){return`item.anchor === '${ope}' ? ${e} : item.anchor === '${spe}' ? ${t} : ${n}`}const v5=c2(Oe(rh),Oe(ah),Oe(Bj));function Epe(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},Le(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function Ij(e,t){return t?e?Le(e)?Object.assign({},e,{offset:Ij(e.offset,t)}):{value:e,offset:t}:t:e}function Fr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=ih(e.encode,t,Tp)):e.interactive=!1,e}function Dpe(e,t,n,i){const r=or(e,n),a=r.isVertical(),o=r.gradientThickness(),u=r.gradientLength();let c,l,d,h,p;a?(l=[0,1],d=[0,0],h=o,p=u):(l=[0,0],d=[1,0],h=u,p=o);const y={enter:c={opacity:xt,x:xt,y:xt,width:jn(h),height:jn(p)},update:it({},c,{opacity:Xr,fill:{gradient:t,start:l,stop:d}}),exit:{opacity:xt}};return ri(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),Fr({type:zj,role:W0e,encode:y},i)}function Cpe(e,t,n,i,r){const a=or(e,n),o=a.isVertical(),u=a.gradientThickness(),c=a.gradientLength();let l,d,h,p,y="";o?(l="y",h="y2",d="x",p="width",y="1-"):(l="x",h="x2",d="y",p="height");const v={opacity:xt,fill:{scale:t,field:Yr}};v[l]={signal:y+"datum."+_d,mult:c},v[d]=xt,v[h]={signal:y+"datum."+cpe,mult:c},v[p]=jn(u);const b={enter:v,update:it({},v,{opacity:Xr}),exit:{opacity:xt}};return ri(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),Fr({type:zj,role:X0e,key:Yr,from:r,encode:b},i)}const Spe=`datum.${_d}<=0?"${rh}":datum.${_d}>=1?"${ah}":"${Bj}"`,Ape=`datum.${_d}<=0?"${Bs}":datum.${_d}>=1?"${Oa}":"${upe}"`;function kO(e,t,n,i){const r=or(e,t),a=r.isVertical(),o=jn(r.gradientThickness()),u=r.gradientLength();let c=r("labelOverlap"),l,d,h,p,y="";const v={enter:l={opacity:xt},update:d={opacity:Xr,text:{field:g5}},exit:{opacity:xt}};return ri(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:da(e.labelLimit,t.gradientLabelLimit)}),a?(l.align={value:"left"},l.baseline=d.baseline={signal:Ape},h="y",p="x",y="1-"):(l.align=d.align={signal:Spe},l.baseline={value:"top"},h="x",p="y"),l[h]=d[h]={signal:y+"datum."+_d,mult:u},l[p]=d[p]=o,o.offset=da(e.labelOffset,t.gradientLabelOffset)||0,c=c?{separation:r("labelSeparation"),method:c,order:"datum."+VA}:void 0,Fr({type:Oc,role:xj,style:kp,key:Yr,from:i,encode:v,overlap:c},n)}function _pe(e,t,n,i,r){const a=or(e,t),o=n.entries,u=!!(o&&o.interactive),c=o?o.name:void 0,l=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${lpe} : datum.${QA}`,y=l?jn(l):{field:QA},v=`datum.${VA}`,b=`max(1, ${r})`;let x,D,S,A,w;y.mult=.5,x={enter:D={opacity:xt,x:{signal:p,mult:.5,offset:d},y},update:S={opacity:Xr,x:D.x,y:D.y},exit:{opacity:xt}};let _=null,k=null;e.fill||(_=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),ri(x,{fill:a("symbolFillColor",_),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),m5.forEach(P=>{e[P]&&(S[P]=D[P]={scale:e[P],field:Yr})});const F=Fr({type:bpe,role:Q0e,key:Yr,from:h,clip:l?!0:void 0,encode:x},n.symbols),M=jn(d);M.offset=a("labelOffset"),x={enter:D={opacity:xt,x:{signal:p,offset:M},y},update:S={opacity:Xr,text:{field:g5},x:D.x,y:D.y},exit:{opacity:xt}},ri(x,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const N=Fr({type:Oc,role:xj,style:kp,key:Yr,from:h,encode:x},n.labels);return x={enter:{noBound:{value:!l},width:xt,height:l?jn(l):xt,opacity:xt},exit:{opacity:xt},update:S={opacity:Xr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,S.row.signal=`${v}%${A}`,S.column.signal=`floor(${v} / ${A})`,w={field:["row",v]}):(S.row.signal=`floor(${v} / ${b})`,S.column.signal=`${v} % ${b}`,w={field:v}),S.column.signal=`(${r})?${S.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:VA}},Gg({role:f5,from:i,encode:ih(x,o,Tp),marks:[F,N],name:c,interactive:u,sort:w})}function wpe(e,t){const n=or(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const b5='item.orient === "left"',x5='item.orient === "right"',f2=`(${b5} || ${x5})`,Fpe=`datum.vgrad && ${f2}`,kpe=c2('"top"','"bottom"','"middle"'),Tpe=c2('"right"','"left"','"center"'),$pe=`datum.vgrad && ${x5} ? (${Tpe}) : (${f2} && !(datum.vgrad && ${b5})) ? "left" : ${v5}`,Mpe=`item._anchor || (${f2} ? "middle" : "start")`,Ope=`${Fpe} ? (${b5} ? -90 : 90) : 0`,Npe=`${f2} ? (datum.vgrad ? (${x5} ? "bottom" : "top") : ${kpe}) : "top"`;function Rpe(e,t,n,i){const r=or(e,t),a={enter:{opacity:xt},update:{opacity:Xr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:xt}};return ri(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:Mpe},angle:{signal:Ope},align:{signal:$pe},baseline:{signal:Npe},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),Fr({type:Oc,role:Z0e,style:p5,from:i,encode:a},n)}function Bpe(e,t){let n;return Le(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+TO(e.path)+")":e.sphere&&(n="geoShape("+TO(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function TO(e){return Le(e)&&e.signal?e.signal:Oe(e)}function Uj(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===l2?f5:t||l5}function zpe(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Uj(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function Lpe(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function E5(e,t){const n=EB(e.type);n||me("Unrecognized transform type: "+Oe(e.type));const i=o2(n.type.toLowerCase(),null,Pj(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Pj(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const o=e.params[a];i[o.name]=Ipe(o,t,n)}return i}function Ipe(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return Upe(e,t,n);if(r===void 0){e.required&&me("Missing required "+Oe(t.type)+" parameter: "+Oe(e.name));return}else{if(i==="param")return Ppe(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!Tn(r)?r.map(a=>$O(e,a,n)):$O(e,r,n)}function $O(e,t,n){const i=e.type;if(Tn(t))return OO(i)?me("Expression references can not be signals."):wC(i)?n.fieldRef(t):NO(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||wC(i);return r&&jpe(t)?n.exprRef(t.expr,t.as):r&&qpe(t)?qg(t.field,t.as):OO(i)?go(t,n):Hpe(i)?Ge(n.getData(t).values):wC(i)?qg(t):NO(i)?n.compareRef(t):t}}function Upe(e,t,n){return ze(t.from)||me('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function Ppe(e,t,n){const i=t[e.name];return e.array?(be(i)||me("Expected an array of sub-parameters. Instead: "+Oe(i)),i.map(r=>MO(e,r,n))):MO(e,i,n)}function MO(e,t,n){const i=e.params.length;let r;for(let o=0;o<i;++o){r=e.params[o];for(const u in r.key)if(r.key[u]!==t[u]){r=null;break}if(r)break}r||me("Unsupported parameter: "+Oe(t));const a=it(Pj(r,t,n),r.key);return Ge(n.add(Lge(a)))}const jpe=e=>e&&e.expr,qpe=e=>e&&e.field,Hpe=e=>e==="data",OO=e=>e==="expr",wC=e=>e==="field",NO=e=>e==="compare";function Gpe(e,t,n){let i,r,a,o,u;return e?(i=e.facet)&&(t||me("Only group marks can be faceted."),i.field!=null?o=u=py(i,n):(e.data?u=Ge(n.getData(e.data).aggregate):(a=E5(it({type:"aggregate",groupby:Ie(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=py(i,n),o=u=Ge(n.add(a))),r=n.keyRef(i.groupby,!0))):o=Ge(n.add(Ma(null,[{}]))),o||(o=py(e,n)),{key:r,pulse:o,parent:u}}function py(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Ge(t.getData(e.data).output)}function gc(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}gc.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],o=null,u=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);u<n;++u)t[u].params.pulse=Ge(t[u-1]),e.add(t[u]),t[u].type==="aggregate"&&(o=t[u]);return new gc(e,a,r,i,o)};function jj(e){return ze(e)?e:null}function RO(e,t,n){const i=u2(n.op,n.field);let r;if(t.ops){for(let a=0,o=t.as.length;a<o;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function T0(e,t,n,i,r,a,o){const u=t[n]||(t[n]={}),c=gge(a);let l=jj(r),d,h;if(l!=null&&(e=t.scope,l=l+(c?"|"+c:""),d=u[l]),!d){const p=a?{field:GA,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Ge(t.output)};c&&(p.sort=e.sortRef(a)),h=e.add(o2(i,void 0,p)),o&&(t.index[r]=h),d=Ge(h),l!=null&&(u[l]=d)}return d}gc.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=jj(t);let o,u,c;return a!=null&&(e=i.scope,o=r[a]),o?n&&n.field&&RO(e,o.agg.params,n):(c={groupby:e.fieldRef(t,"key"),pulse:Ge(i.output)},n&&n.field&&RO(e,c,n),u=e.add(_j(c)),o=e.add(Ma({pulse:Ge(u)})),o={agg:u,ref:Ge(o)},a!=null&&(r[a]=o)),o.ref},tuplesRef(){return Ge(this.values)},extentRef(e,t){return T0(e,this,"extent","extent",t,!1)},domainRef(e,t){return T0(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return T0(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return T0(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return T0(e,this,"indata","tupleindex",t,!0,!0)}};function Ype(e,t,n){const i=e.from.facet,r=i.name,a=py(i,t);let o;i.name||me("Facet must have a name: "+Oe(i)),i.data||me("Facet must reference a data set: "+Oe(i)),i.field?o=t.add(kj({field:t.fieldRef(i.field),pulse:a})):i.groupby?o=t.add(kge({key:t.keyRef(i.groupby),group:Ge(t.proxy(n.parent)),pulse:a})):me("Facet must specify groupby or field: "+Oe(i));const u=t.fork(),c=u.add(Ma()),l=u.add(Mc({pulse:Ge(c)}));u.addData(r,new gc(u,c,c,l)),u.addSignal("parent",null),o.params.subflow={$subflow:u.parse(e).toRuntime()}}function Xpe(e,t,n){const i=t.add(kj({pulse:n.pulse})),r=t.fork();r.add(Mc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function qj(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,o=e.modify,u=e.values,c=t.add(Ov()),l="if("+e.trigger+',modify("'+n+'",'+[r,i,a,o,u].map(h=>h??"null").join(",")+"),0)",d=go(l,t);c.update=d.$expr,c.params=d.$params}function d2(e,t){const n=Uj(e),i=e.type===l2,r=e.from&&e.from.facet,a=e.overlap;let o=e.layout||n===f5||n===c5,u,c,l,d,h,p,y;const v=n===l5||o||r,b=Gpe(e.from,i,t);c=t.add(wge({key:b.key||(e.key?qg(e.key):void 0),pulse:b.pulse,clean:!i}));const x=Ge(c);c=l=t.add(Ma({pulse:x})),c=t.add(Nge({markdef:zpe(e),interactive:Lpe(e.interactive,t),clip:Bpe(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Ge(c)}));const D=Ge(c);c=d=t.add(Fj(Sj(e.encode,e.type,n,e.style,t,{mod:!1,pulse:D}))),c.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const F=E5(k,t),M=F.metadata;(M.generates||M.changes)&&me("Mark transforms should not generate new data."),M.nomod||(d.params.mod=!0),F.params.pulse=Ge(c),t.add(c=F)}),e.sort&&(c=t.add(qge({sort:t.compareRef(e.sort),pulse:Ge(c)})));const S=Ge(c);(r||o)&&(o=t.add($j({layout:t.objectProperty(e.layout),legends:t.legends,mark:D,pulse:S})),p=Ge(o));const A=t.add(wj({mark:D,pulse:p||S}));y=Ge(A),i&&(v&&(u=t.operators,u.pop(),o&&u.pop()),t.pushState(S,p||y,x),r?Ype(e,t,b):v?Xpe(e,t,b):t.parse(e),t.popState(),v&&(o&&u.push(o),u.push(A))),a&&(y=Vpe(a,y,t));const w=t.add(Tj({pulse:y})),_=t.add(Mc({pulse:Ge(w)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new gc(t,l,w,_)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&me("Marks only support modify triggers."),qj(k,t,h)}))}function Vpe(e,t,n){const i=e.method,r=e.bound,a=e.separation,o={separation:Tn(a)?n.signalRef(a.signal):a,method:Tn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),r){const u=r.tolerance;o.boundTolerance=Tn(u)?n.signalRef(u.signal):+u,o.boundScale=n.scaleRef(r.scale),o.boundOrient=r.orient}return Ge(n.add(zge(o)))}function Wpe(e,t){const n=t.config.legend,i=e.encode||{},r=or(e,n),a=i.legend||{},o=a.name||void 0,u=a.interactive,c=a.style,l={};let d=0,h,p,y;m5.forEach(A=>e[A]?(l[A]=e[A],d=d||e[A]):0),d||me("Missing valid scale for legend.");const v=Qpe(e,t.scaleType(d)),b={title:e.title!=null,scales:l,type:v,vgrad:v!=="symbol"&&r.isVertical()},x=Ge(t.add(Ma(null,[b]))),D={enter:{x:{value:0},y:{value:0}}},S=Ge(t.add(Mge(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===gy?(y=[Dpe(e,d,n,i.gradient),kO(e,n,i.labels,S)],p.count=p.count||t.signalRef(`max(2,2*floor((${Zl(r.gradientLength())})/100))`)):v===WA?y=[Cpe(e,d,n,i.gradient,S),kO(e,n,i.labels,S)]:(h=wpe(e,n),y=[_pe(e,n,i,S,Zl(h.columns))],p.size=Jpe(e,t,y[0].marks)),y=[Gg({role:V0e,from:x,encode:D,marks:y,layout:h,interactive:u})],b.title&&y.push(Rpe(e,n,i.title,x)),d2(Gg({role:Y0e,from:x,encode:ih(Kpe(r,e,n),a,Tp),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:o,interactive:u,style:c}),t)}function Qpe(e,t){let n=e.type||FO;return!e.type&&Zpe(e)===1&&(e.fill||e.stroke)&&(n=E3(t)?gy:PS(t)?WA:FO),n!==gy?n:PS(t)?WA:gy}function Zpe(e){return m5.reduce((t,n)=>t+(e[n]?1:0),0)}function Kpe(e,t,n){const i={enter:{},update:{}};return ri(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function Jpe(e,t,n){const i=Zl(BO("size",e,n)),r=Zl(BO("strokeWidth",e,n)),a=Zl(eme(n[1].encode,t,kp));return go(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function BO(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Lj(e,n[0].encode)}function eme(e,t,n){return Lj("fontSize",e)||xpe("fontSize",t,n)}const tme=`item.orient==="${rh}"?-90:item.orient==="${ah}"?90:0`;function nme(e,t){e=ze(e)?{text:e}:e;const n=or(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,o=r.interactive,u=r.style,c=[],l={},d=Ge(t.add(Ma(null,[l])));return c.push(ame(e,n,ime(e),d)),e.subtitle&&c.push(ome(e,n,i.subtitle,d)),d2(Gg({role:K0e,from:d,encode:rme(n,r),marks:c,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:o,style:u}),t)}function ime(e){const t=e.encode;return t&&t.title||it({name:e.name,interactive:e.interactive,style:e.style},t)}function rme(e,t){const n={enter:{},update:{}};return ri(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:v5},angle:{signal:tme},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),ih(n,t,Tp)}function ame(e,t,n,i){const r={value:0},a=e.text,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ri(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Fr({type:Oc,role:J0e,style:fpe,from:i,encode:o},n)}function ome(e,t,n,i){const r={value:0},a=e.subtitle,o={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return ri(o,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Fr({type:Oc,role:ege,style:dpe,from:i,encode:o},n)}function ume(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(E5(i,t))}),e.on&&e.on.forEach(i=>{qj(i,t,e.name)}),t.addDataPipeline(e.name,sme(e,t,n))}function sme(e,t,n){const i=[];let r=null,a=!1,o=!1,u,c,l,d,h;for(e.values?Tn(e.values)||dy(e.format)?(i.push(zO(t,e)),i.push(r=Sl())):i.push(r=Sl({$ingest:e.values,$format:e.format})):e.url?dy(e.url)||dy(e.format)?(i.push(zO(t,e)),i.push(r=Sl())):i.push(r=Sl({$request:e.url,$format:e.format})):e.source&&(r=u=Ie(e.source).map(p=>Ge(t.getData(p).output)),i.push(null)),c=0,l=n.length;c<l;++c)d=n[c],h=d.metadata,!r&&!h.source&&i.push(r=Sl()),i.push(d),h.generates&&(o=!0),h.modifies&&!o&&(a=!0),h.source?r=d:h.changes&&(r=null);return u&&(l=u.length-1,i[0]=Pge({derive:a,pulse:l?u:u[0]}),(a||l)&&i.splice(1,0,Sl())),r||i.push(Sl()),i.push(Mc({})),i}function Sl(e){const t=Ma({},e);return t.metadata={source:!0},t}function zO(e,t){return Oge({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const Hj=e=>e===Bs||e===Oa,h2=(e,t,n)=>Tn(e)?dme(e.signal,t,n):e===rh||e===Oa?t:n,qn=(e,t,n)=>Tn(e)?cme(e.signal,t,n):Hj(e)?t:n,Ea=(e,t,n)=>Tn(e)?fme(e.signal,t,n):Hj(e)?n:t,Gj=(e,t,n)=>Tn(e)?hme(e.signal,t,n):e===Oa?{value:t}:{value:n},lme=(e,t,n)=>Tn(e)?gme(e.signal,t,n):e===ah?{value:t}:{value:n},cme=(e,t,n)=>Yj(`${e} === '${Oa}' || ${e} === '${Bs}'`,t,n),fme=(e,t,n)=>Yj(`${e} !== '${Oa}' && ${e} !== '${Bs}'`,t,n),dme=(e,t,n)=>D5(`${e} === '${rh}' || ${e} === '${Oa}'`,t,n),hme=(e,t,n)=>D5(`${e} === '${Oa}'`,t,n),gme=(e,t,n)=>D5(`${e} === '${ah}'`,t,n),Yj=(e,t,n)=>(t=t!=null?jn(t):t,n=n!=null?jn(n):n,LO(t)&&LO(n)?(t=t?t.signal||Oe(t.value):null,n=n?n.signal||Oe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[it({test:e},t)].concat(n||[])),LO=e=>e==null||Object.keys(e).length===1,D5=(e,t,n)=>({signal:`${e} ? (${Wf(t)}) : (${Wf(n)})`}),pme=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${rh}' ? (${Wf(i)}) : `:"")+(n!=null?`${e} === '${Bs}' ? (${Wf(n)}) : `:"")+(r!=null?`${e} === '${ah}' ? (${Wf(r)}) : `:"")+(t!=null?`${e} === '${Oa}' ? (${Wf(t)}) : `:"")+"(null)"}),Wf=e=>Tn(e)?e.signal:e==null?null:Oe(e),mme=(e,t)=>t===0?0:Tn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},td=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function zf(e,t,n,i){let r;if(t&&Ue(t,e))return t[e];if(Ue(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[p5][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[kp][r]}return null}function IO(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function yme(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,u,c,l;if(Tn(o)){const h=IO([n.axisX,n.axisY]),p=IO([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);u={};for(l of h)u[l]=qn(o,zf(l,n.axisX,r,i),zf(l,n.axisY,r,i));c={};for(l of p)c[l]=pme(o.signal,zf(l,n.axisTop,r,i),zf(l,n.axisBottom,r,i),zf(l,n.axisLeft,r,i),zf(l,n.axisRight,r,i))}else u=o===Oa||o===Bs?n.axisX:n.axisY,c=n["axis"+o[0].toUpperCase()+o.slice(1)];return u||c||a?it({},r,u,c,a):r}function vme(e,t,n,i){const r=or(e,t),a=e.orient;let o,u;const c={enter:o={opacity:xt},update:u={opacity:Xr},exit:{opacity:xt}};ri(c,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const l=UO(e,0),d=UO(e,1);return o.x=u.x=qn(a,l,xt),o.x2=u.x2=qn(a,d),o.y=u.y=Ea(a,l,xt),o.y2=u.y2=Ea(a,d),Fr({type:y5,role:P0e,from:i,encode:c},n)}function UO(e,t){return{scale:e.scale,range:t}}function bme(e,t,n,i,r){const a=or(e,t),o=e.orient,u=e.gridScale,c=h2(o,1,-1),l=xme(e.offset,c);let d,h,p;const y={enter:d={opacity:xt},update:p={opacity:Xr},exit:h={opacity:xt}};ri(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Yr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=qn(o,{signal:"height"},{signal:"width"}),x=u?{scale:u,range:0,mult:c,offset:l}:{value:0,offset:l},D=u?{scale:u,range:1,mult:c,offset:l}:it(b,{mult:c,offset:l});return d.x=p.x=qn(o,v,x),d.y=p.y=Ea(o,v,x),d.x2=p.x2=Ea(o,D),d.y2=p.y2=qn(o,D),h.x=qn(o,v),h.y=Ea(o,v),Fr({type:y5,role:j0e,key:Yr,from:i,encode:y},n)}function xme(e,t){if(t!==1)if(!Le(e))e=Tn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=it({},e);for(;n.mult!=null;)if(Le(n.mult))n=n.mult=it({},n.mult);else return n.mult=Tn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Eme(e,t,n,i,r,a){const o=or(e,t),u=e.orient,c=h2(u,-1,1);let l,d,h;const p={enter:l={opacity:xt},update:h={opacity:Xr},exit:d={opacity:xt}};ri(p,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const y=jn(r);y.mult=c;const v={scale:e.scale,field:Yr,band:a.band,extra:a.extra,offset:a.offset,round:o("tickRound")};return h.y=l.y=qn(u,xt,v),h.y2=l.y2=qn(u,y),d.x=qn(u,v),h.x=l.x=Ea(u,xt,v),h.x2=l.x2=Ea(u,y),d.y=Ea(u,v),Fr({type:y5,role:H0e,key:Yr,from:i,encode:p},n)}function FC(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function Dme(e,t,n,i,r,a){const o=or(e,t),u=e.orient,c=e.scale,l=h2(u,-1,1),d=Zl(o("labelFlush")),h=Zl(o("labelFlushOffset")),p=o("labelAlign"),y=o("labelBaseline");let v=d===0||!!d,b;const x=jn(r);x.mult=l,x.offset=jn(o("labelPadding")||0),x.offset.mult=l;const D={scale:c,field:Yr,band:.5,offset:Ij(a.offset,o("labelOffset"))},S=qn(u,v?FC(c,d,'"left"','"right"','"center"'):{value:"center"},lme(u,"left","right")),A=qn(u,Gj(u,"bottom","top"),v?FC(c,d,'"top"','"bottom"','"middle"'):{value:"middle"}),w=FC(c,d,`-(${h})`,h,0);v=v&&h;const _={opacity:xt,x:qn(u,D,x),y:Ea(u,D,x)},k={enter:_,update:b={opacity:Xr,text:{field:g5},x:_.x,y:_.y,align:S,baseline:A},exit:{opacity:xt,x:_.x,y:_.y}};ri(k,{dx:!p&&v?qn(u,w):null,dy:!y&&v?Ea(u,w):null}),ri(k,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:p,baseline:y});const F=o("labelBound");let M=o("labelOverlap");return M=M||F?{separation:o("labelSeparation"),method:M,order:"datum.index",bound:F?{scale:c,orient:u,tolerance:F}:null}:void 0,b.align!==S&&(b.align=td(b.align,S)),b.baseline!==A&&(b.baseline=td(b.baseline,A)),Fr({type:Oc,role:q0e,style:kp,key:Yr,from:i,encode:k,overlap:M},n)}function Cme(e,t,n,i){const r=or(e,t),a=e.orient,o=h2(a,-1,1);let u,c;const l={enter:u={opacity:xt,anchor:jn(r("titleAnchor",null)),align:{signal:v5}},update:c=it({},u,{opacity:Xr,text:jn(e.title)}),exit:{opacity:xt}},d={signal:`lerp(range("${e.scale}"), ${c2(0,1,.5)})`};return c.x=qn(a,d),c.y=Ea(a,d),u.angle=qn(a,xt,mme(o,90)),u.baseline=qn(a,Gj(a,Bs,Oa),{value:Bs}),c.angle=u.angle,c.baseline=u.baseline,ri(l,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Sme(r,a,l,n),l.update.align=td(l.update.align,u.align),l.update.angle=td(l.update.angle,u.angle),l.update.baseline=td(l.update.baseline,u.baseline),Fr({type:Oc,role:G0e,style:p5,from:i,encode:l},n)}function Sme(e,t,n,i){const r=(u,c)=>u!=null?(n.update[c]=td(jn(u),n.update[c]),!1):!jf(c,i),a=r(e("titleX"),"x"),o=r(e("titleY"),"y");n.enter.auto=o===a?jn(o):qn(t,jn(o),jn(a))}function Ame(e,t){const n=yme(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,o=r.interactive,u=r.style,c=or(e,n),l=Epe(c),d={scale:e.scale,ticks:!!c("ticks"),labels:!!c("labels"),grid:!!c("grid"),domain:!!c("domain"),title:e.title!=null},h=Ge(t.add(Ma({},[d]))),p=Ge(t.add(_ge({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(bme(e,n,i.grid,p,l)),d.ticks&&(v=c("tickSize"),y.push(Eme(e,n,i.ticks,p,v,l))),d.labels&&(v=d.ticks?v:0,y.push(Dme(e,n,i.labels,p,v,l))),d.domain&&y.push(vme(e,n,i.domain,h)),d.title&&y.push(Cme(e,n,i.title,h)),d2(Gg({role:U0e,from:h,encode:ih(_me(c,e),r,Tp),marks:y,aria:c("aria"),description:c("description"),zindex:c("zindex"),name:a,interactive:o,style:u}),t)}function _me(e,t){const n={enter:{},update:{}};return ri(n,{orient:e("orient"),offset:e("offset")||0,position:da(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function Xj(e,t,n){const i=Ie(e.signals),r=Ie(e.scales);return n||i.forEach(a=>Aj(a,t)),Ie(e.projections).forEach(a=>rpe(a,t)),r.forEach(a=>Yge(a,t)),Ie(e.data).forEach(a=>ume(a,t)),r.forEach(a=>Xge(a,t)),(n||i).forEach(a=>Age(a,t)),Ie(e.axes).forEach(a=>Ame(a,t)),Ie(e.marks).forEach(a=>d2(a,t)),Ie(e.legends).forEach(a=>Wpe(a,t)),e.title&&nme(e.title,t),t.parseLambdas(),t}const wme=e=>ih({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Fme(e,t){const n=t.config,i=Ge(t.root=t.add(Ov())),r=kme(e,n);r.forEach(l=>Aj(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(Ma()),o=t.add(Fj(Sj(wme(e.encode),l2,c5,e.style,t,{pulse:Ge(a)}))),u=t.add($j({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Ge(o)}));t.operators.pop(),t.pushState(Ge(o),Ge(u),null),Xj(e,t,r),t.operators.push(u);let c=t.add(wj({mark:i,pulse:Ge(u)}));return c=t.add(Tj({pulse:Ge(c)})),c=t.add(Mc({pulse:Ge(c)})),t.addData("root",new gc(t,a,a,c)),t}function $0(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function kme(e,t){const n=o=>da(e[o],t[o]),i=[$0("background",n("background")),$0("autosize",z0e(n("autosize"))),$0("padding",I0e(n("padding"))),$0("width",n("width")||0),$0("height",n("height")||0)],r=i.reduce((o,u)=>(o[u.name]=u,o),{}),a={};return Ie(e.signals).forEach(o=>{Ue(r,o.name)?o=it(r[o.name],o):i.push(o),a[o.name]=o}),Ie(t.signals).forEach(o=>{!Ue(a,o.name)&&!Ue(r,o.name)&&i.push(o)}),i}function Vj(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function PO(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}Vj.prototype=PO.prototype={parse(e){return Xj(e,this)},fork(){return new PO(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof HA?Ge(e):e;return this.add(Uge({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let o,u;i&&(o=i.data||(i.data={}),u=o[r]||(o[r]=[]),u.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Ge(this.add(Mc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Ge(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return vt(this._parent)},encode(){return vt(this._encode)},lookup(){return vt(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(ze(e))return qg(e,t);e.signal||me("Unsupported field reference: "+Oe(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Ge(this.add(Tge(r)))}return i},compareRef(e){let t=!1;const n=a=>Tn(a)?(t=!0,this.signalRef(a.signal)):pge(a)?(t=!0,this.exprRef(a.expr)):a,i=Ie(e.field).map(n),r=Ie(e.order).map(n);return t?Ge(this.add(wO({fields:i,orders:r}))):AO(i,r)},keyRef(e,t){let n=!1;const i=a=>Tn(a)?(n=!0,Ge(r[a.signal])):a,r=this.signals;return e=Ie(e).map(i),n?Ge(this.add($ge({fields:e,flat:t}))):fge(e,t)},sortRef(e){if(!e)return e;const t=u2(e.op,e.field),n=e.order||dge;return n.signal?Ge(this.add(wO({fields:t,orders:this.signalRef(n.signal)}))):AO(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Ue(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&me("Duplicate signal name: "+Oe(e));const n=t instanceof HA?t:this.add(Ov(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||me("Unrecognized signal name: "+Oe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Ge(this.signals[e]):(Ue(this.lambdas,e)||(this.lambdas[e]=this.add(Ov(null))),Ge(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=go(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!Le(e)?e:this.signalRef(e.signal||C5(e))},exprRef(e,t){const n={expr:go(e,this)};return t&&(n.expr.$name=t),Ge(this.add(Fge(n)))},addBinding(e,t){this.bindings||me("Nested signals do not support binding: "+Oe(e)),this.bindings.push(it({signal:e},t))},addScaleProj(e,t){Ue(this.scales,e)&&me("Duplicate scale or projection name: "+Oe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,jge(t))},addProjection(e,t){this.addScaleProj(e,Ige(t))},getScale(e){return this.scales[e]||me("Unrecognized scale name: "+Oe(e)),this.scales[e]},scaleRef(e){return Ge(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Ue(this.data,e)&&me("Duplicate data set name: "+Oe(e)),this.data[e]=t},getData(e){return this.data[e]||me("Undefined data set name: "+Oe(e)),this.data[e]},addDataPipeline(e,t){return Ue(this.data,e)&&me("Duplicate data set name: "+Oe(e)),this.addData(e,gc.fromEntries(this,t))}};function C5(e){return(be(e)?Tme:$me)(e)}function Tme(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(Le(r)?r.signal||C5(r):Oe(r))}return n+"]"}function $me(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+Oe(i)+":"+(Le(r)?r.signal||C5(r):Oe(r));return t+"}"}function Mme(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Ome(e,t,n){return Le(e)||me("Input Vega specification must be an object."),t=qd(Mme(),t,e.config),Fme(e,new Vj(t,n)).toRuntime()}var Nme="6.1.2";it(dd,DJ,Jre,$ae,mue,cse,zle,mle,Ile,lce,bce,_ce);const Rme=Nme,Bme=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Cn,CanvasHandler:xp,CanvasRenderer:Xy,DATE:er,DAY:gi,DAYOFYEAR:fo,Dataflow:Zf,Debug:HN,Error:N_,EventStream:hb,Gradient:zL,GroupItem:Bb,HOURS:Ar,Handler:Y3,HybridHandler:wI,HybridRenderer:KS,Info:qN,Item:Rb,MILLISECONDS:Aa,MINUTES:_r,MONTH:vi,Marks:wr,MultiPulse:ow,None:jN,Operator:jt,Parameters:db,Pulse:Cs,QUARTER:Ji,RenderType:ps,Renderer:bp,ResourceLoader:qL,SECONDS:Qr,SVGHandler:gI,SVGRenderer:K3,SVGStringRenderer:_I,Scenegraph:oI,TIME_UNITS:Q_,Transform:de,View:dj,WEEK:Fn,Warn:R_,YEAR:ii,accessor:ar,accessorFields:yi,accessorName:dn,array:Ie,ascending:Gd,bandwidthNRD:cw,bin:SB,bootstrapCI:AB,boundClip:zI,boundContext:pp,boundItem:XS,boundMark:nI,boundStroke:Su,changeset:Fc,clampRange:tR,codegenExpression:IP,compare:U_,constant:Di,cumulativeLogNormal:mw,cumulativeNormal:pb,cumulativeUniform:xw,dayofyear:$R,debounce:P_,defaultLocale:tw,definition:EB,densityLogNormal:pw,densityNormal:fw,densityUniform:bw,domChild:wn,domClear:Ur,domCreate:hs,domFind:G3,dotbin:_B,error:me,expressionFunction:bn,extend:it,extent:so,extentIndex:nR,falsy:is,fastmap:Yd,field:Vr,flush:iR,font:Pb,fontFamily:vp,fontSize:Eo,format:Y1,formatLocale:Ay,formats:rw,hasOwnProperty:Ue,id:ep,identity:Ei,inferType:cB,inferTypes:fB,ingest:wt,inherits:Re,inrange:Hf,interpolate:D3,interpolateColors:Ob,interpolateRange:CL,intersect:OI,intersectBoxLine:Gf,intersectPath:T3,intersectPoint:$3,intersectRule:GL,isArray:be,isBoolean:qs,isDate:Es,isFunction:rt,isIterable:rR,isNumber:Ct,isObject:Le,isRegExp:j_,isString:ze,isTuple:cb,key:q_,lerp:aR,lineHeight:Os,loader:sb,locale:sB,logger:B_,lruCache:oR,markup:Z3,merge:uR,mergeConfig:qd,multiLineOffset:j3,one:jd,pad:sR,panLinear:WN,panLog:QN,panPow:ZN,panSymlog:KN,parse:Ome,parseExpression:ZF,parseSelector:Ws,path:xb,pathCurves:w3,pathEqual:LI,pathParse:vd,pathRectangle:UL,pathRender:$g,pathSymbols:IL,pathTrail:PL,peek:vt,point:qb,projection:yF,quantileLogNormal:yw,quantileNormal:mb,quantileUniform:Ew,quantiles:sw,quantizeInterpolator:SL,quarter:JN,quartiles:lw,get random(){return Zr},randomInteger:_K,randomKDE:hw,randomLCG:AK,randomLogNormal:FB,randomMixture:kB,randomNormal:dw,randomUniform:TB,read:gB,regressionConstant:Dw,regressionExp:MB,regressionLinear:Cw,regressionLoess:RB,regressionLog:$B,regressionPoly:NB,regressionPow:OB,regressionQuad:Sw,renderModule:Hb,repeat:L0,resetDefaultLocale:DZ,resetSVGDefIds:yre,responseType:hB,runtimeContext:JP,sampleCurve:vb,sampleLogNormal:gw,sampleNormal:gb,sampleUniform:vw,scale:At,sceneEqual:J3,sceneFromJSON:rI,scenePickVisit:Iy,sceneToJSON:iI,sceneVisit:_a,sceneZOrder:M3,scheme:C3,serializeXML:DI,setHybridRendererOptions:hre,setRandom:CK,span:tp,splitAccessPath:vo,stringValue:Oe,textMetrics:Er,timeBin:VR,timeFloor:LR,timeFormatLocale:Ag,timeInterval:Qd,timeOffset:PR,timeSequence:HR,timeUnitSpecifier:TR,timeUnits:Z_,toBoolean:H_,toDate:G_,toNumber:pi,toSet:Sa,toString:Y_,transform:DB,transforms:dd,truncate:lR,truthy:Wr,tupleid:Ye,typeParsers:kS,utcFloor:IR,utcInterval:Zd,utcOffset:jR,utcSequence:GR,utcdayofyear:NR,utcquarter:eR,utcweek:RR,version:Rme,visitArray:os,week:MR,writeConfig:Hd,zero:fs,zoomLinear:z_,zoomLog:L_,zoomPow:by,zoomSymlog:I_},Symbol.toStringTag,{value:"Module"}));function zme(e,t,n){let i;t.x2&&(t.x?(n&&e.x>e.x2&&(i=e.x,e.x=e.x2,e.x2=i),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(i=e.y,e.y=e.y2,e.y2=i),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Lme={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Ime={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},Ume={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Pme=Array.prototype.slice,Al=(e,t,n)=>{const i=n?n(t[0]):t[0];return i[e].apply(i,Pme.call(t,1))},jme=function(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:0,o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:0;return ze(e)?new Date(e):new Date(e,t,n,i,r,a,o)};var qme={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:jme,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Al("join",arguments)},indexof:function(){return Al("indexOf",arguments)},lastindexof:function(){return Al("lastIndexOf",arguments)},slice:function(){return Al("slice",arguments)},reverse:e=>e.slice().reverse(),sort:e=>e.slice().sort(Gd),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Al("substring",arguments,String)},split:function(){return Al("split",arguments,String)},replace:function(){return Al("replace",arguments,String)},trim:e=>String(e).trim(),btoa:e=>btoa(e),atob:e=>atob(e),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Hme=["view","item","group","xy","x","y"],ZA=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&ZA.add(setImmediate);const Gme={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Lme[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,i=e(t.object);n&&(e.memberDepth+=1);const r=e(t.property);if(n&&(e.memberDepth-=1),ZA.has(i[r])){console.error(`Prevented interpretation of member "${r}" which could lead to insecure code execution`);return}return i[r]},CallExpression:(e,t)=>{const n=t.arguments;let i=t.callee.name;return i.startsWith("_")&&(i=i.slice(1)),i==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[i]||qme[i]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Ime[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>Ume[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,i)=>{e.memberDepth+=1;const r=e(i.key);return e.memberDepth-=1,ZA.has(e(i.value))?console.error(`Prevented interpretation of property "${r}" which could lead to insecure code execution`):n[r]=e(i.value),n},{})};function M0(e,t,n,i,r,a){const o=u=>Gme[u.type](o,u);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=i,o.event=r,o.item=a,Hme.forEach(u=>o.fn[u]=function(){return r.vega[u](...arguments)}),o(e)}var Yme={operator(e,t){const n=t.ast,i=e.functions;return r=>M0(n,i,r)},parameter(e,t){const n=t.ast,i=e.functions;return(r,a)=>M0(n,i,a,r)},event(e,t){const n=t.ast,i=e.functions;return r=>M0(n,i,void 0,void 0,r)},handler(e,t){const n=t.ast,i=e.functions;return(r,a)=>{const o=a.item&&a.item.datum;return M0(n,i,r,o,a)}},encode(e,t){const{marktype:n,channels:i}=t,r=e.functions,a=n==="group"||n==="image"||n==="rect";return(o,u)=>{const c=o.datum;let l=0,d;for(const h in i)d=M0(i[h].ast,r,u,c,void 0,o),o[h]!==d&&(o[h]=d,l=1);return n!=="rule"&&zme(o,i,a),l}}},Xme="6.2.0",Vme={version:Xme};function S5(e){return we(e,"or")}function A5(e){return we(e,"and")}function _5(e){return we(e,"not")}function my(e,t){if(_5(e))my(e.not,t);else if(A5(e))for(const n of e.and)my(n,t);else if(S5(e))for(const n of e.or)my(n,t);else t(e)}function nd(e,t){return _5(e)?{not:nd(e.not,t)}:A5(e)?{and:e.and.map(n=>nd(n,t))}:S5(e)?{or:e.or.map(n=>nd(n,t))}:t(e)}const Je=structuredClone;function Wj(e){throw new Error(e)}function wd(e,t){const n={};for(const i of t)Ue(e,i)&&(n[i]=e[i]);return n}function Cr(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>kt(e)).join(",")})`};function mt(e){if(Ct(e))return e;const t=ze(e)?e:kt(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function KA(e){return e===!1||e===null}function ft(e,t){return e.includes(t)}function Fd(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function w5(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function Qj(e,...t){for(const n of t)Wme(e,n??{});return e}function Wme(e,t){for(const n of _e(t))Hd(e,n,t[n],!0)}function eo(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Qme(e,t){const n=_e(e),i=_e(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function Zj(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function F5(e,t){for(const n of e)if(t.has(n))return!0;return!1}function JA(e){const t=new Set;for(const n of e){const r=vo(n).map((o,u)=>u===0?o:`[${o}]`),a=r.map((o,u)=>r.slice(0,u+1).join(""));for(const o of a)t.add(o)}return t}function k5(e,t){return e===void 0||t===void 0?!0:F5(JA(e),JA(t))}function qt(e){return _e(e).length===0}const _e=Object.keys,Dn=Object.values,zs=Object.entries;function Yg(e){return e===!0||e===!1}function Jt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function bg(e,t){return _5(e)?`!(${bg(e.not,t)})`:A5(e)?`(${e.and.map(n=>bg(n,t)).join(") && (")})`:S5(e)?`(${e.or.map(n=>bg(n,t)).join(") || (")})`:t(e)}function Nv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&Nv(e[n],t)&&delete e[n],qt(e)}function $p(e){return e.charAt(0).toUpperCase()+e.substr(1)}function T5(e,t="datum"){const n=vo(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(Oe).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function Kj(e,t="datum"){return`${t}[${Oe(vo(e).join("."))}]`}function Mt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Zme(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Jr(e){return`${vo(e).map(Zme).join("\\.")}`}function pc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function oh(e){return`${vo(e).join(".")}`}function kd(e){return e?vo(e).length:0}function yn(...e){return e.find(t=>t!==void 0)}let Jj=42;function eq(e){const t=++Jj;return e?String(e)+t:t}function Kme(){Jj=42}function tq(e){return nq(e)?e:`__${e}`}function nq(e){return e.startsWith("__")}function Xg(e){if(e!==void 0)return(e%360+360)%360}function g2(e){return Ct(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const jO=Object.getPrototypeOf(structuredClone({}));function br(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!br(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!br(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==jO.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==jO.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!br(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function kt(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const o=t.push(i)-1,u=Object.keys(i).sort();for(a="",r=0;r<u.length;r++){const c=u[r],l=n(i[c]);l&&(a&&(a+=","),a+=`${JSON.stringify(c)}:${l}`)}return t.splice(o,1),`{${a}}`})(e)}function we(e,t){return Le(e)&&Ue(e,t)&&e[t]!==void 0}const du="row",hu="column",p2="facet",en="x",Xn="y",Na="x2",Ao="y2",Qs="xOffset",uh="yOffset",Ra="radius",_u="radius2",na="theta",wu="theta2",Ba="latitude",za="longitude",La="latitude2",ea="longitude2",Zs="time",nr="color",_o="fill",wo="stroke",ir="shape",Fu="size",Nc="angle",ku="opacity",Ks="fillOpacity",Js="strokeOpacity",el="strokeWidth",tl="strokeDash",Mp="text",Td="order",Op="detail",m2="key",mc="tooltip",y2="href",v2="url",b2="description",Jme={x:1,y:1,x2:1,y2:1},iq={theta:1,theta2:1,radius:1,radius2:1};function rq(e){return Ue(iq,e)}const $5={longitude:1,longitude2:1,latitude:1,latitude2:1};function aq(e){switch(e){case Ba:return"y";case La:return"y2";case za:return"x";case ea:return"x2"}}function oq(e){return Ue($5,e)}const e1e=_e($5),M5={...Jme,...iq,...$5,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function id(e){return e===nr||e===_o||e===wo}const uq={row:1,column:1,facet:1},Gr=_e(uq),O5={...M5,...uq},t1e=_e(O5),{order:_Ae,detail:wAe,tooltip:FAe,...n1e}=O5,{row:kAe,column:TAe,facet:$Ae,...i1e}=n1e;function r1e(e){return Ue(i1e,e)}function sq(e){return Ue(O5,e)}const a1e=[Na,Ao,La,ea,wu,_u];function lq(e){return Rc(e)!==e}function Rc(e){switch(e){case Na:return en;case Ao:return Xn;case La:return Ba;case ea:return za;case wu:return na;case _u:return Ra}return e}function Ls(e){if(rq(e))switch(e){case na:return"startAngle";case wu:return"endAngle";case Ra:return"outerRadius";case _u:return"innerRadius"}return e}function Fo(e){switch(e){case en:return Na;case Xn:return Ao;case Ba:return La;case za:return ea;case na:return wu;case Ra:return _u}}function rr(e){switch(e){case en:case Na:return"width";case Xn:case Ao:return"height"}}function cq(e){switch(e){case en:return"xOffset";case Xn:return"yOffset";case Na:return"x2Offset";case Ao:return"y2Offset";case na:return"thetaOffset";case Ra:return"radiusOffset";case wu:return"theta2Offset";case _u:return"radius2Offset"}}function N5(e){switch(e){case en:return"xOffset";case Xn:return"yOffset"}}function o1e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const u1e=_e(M5),{x:MAe,y:OAe,x2:NAe,y2:RAe,xOffset:BAe,yOffset:zAe,latitude:LAe,longitude:IAe,latitude2:UAe,longitude2:PAe,theta:jAe,theta2:qAe,radius:HAe,radius2:GAe,...R5}=M5,s1e=_e(R5),B5={x:1,y:1},Tu=_e(B5);function vn(e){return Ue(B5,e)}const z5={theta:1,radius:1},l1e=_e(z5);function x2(e){return e==="width"?en:Xn}const fq={xOffset:1,yOffset:1};function Np(e){return Ue(fq,e)}const c1e={time:1};function kC(e){return e in c1e}const{text:YAe,tooltip:XAe,href:VAe,url:WAe,description:QAe,detail:ZAe,key:KAe,order:JAe,...dq}=R5,f1e=_e(dq);function d1e(e){return Ue(R5,e)}function h1e(e){switch(e){case nr:case _o:case wo:case Fu:case ir:case ku:case el:case tl:return!0;case Ks:case Js:case Nc:case Zs:return!1}}const hq={...B5,...z5,...fq,...dq},L5=_e(hq);function ko(e){return Ue(hq,e)}function g1e(e,t){return m1e(e)[t]}const gq={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:e_e,...p1e}=gq;function m1e(e){switch(e){case nr:case _o:case wo:case b2:case Op:case m2:case mc:case y2:case Td:case ku:case Ks:case Js:case el:case p2:case du:case hu:return gq;case en:case Xn:case Qs:case uh:case Ba:case za:case Zs:return p1e;case Na:case Ao:case La:case ea:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Fu:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case tl:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ir:return{point:"always",geoshape:"always"};case Mp:return{text:"always"};case Nc:return{point:"always",square:"always",text:"always"};case v2:return{image:"always"};case na:return{text:"always",arc:"always"};case Ra:return{text:"always",arc:"always"};case wu:case _u:return{arc:"always"}}}function TC(e){switch(e){case en:case Xn:case na:case Ra:case Qs:case uh:case Fu:case Nc:case el:case ku:case Ks:case Js:case Zs:case Na:case Ao:case wu:case _u:return;case p2:case du:case hu:case ir:case tl:case Mp:case mc:case y2:case v2:case b2:return"discrete";case nr:case _o:case wo:return"flexible";case Ba:case za:case La:case ea:case Op:case m2:case Td:return}}const y1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},v1e={count:1,min:1,max:1};function Eu(e){return we(e,"argmin")}function nl(e){return we(e,"argmax")}function I5(e){return ze(e)&&Ue(y1e,e)}const b1e=new Set(["count","valid","missing","distinct"]);function E2(e){return ze(e)&&b1e.has(e)}function x1e(e){return ze(e)&&ft(["min","max"],e)}const E1e=new Set(["count","sum","distinct","valid","missing"]),D1e=new Set(["mean","average","median","q1","q3","min","max"]);function pq(e){return qs(e)&&(e=O2(e,void 0)),`bin${_e(e).map(t=>D2(e[t])?Jt(`_${t}_${zs(e[t])}`):Jt(`_${t}_${e[t]}`)).join("")}`}function Gt(e){return e===!0||Bc(e)&&!e.binned}function Zn(e){return e==="binned"||Bc(e)&&e.binned===!0}function Bc(e){return Le(e)}function D2(e){return we(e,"param")}function qO(e){switch(e){case du:case hu:case Fu:case nr:case _o:case wo:case el:case ku:case Ks:case Js:case ir:return 6;case tl:return 4;default:return 10}}function Rp(e){return we(e,"expr")}function Kn(e,{level:t}={level:0}){const n=_e(e||{}),i={};for(const r of n)i[r]=t===0?yr(e[r]):Kn(e[r],{level:t-1});return i}function mq(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:o,color:u,subtitleColor:c,subtitleFont:l,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,x={...b,...u?{fill:u}:{}},D={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...o!==void 0?{limit:o}:{}},S={...c?{subtitleColor:c}:{},...l?{subtitleFont:l}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=wd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:x,subtitleMarkConfig:A,nonMarkTitleProperties:D,subtitle:S}}function cs(e){return ze(e)||be(e)&&ze(e[0])}function qe(e){return we(e,"signal")}function zc(e){return we(e,"step")}function C1e(e){return be(e)?!1:we(e,"fields")&&!we(e,"data")}function S1e(e){return be(e)?!1:we(e,"fields")&&we(e,"data")}function su(e){return be(e)?!1:we(e,"field")&&we(e,"data")}const A1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},_1e=_e(A1e),w1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},e_=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],F1e="  ";function yq(e){const t=be(e.condition)?e.condition.map(HO):HO(e.condition);return{...yr(e),condition:t}}function yr(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function HO(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Wt(e){if(Rp(e)){const{expr:t,...n}=e;return{signal:t,...n}}return qe(e)?e:e!==void 0?{value:e}:void 0}function k1e(e){return qe(e)?e.signal:Oe(e)}function GO(e){return qe(e)?e.signal:Oe(e.value)}function ba(e){return qe(e)?e.signal:e==null?null:Oe(e)}function T1e(e,t,n){for(const i of n){const r=po(i,t.markDef,t.config);r!==void 0&&(e[i]=Wt(r))}return e}function vq(e){return[].concat(e.type,e.style??[])}function It(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&we(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:po(e,t,n,i)}function po(e,t,n,{vgChannel:i}={}){const r=t_(e,t,n.style);return yn(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function t_(e,t,n){return bq(e,vq(t),n)}function bq(e,t,n){t=Ie(t);let i;for(const r of t){const a=n[r];we(a,e)&&(i=a[e])}return i}function xq(e,t){return Ie(e).reduce((n,i)=>(n.field.push(Be(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function Eq(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(br(r,i))return;n.push(i)}),n}function Dq(e,t){return br(e,t)||!t?e:e?[...Ie(e),...Ie(t)].join(", "):t}function Cq(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((cs(n)||qe(n))&&(cs(i)||qe(i)))return{explicit:e.explicit,value:Dq(n,i)};if(cs(n)||qe(n))return{explicit:e.explicit,value:n};if(cs(i)||qe(i))return{explicit:e.explicit,value:i};if(!cs(n)&&!qe(n)&&!cs(i)&&!qe(i))return{explicit:e.explicit,value:Eq(n,i)};throw new Error("It should never reach here")}function U5(e){return`Invalid specification ${kt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const $1e='Autosize "fit" only works for single views and layered views.';function YO(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function XO(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function VO(e){return e?`Dropping "fit-${e}" because spec has discrete ${rr(e)}.`:'Dropping "fit" because spec has discrete size.'}function P5(e){return`Unknown field for ${e}. Cannot calculate view size.`}function WO(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function M1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function O1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function Sq(e){return`Selection not supported for ${e} yet.`}function N1e(e){return`Cannot find a selection named "${e}".`}const R1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",B1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",z1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function L1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function I1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const U1e="The same selection must be used to override scale domains in a layered view.",P1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function j1e(e){return`Unknown repeated value "${e}".`}function QO(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const q1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",j5="Animation involving facet, layer, or concat is currently unsupported.";function H1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${Oe(e)}.`}function G1e(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${Oe(t)} encoding found for selection ${Oe(n.param)}. Using "field": ${Oe(i)}.`}const Y1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function X1e(e){return`Unrecognized parse "${e}".`}function ZO(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const V1e="Attempt to add the same child twice.";function W1e(e){return`Ignoring an invalid transform: ${kt(e)}.`}const Q1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function KO(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Z1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${kt(t)} is overridden by a child projection ${kt(n)}.`}const K1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function J1e(e){return`${e}Offset dropped because ${e} is continuous`}function eye(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${kt(n)}}.`}function Aq(e){return`Invalid field type "${e}".`}function tye(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function nye(e){return`Invalid aggregation operator "${e}".`}function _q(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function iye(e){return`Position range does not support relative band size for ${e}.`}function n_(e,t){return`Dropping ${kt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const rye="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function C2(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function aye(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function oye(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function uye(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function sye(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function $C(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function lye(e){return`The ${e} for range marks cannot be an expression`}function cye(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function fye(e,t){return`Specified orient "${e}" overridden with "${t}".`}function dye(e){return`Cannot use the scale property "${e}" with non-color channel.`}function hye(e){return`Cannot use the relative band size with ${e} scale.`}function gye(e){return`Using unaggregated domain with raw field has no effect (${kt(e)}).`}function pye(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function mye(e){return`Unaggregated domain is currently unsupported for log scale (${kt(e)}).`}function yye(e){return`Cannot apply size to non-oriented mark "${e}".`}function vye(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function bye(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function wq(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function Fq(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function xye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${kt(n)} and ${kt(i)}). Using ${kt(n)}.`}function Eye(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${kt(n)} and ${kt(i)}). Using the union of the two domains.`}function Dye(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function Cye(e){return`Dropping sort property ${kt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const JO="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Sye="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Aye="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",_ye="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function wye(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Fye(e){return`Stack is applied to a non-linear scale (${e}).`}function kye(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function Rv(e,t){return`Invalid ${e}: ${kt(t)}.`}function Tye(e){return`Dropping day from datetime ${kt(e)} as day cannot be combined with other units.`}function $ye(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Mye(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Oye(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function e7(e){return`1D error band does not support ${e}.`}function kq(e){return`Channel ${e} is required for "binned" bin.`}function Nye(e){return`Channel ${e} should not be used with "binned" bin.`}function Rye(e){return`Domain for ${e} is required for threshold scale.`}const Tq=B_(R_);let yc=Tq;function Bye(e){return yc=e,yc}function zye(){return yc=Tq,yc}function q5(...e){yc.error(...e)}function ke(...e){yc.warn(...e)}function Lye(...e){yc.debug(...e)}function Lc(e){if(e&&Le(e)){for(const t of G5)if(we(e,t))return!0}return!1}const $q=["january","february","march","april","may","june","july","august","september","october","november","december"],Iye=$q.map(e=>e.substr(0,3)),Mq=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Uye=Mq.map(e=>e.substr(0,3));function Pye(e){if(g2(e)&&(e=+e),Ct(e))return e>4&&ke(Rv("quarter",e)),e-1;throw new Error(Rv("quarter",e))}function jye(e){if(g2(e)&&(e=+e),Ct(e))return e-1;{const t=e.toLowerCase(),n=$q.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Iye.indexOf(i);if(r!==-1)return r;throw new Error(Rv("month",e))}}function qye(e){if(g2(e)&&(e=+e),Ct(e))return e%7;{const t=e.toLowerCase(),n=Mq.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Uye.indexOf(i);if(r!==-1)return r;throw new Error(Rv("day",e))}}function H5(e,t){const n=[];if(t&&e.day!==void 0&&_e(e).length>1&&(ke(Tye(e)),e=Je(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?jye(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?Pye(e.quarter):e.quarter;n.push(Ct(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?qye(e.day):e.day;n.push(Ct(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function vc(e){const n=H5(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Hye(e){const n=H5(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Gye(e){const t=H5(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const Oq={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},G5=_e(Oq);function Yye(e){return Ue(Oq,e)}function Ic(e){return Le(e)?e.binned:Nq(e)}function Nq(e){return e?.startsWith("binned")}function Y5(e){return e.startsWith("utc")}function Xye(e){return e.substring(3)}const Vye={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function S2(e){return G5.filter(t=>Bq(e,t))}function Rq(e){const t=S2(e);return t[t.length-1]}function Bq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Wye(e,t,{end:n}={end:!1}){const i=T5(t),r=Y5(e)?"utc":"";function a(c){return c==="quarter"?`(${r}quarter(${i})-1)`:`${r}${c}(${i})`}let o;const u={};for(const c of G5)Bq(e,c)&&(u[c]=a(c),o=c);return n&&(u[o]+="+1"),Hye(u)}function zq(e){if(!e)return;const t=S2(e);return`timeUnitSpecifier(${kt(t)}, ${kt(Vye)})`}function Qye(e,t,n){if(!e)return;const i=zq(e);return`${n||Y5(e)?"utc":"time"}Format(${t}, ${i})`}function Hn(e){if(!e)return;let t;return ze(e)?Nq(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:Le(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Y5(t.unit)&&(t.utc=!0,t.unit=Xye(t.unit)),t}function Zye(e){const{utc:t,...n}=Hn(e);return n.unit?(t?"utc":"")+_e(n).map(i=>Jt(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${_e(n).map(i=>Jt(`_${i}_${n[i]}`)).join("")}`}function Lq(e,t=n=>n){const n=Hn(e),i=Rq(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:o}=Iq(i,n.step),u={...r,[o]:+r[o]+a};return`${t(vc(u))} - ${t(vc(r))}`}}const Kye={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Jye(e){return Ue(Kye,e)}function Iq(e,t=1){if(Jye(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function eve(e){return we(e,"param")}function X5(e){return!!e?.field&&e.equal!==void 0}function V5(e){return!!e?.field&&e.lt!==void 0}function W5(e){return!!e?.field&&e.lte!==void 0}function Q5(e){return!!e?.field&&e.gt!==void 0}function Z5(e){return!!e?.field&&e.gte!==void 0}function K5(e){if(e?.field){if(be(e.range)&&e.range.length===2)return!0;if(qe(e.range))return!0}return!1}function J5(e){return!!e?.field&&(be(e.oneOf)||be(e.in))}function tve(e){return!!e?.field&&e.valid!==void 0}function Uq(e){return J5(e)||X5(e)||K5(e)||V5(e)||Q5(e)||W5(e)||Z5(e)}function Ya(e,t){return N2(e,{timeUnit:t,wrapTime:!0})}function nve(e,t){return e.map(n=>Ya(n,t))}function Pq(e,t=!0){const{field:n}=e,i=Hn(e.timeUnit),{unit:r,binned:a}=i||{},o=Be(e,{expr:"datum"}),u=r?`time(${a?o:Wye(r,n)})`:o;if(X5(e))return`${u}===${Ya(e.equal,r)}`;if(V5(e)){const c=e.lt;return`${u}<${Ya(c,r)}`}else if(Q5(e)){const c=e.gt;return`${u}>${Ya(c,r)}`}else if(W5(e)){const c=e.lte;return`${u}<=${Ya(c,r)}`}else if(Z5(e)){const c=e.gte;return`${u}>=${Ya(c,r)}`}else{if(J5(e))return`indexof([${nve(e.oneOf,r).join(",")}], ${u}) !== -1`;if(tve(e))return A2(u,e.valid);if(K5(e)){const{range:c}=Kn(e),l=qe(c)?{signal:`${c.signal}[0]`}:c[0],d=qe(c)?{signal:`${c.signal}[1]`}:c[1];if(l!==null&&d!==null&&t)return`inrange(${u}, [${Ya(l,r)}, ${Ya(d,r)}])`;const h=[];return l!==null&&h.push(`${u} >= ${Ya(l,r)}`),d!==null&&h.push(`${u} <= ${Ya(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${kt(e)}`)}function A2(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function ive(e){return Uq(e)&&e.timeUnit?{...e,timeUnit:Hn(e.timeUnit)}:e}const Bp={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function rve(e){return e==="quantitative"||e==="temporal"}function jq(e){return e==="ordinal"||e==="nominal"}const bc=Bp.quantitative,ek=Bp.ordinal,$d=Bp.temporal,tk=Bp.nominal,sh=Bp.geojson;function ave(e){if(e)switch(e=e.toLowerCase(),e){case"q":case bc:return"quantitative";case"t":case $d:return"temporal";case"o":case ek:return"ordinal";case"n":case tk:return"nominal";case sh:return"geojson"}}const Jn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},i_={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function ove(e,t){const n=i_[e],i=i_[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const uve={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function t7(e){return uve[e]}const qq=new Set(["linear","log","pow","sqrt","symlog"]),Hq=new Set([...qq,"time","utc"]);function Gq(e){return qq.has(e)}const Yq=new Set(["quantile","quantize","threshold"]),sve=new Set([...Hq,...Yq,"sequential","identity"]),lve=new Set(["ordinal","bin-ordinal","point","band"]);function Gn(e){return lve.has(e)}function wa(e){return sve.has(e)}function to(e){return Hq.has(e)}function Md(e){return Yq.has(e)}const cve={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function fve(e){return!ze(e)&&we(e,"name")}function Xq(e){return we(e,"param")}function dve(e){return we(e,"unionWith")}function hve(e){return Le(e)&&"field"in e}const gve={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:t_e,domain:n_e,range:i_e,rangeMax:r_e,rangeMin:a_e,scheme:o_e,...pve}=gve,mve=_e(pve);function r_(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return to(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return to(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return to(e);case"nice":return to(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return wa(e)&&!ft(["log","time","utc","threshold","quantile"],e)}}function Vq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return id(e)?void 0:dye(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function yve(e,t){return ft([ek,tk],t)?e===void 0||Gn(e):t===$d?ft([Jn.TIME,Jn.UTC,void 0],e):t===bc?Gq(e)||Md(e)||e===void 0:!0}function vve(e,t,n=!1){if(!ko(e))return!1;switch(e){case en:case Xn:case Qs:case uh:case na:case Ra:return to(t)||t==="band"?!0:t==="point"?!n:!1;case Zs:return ft(["linear","band"],t);case Fu:case el:case ku:case Ks:case Js:case Nc:return to(t)||Md(t)||ft(["band","point","ordinal"],t);case nr:case _o:case wo:return t!=="band";case tl:case ir:return t==="ordinal"||Md(t)}}function bve(e){return Le(e)&&"value"in e}const Pi={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Wq=Pi.arc,_2=Pi.area,w2=Pi.bar,xve=Pi.image,F2=Pi.line,k2=Pi.point,Eve=Pi.rect,Bv=Pi.rule,Qq=Pi.text,nk=Pi.tick,Dve=Pi.trail,ik=Pi.circle,rk=Pi.square,Zq=Pi.geoshape;function il(e){return["line","area","trail"].includes(e)}function Vg(e){return["rect","bar","image","arc","tick"].includes(e)}const Cve=new Set(_e(Pi));function mo(e){return we(e,"type")}const Sve=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Ave=["fill","fillOpacity"],_ve=[...Sve,...Ave],wve={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},n7=_e(wve),MC=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Fve={area:["line","point"],bar:MC,rect:MC,line:["point"],tick:["bandSize","thickness",...MC]},kve={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},Tve={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Kq=_e(Tve);function xc(e){return we(e,"band")}const $ve={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Mve=5,ak={binSpacing:0,continuousBandSize:Mve,minBandSize:.25,timeUnitBandPosition:.5},Ove={...ak,binSpacing:1},Nve={...ak,thickness:1};function Rve(e){return mo(e)?e.type:e}function Jq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function ok({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!wa(i)||r)return"always-valid";const a=Jq(It("invalid",e,t),{isPath:il(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function Bve(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function eH({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,o=t.domainHasZero();return o==="definitely"?{scale:e,value:0}:o==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function tH({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const o=n?.get("type"),u=ka(t),c=E2(u?.aggregate),l=ok({scaleChannel:e,markDef:r,config:a,scaleType:o,isCountAggregate:c});if(u&&l==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:A2(Be(u,{expr:"datum"}),!1),...zve(d,n,i)}}}function zve(e,t,n){if(bve(e)){const{value:i}=e;return qe(i)?{signal:i.signal}:{value:i}}return eH({scale:t,scaleName:n,mode:"zeroOrMin"})}function uk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:o}=e,u=Rc(t),c=sk(e),l=tH({scaleChannel:u,channelDef:n,scale:r,scaleName:a,markDef:i,config:o});return l!==void 0?[l,c]:c}function Lve(e){const{datum:t}=e;return Lc(t)?vc(t):`${kt(t)}`}function Kl(e,t,n,i){const r={};if(t&&(r.scale=t),To(e)){const{datum:a}=e;Lc(a)?r.signal=vc(a):qe(a)?r.signal=a.signal:Rp(a)?r.signal=a.expr:r.value=a}else r.field=Be(e,n);if(i){const{offset:a,band:o}=i;a&&(r.offset=a),o&&(r.band=o)}return r}function zv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:o=.5}){const u=!qe(o)&&0<o&&o<1?"datum":void 0,c=Be(t,{expr:u,suffix:r}),l=n!==void 0?Be(n,{expr:u}):Be(t,{suffix:a,expr:u}),d={};if(o===0||o===1){d.scale=e;const h=o===0?c:l;d.field=h}else{const h=qe(o)?`(1-${o.signal}) * ${c} + ${o.signal} * ${l}`:`${1-o} * ${c} + ${o} * ${l}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function Ive({scaleName:e,fieldDef:t}){const n=Be(t,{expr:"datum"}),i=Be(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function sk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:u,offset:c,defaultRef:l,bandPosition:d}){if(t){if(et(t)){const h=o?.get("type");if(Ii(t)){d??=Is({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Gt(p)||d&&y&&v===$d)return u?.impute?Kl(t,a,{binSuffix:"mid"},{offset:c}):d&&!Gn(h)?zv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:c}):Kl(t,a,Pp(t,e)?{binSuffix:"range"}:{},{offset:c});if(Zn(p)){if($e(n))return zv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:c});ke(kq(e===en?Na:Ao))}}return Kl(t,a,Gn(h)?{binSuffix:"range"}:{},{offset:c,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(Fa(t)){const h=t.value,p=c?{offset:c}:{};return{...xg(e,h),...p}}}return rt(l)&&(l=l()),l&&{...l,...c?{offset:c}:{}}}function xg(e,t){return ft(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:ft(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Wt(t)}function Ec(e){return e&&e!=="number"&&e!=="time"}function nH(e,t,n){return`${e}(${t}${n?`, ${kt(n)}`:""})`}function lk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Ec(n))return xa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const o=iH(e,i,r),u=Od(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(u==="quantitative"){if(r&&a.normalizedNumberFormatType)return xa({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return xa({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(u==="temporal"&&a.timeFormatType&&$e(e)&&e.timeUnit===void 0)return xa({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function c(l){return $e(l)?Hn(l.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Rd(e)){const{unit:l,utc:d}=c(e),h=Pve({field:o,timeUnit:l,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||Uc(e)&&e.scale?.type===Jn.UTC});return h?{signal:h}:void 0}if(t=a_({type:u,specifiedFormat:t,config:a,normalizeStack:r}),$e(e)&&Gt(e.bin)){const l=Be(e,{expr:i,binSuffix:"end"});return{signal:zp(o,l,t,n,a)}}else return t||Od(e)==="quantitative"?{signal:`${oH(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function iH(e,t,n){return $e(e)?n?`${Be(e,{expr:t,suffix:"end"})}-${Be(e,{expr:t,suffix:"start"})}`:Be(e,{expr:t}):Lve(e)}function xa({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:o}){if(o??=iH(e,i,r),o!=="datum.value"&&$e(e)&&Gt(e.bin)){const u=Be(e,{expr:i,binSuffix:"end"});return{signal:zp(o,u,t,n,a)}}return{signal:nH(n,o,t)}}function rH(e,t,n,i,r,a){if(!(ze(i)&&Ec(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&Od(e)==="quantitative"&&(r.normalizedNumberFormatType&&Nd(e)&&e.stack==="normalize"||r.numberFormatType))){if(Nd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return a_({type:"quantitative",config:r,normalizeStack:!0});if(Rd(e)){const o=$e(e)?Hn(e.timeUnit)?.unit:void 0;return o===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Uve({specifiedFormat:n,timeUnit:o,config:r,omitTimeFormatConfig:a})}return a_({type:t,specifiedFormat:n,config:r})}}function aH(e,t,n){if(e&&(qe(e)||e==="number"||e==="time"))return e;if(Rd(t)&&n!=="time"&&n!=="utc")return $e(t)&&Hn(t?.timeUnit)?.utc?"utc":"time"}function a_({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(ze(t))return t;if(e===bc)return i?n.normalizedNumberFormat:n.numberFormat}function Uve({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:zq(t)}:i?void 0:n.timeFormat)}function oH(e,t){return`format(${e}, "${t||""}")`}function i7(e,t,n,i){return Ec(n)?nH(n,e,t):oH(e,(ze(t)?t:void 0)??i.numberFormat)}function zp(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return zp(e,t,r.numberFormat,r.numberFormatType,r);const a=i7(e,n,i,r),o=i7(t,n,i,r);return`${A2(e,!1)} ? "null" : ${a} + "${F1e}" + ${o}`}function Pve({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${kt(n)})`:(n=ze(n)?n:r,`${a?"utc":"time"}Format(${e}, ${kt(n)})`):Qye(t,e,a)}const T2="min",jve={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function r7(e){return Ue(jve,e)}function qve(e){return we(e,"encoding")}function gu(e){return e&&(e.op==="count"||we(e,"field"))}function uH(e){return e&&be(e)}function Lp(e){return we(e,"row")||we(e,"column")}function ck(e){return we(e,"header")}function $2(e){return we(e,"facet")}function Hve(e){return we(e,"param")}function Gve(e){return!ze(e)&&we(e,"repeat")}function a7(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function fk(e){return we(e,"sort")}function Is({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(et(e)&&e.bandPosition!==void 0)return e.bandPosition;if($e(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return po("timeUnitBandPosition",n,i);if(Gt(a))return .5}}function sH({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:o}){const u=rr(e),c=It(o?"size":u,i,r,{vgChannel:u});if(c!==void 0)return c;if($e(t)){const{timeUnit:l,bin:d}=t;if(l&&!n)return{band:po("timeUnitBandSize",i,r)};if(Gt(d)&&!Gn(a))return{band:1}}if(Vg(i.type))return a?Gn(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function lH(e,t,n,i){return Gt(e.bin)||e.timeUnit&&Ii(e)&&e.type==="temporal"?Is({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function cH(e){return we(e,"sort")&&!we(e,"field")}function Ip(e){return we(e,"condition")}function M2(e){const t=e?.condition;return!!t&&!be(t)&&$e(t)}function Up(e){const t=e?.condition;return!!t&&!be(t)&&et(t)}function Yve(e){const t=e?.condition;return!!t&&(be(t)||Fa(t))}function $e(e){return we(e,"field")||e?.aggregate==="count"}function Od(e){return e?.type}function To(e){return we(e,"datum")}function xs(e){return Ii(e)&&!Iv(e)||Lv(e)}function o7(e){return Ii(e)&&e.type==="quantitative"&&!e.bin||Lv(e)}function Lv(e){return To(e)&&Ct(e.datum)}function et(e){return $e(e)||To(e)}function Ii(e){return e&&(we(e,"field")||e.aggregate==="count")&&we(e,"type")}function Fa(e){return we(e,"value")}function Uc(e){return we(e,"scale")||we(e,"sort")}function Nd(e){return we(e,"axis")||we(e,"stack")||we(e,"impute")}function fH(e){return we(e,"legend")}function dH(e){return we(e,"format")||we(e,"formatType")}function Xve(e){return Cr(e,["legend","axis","header","scale"])}function Vve(e){return we(e,"op")}function Be(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Qve(e))n=tq("count");else{let o;if(!t.nofn)if(Vve(e))o=e.op;else{const{bin:u,aggregate:c,timeUnit:l}=e;Gt(u)?(o=pq(u),r=(t.binSuffix??"")+(t.suffix??"")):c?nl(c)?(a=`["${n}"]`,n=`argmax_${c.argmax}`):Eu(c)?(a=`["${n}"]`,n=`argmin_${c.argmin}`):o=String(c):l&&!Ic(l)&&(o=Zye(l),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?oh(n):t.expr?Kj(n,t.expr)+a:Jr(n)+a}function Iv(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return $e(e)&&!!e.bin;case"temporal":return!1}throw new Error(Aq(e.type))}function Wve(e){return Uc(e)&&Md(e.scale?.type)}function Qve(e){return e.aggregate==="count"}function Zve(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Gt(i))return`${n} (binned)`;if(r&&!Ic(r)){const o=Hn(r)?.unit;if(o)return`${n} (${S2(o).join("-")})`}else if(a)return nl(a)?`${n} for max ${a.argmax}`:Eu(a)?`${n} for min ${a.argmin}`:`${$p(a)} of ${n}`;return n}function Kve(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(nl(t))return`${r} for argmax(${t.argmax})`;if(Eu(t))return`${r} for argmin(${t.argmin})`;const a=i&&!Ic(i)?Hn(i):void 0,o=t||a?.unit||a?.maxbins&&"timeunit"||Gt(n)&&"bin";return o?`${o.toUpperCase()}(${r})`:r}const hH=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Kve(e);default:return Zve(e,t)}};let gH=hH;function pH(e){gH=e}function Jve(){pH(hH)}function rd(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=dk(e)?.title;if(!$e(e))return r??e.title;const a=e,o=i?hk(a,t):void 0;return n?yn(r,a.title,o):r??a.title??o}function dk(e){if(Nd(e)&&e.axis)return e.axis;if(fH(e)&&e.legend)return e.legend;if(ck(e)&&e.header)return e.header}function hk(e,t){return gH(e,t)}function Uv(e){if(dH(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=dk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function ebe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(fk(e)&&be(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!nl(n)&&!Eu(n))return"quantitative";if(Uc(e)&&e.scale?.type)switch(i_[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ka(e){if($e(e))return e;if(M2(e))return e.condition}function kn(e){if(et(e))return e;if(Up(e))return e.condition}function mH(e,t,n,i={}){if(ze(e)||Ct(e)||qs(e)){const r=ze(e)?"string":Ct(e)?"number":"boolean";return ke(eye(t,r,e)),{value:e}}return et(e)?Pv(e,t,n,i):Up(e)?{...e,condition:Pv(e.condition,t,n,i)}:e}function Pv(e,t,n,i){if(dH(e)){const{format:r,formatType:a,...o}=e;if(Ec(a)&&!n.customFormatTypes)return ke(KO(t)),Pv(o,t,n,i)}else{const r=Nd(e)?"axis":fH(e)?"legend":ck(e)?"header":null;if(r&&e[r]){const{format:a,formatType:o,...u}=e[r];if(Ec(o)&&!n.customFormatTypes)return ke(KO(t)),Pv({...e,[r]:u},t,n,i)}}return $e(e)?gk(e,t,i):tbe(e)}function tbe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=Ct(n)?"quantitative":ze(n)?"nominal":Lc(n)?"temporal":void 0,{...e,type:t}}function gk(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:o}=e,u={...e};if(!n&&i&&!I5(i)&&!nl(i)&&!Eu(i)&&(ke(nye(i)),delete u.aggregate),r&&(u.timeUnit=Hn(r)),o&&(u.field=`${o}`),Gt(a)&&(u.bin=O2(a,t)),Zn(a)&&!vn(t)&&ke(Nye(t)),Ii(u)){const{type:c}=u,l=ave(c);c!==l&&(u.type=l),c!=="quantitative"&&E2(i)&&(ke(tye(c,i)),u.type="quantitative")}else if(!lq(t)){const c=ebe(u,t);u.type=c}if(Ii(u)){const{compatible:c,warning:l}=nbe(u,t)||{};c===!1&&ke(l)}if(fk(u)&&ze(u.sort)){const{sort:c}=u;if(r7(c))return{...u,sort:{encoding:c}};const l=c.substring(1);if(c.charAt(0)==="-"&&r7(l))return{...u,sort:{encoding:l,order:"descending"}}}if(ck(u)){const{header:c}=u;if(c){const{orient:l,...d}=c;if(l)return{...u,header:{...d,labelOrient:c.labelOrient||l,titleOrient:c.titleOrient||l}}}}return u}function O2(e,t){return qs(e)?{maxbins:qO(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:qO(t)}:e}const Lf={compatible:!0};function nbe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case du:case hu:case p2:return Iv(e)?Lf:{compatible:!1,warning:oye(t)};case en:case Xn:case Qs:case uh:case nr:case _o:case wo:case Mp:case Op:case m2:case mc:case y2:case v2:case Nc:case na:case Ra:case b2:return Lf;case za:case ea:case Ba:case La:return n!==bc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Lf;case ku:case Ks:case Js:case el:case Fu:case wu:case _u:case Na:case Ao:case Zs:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Lf;case ir:case tl:return!Iv(e)&&!Wve(e)?{compatible:!1,warning:uye(t)}:Lf;case Td:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Lf}}function Rd(e){const{formatType:t}=Uv(e);return t==="time"||!t&&ibe(e)}function ibe(e){return e&&(e.type==="temporal"||$e(e)&&!!e.timeUnit)}function N2(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&Hn(t)?.unit;let o=a||n==="temporal",u;return Rp(e)?u=e.expr:qe(e)?u=e.signal:Lc(e)?(o=!0,u=vc(e)):(ze(e)||Ct(e))&&o&&(u=`datetime(${kt(e)})`,Yye(a)&&(Ct(e)&&e<1e4||ze(e)&&isNaN(Date.parse(e)))&&(u=vc({[a]:e}))),u?i&&o?`time(${u})`:u:r?void 0:kt(e)}function yH(e,t){const{type:n}=e;return t.map(i=>{const r=$e(e)&&!Ic(e.timeUnit)?e.timeUnit:void 0,a=N2(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function Pp(e,t){return Gt(e.bin)?ko(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const u7={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function jp(e){return e?.condition}const vH=["domain","grid","labels","ticks","title"],rbe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},bH={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},abe={...bH,style:1,labelExpr:1,encoding:1};function s7(e){return Ue(abe,e)}const obe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},xH=_e(obe);function $u(e){return we(e,"mark")}class R2{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return $u(t)?Rve(t.mark)===this.name:!1}}function Jl(e,t){const n=e?.[t];return n?be(n)?Fd(n,i=>!!i.field):$e(n)||M2(n):!1}function EH(e,t){const n=e?.[t];return n?be(n)?Fd(n,i=>!!i.field):$e(n)||To(n)||Up(n):!1}function DH(e,t){if(vn(t)){const n=e[t];if(($e(n)||To(n))&&(jq(n.type)||$e(n)&&n.timeUnit)){const i=N5(t);return EH(e,i)}}return!1}function CH(e){return Fd(t1e,t=>{if(Jl(e,t)){const n=e[t];if(be(n))return Fd(n,i=>!!i.aggregate);{const i=ka(n);return i&&!!i.aggregate}}return!1})}function SH(e,t){const n=[],i=[],r=[],a=[],o={};return pk(e,(u,c)=>{if($e(u)){const{field:l,aggregate:d,bin:h,timeUnit:p,...y}=u;if(d||p||h){const b=dk(u)?.title;let x=Be(u,{forAs:!0});const D={...b?[]:{title:rd(u,t,{allowDisabling:!0})},...y,field:x};if(d){let S;if(nl(d)?(S="argmax",x=Be({op:"argmax",field:d.argmax},{forAs:!0}),D.field=`${x}.${l}`):Eu(d)?(S="argmin",x=Be({op:"argmin",field:d.argmin},{forAs:!0}),D.field=`${x}.${l}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(S=d),S){const A={op:S,as:x};l&&(A.field=l),a.push(A)}}else if(n.push(x),Ii(u)&&Gt(h)){if(i.push({bin:h,field:l,as:x}),n.push(Be(u,{binSuffix:"end"})),Pp(u,c)&&n.push(Be(u,{binSuffix:"range"})),vn(c)){const S={field:`${x}_end`};o[`${c}2`]=S}D.bin="binned",lq(c)||(D.type=bc)}else if(p&&!Ic(p)){r.push({timeUnit:p,field:l,as:x});const S=Ii(u)&&u.type!==$d&&"time";S&&(c===Mp||c===mc?D.formatType=S:d1e(c)?D.legend={formatType:S,...D.legend}:vn(c)&&(D.axis={formatType:S,...D.axis}))}o[c]=D}else n.push(l),o[c]=e[c]}else o[c]=e[c]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:o}}function ube(e,t,n){const i=g1e(t,n);if(i){if(i==="binned"){const r=e[t===Na?en:Xn];return!!($e(r)&&$e(e[t])&&Zn(r.bin))}}else return!1;return!0}function sbe(e,t,n,i){const r={};for(const a of _e(e))sq(a)||ke(aye(a));for(let a of u1e){if(!e[a])continue;const o=e[a];if(Np(a)){const u=o1e(a),c=r[u];if($e(c)&&rve(c.type)&&$e(o)&&!c.timeUnit){ke(J1e(u));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(ke(K1e),a=na),!ube(e,a,t)){ke(C2(a,t));continue}if(a===Fu&&t==="line"&&ka(e[a])?.aggregate){ke(rye);continue}if(a===nr&&(n?"fill"in e:"stroke"in e)){ke(_q("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===Op||a===Td&&!be(o)&&!Fa(o)||a===mc&&be(o)){if(o){if(a===Td){const u=e[a];if(cH(u)){r[a]=u;continue}}r[a]=Ie(o).reduce((u,c)=>($e(c)?u.push(gk(c,a)):ke(n_(c,a)),u),[])}}else{if(a===mc&&o===null)r[a]=null;else if(!$e(o)&&!To(o)&&!Fa(o)&&!Ip(o)&&!qe(o)){ke(n_(o,a));continue}r[a]=mH(o,a,i)}}return r}function B2(e,t){const n={};for(const i of _e(e)){const r=mH(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function lbe(e){const t=[];for(const n of _e(e))if(Jl(e,n)){const i=e[n],r=Ie(i);for(const a of r)$e(a)?t.push(a):M2(a)&&t.push(a.condition)}return t}function pk(e,t,n){if(e)for(const i of _e(e)){const r=e[i];if(be(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function cbe(e,t,n,i){return e?_e(e).reduce((r,a)=>{const o=e[a];return be(o)?o.reduce((u,c)=>t.call(i,u,c,a),r):t.call(i,r,o,a)},n):n}function AH(e,t){return _e(t).reduce((n,i)=>{switch(i){case en:case Xn:case y2:case b2:case v2:case Na:case Ao:case Qs:case uh:case na:case wu:case Ra:case _u:case Zs:case Ba:case za:case La:case ea:case Mp:case ir:case Nc:case mc:return n;case Td:if(e==="line"||e==="trail")return n;case Op:case m2:{const r=t[i];if(be(r)||$e(r))for(const a of Ie(r))a.aggregate||n.push(Be(a,{}));return n}case Fu:if(e==="trail")return n;case nr:case _o:case wo:case ku:case Ks:case Js:case tl:case el:{const r=ka(t[i]);return r&&!r.aggregate&&n.push(Be(r,{})),n}}},[])}function fbe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(be(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return be(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function o_(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:o,titlePrefix:u})=>{const c=i?` of ${mk(t)}`:"";return{field:o+t.field,type:t.type,title:qe(u)?{signal:`${u}"${escape(c)}"`}:u+c}}),a=lbe(n).map(Xve);return{tooltip:[...r,...eo(a,mt)]}}function mk(e){const{title:t,field:n}=e;return yn(t,n)}function yk(e,t,n,i,r){const{scale:a,axis:o}=n;return({partName:u,mark:c,positionPrefix:l,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=mk(n);return _H(e,u,r,{mark:c,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...o!==void 0?{axis:o}:{}},...ze(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function _H(e,t,n,i){const{clip:r,color:a,opacity:o}=e,u=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...o?{opacity:o}:{},...mo(i.mark)?i.mark:{type:i.mark},style:`${u}-${String(t)}`,...qs(e[t])?{}:e[t]}}]:[]}function wH(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],o=i[`${r}2`],u=i[`${r}Error`],c=i[`${r}Error2`];return{continuousAxisChannelDef:N1(a,n),continuousAxisChannelDef2:N1(o,n),continuousAxisChannelDefError:N1(u,n),continuousAxisChannelDefError2:N1(c,n),continuousAxis:r}}function N1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&ke(Oye(n,t)),i}else return e}function FH(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(mo(n)&&n.orient)return n.orient;if(xs(r)){if(xs(a)){const o=$e(r)&&r.aggregate,u=$e(a)&&a.aggregate;if(!o&&u===t)return"vertical";if(!u&&o===t)return"horizontal";if(o===t&&u===t)throw new Error("Both x and y cannot have aggregate");return Rd(a)&&!Rd(r)?"horizontal":"vertical"}return"horizontal"}else{if(xs(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const jv="boxplot",dbe=["box","median","outliers","rule","ticks"],hbe=new R2(jv,TH);function kH(e){return Ct(e)?"tukey":e}function TH(e,{config:t}){e={...e,encoding:B2(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...o}=e,u=mo(n)?n:{type:n};r&&ke(Sq("boxplot"));const c=u.extent??t.boxplot.extent,l=It("size",u,t),d=u.invalid,h=kH(c),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:x,groupby:D,aggregate:S,encodingWithoutContinuousAxis:A,ticksOrient:w,boxOrient:_,customTooltipWithoutAggregatedField:k}=gbe(e,c,t),F=oh(b.field),{color:M,size:N,...P}=A,L=Ae=>yk(u,x,b,Ae,t.boxplot),H=L(P),I=L(A),U=(Le(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",z=L({...P,...N?{size:N}:{},color:{condition:{test:`${Mt(`lower_box_${b.field}`)} >= ${Mt(`upper_box_${b.field}`)}`,...M||{value:U}}}}),T=o_([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),R={type:"tick",color:"black",opacity:1,orient:w,invalid:d,aria:!1},q=h==="min-max"?T:o_([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),G=[...H({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...H({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...H({partName:"ticks",mark:R,positionPrefix:"lower_whisker",extraEncoding:q}),...H({partName:"ticks",mark:R,positionPrefix:"upper_whisker",extraEncoding:q})],O=[...h!=="tukey"?G:[],...I({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:_,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:T}),...z({partName:"median",mark:{type:"tick",invalid:d,...Le(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:T})];if(h==="min-max")return{...o,transform:(o.transform??[]).concat(v),layer:O};const Z=Mt(`lower_box_${b.field}`),ee=Mt(`upper_box_${b.field}`),X=`(${ee} - ${Z})`,Q=`${Z} - ${c} * ${X}`,ne=`${ee} + ${c} * ${X}`,ce=Mt(b.field),Fe={joinaggregate:$H(b.field),groupby:D},Me={transform:[{filter:`(${Q} <= ${ce}) && (${ce} <= ${ne})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${F}`},{op:"max",field:b.field,as:`upper_whisker_${F}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${F}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${F}`},...S],groupby:D}],layer:G},{tooltip:j,...W}=P,{scale:te,axis:Y}=b,le=mk(b),Te=_H(u,"outliers",t.boxplot,{transform:[{filter:`(${ce} < ${Q}) || (${ce} > ${ne})`}],mark:"point",encoding:{[x]:{field:b.field,type:b.type,...le!==void 0?{title:le}:{},...te!==void 0?{scale:te}:{},...Y!==void 0?{axis:Y}:{}},...W,...M?{color:M}:{},...k?{tooltip:k}:{}}})[0];let oe;const ge=[...p,...y,Fe];return Te?oe={transform:ge,layer:[Te,Me]}:(oe=Me,oe.transform.unshift(...ge)),{...o,layer:[oe,{transform:v,layer:O}]}}function $H(e){const t=oh(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function gbe(e,t,n){const i=FH(e,jv),{continuousAxisChannelDef:r,continuousAxis:a}=wH(e,i,jv),o=r.field,u=oh(o),c=kH(t),l=[...$H(o),{op:"median",field:o,as:`mid_box_${u}`},{op:"min",field:o,as:(c==="min-max"?"lower_whisker_":"min_")+u},{op:"max",field:o,as:(c==="min-max"?"upper_whisker_":"max_")+u}],d=c==="min-max"||c==="tukey"?[]:[{calculate:`${Mt(`upper_box_${u}`)} - ${Mt(`lower_box_${u}`)}`,as:`iqr_${u}`},{calculate:`min(${Mt(`upper_box_${u}`)} + ${Mt(`iqr_${u}`)} * ${t}, ${Mt(`max_${u}`)})`,as:`upper_whisker_${u}`},{calculate:`max(${Mt(`lower_box_${u}`)} - ${Mt(`iqr_${u}`)} * ${t}, ${Mt(`min_${u}`)})`,as:`lower_whisker_${u}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=fbe(p),{bins:b,timeUnits:x,aggregate:D,groupby:S,encoding:A}=SH(v,n),w=i==="vertical"?"horizontal":"vertical",_=i,k=[...b,...x,{aggregate:[...D,...l],groupby:S},...d];return{bins:b,timeUnits:x,transform:k,groupby:S,aggregate:D,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:w,boxOrient:_,customTooltipWithoutAggregatedField:y}}const vk="errorbar",pbe=["ticks","rule"],mbe=new R2(vk,MH);function MH(e,{config:t}){e={...e,encoding:B2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:o,markDef:u,outerSpec:c,tooltipEncoding:l}=OH(e,vk,t);delete a.size;const d=yk(u,r,i,a,t.errorbar),h=u.thickness,p=u.size,y={type:"tick",orient:o,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:l}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...c,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function ybe(e,t){const{encoding:n}=e;if(vbe(n))return{orient:FH(e,t),inputType:"raw"};const i=bbe(n),r=xbe(n),a=n.x,o=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const u=n.x2,c=n.y2;if(et(u)&&et(c))throw new Error(`${t} cannot have both x2 and y2`);if(et(u)){if(xs(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(et(c)){if(xs(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const u=n.xError,c=n.xError2,l=n.yError,d=n.yError2;if(et(c)&&!et(u))throw new Error(`${t} cannot have xError2 without xError`);if(et(d)&&!et(l))throw new Error(`${t} cannot have yError2 without yError`);if(et(u)&&et(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(et(u)){if(xs(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(et(l)){if(xs(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function vbe(e){return(et(e.x)||et(e.y))&&!et(e.x2)&&!et(e.y2)&&!et(e.xError)&&!et(e.xError2)&&!et(e.yError)&&!et(e.yError2)}function bbe(e){return et(e.x2)||et(e.y2)}function xbe(e){return et(e.xError)||et(e.xError2)||et(e.yError)||et(e.yError2)}function OH(e,t,n){const{mark:i,encoding:r,params:a,projection:o,...u}=e,c=mo(i)?i:{type:i};a&&ke(Sq(t));const{orient:l,inputType:d}=ybe(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=wH(e,l,t),{errorBarSpecificAggregate:x,postAggregateCalculates:D,tooltipSummary:S,tooltipTitleWithFieldName:A}=Ebe(c,h,p,y,v,d,t,n),{[b]:w,[b==="x"?"x2":"y2"]:_,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:F,...M}=r,{bins:N,timeUnits:P,aggregate:L,groupby:H,encoding:I}=SH(M,n),U=[...L,...x],z=d!=="raw"?[]:H,T=o_(S,h,I,A);return{transform:[...u.transform??[],...N,...P,...U.length===0?[]:[{aggregate:U,groupby:z}],...D],groupby:z,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:I,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:c,outerSpec:u,tooltipEncoding:T}}function Ebe(e,t,n,i,r,a,o,u){let c=[],l=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":u.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&ke(Mye(y,v,o)),v==="stderr"||v==="stdev")c=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],l=[{calculate:`${Mt(`center_${d}`)} + ${Mt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${Mt(`center_${d}`)} - ${Mt(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:$p(y)},{fieldPrefix:"upper_",titlePrefix:l7(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:l7(y,v,"-")}],p=!0;else{let b,x,D;v==="ci"?(b="mean",x="ci0",D="ci1"):(b="median",x="q1",D="q3"),c=[{op:x,field:d,as:`lower_${d}`},{op:D,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:rd({field:d,aggregate:D,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:rd({field:d,aggregate:x,type:"quantitative"},u,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:rd({field:d,aggregate:b,type:"quantitative"},u,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&ke($ye(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],l=[{calculate:Mt(n.field),as:`upper_${d}`},{calculate:Mt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],l=[{calculate:`${Mt(d)} + ${Mt(i.field)}`,as:`upper_${d}`}],r?l.push({calculate:`${Mt(d)} + ${Mt(r.field)}`,as:`lower_${d}`}):l.push({calculate:`${Mt(d)} - ${Mt(i.field)}`,as:`lower_${d}`}));for(const y of l)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:pc(pc(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:c,tooltipSummary:h,tooltipTitleWithFieldName:p}}function l7(e,t,n){return`${$p(e)} ${n} ${t}`}const bk="errorband",Dbe=["band","borders"],Cbe=new R2(bk,NH);function NH(e,{config:t}){e={...e,encoding:B2(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:o,outerSpec:u,tooltipEncoding:c}=OH(e,bk,t),l=o,d=yk(l,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):l.interpolate?ke(e7("interpolate")):l.tension&&ke(e7("tension")),{...u,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:c}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:c})]}}const RH={};function xk(e,t,n){const i=new R2(e,t);RH[e]={normalizer:i,parts:n}}function Sbe(){return _e(RH)}xk(jv,TH,dbe);xk(vk,MH,pbe);xk(bk,NH,Dbe);const Abe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],BH={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},zH={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},_be=_e(BH),wbe=_e(zH),Fbe={header:1,headerRow:1,headerColumn:1,headerFacet:1},LH=_e(Fbe),IH=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],kbe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Tbe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Ta="_vgsid_",$be={point:{on:"click",fields:[Ta],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ek(e){return e==="legend"||!!e?.legend}function OC(e){return Ek(e)&&Le(e)}function Dk(e){return!!e?.select}function UH(e){const t=[];for(const n of e||[]){if(Dk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const o={...a,bind:r,init:i};t.push(o)}else{const o={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(o)}}return t}function Mbe(e){return z2(e)||Sk(e)||Ck(e)}function Ck(e){return we(e,"concat")}function z2(e){return we(e,"vconcat")}function Sk(e){return we(e,"hconcat")}function PH({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function yo(e){return we(e,"step")}function c7(e){return we(e,"view")||we(e,"width")||we(e,"height")}const f7=20,Obe={align:1,bounds:1,center:1,columns:1,spacing:1},Nbe=_e(Obe);function Rbe(e,t,n){const i=n[t],r={},{spacing:a,columns:o}=i;a!==void 0&&(r.spacing=a),o!==void 0&&($2(e)&&!Lp(e.facet)||Ck(e))&&(r.columns=o),z2(e)&&(r.columns=1);for(const u of Nbe)if(e[u]!==void 0)if(u==="spacing"){const c=e[u];r[u]=Ct(c)?c:{row:c.row??a,column:c.column??a}}else r[u]=e[u];return r}function u_(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function s_(e,t){const n=qv(e,t);return yo(n)?n.step:jH}function qv(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return yn(n,{step:e.step})}const jH=20,Bbe={continuousWidth:300,continuousHeight:300,step:jH},zbe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Bbe,mark:kve,arc:{},area:{},bar:Ove,circle:{},geoshape:{},image:{},line:{},point:{},rect:ak,rule:{color:"black"},square:{},text:{color:"black"},tick:Nve,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:cve,projection:{},legend:kbe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:$be,style:{},title:{},facet:{spacing:f7},concat:{spacing:f7},normalizedNumberFormat:".0%"},Wo=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],d7={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},h7={blue:Wo[0],orange:Wo[1],red:Wo[2],teal:Wo[3],green:Wo[4],yellow:Wo[5],purple:Wo[6],pink:Wo[7],brown:Wo[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Lbe(e={}){return{signals:[{name:"color",value:Le(e)?{...h7,...e}:h7}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function Ibe(e){return{signals:[{name:"fontSize",value:Le(e)?{...d7,...e}:d7}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Ube(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function qH(e){const t=_e(e||{}),n={};for(const i of t){const r=e[i];n[i]=jp(r)?yq(r):yr(r)}return n}function Pbe(e){const t=_e(e),n={};for(const i of t)n[i]=qH(e[i]);return n}const jbe=[...Kq,...xH,...LH,"background","padding","legend","lineBreak","scale","style","title","view"];function HH(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,o=qd({},Je(zbe),n?Ube(n):{},t?Lbe(t):{},i?Ibe(i):{},a||{});r&&Hd(o,"selection",r,!0);const u=Cr(o,jbe);for(const c of["background","lineBreak","padding"])o[c]&&(u[c]=yr(o[c]));for(const c of Kq)o[c]&&(u[c]=Kn(o[c]));for(const c of xH)o[c]&&(u[c]=qH(o[c]));for(const c of LH)o[c]&&(u[c]=Kn(o[c]));if(o.legend&&(u.legend=Kn(o.legend)),o.scale){const{invalid:c,...l}=o.scale,d=Kn(c,{level:1});u.scale={...Kn(l),..._e(d).length>0?{invalid:d}:{}}}return o.style&&(u.style=Pbe(o.style)),o.title&&(u.title=Kn(o.title)),o.view&&(u.view=Kn(o.view)),u}const qbe=new Set(["view",...Cve]),Hbe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Gbe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Fve};function Ybe(e){e=Je(e);for(const t of Hbe)delete e[t];if(e.axis)for(const t in e.axis)jp(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Abe)delete e.legend[t];if(e.mark){for(const t of n7)delete e.mark[t];e.mark.tooltip&&Le(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(UH(e.params)),delete e.params);for(const t of qbe){for(const i of n7)delete e[t][i];const n=Gbe[t];if(n)for(const i of n)delete e[t][i];Vbe(e,t)}for(const t of Sbe())delete e[t];Xbe(e);for(const t in e)Le(e[t])&&qt(e[t])&&delete e[t];return qt(e)?void 0:e}function Xbe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=mq(e.title);qt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),qt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),qt(i)?delete e.title:e.title=i}function Vbe(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};qt(a)||(e.style[n??t]=a),delete e[t]}function L2(e){return we(e,"layer")}function Wbe(e){return we(e,"repeat")}function Qbe(e){return!be(e.repeat)&&we(e.repeat,"layer")}class Ak{map(t,n){return $2(t)?this.mapFacet(t,n):Wbe(t)?this.mapRepeat(t,n):Sk(t)?this.mapHConcat(t,n):z2(t)?this.mapVConcat(t,n):Ck(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(L2(t))return this.mapLayer(t,n);if($u(t))return this.mapUnit(t,n);throw new Error(U5(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const Zbe={zero:1,center:1,normalize:1};function Kbe(e){return Ue(Zbe,e)}const Jbe=new Set([Wq,w2,_2,Bv,k2,ik,rk,F2,Qq,nk]),e2e=new Set([w2,_2,Wq]);function If(e){return $e(e)&&Od(e)==="quantitative"&&!e.bin}function g7(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),o=e[t],u=e[r];if($e(o)&&$e(u))if(If(o)&&If(u)){if(o.stack)return t;if(u.stack)return r;const c=$e(o)&&!!o.aggregate,l=$e(u)&&!!u.aggregate;if(c!==l)return c?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(If(o))return t;if(If(u))return r}else{if(If(o))return a&&n==="vertical"?void 0:t;if(If(u))return a&&n==="horizontal"?void 0:r}}function t2e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function GH(e,t){const n=mo(e)?e:{type:e},i=n.type;if(!Jbe.has(i))return null;const r=g7(t,"x",n)||g7(t,"theta",n);if(!r)return null;const a=t[r],o=$e(a)?Be(a,{}):void 0,u=t2e(r),c=[],l=new Set;if(t[u]){const b=t[u],x=$e(b)?Be(b,{}):void 0;x&&x!==o&&(c.push(u),l.add(x))}const d=u==="x"?"xOffset":"yOffset",h=t[d],p=$e(h)?Be(h,{}):void 0;p&&p!==o&&(c.push(d),l.add(p));const y=s1e.reduce((b,x)=>{if(x!=="tooltip"&&Jl(t,x)){const D=t[x];for(const S of Ie(D)){const A=ka(S);if(A.aggregate)continue;const w=Be(A,{});(!w||!l.has(w))&&b.push({channel:x,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?qs(a.stack)?v=a.stack?"zero":null:v=a.stack:e2e.has(i)&&(v="zero"),!v||!Kbe(v)||CH(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Jn.LINEAR&&a?.stack&&ke(Fye(a.scale.type)),et(t[Fo(r)])?(a.stack!==void 0&&ke(wye(r)),null):($e(a)&&a.aggregate&&!E1e.has(a.aggregate)&&ke(kye(a.aggregate)),{groupbyChannels:c,groupbyFields:l,fieldChannel:r,impute:a.impute===null?!1:il(i),stackBy:y,offset:v}))}function YH(e,t,n){const i=Kn(e),r=It("orient",i,n);if(i.orient=a2e(i.type,t,r),r!==void 0&&r!==i.orient&&ke(fye(i.orient,r)),i.type==="bar"&&i.orient){const c=It("cornerRadiusEnd",i,n);if(c!==void 0){const l=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:$ve[i.orient];for(const d of l)i[d]=c;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=It("opacity",i,n),o=It("fillOpacity",i,n);return a===void 0&&o===void 0&&(i.opacity=i2e(i.type,t)),It("cursor",i,n)===void 0&&(i.cursor=n2e(i,t,n)),i}function n2e(e,t,n){return t.href||e.href||It("href",e,n)?"pointer":e.cursor}function i2e(e,t){if(ft([k2,nk,ik,rk],e)&&!CH(t))return .7}function r2e(e,t,{graticule:n}){if(n)return!1;const i=po("filled",e,t),r=e.type;return yn(i,r!==k2&&r!==F2&&r!==Bv)}function a2e(e,t,n){switch(e){case k2:case ik:case rk:case Qq:case Eve:case xve:return}const{x:i,y:r,x2:a,y2:o}=t;switch(e){case w2:if($e(i)&&(Zn(i.bin)||$e(r)&&r.aggregate&&!i.aggregate))return"vertical";if($e(r)&&(Zn(r.bin)||$e(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(o||a){if(n)return n;if(!a)return($e(i)&&i.type===bc&&!Gt(i.bin)||Lv(i))&&$e(r)&&Zn(r.bin)?"horizontal":"vertical";if(!o)return($e(r)&&r.type===bc&&!Gt(r.bin)||Lv(r))&&$e(i)&&Zn(i.bin)?"vertical":"horizontal"}case Bv:if(a&&!($e(i)&&Zn(i.bin))&&o&&!($e(r)&&Zn(r.bin)))return;case _2:if(o)return $e(r)&&Zn(r.bin)?"horizontal":"vertical";if(a)return $e(i)&&Zn(i.bin)?"vertical":"horizontal";if(e===Bv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case F2:case nk:{const u=o7(i),c=o7(r);if(n)return n;if(u&&!c)return e!=="tick"?"horizontal":"vertical";if(!u&&c)return e!=="tick"?"vertical":"horizontal";if(u&&c)return"vertical";{const l=Ii(i)&&i.type===$d,d=Ii(r)&&r.type===$d;if(l&&!d)return"vertical";if(!l&&d)return"horizontal"}return}}return"vertical"}function o2e(e){const{point:t,line:n,...i}=e;return _e(i).length>1?i:i.type}function u2e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Cr(e[t],["point","line"])});return e}function NC(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?Le(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?Le(t.point)?t.point:{}:void 0}function p7(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class s2e{name="path-overlay";hasMatchingType(t,n){if($u(t)){const{mark:i,encoding:r}=t,a=mo(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!NC(a,n[a.type],r);case"area":return!!NC(a,n[a.type],r)||!!p7(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:o,mark:u,name:c,encoding:l,...d}=t,h=B2(l,r),p=mo(u)?u:{type:u},y=NC(p,r[p.type],h),v=p.type==="area"&&p7(p,r[p.type]),b=[{name:c,...a?{params:a}:{},mark:o2e({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:Cr(h,["shape"])}],x=GH(YH(p,h,r),h);let D=h;if(x){const{fieldChannel:S,offset:A}=x;D={...h,[S]:{...h[S],...A?{stack:A}:{}}}}return D=Cr(D,["y2","x2"]),v&&b.push({...o?{projection:o}:{},mark:{type:"line",...wd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:D}),y&&b.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...wd(p,["clip","tooltip"]),...y},encoding:D}),i({...d,layer:b},{...n,config:u2e(r)})}}function l2e(e,t){return t?Lp(e)?VH(e,t):XH(e,t):e}function RC(e,t){return t?VH(e,t):e}function l_(e,t,n){const i=t[e];if(Gve(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};ke(j1e(i.repeat));return}return t}function XH(e,t){if(e=l_("field",e,t),e!==void 0){if(e===null)return null;if(fk(e)&&gu(e.sort)){const n=l_("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function m7(e,t){if($e(e))return XH(e,t);{const n=l_("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function y7(e,t){if(et(e)){const n=m7(e,t);if(n)return n;if(Ip(e))return{condition:e.condition}}else{if(Up(e)){const n=m7(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function VH(e,t){const n={};for(const i in e)if(we(e,i)){const r=e[i];if(be(r))n[i]=r.map(a=>y7(a,t)).filter(a=>a);else{const a=y7(r,t);a!==void 0&&(n[i]=a)}}return n}class c2e{name="RuleForRangedLine";hasMatchingType(t){if($u(t)){const{encoding:n,mark:i}=t;if(i==="line"||mo(i)&&i.type==="line")for(const r of a1e){const a=Rc(r),o=n[a];if(n[r]&&($e(o)&&!Zn(o.bin)||To(o)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return ke(cye(!!r.x2,!!r.y2)),i({...t,mark:Le(a)?{...a,type:"rule"}:"rule"},n)}}class f2e extends Ak{nonFacetUnitNormalizers=[hbe,mbe,Cbe,new s2e,new c2e];map(t,n){if($u(t)){const i=Jl(t.encoding,du),r=Jl(t.encoding,hu),a=Jl(t.encoding,p2);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=RC(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(c=>c).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(o,n);const u=this.mapLayerOrUnit.bind(this);for(const c of this.nonFacetUnitNormalizers)if(c.hasMatchingType(o,n.config))return c.run(o,n,u);return o}mapRepeat(t,n){return Qbe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:o,column:u,layer:c}=i,{repeater:l={},repeaterPrefix:d=""}=n;return o||u?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...u?{column:u}:{}},spec:{repeat:{layer:c},spec:r}},n):{...a,layer:c.map(h=>{const p={...l,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Jt(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...o}=t;!be(i)&&t.columns&&(t=Cr(t,["columns"]),ke(QO("repeat")));const u=[],{repeater:c={},repeaterPrefix:l=""}=n,d=!be(i)&&i.row||[c?c.row:null],h=!be(i)&&i.column||[c?c.column:null],p=be(i)&&i||[c?c.repeat:null];for(const v of p)for(const b of d)for(const x of h){const D={repeat:v,row:b,column:x,layer:c.layer},S=`${(r.name?`${r.name}_`:"")+l}child__${be(i)?`${Jt(v)}`:(i.row?`row_${Jt(b)}`:"")+(i.column?`column_${Jt(x)}`:"")}`,A=this.map(r,{...n,repeater:D,repeaterPrefix:S});A.name=S,u.push(Cr(A,["data"]))}const y=be(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...o,columns:y,concat:u}}mapFacet(t,n){const{facet:i}=t;return Lp(i)&&t.columns&&(t=Cr(t,["columns"]),ke(QO("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:o,config:u}=n,c=b7({parentProjection:o,projection:r}),l=v7({parentEncoding:a,encoding:RC(i,n.repeater)});return this.mapUnit({...t,...c?{projection:c}:{},...l?{encoding:l}:{}},{config:u})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...o}=t.encoding,{mark:u,width:c,projection:l,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:x}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),D=RC(o,n.repeater);return this.mapFacet({...v,...x,facet:b,spec:{...c?{width:c}:{},...d?{height:d}:{},...h?{view:h}:{},...l?{projection:l}:{},mark:u,encoding:D,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&ke(sye([...i?[du]:[],...r?[hu]:[]]));const o={},u={};for(const c of[du,hu]){const l=t[c];if(l){const{align:d,center:h,spacing:p,columns:y,...v}=l;o[c]=v;for(const b of["align","center","spacing"])l[b]!==void 0&&(u[b]??={},u[b][c]=l[b])}}return{facetMapping:o,layout:u}}else{const{align:o,center:u,spacing:c,columns:l,...d}=a;return{facetMapping:l2e(d,n.repeater),layout:{...o?{align:o}:{},...u?{center:u}:{},...c?{spacing:c}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:o,...u}=t,c={...r,parentEncoding:v7({parentEncoding:n,encoding:a,layer:!0}),parentProjection:b7({parentProjection:i,projection:o})};return super.mapLayer({...u,...t.name?{name:[c.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},c)}}function v7({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([..._e(e),..._e(t)]);for(const a of r){const o=t[a],u=e[a];if(et(o)){const c={...u,...o};i[a]=c}else Up(o)?i[a]={...o,condition:{...u,...o.condition}}:o||o===null?i[a]=o:(n||Fa(u)||qe(u)||et(u)||be(u))&&(i[a]=u)}}else i=t;return!i||qt(i)?void 0:i}function b7(e){const{parentProjection:t,projection:n}=e;return t&&n&&ke(Z1e({parentProjection:t,projection:n})),n??t}function _k(e){return we(e,"filter")}function d2e(e){return we(e,"stop")}function WH(e){return we(e,"lookup")}function h2e(e){return we(e,"data")}function g2e(e){return we(e,"param")}function p2e(e){return we(e,"pivot")}function m2e(e){return we(e,"density")}function y2e(e){return we(e,"quantile")}function v2e(e){return we(e,"regression")}function b2e(e){return we(e,"loess")}function x2e(e){return we(e,"sample")}function E2e(e){return we(e,"window")}function D2e(e){return we(e,"joinaggregate")}function C2e(e){return we(e,"flatten")}function S2e(e){return we(e,"calculate")}function QH(e){return we(e,"bin")}function A2e(e){return we(e,"impute")}function _2e(e){return we(e,"timeUnit")}function w2e(e){return we(e,"aggregate")}function F2e(e){return we(e,"stack")}function k2e(e){return we(e,"fold")}function T2e(e){return we(e,"extent")&&!we(e,"density")&&!we(e,"regression")}function $2e(e){return e.map(t=>_k(t)?{filter:nd(t.filter,ive)}:t)}class M2e extends Ak{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=x7(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=x7(t,n),t.encoding){const i={};for(const[r,a]of zs(t.encoding))i[r]=ZH(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:zs(i).map(([a,o])=>{const{init:u,bind:c,empty:l,...d}=o;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=l!=="none";for(const h of Dn(n.selectionPredicates[a]??{}))h.empty=l!=="none";return{name:a,value:u,select:d,bind:c}})}:t}}function x7(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(_k(a))return{filter:c_(a,t)};if(QH(a)&&Bc(a.bin))return{...a,bin:KH(a.bin)};if(WH(a)){const{selection:o,...u}=a.from;return o?{...a,from:{param:o,...u}}:a}return a});return{...i,transform:r}}return e}function ZH(e,t){const n=Je(e);if($e(n)&&Bc(n.bin)&&(n.bin=KH(n.bin)),Uc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(Ip(n))if(be(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:o,...u}=i;return a?i:{...u,test:c_(i,t)}});else{const{selection:i,param:r,test:a,...o}=ZH(n.condition,t);n.condition=r?n.condition:{...o,test:c_(n.condition,t)}}return n}function KH(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function c_(e,t){const n=i=>nd(i,r=>{const a=t.emptySelections[r]??!0,o={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(o),o});return e.selection?n(e.selection):nd(e.test||e.filter,i=>i.selection?n(i.selection):i)}class f_ extends Ak{map(t,n){const i=n.selections??[];if(t.params&&!$u(t)){const r=[];for(const a of t.params)Dk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const o of i)if(!o.views||!o.views.length)a.push(o);else for(const u of o.views)(ze(u)&&(u===t.name||r.includes(u))||be(u)&&u.map(c=>r.indexOf(c)).every((c,l,d)=>c!==-1&&(l===0||c>d[l-1])))&&a.push(o);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=f_.prototype[e];f_.prototype[e]=function(n,i){return t.call(this,n,O2e(n,i))}}function O2e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function JH(e,t){t===void 0&&(t=HH(e.config));const n=z2e(e,t),{width:i,height:r}=e,a=L2e(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const N2e=new f2e,R2e=new M2e,B2e=new f_;function z2e(e,t={}){const n={config:t};return B2e.map(N2e.map(R2e.map(e,n),n),n)}function E7(e){return ze(e)?{type:e}:e??{}}function L2e(e,t,n){let{width:i,height:r}=t;const a=$u(e)||L2(e),o={};a?i=="container"&&r=="container"?(o.type="fit",o.contains="padding"):i=="container"?(o.type="fit-x",o.contains="padding"):r=="container"&&(o.type="fit-y",o.contains="padding"):(i=="container"&&(ke(YO("width")),i=void 0),r=="container"&&(ke(YO("height")),r=void 0));const u={type:"pad",...o,...n?E7(n.autosize):{},...E7(e.autosize)};if(u.type==="fit"&&!a&&(ke($1e),u.type="pad"),i=="container"&&!(u.type=="fit"||u.type=="fit-x")&&ke(XO("width")),r=="container"&&!(u.type=="fit"||u.type=="fit-y")&&ke(XO("height")),!br(u,{type:"pad"}))return u}function I2e(e){return["fit","fit-x","fit-y"].includes(e)}function U2e(e){return e?`fit-${x2(e)}`:"fit"}const P2e=["background","padding"];function D7(e,t){const n={};for(const i of P2e)e&&e[i]!==void 0&&(n[i]=yr(e[i]));return t&&(n.params=e.params),n}class Mu{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new Mu(Je(this.explicit),Je(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return yn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of _e(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function Wa(e){return{explicit:!0,value:e}}function gr(e){return{explicit:!1,value:e}}function eG(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:I2(t,n,i,r)}}function I2(e,t,n,i){return e.explicit&&t.explicit&&ke(xye(n,i,e.value,t.value)),e}function Us(e,t,n,i,r=I2){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:br(e.value,t.value)?e:r(e,t,n,i)}class j2e extends Mu{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Bd(e){return we(e,"url")}function Wg(e){return we(e,"values")}function tG(e){return we(e,"name")&&!Bd(e)&&!Wg(e)&&!_s(e)}function _s(e){return e&&(nG(e)||iG(e)||wk(e))}function nG(e){return we(e,"sequence")}function iG(e){return we(e,"sphere")}function wk(e){return we(e,"graticule")}var on;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(on||(on={}));function rG({invalid:e,isPath:t}){switch(Jq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function q2e(e){const{marks:t,scales:n}=rG(e);return t===n?on.Main:n==="include-invalid-values"?on.PreFilterInvalid:on.PostFilterInvalid}class Nt{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){ke(V1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Ki extends Nt{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${eq()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function BC(e){return e.as!==void 0}function C7(e){return`${e}_end`}class ao extends Nt{timeUnits;clone(){return new ao(null,Je(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,o)=>{const{field:u,timeUnit:c}=a;if(c){let l;if(Ic(c)){if(an(n)){const{mark:d,markDef:h,config:p}=n,y=Is({fieldDef:a,markDef:h,config:p});(Vg(d)||y)&&(l={timeUnit:Hn(c),field:u})}}else l={as:Be(a,{forAs:!0}),field:u,timeUnit:c};if(an(n)){const{mark:d,markDef:h,config:p}=n,y=Is({fieldDef:a,markDef:h,config:p});Vg(d)&&vn(o)&&y!==.5&&(l.rectBandPosition=y)}l&&(r[mt(l)]=l)}return r},{});return qt(i)?null:new ao(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=Hn(i),o={...r,timeUnit:a};return new ao(t,{[mt(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of zs(this.timeUnits)){const a=BC(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(Dn(this.timeUnits).map(t=>BC(t)?t.as:C7(t.field)))}dependentFields(){return new Set(Dn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${mt(this.timeUnits)}`}assemble(){const t=[];for(const n of Dn(this.timeUnits)){const{rectBandPosition:i}=n,r=Hn(n.timeUnit);if(BC(n)){const{field:a,as:o}=n,{unit:u,utc:c,...l}=r,d=[o,`${o}_end`];t.push({field:Jr(a),type:"timeunit",...u?{units:S2(u)}:{},...c?{timezone:"utc"}:{},...l,as:d}),t.push(...S7(d,i,r))}else if(n){const{field:a}=n,o=a.replaceAll("\\.","."),u=aG({timeUnit:r,field:o}),c=C7(o);t.push({type:"formula",expr:u,as:c}),t.push(...S7([o,c],i,r))}}return t}}const U2="offsetted_rect_start",P2="offsetted_rect_end";function aG({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=Rq(i),{part:o,step:u}=Iq(a,e.step);return`${r?"utcOffset":"timeOffset"}('${o}', ${Mt(t)}, ${n?-u:u})`}function S7([e,t],n,i){if(n!==void 0&&n!==.5){const r=Mt(e),a=Mt(t);return[{type:"formula",expr:A7([aG({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${U2}`},{type:"formula",expr:A7([r,a],n+.5),as:`${e}_${P2}`}]}return[]}function A7([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const qp="_tuple_fields";class H2e{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const G2e={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new H2e,a={},o={},u=new Set,c=(v,b)=>{const x=b==="visual"?v.channel:v.field;let D=Jt(`${i}_${x}`);for(let S=1;u.has(D);S++)D=Jt(`${i}_${x}_${S}`);return u.add(D),{[b]:D}},l=t.type,d=e.config.selection[l],h=n.value!==void 0?Ie(n.value):null;let{fields:p,encodings:y}=Le(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(Le(v))for(const b of _e(v))r1e(b)?(y||(y=[])).push(b):l==="interval"?(ke(P1e),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let x=b.field;if(b.aggregate){ke(M1e(v,b.aggregate));continue}else if(!x){ke(WO(v));continue}if(b.timeUnit&&!Ic(b.timeUnit)){x=e.vgField(v);const D={timeUnit:b.timeUnit,as:x,field:b.field};o[mt(D)]=D}if(!a[x]){const D=l==="interval"&&ko(v)&&wa(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",S={field:x,channel:v,type:D,index:r.items.length};S.signals={...c(S,"data"),...c(S,"visual")},r.items.push(a[x]=S),r.hasField[x]=a[x],r.hasSelectionId=r.hasSelectionId||x===Ta,oq(v)?(S.geoChannel=v,S.channel=aq(v),r.hasChannel[S.channel]=a[x]):r.hasChannel[v]=a[x]}}else ke(WO(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...c(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===Ta}h&&(t.init=h.map(v=>r.items.map(b=>Le(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),qt(o)||(r.timeUnit=new ao(null,o))},signals:(e,t,n)=>{const i=t.name+qp;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(lG)})}},oG="_curr",yy="anim_value",qf="anim_clock",d_="eased_anim_clock",uG="min_extent",sG="max_range_extent",zC="last_tick_at",LC="is_playing",Y2e=1/60*1e3,X2e=(e,t)=>[{name:d_,update:qf},{name:`${e}_domain`,init:`domain('${t}')`},{name:uG,init:`extent(${e}_domain)[0]`},{name:sG,init:`extent(range('${t}'))[1]`},{name:yy,update:`invert('${t}', ${d_})`}],V2e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(oo(t)&&(n=n.concat([{name:qf,init:"0",on:[{events:{type:"timer",throttle:Y2e},update:`${LC} ? (${qf} + (now() - ${zC}) > ${sG} ? 0 : ${qf} + (now() - ${zC})) : ${qf}`}]},{name:zC,init:"now()",on:[{events:[{signal:qf},{signal:LC}],update:"now()"}]},{name:LC,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+qp,a=t.project,o="(item().isVoronoi ? datum.datum : datum)",u=Dn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+ad):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),c=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${u?` && ${u}`:""}`;let l=`unit: ${ec(e)}, `;if(t.project.hasSelectionId)l+=`${Ta}: ${o}[${Oe(Ta)}]`;else if(oo(t))l+=`fields: ${r}, values: [${yy} ? ${yy} : ${uG}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${o}[${Oe(e.vgField(h.channel,{}))}], ${o}[${Oe(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${o}[${Oe(h.field)}]`).join(", ");l+=`fields: ${r}, values: [${d}]`}if(oo(t))return n.concat(X2e(t.name,e.scaleName(Zs)),[{name:i+Cu,on:[{events:[{signal:d_},{signal:yy}],update:`{${l}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+Cu,on:d?[{events:d,update:`${c} ? {${l}} : null`,force:!0}]:[]}])}}};function lG(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=Jr(r.field),r}function Dc(e,t=!0,n=Ei){if(be(e)){const i=e.map(r=>Dc(r,t,n));return t?`[${i.join(", ")}]`:i}else if(Lc(e))return n(t?vc(e):Gye(e));return t?n(kt(e)):e}function W2e(e,t){for(const n of Dn(e.component.selection??{})){const i=n.name;let r=`${i}${Cu}, ${n.resolve==="global"?"true":`{unit: ${ec(e)}}`}`;for(const a of q2)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+Dxe,on:[{events:{signal:n.name+Cu},update:`modify(${Oe(n.name+Cc)}, ${r})`}]})}return Fk(t)}function Q2e(e,t){if(e.component.selection&&_e(e.component.selection).length){const n=Oe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Ws("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Fk(t)}function Z2e(e,t){let n=!1;for(const i of Dn(e.component.selection??{})){const r=i.name,a=Oe(r+Cc);if(t.filter(u=>u.name===r).length===0){const u=i.resolve==="global"?"union":i.resolve,c=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${_G}(${a}, ${Oe(u)}${c}`})}n=!0;for(const u of q2)u.defined(i)&&u.topLevelSignals&&(t=u.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Fk(t)}function K2e(e,t){const n=[],i=[],r=ec(e,{escape:!1});for(const a of Dn(e.component.selection??{})){const o={name:a.name+Cc};if(a.project.hasSelectionId&&(o.transform=[{type:"collect",sort:{field:Ta}}]),a.init){const c=a.project.items.map(lG);o.values=a.project.hasSelectionId?a.init.map(l=>({unit:r,[Ta]:Dc(l,!1)[0]})):a.init.map(l=>({unit:r,fields:c,values:Dc(l,!1)}))}if([...n,...t].filter(c=>c.name===a.name+Cc).length||n.push(o),oo(a)&&t.length){const c=e.lookupDataSource(e.getDataName(on.Main)),l=t.find(h=>h.name===c),d=l.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){l.transform=l.transform.filter(p=>p!==d);const h={name:l.name+oG,source:l.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function cG(e,t){for(const n of Dn(e.component.selection??{}))for(const i of q2)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function J2e(e,t){for(const n of e.children)an(n)&&(t=cG(n,t));return t}function exe(e,t,n,i){const r=$G(e,t.param,t);return{signal:wa(n.get("type"))&&be(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function Fk(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const pu={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ko(r))continue;const a=e.getScaleComponent(r),o=a?a.get("type"):void 0;if(o=="sequential"&&ke(B1e),!a||!wa(o)){ke(R1e);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(o=>n.filter(u=>u.name===o.signals.data).length===0);if(!e.parent||g_(e)||i.length===0)return n;const r=n.find(o=>o.name===t.name);let a=r.update;if(a.includes(_G))r.update=`{${i.map(o=>`${Oe(Jr(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of i){const u=`${Oe(Jr(o.field))}: ${o.signals.data}`;a.includes(u)||(a=`${a.substring(0,a.length-1)}, ${u}}`)}r.update=a}return n.concat(i.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!g_(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function h_(e,t){return`domain(${Oe(e.scaleName(t))})`}function g_(e){return e.parent&&hh(e.parent)&&(!e.parent.parent||g_(e.parent.parent))}const ad="_brush",fG="_scale_trigger",O0="geo_interval_init_tick",dG="_init",txe="_center",nxe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...Le(n.select)?n.select:{}};i.fields=[Ta],i.encodings||(i.encodings=n.value?_e(n.value):[za,Ba]),n.select={type:"interval",...i}}if(t.translate&&!pu.defined(t)){const i=`!event.item || event.item.mark.name !== ${Oe(t.name+ad)}`;for(const r of t.events){if(!r.between){ke(`${r} is not an ordered event stream for interval selections.`);continue}const a=Ie(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+Cu,a=Dn(t.project.hasChannel).filter(u=>u.channel===en||u.channel===Xn),o=t.init?t.init[0]:null;if(n.push(...a.reduce((u,c)=>u.concat(ixe(e,t,c,o?.[c.index])),[])),e.hasProjection){const u=Oe(e.projectionName()),c=e.projectionName()+txe,{x:l,y:d}=t.project.hasChannel,h=l?.signals.visual,p=d?.signals.visual,y=l?o?.[l.index]:`${c}[0]`,v=d?o?.[d.index]:`${c}[1]`,b=_=>e.getSizeSignalRef(_).signal,x=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;o&&(n.unshift({name:i+dG,init:`[scale(${u}, [${l?y[0]:y}, ${d?v[0]:v}]), scale(${u}, [${l?y[1]:y}, ${d?v[1]:v}])]`}),(!l||!d)&&(n.find(k=>k.name===c)||n.unshift({name:c,update:`invert(${u}, [${b("width")}/2, ${b("height")}/2])`})));const D=`intersect(${x}, {markname: ${Oe(e.getName("marks"))}}, unit.mark)`,S=`{unit: ${ec(e)}}`,A=`vlSelectionTuples(${D}, ${S})`,w=a.map(_=>_.signals.visual);return n.concat({name:r,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:O0}]:[]],update:A}]})}else{if(!pu.defined(t)){const l=i+fG,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=Oe(e.scaleName(p)),x=e.getScaleComponent(p).get("type"),D=wa(x)?"+":"";return`(!isArray(${y}) || (${D}invert(${b}, ${v})[0] === ${D}${y}[0] && ${D}invert(${b}, ${v})[1] === ${D}${y}[1]))`});d.length&&n.push({name:l,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${l} : {}`}]})}const u=a.map(l=>l.signals.data),c=`unit: ${ec(e)}, fields: ${i+qp}, values`;return n.concat({name:r,...o?{init:`{${c}: ${Dc(o)}}`}:{},...u.length?{on:[{events:[{signal:u.join(" || ")}],update:`${u.join(" && ")} ? {${c}: [${u}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(an(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===O0).length||n.unshift({name:O0,value:null,on:[{events:"timer{1}",update:`${O0} === null ? {} : ${O0}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,o=r?.signals.visual,u=a?.signals.visual,c=`data(${Oe(t.name+Cc)})`;if(pu.defined(t)||!r&&!a)return n;const l={x:r!==void 0?{signal:`${o}[0]`}:{value:0},y:a!==void 0?{signal:`${u}[0]`}:{value:0},x2:r!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${u}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const x of _e(l))l[x]=[{test:`${c}.length && ${c}[0].unit === ${ec(e)}`,...l[x]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=_e(y).reduce((x,D)=>(x[D]=[{test:[r!==void 0&&`${o}[0] !== ${o}[1]`,a!==void 0&&`${u}[0] !== ${u}[1]`].filter(S=>S).join(" && "),value:y[D]},{value:null}],x),{}),b=p??(t.translate?"move":null);return[{name:`${i+ad}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:l}},...n,{name:i+ad,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...l,...v}}}]}};function ixe(e,t,n,i){const r=!e.hasProjection,a=n.channel,o=n.signals.visual,u=Oe(r?e.scaleName(a):e.projectionName()),c=p=>`scale(${u}, ${p})`,l=e.getSizeSignalRef(a===en?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${o}[0], clamp(${d}, 0, ${l})]`}],[]);if(r){const p=n.signals.data,y=pu.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,x=i?{init:Dc(i,!0,c)}:{value:[]};return h.push({events:{signal:t.name+fG},update:wa(b)?`[${c(`${p}[0]`)}, ${c(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:o,...x,on:h},{name:p,...i?{init:Dc(i)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${u}, ${o})`}]}]}else{const p=a===en?0:1,y=t.name+dG,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:o,...v,on:h}]}}function lh({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=Ip(t)&&t.condition;let o=[];a&&(o=Ie(a).map(l=>{const d=r(l);if(Hve(l)){const{param:h,empty:p}=l;return{test:TG(e,{param:h,empty:p}),...d}}else return{test:Yv(e,l.test),...d}})),i!==void 0&&o.push(i);const u=r(t);return u!==void 0&&o.push(u),o.length>1||o.length===1&&o[0].test?{[n]:o}:o.length===1?{[n]:o[0]}:{}}function kk(e,t="text"){const n=e.encoding[t];return lh({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>j2(i,e.config),invalidValueRef:void 0})}function j2(e,t,n="datum"){if(e){if(Fa(e))return Wt(e.value);if(et(e)){const{format:i,formatType:r}=Uv(e);return lk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function hG(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,o=n.tooltip;if(be(o))return{tooltip:_7({tooltip:o},a,r,t)};{const u=t.reactiveGeom?"datum.datum":"datum";return lh({model:e,channelDef:o,vgChannel:"tooltip",mainRefFn:l=>{const d=j2(l,r,u);if(d)return d;if(l===null)return;let h=It("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),ze(h))return{value:h};if(Le(h))return qe(h)?h:h.content==="encoding"?_7(n,a,r,t):{signal:u}},invalidValueRef:void 0})}}function gG(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,o=i?"datum.datum":"datum",u=[];function c(d,h){const p=Rc(h),y=Ii(d)?d:{...d,type:e[p].type},v=y.title||hk(y,r),b=Ie(v).join(", ").replaceAll(/"/g,'\\"');let x;if(vn(h)){const D=h==="x"?"x2":"y2",S=ka(e[D]);if(Zn(y.bin)&&S){const A=Be(y,{expr:o}),w=Be(S,{expr:o}),{format:_,formatType:k}=Uv(y);x=zp(A,w,_,k,r),a.add(D)}}if((vn(h)||h===na||h===Ra)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:D,formatType:S}=Uv(y);x=lk({fieldOrDatumDef:y,format:D,formatType:S,expr:o,config:r,normalizeStack:!0}).signal}x??=j2(y,r,o).signal,u.push({channel:h,key:b,value:x})}pk(e,(d,h)=>{$e(d)?c(d,h):M2(d)&&c(d.condition,h)});const l={};for(const{channel:d,key:h,value:p}of u)!a.has(d)&&!l[h]&&(l[h]=p);return l}function _7(e,t,n,{reactiveGeom:i}={}){const r=gG(e,t,n,{reactiveGeom:i}),a=zs(r).map(([o,u])=>`"${o}": ${u}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function rxe(e){const{markDef:t,config:n}=e,i=It("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...axe(e),...oxe(e)}}function axe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=It("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:Ue(w1e,t)?{}:{ariaRoleDescription:{value:t}}}function oxe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return lh({model:e,channelDef:a,vgChannel:"description",mainRefFn:c=>j2(c,e.config),invalidValueRef:void 0});const o=It("description",n,i);if(o!=null)return{description:Wt(o)};if(i.aria===!1)return{};const u=gG(t,r,i);if(!qt(u))return{description:{signal:zs(u).map(([c,l],d)=>`"${d>0?"; ":""}${c}: " + (${l})`).join(" + ")}}}function ei(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:o}=n;let{defaultRef:u,defaultValue:c}=n;const l=r[e];u===void 0&&(c??=It(e,i,a,{vgChannel:o,ignoreVgConfig:!Ip(l)}),c!==void 0&&(u=Wt(c)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=tH({...d,scaleChannel:e,channelDef:l});return lh({model:t,channelDef:l,vgChannel:o??e,invalidValueRef:h,mainRefFn:y=>sk({...d,channel:e,channelDef:y,stack:null,defaultRef:u})})}function pG(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,o=t.filled??It("filled",n,r),u=ft(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,c=It(o===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[o===!0&&"color"]??u,l=It(o===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[o===!1&&"color"],d=o?"fill":"stroke",h={...c?{fill:Wt(c)}:{},...l?{stroke:Wt(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&ke(_q("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...ei("color",e,{vgChannel:d,defaultValue:o?c:l}),...ei("fill",e,{defaultValue:i.fill?c:void 0}),...ei("stroke",e,{defaultValue:i.stroke?l:void 0})}}function uxe(e){const{encoding:t,mark:n}=e,i=t.order;return!il(n)&&Fa(i)?lh({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Wt(r.value),invalidValueRef:void 0}):{}}function zd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,o=t[a],u=n[a];if((a==="xOffset"||a==="yOffset")&&u)return{offsetType:"encoding",offset:sk({channel:a,channelDef:u,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Wt(o),bandPosition:r})};const c=t[a];return c?{offsetType:"visual",offset:c}:{}}function Ni(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:o,stack:u}=t,c=r[e],l=r[Fo(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=zd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=Tk({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!c&&vn(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:sxe({channel:e,channelDef:c,channel2Def:l,markDef:a,config:o,scaleName:d,scale:h,stack:u,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function sxe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:o}=e;if(et(n)&&r&&t===r.fieldChannel){if($e(n)){let u=n.bandPosition;if(u===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(u=.5),u!==void 0)return zv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:u,offset:a})}return Kl(n,i,{suffix:"end"},{offset:a})}return uk(e)}function Tk({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:o}=e;return()=>{const u=Rc(n),c=Ls(n),l=It(n,a,o,{vgChannel:c});if(l!==void 0)return xg(n,l);switch(t){case"zeroOrMin":return w7({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:u,config:o});case"zeroOrMax":return w7({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:u,config:o});case"mid":return{...e[rr(n)],mult:.5}}}}function w7({mainChannel:e,config:t,...n}){const i=eH(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:o}=r.zeroOrMax;return{signal:`min(${a},${o})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const lxe={left:"x",center:"xc",right:"x2"},cxe={top:"y",middle:"yc",bottom:"y2"};function mG(e,t,n,i="middle"){if(e==="radius"||e==="theta")return Ls(e);const r=e==="x"?"align":"baseline",a=It(r,t,n);let o;return qe(a)?(ke(lye(r)),o=void 0):o=a,e==="x"?lxe[o||(i==="top"?"left":"center")]:cxe[o||i]}function Hv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?yG(e,t,{defaultPos:n,defaultPos2:i}):Ni(e,t,{defaultPos:n})}function yG(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,o=Fo(e),u=rr(e),c=fxe(t,i,o),l=c[u]?mG(e,r,a):Ls(e);return{...Ni(e,t,{defaultPos:n,vgChannel:l}),...c}}function fxe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:o,config:u}=e,c=Rc(n),l=rr(n),d=Ls(n),h=i[c],p=e.scaleName(c),y=e.getScaleComponent(c),{offset:v}=n in i||n in a?zd({channel:n,markDef:a,encoding:i,model:e}):zd({channel:c,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const x=rr(n),D=e.markDef[x];return D!=null?{[x]:{value:D}}:{[d]:{field:e.getName(n)}}}const b=dxe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:u,scaleName:p,scale:y,stack:o,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:R1(n,a)||R1(n,{[n]:t_(n,a,u.style),[l]:t_(l,a,u.style)})||R1(n,u[r])||R1(n,u.mark)||{[d]:Tk({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function dxe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:o,stack:u,offset:c,defaultRef:l}){return et(t)&&u&&e.charAt(0)===u.fieldChannel.charAt(0)?Kl(t,a,{suffix:"start"},{offset:c}):uk({channel:e,channelDef:n,scaleName:a,scale:o,stack:u,markDef:i,config:r,offset:c,defaultRef:l})}function R1(e,t){const n=rr(e),i=Ls(e);if(t[i]!==void 0)return{[i]:xg(e,t[i])};if(t[e]!==void 0)return{[i]:xg(e,t[e])};if(t[n]){const r=t[n];if(xc(r))ke(iye(n));else return{[n]:xg(e,r)}}}function Du(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,o=Fo(t),u=rr(t),c=i[t],l=i[o],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[u]??i.size??It("size",r,n,{vgChannel:u}),v=cq(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return $e(c)&&(Gt(c.bin)||Zn(c.bin)||c.timeUnit&&!l)&&!(y&&!xc(y))&&!i[v]&&!Gn(h)?pxe({fieldDef:c,fieldDef2:l,channel:t,model:e}):(et(c)&&Gn(h)||b)&&!l?gxe(c,t,e):yG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function hxe(e,t,n,i,r,a,o){if(xc(r))if(n){const c=n.get("type");if(c==="band"){let l=`bandwidth('${t}')`;r.band!==1&&(l=`${r.band} * ${l}`);const d=po("minBandSize",{type:o},i);return{signal:d?`max(${ba(d)}, ${l})`:l}}else r.band!==1&&(ke(hye(c)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(qe(r))return r;if(r)return{value:r}}if(n){const c=n.get("range");if(zc(c)&&Ct(c.step))return{value:c.step-2}}if(!a){const{bandPaddingInner:c,barBandPaddingInner:l,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=yn(c,o==="tick"?h:o==="bar"?l:d);if(qe(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(Ct(p))return{signal:`${1-p} * ${e}`}}return{value:s_(i.view,e)-2}}function gxe(e,t,n){const{markDef:i,encoding:r,config:a,stack:o}=n,u=i.orient,c=n.scaleName(t),l=n.getScaleComponent(t),d=rr(t),h=Fo(t),p=cq(t),y=n.scaleName(p),v=n.getScaleComponent(N5(t)),b=i.type==="tick"||u==="horizontal"&&t==="y"||u==="vertical"&&t==="x";let x;(r.size||i.size)&&(b?x=ei("size",n,{vgChannel:d,defaultRef:Wt(i.size)}):ke(yye(i.type)));const D=!!x,S=sH({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(l||v)?.get("type"),useVlSizeChannel:b});x=x||{[d]:hxe(d,y||c,v||l,a,S,!!e,i.type)};const A=(l||v)?.get("type")==="band"&&xc(S)&&!D?"top":"middle",w=mG(t,i,a,A),_=w==="xc"||w==="yc",{offset:k,offsetType:F}=zd({channel:t,markDef:i,encoding:r,model:n,bandPosition:_?.5:0}),M=uk({channel:t,channelDef:e,markDef:i,config:a,scaleName:c,scale:l,stack:o,offset:k,defaultRef:Tk({model:n,defaultPos:"mid",channel:t,scaleName:c,scale:l}),bandPosition:_?F==="encoding"?0:.5:qe(S)?{signal:`(1-${S})/2`}:xc(S)?(1-S.band)/2:0});if(d)return{[w]:M,...x};{const N=Ls(h),P=x[d],L=k?{...P,offset:k}:P;return{[w]:M,[N]:be(M)?[M[0],{...M[1],offset:L}]:{...M,offset:L}}}}function F7(e,t,n,i,r,a,o){if(rq(e))return 0;const u=e==="x"||e==="y2",c=u?-t/2:t/2;if(qe(n)||qe(r)||qe(i)||a){const l=ba(n),d=ba(r),h=ba(i),p=ba(a),v=a?`(${o} < ${p} ? ${u?"":"-"}0.5 * (${p} - (${o})) : ${c})`:c,b=h?`${h} + `:"",x=l?`(${l} ? -1 : 1) * `:"",D=d?`(${d} + ${v})`:v;return{signal:b+x+D}}else return r=r||0,i+(n?-r-c:+r+c)}function pxe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:o}=i,u=i.getScaleComponent(n),c=i.scaleName(n),l=u?u.get("type"):void 0,d=u.get("reverse"),h=sH({channel:n,fieldDef:e,markDef:a,config:r,scaleType:l}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=vn(n)?It("binSpacing",a,r)??0:0,b=Fo(n),x=Ls(n),D=Ls(b),S=po("minBandSize",a,r),{offset:A}=zd({channel:n,markDef:a,encoding:o,model:i,bandPosition:0}),{offset:w}=zd({channel:b,markDef:a,encoding:o,model:i,bandPosition:0}),_=Ive({fieldDef:e,scaleName:c}),k=F7(n,v,d,y,A,S,_),F=F7(b,v,d,y,w??A,S,_),M=qe(h)?{signal:`(1-${h.signal})/2`}:xc(h)?(1-h.band)/2:.5,N=Is({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Gt(e.bin)||e.timeUnit){const P=e.timeUnit&&N!==.5;return{[D]:k7({fieldDef:e,scaleName:c,bandPosition:M,offset:F,useRectOffsetField:P}),[x]:k7({fieldDef:e,scaleName:c,bandPosition:qe(M)?{signal:`1-${M.signal}`}:1-M,offset:k,useRectOffsetField:P})}}else if(Zn(e.bin)){const P=Kl(e,c,{},{offset:F});if($e(t))return{[D]:P,[x]:Kl(t,c,{},{offset:k})};if(Bc(e.bin)&&e.bin.step)return{[D]:P,[x]:{signal:`scale("${c}", ${Be(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}ke(kq(b))}function k7({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return zv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:U2,endSuffix:P2}:{}})}const mxe=new Set(["aria","width","height"]);function ia(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?pG(e):{};return{...yxe(e.markDef,t),...T7("fill",n),...T7("stroke",i),...ei("opacity",e),...ei("fillOpacity",e),...ei("strokeOpacity",e),...ei("strokeWidth",e),...ei("strokeDash",e),...uxe(e),...hG(e),...kk(e,"href"),...rxe(e)}}function T7(e,t){return t?{[e]:t}:{}}function yxe(e,t){return _1e.reduce((n,i)=>(!mxe.has(i)&&we(e,i)&&t[i]!=="ignore"&&(n[i]=Wt(e[i])),n),{})}function $k(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let o;if(!ko(a)||!(o=e.getScaleType(a)))return;const u=E2(r.aggregate),c=ok({scaleChannel:a,markDef:n,config:t,scaleType:o,isCountAggregate:u});if(Bve(c)){const l=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});l&&i.add(l)}}),i.size>0)return{defined:{signal:[...i].map(a=>A2(a,!0)).join(" && ")}}}function $7(e,t){if(t!==void 0)return{[e]:Wt(t)}}const IC="voronoi",vG={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(IC)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(il(a))return ke(O1e(a)),n;const o={name:e.getName(IC),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...hG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let u=0,c=!1;return n.forEach((l,d)=>{const h=l.name??"";h===e.component.mark[0].name?u=d:h.includes(IC)&&(c=!0)}),c||n.splice(u+1,0,o),n}},bG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ek(e.bind),parse:(e,t,n)=>wG(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,o=t.init?.[0],u=vG.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((c,l)=>{const d=Jt(`${i}_${c.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...o?{init:Dc(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${u}[${Oe(c.field)}] : null`}]:[],bind:a[c.field]??a[c.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(l=>l.name===i+Cu),o=i+qp,u=r.items.map(l=>Jt(`${i}_${l.field}`)),c=u.map(l=>`${l} !== null`).join(" && ");return u.length&&(a.update=`${c} ? {fields: ${o}, values: [${u.join(", ")}]} : null`),delete a.value,delete a.on,n}},Gv="_toggle",xG={defined:e=>e.type==="point"&&!oo(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Gv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+Cu,i=t.name+Gv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${ec(e)}}, `}${i} ? ${n} : null`}},vxe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!oo(e),parse:(e,t)=>{t.clear&&(t.clear=ze(t.clear)?Ws(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(bG.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Jt(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(o=>o.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const o=n.findIndex(u=>u.name===r.signals.data);i(o,"null")}}else{let r=n.findIndex(a=>a.name===t.name+Cu);i(r,"null"),xG.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Gv),i(r,"false"))}return n}},EG={defined:e=>{const t=e.resolve==="global"&&e.bind&&Ek(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Ta;return t&&!n&&ke(z1e),t&&n},parse:(e,t,n)=>{const i=Je(n);if(i.select=ze(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},wG(t,i),Le(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const u of t.events)u.filter=Ie(u.filter??[]),u.filter.includes(o)||u.filter.push(o)}const r=OC(t.bind)?t.bind.legend:"click",a=ze(r)?Ws(r,"view"):Ie(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=OC(t.bind)&&t.bind.legend,a=o=>u=>{const c=Je(u);return c.markname=o,c};for(const o of t.project.items){if(!o.hasLegend)continue;const u=`${Jt(o.field)}_legend`,c=`${i}_${u}`;if(n.filter(d=>d.name===c).length===0){const d=r.merge.map(a(`${u}_symbols`)).concat(r.merge.map(a(`${u}_labels`))).concat(r.merge.map(a(`${u}_entries`)));n.unshift({name:c,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${c}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+Cu),o=i+qp,u=r.items.filter(p=>p.hasLegend).map(p=>Jt(`${i}_${Jt(p.field)}_legend`)),l=`${u.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${o}, values: [${u.join(", ")}]} : null`;t.events&&u.length>0?a.on.push({events:u.map(p=>({signal:p})),update:l}):u.length>0&&(a.update=l,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Gv),h=OC(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function bxe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of Dn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&EG.defined(r)){const o=n.get("selections")??[];o.push(r.name),n.set("selections",o,!1),a.hasLegend=!0}}}const DG="_translate_anchor",CG="_translate_delta",xxe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=pu.defined(t),a=i+DG,{x:o,y:u}=t.project.hasChannel;let c=Ws(t.translate,"scope");return r||(c=c.map(l=>(l.between[0].markname=i+ad,l))),n.push({name:a,value:{},on:[{events:c.map(l=>l.between[0]),update:`{x: x(unit), y: y(unit)${o!==void 0?`, extent_x: ${r?h_(e,en):`slice(${o.signals.visual})`}`:""}${u!==void 0?`, extent_y: ${r?h_(e,Xn):`slice(${u.signals.visual})`}`:""}}`}]},{name:i+CG,value:{},on:[{events:c,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),o!==void 0&&M7(e,t,o,"width",n),u!==void 0&&M7(e,t,u,"height",n),n}};function M7(e,t,n,i,r){const a=t.name,o=a+DG,u=a+CG,c=n.channel,l=pu.defined(t),d=r.find(_=>_.name===n.signals[l?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(c),y=p?.get("type"),v=p?.get("reverse"),b=l?c===en?v?"":"-":v?"-":"":"",x=`${o}.extent_${c}`,D=`${b}${u}.${c} / ${l?`${h}`:`span(${x})`}`,S=!l||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=l?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",w=`${S}(${x}, ${D}${A})`;d.on.push({events:{signal:u},update:l?w:`clampRange(${w}, 0, ${h})`})}const SG="_zoom_anchor",AG="_zoom_delta",Exe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=pu.defined(t),a=i+AG,{x:o,y:u}=t.project.hasChannel,c=Oe(e.scaleName(en)),l=Oe(e.scaleName(Xn));let d=Ws(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+ad,h))),n.push({name:i+SG,on:[{events:d,update:r?`{${[c?`x: invert(${c}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&O7(e,t,o,"width",n),u!==void 0&&O7(e,t,u,"height",n),n}};function O7(e,t,n,i,r){const a=t.name,o=n.channel,u=pu.defined(t),c=r.find(S=>S.name===n.signals[u?"data":"visual"]),l=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(o),h=d?.get("type"),p=u?h_(e,o):c.name,y=a+AG,v=`${a}${SG}.${o}`,b=!u||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",x=u?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",D=`${b}(${p}, ${v}, ${y}${x})`;c.on.push({events:{signal:y},update:u?D:`clampRange(${D}, 0, ${l})`})}const Cc="_store",Cu="_tuple",Dxe="_modify",_G="vlSelectionResolve",q2=[V2e,nxe,G2e,xG,bG,pu,EG,vxe,xxe,Exe,vG];function Cxe(e){let t=e.parent;for(;t&&!Sr(t);)t=t.parent;return t}function ec(e,{escape:t}={escape:!0}){let n=t?Oe(e.name):e.name;const i=Cxe(e);if(i){const{facet:r}=i;for(const a of Gr)r[a]&&(n+=` + '__facet_${a}_' + (facet[${Oe(i.vgField(a))}])`)}return n}function Mk(e){return Dn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function wG(e,t){(ze(t.select)||!t.select.on)&&delete e.events,(ze(t.select)||!t.select.clear)&&delete e.clear,(ze(t.select)||!t.select.toggle)&&delete e.toggle}function oo(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function p_(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...p_(e.object)),t.push(...p_(e.property))),t)}function FG(e){return e.object.type==="MemberExpression"?FG(e.object):e.object.name==="datum"}function kG(e){const t=ZF(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&FG(i)&&n.add(p_(i).slice(1).join("."))}),n}class ch extends Nt{model;filter;expr;_dependentFields;clone(){return new ch(null,this.model,Je(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=Yv(this.model,this.filter,this),this._dependentFields=kG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Sxe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const o=Jt(a.name),u=a.select,c=ze(u)?u:u.type,l=Le(u)?Je(u):{type:c},d=i[c];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(l.mark={...d.mark,...l.mark}),(l[y]===void 0||l[y]===!0)&&(l[y]=Je(d[y]??l[y])));const h=n[o]={...l,name:o,type:c,init:a.value,bind:a.bind,events:ze(l.on)?Ws(l.on,"scope"):Ie(Je(l.on))};if(oo(h)&&(r++,r>1)){delete n[o];continue}const p=Je(a);for(const y of q2)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&ke(q1e),n}function TG(e,t,n,i="datum"){const r=ze(t)?t:t.param,a=Jt(r),o=Oe(a+Cc);let u;try{u=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(u.project.timeUnit){const p=n??e.component.data.raw,y=u.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const c=u.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=u.resolve==="global"?")":`, ${Oe(u.resolve)})`,d=`${c}${o}, ${i}${l}`,h=`length(data(${o}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function $G(e,t,n){const i=Jt(t),r=n.encoding;let a=n.field,o;try{o=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=o.project.items[0].field,o.project.items.length>1&&ke(H1e(a));else if(r&&!a){const u=o.project.items.filter(c=>c.channel===r);!u.length||u.length>1?(a=o.project.items[0].field,ke(G1e(u,r,n,a))):a=u[0].field}return`${o.name}[${Oe(Jr(a))}]`}function Axe(e,t){for(const[n,i]of zs(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Ki(new ch(t,e,{param:n}),r,on.Lookup,e.component.data.outputNodeRefCounts)}}function Yv(e,t,n){return bg(t,i=>ze(i)?i:eve(i)?TG(e,i,n):Pq(i))}function _xe(e,t){if(e)return be(e)&&!cs(e)?e.map(n=>hk(n,t)).join(", "):e}function UC(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function ag(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:o,labelExpr:u,title:c,zindex:l,...d}=e.combine();if(!r){for(const h in d){const p=h,y=rbe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(jp(v)){const{condition:b,...x}=v,D=Ie(b),S=u7[p];if(S){const{vgProp:A,part:w}=S,_=[...D.map(k=>{const{test:F,...M}=k;return{test:Yv(null,F),...M}}),x];UC(d,w,A,_),delete d[p]}else if(S===null){const A={signal:D.map(w=>{const{test:_,...k}=w;return`${Yv(null,_)} ? ${GO(k)} : `}).join("")+GO(x)};d[p]=A}}else if(qe(v)){const b=u7[p];if(b){const{vgProp:x,part:D}=b;UC(d,D,x,v),delete d[p]}}ft(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},qt(d.encode)&&delete d.encode}return{scale:o,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:yn(l,0)}}else{if(!i.header&&e.mainExtracted)return;if(u!==void 0){let p=u;d.encode?.labels?.update&&qe(d.encode.labels.update.text)&&(p=pc(u,"datum.label",d.encode.labels.update.text.signal)),UC(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of vH)e.hasAxisPart(p)||delete d.encode[p];qt(d.encode)&&delete d.encode}const h=_xe(c,n);return{scale:o,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:yn(l,0)}}}}function MG(e){const{axes:t}=e.component,n=[];for(const i of Tu)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",o=e.getSizeSignalRef(a).signal;a!==o&&n.push({name:a,update:o})}}return n}function wxe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>ag(r,"grid",t)),...i.map(r=>ag(r,"grid",t)),...n.map(r=>ag(r,"main",t)),...i.map(r=>ag(r,"main",t))].filter(r=>r)}function N7(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},u=t[n==="x"?"axisTop":"axisRight"]||{},c=new Set([..._e(o),..._e(u)]),l={};for(const d of c.values())l[d]={signal:`${i.signal} === "${a}" ? ${ba(o[d])} : ${ba(u[d])}`};return l}return t[r]})])}function Fxe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:Gq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",o=qe(n)?"axisOrient":`axis${$p(n)}`,u=[...r,...r.map(l=>a+l.substr(4))],c=["axis",o,a];return{vlOnlyAxisConfig:N7(u,i,e,n),vgAxisConfig:N7(c,i,e,n),axisConfigStyle:kxe([...c,...u],i)}}function kxe(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=Ie(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function m_(e,t,n,i={}){const r=bq(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const R7={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Txe(n,e),gridScale:({model:e,channel:t})=>$xe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||NG(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||OG(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Oxe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Nxe(t.type,n,$e(t)&&!!t.timeUnit,$e(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,o=a?t.getSizeSignalRef(a):void 0;return n.tickCount??Bxe({fieldOrDatumDef:i,scaleType:r,size:o,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??zxe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=RG(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",o=t.fieldDef(a);return Eq(r?[a7(r)]:[],$e(o)?[a7(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>Lxe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??Ixe(n,t)};function Txe(e,t){return!Gn(e)&&$e(t)&&!Gt(t?.bin)&&!Zn(t?.bin)}function $xe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Mxe(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return qe(a)?a:Xg(a);{const{configValue:o}=m_("labelAngle",i,t?.style,r);return o!==void 0?Xg(o):n===en&&ft([tk,ek],e.type)&&!($e(e)&&e.timeUnit)?270:void 0}}function y_(e){return`(((${e.signal} % 360) + 360) % 360)`}function OG(e,t,n,i){if(e!==void 0)if(n==="x"){if(qe(e)){const r=y_(e),a=qe(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(qe(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(qe(e)){const r=y_(e),a=qe(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(qe(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function NG(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(qe(e)){const o=y_(e),u=qe(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${o} + 90)`:o} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${o} && ${o} < ${180+r}) === ${u} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(qe(t)){const o=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${o} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function Oxe(e,t){if(t==="x"&&ft(["quantitative","temporal"],e))return!0}function Nxe(e,t,n,i){if(n&&!Le(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Rxe(e){return e==="x"?"bottom":"left"}function Bxe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!Gn(t)&&t!=="log"){if($e(e)){if(Gt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&ft(["month","hours","day","quarter"],Hn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function zxe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if($e(t)){const{timeUnit:n}=t;if(n){const i=Lq(n);if(i)return{signal:i}}}}function RG(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,o=r?r.title:void 0;if(a&&o)return Dq(a,o);if(a)return a;if(o)return o;if(a!==void 0)return a;if(o!==void 0)return o}function Lxe(e,t){const n=e.values;if(be(n))return yH(t,n);if(qe(n))return n}function Ixe(e,t){return e==="rect"&&Iv(t)?1:0}class Ld extends Nt{transform;_dependentFields;clone(){return new Ld(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=kG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(Uc(i)&&uH(i.sort)){const{field:a,timeUnit:o}=i,u=i.sort,c=u.map((l,d)=>`${Pq({field:a,timeUnit:o,equal:l})} ? ${d} : `).join("")+u.length;t=new Ld(t,{calculate:c,as:Id(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${mt(this.transform)}`}}function Id(e,t,n){return Be(e,{prefix:t,suffix:"sort_index",...n})}function H2(e,t){return ft(["top","bottom"],t)?"column":ft(["left","right"],t)||e==="row"?"row":"column"}function Ud(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return yn((t||{})[e],r[e],n.header[e])}function G2(e,t,n,i){const r={};for(const a of e){const o=Ud(a,t||{},n,i);o!==void 0&&(r[a]=o)}return r}const Ok=["row","column"],Nk=["header","footer"];function Uxe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:o,titleOrient:u}=G2(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),c=H2(t,u),l=Xg(o);return{name:`${t}-title`,type:"group",role:`${c}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...zG(l,c),...BG(c,l,a),...LG(i,r,t,_be,BH)}}}function BG(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=NG(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function zG(e,t){const n=OG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function Pxe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of Nk)if(n[r])for(const a of n[r]){const o=qxe(e,t,r,n,a);o!=null&&i.push(o)}return i}function jxe(e,t){const{sort:n}=e;return gu(n)?{field:Be(n,{expr:"datum"}),order:n.order??"ascending"}:be(n)?{field:Id(e,t,{expr:"datum"}),order:"ascending"}:{field:Be(e,{expr:"datum"}),order:n??"ascending"}}function v_(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:o,labelOrient:u,labelExpr:c}=G2(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=lk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=H2(t,u);return{text:{signal:c?pc(pc(c,"datum.label",l),"datum.value",Be(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...zG(a,d),...BG(d,a,o),...LG(n,e,t,wbe,zH)}}function qxe(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:o}=i,u=e.config?e.config:void 0;if(o&&r.labels){const{labelOrient:h}=G2(["labelOrient"],o.header,u,t);(t==="row"&&!ft(["top","bottom"],h)||t==="column"&&!ft(["left","right"],h))&&(a=v_(o,t,u))}const c=Sr(e)&&!Lp(e.facet),l=r.axes,d=l?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:jxe(o,t)}:{},...d&&c?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:l}:{}}}}return null}const Hxe={column:{start:0,end:1},row:{start:1,end:0}};function Gxe(e,t){return Hxe[t][e]}function Yxe(e,t){const n={};for(const i of Gr){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:o}=G2(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),u=H2(i,o),c=Gxe(a,u);c!==void 0&&(n[u]=c)}}return qt(n)?void 0:n}function LG(e,t,n,i,r){const a={};for(const o of i){if(!r[o])continue;const u=Ud(o,t?.header,e,n);u!==void 0&&(a[r[o]]=u)}return a}function Rk(e){return[...B1(e,"width"),...B1(e,"height"),...B1(e,"childWidth"),...B1(e,"childHeight")]}function B1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const o=a.get("type"),u=a.get("range");if(Gn(o)&&zc(u)){const c=e.scaleName(n);return Sr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[B7(c,u)]:[B7(c,u),{name:r,update:IG(c,a,`domain('${c}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),o=a?"containerSize()[0]":"containerSize()[1]",u=u_(e.config.view,a?"width":"height"),c=`isFinite(${o}) ? ${o} : ${u}`;return[{name:r,init:c,on:[{update:c,events:"window:resize"}]}]}else return[{name:r,value:i}]}function B7(e,t){const n=`${e}_step`;return qe(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function IG(e,t,n){const i=t.get("type"),r=t.get("padding"),a=yn(t.get("paddingOuter"),r);let o=t.get("paddingInner");return o=i==="band"?o!==void 0?o:r:1,`bandspace(${n}, ${ba(o)}, ${ba(a)}) * ${e}_step`}function UG(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function PG(e,t){return _e(e).reduce((n,i)=>({...n,...lh({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Wt(r.value),invalidValueRef:void 0})}),{})}function jG(e,t){if(Sr(t))return e==="theta"?"independent":"shared";if(hh(t))return"shared";if(jk(t))return vn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Bk(e,t){const n=e.scale[t],i=vn(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&ke(Dye(t)),"independent"):e[i][t]||"shared"}const Xxe={...Tbe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},qG=_e(Xxe);class Vxe extends Mu{}const z7={symbols:Wxe,gradient:Qxe,labels:Zxe,entries:Kxe};function Wxe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:o,encoding:u,config:c,mark:l}=n,d=o.filled&&l!=="trail";let h={...T1e({},n,_ve),...pG(n,{filled:d})};const p=r.get("symbolOpacity")??c.legend.symbolOpacity,y=r.get("symbolFillColor")??c.legend.symbolFillColor,v=r.get("symbolStrokeColor")??c.legend.symbolStrokeColor,b=p===void 0?HG(u.opacity)??o.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===nr)delete h.fill;else if(we(h.fill,"field"))y?delete h.fill:(h.fill=Wt(c.legend.symbolBaseFillColor??"black"),h.fillOpacity=Wt(b??1));else if(be(h.fill)){const x=b_(u.fill??u.color)??o.fill??(d&&o.color);x&&(h.fill=Wt(x))}}if(h.stroke){if(i==="stroke"||!d&&i===nr)delete h.stroke;else if(we(h.stroke,"field")||v)delete h.stroke;else if(be(h.stroke)){const x=yn(b_(u.stroke||u.color),o.stroke,d?o.color:void 0);x&&(h.stroke={value:x})}}if(i!==ku){const x=$e(t)&&YG(n,r,t);x?h.opacity=[{test:x,...Wt(b??1)},Wt(c.legend.unselectedOpacity)]:b&&(h.opacity=Wt(b))}return h={...h,...e},qt(h)?void 0:h}function Qxe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:o}=t;let u={};const l=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?HG(o.opacity)||a.opacity:void 0;return l&&(u.opacity=Wt(l)),u={...u,...e},qt(u)?void 0:u}function Zxe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},o=n.config,u=$e(t)?YG(n,r,t):void 0,c=u?[{test:u,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:d}=a;let h;Ec(d)?h=xa({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:d,config:o}):l===void 0&&d===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?h=xa({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&$e(t)&&t.timeUnit===void 0&&(h=xa({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const p={...c?{opacity:c}:{},...h?{text:h}:{},...e};return qt(p)?void 0:p}function Kxe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function HG(e){return GG(e,(t,n)=>Math.max(t,n.value))}function b_(e){return GG(e,(t,n)=>yn(t,n.value))}function GG(e,t){if(Yve(e))return Ie(e.condition).reduce(t,e.value);if(Fa(e))return e.value}function YG(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=Oe(n.field);return i.map(a=>`(!length(data(${Oe(Jt(a)+Cc)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const L7={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return rH(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return aH(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??aEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??oEe(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??eEe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>rd(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(id(n)&&to(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>Jxe(t,e)};function Jxe(e,t){const n=e.values;if(be(n))return yH(t,n);if(qe(n))return n}function eEe(e,t,n,i){if(t!=="shape"){const r=b_(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function tEe(e){const{legend:t}=e;return yn(t.type,nEe(e))}function nEe({channel:e,timeUnit:t,scaleType:n}){if(id(e)){if(ft(["quarter","month","day"],t))return"symbol";if(to(n))return"gradient"}return"symbol"}function iEe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??rEe(n,t)}function rEe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function aEe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:o,gradientVerticalMaxLength:u,gradientVerticalMinLength:c}=e;if(to(r))return n==="horizontal"?i==="top"||i==="bottom"?I7(t,"width",o,a):o:I7(t,"height",c,u)}function I7(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function oEe(e){if(ft(["quantile","threshold","log","symlog"],e))return"greedy"}function XG(e){const t=an(e)?uEe(e):fEe(e);return e.component.legends=t,t}function uEe(e){const{encoding:t}=e,n={};for(const i of[nr,...IH]){const r=kn(t[i]);!r||!e.getScaleComponent(i)||i===ir&&$e(r)&&r.type===sh||(n[i]=cEe(e,i))}return n}function sEe(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function lEe(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function cEe(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,o=a.legend,u=new Vxe({},sEe(e,t));bxe(e,t,u);const c=n!==void 0?!n:o.disable;if(u.set("disable",c,n!==void 0),c)return u;n=n||{};const l=e.getScaleComponent(t).get("type"),d=kn(r[t]),h=$e(d)?Hn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=tEe({legend:n,channel:t,timeUnit:h,scaleType:l}),v=iEe({legend:n,legendType:y,orient:p,legendConfig:o}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:o,config:a,scaleType:l,orient:p,legendType:y,direction:v};for(const w of qG){if(y==="gradient"&&w.startsWith("symbol")||y==="symbol"&&w.startsWith("gradient"))continue;const _=w in L7?L7[w](b):n[w];if(_!==void 0){const k=lEe(_,w,n,e.fieldDef(t));(k||a.legend[w]===void 0)&&u.set(w,_,k)}}const x=n?.encoding??{},D=u.get("selections"),S={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:u,legendType:y};for(const w of["labels","legend","title","symbols","gradient","entries"]){const _=PG(x[w]??{},e),k=w in z7?z7[w](_,A):_;k!==void 0&&!qt(k)&&(S[w]={...D?.length&&$e(d)?{name:`${Jt(d.field)}_legend_${w}`}:{},...D?.length?{interactive:!!D}:{},update:k})}return qt(S)||u.set("encode",S,!!n?.encoding),u}function fEe(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){XG(i);for(const r of _e(i.component.legends))n.legend[r]=Bk(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=VG(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of _e(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function VG(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of qG){const o=Us(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(u,c)=>{switch(a){case"symbolType":return dEe(u,c);case"title":return Cq(u,c);case"type":return r=!0,gr("symbol")}return I2(u,c,a,"legend")});e.setWithExplicit(a,o)}return r&&(e.implicit?.encode?.gradient&&Nv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&Nv(e.explicit,["encode","gradient"])),e}function dEe(e,t){return t.value==="circle"?t:e}function hEe(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function WG(e){const t=e.component.legends,n={};for(const r of _e(t)){const a=e.getScaleComponent(r),o=kt(a.get("domains"));if(n[o])for(const u of n[o])VG(u,t[r])||n[o].push(t[r]);else n[o]=[t[r].clone()]}return Dn(n).flat().map(r=>gEe(r,e.config)).filter(r=>r!==void 0)}function gEe(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const o=a.encode.symbols.update;o.fill&&o.fill.value!=="transparent"&&!o.stroke&&!a.stroke&&(o.stroke={value:"transparent"});for(const u of IH)a[u]&&delete o[u]}if(a.title||delete a.title,i!==void 0){let o=i;a.encode?.labels?.update&&qe(a.encode.labels.update.text)&&(o=pc(i,"datum.label",a.encode.labels.update.text.signal)),hEe(a,"labels","text",{signal:o})}return a}}function pEe(e){return hh(e)||jk(e)?mEe(e):QG(e)}function mEe(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),QG(e))}function QG(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},a=t.data.reduce((o,u)=>{const c=qe(u)?u.signal:`data('${e.lookupDataSource(u)}')`;return ft(o,c)||o.push(c),o},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const yEe=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class ZG extends Mu{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function KG(e){e.component.projection=an(e)?vEe(e):EEe(e)}function vEe(e){if(e.hasProjection){const t=Kn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?bEe(e):void 0,a=new ZG(e.projectionName(!0),{...Kn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function bEe(e){const t=[],{encoding:n}=e;for(const i of[[za,Ba],[ea,La]])(kn(n[i[0]])||kn(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ir)&&e.typedFieldDef(ir).type===sh&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(on.Main)),t}function xEe(e,t){const n=w5(yEe,r=>!!(!Ue(e.explicit,r)&&!Ue(t.explicit,r)||Ue(e.explicit,r)&&Ue(t.explicit,r)&&br(e.get(r),t.get(r))));if(br(e.size,t.size)){if(n)return e;if(br(e.explicit,{}))return t;if(br(t.explicit,{}))return e}return null}function EEe(e){if(e.children.length===0)return;let t;for(const i of e.children)KG(i);const n=w5(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=xEe(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new ZG(i,t.specifiedProjection,t.size,Je(t.data));for(const a of e.children){const o=a.component.projection;o&&(o.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(o.get("name"),i),o.merged=!0)}return r}}function DEe(e,t,n,i){if(Pp(t,n)){const r=an(e)?e.axis(n)??e.legend(n)??{}:{},a=Be(t,{expr:"datum"}),o=Be(t,{expr:"datum",binSuffix:"end"});return{formulaAs:Be(t,{binSuffix:"range",forAs:!0}),formula:zp(a,o,r.format,r.formatType,i)}}return{}}function JG(e,t){return`${pq(e)}_${t}`}function CEe(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function zk(e,t,n){const i=O2(n,void 0)??{},r=JG(i,t);return e.getName(`${r}_bins`)}function SEe(e){return"as"in e}function U7(e,t,n){let i,r;SEe(e)?i=ze(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[Be(e,{forAs:!0}),Be(e,{binSuffix:"end",forAs:!0})];const a={...O2(t,void 0)},o=JG(a,e.field),{signal:u,extentSignal:c}=CEe(n,o);if(D2(a.extent)){const d=a.extent;r=$G(n,d.param,d),delete a.extent}const l={bin:a,field:e.field,as:[i],...u?{signal:u}:{},...c?{extentSignal:c}:{},...r?{span:r}:{}};return{key:o,binComponent:l}}class uo extends Nt{bins;clone(){return new uo(null,Je(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,o)=>{if(Ii(a)&&Gt(a.bin)){const{key:u,binComponent:c}=U7(a,a.bin,n);r[u]={...c,...r[u],...DEe(n,a,o,n.config)}}return r},{});return qt(i)?null:new uo(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=U7(n,n.bin,i);return new uo(t,{[r]:a})}merge(t,n){for(const i of _e(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=eo([...this.bins[i].as,...t.bins[i].as],mt)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(Dn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(Dn(this.bins).map(t=>t.field))}hash(){return`Bin ${mt(this.bins)}`}assemble(){return Dn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...o}=t.bin,u={type:"bin",field:Jr(t.field),as:i,signal:t.signal,...D2(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!a&&t.extentSignal&&(n.push({type:"extent",field:Jr(t.field),signal:t.extentSignal}),u.extent={signal:t.extentSignal}),n.push(u);for(const c of r)for(let l=0;l<2;l++)n.push({type:"formula",expr:Be({field:i[l]},{expr:"datum"}),as:c[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function AEe(e,t,n,i){const r=an(i)?i.encoding[Fo(t)]:void 0;if(Ii(n)&&an(i)&&lH(n,r,i.markDef,i.config)){e.add(Be(n,{})),e.add(Be(n,{suffix:"end"}));const{mark:a,markDef:o,config:u}=i,c=Is({fieldDef:n,markDef:o,config:u});Vg(a)&&c!==.5&&vn(t)&&(e.add(Be(n,{suffix:U2})),e.add(Be(n,{suffix:P2}))),n.bin&&Pp(n,t)&&e.add(Be(n,{binSuffix:"range"}))}else if(oq(t)){const a=aq(t);e.add(i.getName(a))}else e.add(Be(n));return Uc(n)&&hve(n.scale?.range)&&e.add(n.scale.range.field),e}function _Ee(e,t){for(const n of _e(t)){const i=t[n];for(const r of _e(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class Da extends Nt{dimensions;measures;clone(){return new Da(null,new Set(this.dimensions),Je(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(o=>{o.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((o,u)=>{const{aggregate:c,field:l}=o;if(c)if(c==="count")r["*"]??={},r["*"].count=new Set([Be(o,{forAs:!0})]);else{if(Eu(c)||nl(c)){const d=Eu(c)?"argmin":"argmax",h=c[d];r[h]??={},r[h][d]=new Set([Be({op:d,field:h},{forAs:!0})])}else r[l]??={},r[l][c]=new Set([Be(o,{forAs:!0})]);ko(u)&&n.scaleDomain(u)==="unaggregated"&&(r[l]??={},r[l].min=new Set([Be({field:l,aggregate:"min"},{forAs:!0})]),r[l].max=new Set([Be({field:l,aggregate:"max"},{forAs:!0})]))}else AEe(a,u,o,n)}),a.size+_e(r).length===0)?null:new Da(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:o,field:u,as:c}=a;o&&(o==="count"?(r["*"]??={},r["*"].count=new Set([c||Be(a,{forAs:!0})])):(r[u]??={},r[u][o]??=new Set,r[u][o].add(c||Be(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+_e(r).length===0?null:new Da(t,i,r)}merge(t){return Zj(this.dimensions,t.dimensions)?(_Ee(this.measures,t.measures),!0):(Lye("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,..._e(this.measures)])}producedFields(){const t=new Set;for(const n of _e(this.measures))for(const i of _e(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${mt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of _e(this.measures))for(const o of _e(this.measures[a]))for(const u of this.measures[a][o])i.push(u),t.push(o),n.push(a==="*"?null:Jr(a));return{type:"aggregate",groupby:[...this.dimensions].map(Jr),ops:t,fields:n,as:i}}}class fh extends Nt{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of Gr){const o=n.facet[a];if(o){const{bin:u,sort:c}=o;this[a]={name:n.getName(`${a}_domain`),fields:[Be(o),...Gt(u)?[Be(o,{binSuffix:"end"})]:[]],...gu(c)?{sortField:c}:be(c)?{sortIndexField:Id(o,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Gr)this[n]&&(t+=` ${n.charAt(0)}:${mt(this[n])}`);return t}get fields(){const t=[];for(const n of Gr)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Gr)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of Tu){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(Gn(r)&&zc(a)){const o=Y2(this.childModel,n),u=Pk(o);u?t[n]=u:ke(P5(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],o=[],u=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),o.push("max")):(a.push(i[r]),o.push("distinct")),u.push(`distinct_${i[r]}`));const{sortField:c,sortIndexField:l}=this[t];if(c){const{op:d=T2,field:h}=c;a.push(h),o.push(d),u.push(Be(c,{forAs:!0}))}else l&&(a.push(l),o.push("max"),u.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:o,as:u}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const c of Ok){for(const l of Nk){const d=i[c]?.[l]??[];for(const h of d)if(h.axes?.length>0){a[c]=!0;break}}if(a[c]){const l=`length(data("${this.facet.name}"))`,d=c==="row"?n?{signal:`ceil(${l} / ${n})`}:1:n?{signal:`min(${l}, ${n})`}:{signal:l};r.push({name:`${this.facet.name}_${c}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:o,column:u}=a;return(o||u)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:o}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const u=[].concat(i.x??[],i.y??[]),c=u.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:u,ops:c}]})}for(const u of[hu,du])this[u]&&t.push(this.assembleRowColumnHeaderData(u,n,i));if(o){const u=this.assembleFacetHeaderData(i);u&&t.push(...u)}return t}}function P7(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function wEe(e,t){const n=T5(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=P7(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=P7(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return ke(X1e(t)),null}function FEe(e){const t={};return my(e.filter,n=>{if(Uq(n)){let i=null;X5(n)?i=yr(n.equal):W5(n)?i=yr(n.lte):V5(n)?i=yr(n.lt):Q5(n)?i=yr(n.gt):Z5(n)?i=yr(n.gte):K5(n)?i=n.range[0]:J5(n)&&(i=(n.oneOf??n.in)[0]),i&&(Lc(i)?t[n.field]="date":Ct(i)?t[n.field]="number":ze(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function kEe(e){const t={};function n(i){Rd(i)?t[i.field]="date":i.type==="quantitative"&&x1e(i.aggregate)?t[i.field]="number":kd(i.field)>1?i.field in t||(t[i.field]="flatten"):Uc(i)&&gu(i.sort)&&kd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((an(e)||Sr(e))&&e.forEachFieldDef((i,r)=>{if(Ii(i))n(i);else{const a=Rc(r),o=e.fieldDef(a);n({...i,type:o.type})}}),an(e)){const{mark:i,markDef:r,encoding:a}=e;if(il(i)&&!e.encoding.order){const o=r.orient==="horizontal"?"y":"x",u=a[o];$e(u)&&u.type==="quantitative"&&!(u.field in t)&&(t[u.field]="number")}}return t}function TEe(e){const t={};if(an(e)&&e.component.selection)for(const n of _e(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&kd(r.field)>1&&(t[r.field]="flatten")}return t}class mi extends Nt{_parse;clone(){return new mi(null,Je(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${mt(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!_s(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const u of _e(i)){const c=r.getWithExplicit(u);c.value!==void 0&&(c.explicit||c.value===i[u]||c.value==="derived"||i[u]==="flatten"?delete i[u]:ke(ZO(u,i[u],c.value)))}for(const u of _e(n)){const c=r.get(u);c!==void 0&&(c===n[u]?delete n[u]:ke(ZO(u,n[u],c)))}const a=new Mu(n,i);r.copyAll(a);const o={};for(const u of _e(a.combine())){const c=a.get(u);c!==null&&(o[u]=c)}return _e(o).length===0||r.parseNothing?null:new mi(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of _e(this._parse)){const i=this._parse[n];kd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(_e(this._parse))}dependentFields(){return new Set(_e(this._parse))}assembleTransforms(t=!1){return _e(this._parse).filter(n=>t?kd(n)>1:!0).map(n=>{const i=wEe(n,this._parse[n]);return i?{type:"formula",expr:i,as:oh(n)}:null}).filter(n=>n!==null)}}class Ps extends Nt{clone(){return new Ps(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Ta])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Ta}}}class Hp extends Nt{params;clone(){return new Hp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${mt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Gp extends Nt{params;clone(){return new Gp(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${mt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class Sc extends Nt{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(_s(t)||(n=t.format?{...Cr(t.format,["parse"])}:{}),Wg(t))this._data={values:t.values};else if(Bd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];ft(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else iG(t)?this._data={values:[{type:"Sphere"}]}:(tG(t)||_s(t))&&(this._data={});this._generator=_s(t),t.name&&(this._name=t.name),n&&!qt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function Lk(e){return e instanceof Sc||e instanceof Hp||e instanceof Gp}class Ik{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class Pc extends Ik{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class Uk extends Ik{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class $Ee extends Uk{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of _e(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class MEe extends Uk{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&Mk(t)}run(t){t instanceof Ps&&(this.requiresSelectionId&&(Lk(t.parent)||t.parent instanceof Da||t.parent instanceof mi)||(this.setModified(),t.remove()))}}class OEe extends Ik{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof ao&&(i=t.producedFields(),F5(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class NEe extends Uk{constructor(){super()}run(t){t instanceof Ki&&!t.isRequired()&&(this.setModified(),t.remove())}}class REe extends Pc{run(t){if(!Lk(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof mi)if(t instanceof mi)this.setModified(),t.merge(n);else{if(k5(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class BEe extends Pc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof mi);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const o of i){const u=o.parse;for(const c of _e(u))c in r?r[c]!==u[c]&&a.add(c):r[c]=u[c]}for(const o of a)delete r[o];if(!qt(r)){this.setModified();const o=new mi(t,r);for(const u of n){if(u instanceof mi)for(const c of _e(r))delete u.parse[c];t.removeChild(u),u.parent=o,u instanceof mi&&_e(u.parse).length===0&&u.remove()}}}}}class zEe extends Pc{run(t){t instanceof Ki||t.numChildren()>0||t instanceof fh||t instanceof Sc||(this.setModified(),t.remove())}}class LEe extends Pc{run(t){const n=t.children.filter(r=>r instanceof ao),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class IEe extends Pc{run(t){const n=t.children.filter(r=>r instanceof Da),i={};for(const r of n){const a=mt(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of _e(i)){const a=i[r];if(a.length>1){const o=a.pop();for(const u of a)o.merge(u)&&(t.removeChild(u),u.parent=o,u.remove(),this.setModified())}}}}class UEe extends Pc{model;constructor(t){super(),this.model=t}run(t){const n=!(Lk(t)||t instanceof ch||t instanceof mi||t instanceof Ps),i=[],r=[];for(const a of t.children)a instanceof uo&&(n&&!k5(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const o of i)a.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof uo?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const o of r)a.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class PEe extends Pc{run(t){const n=[...t.children];if(!Fd(n,o=>o instanceof Ki)||t.numChildren()<=1)return;const r=[];let a;for(const o of n)if(o instanceof Ki){let u=o;for(;u.numChildren()===1;){const[c]=u.children;if(c instanceof Ki)u=c;else break}r.push(...u.children),a?(t.removeChild(o),o.parent=a.parent,a.parent.removeChild(a),a.parent=u,this.setModified()):a=u}else r.push(o);if(r.length){this.setModified();for(const o of r)o.parent.removeChild(o),o.parent=a}}}class jc extends Nt{transform;clone(){return new jc(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=eo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??Be(t)}hash(){return`JoinAggregateTransform ${mt(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class Pd extends Nt{filter;clone(){return new Pd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:o,scales:u}=i;if(o==="include-invalid-values"&&u==="include-invalid-values")return null;const c=n.reduceFieldDef((l,d,h)=>{const p=ko(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=ok({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:E2(v)});b!=="show"&&b!=="always-valid"&&(l[d.field]=d)}return l},{});return _e(c).length?new Pd(t,c):null}dependentFields(){return new Set(_e(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${mt(this.filter)}`}assemble(){const t=_e(this.filter).reduce((n,i)=>{const r=this.filter[i],a=Be(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${x_(a)}))`):r.type==="quantitative"&&n.push(x_(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function x_(e){return`isValid(${e}) && isFinite(+${e})`}function jEe(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=Be(i);return r&&t.push(r),t},[])}function qEe(e){return be(e)&&e.every(t=>ze(t))&&e.length>1}class mu extends Nt{_stack;clone(){return new mu(null,Je(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:o="zero"}=n,u=[],c=[];if(n.sort!==void 0)for(const h of n.sort)u.push(h.field),c.push(yn(h.order,"ascending"));const l={field:u,order:c};let d;return qEe(a)?d=a:ze(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new mu(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:o,sort:l,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:o,offset:u,impute:c}=i,l=a.map(y=>{const v=r[y];return ka(v)}).filter(y=>!!y),d=jEe(n),h=n.encoding.order;let p;if(be(h)||$e(h))p=xq(h);else{const y=cH(h)?h.sort:o==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new mu(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:d,sort:p,offset:u,impute:c,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${mt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[Be(r,{binSuffix:"mid"})]:[Be(r,{}),Be(r,{binSuffix:"end"})]:[Be(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:o,offset:u,impute:c,as:l}=this._stack;if(c)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=Be(d,{expr:"datum"}),v=Be(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${x_(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:Be(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:Be(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:o,as:l,offset:u}),t}}class dh extends Nt{transform;clone(){return new dh(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=eo(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??Be(t)}hash(){return`WindowTransform ${mt(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,o=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>I5(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const u=[],c=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)u.push(h.field),c.push(h.order??"ascending");const l={field:u,order:c},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:l,...d!==void 0?{ignorePeers:d}:{},...o!==void 0?{groupby:o}:{},...a!==void 0?{frame:a}:{}}}}function HEe(e){function t(n){if(!(n instanceof fh)){const i=n.clone();if(i instanceof Ki){const r=D_+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof Da||i instanceof mu||i instanceof dh||i instanceof jc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function E_(e){if(e instanceof fh)if(e.numChildren()===1&&!(e.children[0]instanceof Ki)){const t=e.children[0];(t instanceof Da||t instanceof mu||t instanceof dh||t instanceof jc)&&t.addDimensions(e.fields),t.swapWithParent(),E_(e)}else{const t=e.model.component.data.main;eY(t);const n=HEe(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(E_)}function eY(e){if(e instanceof Ki&&e.type===on.Main&&e.numChildren()===1){const t=e.children[0];t instanceof fh||(t.swapWithParent(),eY(e))}}const D_="scale_",z1=5;function C_(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!C_(t.children))return!1}return!0}function sa(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function j7(e,t,n){let i=e.sources,r=!1;return r=sa(new NEe,i)||r,r=sa(new MEe(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=sa(new zEe,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=sa(new REe,i)||r,r=sa(new UEe(t),i)||r,r=sa(new OEe,i)||r,r=sa(new BEe,i)||r,r=sa(new IEe,i)||r,r=sa(new LEe,i)||r,r=sa(new $Ee,i)||r,r=sa(new PEe,i)||r),e.sources=i,r}function GEe(e,t){C_(e.sources);let n=0,i=0;for(let r=0;r<z1&&j7(e,t,!0);r++)n++;e.sources.map(E_);for(let r=0;r<z1&&j7(e,t,!1);r++)i++;C_(e.sources),Math.max(n,i)===z1&&ke(`Maximum optimization runs(${z1}) reached.`)}class Ln{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new Ln(()=>t(n))}}function tY(e){an(e)?YEe(e):XEe(e)}function YEe(e){const t=e.component.scales;for(const n of _e(t)){const i=WEe(e,n);if(t[n].setWithExplicit("domains",i),ZEe(e,n),e.component.data.isFaceted){let a=e;for(;!Sr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const u of i.value)su(u)&&(u.data=D_+u.data.replace(D_,""))}}}function XEe(e){for(const n of e.children)tY(n);const t=e.component.scales;for(const n of _e(t)){let i,r=null;for(const a of e.children){const o=a.component.scales[n];if(o){i===void 0?i=o.getWithExplicit("domains"):i=Us(i,o.getWithExplicit("domains"),"domains","scale",S_);const u=o.get("selectionExtent");r&&u&&r.param!==u.param&&ke(U1e),r=u}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function VEe(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=q7(t,n);if(!r){ke(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=q7(t,n);if(r)return"unaggregated"}return e}function WEe(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=VEe(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&kn(i.x2)?kn(i.x)?Us(as(n,r,e,"x"),as(n,r,e,"x2"),"domain","scale",S_):as(n,r,e,"x2"):t==="y"&&kn(i.y2)?kn(i.y)?Us(as(n,r,e,"y"),as(n,r,e,"y2"),"domain","scale",S_):as(n,r,e,"y2"):as(n,r,e,t)}function QEe(e,t,n){return e.map(i=>({signal:`{data: ${N2(i,{timeUnit:n,type:t})}}`}))}function PC(e,t,n){const i=Hn(n)?.unit;return t==="temporal"||i?QEe(e,t,i):[e]}function as(e,t,n,i){const{encoding:r,markDef:a,mark:o,config:u,stack:c}=n,l=kn(r[i]),{type:d}=l,h=l.timeUnit,p=q2e({invalid:po("invalid",a,u),isPath:il(o)});if(dve(t)){const b=as(e,void 0,n,i),x=PC(t.unionWith,d,h);return Wa([...x,...b.value])}else{if(qe(t))return Wa([t]);if(t&&t!=="unaggregated"&&!Xq(t))return Wa(PC(t,d,h))}if(c&&i===c.fieldChannel){if(c.offset==="normalize")return gr([[0,1]]);const b=n.requestDataName(p);return gr([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ko(i)&&$e(l)?KEe(n,i,e):void 0;if(To(l)){const b=PC([l.datum],d,h);return gr(b)}const v=l;if(t==="unaggregated"){const{field:b}=l;return gr([{data:n.requestDataName(p),field:Be({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:Be({field:b,aggregate:"max"})}])}else if(Gt(v.bin)){if(Gn(e))return gr(e==="bin-ordinal"?[]:[{data:Yg(y)?n.requestDataName(p):n.requestDataName(on.Raw),field:n.vgField(i,Pp(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!Le(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Gt(b)){const x=zk(n,v.field,b);return gr([new Ln(()=>{const D=n.getSignalName(x);return`[${D}.start, ${D}.stop]`})])}else return gr([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&ft(["time","utc"],e)){const b=r[Fo(i)];if(lH(v,b,a,u)){const x=n.requestDataName(p),D=Is({fieldDef:v,fieldDef2:b,markDef:a,config:u}),S=Vg(o)&&D!==.5&&vn(i);return gr([{data:x,field:n.vgField(i,S?{suffix:U2}:{})},{data:x,field:n.vgField(i,{suffix:S?P2:"end"})}])}}return gr(y?[{data:Yg(y)?n.requestDataName(p):n.requestDataName(on.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function jC(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":T2),...i?{field:Jr(i)}:{},...r?{order:r}:{}}}function ZEe(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=Xq(i)?i:void 0,o=Bc(r)&&D2(r.extent)?r.extent:void 0;(a||o)&&n.set("selectionExtent",a??o,!0)}function KEe(e,t,n){if(!Gn(n))return;const i=e.fieldDef(t),r=i.sort;if(uH(r))return{op:"min",field:Id(i,t),order:"ascending"};const{stack:a}=e,o=a?new Set([...a.groupbyFields,...a.stackBy.map(u=>u.fieldDef.field)]):void 0;if(gu(r)){const u=a&&!o.has(r.field);return jC(r,u)}else if(qve(r)){const{encoding:u,order:c}=r,l=e.fieldDef(u),{aggregate:d,field:h}=l,p=a&&!o.has(h);if(Eu(d)||nl(d))return jC({field:Be(l),order:c},p);if(I5(d)||!d)return jC({op:d,field:h,order:c},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(ft(["ascending",void 0],r))return!0}}function q7(e,t){const{aggregate:n,type:i}=e;return n?ze(n)&&!D1e.has(n)?{valid:!1,reason:pye(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:mye(e)}:{valid:!0}:{valid:!1,reason:gye(e)}}function S_(e,t,n,i){return e.explicit&&t.explicit&&ke(Eye(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function JEe(e){const t=eo(e.map(o=>{if(su(o)){const{sort:u,...c}=o;return c}return o}),mt),n=eo(e.map(o=>{if(su(o)){const u=o.sort;return u!==void 0&&!Yg(u)&&("op"in u&&u.op==="count"&&delete u.field,u.order==="ascending"&&delete u.order),u}}).filter(o=>o!==void 0),mt);if(t.length===0)return;if(t.length===1){const o=e[0];if(su(o)&&n.length>0){let u=n[0];if(n.length>1){ke(JO);const c=n.filter(l=>Le(l)&&"op"in l&&l.op!=="min");n.every(l=>Le(l)&&"op"in l)&&c.length===1?u=c[0]:u=!0}else if(Le(u)&&"field"in u){const c=u.field;o.field===c&&(u=u.order?{order:u.order}:!0)}return{...o,sort:u}}return o}const i=eo(n.map(o=>Yg(o)||!("op"in o)||ze(o.op)&&Ue(v1e,o.op)?o:(ke(Cye(o)),!0)),mt);let r;i.length===1?r=i[0]:i.length>1&&(ke(JO),r=!0);const a=eo(e.map(o=>su(o)?o.data:null),o=>o);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(u=>u.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function Pk(e){if(su(e)&&ze(e.field))return e.field;if(C1e(e)){let t;for(const n of e.fields)if(su(n)&&ze(n.field)){if(!t)t=n.field;else if(t!==n.field)return ke(Sye),t}return ke(Aye),t}else if(S1e(e)){ke(_ye);const t=e.fields[0];return ze(t)?t:void 0}}function Y2(e,t){const i=e.component.scales[t].get("domains").map(r=>(su(r)&&(r.data=e.lookupDataSource(r.data)),r));return JEe(i)}function nY(e){return hh(e)||jk(e)?e.children.reduce((t,n)=>t.concat(nY(n)),H7(e)):H7(e)}function H7(e){return _e(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:o,selectionExtent:u,domains:c,range:l,reverse:d,...h}=r,p=eDe(r.range,a,n,e),y=Y2(e,n),v=u?exe(e,u,i,y):null;return t.push({name:a,type:o,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function eDe(e,t,n,i){if(vn(n)){if(zc(e))return{step:{signal:`${t}_step`}}}else if(Le(e)&&su(e))return{...e,data:i.lookupDataSource(e.data)};return e}class iY extends Mu{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(ft([Jn.LOG,Jn.TIME,Jn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&ft([Jn.LINEAR,Jn.SQRT,Jn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,o=!1;for(const u of i){if(be(u)){const c=u[0],l=u[u.length-1];if(Ct(c)&&Ct(l))if(c<=0&&l>=0){r=!0;continue}else{a=!0;continue}}o=!0}if(r)return"definitely";if(a&&!o)return"definitely-not"}return"maybe"}}const tDe=["range","scheme"];function nDe(e){const t=e.component.scales;for(const n of L5){const i=t[n];if(!i)continue;const r=iDe(n,e);i.setWithExplicit("range",r)}}function G7(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=rr(t),o=e.getName(a);if(Le(i)&&i.binned&&i.step!==void 0)return new Ln(()=>{const u=e.scaleName(t),c=`(domain("${u}")[1] - domain("${u}")[0]) / ${i.step}`;return`${e.getSignalName(o)} / (${c})`});if(Gt(i)){const u=zk(e,r,i);return new Ln(()=>{const c=e.getSignalName(u),l=`(${c}.stop - ${c}.start) / ${c}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function iDe(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of tDe)if(n[h]!==void 0){const p=r_(a,h),y=Vq(e,h);if(!p)ke(wq(a,h,e));else if(y)ke(y);else switch(h){case"range":{const v=n.range;if(be(v)){if(vn(e))return Wa(v.map(b=>{if(b==="width"||b==="height"){const x=t.getName(b),D=t.getSignalName.bind(t);return Ln.fromName(D,x)}return b}))}else if(Le(v))return Wa({data:t.requestDataName(on.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return Wa(v)}case"scheme":return Wa(rDe(n[h]))}}const o=e===en||e==="xOffset"?"width":"height",u=i[o];if(yo(u)){if(vn(e))if(Gn(a)){const h=aY(u,t,e);if(h)return Wa({step:h})}else ke(Fq(o));else if(Np(e)){const h=e===Qs?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=oY(u,a);if(v)return Wa(v)}}}const{rangeMin:c,rangeMax:l}=n,d=aDe(e,t);return(c!==void 0||l!==void 0)&&r_(a,"rangeMin")&&be(d)&&d.length===2?Wa([c??d[0],l??d[1]]):gr(d)}function rDe(e){return fve(e)?{scheme:e.name,...Cr(e,["name"])}:{scheme:e}}function rY(e,t,n,{center:i}={}){const r=rr(e),a=t.getName(r),o=t.getSignalName.bind(t);return e===Xn&&wa(n)?i?[Ln.fromName(u=>`${o(u)}/2`,a),Ln.fromName(u=>`-${o(u)}/2`,a)]:[Ln.fromName(o,a),0]:i?[Ln.fromName(u=>`-${o(u)}/2`,a),Ln.fromName(u=>`${o(u)}/2`,a)]:[0,Ln.fromName(o,a)]}function aDe(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:o}=kn(a[e]),c=t.getScaleComponent(e).get("type"),{domain:l,domainMid:d}=t.specifiedScales[e];switch(e){case en:case Xn:{if(ft(["point","band"],c)){const h=uY(e,n,i.view);if(yo(h))return{step:aY(h,t,e)}}return rY(e,t,c)}case Qs:case uh:return oDe(e,t,c);case Fu:{const h=lDe(r,i),p=cDe(r,n,t,i);return Md(c)?sDe(h,p,uDe(c,i,l,e)):[h,p]}case na:return[0,Math.PI*2];case Nc:return[0,360];case Ra:return[0,new Ln(()=>{const h=t.getSignalName(Sr(t.parent)?"child_width":"width"),p=t.getSignalName(Sr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case Zs:return{step:1e3/i.scale.framesPerSecond};case el:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case tl:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ir:return"symbol";case nr:case _o:case wo:return c==="ordinal"?o==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case ku:case Ks:case Js:return[i.scale.minOpacity,i.scale.maxOpacity]}}function aY(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=N5(n),o=i[a];if(PH({step:e,offsetIsDiscrete:et(o)&&jq(o.type)})==="offset"&&EH(i,a)){const c=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(c.get("type")==="band"){const p=c.get("paddingInner")??c.get("padding")??0,y=c.get("paddingOuter")??c.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${k1e(h)})`}}else return e.step}function oY(e,t){if(PH({step:e,offsetIsDiscrete:Gn(t)})==="offset")return{step:e.step}}function oDe(e,t,n){const i=e===Qs?"x":"y",r=t.getScaleComponent(i);if(!r)return rY(i,t,n,{center:!0});const a=r.get("type"),o=t.scaleName(i),{markDef:u,config:c}=t;if(a==="band"){const l=uY(i,t.size,t.config.view);if(yo(l)){const d=oY(l,n);if(d)return d}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[i];if($e(l)&&l.timeUnit){const d=Lq(l.timeUnit,v=>`scale('${o}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=Is({fieldDef:l,markDef:u,config:c})-.5,y=p!==0?` + ${p}`:"";if(h){const v=qe(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=qe(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return Wj(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function uY(e,t,n){const i=e===en?"width":"height",r=t[i];return r||qv(n,i)}function uDe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&be(n)?n.length+1:(ke(Rye(i)),3)}}function sDe(e,t,n){const i=()=>{const r=ba(t),a=ba(e),o=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${o}, ${o})`};return qe(t)?new Ln(i):{signal:i()}}function lDe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(C2("size",e))}const Y7=.95;function cDe(e,t,n,i){const r={x:G7(n,"x"),y:G7(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=X7(t,r,i.view);return Ct(a)?a-1:new Ln(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=X7(t,r,i.view);return Ct(a)?Math.pow(Y7*a,2):new Ln(()=>`pow(${Y7} * ${a.signal}, 2)`)}}throw new Error(C2("size",e))}function X7(e,t,n){const i=yo(e.width)?e.width.step:s_(n,"width"),r=yo(e.height)?e.height.step:s_(n,"height");return t.x||t.y?new Ln(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function sY(e,t){an(e)?fDe(e,t):cY(e,t)}function fDe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:o}=e;for(const u of _e(n)){const c=o[u],l=n[u],d=e.getScaleComponent(u),h=kn(r[u]),p=c[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),x=r_(y,t),D=Vq(u,t);if(p!==void 0&&(x?D&&ke(D):ke(wq(y,t,u))),x&&D===void 0)if(p!==void 0){const S=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":Lc(c[t])||A==="temporal"||S?l.set(t,{signal:N2(c[t],{type:A,timeUnit:S})},!0):l.set(t,c[t],!0);break;default:l.copyKeyFromObject(t,c)}}else{const S=we(V7,t)?V7[t]({model:e,channel:u,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:c.domain,domainMin:c.domainMin,domainMax:c.domainMax,markDef:a,config:i,hasNestedOffsetScale:DH(r,u),hasSecondaryRangeChannel:!!r[Fo(u)]}):i.scale[t];S!==void 0&&l.set(t,S,!1)}}}const V7={bins:({model:e,fieldOrDatumDef:t})=>$e(t)?dDe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>hDe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>gDe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>pDe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>mDe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>yDe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=$e(e)?e.sort:void 0;return vDe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:o})=>bDe(e,t,n,i,r,a.scale,o)};function lY(e){an(e)?nDe(e):cY(e,"range")}function cY(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?lY(i):sY(i,t);for(const i of _e(n)){let r;for(const a of e.children){const o=a.component.scales[i];if(o){const u=o.getWithExplicit(t);r=Us(r,u,t,"scale",eG((c,l)=>{switch(t){case"range":return c.step&&l.step?c.step-l.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function dDe(e,t){const n=t.bin;if(Gt(n)){const i=zk(e,t.field,n);return new Ln(()=>e.getSignalName(i))}else if(Zn(n)&&Bc(n)&&n.step!==void 0)return{step:n.step}}function hDe(e,t){if(ft([nr,_o,wo],e)&&t!=="nominal")return"hcl"}function gDe(e,t,n,i,r,a){if(!(ka(a)?.bin||be(n)||r!=null||i!=null||ft([Jn.TIME,Jn.UTC],e)))return vn(t)?!0:void 0}function pDe(e,t,n,i,r,a){if(vn(e)){if(to(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:u}=r;if(o==="bar"&&!($e(i)&&(i.bin||i.timeUnit))&&(u==="vertical"&&e==="x"||u==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Jn.POINT)return n.pointPadding}}function mDe(e,t,n,i,r,a=!1){if(e===void 0){if(vn(t)){const{bandPaddingInner:o,barBandPaddingInner:u,rectBandPaddingInner:c,tickBandPaddingInner:l,bandWithNestedOffsetPaddingInner:d}=r;return a?d:yn(o,n==="bar"?u:n==="tick"?l:c)}else if(Np(t)&&i===Jn.BAND)return r.offsetBandPaddingInner}}function yDe(e,t,n,i,r,a=!1){if(e===void 0){if(vn(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:u}=r;if(a)return u;if(n===Jn.BAND)return yn(o,qe(i)?{signal:`${i.signal}/2`}:i/2)}else if(Np(t)){if(n===Jn.POINT)return .5;if(n===Jn.BAND)return r.offsetBandPaddingOuter}}}function vDe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return wa(e)&&t==="descending"?qe(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(wa(e)&&t==="descending")return!0}function bDe(e,t,n,i,r,a,o){if(!!n&&n!=="unaggregated"&&wa(r)){if(be(n)){const c=n[0],l=n[n.length-1];if(Ct(c)&&c<=0&&Ct(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Md(r))return!0;if(!($e(t)&&t.bin)&&ft([...Tu,...l1e],e)){const{orient:c,type:l}=i;return ft(["bar","area","line","trail"],l)&&(c==="horizontal"&&e==="y"||c==="vertical"&&e==="x")?!1:ft(["bar","area"],l)&&!o?!0:a?.zero}return!1}function xDe(e,t,n,i,r=!1){const a=EDe(t,n,i,r),{type:o}=e;return ko(t)?o!==void 0?vve(t,o)?$e(n)&&!yve(o,n.type)?(ke(bye(o,a)),a):o:(ke(vye(t,o,a)),a):a:null}function EDe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(id(e)||TC(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&ke($C(e,"ordinal")),"ordinal";if(kC(e))return"band";if(vn(e)||Np(e)){if(ft(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in z5)return"band";const r=n[rr(e)];return xc(r)||Nd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return id(e)?"time":TC(e)==="discrete"?(ke($C(e,"temporal")),"ordinal"):$e(t)&&t.timeUnit&&Hn(t.timeUnit).utc?"utc":kC(e)?"band":"time";case"quantitative":return id(e)?$e(t)&&Gt(t.bin)?"bin-ordinal":"linear":TC(e)==="discrete"?(ke($C(e,"quantitative")),"ordinal"):kC(e)?"band":"linear";case"geojson":return}throw new Error(Aq(t.type))}function DDe(e,{ignoreRange:t}={}){fY(e),tY(e);for(const n of mve)sY(e,n);t||lY(e)}function fY(e){an(e)?e.component.scales=CDe(e):e.component.scales=ADe(e)}function CDe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of L5){const o=kn(t[a]);if(o&&n===Zq&&a===ir&&o.type===sh)continue;let u=o&&o.scale;if(o&&u!==null&&u!==!1){u??={};const c=DH(t,a),l=xDe(u,a,o,i,c);r[a]=new iY(e.scaleName(`${a}`,!0),{value:l,explicit:u.type===l})}}return r}const SDe=eG((e,t)=>t7(e)-t7(t));function ADe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){fY(r);for(const a of _e(r.component.scales))if(i.scale[a]??=jG(a,e),i.scale[a]==="shared"){const o=n[a],u=r.component.scales[a].getWithExplicit("type");o?ove(o.value,u.value)?n[a]=Us(o,u,"type","scale",SDe):(i.scale[a]="independent",delete n[a]):n[a]=u}}for(const r of _e(n)){const a=e.scaleName(r,!0),o=n[r];t[r]=new iY(a,o);for(const u of e.children){const c=u.component.scales[r];c&&(u.renameScale(c.get("name"),a),c.merged=!0)}}return t}class qC{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function an(e){return e?.type==="unit"}function Sr(e){return e?.type==="facet"}function jk(e){return e?.type==="concat"}function hh(e){return e?.type==="layer"}class qk{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,o,u){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Kn(u),this.name=t.name??r,this.title=cs(t.title)?{text:t.title}:t.title?Kn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new qC,this.projectionNameMap=i?i.projectionNameMap:new qC,this.signalNameMap=i?i.signalNameMap:new qC,this.data=t.data,this.description=t.description,this.transforms=$2e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Rbe(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:$2(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new Mu,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?Je(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){DDe(this)}parseProjection(){KG(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){XG(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of _e(i)){const o=i[a];o!==void 0&&(r[a]=Wt(o))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Wt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:qt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=Yxe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of Gr)t[i].title&&n.push(Uxe(this,i));for(const i of Ok)n=n.concat(Pxe(this,i));return n}assembleAxes(){return wxe(this.component.axes,this.config)}assembleLegends(){return WG(this)}assembleProjections(){return pEe(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...mq(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return ft(["unit","layer"],this.type)?ft(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",qt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||Sr(this.parent)?nY(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Jt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(on[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(Sr(this.parent)){const n=UG(t),i=x2(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),o=r.get("range");if(Gn(a)&&zc(o)){const u=r.get("name"),c=Y2(this,i),l=Pk(c);if(l){const d=Be({aggregate:"distinct",field:l},{expr:"datum"});return{signal:IG(u,r,d)}}else return ke(P5(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(sq(t)&&ko(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(N1e(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class dY extends qk{vgField(t,n={}){const i=this.fieldDef(t);if(i)return Be(i,n)}reduceFieldDef(t,n){return cbe(this.getMapping(),(i,r,a)=>{const o=ka(r);return o?t(i,o,a):i},n)}forEachFieldDef(t,n){pk(this.getMapping(),(i,r)=>{const a=ka(i);a&&t(a,r)},n)}}class X2 extends Nt{transform;clone(){return new X2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${mt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class V2 extends Nt{transform;clone(){return new V2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${mt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class W2 extends Nt{transform;clone(){return new W2(this.parent,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,o)=>r[o]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${mt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Q2 extends Nt{transform;clone(){return new Q2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${mt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class od extends Nt{fields;geojson;signal;clone(){return new od(null,Je(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[za,Ba],[ea,La]]){const a=r.map(o=>{const u=kn(n.encoding[o]);return $e(u)?u.field:To(u)?{expr:`${u.datum}`}:Fa(u)?{expr:`${u.value}`}:void 0});(a[0]||a[1])&&(t=new od(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(ir)){const r=n.typedFieldDef(ir);r.type===sh&&(t=new od(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(ze);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${mt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Qg extends Nt{projection;fields;as;clone(){return new Qg(null,this.projection,Je(this.fields),Je(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[za,Ba],[ea,La]]){const r=i.map(o=>{const u=kn(n.encoding[o]);return $e(u)?u.field:To(u)?{expr:`${u.datum}`}:Fa(u)?{expr:`${u.value}`}:void 0}),a=i[0]===ea?"2":"";(r[0]||r[1])&&(t=new Qg(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(ze))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${mt(this.fields)} ${mt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class tc extends Nt{transform;clone(){return new tc(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new tc(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if($e(r)&&$e(a)){const o=r.impute?r:a.impute?a:void 0;if(o===void 0)return;const u=r.impute?a:a.impute?r:void 0,{method:c,value:l,frame:d,keyvals:h}=o.impute,p=AH(n.mark,i);return new tc(t,{impute:o.field,key:u.field,...c?{method:c}:{},...l!==void 0?{value:l}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${mt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:o,frame:u=[null,null]}=this.transform,c={type:"impute",field:t,key:n,...i?{keyvals:d2e(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?o:null};if(r&&r!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:u,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[c,l,d]}else return[c]}}class Z2 extends Nt{transform;clone(){return new Z2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${mt(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class Zg extends Nt{transform;secondary;clone(){return new Zg(null,Je(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:o}=i;let u=null;if(h2e(o)){let c=pY(o.data,a);c||(c=new Sc(o.data),a.push(c));const l=n.getName(`lookup_${r}`);u=new Ki(c,l,on.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=u}else if(g2e(o)){const c=o.param;i={as:c,...i};let l;try{l=n.getSelectionComponent(Jt(c),c)}catch{throw new Error(L1e(c))}if(u=l.materialized,!u)throw new Error(I1e(c))}return new Zg(t,i,u.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Ie(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${mt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Ie(this.transform.as)}:{}};else{let n=this.transform.as;ze(n)||(ke(Q1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class K2 extends Nt{transform;clone(){return new K2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${mt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class J2 extends Nt{transform;clone(){return new J2(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Je(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${mt(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class ex extends Nt{transform;clone(){return new ex(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=eo((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${mt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class tx extends Nt{transform;clone(){return new tx(null,Je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${mt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function hY(e){let t=0;function n(i,r){if(i instanceof Sc&&!i.isGenerator&&!Bd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof mi&&(i.parent instanceof Sc&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof fh){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof Hp||i instanceof Gp||i instanceof Pd||i instanceof ch||i instanceof Ld||i instanceof Qg||i instanceof Da||i instanceof Zg||i instanceof dh||i instanceof jc||i instanceof Q2||i instanceof W2||i instanceof X2||i instanceof Z2||i instanceof K2||i instanceof J2||i instanceof Ps||i instanceof tx||i instanceof ex||i instanceof V2)&&r.transform.push(i.assemble()),(i instanceof uo||i instanceof ao||i instanceof tc||i instanceof mu||i instanceof od)&&r.transform.push(...i.assemble()),i instanceof Ki&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Ki?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ki&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const o of i.children)n(o,{name:null,source:a,transform:[]});break}}}return n}function _De(e){const t=[],n=hY(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function wDe(e,t){const n=[],i=hY(n);let r=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${r++}`);const u=o.assemble();i(o,u)}for(const o of n)o.transform.length===0&&delete o.transform;let a=0;for(const[o,u]of n.entries())(u.transform??[]).length===0&&!u.source&&n.splice(a++,0,n.splice(o,1)[0]);for(const o of n)for(const u of o.transform??[])u.type==="lookup"&&(u.from=e.outputNodes[u.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function FDe(e){return e==="top"||e==="left"||qe(e)?"header":"footer"}function kDe(e){for(const t of Gr)TDe(e,t);W7(e,"x"),W7(e,"y")}function TDe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const o=n[t],u=Ud("title",null,i,t);let c=rd(o,i,{allowDisabling:!0,includeDefault:u===void 0||!!u});r.component.layoutHeaders[t].title&&(c=be(c)?c.join(", "):c,c+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const l=Ud("labelOrient",o.header,i,t),d=o.header!==null?yn(o.header?.labels,i.header.labels,!0):!1,h=ft(["bottom","right"],l)?"footer":"header";a.layoutHeaders[t]={title:o.header!==null?c:null,facetFieldDef:o,[h]:t==="facet"?[]:[gY(e,t,d)]}}}function gY(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function W7(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=Bk(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",o=i[a];for(const u of n.component.axes[t]){const c=FDe(u.get("orient"));o[c]??=[gY(e,a,!1)];const l=ag(u,"main",e.config,{header:!0});l&&o[c][0].axes.push(l),u.mainExtracted=!0}}}}function $De(e){Hk(e),Xv(e,"width"),Xv(e,"height")}function MDe(e){Hk(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Xv(e,t),Xv(e,n)}function Hk(e){for(const t of e.children)t.parseLayoutSize()}function Xv(e,t){const n=UG(t),i=x2(n),r=e.component.resolve,a=e.component.layoutSize;let o;for(const u of e.children){const c=u.component.layoutSize.getWithExplicit(n),l=r.scale[i]??jG(i,e);if(l==="independent"&&c.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==c.value){o=void 0;break}o=Us(o,c,n,"")}else o=c}if(o){for(const u of e.children)e.renameSignal(u.getName(n),e.getName(t)),u.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,o)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function ODe(e){const{size:t,component:n}=e;for(const i of Tu){const r=rr(i);if(t[r]){const a=t[r];n.layoutSize.set(r,yo(a)?"step":a,!0)}else{const a=NDe(e,r);n.layoutSize.set(r,a,!1)}}}function NDe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),o=r.get("range");if(Gn(a)){const u=qv(i.view,t);return zc(o)||yo(u)?"step":u}else return u_(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return u_(i.view,t);{const a=qv(i.view,t);return yo(a)?a.step:a}}}function A_(e,t,n){return Be(t,{suffix:`by_${Be(e)}`,...n})}class Eg extends dY{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=Wk(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Lp(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=_e(t),i={};for(const r of n){if(![du,hu].includes(r)){ke(C2(r,"facet"));break}const a=t[r];if(a.field===void 0){ke(n_(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=gk(t,n);return i.header?i.header=Kn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return we(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=nx(this),this.child.parseData()}parseLayoutSize(){Hk(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,Dn(this.component.selection).some(t=>oo(t))&&q5(j5)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),kDe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Gr)for(const i of Nk){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:o}=r;if(o){const u=Ud("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(u)){const c=H2(n,u);t.titleAnchor??={},t.titleAnchor[c]="end"}}if(a?.[0]){const u=n==="row"?"height":"width",c=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(u)&&(t[c]??={},t[c][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Eg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Eg?{...this.channelHasField("column")?{encode:{update:{columns:{field:Be(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Eg){if(this.child.channelHasField("column")){const r=Be(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of Tu){const a=this.child.component.scales[r];if(a&&!a.merged){const o=a.get("type"),u=a.get("range");if(Gn(o)&&zc(u)){const c=Y2(this.child,r),l=Pk(c);l?(t.push(l),n.push("distinct"),i.push(`distinct_${l}`)):ke(P5(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:o,as:u}=this.getCardinalityAggregateForChild(),c=[];for(const d of Gr){const h=this.facet[d];if(h){c.push(Be(h));const{bin:p,sort:y}=h;if(Gt(p)&&c.push(Be(h,{binSuffix:"end"})),gu(y)){const{field:v,op:b=T2}=y,x=A_(h,y);i&&r?(a.push(x),o.push("max"),u.push(x)):(a.push(v),o.push(b),u.push(x))}else if(be(y)){const v=Id(h,d);a.push(v),o.push("max"),u.push(v)}}}const l=!!i&&!!r;return{name:t,data:n,groupby:c,...l||a.length>0?{aggregate:{...l?{cross:l}:{},...a.length?{fields:a,ops:o,as:u}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?gu(i.sort)?[A_(i,i.sort,{expr:"datum"})]:be(i.sort)?[Id(i,t,{expr:"datum"})]:[Be(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(gu(r)?r.order:!be(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return v_(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of Ok)if(t[r]){const a=Ud("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return v_(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=_De(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Gr.map(c=>this.facetSortFields(c)).flat(),order:Gr.map(c=>this.facetSortOrder(c)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(Q2e(this,[]))}]}getMapping(){return this.facet}}function RDe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(gu(a.sort)){const{field:o,op:u=T2}=a.sort;e=r=new jc(e,{joinaggregate:[{op:u,field:o,as:A_(a,a.sort,{forAs:!0})}],groupby:[Be(a)]})}return r}return null}function pY(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const o=e.format?.feature;if((o||a)&&o!==a)continue;const u=i.format?.mesh;if(!((r||u)&&r!==u)){if(Wg(e)&&Wg(i)){if(br(e.values,i.values))return n}else if(Bd(e)&&Bd(i)){if(e.url===i.url)return n}else if(tG(e)&&e.name===n.dataName)return n}}return null}function BDe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new Sc({values:[]});return t.push(i),i}const n=pY(e.data,t);if(n)return _s(e.data)||(n.data.format=Qj({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new Sc(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function zDe(e,t,n){let i=0;for(const r of t.transforms){let a,o;if(S2e(r))o=e=new Ld(e,r),a="derived";else if(_k(r)){const u=FEe(r);o=e=mi.makeWithAncestors(e,{},u,n)??e,e=new ch(e,t,r.filter)}else if(QH(r))o=e=uo.makeFromTransform(e,r,t),a="number";else if(_2e(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new mi(e,{[r.field]:a}),n.set(r.field,a,!1)),o=e=ao.makeFromTransform(e,r);else if(w2e(r))o=e=Da.makeFromTransform(e,r),a="number",Mk(t)&&(e=new Ps(e));else if(WH(r))o=e=Zg.make(e,t,r,i++),a="derived";else if(E2e(r))o=e=new dh(e,r),a="number";else if(D2e(r))o=e=new jc(e,r),a="number";else if(F2e(r))o=e=mu.makeFromTransform(e,r),a="derived";else if(k2e(r))o=e=new Q2(e,r),a="derived";else if(T2e(r))o=e=new V2(e,r),a="derived";else if(C2e(r))o=e=new W2(e,r),a="derived";else if(p2e(r))o=e=new ex(e,r),a="derived";else if(x2e(r))e=new tx(e,r);else if(A2e(r))o=e=tc.makeFromTransform(e,r),a="derived";else if(m2e(r))o=e=new X2(e,r),a="derived";else if(y2e(r))o=e=new K2(e,r),a="derived";else if(v2e(r))o=e=new J2(e,r),a="derived";else if(b2e(r))o=e=new Z2(e,r),a="derived";else{ke(W1e(r));continue}if(o&&a!==void 0)for(const u of o.producedFields()??[])n.set(u,a,!1)}return e}function nx(e){let t=BDe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,o=!(r&&(_s(r)||Bd(r)||Wg(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new j2e;_s(r)?(nG(r)?t=new Gp(t,r.sequence):wk(r)&&(t=new Hp(t,r.graticule)),o.parseNothing=!0):r?.format?.parse===null&&(o.parseNothing=!0),t=mi.makeExplicit(t,e,o)??t,t=new Ps(t);const u=e.parent&&hh(e.parent);(an(e)||Sr(e))&&u&&(t=uo.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=zDe(t,e,o));const c=TEe(e),l=kEe(e);t=mi.makeWithAncestors(t,{},{...c,...l},o)??t,an(e)&&(t=od.parseAll(t,e),t=Qg.parseAll(t,e)),(an(e)||Sr(e))&&(u||(t=uo.makeFromEncoding(t,e)??t),t=ao.makeFromEncoding(t,e)??t,t=Ld.parseAllForSortIndex(t,e));const d=t=L1(on.Raw,e,t);if(an(e)){const x=Da.makeFromEncoding(t,e);x&&(t=x,Mk(e)&&(t=new Ps(t))),t=tc.makeFromEncoding(t,e)??t,t=mu.makeFromEncoding(t,e)??t}let h,p;if(an(e)){const{markDef:x,mark:D,config:S}=e,A=It("invalid",x,S),{marks:w,scales:_}=p=rG({invalid:A,isPath:il(D)});w!==_&&_==="include-invalid-values"&&(h=t=L1(on.PreFilterInvalid,e,t)),w==="exclude-invalid-values"&&(t=Pd.make(t,e,p)??t)}const y=t=L1(on.Main,e,t);let v;if(an(e)&&p){const{marks:x,scales:D}=p;x==="include-invalid-values"&&D==="exclude-invalid-values"&&(t=Pd.make(t,e,p)??t,v=t=L1(on.PostFilterInvalid,e,t))}an(e)&&Axe(e,y);let b=null;if(Sr(e)){const x=e.getName("facet");t=RDe(t,e.facet)??t,b=new fh(t,e,x,y.getSource()),n[x]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:o,preFilterInvalid:h,postFilterInvalid:v}}function L1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),o=new Ki(n,a,e,r);return i[a]=o,o}class LDe extends qk{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&ke(Y1e),this.children=this.getChildren(t).map((a,o)=>Wk(a,this,this.getName(`concat_${o}`),void 0,r))}parseData(){this.component.data=nx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _e(t.component.selection))this.component.selection[n]=t.component.selection[n]}Dn(this.component.selection).some(t=>oo(t))&&q5(j5)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return z2(t)?t.vconcat:Sk(t)?t.hconcat:t.concat}parseLayoutSize(){MDe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=Rk(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function IDe(e){return e===!1||e===null}const UDe={disable:1,gridScale:1,scale:1,...bH,labelExpr:1,encode:1},mY=_e(UDe);class Gk extends Mu{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new Gk(Je(this.explicit),Je(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!IDe(this.get(t))}hasOrientSignalRef(){return qe(this.explicit.orient)}}function PDe(e,t,n){const{encoding:i,config:r}=e,a=kn(i[t])??kn(i[Fo(t)]),o=e.axis(t)||{},{format:u,formatType:c}=o;if(Ec(c))return{text:xa({fieldOrDatumDef:a,field:"datum.value",format:u,formatType:c,config:r}),...n};if(u===void 0&&c===void 0&&r.customFormatTypes){if(Od(a)==="quantitative"){if(Nd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:xa({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:xa({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(Od(a)==="temporal"&&r.timeFormatType&&$e(a)&&!a.timeUnit)return{text:xa({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function jDe(e){return Tu.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[WDe(n,e)]),t),{})}const qDe={bottom:"top",top:"bottom",left:"right",right:"left"};function HDe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of _e(r.component.axes))n.axis[a]=Bk(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=GDe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of Tu){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const o of a.component.axes[r]){const{value:u,explicit:c}=o.getWithExplicit("orient");if(!qe(u)){if(i[u]>0&&!c){const l=qDe[u];i[u]>i[l]&&o.set("orient",l,!1)}i[u]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,o]of(t[r]||[]).entries())a>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function GDe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const o=r.getWithExplicit("orient"),u=a.getWithExplicit("orient");if(o.explicit&&u.explicit&&o.value!==u.value)return;e[i]=YDe(r,a)}}}else return t.map(n=>n.clone());return e}function YDe(e,t){for(const n of mY){const i=Us(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return Cq(r,a);case"gridScale":return{explicit:r.explicit,value:yn(r.value,a.value)}}return I2(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function XDe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(qe(n.labelAngle)?n.labelAngle:Xg(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===RG(i,r))return!0}return e===n[t]}const VDe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function WDe(e,t){let n=t.axis(e);const i=new Gk,r=kn(t.encoding[e]),{mark:a,config:o}=t,u=n?.orient||o[e==="x"?"axisX":"axisY"]?.orient||o.axis?.orient||Rxe(e),c=t.getScaleComponent(e).get("type"),l=Fxe(e,c,u,t.config),d=n!==void 0?!n:m_("disable",o.style,n?.style,l).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=Mxe(r,n,e,o.style,l),p=aH(n.formatType,r,c),y=rH(r,r.type,n.format,n.formatType,o,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:c,orient:u,labelAngle:h,format:y,formatType:p,mark:a,config:o};for(const D of mY){const S=D in R7?R7[D](v):s7(D)?n[D]:void 0,A=S!==void 0,w=XDe(S,D,n,t,e);if(A&&w)i.set(D,S,w);else{const{configValue:_=void 0,configFrom:k=void 0}=s7(D)&&D!=="values"?m_(D,o.style,n.style,l):{},F=_!==void 0;A&&!F?i.set(D,S,w):(k!=="vgAxisConfig"||VDe.has(D)&&F||jp(_)||qe(_))&&i.set(D,_,!1)}}const b=n.encoding??{},x=vH.reduce((D,S)=>{if(!i.hasAxisPart(S))return D;const A=PG(b[S]??{},t),w=S==="labels"?PDe(t,e,A):A;return w!==void 0&&!qt(w)&&(D[S]={update:w}),D},{});return qt(x)||i.set("encode",x,!!n.encoding||n.labelAngle!==void 0),i}function QDe({encoding:e,size:t}){for(const n of Tu){const i=rr(n);yo(t[i])&&xs(e[n])&&(delete t[i],ke(Fq(i)))}return t}const ZDe={vgMark:"arc",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...Du(e,"radius"),...Du(e,"theta")})},KDe={vgMark:"area",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Hv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Hv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...$k(e)})},JDe={vgMark:"rect",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(e,"x"),...Du(e,"y")})},eCe={vgMark:"shape",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&$e(n)&&n.type===sh?{field:Be(n,{expr:"datum"})}:{}}]}},tCe={vgMark:"image",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(e,"x"),...Du(e,"y"),...kk(e,"url")})},nCe={vgMark:"line",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...ei("size",e,{vgChannel:"strokeWidth"}),...$k(e)})},iCe={vgMark:"trail",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...ei("size",e),...$k(e)})};function Yk(e,t){const{config:n}=e;return{...ia(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...ei("size",e),...ei("angle",e),...rCe(e,n,t)}}function rCe(e,t,n){return n?{shape:{value:n}}:ei("shape",e)}const aCe={vgMark:"symbol",encodeEntry:e=>Yk(e)},oCe={vgMark:"symbol",encodeEntry:e=>Yk(e,"circle")},uCe={vgMark:"symbol",encodeEntry:e=>Yk(e,"square")},sCe={vgMark:"rect",encodeEntry:e=>({...ia(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(e,"x"),...Du(e,"y")})},lCe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...ia(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Hv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Hv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...ei("size",e,{vgChannel:"strokeWidth"})}}},cCe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...ia(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Ni("x",e,{defaultPos:"mid"}),...Ni("y",e,{defaultPos:"mid"}),...kk(e),...ei("size",e,{vgChannel:"fontSize"}),...ei("angle",e),...$7("align",fCe(e.markDef,n,t)),...$7("baseline",dCe(e.markDef,n,t)),...Ni("radius",e,{defaultPos:null}),...Ni("theta",e,{defaultPos:null})}}};function fCe(e,t,n){if(It("align",e,n)===void 0)return"center"}function dCe(e,t,n){if(It("baseline",e,n)===void 0)return"middle"}const hCe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",o=i==="horizontal"?"height":"width";return{...ia(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Du(e,r),...Ni(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[o]:Wt(It("thickness",n,t))}}},I1={arc:ZDe,area:KDe,bar:JDe,circle:oCe,geoshape:eCe,image:tCe,line:nCe,point:aCe,rect:sCe,rule:lCe,square:uCe,text:cCe,tick:hCe,trail:iCe};function gCe(e){if(ft([F2,_2,Dve],e.mark)){const t=AH(e.mark,e.encoding);if(t.length>0)return pCe(e,t)}else if(e.mark===w2){const t=e_.some(n=>It(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return mCe(e)}return Xk(e)}const Q7="faceted_path_";function pCe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:Q7+e.requestDataName(on.Main),data:e.requestDataName(on.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:Xk(e,{fromPrefix:Q7})}]}const Z7="stack_group_";function mCe(e){const[t]=Xk(e,{fromPrefix:Z7}),n=e.scaleName(e.stack.fieldChannel),i=(l={})=>e.vgField(e.stack.fieldChannel,l),r=(l,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${l}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,o;e.stack.fieldChannel==="x"?(a={...wd(t.encode.update,["y","yc","y2","height",...e_]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Cr(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...wd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Cr(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const l of e_){const d=po(l,e.markDef,e.config);t.encode.update[l]?(a[l]=t.encode.update[l],delete t.encode.update[l]):d&&(a[l]=Wt(d)),d&&(t.encode.update[l]={value:0})}const u=[];if(e.stack.groupbyChannels?.length>0)for(const l of e.stack.groupbyChannels){const d=e.fieldDef(l),h=Be(d);h&&u.push(h),(d?.bin||d?.timeUnit)&&u.push(Be(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((l,d)=>{if(t.encode.update[d])return{...l,[d]:t.encode.update[d]};{const h=po(d,e.markDef,e.config);return h!==void 0?{...l,[d]:Wt(h)}:l}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(on.Main),name:Z7+e.requestDataName(on.Main),groupby:u,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function yCe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,o=t.order;if(!(!be(o)&&Fa(o)&&KA(o.value)||!o&&KA(It("order",r,a)))){if((be(o)||$e(o))&&!n)return xq(o,{expr:"datum"});if(il(i)){const u=r.orient==="horizontal"?"y":"x",c=t[u];if($e(c))return{field:u}}}}function Xk(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,o=yn(i.clip,vCe(e),bCe(e)),u=vq(i),c=r.key,l=yCe(e),d=xCe(e),h=It("aria",i,a),p=I1[n].postEncodingTransform?I1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:I1[n].vgMark,...o?{clip:o}:{},...u?{style:u}:{},...c?{key:c.field}:{},...l?{sort:l}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(on.Main)},encode:{update:I1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function vCe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function bCe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function xCe(e){if(!e.component.selection)return null;const t=_e(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=_e(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class yY extends dY{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,c7(t)?t.view:void 0);const o=mo(t.mark)?{...t.mark}:{type:t.mark},u=o.type;o.filled===void 0&&(o.filled=r2e(o,a,{graticule:t.data&&wk(t.data)}));const c=this.encoding=sbe(t.encoding||{},u,o.filled,a);this.markDef=YH(o,c,a),this.size=QDe({encoding:c,size:c7(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=GH(this.markDef,c),this.specifiedScales=this.initScales(u,c),this.specifiedAxes=this.initAxes(c),this.specifiedLegends=this.initLegends(c),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Dk(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===Zq,i=t&&e1e.some(r=>et(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return L5.reduce((i,r)=>{const a=kn(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Kn(t);return be(n)&&(r.domain=n.map(yr)),be(i)&&(r.range=i.map(yr)),r}initAxes(t){return Tu.reduce((n,i)=>{const r=t[i];if(et(r)||i===en&&et(t.x2)||i===Xn&&et(t.y2)){const a=et(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=_e(t),i={};for(const r of n){const a=t[r];i[r]=jp(a)?yq(a):yr(a)}return i}initLegends(t){return f1e.reduce((n,i)=>{const r=kn(t[i]);if(r&&h1e(i)){const a=r.legend;n[i]=a&&Kn(a)}return n},{})}parseData(){this.component.data=nx(this)}parseLayoutSize(){ODe(this)}parseSelections(){this.component.selection=Sxe(this,this.selection)}parseMarkGroup(){this.component.mark=gCe(this)}parseAxesAndHeaders(){this.component.axes=jDe(this)}assembleSelectionTopLevelSignals(t){return Z2e(this,t)}assembleSignals(){return[...MG(this),...W2e(this,[])]}assembleSelectionData(t){return K2e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return Rk(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+oG)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!hh(this.parent))&&(t=cG(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Jl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ka(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ii(n)?n:null}}class Vk extends qk{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const o={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((u,c)=>{if(L2(u))return new Vk(u,this,this.getName(`layer_${c}`),o,a);if($u(u))return new yY(u,this,this.getName(`layer_${c}`),o,a);throw new Error(U5(u))})}parseData(){this.component.data=nx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){$De(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of _e(t.component.selection))this.component.selection[n]=t.component.selection[n]}Dn(this.component.selection).some(t=>oo(t))&&q5(j5)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){HDe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),MG(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),Rk(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of Ie(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return J2e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),WG(this))}}function Wk(e,t,n,i,r){if($2(e))return new Eg(e,t,n,r);if(L2(e))return new Vk(e,t,n,i,r);if($u(e))return new yY(e,t,n,i,r);if(Mbe(e))return new LDe(e,t,n,r);throw new Error(U5(e))}function ECe(e,t={}){t.logger&&Bye(t.logger),t.fieldTitle&&pH(t.fieldTitle);try{const n=HH(qd(t.config,e.config)),i=JH(e,n),r=Wk(i,null,"",void 0,n);return r.parse(),GEe(r.component.data,r),{spec:CCe(r,DCe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&zye(),t.fieldTitle&&Jve()}}function DCe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):ze(t)&&(t={type:t}),r&&a&&I2e(t.type)){if(r==="step"&&a==="step")ke(VO()),t.type="pad";else if(r==="step"||a==="step"){const o=r==="step"?"width":"height";ke(VO(x2(o)));const u=o==="width"?"height":"width";t.type=U2e(u)}}return{..._e(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...D7(n,!1),...D7(e,!0)}}function CCe(e,t,n={},i){const r=e.config?Ybe(e.config):void 0,a=wDe(e.component.data,n),o=e.assembleSelectionData(a),u=e.assembleProjections(),c=e.assembleTitle(),l=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...c?{title:c}:{},...l?{style:l}:{},...d?{encode:{update:d}}:{},data:o,...u.length>0?{projections:u}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...UH(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const SCe=Vme.version,ACe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:kd,accessPathWithDatum:T5,accessWithDatumToUnescapedPath:Mt,compile:ECe,contains:ft,deepEqual:br,deleteNestedProperty:Nv,duplicate:Je,entries:zs,every:w5,fieldIntersection:k5,flatAccessWithDatum:Kj,getFirstDefined:yn,hasIntersection:F5,hasProperty:we,hash:mt,internalField:tq,isBoolean:Yg,isEmpty:qt,isEqual:Qme,isInternalField:nq,isNullOrFalse:KA,isNumeric:g2,keys:_e,logicalExpr:bg,mergeDeep:Qj,never:Wj,normalize:JH,normalizeAngle:Xg,omit:Cr,pick:wd,prefixGenerator:JA,removePathFromField:oh,replaceAll:pc,replacePathInField:Jr,resetIdCounter:Kme,setEqual:Zj,some:Fd,stringify:kt,titleCase:$p,unique:eo,uniqueId:eq,vals:Dn,varName:Jt,version:SCe},Symbol.toStringTag,{value:"Module"}));function vY(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var _Ce="3.0.0",wCe={version:_Ce};const Uf="#fff",K7="#888",FCe={background:"#333",view:{stroke:K7},title:{color:Uf,subtitleColor:Uf},style:{"guide-label":{fill:Uf},"guide-title":{fill:Uf}},axis:{domainColor:Uf,gridColor:K7,tickColor:Uf}},_l="#4572a7",kCe={background:"#fff",arc:{fill:_l},area:{fill:_l},line:{stroke:_l,strokeWidth:2},path:{stroke:_l},rect:{fill:_l},shape:{stroke:_l},symbol:{fill:_l,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},wl="#30a2da",HC="#cbcbcb",TCe="#999",$Ce="#333",J7="#f0f0f0",eN="#333",MCe={arc:{fill:wl},area:{fill:wl},axis:{domainColor:HC,grid:!0,gridColor:HC,gridWidth:1,labelColor:TCe,labelFontSize:10,titleColor:$Ce,tickColor:HC,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:J7,group:{fill:J7},legend:{labelColor:eN,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:eN,titleFontSize:14,titlePadding:10},line:{stroke:wl,strokeWidth:2},path:{stroke:wl,strokeWidth:.5},rect:{fill:wl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:wl},bar:{binSpacing:2,fill:wl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Fl="#000",OCe={group:{fill:"#e5e5e5"},arc:{fill:Fl},area:{fill:Fl},line:{stroke:Fl},path:{stroke:Fl},rect:{fill:Fl},shape:{stroke:Fl},symbol:{fill:Fl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},NCe=22,RCe="normal",tN="Benton Gothic, sans-serif",nN=11.5,BCe="normal",kl="#82c6df",GC="Benton Gothic Bold, sans-serif",iN="normal",rN=13,N0={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},zCe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:GC,fontSize:NCe,fontWeight:RCe},arc:{fill:kl},area:{fill:kl},line:{stroke:kl,strokeWidth:2},path:{stroke:kl},rect:{fill:kl},shape:{stroke:kl},symbol:{fill:kl,size:30},axis:{labelFont:tN,labelFontSize:nN,labelFontWeight:BCe,titleFont:GC,titleFontSize:rN,titleFontWeight:iN},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:tN,labelFontSize:nN,symbolType:"square",titleFont:GC,titleFontSize:rN,titleFontWeight:iN},range:{category:N0["category-6"],diverging:N0["fireandice-6"],heatmap:N0["fire-7"],ordinal:N0["fire-7"],ramp:N0["fire-7"]}},Tl="#ab5787",U1="#979797",LCe={background:"#f9f9f9",arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,size:30},axis:{domainColor:U1,domainWidth:.5,gridWidth:.2,labelColor:U1,tickColor:U1,tickWidth:.2,titleColor:U1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},$l="#3e5c69",ICe={background:"#fff",arc:{fill:$l},area:{fill:$l},line:{stroke:$l},path:{stroke:$l},rect:{fill:$l},shape:{stroke:$l},symbol:{fill:$l},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ir="#1696d2",aN="#000000",UCe="#FFFFFF",P1="Lato",YC="Lato",PCe="Lato",jCe="#DEDDDD",qCe=18,R0={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},HCe={background:UCe,title:{anchor:"start",fontSize:qCe,font:P1},axisX:{domain:!0,domainColor:aN,domainWidth:1,grid:!1,labelFontSize:12,labelFont:YC,labelAngle:0,tickColor:aN,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:P1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:jCe,gridWidth:1,labelFontSize:12,labelFont:YC,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:P1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:YC,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:P1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:R0["six-groups-cat-1"],diverging:R0["diverging-colors"],heatmap:R0["diverging-colors"],ordinal:R0["six-groups-seq"],ramp:R0["shades-blue"]},area:{fill:Ir},rect:{fill:Ir},line:{color:Ir,stroke:Ir,strokeWidth:5},trail:{color:Ir,stroke:Ir,strokeWidth:0,size:1},path:{stroke:Ir,strokeWidth:.5},point:{filled:!0},text:{font:PCe,color:Ir,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ir,stroke:null}},arc:{fill:Ir},shape:{stroke:Ir},symbol:{fill:Ir,size:30}},Ml="#3366CC",oN="#ccc",j1="Arial, sans-serif",GCe={arc:{fill:Ml},area:{fill:Ml},path:{stroke:Ml},rect:{fill:Ml},shape:{stroke:Ml},symbol:{stroke:Ml},circle:{fill:Ml},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:j1,fontSize:12},"guide-title":{font:j1,fontSize:12},"group-title":{font:j1,fontSize:12}},title:{font:j1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:oN,tickColor:oN,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Qk=e=>e*(1/3+1),uN=Qk(9),sN=Qk(10),lN=Qk(12),B0="Segoe UI",cN="wf_standard-font, helvetica, arial, sans-serif",fN="#252423",z0="#605E5C",dN="transparent",YCe="#C8C6C4",ca="#118DFF",XCe="#12239E",VCe="#E66C37",WCe="#6B007B",QCe="#E044A7",ZCe="#744EC2",KCe="#D9B300",JCe="#D64550",bY=ca,xY="#DEEFFF",hN=[xY,bY],eSe=[xY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",bY],tSe={view:{stroke:dN},background:dN,font:B0,header:{titleFont:cN,titleFontSize:lN,titleColor:fN,labelFont:B0,labelFontSize:sN,labelColor:z0},axis:{ticks:!1,grid:!1,domain:!1,labelColor:z0,labelFontSize:uN,titleFont:cN,titleColor:fN,titleFontSize:lN,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:YCe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ca},line:{stroke:ca,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:B0,fontSize:uN,fill:z0},arc:{fill:ca},area:{fill:ca,line:!0,opacity:.6},path:{stroke:ca},rect:{fill:ca},point:{fill:ca,filled:!0,size:75},shape:{stroke:ca},symbol:{fill:ca,strokeWidth:1.5,size:50},legend:{titleFont:B0,titleFontWeight:"bold",titleColor:z0,labelFont:B0,labelFontSize:sN,labelColor:z0,symbolType:"circle",symbolSize:75},range:{category:[ca,XCe,VCe,WCe,QCe,ZCe,KCe,JCe],diverging:hN,heatmap:hN,ordinal:eSe}},XC='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',nSe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',VC=400,q1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},iSe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],rSe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function ix({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=q1.gridBg[e],r=q1.textPrimary[e],a=q1.textSecondary[e],o=n==="dark"?iSe:rSe,u=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:u},area:{fill:u},path:{stroke:u},rect:{fill:u},shape:{stroke:u},symbol:{stroke:u},circle:{fill:u},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:XC,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:nSe,labelFontWeight:VC,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:q1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:XC,fill:a,fontWeight:VC},"guide-title":{font:XC,fill:a,fontWeight:VC}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const aSe=ix({theme:"white",background:"#ffffff"}),oSe=ix({theme:"g10",background:"#f4f4f4"}),uSe=ix({theme:"g90",background:"#262626"}),sSe=ix({theme:"g100",background:"#161616"}),lSe=wCe.version,cSe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:oSe,carbong100:sSe,carbong90:uSe,carbonwhite:aSe,dark:FCe,excel:kCe,fivethirtyeight:MCe,ggplot2:OCe,googlecharts:GCe,latimes:zCe,powerbi:tSe,quartz:LCe,urbaninstitute:HCe,version:lSe,vox:ICe},Symbol.toStringTag,{value:"Module"}));function fSe(e,t,n,i){if(be(e))return`[${e.map(r=>t(ze(r)?r:gN(r,n))).join(", ")}]`;if(Le(e)){let r="";const{title:a,image:o,...u}=e;a&&(r+=`<h2>${t(a)}</h2>`),o&&(r+=`<img src="${new URL(t(o),i||location.href).href}">`);const c=Object.keys(u);if(c.length>0){r+="<table>";for(const l of c){let d=u[l];d!==void 0&&(Le(d)&&(d=gN(d,n)),r+=`<tr><td class="key">${t(l)}</td><td class="value">${t(d)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function dSe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function gN(e,t){return JSON.stringify(e,dSe(t))}var hSe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const EY="vg-tooltip-element",gSe={offsetX:10,offsetY:10,id:EY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:pSe,maxDepth:2,formatTooltip:fSe,baseURL:"",anchor:"cursor",position:["top","bottom","left","right","top-left","top-right","bottom-left","bottom-right"]};function pSe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function mSe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return hSe.toString().replaceAll(EY,e)}function DY(e,t,{offsetX:n,offsetY:i}){const r=CY({x1:e.clientX,x2:e.clientX,y1:e.clientY,y2:e.clientY},t,n,i),a=["bottom-right","bottom-left","top-right","top-left"];for(const o of a)if(SY(r[o],t))return r[o];return r["top-left"]}function ySe(e,t,n,i,r){const{position:a,offsetX:o,offsetY:u}=r,c=e._el.getBoundingClientRect(),l=e._origin,d=vSe(c,l,n),h=CY(d,i,o,u),p=Array.isArray(a)?a:[a];for(const y of p)if(SY(h[y],i)&&!bSe(t,h[y],i))return h[y];return DY(t,i,r)}function vSe(e,t,n){const i=n.isVoronoi?n.datum.bounds:n.bounds;let r=e.left+t[0]+i.x1,a=e.top+t[1]+i.y1,o=n;for(;o.mark.group;)o=o.mark.group,r+=o.x??0,a+=o.y??0;const u=i.x2-i.x1,c=i.y2-i.y1;return{x1:r,x2:r+u,y1:a,y2:a+c}}function CY(e,t,n,i){const r=(e.x1+e.x2)/2,a=(e.y1+e.y2)/2,o=e.x1-t.width-n,u=r-t.width/2,c=e.x2+n,l=e.y1-t.height-i,d=a-t.height/2,h=e.y2+i;return{top:{x:u,y:l},bottom:{x:u,y:h},left:{x:o,y:d},right:{x:c,y:d},"top-left":{x:o,y:l},"top-right":{x:c,y:l},"bottom-left":{x:o,y:h},"bottom-right":{x:c,y:h}}}function SY(e,t){return e.x>=0&&e.y>=0&&e.x+t.width<=window.innerWidth&&e.y+t.height<=window.innerHeight}function bSe(e,t,n){return e.clientX>=t.x&&e.clientX<=t.x+n.width&&e.clientY>=t.y&&e.clientY<=t.y+n.height}class xSe{call;options;el;constructor(t){this.options={...gSe,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=mSe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}}tooltipHandler(t,n,i,r){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(r,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:o}=this.options.anchor==="mark"?ySe(t,n,i,this.el.getBoundingClientRect(),this.options):DY(n,this.el.getBoundingClientRect(),this.options);this.el.style.top=`${o}px`,this.el.style.left=`${a}px`}}var WC={};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var ESe=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),DSe=Object.prototype.hasOwnProperty;function __(e,t){return DSe.call(e,t)}function w_(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)__(e,r)&&i.push(r);return i}function xr(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function F_(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function zl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function AY(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function k_(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(k_(e[t]))return!0}else if(typeof e=="object"){for(var i=w_(e),r=i.length,a=0;a<r;a++)if(k_(e[i[a]]))return!0}}return!1}function pN(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var _Y=(function(e){ESe(t,e);function t(n,i,r,a,o){var u=this.constructor,c=e.call(this,pN(n,{name:i,index:r,operation:a,tree:o}))||this;return c.name=i,c.index=r,c.operation=a,c.tree=o,Object.setPrototypeOf(c,u.prototype),c.message=pN(n,{name:i,index:r,operation:a,tree:o}),c}return t})(Error),cn=_Y,CSe=xr,Qf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=Vv(n,this.path);i&&(i=xr(i));var r=nc(n,{op:"remove",path:this.from}).removed;return nc(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=Vv(n,this.from);return nc(n,{op:"add",path:this.path,value:xr(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Kg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},SSe={add:function(e,t,n){return F_(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Qf.move,copy:Qf.copy,test:Qf.test,_get:Qf._get};function Vv(e,t){if(t=="")return e;var n={op:"_get",path:t};return nc(e,n),n.value}function nc(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):Wv(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=Vv(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=Kg(e,t.value),o.test===!1)throw new cn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new cn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return o}}else{i||(e=xr(e));var u=t.path||"",c=u.split("/"),l=e,d=1,h=c.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=Wv;;){if(y=c[d],y&&y.indexOf("~")!=-1&&(y=AY(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(l[y]===void 0?p=c.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(l)){if(y==="-")y=l.length;else{if(n&&!F_(y))throw new cn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);F_(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>l.length)throw new cn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var o=SSe[t.op].call(t,l,y,e);if(o.test===!1)throw new cn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}}else if(d>=h){var o=Qf[t.op].call(t,l,y,e);if(o.test===!1)throw new cn("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return o}if(l=l[y],n&&d<h&&(!l||typeof l!="object"))throw new cn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function rx(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new cn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=xr(e));for(var a=new Array(t.length),o=0,u=t.length;o<u;o++)a[o]=nc(e,t[o],n,!0,r,o),e=a[o].newDocument;return a.newDocument=e,a}function ASe(e,t,n){var i=nc(e,t);if(i.test===!1)throw new cn("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function Wv(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new cn("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Qf[e.op]){if(typeof e.path!="string")throw new cn("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new cn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new cn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new cn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&k_(e.value))throw new cn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new cn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new cn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},u=wY([o],n);if(u&&u.name==="OPERATION_PATH_UNRESOLVABLE")throw new cn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new cn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function wY(e,t,n){try{if(!Array.isArray(e))throw new cn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)rx(xr(t),xr(e),n||!0);else{n=n||Wv;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof cn)return r;throw r}}function Kg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,o;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Kg(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var u=Object.keys(e);if(a=u.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(u[r]))return!1;for(r=a;r--!==0;)if(o=u[r],!Kg(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}var _Se=Object.freeze({__proto__:null,JsonPatchError:cn,_areEquals:Kg,applyOperation:nc,applyPatch:rx,applyReducer:ASe,deepClone:CSe,getValueByPointer:Vv,validate:wY,validator:Wv});/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var Zk=new WeakMap,wSe=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),FSe=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function kSe(e){return Zk.get(e)}function TSe(e,t){return e.observers.get(t)}function $Se(e,t){e.observers.delete(t.callback)}function MSe(e,t){t.unobserve()}function OSe(e,t){var n=[],i,r=kSe(e);if(!r)r=new wSe(e),Zk.set(e,r);else{var a=TSe(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=xr(e),t){i.callback=t,i.next=null;var o=function(){T_(i)},u=function(){clearTimeout(i.next),i.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",u),window.addEventListener("keyup",u),window.addEventListener("mousedown",u),window.addEventListener("keydown",u),window.addEventListener("change",u))}return i.patches=n,i.object=e,i.unobserve=function(){T_(i),clearTimeout(i.next),$Se(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",u),window.removeEventListener("keyup",u),window.removeEventListener("mousedown",u),window.removeEventListener("keydown",u),window.removeEventListener("change",u))},r.observers.set(t,new FSe(t,i)),i}function T_(e,t){t===void 0&&(t=!1);var n=Zk.get(e.object);Kk(n.value,e.object,e.patches,"",t),e.patches.length&&rx(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function Kk(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=w_(t),o=w_(e),u=!1,c=o.length-1;c>=0;c--){var l=o[c],d=e[l];if(__(t,l)&&!(t[l]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[l];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?Kk(d,h,n,i+"/"+zl(l),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+zl(l),value:xr(d)}),n.push({op:"replace",path:i+"/"+zl(l),value:xr(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+zl(l),value:xr(d)}),n.push({op:"remove",path:i+"/"+zl(l)}),u=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!u&&a.length==o.length))for(var c=0;c<a.length;c++){var l=a[c];!__(e,l)&&t[l]!==void 0&&n.push({op:"add",path:i+"/"+zl(l),value:xr(t[l])})}}}function NSe(e,t,n){n===void 0&&(n=!1);var i=[];return Kk(e,t,i,"",n),i}var RSe=Object.freeze({__proto__:null,compare:NSe,generate:T_,observe:OSe,unobserve:MSe});Object.assign({},_Se,RSe,{JsonPatchError:_Y,deepClone:xr,escapePathComponent:zl,unescapePathComponent:AY});function BSe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var QC,mN;function zSe(){if(mN)return QC;mN=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return QC=e,QC}var ZC,yN;function Jk(){if(yN)return ZC;yN=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return ZC=i=>i?typeof i!="object"?e:i:t,ZC}var H1={exports:{}},KC,vN;function e4(){if(vN)return KC;vN=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return KC={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},KC}var JC,bN;function ax(){return bN||(bN=1,JC=typeof process=="object"&&WC&&WC.NODE_DEBUG&&/\bsemver\b/i.test(WC.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),JC}var xN;function t4(){return xN||(xN=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=e4(),a=ax();t=e.exports={};const o=t.re=[],u=t.safeRe=[],c=t.src=[],l=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=x=>{for(const[D,S]of y)x=x.split(`${D}*`).join(`${D}{0,${S}}`).split(`${D}+`).join(`${D}{1,${S}}`);return x},b=(x,D,S)=>{const A=v(D),w=h++;a(x,w,D),d[x]=w,c[w]=D,l[w]=A,o[w]=new RegExp(D,S?"g":void 0),u[w]=new RegExp(A,S?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})\\.(${c[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})\\.(${c[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${c[d.NUMERICIDENTIFIER]}|${c[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${c[d.NUMERICIDENTIFIERLOOSE]}|${c[d.NONNUMERICIDENTIFIER]})`),b("PRERELEASE",`(?:-(${c[d.PRERELEASEIDENTIFIER]}(?:\\.${c[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${c[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${c[d.BUILDIDENTIFIER]}(?:\\.${c[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${c[d.MAINVERSION]}${c[d.PRERELEASE]}?${c[d.BUILD]}?`),b("FULL",`^${c[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${c[d.MAINVERSIONLOOSE]}${c[d.PRERELEASELOOSE]}?${c[d.BUILD]}?`),b("LOOSE",`^${c[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${c[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${c[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:\\.(${c[d.XRANGEIDENTIFIER]})(?:${c[d.PRERELEASE]})?${c[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[d.XRANGEIDENTIFIERLOOSE]})(?:${c[d.PRERELEASELOOSE]})?${c[d.BUILD]}?)?)?`),b("XRANGE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${c[d.GTLT]}\\s*${c[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${c[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",c[d.COERCEPLAIN]+`(?:${c[d.PRERELEASE]})?(?:${c[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",c[d.COERCE],!0),b("COERCERTLFULL",c[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${c[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${c[d.LONETILDE]}${c[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${c[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${c[d.LONECARET]}${c[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${c[d.LONECARET]}${c[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${c[d.GTLT]}\\s*(${c[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${c[d.GTLT]}\\s*(${c[d.LOOSEPLAIN]}|${c[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${c[d.XRANGEPLAIN]})\\s+-\\s+(${c[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${c[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(H1,H1.exports)),H1.exports}var eS,EN;function LSe(){if(EN)return eS;EN=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),o=e.test(r);return a&&o&&(i=+i,r=+r),i===r?0:a&&!o?-1:o&&!a?1:i<r?-1:1};return eS={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},eS}var tS,DN;function n4(){if(DN)return tS;DN=1;const e=ax(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=e4(),{safeRe:i,safeSrc:r,t:a}=t4(),o=Jk(),{compareIdentifiers:u}=LSe();class c{constructor(d,h){if(h=o(h),d instanceof c){if(d.loose===!!h.loose&&d.includePrerelease===!!h.includePrerelease)return d;d=d.version}else if(typeof d!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof d}".`);if(d.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",d,h),this.options=h,this.loose=!!h.loose,this.includePrerelease=!!h.includePrerelease;const p=d.trim().match(h.loose?i[a.LOOSE]:i[a.FULL]);if(!p)throw new TypeError(`Invalid Version: ${d}`);if(this.raw=d,this.major=+p[1],this.minor=+p[2],this.patch=+p[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");p[4]?this.prerelease=p[4].split(".").map(y=>{if(/^[0-9]+$/.test(y)){const v=+y;if(v>=0&&v<n)return v}return y}):this.prerelease=[],this.build=p[5]?p[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(d){if(e("SemVer.compare",this.version,this.options,d),!(d instanceof c)){if(typeof d=="string"&&d===this.version)return 0;d=new c(d,this.options)}return d.version===this.version?0:this.compareMain(d)||this.comparePre(d)}compareMain(d){return d instanceof c||(d=new c(d,this.options)),u(this.major,d.major)||u(this.minor,d.minor)||u(this.patch,d.patch)}comparePre(d){if(d instanceof c||(d=new c(d,this.options)),this.prerelease.length&&!d.prerelease.length)return-1;if(!this.prerelease.length&&d.prerelease.length)return 1;if(!this.prerelease.length&&!d.prerelease.length)return 0;let h=0;do{const p=this.prerelease[h],y=d.prerelease[h];if(e("prerelease compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return u(p,y)}while(++h)}compareBuild(d){d instanceof c||(d=new c(d,this.options));let h=0;do{const p=this.build[h],y=d.build[h];if(e("build compare",h,p,y),p===void 0&&y===void 0)return 0;if(y===void 0)return 1;if(p===void 0)return-1;if(p===y)continue;return u(p,y)}while(++h)}inc(d,h,p){if(d.startsWith("pre")){if(!h&&p===!1)throw new Error("invalid increment argument: identifier is empty");if(h){const y=new RegExp(`^${this.options.loose?r[a.PRERELEASELOOSE]:r[a.PRERELEASE]}$`),v=`-${h}`.match(y);if(!v||v[1]!==h)throw new Error(`invalid identifier: ${h}`)}}switch(d){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",h,p);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",h,p);break;case"prepatch":this.prerelease.length=0,this.inc("patch",h,p),this.inc("pre",h,p);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",h,p),this.inc("pre",h,p);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const y=Number(p)?1:0;if(this.prerelease.length===0)this.prerelease=[y];else{let v=this.prerelease.length;for(;--v>=0;)typeof this.prerelease[v]=="number"&&(this.prerelease[v]++,v=-2);if(v===-1){if(h===this.prerelease.join(".")&&p===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(y)}}if(h){let v=[h,y];p===!1&&(v=[h]),u(this.prerelease[0],h)===0?isNaN(this.prerelease[1])&&(this.prerelease=v):this.prerelease=v}break}default:throw new Error(`invalid increment argument: ${d}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return tS=c,tS}var nS,CN;function gh(){if(CN)return nS;CN=1;const e=n4();return nS=(n,i,r)=>new e(n,r).compare(new e(i,r)),nS}var iS,SN;function ISe(){if(SN)return iS;SN=1;const e=gh();return iS=(n,i,r)=>e(n,i,r)===0,iS}var rS,AN;function USe(){if(AN)return rS;AN=1;const e=gh();return rS=(n,i,r)=>e(n,i,r)!==0,rS}var aS,_N;function PSe(){if(_N)return aS;_N=1;const e=gh();return aS=(n,i,r)=>e(n,i,r)>0,aS}var oS,wN;function jSe(){if(wN)return oS;wN=1;const e=gh();return oS=(n,i,r)=>e(n,i,r)>=0,oS}var uS,FN;function qSe(){if(FN)return uS;FN=1;const e=gh();return uS=(n,i,r)=>e(n,i,r)<0,uS}var sS,kN;function HSe(){if(kN)return sS;kN=1;const e=gh();return sS=(n,i,r)=>e(n,i,r)<=0,sS}var lS,TN;function GSe(){if(TN)return lS;TN=1;const e=ISe(),t=USe(),n=PSe(),i=jSe(),r=qSe(),a=HSe();return lS=(u,c,l,d)=>{switch(c){case"===":return typeof u=="object"&&(u=u.version),typeof l=="object"&&(l=l.version),u===l;case"!==":return typeof u=="object"&&(u=u.version),typeof l=="object"&&(l=l.version),u!==l;case"":case"=":case"==":return e(u,l,d);case"!=":return t(u,l,d);case">":return n(u,l,d);case">=":return i(u,l,d);case"<":return r(u,l,d);case"<=":return a(u,l,d);default:throw new TypeError(`Invalid operator: ${c}`)}},lS}var cS,$N;function YSe(){if($N)return cS;$N=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),o("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new u(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(o("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new u(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new c(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}cS=t;const n=Jk(),{safeRe:i,t:r}=t4(),a=GSe(),o=ax(),u=n4(),c=FY();return cS}var fS,MN;function FY(){if(MN)return fS;MN=1;const e=/\s+/g;class t{constructor(z,T){if(T=r(T),z instanceof t)return z.loose===!!T.loose&&z.includePrerelease===!!T.includePrerelease?z:new t(z.raw,T);if(z instanceof a)return this.raw=z.value,this.set=[[z]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=z.trim().replace(e," "),this.set=this.raw.split("||").map(R=>this.parseRange(R.trim())).filter(R=>R.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const R=this.set[0];if(this.set=this.set.filter(q=>!b(q[0])),this.set.length===0)this.set=[R];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&x(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let z=0;z<this.set.length;z++){z>0&&(this.formatted+="||");const T=this.set[z];for(let R=0;R<T.length;R++)R>0&&(this.formatted+=" "),this.formatted+=T[R].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(z){const R=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+z,q=i.get(R);if(q)return q;const G=this.options.loose,O=G?c[l.HYPHENRANGELOOSE]:c[l.HYPHENRANGE];z=z.replace(O,H(this.options.includePrerelease)),o("hyphen replace",z),z=z.replace(c[l.COMPARATORTRIM],d),o("comparator trim",z),z=z.replace(c[l.TILDETRIM],h),o("tilde trim",z),z=z.replace(c[l.CARETTRIM],p),o("caret trim",z);let Z=z.split(" ").map(ne=>S(ne,this.options)).join(" ").split(/\s+/).map(ne=>L(ne,this.options));G&&(Z=Z.filter(ne=>(o("loose invalid filter",ne,this.options),!!ne.match(c[l.COMPARATORLOOSE])))),o("range list",Z);const ee=new Map,X=Z.map(ne=>new a(ne,this.options));for(const ne of X){if(b(ne))return[ne];ee.set(ne.value,ne)}ee.size>1&&ee.has("")&&ee.delete("");const Q=[...ee.values()];return i.set(R,Q),Q}intersects(z,T){if(!(z instanceof t))throw new TypeError("a Range is required");return this.set.some(R=>D(R,T)&&z.set.some(q=>D(q,T)&&R.every(G=>q.every(O=>G.intersects(O,T)))))}test(z){if(!z)return!1;if(typeof z=="string")try{z=new u(z,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(I(this.set[T],z,this.options))return!0;return!1}}fS=t;const n=zSe(),i=new n,r=Jk(),a=YSe(),o=ax(),u=n4(),{safeRe:c,t:l,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=t4(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=e4(),b=U=>U.value==="<0.0.0-0",x=U=>U.value==="",D=(U,z)=>{let T=!0;const R=U.slice();let q=R.pop();for(;T&&R.length;)T=R.every(G=>q.intersects(G,z)),q=R.pop();return T},S=(U,z)=>(o("comp",U,z),U=k(U,z),o("caret",U),U=w(U,z),o("tildes",U),U=M(U,z),o("xrange",U),U=P(U,z),o("stars",U),U),A=U=>!U||U.toLowerCase()==="x"||U==="*",w=(U,z)=>U.trim().split(/\s+/).map(T=>_(T,z)).join(" "),_=(U,z)=>{const T=z.loose?c[l.TILDELOOSE]:c[l.TILDE];return U.replace(T,(R,q,G,O,Z)=>{o("tilde",U,R,q,G,O,Z);let ee;return A(q)?ee="":A(G)?ee=`>=${q}.0.0 <${+q+1}.0.0-0`:A(O)?ee=`>=${q}.${G}.0 <${q}.${+G+1}.0-0`:Z?(o("replaceTilde pr",Z),ee=`>=${q}.${G}.${O}-${Z} <${q}.${+G+1}.0-0`):ee=`>=${q}.${G}.${O} <${q}.${+G+1}.0-0`,o("tilde return",ee),ee})},k=(U,z)=>U.trim().split(/\s+/).map(T=>F(T,z)).join(" "),F=(U,z)=>{o("caret",U,z);const T=z.loose?c[l.CARETLOOSE]:c[l.CARET],R=z.includePrerelease?"-0":"";return U.replace(T,(q,G,O,Z,ee)=>{o("caret",U,q,G,O,Z,ee);let X;return A(G)?X="":A(O)?X=`>=${G}.0.0${R} <${+G+1}.0.0-0`:A(Z)?G==="0"?X=`>=${G}.${O}.0${R} <${G}.${+O+1}.0-0`:X=`>=${G}.${O}.0${R} <${+G+1}.0.0-0`:ee?(o("replaceCaret pr",ee),G==="0"?O==="0"?X=`>=${G}.${O}.${Z}-${ee} <${G}.${O}.${+Z+1}-0`:X=`>=${G}.${O}.${Z}-${ee} <${G}.${+O+1}.0-0`:X=`>=${G}.${O}.${Z}-${ee} <${+G+1}.0.0-0`):(o("no pr"),G==="0"?O==="0"?X=`>=${G}.${O}.${Z}${R} <${G}.${O}.${+Z+1}-0`:X=`>=${G}.${O}.${Z}${R} <${G}.${+O+1}.0-0`:X=`>=${G}.${O}.${Z} <${+G+1}.0.0-0`),o("caret return",X),X})},M=(U,z)=>(o("replaceXRanges",U,z),U.split(/\s+/).map(T=>N(T,z)).join(" ")),N=(U,z)=>{U=U.trim();const T=z.loose?c[l.XRANGELOOSE]:c[l.XRANGE];return U.replace(T,(R,q,G,O,Z,ee)=>{o("xRange",U,R,q,G,O,Z,ee);const X=A(G),Q=X||A(O),ne=Q||A(Z),ce=ne;return q==="="&&ce&&(q=""),ee=z.includePrerelease?"-0":"",X?q===">"||q==="<"?R="<0.0.0-0":R="*":q&&ce?(Q&&(O=0),Z=0,q===">"?(q=">=",Q?(G=+G+1,O=0,Z=0):(O=+O+1,Z=0)):q==="<="&&(q="<",Q?G=+G+1:O=+O+1),q==="<"&&(ee="-0"),R=`${q+G}.${O}.${Z}${ee}`):Q?R=`>=${G}.0.0${ee} <${+G+1}.0.0-0`:ne&&(R=`>=${G}.${O}.0${ee} <${G}.${+O+1}.0-0`),o("xRange return",R),R})},P=(U,z)=>(o("replaceStars",U,z),U.trim().replace(c[l.STAR],"")),L=(U,z)=>(o("replaceGTE0",U,z),U.trim().replace(c[z.includePrerelease?l.GTE0PRE:l.GTE0],"")),H=U=>(z,T,R,q,G,O,Z,ee,X,Q,ne,ce)=>(A(R)?T="":A(q)?T=`>=${R}.0.0${U?"-0":""}`:A(G)?T=`>=${R}.${q}.0${U?"-0":""}`:O?T=`>=${T}`:T=`>=${T}${U?"-0":""}`,A(X)?ee="":A(Q)?ee=`<${+X+1}.0.0-0`:A(ne)?ee=`<${X}.${+Q+1}.0-0`:ce?ee=`<=${X}.${Q}.${ne}-${ce}`:U?ee=`<${X}.${Q}.${+ne+1}-0`:ee=`<=${ee}`,`${T} ${ee}`.trim()),I=(U,z,T)=>{for(let R=0;R<U.length;R++)if(!U[R].test(z))return!1;if(z.prerelease.length&&!T.includePrerelease){for(let R=0;R<U.length;R++)if(o(U[R].semver),U[R].semver!==a.ANY&&U[R].semver.prerelease.length>0){const q=U[R].semver;if(q.major===z.major&&q.minor===z.minor&&q.patch===z.patch)return!0}return!1}return!0};return fS}var dS,ON;function XSe(){if(ON)return dS;ON=1;const e=FY();return dS=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},dS}var VSe=XSe(),kY=BSe(VSe);function WSe(e,t,n){const i=e.open(t),r=250,{origin:a}=new URL(t);let o=40;function u(l){l.source===i&&(o=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function c(){o<=0||(i.postMessage(n,a),setTimeout(c,r),o-=1)}setTimeout(c,r)}var QSe=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function TY(e,...t){for(const n of t)ZSe(e,n);return e}function ZSe(e,t){for(const n of Object.keys(t))Hd(e,n,t[n],!0)}const Xa=Bme;let Jg=ACe;const NN=typeof window<"u"?window:void 0;Jg===void 0&&NN?.vl?.compile&&(Jg=NN.vl);const KSe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},JSe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},og={vega:"Vega","vega-lite":"Vega-Lite"},Qv={vega:Xa.version,"vega-lite":Jg?Jg.version:"not available"},eAe={vega:e=>e,"vega-lite":(e,t)=>Jg.compile(e,{config:t}).spec},tAe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,nAe="chart-wrapper";function iAe(e){return typeof e=="function"}function RN(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(r+e+a),o.document.title=`${og[i]} JSON Source`}function rAe(e,t){if(e.$schema){const n=vY(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${og[n.library]}, but mode argument sets ${og[t]??t}.`);const i=n.library;return kY(Qv[i],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${og[i]} ${n.version}, but the current version of ${og[i]} is v${Qv[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function $Y(e){return!!(e&&"load"in e)}function BN(e){return $Y(e)?e:Xa.loader(e)}function aAe(e){const t=e.usermeta?.embedOptions??{};return ze(t.defaultStyle)&&(t.defaultStyle=!1),t}async function u_e(e,t,n={}){let i,r;ze(t)?(r=BN(n.loader),i=JSON.parse(await r.load(t))):i=t;const a=aAe(i),o=a.loader;(!r||o)&&(r=BN(n.loader??o));const u=await zN(a,r),c=await zN(n,r),l={...TY(c,u),config:qd(c.config??{},u.config??{})};return await uAe(e,i,l,r)}async function zN(e,t){const n=ze(e.config)?JSON.parse(await t.load(e.config)):e.config??{},i=ze(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...i?{patch:i}:{},...n?{config:n}:{}}}function oAe(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function uAe(e,t,n={},i){const r=n.theme?qd(cSe[n.theme],n.config??{}):n.config,a=qs(n.actions)?n.actions:TY({},KSe,n.actions??{}),o={...JSe,...n.i18n},u=n.renderer??"svg",c=n.logLevel??Xa.Warn,l=n.downloadFileName??"visualization",d=typeof e=="string"?document.querySelector(e):e;if(!d)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const _="vega-embed-style",{root:k,rootContainer:F}=oAe(d);if(!k.getElementById(_)){const M=document.createElement("style");M.id=_,M.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?QSe.toString():n.defaultStyle,F.appendChild(M)}}const h=rAe(t,n.mode);let p=eAe[h](t,r);if(h==="vega-lite"&&p.$schema){const _=vY(p.$schema);kY(Qv.vega,`^${_.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${_.version}, but current version is v${Qv.vega}.`)}d.classList.add("vega-embed"),a&&d.classList.add("has-actions"),d.innerHTML="";let y=d;if(a){const _=document.createElement("div");_.classList.add(nAe),d.appendChild(_),y=_}const v=n.patch;if(v&&(p=v instanceof Function?v(p):rx(p,v,!0,!1).newDocument),n.formatLocale&&Xa.formatLocale(n.formatLocale),n.timeFormatLocale&&Xa.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const _ in n.expressionFunctions){const k=n.expressionFunctions[_];"fn"in k?Xa.expressionFunction(_,k.fn,k.visitor):k instanceof Function&&Xa.expressionFunction(_,k)}const{ast:b}=n,x=Xa.parse(p,h==="vega-lite"?{}:r,{ast:b}),D=new(n.viewClass||Xa.View)(x,{loader:i,logLevel:c,renderer:u,...b?{expr:Xa.expressionInterpreter??n.expr??Yme}:{}});if(D.addSignalListener("autosize",(_,k)=>{const{type:F}=k;F=="fit-x"?(y.classList.add("fit-x"),y.classList.remove("fit-y")):F=="fit-y"?(y.classList.remove("fit-x"),y.classList.add("fit-y")):F=="fit"?y.classList.add("fit-x","fit-y"):y.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:_,tooltip:k}=n,F=_&&!$Y(_)?_?.baseURL:void 0,M=iAe(k)?k:new xSe({baseURL:F,...k===!0?{}:k}).call;D.tooltip(M)}let{hover:S}=n;if(S===void 0&&(S=h==="vega"),S){const{hoverSet:_,updateSet:k}=typeof S=="boolean"?{}:S;D.hover(_,k)}n&&(n.width!=null&&D.width(n.width),n.height!=null&&D.height(n.height),n.padding!=null&&D.padding(n.padding)),await D.initialize(y,n.bind).runAsync();let A;if(a!==!1){let _=d;if(n.defaultStyle!==!1||n.forceActionsMenu){const F=document.createElement("details");F.title=o.CLICK_TO_VIEW_ACTIONS,d.append(F),_=F;const M=document.createElement("summary");M.innerHTML=tAe,F.append(M),A=N=>{F.contains(N.target)||F.removeAttribute("open")},document.addEventListener("click",A)}const k=document.createElement("div");if(_.append(k),k.classList.add("vega-actions"),a===!0||a.export!==!1){for(const F of["svg","png"])if(a===!0||a.export===!0||a.export[F]){const M=o[`${F.toUpperCase()}_ACTION`],N=document.createElement("a"),P=Le(n.scaleFactor)?n.scaleFactor[F]:n.scaleFactor;N.text=M,N.href="#",N.target="_blank",N.download=`${l}.${F}`,N.addEventListener("mousedown",async function(L){L.preventDefault();const H=await D.toImageURL(F,P);this.href=H}),k.append(N)}}if(a===!0||a.source!==!1){const F=document.createElement("a");F.text=o.SOURCE_ACTION,F.href="#",F.addEventListener("click",function(M){RN(CD(t),n.sourceHeader??"",n.sourceFooter??"",h),M.preventDefault()}),k.append(F)}if(h==="vega-lite"&&(a===!0||a.compiled!==!1)){const F=document.createElement("a");F.text=o.COMPILED_ACTION,F.href="#",F.addEventListener("click",function(M){RN(CD(p),n.sourceHeader??"",n.sourceFooter??"","vega"),M.preventDefault()}),k.append(F)}if(a===!0||a.editor!==!1){const F=n.editorUrl??"https://vega.github.io/editor/",M=document.createElement("a");M.text=o.EDITOR_ACTION,M.href="#",M.addEventListener("click",function(N){WSe(window,F,{config:r,mode:v?"vega":h,renderer:u,spec:CD(v?p:t)}),N.preventDefault()}),k.append(M)}}function w(){A&&document.removeEventListener("click",A),D.finalize()}return{view:D,spec:t,vgSpec:p,finalize:w,embedOptions:n}}var sAe=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,lAe=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,cAe=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,hS={Space_Separator:sAe,ID_Start:lAe,ID_Continue:cAe},pn={isSpaceSeparator(e){return typeof e=="string"&&hS.Space_Separator.test(e)},isIdStartChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e==="$"||e==="_"||hS.ID_Start.test(e))},isIdContinueChar(e){return typeof e=="string"&&(e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||e==="$"||e==="_"||e===""||e===""||hS.ID_Continue.test(e))},isDigit(e){return typeof e=="string"&&/[0-9]/.test(e)},isHexDigit(e){return typeof e=="string"&&/[0-9A-Fa-f]/.test(e)}};let $_,Mi,nu,Zv,js,Ca,zn,i4,Dg;var fAe=function(t,n){$_=String(t),Mi="start",nu=[],Zv=0,js=1,Ca=0,zn=void 0,i4=void 0,Dg=void 0;do zn=dAe(),pAe[Mi]();while(zn.type!=="eof");return typeof n=="function"?M_({"":Dg},"",n):Dg};function M_(e,t,n){const i=e[t];if(i!=null&&typeof i=="object")if(Array.isArray(i))for(let r=0;r<i.length;r++){const a=String(r),o=M_(i,a,n);o===void 0?delete i[a]:Object.defineProperty(i,a,{value:o,writable:!0,enumerable:!0,configurable:!0})}else for(const r in i){const a=M_(i,r,n);a===void 0?delete i[r]:Object.defineProperty(i,r,{value:a,writable:!0,enumerable:!0,configurable:!0})}return n.call(e,t,i)}let ot,nt,ug,Qo,pt;function dAe(){for(ot="default",nt="",ug=!1,Qo=1;;){pt=yu();const e=MY[ot]();if(e)return e}}function yu(){if($_[Zv])return String.fromCodePoint($_.codePointAt(Zv))}function De(){const e=yu();return e===`
`?(js++,Ca=0):e?Ca+=e.length:Ca++,e&&(Zv+=e.length),e}const MY={default(){switch(pt){case"	":case"\v":case"\f":case" ":case"":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":De();return;case"/":De(),ot="comment";return;case void 0:return De(),Yt("eof")}if(pn.isSpaceSeparator(pt)){De();return}return MY[Mi]()},comment(){switch(pt){case"*":De(),ot="multiLineComment";return;case"/":De(),ot="singleLineComment";return}throw Xt(De())},multiLineComment(){switch(pt){case"*":De(),ot="multiLineCommentAsterisk";return;case void 0:throw Xt(De())}De()},multiLineCommentAsterisk(){switch(pt){case"*":De();return;case"/":De(),ot="default";return;case void 0:throw Xt(De())}De(),ot="multiLineComment"},singleLineComment(){switch(pt){case`
`:case"\r":case"\u2028":case"\u2029":De(),ot="default";return;case void 0:return De(),Yt("eof")}De()},value(){switch(pt){case"{":case"[":return Yt("punctuator",De());case"n":return De(),Ol("ull"),Yt("null",null);case"t":return De(),Ol("rue"),Yt("boolean",!0);case"f":return De(),Ol("alse"),Yt("boolean",!1);case"-":case"+":De()==="-"&&(Qo=-1),ot="sign";return;case".":nt=De(),ot="decimalPointLeading";return;case"0":nt=De(),ot="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":nt=De(),ot="decimalInteger";return;case"I":return De(),Ol("nfinity"),Yt("numeric",1/0);case"N":return De(),Ol("aN"),Yt("numeric",NaN);case'"':case"'":ug=De()==='"',nt="",ot="string";return}throw Xt(De())},identifierNameStartEscape(){if(pt!=="u")throw Xt(De());De();const e=O_();switch(e){case"$":case"_":break;default:if(!pn.isIdStartChar(e))throw LN();break}nt+=e,ot="identifierName"},identifierName(){switch(pt){case"$":case"_":case"":case"":nt+=De();return;case"\\":De(),ot="identifierNameEscape";return}if(pn.isIdContinueChar(pt)){nt+=De();return}return Yt("identifier",nt)},identifierNameEscape(){if(pt!=="u")throw Xt(De());De();const e=O_();switch(e){case"$":case"_":case"":case"":break;default:if(!pn.isIdContinueChar(e))throw LN();break}nt+=e,ot="identifierName"},sign(){switch(pt){case".":nt=De(),ot="decimalPointLeading";return;case"0":nt=De(),ot="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":nt=De(),ot="decimalInteger";return;case"I":return De(),Ol("nfinity"),Yt("numeric",Qo*(1/0));case"N":return De(),Ol("aN"),Yt("numeric",NaN)}throw Xt(De())},zero(){switch(pt){case".":nt+=De(),ot="decimalPoint";return;case"e":case"E":nt+=De(),ot="decimalExponent";return;case"x":case"X":nt+=De(),ot="hexadecimal";return}return Yt("numeric",Qo*0)},decimalInteger(){switch(pt){case".":nt+=De(),ot="decimalPoint";return;case"e":case"E":nt+=De(),ot="decimalExponent";return}if(pn.isDigit(pt)){nt+=De();return}return Yt("numeric",Qo*Number(nt))},decimalPointLeading(){if(pn.isDigit(pt)){nt+=De(),ot="decimalFraction";return}throw Xt(De())},decimalPoint(){switch(pt){case"e":case"E":nt+=De(),ot="decimalExponent";return}if(pn.isDigit(pt)){nt+=De(),ot="decimalFraction";return}return Yt("numeric",Qo*Number(nt))},decimalFraction(){switch(pt){case"e":case"E":nt+=De(),ot="decimalExponent";return}if(pn.isDigit(pt)){nt+=De();return}return Yt("numeric",Qo*Number(nt))},decimalExponent(){switch(pt){case"+":case"-":nt+=De(),ot="decimalExponentSign";return}if(pn.isDigit(pt)){nt+=De(),ot="decimalExponentInteger";return}throw Xt(De())},decimalExponentSign(){if(pn.isDigit(pt)){nt+=De(),ot="decimalExponentInteger";return}throw Xt(De())},decimalExponentInteger(){if(pn.isDigit(pt)){nt+=De();return}return Yt("numeric",Qo*Number(nt))},hexadecimal(){if(pn.isHexDigit(pt)){nt+=De(),ot="hexadecimalInteger";return}throw Xt(De())},hexadecimalInteger(){if(pn.isHexDigit(pt)){nt+=De();return}return Yt("numeric",Qo*Number(nt))},string(){switch(pt){case"\\":De(),nt+=hAe();return;case'"':if(ug)return De(),Yt("string",nt);nt+=De();return;case"'":if(!ug)return De(),Yt("string",nt);nt+=De();return;case`
`:case"\r":throw Xt(De());case"\u2028":case"\u2029":mAe(pt);break;case void 0:throw Xt(De())}nt+=De()},start(){switch(pt){case"{":case"[":return Yt("punctuator",De())}ot="value"},beforePropertyName(){switch(pt){case"$":case"_":nt=De(),ot="identifierName";return;case"\\":De(),ot="identifierNameStartEscape";return;case"}":return Yt("punctuator",De());case'"':case"'":ug=De()==='"',ot="string";return}if(pn.isIdStartChar(pt)){nt+=De(),ot="identifierName";return}throw Xt(De())},afterPropertyName(){if(pt===":")return Yt("punctuator",De());throw Xt(De())},beforePropertyValue(){ot="value"},afterPropertyValue(){switch(pt){case",":case"}":return Yt("punctuator",De())}throw Xt(De())},beforeArrayValue(){if(pt==="]")return Yt("punctuator",De());ot="value"},afterArrayValue(){switch(pt){case",":case"]":return Yt("punctuator",De())}throw Xt(De())},end(){throw Xt(De())}};function Yt(e,t){return{type:e,value:t,line:js,column:Ca}}function Ol(e){for(const t of e){if(yu()!==t)throw Xt(De());De()}}function hAe(){switch(yu()){case"b":return De(),"\b";case"f":return De(),"\f";case"n":return De(),`
`;case"r":return De(),"\r";case"t":return De(),"	";case"v":return De(),"\v";case"0":if(De(),pn.isDigit(yu()))throw Xt(De());return"\0";case"x":return De(),gAe();case"u":return De(),O_();case`
`:case"\u2028":case"\u2029":return De(),"";case"\r":return De(),yu()===`
`&&De(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw Xt(De());case void 0:throw Xt(De())}return De()}function gAe(){let e="",t=yu();if(!pn.isHexDigit(t)||(e+=De(),t=yu(),!pn.isHexDigit(t)))throw Xt(De());return e+=De(),String.fromCodePoint(parseInt(e,16))}function O_(){let e="",t=4;for(;t-- >0;){const n=yu();if(!pn.isHexDigit(n))throw Xt(De());e+=De()}return String.fromCodePoint(parseInt(e,16))}const pAe={start(){if(zn.type==="eof")throw Nl();gS()},beforePropertyName(){switch(zn.type){case"identifier":case"string":i4=zn.value,Mi="afterPropertyName";return;case"punctuator":G1();return;case"eof":throw Nl()}},afterPropertyName(){if(zn.type==="eof")throw Nl();Mi="beforePropertyValue"},beforePropertyValue(){if(zn.type==="eof")throw Nl();gS()},beforeArrayValue(){if(zn.type==="eof")throw Nl();if(zn.type==="punctuator"&&zn.value==="]"){G1();return}gS()},afterPropertyValue(){if(zn.type==="eof")throw Nl();switch(zn.value){case",":Mi="beforePropertyName";return;case"}":G1()}},afterArrayValue(){if(zn.type==="eof")throw Nl();switch(zn.value){case",":Mi="beforeArrayValue";return;case"]":G1()}},end(){}};function gS(){let e;switch(zn.type){case"punctuator":switch(zn.value){case"{":e={};break;case"[":e=[];break}break;case"null":case"boolean":case"numeric":case"string":e=zn.value;break}if(Dg===void 0)Dg=e;else{const t=nu[nu.length-1];Array.isArray(t)?t.push(e):Object.defineProperty(t,i4,{value:e,writable:!0,enumerable:!0,configurable:!0})}if(e!==null&&typeof e=="object")nu.push(e),Array.isArray(e)?Mi="beforeArrayValue":Mi="beforePropertyName";else{const t=nu[nu.length-1];t==null?Mi="end":Array.isArray(t)?Mi="afterArrayValue":Mi="afterPropertyValue"}}function G1(){nu.pop();const e=nu[nu.length-1];e==null?Mi="end":Array.isArray(e)?Mi="afterArrayValue":Mi="afterPropertyValue"}function Xt(e){return Kv(e===void 0?`JSON5: invalid end of input at ${js}:${Ca}`:`JSON5: invalid character '${OY(e)}' at ${js}:${Ca}`)}function Nl(){return Kv(`JSON5: invalid end of input at ${js}:${Ca}`)}function LN(){return Ca-=5,Kv(`JSON5: invalid identifier character at ${js}:${Ca}`)}function mAe(e){console.warn(`JSON5: '${OY(e)}' in strings is not valid ECMAScript; consider escaping`)}function OY(e){const t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){const n=e.charCodeAt(0).toString(16);return"\\x"+("00"+n).substring(n.length)}return e}function Kv(e){const t=new SyntaxError(e);return t.lineNumber=js,t.columnNumber=Ca,t}var yAe=function(t,n,i){const r=[];let a="",o,u,c="",l;if(n!=null&&typeof n=="object"&&!Array.isArray(n)&&(i=n.space,l=n.quote,n=n.replacer),typeof n=="function")u=n;else if(Array.isArray(n)){o=[];for(const b of n){let x;typeof b=="string"?x=b:(typeof b=="number"||b instanceof String||b instanceof Number)&&(x=String(b)),x!==void 0&&o.indexOf(x)<0&&o.push(x)}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),typeof i=="number"?i>0&&(i=Math.min(10,Math.floor(i)),c="          ".substr(0,i)):typeof i=="string"&&(c=i.substr(0,10)),d("",{"":t});function d(b,x){let D=x[b];switch(D!=null&&(typeof D.toJSON5=="function"?D=D.toJSON5(b):typeof D.toJSON=="function"&&(D=D.toJSON(b))),u&&(D=u.call(x,b,D)),D instanceof Number?D=Number(D):D instanceof String?D=String(D):D instanceof Boolean&&(D=D.valueOf()),D){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof D=="string")return h(D);if(typeof D=="number")return String(D);if(typeof D=="object")return Array.isArray(D)?v(D):p(D)}function h(b){const x={"'":.1,'"':.2},D={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};let S="";for(let w=0;w<b.length;w++){const _=b[w];switch(_){case"'":case'"':x[_]++,S+=_;continue;case"\0":if(pn.isDigit(b[w+1])){S+="\\x00";continue}}if(D[_]){S+=D[_];continue}if(_<" "){let k=_.charCodeAt(0).toString(16);S+="\\x"+("00"+k).substring(k.length);continue}S+=_}const A=l||Object.keys(x).reduce((w,_)=>x[w]<x[_]?w:_);return S=S.replace(new RegExp(A,"g"),D[A]),A+S+A}function p(b){if(r.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");r.push(b);let x=a;a=a+c;let D=o||Object.keys(b),S=[];for(const w of D){const _=d(w,b);if(_!==void 0){let k=y(w)+":";c!==""&&(k+=" "),k+=_,S.push(k)}}let A;if(S.length===0)A="{}";else{let w;if(c==="")w=S.join(","),A="{"+w+"}";else{let _=`,
`+a;w=S.join(_),A=`{
`+a+w+`,
`+x+"}"}}return r.pop(),a=x,A}function y(b){if(b.length===0)return h(b);const x=String.fromCodePoint(b.codePointAt(0));if(!pn.isIdStartChar(x))return h(b);for(let D=x.length;D<b.length;D++)if(!pn.isIdContinueChar(String.fromCodePoint(b.codePointAt(D))))return h(b);return b}function v(b){if(r.indexOf(b)>=0)throw TypeError("Converting circular structure to JSON5");r.push(b);let x=a;a=a+c;let D=[];for(let A=0;A<b.length;A++){const w=d(String(A),b);D.push(w!==void 0?w:"null")}let S;if(D.length===0)S="[]";else if(c==="")S="["+D.join(",")+"]";else{let A=`,
`+a,w=D.join(A);S=`[
`+a+w+`,
`+x+"]"}return r.pop(),a=x,S}};const vAe={parse:fAe,stringify:yAe};var s_e=vAe,pS={exports:{}};/*! For license information please see tableau-ui.min.js.LICENSE.txt */var IN;function bAe(){return IN||(IN=1,(function(e,t){(function(n,i){e.exports=i(Jv(),UN())})(self,(function(n,i){return(function(){var r={7409:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Badge=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(3804);l.Badge=function(b){var x=b.className,D=b.darkBackground,S=b.kind,A=b.numeric,w=h.__rest(b,["className","darkBackground","kind","numeric"]);return p.createElement("span",h.__assign({},w,{className:y.classes(S,v.BadgeStyleName,x,{darkBackground:D,numeric:A,semantic:!A})}))},l.Badge.defaultProps={kind:"primary"},l.Badge.displayName="Badge"},3804:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.BadgeStyleName=void 0;var h=d(7582),p=d(16);l.BadgeStyleName=p.style(h.__assign(h.__assign({},{alignItems:"center",boxSizing:"border-box",display:"inline-flex",fontFamily:"inherit",fontSize:12,fontWeight:"bold",height:18,paddingBottom:3,paddingTop:3,whiteSpace:"nowrap"}),{$nest:{"&.semantic":{borderRadius:2,paddingLeft:8,paddingRight:8},"&.semantic.primary":{backgroundColor:"#D7ECF9",color:"#15557F"},"&.semantic.secondary":{backgroundColor:"#EBEBEB",color:"#4F4F4F"},"&.semantic.outline":{backgroundColor:"transparent",border:"1px solid #4F4F4F",color:"#4F4F4F"},"&.semantic.primary.darkBackground":{backgroundColor:"#AED3EF",color:"#1D4662"},"&.semantic.secondary.darkBackground":{backgroundColor:"#4B5266",color:"#FAFAFA"},"&.semantic.outline.darkBackground":{backgroundColor:"transparent",border:"1px solid #FAFAFA",color:"#FAFAFA"},"&.numeric":{borderRadius:9,paddingLeft:4,paddingRight:4},"&.numeric.primary":{backgroundColor:"#2A79AF",color:"#FFFFFF"},"&.numeric.secondary":{backgroundColor:"#EBEBEB",color:"#4F4F4F"},"&.numeric.outline":{backgroundColor:"transparent",border:"1px solid #4F4F4F",color:"#4F4F4F"},"&.numeric.primary.darkBackground":{backgroundColor:"#2A79AF",color:"#FFFFFF"},"&.numeric.secondary.darkBackground":{backgroundColor:"#4B5266",color:"#FAFAFA"},"&.numeric.outline.darkBackground":{backgroundColor:"transparent",border:"1px solid #FAFAFA",color:"#FAFAFA"}}}))},9405:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Button=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(4004);l.Button=p.forwardRef((function(b,x){var D=b.className,S=b.density,A=b.kind,w=h.__rest(b,["className","density","kind"]);return p.createElement("button",h.__assign({},w,{className:y.classes(v.ButtonClassNames[A],D,(A.startsWith("lowEmphasis")?"high":S)+"-density"),ref:x}))})),l.Button.defaultProps={density:"low",kind:"outline"},l.Button.displayName="Button"},4004:function(c,l,d){var h,p,y,v,b,x;Object.defineProperty(l,"__esModule",{value:!0}),l.ButtonClassNames=l.ButtonHeight=void 0;var D=d(7582),S=d(16),A=d(1714),w=d(2429),_=d(6461),k=d(6544),F=d(2385);l.ButtonHeight=24;var M=D.__assign(D.__assign({},k.PreventUserSelect),{backgroundColor:"transparent",borderRadius:2,border:"1px solid transparent",boxSizing:"border-box",color:"#2E2E2E",fontFamily:"inherit",fontSize:12,fontWeight:"bold",height:l.ButtonHeight,minWidth:96,padding:"0 24px",whiteSpace:"nowrap",$nest:{"& > *":{pointerEvents:"none"},"&.medium-density":{minWidth:88,padding:"0 16px"},"&.high-density":{minWidth:80,padding:"0 8px"},"&:disabled":{backgroundColor:"transparent !important",color:"#C9C9C9 !important"},"&&:focus-visible":_.DefaultFocusIndicator({inset:!0})}}),N="&:hover:enabled",P="&&&:active",L=`
  &[aria-pressed="true"],
  &[aria-checked="true"],
  &&&[aria-expanded="true"]
`,H="&:disabled",I=function(U,z,T){return U===void 0&&(U=A.IconFillColors.Rest),z===void 0&&(z=A.IconFillColors.Hover),T===void 0&&(T=A.IconFillColors.Disabled),{"&[aria-haspopup]":D.__assign(D.__assign(D.__assign(D.__assign({},w.AlignItemsCenter),w.DisplayInlineFlex),w.JustifyContentCenter),{$nest:{"&::after":{content:"url("+F.DropdownArrow.data(U)+")",display:"inline-block",height:F.DropdownArrow.height,marginRight:-6,width:F.DropdownArrow.width},"&:empty::after":{marginLeft:-7},'&[aria-expanded="true"]::after, &:active::after, &:hover:enabled::after':{content:"url("+F.DropdownArrow.data(z)+")"},"&:disabled::after":{content:"url("+F.DropdownArrow.data(T)+") !important"}}})}};l.ButtonClassNames={primary:S.style(M,{backgroundColor:"#05628A",color:"#EAF5FE",$nest:D.__assign((h={},h[L]={backgroundColor:"#084968"},h[N]={backgroundColor:"#023248"},h[P]={backgroundColor:"#001A28"},h[H]={backgroundColor:"#C9C9C9 !important",color:"#939393 !important"},h),I("#EAF5FE","#EAF5FE","#939393"))}),outline:S.style(M,{borderColor:"#747474",$nest:D.__assign((p={},p[L]={backgroundColor:"#C9C9C9"},p[N]={backgroundColor:"#AEAEAE"},p[P]={backgroundColor:"#939393",color:"#181818"},p[H]={borderColor:"#C9C9C9 !important"},p),I())}),outlineDark:S.style(M,{borderColor:"#AEAEAE",color:"#F3F3F3",$nest:D.__assign(D.__assign((y={},y[L]={backgroundColor:"#C9C9C9",borderColor:"transparent",color:"#2E2E2E"},y[N]={backgroundColor:"#AEAEAE",borderColor:"transparent",color:"#2E2E2E"},y[P]={backgroundColor:"#939393",borderColor:"transparent",color:"#181818"},y[H]={borderColor:"#747474 !important",color:"#747474 !important"},y),I("#F3F3F3","#2E2E2E","#747474")),{"&&:focus-visible":_.DefaultFocusIndicator({invert:!0,inset:!0})})}),destructive:S.style(M,{backgroundColor:"#BA0517",color:"#FEF1EE",$nest:(v={},v[L]={backgroundColor:"#8E030F"},v[N]={backgroundColor:"#640103"},v[P]={backgroundColor:"#300C01"},v[H]={backgroundColor:"#C9C9C9 !important",color:"#939393 !important"},v)}),lowEmphasis:S.style(M,{$nest:D.__assign((b={},b[L]={backgroundColor:"#C9C9C9"},b[N]={backgroundColor:"#AEAEAE"},b[P]={backgroundColor:"#939393",color:"#181818"},b),I())}),lowEmphasisDark:S.style(M,{color:"#F3F3F3",$nest:D.__assign(D.__assign((x={},x[L]={backgroundColor:"#C9C9C9",color:"#2E2E2E"},x[N]={backgroundColor:"#AEAEAE",color:"#2E2E2E"},x[P]={backgroundColor:"#939393",color:"#181818"},x[H]={color:"#747474 !important"},x),I("#F3F3F3","#2E2E2E","#747474")),{"&&:focus-visible":_.DefaultFocusIndicator({invert:!0,inset:!0})})})},l.ButtonClassNames.filledGreen=l.ButtonClassNames.primary,l.ButtonClassNames.attentionRed=l.ButtonClassNames.destructive,l.ButtonClassNames.filled=l.ButtonClassNames.outline,l.ButtonClassNames.blackText=l.ButtonClassNames.lowEmphasis,Object.freeze(l.ButtonClassNames),S.forceRenderStyles()},6156:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Checkbox=void 0;var h=d(7582),p=d(4098),y=d(4860);l.Checkbox=p.forwardRef((function(v,b){return p.createElement(y.Selector,h.__assign({},v,{ref:b,type:"checkbox"}))})),l.Checkbox.displayName="Checkbox"},5516:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorGrid=l.ColorPalettes=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(4736),b=d(4535);l.ColorPalettes={dark:b.DarksPalette,light:b.LightsPalette,flows:b.FlowsPalette};var x=y.style({display:"inline-flex",flexDirection:"column",rowGap:4,$nest:{'& [role="row"]':{display:"flex"},'& [role="gridcell"]:not(:first-child)':{marginLeft:-1},'&[aria-colcount="6"] [role="gridcell"][aria-colindex="4"]':{marginLeft:8}}}),D="data-color",S=(function(A){function w(){var _=A!==null&&A.apply(this,arguments)||this;return _.handleClick=function(k){var F,M,N,P,L=k.target.getAttribute(D);L&&((M=(F=_.props).onColorChange)===null||M===void 0||M.call(F,L)),(P=(N=_.props).onClick)===null||P===void 0||P.call(N,k)},_.handleGridKeyDown=function(k){var F,M,N=k.target,P=k.currentTarget,L=Number(N.getAttribute("aria-rowindex"))-1,H=Number(N.getAttribute("aria-colindex"))-1,I=function(q,G){var O;return(O=P.querySelector('[aria-rowindex="'+(q+1)+'"][aria-colindex="'+(G+1)+'"]'))===null||O===void 0?void 0:O.focus()},U=Number(P.getAttribute("aria-colcount")),z=Number(P.getAttribute("aria-rowcount")),T={ArrowLeft:function(){return I(L,H-1)},ArrowRight:function(){return I(L,H+1)},ArrowDown:function(){return I(L+1,H)},ArrowUp:function(){return I(L-1,H)},"Ctrl+Home":function(){return I(0,0)},Home:function(){return I(L,0)},End:function(){return I(L,U-1)},"Ctrl+End":function(){return I(z-1,U-1)}},R=(k.ctrlKey?"Ctrl+":"")+k.key;T[R]&&(T[R](),k.preventDefault(),k.stopPropagation()),(M=(F=_.props).onKeyDown)===null||M===void 0||M.call(F,k)},_}return h.__extends(w,A),w.prototype.render=function(){var _=this.props,k=_.disabled,F=(_.onColorChange,_.palette,_.selectedColor,h.__rest(_,["disabled","onColorChange","palette","selectedColor"])),M=this.buildColorSwatches(),N=M.rowCount,P=M.colCount,L=M.swatches;return p.createElement("div",h.__assign({},F,{"aria-colcount":P,"aria-disabled":k,"aria-rowcount":N,className:y.classes(x,F.className),onClick:this.handleClick,onKeyDown:this.handleGridKeyDown,role:"grid"}),L)},w.prototype.buildColorSwatches=function(){var _=this.props,k=_.disabled,F=_.palette,M=_.selectedColor,N=typeof F=="string"?l.ColorPalettes[F]:F,P=b.isColorInPalette(M,N),L=function(H){return!!M&&H.toLowerCase()===M.toLowerCase()};return{rowCount:N.length,colCount:N[0].length,swatches:N.map((function(H,I){return p.createElement("div",{role:"row",key:I},H.map((function(U,z){var T;return p.createElement(v.ColorSwatch,h.__assign({"aria-colindex":z+1,"aria-rowindex":I+1,"aria-selected":L(U),color:U},((T={})[D]=U,T),{disabled:k,key:"swatch-"+U,role:"gridcell",tabIndex:L(U)||!P&&z===0&&I===0?void 0:-1}))})))}))}},w.defaultProps={palette:"dark"},w})(p.PureComponent);l.ColorGrid=S},4736:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.ColorSwatch=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(6461),b=y.style({border:"1px solid #c9c9c9",borderRadius:1,boxSizing:"border-box",height:24,width:24,$nest:{'&:hover:enabled, &:focus-visible, &[aria-selected="true"]':{position:"relative"},"&:hover:enabled":{borderColor:"#2e2e2e",boxShadow:"inset 0 0 0 1px #fff"},'&[aria-selected="true"]':{borderColor:"#000",boxShadow:"inset 0 0 0 1px #fff"},'&[aria-selected="true"]:focus-visible':{boxShadow:"inset 0 0 0 1px #000"},"&:focus-visible":h.__assign(h.__assign({borderColor:"#fff"},v.DefaultFocusIndicator({outlineOffset:0})),{zIndex:1}),"&:active:enabled":{transform:"scale(0.9)"}}});l.ColorSwatch=p.memo(p.forwardRef((function(x,D){var S=x.color,A=x.size,w=h.__rest(x,["color","size"]);return p.createElement("button",h.__assign({},w,{className:y.classes(w.className,b),ref:D,style:h.__assign({backgroundColor:S,height:A,width:A},w.style),title:S}))}))),l.ColorSwatch.displayName="ColorSwatch"},4535:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.isColorInPalette=l.FlowsPalette=l.LightsPalette=l.DarksPalette=void 0;var d=Object.freeze([["#000000","#1B1B1B","#333333","#555555","#666666","#898989"],["#FFFFFF","#F5F5F5","#E6E6E6","#D4D4D4","#C0C0C0","#B4B4B4"]]);l.DarksPalette=Object.freeze(d.concat([["#F28E2B","#F9A655","#FFBE7D","#B07AA1","#C290B4","#D4A6C8"],["#B6992D","#D3B348","#F1CE63","#D37295","#E799B3","#FABFD2"],["#59A14F","#72B966","#8CD17D","#E15759","#F17B79","#FF9D9A"],["#499894","#69AAA5","#86BCB6","#9D7660","#BA9582","#D7B5A6"],["#4E79A7","#75A1C7","#A0CBE8","#79706E","#998F8C","#BAB0AC"],["#606B76","#818B91","#A7ACAD","#76B7B2","#FF9DA7","#EDC948"]])),l.LightsPalette=Object.freeze(d.concat([["#EFEBE8","#F5F1F0","#F9F8F7","#F0EAE8","#F5F0EF","#FAF5F4"],["#F5EDDC","#FAF4E7","#FEFAF1","#E9EBE0","#F0F1E8","#F7F7F0"],["#EBEBEB","#F2F2F2","#F9F9F9","#DFE7E8","#E9F0F1","#F2F9F9"],["#F3EBF3","#F7F1F6","#FBF7FB","#E2E6F0","#E9EDF5","#F0F3FA"],["#E6ECF0","#EEF1F3","#F2F6F7","#DDEBF0","#E7F1F5","#F0F7FA"],["#DFEDEB","#E9F3F2","#F3FAF9","#E8EDDA","#EFF3E3","#F7FAF0"],["#F5EAD7","#F6EEE3","#FAF5F0","#F9E9E0","#F9EEE8","#F9F3EF"]])),l.FlowsPalette=Object.freeze([["#4F6980","#3D7FA6","#8BC2CA","#499893"],["#62AEA1","#7DC4AE","#638B66","#86AF6A"],["#C3BB3D","#EFC637","#F6A035","#F37941"],["#F59A9A","#CD677F","#C497B7","#845578"],["#B9AA98","#7E756D","#9EB0A5","#B56252"]]),l.isColorInPalette=function(h,p){return!(!h||h.charAt(0)!=="#")&&p.flat().findIndex((function(y){return y.toLowerCase()===h.toLowerCase()}))>-1}},9438:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Disclosure=void 0;var h=d(7582),p=d(1074),y=d(4098),v=d(16),b=d(3242),x=d(9358),D=d(2070),S=d(6187),A=Object.freeze({left:"rotate(90deg)",right:"rotate(-90deg)"}),w=Object.freeze({upleft:"rotate(0deg)",upright:"rotate(0deg)",downleft:"rotate(180deg)",downright:"rotate(-180deg)"});l.Disclosure=y.forwardRef((function(_,k){var F,M,N=_.alignment,P=_.buttonAttrs,L=_.children,H=_.className,I=_.direction,U=_.disclosureType,z=_.isExpanded,T=_.isInitiallyExpanded,R=_.label,q=_.labelIcon,G=_.keepChildrenMounted,O=_.noBackgroundWhenExpanded,Z=_.onCollapse,ee=_.onExpand,X=_.subLabel,Q=h.__rest(_,["alignment","buttonAttrs","children","className","direction","disclosureType","isExpanded","isInitiallyExpanded","label","labelIcon","keepChildrenMounted","noBackgroundWhenExpanded","onCollapse","onExpand","subLabel"]),ne=z===void 0,ce=y.useState(T),Fe=ce[0],Me=ce[1];D.useEffectExceptOnMount((function(){var oe;return(oe=Fe?ee:Z)===null||oe===void 0?void 0:oe()}),[Fe]);var j=ne?Fe:z,W=function(oe){var ge;oe===void 0&&(oe=!j),ne?Me(oe):(ge=oe?ee:Z)===null||ge===void 0||ge()};y.useImperativeHandle(k,(function(){return{toggle:W}}));var te=y.useState(b.generateId())[0],Y=j?"auto":0,le=h.__assign(h.__assign({flexShrink:0,WebkitUserSelect:"none",userSelect:"none",height:"var(--expando-chevron-size)",width:"var(--expando-chevron-size)",transform:j?w[""+I+N]:A[N],transition:"transform "+x.AnimationDuration+"ms"},(R||q)&&{marginLeft:N==="right"?8:0,marginRight:N==="left"?8:0}),N==="right"&&{order:1}),Te=((F={})[N+"-align"]=!0,F[I+"-direction"]=!0,F.hasLeftBorder=U!=="default"&&U!=="neutral",F.noBackgroundWhenExpanded=O,F);return y.createElement("div",h.__assign({},Q,{className:v.classes(H,S.DisclosureColorStyleNames[U],S.DisclosureStyleNames.rootStyleName,(M={},M[S.DisclosureStyleNames.legacyAlignmentStyleName]=U==="default"&&N==="left",M))}),y.createElement("button",h.__assign({},P,j&&{"aria-controls":te},{"aria-expanded":j,className:v.classes(S.DisclosureStyleNames.buttonStyleName,Te,P?.className),onClick:function(){return W()}}),y.createElement("span",{key:"label"},y.createElement(p.ArrowChevronUpIcon,{key:"chevronIcon","aria-hidden":!0,color:"var(--expando-chevron-color)",size:S.DisclosureChevronSize,style:le,viewBox:"0 0 "+S.DisclosureChevronSize+" "+S.DisclosureChevronSize}),q&&y.createElement("span",{key:"labelIcon",className:S.DisclosureStyleNames.labelIconStyleName},q),R&&y.createElement("span",{key:"disclosureLabel",className:S.DisclosureStyleNames.labelStyleName},R)),X&&y.createElement("span",{key:"sublabel",className:S.DisclosureStyleNames.subLabelStyleName},X)),y.createElement(x.HeightAnimator,h.__assign({key:"content"},G&&{height:Y},{initialHeight:Y}),(G||j)&&y.createElement("div",{className:v.classes(S.DisclosureStyleNames.contentStyleName,Te),id:te},L)))})),l.Disclosure.defaultProps={alignment:"left",direction:"down",disclosureType:"default"},l.Disclosure.displayName="Disclosure"},6187:function(c,l,d){var h;Object.defineProperty(l,"__esModule",{value:!0}),l.DisclosureStyleNames=l.DisclosureColorStyleNames=l.DisclosureChevronSize=void 0;var p=d(7582),y=d(16),v=d(1714),b=d(6461),x=d(6544),D=d(7478);l.DisclosureChevronSize=14;var S=v.TextColors.Primary,A=Object.freeze({default:{"--expando-button-background-color":"transparent","--expando-button-background-color-hover":"#E5E5E5","--expando-button-background-color-press":"#C9C9C9","--expando-button-color":S,"--expando-button-color-hover":S,"--expando-button-color-press":S,"--expando-content-background-color":"transparent"},neutral:{"--expando-button-background-color":"transparent","--expando-button-background-color-hover":"#E5E5E5","--expando-button-background-color-press":"#C9C9C9","--expando-button-color":S,"--expando-button-color-hover":S,"--expando-button-color-press":S,"--expando-content-background-color":"#F3F3F3"},red:{"--expando-button-background-color":"#FEDED8","--expando-button-background-color-hover":"#FEB8AB","--expando-button-background-color-press":"#FE8F7D","--expando-button-color":"#BA0517","--expando-button-color-hover":"#8E030F","--expando-button-color-press":"#300C01","--expando-content-background-color":"#FEDED8"},yellow:{"--expando-button-background-color":"#F9E3B6","--expando-button-background-color-hover":"#FCC003","--expando-button-background-color-press":"#E4A201","--expando-button-color":"#6F3400","--expando-button-color-hover":"#4F2100","--expando-button-color-press":"#281202","--expando-content-background-color":"#F9E3B6"},green:{"--expando-button-background-color":"#CDEFC4","--expando-button-background-color-hover":"#91DB8B","--expando-button-background-color-press":"#45C65A","--expando-button-color":"#22683E","--expando-button-color-hover":"#194E31","--expando-button-color-press":"#0E3522","--expando-content-background-color":"#CDEFC4"},blue:{"--expando-button-background-color":"#CFE9FE","--expando-button-background-color-hover":"#90D0FE","--expando-button-background-color-press":"#1AB9FF","--expando-button-color":"#05628A","--expando-button-color-hover":"#084968","--expando-button-color-press":"#023248","--expando-content-background-color":"#CFE9FE"},violet:{"--expando-button-background-color":"#F2DEFE","--expando-button-background-color-hover":"#E5B9FE","--expando-button-background-color-press":"#D892FE","--expando-button-color":"#9602CF","--expando-button-color-hover":"#730394","--expando-button-color-press":"#520066","--expando-content-background-color":"#F2DEFE"}});l.DisclosureColorStyleNames=Object.freeze(D.typedKeys(A).reduce((function(w,_){return w[_]=y.style(A[_]),w}),{})),l.DisclosureStyleNames={rootStyleName:y.style((h={},h["--expando-accent-color"]="var(--expando-button-color)",h["--expando-border-radius"]=2,h["--expando-chevron-color"]=v.TextColors.Primary,h["--expando-chevron-size"]=l.DisclosureChevronSize,h.alignItems="stretch",h.display="flex",h.flexDirection="column",h)),buttonStyleName:y.style(p.__assign(p.__assign({},x.PreventUserSelect),{border:"none",borderRadius:"var(--expando-border-radius)",boxSizing:"border-box",color:"var(--expando-button-color)",display:"flex",flexDirection:"column",fontFamily:"inherit",fontSize:12,justifyContent:"center",minHeight:24,paddingBottom:0,paddingLeft:4,paddingRight:4,paddingTop:0,position:"relative",textAlign:"left",$nest:{"&:focus-visible":b.DefaultFocusIndicator(),"&:focus-visible::after":{border:"1px solid white",content:'" "',inset:b.FocusIndicatorWidth,position:"absolute"},"&.hasLeftBorder:focus-visible::after":{left:-2},'&.down-direction[aria-expanded="true"]':{borderBottomLeftRadius:0,borderBottomRightRadius:0},'&.up-direction[aria-expanded="true"]':{borderTopLeftRadius:0,borderTopRightRadius:0},"&.up-direction":{order:1},'&.noBackgroundWhenExpanded[aria-expanded="true"]':{backgroundColor:"transparent"},'&:not([aria-expanded="true"])':{backgroundColor:"var(--expando-button-background-color)"},'&[aria-expanded="true"]':{backgroundColor:"var(--expando-content-background-color)"},"&:enabled:hover":{backgroundColor:"var(--expando-button-background-color-hover)",color:"var(--expando-button-color-hover)"},"&:enabled:active":{backgroundColor:"var(--expando-button-background-color-press)",color:"var(--expando-button-color-press)"},"&.hasLeftBorder":{borderLeft:"4px solid var(--expando-accent-color)"},"&.hasLeftBorder.left-align":{paddingRight:8},"&.hasLeftBorder.right-align":{paddingLeft:8},"& > :first-child":{alignItems:"flex-start",display:"flex",marginBottom:4,marginTop:4},"&.hasLeftBorder > :first-child":{fontWeight:"bold"},"&.right-align > :first-child":{width:"100%"}}})),labelIconStyleName:y.style({display:"inline-flex",flexShrink:0,marginRight:4,"-webkit-user-select":"none",userSelect:"none"}),labelStyleName:y.style({flexGrow:1}),subLabelStyleName:y.style({marginBottom:4,$nest:{".left-align > &":{marginLeft:22}}}),contentStyleName:y.style({backgroundColor:"var(--expando-content-background-color)",color:S,fontSize:12,lineHeight:"18px",paddingLeft:4,paddingRight:4,$nest:{"&.down-direction":{borderBottomLeftRadius:"var(--expando-border-radius)",borderBottomRightRadius:"var(--expando-border-radius)",paddingBottom:8,paddingTop:4},"&.up-direction":{borderTopLeftRadius:"var(--expando-border-radius)",borderTopRightRadius:"var(--expando-border-radius)",paddingBottom:4,paddingTop:8},"&.hasLeftBorder":{borderLeft:"4px solid var(--expando-accent-color)",paddingLeft:8,paddingRight:8},"&.left-align":{paddingLeft:26},"&.noBackgroundWhenExpanded":{backgroundColor:"transparent"}}}),legacyAlignmentStyleName:y.style({alignItems:"flex-start"})}},2957:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.DropdownSelect=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(1714),b=d(6461),x=d(3242),D=d(7478),S=d(4004),A=d(7180),w=d(7180),_=d(2385),k=y.style({background:"transparent no-repeat right center",border:"none",borderRadius:0,color:v.TextColors.Primary,cursor:"inherit",fontFamily:"inherit",fontSize:"inherit",height:"100%",outline:"none",paddingLeft:w.SidePadding,width:"100%","-moz-appearance":"none","-webkit-appearance":"none"}),F=y.style({backgroundColor:A.BackgroundColors.Rest,border:"1px solid transparent",borderRadius:1,boxSizing:"border-box",display:"inline-block",height:0,minHeight:S.ButtonHeight,position:"relative",$nest:{":not(.disabled) > &:hover":{backgroundColor:A.BackgroundColors.Hover},"&&&&:focus-within":h.__assign(h.__assign({$unique:!0},b.DefaultFocusIndicator()),{backgroundColor:A.BackgroundColors.Rest}),"& > select":{backgroundImage:"url('"+_.DropdownArrow.data(v.IconFillColors.Rest)+"')",paddingRight:_.DropdownArrow.width+w.SidePadding},"& > select:disabled":{backgroundImage:"url('"+_.DropdownArrow.data(v.IconFillColors.Disabled)+"')",opacity:1},"&:hover > select:enabled":{backgroundImage:"url('"+_.DropdownArrow.data(v.IconFillColors.Hover)+"')"},".icon > & > select":{backgroundImage:"url('"+_.IconDropdownArrow.data(v.IconFillColors.Rest)+"')",paddingRight:_.IconDropdownArrow.width+w.SidePadding},".icon > & > select:disabled":{backgroundImage:"url('"+_.IconDropdownArrow.data(v.IconFillColors.Disabled)+"')"},".icon > &:hover > select:enabled":{backgroundImage:"url('"+_.IconDropdownArrow.data(v.IconFillColors.Hover)+"')"},".outline > &":{borderColor:A.BorderColors.Rest},".outline > &:hover":{borderColor:A.BorderColors.Hover},".outline.disabled > &":{borderColor:A.BorderColors.Disabled+" !important"},".line > &":{borderBottomColor:A.BorderColors.Rest,borderBottomLeftRadius:0,borderBottomRightRadius:0},".line > &:hover":{borderBottomColor:A.BorderColors.Hover},".line.disabled > &":{borderBottomColor:A.BorderColors.Disabled+" !important"},".icon > &, .text > &":{cursor:"pointer"},".disabled > &&":{cursor:"default"}}});l.DropdownSelect=p.forwardRef((function(M,N){var P=M.className,L=M.disabled,H=M.id,I=M.label,U=(M.multiple,M.kind),z=h.__rest(M,["className","disabled","id","label","multiple","kind"]),T=D.defaultIfNothing(H,p.useState(x.generateId())[0]);return p.createElement("div",{className:y.classes(A.WrapperStyleName,P,U,{disabled:L})},p.createElement("label",{htmlFor:T,className:y.classes(A.LabelStyleName)},I),p.createElement("div",{className:y.classes(F,P)},p.createElement("select",h.__assign({},z,{className:k,disabled:L,id:T,ref:N}))))})),l.DropdownSelect.defaultProps={kind:"outline"},l.DropdownSelect.displayName="DropdownSelect"},2385:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.IconDropdownArrow=l.DropdownArrow=void 0;var h=d(1714),p=function(y){return"data:image/svg+xml,"+encodeURIComponent(y)};l.DropdownArrow={width:18,height:18,data:function(y){return y===void 0&&(y=h.IconFillColors.Rest),p('<svg xmlns="http://www.w3.org/2000/svg" width="'+l.DropdownArrow.width+'" height="'+l.DropdownArrow.height+'"><path fill="'+y+'" d="M5.8 7.3l3.5 4.6c.1.1.2.1.3 0l3.6-4.6c.1-.2 0-.3-.2-.3H6c-.2 0-.3.1-.2.3z"/></svg>')}},l.IconDropdownArrow={height:5,width:7,data:function(y){return y===void 0&&(y=h.IconFillColors.Rest),p('<svg xmlns="http://www.w3.org/2000/svg" width="'+l.IconDropdownArrow.width+'" height="'+l.IconDropdownArrow.height+'"><path fill="'+y+'" d="M5.8,1H1.2C1.1,1,1,1.1,1.1,1.2l2.3,2.7C3.4,4,3.6,4,3.6,3.9l2.3-2.7 C6,1.1,5.9,1,5.8,1z"/></svg>')}}},7356:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.LabeledField=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(926),b=d(1714),x=d(6461),D=d(3242),S=d(7478),A=d(7180),w=y.style({$nest:{"& > .message":{cursor:"default",minHeight:A.LabelHeight,lineHeight:A.LabelHeight+"px",display:"inline-flex"},"& > .message:empty":{display:"none"},"&.invalid .message":{color:b.TextColors.Error},"&.valid .message":{color:b.TextColors.Valid},"&.invalid input, &.invalid textarea":{color:b.TextColors.Primary},"&.valid input, &.valid textarea":{color:b.TextColors.Primary,borderColor:A.BorderColors.Valid},"&.valid :hover":{borderColor:A.BorderColors.Valid},"&&&&.valid :focus":x.ValidFocusIndicator(),"&.dark.invalid .message":{color:b.InvertTextColors.Error},"&.dark.valid .message":{color:b.InvertTextColors.Valid},"&.dark.invalid input, &.dark.invalid textarea":{color:b.InvertTextColors.Primary},"&.dark.valid input, &.dark.valid textarea":{color:b.InvertTextColors.Primary,borderColor:A.InvertBorderColors.Valid},"&.dark.valid :hover":{borderColor:A.InvertBorderColors.Valid},"&&&&.dark.valid :focus":x.ValidFocusIndicator({invert:!0})}}),_=12,k=y.style({display:"inline-block",flexShrink:0,height:_,lineHeight:"12px",marginRight:4,marginTop:4,verticalAlign:"middle",width:_}),F=y.style({color:b.IconFillColors.Error,$nest:{".dark &":{color:b.InvertIconFillColors.Error}}}),M=y.style({color:b.IconFillColors.Valid,$nest:{".dark &":{color:b.InvertIconFillColors.Valid}}});l.LabeledField=function(N){var P=S.defaultIfNothing(N.labelId,p.useState(D.generateId())[0]),L=S.defaultIfNothing(N.id,p.useState(D.generateId())[0]),H=p.useState(D.generateId())[0],I=p.useState(!1),U=I[0],z=I[1],T=N.children,R=N.className,q=N.disabled,G=N.label,O=N.labelRef,Z=N.message,ee=N.valid,X=(function(){switch(ee){case!0:return p.createElement("svg",{className:y.classes(k,M),xmlns:"http://www.w3.org/2000/svg",width:_,height:_},p.createElement("path",{fill:"currentColor",d:"M11.0901085,1.44039588 L5.95027487,10.7620802 C5.91674718,10.8219618 5.8714497,10.8712975 5.81882351,10.9088267 L5.74626794,10.9513078 L5.72944899,10.9584377 C5.56475588,11.0351468 5.36221679,11.007584 5.22322743,10.8747039 L1,6.92203962 L1.63092578,6.27522146 L5.43503565,9.82703356 L10.2990877,0.998730122 L11.0901085,1.44039588 Z"}));case!1:return p.createElement("svg",{className:y.classes(k,F),xmlns:"http://www.w3.org/2000/svg",width:_,height:_},p.createElement("path",{fill:"currentColor",d:"M6 0c3.32307692 0 6 2.67692308 6 6s-2.67692308 6-6 6-6-2.67692308-6-6 2.67692308-6 6-6zm3.80826837 2.78724354L2.78823013 9.80910485C3.66178215 10.54956 4.78584707 11 6 11c2.72727273 0 5-2.27272727 5-5 0-1.21461006-.4507793-2.33906427-1.19173163-3.21275646zM6 1C3.27272727 1 1 3.27272727 1 6c0 1.15838235.41000962 2.23476277 1.09071081 3.08982322l7.00012461-6.9983064C8.23561231 1.41033329 7.15883948 1 6 1z"}));case"pending":return p.createElement(v.Spinner,{"aria-hidden":!0,alt:"",dimension:_,className:k});default:return null}})();return p.createElement("div",{className:y.classes(R,A.WrapperStyleName,w,{valid:ee===!0,invalid:ee===!1,disabled:q}),onBlurCapture:function(Q){Q.currentTarget.contains(D.findBlurRelatedTarget(Q))||z(!1)},onFocusCapture:function(Q){Q.currentTarget.contains(Q.target)&&z(!0)}},p.createElement("label",{className:y.classes(A.LabelStyleName),htmlFor:L,id:P,ref:O},G),T(h.__assign({"aria-describedby":H,id:L},ee===!1&&{"aria-errormessage":H,"aria-invalid":!0})),p.createElement("div",{"aria-live":U?"polite":"off",className:"message",id:H},(ee==="pending"||Z)&&p.createElement(p.Fragment,null,X,Z)))},l.LabeledField.displayName="LabeledField"},412:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Pill=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(2429),b=d(6544),x=d(5380),D="#333",S="rgba(255, 255, 255, 0.9)",A={backgroundColor:"transparent",color:D};function w(F,M){return{normal:{backgroundColor:F,color:S},dark:{backgroundColor:M,color:S},light:{backgroundColor:x.rgb2rgba(F,.55),borderColor:"transparent",color:D}}}var _={continuous:w("rgb(0, 177, 128)","rgb(0, 151, 104)"),discrete:w("rgb(73, 150, 178)","rgb(54, 126,156)"),invalid:w("rgb(235, 68, 84)","rgb(201, 58, 71)"),other:w("#d4d4d4","rgb(84, 84, 84)")},k=y.style(b.PreventUserSelect,h.__assign(h.__assign(h.__assign(h.__assign({},v.AlignItemsCenter),{borderColor:"transparent",borderRadius:10,borderStyle:"solid",borderWidth:1,boxSizing:"border-box"}),v.DisplayFlex),{fontSize:12,height:20,minWidth:150,overflowY:"hidden",padding:"0 10px",$nest:{"&:not(.schema)":{$nest:{"&.continuous":_.continuous.normal,"&.discrete":_.discrete.normal,"&.invalid":_.invalid.normal,"&.other":h.__assign(h.__assign({},_.other.normal),{color:D}),"&:hover":{borderColor:"rgb(34, 38, 54)"},"&.continuous.selected":_.continuous.dark,"&.discrete.selected":_.discrete.dark,"&.invalid.selected":_.invalid.dark,"&.other.selected":_.other.dark}},"&.schema":h.__assign(h.__assign({},A),{$nest:{"&.continuous:hover":_.continuous.light,"&.discrete:hover":_.discrete.light,"&.invalid:hover":_.invalid.light,"&.other:hover":_.other.light,"&.continuous.selected":_.continuous.normal,"&.discrete.selected":_.discrete.normal,"&.invalid.selected":_.invalid.normal,"&.other.selected":h.__assign(h.__assign({},_.other.normal),{color:D})}})}}));l.Pill=p.forwardRef((function(F,M){var N=F.className,P=F.kind,L=F.schema,H=F.selected,I=h.__rest(F,["className","kind","schema","selected"]);return p.createElement("div",h.__assign({},I,{className:y.classes(k,L&&"schema",H&&"selected",P,N),ref:M}))})),l.Pill.displayName="Pill"},550:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Radio=void 0;var h=d(7582),p=d(4098),y=d(4860);l.Radio=p.forwardRef((function(v,b){return p.createElement(y.Selector,h.__assign({},v,{ref:b,type:"radio"}))})),l.Radio.displayName="Radio"},4860:function(c,l,d){var h;Object.defineProperty(l,"__esModule",{value:!0}),l.Selector=l.FocusWithinClassName=l.FocusVisibleClassName=void 0;var p=d(7582),y=d(4098),v=d(16),b=d(1714),x=d(2429),D=d(6461),S=d(6544),A=d(3242),w=d(2070),_=d(5380),k=14,F=function(I){return I===void 0&&(I=b.IconFillColors.Rest),_.encodeSvgUrl('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16"><path fill="'+I+'" transform="translate(-2, -2)" d="M7.2 12.3c-.2 0-.4-.1-.5-.2l-3-3L4.8 8l2.3 2.3 4-6.7 1.3.8L7.9 12c-.2.2-.4.3-.7.3z"/></svg>')},M=function(I){return I===void 0&&(I=b.IconFillColors.Rest),_.encodeSvgUrl('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16"><rect fill="'+I+'" x="2" y="5" width="8" height="2"/></svg>')},N=function(I){return I===void 0&&(I=b.IconFillColors.Rest),_.encodeSvgUrl('<svg xmlns="http://www.w3.org/2000/svg" height="16" width="16"><circle fill="'+I+'" transform="translate(-2, -2)" cx="8" cy="8" r="3"/></svg>')},P=v.style(p.__assign(p.__assign({boxSizing:"border-box"},x.FlexShrink0),{height:k,margin:0,marginTop:3,opacity:0,padding:0,pointerEvents:"none",width:k})),L=v.style(S.PreventUserSelect,{marginLeft:6,overflow:"hidden",textOverflow:"ellipsis"});l.FocusVisibleClassName="focus-visible",l.FocusWithinClassName="focus-within";var H=v.style(S.PreventUserSelect,p.__assign(p.__assign({color:b.TextColors.Primary},x.DisplayInlineFlex),{fontSize:12,lineHeight:"20px",position:"relative",$nest:(h={"&.disabled":{color:b.TextColors.Disabled+" !important"},"&:before":{backgroundColor:"white",border:"1px solid "+b.SelectorColors.Border,borderRadius:1,boxSizing:"border-box",content:"'\\200B'",display:"inline-block",height:k,position:"absolute",top:3,width:k},"&.radio:before":{borderRadius:"100%"},"&:hover.enabled:before":{borderColor:b.SelectorColors.Border,backgroundColor:b.SelectorColors.BackgroundHover},"&:active.enabled:before":{borderColor:b.SelectorColors.Border,backgroundColor:b.SelectorColors.BackgroundActive}},h["&.checkbox."+l.FocusWithinClassName+"."+l.FocusVisibleClassName+":before"]=D.DefaultFocusIndicator({outlineOffset:1}),h["&.radio."+l.FocusWithinClassName+"."+l.FocusVisibleClassName+":after"]=p.__assign(p.__assign({},D.DefaultFocusIndicator({outlineOffset:1})),{backgroundRepeat:"no-repeat",borderRadius:1,boxSizing:"border-box",content:"'\\200B'",display:"inline-block",height:k,position:"absolute",top:3,width:k}),h["&.disabled:before"]={opacity:b.SelectorColors.OpacityDisabled},h["&.checkbox.checked:before"]={backgroundImage:F(b.IconFillColors.Rest)},h["&.checkbox.checked:hover.enabled:before"]={backgroundImage:F(b.IconFillColors.Hover)},h["&.checkbox.indeterminate:before"]={backgroundImage:M(b.IconFillColors.Rest)},h["&.checkbox.indeterminate:hover.enabled:before"]={backgroundImage:M(b.IconFillColors.Hover)},h["&.radio.checked:before"]={backgroundImage:N(b.IconFillColors.Rest)},h["&.radio.checked:hover.enabled:before"]={backgroundImage:N(b.IconFillColors.Hover)},h)}));l.Selector=y.forwardRef((function(I,U){var z=I.children,T=I.className,R=I.indeterminate,q=I.labelProps,G=I.style,O=p.__rest(I,["children","className","indeterminate","labelProps","style"]),Z=y.useState(!0),ee=Z[0],X=Z[1],Q=y.useState(!1),ne=Q[0],ce=Q[1],Fe=y.useState(void 0),Me=Fe[0],j=Fe[1];return y.createElement("label",p.__assign({},q,{className:v.classes(T,H,I.type,I.checked&&"checked",I.disabled?"disabled":"enabled",R&&"indeterminate",ee&&l.FocusVisibleClassName,ne&&l.FocusWithinClassName),onBlurCapture:function(W){var te;X(!0),ce(!1),(te=q?.onBlurCapture)===null||te===void 0||te.call(q,W)},onFocusCapture:function(W){var te;ce(!0),(te=q?.onFocusCapture)===null||te===void 0||te.call(q,W)},onKeyDownCapture:function(W){var te;X(!0),(te=q?.onKeyDownCapture)===null||te===void 0||te.call(q,W)},onMouseUpCapture:function(W){var te;X(!1),(te=q?.onMouseUpCapture)===null||te===void 0||te.call(q,W)},onMouseEnter:function(W){var te,Y=W.currentTarget.lastElementChild;j(A.isElementOverflownX(Y)&&Y.textContent||void 0),(te=q?.onMouseEnter)===null||te===void 0||te.call(q,W)},style:G,title:q&&q.title||Me}),y.createElement("input",p.__assign({},O,{className:P,ref:function(W){w.assignRef(U,W),W&&(W.indeterminate=R)}})),z&&y.createElement("div",{className:L},z))})),l.Selector.displayName="Selector"},8169:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.SideTab=l.SideTabs=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(1714),b=d(6461),x=d(6544),D=d(9639),S=y.style({backgroundColor:"#F3F3F3",overflowX:"clip",overflowY:"auto",maxWidth:200,minWidth:140,width:150});l.SideTabs=function(_){var k=_.children,F=_.manualActivation,M=_.onChangeTab,N=_.onTabChange,P=_.selectedIndex,L=h.__rest(_,["children","manualActivation","onChangeTab","onTabChange","selectedIndex"]);return p.createElement("div",h.__assign({},L,(function(H){var I=p.useState(!1),U=I[0],z=I[1],T=function(R){return Array.from(R.querySelectorAll('[role="tab"]'))};return{"aria-orientation":H.orientation,children:p.Children.map(H.children,(function(R,q){return p.cloneElement(R,{"aria-selected":q===H.selectedIndex})})),onClick:function(R){var q,G=R.target.closest('[role="tab"]');if(G){var O=T(R.currentTarget).indexOf(G);(q=H.onTabChange)===null||q===void 0||q.call(H,O)}},onBlur:function(R){R.currentTarget.contains(R.relatedTarget)||z(!1)},onFocus:function(R){U||z(!0),R.target===R.currentTarget?T(R.currentTarget)[H.selectedIndex||0].focus():H.manualActivation||R.target.click()},onKeyDown:function(R){var q=H.orientation==="horizontal"?"ArrowLeft":"ArrowUp",G=H.orientation==="horizontal"?"ArrowRight":"ArrowDown",O=T(R.currentTarget);if(!(O.length<1)){var Z=O.indexOf(R.target);if(!(Z<0)){switch(R.key){case"Home":Z=0;break;case q:Z--;break;case G:Z++;break;case"End":Z=O.length-1;break;default:return}R.stopPropagation(),R.preventDefault(),O[Z=(O.length+Z)%O.length].focus()}}},role:"tablist",tabIndex:U?-1:0}})({orientation:"vertical",children:k,manualActivation:F,onTabChange:M??N,selectedIndex:P}),{className:y.classes(S,L.className)}))},l.SideTabs.displayName="SideTabs";var A=y.style(D.TextEllipsis),w=y.style(h.__assign(h.__assign({},x.PreventUserSelect),{alignItems:"center",backgroundColor:"#F3F3F3",border:"none",borderBottom:"1px solid #C9C9C9",borderRadius:0,borderRight:"1px solid #C9C9C9",boxSizing:"border-box",color:v.TextColors.Primary,display:"flex",fontFamily:"inherit",fontSize:12,height:40,maxHeight:150,outline:"none",padding:"0 16px",position:"relative",textAlign:"left",width:"100%",$nest:{"> svg:first-child":{flexShrink:0,marginRight:4},'&[aria-selected="true"]':{backgroundColor:"#FFFFFF",borderRight:"none",$nest:{"&::before":{backgroundColor:"#2E2E2E",bottom:0,content:'""',left:0,position:"absolute",top:0,width:3},"&:focus-visible::before":{width:6}}},'&:not([aria-selected="true"]):hover':{backgroundColor:"#E5E5E5",color:"#181818"},'&:not([aria-selected="true"]):active':{backgroundColor:"#C9C9C9",color:"#181818"},"&:focus-visible::after":{border:"2px solid "+b.FocusBlue,borderRadius:2,boxShadow:"inset 0 0 0 1px white",content:'""',inset:0,position:"absolute"}}}));l.SideTab=function(_){var k,F=_.children,M=_.icon,N=_.truncateLongText,P=h.__rest(_,["children","icon","truncateLongText"]),L=p.useState(void 0),H=L[0],I=L[1],U=P,z=N?{children:p.createElement(p.Fragment,null,M,p.createElement("span",{className:A},F)),onMouseEnter:function(T){var R,q,G=T.currentTarget.lastElementChild.clientWidth<T.currentTarget.lastElementChild.scrollWidth;I(G&&(R=T.currentTarget.textContent)!==null&&R!==void 0?R:void 0),(q=U.onMouseEnter)===null||q===void 0||q.call(U,T)},title:(k=U.title)!==null&&k!==void 0?k:H}:{};return p.createElement("button",h.__assign({},U,{children:p.createElement(p.Fragment,null,M,F),className:y.classes(w,U.className),role:"tab",tabIndex:-1},z))},l.SideTab.displayName="SideTab"},6514:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.SideTabsPane=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(3242),b=y.style({display:"flex"}),x=y.style({flexGrow:1,fontSize:12,overflow:"auto",padding:8});l.SideTabsPane=function(D){var S,A,w=D.children,_=D.initiallySelectedIndex,k=D.tablist,F=h.__rest(D,["children","initiallySelectedIndex","tablist"]),M=k.props.children,N=p.useState(_||0),P=N[0],L=N[1],H=p.useState(v.generateId())[0],I=(S=k.props.selectedIndex)!==null&&S!==void 0?S:P;return p.createElement("div",h.__assign({},F,{className:y.classes(b,F.className)}),p.cloneElement(k,{onTabChange:(A=k.props.onTabChange)!==null&&A!==void 0?A:L,selectedIndex:I,children:M.map((function(U,z){return p.cloneElement(U,{"aria-controls":H,id:H+"-"+z})}))}),p.createElement("div",{role:"tabpanel",id:H,"aria-labelledby":H+"-"+I,className:x},Array.isArray(w)?w[I]:w))}},926:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Spinner=l.SvgSpinnerAnimationName=l.UnderlayDimensionMultiplier=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(2429),b=d(5817),x=d(2765),D=function(k){return"data:image/svg+xml,"+encodeURIComponent(x.SpinnerSvg(k))},S="dark";l.UnderlayDimensionMultiplier=1.3;var A=y.style(h.__assign(h.__assign({},v.DisplayInlineFlex),{$nest:{"&.showUnderlay":{background:"rgba(255,255,255,.6)",borderRadius:"15%",boxSizing:"border-box",height:"calc(var(--spinner-dimension) * "+l.UnderlayDimensionMultiplier+")",lineHeight:"normal",width:"calc(var(--spinner-dimension) * "+l.UnderlayDimensionMultiplier+")"}}})),w={"100%":{transform:"rotate(360deg)"}};l.SvgSpinnerAnimationName=y.keyframes(w),y.cssRule("@-webkit-keyframes "+l.SvgSpinnerAnimationName,w);var _=y.style({"-webkit-animation":l.SvgSpinnerAnimationName+" 1s linear infinite",animation:l.SvgSpinnerAnimationName+" 1s linear infinite",cursor:"wait",margin:"auto",overflow:"hidden"});l.Spinner=p.forwardRef((function(k,F){var M,N=k.alt,P=k.className,L=k.color,H=k.dimension,I=k.presentation,U=k.showUnderlay,z=k.style,T=h.__rest(k,["alt","className","color","dimension","presentation","showUnderlay","style"]),R=b.useInitiallyHiddenElement();return p.createElement("div",h.__assign({role:I==="alert"?"status":void 0},T,{className:y.classes(P,A,{showUnderlay:U}),ref:F,style:h.__assign(h.__assign({},z),(M={},M["--spinner-dimension"]=H+"px",M))}),p.createElement("img",{"aria-hidden":I==="alert"?R:void 0,alt:N,className:_,src:D(L===S?x.DarkColor:x.LightColor),style:{height:H,width:H}}))})),l.Spinner.defaultProps={color:S,dimension:50,showUnderlay:!1},l.Spinner.displayName="Spinner"},2765:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.LightColor=l.DarkColor=l.SpinnerSvg=void 0,l.SpinnerSvg=function(d){return d===void 0&&(d=l.DarkColor),`
<svg viewBox="0 0 50 50" xmlns="http://www.w3.org/2000/svg">
  <style>
    #tail { fill: url(#fade) }
    #head { fill: `+d+` }
    stop { stop-color: `+d+` }
  </style>
  <linearGradient id="fade" x2="50" y1="25" y2="25" gradientUnits="userSpaceOnUse">
    <stop offset="0" stop-opacity="0"/>
    <stop offset=".15" stop-opacity=".04"/>
    <stop offset=".3" stop-opacity=".16"/>
    <stop offset=".45" stop-opacity=".36"/>
    <stop offset=".61" stop-opacity=".64"/>
    <stop offset=".76"/>
  </linearGradient>
  <path id="head" d="M0 25a25 25 0 1 0 50 0h-3.9a21.1 21.1 0 1 1-42.2 0" />
  <path id="tail" d="M50 25a25 25 0 0 0-50 0h3.9a21.1 21.1 0 1 1 42.2 0" />
</svg>`},l.DarkColor="rgb(97, 101, 112)",l.LightColor="rgba(255, 255, 255, 0.8)"},2191:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Stepper=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(1714),b=d(2429),x=d(6461),D=d(945),S=d(3242),A=d(6038),w=d(2070),_=d(5380),k=d(7478),F=d(7180),M=function(U){return U===void 0&&(U=v.IconFillColors.Rest),_.encodeSvgUrl('<svg width="12" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m5.727 8.658-3.272-4.09a.35.35 0 0 1 .273-.569h6.544a.35.35 0 0 1 .273.569l-3.272 4.09a.35.35 0 0 1-.546 0Z" fill="'+U+'"></path></svg>')},N=function(U){return U===void 0&&(U=v.IconFillColors.Rest),_.encodeSvgUrl('<svg width="12" height="12" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="m6.273 3.342 3.272 4.09a.35.35 0 0 1-.273.569H2.728a.35.35 0 0 1-.273-.569l3.272-4.09a.35.35 0 0 1 .546 0Z" fill="'+U+'"></path></svg>')},P=y.style({paddingRight:18,width:"100%"}),L=y.style(h.__assign(h.__assign(h.__assign({background:"transparent",boxSizing:"border-box"},b.DisplayInlineFlex),b.FlexDirectionColumn),{paddingLeft:1,position:"absolute",width:17,bottom:1,right:1,top:1,$nest:{"input:hover:not(input:focus) ~ & > button":{backgroundImage:N(v.IconFillColors.Hover)},"input:hover:not(input:focus) ~ & > button + button":{backgroundImage:M(v.IconFillColors.Hover)},".dark input:hover:not(input:focus) ~ & > button":{backgroundImage:N(v.InvertIconFillColors.Hover)},".dark input:hover:not(input:focus) ~ & > button + button":{backgroundImage:M(v.InvertIconFillColors.Hover)}}})),H=y.style({backgroundColor:"transparent",backgroundImage:N(v.IconFillColors.Rest),backgroundPosition:"center",backgroundRepeat:"no-repeat",boxSizing:"border-box",border:"none",borderRadius:1,height:"calc(50% - 0.5px)",marginLeft:-x.FocusIndicatorWidth,marginTop:2,width:"100%",padding:0,$nest:{"button + &":{backgroundImage:M(v.IconFillColors.Rest),marginBottom:2,marginTop:1},"&:enabled:hover":{backgroundColor:"#c9c9c9",backgroundImage:N(v.IconFillColors.Hover)},"&&:enabled:active":{backgroundColor:"#939393"},"button + &:enabled:hover":{backgroundImage:M(v.IconFillColors.Hover)},"&&&:disabled":{backgroundImage:N(v.IconFillColors.Disabled)},"button + &&&:disabled":{backgroundImage:M(v.IconFillColors.Disabled)},".dark &":{backgroundImage:N(v.InvertIconFillColors.Rest)},".dark button + &":{backgroundImage:M(v.InvertIconFillColors.Rest)},".dark &:enabled:hover":{backgroundImage:N(v.IconFillColors.Hover)},".dark button + &:enabled:hover":{backgroundImage:M(v.IconFillColors.Hover)},".dark &&&:disabled":{backgroundImage:N(v.InvertIconFillColors.Disabled)},".dark button + &&&:disabled":{backgroundImage:M(v.InvertIconFillColors.Disabled)}}}),I=(function(U){function z(){var T=U!==null&&U.apply(this,arguments)||this;return T.inputElement=null,T.inputId=S.generateId(),T.state={inputText:String(T.props.value)},T.handleButtonsFocus=function(R){T.inputElement.focus()},T.handleInputBlur=function(R){var q,G;T.inputElement.parentElement.contains(S.findBlurRelatedTarget(R))||(T.triggerChange(),delete T.keyHandlers.keyup.Escape,(G=(q=T.props).onBlur)===null||G===void 0||G.call(q,R))},T.handleInputChange=function(R){var q=R.target.value;(T.props.floatingPoint?/^[-+]?[0-9]*\.?[0-9]*$/:/^[-+]?[0-9]*$/).test(q)&&T.setState({inputText:q})},T.handleInputRef=function(R){T.inputElement=R,w.assignRef(T.props.inputRef,R)},T.pageDown=function(){T.stepDown(T.props.step*T.props.pageSteps)},T.pageUp=function(){T.stepUp(T.props.step*T.props.pageSteps)},T.revert=function(){T.triggerChange(T.props.value)},T.getCurrentValue=function(){var R=parseFloat(T.inputElement.value);return isNaN(R)?T.props.value:R},T.stepDown=function(R){R===void 0&&(R=T.props.step),T.triggerChange(A.snapUp(T.getCurrentValue(),R)-R)},T.stepUp=function(R){R===void 0&&(R=T.props.step),T.triggerChange(A.snapDown(T.getCurrentValue(),R)+R)},T.triggerChange=function(R){R===void 0&&(R=parseFloat(T.inputElement.value)),T.props.floatingPoint||(R=A.truncate(R));var q=A.clamp(isNaN(R)?T.props.value:R,T.props.min,T.props.max);T.setState({inputText:String(q)},(function(){var G,O;q!==T.props.value&&((O=(G=T.props).onValueChange)===null||O===void 0||O.call(G,q))}))},T.keyHandlers={keydown:Object.freeze({ArrowUp:T.stepUp,ArrowDown:T.stepDown,Home:function(){isFinite(T.props.min)&&T.triggerChange(T.props.min)},End:function(){isFinite(T.props.max)&&T.triggerChange(T.props.max)},Enter:T.triggerChange,Escape:function(){return T.keyHandlers.keyup.Escape=T.revert},PageUp:T.pageUp,PageDown:T.pageDown}),keyup:{}},T.handleKey=function(R){var q,G,O,Z,ee=R.key;T.keyHandlers[R.type][ee]&&!(R.altKey||R.ctrlKey||R.metaKey||R.shiftKey)?(T.keyHandlers[R.type][ee](),R.type==="keyup"&&delete T.keyHandlers[R.type][ee],R.preventDefault(),R.stopPropagation()):R.type==="keydown"?(G=(q=T.props).onKeyDown)===null||G===void 0||G.call(q,R):R.type==="keyup"&&((Z=(O=T.props).onKeyUp)===null||Z===void 0||Z.call(O,R))},T}return h.__extends(z,U),z.prototype.componentDidUpdate=function(T){T.value===this.props.value||isNaN(this.props.value)||this.setState({inputText:String(this.props.value)})},z.prototype.render=function(){var T=this.props,R=T.className,q=T.disabled,G=(T.floatingPoint,T.inputRef,T.label),O=T.min,Z=T.max,ee=(T.onValueChange,T.pageSteps,T.step,T.value),X=h.__rest(T,["className","disabled","floatingPoint","inputRef","label","min","max","onValueChange","pageSteps","step","value"]),Q=k.isNullOrUndefined(this.props.id)?this.inputId:this.props.id;return p.createElement("div",{className:y.classes(R,F.WrapperStyleName,{disabled:q})},p.createElement("label",{htmlFor:Q,className:y.classes(F.LabelStyleName)},G),p.createElement("div",{style:{minHeight:1,position:"relative"}},p.createElement("input",h.__assign({},X,{"aria-valuemin":D.conditional(isFinite(O),O),"aria-valuemax":D.conditional(isFinite(Z),Z),"aria-valuenow":this.state.inputText,className:y.classes(F.InputStyleName,P),disabled:q,id:Q,onBlur:this.handleInputBlur,onChange:this.handleInputChange,onKeyDown:this.handleKey,onKeyUp:this.handleKey,ref:this.handleInputRef,role:"spinbutton",type:"text",value:q&&isNaN(ee)?"":this.state.inputText})),p.createElement("div",{className:L,onFocus:this.handleButtonsFocus,tabIndex:-1},this.renderButton({downButton:!1,disabled:!!q,min:O,max:Z,value:ee}),this.renderButton({downButton:!0,disabled:!!q,min:O,max:Z,value:ee}))))},z.prototype.renderButton=function(T){var R=this,q=T.disabled||isNaN(T.value)||(T.downButton?T.value<=T.min:T.value>=T.max);return p.createElement("button",{"aria-hidden":!0,className:H,disabled:q,onClick:function(){return T.downButton?R.stepDown():R.stepUp()},tabIndex:-1})},z.defaultProps={min:-1/0,max:1/0,pageSteps:10,step:1},z})(p.Component);l.Stepper=I},4548:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Sticker=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(3297);l.Sticker=function(b){var x=b.children,D=b.className,S=b.darkBackground,A=b.stickerType,w=h.__rest(b,["children","className","darkBackground","stickerType"]),_=w.onClick?"button":"span";return p.createElement(_,h.__assign({},w,{className:y.classes(D,{darkBackground:S},v.StickerBaseStyle,v.StickerColorStyleNames[A]),disabled:_==="button"?w.disabled:void 0}),x)},l.Sticker.displayName="Sticker"},3297:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.StickerBaseStyle=l.StickerColorStyleNames=void 0;var h=d(7582),p=d(16),y=d(6461),v=d(6544);l.StickerColorStyleNames={blue:p.style({"--background-color":"#cfe9fe","--background-color-hover":"#90d0fe","--background-color-press":"#1ab9ff","--border-color":"#05628a","--border-color-dark":"#1ab9ff","--border-color-hover":"#084968","--border-color-press":"#023248"}),green:p.style({"--background-color":"#cdefc4","--background-color-hover":"#91db8b","--background-color-press":"#45c65a","--border-color":"#22683e","--border-color-dark":"#45c65a","--border-color-hover":"#194e31","--border-color-press":"#0e3522"}),neutral:p.style({"--background-color":"#e5e5e5","--background-color-hover":"#c9c9c9","--background-color-press":"#aeaeae","--border-color":"#5c5c5c","--border-color-dark":"#A9AFB3","--border-color-hover":"#444444","--border-color-press":"#2e2e2e"}),red:p.style({"--background-color":"#feded8","--background-color-hover":"#feb8Ab","--background-color-press":"#fe8f7d","--border-color":"#ba0517","--border-color-dark":"#fe8f7D","--border-color-hover":"#8e030f","--border-color-press":"#640103"}),teal:p.style({"--background-color":"#acf3e4","--background-color-hover":"#04e1cb","--background-color-press":"#01c3b3","--border-color":"#056764","--border-color-dark":"#01c3b3","--border-color-hover":"#024d4c","--border-color-press":"#023434"}),violet:p.style({"--background-color":"#f2defe","--background-color-hover":"#e5b9fe","--background-color-press":"#d892fe","--border-color":"#9602cf","--border-color-dark":"#d892fe","--border-color-hover":"#730394","--border-color-press":"#620066"}),yellow:p.style({"--background-color":"#f9e3b6","--background-color-hover":"#fcc003","--background-color-press":"#e4a201","--border-color":"#ac4b02","--border-color-dark":"#e4a201","--border-color-hover":"#3e2b02","--border-color-press":"#4f2100"})},l.StickerBaseStyle=p.style({alignItems:"center",border:"1px solid transparent",borderRadius:100,boxSizing:"border-box",color:"var(--border-color)",display:"inline-flex",fontFamily:"inherit",fontSize:12,fontWeight:"bold",height:24,paddingLeft:7,paddingRight:7,whiteSpace:"nowrap",backgroundColor:"var(--background-color)",$nest:{"&:focus-visible":h.__assign({},y.DefaultFocusIndicator({inset:!0})),"&:focus-visible.darkBackground":h.__assign({},y.DefaultFocusIndicator({invert:!0,inset:!0})),"button&":v.PreventUserSelect,"button&:disabled":{backgroundColor:"#c9c9c9",color:"#939393"},"button&:enabled":{borderColor:"var(--border-color)",color:"var(--border-color)"},"button&:enabled.darkBackground":{borderColor:"var(--border-color-dark)"},"button&:enabled:hover":{backgroundColor:"var(--background-color-hover)",color:"var(--border-color-hover)"},"button&:enabled:active":{backgroundColor:"var(--background-color-press)",color:"var(--border-color-press)"}}})},530:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Tab=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(2429),b=d(3242),x=d(9104),D=(function(S){function A(){var w=S!==null&&S.apply(this,arguments)||this;return w.state={title:void 0},w.contentRef=p.createRef(),w.handleMouseEnter=function(){var _=b.isElementOverflownX(w.contentRef.current)&&w.contentRef.current.textContent||void 0;_!==w.state.title&&w.setState({title:_})},w}return h.__extends(A,S),A.prototype.render=function(){var w=this.props,_=(w.flexPercent,w.index,w.isSelected,h.__rest(w,["flexPercent","index","isSelected"])),k=this.props.flexPercent?y.style(v.Flex("1 0 "+this.props.flexPercent+"%")):void 0;return p.createElement("button",h.__assign({},_,{"aria-selected":this.props.isSelected,className:y.classes(x.TabButtonClassName,k),"data-tab-index":this.props.index,onMouseEnter:this.handleMouseEnter,role:"tab",title:this.props.title||this.state.title}),p.createElement("div",{className:x.TabContentContainerClassName},p.createElement("div",{className:x.TabContentClassName,ref:this.contentRef},this.props.children)))},A})(p.PureComponent);l.Tab=D},5025:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.Tabs=void 0;var h=d(7582),p=d(4098),y=d(3242),v=d(6038),b=d(530),x=d(9104),D=function(A,w){var _=A.closest('[role="tab"][data-tab-index]');return _?parseInt(_.getAttribute("data-tab-index"),10):w},S=(function(A){function w(){var _=A!==null&&A.apply(this,arguments)||this;return _.tablistRef=p.createRef(),_.id=y.generateId(),_.state={focusedIndex:-1},_.handleBlur=function(k){k.currentTarget.contains(y.findBlurRelatedTarget(k))||_.setFocusedIndex(-1)},_.handleClick=function(k){_.triggerTabChange(D(k.target,_.props.selectedTabIndex))},_.handleKeyDown=function(k){var F=D(k.target,NaN);if(!isNaN(F)){var M=(function(){var P=_.props.tabs.length;switch(k.key){case"ArrowRight":return(F+1)%P;case"ArrowLeft":return(P+F-1)%P;case"Home":return 0;case"End":return P-1;case"Enter":case" ":return F;default:return-1}})();if(!(M<0)){k.preventDefault(),k.stopPropagation();var N=_.props.activation==="automatic"||F===M?function(){return _.triggerTabChange(M)}:void 0;_.setFocusedIndex(M,N)}}},_.handleFocus=function(k){_.setFocusedIndex(D(k.target,_.state.focusedIndex))},_.setFocusedIndex=function(k,F){F===void 0&&(F=function(){return null}),_.state.focusedIndex===k?F():_.setState({focusedIndex:k},F)},_}return h.__extends(w,A),w.prototype.componentDidUpdate=function(_,k){var F,M,N=this.state.focusedIndex;N>-1&&N!==k.focusedIndex&&((M=(F=this.tablistRef.current)===null||F===void 0?void 0:F.querySelectorAll('[role="tab"]').item(N))===null||M===void 0||M.focus())},w.prototype.triggerTabChange=function(_){var k,F;_!==this.props.selectedTabIndex&&((F=(k=this.props).onTabChange)===null||F===void 0||F.call(k,_))},w.prototype.buildTabId=function(_){return this.id+"-tab"+(_+1)},w.prototype.buildTabPanelId=function(_){return this.id+"-tabpanel"+(_+1)},w.prototype.renderTabList=function(_,k,F){var M=this,N=this.state.focusedIndex>-1?this.state.focusedIndex:this.props.selectedTabIndex,P=100/k.length,L=k.map((function(H,I){return p.createElement(b.Tab,{"aria-controls":M.buildTabPanelId(I),children:H.content,flexPercent:F===void 0||F==="justified"?P:void 0,id:M.buildTabId(I),index:I,isSelected:I===_,key:I,title:H.title,tabIndex:I===N?0:-1})}));return p.createElement("div",{className:x.TabListClassName,children:L,onBlur:this.handleBlur,onClick:this.handleClick,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,ref:this.tablistRef,role:"tablist"})},w.prototype.renderTabPanel=function(_,k){return p.createElement("div",{"aria-labelledby":this.buildTabId(_),className:x.TabPanelOuterContainerClassName,id:this.buildTabPanelId(_),role:"tabpanel"},k)},w.prototype.render=function(){var _=this.props,k=(_.activation,_.alignment),F=_.children,M=(_.onTabChange,_.selectedTabIndex),N=_.tabs,P=h.__rest(_,["activation","alignment","children","onTabChange","selectedTabIndex","tabs"]),L=v.clamp(M,0,N.length-1);return p.createElement("div",h.__assign({},P),this.renderTabList(L,N,k),this.renderTabPanel(L,F))},w.defaultProps={activation:"automatic",alignment:"justified",selectedTabIndex:0,tabs:[]},w})(p.PureComponent);l.Tabs=S},9104:function(c,l,d){var h;Object.defineProperty(l,"__esModule",{value:!0}),l.TabPanelOuterContainerClassName=l.TabContentContainerClassName=l.TabButtonClassName=l.TabContentClassName=l.TabListClassName=void 0;var p=d(7582),y=d(16),v=d(2429),b=d(6461),x=d(6544),D=d(9639),S=b.FocusIndicatorWidth+b.FocusIndicatorInsetGap;l.TabListClassName=y.style(p.__assign(p.__assign({},v.DisplayFlex),{fontSize:12,height:42}),x.PreventUserSelect),l.TabContentClassName=y.style(p.__assign(p.__assign({},D.TextEllipsis),{display:"block"})),l.TabButtonClassName=y.style({backgroundColor:"transparent",border:"none",boxSizing:"border-box",display:"inline-block",fontFamily:"inherit",height:"100%",overflow:"hidden",padding:0,position:"relative",$nest:(h={"&::after":{backgroundColor:"#c9c9c9",content:'""',height:3,position:"absolute",bottom:0,left:0,right:0},"&:hover":{backgroundColor:"#e5e5e5"},"&:hover::after":{backgroundColor:"#444"},'&[aria-selected="true"]::after':{backgroundColor:"#5c5c5c"},"&:focus-visible":p.__assign(p.__assign({},b.DefaultFocusIndicator()),{borderRadius:2,height:42+S})},h["&:focus-visible ."+l.TabContentClassName]={marginTop:-S},h["&:focus-visible::after"]={bottom:S,left:S,right:S},h["&:active"]={backgroundColor:"#c9c9c9"},h["&:active::after"]={backgroundColor:"#2e2e2e"},h)}),l.TabContentContainerClassName=y.style(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign({},v.AlignItemsCenter),{color:"#2e2e2e"}),v.DisplayFlex),{height:"100%"}),v.JustifyContentCenter),{paddingLeft:24,paddingRight:24}),D.TextEllipsis),l.TabPanelOuterContainerClassName=y.style({overflowY:"auto",padding:18,position:"relative","-webkit-overflow-scrolling":"touch"})},8371:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.TextArea=void 0;var h=d(7582),p=d(4098),y=d(2070),v=d(7356),b=d(7180);l.TextArea=p.forwardRef((function(x,D){var S,A=x.autoHeight,w=x.className,_=x.label,k=x.labelId,F=x.id,M=x.message,N=x.valid,P=h.__rest(x,["autoHeight","className","label","labelId","id","message","valid"]),L=(S=P.style)===null||S===void 0?void 0:S.height,H=p.useState(null),I=H[0],U=H[1],z=p.useCallback((function(T){U(T),y.assignRef(D,T)}),[D]);return p.useLayoutEffect((function(){I&&(A?(I.style.height="inherit",I.style.height=I.scrollHeight+(I.offsetHeight-I.clientHeight)+"px"):I.style.height=typeof L=="number"?L+"px":L||"")}),[A,I,L,P.value]),p.createElement(v.LabeledField,h.__assign({},{className:w,disabled:P.disabled,id:F,label:_,labelId:k,message:M,valid:N}),(function(T){return p.createElement("textarea",h.__assign({},T,P,{className:b.InputStyleName,ref:z}))}))})),l.TextArea.displayName="TextArea"},2363:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.TextField=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(1714),b=d(3242),x=d(5380),D=d(7356),S=d(8660),A=d(7180),w=function(M){return M===void 0&&(M=v.IconFillColors.Rest),x.encodeSvgUrl('<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12"><path fill="'+M+'" d="M7.5 0C5.015 0 3 2.015 3 4.5S5.015 9 7.5 9 12 6.985 12 4.5 9.985 0 7.5 0zm0 8C5.567 8 4 6.433 4 4.5S5.567 1 7.5 1 11 2.567 11 4.5 9.433 8 7.5 8z"/><path fill="'+M+'" d="M5.026 7.858l-3.96 3.96c-.243.243-.641.243-.884 0s-.243-.641 0-.884l3.96-3.96c.243-.243.641-.243.884 0s.243.641 0 .884z"/></svg>')},_=y.style({$nest:{".line &&&":{borderLeftColor:"transparent",borderRightColor:"transparent",borderTopColor:"transparent",borderBottomLeftRadius:0,borderBottomRightRadius:0},".line &:disabled":{borderColor:"transparent transparent "+A.BorderColors.Disabled+" !important"},".line.dark &:disabled":{borderColor:"transparent transparent "+A.InvertBorderColors.Disabled+" !important"},".search &":{background:w()+" "+(A.IconSize-12)/2+"px center no-repeat border-box",paddingLeft:A.IconSize-A.BorderWidth+4,$nest:{"&:hover:enabled:not(:focus)":{backgroundImage:w(v.IconFillColors.Hover)},"&:focus":{backgroundImage:w(v.IconFillColors.Rest)},"&:disabled":{backgroundImage:w(v.IconFillColors.Disabled)}}},".dark.search &":{backgroundImage:w(v.InvertIconFillColors.Rest),$nest:{"&:hover:enabled:not(:focus)":{backgroundImage:w(v.InvertIconFillColors.Hover)},"&:focus":{backgroundImage:w(v.InvertIconFillColors.Rest)},"&:disabled":{backgroundImage:w(v.InvertIconFillColors.Disabled)}}}}}),k=y.style({paddingRight:A.SidePadding+A.IconSize}),F=y.style({minHeight:1,position:"relative"});l.TextField=p.forwardRef((function(M,N){var P=M.className,L=M.kind,H=M.id,I=M.label,U=M.labelId,z=M.message,T=M.onClear,R=M.valid,q=h.__rest(M,["className","kind","id","label","labelId","message","onClear","valid"]),G=q.disabled,O=q.value,Z=!!T&&!!O&&!G,ee=p.useRef(!1),X=p.useRef(null),Q=p.useRef(!1),ne=function(j){Z&&j.key==="Escape"&&!Q.current&&(j.preventDefault(),j.stopPropagation(),j.repeat||j.type!=="keydown"?ee.current&&j.type==="keyup"&&(T(),ee.current=!1):ee.current=!0)},ce=function(j){ee.current=!1,X.current&&b.findBlurRelatedTarget(j)===X.current&&j.stopPropagation()},Fe=function(j){return Q.current=j.type!=="compositionend"},Me=function(j){return j.currentTarget.previousElementSibling.focus()};return p.createElement(D.LabeledField,h.__assign({},{className:y.classes(P,L),disabled:G,id:H,label:I,labelId:U,message:z,valid:R}),(function(j){var W;return p.createElement("div",{className:F,onBlurCapture:ce,onCompositionEndCapture:Fe,onCompositionStartCapture:Fe,onKeyDown:ne,onKeyUp:ne},p.createElement("input",h.__assign({type:"text"},j,q,{ref:N,className:y.classes(A.InputStyleName,_,(W={},W[k]=!!T,W))})),Z&&p.createElement(S.TextFieldClearButton,{ref:X,onClick:T,onFocus:Me}))}))})),l.TextField.defaultProps={kind:"outline"},l.TextField.displayName="TextField"},8660:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.TextFieldClearButton=l.ClassName=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(1714),b=d(2429),x=d(6461),D=d(5380),S=d(7180),A=function(_){return _===void 0&&(_=v.IconFillColors.Rest),D.encodeSvgUrl('<svg xmlns="http://www.w3.org/2000/svg" width="8" height="8"><path fill="'+_+'" d="M4.78873239 4L7.83098592.95774648c.22535211-.22535211.22535211-.56338028 0-.7887324-.22535212-.2253521-.56338029-.2253521-.7887324 0L4 3.21126762.95774648.16901408c-.22535211-.2253521-.56338028-.2253521-.7887324 0-.2253521.22535212-.2253521.56338029 0 .7887324L3.21126762 4 .16901408 7.04225352c-.2253521.22535211-.2253521.56338028 0 .7887324.22535212.22535211.56338029.22535211.7887324 0L4 4.78873239l3.04225352 3.04225353c.22535211.22535211.56338028.22535211.7887324 0 .22535211-.22535212.22535211-.56338029 0-.7887324L4.78873239 4z"/></svg>')},w=y.style(h.__assign(h.__assign(h.__assign({display:"none",position:"absolute",top:S.BorderWidth+x.FocusIndicatorWidth,right:S.BorderWidth+x.FocusIndicatorWidth,width:S.IconSize-S.BorderWidth-2*x.FocusIndicatorWidth,bottom:S.BorderWidth+x.FocusIndicatorWidth},b.AlignItemsCenter),b.JustifyContentCenter),{$nest:{"input:focus ~ &, input:hover ~ &, &:hover, &:active":h.__assign({},b.DisplayInlineFlex),"&:before":{content:A(v.IconFillColors.Rest),display:"inline-block",height:8,lineHeight:"8px",width:8},"&:hover":{backgroundColor:"#c9c9c9"},"&:active":{backgroundColor:"#aeaeae"},"&:hover:before":{content:A(v.IconFillColors.Hover)},".dark &:before":{content:A(v.InvertIconFillColors.Rest)},".dark &:hover":{backgroundColor:"#c9c9c9"},".dark &:active":{backgroundColor:"#aeaeae"},".dark &:hover:before":{content:A(v.InvertIconFillColors.Hover)},".dark input:hover:not(input:focus) ~ &:before":{content:A(v.InvertIconFillColors.Hover)}}}));l.ClassName="clearButton",l.TextFieldClearButton=p.forwardRef((function(_,k){return p.createElement("div",h.__assign({},_,{ref:k,className:y.classes(l.ClassName,w),tabIndex:-1}))})),l.TextFieldClearButton.displayName="TextFieldClearButton"},7180:function(c,l,d){var h;Object.defineProperty(l,"__esModule",{value:!0}),l.InputStyleName=l.LabelStyleName=l.WrapperStyleName=l.InvertBorderColors=l.BorderColors=l.InvertBackgroundColors=l.BackgroundColors=l.SidePadding=l.LabelHeight=l.IconSize=l.FontSize=l.BorderWidth=l.FieldHeight=void 0;var p=d(7582),y=d(16),v=d(1714),b=d(2429),x=d(6461),D=d(1979);l.FieldHeight=24,l.BorderWidth=1,l.FontSize=12,l.IconSize=24,l.LabelHeight=21,l.SidePadding=8-l.BorderWidth,l.BackgroundColors={Rest:"transparent",Hover:"#e5e5e5"},l.InvertBackgroundColors={Rest:"transparent",Hover:"#c9c9c9"},l.BorderColors={Rest:"#747474",Disabled:"#c9c9c9",Hover:"#747474",Error:"#ba0517",Valid:"#22683e"},l.InvertBorderColors={Rest:"#aeaeae",Hover:"#c9c9c9",Disabled:"#747474",Error:"#feb8ab",Valid:"#91db8b"},l.WrapperStyleName=y.style(p.__assign(p.__assign(p.__assign({color:v.TextColors.Primary},b.DisplayInlineFlex),b.FlexDirectionColumn),{fontSize:l.FontSize,position:"relative",$nest:{"&.dark":{color:v.InvertTextColors.Primary},"&.disabled, &.disabled *":{color:v.TextColors.Disabled+" !important"},"&.dark.disabled, &.dark.disabled *":{color:v.InvertTextColors.Disabled+" !important"}}})),l.LabelStyleName=y.style({display:"inline-block",marginRight:"auto",lineHeight:l.LabelHeight+"px",$nest:{"&:empty":{display:"none"}}});var S=D.isMSFT?D.isEdge?":-ms-input-placeholder":"-ms-input-placeholder":":placeholder";l.InputStyleName=y.style({backgroundColor:l.BackgroundColors.Rest,border:l.BorderWidth+"px solid "+l.BorderColors.Rest,borderRadius:1,boxSizing:"border-box",color:v.TextColors.Primary,fontFamily:"inherit",fontSize:l.FontSize,padding:"0 "+l.SidePadding+"px","-webkit-appearance":"none",$nest:(h={},h["&:"+S]={$unique:!0,color:v.TextColors.Placeholder,letterSpacing:"normal"},h["&:disabled:"+S]={$unique:!0,color:v.TextColors.Disabled+" !important"},h["&::-ms-clear"]={$unique:!0,display:"none"},h["&:hover:enabled"]={backgroundColor:l.BackgroundColors.Hover,borderColor:l.BorderColors.Hover},h["&&&&:focus"]=p.__assign(p.__assign({},x.DefaultFocusIndicator()),{backgroundColor:l.BackgroundColors.Rest}),h['&&&[aria-invalid="true"]']={borderColor:l.BorderColors.Error,$nest:{"&:focus":x.ErrorFocusIndicator()}},h["&:disabled"]={backgroundColor:["transparent !important","rgba(255, 255, 255, 0) !important"],borderColor:l.BorderColors.Disabled+" !important",color:v.TextColors.Disabled+" !important"},h[".dark &"]={borderColor:l.InvertBorderColors.Rest,color:v.InvertTextColors.Primary},h[".dark &:"+S]={$unique:!0,color:v.InvertTextColors.Placeholder},h[".dark &:disabled:"+S]={$unique:!0,color:v.InvertTextColors.Disabled+" !important"},h[".dark &:hover:enabled"]={backgroundColor:l.InvertBackgroundColors.Hover,borderColor:l.InvertBorderColors.Hover,color:v.InvertTextColors.Hover},h[".dark &:hover:enabled:"+S]={$unique:!0,color:v.InvertTextColors.PlaceholderHover},h[".dark &:hover:enabled:focus:"+S]={$unique:!0,color:v.InvertTextColors.Placeholder},h[".dark &&&&:focus"]=p.__assign(p.__assign({},x.DefaultFocusIndicator({invert:!0})),{color:v.InvertTextColors.Primary}),h['.dark &&&[aria-invalid="true"]']={borderColor:l.InvertBorderColors.Error,$nest:{"&:focus":x.ErrorFocusIndicator({invert:!0})}},h[".dark &:disabled"]={borderColor:l.InvertBorderColors.Disabled+" !important",color:v.InvertTextColors.Disabled+" !important"},h["input&"]={height:l.FieldHeight},h["textarea&"]={display:"block",letterSpacing:.2,lineHeight:1.5*l.FontSize+"px",paddingBottom:6,paddingTop:6},h)})},9831:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.TextFieldGroup=void 0;var h=d(7582),p=d(4098),y=d(16),v=y.style({alignItems:"flex-end",display:"inline-flex",$nest:{"&>:first-child input":{borderTopRightRadius:0,borderBottomRightRadius:0,borderTopLeftRadius:2,borderBottomLeftRadius:2},"&&>button":{borderBottomLeftRadius:0,borderTopLeftRadius:0,marginLeft:"1px !important",minWidth:0,padding:"0 8px"},"&>button:not(:last-child)":{borderTopRightRadius:0,borderBottomRightRadius:0}}});l.TextFieldGroup=function(b){var x=b.button,D=b.children,S=b.className,A=b.textField,w=h.__rest(b,["button","children","className","textField"]);return p.createElement("div",h.__assign({},w,{className:y.classes(S,v)}),A,x,D)},l.TextFieldGroup.displayName="TextFieldGroup"},6663:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.TextLink=l.TextLinkClassNames=void 0;var h=d(7582),p=d(4098),y=d(16),v=d(6461),b="#023248",x="#084968",D="#CFE9FE",S="#1AB9FF",A="#90D0FE",w={color:"#05628A",fontWeight:"bold",letterSpacing:.2,padding:1,textDecoration:"underline",$nest:{"&:hover":{textDecoration:"underline"},"&&:active":{textDecoration:"none"}}};l.TextLinkClassNames={standalone:y.style(w,{textDecoration:"none",$nest:{"&:hover":{color:x},"&:focus-visible":v.DefaultFocusIndicator({outlineOffset:1}),"&&:active":{color:b}}}),standard:y.style(w,{$nest:{"&:hover":{color:x},"&:focus-visible":v.DefaultFocusIndicator({outlineOffset:1}),"&&:active":{color:b}}}),lightweight:y.style(w,{color:"#5C5C5C",$nest:{"&:hover":{color:"#444444"},"&:focus-visible":v.DefaultFocusIndicator({outlineOffset:1}),"&&:active":{color:"#2E2E2E"}}}),"standalone-dark":y.style(w,{textDecoration:"none",color:D,$nest:{"&:hover":{color:A},"&:focus-visible":v.DefaultFocusIndicator({invert:!0,outlineOffset:1}),"&&:active":{color:S}}}),"standard-dark":y.style(w,{color:D,$nest:{"&:hover":{color:A},"&:focus-visible":v.DefaultFocusIndicator({invert:!0,outlineOffset:1}),"&&:active":{color:S}}}),"lightweight-dark":y.style(w,{color:"#E5E5E5",$nest:{"&:hover":{color:"#C9C9C9"},"&:focus-visible":v.DefaultFocusIndicator({invert:!0,outlineOffset:1}),"&&:active":{color:"#AEAEAE"}}})},l.TextLinkClassNames.lowEmphasis=l.TextLinkClassNames.lightweight,l.TextLinkClassNames["lowEmphasis-dark"]=l.TextLinkClassNames["lightweight-dark"],Object.freeze(l.TextLinkClassNames),l.TextLink=p.forwardRef((function(_,k){var F=_.children,M=_.className,N=_.kind,P=h.__rest(_,["children","className","kind"]);return p.createElement("a",h.__assign({},P,{ref:k,className:y.classes(l.TextLinkClassNames[N],M)}),F)})),l.TextLink.defaultProps={kind:"standalone"},l.TextLink.displayName="TextLink"},3187:function(c,l,d){var h;Object.defineProperty(l,"__esModule",{value:!0}),l.ToggleSwitch=void 0;var p=d(7582),y=d(4098),v=d(16),b=d(1714),x=d(2429),D=d(6461),S=d(6544),A=d(5380),w=function(M){return M===void 0&&(M=b.IconFillColors.Rest),'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path fill="'+M+'" d="M10,0 C15.5228475,0 20,4.4771525 20,10 C20,15.5228475 15.5228475,20 10,20 C4.4771525,20 0,15.5228475 0,10 C0,4.4771525 4.4771525,0 10,0 Z M13,6 L10,9 L7,6 L6,7 L9,10 L6,13 L7,14 L10,11.0015085 L13,14 L14.0036619,13 L10.9974444,10 L14.0036619,7 L13,6 Z"/></svg>'},_=function(M){return M===void 0&&(M="#eaf5fe"),'<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path fill="'+M+'" d="M10,0 C15.5228475,0 20,4.4771525 20,10 C20,15.5228475 15.5228475,20 10,20 C4.4771525,20 0,15.5228475 0,10 C0,4.4771525 4.4771525,0 10,0 Z M14.3146424,5 L9.86969436,13.0676254 L6.15061365,9.59520316 L5,10.7019283 C6.6498856,12.1664898 8.2997712,13.6310513 9.9496568,15.0956128 C10.0673911,15.181555 10.3541746,15.3945402 10.7451327,14.7635159 L10.7451327,14.7635159 L15.7083493,5.76214712 L14.3146424,5 Z"/></svg>'},k=v.style(p.__assign(p.__assign(p.__assign(p.__assign(p.__assign({},x.AlignItemsCenter),x.DisplayFlex),x.JustifyContent("flex-end")),S.PreventUserSelect),{color:b.TextColors.Primary,flexWrap:"wrap",fontSize:12,lineHeight:"24px",pointerEvents:"none",$nest:{"&.disabled":{color:b.TextColors.Disabled+" !important"},"& > :first-child":{textAlign:"right"},"& > :last-child":p.__assign({},x.DisplayFlex),"&.left > :last-child":p.__assign(p.__assign({},x.FlexGrow1),x.JustifyContent("flex-end"))}})),F=v.style(p.__assign(p.__assign({},x.FlexShrink0),{"-webkit-appearance":"none",appearance:"none",border:"1px solid #666",borderRadius:12,boxSizing:"border-box",height:24,margin:0,marginLeft:4,padding:0,pointerEvents:"auto",width:48,$nest:(h={},h["&&&:focus-visible"]=D.DefaultFocusIndicator({outlineOffset:1}),h["&:disabled"]={backgroundColor:"transparent !important",borderColor:"#c9c9c9 !important"},h["&:disabled:checked"]={backgroundColor:"#c9c9c9 !important",borderColor:"#c9c9c9 !important"},h["&:hover"]={backgroundColor:b.SelectorColors.BackgroundHover},h["&&:active"]={backgroundColor:b.SelectorColors.BackgroundActive,borderColor:b.SelectorColors.Border},h["&:checked"]={backgroundColor:"#05628a",borderColor:"#05628a",color:b.TextColors.Primary},h["&:checked:hover"]={backgroundColor:"#023248",borderColor:"#023248"},h["&&:checked:active"]={backgroundColor:"#001a28",borderColor:"#001a28"},h["&:before"]={borderRadius:"50%",content:A.encodeSvgUrl(w()),display:"inline-block",height:20,left:1,position:"relative",top:1,transition:"left 100ms",width:20},h["&:not(:checked):not(:indeterminate):enabled:active:before"]={content:A.encodeSvgUrl(w(b.IconFillColors.Hover))},h["&:not(:checked):disabled:before"]={content:A.encodeSvgUrl(w(b.IconFillColors.Disabled))},h["&:checked:before"]={content:A.encodeSvgUrl(_("#eaf5fe")),left:25},h["&:checked:disabled:before"]={content:A.encodeSvgUrl(_("#939393"))},h)}));l.ToggleSwitch=y.forwardRef((function(M,N){var P=M.children,L=M.className,H=M.style,I=M.textAlign,U=p.__rest(M,["children","className","style","textAlign"]);return y.createElement("label",{className:v.classes(L,k,U.disabled&&"disabled",I),style:H},y.createElement("span",null,P),y.createElement("span",null,y.createElement("input",p.__assign({},U,{className:F,ref:N,role:"switch",type:"checkbox"}))))})),l.ToggleSwitch.displayName="ToggleSwitch",l.ToggleSwitch.defaultProps={textAlign:"left"}},1714:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Opacity=l.InvertIconFillColors=l.InvertTextColors=l.IconFillColors=l.SelectorColors=l.TextColors=void 0,l.TextColors={Primary:"#2e2e2e",Placeholder:"#5c5c5c",Disabled:"#c9c9c9",Error:"#ba0517",Valid:"#22683e"},l.SelectorColors={BackgroundActive:"#aeaeae",BackgroundHover:"#c9c9c9",Border:"#2e2e2e",OpacityDisabled:.26},l.IconFillColors={Rest:"#2e2e2e",Hover:"#2e2e2e",Disabled:"#c9c9c9",Error:"#ba0517",Valid:"#22683e"},l.InvertTextColors={Primary:"#f3f3f3",Hover:"#242424",Placeholder:"#c9c9c9",PlaceholderHover:"#444",Netural:"rgba(255, 255, 255, 0.56)",Disabled:"#747474",Error:"#feb8ab",Valid:"#91db8b"},l.InvertIconFillColors={Rest:"#f3f3f3",Hover:"#242424",Disabled:"#747474",Error:"#feb8ab",Valid:"#91db8b"},l.Opacity={Disabled:.35}},2429:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.Flex=l.FlexShrink0=l.FlexGrow1=l.FlexDirectionColumnReverse=l.FlexDirectionColumn=l.DisplayFlex=l.DisplayInlineFlex=l.JustifyContentCenter=l.JustifyContent=l.AlignItemsCenter=void 0,l.AlignItemsCenter={"-webkit-align-items":"center",alignItems:"center"},l.JustifyContent=function(d){return{"-webkit-justify-content":d,justifyContent:d}},l.JustifyContentCenter=l.JustifyContent("center"),l.DisplayInlineFlex={display:["-webkit-inline-flex","inline-flex"]},l.DisplayFlex={display:["-webkit-flex","flex"]},l.FlexDirectionColumn={"-webkit-flex-direction":"column",flexDirection:"column"},l.FlexDirectionColumnReverse={"-webkit-flex-direction":"column-reverse",flexDirection:"column-reverse"},l.FlexGrow1={"-webkit-flex-grow":1,flexGrow:1},l.FlexShrink0={"-webkit-flex-shrink":0,flexShrink:0},l.Flex=function(d){return{"-webkit-flex":d,flex:d}}},6461:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.ValidFocusIndicator=l.ErrorFocusIndicator=l.DefaultFocusIndicator=l.FocusIndicatorInsetGap=l.FocusIndicatorWidth=l.InvertFocusBlue=l.InvertValidGreen=l.InvertErrorRed=l.InsetBorderDark=l.InsetBorderLight=l.FocusBlue=l.ValidGreen=l.ErrorRed=void 0;var h=d(7582);l.ErrorRed="#ba0517",l.ValidGreen="#22683e",l.FocusBlue="#0b5cab",l.InsetBorderLight="white",l.InsetBorderDark="#242424",l.InvertErrorRed="#feb8ab",l.InvertValidGreen="#91db8b",l.InvertFocusBlue="#aacbff",l.FocusIndicatorWidth=2,l.FocusIndicatorInsetGap=1;var p=function(y,v){return y===void 0&&(y=l.FocusBlue),v===void 0&&(v=-2),Object.freeze({outline:l.FocusIndicatorWidth+"px solid "+y,outlineOffset:v,$nest:{"&::-moz-focus-inner":{$unique:!0,border:"none"}}})};l.DefaultFocusIndicator=function(y){return h.__assign(h.__assign({},p(y?.invert?l.InvertFocusBlue:l.FocusBlue,y?.outlineOffset)),y?.inset&&((v=y?.invert?l.InsetBorderDark:l.InsetBorderLight)===void 0&&(v=l.InsetBorderLight),Object.freeze({boxShadow:"inset 0 0 0 "+(l.FocusIndicatorInsetGap+1)+"px "+v})));var v},l.ErrorFocusIndicator=function(y){return p(y?.invert?l.InvertErrorRed:l.ErrorRed,y?.outlineOffset)},l.ValidFocusIndicator=function(y){return p(y?.invert?l.InvertValidGreen:l.ValidGreen,y?.outlineOffset)}},6544:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.PreventUserSelect=void 0,l.PreventUserSelect={userSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",MozUserSelect:"none",cursor:"default"}},9639:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.TextEllipsis=void 0,l.TextEllipsis={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},5817:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.useInitiallyHiddenElement=void 0;var h=d(4098);function p(){var y=h.useState(!1),v=y[0],b=y[1];return h.useEffect((function(){var x=window.setTimeout((function(){return b(!0)}),p.delayMs);return function(){return window.clearTimeout(x)}}),[]),!v}l.useInitiallyHiddenElement=p,p.delayMs=10},1979:function(c,l){function d(h){try{return h.test(navigator.userAgent)}catch{return!1}}Object.defineProperty(l,"__esModule",{value:!0}),l.isMSFT=l.isEdge=l.isIE=void 0,l.isIE=d(/Trident/),l.isEdge=d(/Edge\//),l.isMSFT=l.isIE||l.isEdge},945:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.conditional=void 0,l.conditional=function(d,h){return d?h:void 0}},3242:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.findBlurRelatedTarget=l.isElementOverflownX=l.generateId=void 0;var h=d(1979),p=Date.now();l.generateId=function(){return"tableau-ui-"+p++},l.isElementOverflownX=function(y){return!!y&&y.clientWidth<y.scrollWidth},l.findBlurRelatedTarget=function(y){return h.isIE?y.relatedTarget||document.activeElement:y.relatedTarget}},9358:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.HeightAnimator=l.AnimationDuration=void 0;var h=d(4098),p=d(3125),y=d(4320);l.AnimationDuration=200,l.HeightAnimator=function(v){var b=h.useState(v.initialHeight||0),x=b[0],D=b[1],S=function(){v.height===void 0&&D("auto")},A=function(){D(0)},w=h.Children.toArray(v.children),_=w.slice(0,1);return w.length>1&&console.warn("Multiple children were provided, but only the first child will be rendered"),h.useEffect((function(){v.height!==void 0&&v.height!==x&&D(v.height)}),[v.height,x]),h.createElement(y.TransitionGroup,{childFactory:function(k){return h.cloneElement(k,{height:x})}},_.map((function(k,F){return h.createElement(y.Transition,{appear:!0,key:F,onEnter:S,onExit:A,onExited:v.onExitAnimationComplete,timeout:l.AnimationDuration},h.createElement(p.default,{animateOpacity:!0,duration:l.AnimationDuration,height:x},k))})))}},6038:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.truncate=l.snapDown=l.snapUp=l.clamp=void 0,l.clamp=function(d,h,p){return p<h?NaN:Math.min(Math.max(d,h),p)},l.snapUp=function(d,h){h===void 0&&(h=1);var p=d/h;return Math.abs(Math.floor(p)-p)<1e-11&&(p=Math.floor(p)),Math.ceil(p)*h},l.snapDown=function(d,h){h===void 0&&(h=1);var p=d/h;return Math.abs(Math.ceil(p)-p)<1e-11&&(p=Math.ceil(p)),Math.floor(p)*h},l.truncate=function(d){return d>0?Math.floor(d):Math.ceil(d)}},2070:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0}),l.useEffectExceptOnMount=l.assignRef=void 0;var h=d(4098);l.assignRef=function(p,y){(function(v){return typeof v=="function"})(p)?p(y):p&&(p.current=y)},l.useEffectExceptOnMount=function(p,y){var v=h.useRef(!1);h.useEffect((function(){return v.current?p():void(v.current=!0)}),y),h.useEffect((function(){return function(){v.current=!1}}),[])}},5380:function(c,l){Object.defineProperty(l,"__esModule",{value:!0}),l.encodeSvgUrl=l.rgb2rgba=void 0,l.rgb2rgba=function(d,h){return h===void 0&&(h=1),d.replace(/rgb\(([^)]*)\)/,"rgba($1, "+h+")")},l.encodeSvgUrl=function(d){return"url('data:image/svg+xml,"+encodeURIComponent(d)+"')"}},7478:function(c,l){function d(h){return h==null}Object.defineProperty(l,"__esModule",{value:!0}),l.typedKeys=l.defaultIfNothing=l.isNullOrUndefined=void 0,l.isNullOrUndefined=d,l.defaultIfNothing=function(h,p){return d(h)?p:h},l.typedKeys=function(h){return Object.keys(h)}},1074:function(c,l,d){var h=this&&this.__assign||function(){return h=Object.assign||function(v){for(var b,x=1,D=arguments.length;x<D;x++)for(var S in b=arguments[x])Object.prototype.hasOwnProperty.call(b,S)&&(v[S]=b[S]);return v},h.apply(this,arguments)};Object.defineProperty(l,"__esModule",{value:!0}),l.ArrowChevronUpIcon=void 0;var p=d(4098),y={Size12px:function(v,b,x){return p.createElement("svg",h({width:"12",height:"12",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":x,"data-tb-test-id":"tb-icons-ArrowChevronUpIcon"},v),b?p.createElement("title",{id:x},b):null,p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m10.104 8.604-4-4-4 4-.707-.708L5.75 3.543a.5.5 0 0 1 .708 0l4.353 4.353-.707.708Z",fill:"currentcolor"}))},Size14px:function(v,b,x){return p.createElement("svg",h({width:"14",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":x,"data-tb-test-id":"tb-icons-ArrowChevronUpIcon"},v),b?p.createElement("title",{id:x},b):null,p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m11.104 9.604-4-4-4 4-.707-.708L6.75 4.543a.5.5 0 0 1 .708 0l4.353 4.353-.707.708Z",fill:"currentcolor"}))},Size22px:function(v,b,x){return p.createElement("svg",h({width:"22",height:"22",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":x,"data-tb-test-id":"tb-icons-ArrowChevronUpIcon"},v),b?p.createElement("title",{id:x},b):null,p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m15.104 13.604-4-4-4 4-.707-.707 4.354-4.354a.5.5 0 0 1 .707 0l4.353 4.354-.707.707Z",fill:"currentcolor"}))},Size36px:function(v,b,x){return p.createElement("svg",h({width:"36",height:"36",fill:"none",xmlns:"http://www.w3.org/2000/svg","aria-labelledby":x,"data-tb-test-id":"tb-icons-ArrowChevronUpIcon"},v),b?p.createElement("title",{id:x},b):null,p.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"m22.104 19.604-4-4-4 4-.707-.707 4.353-4.354a.5.5 0 0 1 .708 0l4.353 4.354-.707.707Z",fill:"currentcolor"}))}};l.ArrowChevronUpIcon=function(v){var b="Size"+v.size+"px",x=y[b],D=v.alt,S=v.alt?v.alt.replace(/\s/g,"_")+"_label":void 0,A=h({},v);if(A.alt=void 0,A.size=void 0,!x)throw"Provided values did not match variations for ArrowChevronUpIcon, size: ".concat(v.size);return x(A,D,S)}},8779:function(c,l){var d,h=this&&this.__extends||(d=function(X,Q){return d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,ce){ne.__proto__=ce}||function(ne,ce){for(var Fe in ce)ce.hasOwnProperty(Fe)&&(ne[Fe]=ce[Fe])},d(X,Q)},function(X,Q){function ne(){this.constructor=X}d(X,Q),X.prototype=Q===null?Object.create(Q):(ne.prototype=Q.prototype,new ne)});Object.defineProperty(l,"__esModule",{value:!0});var p=0;l.IS_UNIQUE="__DO_NOT_DEDUPE_STYLE__";for(var y=/[A-Z]/g,v=/^ms-/,b=/&/g,x=/[ !#$%&()*+,./;<=>?@[\]^`{|}~"'\\]/g,D=function(X){return"-"+X.toLowerCase()},S={"animation-iteration-count":!0,"border-image-outset":!0,"border-image-slice":!0,"border-image-width":!0,"box-flex":!0,"box-flex-group":!0,"box-ordinal-group":!0,"column-count":!0,columns:!0,"counter-increment":!0,"counter-reset":!0,flex:!0,"flex-grow":!0,"flex-positive":!0,"flex-shrink":!0,"flex-negative":!0,"flex-order":!0,"font-weight":!0,"grid-area":!0,"grid-column":!0,"grid-column-end":!0,"grid-column-span":!0,"grid-column-start":!0,"grid-row":!0,"grid-row-end":!0,"grid-row-span":!0,"grid-row-start":!0,"line-clamp":!0,"line-height":!0,opacity:!0,order:!0,orphans:!0,"tab-size":!0,widows:!0,"z-index":!0,zoom:!0,"fill-opacity":!0,"flood-opacity":!0,"stop-opacity":!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,"stroke-miterlimit":!0,"stroke-opacity":!0,"stroke-width":!0},A=0,w=Object.keys(S);A<w.length;A++)for(var _=w[A],k=0,F=["-webkit-","-ms-","-moz-","-o-",""];k<F.length;k++)S[F[k]+_]=!0;function M(X){return X.replace(y,D).replace(v,"-ms-")}function N(X){for(var Q=5381,ne=X.length;ne--;)Q=33*Q^X.charCodeAt(ne);return(Q>>>0).toString(36)}function P(X,Q){return typeof Q!="number"||Q===0||S.hasOwnProperty(X)?X+":"+Q:X+":"+Q+"px"}function L(X){return X.sort((function(Q,ne){return Q[0]>ne[0]?1:-1}))}function H(X){return X.map((function(Q){var ne=Q[0],ce=Q[1];return Array.isArray(ce)?ce.map((function(Fe){return P(ne,Fe)})).join(";"):P(ne,ce)})).join(";")}function I(X,Q){return X.indexOf("&")===-1?Q+" "+X:X.replace(b,Q)}function U(X,Q,ne,ce,Fe){var Me=(function(Se,Ce){for(var Ne=[],tt=[],dt=!1,Rt=0,tn=Object.keys(Se);Rt<tn.length;Rt++){var Qt=tn[Rt],ra=Se[Qt];ra!=null&&(Qt===l.IS_UNIQUE?dt=!0:typeof ra!="object"||Array.isArray(ra)?Ne.push([M(Qt.trim()),ra]):tt.push([Qt.trim(),ra]))}return{style:H(L(Ne)),nested:Ce?tt:L(tt),isUnique:dt}})(Q,X!==""),j=Me.style,W=Me.nested,te=Me.isUnique,Y=j;if(X.charCodeAt(0)===64){var le={selector:X,styles:[],rules:[],style:Fe?"":j};ne.push(le),j&&Fe&&le.styles.push({selector:Fe,style:j,isUnique:te});for(var Te=0,oe=W;Te<oe.length;Te++){var ge=oe[Te];Y+=(he=ge[0])+U(he,ge[1],le.rules,le.styles,Fe)}}else{var Ae=Fe?I(X,Fe):X;j&&ce.push({selector:Ae,style:j,isUnique:te});for(var K=0,re=W;K<re.length;K++){var he,ye=re[K];Y+=(he=ye[0])+U(he,ye[1],ne,ce,Ae)}}return Y}function z(X,Q,ne,ce,Fe,Me){for(var j=0,W=ce;j<W.length;j++){var te=W[j],Y=te.selector,le=te.style,Te=te.isUnique,oe=Me?I(Y,Fe):Y,ge=Te?"u\0"+(++p).toString(36):"s\0"+Q+"\0"+le;(re=new O(le,ge)).add(new G(oe,"k\0"+Q+"\0"+oe)),X.add(re)}for(var Ae=0,K=ne;Ae<K.length;Ae++){var re,he=K[Ae],ye=(Y=he.selector,le=he.style,he.rules),Se=he.styles;z(re=new Z(Y,le,"r\0"+Q+"\0"+Y+"\0"+le),Q,ye,Se,Fe,Me),X.add(re)}}function T(X){for(var Q="",ne=0;ne<X.length;ne++)Q+=X[ne];return Q}l.escape=function(X){return X.replace(x,"\\$&")},l.hyphenate=M,l.stringHash=N;var R={add:function(){},change:function(){},remove:function(){}},q=(function(){function X(Q){Q===void 0&&(Q=R),this.changes=Q,this.sheet=[],this.changeId=0,this._keys=[],this._children=Object.create(null),this._counters=Object.create(null)}return X.prototype.add=function(Q){var ne=this._counters[Q.id]||0,ce=this._children[Q.id]||Q.clone();if(this._counters[Q.id]=ne+1,ne===0)this._children[ce.id]=ce,this._keys.push(ce.id),this.sheet.push(ce.getStyles()),this.changeId++,this.changes.add(ce,this._keys.length-1);else if(ce instanceof X&&Q instanceof X){var Fe=this._keys.indexOf(Q.id),Me=ce.changeId;ce.merge(Q),ce.changeId!==Me&&(this.sheet.splice(Fe,1,ce.getStyles()),this.changeId++,this.changes.change(ce,Fe,Fe))}return ce},X.prototype.remove=function(Q){var ne=this._counters[Q.id];if(ne!==void 0&&ne>0){this._counters[Q.id]=ne-1;var ce=this._children[Q.id],Fe=this._keys.indexOf(ce.id);if(ne===1)delete this._counters[Q.id],delete this._children[Q.id],this._keys.splice(Fe,1),this.sheet.splice(Fe,1),this.changeId++,this.changes.remove(ce,Fe);else if(ce instanceof X&&Q instanceof X){var Me=ce.changeId;ce.unmerge(Q),ce.changeId!==Me&&(this.sheet.splice(Fe,1,ce.getStyles()),this.changeId++,this.changes.change(ce,Fe,Fe))}}},X.prototype.values=function(){var Q=this;return this._keys.map((function(ne){return Q._children[ne]}))},X.prototype.merge=function(Q){for(var ne=0,ce=Q.values();ne<ce.length;ne++){var Fe=ce[ne];this.add(Fe)}return this},X.prototype.unmerge=function(Q){for(var ne=0,ce=Q.values();ne<ce.length;ne++){var Fe=ce[ne];this.remove(Fe)}return this},X.prototype.clone=function(){return new X().merge(this)},X})();l.Cache=q;var G=(function(){function X(Q,ne){this.selector=Q,this.id=ne}return X.prototype.getStyles=function(){return this.selector},X.prototype.clone=function(){return new X(this.selector,this.id)},X})();l.Selector=G;var O=(function(X){function Q(ne,ce){var Fe=X.call(this)||this;return Fe.style=ne,Fe.id=ce,Fe}return h(Q,X),Q.prototype.getStyles=function(){return this.sheet.join(",")+"{"+this.style+"}"},Q.prototype.clone=function(){return new Q(this.style,this.id).merge(this)},Q})(q);l.Style=O;var Z=(function(X){function Q(ne,ce,Fe){var Me=X.call(this)||this;return Me.rule=ne,Me.style=ce,Me.id=Fe,Me}return h(Q,X),Q.prototype.getStyles=function(){return this.rule+"{"+this.style+T(this.sheet)+"}"},Q.prototype.clone=function(){return new Q(this.rule,this.style,this.id).merge(this)},Q})(q);l.Rule=Z;var ee=(function(X){function Q(ne,ce,Fe,Me){var j=X.call(this,Me)||this;return j.hash=ne,j.debug=ce,j.id=Fe,j}return h(Q,X),Q.prototype.registerStyle=function(ne,ce){var Fe=[],Me=[],j=U("&",ne,Fe,Me),W="f"+this.hash(j),te=this.debug&&ce?ce+"_"+W:W;return z(this,j,Fe,Me,"."+l.escape(te),!0),te},Q.prototype.registerKeyframes=function(ne,ce){return this.registerHashRule("@keyframes",ne,ce)},Q.prototype.registerHashRule=function(ne,ce,Fe){var Me=[],j=[],W=U("",ce,Me,j),te="f"+this.hash(W),Y=this.debug&&Fe?Fe+"_"+te:te,le=new Z(ne+" "+l.escape(Y),"","h\0"+W+"\0"+ne);return z(le,W,Me,j,"",!1),this.add(le),Y},Q.prototype.registerRule=function(ne,ce){var Fe=[],Me=[];z(this,U(ne,ce,Fe,Me),Fe,Me,"",!1)},Q.prototype.registerCss=function(ne){return this.registerRule("",ne)},Q.prototype.getStyles=function(){return T(this.sheet)},Q.prototype.clone=function(){return new Q(this.hash,this.debug,this.id,this.changes).merge(this)},Q})(q);l.FreeStyle=ee,l.create=function(X,Q,ne){return X===void 0&&(X=N),Q===void 0&&(Q=typeof process<"u"&&!1),ne===void 0&&(ne=R),new ee(X,Q,"f"+(++p).toString(36),ne)}},9798:function(c,l,d){var h=d(6834);function p(){}function y(){}y.resetWarningCache=p,c.exports=function(){function v(D,S,A,w,_,k){if(k!==h){var F=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw F.name="Invariant Violation",F}}function b(){return v}v.isRequired=v;var x={array:v,bigint:v,bool:v,func:v,number:v,object:v,string:v,symbol:v,any:v,arrayOf:b,element:v,elementType:v,instanceOf:b,node:v,objectOf:b,oneOf:b,oneOfType:b,shape:b,exact:b,checkPropTypes:y,resetWarningCache:p};return x.PropTypes=x,x}},8129:function(c,l,d){c.exports=d(9798)()},6834:function(c){c.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3125:function(c,l,d){Object.defineProperty(l,"__esModule",{value:!0});var h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},p=Object.assign||function(L){for(var H=1;H<arguments.length;H++){var I=arguments[H];for(var U in I)Object.prototype.hasOwnProperty.call(I,U)&&(L[U]=I[U])}return L},y=(function(){function L(H,I){for(var U=0;U<I.length;U++){var z=I[U];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(H,z.key,z)}}return function(H,I,U){return I&&L(H.prototype,I),U&&L(H,U),H}})(),v=D(d(4098)),b=D(d(8129)),x=D(d(5965));function D(L){return L&&L.__esModule?L:{default:L}}function S(L,H,I){return H in L?Object.defineProperty(L,H,{value:I,enumerable:!0,configurable:!0,writable:!0}):L[H]=I,L}var A={animating:"rah-animating",animatingUp:"rah-animating--up",animatingDown:"rah-animating--down",animatingToHeightZero:"rah-animating--to-height-zero",animatingToHeightAuto:"rah-animating--to-height-auto",animatingToHeightSpecific:"rah-animating--to-height-specific",static:"rah-static",staticHeightZero:"rah-static--height-zero",staticHeightAuto:"rah-static--height-auto",staticHeightSpecific:"rah-static--height-specific"},w=["animateOpacity","animationStateClasses","applyInlineTransitions","children","contentClassName","delay","duration","easing","height","onAnimationEnd","onAnimationStart"];function _(L){for(var H=arguments.length,I=Array(H>1?H-1:0),U=1;U<H;U++)I[U-1]=arguments[U];if(!I.length)return L;for(var z={},T=Object.keys(L),R=0;R<T.length;R++){var q=T[R];I.indexOf(q)===-1&&(z[q]=L[q])}return z}function k(L){L.forEach((function(H){return cancelAnimationFrame(H)}))}function F(L){return!isNaN(parseFloat(L))&&isFinite(L)}function M(L){return typeof L=="string"&&L.search("%")===L.length-1&&F(L.substr(0,L.length-1))}function N(L,H){L&&typeof L=="function"&&L(H)}var P=(function(L){function H(I){(function(q,G){if(!(q instanceof G))throw new TypeError("Cannot call a class as a function")})(this,H);var U=(function(q,G){if(!q)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!G||typeof G!="object"&&typeof G!="function"?q:G})(this,(H.__proto__||Object.getPrototypeOf(H)).call(this,I));U.animationFrameIDs=[];var z="auto",T="visible";F(I.height)?(z=I.height<0||I.height==="0"?0:I.height,T="hidden"):M(I.height)&&(z=I.height==="0%"?0:I.height,T="hidden"),U.animationStateClasses=p({},A,I.animationStateClasses);var R=U.getStaticStateClasses(z);return typeof window<"u"&&window.matchMedia&&(U.prefersReducedMotion=window.matchMedia("(prefers-reduced-motion)").matches),U.state={animationStateClasses:R,height:z,overflow:T,shouldUseTransitions:!1},U}return(function(I,U){if(typeof U!="function"&&U!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof U);I.prototype=Object.create(U&&U.prototype,{constructor:{value:I,enumerable:!1,writable:!0,configurable:!0}}),U&&(Object.setPrototypeOf?Object.setPrototypeOf(I,U):I.__proto__=U)})(H,L),y(H,[{key:"componentDidMount",value:function(){var I=this.state.height;this.contentElement&&this.contentElement.style&&this.hideContent(I)}},{key:"componentDidUpdate",value:function(I,U){var z,T,R=this,q=this.props,G=q.height,O=q.onAnimationEnd,Z=q.onAnimationStart,ee=this.getTimings(),X=ee.duration,Q=ee.delay;if(this.contentElement&&G!==I.height){var ne;this.showContent(U.height),this.contentElement.style.overflow="hidden";var ce=this.contentElement.offsetHeight;this.contentElement.style.overflow="";var Fe=X+Q,Me=null,j={height:null,overflow:"hidden"},W=U.height==="auto";F(G)?(Me=G<0||G==="0"?0:G,j.height=Me):M(G)?(Me=G==="0%"?0:G,j.height=Me):(Me=ce,j.height="auto",j.overflow=null),W&&(j.height=Me,Me=ce);var te=(0,x.default)((S(ne={},this.animationStateClasses.animating,!0),S(ne,this.animationStateClasses.animatingUp,I.height==="auto"||G<I.height),S(ne,this.animationStateClasses.animatingDown,G==="auto"||G>I.height),S(ne,this.animationStateClasses.animatingToHeightZero,j.height===0),S(ne,this.animationStateClasses.animatingToHeightAuto,j.height==="auto"),S(ne,this.animationStateClasses.animatingToHeightSpecific,j.height>0),ne)),Y=this.getStaticStateClasses(j.height);this.setState({animationStateClasses:te,height:Me,overflow:"hidden",shouldUseTransitions:!W}),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),W?(j.shouldUseTransitions=!0,k(this.animationFrameIDs),this.animationFrameIDs=(z=function(){R.setState(j),N(Z,{newHeight:j.height})},(T=[])[0]=requestAnimationFrame((function(){T[1]=requestAnimationFrame((function(){z()}))})),T),this.animationClassesTimeoutID=setTimeout((function(){R.setState({animationStateClasses:Y,shouldUseTransitions:!1}),R.hideContent(j.height),N(O,{newHeight:j.height})}),Fe)):(N(Z,{newHeight:Me}),this.timeoutID=setTimeout((function(){j.animationStateClasses=Y,j.shouldUseTransitions=!1,R.setState(j),G!=="auto"&&R.hideContent(Me),N(O,{newHeight:Me})}),Fe))}}},{key:"componentWillUnmount",value:function(){k(this.animationFrameIDs),clearTimeout(this.timeoutID),clearTimeout(this.animationClassesTimeoutID),this.timeoutID=null}},{key:"getTimings",value:function(){if(this.prefersReducedMotion)return{delay:0,duration:0};var I=this.props;return{delay:I.delay,duration:I.duration}}},{key:"showContent",value:function(I){I===0&&(this.contentElement.style.display="")}},{key:"hideContent",value:function(I){I===0&&(this.contentElement.style.display="none")}},{key:"getStaticStateClasses",value:function(I){var U;return(0,x.default)((S(U={},this.animationStateClasses.static,!0),S(U,this.animationStateClasses.staticHeightZero,I===0),S(U,this.animationStateClasses.staticHeightSpecific,I>0),S(U,this.animationStateClasses.staticHeightAuto,I==="auto"),U))}},{key:"render",value:function(){var I,U=this,z=this.props,T=z.animateOpacity,R=z.applyInlineTransitions,q=z.children,G=z.className,O=z.contentClassName,Z=z.easing,ee=z.id,X=z.style,Q=this.state,ne=Q.height,ce=Q.overflow,Fe=Q.animationStateClasses,Me=Q.shouldUseTransitions,j=this.getTimings(),W=j.duration,te=j.delay,Y=p({},X,{height:ne,overflow:ce||X.overflow});Me&&R&&(Y.transition="height "+W+"ms "+Z+" "+te+"ms",X.transition&&(Y.transition=X.transition+", "+Y.transition),Y.WebkitTransition=Y.transition);var le={};T&&(le.transition="opacity "+W+"ms "+Z+" "+te+"ms",le.WebkitTransition=le.transition,ne===0&&(le.opacity=0));var Te=(0,x.default)((S(I={},Fe,!0),S(I,G,G),I)),oe=this.props["aria-hidden"]!==void 0?this.props["aria-hidden"]:ne===0;return v.default.createElement("div",p({},_.apply(void 0,[this.props].concat(w)),{"aria-hidden":oe,className:Te,id:ee,style:Y}),v.default.createElement("div",{className:O,style:le,ref:function(ge){return U.contentElement=ge}},q))}}]),H})(v.default.Component);P.propTypes={"aria-hidden":b.default.bool,animateOpacity:b.default.bool,animationStateClasses:b.default.object,applyInlineTransitions:b.default.bool,children:b.default.any.isRequired,className:b.default.string,contentClassName:b.default.string,delay:b.default.number,duration:b.default.number,easing:b.default.string,height:function(L,H,I){var U=L[H];return typeof U=="number"&&U>=0||M(U)||U==="auto"?null:new TypeError('value "'+U+'" of type "'+(U===void 0?"undefined":h(U))+'" is invalid type for '+H+" in "+I+'. It needs to be a positive number, string "auto" or percentage string (e.g. "15%").')},id:b.default.string,onAnimationEnd:b.default.func,onAnimationStart:b.default.func,style:b.default.object},P.defaultProps={animateOpacity:!1,animationStateClasses:A,applyInlineTransitions:!0,duration:250,delay:0,easing:"ease",style:{}},l.default=P},4320:function(c,l,d){function h(){return h=Object.assign?Object.assign.bind():function(oe){for(var ge=1;ge<arguments.length;ge++){var Ae=arguments[ge];for(var K in Ae)({}).hasOwnProperty.call(Ae,K)&&(oe[K]=Ae[K])}return oe},h.apply(null,arguments)}function p(oe,ge){if(oe==null)return{};var Ae={};for(var K in oe)if({}.hasOwnProperty.call(oe,K)){if(ge.indexOf(K)>=0)continue;Ae[K]=oe[K]}return Ae}function y(oe,ge){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(Ae,K){return Ae.__proto__=K,Ae},y(oe,ge)}function v(oe,ge){oe.prototype=Object.create(ge.prototype),oe.prototype.constructor=oe,y(oe,ge)}function b(oe,ge){return oe.replace(new RegExp("(^|\\s)"+ge+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}d.r(l),d.d(l,{CSSTransition:function(){return R},ReplaceTransition:function(){return Fe},SwitchTransition:function(){return Te},Transition:function(){return U},TransitionGroup:function(){return X},config:function(){return w}});var x=d(4098),D=d.n(x),S=d(4262),A=d.n(S),w={disabled:!1},_=D().createContext(null),k=function(oe){return oe.scrollTop},F="unmounted",M="exited",N="entering",P="entered",L="exiting",H=(function(oe){function ge(K,re){var he;he=oe.call(this,K,re)||this;var ye,Se=re&&!re.isMounting?K.enter:K.appear;return he.appearStatus=null,K.in?Se?(ye=M,he.appearStatus=N):ye=P:ye=K.unmountOnExit||K.mountOnEnter?F:M,he.state={status:ye},he.nextCallback=null,he}v(ge,oe),ge.getDerivedStateFromProps=function(K,re){return K.in&&re.status===F?{status:M}:null};var Ae=ge.prototype;return Ae.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},Ae.componentDidUpdate=function(K){var re=null;if(K!==this.props){var he=this.state.status;this.props.in?he!==N&&he!==P&&(re=N):he!==N&&he!==P||(re=L)}this.updateStatus(!1,re)},Ae.componentWillUnmount=function(){this.cancelNextCallback()},Ae.getTimeouts=function(){var K,re,he,ye=this.props.timeout;return K=re=he=ye,ye!=null&&typeof ye!="number"&&(K=ye.exit,re=ye.enter,he=ye.appear!==void 0?ye.appear:re),{exit:K,enter:re,appear:he}},Ae.updateStatus=function(K,re){if(K===void 0&&(K=!1),re!==null)if(this.cancelNextCallback(),re===N){if(this.props.unmountOnExit||this.props.mountOnEnter){var he=this.props.nodeRef?this.props.nodeRef.current:A().findDOMNode(this);he&&k(he)}this.performEnter(K)}else this.performExit();else this.props.unmountOnExit&&this.state.status===M&&this.setState({status:F})},Ae.performEnter=function(K){var re=this,he=this.props.enter,ye=this.context?this.context.isMounting:K,Se=this.props.nodeRef?[ye]:[A().findDOMNode(this),ye],Ce=Se[0],Ne=Se[1],tt=this.getTimeouts(),dt=ye?tt.appear:tt.enter;!K&&!he||w.disabled?this.safeSetState({status:P},(function(){re.props.onEntered(Ce)})):(this.props.onEnter(Ce,Ne),this.safeSetState({status:N},(function(){re.props.onEntering(Ce,Ne),re.onTransitionEnd(dt,(function(){re.safeSetState({status:P},(function(){re.props.onEntered(Ce,Ne)}))}))})))},Ae.performExit=function(){var K=this,re=this.props.exit,he=this.getTimeouts(),ye=this.props.nodeRef?void 0:A().findDOMNode(this);re&&!w.disabled?(this.props.onExit(ye),this.safeSetState({status:L},(function(){K.props.onExiting(ye),K.onTransitionEnd(he.exit,(function(){K.safeSetState({status:M},(function(){K.props.onExited(ye)}))}))}))):this.safeSetState({status:M},(function(){K.props.onExited(ye)}))},Ae.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},Ae.safeSetState=function(K,re){re=this.setNextCallback(re),this.setState(K,re)},Ae.setNextCallback=function(K){var re=this,he=!0;return this.nextCallback=function(ye){he&&(he=!1,re.nextCallback=null,K(ye))},this.nextCallback.cancel=function(){he=!1},this.nextCallback},Ae.onTransitionEnd=function(K,re){this.setNextCallback(re);var he=this.props.nodeRef?this.props.nodeRef.current:A().findDOMNode(this),ye=K==null&&!this.props.addEndListener;if(he&&!ye){if(this.props.addEndListener){var Se=this.props.nodeRef?[this.nextCallback]:[he,this.nextCallback],Ce=Se[0],Ne=Se[1];this.props.addEndListener(Ce,Ne)}K!=null&&setTimeout(this.nextCallback,K)}else setTimeout(this.nextCallback,0)},Ae.render=function(){var K=this.state.status;if(K===F)return null;var re=this.props,he=re.children,ye=(re.in,re.mountOnEnter,re.unmountOnExit,re.appear,re.enter,re.exit,re.timeout,re.addEndListener,re.onEnter,re.onEntering,re.onEntered,re.onExit,re.onExiting,re.onExited,re.nodeRef,p(re,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return D().createElement(_.Provider,{value:null},typeof he=="function"?he(K,ye):D().cloneElement(D().Children.only(he),ye))},ge})(D().Component);function I(){}H.contextType=_,H.propTypes={},H.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:I,onEntering:I,onEntered:I,onExit:I,onExiting:I,onExited:I},H.UNMOUNTED=F,H.EXITED=M,H.ENTERING=N,H.ENTERED=P,H.EXITING=L;var U=H,z=function(oe,ge){return oe&&ge&&ge.split(" ").forEach((function(Ae){return re=Ae,void((K=oe).classList?K.classList.remove(re):typeof K.className=="string"?K.className=b(K.className,re):K.setAttribute("class",b(K.className&&K.className.baseVal||"",re)));var K,re}))},T=(function(oe){function ge(){for(var K,re=arguments.length,he=new Array(re),ye=0;ye<re;ye++)he[ye]=arguments[ye];return(K=oe.call.apply(oe,[this].concat(he))||this).appliedClasses={appear:{},enter:{},exit:{}},K.onEnter=function(Se,Ce){var Ne=K.resolveArguments(Se,Ce),tt=Ne[0],dt=Ne[1];K.removeClasses(tt,"exit"),K.addClass(tt,dt?"appear":"enter","base"),K.props.onEnter&&K.props.onEnter(Se,Ce)},K.onEntering=function(Se,Ce){var Ne=K.resolveArguments(Se,Ce),tt=Ne[0],dt=Ne[1]?"appear":"enter";K.addClass(tt,dt,"active"),K.props.onEntering&&K.props.onEntering(Se,Ce)},K.onEntered=function(Se,Ce){var Ne=K.resolveArguments(Se,Ce),tt=Ne[0],dt=Ne[1]?"appear":"enter";K.removeClasses(tt,dt),K.addClass(tt,dt,"done"),K.props.onEntered&&K.props.onEntered(Se,Ce)},K.onExit=function(Se){var Ce=K.resolveArguments(Se)[0];K.removeClasses(Ce,"appear"),K.removeClasses(Ce,"enter"),K.addClass(Ce,"exit","base"),K.props.onExit&&K.props.onExit(Se)},K.onExiting=function(Se){var Ce=K.resolveArguments(Se)[0];K.addClass(Ce,"exit","active"),K.props.onExiting&&K.props.onExiting(Se)},K.onExited=function(Se){var Ce=K.resolveArguments(Se)[0];K.removeClasses(Ce,"exit"),K.addClass(Ce,"exit","done"),K.props.onExited&&K.props.onExited(Se)},K.resolveArguments=function(Se,Ce){return K.props.nodeRef?[K.props.nodeRef.current,Se]:[Se,Ce]},K.getClassNames=function(Se){var Ce=K.props.classNames,Ne=typeof Ce=="string",tt=Ne?(Ne&&Ce?Ce+"-":"")+Se:Ce[Se];return{baseClassName:tt,activeClassName:Ne?tt+"-active":Ce[Se+"Active"],doneClassName:Ne?tt+"-done":Ce[Se+"Done"]}},K}v(ge,oe);var Ae=ge.prototype;return Ae.addClass=function(K,re,he){var ye=this.getClassNames(re)[he+"ClassName"],Se=this.getClassNames("enter").doneClassName;re==="appear"&&he==="done"&&Se&&(ye+=" "+Se),he==="active"&&K&&k(K),ye&&(this.appliedClasses[re][he]=ye,(function(Ce,Ne){Ce&&Ne&&Ne.split(" ").forEach((function(tt){return Rt=tt,void((dt=Ce).classList?dt.classList.add(Rt):(function(tn,Qt){return tn.classList?!!Qt&&tn.classList.contains(Qt):(" "+(tn.className.baseVal||tn.className)+" ").indexOf(" "+Qt+" ")!==-1})(dt,Rt)||(typeof dt.className=="string"?dt.className=dt.className+" "+Rt:dt.setAttribute("class",(dt.className&&dt.className.baseVal||"")+" "+Rt)));var dt,Rt}))})(K,ye))},Ae.removeClasses=function(K,re){var he=this.appliedClasses[re],ye=he.base,Se=he.active,Ce=he.done;this.appliedClasses[re]={},ye&&z(K,ye),Se&&z(K,Se),Ce&&z(K,Ce)},Ae.render=function(){var K=this.props,re=(K.classNames,p(K,["classNames"]));return D().createElement(U,h({},re,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},ge})(D().Component);T.defaultProps={classNames:""},T.propTypes={};var R=T;function q(oe,ge){var Ae=Object.create(null);return oe&&x.Children.map(oe,(function(K){return K})).forEach((function(K){Ae[K.key]=(function(re){return ge&&(0,x.isValidElement)(re)?ge(re):re})(K)})),Ae}function G(oe,ge,Ae){return Ae[ge]!=null?Ae[ge]:oe.props[ge]}function O(oe,ge,Ae){var K=q(oe.children),re=(function(he,ye){function Se(ra){return ra in ye?ye[ra]:he[ra]}he=he||{},ye=ye||{};var Ce,Ne=Object.create(null),tt=[];for(var dt in he)dt in ye?tt.length&&(Ne[dt]=tt,tt=[]):tt.push(dt);var Rt={};for(var tn in ye){if(Ne[tn])for(Ce=0;Ce<Ne[tn].length;Ce++){var Qt=Ne[tn][Ce];Rt[Ne[tn][Ce]]=Se(Qt)}Rt[tn]=Se(tn)}for(Ce=0;Ce<tt.length;Ce++)Rt[tt[Ce]]=Se(tt[Ce]);return Rt})(ge,K);return Object.keys(re).forEach((function(he){var ye=re[he];if((0,x.isValidElement)(ye)){var Se=he in ge,Ce=he in K,Ne=ge[he],tt=(0,x.isValidElement)(Ne)&&!Ne.props.in;!Ce||Se&&!tt?Ce||!Se||tt?Ce&&Se&&(0,x.isValidElement)(Ne)&&(re[he]=(0,x.cloneElement)(ye,{onExited:Ae.bind(null,ye),in:Ne.props.in,exit:G(ye,"exit",oe),enter:G(ye,"enter",oe)})):re[he]=(0,x.cloneElement)(ye,{in:!1}):re[he]=(0,x.cloneElement)(ye,{onExited:Ae.bind(null,ye),in:!0,exit:G(ye,"exit",oe),enter:G(ye,"enter",oe)})}})),re}var Z=Object.values||function(oe){return Object.keys(oe).map((function(ge){return oe[ge]}))},ee=(function(oe){function ge(K,re){var he,ye=(he=oe.call(this,K,re)||this).handleExited.bind((function(Se){if(Se===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Se})(he));return he.state={contextValue:{isMounting:!0},handleExited:ye,firstRender:!0},he}v(ge,oe);var Ae=ge.prototype;return Ae.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},Ae.componentWillUnmount=function(){this.mounted=!1},ge.getDerivedStateFromProps=function(K,re){var he,ye,Se=re.children,Ce=re.handleExited;return{children:re.firstRender?(he=K,ye=Ce,q(he.children,(function(Ne){return(0,x.cloneElement)(Ne,{onExited:ye.bind(null,Ne),in:!0,appear:G(Ne,"appear",he),enter:G(Ne,"enter",he),exit:G(Ne,"exit",he)})}))):O(K,Se,Ce),firstRender:!1}},Ae.handleExited=function(K,re){var he=q(this.props.children);K.key in he||(K.props.onExited&&K.props.onExited(re),this.mounted&&this.setState((function(ye){var Se=h({},ye.children);return delete Se[K.key],{children:Se}})))},Ae.render=function(){var K=this.props,re=K.component,he=K.childFactory,ye=p(K,["component","childFactory"]),Se=this.state.contextValue,Ce=Z(this.state.children).map(he);return delete ye.appear,delete ye.enter,delete ye.exit,re===null?D().createElement(_.Provider,{value:Se},Ce):D().createElement(_.Provider,{value:Se},D().createElement(re,ye,Ce))},ge})(D().Component);ee.propTypes={},ee.defaultProps={component:"div",childFactory:function(oe){return oe}};var X=ee,Q=(function(oe){function ge(){for(var K,re=arguments.length,he=new Array(re),ye=0;ye<re;ye++)he[ye]=arguments[ye];return(K=oe.call.apply(oe,[this].concat(he))||this).handleEnter=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onEnter",0,Ce)},K.handleEntering=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onEntering",0,Ce)},K.handleEntered=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onEntered",0,Ce)},K.handleExit=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onExit",1,Ce)},K.handleExiting=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onExiting",1,Ce)},K.handleExited=function(){for(var Se=arguments.length,Ce=new Array(Se),Ne=0;Ne<Se;Ne++)Ce[Ne]=arguments[Ne];return K.handleLifecycle("onExited",1,Ce)},K}v(ge,oe);var Ae=ge.prototype;return Ae.handleLifecycle=function(K,re,he){var ye,Se=this.props.children,Ce=D().Children.toArray(Se)[re];if(Ce.props[K]&&(ye=Ce.props)[K].apply(ye,he),this.props[K]){var Ne=Ce.props.nodeRef?void 0:A().findDOMNode(this);this.props[K](Ne)}},Ae.render=function(){var K=this.props,re=K.children,he=K.in,ye=p(K,["children","in"]),Se=D().Children.toArray(re),Ce=Se[0],Ne=Se[1];return delete ye.onEnter,delete ye.onEntering,delete ye.onEntered,delete ye.onExit,delete ye.onExiting,delete ye.onExited,D().createElement(X,ye,he?D().cloneElement(Ce,{key:"first",onEnter:this.handleEnter,onEntering:this.handleEntering,onEntered:this.handleEntered}):D().cloneElement(Ne,{key:"second",onEnter:this.handleExit,onEntering:this.handleExiting,onEntered:this.handleExited}))},ge})(D().Component);Q.propTypes={};var ne,ce,Fe=Q,Me="out-in",j="in-out",W=function(oe,ge,Ae){return function(){var K;oe.props[ge]&&(K=oe.props)[ge].apply(K,arguments),Ae()}},te=((ne={})[Me]=function(oe){var ge=oe.current,Ae=oe.changeState;return D().cloneElement(ge,{in:!1,onExited:W(ge,"onExited",(function(){Ae(N,null)}))})},ne[j]=function(oe){var ge=oe.current,Ae=oe.changeState,K=oe.children;return[ge,D().cloneElement(K,{in:!0,onEntered:W(K,"onEntered",(function(){Ae(N)}))})]},ne),Y=((ce={})[Me]=function(oe){var ge=oe.children,Ae=oe.changeState;return D().cloneElement(ge,{in:!0,onEntered:W(ge,"onEntered",(function(){Ae(P,D().cloneElement(ge,{in:!0}))}))})},ce[j]=function(oe){var ge=oe.current,Ae=oe.children,K=oe.changeState;return[D().cloneElement(ge,{in:!1,onExited:W(ge,"onExited",(function(){K(P,D().cloneElement(Ae,{in:!0}))}))}),D().cloneElement(Ae,{in:!0})]},ce),le=(function(oe){function ge(){for(var K,re=arguments.length,he=new Array(re),ye=0;ye<re;ye++)he[ye]=arguments[ye];return(K=oe.call.apply(oe,[this].concat(he))||this).state={status:P,current:null},K.appeared=!1,K.changeState=function(Se,Ce){Ce===void 0&&(Ce=K.state.current),K.setState({status:Se,current:Ce})},K}v(ge,oe);var Ae=ge.prototype;return Ae.componentDidMount=function(){this.appeared=!0},ge.getDerivedStateFromProps=function(K,re){return K.children==null?{current:null}:re.status===N&&K.mode===j?{status:N}:!re.current||(he=re.current)===(ye=K.children)||D().isValidElement(he)&&D().isValidElement(ye)&&he.key!=null&&he.key===ye.key?{current:D().cloneElement(K.children,{in:!0})}:{status:L};var he,ye},Ae.render=function(){var K,re=this.props,he=re.children,ye=re.mode,Se=this.state,Ce=Se.status,Ne=Se.current,tt={children:he,current:Ne,changeState:this.changeState,status:Ce};switch(Ce){case N:K=Y[ye](tt);break;case L:K=te[ye](tt);break;case P:K=Ne}return D().createElement(_.Provider,{value:{isMounting:!this.appeared}},K)},ge})(D().Component);le.propTypes={},le.defaultProps={mode:Me};var Te=le},16:function(c,l,d){d.r(l),d.d(l,{TypeStyle:function(){return A},classes:function(){return v},createTypeStyle:function(){return T},cssRaw:function(){return F},cssRule:function(){return M},extend:function(){return b},fontFace:function(){return P},forceRenderStyles:function(){return N},getStyles:function(){return L},keyframes:function(){return H},media:function(){return x},reinit:function(){return I},setStylesTarget:function(){return k},style:function(){return U},stylesheet:function(){return z},types:function(){return w}});var h=d(8779);function p(R){var q={},G="";for(var O in R){var Z=R[O];if(O==="$unique")q[h.IS_UNIQUE]=Z;else if(O==="$nest"){var ee=Z;for(var X in ee){var Q=ee[X];q[X]=p(Q).result}}else O==="$debugName"?G=Z:q[O]=Z}return{result:q,debugName:G}}var y=typeof requestAnimationFrame>"u"?function(R){return setTimeout(R)}:typeof window>"u"?requestAnimationFrame:requestAnimationFrame.bind(window);function v(){for(var R=[],q=0;q<arguments.length;q++)R[q]=arguments[q];return R.map((function(G){return G&&typeof G=="object"?Object.keys(G).map((function(O){return!!G[O]&&O})):[G]})).reduce((function(G,O){return G.concat(O)}),[]).filter((function(G){return!!G})).join(" ")}function b(){for(var R=[],q=0;q<arguments.length;q++)R[q]=arguments[q];for(var G={},O=0,Z=R;O<Z.length;O++){var ee=Z[O];if(ee!=null&&ee!==!1)for(var X in ee){var Q=ee[X];(Q||Q===0)&&(X==="$nest"&&Q?G[X]=G.$nest?b(G.$nest,Q):Q:X.indexOf("&")!==-1||X.indexOf("@media")===0?G[X]=G[X]?b(G[X],Q):Q:G[X]=Q)}}return G}var x=function(R){for(var q=[],G=1;G<arguments.length;G++)q[G-1]=arguments[G];var O,Z=[];return R.type&&Z.push(R.type),R.orientation&&Z.push("(orientation: "+R.orientation+")"),R.minWidth&&Z.push("(min-width: "+D(R.minWidth)+")"),R.maxWidth&&Z.push("(max-width: "+D(R.maxWidth)+")"),R.minHeight&&Z.push("(min-height: "+D(R.minHeight)+")"),R.maxHeight&&Z.push("(max-height: "+D(R.maxHeight)+")"),{$nest:(O={},O["@media "+Z.join(" and ")]=b.apply(void 0,q),O)}},D=function(R){return typeof R=="string"?R:R+"px"},S=function(){return h.create(void 0,!0)},A=(function(){function R(q){var G=q.autoGenerateTag,O=this;this.cssRaw=function(ee){ee&&(O._raw+=ee||"",O._pendingRawChange=!0,O._styleUpdated())},this.cssRule=function(ee){for(var X=[],Q=1;Q<arguments.length;Q++)X[Q-1]=arguments[Q];var ne=p(b.apply(void 0,X)).result;O._freeStyle.registerRule(ee,ne),O._styleUpdated()},this.forceRenderStyles=function(){var ee=O._getTag();ee&&(ee.textContent=O.getStyles())},this.fontFace=function(){for(var ee=[],X=0;X<arguments.length;X++)ee[X]=arguments[X];for(var Q=O._freeStyle,ne=0,ce=ee;ne<ce.length;ne++){var Fe=ce[ne];Q.registerRule("@font-face",Fe)}O._styleUpdated()},this.getStyles=function(){return(O._raw||"")+O._freeStyle.getStyles()},this.keyframes=function(ee){var X=(function(Fe){var Me={$debugName:void 0,keyframes:{}};for(var j in Fe){var W=Fe[j];j==="$debugName"?Me.$debugName=W:Me.keyframes[j]=W}return Me})(ee),Q=X.keyframes,ne=X.$debugName,ce=O._freeStyle.registerKeyframes(Q,ne);return O._styleUpdated(),ce},this.reinit=function(){var ee=S();O._freeStyle=ee,O._lastFreeStyleChangeId=ee.changeId,O._raw="",O._pendingRawChange=!1;var X=O._getTag();X&&(X.textContent="")},this.setStylesTarget=function(ee){O._tag&&(O._tag.textContent=""),O._tag=ee,O.forceRenderStyles()},this.stylesheet=function(ee){for(var X={},Q=0,ne=Object.getOwnPropertyNames(ee);Q<ne.length;Q++){var ce=ne[Q],Fe=ee[ce];Fe&&(Fe.$debugName=ce,X[ce]=O.style(Fe))}return X};var Z=S();this._autoGenerateTag=G,this._freeStyle=Z,this._lastFreeStyleChangeId=Z.changeId,this._pending=0,this._pendingRawChange=!1,this._raw="",this._tag=void 0,this.style=this.style.bind(this)}return R.prototype._afterAllSync=function(q){var G=this;this._pending++;var O=this._pending;y((function(){O===G._pending&&q()}))},R.prototype._getTag=function(){if(this._tag)return this._tag;if(this._autoGenerateTag){var q=typeof window>"u"?{textContent:""}:document.createElement("style");return typeof document<"u"&&document.head.appendChild(q),this._tag=q,q}},R.prototype._styleUpdated=function(){var q=this,G=this._freeStyle.changeId,O=this._lastFreeStyleChangeId;(this._pendingRawChange||G!==O)&&(this._lastFreeStyleChangeId=G,this._pendingRawChange=!1,this._afterAllSync((function(){return q.forceRenderStyles()})))},R.prototype.style=function(){var q=this._freeStyle,G=p(b.apply(void 0,arguments)),O=G.result,Z=G.debugName,ee=Z?q.registerStyle(O,Z):q.registerStyle(O);return this._styleUpdated(),ee},R})(),w=d(5207),_=new A({autoGenerateTag:!0}),k=_.setStylesTarget,F=_.cssRaw,M=_.cssRule,N=_.forceRenderStyles,P=_.fontFace,L=_.getStyles,H=_.keyframes,I=_.reinit,U=_.style,z=_.stylesheet;function T(R){var q=new A({autoGenerateTag:!1});return R&&q.setStylesTarget(R),q}},5207:function(){},4098:function(c){c.exports=n},4262:function(c){c.exports=i},5965:function(c,l){var d;(function(){var h={}.hasOwnProperty;function p(){for(var b="",x=0;x<arguments.length;x++){var D=arguments[x];D&&(b=v(b,y(D)))}return b}function y(b){if(typeof b=="string"||typeof b=="number")return b;if(typeof b!="object")return"";if(Array.isArray(b))return p.apply(null,b);if(b.toString!==Object.prototype.toString&&!b.toString.toString().includes("[native code]"))return b.toString();var x="";for(var D in b)h.call(b,D)&&b[D]&&(x=v(x,D));return x}function v(b,x){return x?b?b+" "+x:b+x:b}c.exports?(p.default=p,c.exports=p):(d=(function(){return p}).apply(l,[]))===void 0||(c.exports=d)})()},7582:function(c,l,d){d.r(l),d.d(l,{__addDisposableResource:function(){return ce},__assign:function(){return y},__asyncDelegator:function(){return R},__asyncGenerator:function(){return T},__asyncValues:function(){return q},__await:function(){return z},__awaiter:function(){return k},__classPrivateFieldGet:function(){return X},__classPrivateFieldIn:function(){return ne},__classPrivateFieldSet:function(){return Q},__createBinding:function(){return M},__decorate:function(){return b},__disposeResources:function(){return Me},__esDecorate:function(){return D},__exportStar:function(){return N},__extends:function(){return p},__generator:function(){return F},__importDefault:function(){return ee},__importStar:function(){return Z},__makeTemplateObject:function(){return G},__metadata:function(){return _},__param:function(){return x},__propKey:function(){return A},__read:function(){return L},__rest:function(){return v},__runInitializers:function(){return S},__setFunctionName:function(){return w},__spread:function(){return H},__spreadArray:function(){return U},__spreadArrays:function(){return I},__values:function(){return P}});var h=function(j,W){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(te,Y){te.__proto__=Y}||function(te,Y){for(var le in Y)Object.prototype.hasOwnProperty.call(Y,le)&&(te[le]=Y[le])},h(j,W)};function p(j,W){if(typeof W!="function"&&W!==null)throw new TypeError("Class extends value "+String(W)+" is not a constructor or null");function te(){this.constructor=j}h(j,W),j.prototype=W===null?Object.create(W):(te.prototype=W.prototype,new te)}var y=function(){return y=Object.assign||function(j){for(var W,te=1,Y=arguments.length;te<Y;te++)for(var le in W=arguments[te])Object.prototype.hasOwnProperty.call(W,le)&&(j[le]=W[le]);return j},y.apply(this,arguments)};function v(j,W){var te={};for(var Y in j)Object.prototype.hasOwnProperty.call(j,Y)&&W.indexOf(Y)<0&&(te[Y]=j[Y]);if(j!=null&&typeof Object.getOwnPropertySymbols=="function"){var le=0;for(Y=Object.getOwnPropertySymbols(j);le<Y.length;le++)W.indexOf(Y[le])<0&&Object.prototype.propertyIsEnumerable.call(j,Y[le])&&(te[Y[le]]=j[Y[le]])}return te}function b(j,W,te,Y){var le,Te=arguments.length,oe=Te<3?W:Y===null?Y=Object.getOwnPropertyDescriptor(W,te):Y;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")oe=Reflect.decorate(j,W,te,Y);else for(var ge=j.length-1;ge>=0;ge--)(le=j[ge])&&(oe=(Te<3?le(oe):Te>3?le(W,te,oe):le(W,te))||oe);return Te>3&&oe&&Object.defineProperty(W,te,oe),oe}function x(j,W){return function(te,Y){W(te,Y,j)}}function D(j,W,te,Y,le,Te){function oe(dt){if(dt!==void 0&&typeof dt!="function")throw new TypeError("Function expected");return dt}for(var ge,Ae=Y.kind,K=Ae==="getter"?"get":Ae==="setter"?"set":"value",re=!W&&j?Y.static?j:j.prototype:null,he=W||(re?Object.getOwnPropertyDescriptor(re,Y.name):{}),ye=!1,Se=te.length-1;Se>=0;Se--){var Ce={};for(var Ne in Y)Ce[Ne]=Ne==="access"?{}:Y[Ne];for(var Ne in Y.access)Ce.access[Ne]=Y.access[Ne];Ce.addInitializer=function(dt){if(ye)throw new TypeError("Cannot add initializers after decoration has completed");Te.push(oe(dt||null))};var tt=(0,te[Se])(Ae==="accessor"?{get:he.get,set:he.set}:he[K],Ce);if(Ae==="accessor"){if(tt===void 0)continue;if(tt===null||typeof tt!="object")throw new TypeError("Object expected");(ge=oe(tt.get))&&(he.get=ge),(ge=oe(tt.set))&&(he.set=ge),(ge=oe(tt.init))&&le.unshift(ge)}else(ge=oe(tt))&&(Ae==="field"?le.unshift(ge):he[K]=ge)}re&&Object.defineProperty(re,Y.name,he),ye=!0}function S(j,W,te){for(var Y=arguments.length>2,le=0;le<W.length;le++)te=Y?W[le].call(j,te):W[le].call(j);return Y?te:void 0}function A(j){return typeof j=="symbol"?j:"".concat(j)}function w(j,W,te){return typeof W=="symbol"&&(W=W.description?"[".concat(W.description,"]"):""),Object.defineProperty(j,"name",{configurable:!0,value:te?"".concat(te," ",W):W})}function _(j,W){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(j,W)}function k(j,W,te,Y){return new(te||(te=Promise))((function(le,Te){function oe(K){try{Ae(Y.next(K))}catch(re){Te(re)}}function ge(K){try{Ae(Y.throw(K))}catch(re){Te(re)}}function Ae(K){var re;K.done?le(K.value):(re=K.value,re instanceof te?re:new te((function(he){he(re)}))).then(oe,ge)}Ae((Y=Y.apply(j,W||[])).next())}))}function F(j,W){var te,Y,le,Te,oe={label:0,sent:function(){if(1&le[0])throw le[1];return le[1]},trys:[],ops:[]};return Te={next:ge(0),throw:ge(1),return:ge(2)},typeof Symbol=="function"&&(Te[Symbol.iterator]=function(){return this}),Te;function ge(Ae){return function(K){return(function(re){if(te)throw new TypeError("Generator is already executing.");for(;Te&&(Te=0,re[0]&&(oe=0)),oe;)try{if(te=1,Y&&(le=2&re[0]?Y.return:re[0]?Y.throw||((le=Y.return)&&le.call(Y),0):Y.next)&&!(le=le.call(Y,re[1])).done)return le;switch(Y=0,le&&(re=[2&re[0],le.value]),re[0]){case 0:case 1:le=re;break;case 4:return oe.label++,{value:re[1],done:!1};case 5:oe.label++,Y=re[1],re=[0];continue;case 7:re=oe.ops.pop(),oe.trys.pop();continue;default:if(!((le=(le=oe.trys).length>0&&le[le.length-1])||re[0]!==6&&re[0]!==2)){oe=0;continue}if(re[0]===3&&(!le||re[1]>le[0]&&re[1]<le[3])){oe.label=re[1];break}if(re[0]===6&&oe.label<le[1]){oe.label=le[1],le=re;break}if(le&&oe.label<le[2]){oe.label=le[2],oe.ops.push(re);break}le[2]&&oe.ops.pop(),oe.trys.pop();continue}re=W.call(j,oe)}catch(he){re=[6,he],Y=0}finally{te=le=0}if(5&re[0])throw re[1];return{value:re[0]?re[1]:void 0,done:!0}})([Ae,K])}}}var M=Object.create?function(j,W,te,Y){Y===void 0&&(Y=te);var le=Object.getOwnPropertyDescriptor(W,te);le&&!("get"in le?!W.__esModule:le.writable||le.configurable)||(le={enumerable:!0,get:function(){return W[te]}}),Object.defineProperty(j,Y,le)}:function(j,W,te,Y){Y===void 0&&(Y=te),j[Y]=W[te]};function N(j,W){for(var te in j)te==="default"||Object.prototype.hasOwnProperty.call(W,te)||M(W,j,te)}function P(j){var W=typeof Symbol=="function"&&Symbol.iterator,te=W&&j[W],Y=0;if(te)return te.call(j);if(j&&typeof j.length=="number")return{next:function(){return j&&Y>=j.length&&(j=void 0),{value:j&&j[Y++],done:!j}}};throw new TypeError(W?"Object is not iterable.":"Symbol.iterator is not defined.")}function L(j,W){var te=typeof Symbol=="function"&&j[Symbol.iterator];if(!te)return j;var Y,le,Te=te.call(j),oe=[];try{for(;(W===void 0||W-- >0)&&!(Y=Te.next()).done;)oe.push(Y.value)}catch(ge){le={error:ge}}finally{try{Y&&!Y.done&&(te=Te.return)&&te.call(Te)}finally{if(le)throw le.error}}return oe}function H(){for(var j=[],W=0;W<arguments.length;W++)j=j.concat(L(arguments[W]));return j}function I(){for(var j=0,W=0,te=arguments.length;W<te;W++)j+=arguments[W].length;var Y=Array(j),le=0;for(W=0;W<te;W++)for(var Te=arguments[W],oe=0,ge=Te.length;oe<ge;oe++,le++)Y[le]=Te[oe];return Y}function U(j,W,te){if(te||arguments.length===2)for(var Y,le=0,Te=W.length;le<Te;le++)!Y&&le in W||(Y||(Y=Array.prototype.slice.call(W,0,le)),Y[le]=W[le]);return j.concat(Y||Array.prototype.slice.call(W))}function z(j){return this instanceof z?(this.v=j,this):new z(j)}function T(j,W,te){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Y,le=te.apply(j,W||[]),Te=[];return Y={},oe("next"),oe("throw"),oe("return",(function(he){return function(ye){return Promise.resolve(ye).then(he,K)}})),Y[Symbol.asyncIterator]=function(){return this},Y;function oe(he,ye){le[he]&&(Y[he]=function(Se){return new Promise((function(Ce,Ne){Te.push([he,Se,Ce,Ne])>1||ge(he,Se)}))},ye&&(Y[he]=ye(Y[he])))}function ge(he,ye){try{(Se=le[he](ye)).value instanceof z?Promise.resolve(Se.value.v).then(Ae,K):re(Te[0][2],Se)}catch(Ce){re(Te[0][3],Ce)}var Se}function Ae(he){ge("next",he)}function K(he){ge("throw",he)}function re(he,ye){he(ye),Te.shift(),Te.length&&ge(Te[0][0],Te[0][1])}}function R(j){var W,te;return W={},Y("next"),Y("throw",(function(le){throw le})),Y("return"),W[Symbol.iterator]=function(){return this},W;function Y(le,Te){W[le]=j[le]?function(oe){return(te=!te)?{value:z(j[le](oe)),done:!1}:Te?Te(oe):oe}:Te}}function q(j){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var W,te=j[Symbol.asyncIterator];return te?te.call(j):(j=P(j),W={},Y("next"),Y("throw"),Y("return"),W[Symbol.asyncIterator]=function(){return this},W);function Y(le){W[le]=j[le]&&function(Te){return new Promise((function(oe,ge){(function(Ae,K,re,he){Promise.resolve(he).then((function(ye){Ae({value:ye,done:re})}),K)})(oe,ge,(Te=j[le](Te)).done,Te.value)}))}}}function G(j,W){return Object.defineProperty?Object.defineProperty(j,"raw",{value:W}):j.raw=W,j}var O=Object.create?function(j,W){Object.defineProperty(j,"default",{enumerable:!0,value:W})}:function(j,W){j.default=W};function Z(j){if(j&&j.__esModule)return j;var W={};if(j!=null)for(var te in j)te!=="default"&&Object.prototype.hasOwnProperty.call(j,te)&&M(W,j,te);return O(W,j),W}function ee(j){return j&&j.__esModule?j:{default:j}}function X(j,W,te,Y){if(te==="a"&&!Y)throw new TypeError("Private accessor was defined without a getter");if(typeof W=="function"?j!==W||!Y:!W.has(j))throw new TypeError("Cannot read private member from an object whose class did not declare it");return te==="m"?Y:te==="a"?Y.call(j):Y?Y.value:W.get(j)}function Q(j,W,te,Y,le){if(Y==="m")throw new TypeError("Private method is not writable");if(Y==="a"&&!le)throw new TypeError("Private accessor was defined without a setter");if(typeof W=="function"?j!==W||!le:!W.has(j))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Y==="a"?le.call(j,te):le?le.value=te:W.set(j,te),te}function ne(j,W){if(W===null||typeof W!="object"&&typeof W!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof j=="function"?W===j:j.has(W)}function ce(j,W,te){if(W!=null){if(typeof W!="object"&&typeof W!="function")throw new TypeError("Object expected.");var Y,le;if(te){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Y=W[Symbol.asyncDispose]}if(Y===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");Y=W[Symbol.dispose],te&&(le=Y)}if(typeof Y!="function")throw new TypeError("Object not disposable.");le&&(Y=function(){try{le.call(this)}catch(Te){return Promise.reject(Te)}}),j.stack.push({value:W,dispose:Y,async:te})}else te&&j.stack.push({async:!0});return W}var Fe=typeof SuppressedError=="function"?SuppressedError:function(j,W,te){var Y=new Error(te);return Y.name="SuppressedError",Y.error=j,Y.suppressed=W,Y};function Me(j){function W(te){j.error=j.hasError?new Fe(te,j.error,"An error was suppressed during disposal."):te,j.hasError=!0}return(function te(){for(;j.stack.length;){var Y=j.stack.pop();try{var le=Y.dispose&&Y.dispose.call(Y.value);if(Y.async)return Promise.resolve(le).then(te,(function(Te){return W(Te),te()}))}catch(Te){W(Te)}}if(j.hasError)throw j.error})()}l.default={__extends:p,__assign:y,__rest:v,__decorate:b,__param:x,__metadata:_,__awaiter:k,__generator:F,__createBinding:M,__exportStar:N,__values:P,__read:L,__spread:H,__spreadArrays:I,__spreadArray:U,__await:z,__asyncGenerator:T,__asyncDelegator:R,__asyncValues:q,__makeTemplateObject:G,__importStar:Z,__importDefault:ee,__classPrivateFieldGet:X,__classPrivateFieldSet:Q,__classPrivateFieldIn:ne,__addDisposableResource:ce,__disposeResources:Me}}},a={};function o(c){var l=a[c];if(l!==void 0)return l.exports;var d=a[c]={exports:{}};return r[c].call(d.exports,d,d.exports,o),d.exports}o.n=function(c){var l=c&&c.__esModule?function(){return c.default}:function(){return c};return o.d(l,{a:l}),l},o.d=function(c,l){for(var d in l)o.o(l,d)&&!o.o(c,d)&&Object.defineProperty(c,d,{enumerable:!0,get:l[d]})},o.o=function(c,l){return Object.prototype.hasOwnProperty.call(c,l)},o.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})};var u={};return(function(){var c=u;Object.defineProperty(c,"__esModule",{value:!0}),c.forceRenderStyles=c.LabeledField=c.useInitiallyHiddenElement=c.HeightAnimator=c.ToggleSwitch=c.TextLink=c.TextFieldGroup=c.TextField=c.TextArea=c.Tabs=c.Sticker=c.Stepper=c.Spinner=c.SideTabsPane=c.SideTabs=c.SideTab=c.Radio=c.Pill=c.DropdownSelect=c.Disclosure=c.isColorInPalette=c.LightsPalette=c.FlowsPalette=c.DarksPalette=c.ColorGrid=c.Checkbox=c.Button=c.Badge=void 0;var l=o(7409);Object.defineProperty(c,"Badge",{enumerable:!0,get:function(){return l.Badge}});var d=o(9405);Object.defineProperty(c,"Button",{enumerable:!0,get:function(){return d.Button}});var h=o(6156);Object.defineProperty(c,"Checkbox",{enumerable:!0,get:function(){return h.Checkbox}});var p=o(5516);Object.defineProperty(c,"ColorGrid",{enumerable:!0,get:function(){return p.ColorGrid}});var y=o(4535);Object.defineProperty(c,"DarksPalette",{enumerable:!0,get:function(){return y.DarksPalette}}),Object.defineProperty(c,"FlowsPalette",{enumerable:!0,get:function(){return y.FlowsPalette}}),Object.defineProperty(c,"LightsPalette",{enumerable:!0,get:function(){return y.LightsPalette}}),Object.defineProperty(c,"isColorInPalette",{enumerable:!0,get:function(){return y.isColorInPalette}});var v=o(9438);Object.defineProperty(c,"Disclosure",{enumerable:!0,get:function(){return v.Disclosure}});var b=o(2957);Object.defineProperty(c,"DropdownSelect",{enumerable:!0,get:function(){return b.DropdownSelect}});var x=o(412);Object.defineProperty(c,"Pill",{enumerable:!0,get:function(){return x.Pill}});var D=o(550);Object.defineProperty(c,"Radio",{enumerable:!0,get:function(){return D.Radio}});var S=o(8169);Object.defineProperty(c,"SideTab",{enumerable:!0,get:function(){return S.SideTab}}),Object.defineProperty(c,"SideTabs",{enumerable:!0,get:function(){return S.SideTabs}});var A=o(6514);Object.defineProperty(c,"SideTabsPane",{enumerable:!0,get:function(){return A.SideTabsPane}});var w=o(926);Object.defineProperty(c,"Spinner",{enumerable:!0,get:function(){return w.Spinner}});var _=o(2191);Object.defineProperty(c,"Stepper",{enumerable:!0,get:function(){return _.Stepper}});var k=o(4548);Object.defineProperty(c,"Sticker",{enumerable:!0,get:function(){return k.Sticker}});var F=o(5025);Object.defineProperty(c,"Tabs",{enumerable:!0,get:function(){return F.Tabs}});var M=o(8371);Object.defineProperty(c,"TextArea",{enumerable:!0,get:function(){return M.TextArea}});var N=o(2363);Object.defineProperty(c,"TextField",{enumerable:!0,get:function(){return N.TextField}});var P=o(9831);Object.defineProperty(c,"TextFieldGroup",{enumerable:!0,get:function(){return P.TextFieldGroup}});var L=o(6663);Object.defineProperty(c,"TextLink",{enumerable:!0,get:function(){return L.TextLink}});var H=o(3187);Object.defineProperty(c,"ToggleSwitch",{enumerable:!0,get:function(){return H.ToggleSwitch}});var I=o(9358);Object.defineProperty(c,"HeightAnimator",{enumerable:!0,get:function(){return I.HeightAnimator}});var U=o(5817);Object.defineProperty(c,"useInitiallyHiddenElement",{enumerable:!0,get:function(){return U.useInitiallyHiddenElement}});var z=o(7356);Object.defineProperty(c,"LabeledField",{enumerable:!0,get:function(){return z.LabeledField}});var T=o(16);Object.defineProperty(c,"forceRenderStyles",{enumerable:!0,get:function(){return T.forceRenderStyles}})})(),u})()}))})(pS)),pS.exports}var l_e=bAe();export{EAe as c,u_e as e,xAe as j,s_e as l,DAe as r,l_e as t};
