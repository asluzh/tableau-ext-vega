(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();(()=>{var e={163:(i,o,a)=>{a(9228);var s=a(8791);i.exports=s("Array","find")},6916:(i,o,a)=>{a(8673),a(7233);var s=a(9276);i.exports=s.Array.from},9618:(i,o,a)=>{a(5735),a(9321),a(8188),a(8673);var s=a(9276);i.exports=s.Map},5611:(i,o,a)=>{a(3132);var s=a(9276);i.exports=s.Number.isInteger},2316:(i,o,a)=>{a(4586);var s=a(9276);i.exports=s.Number.isNaN},119:(i,o,a)=>{a(8836);var s=a(9276);i.exports=s.Number.parseFloat},1980:(i,o,a)=>{a(7208);var s=a(9276);i.exports=s.Number.parseInt},47:(i,o,a)=>{a(3105);var s=a(9276);i.exports=s.Object.assign},188:(i,o,a)=>{a(5883);var s=a(9276);i.exports=s.Object.entries},5956:(i,o,a)=>{a(2506);var s=a(9276);i.exports=s.Object.setPrototypeOf},4137:(i,o,a)=>{a(5738),a(5735),a(8188),a(3439),a(7919),a(7178),a(1515),a(8673);var s=a(9276);i.exports=s.Promise},7111:(i,o,a)=>{var s=a(9859),l=a(6733),u=a(9821),f=s.TypeError;i.exports=function(d){if(l(d))return d;throw f(u(d)+" is not a function")}},7988:(i,o,a)=>{var s=a(9859),l=a(2359),u=a(9821),f=s.TypeError;i.exports=function(d){if(l(d))return d;throw f(u(d)+" is not a constructor")}},8505:(i,o,a)=>{var s=a(9859),l=a(6733),u=s.String,f=s.TypeError;i.exports=function(d){if(typeof d=="object"||l(d))return d;throw f("Can't set "+u(d)+" as a prototype")}},9736:(i,o,a)=>{var s=a(95),l=a(7263),u=a(1787),f=s("unscopables"),d=Array.prototype;d[f]==null&&u.f(d,f,{configurable:!0,value:l(null)}),i.exports=function(p){d[f][p]=!0}},7728:(i,o,a)=>{var s=a(9859),l=a(1321),u=s.TypeError;i.exports=function(f,d){if(l(d,f))return f;throw u("Incorrect invocation")}},1176:(i,o,a)=>{var s=a(9859),l=a(5052),u=s.String,f=s.TypeError;i.exports=function(d){if(l(d))return d;throw f(u(d)+" is not an object")}},507:(i,o,a)=>{var s=a(9859),l=a(7636),u=a(266),f=a(2991),d=a(4960),p=a(1943),g=a(2359),y=a(9646),v=a(2324),b=a(8403),x=a(8830),_=s.Array;i.exports=function(T){var A=f(T),w=g(this),C=arguments.length,D=C>1?arguments[1]:void 0,I=D!==void 0;I&&(D=l(D,C>2?arguments[2]:void 0));var M,k,R,z,P,$,N=x(A),L=0;if(!N||this==_&&p(N))for(M=y(A),k=w?new this(M):_(M);M>L;L++)$=I?D(A[L],L):A[L],v(k,L,$);else for(P=(z=b(A,N)).next,k=w?new this:[];!(R=u(P,z)).done;L++)$=I?d(z,D,[R.value,L],!0):R.value,v(k,L,$);return k.length=L,k}},9540:(i,o,a)=>{var s=a(905),l=a(3231),u=a(9646),f=function(d){return function(p,g,y){var v,b=s(p),x=u(b),_=l(y,x);if(d&&g!=g){for(;x>_;)if((v=b[_++])!=v)return!0}else for(;x>_;_++)if((d||_ in b)&&b[_]===g)return d||_||0;return!d&&-1}};i.exports={includes:f(!0),indexOf:f(!1)}},9996:(i,o,a)=>{var s=a(7636),l=a(5968),u=a(9337),f=a(2991),d=a(9646),p=a(7501),g=l([].push),y=function(v){var b=v==1,x=v==2,_=v==3,T=v==4,A=v==6,w=v==7,C=v==5||A;return function(D,I,M,k){for(var R,z,P=f(D),$=u(P),N=s(I,M),L=d($),B=0,q=k||p,H=b?q(D,L):x||w?q(D,0):void 0;L>B;B++)if((C||B in $)&&(z=N(R=$[B],B,P),v))if(b)H[B]=z;else if(z)switch(v){case 3:return!0;case 5:return R;case 6:return B;case 2:g(H,R)}else switch(v){case 4:return!1;case 7:g(H,R)}return A?-1:_||T?T:H}};i.exports={forEach:y(0),map:y(1),filter:y(2),some:y(3),every:y(4),find:y(5),findIndex:y(6),filterReject:y(7)}},1909:(i,o,a)=>{var s=a(5968);i.exports=s([].slice)},8760:(i,o,a)=>{var s=a(9859),l=a(3718),u=a(2359),f=a(5052),d=a(95)("species"),p=s.Array;i.exports=function(g){var y;return l(g)&&(y=g.constructor,(u(y)&&(y===p||l(y.prototype))||f(y)&&(y=y[d])===null)&&(y=void 0)),y===void 0?p:y}},7501:(i,o,a)=>{var s=a(8760);i.exports=function(l,u){return new(s(l))(u===0?0:u)}},4960:(i,o,a)=>{var s=a(1176),l=a(7281);i.exports=function(u,f,d,p){try{return p?f(s(d)[0],d[1]):f(d)}catch(g){l(u,"throw",g)}}},4575:(i,o,a)=>{var s=a(95)("iterator"),l=!1;try{var u=0,f={next:function(){return{done:!!u++}},return:function(){l=!0}};f[s]=function(){return this},Array.from(f,(function(){throw 2}))}catch{}i.exports=function(d,p){if(!p&&!l)return!1;var g=!1;try{var y={};y[s]=function(){return{next:function(){return{done:g=!0}}}},d(y)}catch{}return g}},7079:(i,o,a)=>{var s=a(5968),l=s({}.toString),u=s("".slice);i.exports=function(f){return u(l(f),8,-1)}},1589:(i,o,a)=>{var s=a(9859),l=a(1601),u=a(6733),f=a(7079),d=a(95)("toStringTag"),p=s.Object,g=f((function(){return arguments})())=="Arguments";i.exports=l?f:function(y){var v,b,x;return y===void 0?"Undefined":y===null?"Null":typeof(b=(function(_,T){try{return _[T]}catch{}})(v=p(y),d))=="string"?b:g?f(v):(x=f(v))=="Object"&&u(v.callee)?"Arguments":x}},1590:(i,o,a)=>{var s=a(5968),l=a(1909),u=s("".replace),f=s("".split),d=s([].join),p=String(Error("zxcasd").stack),g=/\n\s*at [^:]*:[^\n]*/,y=g.test(p),v=/@[^\n]*\n/.test(p)&&!/zxcasd/.test(p);i.exports=function(b,x){if(typeof b!="string")return b;if(y)for(;x--;)b=u(b,g,"");else if(v)return d(l(f(b,`
`),x),`
`);return b}},8081:(i,o,a)=>{var s=a(1787).f,l=a(7263),u=a(8787),f=a(7636),d=a(7728),p=a(9003),g=a(7675),y=a(1832),v=a(7400),b=a(5926).fastKey,x=a(6407),_=x.set,T=x.getterFor;i.exports={getConstructor:function(A,w,C,D){var I=A((function(P,$){d(P,M),_(P,{type:w,index:l(null),first:void 0,last:void 0,size:0}),v||(P.size=0),$!=null&&p($,P[D],{that:P,AS_ENTRIES:C})})),M=I.prototype,k=T(w),R=function(P,$,N){var L,B,q=k(P),H=z(P,$);return H?H.value=N:(q.last=H={index:B=b($,!0),key:$,value:N,previous:L=q.last,next:void 0,removed:!1},q.first||(q.first=H),L&&(L.next=H),v?q.size++:P.size++,B!=="F"&&(q.index[B]=H)),P},z=function(P,$){var N,L=k(P),B=b($);if(B!=="F")return L.index[B];for(N=L.first;N;N=N.next)if(N.key==$)return N};return u(M,{clear:function(){for(var P=k(this),$=P.index,N=P.first;N;)N.removed=!0,N.previous&&(N.previous=N.previous.next=void 0),delete $[N.index],N=N.next;P.first=P.last=void 0,v?P.size=0:this.size=0},delete:function(P){var $=this,N=k($),L=z($,P);if(L){var B=L.next,q=L.previous;delete N.index[L.index],L.removed=!0,q&&(q.next=B),B&&(B.previous=q),N.first==L&&(N.first=B),N.last==L&&(N.last=q),v?N.size--:$.size--}return!!L},forEach:function(P){for(var $,N=k(this),L=f(P,arguments.length>1?arguments[1]:void 0);$=$?$.next:N.first;)for(L($.value,$.key,this);$&&$.removed;)$=$.previous},has:function(P){return!!z(this,P)}}),u(M,C?{get:function(P){var $=z(this,P);return $&&$.value},set:function(P,$){return R(this,P===0?0:P,$)}}:{add:function(P){return R(this,P=P===0?0:P,P)}}),v&&s(M,"size",{get:function(){return k(this).size}}),I},setStrong:function(A,w,C){var D=w+" Iterator",I=T(w),M=T(D);g(A,w,(function(k,R){_(this,{type:D,target:k,state:I(k),kind:R,last:void 0})}),(function(){for(var k=M(this),R=k.kind,z=k.last;z&&z.removed;)z=z.previous;return k.target&&(k.last=z=z?z.next:k.state.first)?R=="keys"?{value:z.key,done:!1}:R=="values"?{value:z.value,done:!1}:{value:[z.key,z.value],done:!1}:(k.target=void 0,{value:void 0,done:!0})}),C?"entries":"values",!C,!0),y(w)}}},9789:(i,o,a)=>{var s=a(3103),l=a(9859),u=a(5968),f=a(6541),d=a(7487),p=a(5926),g=a(9003),y=a(7728),v=a(6733),b=a(5052),x=a(4229),_=a(4575),T=a(4555),A=a(835);i.exports=function(w,C,D){var I=w.indexOf("Map")!==-1,M=w.indexOf("Weak")!==-1,k=I?"set":"add",R=l[w],z=R&&R.prototype,P=R,$={},N=function(Y){var Q=u(z[Y]);d(z,Y,Y=="add"?function(J){return Q(this,J===0?0:J),this}:Y=="delete"?function(J){return!(M&&!b(J))&&Q(this,J===0?0:J)}:Y=="get"?function(J){return M&&!b(J)?void 0:Q(this,J===0?0:J)}:Y=="has"?function(J){return!(M&&!b(J))&&Q(this,J===0?0:J)}:function(J,de){return Q(this,J===0?0:J,de),this})};if(f(w,!v(R)||!(M||z.forEach&&!x((function(){new R().entries().next()})))))P=D.getConstructor(C,w,I,k),p.enable();else if(f(w,!0)){var L=new P,B=L[k](M?{}:-0,1)!=L,q=x((function(){L.has(1)})),H=_((function(Y){new R(Y)})),U=!M&&x((function(){for(var Y=new R,Q=5;Q--;)Y[k](Q,Q);return!Y.has(-0)}));H||((P=C((function(Y,Q){y(Y,z);var J=A(new R,Y,P);return Q!=null&&g(Q,J[k],{that:J,AS_ENTRIES:I}),J}))).prototype=z,z.constructor=P),(q||U)&&(N("delete"),N("has"),I&&N("get")),(U||B)&&N(k),M&&z.clear&&delete z.clear}return $[w]=P,s({global:!0,forced:P!=R},$),T(P,w),M||D.setStrong(P,w,I),P}},7081:(i,o,a)=>{var s=a(8270),l=a(4826),u=a(7933),f=a(1787);i.exports=function(d,p){for(var g=l(p),y=f.f,v=u.f,b=0;b<g.length;b++){var x=g[b];s(d,x)||y(d,x,v(p,x))}}},7528:(i,o,a)=>{var s=a(4229);i.exports=!s((function(){function l(){}return l.prototype.constructor=null,Object.getPrototypeOf(new l)!==l.prototype}))},3723:(i,o,a)=>{var s=a(693).IteratorPrototype,l=a(7263),u=a(5358),f=a(4555),d=a(5495),p=function(){return this};i.exports=function(g,y,v){var b=y+" Iterator";return g.prototype=l(s,{next:u(1,v)}),f(g,b,!1,!0),d[b]=p,g}},5762:(i,o,a)=>{var s=a(7400),l=a(1787),u=a(5358);i.exports=s?function(f,d,p){return l.f(f,d,u(1,p))}:function(f,d,p){return f[d]=p,f}},5358:i=>{i.exports=function(o,a){return{enumerable:!(1&o),configurable:!(2&o),writable:!(4&o),value:a}}},2324:(i,o,a)=>{var s=a(9310),l=a(1787),u=a(5358);i.exports=function(f,d,p){var g=s(d);g in f?l.f(f,g,u(0,p)):f[g]=p}},7675:(i,o,a)=>{var s=a(3103),l=a(266),u=a(4231),f=a(1805),d=a(6733),p=a(3723),g=a(7567),y=a(6540),v=a(4555),b=a(5762),x=a(7487),_=a(95),T=a(5495),A=a(693),w=f.PROPER,C=f.CONFIGURABLE,D=A.IteratorPrototype,I=A.BUGGY_SAFARI_ITERATORS,M=_("iterator"),k="keys",R="values",z="entries",P=function(){return this};i.exports=function($,N,L,B,q,H,U){p(L,N,B);var Y,Q,J,de=function(De){if(De===q&&me)return me;if(!I&&De in Be)return Be[De];switch(De){case k:case R:case z:return function(){return new L(this,De)}}return function(){return new L(this)}},ve=N+" Iterator",we=!1,Be=$.prototype,Ve=Be[M]||Be["@@iterator"]||q&&Be[q],me=!I&&Ve||de(q),$e=N=="Array"&&Be.entries||Ve;if($e&&(Y=g($e.call(new $)))!==Object.prototype&&Y.next&&(u||g(Y)===D||(y?y(Y,D):d(Y[M])||x(Y,M,P)),v(Y,ve,!0,!0),u&&(T[ve]=P)),w&&q==R&&Ve&&Ve.name!==R&&(!u&&C?b(Be,"name",R):(we=!0,me=function(){return l(Ve,this)})),q)if(Q={values:de(R),keys:H?me:de(k),entries:de(z)},U)for(J in Q)(I||we||!(J in Be))&&x(Be,J,Q[J]);else s({target:N,proto:!0,forced:I||we},Q);return u&&!U||Be[M]===me||x(Be,M,me,{name:q}),T[N]=me,Q}},7400:(i,o,a)=>{var s=a(4229);i.exports=!s((function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}))},2635:(i,o,a)=>{var s=a(9859),l=a(5052),u=s.document,f=l(u)&&l(u.createElement);i.exports=function(d){return f?u.createElement(d):{}}},8639:i=>{i.exports=typeof window=="object"},8983:(i,o,a)=>{var s=a(598),l=a(9859);i.exports=/ipad|iphone|ipod/i.test(s)&&l.Pebble!==void 0},2023:(i,o,a)=>{var s=a(598);i.exports=/(?:ipad|iphone|ipod).*applewebkit/i.test(s)},8801:(i,o,a)=>{var s=a(7079),l=a(9859);i.exports=s(l.process)=="process"},263:(i,o,a)=>{var s=a(598);i.exports=/web0s(?!.*chrome)/i.test(s)},598:(i,o,a)=>{var s=a(1333);i.exports=s("navigator","userAgent")||""},6358:(i,o,a)=>{var s,l,u=a(9859),f=a(598),d=u.process,p=u.Deno,g=d&&d.versions||p&&p.version,y=g&&g.v8;y&&(l=(s=y.split("."))[0]>0&&s[0]<4?1:+(s[0]+s[1])),!l&&f&&(!(s=f.match(/Edge\/(\d+)/))||s[1]>=74)&&(s=f.match(/Chrome\/(\d+)/))&&(l=+s[1]),i.exports=l},8791:(i,o,a)=>{var s=a(9859),l=a(5968);i.exports=function(u,f){return l(s[u].prototype[f])}},3837:i=>{i.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},373:(i,o,a)=>{var s=a(4229),l=a(5358);i.exports=!s((function(){var u=Error("a");return!("stack"in u)||(Object.defineProperty(u,"stack",l(1,7)),u.stack!==7)}))},3103:(i,o,a)=>{var s=a(9859),l=a(7933).f,u=a(5762),f=a(7487),d=a(2079),p=a(7081),g=a(6541);i.exports=function(y,v){var b,x,_,T,A,w=y.target,C=y.global,D=y.stat;if(b=C?s:D?s[w]||d(w,{}):(s[w]||{}).prototype)for(x in v){if(T=v[x],_=y.noTargetGet?(A=l(b,x))&&A.value:b[x],!g(C?x:w+(D?".":"#")+x,y.forced)&&_!==void 0){if(typeof T==typeof _)continue;p(T,_)}(y.sham||_&&_.sham)&&u(T,"sham",!0),f(b,x,T,y)}}},4229:i=>{i.exports=function(o){try{return!!o()}catch{return!0}}},8476:(i,o,a)=>{var s=a(4229);i.exports=!s((function(){return Object.isExtensible(Object.preventExtensions({}))}))},3171:i=>{var o=Function.prototype,a=o.apply,s=o.bind,l=o.call;i.exports=typeof Reflect=="object"&&Reflect.apply||(s?l.bind(a):function(){return l.apply(a,arguments)})},7636:(i,o,a)=>{var s=a(5968),l=a(7111),u=s(s.bind);i.exports=function(f,d){return l(f),d===void 0?f:u?u(f,d):function(){return f.apply(d,arguments)}}},266:i=>{var o=Function.prototype.call;i.exports=o.bind?o.bind(o):function(){return o.apply(o,arguments)}},1805:(i,o,a)=>{var s=a(7400),l=a(8270),u=Function.prototype,f=s&&Object.getOwnPropertyDescriptor,d=l(u,"name"),p=d&&(function(){}).name==="something",g=d&&(!s||s&&f(u,"name").configurable);i.exports={EXISTS:d,PROPER:p,CONFIGURABLE:g}},5968:i=>{var o=Function.prototype,a=o.bind,s=o.call,l=a&&a.bind(s);i.exports=a?function(u){return u&&l(s,u)}:function(u){return u&&function(){return s.apply(u,arguments)}}},1333:(i,o,a)=>{var s=a(9859),l=a(6733),u=function(f){return l(f)?f:void 0};i.exports=function(f,d){return arguments.length<2?u(s[f]):s[f]&&s[f][d]}},8830:(i,o,a)=>{var s=a(1589),l=a(5300),u=a(5495),f=a(95)("iterator");i.exports=function(d){if(d!=null)return l(d,f)||l(d,"@@iterator")||u[s(d)]}},8403:(i,o,a)=>{var s=a(9859),l=a(266),u=a(7111),f=a(1176),d=a(9821),p=a(8830),g=s.TypeError;i.exports=function(y,v){var b=arguments.length<2?p(y):v;if(u(b))return f(l(b,y));throw g(d(y)+" is not iterable")}},5300:(i,o,a)=>{var s=a(7111);i.exports=function(l,u){var f=l[u];return f==null?void 0:s(f)}},9859:(i,o,a)=>{var s=function(l){return l&&l.Math==Math&&l};i.exports=s(typeof globalThis=="object"&&globalThis)||s(typeof window=="object"&&window)||s(typeof self=="object"&&self)||s(typeof a.g=="object"&&a.g)||(function(){return this})()||Function("return this")()},8270:(i,o,a)=>{var s=a(5968),l=a(2991),u=s({}.hasOwnProperty);i.exports=Object.hasOwn||function(f,d){return u(l(f),d)}},5977:i=>{i.exports={}},4665:(i,o,a)=>{var s=a(9859);i.exports=function(l,u){var f=s.console;f&&f.error&&(arguments.length==1?f.error(l):f.error(l,u))}},3777:(i,o,a)=>{var s=a(1333);i.exports=s("document","documentElement")},4394:(i,o,a)=>{var s=a(7400),l=a(4229),u=a(2635);i.exports=!s&&!l((function(){return Object.defineProperty(u("div"),"a",{get:function(){return 7}}).a!=7}))},9337:(i,o,a)=>{var s=a(9859),l=a(5968),u=a(4229),f=a(7079),d=s.Object,p=l("".split);i.exports=u((function(){return!d("z").propertyIsEnumerable(0)}))?function(g){return f(g)=="String"?p(g,""):d(g)}:d},835:(i,o,a)=>{var s=a(6733),l=a(5052),u=a(6540);i.exports=function(f,d,p){var g,y;return u&&s(g=d.constructor)&&g!==p&&l(y=g.prototype)&&y!==p.prototype&&u(f,y),f}},8511:(i,o,a)=>{var s=a(5968),l=a(6733),u=a(5353),f=s(Function.toString);l(u.inspectSource)||(u.inspectSource=function(d){return f(d)}),i.exports=u.inspectSource},9679:(i,o,a)=>{var s=a(5052),l=a(5762);i.exports=function(u,f){s(f)&&"cause"in f&&l(u,"cause",f.cause)}},5926:(i,o,a)=>{var s=a(3103),l=a(5968),u=a(5977),f=a(5052),d=a(8270),p=a(1787).f,g=a(8151),y=a(166),v=a(1441),b=a(8476),x=!1,_=v("meta"),T=0,A=Object.isExtensible||function(){return!0},w=function(D){p(D,_,{value:{objectID:"O"+T++,weakData:{}}})},C=i.exports={enable:function(){C.enable=function(){},x=!0;var D=g.f,I=l([].splice),M={};M[_]=1,D(M).length&&(g.f=function(k){for(var R=D(k),z=0,P=R.length;z<P;z++)if(R[z]===_){I(R,z,1);break}return R},s({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:y.f}))},fastKey:function(D,I){if(!f(D))return typeof D=="symbol"?D:(typeof D=="string"?"S":"P")+D;if(!d(D,_)){if(!A(D))return"F";if(!I)return"E";w(D)}return D[_].objectID},getWeakData:function(D,I){if(!d(D,_)){if(!A(D))return!0;if(!I)return!1;w(D)}return D[_].weakData},onFreeze:function(D){return b&&x&&A(D)&&!d(D,_)&&w(D),D}};u[_]=!0},6407:(i,o,a)=>{var s,l,u,f=a(8694),d=a(9859),p=a(5968),g=a(5052),y=a(5762),v=a(8270),b=a(5353),x=a(4399),_=a(5977),T="Object already initialized",A=d.TypeError,w=d.WeakMap;if(f||b.state){var C=b.state||(b.state=new w),D=p(C.get),I=p(C.has),M=p(C.set);s=function(R,z){if(I(C,R))throw new A(T);return z.facade=R,M(C,R,z),z},l=function(R){return D(C,R)||{}},u=function(R){return I(C,R)}}else{var k=x("state");_[k]=!0,s=function(R,z){if(v(R,k))throw new A(T);return z.facade=R,y(R,k,z),z},l=function(R){return v(R,k)?R[k]:{}},u=function(R){return v(R,k)}}i.exports={set:s,get:l,has:u,enforce:function(R){return u(R)?l(R):s(R,{})},getterFor:function(R){return function(z){var P;if(!g(z)||(P=l(z)).type!==R)throw A("Incompatible receiver, "+R+" required");return P}}}},1943:(i,o,a)=>{var s=a(95),l=a(5495),u=s("iterator"),f=Array.prototype;i.exports=function(d){return d!==void 0&&(l.Array===d||f[u]===d)}},3718:(i,o,a)=>{var s=a(7079);i.exports=Array.isArray||function(l){return s(l)=="Array"}},6733:i=>{i.exports=function(o){return typeof o=="function"}},2359:(i,o,a)=>{var s=a(5968),l=a(4229),u=a(6733),f=a(1589),d=a(1333),p=a(8511),g=function(){},y=[],v=d("Reflect","construct"),b=/^\s*(?:class|function)\b/,x=s(b.exec),_=!b.exec(g),T=function(A){if(!u(A))return!1;try{return v(g,y,A),!0}catch{return!1}};i.exports=!v||l((function(){var A;return T(T.call)||!T(Object)||!T((function(){A=!0}))||A}))?function(A){if(!u(A))return!1;switch(f(A)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return _||!!x(b,p(A))}:T},6541:(i,o,a)=>{var s=a(4229),l=a(6733),u=/#|\.prototype\./,f=function(v,b){var x=p[d(v)];return x==y||x!=g&&(l(b)?s(b):!!b)},d=f.normalize=function(v){return String(v).replace(u,".").toLowerCase()},p=f.data={},g=f.NATIVE="N",y=f.POLYFILL="P";i.exports=f},2292:(i,o,a)=>{var s=a(5052),l=Math.floor;i.exports=Number.isInteger||function(u){return!s(u)&&isFinite(u)&&l(u)===u}},5052:(i,o,a)=>{var s=a(6733);i.exports=function(l){return typeof l=="object"?l!==null:s(l)}},4231:i=>{i.exports=!1},9395:(i,o,a)=>{var s=a(9859),l=a(1333),u=a(6733),f=a(1321),d=a(6969),p=s.Object;i.exports=d?function(g){return typeof g=="symbol"}:function(g){var y=l("Symbol");return u(y)&&f(y.prototype,p(g))}},9003:(i,o,a)=>{var s=a(9859),l=a(7636),u=a(266),f=a(1176),d=a(9821),p=a(1943),g=a(9646),y=a(1321),v=a(8403),b=a(8830),x=a(7281),_=s.TypeError,T=function(w,C){this.stopped=w,this.result=C},A=T.prototype;i.exports=function(w,C,D){var I,M,k,R,z,P,$,N=D&&D.that,L=!(!D||!D.AS_ENTRIES),B=!(!D||!D.IS_ITERATOR),q=!(!D||!D.INTERRUPTED),H=l(C,N),U=function(Q){return I&&x(I,"normal",Q),new T(!0,Q)},Y=function(Q){return L?(f(Q),q?H(Q[0],Q[1],U):H(Q[0],Q[1])):q?H(Q,U):H(Q)};if(B)I=w;else{if(!(M=b(w)))throw _(d(w)+" is not iterable");if(p(M)){for(k=0,R=g(w);R>k;k++)if((z=Y(w[k]))&&y(A,z))return z;return new T(!1)}I=v(w,M)}for(P=I.next;!($=u(P,I)).done;){try{z=Y($.value)}catch(Q){x(I,"throw",Q)}if(typeof z=="object"&&z&&y(A,z))return z}return new T(!1)}},7281:(i,o,a)=>{var s=a(266),l=a(1176),u=a(5300);i.exports=function(f,d,p){var g,y;l(f);try{if(!(g=u(f,"return"))){if(d==="throw")throw p;return p}g=s(g,f)}catch(v){y=!0,g=v}if(d==="throw")throw p;if(y)throw g;return l(g),p}},693:(i,o,a)=>{var s,l,u,f=a(4229),d=a(6733),p=a(7263),g=a(7567),y=a(7487),v=a(95),b=a(4231),x=v("iterator"),_=!1;[].keys&&("next"in(u=[].keys())?(l=g(g(u)))!==Object.prototype&&(s=l):_=!0),s==null||f((function(){var T={};return s[x].call(T)!==T}))?s={}:b&&(s=p(s)),d(s[x])||y(s,x,(function(){return this})),i.exports={IteratorPrototype:s,BUGGY_SAFARI_ITERATORS:_}},5495:i=>{i.exports={}},9646:(i,o,a)=>{var s=a(4237);i.exports=function(l){return s(l.length)}},4794:(i,o,a)=>{var s,l,u,f,d,p,g,y,v=a(9859),b=a(7636),x=a(7933).f,_=a(5795).set,T=a(2023),A=a(8983),w=a(263),C=a(8801),D=v.MutationObserver||v.WebKitMutationObserver,I=v.document,M=v.process,k=v.Promise,R=x(v,"queueMicrotask"),z=R&&R.value;z||(s=function(){var P,$;for(C&&(P=M.domain)&&P.exit();l;){$=l.fn,l=l.next;try{$()}catch(N){throw l?f():u=void 0,N}}u=void 0,P&&P.enter()},T||C||w||!D||!I?!A&&k&&k.resolve?((g=k.resolve(void 0)).constructor=k,y=b(g.then,g),f=function(){y(s)}):C?f=function(){M.nextTick(s)}:(_=b(_,v),f=function(){_(s)}):(d=!0,p=I.createTextNode(""),new D(s).observe(p,{characterData:!0}),f=function(){p.data=d=!d})),i.exports=z||function(P){var $={fn:P,next:void 0};u&&(u.next=$),l||(l=$,f()),u=$}},4226:(i,o,a)=>{var s=a(9859);i.exports=s.Promise},3839:(i,o,a)=>{var s=a(6358),l=a(4229);i.exports=!!Object.getOwnPropertySymbols&&!l((function(){var u=Symbol();return!String(u)||!(Object(u)instanceof Symbol)||!Symbol.sham&&s&&s<41}))},8694:(i,o,a)=>{var s=a(9859),l=a(6733),u=a(8511),f=s.WeakMap;i.exports=l(f)&&/native code/.test(u(f))},6485:(i,o,a)=>{var s=a(7111),l=function(u){var f,d;this.promise=new u((function(p,g){if(f!==void 0||d!==void 0)throw TypeError("Bad Promise constructor");f=p,d=g})),this.resolve=s(f),this.reject=s(d)};i.exports.f=function(u){return new l(u)}},635:(i,o,a)=>{var s=a(3326);i.exports=function(l,u){return l===void 0?arguments.length<2?"":u:s(l)}},5496:(i,o,a)=>{var s=a(9859),l=a(4229),u=a(5968),f=a(3326),d=a(1017).trim,p=a(1647),g=u("".charAt),y=s.parseFloat,v=s.Symbol,b=v&&v.iterator,x=1/y(p+"-0")!=-1/0||b&&!l((function(){y(Object(b))}));i.exports=x?function(_){var T=d(f(_)),A=y(T);return A===0&&g(T,0)=="-"?-0:A}:y},6596:(i,o,a)=>{var s=a(9859),l=a(4229),u=a(5968),f=a(3326),d=a(1017).trim,p=a(1647),g=s.parseInt,y=s.Symbol,v=y&&y.iterator,b=/^[+-]?0x/i,x=u(b.exec),_=g(p+"08")!==8||g(p+"0x16")!==22||v&&!l((function(){g(Object(v))}));i.exports=_?function(T,A){var w=d(f(T));return g(w,A>>>0||(x(b,w)?16:10))}:g},7888:(i,o,a)=>{var s=a(7400),l=a(5968),u=a(266),f=a(4229),d=a(5632),p=a(894),g=a(9195),y=a(2991),v=a(9337),b=Object.assign,x=Object.defineProperty,_=l([].concat);i.exports=!b||f((function(){if(s&&b({b:1},b(x({},"a",{enumerable:!0,get:function(){x(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var T={},A={},w=Symbol(),C="abcdefghijklmnopqrst";return T[w]=7,C.split("").forEach((function(D){A[D]=D})),b({},T)[w]!=7||d(b({},A)).join("")!=C}))?function(T,A){for(var w=y(T),C=arguments.length,D=1,I=p.f,M=g.f;C>D;)for(var k,R=v(arguments[D++]),z=I?_(d(R),I(R)):d(R),P=z.length,$=0;P>$;)k=z[$++],s&&!u(M,R,k)||(w[k]=R[k]);return w}:b},7263:(i,o,a)=>{var s,l=a(1176),u=a(219),f=a(3837),d=a(5977),p=a(3777),g=a(2635),y=a(4399)("IE_PROTO"),v=function(){},b=function(T){return"<script>"+T+"<\/script>"},x=function(T){T.write(b("")),T.close();var A=T.parentWindow.Object;return T=null,A},_=function(){try{s=new ActiveXObject("htmlfile")}catch{}var T,A;_=typeof document<"u"?document.domain&&s?x(s):((A=g("iframe")).style.display="none",p.appendChild(A),A.src="javascript:",(T=A.contentWindow.document).open(),T.write(b("document.F=Object")),T.close(),T.F):x(s);for(var w=f.length;w--;)delete _.prototype[f[w]];return _()};d[y]=!0,i.exports=Object.create||function(T,A){var w;return T!==null?(v.prototype=l(T),w=new v,v.prototype=null,w[y]=T):w=_(),A===void 0?w:u(w,A)}},219:(i,o,a)=>{var s=a(7400),l=a(1787),u=a(1176),f=a(905),d=a(5632);i.exports=s?Object.defineProperties:function(p,g){u(p);for(var y,v=f(g),b=d(g),x=b.length,_=0;x>_;)l.f(p,y=b[_++],v[y]);return p}},1787:(i,o,a)=>{var s=a(9859),l=a(7400),u=a(4394),f=a(1176),d=a(9310),p=s.TypeError,g=Object.defineProperty;o.f=l?g:function(y,v,b){if(f(y),v=d(v),f(b),u)try{return g(y,v,b)}catch{}if("get"in b||"set"in b)throw p("Accessors not supported");return"value"in b&&(y[v]=b.value),y}},7933:(i,o,a)=>{var s=a(7400),l=a(266),u=a(9195),f=a(5358),d=a(905),p=a(9310),g=a(8270),y=a(4394),v=Object.getOwnPropertyDescriptor;o.f=s?v:function(b,x){if(b=d(b),x=p(x),y)try{return v(b,x)}catch{}if(g(b,x))return f(!l(u.f,b,x),b[x])}},166:(i,o,a)=>{var s=a(7079),l=a(905),u=a(8151).f,f=a(1909),d=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];i.exports.f=function(p){return d&&s(p)=="Window"?(function(g){try{return u(g)}catch{return f(d)}})(p):u(l(p))}},8151:(i,o,a)=>{var s=a(140),l=a(3837).concat("length","prototype");o.f=Object.getOwnPropertyNames||function(u){return s(u,l)}},894:(i,o)=>{o.f=Object.getOwnPropertySymbols},7567:(i,o,a)=>{var s=a(9859),l=a(8270),u=a(6733),f=a(2991),d=a(4399),p=a(7528),g=d("IE_PROTO"),y=s.Object,v=y.prototype;i.exports=p?y.getPrototypeOf:function(b){var x=f(b);if(l(x,g))return x[g];var _=x.constructor;return u(_)&&x instanceof _?_.prototype:x instanceof y?v:null}},1321:(i,o,a)=>{var s=a(5968);i.exports=s({}.isPrototypeOf)},140:(i,o,a)=>{var s=a(5968),l=a(8270),u=a(905),f=a(9540).indexOf,d=a(5977),p=s([].push);i.exports=function(g,y){var v,b=u(g),x=0,_=[];for(v in b)!l(d,v)&&l(b,v)&&p(_,v);for(;y.length>x;)l(b,v=y[x++])&&(~f(_,v)||p(_,v));return _}},5632:(i,o,a)=>{var s=a(140),l=a(3837);i.exports=Object.keys||function(u){return s(u,l)}},9195:(i,o)=>{var a={}.propertyIsEnumerable,s=Object.getOwnPropertyDescriptor,l=s&&!a.call({1:2},1);o.f=l?function(u){var f=s(this,u);return!!f&&f.enumerable}:a},6540:(i,o,a)=>{var s=a(5968),l=a(1176),u=a(8505);i.exports=Object.setPrototypeOf||("__proto__"in{}?(function(){var f,d=!1,p={};try{(f=s(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(p,[]),d=p instanceof Array}catch{}return function(g,y){return l(g),u(y),d?f(g,y):g.__proto__=y,g}})():void 0)},7664:(i,o,a)=>{var s=a(7400),l=a(5968),u=a(5632),f=a(905),d=l(a(9195).f),p=l([].push),g=function(y){return function(v){for(var b,x=f(v),_=u(x),T=_.length,A=0,w=[];T>A;)b=_[A++],s&&!d(x,b)||p(w,y?[b,x[b]]:x[b]);return w}};i.exports={entries:g(!0),values:g(!1)}},4059:(i,o,a)=>{var s=a(1601),l=a(1589);i.exports=s?{}.toString:function(){return"[object "+l(this)+"]"}},2914:(i,o,a)=>{var s=a(9859),l=a(266),u=a(6733),f=a(5052),d=s.TypeError;i.exports=function(p,g){var y,v;if(g==="string"&&u(y=p.toString)&&!f(v=l(y,p))||u(y=p.valueOf)&&!f(v=l(y,p))||g!=="string"&&u(y=p.toString)&&!f(v=l(y,p)))return v;throw d("Can't convert object to primitive value")}},4826:(i,o,a)=>{var s=a(1333),l=a(5968),u=a(8151),f=a(894),d=a(1176),p=l([].concat);i.exports=s("Reflect","ownKeys")||function(g){var y=u.f(d(g)),v=f.f;return v?p(y,v(g)):y}},9276:(i,o,a)=>{var s=a(9859);i.exports=s},4624:i=>{i.exports=function(o){try{return{error:!1,value:o()}}catch(a){return{error:!0,value:a}}}},7757:(i,o,a)=>{var s=a(1176),l=a(5052),u=a(6485);i.exports=function(f,d){if(s(f),l(d)&&d.constructor===f)return d;var p=u.f(f);return(0,p.resolve)(d),p.promise}},8787:(i,o,a)=>{var s=a(7487);i.exports=function(l,u,f){for(var d in u)s(l,d,u[d],f);return l}},7487:(i,o,a)=>{var s=a(9859),l=a(6733),u=a(8270),f=a(5762),d=a(2079),p=a(8511),g=a(6407),y=a(1805).CONFIGURABLE,v=g.get,b=g.enforce,x=String(String).split("String");(i.exports=function(_,T,A,w){var C,D=!!w&&!!w.unsafe,I=!!w&&!!w.enumerable,M=!!w&&!!w.noTargetGet,k=w&&w.name!==void 0?w.name:T;l(A)&&(String(k).slice(0,7)==="Symbol("&&(k="["+String(k).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u(A,"name")||y&&A.name!==k)&&f(A,"name",k),(C=b(A)).source||(C.source=x.join(typeof k=="string"?k:""))),_!==s?(D?!M&&_[T]&&(I=!0):delete _[T],I?_[T]=A:f(_,T,A)):I?_[T]=A:d(T,A)})(Function.prototype,"toString",(function(){return l(this)&&v(this).source||p(this)}))},8885:(i,o,a)=>{var s=a(9859).TypeError;i.exports=function(l){if(l==null)throw s("Can't call method on "+l);return l}},2079:(i,o,a)=>{var s=a(9859),l=Object.defineProperty;i.exports=function(u,f){try{l(s,u,{value:f,configurable:!0,writable:!0})}catch{s[u]=f}return f}},1832:(i,o,a)=>{var s=a(1333),l=a(1787),u=a(95),f=a(7400),d=u("species");i.exports=function(p){var g=s(p),y=l.f;f&&g&&!g[d]&&y(g,d,{configurable:!0,get:function(){return this}})}},4555:(i,o,a)=>{var s=a(1787).f,l=a(8270),u=a(95)("toStringTag");i.exports=function(f,d,p){f&&!l(f=p?f:f.prototype,u)&&s(f,u,{configurable:!0,value:d})}},4399:(i,o,a)=>{var s=a(3036),l=a(1441),u=s("keys");i.exports=function(f){return u[f]||(u[f]=l(f))}},5353:(i,o,a)=>{var s=a(9859),l=a(2079),u="__core-js_shared__",f=s[u]||l(u,{});i.exports=f},3036:(i,o,a)=>{var s=a(4231),l=a(5353);(i.exports=function(u,f){return l[u]||(l[u]=f!==void 0?f:{})})("versions",[]).push({version:"3.19.0",mode:s?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},7942:(i,o,a)=>{var s=a(1176),l=a(7988),u=a(95)("species");i.exports=function(f,d){var p,g=s(f).constructor;return g===void 0||(p=s(g)[u])==null?d:l(p)}},966:(i,o,a)=>{var s=a(5968),l=a(3329),u=a(3326),f=a(8885),d=s("".charAt),p=s("".charCodeAt),g=s("".slice),y=function(v){return function(b,x){var _,T,A=u(f(b)),w=l(x),C=A.length;return w<0||w>=C?v?"":void 0:(_=p(A,w))<55296||_>56319||w+1===C||(T=p(A,w+1))<56320||T>57343?v?d(A,w):_:v?g(A,w,w+2):T-56320+(_-55296<<10)+65536}};i.exports={codeAt:y(!1),charAt:y(!0)}},1017:(i,o,a)=>{var s=a(5968),l=a(8885),u=a(3326),f=a(1647),d=s("".replace),p="["+f+"]",g=RegExp("^"+p+p+"*"),y=RegExp(p+p+"*$"),v=function(b){return function(x){var _=u(l(x));return 1&b&&(_=d(_,g,"")),2&b&&(_=d(_,y,"")),_}};i.exports={start:v(1),end:v(2),trim:v(3)}},5795:(i,o,a)=>{var s,l,u,f,d=a(9859),p=a(3171),g=a(7636),y=a(6733),v=a(8270),b=a(4229),x=a(3777),_=a(1909),T=a(2635),A=a(2023),w=a(8801),C=d.setImmediate,D=d.clearImmediate,I=d.process,M=d.Dispatch,k=d.Function,R=d.MessageChannel,z=d.String,P=0,$={};try{s=d.location}catch{}var N=function(H){if(v($,H)){var U=$[H];delete $[H],U()}},L=function(H){return function(){N(H)}},B=function(H){N(H.data)},q=function(H){d.postMessage(z(H),s.protocol+"//"+s.host)};C&&D||(C=function(H){var U=_(arguments,1);return $[++P]=function(){p(y(H)?H:k(H),void 0,U)},l(P),P},D=function(H){delete $[H]},w?l=function(H){I.nextTick(L(H))}:M&&M.now?l=function(H){M.now(L(H))}:R&&!A?(f=(u=new R).port2,u.port1.onmessage=B,l=g(f.postMessage,f)):d.addEventListener&&y(d.postMessage)&&!d.importScripts&&s&&s.protocol!=="file:"&&!b(q)?(l=q,d.addEventListener("message",B,!1)):l="onreadystatechange"in T("script")?function(H){x.appendChild(T("script")).onreadystatechange=function(){x.removeChild(this),N(H)}}:function(H){setTimeout(L(H),0)}),i.exports={set:C,clear:D}},3231:(i,o,a)=>{var s=a(3329),l=Math.max,u=Math.min;i.exports=function(f,d){var p=s(f);return p<0?l(p+d,0):u(p,d)}},905:(i,o,a)=>{var s=a(9337),l=a(8885);i.exports=function(u){return s(l(u))}},3329:i=>{var o=Math.ceil,a=Math.floor;i.exports=function(s){var l=+s;return l!=l||l===0?0:(l>0?a:o)(l)}},4237:(i,o,a)=>{var s=a(3329),l=Math.min;i.exports=function(u){return u>0?l(s(u),9007199254740991):0}},2991:(i,o,a)=>{var s=a(9859),l=a(8885),u=s.Object;i.exports=function(f){return u(l(f))}},2066:(i,o,a)=>{var s=a(9859),l=a(266),u=a(5052),f=a(9395),d=a(5300),p=a(2914),g=a(95),y=s.TypeError,v=g("toPrimitive");i.exports=function(b,x){if(!u(b)||f(b))return b;var _,T=d(b,v);if(T){if(x===void 0&&(x="default"),_=l(T,b,x),!u(_)||f(_))return _;throw y("Can't convert object to primitive value")}return x===void 0&&(x="number"),p(b,x)}},9310:(i,o,a)=>{var s=a(2066),l=a(9395);i.exports=function(u){var f=s(u,"string");return l(f)?f:f+""}},1601:(i,o,a)=>{var s={};s[a(95)("toStringTag")]="z",i.exports=String(s)==="[object z]"},3326:(i,o,a)=>{var s=a(9859),l=a(1589),u=s.String;i.exports=function(f){if(l(f)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return u(f)}},9821:(i,o,a)=>{var s=a(9859).String;i.exports=function(l){try{return s(l)}catch{return"Object"}}},1441:(i,o,a)=>{var s=a(5968),l=0,u=Math.random(),f=s(1 .toString);i.exports=function(d){return"Symbol("+(d===void 0?"":d)+")_"+f(++l+u,36)}},6969:(i,o,a)=>{var s=a(3839);i.exports=s&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},95:(i,o,a)=>{var s=a(9859),l=a(3036),u=a(8270),f=a(1441),d=a(3839),p=a(6969),g=l("wks"),y=s.Symbol,v=y&&y.for,b=p?y:y&&y.withoutSetter||f;i.exports=function(x){if(!u(g,x)||!d&&typeof g[x]!="string"){var _="Symbol."+x;d&&u(y,x)?g[x]=y[x]:g[x]=p&&v?v(_):b(_)}return g[x]}},1647:i=>{i.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},5738:(i,o,a)=>{var s=a(3103),l=a(9859),u=a(1321),f=a(7567),d=a(6540),p=a(7081),g=a(7263),y=a(5762),v=a(5358),b=a(1590),x=a(9679),_=a(9003),T=a(635),A=a(373),w=l.Error,C=[].push,D=function(M,k){var R=u(I,this)?this:g(I),z=arguments.length>2?arguments[2]:void 0;d&&(R=d(new w(void 0),f(R))),y(R,"message",T(k,"")),A&&y(R,"stack",b(R.stack,1)),x(R,z);var P=[];return _(M,C,{that:P}),y(R,"errors",P),R};d?d(D,w):p(D,w);var I=D.prototype=g(w.prototype,{constructor:v(1,D),message:v(1,""),name:v(1,"AggregateError")});s({global:!0},{AggregateError:D})},9228:(i,o,a)=>{var s=a(3103),l=a(9996).find,u=a(9736),f="find",d=!0;f in[]&&Array(1).find((function(){d=!1})),s({target:"Array",proto:!0,forced:d},{find:function(p){return l(this,p,arguments.length>1?arguments[1]:void 0)}}),u(f)},7233:(i,o,a)=>{var s=a(3103),l=a(507);s({target:"Array",stat:!0,forced:!a(4575)((function(u){Array.from(u)}))},{from:l})},5735:(i,o,a)=>{var s=a(905),l=a(9736),u=a(5495),f=a(6407),d=a(7675),p="Array Iterator",g=f.set,y=f.getterFor(p);i.exports=d(Array,"Array",(function(v,b){g(this,{type:p,target:s(v),index:0,kind:b})}),(function(){var v=y(this),b=v.target,x=v.kind,_=v.index++;return!b||_>=b.length?(v.target=void 0,{value:void 0,done:!0}):x=="keys"?{value:_,done:!1}:x=="values"?{value:b[_],done:!1}:{value:[_,b[_]],done:!1}}),"values"),u.Arguments=u.Array,l("keys"),l("values"),l("entries")},9321:(i,o,a)=>{a(9789)("Map",(function(s){return function(){return s(this,arguments.length?arguments[0]:void 0)}}),a(8081))},3132:(i,o,a)=>{a(3103)({target:"Number",stat:!0},{isInteger:a(2292)})},4586:(i,o,a)=>{a(3103)({target:"Number",stat:!0},{isNaN:function(s){return s!=s}})},8836:(i,o,a)=>{var s=a(3103),l=a(5496);s({target:"Number",stat:!0,forced:Number.parseFloat!=l},{parseFloat:l})},7208:(i,o,a)=>{var s=a(3103),l=a(6596);s({target:"Number",stat:!0,forced:Number.parseInt!=l},{parseInt:l})},3105:(i,o,a)=>{var s=a(3103),l=a(7888);s({target:"Object",stat:!0,forced:Object.assign!==l},{assign:l})},5883:(i,o,a)=>{var s=a(3103),l=a(7664).entries;s({target:"Object",stat:!0},{entries:function(u){return l(u)}})},2506:(i,o,a)=>{a(3103)({target:"Object",stat:!0},{setPrototypeOf:a(6540)})},8188:(i,o,a)=>{var s=a(1601),l=a(7487),u=a(4059);s||l(Object.prototype,"toString",u,{unsafe:!0})},7919:(i,o,a)=>{var s=a(3103),l=a(266),u=a(7111),f=a(6485),d=a(4624),p=a(9003);s({target:"Promise",stat:!0},{allSettled:function(g){var y=this,v=f.f(y),b=v.resolve,x=v.reject,_=d((function(){var T=u(y.resolve),A=[],w=0,C=1;p(g,(function(D){var I=w++,M=!1;C++,l(T,y,D).then((function(k){M||(M=!0,A[I]={status:"fulfilled",value:k},--C||b(A))}),(function(k){M||(M=!0,A[I]={status:"rejected",reason:k},--C||b(A))}))})),--C||b(A)}));return _.error&&x(_.value),v.promise}})},7178:(i,o,a)=>{var s=a(3103),l=a(7111),u=a(1333),f=a(266),d=a(6485),p=a(4624),g=a(9003),y="No one promise resolved";s({target:"Promise",stat:!0},{any:function(v){var b=this,x=u("AggregateError"),_=d.f(b),T=_.resolve,A=_.reject,w=p((function(){var C=l(b.resolve),D=[],I=0,M=1,k=!1;g(v,(function(R){var z=I++,P=!1;M++,f(C,b,R).then((function($){P||k||(k=!0,T($))}),(function($){P||k||(P=!0,D[z]=$,--M||A(new x(D,y)))}))})),--M||A(new x(D,y))}));return w.error&&A(w.value),_.promise}})},1515:(i,o,a)=>{var s=a(3103),l=a(4231),u=a(4226),f=a(4229),d=a(1333),p=a(6733),g=a(7942),y=a(7757),v=a(7487);if(s({target:"Promise",proto:!0,real:!0,forced:!!u&&f((function(){u.prototype.finally.call({then:function(){}},(function(){}))}))},{finally:function(x){var _=g(this,d("Promise")),T=p(x);return this.then(T?function(A){return y(_,x()).then((function(){return A}))}:x,T?function(A){return y(_,x()).then((function(){throw A}))}:x)}}),!l&&p(u)){var b=d("Promise").prototype.finally;u.prototype.finally!==b&&v(u.prototype,"finally",b,{unsafe:!0})}},3439:(i,o,a)=>{var s,l,u,f,d=a(3103),p=a(4231),g=a(9859),y=a(1333),v=a(266),b=a(4226),x=a(7487),_=a(8787),T=a(6540),A=a(4555),w=a(1832),C=a(7111),D=a(6733),I=a(5052),M=a(7728),k=a(8511),R=a(9003),z=a(4575),P=a(7942),$=a(5795).set,N=a(4794),L=a(7757),B=a(4665),q=a(6485),H=a(4624),U=a(6407),Y=a(6541),Q=a(95),J=a(8639),de=a(8801),ve=a(6358),we=Q("species"),Be="Promise",Ve=U.get,me=U.set,$e=U.getterFor(Be),De=b&&b.prototype,ue=b,Et=De,nt=g.TypeError,$t=g.document,Gt=g.process,Ot=q.f,Lc=Ot,Bm=!!($t&&$t.createEvent&&g.dispatchEvent),fh=D(g.PromiseRejectionEvent),tl="unhandledrejection",Vm=!1,As=Y(Be,(function(){var ge=k(ue),Oe=ge!==String(ue);if(!Oe&&ve===66||p&&!Et.finally)return!0;if(ve>=51&&/native code/.test(ge))return!1;var He=new ue((function(ht){ht(1)})),Qe=function(ht){ht((function(){}),(function(){}))};return(He.constructor={})[we]=Qe,!(Vm=He.then((function(){}))instanceof Qe)||!Oe&&J&&!fh})),lx=As||!z((function(ge){ue.all(ge).catch((function(){}))})),Hm=function(ge){var Oe;return!(!I(ge)||!D(Oe=ge.then))&&Oe},Ao=function(ge,Oe){if(!ge.notified){ge.notified=!0;var He=ge.reactions;N((function(){for(var Qe=ge.value,ht=ge.state==1,yi=0;He.length>yi;){var Wr,Ra,ka,vi=He[yi++],Os=ht?vi.ok:vi.fail,nl=vi.resolve,Xi=vi.reject,bi=vi.domain;try{Os?(ht||(ge.rejection===2&&cx(ge),ge.rejection=1),Os===!0?Wr=Qe:(bi&&bi.enter(),Wr=Os(Qe),bi&&(bi.exit(),ka=!0)),Wr===vi.promise?Xi(nt("Promise-chain cycle")):(Ra=Hm(Wr))?v(Ra,Wr,nl,Xi):nl(Wr)):Xi(Qe)}catch(qm){bi&&!ka&&bi.exit(),Xi(qm)}}ge.reactions=[],ge.notified=!1,Oe&&!ge.rejection&&Ma(ge)}))}},qn=function(ge,Oe,He){var Qe,ht;Bm?((Qe=$t.createEvent("Event")).promise=Oe,Qe.reason=He,Qe.initEvent(ge,!1,!0),g.dispatchEvent(Qe)):Qe={promise:Oe,reason:He},!fh&&(ht=g["on"+ge])?ht(Qe):ge===tl&&B("Unhandled promise rejection",He)},Ma=function(ge){v($,g,(function(){var Oe,He=ge.facade,Qe=ge.value;if(Gn(ge)&&(Oe=H((function(){de?Gt.emit("unhandledRejection",Qe,He):qn(tl,He,Qe)})),ge.rejection=de||Gn(ge)?2:1,Oe.error))throw Oe.value}))},Gn=function(ge){return ge.rejection!==1&&!ge.parent},cx=function(ge){v($,g,(function(){var Oe=ge.facade;de?Gt.emit("rejectionHandled",Oe):qn("rejectionhandled",Oe,ge.value)}))},Ts=function(ge,Oe,He){return function(Qe){ge(Oe,Qe,He)}},Cs=function(ge,Oe,He){ge.done||(ge.done=!0,He&&(ge=He),ge.value=Oe,ge.state=2,Ao(ge,!0))},Ds=function(ge,Oe,He){if(!ge.done){ge.done=!0,He&&(ge=He);try{if(ge.facade===Oe)throw nt("Promise can't be resolved itself");var Qe=Hm(Oe);Qe?N((function(){var ht={done:!1};try{v(Qe,Oe,Ts(Ds,ht,ge),Ts(Cs,ht,ge))}catch(yi){Cs(ht,yi,ge)}})):(ge.value=Oe,ge.state=1,Ao(ge,!1))}catch(ht){Cs({done:!1},ht,ge)}}};if(As&&(Et=(ue=function(ge){M(this,Et),C(ge),v(s,this);var Oe=Ve(this);try{ge(Ts(Ds,Oe),Ts(Cs,Oe))}catch(He){Cs(Oe,He)}}).prototype,(s=function(ge){me(this,{type:Be,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=_(Et,{then:function(ge,Oe){var He=$e(this),Qe=He.reactions,ht=Ot(P(this,ue));return ht.ok=!D(ge)||ge,ht.fail=D(Oe)&&Oe,ht.domain=de?Gt.domain:void 0,He.parent=!0,Qe[Qe.length]=ht,He.state!=0&&Ao(He,!1),ht.promise},catch:function(ge){return this.then(void 0,ge)}}),l=function(){var ge=new s,Oe=Ve(ge);this.promise=ge,this.resolve=Ts(Ds,Oe),this.reject=Ts(Cs,Oe)},q.f=Ot=function(ge){return ge===ue||ge===u?new l(ge):Lc(ge)},!p&&D(b)&&De!==Object.prototype)){f=De.then,Vm||(x(De,"then",(function(ge,Oe){var He=this;return new ue((function(Qe,ht){v(f,He,Qe,ht)})).then(ge,Oe)}),{unsafe:!0}),x(De,"catch",Et.catch,{unsafe:!0}));try{delete De.constructor}catch{}T&&T(De,Et)}d({global:!0,wrap:!0,forced:As},{Promise:ue}),A(ue,Be,!1,!0),w(Be),u=y(Be),d({target:Be,stat:!0,forced:As},{reject:function(ge){var Oe=Ot(this);return v(Oe.reject,void 0,ge),Oe.promise}}),d({target:Be,stat:!0,forced:p||As},{resolve:function(ge){return L(p&&this===u?ue:this,ge)}}),d({target:Be,stat:!0,forced:lx},{all:function(ge){var Oe=this,He=Ot(Oe),Qe=He.resolve,ht=He.reject,yi=H((function(){var Wr=C(Oe.resolve),Ra=[],ka=0,vi=1;R(ge,(function(Os){var nl=ka++,Xi=!1;vi++,v(Wr,Oe,Os).then((function(bi){Xi||(Xi=!0,Ra[nl]=bi,--vi||Qe(Ra))}),ht)})),--vi||Qe(Ra)}));return yi.error&&ht(yi.value),He.promise},race:function(ge){var Oe=this,He=Ot(Oe),Qe=He.reject,ht=H((function(){var yi=C(Oe.resolve);R(ge,(function(Wr){v(yi,Oe,Wr).then(He.resolve,Qe)}))}));return ht.error&&Qe(ht.value),He.promise}})},8673:(i,o,a)=>{var s=a(966).charAt,l=a(3326),u=a(6407),f=a(7675),d="String Iterator",p=u.set,g=u.getterFor(d);f(String,"String",(function(y){p(this,{type:d,string:l(y),index:0})}),(function(){var y,v=g(this),b=v.string,x=v.index;return x>=b.length?{value:void 0,done:!0}:(y=s(b,x),v.index+=y.length,{value:y,done:!1})}))},2541:i=>{(function(){var o=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i");function a(l){for(var u="",f=0;f<l;f++)u+=(65536*(1+Math.random())|0).toString(16).substring(1);return u}function s(l){if(!l)throw new TypeError("Invalid argument; `value` has no value.");this.value=s.EMPTY,l&&l instanceof s?this.value=l.toString():l&&Object.prototype.toString.call(l)==="[object String]"&&s.isGuid(l)&&(this.value=l),this.equals=function(u){return s.isGuid(u)&&this.value==u},this.isEmpty=function(){return this.value===s.EMPTY},this.toString=function(){return this.value},this.toJSON=function(){return this.value}}s.EMPTY="00000000-0000-0000-0000-000000000000",s.isGuid=function(l){return l&&(l instanceof s||o.test(l.toString()))},s.create=function(){return new s([a(2),a(1),a(1),a(1),a(3)].join("-"))},s.raw=function(){return[a(2),a(1),a(1),a(1),a(3)].join("-")},i.exports?i.exports=s:typeof window<"u"&&(window.Guid=s)})()},8022:(i,o,a)=>{var s=a(4481),l=a(6426),u=l;u.v1=s,u.v4=l,i.exports=u},8725:i=>{for(var o=[],a=0;a<256;++a)o[a]=(a+256).toString(16).substr(1);i.exports=function(s,l){var u=l||0,f=o;return[f[s[u++]],f[s[u++]],f[s[u++]],f[s[u++]],"-",f[s[u++]],f[s[u++]],"-",f[s[u++]],f[s[u++]],"-",f[s[u++]],f[s[u++]],"-",f[s[u++]],f[s[u++]],f[s[u++]],f[s[u++]],f[s[u++]],f[s[u++]]].join("")}},9157:i=>{var o=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);if(o){var a=new Uint8Array(16);i.exports=function(){return o(a),a}}else{var s=new Array(16);i.exports=function(){for(var l,u=0;u<16;u++)(3&u)==0&&(l=4294967296*Math.random()),s[u]=l>>>((3&u)<<3)&255;return s}}},4481:(i,o,a)=>{var s,l,u=a(9157),f=a(8725),d=0,p=0;i.exports=function(g,y,v){var b=y&&v||0,x=y||[],_=(g=g||{}).node||s,T=g.clockseq!==void 0?g.clockseq:l;if(_==null||T==null){var A=u();_==null&&(_=s=[1|A[0],A[1],A[2],A[3],A[4],A[5]]),T==null&&(T=l=16383&(A[6]<<8|A[7]))}var w=g.msecs!==void 0?g.msecs:new Date().getTime(),C=g.nsecs!==void 0?g.nsecs:p+1,D=w-d+(C-p)/1e4;if(D<0&&g.clockseq===void 0&&(T=T+1&16383),(D<0||w>d)&&g.nsecs===void 0&&(C=0),C>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=w,p=C,l=T;var I=(1e4*(268435455&(w+=122192928e5))+C)%4294967296;x[b++]=I>>>24&255,x[b++]=I>>>16&255,x[b++]=I>>>8&255,x[b++]=255&I;var M=w/4294967296*1e4&268435455;x[b++]=M>>>8&255,x[b++]=255&M,x[b++]=M>>>24&15|16,x[b++]=M>>>16&255,x[b++]=T>>>8|128,x[b++]=255&T;for(var k=0;k<6;++k)x[b+k]=_[k];return y||f(x)}},6426:(i,o,a)=>{var s=a(9157),l=a(8725);i.exports=function(u,f,d){var p=f&&d||0;typeof u=="string"&&(f=u==="binary"?new Array(16):null,u=null);var g=(u=u||{}).random||(u.rng||s)();if(g[6]=15&g[6]|64,g[8]=63&g[8]|128,f)for(var y=0;y<16;++y)f[p+y]=g[y];return f||l(g)}},5665:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=(function(d){function p(g){var y=d.call(this,u.TableauEventType.DashboardLayoutChanged)||this;return y._dashboardLayoutChangeDetails=g,y}return l(p,d),Object.defineProperty(p.prototype,"dashboardLayoutChangeDetails",{get:function(){return this._dashboardLayoutChangeDetails},enumerable:!0,configurable:!0}),p})(a(4739).TableauEvent);o.DashboardLayoutChangedEvent=f},8078:function(i,o,a){var s,l=this&&this.__extends||(s=function(p,g){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var b in v)v.hasOwnProperty(b)&&(y[b]=v[b])},s(p,g)},function(p,g){function y(){this.constructor=p}s(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4007),d=(function(p){function g(y,v,b){var x=p.call(this,u.TableauEventType.FilterChanged,y)||this;return x._fieldName=v,x._fieldId=b,x}return l(g,p),Object.defineProperty(g.prototype,"fieldName",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(g.prototype,"fieldId",{get:function(){return this._fieldId},enumerable:!0,configurable:!0}),g.prototype.getFilterAsync=function(){var y=this;return this._worksheet.getFiltersAsync().then((function(v){var b=y.fieldId?v.find((function(x){return x.fieldId===y.fieldId}),y):v.find((function(x){return x.fieldName===y.fieldName}),y);if(!b)throw new f.TableauError(u.ErrorCodes.MissingFilter,"cannot find filter: "+y._fieldName);return b}))},g})(a(322).TableauWorksheetEvent);o.FilterChangedEvent=d},1178:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=(function(d){function p(g){return d.call(this,u.TableauEventType.MarkSelectionChanged,g)||this}return l(p,d),p.prototype.getMarksAsync=function(){return this.worksheet.getSelectedMarksAsync()},p})(a(322).TableauWorksheetEvent);o.MarksSelectedEvent=f},4913:function(i,o,a){var s,l=this&&this.__extends||(s=function(y,v){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var _ in x)x.hasOwnProperty(_)&&(b[_]=x[_])},s(y,v)},function(y,v){function b(){this.constructor=y}s(y,v),y.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4007),d=a(7303),p=a(2200),g=(function(y){function v(b,x){var _=y.call(this,u.TableauEventType.ParameterChanged,x)||this;return _._globalFieldName=b,_}return l(v,y),v.prototype.getParameterAsync=function(){var b=this;return f.ApiServiceRegistry.get(p.ExtensionsRegistryId).getService("parameters-service").findParameterByGlobalFieldNameAsync(this._globalFieldName).then((function(x){if(x===void 0)throw new f.TableauError(u.ErrorCodes.MissingParameter,"Cannot find parameter: "+b._globalFieldName);return new d.Parameter(x,b.sheet)}))},v})(a(3146).TableauSheetEvent);o.ParameterChangedEvent=g},4739:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._type=l}return Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),s})();o.TableauEvent=a},3146:function(i,o,a){var s,l=this&&this.__extends||(s=function(f,d){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)g.hasOwnProperty(y)&&(p[y]=g[y])},s(f,d)},function(f,d){function p(){this.constructor=f}s(f,d),f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(o,"__esModule",{value:!0});var u=(function(f){function d(p,g){var y=f.call(this,p)||this;return y._sheet=g,y}return l(d,f),Object.defineProperty(d.prototype,"sheet",{get:function(){return this._sheet},enumerable:!0,configurable:!0}),d})(a(4739).TableauEvent);o.TableauSheetEvent=u},322:function(i,o,a){var s,l=this&&this.__extends||(s=function(f,d){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)g.hasOwnProperty(y)&&(p[y]=g[y])},s(f,d)},function(f,d){function p(){this.constructor=f}s(f,d),f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(o,"__esModule",{value:!0});var u=(function(f){function d(p,g){var y=f.call(this,p,g)||this;return y._worksheet=g,y}return l(d,f),Object.defineProperty(d.prototype,"worksheet",{get:function(){return this._worksheet},enumerable:!0,configurable:!0}),d})(a(3146).TableauSheetEvent);o.TableauWorksheetEvent=u},4925:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=(function(d){function p(g){var y=d.call(this,u.TableauEventType.WorkbookFormattingChanged)||this;return y._formatting=g,y}return l(p,d),Object.defineProperty(p.prototype,"formatting",{get:function(){return this._formatting},enumerable:!0,configurable:!0}),p})(a(4739).TableauEvent);o.WorkbookFormattingChangedEvent=f},1630:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BentonSansFontFamilyName="Benton Sans",o.BentonSansLowDPIFontFamilyName="Benton Sans Low-DPI",o.BentonSansBookFontFaceName="Benton Sans Book",o.BentonSansBookItalicFontFaceName="Benton Sans Book Italic",o.BentonSansSemiDemiFontFaceName="Benton Sans SemiDemi",o.BentonSansSemiDemiItalicFontFaceName="Benton Sans SemiDemi Italic",o.BentonSansLightFontFaceName="Benton Sans Light",o.BentonSansMediumFontFaceName="Benton Sans Medium",o.SupportedBentonSansFontFaces=[o.BentonSansBookFontFaceName,o.BentonSansBookItalicFontFaceName,o.BentonSansSemiDemiFontFaceName,o.BentonSansSemiDemiItalicFontFaceName,o.BentonSansLightFontFaceName,o.BentonSansMediumFontFaceName]},2916:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f){this._userId=l,this._siteId=u,this._workbookId=f}return Object.defineProperty(s.prototype,"userId",{get:function(){return this._userId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"siteId",{get:function(){return this._siteId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"workbookId",{get:function(){return this._workbookId},enumerable:!0,configurable:!0}),s})();o.ConnectedServer=a},3267:function(i,o,a){var s,l=this&&this.__extends||(s=function(p,g){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var b in v)v.hasOwnProperty(b)&&(y[b]=v[b])},s(p,g)},function(p,g){function y(){this.constructor=p}s(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4007),f=a(2200),d=(function(p){function g(){return p!==null&&p.apply(this,arguments)||this}return l(g,p),g.prototype.getAllDataSourcesAsync=function(){var y=this;return u.ApiServiceRegistry.get(f.ExtensionsRegistryId).getService("data-source-service").getAllDataSourcesAsync().then((function(v){var b=v,x=[];return Object.values(b.dataSources).forEach((function(_){x.push(y.createDataSourceFromInfo(_))})),x}))},g.prototype.createDataSourceFromInfo=function(y){var v=new u.DataSourceImpl(y,f.ExtensionsRegistryId),b=new u.DataSource(v);return v.initializeWithPublicInterfaces(b),b},g})(u.WorkbookImpl);o.ExtensionWorkbookImpl=d},6250:function(i,o,a){var s=this&&this.__spreadArrays||function(){for(var k=0,R=0,z=arguments.length;R<z;R++)k+=arguments[R].length;var P=Array(k),$=0;for(R=0;R<z;R++)for(var N=arguments[R],L=0,B=N.length;L<B;L++,$++)P[$]=N[L];return P};Object.defineProperty(o,"__esModule",{value:!0});var l=a(1750),u=a(4695),f=a(4007),d=a(1818),p=a(6847),g=a(5599),y=a(1286),v=a(6286),b=a(5728),x=a(1185),_=a(2200),T=a(1630),A=a(3267),w=a(1847),C=a(5220),D=a(7256),I=a(4786),M=(function(){function k(){}return k.prototype.initializeAsync=function(R,z){var P=this;return this._initializationPromise||(this._initializationPromise=new Promise((function($,N){var L,B={isAlpha:f.ApiVersion.Instance.isAlpha};if(w.LegacyInternalApiDispatcherHolder.hasDesktopApiDispatcherPromise(B))(L=w.LegacyInternalApiDispatcherHolder.getDesktopDispatcherPromise(B))===null||L===void 0||L.then((function(H){return P.onDispatcherReceived(H,R,z)})).then((function(H){$(H)})).catch((function(H){N(H)}));else{var q=P.onDispatcherReceived.bind(P);f.doCrossFrameBootstrap(window,u.INTERNAL_CONTRACT_VERSION,B).then((function(H){return q(H,R,z)})).then((function(H){$(H)})).catch((function(H){N(H)}))}}))),this._initializationPromise},k.prototype.createVizImageAsync=function(R){return f.ApiServiceRegistry.get(_.ExtensionsRegistryId).getService("viz-service").createVizImageAsync(R)},k.prototype.setClickThroughAsync=function(R){return f.ApiServiceRegistry.get(_.ExtensionsRegistryId).getService("UIService").setClickThroughAsync(R,this.extensionZoneId)},k.prototype.onDispatcherReceived=function(R,z,P){var $=this,N=R(u.INTERNAL_CONTRACT_VERSION);x.registerInitializationExtensionsServices(N);var L=f.ApiServiceRegistry.get(_.ExtensionsRegistryId).getService("InitializationService"),B=P?Object.keys(P):[];return L.initializeDashboardExtensionsAsync(z,B).then((function(q){if(!q.extensionInstance.locator.dashboardPath)throw new f.TableauError(l.ErrorCodes.InternalError,"Unexpected error during initialization.");var H=q.extensionEnvironment.platformVersion?q.extensionEnvironment.platformVersion:{major:1,minor:9,fix:0};return f.VersionedExternalApiDispatcher.needsVersionConverter(H)&&(N=new f.VersionedExternalApiDispatcher(N,H)),f.registerAllSharedServices(N,_.ExtensionsRegistryId,H),x.registerAllExtensionsServices(N),$.dashboardContent=$.initializeDashboardContent(q.extensionDashboardInfo,q.extensionInstance.locator.dashboardPath),$.environment=new y.Environment(q.extensionEnvironment),$.settings=$.initializeSettings(q.extensionSettingsInfo),$.ui=new b.UI(new I.UIImpl),$.workbook=new p.Workbook(new A.ExtensionWorkbookImpl),$.extensionZoneId=q.extensionDashboardInfo.extensionZoneId,q.extensionEnvironment.workbookFormatting&&($.initializeTableauFonts(N,q.extensionEnvironment.workbookFormatting),$.applyAllFormatting(q.extensionEnvironment.workbookFormatting)),$.initializeContextMenuCallbacks(P),$.initializeWorkbookFormattingChangedEventCallback(N),q.extensionDialogPayload}))},k.prototype.applyAllFormatting=function(R){var z=this;if(this._styleElement||(this._styleElement=document.createElement("style"),this._styleElement.id="Tableau-Extension-Formatting",document.head.appendChild(this._styleElement)),this._styleElement.sheet&&R){for(var P=this._styleElement.sheet;P.cssRules.length>0;)P.deleteRule(P.cssRules.length-1);R.formattingSheets.map((function($){z.applyFormattingSheetToStyleSheet($,P)}))}},k.prototype.applyFormattingSheetToStyleSheet=function(R,z){var P="",$=R.cssProperties;$.fontFamily&&(P+="font-family: "+$.fontFamily.toString()+"; "),$.fontSize&&(P+="font-size: "+$.fontSize.toString()+"; "),$.fontWeight&&(P+="font-weight: "+$.fontWeight.toString()+"; "),$.fontStyle&&(P+="font-style: "+$.fontStyle.toString()+"; "),$.textDecoration&&(P+="text-decoration: "+$.textDecoration.toString()+"; "),$.color&&(P+="color: "+$.color+"; ");var N="."+R.classNameKey+" { "+P+" }";z.insertRule(N,z.cssRules.length)},k.prototype.initializeWorkbookFormattingChangedEventCallback=function(R){var z=this;f.ApiServiceRegistry.get(_.ExtensionsRegistryId).getService("notification-service").registerHandler(u.NotificationId.WorkbookFormattingChanged,(function(){return!0}),(function(P){P&&(z.initializeTableauFonts(R,P),z.applyAllFormatting(P))}))},k.prototype.initializeTableauFonts=function(R,z){var P,$=this,N=s(T.SupportedBentonSansFontFaces,D.SupportedTableauFontFaces);if(z.formattingSheets.forEach((function(B){B.cssProperties.fontFamily&&N.push(B.cssProperties.fontFamily)})),N.length>0){var L=((P={})[u.ParameterId.FontNameListItems]=N,P);R.execute(u.VerbId.GetFonts,L).then((function(B){$.loadFonts(B.result)})).catch()}},k.prototype.loadFonts=function(R){var z=this;R.forEach((function(P){D.SupportedTableauFontFaces.includes(P.fontName)?z.loadTableauFonts(P):T.SupportedBentonSansFontFaces.includes(P.fontName)?z.loadBentonSansFonts(P):document.fonts.add(new FontFace(P.fontName,P.fontBinaryInfo))}))},k.prototype.initializeDashboardContent=function(R,z){var P=new f.SheetInfoImpl(R.name,l.SheetType.Dashboard,{width:R.size.w,height:R.size.h},void 0,!0),$=new f.DashboardImpl(P,R.zones,z,_.ExtensionsRegistryId,null),N=new d.Dashboard($);return new g.DashboardContent(N)},k.prototype.initializeSettings=function(R){var z=new C.SettingsImpl(R);return new v.Settings(z)},k.prototype.initializeContextMenuCallbacks=function(R){f.ApiServiceRegistry.get(_.ExtensionsRegistryId).getService("notification-service").registerHandler(u.NotificationId.ContextMenuClick,(function(){return!0}),(function(z){if(R){if(!R[z.id])throw new f.TableauError(l.ErrorCodes.InternalError,"Received unexpected context menu Id from event: "+z.id);R[z.id]()}}))},k.prototype.loadTableauFonts=function(R){switch(R.fontName){case D.TableauBookFontFaceName:document.fonts.add(new FontFace(D.TableauBookFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"}));break;case D.TableauLightFontFaceName:document.fonts.add(new FontFace(D.TableauLightFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"}));break;case D.TableauRegularFontFaceName:document.fonts.add(new FontFace(D.TableauRegularFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"}));break;case D.TableauSemiBoldFontFaceName:document.fonts.add(new FontFace(D.TableauSemiboldFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"})),document.fonts.add(new FontFace(D.TableauRegularFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"}));break;case D.TableauBoldFontFaceName:document.fonts.add(new FontFace(D.TableauBoldFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"})),document.fonts.add(new FontFace(D.TableauBoldFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"})),document.fonts.add(new FontFace(D.TableauMediumFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"})),document.fonts.add(new FontFace(D.TableauSemiboldFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"}));break;case D.TableauMediumFontFaceName:document.fonts.add(new FontFace(D.TableauMediumFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"})),document.fonts.add(new FontFace(D.TableauLightFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"})),document.fonts.add(new FontFace(D.TableauBookFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"}));break;default:throw new f.TableauError(l.ErrorCodes.InternalError,"'attempted to load unsupported font: "+R.fontName+".'")}},k.prototype.loadBentonSansFonts=function(R){switch(R.fontName){case T.BentonSansBookFontFaceName:document.fonts.add(new FontFace(T.BentonSansFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"})),document.fonts.add(new FontFace(T.BentonSansLowDPIFontFamilyName,R.fontBinaryInfo,{weight:"100",style:"normal"}));break;case T.BentonSansLightFontFaceName:document.fonts.add(new FontFace(T.BentonSansFontFamilyName,R.fontBinaryInfo,{weight:"100",style:"normal"}));break;case T.BentonSansMediumFontFaceName:document.fonts.add(new FontFace(T.BentonSansFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"})),document.fonts.add(new FontFace(T.BentonSansLowDPIFontFamilyName,R.fontBinaryInfo,{weight:"bold",style:"normal"}));break;case T.BentonSansSemiDemiFontFaceName:document.fonts.add(new FontFace(T.BentonSansLowDPIFontFamilyName,R.fontBinaryInfo,{weight:"normal",style:"normal"}));break;case T.BentonSansBookItalicFontFaceName:document.fonts.add(new FontFace(T.BentonSansFontFamilyName,R.fontBinaryInfo,{style:"italic"}));break;case T.BentonSansSemiDemiItalicFontFaceName:document.fonts.add(new FontFace(T.BentonSansLowDPIFontFamilyName,R.fontBinaryInfo,{style:"italic"}));break;default:throw new f.TableauError(l.ErrorCodes.InternalError,"'attempted to load unsupported font: "+R.fontName+".'")}},k})();o.ExtensionsImpl=M},1847:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4695);(function(l){function u(f){var d;return f&&f.isAlpha!==void 0||window.__warningIssued?!((d=f)===null||d===void 0)&&d.isAlpha&&window.__platformIsOfficialRelease&&window.__tableauDesktopDispatcher.then((function(p){p(s.INTERNAL_CONTRACT_VERSION).execute(s.VerbId.BlockExtension,{}).catch()})).catch():(console.warn("This is a beta version of the Extensions API. Please upgrade to an official release."),window.__warningIssued=!0),window.__tableauDesktopDispatcher}l.getDesktopDispatcherPromise=u,l.hasDesktopApiDispatcherPromise=function(f){return!!u(f)}})(o.LegacyInternalApiDispatcherHolder||(o.LegacyInternalApiDispatcherHolder={}))},5220:function(i,o,a){var s,l=this&&this.__extends||(s=function(b,x){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,T){_.__proto__=T}||function(_,T){for(var A in T)T.hasOwnProperty(A)&&(_[A]=T[A])},s(b,x)},function(b,x){function _(){this.constructor=b}s(b,x),b.prototype=x===null?Object.create(x):(_.prototype=x.prototype,new _)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4007),p=a(4739),g=a(2200),y=(function(b){function x(_){var T=b.call(this,u.TableauEventType.SettingsChanged)||this;return T._newSettings=_,T}return l(x,b),Object.defineProperty(x.prototype,"newSettings",{get:function(){return this._newSettings},enumerable:!0,configurable:!0}),x})(p.TableauEvent),v=(function(){function b(x){this._saveInProgress=!1,this.initializeSettings(x)}return b.prototype.erase=function(x){d.ErrorHelpers.verifyParameter(x,"key"),this._currentSettings[x]&&(this.verifySettingsAreUnlocked(),delete this._currentSettings[x],this._isModified=!0)},b.prototype.get=function(x){return d.ErrorHelpers.verifyParameter(x,"key"),this._currentSettings[x]},b.prototype.getAll=function(){return Object.assign({},this._currentSettings)},Object.defineProperty(b.prototype,"isModified",{get:function(){return this._isModified},enumerable:!0,configurable:!0}),b.prototype.saveAsync=function(){var x=this;return this.verifySettingsAreUnlocked(),this._isModified?(this._saveInProgress=!0,d.ApiServiceRegistry.get(g.ExtensionsRegistryId).getService("SettingsService").saveSettingsAsync(this._currentSettings).then((function(_){return x._saveInProgress=!1,x._isModified=!1,x._currentSettings===void 0?x._currentSettings=_:Object.assign(x._currentSettings,_),_}),(function(_){return x._saveInProgress=!1,Promise.reject(_)}))):Promise.resolve(this._currentSettings)},b.prototype.set=function(x,_){d.ErrorHelpers.verifyStringParameter(x,"key"),d.ErrorHelpers.verifyParameter(_,"value"),this.verifySettingsAreUnlocked(),this._currentSettings[x]=_,this._isModified=!0},b.prototype.initializeEvents=function(){var x,_=this,T=new Array;try{x=d.ApiServiceRegistry.get(g.ExtensionsRegistryId).getService("notification-service")}catch{return T}var A=new d.SingleEventManagerImpl(u.TableauEventType.SettingsChanged);return x.registerHandler(f.NotificationId.SettingsChanged,(function(){return!0}),(function(w){_._currentSettings=w.newSettings,A.triggerEvent((function(){return new y(w.newSettings)}))})),T.push(A),T},b.prototype.initializeSettings=function(x){d.ErrorHelpers.verifyParameter(x,"settingsInfo"),d.ErrorHelpers.verifyParameter(x.settingsValues,"settingsInfo.SettingsValues"),this._currentSettings=x.settingsValues,this._isModified=!1},b.prototype.verifySettingsAreUnlocked=function(){if(this._saveInProgress)throw new d.TableauError(u.ErrorCodes.SettingSaveInProgress,b.ASYNC_SAVE_IN_PROGRESS)},b.ASYNC_SAVE_IN_PROGRESS="Async Save is in progress, updating settings is not allowed.",b})();o.SettingsImpl=v},7256:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TableauBookFontFamilyName="Tableau Book",o.TableauLightFontFamilyName="Tableau Light",o.TableauRegularFontFamilyName="Tableau Regular",o.TableauMediumFontFamilyName="Tableau Medium",o.TableauSemiboldFontFamilyName="Tableau Semibold",o.TableauBoldFontFamilyName="Tableau Bold",o.TableauBookFontFaceName="Tableau Book",o.TableauBoldFontFaceName="Tableau Bold",o.TableauLightFontFaceName="Tableau Light",o.TableauMediumFontFaceName="Tableau Medium",o.TableauRegularFontFaceName="Tableau Regular",o.TableauSemiBoldFontFaceName="Tableau Semi Bold",o.SupportedTableauFontFaces=[o.TableauBookFontFaceName,o.TableauBoldFontFaceName,o.TableauLightFontFaceName,o.TableauMediumFontFaceName,o.TableauRegularFontFaceName,o.TableauSemiBoldFontFaceName]},4786:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1750),u=a(4695),f=a(4007),d=a(2200),p=(function(){function g(){}return g.prototype.displayDialogAsync=function(y,v,b){var x=f.ApiServiceRegistry.get(d.ExtensionsRegistryId).getService("UIService"),_=f.ApiServiceRegistry.get(d.ExtensionsRegistryId).getService("notification-service");return new Promise((function(T,A){x.displayDialogAsync(y,v||"",b).then((function(){var w=_.registerHandler(u.NotificationId.ExtensionDialogUpdate,(function(){return!0}),(function(C){if(C.isCloseEvent){if(C.closePayload===void 0)throw new f.TableauError(s.ErrorCodes.InternalError,"closePayload is undefined");T(C.closePayload)}else A(new f.TableauError(l.ErrorCodes.DialogClosedByUser,"Extension dialog closed by user."));w()}))})).catch((function(w){A(w)}))}))},g.prototype.closeDialog=function(y){f.ApiServiceRegistry.get(d.ExtensionsRegistryId).getService("UIService").closeDialog(y)},g})();o.UIImpl=p},1818:function(i,o,a){var s,l=this&&this.__extends||(s=function(T,A){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var D in C)C.hasOwnProperty(D)&&(w[D]=C[D])},s(T,A)},function(T,A){function w(){this.constructor=T}s(T,A),T.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4007),p=a(5665),g=a(4925),y=a(2200),v=a(9751),b=a(9764),x=a(921),_=(function(T){function A(w){var C=T.call(this,w)||this;return C._dashboardImpl=w,w.initializeWithPublicInterfaces(),C.initializeEvents().forEach((function(D){return C.addNewEventType(D)})),C}return l(A,T),Object.defineProperty(A.prototype,"worksheets",{get:function(){return this._dashboardImpl.worksheetsImpl.map((function(w){return new x.Worksheet(w)}))},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"objects",{get:function(){return this._dashboardImpl.objects.map((function(w){return new v.DashboardObject(w)}))},enumerable:!0,configurable:!0}),A.prototype.setZoneVisibilityAsync=function(w){return this._dashboardImpl.setDashboardObjectVisibilityAsync(w)},A.prototype.setDashboardObjectVisibilityAsync=function(w){return this._dashboardImpl.setDashboardObjectVisibilityAsync(w)},A.prototype.getDashboardObjectById=function(w){var C=this._dashboardImpl.getDashboardObjectById(w);return C&&new v.DashboardObject(C)},A.prototype.initializeEvents=function(){var w,C=this,D=new Array;try{w=d.ApiServiceRegistry.get(y.ExtensionsRegistryId).getService("notification-service")}catch{return D}var I=new d.SingleEventManagerImpl(u.TableauEventType.DashboardLayoutChanged);w.registerHandler(f.NotificationId.DashboardLayoutChanged,(function(){return!0}),(function(k){var R=C._dashboardImpl.updateZones(k.zones);I.triggerEvent((function(){return new p.DashboardLayoutChangedEvent(R)}))})),D.push(I);var M=new d.SingleEventManagerImpl(u.TableauEventType.WorkbookFormattingChanged);return w.registerHandler(f.NotificationId.WorkbookFormattingChanged,(function(){return!0}),(function(k){M.triggerEvent((function(){return new g.WorkbookFormattingChangedEvent(k)}))})),D.push(M),D},A.prototype.moveAndResizeDashboardObjectsAsync=function(w){return this._dashboardImpl.moveAndResizeDashboardObjectsAsync(w)},A.prototype.replayAnimationAsync=function(w){return this._dashboardImpl.replayAnimationAsync(w)},A.prototype.getFiltersAsync=function(){return this._dashboardImpl.getFiltersAsync()},A.prototype.applyFilterAsync=function(w,C,D,I){return this._dashboardImpl.applyFilterAsync(w,C,D,I)},A})(b.Sheet);o.Dashboard=_},9751:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1818),l=a(921),u=(function(){function f(d){this._dashboardObjectImpl=d}return Object.defineProperty(f.prototype,"dashboard",{get:function(){return new s.Dashboard(this._dashboardObjectImpl.dashboardImpl)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"type",{get:function(){return this._dashboardObjectImpl.type},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"position",{get:function(){return this._dashboardObjectImpl.position},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"size",{get:function(){return this._dashboardObjectImpl.size},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"worksheet",{get:function(){if(this._dashboardObjectImpl.worksheetImpl)return new l.Worksheet(this._dashboardObjectImpl.worksheetImpl)},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"name",{get:function(){return this._dashboardObjectImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isFloating",{get:function(){return this._dashboardObjectImpl.isFloating},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isVisible",{get:function(){return this._dashboardObjectImpl.isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"id",{get:function(){return this._dashboardObjectImpl.id},enumerable:!0,configurable:!0}),f})();o.DashboardObject=u},7303:function(i,o,a){var s,l=this&&this.__extends||(s=function(v,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,_){x.__proto__=_}||function(x,_){for(var T in _)_.hasOwnProperty(T)&&(x[T]=_[T])},s(v,b)},function(v,b){function x(){this.constructor=v}s(v,b),v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4007),p=a(4913),g=a(2200),y=(function(v){function b(x,_){var T=v.call(this)||this;return T.parameterImpl=x,T.initializeEvents(_).forEach((function(A){return T.addNewEventType(A)})),T}return l(b,v),Object.defineProperty(b.prototype,"name",{get:function(){return this.parameterImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"currentValue",{get:function(){return this.parameterImpl.currentValue},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"dataType",{get:function(){return this.parameterImpl.dataType},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"allowableValues",{get:function(){return this.parameterImpl.allowableValues},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this.parameterImpl.id},enumerable:!0,configurable:!0}),b.prototype.changeValueAsync=function(x){return this.parameterImpl.changeValueAsync(x)},b.prototype.initializeEvents=function(x){var _=this;d.ErrorHelpers.verifyInternalValue(x,"sheet");var T,A=new Array;try{T=d.ApiServiceRegistry.get(g.ExtensionsRegistryId).getService("notification-service")}catch{return A}var w=new d.SingleEventManagerImpl(u.TableauEventType.ParameterChanged);return T.registerHandler(f.NotificationId.ParameterChanged,(function(C){return C===_.parameterImpl.id}),(function(C){w.triggerEvent((function(){return new p.ParameterChangedEvent(C,x)}))})),A.push(w),A},b})(d.EventListenerManager);o.Parameter=y},9764:function(i,o,a){var s,l=this&&this.__extends||(s=function(g,y){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)b.hasOwnProperty(x)&&(v[x]=b[x])},s(g,y)},function(g,y){function v(){this.constructor=g}s(g,y),g.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4007),d=a(7303),p=(function(g){function y(v){var b=g.call(this)||this;return b._sheetImpl=v,b}return l(y,g),Object.defineProperty(y.prototype,"name",{get:function(){return this._sheetImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sheetType",{get:function(){return this._sheetImpl.sheetType},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"size",{get:function(){if(this.isValidSize(this._sheetImpl.size))return this._sheetImpl.size;throw new f.TableauError(u.EmbeddingErrorCodes.ImplementationError,"Size not implemented")},enumerable:!0,configurable:!0}),y.prototype.isValidSize=function(v){var b=v;return b.width!==void 0&&b.height!==void 0},y.prototype.findParameterAsync=function(v){var b=this;return this._sheetImpl.findParameterAsync(v).then((function(x){return new Promise(x?function(_){return _(new d.Parameter(x,b))}:function(_){return _(void 0)})}))},y.prototype.getParametersAsync=function(){var v=this;return this._sheetImpl.getParametersAsync().then((function(b){return b.map((function(x){return new d.Parameter(x,v)}))}))},y})(f.EventListenerManager);o.Sheet=p},6847:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._workbookImpl=l}return s.prototype.getAllDataSourcesAsync=function(){return this._workbookImpl.getAllDataSourcesAsync()},s})();o.Workbook=a},921:function(i,o,a){var s,l=this&&this.__extends||(s=function(_,T){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var C in w)w.hasOwnProperty(C)&&(A[C]=w[C])},s(_,T)},function(_,T){function A(){this.constructor=_}s(_,T),_.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(1750),d=a(4695),p=a(4007),g=a(8078),y=a(1178),v=a(2200),b=a(1818),x=(function(_){function T(A){var w=_.call(this,A)||this;return w._worksheetImpl=A,w.initializeEvents().forEach((function(C){return w.addNewEventType(C)})),w}return l(T,_),Object.defineProperty(T.prototype,"parentDashboard",{get:function(){if(this._worksheetImpl.parentDashboard==null)throw new p.TableauError(u.SharedErrorCodes.ImplementationError,"Parent dashboard not implemented");return new b.Dashboard(this._worksheetImpl.parentDashboard)},enumerable:!0,configurable:!0}),T.prototype.initializeEvents=function(){var A,w=this,C=new Array;try{A=p.ApiServiceRegistry.get(v.ExtensionsRegistryId).getService("notification-service")}catch{return C}var D=new p.SingleEventManagerImpl(f.TableauEventType.MarkSelectionChanged);A.registerHandler(d.NotificationId.SelectedMarksChanged,(function(M){var k=M;return w.visualIdsAreEqual(k,w._worksheetImpl.visualId)}),(function(){return D.triggerEvent((function(){return new y.MarksSelectedEvent(w)}))}));var I=new p.SingleEventManagerImpl(f.TableauEventType.FilterChanged);return A.registerHandler(d.NotificationId.FilterChanged,(function(M){var k=M;return w._worksheetImpl.visualId.worksheet===k.visualId.worksheet}),(function(M){I.triggerEvent((function(){return new g.FilterChangedEvent(w,M.fieldName,M.fieldId)}))})),C.push(D),C.push(I),C},T.prototype.applyFilterAsync=function(A,w,C,D){return this._worksheetImpl.applyFilterAsync(A,w,C,D)},T.prototype.applyRangeFilterAsync=function(A,w){return this._worksheetImpl.applyRangeFilterAsync(A,w)},T.prototype.applyHierarchicalFilterAsync=function(A,w,C,D){return this._worksheetImpl.applyHierarchicalFilterAsync(A,w,C,D)},T.prototype.applyRelativeDateFilterAsync=function(A,w){return this._worksheetImpl.applyRelativeDateFilterAsync(A,w)},T.prototype.clearFilterAsync=function(A){return this._worksheetImpl.clearFilterAsync(A)},T.prototype.getDataSourcesAsync=function(){return this._worksheetImpl.getDataSourcesAsync()},T.prototype.getFiltersAsync=function(){return this._worksheetImpl.getFiltersAsync()},T.prototype.getSelectedMarksAsync=function(){return this._worksheetImpl.getSelectedMarksAsync()},T.prototype.getHighlightedMarksAsync=function(){return this._worksheetImpl.getHighlightedMarksAsync()},T.prototype.getSummaryDataAsync=function(A){return this._worksheetImpl.getSummaryDataAsync(A)},T.prototype.getSummaryDataReaderAsync=function(A,w){return this._worksheetImpl.getSummaryDataReaderAsync(A,w)},T.prototype.getSummaryColumnsInfoAsync=function(){return this._worksheetImpl.getSummaryColumnsInfoAsync()},T.prototype.getUnderlyingDataAsync=function(A){return console.warn("Worksheet.getUnderlyingDataAsync is deprecated. Please use Worksheet.getUnderlyingTablesAsync and Worksheet.getUnderlyingTableDataAsync"),this._worksheetImpl.getUnderlyingDataAsync(A)},T.prototype.getUnderlyingTablesAsync=function(){return this._worksheetImpl.getUnderlyingTablesAsync()},T.prototype.getUnderlyingTableDataAsync=function(A,w){return this._worksheetImpl.getUnderlyingTableDataAsync(A,w)},T.prototype.getUnderlyingTableDataReaderAsync=function(A,w,C){return this._worksheetImpl.getUnderlyingTableDataReaderAsync(A,w,C)},T.prototype.clearSelectedMarksAsync=function(){return this._worksheetImpl.clearSelectedMarksAsync()},T.prototype.selectMarksByIDAsync=function(A,w){return this._worksheetImpl.selectMarksByIdAsync(A,w)},T.prototype.selectMarksByValueAsync=function(A,w){return this._worksheetImpl.selectMarksByValueAsync(A,w)},T.prototype.selectMarksByIdAsync=function(A,w){return this._worksheetImpl.selectMarksByIdAsync(A,w)},T.prototype.annotateMarkAsync=function(A,w){return this._worksheetImpl.annotateMarkAsync(A,w)},T.prototype.getAnnotationsAsync=function(){return this._worksheetImpl.getAnnotationsAsync()},T.prototype.removeAnnotationAsync=function(A){return this._worksheetImpl.removeAnnotationAsync(A)},T.prototype.visualIdsAreEqual=function(A,w){return A&&w&&A.worksheet===w.worksheet&&A.dashboard===w.dashboard&&A.storyboard===w.storyboard&&A.storyPointID===w.storyPointID},T})(a(9764).Sheet);o.Worksheet=x},5599:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._dashboard=l}return Object.defineProperty(s.prototype,"dashboard",{get:function(){return this._dashboard},enumerable:!0,configurable:!0}),s})();o.DashboardContent=a},1286:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4007),l=a(2916),u=a(6933),f=(function(){function d(p){this._apiVersion=s.ApiVersion.Instance&&s.ApiVersion.Instance.formattedValue,this._context=s.InternalToExternalEnumMappings.extensionContext.convert(p.extensionContext),this._formatting=u.WorkbookFormattingEnvUtil.convertToWorkbookFormatting(p.workbookFormatting),this._language=p.extensionLanguage,this._country=p.extensionCountry,this._locale=p.extensionLocale,this._mode=s.InternalToExternalEnumMappings.extensionMode.convert(p.extensionMode),this._operatingSystem=p.operatingSystem,this._tableauVersion=p.tableauVersion,p.userId&&(this.connectedServer=new l.ConnectedServer(p.userId,p.siteId,p.workbookId))}return Object.defineProperty(d.prototype,"apiVersion",{get:function(){return this._apiVersion},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"workbookFormatting",{get:function(){return this._formatting},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"language",{get:function(){return this._language},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"country",{get:function(){return this._country},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"locale",{get:function(){return this._locale},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"mode",{get:function(){return this._mode},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"operatingSystem",{get:function(){return this._operatingSystem},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"tableauVersion",{get:function(){return this._tableauVersion},enumerable:!0,configurable:!0}),d})();o.Environment=f},1930:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this.extensionImpl=l,this.extensionImpl=l}return Object.defineProperty(s.prototype,"dashboardContent",{get:function(){return this.extensionImpl.dashboardContent},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"environment",{get:function(){return this.extensionImpl.environment},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"settings",{get:function(){return this.extensionImpl.settings},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"ui",{get:function(){return this.extensionImpl.ui},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"workbook",{get:function(){return this.extensionImpl.workbook},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dashboardObjectId",{get:function(){return this.extensionImpl.extensionZoneId},enumerable:!0,configurable:!0}),s.prototype.initializeAsync=function(l){return this.extensionImpl.initializeAsync(!1,l).then()},s.prototype.initializeDialogAsync=function(){return this.extensionImpl.initializeAsync(!0)},s.prototype.createVizImageAsync=function(l){return this.extensionImpl.createVizImageAsync(l)},s.prototype.setClickThroughAsync=function(l){return this.extensionImpl.setClickThroughAsync(l)},s})();o.Extensions=a},6286:function(i,o,a){var s,l=this&&this.__extends||(s=function(f,d){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)g.hasOwnProperty(y)&&(p[y]=g[y])},s(f,d)},function(f,d){function p(){this.constructor=f}s(f,d),f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(o,"__esModule",{value:!0});var u=(function(f){function d(p){var g=f.call(this)||this;return g._settingsImpl=p,g._settingsImpl.initializeEvents().forEach((function(y){return g.addNewEventType(y)})),g}return l(d,f),d.prototype.erase=function(p){this._settingsImpl.erase(p)},d.prototype.get=function(p){return this._settingsImpl.get(p)},d.prototype.getAll=function(){return this._settingsImpl.getAll()},Object.defineProperty(d.prototype,"isModified",{get:function(){return this._settingsImpl.isModified},enumerable:!0,configurable:!0}),d.prototype.saveAsync=function(){return this._settingsImpl.saveAsync()},d.prototype.set=function(p,g){this._settingsImpl.set(p,g)},d})(a(4007).EventListenerManager);o.Settings=u},5728:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._impl=l}return s.prototype.displayDialogAsync=function(l,u,f){return this._impl.displayDialogAsync(l,u,f)},s.prototype.closeDialog=function(l){this._impl.closeDialog(l)},s})();o.UI=a},6933:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4007),l=(function(){function u(){}return u.convertToWorkbookFormatting=function(f){return f?{formattingSheets:f.formattingSheets.map((function(d){return{classNameKey:s.InternalToExternalEnumMappings.classNameKey.convert(d.classNameKey),cssProperties:{fontFamily:d.cssProperties.fontFamily,fontSize:d.cssProperties.fontSize,fontWeight:d.cssProperties.fontWeight,fontStyle:d.cssProperties.fontStyle,textDecoration:d.cssProperties.textDecoration,color:d.cssProperties.color}}}))}:void 0},u})();o.WorkbookFormattingEnvUtil=l},591:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=(function(d){function p(){return d!==null&&d.apply(this,arguments)||this}return l(p,d),Object.defineProperty(p.prototype,"serviceName",{get:function(){return"InitializationService"},enumerable:!0,configurable:!0}),p.prototype.initializeDashboardExtensionsAsync=function(g,y){var v,b=((v={})[u.ParameterId.FunctionName]="initializeDashboardExtensionsAsync",v[u.ParameterId.ExtensionContextMenuIds]=y,v[u.ParameterId.IsExtensionDialog]=g,v);return this.execute(u.VerbId.InitializeExtension,b).then((function(x){return x.result}))},p})(a(4007).ServiceImplBase);o.InitializationServiceImpl=f},1165:function(i,o,a){var s,l=this&&this.__extends||(s=function(g,y){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)b.hasOwnProperty(x)&&(v[x]=b[x])},s(g,y)},function(g,y){function v(){this.constructor=g}s(g,y),g.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4007),p=(function(g){function y(){return g!==null&&g.apply(this,arguments)||this}return l(y,g),Object.defineProperty(y.prototype,"serviceName",{get:function(){return"SettingsService"},enumerable:!0,configurable:!0}),y.prototype.saveSettingsAsync=function(v){var b,x=((b={})[f.ParameterId.FunctionName]="saveSettingsAsync",b[f.ParameterId.SettingsValues]=v,b);return this.execute(f.VerbId.SaveExtensionSettings,x).then((function(_){var T=_.result;if(!T||!T.settingsValues)throw new d.TableauError(u.ErrorCodes.InternalError,"Unexpected error savings settings.");return T.settingsValues}))},y})(d.ServiceImplBase);o.SettingsServiceImpl=p},1969:function(i,o,a){var s,l=this&&this.__extends||(s=function(y,v){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var _ in x)x.hasOwnProperty(_)&&(b[_]=x[_])},s(y,v)},function(y,v){function b(){this.constructor=y}s(y,v),y.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4007),p=u.DialogStyle.Window,g=(function(y){function v(){return y!==null&&y.apply(this,arguments)||this}return l(v,y),Object.defineProperty(v.prototype,"serviceName",{get:function(){return"UIService"},enumerable:!0,configurable:!0}),v.prototype.displayDialogAsync=function(b,x,_){var T,A=((T={})[f.ParameterId.FunctionName]="displayDialogAsync",T[f.ParameterId.ExtensionDialogUrl]=b,T[f.ParameterId.ExtensionDialogPayload]=x,T),w=_&&_.height?_.height:400,C=_&&_.width?_.width:600,D=_&&_.dialogStyle?_.dialogStyle:p;if(w<=0||C<=0)throw new d.TableauError(u.ErrorCodes.InvalidParameter,"Size parameters for displayDialogAsync must be positive");return A[f.ParameterId.ExtensionDialogH]=w,A[f.ParameterId.ExtensionDialogW]=C,d.ErrorHelpers.verifyEnumValue(D,u.DialogStyle,"DialogStyle"),A[f.ParameterId.ExtensionDialogStyle]=d.ExternalToInternalEnumMappings.dialogStyles.convert(D),this.execute(f.VerbId.DisplayDialog,A).then((function(I){switch(I.result){case f.ExtensionDialogResult.DialogAlreadyOpen:throw new d.TableauError(u.ErrorCodes.DialogAlreadyOpen,"There already exists an open dialog for this extension.");case f.ExtensionDialogResult.InvalidDomain:throw new d.TableauError(u.ErrorCodes.InvalidDomainDialog,"The url of an extension dialog must match the domain of the parent extension.");default:return}}))},v.prototype.closeDialog=function(b){var x,_=((x={})[f.ParameterId.FunctionName]="closeDialog",x);return b&&(_[f.ParameterId.ExtensionDialogPayload]=b),this.execute(f.VerbId.CloseDialog,_).then((function(){}))},v.prototype.setClickThroughAsync=function(b,x){var _;if(d.ErrorHelpers.verifyParameterType(b,"boolean","clickThroughEnabled"),x===void 0||x<=0)throw new d.TableauError(u.ErrorCodes.InternalError,"Extension Id is invalid.");var T=((_={})[f.ParameterId.ExtensionZoneId]=x,_[f.ParameterId.ClickThroughEnabled]=b,_);return this.execute(f.VerbId.SetClickThrough,T).then((function(){}))},v})(d.ServiceImplBase);o.UIServiceImpl=g},1185:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4007),l=a(591),u=a(1165),f=a(1969),d=a(2200);o.registerAllExtensionsServices=function(p){s.ApiServiceRegistry.get(d.ExtensionsRegistryId).registerService(new u.SettingsServiceImpl(p,d.ExtensionsRegistryId)),s.ApiServiceRegistry.get(d.ExtensionsRegistryId).registerService(new f.UIServiceImpl(p,d.ExtensionsRegistryId))},o.registerInitializationExtensionsServices=function(p){s.ApiServiceRegistry.get(d.ExtensionsRegistryId).registerService(new l.InitializationServiceImpl(p,d.ExtensionsRegistryId))}},2200:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtensionsRegistryId=0},9654:(i,o,a)=>{function s(u){for(var f in u)o.hasOwnProperty(f)||(o[f]=u[f])}Object.defineProperty(o,"__esModule",{value:!0}),s(a(2996));var l=a(3069);o.ApiMenuType=l.ApiMenuType,o.DeviceType=l.DeviceType,o.EmbeddingErrorCodes=l.EmbeddingErrorCodes,o.SheetSizeBehavior=l.SheetSizeBehavior,o.TableauDialogType=l.TableauDialogType,o.EmbeddingTableauEventType=l.TableauEventType,o.Toolbar=l.Toolbar,s(a(7940)),s(a(7154)),s(a(6408))},1615:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(423);o.ErrorCodes=s.ErrorCodes,o.ExtensionContext=s.ExtensionContext,o.ExtensionMode=s.ExtensionMode,o.TableauEventType=s.TableauEventType,o.VizImageEncodingType=s.VizImageEncodingType,o.VizImagePaletteType=s.VizImagePaletteType,o.VizImageSizeSettingAlignmentType=s.VizImageSizeSettingAlignmentType,o.VizImageSizeSettingType=s.VizImageSizeSettingType,o.VizImageSortDirectionType=s.VizImageSortDirectionType,(function(l){for(var u in l)o.hasOwnProperty(u)||(o[u]=l[u])})(a(6408))},1750:(i,o,a)=>{function s(l){for(var u in l)o.hasOwnProperty(u)||(o[u]=l[u])}Object.defineProperty(o,"__esModule",{value:!0}),s(a(9654)),s(a(1615))},2996:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.AskDataAttributes||(o.AskDataAttributes={})).Origin="origin",a.ShowEmbed="showEmbed",a.ShowPin="showPin",a.ShowSave="showSave",a.ShowShare="showShare"},3069:(i,o)=>{var a,s,l,u,f,d,p,g,y;Object.defineProperty(o,"__esModule",{value:!0}),(y=o.DeviceType||(o.DeviceType={})).Default="default",y.Desktop="desktop",y.Tablet="tablet",y.Phone="phone",(g=o.EmbeddingErrorCodes||(o.EmbeddingErrorCodes={})).BrowserNotCapable="browser-not-capable",g.DownloadWorkbookNotAllowed="download-workbook-not-allowed",g.FilterCannotBePerformed="filter-cannot-be-performed",g.IndexOutOfRange="index-out-of-range",g.InternalError="internal-error",g.InvalidCustomViewName="invalid-custom-view-name",g.InvalidDateParameter="invalid-date-parameter",g.invalidFilterFieldNameOrValue="invalid-filter-field-name",g.InvalidParameter="invalid-parameter",g.InvalidSize="invalid-size",g.InvalidSizeBehavior="invalid-size-behavior",g.InvalidSizeBehaviorOnWorksheet="invalid-size-behavior-on-worksheet",g.InvalidUrl="invalid-url",g.MissingMaxSize="missing-max-size",g.MissingMinSize="missing-min-size",g.MissingMinMaxSize="missing-min-max-size",g.MissingParameter="missing-parameter",g.MissingRangeNForRelativeDateFilters="missing-range-n-for-relative-date-filters",g.NoUrlForHiddenWorksheet="no-url-for-hidden-worksheet",g.NoUrlOrParentElementNotFound="no-url-or-parent-element-not-found",g.NotActiveSheet="not-active-sheet",g.NullOrEmptyParameter="null-or-empty-parameter",g.SheetNotInWorkbook="sheet-not-in-workbook",g.StaleDataReference="stale-data-reference",g.UnsupportedEventName="unsupported-event-name",g.VizAlreadyInManager="viz-already-in-manager",g.ImplementationError="wrong-implementation",g.NotImplemented="not-implemented",g.EventInitializationError="event-initialization-error",g.IncompatibleVersionError="incompatible-version-error",g.UnknownDialogType="unknown-dialog-type",g.FilterMissingOrNotImplemented="filter-missing-not-implemented",g.StoryPointIdMismatch="storypoint-id-mismatch",(p=o.FileFormats||(o.FileFormats={})).PDF="pdf",p.PNG="png",(d=o.RevertVizSelection||(o.RevertVizSelection={})).All="all",d.Axes="axes",d.Filters="filters",d.Sorts="sorts",d.Shelves="shelves",(f=o.ToolbarButtons||(o.ToolbarButtons={})).Alerts="alerts",f.AskData="askData",f.CustomViews="customViews",f.DataDetails="dataDetails",f.Share="share",f.Subscribe="subscribe",(u=o.Toolbar||(o.Toolbar={})).Top="top",u.Bottom="bottom",u.Hidden="hidden",(l=o.SheetSizeBehavior||(o.SheetSizeBehavior={})).Automatic="automatic",l.Exactly="exactly",l.Range="range",l.AtLeast="atleast",l.AtMost="atmost",(s=o.TableauEventType||(o.TableauEventType={})).CustomViewLoaded="customviewloaded",s.CustomViewRemoved="customviewremoved",s.CustomViewSaved="customviewsaved",s.CustomViewSetDefault="customviewsetdefault",s.EditButtonClicked="editbuttonclicked",s.EditInDesktopButtonClicked="editindesktopbuttonclicked",s.FilterChanged="filterchanged",s.FirstVizSizeKnown="firstvizsizeknown",s.FirstInteractive="firstinteractive",s.CustomMarkContextMenuEvent="custommarkcontextmenu",s.MarkSelectionChanged="markselectionchanged",s.ParameterChanged="parameterchanged",s.ToolbarStateChanged="toolbarstatechanged",s.WorkbookReadyToClose="workbookreadytoclose",s.WorkbookPublished="workbookpublished",s.WorkbookPublishedAs="workbookpublishedas",s.UrlAction="urlaction",s.TabSwitched="tabswitched",s.StoryPointSwitched="storypointswitched",(o.ApiMenuType||(o.ApiMenuType={})).Ubertip="ubertip",(a=o.TableauDialogType||(o.TableauDialogType={})).ExportPDF="export-pdf",a.ExportPowerPoint="export-powerpoint",a.ExportData="export-data",a.ExportCrossTab="export-cross-tab",a.ExportWorkbook="export-workbook",a.Share="share"},7940:(i,o)=>{var a,s,l,u,f;Object.defineProperty(o,"__esModule",{value:!0}),(f=o.VizSharedAttributes||(o.VizSharedAttributes={})).TouchOptimize="touch-optimize",f.HideEditInDesktopButton="hide-edit-in-desktop-button",f.SuppressDefaultEditBehavior="suppress-default-edit-behavior",f.DisableVersionCheck="disable-version-check",f.OnEditInDesktopButtonClicked="onEditInDesktopButtonClicked",f.OnFirstVizSizeKnown="onFirstVizSizeKnown",f.OnFirstInteractive="onFirstInteractive",(u=o.VizAttributes||(o.VizAttributes={})).DisableUrlActionsPopups="disable-url-actions",u.HideTabs="hide-tabs",u.Toolbar="toolbar",u.InstanceIdToClone="instance-id-to-clone",u.Device="device",u.HideEditButton="hide-edit-button",u.OnEditButtonClicked="onEditButtonClicked",u.OnFilterChanged="onFilterChanged",u.OnCustomMarkContextMenuEvent="onCustomMarkContextMenuEvent",u.OnMarkSelectionChanged="onMarkSelectionChanged",u.OnParameterChanged="onParameterChanged",u.OnToolbarStateChanged="onToolbarStateChanged",u.OnUrlAction="onUrlAction",u.OnTabSwitched="onTabSwitched",u.OnCustomViewLoaded="onCustomViewLoaded",u.OnCustomViewRemoved="onCustomViewRemoved",u.OnCustomViewSaved="onCustomViewSaved",u.OnCustomViewSetDefault="onCustomViewSetDefault",u.OnStoryPointSwitched="onStoryPointSwitched",(l=o.VizAuthoringAttributes||(o.VizAuthoringAttributes={})).OnWorkbookPublished="onWorkbookPublished",l.OnWorkbookPublishedAs="onWorkbookPublishedAs",l.OnWorkbookReadyToClose="onWorkbookReadyToClose",l.HideCloseButton="hide-close-button",(s=o.VizChildElements||(o.VizChildElements={})).VizFilter="viz-filter",s.VizParameter="viz-parameter",s.CustomParameter="custom-parameter",(a=o.VizChildElementAttributes||(o.VizChildElementAttributes={})).Field="field",a.Value="value",a.Name="name"},7154:(i,o)=>{var a,s;Object.defineProperty(o,"__esModule",{value:!0}),(s=o.WebComponentAttributes||(o.WebComponentAttributes={})).Src="src",s.Width="width",s.Height="height",s.Token="token",s.Debug="debug",(o.WebComponentChildElements||(o.WebComponentChildElements={})).CustomParameter="custom-parameter",(a=o.WebComponentChildElementAttributes||(o.WebComponentChildElementAttributes={})).Field="field",a.Value="value",a.Name="name"},423:i=>{var o;(function(a){var s,l,u,f,d,p,g,y,v;(v=a.ErrorCodes||(a.ErrorCodes={})).APINotInitialized="api-not-initialized",v.VisibilityError="visibility-error",v.DialogAlreadyOpen="dialog-already-open",v.DialogClosedByUser="dialog-closed-by-user",v.InternalError="internal-error",v.InvalidDomainDialog="invalid-dialog-domain",v.InvalidParameter="invalid-parameter",v.MissingFilter="missing-filter",v.MissingParameter="missing-parameter",v.ServerError="server-error",v.SettingSaveInProgress="setting-save-in-progress",v.UnsupportedEventName="unsupported-event-name",v.UnsupportedMethodForDataSourceType="unsupported-method-for-data-source-type",(y=a.ExtensionContext||(a.ExtensionContext={})).Desktop="desktop",y.Server="server",(g=a.ExtensionMode||(a.ExtensionMode={})).Authoring="authoring",g.Viewing="viewing",(p=a.TableauEventType||(a.TableauEventType={})).FilterChanged="filter-changed",p.MarkSelectionChanged="mark-selection-changed",p.ParameterChanged="parameter-changed",p.SettingsChanged="settings-changed",p.DashboardLayoutChanged="dashboard-layout-changed",p.WorkbookFormattingChanged="workbook-formatting-changed",(d=a.VizImageEncodingType||(a.VizImageEncodingType={})).Discrete="discrete",d.Continuous="continuous",(f=a.VizImageSortDirectionType||(a.VizImageSortDirectionType={})).Ascending="ascending",f.Descending="descending",(u=a.VizImagePaletteType||(a.VizImagePaletteType={})).CustomDiverging="custom-diverging",u.CustomSequential="custom-sequential",(l=a.VizImageSizeSettingType||(a.VizImageSizeSettingType={})).Fixed="fixed",l.Manual="manual",(s=a.VizImageSizeSettingAlignmentType||(a.VizImageSizeSettingAlignmentType={})).Right="right",s.Left="left",s.Center="center"})(o||(o={})),i.exports=o},6818:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.SharedErrorCodes||(o.SharedErrorCodes={})).InvalidAggregationFieldName="invalid-aggregation-field-name",a.InvalidFilterFieldName="invalid-filter-name",a.InvalidFilterFieldValue="invalid-filter-fieldValue",a.InvalidSelectionDate="invalid-selection-date",a.InvalidSelectionFieldName="invalid-selection-fieldName",a.InvalidSelectionValue="invalid-selection-value",a.InternalError="internal-error",a.InvalidParameter="invalid-parameter",a.NotActiveSheet="not-active-sheet",a.ImplementationError="wrong-implementation",a.ApiExecutionError="api-execution-error",a.ServerError="server-error",a.Timeout="timeout"},4953:function(i){var o,a=this&&this.__assign||function(){return a=Object.assign||function(s){for(var l,u=1,f=arguments.length;u<f;u++)for(var d in l=arguments[u])Object.prototype.hasOwnProperty.call(l,d)&&(s[d]=l[d]);return s},a.apply(this,arguments)};(function(s){var l,u,f,d,p,g,y,v,b,x,_,T,A,w,C,D,I,M,k,R,z,P,$,N,L,B,q,H;(H=s.AnalyticsObjectType||(s.AnalyticsObjectType={})).Cluster="cluster",H.Forecast="forecast",H.TrendLine="trend-line",(q=s.AnnotationType||(s.AnnotationType={})).Mark="mark",q.Point="point",q.Area="area",(B=s.ColumnType||(s.ColumnType={})).Discrete="discrete",B.Continuous="continuous",(L=s.ClassNameKey||(s.ClassNameKey={})).WorksheetTitle="tableau-worksheet-title",L.Worksheet="tableau-worksheet",L.Tooltip="tableau-tooltip",L.StoryTitle="tableau-story-title",L.DashboardTitle="tableau-dashboard-title",(N=s.DashboardObjectType||(s.DashboardObjectType={})).Blank="blank",N.Worksheet="worksheet",N.QuickFilter="quick-filter",N.ParameterControl="parameter-control",N.PageFilter="page-filter",N.Legend="legend",N.Title="title",N.Text="text",N.Image="image",N.WebPage="web-page",N.Extension="extension",(function(U){U.Show="show",U.Hide="hide"})(l=s.DashboardObjectVisibilityType||(s.DashboardObjectVisibilityType={})),($=s.DataType||(s.DataType={})).String="string",$.Int="int",$.Float="float",$.Bool="bool",$.Date="date",$.DateTime="date-time",$.Spatial="spatial",(P=s.DashboardLayoutChange||(s.DashboardLayoutChange={})).Added="added",P.Removed="removed",P.IsFloatingChanged="is-floating-changed",P.IsVisibleChanged="is-visible-changed",P.PositionChanged="position-changed",P.SizeChanged="size-changed",P.NameChanged="name-changed",(z=s.DateRangeType||(s.DateRangeType={})).Last="last",z.LastN="last-n",z.Next="next",z.NextN="next-n",z.Current="current",z.ToDate="to-date",(R=s.DialogStyle||(s.DialogStyle={})).Window="window",R.Modal="modal",R.Modeless="modeless",(k=s.EncodingType||(s.EncodingType={})).Column="column",k.Row="row",k.Page="page",k.Filter="filter",k.MarksType="marks-type",k.MeasureValues="measure-values",k.Color="color",k.Size="size",k.Label="label",k.Detail="detail",k.Tooltip="tooltip",k.Shape="shape",k.Path="path",k.Angle="angle",(M=s.FieldAggregationType||(s.FieldAggregationType={})).Sum="sum",M.Avg="avg",M.Min="min",M.Max="max",M.Stdev="stdev",M.Stdevp="stdevp",M.Var="var",M.Varp="varp",M.Count="count",M.Countd="countd",M.Median="median",M.Attr="attr",M.None="none",M.Year="year",M.Qtr="qtr",M.Month="month",M.Day="day",M.Hour="hour",M.Minute="minute",M.Second="second",M.Week="week",M.Weekday="weekday",M.MonthYear="month-year",M.Mdy="mdy",M.End="end",M.TruncYear="trunc-year",M.TruncQtr="trunc-qtr",M.TruncMonth="trunc-month",M.TruncWeek="trunc-week",M.TruncDay="trunc-day",M.TruncHour="trunc-hour",M.TruncMinute="trunc-minute",M.TruncSecond="trunc-second",M.Quart1="quart1",M.Quart3="quart3",M.Skewness="skewness",M.Kurtosis="kurtosis",M.InOut="in-out",M.User="user",(I=s.FieldRoleType||(s.FieldRoleType={})).Dimension="dimension",I.Measure="measure",I.Unknown="unknown",(D=s.FilterType||(s.FilterType={})).Categorical="categorical",D.Range="range",D.Hierarchical="hierarchical",D.RelativeDate="relative-date",(C=s.FilterUpdateType||(s.FilterUpdateType={})).Add="add",C.All="all",C.Replace="replace",C.Remove="remove",(w=s.FilterDomainType||(s.FilterDomainType={})).Relevant="relevant",w.Database="database",(A=s.FilterNullOption||(s.FilterNullOption={})).NullValues="null-values",A.NonNullValues="non-null-values",A.AllValues="all-values",(T=s.IncludeDataValuesOption||(s.IncludeDataValuesOption={})).AllValues="all-values",T.OnlyNativeValues="only-native-values",T.OnlyFormattedValues="only-formatted-values",(_=s.MarkType||(s.MarkType={})).Bar="bar",_.Line="line",_.Area="area",_.Square="square",_.Circle="circle",_.Shape="shape",_.Text="text",_.Map="map",_.Pie="pie",_.GanttBar="gantt-bar",_.Polygon="polygon",(x=s.ParameterValueType||(s.ParameterValueType={})).All="all",x.List="list",x.Range="range",(b=s.PeriodType||(s.PeriodType={})).Years="years",b.Quarters="quarters",b.Months="months",b.Weeks="weeks",b.Days="days",b.Hours="hours",b.Minutes="minutes",b.Seconds="seconds",(v=s.QuickTableCalcType||(s.QuickTableCalcType={})).RunningTotal="running-total",v.Difference="difference",v.PercentDifference="percent-difference",v.PercentOfTotal="percent-of-total",v.Rank="rank",v.Percentile="percentile",v.MovingAverage="moving-average",v.YTDTotal="ytd-total",v.CompoundGrowthRate="compound-growth-rate",v.YearOverYearGrowth="year-over-year-growth",v.YTDGrowth="ytd-growth",v.Undefined="undefined",(y=s.SelectionUpdateType||(s.SelectionUpdateType={})).Replace="select-replace",y.Add="select-add",y.Remove="select-remove",(g=s.SheetType||(s.SheetType={})).Dashboard="dashboard",g.Story="story",g.Worksheet="worksheet",(p=s.SortDirection||(s.SortDirection={})).Increasing="increasing",p.Decreasing="decreasing",(d=s.TrendLineModelType||(s.TrendLineModelType={})).Linear="linear",d.Logarithmic="logarithmic",d.Exponential="exponential",d.Polynomial="polynomial",(f=s.ReplaySpeedType||(s.ReplaySpeedType={})).Slow="slow",f.Normal="normal",f.Fast="fast",(u=s.HierarchicalLevelSelectionState||(s.HierarchicalLevelSelectionState={})).AllSelected="all-selected",u.NoneSelected="none-selected",u.SomeSelected="some-selected",u.UnknownSelected="unknown-selected",s.ZoneVisibilityType=a({},l)})(o||(o={})),i.exports=o},6408:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0}),(function(l){for(var u in l)o.hasOwnProperty(u)||(o[u]=l[u])})(a(6818));var s=a(4953);o.AnalyticsObjectType=s.AnalyticsObjectType,o.AnnotationType=s.AnnotationType,o.ClassNameKey=s.ClassNameKey,o.ColumnType=s.ColumnType,o.DashboardLayoutChange=s.DashboardLayoutChange,o.DashboardObjectType=s.DashboardObjectType,o.DashboardObjectVisibilityType=s.DashboardObjectVisibilityType,o.DataType=s.DataType,o.DateRangeType=s.DateRangeType,o.DialogStyle=s.DialogStyle,o.EncodingType=s.EncodingType,o.FieldAggregationType=s.FieldAggregationType,o.FieldRoleType=s.FieldRoleType,o.FilterDomainType=s.FilterDomainType,o.FilterNullOption=s.FilterNullOption,o.FilterType=s.FilterType,o.FilterUpdateType=s.FilterUpdateType,o.HierarchicalLevelSelectionState=s.HierarchicalLevelSelectionState,o.IncludeDataValuesOption=s.IncludeDataValuesOption,o.MarkType=s.MarkType,o.ParameterValueType=s.ParameterValueType,o.PeriodType=s.PeriodType,o.QuickTableCalcType=s.QuickTableCalcType,o.ReplaySpeedType=s.ReplaySpeedType,o.SelectionUpdateType=s.SelectionUpdateType,o.SheetType=s.SheetType,o.SortDirection=s.SortDirection,o.TrendLineModelType=s.TrendLineModelType,o.ZoneVisibilityType=s.ZoneVisibilityType},4695:(i,o,a)=>{function s(u){for(var f in u)o.hasOwnProperty(f)||(o[f]=u[f])}Object.defineProperty(o,"__esModule",{value:!0}),a(5611),a(2316),a(47);var l=a(2725);o.INTERNAL_CONTRACT_VERSION=l,s(a(7850)),s(a(4063)),s(a(5879)),s(a(5257)),s(a(5681)),s(a(967)),s(a(8075)),s(a(550)),s(a(3590)),s(a(408)),s(a(3526)),s(a(9394)),o.MESSAGING_VERSION={major:1,minor:0,fix:0}},7850:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4063),l=(function(){function u(){}return u.isSpecial=function(f){return f.length>2&&f[0]==="%"&&f[f.length-1]==="%"},u.parseBoolean=function(f){var d=f.toLowerCase();return d!=="true"&&d!=="false"?this.specialValueIndicator:d==="true"},u.parseNumber=function(f){var d=Number(f);return isNaN(d)?this.specialValueIndicator:d},u.parseDate=function(f){var d=new Date(f);return Number.isNaN(d.getTime())?null:d},u.parseDateTime=function(f){var d=f.replace(" ","T").concat("Z"),p=new Date(d);return Number.isNaN(p.getTime())?null:p},u.convertValueAsStringToValue=function(f,d){if(f!=null){if(this.isSpecial(f))return f;switch(d){case s.DataType.Bool:return this.parseBoolean(f);case s.DataType.Int:case s.DataType.Float:return this.parseNumber(f);case s.DataType.Date:return this.parseDate(f)===null?this.specialValueIndicator:f;case s.DataType.DateTime:return this.parseDateTime(f)===null?this.specialValueIndicator:f;case s.DataType.Spatial:case s.DataType.String:default:return f}}},u.convertValueToNativeValue=function(f,d){if(f==null)return null;switch(d){case s.DataType.Bool:case s.DataType.Int:case s.DataType.Float:return typeof f=="string"?null:f;case s.DataType.Date:return this.parseDate(f);case s.DataType.DateTime:return this.parseDateTime(f);case s.DataType.String:return this.isSpecial(f)?null:f;case s.DataType.Spatial:default:return f}},u.convertStringValueToNativeValue=function(f,d){return this.convertValueToNativeValue(this.convertValueAsStringToValue(f,d),d)},u.specialValueIndicator="%null%",u})();o.DataTypeConverter=l},4063:(i,o)=>{var a,s,l,u,f,d,p,g,y,v,b,x,_,T,A,w,C,D,I,M,k,R,z,P,$,N;Object.defineProperty(o,"__esModule",{value:!0}),(N=o.ExtensionContext||(o.ExtensionContext={})).Desktop="desktop",N.Server="server",N.Unknown="unknown",($=o.ExtensionMode||(o.ExtensionMode={})).Authoring="authoring",$.Viewing="viewing",$.Unknown="unknown",(P=o.AnnotateEnum||(o.AnnotateEnum={})).Mark="mark",P.Point="point",P.Area="area",(z=o.ColumnType||(o.ColumnType={})).Discrete="discrete",z.Continuous="continuous",(R=o.DashboardObjectType||(o.DashboardObjectType={})).Blank="blank",R.Worksheet="worksheet",R.QuickFilter="quick-filter",R.ParameterControl="parameter-control",R.PageFilter="page-filter",R.Legend="legend",R.Title="title",R.Text="text",R.Image="image",R.WebPage="web-page",R.Extension="extension",(k=o.DataType||(o.DataType={})).String="string",k.Int="int",k.Float="float",k.Bool="bool",k.Date="date",k.DateTime="date-time",k.Spatial="spatial",(M=o.DialogStyle||(o.DialogStyle={})).Window="window",M.Modal="modal",M.Modeless="modeless",(I=o.EncodedDataType||(o.EncodedDataType={})).Number="number",I.String="string",I.Date="date",I.Boolean="boolean",(D=o.ErrorCodes||(o.ErrorCodes={})).INITIALIZATION_ERROR="initialization-error",D.INTERNAL_ERROR="internal-error",D.MISSING_ENUM_MAPPING="missing-enum-mapping",D.MISSING_PARAMETER="missing-parameter",D.PERMISSION_DENIED="permission-denied",D.PRES_MODEL_PARSING_ERROR="pres-model-parsing-error",D.VERSION_NOT_CONFIGURED="version-not-configured",D.VISIBILITY_ERROR="visibility-error",D.UNKNOWN_VERB_ID="unknown-verb-id",(C=o.FieldAggregationType||(o.FieldAggregationType={})).Sum="sum",C.Avg="avg",C.Min="min",C.Max="max",C.Stdev="stdev",C.Stdevp="stdevp",C.Var="var",C.Varp="varp",C.Count="count",C.Countd="countd",C.Median="median",C.Attr="attr",C.None="none",C.Year="year",C.Qtr="qtr",C.Month="month",C.Day="day",C.Hour="hour",C.Minute="minute",C.Second="second",C.Week="week",C.Weekday="weekday",C.MonthYear="month-year",C.Mdy="mdy",C.End="end",C.TruncYear="trunc-year",C.TruncQtr="trunc-qtr",C.TruncMonth="trunc-month",C.TruncWeek="trunc-week",C.TruncDay="trunc-day",C.TruncHour="trunc-hour",C.TruncMinute="trunc-minute",C.TruncSecond="trunc-second",C.Quart1="quart1",C.Quart3="quart3",C.Skewness="skewness",C.Kurtosis="kurtosis",C.InOut="in-out",C.User="user",(w=o.FieldRoleType||(o.FieldRoleType={})).Dimension="dimension",w.Measure="measure",w.Unknown="unknown",(A=o.FilterUpdateType||(o.FilterUpdateType={})).Add="add",A.All="all",A.Replace="replace",A.Remove="remove",(T=o.SheetType||(o.SheetType={})).Dashboard="dashboard",T.Story="story",T.Worksheet="worksheet",(_=o.DomainRestrictionType||(o.DomainRestrictionType={})).All="all",_.List="list",_.Range="range",(x=o.DateStepPeriod||(o.DateStepPeriod={})).Years="years",x.Quarters="quarters",x.Months="months",x.Weeks="weeks",x.Days="days",x.Hours="hours",x.Minutes="minutes",x.Seconds="seconds",(b=o.FilterNullOption||(o.FilterNullOption={})).NullValues="nullvalues",b.NonNullValues="nonnullvalues",b.AllValues="allvalues",(v=o.FilterDomainType||(o.FilterDomainType={})).Relevant="relevant",v.Database="database",(y=o.SelectionUpdateType||(o.SelectionUpdateType={})).Replace="select-replace",y.Add="select-add",y.Remove="select-remove",(g=o.QuantitativeIncludedValues||(o.QuantitativeIncludedValues={})).IncludeNull="include-null",g.IncludeNonNull="include-non-null",g.IncludeAll="include-all",(p=o.HierarchicalLevelSelectionState||(o.HierarchicalLevelSelectionState={})).AllSelected="all-selected",p.NoneSelected="none-selected",p.SomeSelected="some-selected",p.UnknownSelected="unknown-selected",(d=o.MarkType||(o.MarkType={})).Bar="bar",d.Line="line",d.Area="area",d.Square="square",d.Circle="circle",d.Shape="shape",d.Text="text",d.Map="map",d.Pie="pie",d.GanttBar="gantt-bar",d.Polygon="polygon",(f=o.FilterType||(o.FilterType={})).Categorical="categorical",f.Range="range",f.RelativeDate="relativeDate",f.Hierarchical="hierarchical",(u=o.DateRangeType||(o.DateRangeType={})).Last="last",u.LastN="lastN",u.Next="next",u.NextN="nextN",u.Current="current",u.ToDate="toDate",(l=o.ExtensionDialogResult||(o.ExtensionDialogResult={})).DialogAlreadyOpen="dialog-already-open",l.InvalidDomain="invalid-domain",l.Success="success",(s=o.ApiShowDataTableSentinel||(o.ApiShowDataTableSentinel={})).SingleTableId="single-table-id-sentinel",s.SingleTableCaption="Single table id sentinel",(a=o.ApiShowDataTableFormat||(o.ApiShowDataTableFormat={})).NativeValuesOnly="native-values-only",a.FormattedValuesOnly="formatted-values-only",a.NativeAndFormattedValues="native-and-formatted-values"},5879:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.NotificationId||(o.NotificationId={})).CustomMarkContextMenuClicked="custom-mark-context-menu-clicked",a.ContextMenuClick="context-menu-click",a.CustomViewRemoved="custom-view-removed",a.CustomViewSaved="custom-view-saved",a.CustomViewSetDefault="custom-view-set-default",a.CustomViewsLoaded="custom-views-loaded",a.DashboardLayoutChanged="dashboard-layout-changed",a.EditButtonClicked="edit-button-clicked",a.EditInDesktopButtonClicked="edit-in-desktop-button-clicked",a.ExtensionDialogUpdate="extension-dialog-update",a.FilterChanged="filter-changed",a.FirstVizSizeKnown="first-viz-size-known",a.ParameterChanged="parameter-changed",a.SelectedMarksChanged="selected-marks-changed",a.SettingsChanged="settings-changed",a.TestConversionNotification="test-conversion-notification",a.ToolbarStateChanged="toolbar-state-changed",a.VizInteractive="viz-interactive",a.AskDataInteractive="ask-data-interactive",a.WorkbookReadyToClose="workbook-ready-to-close",a.WorkbookFormattingChanged="workbook-formatting-changed",a.WorkbookPublished="workbook-published",a.WorkbookPublishedAs="workbook-published-as",a.UrlAction="url-action",a.TabSwitched="tab-switched",a.StoryPointSwitched="story-point-switched"},5257:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.ParameterId||(o.ParameterId={})).ActiveTablesInfo="active-tables-info",a.AnchorDate="anchor-date",a.AnnotateEnum="annotate-enum",a.AnnotationList="annotation-list",a.CategoricalDomain="categorical-domain",a.ClickThroughEnabled="click-through-enabled",a.ColumnsToInclude="columns-to-include",a.ColumnsToIncludeById="columns-to-include-by-id",a.ConnectionDescriptionSummaries="connection-description-summaries",a.CustomView="custom-view",a.CustomViewIsDefault="custom-view-is-default",a.CustomViewIsPublic="custom-view-is-public",a.CustomViewLuid="custom-view-luid",a.CustomViewName="custom-view-name",a.CustomViews="custom-views",a.Dashboard="dashboard",a.DashboardFilters="dashboard-filters",a.DashboardName="dashboard",a.DashboardObjectPositionAndSizeUpdate="dashboard-object-position-and-size-update",a.DashboardObjectPositionAndSizeUpdateList="dashboard-object-position-and-size-update-list",a.DataRowIndex="data-row-index",a.DataSchema="data-schema",a.DataSource="data-source",a.DataSourceDataTable="data-source-data-table",a.DataSourceId="data-source-id",a.DataSourceName="data-source-name",a.DataTable="data-table",a.DataTableReader="data-table-reader",a.DateRangeType="date-range-type",a.DeltaTimeMs="delta-time-ms",a.DimValSelectionModels="dimensionValueSelectionModels",a.DomainType="domain-type",a.EmbeddingBootstrapInfo="embedding-bootstrap-info",a.ExtensionBootstrapInfo="extension-bootstrap-info",a.ExtensionContextMenuIds="extension-context-menu-ids",a.ExtensionDialogH="extension-dialog-height",a.ExtensionDialogPayload="extension-dialog-payload",a.ExtensionDialogResult="extension-dialog-result",a.ExtensionDialogStyle="extension-dialog-style",a.ExtensionDialogUrl="extension-dialog-url",a.ExtensionDialogW="extension-dialog-width",a.ExtensionLocator="extension-locator",a.ExtensionSettingsInfo="extension-settings-info",a.ExtensionZoneId="extension-zone-id",a.ExternalMenuDescription="external-menu-description",a.ExternalMenuHeader="external-menu-header",a.ExternalMenuItemDisplayName="external-menu-item-display-name",a.ExternalMenuItemId="external-menu-item-id",a.Field="field",a.FieldId="field-id",a.FieldName="field-name",a.FilterLevels="filter-levels",a.FilterRangeMax="filter-range-max",a.FilterRangeMin="filter-range-min",a.FilterRangeNullOption="filter-range-null-option",a.FilterUpdateType="filter-update-type",a.FilterValues="filter-values",a.FontNameListItems="font-name-list-items",a.FormattedText="formatted-text",a.FunctionName="function-name",a.HierValSelectionModels="hierarchicalValueSelectionModels",a.HighlightedData="highlighted-data",a.IgnoreAliases="ignore-aliases",a.IgnoreSelection="ignore-selection",a.IncludeAllColumns="include-all-columns",a.InvalidAggFieldName="invalid-agg-field-name",a.InvalidDates="invalid-dates",a.InvalidFieldCaption="invalid-field-caption",a.InvalidFields="invalid-fields",a.InvalidValues="invalid-values",a.IsExcludeMode="is-exclude",a.IsExtensionDialog="is-extension-dialog",a.JoinDescription="join-description",a.LogicalTableId="logical-table-id",a.LogicalTableInfoList="logical-table-info-list",a.MaxHeight="max-height",a.MaxRows="max-rows",a.MaxWidth="max-width",a.MinHeight="min-height",a.MinWidth="min-width",a.PageRowCount="page-row-count",a.ParameterCaption="paremeter-caption",a.ParameterError="parameter-error",a.ParameterFieldName="parameter-field-name",a.ParameterInfo="parameter-info",a.ParameterInfos="parameter-infos",a.ParameterValue="parameter-value",a.PeriodType="period-type",a.QuantitativeDomain="quantitative-dmain",a.QuantRangeSelectionModels="quantativeRangeSelectionModels",a.RangeN="range-n",a.ReplaySpeed="replay-speed",a.SelectedData="selected-data",a.Selection="selection",a.SelectionList="selection-list",a.SelectionUpdateType="selectionUpdateType",a.SettingsValues="settings-values",a.SharedFilterSheets="shared-filter-sheets",a.SharedFiltersInfo="shared-filters-info",a.SheetName="sheet-name",a.SheetPath="sheet-path",a.ShouldRefreshDS="should-refresh-ds",a.ShowDataTableFormat="show-data-table-format",a.State="state",a.StoryPointIndex="story-point-index",a.StoryPointInfo="story-point-info",a.SwitchToSheetName="switch-to-sheet-name",a.TargetPoint="target-point",a.TestConversionParameter="test-conversion-parameter",a.Text="formatted-text",a.UnderlyingDataTable="underlying-data-table",a.UnderlyingSummaryDataTable="underlying-summary-data-table",a.Url="url",a.ViewDataTableCacheId="view-data-table-cache-id",a.ViewDataTableId="view-data-table-id",a.VisualId="visual-id",a.VizAPIInputJson="vizapi-input-json",a.VizAPISVG="vizapi-svg",a.WorksheetName="worksheet-name",a.WorksheetFilters="worksheet-filters",a.ZoneIdsVisibilityMap="zone-ids-visibility-map"},5681:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.VerbId||(o.VerbId={})).ActivateNextStoryPoint="activate-next-story-point",a.ActivatePreviousStoryPoint="activate-previous-story-point",a.ActivateSheet="activateSheet",a.ActivateStoryPoint="activate-story-point",a.AppendExternalMenuItem="append-external-menu-item",a.ApplyCategoricalFilter="categorical-filter",a.ApplyRangeFilter="range-filter",a.ApplyRelativeDateFilter="apply-relative-date-Filter",a.BlockExtension="block-extension",a.ChangeParameterValue="change-parameter-value",a.ChangeSharedFilter="change-shared-filter",a.ClearFilter="clear-filter",a.ClearSelectedMarks="clear-selected-marks",a.CloseDialog="close-dialog",a.CreateAnnotation="create-annotation",a.DashboardCategoricalFilter="dashboard-categorical-filter",a.DisplayDialog="display-dialog",a.DownloadWorkbook="download-workbook",a.ExecuteExternalMenuItem="execute-external-menu-item",a.ExportCrosstab="export-crosstab",a.ExportData="export-data",a.ExportImage="export-image",a.ExportPdf="export-pdf",a.ExportPowerpoint="export-powerpoint",a.FindParameter="find-parameter",a.GetActiveTables="get-active-tables",a.GetAllDataSources="get-all-data-sources",a.GetAnnotations="get-annotations",a.GetCategoricalDomain="get-categorical-domain",a.GetConnectionDescriptionSummaries="get-connection-description-summaries",a.GetCurrentSrc="get-current-src",a.GetCustomViews="get-custom-views",a.GetDashboardFilters="get-dashboard-filters",a.GetDataSource="get-datasource",a.GetDataSourceData="get-datasource-data",a.GetDataSources="get-data-sources",a.GetDataSummaryData="get-summary-data",a.GetDataSummaryDataReader="get-summary-data-reader",a.GetDataTableReaderPage="get-data-table-reader-page",a.GetEmbeddingClientInfo="get-embedding-client-info",a.GetField="get-field",a.GetFieldAndDataSource="get-field-and-datasource",a.GetFilters="get-filters",a.GetFonts="get-fonts",a.GetHighlightedMarks="get-highlighted-marks",a.GetJoinDescription="get-join-description",a.GetLogicalTableData="get-logical-table-data",a.GetLogicalTableDataReader="get-logical-table-data-reader",a.GetLogicalTables="get-logical-tables",a.GetParametersForSheet="get-parameters-for-sheet",a.GetRangeDomain="get-range-domain",a.GetSelectedMarks="get-selected-marks",a.GetSharedFilter="get-shared-filter",a.GetUnderlyingData="get-underlying-data",a.GetUnderlyingTableData="get-underlying-table-data",a.GetUnderlyingTableDataReader="get-underlying-table-data-reader",a.GetUnderlyingTables="get-underlying-tables",a.HierarchicalFilter="hierachical-filter",a.InitializeExtension="initialize-extension",a.MoveAndResizeZones="move-and-resize-zones",a.Redo="redo",a.RefreshDataSource="refresh-data-source",a.ReleaseDataTableReader="release-data-table-reader",a.RemoveAnnotation="remove-annotation",a.RemoveCustomView="remove-custom-view",a.RemoveExternalMenuItem="remove-external-menu-item",a.RenameExternalMenu="rename-external-menu",a.ReplayAnimation="replay-animation",a.RevertStoryPoint="revert-story-point",a.RevertWorkbook="revert-workbook",a.SaveExtensionSettings="save-extension-settings",a.SaveWorkbookAsCustomView="save-workbook-as-custom-view",a.SelectByValue="select-by-value",a.SetActiveCustomViewAsDefault="set-active-custom-view-as-default",a.SetAutoUpdate="set-auto-update",a.SetClickThrough="set-click-through",a.SetSheetSize="set-sheet-size",a.SetZoneVisibility="set-zone-visibility",a.Share="share",a.ShowCustomView="show-custom-view",a.TestConversionVerb="test-conversion-verb",a.Undo="undo",a.UpdateCustomView="update-custom-view",a.VizAPI="viz-api"},967:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.AskDataOptionNames||(o.AskDataOptionNames={})).token="token",a.origin="origin",a.showEmbed="showEmbed",a.showPin="showPin",a.showSave="showSave",a.showShare="showShare",a.debug=":jsdebug",a.ApiID=":apiID",a.ApiExternalVersion=":apiExternalVersion",a.ApiInternalVersion=":apiInternalVersion",a.AskDataWebComponent=":askDataWebComponent"},8075:(i,o)=>{var a,s,l;Object.defineProperty(o,"__esModule",{value:!0}),(function(u){u.ONE="1",u.ALERTS=":alerts",u.ALIAS="alias",u.ALLOW_DEFERRED_BOOTSTRAP=":allowDeferredBootstrap",u.ALLOW_AUTOGEN_WORKSHEET_PHONE_LAYOUTS="allowAutogenWorksheetPhoneLayouts",u.API_ID=":apiID",u.APP=":app",u.ATTACHMENT="attachment",u.IS_IPAD_APP="app",u.ANIMATE_TRANSITION=":animate_transition",u.ASCENDING="ascending",u.AUTHENTICATION="authentication",u.ATTRIBUTES="attributes",u.AUTHORING_SHEET=":authSheet",u.AXIS="axis",u.BOOTSTRAP_WHEN_NOTIFIED=":bootstrapWhenNotified",u.BROWSER_BACK_BUTTON_UNDO=":browserBackButtonUndo",u.BROWSER_RENDERING_ON="isBrowserRendering",u.BROWSER_RENDERING_THRESHOLD="browserRenderingThreshold",u.CHARSET="charset",u.CLIENT_DIMENSION="clientDimension",u.CLIENT_IP="client_ip",u.CLIENT_NUM="clientNum",u.COLON_EMBEDDED=":embedded",u.COLON_MOBILE=":mobile",u.COLON_DEEP_LINKING_DISABLED=":deepLinkingDisabled",u.COLON_WATERMARK=":watermark",u.COMMENTS=":comments",u.COMMENTING_ENABLED=":commentingEnabled",u.COMMENTING_MENTIONS_ENABLED=":commentingMentions",u.CONNECTION="connection",u.CREATED_BY_FEATURE="createdByFeature",u.CRYPTED_PASSWORD="crypted",u.CSSDEBUG=":cssdebug",u.CSV="csv",u.CUSTOM_VIEWS=":customViews",u.CV=":cv",u.CV_ID="cvId",u.DASHBOARD_PORT_SIZE="dashboardPortSize",u.DATA_DETAILS=":dataDetails",u.DATASOURCE="datasource",u.DEBUG=":debug",u.DELAY=":delay",u.DEPTH="depth",u.DEVICE_TYPE=":device",u.DEVICE_PIXEL_RATIO="devicePixelRatio",u.DEVICE_PREVIEW_MODE=":devicepreviewmode",u.DIMENSIONS=":dimensions",u.DISABLE_SHARED_SESSIONS=":disable_shared_sessions",u.DISABLE_URL_ACTIONS_POPUPS=":disableUrlActionsPopups",u.DIRECTION="direction",u.DISPLAY_OVERLAY=":display_overlay",u.DISPLAY_SHARE=":display_share",u.DISPLAY_SPINNER=":display_spinner",u.DISPLAY_STATIC_IMAGE=":display_static_image",u.DISPLAY_TABS="display_tabs",u.DISPLAY_VIEW_COUNT=":display_count",u.IGNORE_STICKY_SESSION=":ignore_sticky_session",u.INCREMENT_VIEW_COUNT=":increment_view_count",u.DOCMODE="docmode",u.DOMAIN="domain",u.DO_WORK="do_work",u.DX="dx",u.DY="dy",u.EDIT_DATA_ALERT=":editDataAlert",u.EMBED=":embed",u.EMBEDDED="embedded",u.ENCRYPTED="encrypted",u.API_EXTERNAL_VERSION=":apiExternalVersion",u.API_INTERNAL_VERSION=":apiInternalVersion",u.EXCLUDE="exclude",u.EXPORT_FORMAT=":export_format",u.FIELDNAME="fieldname",u.FIELD_NAME="field_name",u.FIELD_SEP="field_sep",u.FILE="file",u.FILTER_TILE_SIZE="filterTileSize",u.FN="fn",u.FOCUS="focus",u.FORCE_CACHE="force_cache",u.FORMAT="format",u.FORMAT_DATA_VALUE_LOCALLY="formatDataValueLocally",u.FROM_WG=":from_wg",u.GRAPHQL_DATABASE_ID=":graphQLDatabaseId",u.GRAPHQL_TABLE_ID=":graphQLTableId",u.GUID=":guid",u.H="h",u.HIDDEN="hidden",u.HIDE_CLOSE_BUTTON=":hideCloseButton",u.HIDE_EDIT_BUTTON=":hideEditButton",u.HIDE_EDIT_IN_DESKTOP_BUTTON=":hideEditInDesktopButton",u.HIGH_DPI=":highdpi",u.IMAGE_SIZE_LIMIT="imageSizeLimit",u.TRANSPARENT_LINE_MARKS_LIMIT="transparentLineMarkLimit",u.CLIENT_RENDER_PIXEL_LIMIT="clientRenderPixelLimit",u.IN="in",u.INSTANCE_ID=":iid",u.IS_GUEST_REDIRECT_FROM_VIZPORTAL=":isGuestRedirectFromVizportal",u.IS_MARK_ANIMATION_ENABLED="isMarkAnimationEnabled",u.IS_VIZPORTAL=":isVizPortal",u.INPUT_="input_string",u.JSDEBUG=":jsdebug",u.JSON="json",u.JSON_ONLY=":jsonOnly",u.KEEPFILE="keepfile",u.KEY="key",u.LANGUAGE="language",u.LANGUAGE_REQUESTED=":language",u.LINKTARGET=":linktarget",u.LOAD_ORDER_ID=":loadOrderID",u.LOAD_NEWEST_REVISION=":loadNewestRevision",u.LOCAL_PATHS=":localPaths",u.LOCALE="locale",u.LOCATION_ID="locationid",u.LOCATION_TYPE="locationtype",u.WORKBOOK_LOCALE="workbookLocale",u.MAXROWS="maxrows",u.MAX_AGE="maxAge",u.MAX_ROWS="maxRows",u.METHOD="method",u.MOBILE="mobile",u.MODIFIER="modifier",u.NAME="name",u.NAV_TYPE="navType",u.NAV_SRC="navSrc",u.NOATTACHMENT="no-attachment",u.NO_OVERWRITE="no_overwrite",u.OPEN_AUTHORING_IN_TOP_WINDOW=":openAuthoringInTopWindow",u.OPENID_HD=":openid_hd",u.OPENID_LOGIN_HINT=":openid_login_hint",u.OAUTHREQUEST="oauthrequest",u.OAUTH_CREDENTIAL_IDS="oauth_credential_ids",u.OFFLINE_MODE=":offlinemode",u.ORIGIN=":origin",u.OVERLAY=":overlay",u.P="p",u.PATH="path",u.PANE_RESOLVER_X="paneResolverX",u.PANE_RESOLVER_Y="paneResolverY",u.PARAM="param",u.PARENT_ID="parent_id",u.PASSWORD="password",u.PATTERN="pattern",u.PIXEL_RATIO=":pixelratio",u.PREFIX=":prefix",u.PREVIEW=":preview",u.PRIMARY_CONTENT_URL="primary_content_url",u.PROJECT="project",u.PROTOCOL="protocol",u.PSEUDO=":pseudo",u.QUERY="query",u.R="r",u.RANGE_TYPE="range_type",u.RECORD_SEP="record_sep",u.RECORD_CLIENT_PERFORMANCE=":record_client_performance",u.RECORD_PERFORMANCE=":record_performance",u.RECOVER_OLD_SESSION_ID=":recover_old_session_id",u.RECOVER_SESSION_STATE_TICKETS=":recover_session_state_tickets",u.REFRESH=":refresh",u.REFRESHUNMODIFIED=":refreshunmodified",u.REGION="region",u.RELOAD_ON_CUSTOM_VIEW_SAVE=":reloadOnCustomViewSave",u.RENDER=":render",u.RENDER_MAPS_CLIENT_SIDE="renderMapsClientSide",u.RETRY=":retry",u.REUSE="reuse",u.REUSE_FOREVER="reuse_forever",u.REVERT=":revert",u.SAVE_DB_PASSWORDS="save_db_passwords",u.SELECT_X="select_x",u.SELECT_Y="select_y",u.SESSION_FEATURE_PREFIX=":ff_",u.SESSION_FLAGS=":session_feature_flags",u.SHARE_BUTTON="share_button",u.SHEET_ID="sheet_id",u.SHARED="shared",u.SHOWALL="showall",u.SHOW_APP_BANNER=":showAppBanner",u.SHOW_ASK_DATA=":showAskData",u.SHOW_PARAMS="showParams",u.SHOW_SHARE_OPTIONS=":showShareOptions",u.SIZE=":size",u.SOURCE="source",u.STATE="state",u.STICKY_SESSION_KEY="stickySessionKey",u.SUBSCRIPTIONS=":subscriptions",u.SUMMARY="summary",u.SUPPRESS_DEFAULT_EDIT_BEHAVIOR=":suppressDefaultEditBehavior",u.SYNC_SESSION=":sync_session",u.SYNC_SESSION_STATE="sync_session_state",u.TABS=":tabs",u.TARGET="target",u.TARGET_SITE="target_site",u.TOOLBAR=":toolbar",u.TOOLTIP=":tooltip",u.TS="ts",u.UNDERLYING_TABLE_ID="underlying_table_id",u.UNDERLYING_TABLE_CAPTION="underlying_table_caption",u.UPDATE_TYPE="update_type",u.USE_GUEST=":useGuest",u.USE_INLINE_IMAGES="use_inline_images",u.USERAGENT="useragent",u.USERNAME="username",u.VALUE="value",u.VERBOSE_MODE="verboseMode",u.VIEW_ID="views_id",u.VIZ_SNAPSHOT_ID="viz_snapshot_id",u.VW=":vw",u.W="w",u.WORKSHEET_PORT_SIZE="worksheetPortSize",u.WATERMARK="watermark",u.WATERMARK_MARGIN=":watermark_margin",u.WB=":wb",u.WHICH="which",u.X="x",u.Y="y",u.ZID="zid",u.ZONE_ID="zone_id",u.KEYCHAIN_VERSION="keychain_version",u.DATASOURCE_ID="datasource_id",u.DATASOURCE_NAME="datasource_name",u.LENS_ID="lens_id",u.WIDTH="width",u.HEIGHT="height",u.LAYOUT_VIEWS="views",u.LAYOUT_MENUS="menus",u.LAYOUT_GEOMETRY="geometry",u.LAYOUT_PAGES="pages",u.LAYOUT_CACHEURL="cacheurl",u.LAYOUT_SHEET="sheet",u.LAYOUT_DEPTH="depth"})(a||(a={})),(function(u){u.SHOW_VIZ_HOME=":showVizHome"})(s||(s={})),(l=o.VizOptionNames||(o.VizOptionNames={})).Size=":size",l.Embed=":embed",l.ApiInternalVersion=":apiInternalVersion",l.ApiExternalVersion=":apiExternalVersion",l.ShowVizHome=":showVizHome",l.Jsdebug=":jsdebug",l.BootstrapWhenNotified=":bootstrapWhenNotified",l.NavType="navType",l.NavSrc="navSrc",l.debug=":jsdebug",l.ApiID=":apiID",l.disableUrlActionsPopups=":disableUrlActionsPopups",l.hideTabs=":tabs",l.toolbar=":toolbar",l.device=":device",l.instanceIdToClone=":iid",l.touchOptimize="mobile",l.hideEditButton=":hideEditButton",l.hideEditInDesktopButton=":hideEditInDesktopButton",l.suppressDefaultEditBehavior=":suppressDefaultEditBehavior",l.hideCloseButton=":hideCloseButton"},550:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(2541),l=a(4695),u=a(3475),f=a(7443),d=a(3590),p=(function(){function g(y,v,b){this.thisWindow=y,this.otherWindow=v,this.otherWindowOrigin=b}return g.prototype.startListening=function(){var y=this;if(!this.unregisterFunction){var v=this.onMessageReceived.bind(this);this.thisWindow.addEventListener("message",v,!0),this.unregisterFunction=function(){return y.thisWindow.removeEventListener("message",v,!0)}}},g.prototype.stopListening=function(){this.unregisterFunction&&(this.unregisterFunction(),this.unregisterFunction=void 0)},g.prototype.setInitializeMessageHandler=function(y){this.initializeMessageHandler=y},g.prototype.setCommandResponseMessageHandler=function(y){this.commandResponseMessageHandler=y},g.prototype.setCommandMessageHandler=function(y){this.commandMessageHandler=y},g.prototype.setNotificationMessageHandler=function(y){this.notificationMessageHandler=y},g.prototype.setHandshakeMessageHandler=function(y){this.handshakeMessageHandler=y},g.prototype.prepareInitializationMessage=function(y,v,b){var x={msgGuid:s.raw(),msgType:d.MessageType.Initialize,crossFrameVersion:v,apiVersion:y,options:b};return this.prepareMessage(x)},g.prototype.prepareCommandMessage=function(y,v){var b={msgGuid:s.raw(),msgType:d.MessageType.Command,verbId:y,parameters:v};return this.prepareMessage(b)},g.prototype.prepareCommandResponseMessage=function(y,v,b){var x={msgGuid:s.raw(),msgType:d.MessageType.CommandResponse,commandGuid:y,data:v,error:b};return b&&(x.error=JSON.parse(JSON.stringify(b))),this.prepareMessage(x)},g.prototype.prepareNotificationMessage=function(y,v){var b={msgGuid:s.raw(),msgType:d.MessageType.Notification,notificationId:y,data:v};return this.prepareMessage(b)},g.prototype.prepareAckMessage=function(){var y={msgGuid:s.raw(),msgType:d.MessageType.Ack,platformVersion:l.INTERNAL_CONTRACT_VERSION};return this.prepareMessage(y)},g.prototype.prepareMessage=function(y){if(!this.otherWindow||!this.otherWindowOrigin)throw"Other window not initialized, cannot dispatch messages";return new u.CrossFramePreparedMessage(y,this.otherWindow,this.otherWindowOrigin)},g.prototype.onMessageReceived=function(y){if((!this.otherWindow||y.source===this.otherWindow)&&y.data){var v=y.data;if(f.isMessage(v))switch(v.msgType){case d.MessageType.Initialize:if(!f.isInitMessage(v)||!this.initializeMessageHandler)return;this.initializeMessageHandler(v,y.source);break;case d.MessageType.CommandResponse:if(!f.isCommandResponseMessage(v)||!this.commandResponseMessageHandler)return;this.commandResponseMessageHandler(v,y.source);break;case d.MessageType.Command:if(!f.isCommandMessage(v)||!this.commandMessageHandler)return;this.commandMessageHandler(v,y.source);break;case d.MessageType.Notification:if(!f.isNotificationMessage(v)||!this.notificationMessageHandler)return;this.notificationMessageHandler(v,y.source);break;case d.MessageType.Handshake:if(!f.isHandshakeMessage(v)||!this.handshakeMessageHandler)return;this.handshakeMessageHandler(v,y.source)}}},g.prototype.setOtherWindow=function(y){this.otherWindow=y},g.prototype.setOtherWindowOrigin=function(y){this.otherWindowOrigin=y},g})();o.CrossFrameMessenger=p},3475:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f){this._message=l,this._target=u,this._origin=f}return Object.defineProperty(s.prototype,"messageGuid",{get:function(){return this._message.msgGuid},enumerable:!0,configurable:!0}),s.prototype.send=function(){return this._target.postMessage(this._message,this._origin),this},s})();o.CrossFramePreparedMessage=a},7443:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(2541),l=a(5879),u=a(3590),f=new Set([l.NotificationId.EditButtonClicked,l.NotificationId.EditInDesktopButtonClicked,l.NotificationId.WorkbookPublished,l.NotificationId.WorkbookReadyToClose]);function d(g){if(!g)return!1;var y=g;return!(!(y&&y.msgGuid&&y.msgType)||!s.isGuid(y.msgGuid)||typeof y.msgType!="string"||[u.MessageType.Command,u.MessageType.CommandResponse,u.MessageType.Initialize,u.MessageType.Notification,u.MessageType.Handshake].indexOf(y.msgType)<0)}function p(g){if(!g)return!1;var y=g;return typeof y=="object"&&typeof y.fix=="number"&&typeof y.minor=="number"&&typeof y.major=="number"}o.isMessage=d,o.isVersion=p,o.isInitMessage=function(g){if(!d(g))return!1;var y=g;return!!(y.msgType===u.MessageType.Initialize&&y.apiVersion&&p(y.apiVersion)&&y.crossFrameVersion&&p(y.crossFrameVersion))},o.isCommandResponseMessage=function(g){if(!d(g))return!1;var y=g;return!(y.msgType!==u.MessageType.CommandResponse||!s.isGuid(y.commandGuid)||!y.data&&!y.error)},o.isCommandMessage=function(g){if(!d(g))return!1;var y=g;return!(y.msgType!==u.MessageType.Command||!y.parameters||typeof y.parameters!="object"||!y.verbId||typeof y.verbId!="string")},o.isNotificationMessage=function(g){if(!d(g))return!1;var y=g;return!(y.msgType!==u.MessageType.Notification||!y.data&&!f.has(y.notificationId)||!y.notificationId||typeof y.notificationId!="string")},o.isHandshakeMessage=function(g){return!!d(g)&&g.msgType===u.MessageType.Handshake}},3590:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.MessageType||(o.MessageType={})).Initialize="initialize",a.Notification="notification",a.Command="command",a.CommandResponse="command-response",a.Handshake="v-handshake",a.Ack="v-ack"},7104:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(){}return s.prototype.upgradeExecuteCall=function(l,u){return{verb:l,parameters:u}},s.prototype.downgradeExecuteReturn=function(l){return l},s.prototype.downgradeNotification=function(l){return l},s})();o.IdentityVersionConverter=a},9415:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f,d,p){if(this._externalMajorVersion=l,this._platformMajorVersion=u,this._upgradeExecuteTranslations=f,this._downgradeExecuteTranslations=d,this._downgradeNotificationTranslations=p,this._externalMajorVersion>this._platformMajorVersion)throw new Error("Cannot convert between external version "+this._externalMajorVersion+" and "+this._platformMajorVersion)}return s.fromData=function(l,u,f,d,p){return new this(l.major,u.major,f,d,p)},s.prototype.upgradeExecuteCall=function(l,u){for(var f={verb:l,parameters:u},d=0,p=this._upgradeExecuteTranslations;d<p.length;d++)f=(0,p[d])(f.verb,f.parameters);return f},s.prototype.downgradeExecuteReturn=function(l){for(var u=l,f=0,d=this._downgradeExecuteTranslations;f<d.length;f++)u=(0,d[f])(u);return u},s.prototype.downgradeNotification=function(l){for(var u=l,f=0,d=this._downgradeNotificationTranslations;f<d.length;f++)u=(0,d[f])(u);return u},s})();o.StackingVersionConverter=a},9394:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(7104),l=a(9415),u=a(5039);function f(y,v){return y.major===v.major&&y.minor===v.minor}function d(y,v,b,x,_){var T=y.major,A=y.minor,w=v.major;if(T>w)throw new Error(`External version must be less than or equal to platform version.
    externalMajorVersion=`+T+" platformMajorVersion="+w);if(f(y,v))return new s.IdentityVersionConverter;var C=p(T,w,A,b),D=p(T,w,A,x),I=p(T,w,A,_);return D.reverse(),I.reverse(),l.StackingVersionConverter.fromData(y,v,C,D,I)}function p(y,v,b,x){for(var _=[],T=y;T<=v;T++)if(T in x)for(var A=T===y?b:0,w=g(Object.keys(x[T])),C=A;C<=w;C++)C in x[T]&&_.push.apply(_,x[T][C]);return _}function g(y){return y.map((function(v){return Number(v)})).reduce((function(v,b){return v>b?v:b}))}o.VersionLessThan=function(y,v){return!(y.major>v.major)&&(y.major<v.major||y.minor<v.minor)},o.VersionEqualTo=f,o.ExecuteMinorUpgrades={1:{9:[]}},o.ExecuteMinorDowngrades={1:{5:[u.DowngradeWorksheetNames],9:[]}},o.NotificationMinorDowngrades={1:{9:[],10:[u.DowngradeFlipboardZoneID]}},o.CreateVersionConverter=function(y,v){return d(y,v,o.ExecuteMinorUpgrades,o.ExecuteMinorDowngrades,o.NotificationMinorDowngrades)},o.CreateVersionConverterWithTranslators=d,o.GetMaximumMinorIndex=g},5039:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(5879);o.DowngradeWorksheetNames=function(l){var u=l.result;return u.extensionDashboardInfo!==void 0&&u.extensionDashboardInfo.zones.forEach((function(f){f.sheetInfo&&(f.name=f.sheetInfo.name)})),l},o.DowngradeFlipboardZoneID=function(l){if(l.notificationId===s.NotificationId.SelectedMarksChanged){var u=l.data;u.flipboardZoneID===void 0&&(u.flipboardZoneID=0)}return l}},408:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(){}return s.prototype.downgradeExecuteCall=function(l,u){return{verb:l,parameters:u}},s.prototype.upgradeExecuteReturn=function(l,u,f){return l},s.prototype.upgradeNotification=function(l){return l},s})();o.ExternalIdentityVersionConverter=a},8241:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f,d,p){if(this._externalVersion=l,this._platformVersion=u,this._downgradeExecuteCallTranslations=f,this._upgradeExecuteReturnTranslations=d,this._upgradeNotificationTranslations=p,this._externalVersion.major>this._platformVersion.major)throw new Error("Cannot convert between external version "+this._externalVersion.major+`
      and `+this._platformVersion.major)}return s.prototype.downgradeExecuteCall=function(l,u){for(var f={verb:l,parameters:u},d=0,p=this._downgradeExecuteCallTranslations;d<p.length;d++)f=(0,p[d])(f.verb,f.parameters);return f},s.prototype.upgradeExecuteReturn=function(l,u,f){for(var d=l,p=0,g=this._upgradeExecuteReturnTranslations;p<g.length;p++)d=(0,g[p])(d,u,f);return d},s.prototype.upgradeNotification=function(l){for(var u=l,f=0,d=this._upgradeNotificationTranslations;f<d.length;f++)u=(0,d[f])(u);return u},s})();o.ExternalStackingVersionConverter=a},3526:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(9394),l=a(408),u=a(8241),f=a(7354);function d(g,y,v,b,x){var _=g.major,T=y.major,A=y.minor;if(_>T)throw new Error(`External version must be less than or equal to platform version.
    externalMajorVersion=`+_+" platformMajorVersion="+T);if(_<T||s.VersionEqualTo(g,y))return new l.ExternalIdentityVersionConverter;var w=p(T,A,v),C=p(T,A,b),D=p(T,A,x);return w.reverse(),new u.ExternalStackingVersionConverter(g,y,w,C,D)}function p(g,y,v){var b=[];if(g in v)for(var x=y,_=s.GetMaximumMinorIndex(Object.keys(v[g])),T=x;T<=_;T++)T in v[g]&&b.push.apply(b,v[g][T]);return b}o.ExecuteMinorDowngradeCallExternal={1:{9:[],13:[f.DowngradeUnderlyingTableDataAsync,f.DowngradeLogicalTableDataAsync]}},o.ExecuteMinorUpgradeReturnExternal={1:{9:[f.UpgradeDataTableTypes],29:[f.UpgradeDataTableRowsAndColumns]}},o.ExecuteMinorUpgradeNotification={1:{9:[]}},o.CreateExternalCompatibleVersionConverter=function(g,y){return d(g,y,o.ExecuteMinorDowngradeCallExternal,o.ExecuteMinorUpgradeReturnExternal,o.ExecuteMinorUpgradeNotification)},o.CreateExternalCompatibleVersionConverterWithTranslators=d},7354:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4695);function l(f){f!==void 0&&f.dataTable!==void 0&&Array.isArray(f.dataTable)&&f.dataTable.forEach((function(d){d.forEach((function(p,g){var y=p.value;y!==null&&(p.value=s.DataTypeConverter.convertValueAsStringToValue(y,f.headers[g].dataType))}))}))}function u(f,d){if(d[s.ParameterId.LogicalTableId]!==s.ApiShowDataTableSentinel.SingleTableId)throw new Error("Invalid logical table id passed to "+f+".")}o.UpgradeDataTableTypes=function(f,d,p){if(!f)return f;var g=f.result;if(g.data!==void 0&&g.isSummary!==void 0)return l(g.data),f;var y=f.result;return y.data!==void 0&&Array.isArray(y.data)&&y.data.forEach((function(v){l(v)})),f},o.DowngradeUnderlyingTableDataAsync=function(f,d){return f===s.VerbId.GetUnderlyingTableData&&(u(f,d),f=s.VerbId.GetUnderlyingData),{verb:f,parameters:d}},o.DowngradeLogicalTableDataAsync=function(f,d){return f===s.VerbId.GetLogicalTableData&&(u(f,d),f=s.VerbId.GetDataSourceData),{verb:f,parameters:d}},o.UpgradeDataTableRowsAndColumns=function(f,d,p){return(function(g){return g===s.VerbId.GetDataSummaryData})(d)&&p[s.ParameterId.MaxRows]&&(f=(function(g,y){var v=g.result;return v.data&&Array.isArray(v.data.dataTable)&&y>0&&y<v.data.dataTable.length&&(v.data.dataTable.length=y),g})(f,p[s.ParameterId.MaxRows])),(function(g){return g===s.VerbId.GetDataSummaryData||g===s.VerbId.GetUnderlyingTableData||g===s.VerbId.GetLogicalTableData||g===s.VerbId.GetDataSourceData||g===s.VerbId.GetUnderlyingData})(d)&&p[s.ParameterId.ColumnsToIncludeById]&&(f=(function(g,y){if(y.length===0)return g;var v=g.result;if(!v.data||!Array.isArray(v.data.dataTable)||!Array.isArray(v.data.headers))return g;var b=v.data.headers.filter((function(_,T){return y.find((function(A){return A===_.fieldName}))}));v.data.dataTable.forEach((function(_,T){v.data.dataTable[T]=_.filter((function(A,w){return b.findIndex((function(C){return C.index===w}))!==-1}))}));var x=0;return v.data.headers=b.map((function(_){return _.index=x++,_})),g})(f,p[s.ParameterId.ColumnsToIncludeById])),f}},4007:(i,o,a)=>{function s(ve){for(var we in ve)o.hasOwnProperty(we)||(o[we]=ve[we])}Object.defineProperty(o,"__esModule",{value:!0});var l=a(8395);o.ApiVersion=l.ApiVersion;var u=a(2336);o.ExternalToInternalEnumMappings=u.ExternalToInternalEnumMappings,s(a(241));var f=a(8024);o.CrossFrameDispatcher=f.CrossFrameDispatcher;var d=a(6411);o.DataSource=d.DataSource;var p=a(5126);o.InternalToExternalEnumMappings=p.InternalToExternalEnumMappings;var g=a(3682);o.EventListenerManager=g.EventListenerManager;var y=a(2131);o.Field=y.Field;var v=a(2913);o.CustomViewImpl=v.CustomViewImpl;var b=a(4657);o.DashboardImpl=b.DashboardImpl;var x=a(3333);o.DashboardObjectImpl=x.DashboardObjectImpl;var _=a(1234);o.DataSourceImpl=_.DataSourceImpl;var T=a(6560);o.ParameterImpl=T.ParameterImpl;var A=a(1878);o.SheetImpl=A.SheetImpl;var w=a(6749);o.SheetInfoImpl=w.SheetInfoImpl;var C=a(4217);o.SingleEventManagerImpl=C.SingleEventManagerImpl;var D=a(8194);o.StoryImpl=D.StoryImpl;var I=a(757);o.StoryPointImpl=I.StoryPointImpl;var M=a(8519);o.StoryPointInfoImpl=M.StoryPointInfoImpl;var k=a(3826);o.WorkbookImpl=k.WorkbookImpl;var R=a(928);o.WorksheetImpl=R.WorksheetImpl;var z=a(2391);o.Point=z.Point;var P=a(6292);o.ClientInfoServiceImpl=P.ClientInfoServiceImpl;var $=a(2294);o.NotificationServiceImpl=$.NotificationServiceImpl;var N=a(333);o.NotificationServiceImplBase=N.NotificationServiceImplBase,o.Registration=N.Registration;var L=a(1167);o.ServiceImplBase=L.ServiceImplBase;var B=a(8226);o.SizeServiceImpl=B.SizeServiceImpl;var q=a(2812);o.StoryActivationServiceImpl=q.StoryActivationServiceImpl,s(a(7458)),s(a(9887));var H=a(1554);o.TableauError=H.TableauError;var U=a(9685);o.Deferred=U.Deferred;var Y=a(316);o.ErrorHelpers=Y.ErrorHelpers;var Q=a(489);o.SheetUtils=Q.SheetUtils;var J=a(6081);o.VersionNumber=J.VersionNumber;var de=a(107);o.VersionedExternalApiDispatcher=de.VersionedExternalApiDispatcher},8395:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(6081),l=(function(){function u(){}return Object.defineProperty(u,"Instance",{get:function(){return u._instance},enumerable:!0,configurable:!0}),u.SetVersionNumber=function(f,d){u._instance=new s.VersionNumber(f,d)},u})();o.ApiVersion=l},5458:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._connectionInfo=l}return Object.defineProperty(s.prototype,"name",{get:function(){return this._connectionInfo.name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._connectionInfo.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"serverURI",{get:function(){return this._connectionInfo.serverURI},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return this._connectionInfo.type},enumerable:!0,configurable:!0}),s})();o.ConnectionSummary=a},241:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4695),l=a(8024);o.doCrossFrameBootstrap=function(u,f,d){return new Promise((function(p,g){var y;(y=(function(x){try{return x.self!==x.parent}catch{return!0}})(u)?u.parent:u.opener)||g("This extension is not running inside an iframe, desktop, or popup window. Initialization failed.");var v=new s.CrossFrameMessenger(u,y,"*"),b=v.prepareInitializationMessage(f,s.MESSAGING_VERSION,d);v.setCommandResponseMessageHandler((function(x){x.commandGuid===b.messageGuid&&p((function(){return new l.CrossFrameDispatcher(v)}))})),v.startListening(),b.send()}))}},8024:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=(function(){function u(f){if(this._messenger=f,this._pendingPromises={},this._notificationHandlers=[],!this._messenger)throw"Missing messenger object";this._messenger.setCommandResponseMessageHandler(this.onCommandResponse.bind(this)),this._messenger.setNotificationMessageHandler(this.onNotification.bind(this))}return u.prototype.execute=function(f,d){var p=this,g=this._messenger.prepareCommandMessage(f,d),y=new Promise((function(v,b){p._pendingPromises[g.messageGuid]={resolve:v,reject:b}}));return g.send(),y},u.prototype.registerNotificationHandler=function(f){this._notificationHandlers.push(f)},u.prototype.unregisterNotificationHandler=function(f){this._notificationHandlers=this._notificationHandlers.filter((function(d){return d!==f}))},u.prototype.onCommandResponse=function(f){if(!(Object.keys(this._pendingPromises).indexOf(f.commandGuid)<0)){var d=this._pendingPromises[f.commandGuid];f.error&&d.reject(f.error),f.data&&d.resolve({result:f.data}),delete this._pendingPromises[f.commandGuid]}},u.prototype.onNotification=function(f){for(var d=0,p=this._notificationHandlers;d<p.length;d++){var g=p[d];try{g({notificationId:f.notificationId,data:f.data})}catch(y){if(y.errorCode===s.EmbeddingErrorCodes.IncompatibleVersionError)throw y}}},u})();o.CrossFrameDispatcher=l},6411:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._dataSourceImpl=l}return Object.defineProperty(s.prototype,"name",{get:function(){return this._dataSourceImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._dataSourceImpl.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fields",{get:function(){return this._dataSourceImpl.fields},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"extractUpdateTime",{get:function(){return this._dataSourceImpl.extractUpdateTime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isExtract",{get:function(){return this._dataSourceImpl.isExtract},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isPublished",{get:function(){return this._dataSourceImpl.isPublished},enumerable:!0,configurable:!0}),s.prototype.publishedUrl=function(){return this._dataSourceImpl.publishedUrl()},s.prototype.refreshAsync=function(){return this._dataSourceImpl.refreshAsync()},s.prototype.getActiveTablesAsync=function(){return console.warn("DataSource.getActiveTablesAsync is deprecated. Please use DataSource.getLogicalTablesAsync."),this._dataSourceImpl.getActiveTablesAsync()},s.prototype.getConnectionSummariesAsync=function(){return this._dataSourceImpl.getConnectionSummariesAsync()},s.prototype.getUnderlyingDataAsync=function(l){return console.warn("DataSource.getUnderlyingDataAsync is deprecated. Please use DataSource.getLogicalTablesAsync and DataSource.getLogicalTableDataAsync."),this._dataSourceImpl.getUnderlyingDataAsync(l)},s.prototype.getLogicalTablesAsync=function(){return this._dataSourceImpl.getLogicalTablesAsync()},s.prototype.getLogicalTableDataAsync=function(l,u){return this._dataSourceImpl.getLogicalTableDataAsync(l,u)},s.prototype.getLogicalTableDataReaderAsync=function(l,u,f){return this._dataSourceImpl.getLogicalTableDataReaderAsync(l,u,f)},s})();o.DataSource=a},2336:(i,o,a)=>{var s,l,u,f,d,p,g,y,v;Object.defineProperty(o,"__esModule",{value:!0});var b=a(1750),x=a(4695),_=a(4406),T=(function(){function A(){}return A.filterDomainType=new _.EnumConverter(((s={})[b.FilterDomainType.Relevant]=x.FilterDomainType.Relevant,s[b.FilterDomainType.Database]=x.FilterDomainType.Database,s)),A.nullOptions=new _.EnumConverter(((l={})[b.FilterNullOption.AllValues]=x.FilterNullOption.AllValues,l[b.FilterNullOption.NonNullValues]=x.FilterNullOption.NonNullValues,l[b.FilterNullOption.NullValues]=x.FilterNullOption.NullValues,l)),A.filterUpdateType=new _.EnumConverter(((u={})[b.FilterUpdateType.Add]=x.FilterUpdateType.Add,u[b.FilterUpdateType.All]=x.FilterUpdateType.All,u[b.FilterUpdateType.Remove]=x.FilterUpdateType.Remove,u[b.FilterUpdateType.Replace]=x.FilterUpdateType.Replace,u)),A.setVisibilityType=new _.EnumConverter(((f={})[b.ZoneVisibilityType.Show]=!0,f[b.ZoneVisibilityType.Hide]=!1,f)),A.setReplaySpeedType=new _.EnumConverter(((d={})[b.ReplaySpeedType.Slow]=2,d[b.ReplaySpeedType.Normal]=1,d[b.ReplaySpeedType.Fast]=.5,d)),A.showDataTableFormatType=new _.EnumConverter(((p={})[b.IncludeDataValuesOption.AllValues]=x.ApiShowDataTableFormat.NativeAndFormattedValues,p[b.IncludeDataValuesOption.OnlyNativeValues]=x.ApiShowDataTableFormat.NativeValuesOnly,p[b.IncludeDataValuesOption.OnlyFormattedValues]=x.ApiShowDataTableFormat.FormattedValuesOnly,p)),A.periodType=new _.EnumConverter(((g={})[b.PeriodType.Years]=x.DateStepPeriod.Years,g[b.PeriodType.Quarters]=x.DateStepPeriod.Quarters,g[b.PeriodType.Months]=x.DateStepPeriod.Months,g[b.PeriodType.Weeks]=x.DateStepPeriod.Weeks,g[b.PeriodType.Days]=x.DateStepPeriod.Days,g[b.PeriodType.Hours]=x.DateStepPeriod.Hours,g[b.PeriodType.Minutes]=x.DateStepPeriod.Minutes,g[b.PeriodType.Seconds]=x.DateStepPeriod.Seconds,g)),A.dateRangeType=new _.EnumConverter(((y={})[b.DateRangeType.Last]=x.DateRangeType.Last,y[b.DateRangeType.LastN]=x.DateRangeType.LastN,y[b.DateRangeType.Next]=x.DateRangeType.Next,y[b.DateRangeType.NextN]=x.DateRangeType.NextN,y[b.DateRangeType.Current]=x.DateRangeType.Current,y[b.DateRangeType.ToDate]=x.DateRangeType.ToDate,y)),A.dialogStyles=new _.EnumConverter(((v={})[b.DialogStyle.Window]=x.DialogStyle.Window,v[b.DialogStyle.Modal]=x.DialogStyle.Modal,v[b.DialogStyle.Modeless]=x.DialogStyle.Modeless,v)),A})();o.ExternalToInternalEnumMappings=T},5126:(i,o,a)=>{var s,l,u,f,d,p,g,y,v,b,x,_,T,A,w,C,D;Object.defineProperty(o,"__esModule",{value:!0});var I=a(1750),M=a(4695),k=a(4406),R=(function(){function z(){}return z.extensionContext=new k.EnumConverter(((s={})[M.ExtensionContext.Desktop]=I.ExtensionContext.Desktop,s[M.ExtensionContext.Server]=I.ExtensionContext.Server,s)),z.extensionMode=new k.EnumConverter(((l={})[M.ExtensionMode.Authoring]=I.ExtensionMode.Authoring,l[M.ExtensionMode.Viewing]=I.ExtensionMode.Viewing,l)),z.columnType=new k.EnumConverter(((u={})[M.ColumnType.Continuous]=I.ColumnType.Continuous,u[M.ColumnType.Discrete]=I.ColumnType.Discrete,u)),z.fieldAggregationType=new k.EnumConverter(((f={})[M.FieldAggregationType.Attr]=I.FieldAggregationType.Attr,f[M.FieldAggregationType.Avg]=I.FieldAggregationType.Avg,f[M.FieldAggregationType.Count]=I.FieldAggregationType.Count,f[M.FieldAggregationType.Countd]=I.FieldAggregationType.Countd,f[M.FieldAggregationType.Day]=I.FieldAggregationType.Day,f[M.FieldAggregationType.End]=I.FieldAggregationType.End,f[M.FieldAggregationType.Hour]=I.FieldAggregationType.Hour,f[M.FieldAggregationType.InOut]=I.FieldAggregationType.InOut,f[M.FieldAggregationType.Kurtosis]=I.FieldAggregationType.Kurtosis,f[M.FieldAggregationType.Max]=I.FieldAggregationType.Max,f[M.FieldAggregationType.Mdy]=I.FieldAggregationType.Mdy,f[M.FieldAggregationType.Median]=I.FieldAggregationType.Median,f[M.FieldAggregationType.Min]=I.FieldAggregationType.Min,f[M.FieldAggregationType.Minute]=I.FieldAggregationType.Minute,f[M.FieldAggregationType.MonthYear]=I.FieldAggregationType.MonthYear,f[M.FieldAggregationType.None]=I.FieldAggregationType.None,f[M.FieldAggregationType.Qtr]=I.FieldAggregationType.Qtr,f[M.FieldAggregationType.Quart1]=I.FieldAggregationType.Quart1,f[M.FieldAggregationType.Quart3]=I.FieldAggregationType.Quart3,f[M.FieldAggregationType.Second]=I.FieldAggregationType.Second,f[M.FieldAggregationType.Skewness]=I.FieldAggregationType.Skewness,f[M.FieldAggregationType.Stdev]=I.FieldAggregationType.Stdev,f[M.FieldAggregationType.Stdevp]=I.FieldAggregationType.Stdevp,f[M.FieldAggregationType.Sum]=I.FieldAggregationType.Sum,f[M.FieldAggregationType.TruncDay]=I.FieldAggregationType.TruncDay,f[M.FieldAggregationType.TruncHour]=I.FieldAggregationType.TruncHour,f[M.FieldAggregationType.TruncMinute]=I.FieldAggregationType.TruncMinute,f[M.FieldAggregationType.TruncMonth]=I.FieldAggregationType.TruncMonth,f[M.FieldAggregationType.TruncQtr]=I.FieldAggregationType.TruncQtr,f[M.FieldAggregationType.TruncSecond]=I.FieldAggregationType.TruncSecond,f[M.FieldAggregationType.TruncWeek]=I.FieldAggregationType.TruncWeek,f[M.FieldAggregationType.TruncYear]=I.FieldAggregationType.TruncYear,f[M.FieldAggregationType.User]=I.FieldAggregationType.User,f[M.FieldAggregationType.Var]=I.FieldAggregationType.Var,f[M.FieldAggregationType.Varp]=I.FieldAggregationType.Varp,f[M.FieldAggregationType.Week]=I.FieldAggregationType.Week,f[M.FieldAggregationType.Weekday]=I.FieldAggregationType.Weekday,f[M.FieldAggregationType.Year]=I.FieldAggregationType.Year,f)),z.fieldRoleType=new k.EnumConverter(((d={})[M.FieldRoleType.Dimension]=I.FieldRoleType.Dimension,d[M.FieldRoleType.Measure]=I.FieldRoleType.Measure,d[M.FieldRoleType.Unknown]=I.FieldRoleType.Unknown,d)),z.sheetType=new k.EnumConverter(((p={})[M.SheetType.Dashboard]=I.SheetType.Dashboard,p[M.SheetType.Story]=I.SheetType.Story,p[M.SheetType.Worksheet]=I.SheetType.Worksheet,p)),z.dashboardObjectType=new k.EnumConverter(((g={})[M.DashboardObjectType.Extension]=I.DashboardObjectType.Extension,g[M.DashboardObjectType.Blank]=I.DashboardObjectType.Blank,g[M.DashboardObjectType.Image]=I.DashboardObjectType.Image,g[M.DashboardObjectType.Legend]=I.DashboardObjectType.Legend,g[M.DashboardObjectType.PageFilter]=I.DashboardObjectType.PageFilter,g[M.DashboardObjectType.ParameterControl]=I.DashboardObjectType.ParameterControl,g[M.DashboardObjectType.QuickFilter]=I.DashboardObjectType.QuickFilter,g[M.DashboardObjectType.Text]=I.DashboardObjectType.Text,g[M.DashboardObjectType.Title]=I.DashboardObjectType.Title,g[M.DashboardObjectType.WebPage]=I.DashboardObjectType.WebPage,g[M.DashboardObjectType.Worksheet]=I.DashboardObjectType.Worksheet,g)),z.dataType=new k.EnumConverter(((y={})[M.DataType.Bool]=I.DataType.Bool,y[M.DataType.Date]=I.DataType.Date,y[M.DataType.DateTime]=I.DataType.DateTime,y[M.DataType.Float]=I.DataType.Float,y[M.DataType.Int]=I.DataType.Int,y[M.DataType.String]=I.DataType.String,y)),z.filterUpdateType=new k.EnumConverter(((v={})[M.FilterUpdateType.Add]=I.FilterUpdateType.Add,v[M.FilterUpdateType.All]=I.FilterUpdateType.All,v[M.FilterUpdateType.Remove]=I.FilterUpdateType.Remove,v[M.FilterUpdateType.Replace]=I.FilterUpdateType.Replace,v)),z.allowableValues=new k.EnumConverter(((b={})[M.DomainRestrictionType.All]=I.ParameterValueType.All,b[M.DomainRestrictionType.List]=I.ParameterValueType.List,b[M.DomainRestrictionType.Range]=I.ParameterValueType.Range,b)),z.dateStepPeriod=new k.EnumConverter(((x={})[M.DateStepPeriod.Years]=I.PeriodType.Years,x[M.DateStepPeriod.Quarters]=I.PeriodType.Quarters,x[M.DateStepPeriod.Months]=I.PeriodType.Months,x[M.DateStepPeriod.Weeks]=I.PeriodType.Weeks,x[M.DateStepPeriod.Days]=I.PeriodType.Days,x[M.DateStepPeriod.Hours]=I.PeriodType.Hours,x[M.DateStepPeriod.Minutes]=I.PeriodType.Minutes,x[M.DateStepPeriod.Seconds]=I.PeriodType.Seconds,x)),z.dateRangeType=new k.EnumConverter(((_={})[M.DateRangeType.Current]=I.DateRangeType.Current,_[M.DateRangeType.Last]=I.DateRangeType.Last,_[M.DateRangeType.LastN]=I.DateRangeType.LastN,_[M.DateRangeType.Next]=I.DateRangeType.Next,_[M.DateRangeType.NextN]=I.DateRangeType.NextN,_[M.DateRangeType.ToDate]=I.DateRangeType.ToDate,_)),z.errorCode=new k.EnumConverter(((T={})[M.ErrorCodes.INITIALIZATION_ERROR]=I.ErrorCodes.InternalError,T[M.ErrorCodes.INTERNAL_ERROR]=I.ErrorCodes.InternalError,T[M.ErrorCodes.MISSING_ENUM_MAPPING]=I.ErrorCodes.InternalError,T[M.ErrorCodes.MISSING_PARAMETER]=I.ErrorCodes.InternalError,T[M.ErrorCodes.PERMISSION_DENIED]=I.ErrorCodes.InternalError,T[M.ErrorCodes.PRES_MODEL_PARSING_ERROR]=I.ErrorCodes.InternalError,T[M.ErrorCodes.UNKNOWN_VERB_ID]=I.ErrorCodes.InternalError,T[M.ErrorCodes.VERSION_NOT_CONFIGURED]=I.ErrorCodes.APINotInitialized,T[M.ErrorCodes.VISIBILITY_ERROR]=I.ErrorCodes.VisibilityError,T),I.ErrorCodes.InternalError),z.filterType=new k.EnumConverter(((A={})[M.FilterType.Categorical]=I.FilterType.Categorical,A[M.FilterType.Range]=I.FilterType.Range,A[M.FilterType.RelativeDate]=I.FilterType.RelativeDate,A[M.FilterType.Hierarchical]=I.FilterType.Hierarchical,A)),z.classNameKey=new k.EnumConverter(((w={})["tableau-dashboard-title"]=I.ClassNameKey.DashboardTitle,w["tableau-story-title"]=I.ClassNameKey.StoryTitle,w["tableau-tooltip"]=I.ClassNameKey.Tooltip,w["tableau-worksheet"]=I.ClassNameKey.Worksheet,w["tableau-worksheet-title"]=I.ClassNameKey.WorksheetTitle,w["dashboard-title"]=I.ClassNameKey.DashboardTitle,w["story-title"]=I.ClassNameKey.StoryTitle,w.tooltip=I.ClassNameKey.Tooltip,w.worksheet=I.ClassNameKey.Worksheet,w["worksheet-title"]=I.ClassNameKey.WorksheetTitle,w)),z.hierarchicalLevelSelectionState=new k.EnumConverter(((C={})[M.HierarchicalLevelSelectionState.AllSelected]=I.HierarchicalLevelSelectionState.AllSelected,C[M.HierarchicalLevelSelectionState.NoneSelected]=I.HierarchicalLevelSelectionState.NoneSelected,C[M.HierarchicalLevelSelectionState.SomeSelected]=I.HierarchicalLevelSelectionState.SomeSelected,C[M.HierarchicalLevelSelectionState.UnknownSelected]=I.HierarchicalLevelSelectionState.UnknownSelected,C)),z.annotationType=new k.EnumConverter(((D={})[M.AnnotateEnum.Area]=I.AnnotationType.Area,D[M.AnnotateEnum.Mark]=I.AnnotationType.Mark,D[M.AnnotateEnum.Point]=I.AnnotationType.Point,D)),z})();o.InternalToExternalEnumMappings=R},3682:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=(function(){function f(){this._eventListenerManagers={}}return f.prototype.addEventListener=function(d,p){if(!this._eventListenerManagers.hasOwnProperty(d))throw new l.TableauError(s.ErrorCodes.UnsupportedEventName,"Cannot add event, unsupported event type: "+d);return this._eventListenerManagers[d].addEventListener(p)},f.prototype.removeEventListener=function(d,p){if(!this._eventListenerManagers.hasOwnProperty(d))throw new l.TableauError(s.ErrorCodes.UnsupportedEventName,"Cannot remove event, unsupported event type: "+d);return this._eventListenerManagers[d].removeEventListener(p)},f.prototype.addNewEventType=function(d){this._eventListenerManagers[d.eventType]=d},f})();o.EventListenerManager=u},2131:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(316),l=(function(){function u(f){this._fieldImpl=f}return Object.defineProperty(u.prototype,"name",{get:function(){return this._fieldImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"id",{get:function(){return this._fieldImpl.id},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"description",{get:function(){return this._fieldImpl.description},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"aggregation",{get:function(){return this._fieldImpl.aggregation},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dataSource",{get:function(){return this._fieldImpl.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"role",{get:function(){return this._fieldImpl.role},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isHidden",{get:function(){return this._fieldImpl.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isGenerated",{get:function(){return this._fieldImpl.isGenerated},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isCalculatedField",{get:function(){return this._fieldImpl.isCalculatedField},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"columnType",{get:function(){throw s.ErrorHelpers.apiNotImplemented("Field.columnType")},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isCombinedField",{get:function(){return this._fieldImpl.isCombinedField},enumerable:!0,configurable:!0}),u})();o.Field=l},2913:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4007),l=(function(){function u(f,d){this._registryId=d,this._luid=f.luid,this._name=f.name,this._shared=f.shared,this._isDefault=f.isDefault,this._ownerName=f.owner.userFriendlyName,this._url=f.url}return Object.defineProperty(u.prototype,"luid",{get:function(){return this._luid},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"name",{get:function(){return this._name},set:function(f){this._name=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"shared",{get:function(){return this._shared},set:function(f){this._shared=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isDefault",{get:function(){return this._isDefault},set:function(f){this._isDefault=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"ownerName",{get:function(){return this._ownerName},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),u.prototype.saveAsync=function(){return s.ApiServiceRegistry.get(this._registryId).getService("viz-service").saveAsync(this)},u})();o.CustomViewImpl=l},4657:function(i,o,a){var s,l=this&&this.__extends||(s=function(C,D){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,M){I.__proto__=M}||function(I,M){for(var k in M)M.hasOwnProperty(k)&&(I[k]=M[k])},s(C,D)},function(C,D){function I(){this.constructor=C}s(C,D),C.prototype=D===null?Object.create(D):(I.prototype=D.prototype,new I)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(1750),d=a(4695),p=a(5126),g=a(2391),y=a(9887),v=a(1554),b=a(316),x=a(3333),_=a(1878),T=a(6749),A=a(928),w=(function(C){function D(I,M,k,R,z){var P=C.call(this,I,R)||this;return P._zones=M,P._sheetPath=k,P._parentStoryPointImpl=z,P}return l(D,C),Object.defineProperty(D.prototype,"worksheetsImpl",{get:function(){return this._worksheetsImpl},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"objects",{get:function(){return this._objects},enumerable:!0,configurable:!0}),Object.defineProperty(D.prototype,"parentStoryPoint",{get:function(){return this._parentStoryPointImpl},enumerable:!0,configurable:!0}),D.prototype.initializeWithPublicInterfaces=function(){this._worksheetsImpl=new Array,this._objects=new Array,this.zoneMap=new Map;for(var I=0,M=this._zones;I<M.length;I++){var k=M[I],R=void 0,z={width:k.width,height:k.height};if(k.zoneType===d.DashboardObjectType.Worksheet){var P="",$="",N=!1;k.sheetInfo?(P=k.sheetInfo.name,N=($=k.sheetInfo.url||"")===""):P=k.name;var L=new T.SheetInfoImpl(P,f.SheetType.Worksheet,z,this._worksheetsImpl.length,!1,N,$),B={worksheet:P,dashboard:this._sheetInfoImpl.name,storyboard:this._sheetPath.storyboard,flipboardZoneID:this._sheetPath.flipboardZoneID,storyPointID:this._sheetPath.storyPointID};R=new A.WorksheetImpl(L,this._registryId,B,this,this._parentStoryPointImpl),this._worksheetsImpl.push(R)}var q=new g.Point(k.x,k.y),H=new x.DashboardObjectImpl(this,p.InternalToExternalEnumMappings.dashboardObjectType.convert(k.zoneType),q,z,R,k.name,k.isFloating!==void 0&&k.isFloating,k.isVisible===void 0||k.isVisible,k.zoneId);this._objects.push(H),this.zoneMap.set(k.zoneId,H)}},D.prototype.setDashboardObjectVisibilityAsync=function(I){return y.ApiServiceRegistry.get(this._registryId).getService("zone-service").setVisibilityAsync(this.name,this.zoneMap,I)},D.prototype.getDashboardObjectById=function(I){return this.zoneMap.get(I)},D.prototype.updateZones=function(I){var M=this,k=this._objects,R=this.zoneMap;this._zones=I,this.initializeWithPublicInterfaces();var z=this._objects,P=this.zoneMap,$=new Map;return k.forEach((function(N){var L=N.id;if(P.has(L)){var B=P.get(L);N.isFloating!==B.isFloating&&M.addChange(L,$,f.DashboardLayoutChange.IsFloatingChanged),N.isVisible!==B.isVisible&&M.addChange(L,$,f.DashboardLayoutChange.IsVisibleChanged),N.name!==B.name&&M.addChange(L,$,f.DashboardLayoutChange.NameChanged),N.position.x===B.position.x&&N.position.y===B.position.y||M.addChange(L,$,f.DashboardLayoutChange.PositionChanged),N.size.width===B.size.width&&N.size.height===B.size.height||M.addChange(L,$,f.DashboardLayoutChange.SizeChanged)}else M.addChange(L,$,f.DashboardLayoutChange.Removed)})),z.forEach((function(N){R.has(N.id)||M.addChange(N.id,$,f.DashboardLayoutChange.Added)})),$},D.prototype.addChange=function(I,M,k){M.has(I)||M.set(I,[]),M.get(I).push(k)},D.prototype.moveAndResizeDashboardObjectsAsync=function(I){return y.ApiServiceRegistry.get(this._registryId).getService("zone-service").moveAndResizeAsync(this.name,this.zoneMap,I)},D.prototype.replayAnimationAsync=function(I){return y.ApiServiceRegistry.get(this._registryId).getService("animation-service").replayAsync(I)},D.prototype.getFiltersAsync=function(){return this.verifyActiveSheetOrEmbeddedInActiveStoryPoint(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").getDashboardFiltersAsync()},D.prototype.applyFilterAsync=function(I,M,k,R){if(b.ErrorHelpers.verifyEnumValue(k,u.FilterUpdateType,"FilterUpdateType"),b.ErrorHelpers.verifyStringParameter(I,"fieldName"),!Array.isArray(M))throw new v.TableauError(f.ErrorCodes.InvalidParameter,"values parameter for applyDashboardFilterAsync must be an array");return this.verifyActiveSheetOrEmbeddedInActiveStoryPoint(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").applyDashboardFilterAsync(I,M,k,R)},D.prototype.verifyActiveSheetOrEmbeddedInActiveStoryPoint=function(){var I=this.active,M=this.parentStoryPoint!=null&&this.parentStoryPoint.active;if(!I&&!M)throw new v.TableauError(f.SharedErrorCodes.NotActiveSheet,"Operation not allowed on non-active sheet")},D})(_.SheetImpl);o.DashboardImpl=w},3333:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f,d,p,g,y,v,b){this._dashboardImpl=l,this._type=u,this._position=f,this._size=d,this._worksheetImpl=p,this._name=g,this._isFloating=y,this._isVisible=v,this._id=b}return Object.defineProperty(s.prototype,"dashboardImpl",{get:function(){return this._dashboardImpl},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"position",{get:function(){return this._position},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"worksheetImpl",{get:function(){return this._worksheetImpl},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isFloating",{get:function(){return this._isFloating},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"isVisible",{get:function(){return this._isVisible},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),s})();o.DashboardObjectImpl=a},1234:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(5458),u=a(2131),f=a(1110),d=a(9887),p=a(1738),g=a(316),y=a(8695),v=(function(){function b(x,_){var T=this;this._dataSourceInfo=x,this._registryId=_,this._fields=x.fields.map((function(A){var w=new y.FieldImpl(A,T);return new u.Field(w)}))}return Object.defineProperty(b.prototype,"name",{get:function(){return this._dataSourceInfo.name},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"id",{get:function(){return this._dataSourceInfo.id},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"extractUpdateTime",{get:function(){return this._dataSourceInfo.extractUpdateTime},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isExtract",{get:function(){return this._dataSourceInfo.isExtract},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"isPublished",{get:function(){return this._dataSourceInfo.isPublished},enumerable:!0,configurable:!0}),b.prototype.publishedUrl=function(){return this._dataSourceInfo.publishedUrl},b.prototype.getMaxPageRowLimit=function(){return 1e4},b.prototype.refreshAsync=function(){return d.ApiServiceRegistry.get(this._registryId).getService("data-source-service").refreshAsync(this._dataSourceInfo.id)},b.prototype.getConnectionSummariesAsync=function(){return d.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getConnectionSummariesAsync(this._dataSourceInfo.id).then((function(x){return x.map((function(_){return new l.ConnectionSummary(_)}))}))},b.prototype.getActiveTablesAsync=function(){return d.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getActiveTablesAsync(this._dataSourceInfo.id).then((function(x){return x.map((function(_){return new p.TableSummary(_)}))}))},b.prototype.getUnderlyingDataAsync=function(x){return x=x||{},d.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getDataSourceDataAsync(this.id,!!x.ignoreAliases,x.maxRows||0,x.columnsToInclude||[],x.columnsToIncludeById||[],x.includeDataValuesOption||s.IncludeDataValuesOption.AllValues)},b.prototype.getLogicalTableDataAsync=function(x,_){return _=_||{},d.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getLogicalTableDataAsync(this.id,x,!!_.ignoreAliases,_.maxRows||0,_.columnsToInclude||[],_.columnsToIncludeById||[],_.includeDataValuesOption||s.IncludeDataValuesOption.AllValues)},b.prototype.getLogicalTableDataReaderAsync=function(x,_,T){return T=T||{},d.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getLogicalTableDataReaderAsync(this.id,x,_||this.getMaxPageRowLimit(),!!T.ignoreAliases,T.columnsToIncludeById||[],T.includeDataValuesOption||s.IncludeDataValuesOption.AllValues)},b.prototype.initializeWithPublicInterfaces=function(x){g.ErrorHelpers.verifyInternalValue(x,"dataSource"),this._fields=this._dataSourceInfo.fields.map((function(_){var T=new y.FieldImpl(_,x);return new u.Field(T)}))},b.prototype.getLogicalTablesAsync=function(){return d.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getLogicalTablesAsync(this.id).then((function(x){return x.map((function(_){return new f.LogicalTable(_)}))}))},b})();o.DataSourceImpl=v},8695:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(5126),l=(function(){function u(f,d){this._fieldInfo=f,this._parentDataSource=d}return Object.defineProperty(u.prototype,"name",{get:function(){return this._fieldInfo.name},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"id",{get:function(){return this._fieldInfo.id},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"description",{get:function(){return this._fieldInfo.description},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"aggregation",{get:function(){return s.InternalToExternalEnumMappings.fieldAggregationType.convert(this._fieldInfo.aggregation)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"dataSource",{get:function(){return this._parentDataSource},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"role",{get:function(){return s.InternalToExternalEnumMappings.fieldRoleType.convert(this._fieldInfo.role)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isHidden",{get:function(){return this._fieldInfo.isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isGenerated",{get:function(){return this._fieldInfo.isGenerated},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isCalculatedField",{get:function(){return this._fieldInfo.isCalculatedField},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isCombinedField",{get:function(){return this._fieldInfo.isCombinedField},enumerable:!0,configurable:!0}),u})();o.FieldImpl=l},6560:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(5126),u=a(9887),f=a(8175),d=a(316),p=a(6077),g=(function(){function y(v,b){this._registryId=b,this.setParameterInfo(v)}return Object.defineProperty(y.prototype,"name",{get:function(){return this._parameterInfo.name},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"currentValue",{get:function(){return f.DataValueFactory.MakeParameterDataValue(this._parameterInfo.currentValue,this._parameterInfo.dataType)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"dataType",{get:function(){return l.InternalToExternalEnumMappings.dataType.convert(this._parameterInfo.dataType)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"id",{get:function(){return this._globalFieldName},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"allowableValues",{get:function(){return this._allowableValues},enumerable:!0,configurable:!0}),y.prototype.changeValueAsync=function(v){var b=this;d.ErrorHelpers.verifyParameter(v,"newValue");var x=p.Param.serializeParameterValue(v);return u.ApiServiceRegistry.get(this._registryId).getService("parameters-service").changeParameterValueAsync(this._globalFieldName,x).then((function(_){return b.setParameterInfo(_),b.currentValue}))},y.prototype.setParameterInfo=function(v){this._parameterInfo=v,this._globalFieldName=v.fieldName;var b,x,_,T,A,w=l.InternalToExternalEnumMappings.allowableValues.convert(v.allowableValuesType);w===s.ParameterValueType.List?b=(v.allowableValues||[]).map((function(C){return f.DataValueFactory.MakeParameterDataValue(C,v.dataType)})):w===s.ParameterValueType.Range&&(x=v.minValue&&f.DataValueFactory.MakeParameterDataValue(v.minValue,v.dataType),_=v.maxValue&&f.DataValueFactory.MakeParameterDataValue(v.maxValue,v.dataType),T=v.stepSize,A=v.dateStepPeriod&&l.InternalToExternalEnumMappings.dateStepPeriod.convert(v.dateStepPeriod)),this._allowableValues={type:w,allowableValues:b,minValue:x,maxValue:_,stepSize:T,dateStepPeriod:A}},y})();o.ParameterImpl=g},1878:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(9887),u=a(1554),f=a(316),d=a(6077),p=a(489),g=(function(){function y(v,b){this._sheetInfoImpl=v,this._registryId=b}return Object.defineProperty(y.prototype,"name",{get:function(){return this._sheetInfoImpl.name},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sheetType",{get:function(){return this._sheetInfoImpl.sheetType},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"sheetPath",{get:function(){return this._sheetInfoImpl.sheetPath},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"size",{get:function(){return this._sheetInfoImpl.sheetSize},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"hidden",{get:function(){if(this._sheetInfoImpl.isHidden!==void 0)return this._sheetInfoImpl.isHidden;throw new u.TableauError(s.EmbeddingErrorCodes.ImplementationError,"isHidden not implemented")},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"active",{get:function(){if(this._sheetInfoImpl.isActive!==void 0)return this._sheetInfoImpl.isActive;throw new u.TableauError(s.EmbeddingErrorCodes.ImplementationError,"active not implemented")},set:function(v){this._sheetInfoImpl.isActive!==void 0&&(this._sheetInfoImpl.active=v)},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"index",{get:function(){if(this._sheetInfoImpl.index!==void 0)return this._sheetInfoImpl.index;throw new u.TableauError(s.EmbeddingErrorCodes.ImplementationError,"index not implemented")},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"url",{get:function(){if(this._sheetInfoImpl.url!==void 0)return this._sheetInfoImpl.url;throw new u.TableauError(s.EmbeddingErrorCodes.ImplementationError,"url not implemented")},enumerable:!0,configurable:!0}),y.prototype.getSheetSize=function(){if(!p.SheetUtils.isValidSheetSize(this.size))throw new u.TableauError(s.EmbeddingErrorCodes.InternalError,"size is not of type SheetSize");return this.size},y.prototype.findParameterAsync=function(v){return f.ErrorHelpers.verifyParameter(v,"parameterName"),l.ApiServiceRegistry.get(this._registryId).getService("parameters-service").findParameterByNameAsync(v)},y.prototype.getParametersAsync=function(){return l.ApiServiceRegistry.get(this._registryId).getService("parameters-service").getParametersForSheetAsync(this.sheetPath)},y.prototype.changeSizeAsync=function(v){var b=this,x=new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Invalid sheet size parameter");if(!v||!v.behavior)throw x;var _=this.normalizeSheetSize(v),T=_.behavior===s.SheetSizeBehavior.Automatic;if(!T&&!_.minSize&&!_.maxSize)throw x;if(!T&&this.sheetType===s.SheetType.Worksheet)throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSizeBehaviorOnWorksheet,"Only SheetSizeBehavior.Automatic is allowed on Worksheets");if(T&&this.getSheetSize().behavior===_.behavior)return Promise.resolve(v);var A=this.processNewSize(_);return l.ApiServiceRegistry.get(this._registryId).getService("size-service").changeSizeAsync(this.name,A).then((function(){return l.ApiServiceRegistry.get(b._registryId).getService("client-info-service").getClientInfoAsync().then((function(w){var C=w.publishedSheets.find((function(I){return I.name===b.name}));if(!C)throw new u.TableauError(s.SharedErrorCodes.InternalError,"Can't find sheet with name "+b.name);var D=p.SheetUtils.getSheetSizeFromSizeConstraints(C.sizeConstraint);return b._sheetInfoImpl.sheetSize=D,D}))}))},y.prototype.normalizeSheetSize=function(v){var b=v.behavior;return f.ErrorHelpers.verifyEnumValue(b,s.SheetSizeBehavior,"SheetSizeBehavior"),{behavior:b,minSize:y.parseDimensions(v.minSize),maxSize:y.parseDimensions(v.maxSize)}},y.prototype.processNewSize=function(v){var b,x,_,T,A=v.behavior,w=v.minSize,C=v.maxSize,D=!d.Param.isNullOrUndefined((b=w)===null||b===void 0?void 0:b.width),I=!d.Param.isNullOrUndefined((x=w)===null||x===void 0?void 0:x.height),M=!d.Param.isNullOrUndefined((_=C)===null||_===void 0?void 0:_.width),k=!d.Param.isNullOrUndefined((T=C)===null||T===void 0?void 0:T.height),R=D&&I,z=M&&k;switch(A){case s.SheetSizeBehavior.Automatic:return{behavior:A};case s.SheetSizeBehavior.AtMost:if(!C||!z)throw new u.TableauError(s.EmbeddingErrorCodes.MissingMaxSize,"Missing maxSize for SheetSizeBehavior.AtMost");if(($={width:C.width,height:C.height}).width<0||$.height<0)throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Size value cannot be less than zero");return{behavior:A,maxSize:$};case s.SheetSizeBehavior.AtLeast:if(!w||!R)throw new u.TableauError(s.EmbeddingErrorCodes.MissingMinSize,"Missing minSize for SheetSizeBehavior.AtLeast");if((P={width:w.width,height:w.height}).width<0||P.height<0)throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Size value cannot be less than zero");return{behavior:A,minSize:P};case s.SheetSizeBehavior.Range:if(!(w&&C&&R&&z))throw new u.TableauError(s.EmbeddingErrorCodes.MissingMinMaxSize,"Missing minSize or maxSize for SheetSizeBehavior.Range");var P={width:w.width,height:w.height},$={width:C.width,height:C.height};if(P.width<0||P.height<0||$.width<0||$.height<0||P.width>$.width||P.height>$.height)throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Missing minSize or maxSize for SheetSizeBehavior.Range");return{behavior:A,minSize:P,maxSize:$};case s.SheetSizeBehavior.Exactly:if(w&&C){if(R&&z){if(P={width:w.width,height:w.height},$={width:C.width,height:C.height},P.width!==$.width||P.height!==$.height)throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Conflicting size values for SheetSizeBehavior.Exactly");return{behavior:A,minSize:P,maxSize:$}}if(R)return{behavior:A,minSize:P={width:w.width,height:w.height},maxSize:P};if(z)return{behavior:A,minSize:$={width:C.width,height:C.height},maxSize:$}}throw new u.TableauError(s.EmbeddingErrorCodes.InvalidSize,"Invalid sheet size parameter");default:throw new u.TableauError(s.SharedErrorCodes.InternalError,"Unsupported sheet size behavior: "+A)}},y.parseDimensions=function(v){var b={width:void 0,height:void 0};if(!v)return b;var x=d.Param.tryParseNumber(v.width),_=x.success,T=x.parsed,A=d.Param.tryParseNumber(v.height),w=A.success,C=A.parsed;return _&&w?{width:T,height:C}:_?{width:T}:w?{height:C}:b},y})();o.SheetImpl=g},6749:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=(function(){function u(f,d,p,g,y,v,b){this._name=f,this._sheetType=d,this._sheetSize=p,this._index=g,this._isActive=y,this._isHidden=v,this._url=b}return Object.defineProperty(u.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sheetSize",{get:function(){return this._sheetSize},set:function(f){this._sheetSize=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sheetType",{get:function(){return this._sheetType},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"sheetPath",{get:function(){return{sheetName:this.name,isDashboard:this.sheetType===s.SheetType.Dashboard}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isActive",{get:function(){return this._isActive},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"active",{set:function(f){this._isActive=f},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"isHidden",{get:function(){return this._isHidden},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"url",{get:function(){return this._url},enumerable:!0,configurable:!0}),u})();o.SheetInfoImpl=l},4217:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._eventType=l,this._handlers=[]}return Object.defineProperty(s.prototype,"eventType",{get:function(){return this._eventType},enumerable:!0,configurable:!0}),s.prototype.addEventListener=function(l){var u=this;return this._handlers.push(l),function(){return u.removeEventListener(l)}},s.prototype.removeEventListener=function(l){var u=this._handlers.length;return this._handlers=this._handlers.filter((function(f){return f!==l})),u>this._handlers.length},s.prototype.triggerEvent=function(l){for(var u=0,f=this._handlers;u<f.length;u++){var d=f[u];try{d(l())}catch{continue}}},s})();o.SingleEventManagerImpl=a},8194:function(i,o,a){var s,l=this&&this.__extends||(s=function(_,T){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,w){A.__proto__=w}||function(A,w){for(var C in w)w.hasOwnProperty(C)&&(A[C]=w[C])},s(_,T)},function(_,T){function A(){this.constructor=_}s(_,T),_.prototype=T===null?Object.create(T):(A.prototype=T.prototype,new A)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(9887),d=a(1554),p=a(316),g=a(8634),y=a(1878),v=a(757),b=a(8519),x=(function(_){function T(A,w,C,D){var I=_.call(this,A,D)||this;return I._sheetInfoImpl=A,I._publishedSheetInfos=C,I._registryId=D,I._storyPointInfoImpls=[],I._deferred=new g.ShortLivedDeferred,I.initializeStory(w),I}return l(T,_),T.prototype.initializeStory=function(A){var w=this;A.storyPoints.forEach((function(C){var D=C.index===A.activeStoryPointIndex,I=new b.StoryPointInfoImpl(C.caption,C.index,C.storyPointId,D,C.updated,w);w._storyPointInfoImpls.push(I),D&&(w._activeStoryPointImpl=new v.StoryPointImpl(I,w._publishedSheetInfos,w._registryId,C.containedSheetInfo))}))},T.prototype.updateStoryInfo=function(A,w){if(this._storyPointInfoImpls){var C=this._storyPointInfoImpls[A];if(C.storyPointId!==w.storyPointId)throw new d.TableauError(u.EmbeddingErrorCodes.StoryPointIdMismatch,"We should not be updating a story point when the IDs don't match. Existing storyPointID="+C.storyPointId+", newStoryPointID="+w.storyPointId);C.caption=w.caption,C.updated=w.updated,this._activeStoryPointImpl.storyPointId===w.storyPointId&&(this._activeStoryPointImpl.updated=C.updated)}},T.prototype.updateStory=function(A){var w=this;this._storyPointInfoImpls&&(this._storyPointInfoImpls.forEach((function(C){C.storyPointId===A.storyPointId?(C.caption=A.caption,C.index=A.index,C.active=!0,C.updated=A.updated,w._activeStoryPointImpl=new v.StoryPointImpl(C,w._publishedSheetInfos,w._registryId,A.containedSheetInfo)):C.active=!1})),this.activeStoryPoint&&this._deferred.resolve(this.activeStoryPoint))},Object.defineProperty(T.prototype,"activeStoryPoint",{get:function(){return this._activeStoryPointImpl},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"storyPointsInfo",{get:function(){return this._storyPointInfoImpls},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"isActive",{get:function(){return this._sheetInfoImpl.active},enumerable:!0,configurable:!0}),Object.defineProperty(T.prototype,"isHidden",{get:function(){return!!this._sheetInfoImpl.isHidden},enumerable:!0,configurable:!0}),T.prototype.activateNextStoryPointAsync=function(){if(this._activeStoryPointImpl.index===this._storyPointInfoImpls.length-1)return Promise.resolve(this._activeStoryPointImpl);var A=this._deferred.getNewPromiseOrThrowIfBusy();return f.ApiServiceRegistry.get(this._registryId).getService("story-activation-service").activateNextStoryPointAsync(),A},T.prototype.activatePreviousStoryPointAsync=function(){if(this._activeStoryPointImpl.index===0)return Promise.resolve(this._activeStoryPointImpl);var A=this._deferred.getNewPromiseOrThrowIfBusy();return f.ApiServiceRegistry.get(this._registryId).getService("story-activation-service").activatePreviousStoryPointAsync(),A},T.prototype.activateStoryPointAsync=function(A){if(p.ErrorHelpers.verifyParameter(A,"index"),p.ErrorHelpers.verifyParameterType(A,"number","index"),A<0||A>=this._storyPointInfoImpls.length)throw new d.TableauError(u.EmbeddingErrorCodes.IndexOutOfRange,"The index passed to this command is out of range.");if(A===this._activeStoryPointImpl.index)return Promise.resolve(this._activeStoryPointImpl);var w=this._deferred.getNewPromiseOrThrowIfBusy();return f.ApiServiceRegistry.get(this._registryId).getService("story-activation-service").activateStoryPointAsync(A),w},T.prototype.revertStoryPointAsync=function(A){var w=this;if(p.ErrorHelpers.verifyParameter(A,"index"),p.ErrorHelpers.verifyParameterType(A,"number","index"),A<0||A>=this._storyPointInfoImpls.length)throw new d.TableauError(u.EmbeddingErrorCodes.IndexOutOfRange,"The index passed to this command is out of range.");return f.ApiServiceRegistry.get(this._registryId).getService("story-activation-service").revertStoryPointAsync(A).then((function(C){return w.updateStoryInfo(C.index,C),new b.StoryPointInfoImpl(C.caption,C.index,C.storyPointId,!1,C.updated,w)}))},T.prototype.clearPendingPromises=function(){this._deferred&&this._deferred.reject("All pending promises cleared")},T})(y.SheetImpl);o.StoryImpl=x},757:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=a(489),f=a(4657),d=a(6749),p=a(928),g=(function(){function y(v,b,x,_){this._storyPointInfoImpl=v,_&&(this._containedSheetImpl=this.createContainedSheet(_,b,x))}return Object.defineProperty(y.prototype,"index",{get:function(){return this._storyPointInfoImpl.index},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"caption",{get:function(){return this._storyPointInfoImpl.caption},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"active",{get:function(){return this._storyPointInfoImpl.active},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"updated",{get:function(){return this._storyPointInfoImpl.updated},set:function(v){this._storyPointInfoImpl.updated=v},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"parentStory",{get:function(){return this._storyPointInfoImpl.parentStory},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"containedSheet",{get:function(){return this._containedSheetImpl},enumerable:!0,configurable:!0}),Object.defineProperty(y.prototype,"storyPointId",{get:function(){return this._storyPointInfoImpl.storyPointId},enumerable:!0,configurable:!0}),y.prototype.createContainedSheet=function(v,b,x){var _,T=u.SheetUtils.getPublishedSheetInfoByName(v.name,b),A=u.SheetUtils.createAutomaticSize(),w=T===void 0,C=T?T.url:"",D=new d.SheetInfoImpl(v.name,u.SheetUtils.getSheetTypeEnum(v.sheetType),A,-1,!1,w,C);switch(D.sheetType){case s.SheetType.Worksheet:var I={worksheet:D.name};_=new p.WorksheetImpl(D,x,I,null,this);break;case s.SheetType.Dashboard:var M={sheetName:D.name,isDashboard:!0};_=new f.DashboardImpl(D,v.dashboardZones,M,x,this);break;default:throw new l.TableauError(s.SharedErrorCodes.ServerError,"Invalid SheetType")}return _},y})();o.StoryPointImpl=g},8519:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u,f,d,p,g){this._caption=l,this._index=u,this._storyPointId=f,this._active=d,this._updated=p,this._parentStoryImpl=g}return Object.defineProperty(s.prototype,"caption",{get:function(){return this._caption},set:function(l){this._caption=l},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"index",{get:function(){return this._index},set:function(l){this._index=l},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"storyPointId",{get:function(){return this._storyPointId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"active",{get:function(){return this._active},set:function(l){this._active=l},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"updated",{get:function(){return this._updated},set:function(l){this._updated=l},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"parentStory",{get:function(){return this._parentStoryImpl},enumerable:!0,configurable:!0}),s})();o.StoryPointInfoImpl=a},3826:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WorkbookImpl=function(){}},928:function(i,o,a){var s,l=this&&this.__extends||(s=function(T,A){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var D in C)C.hasOwnProperty(D)&&(w[D]=C[D])},s(T,A)},function(T,A){function w(){this.constructor=T}s(T,A),T.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(1750),d=a(6411),p=a(1110),g=a(850),y=a(9887),v=a(1554),b=a(316),x=a(1234),_=(function(T){function A(w,C,D,I,M){var k=T.call(this,w,C)||this;return k._visualId=D,k._parentDashboardImpl=I,k._parentStoryPointImpl=M,k}return l(A,T),Object.defineProperty(A.prototype,"parentDashboard",{get:function(){return this._parentDashboardImpl},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"parentStoryPoint",{get:function(){return this._parentStoryPointImpl},enumerable:!0,configurable:!0}),Object.defineProperty(A.prototype,"visualId",{get:function(){return this._visualId},enumerable:!0,configurable:!0}),A.prototype.getMaxPageRowLimit=function(){return 1e4},A.prototype.applyFilterAsync=function(w,C,D,I){return b.ErrorHelpers.verifyEnumValue(D,u.FilterUpdateType,"Contract.FilterUpdateType"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").applyFilterAsync(this.visualId,w,C,D,I)},A.prototype.applyRangeFilterAsync=function(w,C){return b.ErrorHelpers.verifyParameter(w,"fieldName"),b.ErrorHelpers.verifyParameter(C,"filterOptions"),C.nullOption?b.ErrorHelpers.verifyEnumValue(C.nullOption,f.FilterNullOption,"FilterNullOption"):b.ErrorHelpers.verifyRangeParamType(C.min,C.max),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").applyRangeFilterAsync(this.visualId,w,C)},A.prototype.applyHierarchicalFilterAsync=function(w,C,D,I){if(b.ErrorHelpers.verifyParameter(w,"fieldName"),b.ErrorHelpers.verifyParameter(C,"values"),b.ErrorHelpers.verifyEnumValue(D,u.FilterUpdateType,"Contract.FilterUpdateType"),!Array.isArray(C)&&!C.levels)throw new v.TableauError(f.ErrorCodes.InvalidParameter,"values parameter for applyHierarchicalFilterAsync must be an array or contain a levels key");return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").applyHierarchicalFilterAsync(this.visualId,w,C,D,I)},A.prototype.clearFilterAsync=function(w){return b.ErrorHelpers.verifyParameter(w,"fieldName"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").clearFilterAsync(this.visualId,w)},A.prototype.applyRelativeDateFilterAsync=function(w,C){return b.ErrorHelpers.verifyStringParameter(w,"fieldName"),b.ErrorHelpers.verifyParameter(C,"options"),b.ErrorHelpers.verifyEnumValue(C.periodType,f.PeriodType,"PeriodType"),b.ErrorHelpers.verifyEnumValue(C.rangeType,f.DateRangeType,"DateRangeType"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").applyRelativeDateFilterAsync(this.visualId,w,C)},A.prototype.getDataSourcesAsync=function(){var w=this;return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getDataSourcesAsync(this.visualId).then((function(C){var D=C,I=D.worksheetDataSchemaMap[w.name],M=[],k=I.primaryDataSource;M.push(w.createDataSourceFromInfo(D.dataSources[k]));for(var R=0,z=I.referencedDataSourceList;R<z.length;R++){var P=z[R];P!==k&&M.push(w.createDataSourceFromInfo(D.dataSources[P]))}return M}))},A.prototype.getFiltersAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("filter-service").getFiltersAsync(this.visualId)},A.prototype.getSelectedMarksAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getSelectedMarksAsync(this.visualId)},A.prototype.getHighlightedMarksAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getHighlightedMarksAsync(this.visualId)},A.prototype.getSummaryDataAsync=function(w){return this.verifyActiveSheet(),w=w||{},y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getUnderlyingDataAsync(this.visualId,g.GetDataType.Summary,!!w.ignoreAliases,!!w.ignoreSelection,!0,w.columnsToIncludeById||[],w.maxRows||0,w.includeDataValuesOption||f.IncludeDataValuesOption.AllValues)},A.prototype.getSummaryDataReaderAsync=function(w,C){return this.verifyActiveSheet(),C=C||{},y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getSummaryDataReaderAsync(this.visualId,w||this.getMaxPageRowLimit(),!!C.ignoreAliases,!!C.ignoreSelection,!0,C.columnsToIncludeById||[],C.includeDataValuesOption||f.IncludeDataValuesOption.AllValues)},A.prototype.getSummaryColumnsInfoAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getSummaryColumnsInfoAsync(this.visualId)},A.prototype.getUnderlyingDataAsync=function(w){return this.verifyActiveSheet(),w=w||{},y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getUnderlyingDataAsync(this.visualId,g.GetDataType.Underlying,!!w.ignoreAliases,!!w.ignoreSelection,!!w.includeAllColumns,w.columnsToIncludeById||[],w.maxRows||0,w.includeDataValuesOption||f.IncludeDataValuesOption.AllValues)},A.prototype.getUnderlyingTablesAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getUnderlyingTablesAsync(this.visualId).then((function(w){return w.map((function(C){return new p.LogicalTable(C)}))}))},A.prototype.getUnderlyingTableDataAsync=function(w,C){return this.verifyActiveSheet(),C=C||{},y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getUnderlyingTableDataAsync(this.visualId,w,!!C.ignoreAliases,!!C.ignoreSelection,!!C.includeAllColumns,C.columnsToIncludeById||[],C.maxRows||0,C.includeDataValuesOption||f.IncludeDataValuesOption.AllValues)},A.prototype.getUnderlyingTableDataReaderAsync=function(w,C,D){return this.verifyActiveSheet(),D=D||{},y.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getUnderlyingTableDataReaderAsync(this.visualId,w,C||this.getMaxPageRowLimit(),!!D.ignoreAliases,!!D.ignoreSelection,!!D.includeAllColumns,D.columnsToIncludeById||[],D.includeDataValuesOption||f.IncludeDataValuesOption.AllValues)},A.prototype.clearSelectedMarksAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("selection-service").clearSelectedMarksAsync(this.visualId)},A.prototype.selectMarksByValueAsync=function(w,C){return b.ErrorHelpers.verifyParameter(w,"fieldName"),b.ErrorHelpers.verifyEnumValue(C,f.SelectionUpdateType,"SelectionUpdateType"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("selection-service").selectMarksByValueAsync(this.visualId,w,C)},A.prototype.selectMarksByIdAsync=function(w,C){return b.ErrorHelpers.verifyParameter(w,"fieldName"),b.ErrorHelpers.verifyEnumValue(C,f.SelectionUpdateType,"SelectionUpdateType"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("selection-service").selectMarksByIdAsync(this.visualId,w,C)},A.prototype.annotateMarkAsync=function(w,C){return b.ErrorHelpers.verifyParameter(w,"mark"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("annotation-service").annotateMarkAsync(this.visualId,w,C)},A.prototype.getAnnotationsAsync=function(){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("annotation-service").getAnnotationsAsync(this.visualId)},A.prototype.removeAnnotationAsync=function(w){return b.ErrorHelpers.verifyParameter(w,"annotation"),this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("annotation-service").removeAnnotationAsync(this.visualId,w)},A.prototype.appendContextMenuAsync=function(w,C){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("external-context-menu-service").appendContextMenuAsync(this.visualId.worksheet,w,C)},A.prototype.removeContextMenuAsync=function(w,C){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("external-context-menu-service").removeContextMenuAsync(this.visualId.worksheet,w,C)},A.prototype.executeContextMenuAsync=function(w,C){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("external-context-menu-service").executeContextMenuAsync(this.visualId.worksheet,w,C)},A.prototype.renameContextMenuAsync=function(w,C,D){return this.verifyActiveSheet(),y.ApiServiceRegistry.get(this._registryId).getService("external-context-menu-service").renameContextMenuAsync(this.visualId.worksheet,w,C,D)},A.prototype.createDataSourceFromInfo=function(w){var C=new x.DataSourceImpl(w,this._registryId),D=new d.DataSource(C);return C.initializeWithPublicInterfaces(D),D},A.prototype.verifyActiveSheet=function(){var w=this.active,C=this.isInsideActiveDashboard(),D=this.isInsideActiveStoryPoint();if(!w&&!C&&!D)throw new v.TableauError(f.SharedErrorCodes.NotActiveSheet,"Operation not allowed on non-active sheet")},A.prototype.isInsideActiveStoryPoint=function(){return this._parentStoryPointImpl&&this._parentStoryPointImpl.active},A.prototype.isInsideActiveDashboard=function(){return this._parentDashboardImpl&&this._parentDashboardImpl.active},A})(a(1878).SheetImpl);o.WorksheetImpl=_},1110:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._logicalTable=l}return Object.defineProperty(s.prototype,"id",{get:function(){return this._logicalTable.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"caption",{get:function(){return this._logicalTable.caption},enumerable:!0,configurable:!0}),s})();o.LogicalTable=a},3416:function(i,o,a){var s,l=this&&this.__extends||(s=function(w,C){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,I){D.__proto__=I}||function(D,I){for(var M in I)I.hasOwnProperty(M)&&(D[M]=I[M])},s(w,C)},function(w,C){function D(){this.constructor=w}s(w,C),w.prototype=C===null?Object.create(C):(D.prototype=C.prototype,new D)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(9887),d=a(316),p=(function(){function w(C,D,I,M,k){this._worksheetName=C,this._fieldName=D,this._filterType=I,this._fieldId=M,this._registryId=k}return Object.defineProperty(w.prototype,"worksheetName",{get:function(){return this._worksheetName},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"fieldName",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"fieldId",{get:function(){return this._fieldId},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"filterType",{get:function(){return this._filterType},enumerable:!0,configurable:!0}),w.prototype.getFieldAsync=function(){return f.ApiServiceRegistry.get(this._registryId).getService("data-source-service").getFieldAsync(this._fieldId)},w.prototype.getAppliedWorksheetsAsync=function(){return f.ApiServiceRegistry.get(this._registryId).getService("filter-service").getAppliedWorksheetsAsync(this._worksheetName,this._fieldId)},w.prototype.setAppliedWorksheetsAsync=function(C){d.ErrorHelpers.verifyParameter(C,"applyToWorksheets");var D=new Set(C);return f.ApiServiceRegistry.get(this._registryId).getService("filter-service").setAppliedWorksheetsAsync(this._worksheetName,this._fieldName,this._fieldId,Array.from(D))},w})();o.Filter=p;var g=(function(w){function C(D,I,M,k,R,z,P,$){var N=w.call(this,D,I,k,M,R)||this;return N._appliedValues=z,N._isExcludeMode=P,N._isAllSelected=$,N}return l(C,w),Object.defineProperty(C.prototype,"isAllSelected",{get:function(){return this._isAllSelected},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"appliedValues",{get:function(){return this._appliedValues},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isExcludeMode",{get:function(){return this._isExcludeMode},enumerable:!0,configurable:!0}),C.prototype.getDomainAsync=function(D){return D||(D=u.FilterDomainType.Relevant),d.ErrorHelpers.verifyEnumValue(D,u.FilterDomainType,"FilterDomainType"),f.ApiServiceRegistry.get(this._registryId).getService("filter-service").getCategoricalDomainAsync(this._worksheetName,this._fieldId,D)},C})(p);o.CategoricalFilter=g;var y=(function(){function w(C,D,I){this._value=C,this._hierarchicalPath=D,this._level=I}return Object.defineProperty(w.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"hierarchicalPath",{get:function(){return this._hierarchicalPath},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"level",{get:function(){return this._level},enumerable:!0,configurable:!0}),w})();o.HierarchicalDataValue=y;var v=(function(){function w(C,D){this._name=C,this._levelSelectionState=D}return Object.defineProperty(w.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"levelSelectionState",{get:function(){return this._levelSelectionState},enumerable:!0,configurable:!0}),w})();o.HierarchicalLevelDetail=v;var b=(function(w){function C(D,I,M,k,R,z,P,$,N,L,B){var q=w.call(this,D,I,k,M,R)||this;return q._dimensionName=z,q._hierarchyCaption=P,q._numberOfLevels=$,q._levelDetails=N,q._appliedValues=L,q._isAllSelected=B,q}return l(C,w),C.prototype.getDomainAsync=function(D){throw new Error("Method not implemented.")},Object.defineProperty(C.prototype,"dimensionName",{get:function(){return this._dimensionName},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"hierarchyCaption",{get:function(){return this._hierarchyCaption},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"numberOfLevels",{get:function(){return this._numberOfLevels},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"levelDetails",{get:function(){return this._levelDetails},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"isAllSelected",{get:function(){return this._isAllSelected},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"appliedValues",{get:function(){return this._appliedValues},enumerable:!0,configurable:!0}),C})(p);o.HierarchicalFilter=b;var x=(function(w){function C(D,I,M,k,R,z,P,$){var N=w.call(this,D,I,k,M,R)||this;return N._min=z,N._max=P,N._includeNullValues=$,N}return l(C,w),Object.defineProperty(C.prototype,"minValue",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"maxValue",{get:function(){return this._max},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"includeNullValues",{get:function(){return this._includeNullValues},enumerable:!0,configurable:!0}),C.prototype.getDomainAsync=function(D){var I=f.ApiServiceRegistry.get(this._registryId).getService("filter-service");return D||(D=u.FilterDomainType.Relevant),d.ErrorHelpers.verifyEnumValue(D,u.FilterDomainType,"FilterDomainType"),I.getRangeDomainAsync(this._worksheetName,this._fieldId,D)},C})(p);o.RangeFilter=x;var _=(function(w){function C(D,I,M,k,R,z,P,$,N){var L=w.call(this,D,I,k,M,R)||this;return L._anchorDate=z,L._periodType=P,L._rangeType=$,L._rangeN=N,L}return l(C,w),Object.defineProperty(C.prototype,"anchorDate",{get:function(){return this._anchorDate},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"periodType",{get:function(){return this._periodType},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"rangeType",{get:function(){return this._rangeType},enumerable:!0,configurable:!0}),Object.defineProperty(C.prototype,"rangeN",{get:function(){return this._rangeN},enumerable:!0,configurable:!0}),C})(p);o.RelativeDateFilter=_;var T=(function(){function w(C,D){this._values=C,this._domainType=D}return Object.defineProperty(w.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"type",{get:function(){return this._domainType},enumerable:!0,configurable:!0}),w})();o.CategoricalDomain=T;var A=(function(){function w(C,D,I){this._min=C,this._max=D,this._domainType=I}return Object.defineProperty(w.prototype,"type",{get:function(){return this._domainType},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"min",{get:function(){return this._min},enumerable:!0,configurable:!0}),Object.defineProperty(w.prototype,"max",{get:function(){return this._max},enumerable:!0,configurable:!0}),w})();o.RangeDomain=A},4284:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function f(d,p,g,y,v,b){this._data=d,this._columns=p,this._totalRowCount=g,this._isTotalRowCountLimited=y,this._isSummaryData=v,this._marksInfo=b,this._name=v?"Summary Data Table":"Underlying Data Table"}return Object.defineProperty(f.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"data",{get:function(){return this._data},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"columns",{get:function(){return this._columns},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"marksInfo",{get:function(){return this._marksInfo},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"totalRowCount",{get:function(){return this._totalRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isTotalRowCountLimited",{get:function(){return this._isTotalRowCountLimited},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isSummaryData",{get:function(){return this._isSummaryData},enumerable:!0,configurable:!0}),f})();o.DataTable=a;var s=(function(){function f(d,p,g){this._type=d,this._color=p,this._tupleId=g}return Object.defineProperty(f.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"color",{get:function(){return this._color},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"tupleId",{get:function(){return this._tupleId},enumerable:!0,configurable:!0}),f})();o.MarkInfo=s;var l=(function(){function f(d,p,g,y,v){this._fieldName=d,this._fieldId=p,this._dataType=g,this._isReferenced=y,this._index=v}return Object.defineProperty(f.prototype,"fieldName",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fieldId",{get:function(){return this._fieldId},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"dataType",{get:function(){return this._dataType},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"isReferenced",{get:function(){return this._isReferenced},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),f})();o.Column=l;var u=(function(){function f(d,p,g){this._value=d,this._nativeValue=p,this._formattedValue=g}return Object.defineProperty(f.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"nativeValue",{get:function(){return this._nativeValue},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"formattedValue",{get:function(){return this._formattedValue},enumerable:!0,configurable:!0}),f})();o.DataValue=u},2513:function(i,o,a){var s=this&&this.__awaiter||function(p,g,y,v){return new(y||(y=Promise))((function(b,x){function _(w){try{A(v.next(w))}catch(C){x(C)}}function T(w){try{A(v.throw(w))}catch(C){x(C)}}function A(w){var C;w.done?b(w.value):(C=w.value,C instanceof y?C:new y((function(D){D(C)}))).then(_,T)}A((v=v.apply(p,g||[])).next())}))},l=this&&this.__generator||function(p,g){var y,v,b,x,_={label:0,sent:function(){if(1&b[0])throw b[1];return b[1]},trys:[],ops:[]};return x={next:T(0),throw:T(1),return:T(2)},typeof Symbol=="function"&&(x[Symbol.iterator]=function(){return this}),x;function T(A){return function(w){return(function(C){if(y)throw new TypeError("Generator is already executing.");for(;_;)try{if(y=1,v&&(b=2&C[0]?v.return:C[0]?v.throw||((b=v.return)&&b.call(v),0):v.next)&&!(b=b.call(v,C[1])).done)return b;switch(v=0,b&&(C=[2&C[0],b.value]),C[0]){case 0:case 1:b=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,v=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(!((b=(b=_.trys).length>0&&b[b.length-1])||C[0]!==6&&C[0]!==2)){_=0;continue}if(C[0]===3&&(!b||C[1]>b[0]&&C[1]<b[3])){_.label=C[1];break}if(C[0]===6&&_.label<b[1]){_.label=b[1],b=C;break}if(b&&_.label<b[2]){_.label=b[2],_.ops.push(C);break}b[2]&&_.ops.pop(),_.trys.pop();continue}C=g.call(p,_)}catch(D){C=[6,D],v=0}finally{y=b=0}if(5&C[0])throw C[1];return{value:C[0]?C[1]:void 0,done:!0}})([A,w])}}};Object.defineProperty(o,"__esModule",{value:!0});var u=a(9887),f=a(316),d=(function(){function p(g,y,v,b){this._id=g,this._totalRowCount=y,this._pageRowCount=v,this._registryId=b,this._pageCount=Math.ceil(y/v)}return Object.defineProperty(p.prototype,"totalRowCount",{get:function(){return this._totalRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"pageCount",{get:function(){return this._pageCount},enumerable:!0,configurable:!0}),p.prototype.getPageAsync=function(g){return f.ErrorHelpers.verifyRange(g,0,this._pageCount),u.ApiServiceRegistry.get(this._registryId).getService("get-data-service").getPageAsync(this._id,g,this._pageRowCount)},p.prototype.getAllPagesAsync=function(g){return s(this,void 0,void 0,(function(){var y,v,b,x,_,T,A,w,C,D;return l(this,(function(I){switch(I.label){case 0:return[4,this.getPageAsync(0)];case 1:y=I.sent(),g=g||this.totalRowCount,v=Math.min(g,this.totalRowCount),b=Math.ceil(v/this._pageRowCount),x=Math.min(b,400),_=x<b,T=[],A=1,I.label=2;case 2:return A<x?[4,this.getPageAsync(A)]:[3,5];case 3:w=I.sent(),T.push(w.data),I.label=4;case 4:return A++,[3,2];case 5:return(C=(D=y.data).concat.apply(D,T)).length=v,[2,{name:y.name,data:C,columns:y.columns,totalRowCount:_?x*this._pageRowCount:v,isTotalRowCountLimited:_,isSummaryData:y.isSummaryData}]}}))}))},p.prototype.releaseAsync=function(){return u.ApiServiceRegistry.get(this._registryId).getService("get-data-service").releaseAsync(this._id)},p})();o.DataTableReader=d},1426:function(i,o){var a,s=this&&this.__extends||(a=function(g,y){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var x in b)b.hasOwnProperty(x)&&(v[x]=b[x])},a(g,y)},function(g,y){function v(){this.constructor=g}a(g,y),g.prototype=y===null?Object.create(y):(v.prototype=y.prototype,new v)});Object.defineProperty(o,"__esModule",{value:!0});var l=function(){};o.SelectionModel=l;var u=(function(g){function y(){var v=g!==null&&g.apply(this,arguments)||this;return v.selectValues=[],v}return s(y,g),y})(l);o.ValueSelectionModel=u;var f=(function(g){function y(){return g!==null&&g.apply(this,arguments)||this}return s(y,g),y})(u);o.HierarchicalSelectionModel=f;var d=(function(g){function y(){return g!==null&&g.apply(this,arguments)||this}return s(y,g),y})(l);o.RangeSelectionModel=d;var p=(function(g){function y(){return g!==null&&g.apply(this,arguments)||this}return s(y,g),y})(u);o.DimensionSelectionModel=p,o.TupleSelectionModel=function(){this.objectIds=[]},o.SelectionModelsContainer=function(){this.hierModelArr=[],this.dimModelArr=[],this.quantModelArr=[]}},2391:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l,u){this._x=l,this._y=u}return Object.defineProperty(s.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),s})();o.Point=a},850:(i,o)=>{var a;Object.defineProperty(o,"__esModule",{value:!0}),(a=o.GetDataType||(o.GetDataType={})).Summary="summary",a.Underlying="underlying"},7458:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(8929),l=a(903),u=a(194),f=a(2429),d=a(879),p=a(5210),g=a(2294),y=a(7658),v=a(7132),b=a(8226),x=a(8434),_=a(8009),T=a(9887);o.registerAllSharedServices=function(A,w,C){T.ApiServiceRegistry.get(w).registerService(new s.AnimationServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new u.DataSourceServiceImpl(A,w,C)),T.ApiServiceRegistry.get(w).registerService(new p.GetDataServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new d.FilterServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new g.NotificationServiceImpl(A)),T.ApiServiceRegistry.get(w).registerService(new y.ParametersServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new v.SelectionServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new l.AnnotationServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new _.ZoneServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new b.SizeServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new x.VizServiceImpl(A,w)),T.ApiServiceRegistry.get(w).registerService(new f.ExternalContextMenuServiceImpl(A,w))}},9887:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554);window.__tableauApiServiceRegistry=window.__tableauApiServiceRegistry||{};var u=(function(){function d(){this._services={}}return d.prototype.registerService=function(p){this._services[p.serviceName]=p},d.prototype.getService=function(p){if(!this._services.hasOwnProperty(p))throw new l.TableauError(s.ErrorCodes.InternalError,"Service not registered: "+p);return this._services[p]},d})(),f=(function(){function d(){}return d.get=function(p){if(window.__tableauApiServiceRegistry&&window.__tableauApiServiceRegistry[p]||d.setInstance(p,new u),!window.__tableauApiServiceRegistry[p])throw new l.TableauError(s.ErrorCodes.InternalError,"Service registry failed");return window.__tableauApiServiceRegistry[p]},d.setInstance=function(p,g){window.__tableauApiServiceRegistry||(window.__tableauApiServiceRegistry={}),window.__tableauApiServiceRegistry[p]=g},d.clearRegistry=function(){window.__tableauApiServiceRegistry={}},d})();o.ApiServiceRegistry=f},8929:function(i,o,a){var s,l=this&&this.__extends||(s=function(y,v){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var _ in x)x.hasOwnProperty(_)&&(b[_]=x[_])},s(y,v)},function(y,v){function b(){this.constructor=y}s(y,v),y.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(2336),p=a(316),g=(function(y){function v(){return y!==null&&y.apply(this,arguments)||this}return l(v,y),Object.defineProperty(v.prototype,"serviceName",{get:function(){return"animation-service"},enumerable:!0,configurable:!0}),v.prototype.replayAsync=function(b){var x,_=((x={})[f.ParameterId.ReplaySpeed]=1,x);return p.ErrorHelpers.verifyEnumValue(b,u.ReplaySpeedType,"ReplaySpeedType"),_[f.ParameterId.ReplaySpeed]=d.ExternalToInternalEnumMappings.setReplaySpeedType.convert(b),this.execute(f.VerbId.ReplayAnimation,_).then((function(T){}))},v})(a(1167).ServiceImplBase);o.AnimationServiceImpl=g},903:function(i,o,a){var s,l=this&&this.__extends||(s=function(v,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,_){x.__proto__=_}||function(x,_){for(var T in _)_.hasOwnProperty(T)&&(x[T]=_[T])},s(v,b)},function(v,b){function x(){this.constructor=v}s(v,b),v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(5126),p=a(1426),g=a(1554),y=(function(v){function b(){return v!==null&&v.apply(this,arguments)||this}return l(b,v),Object.defineProperty(b.prototype,"serviceName",{get:function(){return"annotation-service"},enumerable:!0,configurable:!0}),b.prototype.annotateMarkAsync=function(x,_,T){var A,w=this.parseMarkSelectionIds([_]),C="<formatted-text><run>"+T+"</run></formatted-text>",D=((A={})[f.ParameterId.FunctionName]="annotateMarkAsync",A[f.ParameterId.VisualId]=x,A[f.ParameterId.AnnotateEnum]=f.AnnotateEnum.Mark,A[f.ParameterId.TargetPoint]={x:0,y:0},A[f.ParameterId.SelectionList]=[w.selection],A[f.ParameterId.FormattedText]=C,A);return this.execute(f.VerbId.CreateAnnotation,D).then((function(I){}))},b.prototype.getAnnotationsAsync=function(x){var _,T=this,A=((_={})[f.ParameterId.FunctionName]="getAnnotationsAsync",_[f.ParameterId.VisualId]=x,_);return this.execute(f.VerbId.GetAnnotations,A).then((function(w){var C=w.result;return T.annotationFilterMap(C)}))},b.prototype.removeAnnotationAsync=function(x,_){var T,A=this.parseAnnotationSelectionIds([_]),w=((T={})[f.ParameterId.FunctionName]="removeAnnotationAsync",T[f.ParameterId.VisualId]=x,T[f.ParameterId.SelectionList]=[A.selection],T);return this.execute(f.VerbId.RemoveAnnotation,w).then((function(C){}))},b.prototype.parseMarkSelectionIds=function(x){var _=[],T=new p.SelectionModelsContainer;if(x.forEach((function(w){var C=w.tupleId;if(!(C!=null&&C>0))throw new g.TableauError(u.ErrorCodes.InternalError,"invalid tupleId");_.push(C.toString())})),_.length!==0){var A=new p.TupleSelectionModel;A.selectionType="tuples",A.objectIds=_,T.selection=A}return T},b.prototype.parseAnnotationSelectionIds=function(x){var _=[],T=new p.SelectionModelsContainer;if(x.forEach((function(w){var C=w.annotationId;if(!(C!=null&&C>=0))throw new g.TableauError(u.ErrorCodes.InternalError,"invalid annotationId");_.push(C.toString())})),_.length!==0){var A=new p.TupleSelectionModel;A.selectionType="annotations",A.objectIds=_,T.selection=A}return T},b.prototype.mapAnnotation=function(x){return{annotationHTML:x.annotationText,annotationId:x.annotationId,annotationText:x.annotationPlainText,annotationType:d.InternalToExternalEnumMappings.annotationType.convert(x.annotateEnum),tupleId:x.tupleId}},b.prototype.annotationFilterMap=function(x){var _=this;return x.map((function(T){return _.mapAnnotation(T)}))},b})(a(1167).ServiceImplBase);o.AnnotationServiceImpl=y},6292:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=(function(d){function p(){return d!==null&&d.apply(this,arguments)||this}return l(p,d),Object.defineProperty(p.prototype,"serviceName",{get:function(){return"client-info-service"},enumerable:!0,configurable:!0}),p.prototype.getClientInfoAsync=function(){var g,y=u.VerbId.GetEmbeddingClientInfo,v=((g={})[u.ParameterId.FunctionName]="getClientInfoAsync",g);return this.execute(y,v).then((function(b){return b.result}))},p})(a(1167).ServiceImplBase);o.ClientInfoServiceImpl=f},194:function(i,o,a){var s,l=this&&this.__extends||(s=function(A,w){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(C,D){C.__proto__=D}||function(C,D){for(var I in D)D.hasOwnProperty(I)&&(C[I]=D[I])},s(A,w)},function(A,w){function C(){this.constructor=A}s(A,w),A.prototype=w===null?Object.create(w):(C.prototype=w.prototype,new C)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(4695),p=a(6411),g=a(2131),y=a(1234),v=a(8695),b=a(1554),x=a(1167);o.SENTINEL_LOGICAL_TABLE_INFO={id:f.ApiShowDataTableSentinel.SingleTableId,caption:f.ApiShowDataTableSentinel.SingleTableCaption};var _={major:1,minor:20,fix:1},T=(function(A){function w(C,D,I){I===void 0&&(I=_);var M=A.call(this,C,D)||this;return M._platformVersion=I,M}return l(w,A),Object.defineProperty(w.prototype,"serviceName",{get:function(){return"data-source-service"},enumerable:!0,configurable:!0}),w.prototype.refreshAsync=function(C){var D,I=((D={})[d.ParameterId.FunctionName]="refreshAsync",D[d.ParameterId.DeltaTimeMs]=0,D[d.ParameterId.ShouldRefreshDS]=!0,D);return C&&(I[d.ParameterId.DataSourceId]=C),this.execute(d.VerbId.RefreshDataSource,I).then((function(M){}))},w.prototype.getActiveTablesAsync=function(C){var D,I=((D={})[d.ParameterId.FunctionName]="getActiveTablesAsync",D[d.ParameterId.DataSourceId]=C,D);return this.execute(d.VerbId.GetActiveTables,I).then((function(M){var k=M.result;if(k.tables.length===0)throw new b.TableauError(u.ErrorCodes.UnsupportedMethodForDataSourceType,"getActiveTables is not supported for: "+C);return k.tables}))},w.prototype.getDataSourcesAsync=function(C){var D,I=((D={})[d.ParameterId.FunctionName]="getDataSourcesAsync",D[d.ParameterId.VisualId]=C,D);return this.execute(d.VerbId.GetDataSources,I).then((function(M){return M.result}))},w.prototype.getAllDataSourcesAsync=function(){var C,D=((C={})[d.ParameterId.FunctionName]="getAllDataSourcesAsync",C);return this.execute(d.VerbId.GetAllDataSources,D).then((function(I){return I.result}))},w.prototype.getConnectionSummariesAsync=function(C){var D,I=((D={})[d.ParameterId.FunctionName]="getConnectionSummariesAsync",D[d.ParameterId.DataSourceId]=C,D);return this.execute(d.VerbId.GetConnectionDescriptionSummaries,I).then((function(M){return M.result}))},w.prototype.getFieldAsync=function(C){var D,I=this,M=d.VerbId.GetFieldAndDataSource,k=((D={})[d.ParameterId.FunctionName]="getFieldAsync",D[d.ParameterId.FieldId]=C,D);return this.execute(M,k).then((function(R){var z=R.result[d.ParameterId.DataSource],P=R.result[d.ParameterId.Field];return I.convertField(P,I.convertDataSource(z))}))},w.prototype.getLogicalTablesAsync=function(C){var D;if(!this.isObjectModelSupportedByPlatform())return new Promise((function(M){return M([o.SENTINEL_LOGICAL_TABLE_INFO])}));var I=((D={})[d.ParameterId.FunctionName]="getLogicalTablesAsync",D[d.ParameterId.DataSourceId]=C,D);return this.execute(d.VerbId.GetLogicalTables,I).then((function(M){return M.result}))},w.prototype.getUnderlyingTablesAsync=function(C){var D;if(!this.isObjectModelSupportedByPlatform())return new Promise((function(M){return M([o.SENTINEL_LOGICAL_TABLE_INFO])}));var I=((D={})[d.ParameterId.FunctionName]="getUnderlyingTablesAsync",D[d.ParameterId.VisualId]=C,D);return this.execute(d.VerbId.GetUnderlyingTables,I).then((function(M){return M.result}))},w.prototype.convertField=function(C,D){return new g.Field(new v.FieldImpl(C,D))},w.prototype.convertDataSource=function(C){return new p.DataSource(new y.DataSourceImpl(C,this._registryId))},w.prototype.isObjectModelSupportedByPlatform=function(){return f.VersionLessThan({major:1,minor:13,fix:0},this._platformVersion)},w})(x.ServiceImplBase);o.DataSourceServiceImpl=T},2429:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=(function(d){function p(){return d!==null&&d.apply(this,arguments)||this}return l(p,d),Object.defineProperty(p.prototype,"serviceName",{get:function(){return"external-context-menu-service"},enumerable:!0,configurable:!0}),p.prototype.appendContextMenuAsync=function(g,y,v){var b,x=u.VerbId.AppendExternalMenuItem,_=((b={})[u.ParameterId.FunctionName]="appendContextMenuAsync",b[u.ParameterId.WorksheetName]=g,b[u.ParameterId.ExternalMenuItemDisplayName]=v.displayName,b);return this.execute(x,_).then((function(T){return T.result}))},p.prototype.removeContextMenuAsync=function(g,y,v){var b,x=u.VerbId.RemoveExternalMenuItem,_=((b={})[u.ParameterId.FunctionName]="removeContextMenuAsync",b[u.ParameterId.WorksheetName]=g,b[u.ParameterId.ExternalMenuItemId]=v,b);return this.execute(x,_).then((function(T){}))},p.prototype.executeContextMenuAsync=function(g,y,v){var b,x=u.VerbId.ExecuteExternalMenuItem,_=((b={})[u.ParameterId.FunctionName]="executeContextMenuAsync",b[u.ParameterId.WorksheetName]=g,b[u.ParameterId.ExternalMenuItemId]=v,b);return this.execute(x,_).then((function(T){}))},p.prototype.renameContextMenuAsync=function(g,y,v,b){var x,_=u.VerbId.RenameExternalMenu,T=((x={})[u.ParameterId.FunctionName]="renameContextMenuAsync",x[u.ParameterId.WorksheetName]=g,x[u.ParameterId.ExternalMenuHeader]=v,x[u.ParameterId.ExternalMenuDescription]=b,x);return this.execute(_,T).then((function(A){}))},p})(a(1167).ServiceImplBase);o.ExternalContextMenuServiceImpl=f},879:function(i,o,a){var s,l=this&&this.__extends||(s=function(w,C){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,I){D.__proto__=I}||function(D,I){for(var M in I)I.hasOwnProperty(M)&&(D[M]=I[M])},s(w,C)},function(w,C){function D(){this.constructor=w}s(w,C),w.prototype=C===null?Object.create(C):(D.prototype=C.prototype,new D)}),u=this&&this.__awaiter||function(w,C,D,I){return new(D||(D=Promise))((function(M,k){function R($){try{P(I.next($))}catch(N){k(N)}}function z($){try{P(I.throw($))}catch(N){k(N)}}function P($){var N;$.done?M($.value):(N=$.value,N instanceof D?N:new D((function(L){L(N)}))).then(R,z)}P((I=I.apply(w,C||[])).next())}))},f=this&&this.__generator||function(w,C){var D,I,M,k,R={label:0,sent:function(){if(1&M[0])throw M[1];return M[1]},trys:[],ops:[]};return k={next:z(0),throw:z(1),return:z(2)},typeof Symbol=="function"&&(k[Symbol.iterator]=function(){return this}),k;function z(P){return function($){return(function(N){if(D)throw new TypeError("Generator is already executing.");for(;R;)try{if(D=1,I&&(M=2&N[0]?I.return:N[0]?I.throw||((M=I.return)&&M.call(I),0):I.next)&&!(M=M.call(I,N[1])).done)return M;switch(I=0,M&&(N=[2&N[0],M.value]),N[0]){case 0:case 1:M=N;break;case 4:return R.label++,{value:N[1],done:!1};case 5:R.label++,I=N[1],N=[0];continue;case 7:N=R.ops.pop(),R.trys.pop();continue;default:if(!((M=(M=R.trys).length>0&&M[M.length-1])||N[0]!==6&&N[0]!==2)){R=0;continue}if(N[0]===3&&(!M||N[1]>M[0]&&N[1]<M[3])){R.label=N[1];break}if(N[0]===6&&R.label<M[1]){R.label=M[1],M=N;break}if(M&&R.label<M[2]){R.label=M[2],R.ops.push(N);break}M[2]&&R.ops.pop(),R.trys.pop();continue}N=C.call(w,R)}catch(L){N=[6,L],I=0}finally{D=M=0}if(5&N[0])throw N[1];return{value:N[0]?N[1]:void 0,done:!0}})([P,$])}}};Object.defineProperty(o,"__esModule",{value:!0});var d=a(1750),p=a(4695),g=a(4695),y=a(4007),v=a(2336),b=a(5126),x=a(3416),_=a(8175),T=a(6077),A=(function(w){function C(){return w!==null&&w.apply(this,arguments)||this}return l(C,w),Object.defineProperty(C.prototype,"serviceName",{get:function(){return"filter-service"},enumerable:!0,configurable:!0}),C.prototype.applyFilterAsync=function(D,I,M,k,R){var z,P=g.VerbId.ApplyCategoricalFilter,$=((z={})[g.ParameterId.FunctionName]="applyFilterAsync",z);if($[g.ParameterId.VisualId]=D,$[g.ParameterId.FieldName]=I,!Array.isArray(M))throw new y.TableauError(d.ErrorCodes.InvalidParameter,"values parameter for applyFilterAsync must be an array");return $[g.ParameterId.FilterValues]=M,$[g.ParameterId.FilterUpdateType]=v.ExternalToInternalEnumMappings.filterUpdateType.convert(k),$[g.ParameterId.IsExcludeMode]=R!==void 0&&R.isExcludeMode!==void 0&&R.isExcludeMode,this.execute(P,$).then((function(N){return I}))},C.prototype.applyRangeFilterAsync=function(D,I,M){var k,R=this,z=g.VerbId.ApplyRangeFilter,P=((k={})[g.ParameterId.FunctionName]="applyRangeFilterAsync",k);if(M.min!==void 0&&M.min!==null){var $;$=M.min instanceof Date?T.Param.serializeDateForPlatform(M.min):M.min,P[g.ParameterId.FilterRangeMin]=$}if(M.max!==void 0&&M.max!==null){var N;N=M.max instanceof Date?T.Param.serializeDateForPlatform(M.max):M.max,P[g.ParameterId.FilterRangeMax]=N}return M.nullOption&&(P[g.ParameterId.FilterRangeNullOption]=v.ExternalToInternalEnumMappings.nullOptions.convert(M.nullOption)),P[g.ParameterId.FieldName]=I,P[g.ParameterId.VisualId]=D,this.execute(z,P).then((function(L){return R.apiFilterHandlerCheckForCommandError(L.result),I}))},C.prototype.applyHierarchicalFilterAsync=function(D,I,M,k,R){var z,P=g.VerbId.HierarchicalFilter,$=((z={})[g.ParameterId.FunctionName]="applyHierarchicalFilterAsync",z);$[g.ParameterId.VisualId]=D,$[g.ParameterId.FieldName]=I;var N=M.levels;return Array.isArray(N)&&N.length>0?$[g.ParameterId.FilterLevels]=N:M.length>0?$[g.ParameterId.FilterValues]=M:$[g.ParameterId.FilterLevels]=[],$[g.ParameterId.FilterUpdateType]=v.ExternalToInternalEnumMappings.filterUpdateType.convert(k),$[g.ParameterId.IsExcludeMode]=R&&!!R.isExcludeMode,this.execute(P,$).then((function(L){return I}))},C.prototype.clearFilterAsync=function(D,I){var M,k=g.VerbId.ClearFilter,R=((M={})[g.ParameterId.FunctionName]="clearFilterAsync",M);return R[g.ParameterId.VisualId]=D,R[g.ParameterId.FieldName]=I,this.execute(k,R).then((function(z){return I}))},C.prototype.applyRelativeDateFilterAsync=function(D,I,M){var k,R=g.VerbId.ApplyRelativeDateFilter,z=((k={})[g.ParameterId.FunctionName]="applyRelativeDateFilterAsync",k);if(z[g.ParameterId.VisualId]=D,z[g.ParameterId.FieldName]=I,z[g.ParameterId.PeriodType]=v.ExternalToInternalEnumMappings.periodType.convert(M.periodType),z[g.ParameterId.DateRangeType]=v.ExternalToInternalEnumMappings.dateRangeType.convert(M.rangeType),M.rangeType===d.DateRangeType.LastN||M.rangeType===d.DateRangeType.NextN){if(M.rangeN===void 0||M.rangeN===null)throw new y.TableauError(d.EmbeddingErrorCodes.MissingRangeNForRelativeDateFilters,"Missing rangeN field for a relative date filter of LASTN or NEXTN.");z[g.ParameterId.RangeN]=M.rangeN}return M.anchorDate!==void 0&&M.anchorDate!==null&&(z[g.ParameterId.AnchorDate]=this.convertAnchorDate(M.anchorDate)),this.execute(R,z).then((function(P){return P.result}))},C.prototype.getFiltersAsync=function(D){var I,M=this,k=g.VerbId.GetFilters,R=((I={})[g.ParameterId.FunctionName]="getFiltersAsync",I);return R[g.ParameterId.VisualId]=D,this.execute(k,R).then((function(z){var P=z.result;return M.convertDomainFilters(P)}))},C.prototype.getCategoricalDomainAsync=function(D,I,M){var k,R=this,z=g.VerbId.GetCategoricalDomain,P=((k={})[g.ParameterId.FunctionName]="getCategoricalDomainAsync",k);return P[g.ParameterId.VisualId]={worksheet:D},P[g.ParameterId.FieldId]=I,P[g.ParameterId.DomainType]=v.ExternalToInternalEnumMappings.filterDomainType.convert(M),this.execute(z,P).then((function($){var N=$.result;return R.convertCategoricalDomain(N,M)}))},C.prototype.getRangeDomainAsync=function(D,I,M){var k,R=this,z=g.VerbId.GetRangeDomain,P=((k={})[g.ParameterId.FunctionName]="getRangeDomainAsync",k);return P[g.ParameterId.VisualId]={worksheet:D},P[g.ParameterId.FieldId]=I,P[g.ParameterId.DomainType]=v.ExternalToInternalEnumMappings.filterDomainType.convert(M),this.execute(z,P).then((function($){var N=$.result;return R.convertRangeDomain(N,M)}))},C.prototype.getDashboardFiltersAsync=function(){var D,I=this,M=g.VerbId.GetDashboardFilters,k=((D={})[g.ParameterId.FunctionName]="getDashboardFiltersAsync",D);return this.execute(M,k).then((function(R){var z=R.result;return I.convertDomainFilters(z)}))},C.prototype.applyDashboardFilterAsync=function(D,I,M,k){var R,z=g.VerbId.DashboardCategoricalFilter,P=((R={})[g.ParameterId.FunctionName]="applyDashboardFilterAsync",R);return P[g.ParameterId.FieldName]=D,P[g.ParameterId.FilterValues]=I,P[g.ParameterId.FilterUpdateType]=v.ExternalToInternalEnumMappings.filterUpdateType.convert(M),P[g.ParameterId.IsExcludeMode]=k&&!!k.isExcludeMode,this.execute(z,P).then((function($){return $.result}))},C.prototype.getAppliedWorksheetsAsync=function(D,I){var M;return u(this,void 0,void 0,(function(){var k,R;return f(this,(function(z){switch(z.label){case 0:return[4,this.executeGetAppliedWorksheets(D,I,"getAppliedWorksheetsAsync")];case 1:return k=z.sent(),R=[],(M=k.worksheets)===null||M===void 0||M.map((function(P){P.isSelected&&R.push(P.worksheetName)})),[2,R]}}))}))},C.prototype.setAppliedWorksheetsAsync=function(D,I,M,k){return u(this,void 0,void 0,(function(){var R,z,P,$,N;return f(this,(function(L){switch(L.label){case 0:return[4,this.executeGetAppliedWorksheets(D,M,"getAppliedWorksheetsAsyncInternal")];case 1:if(!(R=L.sent())||!R.worksheets)throw new y.TableauError(d.SharedErrorCodes.InternalError,"This filter does not apply to multiple worksheets");if(z=[],P="",R.worksheets.forEach((function(B){B.isActive&&(P=B.worksheetName),(B.isSelected||B.isEnabled)&&z.push(B.worksheetName)})),P==="")throw new y.TableauError(d.SharedErrorCodes.InternalError,"No active worksheet");if(!k.includes(P))throw new y.TableauError(d.SharedErrorCodes.InternalError,P+" must be included in the applied worksheets");return k.forEach((function(B){if(!z.includes(B))throw new y.TableauError(d.SharedErrorCodes.InternalError,"The field "+I+" isn't applicable to the worksheet "+B)})),$=g.VerbId.ChangeSharedFilter,(N={})[g.ParameterId.FunctionName]="setAppliedWorksheetsAsync",N[g.ParameterId.VisualId]={worksheet:D},N[g.ParameterId.FieldId]=M,N[g.ParameterId.SharedFilterSheets]=k,[2,this.execute($,N).then((function(B){return k}))]}}))}))},C.prototype.executeGetAppliedWorksheets=function(D,I,M){var k=g.VerbId.GetSharedFilter,R={};return R[g.ParameterId.FunctionName]=M,R[g.ParameterId.VisualId]={worksheet:D},R[g.ParameterId.FieldId]=I,this.execute(k,R).then((function(z){return z.result}))},C.prototype.convertDomainFilters=function(D){var I=this,M=[];return D.forEach((function(k){switch(k.filterType){case g.FilterType.Categorical:if(!(R=k))throw new Error("Invalid Categorical Filter");M.push(I.convertCategoricalFilter(R));break;case g.FilterType.Hierarchical:if(!(R=k))throw new Error("Invalid Hierarchical Filter");M.push(I.convertHierarchicalFilter(R));break;case g.FilterType.Range:if(!(R=k))throw new Error("Invalid Range Filter");M.push(I.convertRangeFilter(R));break;case g.FilterType.RelativeDate:var R;if(!(R=k))throw new Error("Invalid Relative Date Filter");M.push(I.convertRelativeDateFilter(R))}})),M},C.prototype.convertCategoricalFilter=function(D){var I=D.values.map((function(M){return _.DataValueFactory.MakeFilterDataValue(M)}));return new x.CategoricalFilter(D.visualId.worksheet,D.fieldCaption,D.fieldName,g.FilterType.Categorical,this._registryId,I,D.isExclude,D.isAllSelected)},C.prototype.convertHierarchicalFilter=function(D){var I=D.values.map((function(k){return new x.HierarchicalDataValue(_.DataValueFactory.MakeFilterDataValue(k.value),k.hierarchicalPath,k.level)})),M=D.levelInfo.map((function(k){return new x.HierarchicalLevelDetail(k.name,b.InternalToExternalEnumMappings.hierarchicalLevelSelectionState.convert(k.levelSelectionState))}));return new x.HierarchicalFilter(D.visualId.worksheet,D.fieldCaption,D.fieldName,g.FilterType.Hierarchical,this._registryId,D.dimensionName,D.hierarchyCaption,D.levels,M,I,D.isAllSelected)},C.prototype.convertRangeFilter=function(D){var I=_.DataValueFactory.MakeFilterDataValue(D.min),M=_.DataValueFactory.MakeFilterDataValue(D.max);return new x.RangeFilter(D.visualId.worksheet,D.fieldCaption,D.fieldName,g.FilterType.Range,this._registryId,I,M,D.includeNullValues)},C.prototype.convertRelativeDateFilter=function(D){var I=_.DataValueFactory.MakeFilterDataValue(D.anchorDate);return new x.RelativeDateFilter(D.visualId.worksheet,D.fieldCaption,D.fieldName,d.FilterType.RelativeDate,this._registryId,I,b.InternalToExternalEnumMappings.dateStepPeriod.convert(D.periodType),b.InternalToExternalEnumMappings.dateRangeType.convert(D.rangeType),D.rangeN)},C.prototype.convertCategoricalDomain=function(D,I){var M=D.values.map((function(k){return _.DataValueFactory.MakeFilterDataValue(k)}));return new x.CategoricalDomain(M,I)},C.prototype.convertRangeDomain=function(D,I){var M=_.DataValueFactory.MakeFilterDataValue(D.min),k=_.DataValueFactory.MakeFilterDataValue(D.max);return new x.RangeDomain(M,k,I)},C.prototype.convertAnchorDate=function(D){var I=D.getUTCFullYear(),M=D.getUTCMonth()+1,k=D.getUTCDate(),R=D.getUTCHours(),z=D.getUTCMinutes(),P=D.getUTCSeconds();if(isNaN(I)||isNaN(M)||isNaN(k)||isNaN(R)||isNaN(z)||isNaN(P))throw new y.TableauError(d.EmbeddingErrorCodes.InvalidDateParameter,"Invalid date parameter: anchorDate");return I+"-"+M+"-"+k+" "+R+":"+z+":"+P},C.prototype.apiFilterHandlerCheckForCommandError=function(D){if(D[p.ParameterId.ParameterError])throw D[p.ParameterId.InvalidFieldCaption]?new y.TableauError(d.SharedErrorCodes.InvalidFilterFieldName,D[p.ParameterId.InvalidFieldCaption]):D[p.ParameterId.InvalidValues]?new y.TableauError(d.SharedErrorCodes.InvalidFilterFieldValue,D[p.ParameterId.InvalidValues]):D[p.ParameterId.InvalidAggFieldName]?new y.TableauError(d.SharedErrorCodes.InvalidAggregationFieldName,D[p.ParameterId.InvalidAggFieldName]):new y.TableauError(d.SharedErrorCodes.ServerError,"Server Error")},C})(a(1167).ServiceImplBase);o.FilterServiceImpl=A},5210:function(i,o,a){var s,l=this&&this.__extends||(s=function(T,A){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,C){w.__proto__=C}||function(w,C){for(var D in C)C.hasOwnProperty(D)&&(w[D]=C[D])},s(T,A)},function(T,A){function w(){this.constructor=T}s(T,A),T.prototype=A===null?Object.create(A):(w.prototype=A.prototype,new w)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(8022),p=a(4007),g=a(2336),y=a(4284),v=a(2513),b=a(8175),x=a(850),_=(function(T){function A(){var w=T!==null&&T.apply(this,arguments)||this;return w.viewDataTableCacheId=d.v4(),w}return l(A,T),Object.defineProperty(A.prototype,"serviceName",{get:function(){return"get-data-service"},enumerable:!0,configurable:!0}),A.prototype.getMaxRowLimit=function(){return 1e4},A.prototype.getViewDataTableCacheId=function(){return this.viewDataTableCacheId},A.prototype.getLimitedMaxRows=function(w){var C=this.getMaxRowLimit()+1;return w>0&&w<C?w:C},A.prototype.getUnderlyingDataAsync=function(w,C,D,I,M,k,R,z){var P,$=this,N=C===x.GetDataType.Summary,L=N?"getSummaryDataAsync":"getUnderlyingDataAsync",B=N?f.VerbId.GetDataSummaryData:f.VerbId.GetUnderlyingData,q=B===f.VerbId.GetUnderlyingData?this.getLimitedMaxRows(R):R,H=((P={})[f.ParameterId.FunctionName]=L,P);return H[f.ParameterId.VisualId]=w,H[f.ParameterId.IgnoreAliases]=D,H[f.ParameterId.IgnoreSelection]=I,H[f.ParameterId.IncludeAllColumns]=M,H[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(k),H[f.ParameterId.MaxRows]=q,H[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(z),this.execute(B,H).then((function(U){var Y=U.result;return $.processResultsTable(Y.data,Y.isSummary)}))},A.prototype.getSummaryDataReaderAsync=function(w,C,D,I,M,k,R){var z,P=this,$=((z={})[f.ParameterId.FunctionName]="getSummaryDataReaderAsync",z[f.ParameterId.ViewDataTableCacheId]=this.getViewDataTableCacheId(),z[f.ParameterId.VisualId]=w,z[f.ParameterId.PageRowCount]=C,z[f.ParameterId.IgnoreAliases]=D,z[f.ParameterId.IgnoreSelection]=I,z[f.ParameterId.IncludeAllColumns]=M,z[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(k),z[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(R),z);return this.execute(f.VerbId.GetDataSummaryDataReader,$).then((function(N){var L=N.result;return new v.DataTableReader(L.id,L.totalRowCount,C,P._registryId)}))},A.prototype.getSummaryColumnsInfoAsync=function(w){var C,D=f.VerbId.GetDataSummaryData,I=((C={})[f.ParameterId.FunctionName]="getSummaryColumnsInfoAsync",C[f.ParameterId.VisualId]=w,C[f.ParameterId.IgnoreAliases]=!0,C[f.ParameterId.IgnoreSelection]=!0,C[f.ParameterId.IncludeAllColumns]=!0,C[f.ParameterId.MaxRows]=1,C[f.ParameterId.ShowDataTableFormat]=f.ApiShowDataTableFormat.NativeValuesOnly,C);return this.execute(D,I).then((function(M){return M.result.data.headers.map((function(k){return new y.Column(k.fieldCaption,k.fieldName,k.dataType,k.isReferenced,k.index)}))}))},A.prototype.getSelectedMarksAsync=function(w){var C,D=this,I=((C={})[f.ParameterId.FunctionName]="getSelectedMarksAsync",C[f.ParameterId.VisualId]=w,C);return this.execute(f.VerbId.GetSelectedMarks,I).then((function(M){return{data:M.result.data.map((function(k){return D.processResultsTable(k,!0)}))}}))},A.prototype.getHighlightedMarksAsync=function(w){var C,D=this,I=((C={})[f.ParameterId.FunctionName]="getHighlightedMarksAsync",C[f.ParameterId.VisualId]=w,C);return this.execute(f.VerbId.GetHighlightedMarks,I).then((function(M){return{data:M.result.data.map((function(k){return D.processResultsTable(k,!0)}))}}))},A.prototype.getDataSourceDataAsync=function(w,C,D,I,M,k){var R,z=this,P=((R={})[f.ParameterId.FunctionName]="getDataSourceDataAsync",R[f.ParameterId.DataSourceId]=w,R[f.ParameterId.IgnoreAliases]=C,R[f.ParameterId.MaxRows]=this.getLimitedMaxRows(D),R[f.ParameterId.ColumnsToInclude]=this.verifyIncludeColumnArray(I),R[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(M),R[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(k),R);return this.execute(f.VerbId.GetDataSourceData,P).then((function($){var N=$.result;return z.processResultsTable(N.data,!1)}))},A.prototype.getLogicalTableDataAsync=function(w,C,D,I,M,k,R){var z,P=this,$=((z={})[f.ParameterId.FunctionName]="getLogicalTableDataAsync",z[f.ParameterId.ColumnsToInclude]=M,z[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(k),z[f.ParameterId.DataSourceId]=w,z[f.ParameterId.IgnoreAliases]=D,z[f.ParameterId.LogicalTableId]=C,z[f.ParameterId.MaxRows]=this.getLimitedMaxRows(I),z[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(R),z);return this.execute(f.VerbId.GetLogicalTableData,$).then((function(N){var L=N.result;return P.processResultsTable(L.data,!1)}))},A.prototype.getLogicalTableDataReaderAsync=function(w,C,D,I,M,k){var R,z=this,P=((R={})[f.ParameterId.FunctionName]="getLogicalTableDataReaderAsync",R[f.ParameterId.ViewDataTableCacheId]=this.getViewDataTableCacheId(),R[f.ParameterId.DataSourceId]=w,R[f.ParameterId.LogicalTableId]=C,R[f.ParameterId.PageRowCount]=D,R[f.ParameterId.IgnoreAliases]=I,R[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(M),R[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(k),R);return this.execute(f.VerbId.GetLogicalTableDataReader,P).then((function($){var N=$.result;return new v.DataTableReader(N.id,N.totalRowCount,D,z._registryId)}))},A.prototype.getUnderlyingTableDataAsync=function(w,C,D,I,M,k,R,z){var P,$=this,N=((P={})[f.ParameterId.FunctionName]="getUnderlyingTableDataAsync",P[f.ParameterId.VisualId]=w,P[f.ParameterId.LogicalTableId]=C,P[f.ParameterId.IgnoreAliases]=D,P[f.ParameterId.IgnoreSelection]=I,P[f.ParameterId.IncludeAllColumns]=M,P[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(k),P[f.ParameterId.MaxRows]=this.getLimitedMaxRows(R),P[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(z),P);return this.execute(f.VerbId.GetUnderlyingTableData,N).then((function(L){var B=L.result;return $.processResultsTable(B.data,!1)}))},A.prototype.getUnderlyingTableDataReaderAsync=function(w,C,D,I,M,k,R,z){var P,$=this,N=((P={})[f.ParameterId.FunctionName]="getUnderlyingTableDataReaderAsync",P[f.ParameterId.ViewDataTableCacheId]=this.getViewDataTableCacheId(),P[f.ParameterId.VisualId]=w,P[f.ParameterId.LogicalTableId]=C,P[f.ParameterId.IgnoreAliases]=I,P[f.ParameterId.IgnoreSelection]=M,P[f.ParameterId.IncludeAllColumns]=k,P[f.ParameterId.ColumnsToIncludeById]=this.verifyIncludeColumnArray(R),P[f.ParameterId.ShowDataTableFormat]=g.ExternalToInternalEnumMappings.showDataTableFormatType.convert(z),P[f.ParameterId.PageRowCount]=D,P);return this.execute(f.VerbId.GetUnderlyingTableDataReader,N).then((function(L){var B=L.result;return new v.DataTableReader(B.id,B.totalRowCount,D,$._registryId)}))},A.prototype.getPageAsync=function(w,C,D){var I,M=this,k=((I={})[f.ParameterId.FunctionName]="getPageAsync",I[f.ParameterId.ViewDataTableCacheId]=this.getViewDataTableCacheId(),I[f.ParameterId.ViewDataTableId]=w,I[f.ParameterId.DataRowIndex]=C*D,I);return this.execute(f.VerbId.GetDataTableReaderPage,k).then((function(R){var z=R.result;return M.processResultsPage(z,w===A.summaryTableId)}))},A.prototype.releaseAsync=function(w){var C,D=((C={})[f.ParameterId.FunctionName]="release",C[f.ParameterId.ViewDataTableCacheId]=this.getViewDataTableCacheId(),C[f.ParameterId.ViewDataTableId]=w,C);return this.execute(f.VerbId.ReleaseDataTableReader,D).then((function(I){}))},A.prototype.verifyIncludeColumnArray=function(w){if(!Array.isArray(w))throw new p.TableauError(u.ErrorCodes.InvalidParameter,"columnsToInclude and columnsToIncludeById must be valid arrays");var C=new Set(w);return Array.from(C)},A.prototype.processResultsTable=function(w,C){var D,I=w.headers.map((function(R){return new y.Column(R.fieldCaption,R.fieldName,R.dataType,R.isReferenced,R.index)}));w.marks&&(D=w.marks.map((function(R){return new y.MarkInfo(R.type,R.color,R.tupleId)})));var M=C===!1&&w.dataTable.length===this.getMaxRowLimit()+1;M&&(w.dataTable.length-=1);var k=w.dataTable.map((function(R){return R.map((function(z,P){return b.DataValueFactory.MakeTableDataValue(z,I[P].dataType)}))}));return D?new y.DataTable(k,I,k.length,M,C,D):new y.DataTable(k,I,k.length,M,C)},A.prototype.processResultsPage=function(w,C){var D,I=w.headers.map((function(k){return new y.Column(k.fieldCaption,k.fieldName,k.dataType,k.isReferenced,k.index)}));w.marks&&(D=w.marks.map((function(k){return new y.MarkInfo(k.type,k.color,k.tupleId)})));var M=w.dataTable.map((function(k){return k.map((function(R,z){return b.DataValueFactory.MakeTableDataValue(R,I[z].dataType)}))}));return D?new y.DataTable(M,I,M.length,!1,C,D):new y.DataTable(M,I,M.length,!1,C)},A.summaryTableId="",A})(a(1167).ServiceImplBase);o.GetDataServiceImpl=_},2294:function(i,o,a){var s,l=this&&this.__extends||(s=function(f,d){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,g){p.__proto__=g}||function(p,g){for(var y in g)g.hasOwnProperty(y)&&(p[y]=g[y])},s(f,d)},function(f,d){function p(){this.constructor=f}s(f,d),f.prototype=d===null?Object.create(d):(p.prototype=d.prototype,new p)});Object.defineProperty(o,"__esModule",{value:!0});var u=(function(f){function d(){return f!==null&&f.apply(this,arguments)||this}return l(d,f),Object.defineProperty(d.prototype,"serviceName",{get:function(){return"notification-service"},enumerable:!0,configurable:!0}),d})(a(333).NotificationServiceImplBase);o.NotificationServiceImpl=u},333:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function l(u,f){this._filterFn=u,this._callbackFn=f}return l.prototype.onNotification=function(u){this._filterFn(u)&&this._callbackFn(u)},l})();o.Registration=a;var s=(function(){function l(u){this.dispatcher=u,this._handlers={},this.dispatcher.registerNotificationHandler(this.onNotification.bind(this))}return l.prototype.registerHandler=function(u,f,d){var p=this,g=this._handlers[u]||new Array,y=new a(f,d);return g.push(y),this._handlers[u]=g,function(){return p.removeRegistration(u,y)}},l.prototype.hasHandlersForNotificationType=function(u){return this._handlers.hasOwnProperty(u)},l.prototype.onNotification=function(u){this.hasHandlersForNotificationType(u.notificationId)&&this._handlers[u.notificationId].forEach((function(f){return f.onNotification(u.data)}))},l.prototype.removeRegistration=function(u,f){this.hasHandlersForNotificationType(u)&&(this._handlers[u]=this._handlers[u].filter((function(d){return d!==f})))},l})();o.NotificationServiceImplBase=s},7658:function(i,o,a){var s,l=this&&this.__extends||(s=function(y,v){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,x){b.__proto__=x}||function(b,x){for(var _ in x)x.hasOwnProperty(_)&&(b[_]=x[_])},s(y,v)},function(y,v){function b(){this.constructor=y}s(y,v),y.prototype=v===null?Object.create(v):(b.prototype=v.prototype,new b)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(6560),p=a(1554),g=(function(y){function v(){return y!==null&&y.apply(this,arguments)||this}return l(v,y),Object.defineProperty(v.prototype,"serviceName",{get:function(){return"parameters-service"},enumerable:!0,configurable:!0}),v.prototype.getParametersForSheetAsync=function(b){var x,_=((x={})[f.ParameterId.FunctionName]="getParametersForSheetAsync",x[f.ParameterId.SheetPath]=b,x);return this.getParametersAsync(_)},v.prototype.getAllParametersAsync=function(){var b,x=((b={})[f.ParameterId.FunctionName]="getParametersForSheetAsync",b);return this.getParametersAsync(x)},v.prototype.getParametersAsync=function(b){var x=this;return this.execute(f.VerbId.GetParametersForSheet,b).then((function(_){return _.result.map((function(T){return new d.ParameterImpl(T,x._registryId)}))}))},v.prototype.changeParameterValueAsync=function(b,x){var _,T=((_={})[f.ParameterId.FunctionName]="changeParameterValueAsync",_[f.ParameterId.ParameterFieldName]=b,_[f.ParameterId.ParameterValue]=x,_);return this.execute(f.VerbId.ChangeParameterValue,T).then((function(A){return A.result}))},v.prototype.findParameterByNameAsync=function(b){return this.findParameterAsync(b,void 0)},v.prototype.findParameterByGlobalFieldNameAsync=function(b){return this.findParameterAsync(void 0,b)},v.prototype.findParameterAsync=function(b,x){var _,T=this,A=((_={})[f.ParameterId.FunctionName]="findParameterAsync",_);if(b!==void 0)A[f.ParameterId.ParameterCaption]=b;else{if(x===void 0)throw new p.TableauError(u.ErrorCodes.InvalidParameter,"name or fieldName must be provided to find parameter");A[f.ParameterId.ParameterFieldName]=x}return this.execute(f.VerbId.FindParameter,A).then((function(w){if("fieldName"in w.result){var C=w.result;return new d.ParameterImpl(C,T._registryId)}}))},v})(a(1167).ServiceImplBase);o.ParametersServiceImpl=g},7132:function(i,o,a){var s,l=this&&this.__extends||(s=function(v,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,_){x.__proto__=_}||function(x,_){for(var T in _)_.hasOwnProperty(T)&&(x[T]=_[T])},s(v,b)},function(v,b){function x(){this.constructor=v}s(v,b),v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(1426),p=a(1554),g=a(6077),y=(function(v){function b(){return v!==null&&v.apply(this,arguments)||this}return l(b,v),Object.defineProperty(b.prototype,"serviceName",{get:function(){return"selection-service"},enumerable:!0,configurable:!0}),b.prototype.clearSelectedMarksAsync=function(x){var _,T=((_={})[f.ParameterId.FunctionName]="clearSelectedMarksAsync",_[f.ParameterId.VisualId]=x,_);return this.execute(f.VerbId.ClearSelectedMarks,T).then((function(A){}))},b.prototype.selectMarksByValueAsync=function(x,_,T){var A,w=this;if(_.length===0)throw new p.TableauError(u.ErrorCodes.InvalidParameter,"Selection criteria missing for selecting marks by value");var C=this.validateSelectionUpdateType(T),D=this.parseSelectionMarks(_),I=((A={})[f.ParameterId.FunctionName]="selectMarksByValueAsync",A[f.ParameterId.VisualId]=x,A[f.ParameterId.SelectionUpdateType]=C,A);return D.hierModelArr&&D.hierModelArr.length&&(I[f.ParameterId.HierValSelectionModels]=D.hierModelArr),D.quantModelArr&&D.quantModelArr.length&&(I[f.ParameterId.QuantRangeSelectionModels]=D.quantModelArr),D.dimModelArr&&D.dimModelArr.length&&(I[f.ParameterId.DimValSelectionModels]=D.dimModelArr),this.execute(f.VerbId.SelectByValue,I).then((function(M){w.apiFilterHandlerCheckForCommandError(M.result)}))},b.prototype.apiFilterHandlerCheckForCommandError=function(x){if(x[f.ParameterId.ParameterError]){if(x[f.ParameterId.InvalidFields])throw new p.TableauError(u.SharedErrorCodes.InvalidSelectionFieldName,x[f.ParameterId.InvalidFields]);if(x[f.ParameterId.InvalidValues])throw new p.TableauError(u.SharedErrorCodes.InvalidSelectionValue,x[f.ParameterId.InvalidValues]);if(x[f.ParameterId.InvalidDates])throw new p.TableauError(u.SharedErrorCodes.InvalidSelectionDate,x[f.ParameterId.InvalidDates])}},b.prototype.selectMarksByIdAsync=function(x,_,T){var A;if(_.length===0)throw new p.TableauError(u.ErrorCodes.InvalidParameter,"Marks info missing for selecting marks by Id");var w=this.validateSelectionUpdateType(T),C=this.parseSelectionIds(_),D=((A={})[f.ParameterId.FunctionName]="selectMarksByIdAsync",A[f.ParameterId.VisualId]=x,A[f.ParameterId.SelectionUpdateType]=w,A[f.ParameterId.Selection]=C.selection,A);return this.execute(f.VerbId.SelectByValue,D).then((function(I){}))},b.prototype.parseSelectionIds=function(x){for(var _=[],T=new d.SelectionModelsContainer,A=0;A<x.length;A++){var w=x[A].tupleId;if(w==null)throw new p.TableauError(u.ErrorCodes.InternalError,"tupleId parsing error");_.push(w.toString())}if(_.length!==0){var C=new d.TupleSelectionModel;C.selectionType="tuples",C.objectIds=_,T.selection=C}return T},b.prototype.parseSelectionMarks=function(x){for(var _=new d.SelectionModelsContainer,T=0;T<x.length;T++){var A=x[T];if(!A.fieldName||A.value===void 0||A.value===null)throw new p.TableauError(u.ErrorCodes.InternalError,"Selection Criteria parsing error");var w=new RegExp("([[A-Za-z0-9]+]).*","g"),C=A.value;if(w.test(A.fieldName)){var D=this.addToParamsList(A.fieldName,A.value);_.hierModelArr.push(D)}else if(C.min!==void 0&&C.max!==void 0){var I=this.addToRangeParamsList(A.fieldName,C);_.quantModelArr.push(I)}else{var M=this.addToParamsList(A.fieldName,A.value);_.dimModelArr.push(M)}}return _},b.prototype.addToParamsList=function(x,_){var T=new d.ValueSelectionModel,A=[];if(_ instanceof Array)for(var w=_,C=0;C<w.length;C++)A.push(g.Param.serializeParameterValue(w[C]));else A.push(g.Param.serializeParameterValue(_));return T.qualifiedFieldCaption=x,T.selectValues=A,T},b.prototype.addToRangeParamsList=function(x,_){var T=new d.RangeSelectionModel;return T.qualifiedFieldCaption=x,_.max!==void 0&&_.max!==null&&(T.maxValue=g.Param.serializeParameterValue(_.max)),_.min!==void 0&&_.min!==null&&(T.minValue=g.Param.serializeParameterValue(_.min)),T.included=this.validateNullOptionType(_.nullOption),T},b.prototype.validateSelectionUpdateType=function(x){return x===u.SelectionUpdateType.Replace?f.SelectionUpdateType.Replace:x===u.SelectionUpdateType.Add?f.SelectionUpdateType.Add:x===u.SelectionUpdateType.Remove?f.SelectionUpdateType.Remove:f.SelectionUpdateType.Replace},b.prototype.validateNullOptionType=function(x){if(x){if(x===u.FilterNullOption.NullValues)return f.QuantitativeIncludedValues.IncludeNull;if(x===u.FilterNullOption.NonNullValues)return f.QuantitativeIncludedValues.IncludeNonNull;if(x===u.FilterNullOption.AllValues)return f.QuantitativeIncludedValues.IncludeAll}return f.QuantitativeIncludedValues.IncludeAll},b})(a(1167).ServiceImplBase);o.SelectionServiceImpl=y},1167:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(5126),l=a(1554),u=a(4406),f=(function(){function d(p,g){this._dispatcher=p,this._registryId=g}return d.prototype.execute=function(p,g){return this._dispatcher.execute(p,g).catch((function(y){var v=y,b=s.InternalToExternalEnumMappings.errorCode.convert(v.errorCode,u.ShouldThrow.No);throw new l.TableauError(b,v.message)}))},d})();o.ServiceImplBase=f},8226:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=(function(d){function p(){return d!==null&&d.apply(this,arguments)||this}return l(p,d),Object.defineProperty(p.prototype,"serviceName",{get:function(){return"size-service"},enumerable:!0,configurable:!0}),p.prototype.changeSizeAsync=function(g,y){var v,b,x,_,T,A=((v={})[u.ParameterId.FunctionName]="changeSizeAsync",v[u.ParameterId.SheetName]=g,v[u.ParameterId.MinHeight]=((b=y.minSize)===null||b===void 0?void 0:b.height)||0,v[u.ParameterId.MinWidth]=((x=y.minSize)===null||x===void 0?void 0:x.width)||0,v[u.ParameterId.MaxHeight]=((_=y.maxSize)===null||_===void 0?void 0:_.height)||0,v[u.ParameterId.MaxWidth]=((T=y.maxSize)===null||T===void 0?void 0:T.width)||0,v);return this.execute(u.VerbId.SetSheetSize,A).then((function(w){}))},p})(a(1167).ServiceImplBase);o.SizeServiceImpl=f},2812:function(i,o,a){var s,l=this&&this.__extends||(s=function(d,p){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,y){g.__proto__=y}||function(g,y){for(var v in y)y.hasOwnProperty(v)&&(g[v]=y[v])},s(d,p)},function(d,p){function g(){this.constructor=d}s(d,p),d.prototype=p===null?Object.create(p):(g.prototype=p.prototype,new g)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=(function(d){function p(){return d!==null&&d.apply(this,arguments)||this}return l(p,d),Object.defineProperty(p.prototype,"serviceName",{get:function(){return"story-activation-service"},enumerable:!0,configurable:!0}),p.prototype.activateNextStoryPointAsync=function(){var g,y=u.VerbId.ActivateNextStoryPoint,v=((g={})[u.ParameterId.FunctionName]="activateNextStoryPointAsync",g);return this.execute(y,v).then((function(b){}))},p.prototype.activatePreviousStoryPointAsync=function(){var g,y=u.VerbId.ActivatePreviousStoryPoint,v=((g={})[u.ParameterId.FunctionName]="activatePreviousStoryPointAsync",g);return this.execute(y,v).then((function(b){}))},p.prototype.activateStoryPointAsync=function(g){var y,v=u.VerbId.ActivateStoryPoint,b=((y={})[u.ParameterId.FunctionName]="activateStoryPointAsync",y);return b[u.ParameterId.StoryPointIndex]=g,this.execute(v,b).then((function(x){}))},p.prototype.revertStoryPointAsync=function(g){var y,v=u.VerbId.RevertStoryPoint,b=((y={})[u.ParameterId.FunctionName]="revertStoryPointAsync",y);return b[u.ParameterId.StoryPointIndex]=g,this.execute(v,b).then((function(x){return x.result}))},p})(a(1167).ServiceImplBase);o.StoryActivationServiceImpl=f},8434:function(i,o,a){var s,l=this&&this.__extends||(s=function(p,g){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,v){y.__proto__=v}||function(y,v){for(var b in v)v.hasOwnProperty(b)&&(y[b]=v[b])},s(p,g)},function(p,g){function y(){this.constructor=p}s(p,g),p.prototype=g===null?Object.create(g):(y.prototype=g.prototype,new y)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(4695),f=a(2913),d=(function(p){function g(){return p!==null&&p.apply(this,arguments)||this}return l(g,p),Object.defineProperty(g.prototype,"serviceName",{get:function(){return"viz-service"},enumerable:!0,configurable:!0}),g.prototype.createVizImageAsync=function(y){var v,b=((v={})[u.ParameterId.FunctionName]="createVizImageAsync",v[u.ParameterId.VizAPIInputJson]=JSON.stringify(y),v);return this.execute(u.VerbId.VizAPI,b).then((function(x){return x.result}))},g.prototype.activateSheetAsync=function(y){var v,b=((v={})[u.ParameterId.FunctionName]="activateSheetAsync",v[u.ParameterId.SwitchToSheetName]=y,v);return this.execute(u.VerbId.ActivateSheet,b).then((function(){}))},g.prototype.getCustomViewsAsync=function(){var y,v=this,b=((y={})[u.ParameterId.FunctionName]="getCustomViewsAsync",y);return this.execute(u.VerbId.GetCustomViews,b).then((function(x){return x.result.map((function(_){return new f.CustomViewImpl(_,v._registryId)}))}))},g.prototype.showCustomViewAsync=function(y){var v,b=this,x=((v={})[u.ParameterId.FunctionName]="showCustomViewAsync",v[u.ParameterId.CustomViewName]=y,v);return this.execute(u.VerbId.ShowCustomView,x).then((function(_){var T=_.result;return new f.CustomViewImpl(T,b._registryId)}))},g.prototype.removeCustomViewAsync=function(y){var v,b=this,x=((v={})[u.ParameterId.FunctionName]="removeCustomViewAsync",v[u.ParameterId.CustomViewName]=y,v);return this.execute(u.VerbId.RemoveCustomView,x).then((function(_){var T=_.result;return new f.CustomViewImpl(T,b._registryId)}))},g.prototype.saveCustomViewAsync=function(y){var v,b=this,x=((v={})[u.ParameterId.FunctionName]="saveCustomViewAsync",v[u.ParameterId.CustomViewName]=y,v[u.ParameterId.CustomViewIsDefault]=!1,v);return this.execute(u.VerbId.SaveWorkbookAsCustomView,x).then((function(_){var T=_.result;return new f.CustomViewImpl(T,b._registryId)}))},g.prototype.setActiveCustomViewAsDefaultAsync=function(){var y,v=((y={})[u.ParameterId.FunctionName]="setActiveCustomViewAsDefaultAsync",y);return this.execute(u.VerbId.SetActiveCustomViewAsDefault,v).then((function(){}))},g.prototype.saveAsync=function(y){var v,b=this,x=((v={})[u.ParameterId.FunctionName]="saveAsync",v[u.ParameterId.CustomViewLuid]=y.luid,v[u.ParameterId.CustomViewName]=y.name,v[u.ParameterId.CustomViewIsDefault]=y.isDefault,v[u.ParameterId.CustomViewIsPublic]=y.shared,v);return this.execute(u.VerbId.UpdateCustomView,x).then((function(_){var T=_.result;return new f.CustomViewImpl(T,b._registryId)}))},g.prototype.getCurrentSrcAsync=function(){var y,v=((y={})[u.ParameterId.FunctionName]="getCurrentSrcAsync",y);return this.execute(u.VerbId.GetCurrentSrc,v).then((function(b){return b.result}))},g})(a(1167).ServiceImplBase);o.VizServiceImpl=d},8009:function(i,o,a){var s,l=this&&this.__extends||(s=function(v,b){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,_){x.__proto__=_}||function(x,_){for(var T in _)_.hasOwnProperty(T)&&(x[T]=_[T])},s(v,b)},function(v,b){function x(){this.constructor=v}s(v,b),v.prototype=b===null?Object.create(b):(x.prototype=b.prototype,new x)});Object.defineProperty(o,"__esModule",{value:!0});var u=a(1750),f=a(4695),d=a(2336),p=a(316),g=a(6077),y=(function(v){function b(){return v!==null&&v.apply(this,arguments)||this}return l(b,v),Object.defineProperty(b.prototype,"serviceName",{get:function(){return"zone-service"},enumerable:!0,configurable:!0}),b.prototype.setVisibilityAsync=function(x,_,T){var A,w=((A={})[f.ParameterId.FunctionName]="setVisibilityAsync",A[f.ParameterId.Dashboard]=x,A[f.ParameterId.ZoneIdsVisibilityMap]={},A);return g.Param.convertParameterToMap(T,"zoneVisibilityMap").forEach((function(C,D){p.ErrorHelpers.verifyZoneIsValid(_,Number.parseInt(D,10)),p.ErrorHelpers.verifyEnumValue(C,u.DashboardObjectVisibilityType,"DashboardObjectVisibilityType"),w[f.ParameterId.ZoneIdsVisibilityMap][D]=d.ExternalToInternalEnumMappings.setVisibilityType.convert(C)})),this.execute(f.VerbId.SetZoneVisibility,w).then((function(C){}))},b.prototype.moveAndResizeAsync=function(x,_,T){var A,w=((A={})[f.ParameterId.Dashboard]=x,A[f.ParameterId.DashboardObjectPositionAndSizeUpdateList]=T,A);return T.forEach((function(C){p.ErrorHelpers.verifyZoneIsValidAndFloating(_,C.dashboardObjectID),p.ErrorHelpers.verifyWidthAndHeightOfDashboardObjectPositionAndSizeUpdate(C)})),this.execute(f.VerbId.MoveAndResizeZones,w).then((function(C){}))},b})(a(1167).ServiceImplBase);o.ZoneServiceImpl=y},1738:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(l){this._tableInfo=l}return Object.defineProperty(s.prototype,"name",{get:function(){return this._tableInfo.name},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"id",{get:function(){return this._tableInfo.id},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"connectionId",{get:function(){return this._tableInfo.connectionId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"customSQL",{get:function(){return this._tableInfo.customSQL},enumerable:!0,configurable:!0}),s})();o.TableSummary=a},1554:function(i,o){var a,s=this&&this.__extends||(a=function(u,f){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var g in p)p.hasOwnProperty(g)&&(d[g]=p[g])},a(u,f)},function(u,f){function d(){this.constructor=u}a(u,f),u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)});Object.defineProperty(o,"__esModule",{value:!0});var l=(function(u){function f(d,p){var g=u.call(this,d+": "+p)||this;return g._errorCode=d,Object.setPrototypeOf(g,f.prototype),g}return s(f,u),Object.defineProperty(f.prototype,"errorCode",{get:function(){return this._errorCode},enumerable:!0,configurable:!0}),f})(Error);o.TableauError=l},8175:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4695),l=a(4284),u=(function(){function f(){}return f.MakeParameterDataValue=function(d,p){return new l.DataValue(d.value,s.DataTypeConverter.convertStringValueToNativeValue(d.value,p),d.formattedValue)},f.MakeFilterDataValue=function(d){return new l.DataValue(d.value,d.value,d.formattedValue)},f.MakeTableDataValue=function(d,p){return new l.DataValue(d.value,d.value!==void 0?s.DataTypeConverter.convertValueToNativeValue(d.value,p):void 0,d.formattedValue)},f})();o.DataValueFactory=u},9685:(i,o)=>{Object.defineProperty(o,"__esModule",{value:!0});var a=(function(){function s(){var l=this;this._promise=new Promise((function(u,f){l._resolve=u,l._reject=f}))}return Object.defineProperty(s.prototype,"promise",{get:function(){return this._promise},enumerable:!0,configurable:!0}),s.prototype.resolve=function(l){this._resolve&&this._resolve(l)},s.prototype.reject=function(l){this._reject&&this._reject(l)},s})();o.Deferred=a,o.UnregisterTimeoutInMilliseconds=3e4},4406:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s,l=a(1750),u=a(1554),f=(function(){function d(p,g){this._mappings=p,this._defaultVal=g}return d.prototype.convert=function(p,g){if(g===void 0&&(g=s.Yes),this._mappings.hasOwnProperty(p))return this._mappings[p];if(this._defaultVal!==void 0&&g!==s.Yes)return this._defaultVal;throw new u.TableauError(l.ErrorCodes.InternalError,"Enum Mapping not found for: "+p)},d})();o.EnumConverter=f,(function(d){d.Yes="yes",d.No="no"})(s=o.ShouldThrow||(o.ShouldThrow={}))},316:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=a(6077),f=(function(){function d(){}return d.apiNotImplemented=function(p){return new l.TableauError(s.SharedErrorCodes.InternalError,p+" API not yet implemented.")},d.verifyInternalValue=function(p,g){if(p==null)throw new l.TableauError(s.SharedErrorCodes.InternalError,p+" is invalid value for: "+g)},d.verifyParameter=function(p,g){if(p==null)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,p+" is invalid value for parameter: "+g)},d.verifyParameterType=function(p,g,y){if(typeof p!==g)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,p+" has invalid type for parameter: "+y+".")},d.verifyStringParameter=function(p,g){if(p==null||p==="")throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,p+" is invalid value for paramter: "+g)},d.verifyEnumValue=function(p,g,y){var v=!1;if(Object.keys(g).forEach((function(b){g[b]===p.toString()&&(v=!0)})),!v)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,p+" is invalid value for enum: "+y+".")},d.verifyRange=function(p,g,y){if(!(g<=p&&p<y))throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,p+" is invalid value for range: ["+g+".."+y+")")},d.verifyRangeParamType=function(p,g){if(!p&&!g)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, at least one of min or max is required.");if(p&&!u.Param.isTypeNumber(p)&&!u.Param.isTypeDate(p))throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, only Date and number are allowed for parameter min.");if(g&&!u.Param.isTypeNumber(g)&&!u.Param.isTypeDate(g))throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, only Date and number are allowed for parameter max.");if(p&&g&&typeof p!=typeof g)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, parameters min and max should be of the same type.")},d.verifyZoneIsValid=function(p,g){if(!p.has(g))throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, Dashboard Object Id: "+g+" is not present in dashboard.")},d.verifyZoneIsValidAndFloating=function(p,g){if(!p.has(g)||!p.get(g).isFloating)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value, Dashboard Object Id: "+g+" is not present or is a fixed zone in the dashboard.")},d.verifyWidthAndHeightOfDashboardObjectPositionAndSizeUpdate=function(p){if(p.width<0||p.height<0)throw new l.TableauError(s.SharedErrorCodes.InvalidParameter,"Unexpected invalid param value for dashboard object ID "+p.dashboardObjectID+": negative widths and heights are not allowed.")},d})();o.ErrorHelpers=f},6077:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=a(316),f=(function(){function d(){}return d.serializeDateForPlatform=function(p){return p.getUTCFullYear()+"-"+(p.getUTCMonth()+1)+"-"+p.getUTCDate()+" "+p.getUTCHours()+":"+p.getUTCMinutes()+":"+p.getUTCSeconds()},d.serializeBooleanForPlatform=function(p){return p?"true":"false"},d.serializeNumberForPlatform=function(p){return p.toString(10)},d.isTypeNumber=function(p){return typeof p=="number"||p instanceof Number},d.isTypeDate=function(p){return p instanceof Date},d.isTypeString=function(p){return typeof p=="string"||p instanceof String},d.isTypeBool=function(p){return typeof p=="boolean"||p instanceof Boolean},d.isNullOrUndefined=function(p){return p==null},d.serializeParameterValue=function(p){if(d.isTypeNumber(p))return d.serializeNumberForPlatform(p);if(d.isTypeDate(p))return d.serializeDateForPlatform(p);if(d.isTypeBool(p))return d.serializeBooleanForPlatform(p);if(d.isTypeString(p))return p;throw new l.TableauError(s.ErrorCodes.InternalError,"Unexpected invalid value for: "+p)},d.convertParameterToMap=function(p,g){if(u.ErrorHelpers.verifyParameterType(p,"object",g),Array.isArray(p))throw new l.TableauError(s.ErrorCodes.InvalidParameter,"Expecting object or Map for: "+g+".");return p instanceof Map?p:new Map(Object.entries(p))},d.tryParseNumber=function(p){if(d.isNullOrUndefined(p))return{success:!1};if(d.isTypeNumber(p))return{parsed:p,success:!0};var g=p.toString();if(g==="NaN")return{parsed:NaN,success:!0};var y=parseFloat(g);return isNaN(y)?{success:!1}:{parsed:y,success:!0}},d})();o.Param=f},489:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(4695),u=a(1554),f=(function(){function d(){}return d.getSheetSizeFromSizeConstraints=function(p){var g=p.minWidth,y=p.minHeight,v=p.maxWidth,b=p.maxHeight;if(y===0&&g===0)return b===0&&v===0?{behavior:s.SheetSizeBehavior.Automatic}:{behavior:s.SheetSizeBehavior.AtMost,maxSize:{width:v,height:b}};if(b===0&&v===0)return{behavior:s.SheetSizeBehavior.AtLeast,minSize:{width:g,height:y}};if(b===y&&v===g&&g>0)return{behavior:s.SheetSizeBehavior.Exactly,minSize:{width:g,height:y},maxSize:{width:g,height:y}};var x=g===0&&v===0;return{behavior:s.SheetSizeBehavior.Range,minSize:{width:g,height:y},maxSize:{width:x?2147483647:v,height:b}}},d.createAutomaticSize=function(){return{behavior:s.SheetSizeBehavior.Automatic,minSize:{width:0,height:0},maxSize:{width:0,height:0}}},d.getPublishedSheetInfoByName=function(p,g){return g.find((function(y){return y.name===p}))},d.getSheetTypeEnum=function(p){var g;switch(p){case l.SheetType.Worksheet:g=s.SheetType.Worksheet;break;case l.SheetType.Dashboard:g=s.SheetType.Dashboard;break;case l.SheetType.Story:g=s.SheetType.Story;break;default:throw new u.TableauError(s.SharedErrorCodes.ServerError,"Invalid SheetType")}return g},d.isValidSheetSize=function(p){return p.behavior!==void 0},d})();o.SheetUtils=f},8634:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=a(9685),f=(function(){function d(p){p===void 0&&(p=u.UnregisterTimeoutInMilliseconds),this._timeoutInMilliseconds=p}return d.prototype.getNewPromiseOrThrowIfBusy=function(){var p=this;if(this._deferred)throw new l.TableauError(s.SharedErrorCodes.ApiExecutionError,"This api cannot be executed till previous call is resolved.");return this._deferred=new u.Deferred,this._timeoutId=setTimeout((function(){var g=new l.TableauError(s.SharedErrorCodes.Timeout,"Api failed to complete in "+p._timeoutInMilliseconds/1e3+" seconds");p.reject(g)}),this._timeoutInMilliseconds),this._deferred.promise},d.prototype.resolve=function(p){this._deferred&&(clearTimeout(this._timeoutId),this._deferred.resolve(p),this._deferred=void 0)},d.prototype.reject=function(p){this._deferred&&(clearTimeout(this._timeoutId),this._deferred.reject(p),this._deferred=void 0)},d})();o.ShortLivedDeferred=f},6081:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(1750),l=a(1554),u=(function(){function f(d,p){var g=d.split("-");this.build=this.getBuildNumber(g[1]);var y=(d=g[0]).split(".").map((function(v){return parseInt(v,10)}));if(y.length!==3)throw new l.TableauError(s.ErrorCodes.InternalError,"Invalid version number: "+d);this.major=y[0],this.minor=y[1],this.fix=y[2],this.isAlpha=p}return f.prototype.getBuildNumber=function(d){if(!d)return-1;var p=d.split(".");return p[1]?parseInt(p[1],10):-1},Object.defineProperty(f.prototype,"formattedValue",{get:function(){return this.major+"."+this.minor+"."+this.fix},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fullFormattedValue",{get:function(){return this.major+"."+this.minor+"."+this.fix+"-pre."+this.build},enumerable:!0,configurable:!0}),f})();o.VersionNumber=u},107:(i,o,a)=>{Object.defineProperty(o,"__esModule",{value:!0});var s=a(4695),l=(function(){function u(f,d){var p=this;this._apiDelegateDispatcher=f,this._versionConverter=s.CreateExternalCompatibleVersionConverter(s.INTERNAL_CONTRACT_VERSION,d),this._notificationHandlers=[],f.registerNotificationHandler((function(g){if(p._notificationHandlers.length!==0){var y=p._versionConverter.upgradeNotification(g);p._notificationHandlers.forEach((function(v){v(y)}))}}))}return u.needsVersionConverter=function(f){return s.VersionLessThan(f,s.INTERNAL_CONTRACT_VERSION)},u.prototype.execute=function(f,d){var p=this;try{var g=this._versionConverter.downgradeExecuteCall(f,d);return this._apiDelegateDispatcher.execute(g.verb,g.parameters).then((function(y){return p._versionConverter.upgradeExecuteReturn(y,f,d)}))}catch(y){return Promise.reject(y)}},u.prototype.registerNotificationHandler=function(f){this._notificationHandlers.push(f)},u.prototype.unregisterNotificationHandler=function(f){this._notificationHandlers=this._notificationHandlers.filter((function(d){return d!==f}))},u})();o.VersionedExternalApiDispatcher=l},2725:i=>{i.exports=JSON.parse('{"major":1,"minor":126,"fix":0}')}},t={};function n(i){var o=t[i];if(o!==void 0)return o.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,n),a.exports}n.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})();var r={};(()=>{var i=r;Object.defineProperty(i,"__esModule",{value:!0});var o=n(4007);n(163),n(6916),n(9618),n(5611),n(2316),n(119),n(1980),n(47),n(188),n(5956),n(4137);var a=n(6250),s=n(1930),l=typeof VERSION_IS_ALPHA<"u"&&VERSION_IS_ALPHA;o.ApiVersion.SetVersionNumber("1.10.0-pre.29",l);var u=new a.ExtensionsImpl;i.extensions=new s.Extensions(u);var f=n(1750);i.AnalyticsObjectType=f.AnalyticsObjectType,i.AnnotationType=f.AnnotationType,i.ClassNameKey=f.ClassNameKey,i.ColumnType=f.ColumnType,i.DashboardLayoutChange=f.DashboardLayoutChange,i.DashboardObjectType=f.DashboardObjectType,i.DashboardObjectVisibilityType=f.DashboardObjectVisibilityType,i.DataType=f.DataType,i.DateRangeType=f.DateRangeType,i.DialogStyle=f.DialogStyle,i.EncodingType=f.EncodingType,i.ErrorCodes=f.ErrorCodes,i.ExtensionContext=f.ExtensionContext,i.ExtensionMode=f.ExtensionMode,i.FieldAggregationType=f.FieldAggregationType,i.FieldRoleType=f.FieldRoleType,i.FilterDomainType=f.FilterDomainType,i.FilterNullOption=f.FilterNullOption,i.FilterType=f.FilterType,i.FilterUpdateType=f.FilterUpdateType,i.HierarchicalLevelSelectionState=f.HierarchicalLevelSelectionState,i.IncludeDataValuesOption=f.IncludeDataValuesOption,i.MarkType=f.MarkType,i.ParameterValueType=f.ParameterValueType,i.PeriodType=f.PeriodType,i.QuickTableCalcType=f.QuickTableCalcType,i.ReplaySpeedType=f.ReplaySpeedType,i.SelectionUpdateType=f.SelectionUpdateType,i.SheetType=f.SheetType,i.SortDirection=f.SortDirection,i.TableauEventType=f.TableauEventType,i.TrendLineModelType=f.TrendLineModelType,i.VizImageEncodingType=f.VizImageEncodingType,i.VizImagePaletteType=f.VizImagePaletteType,i.VizImageSizeSettingAlignmentType=f.VizImageSizeSettingAlignmentType,i.VizImageSizeSettingType=f.VizImageSizeSettingType,i.VizImageSortDirectionType=f.VizImageSortDirectionType,i.ZoneVisibilityType=f.ZoneVisibilityType})(),window.tableau=r})();function Yg(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var bE={exports:{}},op={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AF;function oQ(){if(AF)return op;AF=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,o){var a=null;if(o!==void 0&&(a=""+o),i.key!==void 0&&(a=""+i.key),"key"in i){o={};for(var s in i)s!=="key"&&(o[s]=i[s])}else o=i;return i=o.ref,{$$typeof:e,type:r,key:a,ref:i!==void 0?i:null,props:o}}return op.Fragment=t,op.jsx=n,op.jsxs=n,op}var TF;function sQ(){return TF||(TF=1,bE.exports=oQ()),bE.exports}var Z9=sQ(),SE={exports:{}},Ye={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CF;function uQ(){if(CF)return Ye;CF=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),a=Symbol.for("react.context"),s=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function p(U){return U===null||typeof U!="object"?null:(U=d&&U[d]||U["@@iterator"],typeof U=="function"?U:null)}var g={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function b(U,Y,Q){this.props=U,this.context=Y,this.refs=v,this.updater=Q||g}b.prototype.isReactComponent={},b.prototype.setState=function(U,Y){if(typeof U!="object"&&typeof U!="function"&&U!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,U,Y,"setState")},b.prototype.forceUpdate=function(U){this.updater.enqueueForceUpdate(this,U,"forceUpdate")};function x(){}x.prototype=b.prototype;function _(U,Y,Q){this.props=U,this.context=Y,this.refs=v,this.updater=Q||g}var T=_.prototype=new x;T.constructor=_,y(T,b.prototype),T.isPureReactComponent=!0;var A=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},C=Object.prototype.hasOwnProperty;function D(U,Y,Q,J,de,ve){return Q=ve.ref,{$$typeof:e,type:U,key:Y,ref:Q!==void 0?Q:null,props:ve}}function I(U,Y){return D(U.type,Y,void 0,void 0,void 0,U.props)}function M(U){return typeof U=="object"&&U!==null&&U.$$typeof===e}function k(U){var Y={"=":"=0",":":"=2"};return"$"+U.replace(/[=:]/g,function(Q){return Y[Q]})}var R=/\/+/g;function z(U,Y){return typeof U=="object"&&U!==null&&U.key!=null?k(""+U.key):Y.toString(36)}function P(){}function $(U){switch(U.status){case"fulfilled":return U.value;case"rejected":throw U.reason;default:switch(typeof U.status=="string"?U.then(P,P):(U.status="pending",U.then(function(Y){U.status==="pending"&&(U.status="fulfilled",U.value=Y)},function(Y){U.status==="pending"&&(U.status="rejected",U.reason=Y)})),U.status){case"fulfilled":return U.value;case"rejected":throw U.reason}}throw U}function N(U,Y,Q,J,de){var ve=typeof U;(ve==="undefined"||ve==="boolean")&&(U=null);var we=!1;if(U===null)we=!0;else switch(ve){case"bigint":case"string":case"number":we=!0;break;case"object":switch(U.$$typeof){case e:case t:we=!0;break;case f:return we=U._init,N(we(U._payload),Y,Q,J,de)}}if(we)return de=de(U),we=J===""?"."+z(U,0):J,A(de)?(Q="",we!=null&&(Q=we.replace(R,"$&/")+"/"),N(de,Y,Q,"",function(me){return me})):de!=null&&(M(de)&&(de=I(de,Q+(de.key==null||U&&U.key===de.key?"":(""+de.key).replace(R,"$&/")+"/")+we)),Y.push(de)),1;we=0;var Be=J===""?".":J+":";if(A(U))for(var Ve=0;Ve<U.length;Ve++)J=U[Ve],ve=Be+z(J,Ve),we+=N(J,Y,Q,ve,de);else if(Ve=p(U),typeof Ve=="function")for(U=Ve.call(U),Ve=0;!(J=U.next()).done;)J=J.value,ve=Be+z(J,Ve++),we+=N(J,Y,Q,ve,de);else if(ve==="object"){if(typeof U.then=="function")return N($(U),Y,Q,J,de);throw Y=String(U),Error("Objects are not valid as a React child (found: "+(Y==="[object Object]"?"object with keys {"+Object.keys(U).join(", ")+"}":Y)+"). If you meant to render a collection of children, use an array instead.")}return we}function L(U,Y,Q){if(U==null)return U;var J=[],de=0;return N(U,J,"","",function(ve){return Y.call(Q,ve,de++)}),J}function B(U){if(U._status===-1){var Y=U._result;Y=Y(),Y.then(function(Q){(U._status===0||U._status===-1)&&(U._status=1,U._result=Q)},function(Q){(U._status===0||U._status===-1)&&(U._status=2,U._result=Q)}),U._status===-1&&(U._status=0,U._result=Y)}if(U._status===1)return U._result.default;throw U._result}var q=typeof reportError=="function"?reportError:function(U){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Y=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof U=="object"&&U!==null&&typeof U.message=="string"?String(U.message):String(U),error:U});if(!window.dispatchEvent(Y))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",U);return}console.error(U)};function H(){}return Ye.Children={map:L,forEach:function(U,Y,Q){L(U,function(){Y.apply(this,arguments)},Q)},count:function(U){var Y=0;return L(U,function(){Y++}),Y},toArray:function(U){return L(U,function(Y){return Y})||[]},only:function(U){if(!M(U))throw Error("React.Children.only expected to receive a single React element child.");return U}},Ye.Component=b,Ye.Fragment=n,Ye.Profiler=i,Ye.PureComponent=_,Ye.StrictMode=r,Ye.Suspense=l,Ye.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,Ye.__COMPILER_RUNTIME={__proto__:null,c:function(U){return w.H.useMemoCache(U)}},Ye.cache=function(U){return function(){return U.apply(null,arguments)}},Ye.cloneElement=function(U,Y,Q){if(U==null)throw Error("The argument must be a React element, but you passed "+U+".");var J=y({},U.props),de=U.key,ve=void 0;if(Y!=null)for(we in Y.ref!==void 0&&(ve=void 0),Y.key!==void 0&&(de=""+Y.key),Y)!C.call(Y,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Y.ref===void 0||(J[we]=Y[we]);var we=arguments.length-2;if(we===1)J.children=Q;else if(1<we){for(var Be=Array(we),Ve=0;Ve<we;Ve++)Be[Ve]=arguments[Ve+2];J.children=Be}return D(U.type,de,void 0,void 0,ve,J)},Ye.createContext=function(U){return U={$$typeof:a,_currentValue:U,_currentValue2:U,_threadCount:0,Provider:null,Consumer:null},U.Provider=U,U.Consumer={$$typeof:o,_context:U},U},Ye.createElement=function(U,Y,Q){var J,de={},ve=null;if(Y!=null)for(J in Y.key!==void 0&&(ve=""+Y.key),Y)C.call(Y,J)&&J!=="key"&&J!=="__self"&&J!=="__source"&&(de[J]=Y[J]);var we=arguments.length-2;if(we===1)de.children=Q;else if(1<we){for(var Be=Array(we),Ve=0;Ve<we;Ve++)Be[Ve]=arguments[Ve+2];de.children=Be}if(U&&U.defaultProps)for(J in we=U.defaultProps,we)de[J]===void 0&&(de[J]=we[J]);return D(U,ve,void 0,void 0,null,de)},Ye.createRef=function(){return{current:null}},Ye.forwardRef=function(U){return{$$typeof:s,render:U}},Ye.isValidElement=M,Ye.lazy=function(U){return{$$typeof:f,_payload:{_status:-1,_result:U},_init:B}},Ye.memo=function(U,Y){return{$$typeof:u,type:U,compare:Y===void 0?null:Y}},Ye.startTransition=function(U){var Y=w.T,Q={};w.T=Q;try{var J=U(),de=w.S;de!==null&&de(Q,J),typeof J=="object"&&J!==null&&typeof J.then=="function"&&J.then(H,q)}catch(ve){q(ve)}finally{w.T=Y}},Ye.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},Ye.use=function(U){return w.H.use(U)},Ye.useActionState=function(U,Y,Q){return w.H.useActionState(U,Y,Q)},Ye.useCallback=function(U,Y){return w.H.useCallback(U,Y)},Ye.useContext=function(U){return w.H.useContext(U)},Ye.useDebugValue=function(){},Ye.useDeferredValue=function(U,Y){return w.H.useDeferredValue(U,Y)},Ye.useEffect=function(U,Y,Q){var J=w.H;if(typeof Q=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return J.useEffect(U,Y)},Ye.useId=function(){return w.H.useId()},Ye.useImperativeHandle=function(U,Y,Q){return w.H.useImperativeHandle(U,Y,Q)},Ye.useInsertionEffect=function(U,Y){return w.H.useInsertionEffect(U,Y)},Ye.useLayoutEffect=function(U,Y){return w.H.useLayoutEffect(U,Y)},Ye.useMemo=function(U,Y){return w.H.useMemo(U,Y)},Ye.useOptimistic=function(U,Y){return w.H.useOptimistic(U,Y)},Ye.useReducer=function(U,Y,Q){return w.H.useReducer(U,Y,Q)},Ye.useRef=function(U){return w.H.useRef(U)},Ye.useState=function(U){return w.H.useState(U)},Ye.useSyncExternalStore=function(U,Y,Q){return w.H.useSyncExternalStore(U,Y,Q)},Ye.useTransition=function(){return w.H.useTransition()},Ye.version="19.1.1",Ye}var DF;function gC(){return DF||(DF=1,SE.exports=uQ()),SE.exports}var Qw=gC();const bu=Yg(Qw);var xE={exports:{}},sp={},_E={exports:{}},EE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OF;function lQ(){return OF||(OF=1,(function(e){function t(L,B){var q=L.length;L.push(B);e:for(;0<q;){var H=q-1>>>1,U=L[H];if(0<i(U,B))L[H]=B,L[q]=U,q=H;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var B=L[0],q=L.pop();if(q!==B){L[0]=q;e:for(var H=0,U=L.length,Y=U>>>1;H<Y;){var Q=2*(H+1)-1,J=L[Q],de=Q+1,ve=L[de];if(0>i(J,q))de<U&&0>i(ve,J)?(L[H]=ve,L[de]=q,H=de):(L[H]=J,L[Q]=q,H=Q);else if(de<U&&0>i(ve,q))L[H]=ve,L[de]=q,H=de;else break e}}return B}function i(L,B){var q=L.sortIndex-B.sortIndex;return q!==0?q:L.id-B.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],f=1,d=null,p=3,g=!1,y=!1,v=!1,b=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;function A(L){for(var B=n(u);B!==null;){if(B.callback===null)r(u);else if(B.startTime<=L)r(u),B.sortIndex=B.expirationTime,t(l,B);else break;B=n(u)}}function w(L){if(v=!1,A(L),!y)if(n(l)!==null)y=!0,C||(C=!0,z());else{var B=n(u);B!==null&&N(w,B.startTime-L)}}var C=!1,D=-1,I=5,M=-1;function k(){return b?!0:!(e.unstable_now()-M<I)}function R(){if(b=!1,C){var L=e.unstable_now();M=L;var B=!0;try{e:{y=!1,v&&(v=!1,_(D),D=-1),g=!0;var q=p;try{t:{for(A(L),d=n(l);d!==null&&!(d.expirationTime>L&&k());){var H=d.callback;if(typeof H=="function"){d.callback=null,p=d.priorityLevel;var U=H(d.expirationTime<=L);if(L=e.unstable_now(),typeof U=="function"){d.callback=U,A(L),B=!0;break t}d===n(l)&&r(l),A(L)}else r(l);d=n(l)}if(d!==null)B=!0;else{var Y=n(u);Y!==null&&N(w,Y.startTime-L),B=!1}}break e}finally{d=null,p=q,g=!1}B=void 0}}finally{B?z():C=!1}}}var z;if(typeof T=="function")z=function(){T(R)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,$=P.port2;P.port1.onmessage=R,z=function(){$.postMessage(null)}}else z=function(){x(R,0)};function N(L,B){D=x(function(){L(e.unstable_now())},B)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(L){switch(p){case 1:case 2:case 3:var B=3;break;default:B=p}var q=p;p=B;try{return L()}finally{p=q}},e.unstable_requestPaint=function(){b=!0},e.unstable_runWithPriority=function(L,B){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var q=p;p=L;try{return B()}finally{p=q}},e.unstable_scheduleCallback=function(L,B,q){var H=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?H+q:H):q=H,L){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=q+U,L={id:f++,callback:B,priorityLevel:L,startTime:q,expirationTime:U,sortIndex:-1},q>H?(L.sortIndex=q,t(u,L),n(l)===null&&L===n(u)&&(v?(_(D),D=-1):v=!0,N(w,q-H))):(L.sortIndex=U,t(l,L),y||g||(y=!0,C||(C=!0,z()))),L},e.unstable_shouldYield=k,e.unstable_wrapCallback=function(L){var B=p;return function(){var q=p;p=B;try{return L.apply(this,arguments)}finally{p=q}}}})(EE)),EE}var IF;function cQ(){return IF||(IF=1,_E.exports=lQ()),_E.exports}var wE={exports:{}},Xn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MF;function fQ(){if(MF)return Xn;MF=1;var e=gC();function t(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)u+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function o(l,u,f){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:d==null?null:""+d,children:l,containerInfo:u,implementation:f}}var a=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function s(l,u){if(l==="font")return"";if(typeof u=="string")return u==="use-credentials"?u:""}return Xn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Xn.createPortal=function(l,u){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)throw Error(t(299));return o(l,u,null,f)},Xn.flushSync=function(l){var u=a.T,f=r.p;try{if(a.T=null,r.p=2,l)return l()}finally{a.T=u,r.p=f,r.d.f()}},Xn.preconnect=function(l,u){typeof l=="string"&&(u?(u=u.crossOrigin,u=typeof u=="string"?u==="use-credentials"?u:"":void 0):u=null,r.d.C(l,u))},Xn.prefetchDNS=function(l){typeof l=="string"&&r.d.D(l)},Xn.preinit=function(l,u){if(typeof l=="string"&&u&&typeof u.as=="string"){var f=u.as,d=s(f,u.crossOrigin),p=typeof u.integrity=="string"?u.integrity:void 0,g=typeof u.fetchPriority=="string"?u.fetchPriority:void 0;f==="style"?r.d.S(l,typeof u.precedence=="string"?u.precedence:void 0,{crossOrigin:d,integrity:p,fetchPriority:g}):f==="script"&&r.d.X(l,{crossOrigin:d,integrity:p,fetchPriority:g,nonce:typeof u.nonce=="string"?u.nonce:void 0})}},Xn.preinitModule=function(l,u){if(typeof l=="string")if(typeof u=="object"&&u!==null){if(u.as==null||u.as==="script"){var f=s(u.as,u.crossOrigin);r.d.M(l,{crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0})}}else u==null&&r.d.M(l)},Xn.preload=function(l,u){if(typeof l=="string"&&typeof u=="object"&&u!==null&&typeof u.as=="string"){var f=u.as,d=s(f,u.crossOrigin);r.d.L(l,f,{crossOrigin:d,integrity:typeof u.integrity=="string"?u.integrity:void 0,nonce:typeof u.nonce=="string"?u.nonce:void 0,type:typeof u.type=="string"?u.type:void 0,fetchPriority:typeof u.fetchPriority=="string"?u.fetchPriority:void 0,referrerPolicy:typeof u.referrerPolicy=="string"?u.referrerPolicy:void 0,imageSrcSet:typeof u.imageSrcSet=="string"?u.imageSrcSet:void 0,imageSizes:typeof u.imageSizes=="string"?u.imageSizes:void 0,media:typeof u.media=="string"?u.media:void 0})}},Xn.preloadModule=function(l,u){if(typeof l=="string")if(u){var f=s(u.as,u.crossOrigin);r.d.m(l,{as:typeof u.as=="string"&&u.as!=="script"?u.as:void 0,crossOrigin:f,integrity:typeof u.integrity=="string"?u.integrity:void 0})}else r.d.m(l)},Xn.requestFormReset=function(l){r.d.r(l)},Xn.unstable_batchedUpdates=function(l,u){return l(u)},Xn.useFormState=function(l,u,f){return a.H.useFormState(l,u,f)},Xn.useFormStatus=function(){return a.H.useHostTransitionStatus()},Xn.version="19.1.1",Xn}var RF;function dQ(){if(RF)return wE.exports;RF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wE.exports=fQ(),wE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kF;function hQ(){if(kF)return sp;kF=1;var e=cQ(),t=gC(),n=dQ();function r(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function o(c){var h=c,m=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(m=h.return),c=h.return;while(c)}return h.tag===3?m:null}function a(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function s(c){if(o(c)!==c)throw Error(r(188))}function l(c){var h=c.alternate;if(!h){if(h=o(c),h===null)throw Error(r(188));return h!==c?null:c}for(var m=c,S=h;;){var E=m.return;if(E===null)break;var O=E.alternate;if(O===null){if(S=E.return,S!==null){m=S;continue}break}if(E.child===O.child){for(O=E.child;O;){if(O===m)return s(E),c;if(O===S)return s(E),h;O=O.sibling}throw Error(r(188))}if(m.return!==S.return)m=E,S=O;else{for(var F=!1,j=E.child;j;){if(j===m){F=!0,m=E,S=O;break}if(j===S){F=!0,S=E,m=O;break}j=j.sibling}if(!F){for(j=O.child;j;){if(j===m){F=!0,m=O,S=E;break}if(j===S){F=!0,S=O,m=E;break}j=j.sibling}if(!F)throw Error(r(189))}}if(m.alternate!==S)throw Error(r(190))}if(m.tag!==3)throw Error(r(188));return m.stateNode.current===m?c:h}function u(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=u(c),h!==null)return h;c=c.sibling}return null}var f=Object.assign,d=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.consumer"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),C=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),k=Symbol.for("react.memo_cache_sentinel"),R=Symbol.iterator;function z(c){return c===null||typeof c!="object"?null:(c=R&&c[R]||c["@@iterator"],typeof c=="function"?c:null)}var P=Symbol.for("react.client.reference");function $(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===P?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case w:return"Suspense";case C:return"SuspenseList";case M:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case g:return"Portal";case T:return(c.displayName||"Context")+".Provider";case _:return(c._context.displayName||"Context")+".Consumer";case A:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case D:return h=c.displayName||null,h!==null?h:$(c.type)||"Memo";case I:h=c._payload,c=c._init;try{return $(c(h))}catch{}}return null}var N=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q={pending:!1,data:null,method:null,action:null},H=[],U=-1;function Y(c){return{current:c}}function Q(c){0>U||(c.current=H[U],H[U]=null,U--)}function J(c,h){U++,H[U]=c.current,c.current=h}var de=Y(null),ve=Y(null),we=Y(null),Be=Y(null);function Ve(c,h){switch(J(we,h),J(ve,c),J(de,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?J3(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=J3(h),c=eF(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}Q(de),J(de,c)}function me(){Q(de),Q(ve),Q(we)}function $e(c){c.memoizedState!==null&&J(Be,c);var h=de.current,m=eF(h,c.type);h!==m&&(J(ve,c),J(de,m))}function De(c){ve.current===c&&(Q(de),Q(ve)),Be.current===c&&(Q(Be),tp._currentValue=q)}var ue=Object.prototype.hasOwnProperty,Et=e.unstable_scheduleCallback,nt=e.unstable_cancelCallback,$t=e.unstable_shouldYield,Gt=e.unstable_requestPaint,Ot=e.unstable_now,Lc=e.unstable_getCurrentPriorityLevel,Bm=e.unstable_ImmediatePriority,fh=e.unstable_UserBlockingPriority,tl=e.unstable_NormalPriority,Vm=e.unstable_LowPriority,As=e.unstable_IdlePriority,lx=e.log,Hm=e.unstable_setDisableYieldValue,Ao=null,qn=null;function Ma(c){if(typeof lx=="function"&&Hm(c),qn&&typeof qn.setStrictMode=="function")try{qn.setStrictMode(Ao,c)}catch{}}var Gn=Math.clz32?Math.clz32:Cs,cx=Math.log,Ts=Math.LN2;function Cs(c){return c>>>=0,c===0?32:31-(cx(c)/Ts|0)|0}var Ds=256,ge=4194304;function Oe(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function He(c,h,m){var S=c.pendingLanes;if(S===0)return 0;var E=0,O=c.suspendedLanes,F=c.pingedLanes;c=c.warmLanes;var j=S&134217727;return j!==0?(S=j&~O,S!==0?E=Oe(S):(F&=j,F!==0?E=Oe(F):m||(m=j&~c,m!==0&&(E=Oe(m))))):(j=S&~O,j!==0?E=Oe(j):F!==0?E=Oe(F):m||(m=S&~c,m!==0&&(E=Oe(m)))),E===0?0:h!==0&&h!==E&&(h&O)===0&&(O=E&-E,m=h&-h,O>=m||O===32&&(m&4194048)!==0)?h:E}function Qe(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function ht(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var c=Ds;return Ds<<=1,(Ds&4194048)===0&&(Ds=256),c}function Wr(){var c=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),c}function Ra(c){for(var h=[],m=0;31>m;m++)h.push(c);return h}function ka(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function vi(c,h,m,S,E,O){var F=c.pendingLanes;c.pendingLanes=m,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=m,c.entangledLanes&=m,c.errorRecoveryDisabledLanes&=m,c.shellSuspendCounter=0;var j=c.entanglements,V=c.expirationTimes,Z=c.hiddenUpdates;for(m=F&~m;0<m;){var ie=31-Gn(m),se=1<<ie;j[ie]=0,V[ie]=-1;var K=Z[ie];if(K!==null)for(Z[ie]=null,ie=0;ie<K.length;ie++){var ee=K[ie];ee!==null&&(ee.lane&=-536870913)}m&=~se}S!==0&&Os(c,S,0),O!==0&&E===0&&c.tag!==0&&(c.suspendedLanes|=O&~(F&~h))}function Os(c,h,m){c.pendingLanes|=h,c.suspendedLanes&=~h;var S=31-Gn(h);c.entangledLanes|=h,c.entanglements[S]=c.entanglements[S]|1073741824|m&4194090}function nl(c,h){var m=c.entangledLanes|=h;for(c=c.entanglements;m;){var S=31-Gn(m),E=1<<S;E&h|c[S]&h&&(c[S]|=h),m&=~E}}function Xi(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function bi(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function qm(){var c=B.p;return c!==0?c:(c=window.event,c===void 0?32:bF(c.type))}function XY(c,h){var m=B.p;try{return B.p=c,h()}finally{B.p=m}}var Is=Math.random().toString(36).slice(2),Yn="__reactFiber$"+Is,Or="__reactProps$"+Is,jc="__reactContainer$"+Is,fx="__reactEvents$"+Is,QY="__reactListeners$"+Is,ZY="__reactHandles$"+Is,UR="__reactResources$"+Is,dh="__reactMarker$"+Is;function dx(c){delete c[Yn],delete c[Or],delete c[fx],delete c[QY],delete c[ZY]}function Uc(c){var h=c[Yn];if(h)return h;for(var m=c.parentNode;m;){if(h=m[jc]||m[Yn]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(c=iF(c);c!==null;){if(m=c[Yn])return m;c=iF(c)}return h}c=m,m=c.parentNode}return null}function Bc(c){if(c=c[Yn]||c[jc]){var h=c.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return c}return null}function hh(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(r(33))}function Vc(c){var h=c[UR];return h||(h=c[UR]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function bn(c){c[dh]=!0}var BR=new Set,VR={};function rl(c,h){Hc(c,h),Hc(c+"Capture",h)}function Hc(c,h){for(VR[c]=h,c=0;c<h.length;c++)BR.add(h[c])}var KY=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),HR={},qR={};function JY(c){return ue.call(qR,c)?!0:ue.call(HR,c)?!1:KY.test(c)?qR[c]=!0:(HR[c]=!0,!1)}function Gm(c,h,m){if(JY(h))if(m===null)c.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var S=h.toLowerCase().slice(0,5);if(S!=="data-"&&S!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+m)}}function Ym(c,h,m){if(m===null)c.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+m)}}function To(c,h,m,S){if(S===null)c.removeAttribute(m);else{switch(typeof S){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(m);return}c.setAttributeNS(h,m,""+S)}}var hx,GR;function qc(c){if(hx===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);hx=h&&h[1]||"",GR=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+hx+c+GR}var px=!1;function gx(c,h){if(!c||px)return"";px=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var S={DetermineComponentFrameRoot:function(){try{if(h){var se=function(){throw Error()};if(Object.defineProperty(se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(se,[])}catch(ee){var K=ee}Reflect.construct(c,[],se)}else{try{se.call()}catch(ee){K=ee}c.call(se.prototype)}}else{try{throw Error()}catch(ee){K=ee}(se=c())&&typeof se.catch=="function"&&se.catch(function(){})}}catch(ee){if(ee&&K&&typeof ee.stack=="string")return[ee.stack,K.stack]}return[null,null]}};S.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(S.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(S.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var O=S.DetermineComponentFrameRoot(),F=O[0],j=O[1];if(F&&j){var V=F.split(`
`),Z=j.split(`
`);for(E=S=0;S<V.length&&!V[S].includes("DetermineComponentFrameRoot");)S++;for(;E<Z.length&&!Z[E].includes("DetermineComponentFrameRoot");)E++;if(S===V.length||E===Z.length)for(S=V.length-1,E=Z.length-1;1<=S&&0<=E&&V[S]!==Z[E];)E--;for(;1<=S&&0<=E;S--,E--)if(V[S]!==Z[E]){if(S!==1||E!==1)do if(S--,E--,0>E||V[S]!==Z[E]){var ie=`
`+V[S].replace(" at new "," at ");return c.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",c.displayName)),ie}while(1<=S&&0<=E);break}}}finally{px=!1,Error.prepareStackTrace=m}return(m=c?c.displayName||c.name:"")?qc(m):""}function eW(c){switch(c.tag){case 26:case 27:case 5:return qc(c.type);case 16:return qc("Lazy");case 13:return qc("Suspense");case 19:return qc("SuspenseList");case 0:case 15:return gx(c.type,!1);case 11:return gx(c.type.render,!1);case 1:return gx(c.type,!0);case 31:return qc("Activity");default:return""}}function YR(c){try{var h="";do h+=eW(c),c=c.return;while(c);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Si(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function WR(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function tW(c){var h=WR(c)?"checked":"value",m=Object.getOwnPropertyDescriptor(c.constructor.prototype,h),S=""+c[h];if(!c.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var E=m.get,O=m.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return E.call(this)},set:function(F){S=""+F,O.call(this,F)}}),Object.defineProperty(c,h,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(F){S=""+F},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function Wm(c){c._valueTracker||(c._valueTracker=tW(c))}function XR(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var m=h.getValue(),S="";return c&&(S=WR(c)?c.checked?"true":"false":c.value),c=S,c!==m?(h.setValue(c),!0):!1}function Xm(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var nW=/[\n"\\]/g;function xi(c){return c.replace(nW,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function mx(c,h,m,S,E,O,F,j){c.name="",F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"?c.type=F:c.removeAttribute("type"),h!=null?F==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Si(h)):c.value!==""+Si(h)&&(c.value=""+Si(h)):F!=="submit"&&F!=="reset"||c.removeAttribute("value"),h!=null?yx(c,F,Si(h)):m!=null?yx(c,F,Si(m)):S!=null&&c.removeAttribute("value"),E==null&&O!=null&&(c.defaultChecked=!!O),E!=null&&(c.checked=E&&typeof E!="function"&&typeof E!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?c.name=""+Si(j):c.removeAttribute("name")}function QR(c,h,m,S,E,O,F,j){if(O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"&&(c.type=O),h!=null||m!=null){if(!(O!=="submit"&&O!=="reset"||h!=null))return;m=m!=null?""+Si(m):"",h=h!=null?""+Si(h):m,j||h===c.value||(c.value=h),c.defaultValue=h}S=S??E,S=typeof S!="function"&&typeof S!="symbol"&&!!S,c.checked=j?c.checked:!!S,c.defaultChecked=!!S,F!=null&&typeof F!="function"&&typeof F!="symbol"&&typeof F!="boolean"&&(c.name=F)}function yx(c,h,m){h==="number"&&Xm(c.ownerDocument)===c||c.defaultValue===""+m||(c.defaultValue=""+m)}function Gc(c,h,m,S){if(c=c.options,h){h={};for(var E=0;E<m.length;E++)h["$"+m[E]]=!0;for(m=0;m<c.length;m++)E=h.hasOwnProperty("$"+c[m].value),c[m].selected!==E&&(c[m].selected=E),E&&S&&(c[m].defaultSelected=!0)}else{for(m=""+Si(m),h=null,E=0;E<c.length;E++){if(c[E].value===m){c[E].selected=!0,S&&(c[E].defaultSelected=!0);return}h!==null||c[E].disabled||(h=c[E])}h!==null&&(h.selected=!0)}}function ZR(c,h,m){if(h!=null&&(h=""+Si(h),h!==c.value&&(c.value=h),m==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=m!=null?""+Si(m):""}function KR(c,h,m,S){if(h==null){if(S!=null){if(m!=null)throw Error(r(92));if(N(S)){if(1<S.length)throw Error(r(93));S=S[0]}m=S}m==null&&(m=""),h=m}m=Si(h),c.defaultValue=m,S=c.textContent,S===m&&S!==""&&S!==null&&(c.value=S)}function Yc(c,h){if(h){var m=c.firstChild;if(m&&m===c.lastChild&&m.nodeType===3){m.nodeValue=h;return}}c.textContent=h}var rW=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function JR(c,h,m){var S=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?S?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":S?c.setProperty(h,m):typeof m!="number"||m===0||rW.has(h)?h==="float"?c.cssFloat=m:c[h]=(""+m).trim():c[h]=m+"px"}function ek(c,h,m){if(h!=null&&typeof h!="object")throw Error(r(62));if(c=c.style,m!=null){for(var S in m)!m.hasOwnProperty(S)||h!=null&&h.hasOwnProperty(S)||(S.indexOf("--")===0?c.setProperty(S,""):S==="float"?c.cssFloat="":c[S]="");for(var E in h)S=h[E],h.hasOwnProperty(E)&&m[E]!==S&&JR(c,E,S)}else for(var O in h)h.hasOwnProperty(O)&&JR(c,O,h[O])}function vx(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var iW=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aW=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Qm(c){return aW.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}var bx=null;function Sx(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Wc=null,Xc=null;function tk(c){var h=Bc(c);if(h&&(c=h.stateNode)){var m=c[Or]||null;e:switch(c=h.stateNode,h.type){case"input":if(mx(c,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=c;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+xi(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var S=m[h];if(S!==c&&S.form===c.form){var E=S[Or]||null;if(!E)throw Error(r(90));mx(S,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(h=0;h<m.length;h++)S=m[h],S.form===c.form&&XR(S)}break e;case"textarea":ZR(c,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Gc(c,!!m.multiple,h,!1)}}}var xx=!1;function nk(c,h,m){if(xx)return c(h,m);xx=!0;try{var S=c(h);return S}finally{if(xx=!1,(Wc!==null||Xc!==null)&&(Fy(),Wc&&(h=Wc,c=Xc,Xc=Wc=null,tk(h),c)))for(h=0;h<c.length;h++)tk(c[h])}}function ph(c,h){var m=c.stateNode;if(m===null)return null;var S=m[Or]||null;if(S===null)return null;m=S[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(c=c.type,S=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!S;break e;default:c=!1}if(c)return null;if(m&&typeof m!="function")throw Error(r(231,h,typeof m));return m}var Co=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_x=!1;if(Co)try{var gh={};Object.defineProperty(gh,"passive",{get:function(){_x=!0}}),window.addEventListener("test",gh,gh),window.removeEventListener("test",gh,gh)}catch{_x=!1}var Ms=null,Ex=null,Zm=null;function rk(){if(Zm)return Zm;var c,h=Ex,m=h.length,S,E="value"in Ms?Ms.value:Ms.textContent,O=E.length;for(c=0;c<m&&h[c]===E[c];c++);var F=m-c;for(S=1;S<=F&&h[m-S]===E[O-S];S++);return Zm=E.slice(c,1<S?1-S:void 0)}function Km(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function Jm(){return!0}function ik(){return!1}function Ir(c){function h(m,S,E,O,F){this._reactName=m,this._targetInst=E,this.type=S,this.nativeEvent=O,this.target=F,this.currentTarget=null;for(var j in c)c.hasOwnProperty(j)&&(m=c[j],this[j]=m?m(O):O[j]);return this.isDefaultPrevented=(O.defaultPrevented!=null?O.defaultPrevented:O.returnValue===!1)?Jm:ik,this.isPropagationStopped=ik,this}return f(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Jm)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Jm)},persist:function(){},isPersistent:Jm}),h}var il={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ey=Ir(il),mh=f({},il,{view:0,detail:0}),oW=Ir(mh),wx,Ax,yh,ty=f({},mh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cx,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==yh&&(yh&&c.type==="mousemove"?(wx=c.screenX-yh.screenX,Ax=c.screenY-yh.screenY):Ax=wx=0,yh=c),wx)},movementY:function(c){return"movementY"in c?c.movementY:Ax}}),ak=Ir(ty),sW=f({},ty,{dataTransfer:0}),uW=Ir(sW),lW=f({},mh,{relatedTarget:0}),Tx=Ir(lW),cW=f({},il,{animationName:0,elapsedTime:0,pseudoElement:0}),fW=Ir(cW),dW=f({},il,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),hW=Ir(dW),pW=f({},il,{data:0}),ok=Ir(pW),gW={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mW={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yW={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vW(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=yW[c])?!!h[c]:!1}function Cx(){return vW}var bW=f({},mh,{key:function(c){if(c.key){var h=gW[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Km(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?mW[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cx,charCode:function(c){return c.type==="keypress"?Km(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Km(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),SW=Ir(bW),xW=f({},ty,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sk=Ir(xW),_W=f({},mh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cx}),EW=Ir(_W),wW=f({},il,{propertyName:0,elapsedTime:0,pseudoElement:0}),AW=Ir(wW),TW=f({},ty,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),CW=Ir(TW),DW=f({},il,{newState:0,oldState:0}),OW=Ir(DW),IW=[9,13,27,32],Dx=Co&&"CompositionEvent"in window,vh=null;Co&&"documentMode"in document&&(vh=document.documentMode);var MW=Co&&"TextEvent"in window&&!vh,uk=Co&&(!Dx||vh&&8<vh&&11>=vh),lk=" ",ck=!1;function fk(c,h){switch(c){case"keyup":return IW.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dk(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Qc=!1;function RW(c,h){switch(c){case"compositionend":return dk(h);case"keypress":return h.which!==32?null:(ck=!0,lk);case"textInput":return c=h.data,c===lk&&ck?null:c;default:return null}}function kW(c,h){if(Qc)return c==="compositionend"||!Dx&&fk(c,h)?(c=rk(),Zm=Ex=Ms=null,Qc=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return uk&&h.locale!=="ko"?null:h.data;default:return null}}var NW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hk(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!NW[c.type]:h==="textarea"}function pk(c,h,m,S){Wc?Xc?Xc.push(S):Xc=[S]:Wc=S,h=Uy(h,"onChange"),0<h.length&&(m=new ey("onChange","change",null,m,S),c.push({event:m,listeners:h}))}var bh=null,Sh=null;function FW(c){W3(c,0)}function ny(c){var h=hh(c);if(XR(h))return c}function gk(c,h){if(c==="change")return h}var mk=!1;if(Co){var Ox;if(Co){var Ix="oninput"in document;if(!Ix){var yk=document.createElement("div");yk.setAttribute("oninput","return;"),Ix=typeof yk.oninput=="function"}Ox=Ix}else Ox=!1;mk=Ox&&(!document.documentMode||9<document.documentMode)}function vk(){bh&&(bh.detachEvent("onpropertychange",bk),Sh=bh=null)}function bk(c){if(c.propertyName==="value"&&ny(Sh)){var h=[];pk(h,Sh,c,Sx(c)),nk(FW,h)}}function PW(c,h,m){c==="focusin"?(vk(),bh=h,Sh=m,bh.attachEvent("onpropertychange",bk)):c==="focusout"&&vk()}function $W(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return ny(Sh)}function zW(c,h){if(c==="click")return ny(h)}function LW(c,h){if(c==="input"||c==="change")return ny(h)}function jW(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Xr=typeof Object.is=="function"?Object.is:jW;function xh(c,h){if(Xr(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var m=Object.keys(c),S=Object.keys(h);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var E=m[S];if(!ue.call(h,E)||!Xr(c[E],h[E]))return!1}return!0}function Sk(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function xk(c,h){var m=Sk(c);c=0;for(var S;m;){if(m.nodeType===3){if(S=c+m.textContent.length,c<=h&&S>=h)return{node:m,offset:h-c};c=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Sk(m)}}function _k(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?_k(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function Ek(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=Xm(c.document);h instanceof c.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)c=h.contentWindow;else break;h=Xm(c.document)}return h}function Mx(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var UW=Co&&"documentMode"in document&&11>=document.documentMode,Zc=null,Rx=null,_h=null,kx=!1;function wk(c,h,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;kx||Zc==null||Zc!==Xm(S)||(S=Zc,"selectionStart"in S&&Mx(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),_h&&xh(_h,S)||(_h=S,S=Uy(Rx,"onSelect"),0<S.length&&(h=new ey("onSelect","select",null,h,m),c.push({event:h,listeners:S}),h.target=Zc)))}function al(c,h){var m={};return m[c.toLowerCase()]=h.toLowerCase(),m["Webkit"+c]="webkit"+h,m["Moz"+c]="moz"+h,m}var Kc={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionrun:al("Transition","TransitionRun"),transitionstart:al("Transition","TransitionStart"),transitioncancel:al("Transition","TransitionCancel"),transitionend:al("Transition","TransitionEnd")},Nx={},Ak={};Co&&(Ak=document.createElement("div").style,"AnimationEvent"in window||(delete Kc.animationend.animation,delete Kc.animationiteration.animation,delete Kc.animationstart.animation),"TransitionEvent"in window||delete Kc.transitionend.transition);function ol(c){if(Nx[c])return Nx[c];if(!Kc[c])return c;var h=Kc[c],m;for(m in h)if(h.hasOwnProperty(m)&&m in Ak)return Nx[c]=h[m];return c}var Tk=ol("animationend"),Ck=ol("animationiteration"),Dk=ol("animationstart"),BW=ol("transitionrun"),VW=ol("transitionstart"),HW=ol("transitioncancel"),Ok=ol("transitionend"),Ik=new Map,Fx="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Fx.push("scrollEnd");function Qi(c,h){Ik.set(c,h),rl(h,[c])}var Mk=new WeakMap;function _i(c,h){if(typeof c=="object"&&c!==null){var m=Mk.get(c);return m!==void 0?m:(h={value:c,source:h,stack:YR(h)},Mk.set(c,h),h)}return{value:c,source:h,stack:YR(h)}}var Ei=[],Jc=0,Px=0;function ry(){for(var c=Jc,h=Px=Jc=0;h<c;){var m=Ei[h];Ei[h++]=null;var S=Ei[h];Ei[h++]=null;var E=Ei[h];Ei[h++]=null;var O=Ei[h];if(Ei[h++]=null,S!==null&&E!==null){var F=S.pending;F===null?E.next=E:(E.next=F.next,F.next=E),S.pending=E}O!==0&&Rk(m,E,O)}}function iy(c,h,m,S){Ei[Jc++]=c,Ei[Jc++]=h,Ei[Jc++]=m,Ei[Jc++]=S,Px|=S,c.lanes|=S,c=c.alternate,c!==null&&(c.lanes|=S)}function $x(c,h,m,S){return iy(c,h,m,S),ay(c)}function ef(c,h){return iy(c,null,null,h),ay(c)}function Rk(c,h,m){c.lanes|=m;var S=c.alternate;S!==null&&(S.lanes|=m);for(var E=!1,O=c.return;O!==null;)O.childLanes|=m,S=O.alternate,S!==null&&(S.childLanes|=m),O.tag===22&&(c=O.stateNode,c===null||c._visibility&1||(E=!0)),c=O,O=O.return;return c.tag===3?(O=c.stateNode,E&&h!==null&&(E=31-Gn(m),c=O.hiddenUpdates,S=c[E],S===null?c[E]=[h]:S.push(h),h.lane=m|536870912),O):null}function ay(c){if(50<Yh)throw Yh=0,V_=null,Error(r(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var tf={};function qW(c,h,m,S){this.tag=c,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(c,h,m,S){return new qW(c,h,m,S)}function zx(c){return c=c.prototype,!(!c||!c.isReactComponent)}function Do(c,h){var m=c.alternate;return m===null?(m=Qr(c.tag,h,c.key,c.mode),m.elementType=c.elementType,m.type=c.type,m.stateNode=c.stateNode,m.alternate=c,c.alternate=m):(m.pendingProps=h,m.type=c.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=c.flags&65011712,m.childLanes=c.childLanes,m.lanes=c.lanes,m.child=c.child,m.memoizedProps=c.memoizedProps,m.memoizedState=c.memoizedState,m.updateQueue=c.updateQueue,h=c.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=c.sibling,m.index=c.index,m.ref=c.ref,m.refCleanup=c.refCleanup,m}function kk(c,h){c.flags&=65011714;var m=c.alternate;return m===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=m.childLanes,c.lanes=m.lanes,c.child=m.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=m.memoizedProps,c.memoizedState=m.memoizedState,c.updateQueue=m.updateQueue,c.type=m.type,h=m.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function oy(c,h,m,S,E,O){var F=0;if(S=c,typeof c=="function")zx(c)&&(F=1);else if(typeof c=="string")F=YX(c,m,de.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case M:return c=Qr(31,m,h,E),c.elementType=M,c.lanes=O,c;case y:return sl(m.children,E,O,h);case v:F=8,E|=24;break;case b:return c=Qr(12,m,h,E|2),c.elementType=b,c.lanes=O,c;case w:return c=Qr(13,m,h,E),c.elementType=w,c.lanes=O,c;case C:return c=Qr(19,m,h,E),c.elementType=C,c.lanes=O,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case x:case T:F=10;break e;case _:F=9;break e;case A:F=11;break e;case D:F=14;break e;case I:F=16,S=null;break e}F=29,m=Error(r(130,c===null?"null":typeof c,"")),S=null}return h=Qr(F,m,h,E),h.elementType=c,h.type=S,h.lanes=O,h}function sl(c,h,m,S){return c=Qr(7,c,S,h),c.lanes=m,c}function Lx(c,h,m){return c=Qr(6,c,null,h),c.lanes=m,c}function jx(c,h,m){return h=Qr(4,c.children!==null?c.children:[],c.key,h),h.lanes=m,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var nf=[],rf=0,sy=null,uy=0,wi=[],Ai=0,ul=null,Oo=1,Io="";function ll(c,h){nf[rf++]=uy,nf[rf++]=sy,sy=c,uy=h}function Nk(c,h,m){wi[Ai++]=Oo,wi[Ai++]=Io,wi[Ai++]=ul,ul=c;var S=Oo;c=Io;var E=32-Gn(S)-1;S&=~(1<<E),m+=1;var O=32-Gn(h)+E;if(30<O){var F=E-E%5;O=(S&(1<<F)-1).toString(32),S>>=F,E-=F,Oo=1<<32-Gn(h)+E|m<<E|S,Io=O+c}else Oo=1<<O|m<<E|S,Io=c}function Ux(c){c.return!==null&&(ll(c,1),Nk(c,1,0))}function Bx(c){for(;c===sy;)sy=nf[--rf],nf[rf]=null,uy=nf[--rf],nf[rf]=null;for(;c===ul;)ul=wi[--Ai],wi[Ai]=null,Io=wi[--Ai],wi[Ai]=null,Oo=wi[--Ai],wi[Ai]=null}var cr=null,Yt=null,pt=!1,cl=null,Na=!1,Vx=Error(r(519));function fl(c){var h=Error(r(418,""));throw Ah(_i(h,c)),Vx}function Fk(c){var h=c.stateNode,m=c.type,S=c.memoizedProps;switch(h[Yn]=c,h[Or]=S,m){case"dialog":tt("cancel",h),tt("close",h);break;case"iframe":case"object":case"embed":tt("load",h);break;case"video":case"audio":for(m=0;m<Xh.length;m++)tt(Xh[m],h);break;case"source":tt("error",h);break;case"img":case"image":case"link":tt("error",h),tt("load",h);break;case"details":tt("toggle",h);break;case"input":tt("invalid",h),QR(h,S.value,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name,!0),Wm(h);break;case"select":tt("invalid",h);break;case"textarea":tt("invalid",h),KR(h,S.value,S.defaultValue,S.children),Wm(h)}m=S.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||S.suppressHydrationWarning===!0||K3(h.textContent,m)?(S.popover!=null&&(tt("beforetoggle",h),tt("toggle",h)),S.onScroll!=null&&tt("scroll",h),S.onScrollEnd!=null&&tt("scrollend",h),S.onClick!=null&&(h.onclick=By),h=!0):h=!1,h||fl(c)}function Pk(c){for(cr=c.return;cr;)switch(cr.tag){case 5:case 13:Na=!1;return;case 27:case 3:Na=!0;return;default:cr=cr.return}}function Eh(c){if(c!==cr)return!1;if(!pt)return Pk(c),pt=!0,!1;var h=c.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=c.type,m=!(m!=="form"&&m!=="button")||aE(c.type,c.memoizedProps)),m=!m),m&&Yt&&fl(c),Pk(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,h=0;c;){if(c.nodeType===8)if(m=c.data,m==="/$"){if(h===0){Yt=Ki(c.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;c=c.nextSibling}Yt=null}}else h===27?(h=Yt,Ys(c.type)?(c=lE,lE=null,Yt=c):Yt=h):Yt=cr?Ki(c.stateNode.nextSibling):null;return!0}function wh(){Yt=cr=null,pt=!1}function $k(){var c=cl;return c!==null&&(kr===null?kr=c:kr.push.apply(kr,c),cl=null),c}function Ah(c){cl===null?cl=[c]:cl.push(c)}var Hx=Y(null),dl=null,Mo=null;function Rs(c,h,m){J(Hx,h._currentValue),h._currentValue=m}function Ro(c){c._currentValue=Hx.current,Q(Hx)}function qx(c,h,m){for(;c!==null;){var S=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,S!==null&&(S.childLanes|=h)):S!==null&&(S.childLanes&h)!==h&&(S.childLanes|=h),c===m)break;c=c.return}}function Gx(c,h,m,S){var E=c.child;for(E!==null&&(E.return=c);E!==null;){var O=E.dependencies;if(O!==null){var F=E.child;O=O.firstContext;e:for(;O!==null;){var j=O;O=E;for(var V=0;V<h.length;V++)if(j.context===h[V]){O.lanes|=m,j=O.alternate,j!==null&&(j.lanes|=m),qx(O.return,m,c),S||(F=null);break e}O=j.next}}else if(E.tag===18){if(F=E.return,F===null)throw Error(r(341));F.lanes|=m,O=F.alternate,O!==null&&(O.lanes|=m),qx(F,m,c),F=null}else F=E.child;if(F!==null)F.return=E;else for(F=E;F!==null;){if(F===c){F=null;break}if(E=F.sibling,E!==null){E.return=F.return,F=E;break}F=F.return}E=F}}function Th(c,h,m,S){c=null;for(var E=h,O=!1;E!==null;){if(!O){if((E.flags&524288)!==0)O=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var F=E.alternate;if(F===null)throw Error(r(387));if(F=F.memoizedProps,F!==null){var j=E.type;Xr(E.pendingProps.value,F.value)||(c!==null?c.push(j):c=[j])}}else if(E===Be.current){if(F=E.alternate,F===null)throw Error(r(387));F.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(c!==null?c.push(tp):c=[tp])}E=E.return}c!==null&&Gx(h,c,m,S),h.flags|=262144}function ly(c){for(c=c.firstContext;c!==null;){if(!Xr(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function hl(c){dl=c,Mo=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Wn(c){return zk(dl,c)}function cy(c,h){return dl===null&&hl(c),zk(c,h)}function zk(c,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},Mo===null){if(c===null)throw Error(r(308));Mo=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Mo=Mo.next=h;return m}var GW=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(m,S){c.push(S)}};this.abort=function(){h.aborted=!0,c.forEach(function(m){return m()})}},YW=e.unstable_scheduleCallback,WW=e.unstable_NormalPriority,cn={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Yx(){return{controller:new GW,data:new Map,refCount:0}}function Ch(c){c.refCount--,c.refCount===0&&YW(WW,function(){c.controller.abort()})}var Dh=null,Wx=0,af=0,of=null;function XW(c,h){if(Dh===null){var m=Dh=[];Wx=0,af=Q_(),of={status:"pending",value:void 0,then:function(S){m.push(S)}}}return Wx++,h.then(Lk,Lk),h}function Lk(){if(--Wx===0&&Dh!==null){of!==null&&(of.status="fulfilled");var c=Dh;Dh=null,af=0,of=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function QW(c,h){var m=[],S={status:"pending",value:null,reason:null,then:function(E){m.push(E)}};return c.then(function(){S.status="fulfilled",S.value=h;for(var E=0;E<m.length;E++)(0,m[E])(h)},function(E){for(S.status="rejected",S.reason=E,E=0;E<m.length;E++)(0,m[E])(void 0)}),S}var jk=L.S;L.S=function(c,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&XW(c,h),jk!==null&&jk(c,h)};var pl=Y(null);function Xx(){var c=pl.current;return c!==null?c:kt.pooledCache}function fy(c,h){h===null?J(pl,pl.current):J(pl,h.pool)}function Uk(){var c=Xx();return c===null?null:{parent:cn._currentValue,pool:c}}var Oh=Error(r(460)),Bk=Error(r(474)),dy=Error(r(542)),Qx={then:function(){}};function Vk(c){return c=c.status,c==="fulfilled"||c==="rejected"}function hy(){}function Hk(c,h,m){switch(m=c[m],m===void 0?c.push(h):m!==h&&(h.then(hy,hy),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Gk(c),c;default:if(typeof h.status=="string")h.then(hy,hy);else{if(c=kt,c!==null&&100<c.shellSuspendCounter)throw Error(r(482));c=h,c.status="pending",c.then(function(S){if(h.status==="pending"){var E=h;E.status="fulfilled",E.value=S}},function(S){if(h.status==="pending"){var E=h;E.status="rejected",E.reason=S}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Gk(c),c}throw Ih=h,Oh}}var Ih=null;function qk(){if(Ih===null)throw Error(r(459));var c=Ih;return Ih=null,c}function Gk(c){if(c===Oh||c===dy)throw Error(r(483))}var ks=!1;function Zx(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Kx(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function Ns(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Fs(c,h,m){var S=c.updateQueue;if(S===null)return null;if(S=S.shared,(vt&2)!==0){var E=S.pending;return E===null?h.next=h:(h.next=E.next,E.next=h),S.pending=h,h=ay(c),Rk(c,null,m),h}return iy(c,S,h,m),ay(c)}function Mh(c,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var S=h.lanes;S&=c.pendingLanes,m|=S,h.lanes=m,nl(c,m)}}function Jx(c,h){var m=c.updateQueue,S=c.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var E=null,O=null;if(m=m.firstBaseUpdate,m!==null){do{var F={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};O===null?E=O=F:O=O.next=F,m=m.next}while(m!==null);O===null?E=O=h:O=O.next=h}else E=O=h;m={baseState:S.baseState,firstBaseUpdate:E,lastBaseUpdate:O,shared:S.shared,callbacks:S.callbacks},c.updateQueue=m;return}c=m.lastBaseUpdate,c===null?m.firstBaseUpdate=h:c.next=h,m.lastBaseUpdate=h}var e_=!1;function Rh(){if(e_){var c=of;if(c!==null)throw c}}function kh(c,h,m,S){e_=!1;var E=c.updateQueue;ks=!1;var O=E.firstBaseUpdate,F=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var V=j,Z=V.next;V.next=null,F===null?O=Z:F.next=Z,F=V;var ie=c.alternate;ie!==null&&(ie=ie.updateQueue,j=ie.lastBaseUpdate,j!==F&&(j===null?ie.firstBaseUpdate=Z:j.next=Z,ie.lastBaseUpdate=V))}if(O!==null){var se=E.baseState;F=0,ie=Z=V=null,j=O;do{var K=j.lane&-536870913,ee=K!==j.lane;if(ee?(ot&K)===K:(S&K)===K){K!==0&&K===af&&(e_=!0),ie!==null&&(ie=ie.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Le=c,Pe=j;K=h;var Tt=m;switch(Pe.tag){case 1:if(Le=Pe.payload,typeof Le=="function"){se=Le.call(Tt,se,K);break e}se=Le;break e;case 3:Le.flags=Le.flags&-65537|128;case 0:if(Le=Pe.payload,K=typeof Le=="function"?Le.call(Tt,se,K):Le,K==null)break e;se=f({},se,K);break e;case 2:ks=!0}}K=j.callback,K!==null&&(c.flags|=64,ee&&(c.flags|=8192),ee=E.callbacks,ee===null?E.callbacks=[K]:ee.push(K))}else ee={lane:K,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ie===null?(Z=ie=ee,V=se):ie=ie.next=ee,F|=K;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;ee=j,j=ee.next,ee.next=null,E.lastBaseUpdate=ee,E.shared.pending=null}}while(!0);ie===null&&(V=se),E.baseState=V,E.firstBaseUpdate=Z,E.lastBaseUpdate=ie,O===null&&(E.shared.lanes=0),Vs|=F,c.lanes=F,c.memoizedState=se}}function Yk(c,h){if(typeof c!="function")throw Error(r(191,c));c.call(h)}function Wk(c,h){var m=c.callbacks;if(m!==null)for(c.callbacks=null,c=0;c<m.length;c++)Yk(m[c],h)}var sf=Y(null),py=Y(0);function Xk(c,h){c=Lo,J(py,c),J(sf,h),Lo=c|h.baseLanes}function t_(){J(py,Lo),J(sf,sf.current)}function n_(){Lo=py.current,Q(sf),Q(py)}var Ps=0,We=null,wt=null,on=null,gy=!1,uf=!1,gl=!1,my=0,Nh=0,lf=null,ZW=0;function Jt(){throw Error(r(321))}function r_(c,h){if(h===null)return!1;for(var m=0;m<h.length&&m<c.length;m++)if(!Xr(c[m],h[m]))return!1;return!0}function i_(c,h,m,S,E,O){return Ps=O,We=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,L.H=c===null||c.memoizedState===null?RN:kN,gl=!1,O=m(S,E),gl=!1,uf&&(O=Zk(h,m,S,E)),Qk(c),O}function Qk(c){L.H=_y;var h=wt!==null&&wt.next!==null;if(Ps=0,on=wt=We=null,gy=!1,Nh=0,lf=null,h)throw Error(r(300));c===null||Sn||(c=c.dependencies,c!==null&&ly(c)&&(Sn=!0))}function Zk(c,h,m,S){We=c;var E=0;do{if(uf&&(lf=null),Nh=0,uf=!1,25<=E)throw Error(r(301));if(E+=1,on=wt=null,c.updateQueue!=null){var O=c.updateQueue;O.lastEffect=null,O.events=null,O.stores=null,O.memoCache!=null&&(O.memoCache.index=0)}L.H=iX,O=h(m,S)}while(uf);return O}function KW(){var c=L.H,h=c.useState()[0];return h=typeof h.then=="function"?Fh(h):h,c=c.useState()[0],(wt!==null?wt.memoizedState:null)!==c&&(We.flags|=1024),h}function a_(){var c=my!==0;return my=0,c}function o_(c,h,m){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~m}function s_(c){if(gy){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}gy=!1}Ps=0,on=wt=We=null,uf=!1,Nh=my=0,lf=null}function Mr(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return on===null?We.memoizedState=on=c:on=on.next=c,on}function sn(){if(wt===null){var c=We.alternate;c=c!==null?c.memoizedState:null}else c=wt.next;var h=on===null?We.memoizedState:on.next;if(h!==null)on=h,wt=c;else{if(c===null)throw We.alternate===null?Error(r(467)):Error(r(310));wt=c,c={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},on===null?We.memoizedState=on=c:on=on.next=c}return on}function u_(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Fh(c){var h=Nh;return Nh+=1,lf===null&&(lf=[]),c=Hk(lf,c,h),h=We,(on===null?h.memoizedState:on.next)===null&&(h=h.alternate,L.H=h===null||h.memoizedState===null?RN:kN),c}function yy(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Fh(c);if(c.$$typeof===T)return Wn(c)}throw Error(r(438,String(c)))}function l_(c){var h=null,m=We.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var S=We.alternate;S!==null&&(S=S.updateQueue,S!==null&&(S=S.memoCache,S!=null&&(h={data:S.data.map(function(E){return E.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=u_(),We.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(c),S=0;S<c;S++)m[S]=k;return h.index++,m}function ko(c,h){return typeof h=="function"?h(c):h}function vy(c){var h=sn();return c_(h,wt,c)}function c_(c,h,m){var S=c.queue;if(S===null)throw Error(r(311));S.lastRenderedReducer=m;var E=c.baseQueue,O=S.pending;if(O!==null){if(E!==null){var F=E.next;E.next=O.next,O.next=F}h.baseQueue=E=O,S.pending=null}if(O=c.baseState,E===null)c.memoizedState=O;else{h=E.next;var j=F=null,V=null,Z=h,ie=!1;do{var se=Z.lane&-536870913;if(se!==Z.lane?(ot&se)===se:(Ps&se)===se){var K=Z.revertLane;if(K===0)V!==null&&(V=V.next={lane:0,revertLane:0,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null}),se===af&&(ie=!0);else if((Ps&K)===K){Z=Z.next,K===af&&(ie=!0);continue}else se={lane:0,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},V===null?(j=V=se,F=O):V=V.next=se,We.lanes|=K,Vs|=K;se=Z.action,gl&&m(O,se),O=Z.hasEagerState?Z.eagerState:m(O,se)}else K={lane:se,revertLane:Z.revertLane,action:Z.action,hasEagerState:Z.hasEagerState,eagerState:Z.eagerState,next:null},V===null?(j=V=K,F=O):V=V.next=K,We.lanes|=se,Vs|=se;Z=Z.next}while(Z!==null&&Z!==h);if(V===null?F=O:V.next=j,!Xr(O,c.memoizedState)&&(Sn=!0,ie&&(m=of,m!==null)))throw m;c.memoizedState=O,c.baseState=F,c.baseQueue=V,S.lastRenderedState=O}return E===null&&(S.lanes=0),[c.memoizedState,S.dispatch]}function f_(c){var h=sn(),m=h.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var S=m.dispatch,E=m.pending,O=h.memoizedState;if(E!==null){m.pending=null;var F=E=E.next;do O=c(O,F.action),F=F.next;while(F!==E);Xr(O,h.memoizedState)||(Sn=!0),h.memoizedState=O,h.baseQueue===null&&(h.baseState=O),m.lastRenderedState=O}return[O,S]}function Kk(c,h,m){var S=We,E=sn(),O=pt;if(O){if(m===void 0)throw Error(r(407));m=m()}else m=h();var F=!Xr((wt||E).memoizedState,m);F&&(E.memoizedState=m,Sn=!0),E=E.queue;var j=tN.bind(null,S,E,c);if(Ph(2048,8,j,[c]),E.getSnapshot!==h||F||on!==null&&on.memoizedState.tag&1){if(S.flags|=2048,cf(9,by(),eN.bind(null,S,E,m,h),null),kt===null)throw Error(r(349));O||(Ps&124)!==0||Jk(S,h,m)}return m}function Jk(c,h,m){c.flags|=16384,c={getSnapshot:h,value:m},h=We.updateQueue,h===null?(h=u_(),We.updateQueue=h,h.stores=[c]):(m=h.stores,m===null?h.stores=[c]:m.push(c))}function eN(c,h,m,S){h.value=m,h.getSnapshot=S,nN(h)&&rN(c)}function tN(c,h,m){return m(function(){nN(h)&&rN(c)})}function nN(c){var h=c.getSnapshot;c=c.value;try{var m=h();return!Xr(c,m)}catch{return!0}}function rN(c){var h=ef(c,2);h!==null&&ti(h,c,2)}function d_(c){var h=Mr();if(typeof c=="function"){var m=c;if(c=m(),gl){Ma(!0);try{m()}finally{Ma(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:c},h}function iN(c,h,m,S){return c.baseState=m,c_(c,wt,typeof S=="function"?S:ko)}function JW(c,h,m,S,E){if(xy(c))throw Error(r(485));if(c=h.action,c!==null){var O={payload:E,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(F){O.listeners.push(F)}};L.T!==null?m(!0):O.isTransition=!1,S(O),m=h.pending,m===null?(O.next=h.pending=O,aN(h,O)):(O.next=m.next,h.pending=m.next=O)}}function aN(c,h){var m=h.action,S=h.payload,E=c.state;if(h.isTransition){var O=L.T,F={};L.T=F;try{var j=m(E,S),V=L.S;V!==null&&V(F,j),oN(c,h,j)}catch(Z){h_(c,h,Z)}finally{L.T=O}}else try{O=m(E,S),oN(c,h,O)}catch(Z){h_(c,h,Z)}}function oN(c,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(S){sN(c,h,S)},function(S){return h_(c,h,S)}):sN(c,h,m)}function sN(c,h,m){h.status="fulfilled",h.value=m,uN(h),c.state=m,h=c.pending,h!==null&&(m=h.next,m===h?c.pending=null:(m=m.next,h.next=m,aN(c,m)))}function h_(c,h,m){var S=c.pending;if(c.pending=null,S!==null){S=S.next;do h.status="rejected",h.reason=m,uN(h),h=h.next;while(h!==S)}c.action=null}function uN(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function lN(c,h){return h}function cN(c,h){if(pt){var m=kt.formState;if(m!==null){e:{var S=We;if(pt){if(Yt){t:{for(var E=Yt,O=Na;E.nodeType!==8;){if(!O){E=null;break t}if(E=Ki(E.nextSibling),E===null){E=null;break t}}O=E.data,E=O==="F!"||O==="F"?E:null}if(E){Yt=Ki(E.nextSibling),S=E.data==="F!";break e}}fl(S)}S=!1}S&&(h=m[0])}}return m=Mr(),m.memoizedState=m.baseState=h,S={pending:null,lanes:0,dispatch:null,lastRenderedReducer:lN,lastRenderedState:h},m.queue=S,m=ON.bind(null,We,S),S.dispatch=m,S=d_(!1),O=v_.bind(null,We,!1,S.queue),S=Mr(),E={state:h,dispatch:null,action:c,pending:null},S.queue=E,m=JW.bind(null,We,E,O,m),E.dispatch=m,S.memoizedState=c,[h,m,!1]}function fN(c){var h=sn();return dN(h,wt,c)}function dN(c,h,m){if(h=c_(c,h,lN)[0],c=vy(ko)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var S=Fh(h)}catch(F){throw F===Oh?dy:F}else S=h;h=sn();var E=h.queue,O=E.dispatch;return m!==h.memoizedState&&(We.flags|=2048,cf(9,by(),eX.bind(null,E,m),null)),[S,O,c]}function eX(c,h){c.action=h}function hN(c){var h=sn(),m=wt;if(m!==null)return dN(h,m,c);sn(),h=h.memoizedState,m=sn();var S=m.queue.dispatch;return m.memoizedState=c,[h,S,!1]}function cf(c,h,m,S){return c={tag:c,create:m,deps:S,inst:h,next:null},h=We.updateQueue,h===null&&(h=u_(),We.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=c.next=c:(S=m.next,m.next=c,c.next=S,h.lastEffect=c),c}function by(){return{destroy:void 0,resource:void 0}}function pN(){return sn().memoizedState}function Sy(c,h,m,S){var E=Mr();S=S===void 0?null:S,We.flags|=c,E.memoizedState=cf(1|h,by(),m,S)}function Ph(c,h,m,S){var E=sn();S=S===void 0?null:S;var O=E.memoizedState.inst;wt!==null&&S!==null&&r_(S,wt.memoizedState.deps)?E.memoizedState=cf(h,O,m,S):(We.flags|=c,E.memoizedState=cf(1|h,O,m,S))}function gN(c,h){Sy(8390656,8,c,h)}function mN(c,h){Ph(2048,8,c,h)}function yN(c,h){return Ph(4,2,c,h)}function vN(c,h){return Ph(4,4,c,h)}function bN(c,h){if(typeof h=="function"){c=c();var m=h(c);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function SN(c,h,m){m=m!=null?m.concat([c]):null,Ph(4,4,bN.bind(null,h,c),m)}function p_(){}function xN(c,h){var m=sn();h=h===void 0?null:h;var S=m.memoizedState;return h!==null&&r_(h,S[1])?S[0]:(m.memoizedState=[c,h],c)}function _N(c,h){var m=sn();h=h===void 0?null:h;var S=m.memoizedState;if(h!==null&&r_(h,S[1]))return S[0];if(S=c(),gl){Ma(!0);try{c()}finally{Ma(!1)}}return m.memoizedState=[S,h],S}function g_(c,h,m){return m===void 0||(Ps&1073741824)!==0?c.memoizedState=h:(c.memoizedState=m,c=A3(),We.lanes|=c,Vs|=c,m)}function EN(c,h,m,S){return Xr(m,h)?m:sf.current!==null?(c=g_(c,m,S),Xr(c,h)||(Sn=!0),c):(Ps&42)===0?(Sn=!0,c.memoizedState=m):(c=A3(),We.lanes|=c,Vs|=c,h)}function wN(c,h,m,S,E){var O=B.p;B.p=O!==0&&8>O?O:8;var F=L.T,j={};L.T=j,v_(c,!1,h,m);try{var V=E(),Z=L.S;if(Z!==null&&Z(j,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var ie=QW(V,S);$h(c,h,ie,ei(c))}else $h(c,h,S,ei(c))}catch(se){$h(c,h,{then:function(){},status:"rejected",reason:se},ei())}finally{B.p=O,L.T=F}}function tX(){}function m_(c,h,m,S){if(c.tag!==5)throw Error(r(476));var E=AN(c).queue;wN(c,E,h,q,m===null?tX:function(){return TN(c),m(S)})}function AN(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:q,baseState:q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:q},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:m},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function TN(c){var h=AN(c).next.queue;$h(c,h,{},ei())}function y_(){return Wn(tp)}function CN(){return sn().memoizedState}function DN(){return sn().memoizedState}function nX(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var m=ei();c=Ns(m);var S=Fs(h,c,m);S!==null&&(ti(S,h,m),Mh(S,h,m)),h={cache:Yx()},c.payload=h;return}h=h.return}}function rX(c,h,m){var S=ei();m={lane:S,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},xy(c)?IN(h,m):(m=$x(c,h,m,S),m!==null&&(ti(m,c,S),MN(m,h,S)))}function ON(c,h,m){var S=ei();$h(c,h,m,S)}function $h(c,h,m,S){var E={lane:S,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(xy(c))IN(h,E);else{var O=c.alternate;if(c.lanes===0&&(O===null||O.lanes===0)&&(O=h.lastRenderedReducer,O!==null))try{var F=h.lastRenderedState,j=O(F,m);if(E.hasEagerState=!0,E.eagerState=j,Xr(j,F))return iy(c,h,E,0),kt===null&&ry(),!1}catch{}finally{}if(m=$x(c,h,E,S),m!==null)return ti(m,c,S),MN(m,h,S),!0}return!1}function v_(c,h,m,S){if(S={lane:2,revertLane:Q_(),action:S,hasEagerState:!1,eagerState:null,next:null},xy(c)){if(h)throw Error(r(479))}else h=$x(c,m,S,2),h!==null&&ti(h,c,2)}function xy(c){var h=c.alternate;return c===We||h!==null&&h===We}function IN(c,h){uf=gy=!0;var m=c.pending;m===null?h.next=h:(h.next=m.next,m.next=h),c.pending=h}function MN(c,h,m){if((m&4194048)!==0){var S=h.lanes;S&=c.pendingLanes,m|=S,h.lanes=m,nl(c,m)}}var _y={readContext:Wn,use:yy,useCallback:Jt,useContext:Jt,useEffect:Jt,useImperativeHandle:Jt,useLayoutEffect:Jt,useInsertionEffect:Jt,useMemo:Jt,useReducer:Jt,useRef:Jt,useState:Jt,useDebugValue:Jt,useDeferredValue:Jt,useTransition:Jt,useSyncExternalStore:Jt,useId:Jt,useHostTransitionStatus:Jt,useFormState:Jt,useActionState:Jt,useOptimistic:Jt,useMemoCache:Jt,useCacheRefresh:Jt},RN={readContext:Wn,use:yy,useCallback:function(c,h){return Mr().memoizedState=[c,h===void 0?null:h],c},useContext:Wn,useEffect:gN,useImperativeHandle:function(c,h,m){m=m!=null?m.concat([c]):null,Sy(4194308,4,bN.bind(null,h,c),m)},useLayoutEffect:function(c,h){return Sy(4194308,4,c,h)},useInsertionEffect:function(c,h){Sy(4,2,c,h)},useMemo:function(c,h){var m=Mr();h=h===void 0?null:h;var S=c();if(gl){Ma(!0);try{c()}finally{Ma(!1)}}return m.memoizedState=[S,h],S},useReducer:function(c,h,m){var S=Mr();if(m!==void 0){var E=m(h);if(gl){Ma(!0);try{m(h)}finally{Ma(!1)}}}else E=h;return S.memoizedState=S.baseState=E,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:E},S.queue=c,c=c.dispatch=rX.bind(null,We,c),[S.memoizedState,c]},useRef:function(c){var h=Mr();return c={current:c},h.memoizedState=c},useState:function(c){c=d_(c);var h=c.queue,m=ON.bind(null,We,h);return h.dispatch=m,[c.memoizedState,m]},useDebugValue:p_,useDeferredValue:function(c,h){var m=Mr();return g_(m,c,h)},useTransition:function(){var c=d_(!1);return c=wN.bind(null,We,c.queue,!0,!1),Mr().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,m){var S=We,E=Mr();if(pt){if(m===void 0)throw Error(r(407));m=m()}else{if(m=h(),kt===null)throw Error(r(349));(ot&124)!==0||Jk(S,h,m)}E.memoizedState=m;var O={value:m,getSnapshot:h};return E.queue=O,gN(tN.bind(null,S,O,c),[c]),S.flags|=2048,cf(9,by(),eN.bind(null,S,O,m,h),null),m},useId:function(){var c=Mr(),h=kt.identifierPrefix;if(pt){var m=Io,S=Oo;m=(S&~(1<<32-Gn(S)-1)).toString(32)+m,h="«"+h+"R"+m,m=my++,0<m&&(h+="H"+m.toString(32)),h+="»"}else m=ZW++,h="«"+h+"r"+m.toString(32)+"»";return c.memoizedState=h},useHostTransitionStatus:y_,useFormState:cN,useActionState:cN,useOptimistic:function(c){var h=Mr();h.memoizedState=h.baseState=c;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=v_.bind(null,We,!0,m),m.dispatch=h,[c,h]},useMemoCache:l_,useCacheRefresh:function(){return Mr().memoizedState=nX.bind(null,We)}},kN={readContext:Wn,use:yy,useCallback:xN,useContext:Wn,useEffect:mN,useImperativeHandle:SN,useInsertionEffect:yN,useLayoutEffect:vN,useMemo:_N,useReducer:vy,useRef:pN,useState:function(){return vy(ko)},useDebugValue:p_,useDeferredValue:function(c,h){var m=sn();return EN(m,wt.memoizedState,c,h)},useTransition:function(){var c=vy(ko)[0],h=sn().memoizedState;return[typeof c=="boolean"?c:Fh(c),h]},useSyncExternalStore:Kk,useId:CN,useHostTransitionStatus:y_,useFormState:fN,useActionState:fN,useOptimistic:function(c,h){var m=sn();return iN(m,wt,c,h)},useMemoCache:l_,useCacheRefresh:DN},iX={readContext:Wn,use:yy,useCallback:xN,useContext:Wn,useEffect:mN,useImperativeHandle:SN,useInsertionEffect:yN,useLayoutEffect:vN,useMemo:_N,useReducer:f_,useRef:pN,useState:function(){return f_(ko)},useDebugValue:p_,useDeferredValue:function(c,h){var m=sn();return wt===null?g_(m,c,h):EN(m,wt.memoizedState,c,h)},useTransition:function(){var c=f_(ko)[0],h=sn().memoizedState;return[typeof c=="boolean"?c:Fh(c),h]},useSyncExternalStore:Kk,useId:CN,useHostTransitionStatus:y_,useFormState:hN,useActionState:hN,useOptimistic:function(c,h){var m=sn();return wt!==null?iN(m,wt,c,h):(m.baseState=c,[c,m.queue.dispatch])},useMemoCache:l_,useCacheRefresh:DN},ff=null,zh=0;function Ey(c){var h=zh;return zh+=1,ff===null&&(ff=[]),Hk(ff,c,h)}function Lh(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function wy(c,h){throw h.$$typeof===d?Error(r(525)):(c=Object.prototype.toString.call(h),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function NN(c){var h=c._init;return h(c._payload)}function FN(c){function h(W,G){if(c){var X=W.deletions;X===null?(W.deletions=[G],W.flags|=16):X.push(G)}}function m(W,G){if(!c)return null;for(;G!==null;)h(W,G),G=G.sibling;return null}function S(W){for(var G=new Map;W!==null;)W.key!==null?G.set(W.key,W):G.set(W.index,W),W=W.sibling;return G}function E(W,G){return W=Do(W,G),W.index=0,W.sibling=null,W}function O(W,G,X){return W.index=X,c?(X=W.alternate,X!==null?(X=X.index,X<G?(W.flags|=67108866,G):X):(W.flags|=67108866,G)):(W.flags|=1048576,G)}function F(W){return c&&W.alternate===null&&(W.flags|=67108866),W}function j(W,G,X,oe){return G===null||G.tag!==6?(G=Lx(X,W.mode,oe),G.return=W,G):(G=E(G,X),G.return=W,G)}function V(W,G,X,oe){var Ae=X.type;return Ae===y?ie(W,G,X.props.children,oe,X.key):G!==null&&(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===I&&NN(Ae)===G.type)?(G=E(G,X.props),Lh(G,X),G.return=W,G):(G=oy(X.type,X.key,X.props,null,W.mode,oe),Lh(G,X),G.return=W,G)}function Z(W,G,X,oe){return G===null||G.tag!==4||G.stateNode.containerInfo!==X.containerInfo||G.stateNode.implementation!==X.implementation?(G=jx(X,W.mode,oe),G.return=W,G):(G=E(G,X.children||[]),G.return=W,G)}function ie(W,G,X,oe,Ae){return G===null||G.tag!==7?(G=sl(X,W.mode,oe,Ae),G.return=W,G):(G=E(G,X),G.return=W,G)}function se(W,G,X){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return G=Lx(""+G,W.mode,X),G.return=W,G;if(typeof G=="object"&&G!==null){switch(G.$$typeof){case p:return X=oy(G.type,G.key,G.props,null,W.mode,X),Lh(X,G),X.return=W,X;case g:return G=jx(G,W.mode,X),G.return=W,G;case I:var oe=G._init;return G=oe(G._payload),se(W,G,X)}if(N(G)||z(G))return G=sl(G,W.mode,X,null),G.return=W,G;if(typeof G.then=="function")return se(W,Ey(G),X);if(G.$$typeof===T)return se(W,cy(W,G),X);wy(W,G)}return null}function K(W,G,X,oe){var Ae=G!==null?G.key:null;if(typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint")return Ae!==null?null:j(W,G,""+X,oe);if(typeof X=="object"&&X!==null){switch(X.$$typeof){case p:return X.key===Ae?V(W,G,X,oe):null;case g:return X.key===Ae?Z(W,G,X,oe):null;case I:return Ae=X._init,X=Ae(X._payload),K(W,G,X,oe)}if(N(X)||z(X))return Ae!==null?null:ie(W,G,X,oe,null);if(typeof X.then=="function")return K(W,G,Ey(X),oe);if(X.$$typeof===T)return K(W,G,cy(W,X),oe);wy(W,X)}return null}function ee(W,G,X,oe,Ae){if(typeof oe=="string"&&oe!==""||typeof oe=="number"||typeof oe=="bigint")return W=W.get(X)||null,j(G,W,""+oe,Ae);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case p:return W=W.get(oe.key===null?X:oe.key)||null,V(G,W,oe,Ae);case g:return W=W.get(oe.key===null?X:oe.key)||null,Z(G,W,oe,Ae);case I:var Ze=oe._init;return oe=Ze(oe._payload),ee(W,G,X,oe,Ae)}if(N(oe)||z(oe))return W=W.get(X)||null,ie(G,W,oe,Ae,null);if(typeof oe.then=="function")return ee(W,G,X,Ey(oe),Ae);if(oe.$$typeof===T)return ee(W,G,X,cy(G,oe),Ae);wy(G,oe)}return null}function Le(W,G,X,oe){for(var Ae=null,Ze=null,Ie=G,ze=G=0,_n=null;Ie!==null&&ze<X.length;ze++){Ie.index>ze?(_n=Ie,Ie=null):_n=Ie.sibling;var ut=K(W,Ie,X[ze],oe);if(ut===null){Ie===null&&(Ie=_n);break}c&&Ie&&ut.alternate===null&&h(W,Ie),G=O(ut,G,ze),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut,Ie=_n}if(ze===X.length)return m(W,Ie),pt&&ll(W,ze),Ae;if(Ie===null){for(;ze<X.length;ze++)Ie=se(W,X[ze],oe),Ie!==null&&(G=O(Ie,G,ze),Ze===null?Ae=Ie:Ze.sibling=Ie,Ze=Ie);return pt&&ll(W,ze),Ae}for(Ie=S(Ie);ze<X.length;ze++)_n=ee(Ie,W,ze,X[ze],oe),_n!==null&&(c&&_n.alternate!==null&&Ie.delete(_n.key===null?ze:_n.key),G=O(_n,G,ze),Ze===null?Ae=_n:Ze.sibling=_n,Ze=_n);return c&&Ie.forEach(function(Ks){return h(W,Ks)}),pt&&ll(W,ze),Ae}function Pe(W,G,X,oe){if(X==null)throw Error(r(151));for(var Ae=null,Ze=null,Ie=G,ze=G=0,_n=null,ut=X.next();Ie!==null&&!ut.done;ze++,ut=X.next()){Ie.index>ze?(_n=Ie,Ie=null):_n=Ie.sibling;var Ks=K(W,Ie,ut.value,oe);if(Ks===null){Ie===null&&(Ie=_n);break}c&&Ie&&Ks.alternate===null&&h(W,Ie),G=O(Ks,G,ze),Ze===null?Ae=Ks:Ze.sibling=Ks,Ze=Ks,Ie=_n}if(ut.done)return m(W,Ie),pt&&ll(W,ze),Ae;if(Ie===null){for(;!ut.done;ze++,ut=X.next())ut=se(W,ut.value,oe),ut!==null&&(G=O(ut,G,ze),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut);return pt&&ll(W,ze),Ae}for(Ie=S(Ie);!ut.done;ze++,ut=X.next())ut=ee(Ie,W,ze,ut.value,oe),ut!==null&&(c&&ut.alternate!==null&&Ie.delete(ut.key===null?ze:ut.key),G=O(ut,G,ze),Ze===null?Ae=ut:Ze.sibling=ut,Ze=ut);return c&&Ie.forEach(function(aQ){return h(W,aQ)}),pt&&ll(W,ze),Ae}function Tt(W,G,X,oe){if(typeof X=="object"&&X!==null&&X.type===y&&X.key===null&&(X=X.props.children),typeof X=="object"&&X!==null){switch(X.$$typeof){case p:e:{for(var Ae=X.key;G!==null;){if(G.key===Ae){if(Ae=X.type,Ae===y){if(G.tag===7){m(W,G.sibling),oe=E(G,X.props.children),oe.return=W,W=oe;break e}}else if(G.elementType===Ae||typeof Ae=="object"&&Ae!==null&&Ae.$$typeof===I&&NN(Ae)===G.type){m(W,G.sibling),oe=E(G,X.props),Lh(oe,X),oe.return=W,W=oe;break e}m(W,G);break}else h(W,G);G=G.sibling}X.type===y?(oe=sl(X.props.children,W.mode,oe,X.key),oe.return=W,W=oe):(oe=oy(X.type,X.key,X.props,null,W.mode,oe),Lh(oe,X),oe.return=W,W=oe)}return F(W);case g:e:{for(Ae=X.key;G!==null;){if(G.key===Ae)if(G.tag===4&&G.stateNode.containerInfo===X.containerInfo&&G.stateNode.implementation===X.implementation){m(W,G.sibling),oe=E(G,X.children||[]),oe.return=W,W=oe;break e}else{m(W,G);break}else h(W,G);G=G.sibling}oe=jx(X,W.mode,oe),oe.return=W,W=oe}return F(W);case I:return Ae=X._init,X=Ae(X._payload),Tt(W,G,X,oe)}if(N(X))return Le(W,G,X,oe);if(z(X)){if(Ae=z(X),typeof Ae!="function")throw Error(r(150));return X=Ae.call(X),Pe(W,G,X,oe)}if(typeof X.then=="function")return Tt(W,G,Ey(X),oe);if(X.$$typeof===T)return Tt(W,G,cy(W,X),oe);wy(W,X)}return typeof X=="string"&&X!==""||typeof X=="number"||typeof X=="bigint"?(X=""+X,G!==null&&G.tag===6?(m(W,G.sibling),oe=E(G,X),oe.return=W,W=oe):(m(W,G),oe=Lx(X,W.mode,oe),oe.return=W,W=oe),F(W)):m(W,G)}return function(W,G,X,oe){try{zh=0;var Ae=Tt(W,G,X,oe);return ff=null,Ae}catch(Ie){if(Ie===Oh||Ie===dy)throw Ie;var Ze=Qr(29,Ie,null,W.mode);return Ze.lanes=oe,Ze.return=W,Ze}finally{}}}var df=FN(!0),PN=FN(!1),Ti=Y(null),Fa=null;function $s(c){var h=c.alternate;J(fn,fn.current&1),J(Ti,c),Fa===null&&(h===null||sf.current!==null||h.memoizedState!==null)&&(Fa=c)}function $N(c){if(c.tag===22){if(J(fn,fn.current),J(Ti,c),Fa===null){var h=c.alternate;h!==null&&h.memoizedState!==null&&(Fa=c)}}else zs()}function zs(){J(fn,fn.current),J(Ti,Ti.current)}function No(c){Q(Ti),Fa===c&&(Fa=null),Q(fn)}var fn=Y(0);function Ay(c){for(var h=c;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||uE(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function b_(c,h,m,S){h=c.memoizedState,m=m(S,h),m=m==null?h:f({},h,m),c.memoizedState=m,c.lanes===0&&(c.updateQueue.baseState=m)}var S_={enqueueSetState:function(c,h,m){c=c._reactInternals;var S=ei(),E=Ns(S);E.payload=h,m!=null&&(E.callback=m),h=Fs(c,E,S),h!==null&&(ti(h,c,S),Mh(h,c,S))},enqueueReplaceState:function(c,h,m){c=c._reactInternals;var S=ei(),E=Ns(S);E.tag=1,E.payload=h,m!=null&&(E.callback=m),h=Fs(c,E,S),h!==null&&(ti(h,c,S),Mh(h,c,S))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var m=ei(),S=Ns(m);S.tag=2,h!=null&&(S.callback=h),h=Fs(c,S,m),h!==null&&(ti(h,c,m),Mh(h,c,m))}};function zN(c,h,m,S,E,O,F){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(S,O,F):h.prototype&&h.prototype.isPureReactComponent?!xh(m,S)||!xh(E,O):!0}function LN(c,h,m,S){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,S),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,S),h.state!==c&&S_.enqueueReplaceState(h,h.state,null)}function ml(c,h){var m=h;if("ref"in h){m={};for(var S in h)S!=="ref"&&(m[S]=h[S])}if(c=c.defaultProps){m===h&&(m=f({},m));for(var E in c)m[E]===void 0&&(m[E]=c[E])}return m}var Ty=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)};function jN(c){Ty(c)}function UN(c){console.error(c)}function BN(c){Ty(c)}function Cy(c,h){try{var m=c.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(S){setTimeout(function(){throw S})}}function VN(c,h,m){try{var S=c.onCaughtError;S(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function x_(c,h,m){return m=Ns(m),m.tag=3,m.payload={element:null},m.callback=function(){Cy(c,h)},m}function HN(c){return c=Ns(c),c.tag=3,c}function qN(c,h,m,S){var E=m.type.getDerivedStateFromError;if(typeof E=="function"){var O=S.value;c.payload=function(){return E(O)},c.callback=function(){VN(h,m,S)}}var F=m.stateNode;F!==null&&typeof F.componentDidCatch=="function"&&(c.callback=function(){VN(h,m,S),typeof E!="function"&&(Hs===null?Hs=new Set([this]):Hs.add(this));var j=S.stack;this.componentDidCatch(S.value,{componentStack:j!==null?j:""})})}function aX(c,h,m,S,E){if(m.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){if(h=m.alternate,h!==null&&Th(h,m,E,!0),m=Ti.current,m!==null){switch(m.tag){case 13:return Fa===null?q_():m.alternate===null&&Wt===0&&(Wt=3),m.flags&=-257,m.flags|=65536,m.lanes=E,S===Qx?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([S]):h.add(S),Y_(c,S,E)),!1;case 22:return m.flags|=65536,S===Qx?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([S])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([S]):m.add(S)),Y_(c,S,E)),!1}throw Error(r(435,m.tag))}return Y_(c,S,E),q_(),!1}if(pt)return h=Ti.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=E,S!==Vx&&(c=Error(r(422),{cause:S}),Ah(_i(c,m)))):(S!==Vx&&(h=Error(r(423),{cause:S}),Ah(_i(h,m))),c=c.current.alternate,c.flags|=65536,E&=-E,c.lanes|=E,S=_i(S,m),E=x_(c.stateNode,S,E),Jx(c,E),Wt!==4&&(Wt=2)),!1;var O=Error(r(520),{cause:S});if(O=_i(O,m),Gh===null?Gh=[O]:Gh.push(O),Wt!==4&&(Wt=2),h===null)return!0;S=_i(S,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,c=E&-E,m.lanes|=c,c=x_(m.stateNode,S,c),Jx(m,c),!1;case 1:if(h=m.type,O=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Hs===null||!Hs.has(O))))return m.flags|=65536,E&=-E,m.lanes|=E,E=HN(E),qN(E,c,m,S),Jx(m,E),!1}m=m.return}while(m!==null);return!1}var GN=Error(r(461)),Sn=!1;function kn(c,h,m,S){h.child=c===null?PN(h,null,m,S):df(h,c.child,m,S)}function YN(c,h,m,S,E){m=m.render;var O=h.ref;if("ref"in S){var F={};for(var j in S)j!=="ref"&&(F[j]=S[j])}else F=S;return hl(h),S=i_(c,h,m,F,O,E),j=a_(),c!==null&&!Sn?(o_(c,h,E),Fo(c,h,E)):(pt&&j&&Ux(h),h.flags|=1,kn(c,h,S,E),h.child)}function WN(c,h,m,S,E){if(c===null){var O=m.type;return typeof O=="function"&&!zx(O)&&O.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=O,XN(c,h,O,S,E)):(c=oy(m.type,null,S,h,h.mode,E),c.ref=h.ref,c.return=h,h.child=c)}if(O=c.child,!O_(c,E)){var F=O.memoizedProps;if(m=m.compare,m=m!==null?m:xh,m(F,S)&&c.ref===h.ref)return Fo(c,h,E)}return h.flags|=1,c=Do(O,S),c.ref=h.ref,c.return=h,h.child=c}function XN(c,h,m,S,E){if(c!==null){var O=c.memoizedProps;if(xh(O,S)&&c.ref===h.ref)if(Sn=!1,h.pendingProps=S=O,O_(c,E))(c.flags&131072)!==0&&(Sn=!0);else return h.lanes=c.lanes,Fo(c,h,E)}return __(c,h,m,S,E)}function QN(c,h,m){var S=h.pendingProps,E=S.children,O=c!==null?c.memoizedState:null;if(S.mode==="hidden"){if((h.flags&128)!==0){if(S=O!==null?O.baseLanes|m:m,c!==null){for(E=h.child=c.child,O=0;E!==null;)O=O|E.lanes|E.childLanes,E=E.sibling;h.childLanes=O&~S}else h.childLanes=0,h.child=null;return ZN(c,h,S,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&fy(h,O!==null?O.cachePool:null),O!==null?Xk(h,O):t_(),$N(h);else return h.lanes=h.childLanes=536870912,ZN(c,h,O!==null?O.baseLanes|m:m,m)}else O!==null?(fy(h,O.cachePool),Xk(h,O),zs(),h.memoizedState=null):(c!==null&&fy(h,null),t_(),zs());return kn(c,h,E,m),h.child}function ZN(c,h,m,S){var E=Xx();return E=E===null?null:{parent:cn._currentValue,pool:E},h.memoizedState={baseLanes:m,cachePool:E},c!==null&&fy(h,null),t_(),$N(h),c!==null&&Th(c,h,S,!0),null}function Dy(c,h){var m=h.ref;if(m===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(r(284));(c===null||c.ref!==m)&&(h.flags|=4194816)}}function __(c,h,m,S,E){return hl(h),m=i_(c,h,m,S,void 0,E),S=a_(),c!==null&&!Sn?(o_(c,h,E),Fo(c,h,E)):(pt&&S&&Ux(h),h.flags|=1,kn(c,h,m,E),h.child)}function KN(c,h,m,S,E,O){return hl(h),h.updateQueue=null,m=Zk(h,S,m,E),Qk(c),S=a_(),c!==null&&!Sn?(o_(c,h,O),Fo(c,h,O)):(pt&&S&&Ux(h),h.flags|=1,kn(c,h,m,O),h.child)}function JN(c,h,m,S,E){if(hl(h),h.stateNode===null){var O=tf,F=m.contextType;typeof F=="object"&&F!==null&&(O=Wn(F)),O=new m(S,O),h.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,O.updater=S_,h.stateNode=O,O._reactInternals=h,O=h.stateNode,O.props=S,O.state=h.memoizedState,O.refs={},Zx(h),F=m.contextType,O.context=typeof F=="object"&&F!==null?Wn(F):tf,O.state=h.memoizedState,F=m.getDerivedStateFromProps,typeof F=="function"&&(b_(h,m,F,S),O.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(F=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),F!==O.state&&S_.enqueueReplaceState(O,O.state,null),kh(h,S,O,E),Rh(),O.state=h.memoizedState),typeof O.componentDidMount=="function"&&(h.flags|=4194308),S=!0}else if(c===null){O=h.stateNode;var j=h.memoizedProps,V=ml(m,j);O.props=V;var Z=O.context,ie=m.contextType;F=tf,typeof ie=="object"&&ie!==null&&(F=Wn(ie));var se=m.getDerivedStateFromProps;ie=typeof se=="function"||typeof O.getSnapshotBeforeUpdate=="function",j=h.pendingProps!==j,ie||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(j||Z!==F)&&LN(h,O,S,F),ks=!1;var K=h.memoizedState;O.state=K,kh(h,S,O,E),Rh(),Z=h.memoizedState,j||K!==Z||ks?(typeof se=="function"&&(b_(h,m,se,S),Z=h.memoizedState),(V=ks||zN(h,m,V,S,K,Z,F))?(ie||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount()),typeof O.componentDidMount=="function"&&(h.flags|=4194308)):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=S,h.memoizedState=Z),O.props=S,O.state=Z,O.context=F,S=V):(typeof O.componentDidMount=="function"&&(h.flags|=4194308),S=!1)}else{O=h.stateNode,Kx(c,h),F=h.memoizedProps,ie=ml(m,F),O.props=ie,se=h.pendingProps,K=O.context,Z=m.contextType,V=tf,typeof Z=="object"&&Z!==null&&(V=Wn(Z)),j=m.getDerivedStateFromProps,(Z=typeof j=="function"||typeof O.getSnapshotBeforeUpdate=="function")||typeof O.UNSAFE_componentWillReceiveProps!="function"&&typeof O.componentWillReceiveProps!="function"||(F!==se||K!==V)&&LN(h,O,S,V),ks=!1,K=h.memoizedState,O.state=K,kh(h,S,O,E),Rh();var ee=h.memoizedState;F!==se||K!==ee||ks||c!==null&&c.dependencies!==null&&ly(c.dependencies)?(typeof j=="function"&&(b_(h,m,j,S),ee=h.memoizedState),(ie=ks||zN(h,m,ie,S,K,ee,V)||c!==null&&c.dependencies!==null&&ly(c.dependencies))?(Z||typeof O.UNSAFE_componentWillUpdate!="function"&&typeof O.componentWillUpdate!="function"||(typeof O.componentWillUpdate=="function"&&O.componentWillUpdate(S,ee,V),typeof O.UNSAFE_componentWillUpdate=="function"&&O.UNSAFE_componentWillUpdate(S,ee,V)),typeof O.componentDidUpdate=="function"&&(h.flags|=4),typeof O.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof O.componentDidUpdate!="function"||F===c.memoizedProps&&K===c.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&K===c.memoizedState||(h.flags|=1024),h.memoizedProps=S,h.memoizedState=ee),O.props=S,O.state=ee,O.context=V,S=ie):(typeof O.componentDidUpdate!="function"||F===c.memoizedProps&&K===c.memoizedState||(h.flags|=4),typeof O.getSnapshotBeforeUpdate!="function"||F===c.memoizedProps&&K===c.memoizedState||(h.flags|=1024),S=!1)}return O=S,Dy(c,h),S=(h.flags&128)!==0,O||S?(O=h.stateNode,m=S&&typeof m.getDerivedStateFromError!="function"?null:O.render(),h.flags|=1,c!==null&&S?(h.child=df(h,c.child,null,E),h.child=df(h,null,m,E)):kn(c,h,m,E),h.memoizedState=O.state,c=h.child):c=Fo(c,h,E),c}function e3(c,h,m,S){return wh(),h.flags|=256,kn(c,h,m,S),h.child}var E_={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function w_(c){return{baseLanes:c,cachePool:Uk()}}function A_(c,h,m){return c=c!==null?c.childLanes&~m:0,h&&(c|=Ci),c}function t3(c,h,m){var S=h.pendingProps,E=!1,O=(h.flags&128)!==0,F;if((F=O)||(F=c!==null&&c.memoizedState===null?!1:(fn.current&2)!==0),F&&(E=!0,h.flags&=-129),F=(h.flags&32)!==0,h.flags&=-33,c===null){if(pt){if(E?$s(h):zs(),pt){var j=Yt,V;if(V=j){e:{for(V=j,j=Na;V.nodeType!==8;){if(!j){j=null;break e}if(V=Ki(V.nextSibling),V===null){j=null;break e}}j=V}j!==null?(h.memoizedState={dehydrated:j,treeContext:ul!==null?{id:Oo,overflow:Io}:null,retryLane:536870912,hydrationErrors:null},V=Qr(18,null,null,0),V.stateNode=j,V.return=h,h.child=V,cr=h,Yt=null,V=!0):V=!1}V||fl(h)}if(j=h.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return uE(j)?h.lanes=32:h.lanes=536870912,null;No(h)}return j=S.children,S=S.fallback,E?(zs(),E=h.mode,j=Oy({mode:"hidden",children:j},E),S=sl(S,E,m,null),j.return=h,S.return=h,j.sibling=S,h.child=j,E=h.child,E.memoizedState=w_(m),E.childLanes=A_(c,F,m),h.memoizedState=E_,S):($s(h),T_(h,j))}if(V=c.memoizedState,V!==null&&(j=V.dehydrated,j!==null)){if(O)h.flags&256?($s(h),h.flags&=-257,h=C_(c,h,m)):h.memoizedState!==null?(zs(),h.child=c.child,h.flags|=128,h=null):(zs(),E=S.fallback,j=h.mode,S=Oy({mode:"visible",children:S.children},j),E=sl(E,j,m,null),E.flags|=2,S.return=h,E.return=h,S.sibling=E,h.child=S,df(h,c.child,null,m),S=h.child,S.memoizedState=w_(m),S.childLanes=A_(c,F,m),h.memoizedState=E_,h=E);else if($s(h),uE(j)){if(F=j.nextSibling&&j.nextSibling.dataset,F)var Z=F.dgst;F=Z,S=Error(r(419)),S.stack="",S.digest=F,Ah({value:S,source:null,stack:null}),h=C_(c,h,m)}else if(Sn||Th(c,h,m,!1),F=(m&c.childLanes)!==0,Sn||F){if(F=kt,F!==null&&(S=m&-m,S=(S&42)!==0?1:Xi(S),S=(S&(F.suspendedLanes|m))!==0?0:S,S!==0&&S!==V.retryLane))throw V.retryLane=S,ef(c,S),ti(F,c,S),GN;j.data==="$?"||q_(),h=C_(c,h,m)}else j.data==="$?"?(h.flags|=192,h.child=c.child,h=null):(c=V.treeContext,Yt=Ki(j.nextSibling),cr=h,pt=!0,cl=null,Na=!1,c!==null&&(wi[Ai++]=Oo,wi[Ai++]=Io,wi[Ai++]=ul,Oo=c.id,Io=c.overflow,ul=h),h=T_(h,S.children),h.flags|=4096);return h}return E?(zs(),E=S.fallback,j=h.mode,V=c.child,Z=V.sibling,S=Do(V,{mode:"hidden",children:S.children}),S.subtreeFlags=V.subtreeFlags&65011712,Z!==null?E=Do(Z,E):(E=sl(E,j,m,null),E.flags|=2),E.return=h,S.return=h,S.sibling=E,h.child=S,S=E,E=h.child,j=c.child.memoizedState,j===null?j=w_(m):(V=j.cachePool,V!==null?(Z=cn._currentValue,V=V.parent!==Z?{parent:Z,pool:Z}:V):V=Uk(),j={baseLanes:j.baseLanes|m,cachePool:V}),E.memoizedState=j,E.childLanes=A_(c,F,m),h.memoizedState=E_,S):($s(h),m=c.child,c=m.sibling,m=Do(m,{mode:"visible",children:S.children}),m.return=h,m.sibling=null,c!==null&&(F=h.deletions,F===null?(h.deletions=[c],h.flags|=16):F.push(c)),h.child=m,h.memoizedState=null,m)}function T_(c,h){return h=Oy({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Oy(c,h){return c=Qr(22,c,null,h),c.lanes=0,c.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},c}function C_(c,h,m){return df(h,c.child,null,m),c=T_(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function n3(c,h,m){c.lanes|=h;var S=c.alternate;S!==null&&(S.lanes|=h),qx(c.return,h,m)}function D_(c,h,m,S,E){var O=c.memoizedState;O===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:E}:(O.isBackwards=h,O.rendering=null,O.renderingStartTime=0,O.last=S,O.tail=m,O.tailMode=E)}function r3(c,h,m){var S=h.pendingProps,E=S.revealOrder,O=S.tail;if(kn(c,h,S.children,m),S=fn.current,(S&2)!==0)S=S&1|2,h.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&n3(c,m,h);else if(c.tag===19)n3(c,m,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}S&=1}switch(J(fn,S),E){case"forwards":for(m=h.child,E=null;m!==null;)c=m.alternate,c!==null&&Ay(c)===null&&(E=m),m=m.sibling;m=E,m===null?(E=h.child,h.child=null):(E=m.sibling,m.sibling=null),D_(h,!1,E,m,O);break;case"backwards":for(m=null,E=h.child,h.child=null;E!==null;){if(c=E.alternate,c!==null&&Ay(c)===null){h.child=E;break}c=E.sibling,E.sibling=m,m=E,E=c}D_(h,!0,m,null,O);break;case"together":D_(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function Fo(c,h,m){if(c!==null&&(h.dependencies=c.dependencies),Vs|=h.lanes,(m&h.childLanes)===0)if(c!==null){if(Th(c,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(r(153));if(h.child!==null){for(c=h.child,m=Do(c,c.pendingProps),h.child=m,m.return=h;c.sibling!==null;)c=c.sibling,m=m.sibling=Do(c,c.pendingProps),m.return=h;m.sibling=null}return h.child}function O_(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&ly(c)))}function oX(c,h,m){switch(h.tag){case 3:Ve(h,h.stateNode.containerInfo),Rs(h,cn,c.memoizedState.cache),wh();break;case 27:case 5:$e(h);break;case 4:Ve(h,h.stateNode.containerInfo);break;case 10:Rs(h,h.type,h.memoizedProps.value);break;case 13:var S=h.memoizedState;if(S!==null)return S.dehydrated!==null?($s(h),h.flags|=128,null):(m&h.child.childLanes)!==0?t3(c,h,m):($s(h),c=Fo(c,h,m),c!==null?c.sibling:null);$s(h);break;case 19:var E=(c.flags&128)!==0;if(S=(m&h.childLanes)!==0,S||(Th(c,h,m,!1),S=(m&h.childLanes)!==0),E){if(S)return r3(c,h,m);h.flags|=128}if(E=h.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),J(fn,fn.current),S)break;return null;case 22:case 23:return h.lanes=0,QN(c,h,m);case 24:Rs(h,cn,c.memoizedState.cache)}return Fo(c,h,m)}function i3(c,h,m){if(c!==null)if(c.memoizedProps!==h.pendingProps)Sn=!0;else{if(!O_(c,m)&&(h.flags&128)===0)return Sn=!1,oX(c,h,m);Sn=(c.flags&131072)!==0}else Sn=!1,pt&&(h.flags&1048576)!==0&&Nk(h,uy,h.index);switch(h.lanes=0,h.tag){case 16:e:{c=h.pendingProps;var S=h.elementType,E=S._init;if(S=E(S._payload),h.type=S,typeof S=="function")zx(S)?(c=ml(S,c),h.tag=1,h=JN(null,h,S,c,m)):(h.tag=0,h=__(null,h,S,c,m));else{if(S!=null){if(E=S.$$typeof,E===A){h.tag=11,h=YN(null,h,S,c,m);break e}else if(E===D){h.tag=14,h=WN(null,h,S,c,m);break e}}throw h=$(S)||S,Error(r(306,h,""))}}return h;case 0:return __(c,h,h.type,h.pendingProps,m);case 1:return S=h.type,E=ml(S,h.pendingProps),JN(c,h,S,E,m);case 3:e:{if(Ve(h,h.stateNode.containerInfo),c===null)throw Error(r(387));S=h.pendingProps;var O=h.memoizedState;E=O.element,Kx(c,h),kh(h,S,null,m);var F=h.memoizedState;if(S=F.cache,Rs(h,cn,S),S!==O.cache&&Gx(h,[cn],m,!0),Rh(),S=F.element,O.isDehydrated)if(O={element:S,isDehydrated:!1,cache:F.cache},h.updateQueue.baseState=O,h.memoizedState=O,h.flags&256){h=e3(c,h,S,m);break e}else if(S!==E){E=_i(Error(r(424)),h),Ah(E),h=e3(c,h,S,m);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(Yt=Ki(c.firstChild),cr=h,pt=!0,cl=null,Na=!0,m=PN(h,null,S,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(wh(),S===E){h=Fo(c,h,m);break e}kn(c,h,S,m)}h=h.child}return h;case 26:return Dy(c,h),c===null?(m=uF(h.type,null,h.pendingProps,null))?h.memoizedState=m:pt||(m=h.type,c=h.pendingProps,S=Vy(we.current).createElement(m),S[Yn]=h,S[Or]=c,Fn(S,m,c),bn(S),h.stateNode=S):h.memoizedState=uF(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return $e(h),c===null&&pt&&(S=h.stateNode=aF(h.type,h.pendingProps,we.current),cr=h,Na=!0,E=Yt,Ys(h.type)?(lE=E,Yt=Ki(S.firstChild)):Yt=E),kn(c,h,h.pendingProps.children,m),Dy(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&pt&&((E=S=Yt)&&(S=NX(S,h.type,h.pendingProps,Na),S!==null?(h.stateNode=S,cr=h,Yt=Ki(S.firstChild),Na=!1,E=!0):E=!1),E||fl(h)),$e(h),E=h.type,O=h.pendingProps,F=c!==null?c.memoizedProps:null,S=O.children,aE(E,O)?S=null:F!==null&&aE(E,F)&&(h.flags|=32),h.memoizedState!==null&&(E=i_(c,h,KW,null,null,m),tp._currentValue=E),Dy(c,h),kn(c,h,S,m),h.child;case 6:return c===null&&pt&&((c=m=Yt)&&(m=FX(m,h.pendingProps,Na),m!==null?(h.stateNode=m,cr=h,Yt=null,c=!0):c=!1),c||fl(h)),null;case 13:return t3(c,h,m);case 4:return Ve(h,h.stateNode.containerInfo),S=h.pendingProps,c===null?h.child=df(h,null,S,m):kn(c,h,S,m),h.child;case 11:return YN(c,h,h.type,h.pendingProps,m);case 7:return kn(c,h,h.pendingProps,m),h.child;case 8:return kn(c,h,h.pendingProps.children,m),h.child;case 12:return kn(c,h,h.pendingProps.children,m),h.child;case 10:return S=h.pendingProps,Rs(h,h.type,S.value),kn(c,h,S.children,m),h.child;case 9:return E=h.type._context,S=h.pendingProps.children,hl(h),E=Wn(E),S=S(E),h.flags|=1,kn(c,h,S,m),h.child;case 14:return WN(c,h,h.type,h.pendingProps,m);case 15:return XN(c,h,h.type,h.pendingProps,m);case 19:return r3(c,h,m);case 31:return S=h.pendingProps,m=h.mode,S={mode:S.mode,children:S.children},c===null?(m=Oy(S,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Do(c.child,S),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return QN(c,h,m);case 24:return hl(h),S=Wn(cn),c===null?(E=Xx(),E===null&&(E=kt,O=Yx(),E.pooledCache=O,O.refCount++,O!==null&&(E.pooledCacheLanes|=m),E=O),h.memoizedState={parent:S,cache:E},Zx(h),Rs(h,cn,E)):((c.lanes&m)!==0&&(Kx(c,h),kh(h,null,null,m),Rh()),E=c.memoizedState,O=h.memoizedState,E.parent!==S?(E={parent:S,cache:S},h.memoizedState=E,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=E),Rs(h,cn,S)):(S=O.cache,Rs(h,cn,S),S!==E.cache&&Gx(h,[cn],m,!0))),kn(c,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(r(156,h.tag))}function Po(c){c.flags|=4}function a3(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!hF(h)){if(h=Ti.current,h!==null&&((ot&4194048)===ot?Fa!==null:(ot&62914560)!==ot&&(ot&536870912)===0||h!==Fa))throw Ih=Qx,Bk;c.flags|=8192}}function Iy(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?Wr():536870912,c.lanes|=h,mf|=h)}function jh(c,h){if(!pt)switch(c.tailMode){case"hidden":h=c.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?c.tail=null:m.sibling=null;break;case"collapsed":m=c.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:S.sibling=null}}function Bt(c){var h=c.alternate!==null&&c.alternate.child===c.child,m=0,S=0;if(h)for(var E=c.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags&65011712,S|=E.flags&65011712,E.return=c,E=E.sibling;else for(E=c.child;E!==null;)m|=E.lanes|E.childLanes,S|=E.subtreeFlags,S|=E.flags,E.return=c,E=E.sibling;return c.subtreeFlags|=S,c.childLanes=m,h}function sX(c,h,m){var S=h.pendingProps;switch(Bx(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(h),null;case 1:return Bt(h),null;case 3:return m=h.stateNode,S=null,c!==null&&(S=c.memoizedState.cache),h.memoizedState.cache!==S&&(h.flags|=2048),Ro(cn),me(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(c===null||c.child===null)&&(Eh(h)?Po(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,$k())),Bt(h),null;case 26:return m=h.memoizedState,c===null?(Po(h),m!==null?(Bt(h),a3(h,m)):(Bt(h),h.flags&=-16777217)):m?m!==c.memoizedState?(Po(h),Bt(h),a3(h,m)):(Bt(h),h.flags&=-16777217):(c.memoizedProps!==S&&Po(h),Bt(h),h.flags&=-16777217),null;case 27:De(h),m=we.current;var E=h.type;if(c!==null&&h.stateNode!=null)c.memoizedProps!==S&&Po(h);else{if(!S){if(h.stateNode===null)throw Error(r(166));return Bt(h),null}c=de.current,Eh(h)?Fk(h):(c=aF(E,S,m),h.stateNode=c,Po(h))}return Bt(h),null;case 5:if(De(h),m=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==S&&Po(h);else{if(!S){if(h.stateNode===null)throw Error(r(166));return Bt(h),null}if(c=de.current,Eh(h))Fk(h);else{switch(E=Vy(we.current),c){case 1:c=E.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:c=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":c=E.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":c=E.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":c=E.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild);break;case"select":c=typeof S.is=="string"?E.createElement("select",{is:S.is}):E.createElement("select"),S.multiple?c.multiple=!0:S.size&&(c.size=S.size);break;default:c=typeof S.is=="string"?E.createElement(m,{is:S.is}):E.createElement(m)}}c[Yn]=h,c[Or]=S;e:for(E=h.child;E!==null;){if(E.tag===5||E.tag===6)c.appendChild(E.stateNode);else if(E.tag!==4&&E.tag!==27&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===h)break e;for(;E.sibling===null;){if(E.return===null||E.return===h)break e;E=E.return}E.sibling.return=E.return,E=E.sibling}h.stateNode=c;e:switch(Fn(c,m,S),m){case"button":case"input":case"select":case"textarea":c=!!S.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&Po(h)}}return Bt(h),h.flags&=-16777217,null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==S&&Po(h);else{if(typeof S!="string"&&h.stateNode===null)throw Error(r(166));if(c=we.current,Eh(h)){if(c=h.stateNode,m=h.memoizedProps,S=null,E=cr,E!==null)switch(E.tag){case 27:case 5:S=E.memoizedProps}c[Yn]=h,c=!!(c.nodeValue===m||S!==null&&S.suppressHydrationWarning===!0||K3(c.nodeValue,m)),c||fl(h)}else c=Vy(c).createTextNode(S),c[Yn]=h,h.stateNode=c}return Bt(h),null;case 13:if(S=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(E=Eh(h),S!==null&&S.dehydrated!==null){if(c===null){if(!E)throw Error(r(318));if(E=h.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[Yn]=h}else wh(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Bt(h),E=!1}else E=$k(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=E),E=!0;if(!E)return h.flags&256?(No(h),h):(No(h),null)}if(No(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=S!==null,c=c!==null&&c.memoizedState!==null,m){S=h.child,E=null,S.alternate!==null&&S.alternate.memoizedState!==null&&S.alternate.memoizedState.cachePool!==null&&(E=S.alternate.memoizedState.cachePool.pool);var O=null;S.memoizedState!==null&&S.memoizedState.cachePool!==null&&(O=S.memoizedState.cachePool.pool),O!==E&&(S.flags|=2048)}return m!==c&&m&&(h.child.flags|=8192),Iy(h,h.updateQueue),Bt(h),null;case 4:return me(),c===null&&eE(h.stateNode.containerInfo),Bt(h),null;case 10:return Ro(h.type),Bt(h),null;case 19:if(Q(fn),E=h.memoizedState,E===null)return Bt(h),null;if(S=(h.flags&128)!==0,O=E.rendering,O===null)if(S)jh(E,!1);else{if(Wt!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(O=Ay(c),O!==null){for(h.flags|=128,jh(E,!1),c=O.updateQueue,h.updateQueue=c,Iy(h,c),h.subtreeFlags=0,c=m,m=h.child;m!==null;)kk(m,c),m=m.sibling;return J(fn,fn.current&1|2),h.child}c=c.sibling}E.tail!==null&&Ot()>ky&&(h.flags|=128,S=!0,jh(E,!1),h.lanes=4194304)}else{if(!S)if(c=Ay(O),c!==null){if(h.flags|=128,S=!0,c=c.updateQueue,h.updateQueue=c,Iy(h,c),jh(E,!0),E.tail===null&&E.tailMode==="hidden"&&!O.alternate&&!pt)return Bt(h),null}else 2*Ot()-E.renderingStartTime>ky&&m!==536870912&&(h.flags|=128,S=!0,jh(E,!1),h.lanes=4194304);E.isBackwards?(O.sibling=h.child,h.child=O):(c=E.last,c!==null?c.sibling=O:h.child=O,E.last=O)}return E.tail!==null?(h=E.tail,E.rendering=h,E.tail=h.sibling,E.renderingStartTime=Ot(),h.sibling=null,c=fn.current,J(fn,S?c&1|2:c&1),h):(Bt(h),null);case 22:case 23:return No(h),n_(),S=h.memoizedState!==null,c!==null?c.memoizedState!==null!==S&&(h.flags|=8192):S&&(h.flags|=8192),S?(m&536870912)!==0&&(h.flags&128)===0&&(Bt(h),h.subtreeFlags&6&&(h.flags|=8192)):Bt(h),m=h.updateQueue,m!==null&&Iy(h,m.retryQueue),m=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),S=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(S=h.memoizedState.cachePool.pool),S!==m&&(h.flags|=2048),c!==null&&Q(pl),null;case 24:return m=null,c!==null&&(m=c.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),Ro(cn),Bt(h),null;case 25:return null;case 30:return null}throw Error(r(156,h.tag))}function uX(c,h){switch(Bx(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return Ro(cn),me(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return De(h),null;case 13:if(No(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(r(340));wh()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return Q(fn),null;case 4:return me(),null;case 10:return Ro(h.type),null;case 22:case 23:return No(h),n_(),c!==null&&Q(pl),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return Ro(cn),null;case 25:return null;default:return null}}function o3(c,h){switch(Bx(h),h.tag){case 3:Ro(cn),me();break;case 26:case 27:case 5:De(h);break;case 4:me();break;case 13:No(h);break;case 19:Q(fn);break;case 10:Ro(h.type);break;case 22:case 23:No(h),n_(),c!==null&&Q(pl);break;case 24:Ro(cn)}}function Uh(c,h){try{var m=h.updateQueue,S=m!==null?m.lastEffect:null;if(S!==null){var E=S.next;m=E;do{if((m.tag&c)===c){S=void 0;var O=m.create,F=m.inst;S=O(),F.destroy=S}m=m.next}while(m!==E)}}catch(j){It(h,h.return,j)}}function Ls(c,h,m){try{var S=h.updateQueue,E=S!==null?S.lastEffect:null;if(E!==null){var O=E.next;S=O;do{if((S.tag&c)===c){var F=S.inst,j=F.destroy;if(j!==void 0){F.destroy=void 0,E=h;var V=m,Z=j;try{Z()}catch(ie){It(E,V,ie)}}}S=S.next}while(S!==O)}}catch(ie){It(h,h.return,ie)}}function s3(c){var h=c.updateQueue;if(h!==null){var m=c.stateNode;try{Wk(h,m)}catch(S){It(c,c.return,S)}}}function u3(c,h,m){m.props=ml(c.type,c.memoizedProps),m.state=c.memoizedState;try{m.componentWillUnmount()}catch(S){It(c,h,S)}}function Bh(c,h){try{var m=c.ref;if(m!==null){switch(c.tag){case 26:case 27:case 5:var S=c.stateNode;break;case 30:S=c.stateNode;break;default:S=c.stateNode}typeof m=="function"?c.refCleanup=m(S):m.current=S}}catch(E){It(c,h,E)}}function Pa(c,h){var m=c.ref,S=c.refCleanup;if(m!==null)if(typeof S=="function")try{S()}catch(E){It(c,h,E)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(E){It(c,h,E)}else m.current=null}function l3(c){var h=c.type,m=c.memoizedProps,S=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&S.focus();break e;case"img":m.src?S.src=m.src:m.srcSet&&(S.srcset=m.srcSet)}}catch(E){It(c,c.return,E)}}function I_(c,h,m){try{var S=c.stateNode;OX(S,c.type,m,h),S[Or]=h}catch(E){It(c,c.return,E)}}function c3(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Ys(c.type)||c.tag===4}function M_(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||c3(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Ys(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function R_(c,h,m){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(c,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(c),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=By));else if(S!==4&&(S===27&&Ys(c.type)&&(m=c.stateNode,h=null),c=c.child,c!==null))for(R_(c,h,m),c=c.sibling;c!==null;)R_(c,h,m),c=c.sibling}function My(c,h,m){var S=c.tag;if(S===5||S===6)c=c.stateNode,h?m.insertBefore(c,h):m.appendChild(c);else if(S!==4&&(S===27&&Ys(c.type)&&(m=c.stateNode),c=c.child,c!==null))for(My(c,h,m),c=c.sibling;c!==null;)My(c,h,m),c=c.sibling}function f3(c){var h=c.stateNode,m=c.memoizedProps;try{for(var S=c.type,E=h.attributes;E.length;)h.removeAttributeNode(E[0]);Fn(h,S,m),h[Yn]=c,h[Or]=m}catch(O){It(c,c.return,O)}}var $o=!1,en=!1,k_=!1,d3=typeof WeakSet=="function"?WeakSet:Set,xn=null;function lX(c,h){if(c=c.containerInfo,rE=Xy,c=Ek(c),Mx(c)){if("selectionStart"in c)var m={start:c.selectionStart,end:c.selectionEnd};else e:{m=(m=c.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var E=S.anchorOffset,O=S.focusNode;S=S.focusOffset;try{m.nodeType,O.nodeType}catch{m=null;break e}var F=0,j=-1,V=-1,Z=0,ie=0,se=c,K=null;t:for(;;){for(var ee;se!==m||E!==0&&se.nodeType!==3||(j=F+E),se!==O||S!==0&&se.nodeType!==3||(V=F+S),se.nodeType===3&&(F+=se.nodeValue.length),(ee=se.firstChild)!==null;)K=se,se=ee;for(;;){if(se===c)break t;if(K===m&&++Z===E&&(j=F),K===O&&++ie===S&&(V=F),(ee=se.nextSibling)!==null)break;se=K,K=se.parentNode}se=ee}m=j===-1||V===-1?null:{start:j,end:V}}else m=null}m=m||{start:0,end:0}}else m=null;for(iE={focusedElem:c,selectionRange:m},Xy=!1,xn=h;xn!==null;)if(h=xn,c=h.child,(h.subtreeFlags&1024)!==0&&c!==null)c.return=h,xn=c;else for(;xn!==null;){switch(h=xn,O=h.alternate,c=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((c&1024)!==0&&O!==null){c=void 0,m=h,E=O.memoizedProps,O=O.memoizedState,S=m.stateNode;try{var Le=ml(m.type,E,m.elementType===m.type);c=S.getSnapshotBeforeUpdate(Le,O),S.__reactInternalSnapshotBeforeUpdate=c}catch(Pe){It(m,m.return,Pe)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,m=c.nodeType,m===9)sE(c);else if(m===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":sE(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(r(163))}if(c=h.sibling,c!==null){c.return=h.return,xn=c;break}xn=h.return}}function h3(c,h,m){var S=m.flags;switch(m.tag){case 0:case 11:case 15:js(c,m),S&4&&Uh(5,m);break;case 1:if(js(c,m),S&4)if(c=m.stateNode,h===null)try{c.componentDidMount()}catch(F){It(m,m.return,F)}else{var E=ml(m.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(E,h,c.__reactInternalSnapshotBeforeUpdate)}catch(F){It(m,m.return,F)}}S&64&&s3(m),S&512&&Bh(m,m.return);break;case 3:if(js(c,m),S&64&&(c=m.updateQueue,c!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Wk(c,h)}catch(F){It(m,m.return,F)}}break;case 27:h===null&&S&4&&f3(m);case 26:case 5:js(c,m),h===null&&S&4&&l3(m),S&512&&Bh(m,m.return);break;case 12:js(c,m);break;case 13:js(c,m),S&4&&m3(c,m),S&64&&(c=m.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(m=vX.bind(null,m),PX(c,m))));break;case 22:if(S=m.memoizedState!==null||$o,!S){h=h!==null&&h.memoizedState!==null||en,E=$o;var O=en;$o=S,(en=h)&&!O?Us(c,m,(m.subtreeFlags&8772)!==0):js(c,m),$o=E,en=O}break;case 30:break;default:js(c,m)}}function p3(c){var h=c.alternate;h!==null&&(c.alternate=null,p3(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&dx(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var zt=null,Rr=!1;function zo(c,h,m){for(m=m.child;m!==null;)g3(c,h,m),m=m.sibling}function g3(c,h,m){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(Ao,m)}catch{}switch(m.tag){case 26:en||Pa(m,h),zo(c,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:en||Pa(m,h);var S=zt,E=Rr;Ys(m.type)&&(zt=m.stateNode,Rr=!1),zo(c,h,m),Zh(m.stateNode),zt=S,Rr=E;break;case 5:en||Pa(m,h);case 6:if(S=zt,E=Rr,zt=null,zo(c,h,m),zt=S,Rr=E,zt!==null)if(Rr)try{(zt.nodeType===9?zt.body:zt.nodeName==="HTML"?zt.ownerDocument.body:zt).removeChild(m.stateNode)}catch(O){It(m,h,O)}else try{zt.removeChild(m.stateNode)}catch(O){It(m,h,O)}break;case 18:zt!==null&&(Rr?(c=zt,rF(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,m.stateNode),ap(c)):rF(zt,m.stateNode));break;case 4:S=zt,E=Rr,zt=m.stateNode.containerInfo,Rr=!0,zo(c,h,m),zt=S,Rr=E;break;case 0:case 11:case 14:case 15:en||Ls(2,m,h),en||Ls(4,m,h),zo(c,h,m);break;case 1:en||(Pa(m,h),S=m.stateNode,typeof S.componentWillUnmount=="function"&&u3(m,h,S)),zo(c,h,m);break;case 21:zo(c,h,m);break;case 22:en=(S=en)||m.memoizedState!==null,zo(c,h,m),en=S;break;default:zo(c,h,m)}}function m3(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{ap(c)}catch(m){It(h,h.return,m)}}function cX(c){switch(c.tag){case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new d3),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new d3),h;default:throw Error(r(435,c.tag))}}function N_(c,h){var m=cX(c);h.forEach(function(S){var E=bX.bind(null,c,S);m.has(S)||(m.add(S),S.then(E,E))})}function Zr(c,h){var m=h.deletions;if(m!==null)for(var S=0;S<m.length;S++){var E=m[S],O=c,F=h,j=F;e:for(;j!==null;){switch(j.tag){case 27:if(Ys(j.type)){zt=j.stateNode,Rr=!1;break e}break;case 5:zt=j.stateNode,Rr=!1;break e;case 3:case 4:zt=j.stateNode.containerInfo,Rr=!0;break e}j=j.return}if(zt===null)throw Error(r(160));g3(O,F,E),zt=null,Rr=!1,O=E.alternate,O!==null&&(O.return=null),E.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)y3(h,c),h=h.sibling}var Zi=null;function y3(c,h){var m=c.alternate,S=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:Zr(h,c),Kr(c),S&4&&(Ls(3,c,c.return),Uh(3,c),Ls(5,c,c.return));break;case 1:Zr(h,c),Kr(c),S&512&&(en||m===null||Pa(m,m.return)),S&64&&$o&&(c=c.updateQueue,c!==null&&(S=c.callbacks,S!==null&&(m=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=m===null?S:m.concat(S))));break;case 26:var E=Zi;if(Zr(h,c),Kr(c),S&512&&(en||m===null||Pa(m,m.return)),S&4){var O=m!==null?m.memoizedState:null;if(S=c.memoizedState,m===null)if(S===null)if(c.stateNode===null){e:{S=c.type,m=c.memoizedProps,E=E.ownerDocument||E;t:switch(S){case"title":O=E.getElementsByTagName("title")[0],(!O||O[dh]||O[Yn]||O.namespaceURI==="http://www.w3.org/2000/svg"||O.hasAttribute("itemprop"))&&(O=E.createElement(S),E.head.insertBefore(O,E.querySelector("head > title"))),Fn(O,S,m),O[Yn]=c,bn(O),S=O;break e;case"link":var F=fF("link","href",E).get(S+(m.href||""));if(F){for(var j=0;j<F.length;j++)if(O=F[j],O.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&O.getAttribute("rel")===(m.rel==null?null:m.rel)&&O.getAttribute("title")===(m.title==null?null:m.title)&&O.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){F.splice(j,1);break t}}O=E.createElement(S),Fn(O,S,m),E.head.appendChild(O);break;case"meta":if(F=fF("meta","content",E).get(S+(m.content||""))){for(j=0;j<F.length;j++)if(O=F[j],O.getAttribute("content")===(m.content==null?null:""+m.content)&&O.getAttribute("name")===(m.name==null?null:m.name)&&O.getAttribute("property")===(m.property==null?null:m.property)&&O.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&O.getAttribute("charset")===(m.charSet==null?null:m.charSet)){F.splice(j,1);break t}}O=E.createElement(S),Fn(O,S,m),E.head.appendChild(O);break;default:throw Error(r(468,S))}O[Yn]=c,bn(O),S=O}c.stateNode=S}else dF(E,c.type,c.stateNode);else c.stateNode=cF(E,S,c.memoizedProps);else O!==S?(O===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):O.count--,S===null?dF(E,c.type,c.stateNode):cF(E,S,c.memoizedProps)):S===null&&c.stateNode!==null&&I_(c,c.memoizedProps,m.memoizedProps)}break;case 27:Zr(h,c),Kr(c),S&512&&(en||m===null||Pa(m,m.return)),m!==null&&S&4&&I_(c,c.memoizedProps,m.memoizedProps);break;case 5:if(Zr(h,c),Kr(c),S&512&&(en||m===null||Pa(m,m.return)),c.flags&32){E=c.stateNode;try{Yc(E,"")}catch(ee){It(c,c.return,ee)}}S&4&&c.stateNode!=null&&(E=c.memoizedProps,I_(c,E,m!==null?m.memoizedProps:E)),S&1024&&(k_=!0);break;case 6:if(Zr(h,c),Kr(c),S&4){if(c.stateNode===null)throw Error(r(162));S=c.memoizedProps,m=c.stateNode;try{m.nodeValue=S}catch(ee){It(c,c.return,ee)}}break;case 3:if(Gy=null,E=Zi,Zi=Hy(h.containerInfo),Zr(h,c),Zi=E,Kr(c),S&4&&m!==null&&m.memoizedState.isDehydrated)try{ap(h.containerInfo)}catch(ee){It(c,c.return,ee)}k_&&(k_=!1,v3(c));break;case 4:S=Zi,Zi=Hy(c.stateNode.containerInfo),Zr(h,c),Kr(c),Zi=S;break;case 12:Zr(h,c),Kr(c);break;case 13:Zr(h,c),Kr(c),c.child.flags&8192&&c.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(j_=Ot()),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,N_(c,S)));break;case 22:E=c.memoizedState!==null;var V=m!==null&&m.memoizedState!==null,Z=$o,ie=en;if($o=Z||E,en=ie||V,Zr(h,c),en=ie,$o=Z,Kr(c),S&8192)e:for(h=c.stateNode,h._visibility=E?h._visibility&-2:h._visibility|1,E&&(m===null||V||$o||en||yl(c)),m=null,h=c;;){if(h.tag===5||h.tag===26){if(m===null){V=m=h;try{if(O=V.stateNode,E)F=O.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none";else{j=V.stateNode;var se=V.memoizedProps.style,K=se!=null&&se.hasOwnProperty("display")?se.display:null;j.style.display=K==null||typeof K=="boolean"?"":(""+K).trim()}}catch(ee){It(V,V.return,ee)}}}else if(h.tag===6){if(m===null){V=h;try{V.stateNode.nodeValue=E?"":V.memoizedProps}catch(ee){It(V,V.return,ee)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}S&4&&(S=c.updateQueue,S!==null&&(m=S.retryQueue,m!==null&&(S.retryQueue=null,N_(c,m))));break;case 19:Zr(h,c),Kr(c),S&4&&(S=c.updateQueue,S!==null&&(c.updateQueue=null,N_(c,S)));break;case 30:break;case 21:break;default:Zr(h,c),Kr(c)}}function Kr(c){var h=c.flags;if(h&2){try{for(var m,S=c.return;S!==null;){if(c3(S)){m=S;break}S=S.return}if(m==null)throw Error(r(160));switch(m.tag){case 27:var E=m.stateNode,O=M_(c);My(c,O,E);break;case 5:var F=m.stateNode;m.flags&32&&(Yc(F,""),m.flags&=-33);var j=M_(c);My(c,j,F);break;case 3:case 4:var V=m.stateNode.containerInfo,Z=M_(c);R_(c,Z,V);break;default:throw Error(r(161))}}catch(ie){It(c,c.return,ie)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function v3(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;v3(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function js(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)h3(c,h.alternate,h),h=h.sibling}function yl(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:Ls(4,h,h.return),yl(h);break;case 1:Pa(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&u3(h,h.return,m),yl(h);break;case 27:Zh(h.stateNode);case 26:case 5:Pa(h,h.return),yl(h);break;case 22:h.memoizedState===null&&yl(h);break;case 30:yl(h);break;default:yl(h)}c=c.sibling}}function Us(c,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var S=h.alternate,E=c,O=h,F=O.flags;switch(O.tag){case 0:case 11:case 15:Us(E,O,m),Uh(4,O);break;case 1:if(Us(E,O,m),S=O,E=S.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(Z){It(S,S.return,Z)}if(S=O,E=S.updateQueue,E!==null){var j=S.stateNode;try{var V=E.shared.hiddenCallbacks;if(V!==null)for(E.shared.hiddenCallbacks=null,E=0;E<V.length;E++)Yk(V[E],j)}catch(Z){It(S,S.return,Z)}}m&&F&64&&s3(O),Bh(O,O.return);break;case 27:f3(O);case 26:case 5:Us(E,O,m),m&&S===null&&F&4&&l3(O),Bh(O,O.return);break;case 12:Us(E,O,m);break;case 13:Us(E,O,m),m&&F&4&&m3(E,O);break;case 22:O.memoizedState===null&&Us(E,O,m),Bh(O,O.return);break;case 30:break;default:Us(E,O,m)}h=h.sibling}}function F_(c,h){var m=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==m&&(c!=null&&c.refCount++,m!=null&&Ch(m))}function P_(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Ch(c))}function $a(c,h,m,S){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)b3(c,h,m,S),h=h.sibling}function b3(c,h,m,S){var E=h.flags;switch(h.tag){case 0:case 11:case 15:$a(c,h,m,S),E&2048&&Uh(9,h);break;case 1:$a(c,h,m,S);break;case 3:$a(c,h,m,S),E&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&Ch(c)));break;case 12:if(E&2048){$a(c,h,m,S),c=h.stateNode;try{var O=h.memoizedProps,F=O.id,j=O.onPostCommit;typeof j=="function"&&j(F,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(V){It(h,h.return,V)}}else $a(c,h,m,S);break;case 13:$a(c,h,m,S);break;case 23:break;case 22:O=h.stateNode,F=h.alternate,h.memoizedState!==null?O._visibility&2?$a(c,h,m,S):Vh(c,h):O._visibility&2?$a(c,h,m,S):(O._visibility|=2,hf(c,h,m,S,(h.subtreeFlags&10256)!==0)),E&2048&&F_(F,h);break;case 24:$a(c,h,m,S),E&2048&&P_(h.alternate,h);break;default:$a(c,h,m,S)}}function hf(c,h,m,S,E){for(E=E&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var O=c,F=h,j=m,V=S,Z=F.flags;switch(F.tag){case 0:case 11:case 15:hf(O,F,j,V,E),Uh(8,F);break;case 23:break;case 22:var ie=F.stateNode;F.memoizedState!==null?ie._visibility&2?hf(O,F,j,V,E):Vh(O,F):(ie._visibility|=2,hf(O,F,j,V,E)),E&&Z&2048&&F_(F.alternate,F);break;case 24:hf(O,F,j,V,E),E&&Z&2048&&P_(F.alternate,F);break;default:hf(O,F,j,V,E)}h=h.sibling}}function Vh(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=c,S=h,E=S.flags;switch(S.tag){case 22:Vh(m,S),E&2048&&F_(S.alternate,S);break;case 24:Vh(m,S),E&2048&&P_(S.alternate,S);break;default:Vh(m,S)}h=h.sibling}}var Hh=8192;function pf(c){if(c.subtreeFlags&Hh)for(c=c.child;c!==null;)S3(c),c=c.sibling}function S3(c){switch(c.tag){case 26:pf(c),c.flags&Hh&&c.memoizedState!==null&&XX(Zi,c.memoizedState,c.memoizedProps);break;case 5:pf(c);break;case 3:case 4:var h=Zi;Zi=Hy(c.stateNode.containerInfo),pf(c),Zi=h;break;case 22:c.memoizedState===null&&(h=c.alternate,h!==null&&h.memoizedState!==null?(h=Hh,Hh=16777216,pf(c),Hh=h):pf(c));break;default:pf(c)}}function x3(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function qh(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var S=h[m];xn=S,E3(S,c)}x3(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)_3(c),c=c.sibling}function _3(c){switch(c.tag){case 0:case 11:case 15:qh(c),c.flags&2048&&Ls(9,c,c.return);break;case 3:qh(c);break;case 12:qh(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,Ry(c)):qh(c);break;default:qh(c)}}function Ry(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var S=h[m];xn=S,E3(S,c)}x3(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:Ls(8,h,h.return),Ry(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Ry(h));break;default:Ry(h)}c=c.sibling}}function E3(c,h){for(;xn!==null;){var m=xn;switch(m.tag){case 0:case 11:case 15:Ls(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var S=m.memoizedState.cachePool.pool;S!=null&&S.refCount++}break;case 24:Ch(m.memoizedState.cache)}if(S=m.child,S!==null)S.return=m,xn=S;else e:for(m=c;xn!==null;){S=xn;var E=S.sibling,O=S.return;if(p3(S),S===m){xn=null;break e}if(E!==null){E.return=O,xn=E;break e}xn=O}}}var fX={getCacheForType:function(c){var h=Wn(cn),m=h.data.get(c);return m===void 0&&(m=c(),h.data.set(c,m)),m}},dX=typeof WeakMap=="function"?WeakMap:Map,vt=0,kt=null,et=null,ot=0,bt=0,Jr=null,Bs=!1,gf=!1,$_=!1,Lo=0,Wt=0,Vs=0,vl=0,z_=0,Ci=0,mf=0,Gh=null,kr=null,L_=!1,j_=0,ky=1/0,Ny=null,Hs=null,Nn=0,qs=null,yf=null,vf=0,U_=0,B_=null,w3=null,Yh=0,V_=null;function ei(){if((vt&2)!==0&&ot!==0)return ot&-ot;if(L.T!==null){var c=af;return c!==0?c:Q_()}return qm()}function A3(){Ci===0&&(Ci=(ot&536870912)===0||pt?yi():536870912);var c=Ti.current;return c!==null&&(c.flags|=32),Ci}function ti(c,h,m){(c===kt&&(bt===2||bt===9)||c.cancelPendingCommit!==null)&&(bf(c,0),Gs(c,ot,Ci,!1)),ka(c,m),((vt&2)===0||c!==kt)&&(c===kt&&((vt&2)===0&&(vl|=m),Wt===4&&Gs(c,ot,Ci,!1)),za(c))}function T3(c,h,m){if((vt&6)!==0)throw Error(r(327));var S=!m&&(h&124)===0&&(h&c.expiredLanes)===0||Qe(c,h),E=S?gX(c,h):G_(c,h,!0),O=S;do{if(E===0){gf&&!S&&Gs(c,h,0,!1);break}else{if(m=c.current.alternate,O&&!hX(m)){E=G_(c,h,!1),O=!1;continue}if(E===2){if(O=h,c.errorRecoveryDisabledLanes&O)var F=0;else F=c.pendingLanes&-536870913,F=F!==0?F:F&536870912?536870912:0;if(F!==0){h=F;e:{var j=c;E=Gh;var V=j.current.memoizedState.isDehydrated;if(V&&(bf(j,F).flags|=256),F=G_(j,F,!1),F!==2){if($_&&!V){j.errorRecoveryDisabledLanes|=O,vl|=O,E=4;break e}O=kr,kr=E,O!==null&&(kr===null?kr=O:kr.push.apply(kr,O))}E=F}if(O=!1,E!==2)continue}}if(E===1){bf(c,0),Gs(c,h,0,!0);break}e:{switch(S=c,O=E,O){case 0:case 1:throw Error(r(345));case 4:if((h&4194048)!==h)break;case 6:Gs(S,h,Ci,!Bs);break e;case 2:kr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((h&62914560)===h&&(E=j_+300-Ot(),10<E)){if(Gs(S,h,Ci,!Bs),He(S,0,!0)!==0)break e;S.timeoutHandle=tF(C3.bind(null,S,m,kr,Ny,L_,h,Ci,vl,mf,Bs,O,2,-0,0),E);break e}C3(S,m,kr,Ny,L_,h,Ci,vl,mf,Bs,O,0,-0,0)}}break}while(!0);za(c)}function C3(c,h,m,S,E,O,F,j,V,Z,ie,se,K,ee){if(c.timeoutHandle=-1,se=h.subtreeFlags,(se&8192||(se&16785408)===16785408)&&(ep={stylesheets:null,count:0,unsuspend:WX},S3(h),se=QX(),se!==null)){c.cancelPendingCommit=se(N3.bind(null,c,h,O,m,S,E,F,j,V,ie,1,K,ee)),Gs(c,O,F,!Z);return}N3(c,h,O,m,S,E,F,j,V)}function hX(c){for(var h=c;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var S=0;S<m.length;S++){var E=m[S],O=E.getSnapshot;E=E.value;try{if(!Xr(O(),E))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function Gs(c,h,m,S){h&=~z_,h&=~vl,c.suspendedLanes|=h,c.pingedLanes&=~h,S&&(c.warmLanes|=h),S=c.expirationTimes;for(var E=h;0<E;){var O=31-Gn(E),F=1<<O;S[O]=-1,E&=~F}m!==0&&Os(c,m,h)}function Fy(){return(vt&6)===0?(Wh(0),!1):!0}function H_(){if(et!==null){if(bt===0)var c=et.return;else c=et,Mo=dl=null,s_(c),ff=null,zh=0,c=et;for(;c!==null;)o3(c.alternate,c),c=c.return;et=null}}function bf(c,h){var m=c.timeoutHandle;m!==-1&&(c.timeoutHandle=-1,MX(m)),m=c.cancelPendingCommit,m!==null&&(c.cancelPendingCommit=null,m()),H_(),kt=c,et=m=Do(c.current,null),ot=h,bt=0,Jr=null,Bs=!1,gf=Qe(c,h),$_=!1,mf=Ci=z_=vl=Vs=Wt=0,kr=Gh=null,L_=!1,(h&8)!==0&&(h|=h&32);var S=c.entangledLanes;if(S!==0)for(c=c.entanglements,S&=h;0<S;){var E=31-Gn(S),O=1<<E;h|=c[E],S&=~O}return Lo=h,ry(),m}function D3(c,h){We=null,L.H=_y,h===Oh||h===dy?(h=qk(),bt=3):h===Bk?(h=qk(),bt=4):bt=h===GN?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Jr=h,et===null&&(Wt=1,Cy(c,_i(h,c.current)))}function O3(){var c=L.H;return L.H=_y,c===null?_y:c}function I3(){var c=L.A;return L.A=fX,c}function q_(){Wt=4,Bs||(ot&4194048)!==ot&&Ti.current!==null||(gf=!0),(Vs&134217727)===0&&(vl&134217727)===0||kt===null||Gs(kt,ot,Ci,!1)}function G_(c,h,m){var S=vt;vt|=2;var E=O3(),O=I3();(kt!==c||ot!==h)&&(Ny=null,bf(c,h)),h=!1;var F=Wt;e:do try{if(bt!==0&&et!==null){var j=et,V=Jr;switch(bt){case 8:H_(),F=6;break e;case 3:case 2:case 9:case 6:Ti.current===null&&(h=!0);var Z=bt;if(bt=0,Jr=null,Sf(c,j,V,Z),m&&gf){F=0;break e}break;default:Z=bt,bt=0,Jr=null,Sf(c,j,V,Z)}}pX(),F=Wt;break}catch(ie){D3(c,ie)}while(!0);return h&&c.shellSuspendCounter++,Mo=dl=null,vt=S,L.H=E,L.A=O,et===null&&(kt=null,ot=0,ry()),F}function pX(){for(;et!==null;)M3(et)}function gX(c,h){var m=vt;vt|=2;var S=O3(),E=I3();kt!==c||ot!==h?(Ny=null,ky=Ot()+500,bf(c,h)):gf=Qe(c,h);e:do try{if(bt!==0&&et!==null){h=et;var O=Jr;t:switch(bt){case 1:bt=0,Jr=null,Sf(c,h,O,1);break;case 2:case 9:if(Vk(O)){bt=0,Jr=null,R3(h);break}h=function(){bt!==2&&bt!==9||kt!==c||(bt=7),za(c)},O.then(h,h);break e;case 3:bt=7;break e;case 4:bt=5;break e;case 7:Vk(O)?(bt=0,Jr=null,R3(h)):(bt=0,Jr=null,Sf(c,h,O,7));break;case 5:var F=null;switch(et.tag){case 26:F=et.memoizedState;case 5:case 27:var j=et;if(!F||hF(F)){bt=0,Jr=null;var V=j.sibling;if(V!==null)et=V;else{var Z=j.return;Z!==null?(et=Z,Py(Z)):et=null}break t}}bt=0,Jr=null,Sf(c,h,O,5);break;case 6:bt=0,Jr=null,Sf(c,h,O,6);break;case 8:H_(),Wt=6;break e;default:throw Error(r(462))}}mX();break}catch(ie){D3(c,ie)}while(!0);return Mo=dl=null,L.H=S,L.A=E,vt=m,et!==null?0:(kt=null,ot=0,ry(),Wt)}function mX(){for(;et!==null&&!$t();)M3(et)}function M3(c){var h=i3(c.alternate,c,Lo);c.memoizedProps=c.pendingProps,h===null?Py(c):et=h}function R3(c){var h=c,m=h.alternate;switch(h.tag){case 15:case 0:h=KN(m,h,h.pendingProps,h.type,void 0,ot);break;case 11:h=KN(m,h,h.pendingProps,h.type.render,h.ref,ot);break;case 5:s_(h);default:o3(m,h),h=et=kk(h,Lo),h=i3(m,h,Lo)}c.memoizedProps=c.pendingProps,h===null?Py(c):et=h}function Sf(c,h,m,S){Mo=dl=null,s_(h),ff=null,zh=0;var E=h.return;try{if(aX(c,E,h,m,ot)){Wt=1,Cy(c,_i(m,c.current)),et=null;return}}catch(O){if(E!==null)throw et=E,O;Wt=1,Cy(c,_i(m,c.current)),et=null;return}h.flags&32768?(pt||S===1?c=!0:gf||(ot&536870912)!==0?c=!1:(Bs=c=!0,(S===2||S===9||S===3||S===6)&&(S=Ti.current,S!==null&&S.tag===13&&(S.flags|=16384))),k3(h,c)):Py(h)}function Py(c){var h=c;do{if((h.flags&32768)!==0){k3(h,Bs);return}c=h.return;var m=sX(h.alternate,h,Lo);if(m!==null){et=m;return}if(h=h.sibling,h!==null){et=h;return}et=h=c}while(h!==null);Wt===0&&(Wt=5)}function k3(c,h){do{var m=uX(c.alternate,c);if(m!==null){m.flags&=32767,et=m;return}if(m=c.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(c=c.sibling,c!==null)){et=c;return}et=c=m}while(c!==null);Wt=6,et=null}function N3(c,h,m,S,E,O,F,j,V){c.cancelPendingCommit=null;do $y();while(Nn!==0);if((vt&6)!==0)throw Error(r(327));if(h!==null){if(h===c.current)throw Error(r(177));if(O=h.lanes|h.childLanes,O|=Px,vi(c,m,O,F,j,V),c===kt&&(et=kt=null,ot=0),yf=h,qs=c,vf=m,U_=O,B_=E,w3=S,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,SX(tl,function(){return L3(),null})):(c.callbackNode=null,c.callbackPriority=0),S=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||S){S=L.T,L.T=null,E=B.p,B.p=2,F=vt,vt|=4;try{lX(c,h,m)}finally{vt=F,B.p=E,L.T=S}}Nn=1,F3(),P3(),$3()}}function F3(){if(Nn===1){Nn=0;var c=qs,h=yf,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=L.T,L.T=null;var S=B.p;B.p=2;var E=vt;vt|=4;try{y3(h,c);var O=iE,F=Ek(c.containerInfo),j=O.focusedElem,V=O.selectionRange;if(F!==j&&j&&j.ownerDocument&&_k(j.ownerDocument.documentElement,j)){if(V!==null&&Mx(j)){var Z=V.start,ie=V.end;if(ie===void 0&&(ie=Z),"selectionStart"in j)j.selectionStart=Z,j.selectionEnd=Math.min(ie,j.value.length);else{var se=j.ownerDocument||document,K=se&&se.defaultView||window;if(K.getSelection){var ee=K.getSelection(),Le=j.textContent.length,Pe=Math.min(V.start,Le),Tt=V.end===void 0?Pe:Math.min(V.end,Le);!ee.extend&&Pe>Tt&&(F=Tt,Tt=Pe,Pe=F);var W=xk(j,Pe),G=xk(j,Tt);if(W&&G&&(ee.rangeCount!==1||ee.anchorNode!==W.node||ee.anchorOffset!==W.offset||ee.focusNode!==G.node||ee.focusOffset!==G.offset)){var X=se.createRange();X.setStart(W.node,W.offset),ee.removeAllRanges(),Pe>Tt?(ee.addRange(X),ee.extend(G.node,G.offset)):(X.setEnd(G.node,G.offset),ee.addRange(X))}}}}for(se=[],ee=j;ee=ee.parentNode;)ee.nodeType===1&&se.push({element:ee,left:ee.scrollLeft,top:ee.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<se.length;j++){var oe=se[j];oe.element.scrollLeft=oe.left,oe.element.scrollTop=oe.top}}Xy=!!rE,iE=rE=null}finally{vt=E,B.p=S,L.T=m}}c.current=h,Nn=2}}function P3(){if(Nn===2){Nn=0;var c=qs,h=yf,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=L.T,L.T=null;var S=B.p;B.p=2;var E=vt;vt|=4;try{h3(c,h.alternate,h)}finally{vt=E,B.p=S,L.T=m}}Nn=3}}function $3(){if(Nn===4||Nn===3){Nn=0,Gt();var c=qs,h=yf,m=vf,S=w3;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Nn=5:(Nn=0,yf=qs=null,z3(c,c.pendingLanes));var E=c.pendingLanes;if(E===0&&(Hs=null),bi(m),h=h.stateNode,qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(Ao,h,void 0,(h.current.flags&128)===128)}catch{}if(S!==null){h=L.T,E=B.p,B.p=2,L.T=null;try{for(var O=c.onRecoverableError,F=0;F<S.length;F++){var j=S[F];O(j.value,{componentStack:j.stack})}}finally{L.T=h,B.p=E}}(vf&3)!==0&&$y(),za(c),E=c.pendingLanes,(m&4194090)!==0&&(E&42)!==0?c===V_?Yh++:(Yh=0,V_=c):Yh=0,Wh(0)}}function z3(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,Ch(h)))}function $y(c){return F3(),P3(),$3(),L3()}function L3(){if(Nn!==5)return!1;var c=qs,h=U_;U_=0;var m=bi(vf),S=L.T,E=B.p;try{B.p=32>m?32:m,L.T=null,m=B_,B_=null;var O=qs,F=vf;if(Nn=0,yf=qs=null,vf=0,(vt&6)!==0)throw Error(r(331));var j=vt;if(vt|=4,_3(O.current),b3(O,O.current,F,m),vt=j,Wh(0,!1),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(Ao,O)}catch{}return!0}finally{B.p=E,L.T=S,z3(c,h)}}function j3(c,h,m){h=_i(m,h),h=x_(c.stateNode,h,2),c=Fs(c,h,2),c!==null&&(ka(c,2),za(c))}function It(c,h,m){if(c.tag===3)j3(c,c,m);else for(;h!==null;){if(h.tag===3){j3(h,c,m);break}else if(h.tag===1){var S=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Hs===null||!Hs.has(S))){c=_i(m,c),m=HN(2),S=Fs(h,m,2),S!==null&&(qN(m,S,h,c),ka(S,2),za(S));break}}h=h.return}}function Y_(c,h,m){var S=c.pingCache;if(S===null){S=c.pingCache=new dX;var E=new Set;S.set(h,E)}else E=S.get(h),E===void 0&&(E=new Set,S.set(h,E));E.has(m)||($_=!0,E.add(m),c=yX.bind(null,c,h,m),h.then(c,c))}function yX(c,h,m){var S=c.pingCache;S!==null&&S.delete(h),c.pingedLanes|=c.suspendedLanes&m,c.warmLanes&=~m,kt===c&&(ot&m)===m&&(Wt===4||Wt===3&&(ot&62914560)===ot&&300>Ot()-j_?(vt&2)===0&&bf(c,0):z_|=m,mf===ot&&(mf=0)),za(c)}function U3(c,h){h===0&&(h=Wr()),c=ef(c,h),c!==null&&(ka(c,h),za(c))}function vX(c){var h=c.memoizedState,m=0;h!==null&&(m=h.retryLane),U3(c,m)}function bX(c,h){var m=0;switch(c.tag){case 13:var S=c.stateNode,E=c.memoizedState;E!==null&&(m=E.retryLane);break;case 19:S=c.stateNode;break;case 22:S=c.stateNode._retryCache;break;default:throw Error(r(314))}S!==null&&S.delete(h),U3(c,m)}function SX(c,h){return Et(c,h)}var zy=null,xf=null,W_=!1,Ly=!1,X_=!1,bl=0;function za(c){c!==xf&&c.next===null&&(xf===null?zy=xf=c:xf=xf.next=c),Ly=!0,W_||(W_=!0,_X())}function Wh(c,h){if(!X_&&Ly){X_=!0;do for(var m=!1,S=zy;S!==null;){if(c!==0){var E=S.pendingLanes;if(E===0)var O=0;else{var F=S.suspendedLanes,j=S.pingedLanes;O=(1<<31-Gn(42|c)+1)-1,O&=E&~(F&~j),O=O&201326741?O&201326741|1:O?O|2:0}O!==0&&(m=!0,q3(S,O))}else O=ot,O=He(S,S===kt?O:0,S.cancelPendingCommit!==null||S.timeoutHandle!==-1),(O&3)===0||Qe(S,O)||(m=!0,q3(S,O));S=S.next}while(m);X_=!1}}function xX(){B3()}function B3(){Ly=W_=!1;var c=0;bl!==0&&(IX()&&(c=bl),bl=0);for(var h=Ot(),m=null,S=zy;S!==null;){var E=S.next,O=V3(S,h);O===0?(S.next=null,m===null?zy=E:m.next=E,E===null&&(xf=m)):(m=S,(c!==0||(O&3)!==0)&&(Ly=!0)),S=E}Wh(c)}function V3(c,h){for(var m=c.suspendedLanes,S=c.pingedLanes,E=c.expirationTimes,O=c.pendingLanes&-62914561;0<O;){var F=31-Gn(O),j=1<<F,V=E[F];V===-1?((j&m)===0||(j&S)!==0)&&(E[F]=ht(j,h)):V<=h&&(c.expiredLanes|=j),O&=~j}if(h=kt,m=ot,m=He(c,c===h?m:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S=c.callbackNode,m===0||c===h&&(bt===2||bt===9)||c.cancelPendingCommit!==null)return S!==null&&S!==null&&nt(S),c.callbackNode=null,c.callbackPriority=0;if((m&3)===0||Qe(c,m)){if(h=m&-m,h===c.callbackPriority)return h;switch(S!==null&&nt(S),bi(m)){case 2:case 8:m=fh;break;case 32:m=tl;break;case 268435456:m=As;break;default:m=tl}return S=H3.bind(null,c),m=Et(m,S),c.callbackPriority=h,c.callbackNode=m,h}return S!==null&&S!==null&&nt(S),c.callbackPriority=2,c.callbackNode=null,2}function H3(c,h){if(Nn!==0&&Nn!==5)return c.callbackNode=null,c.callbackPriority=0,null;var m=c.callbackNode;if($y()&&c.callbackNode!==m)return null;var S=ot;return S=He(c,c===kt?S:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),S===0?null:(T3(c,S,h),V3(c,Ot()),c.callbackNode!=null&&c.callbackNode===m?H3.bind(null,c):null)}function q3(c,h){if($y())return null;T3(c,h,!0)}function _X(){RX(function(){(vt&6)!==0?Et(Bm,xX):B3()})}function Q_(){return bl===0&&(bl=yi()),bl}function G3(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Qm(""+c)}function Y3(c,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,c.id&&m.setAttribute("form",c.id),h.parentNode.insertBefore(m,h),c=new FormData(c),m.parentNode.removeChild(m),c}function EX(c,h,m,S,E){if(h==="submit"&&m&&m.stateNode===E){var O=G3((E[Or]||null).action),F=S.submitter;F&&(h=(h=F[Or]||null)?G3(h.formAction):F.getAttribute("formAction"),h!==null&&(O=h,F=null));var j=new ey("action","action",null,S,E);c.push({event:j,listeners:[{instance:null,listener:function(){if(S.defaultPrevented){if(bl!==0){var V=F?Y3(E,F):new FormData(E);m_(m,{pending:!0,data:V,method:E.method,action:O},null,V)}}else typeof O=="function"&&(j.preventDefault(),V=F?Y3(E,F):new FormData(E),m_(m,{pending:!0,data:V,method:E.method,action:O},O,V))},currentTarget:E}]})}}for(var Z_=0;Z_<Fx.length;Z_++){var K_=Fx[Z_],wX=K_.toLowerCase(),AX=K_[0].toUpperCase()+K_.slice(1);Qi(wX,"on"+AX)}Qi(Tk,"onAnimationEnd"),Qi(Ck,"onAnimationIteration"),Qi(Dk,"onAnimationStart"),Qi("dblclick","onDoubleClick"),Qi("focusin","onFocus"),Qi("focusout","onBlur"),Qi(BW,"onTransitionRun"),Qi(VW,"onTransitionStart"),Qi(HW,"onTransitionCancel"),Qi(Ok,"onTransitionEnd"),Hc("onMouseEnter",["mouseout","mouseover"]),Hc("onMouseLeave",["mouseout","mouseover"]),Hc("onPointerEnter",["pointerout","pointerover"]),Hc("onPointerLeave",["pointerout","pointerover"]),rl("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rl("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rl("onBeforeInput",["compositionend","keypress","textInput","paste"]),rl("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rl("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rl("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),TX=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Xh));function W3(c,h){h=(h&4)!==0;for(var m=0;m<c.length;m++){var S=c[m],E=S.event;S=S.listeners;e:{var O=void 0;if(h)for(var F=S.length-1;0<=F;F--){var j=S[F],V=j.instance,Z=j.currentTarget;if(j=j.listener,V!==O&&E.isPropagationStopped())break e;O=j,E.currentTarget=Z;try{O(E)}catch(ie){Ty(ie)}E.currentTarget=null,O=V}else for(F=0;F<S.length;F++){if(j=S[F],V=j.instance,Z=j.currentTarget,j=j.listener,V!==O&&E.isPropagationStopped())break e;O=j,E.currentTarget=Z;try{O(E)}catch(ie){Ty(ie)}E.currentTarget=null,O=V}}}}function tt(c,h){var m=h[fx];m===void 0&&(m=h[fx]=new Set);var S=c+"__bubble";m.has(S)||(X3(h,c,2,!1),m.add(S))}function J_(c,h,m){var S=0;h&&(S|=4),X3(m,c,S,h)}var jy="_reactListening"+Math.random().toString(36).slice(2);function eE(c){if(!c[jy]){c[jy]=!0,BR.forEach(function(m){m!=="selectionchange"&&(TX.has(m)||J_(m,!1,c),J_(m,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[jy]||(h[jy]=!0,J_("selectionchange",!1,h))}}function X3(c,h,m,S){switch(bF(h)){case 2:var E=JX;break;case 8:E=eQ;break;default:E=pE}m=E.bind(null,h,m,c),E=void 0,!_x||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(E=!0),S?E!==void 0?c.addEventListener(h,m,{capture:!0,passive:E}):c.addEventListener(h,m,!0):E!==void 0?c.addEventListener(h,m,{passive:E}):c.addEventListener(h,m,!1)}function tE(c,h,m,S,E){var O=S;if((h&1)===0&&(h&2)===0&&S!==null)e:for(;;){if(S===null)return;var F=S.tag;if(F===3||F===4){var j=S.stateNode.containerInfo;if(j===E)break;if(F===4)for(F=S.return;F!==null;){var V=F.tag;if((V===3||V===4)&&F.stateNode.containerInfo===E)return;F=F.return}for(;j!==null;){if(F=Uc(j),F===null)return;if(V=F.tag,V===5||V===6||V===26||V===27){S=O=F;continue e}j=j.parentNode}}S=S.return}nk(function(){var Z=O,ie=Sx(m),se=[];e:{var K=Ik.get(c);if(K!==void 0){var ee=ey,Le=c;switch(c){case"keypress":if(Km(m)===0)break e;case"keydown":case"keyup":ee=SW;break;case"focusin":Le="focus",ee=Tx;break;case"focusout":Le="blur",ee=Tx;break;case"beforeblur":case"afterblur":ee=Tx;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ee=ak;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ee=uW;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ee=EW;break;case Tk:case Ck:case Dk:ee=fW;break;case Ok:ee=AW;break;case"scroll":case"scrollend":ee=oW;break;case"wheel":ee=CW;break;case"copy":case"cut":case"paste":ee=hW;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ee=sk;break;case"toggle":case"beforetoggle":ee=OW}var Pe=(h&4)!==0,Tt=!Pe&&(c==="scroll"||c==="scrollend"),W=Pe?K!==null?K+"Capture":null:K;Pe=[];for(var G=Z,X;G!==null;){var oe=G;if(X=oe.stateNode,oe=oe.tag,oe!==5&&oe!==26&&oe!==27||X===null||W===null||(oe=ph(G,W),oe!=null&&Pe.push(Qh(G,oe,X))),Tt)break;G=G.return}0<Pe.length&&(K=new ee(K,Le,null,m,ie),se.push({event:K,listeners:Pe}))}}if((h&7)===0){e:{if(K=c==="mouseover"||c==="pointerover",ee=c==="mouseout"||c==="pointerout",K&&m!==bx&&(Le=m.relatedTarget||m.fromElement)&&(Uc(Le)||Le[jc]))break e;if((ee||K)&&(K=ie.window===ie?ie:(K=ie.ownerDocument)?K.defaultView||K.parentWindow:window,ee?(Le=m.relatedTarget||m.toElement,ee=Z,Le=Le?Uc(Le):null,Le!==null&&(Tt=o(Le),Pe=Le.tag,Le!==Tt||Pe!==5&&Pe!==27&&Pe!==6)&&(Le=null)):(ee=null,Le=Z),ee!==Le)){if(Pe=ak,oe="onMouseLeave",W="onMouseEnter",G="mouse",(c==="pointerout"||c==="pointerover")&&(Pe=sk,oe="onPointerLeave",W="onPointerEnter",G="pointer"),Tt=ee==null?K:hh(ee),X=Le==null?K:hh(Le),K=new Pe(oe,G+"leave",ee,m,ie),K.target=Tt,K.relatedTarget=X,oe=null,Uc(ie)===Z&&(Pe=new Pe(W,G+"enter",Le,m,ie),Pe.target=X,Pe.relatedTarget=Tt,oe=Pe),Tt=oe,ee&&Le)t:{for(Pe=ee,W=Le,G=0,X=Pe;X;X=_f(X))G++;for(X=0,oe=W;oe;oe=_f(oe))X++;for(;0<G-X;)Pe=_f(Pe),G--;for(;0<X-G;)W=_f(W),X--;for(;G--;){if(Pe===W||W!==null&&Pe===W.alternate)break t;Pe=_f(Pe),W=_f(W)}Pe=null}else Pe=null;ee!==null&&Q3(se,K,ee,Pe,!1),Le!==null&&Tt!==null&&Q3(se,Tt,Le,Pe,!0)}}e:{if(K=Z?hh(Z):window,ee=K.nodeName&&K.nodeName.toLowerCase(),ee==="select"||ee==="input"&&K.type==="file")var Ae=gk;else if(hk(K))if(mk)Ae=LW;else{Ae=$W;var Ze=PW}else ee=K.nodeName,!ee||ee.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?Z&&vx(Z.elementType)&&(Ae=gk):Ae=zW;if(Ae&&(Ae=Ae(c,Z))){pk(se,Ae,m,ie);break e}Ze&&Ze(c,K,Z),c==="focusout"&&Z&&K.type==="number"&&Z.memoizedProps.value!=null&&yx(K,"number",K.value)}switch(Ze=Z?hh(Z):window,c){case"focusin":(hk(Ze)||Ze.contentEditable==="true")&&(Zc=Ze,Rx=Z,_h=null);break;case"focusout":_h=Rx=Zc=null;break;case"mousedown":kx=!0;break;case"contextmenu":case"mouseup":case"dragend":kx=!1,wk(se,m,ie);break;case"selectionchange":if(UW)break;case"keydown":case"keyup":wk(se,m,ie)}var Ie;if(Dx)e:{switch(c){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else Qc?fk(c,m)&&(ze="onCompositionEnd"):c==="keydown"&&m.keyCode===229&&(ze="onCompositionStart");ze&&(uk&&m.locale!=="ko"&&(Qc||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&Qc&&(Ie=rk()):(Ms=ie,Ex="value"in Ms?Ms.value:Ms.textContent,Qc=!0)),Ze=Uy(Z,ze),0<Ze.length&&(ze=new ok(ze,c,null,m,ie),se.push({event:ze,listeners:Ze}),Ie?ze.data=Ie:(Ie=dk(m),Ie!==null&&(ze.data=Ie)))),(Ie=MW?RW(c,m):kW(c,m))&&(ze=Uy(Z,"onBeforeInput"),0<ze.length&&(Ze=new ok("onBeforeInput","beforeinput",null,m,ie),se.push({event:Ze,listeners:ze}),Ze.data=Ie)),EX(se,c,Z,m,ie)}W3(se,h)})}function Qh(c,h,m){return{instance:c,listener:h,currentTarget:m}}function Uy(c,h){for(var m=h+"Capture",S=[];c!==null;){var E=c,O=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||O===null||(E=ph(c,m),E!=null&&S.unshift(Qh(c,E,O)),E=ph(c,h),E!=null&&S.push(Qh(c,E,O))),c.tag===3)return S;c=c.return}return[]}function _f(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function Q3(c,h,m,S,E){for(var O=h._reactName,F=[];m!==null&&m!==S;){var j=m,V=j.alternate,Z=j.stateNode;if(j=j.tag,V!==null&&V===S)break;j!==5&&j!==26&&j!==27||Z===null||(V=Z,E?(Z=ph(m,O),Z!=null&&F.unshift(Qh(m,Z,V))):E||(Z=ph(m,O),Z!=null&&F.push(Qh(m,Z,V)))),m=m.return}F.length!==0&&c.push({event:h,listeners:F})}var CX=/\r\n?/g,DX=/\u0000|\uFFFD/g;function Z3(c){return(typeof c=="string"?c:""+c).replace(CX,`
`).replace(DX,"")}function K3(c,h){return h=Z3(h),Z3(c)===h}function By(){}function At(c,h,m,S,E,O){switch(m){case"children":typeof S=="string"?h==="body"||h==="textarea"&&S===""||Yc(c,S):(typeof S=="number"||typeof S=="bigint")&&h!=="body"&&Yc(c,""+S);break;case"className":Ym(c,"class",S);break;case"tabIndex":Ym(c,"tabindex",S);break;case"dir":case"role":case"viewBox":case"width":case"height":Ym(c,m,S);break;case"style":ek(c,S,O);break;case"data":if(h!=="object"){Ym(c,"data",S);break}case"src":case"href":if(S===""&&(h!=="a"||m!=="href")){c.removeAttribute(m);break}if(S==null||typeof S=="function"||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(m);break}S=Qm(""+S),c.setAttribute(m,S);break;case"action":case"formAction":if(typeof S=="function"){c.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof O=="function"&&(m==="formAction"?(h!=="input"&&At(c,h,"name",E.name,E,null),At(c,h,"formEncType",E.formEncType,E,null),At(c,h,"formMethod",E.formMethod,E,null),At(c,h,"formTarget",E.formTarget,E,null)):(At(c,h,"encType",E.encType,E,null),At(c,h,"method",E.method,E,null),At(c,h,"target",E.target,E,null)));if(S==null||typeof S=="symbol"||typeof S=="boolean"){c.removeAttribute(m);break}S=Qm(""+S),c.setAttribute(m,S);break;case"onClick":S!=null&&(c.onclick=By);break;case"onScroll":S!=null&&tt("scroll",c);break;case"onScrollEnd":S!=null&&tt("scrollend",c);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(m=S.__html,m!=null){if(E.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"multiple":c.multiple=S&&typeof S!="function"&&typeof S!="symbol";break;case"muted":c.muted=S&&typeof S!="function"&&typeof S!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(S==null||typeof S=="function"||typeof S=="boolean"||typeof S=="symbol"){c.removeAttribute("xlink:href");break}m=Qm(""+S),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(m,""+S):c.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":S&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(m,""):c.removeAttribute(m);break;case"capture":case"download":S===!0?c.setAttribute(m,""):S!==!1&&S!=null&&typeof S!="function"&&typeof S!="symbol"?c.setAttribute(m,S):c.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":S!=null&&typeof S!="function"&&typeof S!="symbol"&&!isNaN(S)&&1<=S?c.setAttribute(m,S):c.removeAttribute(m);break;case"rowSpan":case"start":S==null||typeof S=="function"||typeof S=="symbol"||isNaN(S)?c.removeAttribute(m):c.setAttribute(m,S);break;case"popover":tt("beforetoggle",c),tt("toggle",c),Gm(c,"popover",S);break;case"xlinkActuate":To(c,"http://www.w3.org/1999/xlink","xlink:actuate",S);break;case"xlinkArcrole":To(c,"http://www.w3.org/1999/xlink","xlink:arcrole",S);break;case"xlinkRole":To(c,"http://www.w3.org/1999/xlink","xlink:role",S);break;case"xlinkShow":To(c,"http://www.w3.org/1999/xlink","xlink:show",S);break;case"xlinkTitle":To(c,"http://www.w3.org/1999/xlink","xlink:title",S);break;case"xlinkType":To(c,"http://www.w3.org/1999/xlink","xlink:type",S);break;case"xmlBase":To(c,"http://www.w3.org/XML/1998/namespace","xml:base",S);break;case"xmlLang":To(c,"http://www.w3.org/XML/1998/namespace","xml:lang",S);break;case"xmlSpace":To(c,"http://www.w3.org/XML/1998/namespace","xml:space",S);break;case"is":Gm(c,"is",S);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=iW.get(m)||m,Gm(c,m,S))}}function nE(c,h,m,S,E,O){switch(m){case"style":ek(c,S,O);break;case"dangerouslySetInnerHTML":if(S!=null){if(typeof S!="object"||!("__html"in S))throw Error(r(61));if(m=S.__html,m!=null){if(E.children!=null)throw Error(r(60));c.innerHTML=m}}break;case"children":typeof S=="string"?Yc(c,S):(typeof S=="number"||typeof S=="bigint")&&Yc(c,""+S);break;case"onScroll":S!=null&&tt("scroll",c);break;case"onScrollEnd":S!=null&&tt("scrollend",c);break;case"onClick":S!=null&&(c.onclick=By);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!VR.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(E=m.endsWith("Capture"),h=m.slice(2,E?m.length-7:void 0),O=c[Or]||null,O=O!=null?O[m]:null,typeof O=="function"&&c.removeEventListener(h,O,E),typeof S=="function")){typeof O!="function"&&O!==null&&(m in c?c[m]=null:c.hasAttribute(m)&&c.removeAttribute(m)),c.addEventListener(h,S,E);break e}m in c?c[m]=S:S===!0?c.setAttribute(m,""):Gm(c,m,S)}}}function Fn(c,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",c),tt("load",c);var S=!1,E=!1,O;for(O in m)if(m.hasOwnProperty(O)){var F=m[O];if(F!=null)switch(O){case"src":S=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:At(c,h,O,F,m,null)}}E&&At(c,h,"srcSet",m.srcSet,m,null),S&&At(c,h,"src",m.src,m,null);return;case"input":tt("invalid",c);var j=O=F=E=null,V=null,Z=null;for(S in m)if(m.hasOwnProperty(S)){var ie=m[S];if(ie!=null)switch(S){case"name":E=ie;break;case"type":F=ie;break;case"checked":V=ie;break;case"defaultChecked":Z=ie;break;case"value":O=ie;break;case"defaultValue":j=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,h));break;default:At(c,h,S,ie,m,null)}}QR(c,O,j,V,Z,F,E,!1),Wm(c);return;case"select":tt("invalid",c),S=F=O=null;for(E in m)if(m.hasOwnProperty(E)&&(j=m[E],j!=null))switch(E){case"value":O=j;break;case"defaultValue":F=j;break;case"multiple":S=j;default:At(c,h,E,j,m,null)}h=O,m=F,c.multiple=!!S,h!=null?Gc(c,!!S,h,!1):m!=null&&Gc(c,!!S,m,!0);return;case"textarea":tt("invalid",c),O=E=S=null;for(F in m)if(m.hasOwnProperty(F)&&(j=m[F],j!=null))switch(F){case"value":S=j;break;case"defaultValue":E=j;break;case"children":O=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:At(c,h,F,j,m,null)}KR(c,S,E,O),Wm(c);return;case"option":for(V in m)if(m.hasOwnProperty(V)&&(S=m[V],S!=null))switch(V){case"selected":c.selected=S&&typeof S!="function"&&typeof S!="symbol";break;default:At(c,h,V,S,m,null)}return;case"dialog":tt("beforetoggle",c),tt("toggle",c),tt("cancel",c),tt("close",c);break;case"iframe":case"object":tt("load",c);break;case"video":case"audio":for(S=0;S<Xh.length;S++)tt(Xh[S],c);break;case"image":tt("error",c),tt("load",c);break;case"details":tt("toggle",c);break;case"embed":case"source":case"link":tt("error",c),tt("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Z in m)if(m.hasOwnProperty(Z)&&(S=m[Z],S!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,h));default:At(c,h,Z,S,m,null)}return;default:if(vx(h)){for(ie in m)m.hasOwnProperty(ie)&&(S=m[ie],S!==void 0&&nE(c,h,ie,S,m,void 0));return}}for(j in m)m.hasOwnProperty(j)&&(S=m[j],S!=null&&At(c,h,j,S,m,null))}function OX(c,h,m,S){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,O=null,F=null,j=null,V=null,Z=null,ie=null;for(ee in m){var se=m[ee];if(m.hasOwnProperty(ee)&&se!=null)switch(ee){case"checked":break;case"value":break;case"defaultValue":V=se;default:S.hasOwnProperty(ee)||At(c,h,ee,null,S,se)}}for(var K in S){var ee=S[K];if(se=m[K],S.hasOwnProperty(K)&&(ee!=null||se!=null))switch(K){case"type":O=ee;break;case"name":E=ee;break;case"checked":Z=ee;break;case"defaultChecked":ie=ee;break;case"value":F=ee;break;case"defaultValue":j=ee;break;case"children":case"dangerouslySetInnerHTML":if(ee!=null)throw Error(r(137,h));break;default:ee!==se&&At(c,h,K,ee,S,se)}}mx(c,F,j,V,Z,ie,O,E);return;case"select":ee=F=j=K=null;for(O in m)if(V=m[O],m.hasOwnProperty(O)&&V!=null)switch(O){case"value":break;case"multiple":ee=V;default:S.hasOwnProperty(O)||At(c,h,O,null,S,V)}for(E in S)if(O=S[E],V=m[E],S.hasOwnProperty(E)&&(O!=null||V!=null))switch(E){case"value":K=O;break;case"defaultValue":j=O;break;case"multiple":F=O;default:O!==V&&At(c,h,E,O,S,V)}h=j,m=F,S=ee,K!=null?Gc(c,!!m,K,!1):!!S!=!!m&&(h!=null?Gc(c,!!m,h,!0):Gc(c,!!m,m?[]:"",!1));return;case"textarea":ee=K=null;for(j in m)if(E=m[j],m.hasOwnProperty(j)&&E!=null&&!S.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:At(c,h,j,null,S,E)}for(F in S)if(E=S[F],O=m[F],S.hasOwnProperty(F)&&(E!=null||O!=null))switch(F){case"value":K=E;break;case"defaultValue":ee=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==O&&At(c,h,F,E,S,O)}ZR(c,K,ee);return;case"option":for(var Le in m)if(K=m[Le],m.hasOwnProperty(Le)&&K!=null&&!S.hasOwnProperty(Le))switch(Le){case"selected":c.selected=!1;break;default:At(c,h,Le,null,S,K)}for(V in S)if(K=S[V],ee=m[V],S.hasOwnProperty(V)&&K!==ee&&(K!=null||ee!=null))switch(V){case"selected":c.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:At(c,h,V,K,S,ee)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in m)K=m[Pe],m.hasOwnProperty(Pe)&&K!=null&&!S.hasOwnProperty(Pe)&&At(c,h,Pe,null,S,K);for(Z in S)if(K=S[Z],ee=m[Z],S.hasOwnProperty(Z)&&K!==ee&&(K!=null||ee!=null))switch(Z){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,h));break;default:At(c,h,Z,K,S,ee)}return;default:if(vx(h)){for(var Tt in m)K=m[Tt],m.hasOwnProperty(Tt)&&K!==void 0&&!S.hasOwnProperty(Tt)&&nE(c,h,Tt,void 0,S,K);for(ie in S)K=S[ie],ee=m[ie],!S.hasOwnProperty(ie)||K===ee||K===void 0&&ee===void 0||nE(c,h,ie,K,S,ee);return}}for(var W in m)K=m[W],m.hasOwnProperty(W)&&K!=null&&!S.hasOwnProperty(W)&&At(c,h,W,null,S,K);for(se in S)K=S[se],ee=m[se],!S.hasOwnProperty(se)||K===ee||K==null&&ee==null||At(c,h,se,K,S,ee)}var rE=null,iE=null;function Vy(c){return c.nodeType===9?c:c.ownerDocument}function J3(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function eF(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function aE(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var oE=null;function IX(){var c=window.event;return c&&c.type==="popstate"?c===oE?!1:(oE=c,!0):(oE=null,!1)}var tF=typeof setTimeout=="function"?setTimeout:void 0,MX=typeof clearTimeout=="function"?clearTimeout:void 0,nF=typeof Promise=="function"?Promise:void 0,RX=typeof queueMicrotask=="function"?queueMicrotask:typeof nF<"u"?function(c){return nF.resolve(null).then(c).catch(kX)}:tF;function kX(c){setTimeout(function(){throw c})}function Ys(c){return c==="head"}function rF(c,h){var m=h,S=0,E=0;do{var O=m.nextSibling;if(c.removeChild(m),O&&O.nodeType===8)if(m=O.data,m==="/$"){if(0<S&&8>S){m=S;var F=c.ownerDocument;if(m&1&&Zh(F.documentElement),m&2&&Zh(F.body),m&4)for(m=F.head,Zh(m),F=m.firstChild;F;){var j=F.nextSibling,V=F.nodeName;F[dh]||V==="SCRIPT"||V==="STYLE"||V==="LINK"&&F.rel.toLowerCase()==="stylesheet"||m.removeChild(F),F=j}}if(E===0){c.removeChild(O),ap(h);return}E--}else m==="$"||m==="$?"||m==="$!"?E++:S=m.charCodeAt(0)-48;else S=0;m=O}while(m);ap(h)}function sE(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":sE(m),dx(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}c.removeChild(m)}}function NX(c,h,m,S){for(;c.nodeType===1;){var E=m;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!S&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(S){if(!c[dh])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(O=c.getAttribute("rel"),O==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(O!==E.rel||c.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||c.getAttribute("title")!==(E.title==null?null:E.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(O=c.getAttribute("src"),(O!==(E.src==null?null:E.src)||c.getAttribute("type")!==(E.type==null?null:E.type)||c.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&O&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var O=E.name==null?null:""+E.name;if(E.type==="hidden"&&c.getAttribute("name")===O)return c}else return c;if(c=Ki(c.nextSibling),c===null)break}return null}function FX(c,h,m){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!m||(c=Ki(c.nextSibling),c===null))return null;return c}function uE(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState==="complete"}function PX(c,h){var m=c.ownerDocument;if(c.data!=="$?"||m.readyState==="complete")h();else{var S=function(){h(),m.removeEventListener("DOMContentLoaded",S)};m.addEventListener("DOMContentLoaded",S),c._reactRetry=S}}function Ki(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return c}var lE=null;function iF(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var m=c.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return c;h--}else m==="/$"&&h++}c=c.previousSibling}return null}function aF(c,h,m){switch(h=Vy(m),c){case"html":if(c=h.documentElement,!c)throw Error(r(452));return c;case"head":if(c=h.head,!c)throw Error(r(453));return c;case"body":if(c=h.body,!c)throw Error(r(454));return c;default:throw Error(r(451))}}function Zh(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);dx(c)}var Di=new Map,oF=new Set;function Hy(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var jo=B.d;B.d={f:$X,r:zX,D:LX,C:jX,L:UX,m:BX,X:HX,S:VX,M:qX};function $X(){var c=jo.f(),h=Fy();return c||h}function zX(c){var h=Bc(c);h!==null&&h.tag===5&&h.type==="form"?TN(h):jo.r(c)}var Ef=typeof document>"u"?null:document;function sF(c,h,m){var S=Ef;if(S&&typeof h=="string"&&h){var E=xi(h);E='link[rel="'+c+'"][href="'+E+'"]',typeof m=="string"&&(E+='[crossorigin="'+m+'"]'),oF.has(E)||(oF.add(E),c={rel:c,crossOrigin:m,href:h},S.querySelector(E)===null&&(h=S.createElement("link"),Fn(h,"link",c),bn(h),S.head.appendChild(h)))}}function LX(c){jo.D(c),sF("dns-prefetch",c,null)}function jX(c,h){jo.C(c,h),sF("preconnect",c,h)}function UX(c,h,m){jo.L(c,h,m);var S=Ef;if(S&&c&&h){var E='link[rel="preload"][as="'+xi(h)+'"]';h==="image"&&m&&m.imageSrcSet?(E+='[imagesrcset="'+xi(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(E+='[imagesizes="'+xi(m.imageSizes)+'"]')):E+='[href="'+xi(c)+'"]';var O=E;switch(h){case"style":O=wf(c);break;case"script":O=Af(c)}Di.has(O)||(c=f({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:c,as:h},m),Di.set(O,c),S.querySelector(E)!==null||h==="style"&&S.querySelector(Kh(O))||h==="script"&&S.querySelector(Jh(O))||(h=S.createElement("link"),Fn(h,"link",c),bn(h),S.head.appendChild(h)))}}function BX(c,h){jo.m(c,h);var m=Ef;if(m&&c){var S=h&&typeof h.as=="string"?h.as:"script",E='link[rel="modulepreload"][as="'+xi(S)+'"][href="'+xi(c)+'"]',O=E;switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":O=Af(c)}if(!Di.has(O)&&(c=f({rel:"modulepreload",href:c},h),Di.set(O,c),m.querySelector(E)===null)){switch(S){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(Jh(O)))return}S=m.createElement("link"),Fn(S,"link",c),bn(S),m.head.appendChild(S)}}}function VX(c,h,m){jo.S(c,h,m);var S=Ef;if(S&&c){var E=Vc(S).hoistableStyles,O=wf(c);h=h||"default";var F=E.get(O);if(!F){var j={loading:0,preload:null};if(F=S.querySelector(Kh(O)))j.loading=5;else{c=f({rel:"stylesheet",href:c,"data-precedence":h},m),(m=Di.get(O))&&cE(c,m);var V=F=S.createElement("link");bn(V),Fn(V,"link",c),V._p=new Promise(function(Z,ie){V.onload=Z,V.onerror=ie}),V.addEventListener("load",function(){j.loading|=1}),V.addEventListener("error",function(){j.loading|=2}),j.loading|=4,qy(F,h,S)}F={type:"stylesheet",instance:F,count:1,state:j},E.set(O,F)}}}function HX(c,h){jo.X(c,h);var m=Ef;if(m&&c){var S=Vc(m).hoistableScripts,E=Af(c),O=S.get(E);O||(O=m.querySelector(Jh(E)),O||(c=f({src:c,async:!0},h),(h=Di.get(E))&&fE(c,h),O=m.createElement("script"),bn(O),Fn(O,"link",c),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(E,O))}}function qX(c,h){jo.M(c,h);var m=Ef;if(m&&c){var S=Vc(m).hoistableScripts,E=Af(c),O=S.get(E);O||(O=m.querySelector(Jh(E)),O||(c=f({src:c,async:!0,type:"module"},h),(h=Di.get(E))&&fE(c,h),O=m.createElement("script"),bn(O),Fn(O,"link",c),m.head.appendChild(O)),O={type:"script",instance:O,count:1,state:null},S.set(E,O))}}function uF(c,h,m,S){var E=(E=we.current)?Hy(E):null;if(!E)throw Error(r(446));switch(c){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=wf(m.href),m=Vc(E).hoistableStyles,S=m.get(h),S||(S={type:"style",instance:null,count:0,state:null},m.set(h,S)),S):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){c=wf(m.href);var O=Vc(E).hoistableStyles,F=O.get(c);if(F||(E=E.ownerDocument||E,F={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},O.set(c,F),(O=E.querySelector(Kh(c)))&&!O._p&&(F.instance=O,F.state.loading=5),Di.has(c)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Di.set(c,m),O||GX(E,c,m,F.state))),h&&S===null)throw Error(r(528,""));return F}if(h&&S!==null)throw Error(r(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=Af(m),m=Vc(E).hoistableScripts,S=m.get(h),S||(S={type:"script",instance:null,count:0,state:null},m.set(h,S)),S):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,c))}}function wf(c){return'href="'+xi(c)+'"'}function Kh(c){return'link[rel="stylesheet"]['+c+"]"}function lF(c){return f({},c,{"data-precedence":c.precedence,precedence:null})}function GX(c,h,m,S){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?S.loading=1:(h=c.createElement("link"),S.preload=h,h.addEventListener("load",function(){return S.loading|=1}),h.addEventListener("error",function(){return S.loading|=2}),Fn(h,"link",m),bn(h),c.head.appendChild(h))}function Af(c){return'[src="'+xi(c)+'"]'}function Jh(c){return"script[async]"+c}function cF(c,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var S=c.querySelector('style[data-href~="'+xi(m.href)+'"]');if(S)return h.instance=S,bn(S),S;var E=f({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return S=(c.ownerDocument||c).createElement("style"),bn(S),Fn(S,"style",E),qy(S,m.precedence,c),h.instance=S;case"stylesheet":E=wf(m.href);var O=c.querySelector(Kh(E));if(O)return h.state.loading|=4,h.instance=O,bn(O),O;S=lF(m),(E=Di.get(E))&&cE(S,E),O=(c.ownerDocument||c).createElement("link"),bn(O);var F=O;return F._p=new Promise(function(j,V){F.onload=j,F.onerror=V}),Fn(O,"link",S),h.state.loading|=4,qy(O,m.precedence,c),h.instance=O;case"script":return O=Af(m.src),(E=c.querySelector(Jh(O)))?(h.instance=E,bn(E),E):(S=m,(E=Di.get(O))&&(S=f({},m),fE(S,E)),c=c.ownerDocument||c,E=c.createElement("script"),bn(E),Fn(E,"link",S),c.head.appendChild(E),h.instance=E);case"void":return null;default:throw Error(r(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(S=h.instance,h.state.loading|=4,qy(S,m.precedence,c));return h.instance}function qy(c,h,m){for(var S=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=S.length?S[S.length-1]:null,O=E,F=0;F<S.length;F++){var j=S[F];if(j.dataset.precedence===h)O=j;else if(O!==E)break}O?O.parentNode.insertBefore(c,O.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(c,h.firstChild))}function cE(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function fE(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var Gy=null;function fF(c,h,m){if(Gy===null){var S=new Map,E=Gy=new Map;E.set(m,S)}else E=Gy,S=E.get(m),S||(S=new Map,E.set(m,S));if(S.has(c))return S;for(S.set(c,null),m=m.getElementsByTagName(c),E=0;E<m.length;E++){var O=m[E];if(!(O[dh]||O[Yn]||c==="link"&&O.getAttribute("rel")==="stylesheet")&&O.namespaceURI!=="http://www.w3.org/2000/svg"){var F=O.getAttribute(h)||"";F=c+F;var j=S.get(F);j?j.push(O):S.set(F,[O])}}return S}function dF(c,h,m){c=c.ownerDocument||c,c.head.insertBefore(m,h==="title"?c.querySelector("head > title"):null)}function YX(c,h,m){if(m===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function hF(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}var ep=null;function WX(){}function XX(c,h,m){if(ep===null)throw Error(r(475));var S=ep;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var E=wf(m.href),O=c.querySelector(Kh(E));if(O){c=O._p,c!==null&&typeof c=="object"&&typeof c.then=="function"&&(S.count++,S=Yy.bind(S),c.then(S,S)),h.state.loading|=4,h.instance=O,bn(O);return}O=c.ownerDocument||c,m=lF(m),(E=Di.get(E))&&cE(m,E),O=O.createElement("link"),bn(O);var F=O;F._p=new Promise(function(j,V){F.onload=j,F.onerror=V}),Fn(O,"link",m),h.instance=O}S.stylesheets===null&&(S.stylesheets=new Map),S.stylesheets.set(h,c),(c=h.state.preload)&&(h.state.loading&3)===0&&(S.count++,h=Yy.bind(S),c.addEventListener("load",h),c.addEventListener("error",h))}}function QX(){if(ep===null)throw Error(r(475));var c=ep;return c.stylesheets&&c.count===0&&dE(c,c.stylesheets),0<c.count?function(h){var m=setTimeout(function(){if(c.stylesheets&&dE(c,c.stylesheets),c.unsuspend){var S=c.unsuspend;c.unsuspend=null,S()}},6e4);return c.unsuspend=h,function(){c.unsuspend=null,clearTimeout(m)}}:null}function Yy(){if(this.count--,this.count===0){if(this.stylesheets)dE(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var Wy=null;function dE(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,Wy=new Map,h.forEach(ZX,c),Wy=null,Yy.call(c))}function ZX(c,h){if(!(h.state.loading&4)){var m=Wy.get(c);if(m)var S=m.get(null);else{m=new Map,Wy.set(c,m);for(var E=c.querySelectorAll("link[data-precedence],style[data-precedence]"),O=0;O<E.length;O++){var F=E[O];(F.nodeName==="LINK"||F.getAttribute("media")!=="not all")&&(m.set(F.dataset.precedence,F),S=F)}S&&m.set(null,S)}E=h.instance,F=E.getAttribute("data-precedence"),O=m.get(F)||S,O===S&&m.set(null,E),m.set(F,E),this.count++,S=Yy.bind(this),E.addEventListener("load",S),E.addEventListener("error",S),O?O.parentNode.insertBefore(E,O.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(E,c.firstChild)),h.state.loading|=4}}var tp={$$typeof:T,Provider:null,Consumer:null,_currentValue:q,_currentValue2:q,_threadCount:0};function KX(c,h,m,S,E,O,F,j){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ra(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ra(0),this.hiddenUpdates=Ra(null),this.identifierPrefix=S,this.onUncaughtError=E,this.onCaughtError=O,this.onRecoverableError=F,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function pF(c,h,m,S,E,O,F,j,V,Z,ie,se){return c=new KX(c,h,m,F,j,V,Z,se),h=1,O===!0&&(h|=24),O=Qr(3,null,null,h),c.current=O,O.stateNode=c,h=Yx(),h.refCount++,c.pooledCache=h,h.refCount++,O.memoizedState={element:S,isDehydrated:m,cache:h},Zx(O),c}function gF(c){return c?(c=tf,c):tf}function mF(c,h,m,S,E,O){E=gF(E),S.context===null?S.context=E:S.pendingContext=E,S=Ns(h),S.payload={element:m},O=O===void 0?null:O,O!==null&&(S.callback=O),m=Fs(c,S,h),m!==null&&(ti(m,c,h),Mh(m,c,h))}function yF(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var m=c.retryLane;c.retryLane=m!==0&&m<h?m:h}}function hE(c,h){yF(c,h),(c=c.alternate)&&yF(c,h)}function vF(c){if(c.tag===13){var h=ef(c,67108864);h!==null&&ti(h,c,67108864),hE(c,67108864)}}var Xy=!0;function JX(c,h,m,S){var E=L.T;L.T=null;var O=B.p;try{B.p=2,pE(c,h,m,S)}finally{B.p=O,L.T=E}}function eQ(c,h,m,S){var E=L.T;L.T=null;var O=B.p;try{B.p=8,pE(c,h,m,S)}finally{B.p=O,L.T=E}}function pE(c,h,m,S){if(Xy){var E=gE(S);if(E===null)tE(c,h,S,Qy,m),SF(c,S);else if(nQ(E,c,h,m,S))S.stopPropagation();else if(SF(c,S),h&4&&-1<tQ.indexOf(c)){for(;E!==null;){var O=Bc(E);if(O!==null)switch(O.tag){case 3:if(O=O.stateNode,O.current.memoizedState.isDehydrated){var F=Oe(O.pendingLanes);if(F!==0){var j=O;for(j.pendingLanes|=2,j.entangledLanes|=2;F;){var V=1<<31-Gn(F);j.entanglements[1]|=V,F&=~V}za(O),(vt&6)===0&&(ky=Ot()+500,Wh(0))}}break;case 13:j=ef(O,2),j!==null&&ti(j,O,2),Fy(),hE(O,2)}if(O=gE(S),O===null&&tE(c,h,S,Qy,m),O===E)break;E=O}E!==null&&S.stopPropagation()}else tE(c,h,S,null,m)}}function gE(c){return c=Sx(c),mE(c)}var Qy=null;function mE(c){if(Qy=null,c=Uc(c),c!==null){var h=o(c);if(h===null)c=null;else{var m=h.tag;if(m===13){if(c=a(h),c!==null)return c;c=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return Qy=c,null}function bF(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Lc()){case Bm:return 2;case fh:return 8;case tl:case Vm:return 32;case As:return 268435456;default:return 32}default:return 32}}var yE=!1,Ws=null,Xs=null,Qs=null,np=new Map,rp=new Map,Zs=[],tQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function SF(c,h){switch(c){case"focusin":case"focusout":Ws=null;break;case"dragenter":case"dragleave":Xs=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":np.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":rp.delete(h.pointerId)}}function ip(c,h,m,S,E,O){return c===null||c.nativeEvent!==O?(c={blockedOn:h,domEventName:m,eventSystemFlags:S,nativeEvent:O,targetContainers:[E]},h!==null&&(h=Bc(h),h!==null&&vF(h)),c):(c.eventSystemFlags|=S,h=c.targetContainers,E!==null&&h.indexOf(E)===-1&&h.push(E),c)}function nQ(c,h,m,S,E){switch(h){case"focusin":return Ws=ip(Ws,c,h,m,S,E),!0;case"dragenter":return Xs=ip(Xs,c,h,m,S,E),!0;case"mouseover":return Qs=ip(Qs,c,h,m,S,E),!0;case"pointerover":var O=E.pointerId;return np.set(O,ip(np.get(O)||null,c,h,m,S,E)),!0;case"gotpointercapture":return O=E.pointerId,rp.set(O,ip(rp.get(O)||null,c,h,m,S,E)),!0}return!1}function xF(c){var h=Uc(c.target);if(h!==null){var m=o(h);if(m!==null){if(h=m.tag,h===13){if(h=a(m),h!==null){c.blockedOn=h,XY(c.priority,function(){if(m.tag===13){var S=ei();S=Xi(S);var E=ef(m,S);E!==null&&ti(E,m,S),hE(m,S)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){c.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Zy(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var m=gE(c.nativeEvent);if(m===null){m=c.nativeEvent;var S=new m.constructor(m.type,m);bx=S,m.target.dispatchEvent(S),bx=null}else return h=Bc(m),h!==null&&vF(h),c.blockedOn=m,!1;h.shift()}return!0}function _F(c,h,m){Zy(c)&&m.delete(h)}function rQ(){yE=!1,Ws!==null&&Zy(Ws)&&(Ws=null),Xs!==null&&Zy(Xs)&&(Xs=null),Qs!==null&&Zy(Qs)&&(Qs=null),np.forEach(_F),rp.forEach(_F)}function Ky(c,h){c.blockedOn===h&&(c.blockedOn=null,yE||(yE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rQ)))}var Jy=null;function EF(c){Jy!==c&&(Jy=c,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Jy===c&&(Jy=null);for(var h=0;h<c.length;h+=3){var m=c[h],S=c[h+1],E=c[h+2];if(typeof S!="function"){if(mE(S||m)===null)continue;break}var O=Bc(m);O!==null&&(c.splice(h,3),h-=3,m_(O,{pending:!0,data:E,method:m.method,action:S},S,E))}}))}function ap(c){function h(V){return Ky(V,c)}Ws!==null&&Ky(Ws,c),Xs!==null&&Ky(Xs,c),Qs!==null&&Ky(Qs,c),np.forEach(h),rp.forEach(h);for(var m=0;m<Zs.length;m++){var S=Zs[m];S.blockedOn===c&&(S.blockedOn=null)}for(;0<Zs.length&&(m=Zs[0],m.blockedOn===null);)xF(m),m.blockedOn===null&&Zs.shift();if(m=(c.ownerDocument||c).$$reactFormReplay,m!=null)for(S=0;S<m.length;S+=3){var E=m[S],O=m[S+1],F=E[Or]||null;if(typeof O=="function")F||EF(m);else if(F){var j=null;if(O&&O.hasAttribute("formAction")){if(E=O,F=O[Or]||null)j=F.formAction;else if(mE(E)!==null)continue}else j=F.action;typeof j=="function"?m[S+1]=j:(m.splice(S,3),S-=3),EF(m)}}}function vE(c){this._internalRoot=c}e0.prototype.render=vE.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(r(409));var m=h.current,S=ei();mF(m,S,c,h,null,null)},e0.prototype.unmount=vE.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;mF(c.current,2,null,c,null,null),Fy(),h[jc]=null}};function e0(c){this._internalRoot=c}e0.prototype.unstable_scheduleHydration=function(c){if(c){var h=qm();c={blockedOn:null,target:c,priority:h};for(var m=0;m<Zs.length&&h!==0&&h<Zs[m].priority;m++);Zs.splice(m,0,c),m===0&&xF(c)}};var wF=t.version;if(wF!=="19.1.1")throw Error(r(527,wF,"19.1.1"));B.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=l(h),c=c!==null?u(c):null,c=c===null?null:c.stateNode,c};var iQ={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var t0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!t0.isDisabled&&t0.supportsFiber)try{Ao=t0.inject(iQ),qn=t0}catch{}}return sp.createRoot=function(c,h){if(!i(c))throw Error(r(299));var m=!1,S="",E=jN,O=UN,F=BN,j=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(O=h.onCaughtError),h.onRecoverableError!==void 0&&(F=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(j=h.unstable_transitionCallbacks)),h=pF(c,1,!1,null,null,m,S,E,O,F,j,null),c[jc]=h.current,eE(c),new vE(h)},sp.hydrateRoot=function(c,h,m){if(!i(c))throw Error(r(299));var S=!1,E="",O=jN,F=UN,j=BN,V=null,Z=null;return m!=null&&(m.unstable_strictMode===!0&&(S=!0),m.identifierPrefix!==void 0&&(E=m.identifierPrefix),m.onUncaughtError!==void 0&&(O=m.onUncaughtError),m.onCaughtError!==void 0&&(F=m.onCaughtError),m.onRecoverableError!==void 0&&(j=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(V=m.unstable_transitionCallbacks),m.formState!==void 0&&(Z=m.formState)),h=pF(c,1,!0,h,m??null,S,E,O,F,j,V,Z),h.context=gF(null),m=h.current,S=ei(),S=Xi(S),E=Ns(S),E.callback=null,Fs(m,E,S),m=S,h.current.lanes=m,ka(h,m),za(h),c[jc]=h.current,eE(c),new e0(h)},sp.version="19.1.1",sp}var NF;function pQ(){if(NF)return xE.exports;NF=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),xE.exports=hQ(),xE.exports}var gQ=pQ(),AE={exports:{}},TE,FF;function mQ(){if(FF)return TE;FF=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return TE=e,TE}var CE,PF;function yQ(){if(PF)return CE;PF=1;var e=mQ();function t(){}function n(){}return n.resetWarningCache=t,CE=function(){function r(a,s,l,u,f,d){if(d!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function i(){return r}var o={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:t};return o.PropTypes=o,o},CE}var $F;function vQ(){return $F||($F=1,AE.exports=yQ()()),AE.exports}var bQ=vQ();const zF=Yg(bQ),LF={};function Zw(e,t){e===void 0&&(e=LF),t===void 0&&(t=LF);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}function mv(e,t,n,r){function i(o){return o instanceof n?o:new n(function(a){a(o)})}return new(n||(n=Promise))(function(o,a){function s(f){try{u(r.next(f))}catch(d){a(d)}}function l(f){try{u(r.throw(f))}catch(d){a(d)}}function u(f){f.done?o(f.value):i(f.value).then(s,l)}u((r=r.apply(e,t||[])).next())})}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var SQ=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)i.hasOwnProperty(o)&&(r[o]=i[o])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}})(),xQ=Object.prototype.hasOwnProperty;function Kw(e,t){return xQ.call(e,t)}function Jw(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Kw(e,i)&&r.push(i);return r}function oi(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function eA(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Il(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function K9(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function tA(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(tA(e[t]))return!0}else if(typeof e=="object"){for(var r=Jw(e),i=r.length,o=0;o<i;o++)if(tA(e[r[o]]))return!0}}return!1}function jF(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var J9=(function(e){SQ(t,e);function t(n,r,i,o,a){var s=this.constructor,l=e.call(this,jF(n,{name:r,index:i,operation:o,tree:a}))||this;return l.name=r,l.index=i,l.operation=o,l.tree=a,Object.setPrototypeOf(l,s.prototype),l.message=jF(n,{name:r,index:i,operation:o,tree:a}),l}return t})(Error),Qt=J9,_Q=oi,Uf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=yv(n,this.path);r&&(r=oi(r));var i=Bl(n,{op:"remove",path:this.from}).removed;return Bl(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=yv(n,this.from);return Bl(n,{op:"add",path:this.path,value:oi(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:mg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},EQ={add:function(e,t,n){return eA(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Uf.move,copy:Uf.copy,test:Uf.test,_get:Uf._get};function yv(e,t){if(t=="")return e;var n={op:"_get",path:t};return Bl(e,n),n.value}function Bl(e,t,n,r,i,o){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),o===void 0&&(o=0),n&&(typeof n=="function"?n(t,0,e,t.path):vv(t,0)),t.path===""){var a={newDocument:e};if(t.op==="add")return a.newDocument=t.value,a;if(t.op==="replace")return a.newDocument=t.value,a.removed=e,a;if(t.op==="move"||t.op==="copy")return a.newDocument=yv(e,t.from),t.op==="move"&&(a.removed=e),a;if(t.op==="test"){if(a.test=mg(e,t.value),a.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a.newDocument=e,a}else{if(t.op==="remove")return a.removed=e,a.newDocument=null,a;if(t.op==="_get")return t.value=e,a;if(n)throw new Qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",o,t,e);return a}}else{r||(e=oi(e));var s=t.path||"",l=s.split("/"),u=e,f=1,d=l.length,p=void 0,g=void 0,y=void 0;for(typeof n=="function"?y=n:y=vv;;){if(g=l[f],g&&g.indexOf("~")!=-1&&(g=K9(g)),i&&(g=="__proto__"||g=="prototype"&&f>0&&l[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[g]===void 0?p=l.slice(0,f).join("/"):f==d-1&&(p=t.path),p!==void 0&&y(t,0,e,p)),f++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!eA(g))throw new Qt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",o,t,e);eA(g)&&(g=~~g)}if(f>=d){if(n&&t.op==="add"&&g>u.length)throw new Qt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",o,t,e);var a=EQ[t.op].call(t,u,g,e);if(a.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}}else if(f>=d){var a=Uf[t.op].call(t,u,g,e);if(a.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",o,t,e);return a}if(u=u[g],n&&f<d&&(!u||typeof u!="object"))throw new Qt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",o,t,e)}}}function K1(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=oi(e));for(var o=new Array(t.length),a=0,s=t.length;a<s;a++)o[a]=Bl(e,t[a],n,!0,i,a),e=o[a].newDocument;return o.newDocument=e,o}function wQ(e,t,n){var r=Bl(e,t);if(r.test===!1)throw new Qt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function vv(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Qt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Uf[e.op]){if(typeof e.path!="string")throw new Qt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Qt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Qt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&tA(e.value))throw new Qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,o=r.split("/").length;if(i!==o+1&&i!==o)throw new Qt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Qt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var a={op:"_get",path:e.from,value:void 0},s=e8([a],n);if(s&&s.name==="OPERATION_PATH_UNRESOLVABLE")throw new Qt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function e8(e,t,n){try{if(!Array.isArray(e))throw new Qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)K1(oi(t),oi(e),n||!0);else{n=n||vv;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Qt)return i;throw i}}function mg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,o,a;if(n&&r){if(o=e.length,o!=t.length)return!1;for(i=o;i--!==0;)if(!mg(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var s=Object.keys(e);if(o=s.length,o!==Object.keys(t).length)return!1;for(i=o;i--!==0;)if(!t.hasOwnProperty(s[i]))return!1;for(i=o;i--!==0;)if(a=s[i],!mg(e[a],t[a]))return!1;return!0}return e!==e&&t!==t}const AQ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Qt,_areEquals:mg,applyOperation:Bl,applyPatch:K1,applyReducer:wQ,deepClone:_Q,getValueByPointer:yv,validate:e8,validator:vv},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var mC=new WeakMap,TQ=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),CQ=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function DQ(e){return mC.get(e)}function OQ(e,t){return e.observers.get(t)}function IQ(e,t){e.observers.delete(t.callback)}function MQ(e,t){t.unobserve()}function RQ(e,t){var n=[],r,i=DQ(e);if(!i)i=new TQ(e),mC.set(e,i);else{var o=OQ(i,t);r=o&&o.observer}if(r)return r;if(r={},i.value=oi(e),t){r.callback=t,r.next=null;var a=function(){nA(r)},s=function(){clearTimeout(r.next),r.next=setTimeout(a)};typeof window<"u"&&(window.addEventListener("mouseup",s),window.addEventListener("keyup",s),window.addEventListener("mousedown",s),window.addEventListener("keydown",s),window.addEventListener("change",s))}return r.patches=n,r.object=e,r.unobserve=function(){nA(r),clearTimeout(r.next),IQ(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",s),window.removeEventListener("keyup",s),window.removeEventListener("mousedown",s),window.removeEventListener("keydown",s),window.removeEventListener("change",s))},i.observers.set(t,new CQ(t,r)),r}function nA(e,t){t===void 0&&(t=!1);var n=mC.get(e.object);yC(n.value,e.object,e.patches,"",t),e.patches.length&&K1(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function yC(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var o=Jw(t),a=Jw(e),s=!1,l=a.length-1;l>=0;l--){var u=a[l],f=e[u];if(Kw(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var d=t[u];typeof f=="object"&&f!=null&&typeof d=="object"&&d!=null&&Array.isArray(f)===Array.isArray(d)?yC(f,d,n,r+"/"+Il(u),i):f!==d&&(i&&n.push({op:"test",path:r+"/"+Il(u),value:oi(f)}),n.push({op:"replace",path:r+"/"+Il(u),value:oi(d)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Il(u),value:oi(f)}),n.push({op:"remove",path:r+"/"+Il(u)}),s=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!s&&o.length==a.length))for(var l=0;l<o.length;l++){var u=o[l];!Kw(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Il(u),value:oi(t[u])})}}}function kQ(e,t,n){n===void 0&&(n=!1);var r=[];return yC(e,t,r,"",n),r}const NQ=Object.freeze(Object.defineProperty({__proto__:null,compare:kQ,generate:nA,observe:RQ,unobserve:MQ},Symbol.toStringTag,{value:"Module"}));Object.assign({},AQ,NQ,{JsonPatchError:J9,deepClone:oi,escapePathComponent:Il,unescapePathComponent:K9});var DE,UF;function FQ(){if(UF)return DE;UF=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return DE=function(n,r){var i,o,a;return r=r||{},i=JSON.stringify([1],void 0,r.indent===void 0?2:r.indent).slice(2,-3),o=i===""?1/0:r.maxLength===void 0?80:r.maxLength,a=r.replacer,(function s(l,u,f){var d,p,g,y,v,b,x,_,T,A,w,C;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),w=JSON.stringify(l,a),w===void 0)return w;if(x=o-u.length-f,w.length<=x&&(T=w.replace(e,function(D,I){return I||D+" "}),T.length<=x))return T;if(a!=null&&(l=JSON.parse(w),a=void 0),typeof l=="object"&&l!==null){if(_=u+i,g=[],p=0,Array.isArray(l))for(A="[",d="]",x=l.length;p<x;p++)g.push(s(l[p],_,p===x-1?0:1)||"null");else for(A="{",d="}",b=Object.keys(l),x=b.length;p<x;p++)y=b[p],v=JSON.stringify(y)+": ",C=s(l[y],_,v.length+(p===x-1?0:1)),C!==void 0&&g.push(v+C);if(g.length>0)return[A,i+g.join(`,
`+_),d].join(`
`+u)}return w})(n,"",0)},DE}var PQ=FQ();const OE=Yg(PQ);var n0={exports:{}},IE,BF;function J1(){if(BF)return IE;BF=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return IE={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},IE}var ME,VF;function eb(){if(VF)return ME;VF=1;var e={};return ME=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},ME}var HF;function Wg(){return HF||(HF=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=J1(),o=eb();t=e.exports={};const a=t.re=[],s=t.safeRe=[],l=t.src=[],u=t.safeSrc=[],f=t.t={};let d=0;const p="[a-zA-Z0-9-]",g=[["\\s",1],["\\d",i],[p,r]],y=b=>{for(const[x,_]of g)b=b.split(`${x}*`).join(`${x}{0,${_}}`).split(`${x}+`).join(`${x}{1,${_}}`);return b},v=(b,x,_)=>{const T=y(x),A=d++;o(b,A,x),f[b]=A,l[A]=x,u[A]=T,a[A]=new RegExp(x,_?"g":void 0),s[A]=new RegExp(T,_?"g":void 0)};v("NUMERICIDENTIFIER","0|[1-9]\\d*"),v("NUMERICIDENTIFIERLOOSE","\\d+"),v("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),v("MAINVERSION",`(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})\\.(${l[f.NUMERICIDENTIFIER]})`),v("MAINVERSIONLOOSE",`(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})\\.(${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASEIDENTIFIER",`(?:${l[f.NONNUMERICIDENTIFIER]}|${l[f.NUMERICIDENTIFIER]})`),v("PRERELEASEIDENTIFIERLOOSE",`(?:${l[f.NONNUMERICIDENTIFIER]}|${l[f.NUMERICIDENTIFIERLOOSE]})`),v("PRERELEASE",`(?:-(${l[f.PRERELEASEIDENTIFIER]}(?:\\.${l[f.PRERELEASEIDENTIFIER]})*))`),v("PRERELEASELOOSE",`(?:-?(${l[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[f.PRERELEASEIDENTIFIERLOOSE]})*))`),v("BUILDIDENTIFIER",`${p}+`),v("BUILD",`(?:\\+(${l[f.BUILDIDENTIFIER]}(?:\\.${l[f.BUILDIDENTIFIER]})*))`),v("FULLPLAIN",`v?${l[f.MAINVERSION]}${l[f.PRERELEASE]}?${l[f.BUILD]}?`),v("FULL",`^${l[f.FULLPLAIN]}$`),v("LOOSEPLAIN",`[v=\\s]*${l[f.MAINVERSIONLOOSE]}${l[f.PRERELEASELOOSE]}?${l[f.BUILD]}?`),v("LOOSE",`^${l[f.LOOSEPLAIN]}$`),v("GTLT","((?:<|>)?=?)"),v("XRANGEIDENTIFIERLOOSE",`${l[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),v("XRANGEIDENTIFIER",`${l[f.NUMERICIDENTIFIER]}|x|X|\\*`),v("XRANGEPLAIN",`[v=\\s]*(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:\\.(${l[f.XRANGEIDENTIFIER]})(?:${l[f.PRERELEASE]})?${l[f.BUILD]}?)?)?`),v("XRANGEPLAINLOOSE",`[v=\\s]*(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[f.XRANGEIDENTIFIERLOOSE]})(?:${l[f.PRERELEASELOOSE]})?${l[f.BUILD]}?)?)?`),v("XRANGE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAIN]}$`),v("XRANGELOOSE",`^${l[f.GTLT]}\\s*${l[f.XRANGEPLAINLOOSE]}$`),v("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),v("COERCE",`${l[f.COERCEPLAIN]}(?:$|[^\\d])`),v("COERCEFULL",l[f.COERCEPLAIN]+`(?:${l[f.PRERELEASE]})?(?:${l[f.BUILD]})?(?:$|[^\\d])`),v("COERCERTL",l[f.COERCE],!0),v("COERCERTLFULL",l[f.COERCEFULL],!0),v("LONETILDE","(?:~>?)"),v("TILDETRIM",`(\\s*)${l[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",v("TILDE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAIN]}$`),v("TILDELOOSE",`^${l[f.LONETILDE]}${l[f.XRANGEPLAINLOOSE]}$`),v("LONECARET","(?:\\^)"),v("CARETTRIM",`(\\s*)${l[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",v("CARET",`^${l[f.LONECARET]}${l[f.XRANGEPLAIN]}$`),v("CARETLOOSE",`^${l[f.LONECARET]}${l[f.XRANGEPLAINLOOSE]}$`),v("COMPARATORLOOSE",`^${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]})$|^$`),v("COMPARATOR",`^${l[f.GTLT]}\\s*(${l[f.FULLPLAIN]})$|^$`),v("COMPARATORTRIM",`(\\s*)${l[f.GTLT]}\\s*(${l[f.LOOSEPLAIN]}|${l[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",v("HYPHENRANGE",`^\\s*(${l[f.XRANGEPLAIN]})\\s+-\\s+(${l[f.XRANGEPLAIN]})\\s*$`),v("HYPHENRANGELOOSE",`^\\s*(${l[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[f.XRANGEPLAINLOOSE]})\\s*$`),v("STAR","(<|>)?=?\\s*\\*"),v("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),v("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(n0,n0.exports)),n0.exports}var RE,qF;function vC(){if(qF)return RE;qF=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return RE=r=>r?typeof r!="object"?e:r:t,RE}var kE,GF;function t8(){if(GF)return kE;GF=1;const e=/^[0-9]+$/,t=(r,i)=>{const o=e.test(r),a=e.test(i);return o&&a&&(r=+r,i=+i),r===i?0:o&&!a?-1:a&&!o?1:r<i?-1:1};return kE={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},kE}var NE,YF;function Tr(){if(YF)return NE;YF=1;const e=eb(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=J1(),{safeRe:r,t:i}=Wg(),o=vC(),{compareIdentifiers:a}=t8();class s{constructor(u,f){if(f=o(f),u instanceof s){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const d=u.trim().match(f.loose?r[i.LOOSE]:r[i.FULL]);if(!d)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+d[1],this.minor=+d[2],this.patch=+d[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");d[4]?this.prerelease=d[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const g=+p;if(g>=0&&g<n)return g}return p}):this.prerelease=[],this.build=d[5]?d[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof s)){if(typeof u=="string"&&u===this.version)return 0;u=new s(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof s||(u=new s(u,this.options)),a(this.major,u.major)||a(this.minor,u.minor)||a(this.patch,u.patch)}comparePre(u){if(u instanceof s||(u=new s(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const d=this.prerelease[f],p=u.prerelease[f];if(e("prerelease compare",f,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return a(d,p)}while(++f)}compareBuild(u){u instanceof s||(u=new s(u,this.options));let f=0;do{const d=this.build[f],p=u.build[f];if(e("build compare",f,d,p),d===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(d===void 0)return-1;if(d===p)continue;return a(d,p)}while(++f)}inc(u,f,d){if(u.startsWith("pre")){if(!f&&d===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const p=`-${f}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!p||p[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,d);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,d);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,d),this.inc("pre",f,d);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,d),this.inc("pre",f,d);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(d)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let g=this.prerelease.length;for(;--g>=0;)typeof this.prerelease[g]=="number"&&(this.prerelease[g]++,g=-2);if(g===-1){if(f===this.prerelease.join(".")&&d===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(f){let g=[f,p];d===!1&&(g=[f]),a(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=g):this.prerelease=g}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return NE=s,NE}var FE,WF;function Ld(){if(WF)return FE;WF=1;const e=Tr();return FE=(n,r,i=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(o){if(!i)return null;throw o}},FE}var PE,XF;function $Q(){if(XF)return PE;XF=1;const e=Ld();return PE=(n,r)=>{const i=e(n,r);return i?i.version:null},PE}var $E,QF;function zQ(){if(QF)return $E;QF=1;const e=Ld();return $E=(n,r)=>{const i=e(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},$E}var zE,ZF;function LQ(){if(ZF)return zE;ZF=1;const e=Tr();return zE=(n,r,i,o,a)=>{typeof i=="string"&&(a=o,o=i,i=void 0);try{return new e(n instanceof e?n.version:n,i).inc(r,o,a).version}catch{return null}},zE}var LE,KF;function jQ(){if(KF)return LE;KF=1;const e=Ld();return LE=(n,r)=>{const i=e(n,null,!0),o=e(r,null,!0),a=i.compare(o);if(a===0)return null;const s=a>0,l=s?i:o,u=s?o:i,f=!!l.prerelease.length;if(!!u.prerelease.length&&!f){if(!u.patch&&!u.minor)return"major";if(u.compareMain(l)===0)return u.minor&&!u.patch?"minor":"patch"}const p=f?"pre":"";return i.major!==o.major?p+"major":i.minor!==o.minor?p+"minor":i.patch!==o.patch?p+"patch":"prerelease"},LE}var jE,JF;function UQ(){if(JF)return jE;JF=1;const e=Tr();return jE=(n,r)=>new e(n,r).major,jE}var UE,e5;function BQ(){if(e5)return UE;e5=1;const e=Tr();return UE=(n,r)=>new e(n,r).minor,UE}var BE,t5;function VQ(){if(t5)return BE;t5=1;const e=Tr();return BE=(n,r)=>new e(n,r).patch,BE}var VE,n5;function HQ(){if(n5)return VE;n5=1;const e=Ld();return VE=(n,r)=>{const i=e(n,r);return i&&i.prerelease.length?i.prerelease:null},VE}var HE,r5;function xa(){if(r5)return HE;r5=1;const e=Tr();return HE=(n,r,i)=>new e(n,i).compare(new e(r,i)),HE}var qE,i5;function qQ(){if(i5)return qE;i5=1;const e=xa();return qE=(n,r,i)=>e(r,n,i),qE}var GE,a5;function GQ(){if(a5)return GE;a5=1;const e=xa();return GE=(n,r)=>e(n,r,!0),GE}var YE,o5;function bC(){if(o5)return YE;o5=1;const e=Tr();return YE=(n,r,i)=>{const o=new e(n,i),a=new e(r,i);return o.compare(a)||o.compareBuild(a)},YE}var WE,s5;function YQ(){if(s5)return WE;s5=1;const e=bC();return WE=(n,r)=>n.sort((i,o)=>e(i,o,r)),WE}var XE,u5;function WQ(){if(u5)return XE;u5=1;const e=bC();return XE=(n,r)=>n.sort((i,o)=>e(o,i,r)),XE}var QE,l5;function tb(){if(l5)return QE;l5=1;const e=xa();return QE=(n,r,i)=>e(n,r,i)>0,QE}var ZE,c5;function SC(){if(c5)return ZE;c5=1;const e=xa();return ZE=(n,r,i)=>e(n,r,i)<0,ZE}var KE,f5;function n8(){if(f5)return KE;f5=1;const e=xa();return KE=(n,r,i)=>e(n,r,i)===0,KE}var JE,d5;function r8(){if(d5)return JE;d5=1;const e=xa();return JE=(n,r,i)=>e(n,r,i)!==0,JE}var e2,h5;function xC(){if(h5)return e2;h5=1;const e=xa();return e2=(n,r,i)=>e(n,r,i)>=0,e2}var t2,p5;function _C(){if(p5)return t2;p5=1;const e=xa();return t2=(n,r,i)=>e(n,r,i)<=0,t2}var n2,g5;function i8(){if(g5)return n2;g5=1;const e=n8(),t=r8(),n=tb(),r=xC(),i=SC(),o=_C();return n2=(s,l,u,f)=>{switch(l){case"===":return typeof s=="object"&&(s=s.version),typeof u=="object"&&(u=u.version),s===u;case"!==":return typeof s=="object"&&(s=s.version),typeof u=="object"&&(u=u.version),s!==u;case"":case"=":case"==":return e(s,u,f);case"!=":return t(s,u,f);case">":return n(s,u,f);case">=":return r(s,u,f);case"<":return i(s,u,f);case"<=":return o(s,u,f);default:throw new TypeError(`Invalid operator: ${l}`)}},n2}var r2,m5;function XQ(){if(m5)return r2;m5=1;const e=Tr(),t=Ld(),{safeRe:n,t:r}=Wg();return r2=(o,a)=>{if(o instanceof e)return o;if(typeof o=="number"&&(o=String(o)),typeof o!="string")return null;a=a||{};let s=null;if(!a.rtl)s=o.match(a.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const g=a.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let y;for(;(y=g.exec(o))&&(!s||s.index+s[0].length!==o.length);)(!s||y.index+y[0].length!==s.index+s[0].length)&&(s=y),g.lastIndex=y.index+y[1].length+y[2].length;g.lastIndex=-1}if(s===null)return null;const l=s[2],u=s[3]||"0",f=s[4]||"0",d=a.includePrerelease&&s[5]?`-${s[5]}`:"",p=a.includePrerelease&&s[6]?`+${s[6]}`:"";return t(`${l}.${u}.${f}${d}${p}`,a)},r2}var i2,y5;function QQ(){if(y5)return i2;y5=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const o=this.map.keys().next().value;this.delete(o)}this.map.set(n,r)}return this}}return i2=e,i2}var a2,v5;function _a(){if(v5)return a2;v5=1;const e=/\s+/g;class t{constructor(N,L){if(L=i(L),N instanceof t)return N.loose===!!L.loose&&N.includePrerelease===!!L.includePrerelease?N:new t(N.raw,L);if(N instanceof o)return this.raw=N.value,this.set=[[N]],this.formatted=void 0,this;if(this.options=L,this.loose=!!L.loose,this.includePrerelease=!!L.includePrerelease,this.raw=N.trim().replace(e," "),this.set=this.raw.split("||").map(B=>this.parseRange(B.trim())).filter(B=>B.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const B=this.set[0];if(this.set=this.set.filter(q=>!v(q[0])),this.set.length===0)this.set=[B];else if(this.set.length>1){for(const q of this.set)if(q.length===1&&b(q[0])){this.set=[q];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let N=0;N<this.set.length;N++){N>0&&(this.formatted+="||");const L=this.set[N];for(let B=0;B<L.length;B++)B>0&&(this.formatted+=" "),this.formatted+=L[B].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(N){const B=((this.options.includePrerelease&&g)|(this.options.loose&&y))+":"+N,q=r.get(B);if(q)return q;const H=this.options.loose,U=H?l[u.HYPHENRANGELOOSE]:l[u.HYPHENRANGE];N=N.replace(U,z(this.options.includePrerelease)),a("hyphen replace",N),N=N.replace(l[u.COMPARATORTRIM],f),a("comparator trim",N),N=N.replace(l[u.TILDETRIM],d),a("tilde trim",N),N=N.replace(l[u.CARETTRIM],p),a("caret trim",N);let Y=N.split(" ").map(ve=>_(ve,this.options)).join(" ").split(/\s+/).map(ve=>R(ve,this.options));H&&(Y=Y.filter(ve=>(a("loose invalid filter",ve,this.options),!!ve.match(l[u.COMPARATORLOOSE])))),a("range list",Y);const Q=new Map,J=Y.map(ve=>new o(ve,this.options));for(const ve of J){if(v(ve))return[ve];Q.set(ve.value,ve)}Q.size>1&&Q.has("")&&Q.delete("");const de=[...Q.values()];return r.set(B,de),de}intersects(N,L){if(!(N instanceof t))throw new TypeError("a Range is required");return this.set.some(B=>x(B,L)&&N.set.some(q=>x(q,L)&&B.every(H=>q.every(U=>H.intersects(U,L)))))}test(N){if(!N)return!1;if(typeof N=="string")try{N=new s(N,this.options)}catch{return!1}for(let L=0;L<this.set.length;L++)if(P(this.set[L],N,this.options))return!0;return!1}}a2=t;const n=QQ(),r=new n,i=vC(),o=nb(),a=eb(),s=Tr(),{safeRe:l,t:u,comparatorTrimReplace:f,tildeTrimReplace:d,caretTrimReplace:p}=Wg(),{FLAG_INCLUDE_PRERELEASE:g,FLAG_LOOSE:y}=J1(),v=$=>$.value==="<0.0.0-0",b=$=>$.value==="",x=($,N)=>{let L=!0;const B=$.slice();let q=B.pop();for(;L&&B.length;)L=B.every(H=>q.intersects(H,N)),q=B.pop();return L},_=($,N)=>(a("comp",$,N),$=C($,N),a("caret",$),$=A($,N),a("tildes",$),$=I($,N),a("xrange",$),$=k($,N),a("stars",$),$),T=$=>!$||$.toLowerCase()==="x"||$==="*",A=($,N)=>$.trim().split(/\s+/).map(L=>w(L,N)).join(" "),w=($,N)=>{const L=N.loose?l[u.TILDELOOSE]:l[u.TILDE];return $.replace(L,(B,q,H,U,Y)=>{a("tilde",$,B,q,H,U,Y);let Q;return T(q)?Q="":T(H)?Q=`>=${q}.0.0 <${+q+1}.0.0-0`:T(U)?Q=`>=${q}.${H}.0 <${q}.${+H+1}.0-0`:Y?(a("replaceTilde pr",Y),Q=`>=${q}.${H}.${U}-${Y} <${q}.${+H+1}.0-0`):Q=`>=${q}.${H}.${U} <${q}.${+H+1}.0-0`,a("tilde return",Q),Q})},C=($,N)=>$.trim().split(/\s+/).map(L=>D(L,N)).join(" "),D=($,N)=>{a("caret",$,N);const L=N.loose?l[u.CARETLOOSE]:l[u.CARET],B=N.includePrerelease?"-0":"";return $.replace(L,(q,H,U,Y,Q)=>{a("caret",$,q,H,U,Y,Q);let J;return T(H)?J="":T(U)?J=`>=${H}.0.0${B} <${+H+1}.0.0-0`:T(Y)?H==="0"?J=`>=${H}.${U}.0${B} <${H}.${+U+1}.0-0`:J=`>=${H}.${U}.0${B} <${+H+1}.0.0-0`:Q?(a("replaceCaret pr",Q),H==="0"?U==="0"?J=`>=${H}.${U}.${Y}-${Q} <${H}.${U}.${+Y+1}-0`:J=`>=${H}.${U}.${Y}-${Q} <${H}.${+U+1}.0-0`:J=`>=${H}.${U}.${Y}-${Q} <${+H+1}.0.0-0`):(a("no pr"),H==="0"?U==="0"?J=`>=${H}.${U}.${Y}${B} <${H}.${U}.${+Y+1}-0`:J=`>=${H}.${U}.${Y}${B} <${H}.${+U+1}.0-0`:J=`>=${H}.${U}.${Y} <${+H+1}.0.0-0`),a("caret return",J),J})},I=($,N)=>(a("replaceXRanges",$,N),$.split(/\s+/).map(L=>M(L,N)).join(" ")),M=($,N)=>{$=$.trim();const L=N.loose?l[u.XRANGELOOSE]:l[u.XRANGE];return $.replace(L,(B,q,H,U,Y,Q)=>{a("xRange",$,B,q,H,U,Y,Q);const J=T(H),de=J||T(U),ve=de||T(Y),we=ve;return q==="="&&we&&(q=""),Q=N.includePrerelease?"-0":"",J?q===">"||q==="<"?B="<0.0.0-0":B="*":q&&we?(de&&(U=0),Y=0,q===">"?(q=">=",de?(H=+H+1,U=0,Y=0):(U=+U+1,Y=0)):q==="<="&&(q="<",de?H=+H+1:U=+U+1),q==="<"&&(Q="-0"),B=`${q+H}.${U}.${Y}${Q}`):de?B=`>=${H}.0.0${Q} <${+H+1}.0.0-0`:ve&&(B=`>=${H}.${U}.0${Q} <${H}.${+U+1}.0-0`),a("xRange return",B),B})},k=($,N)=>(a("replaceStars",$,N),$.trim().replace(l[u.STAR],"")),R=($,N)=>(a("replaceGTE0",$,N),$.trim().replace(l[N.includePrerelease?u.GTE0PRE:u.GTE0],"")),z=$=>(N,L,B,q,H,U,Y,Q,J,de,ve,we)=>(T(B)?L="":T(q)?L=`>=${B}.0.0${$?"-0":""}`:T(H)?L=`>=${B}.${q}.0${$?"-0":""}`:U?L=`>=${L}`:L=`>=${L}${$?"-0":""}`,T(J)?Q="":T(de)?Q=`<${+J+1}.0.0-0`:T(ve)?Q=`<${J}.${+de+1}.0-0`:we?Q=`<=${J}.${de}.${ve}-${we}`:$?Q=`<${J}.${de}.${+ve+1}-0`:Q=`<=${Q}`,`${L} ${Q}`.trim()),P=($,N,L)=>{for(let B=0;B<$.length;B++)if(!$[B].test(N))return!1;if(N.prerelease.length&&!L.includePrerelease){for(let B=0;B<$.length;B++)if(a($[B].semver),$[B].semver!==o.ANY&&$[B].semver.prerelease.length>0){const q=$[B].semver;if(q.major===N.major&&q.minor===N.minor&&q.patch===N.patch)return!0}return!1}return!0};return a2}var o2,b5;function nb(){if(b5)return o2;b5=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,d){if(d=n(d),f instanceof t){if(f.loose===!!d.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),a("comparator",f,d),this.options=d,this.loose=!!d.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,a("comp",this)}parse(f){const d=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=f.match(d);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new s(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(a("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new s(f,this.options)}catch{return!1}return o(f,this.operator,this.semver,this.options)}intersects(f,d){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(f.value,d).test(this.value):f.operator===""?f.value===""?!0:new l(this.value,d).test(f.semver):(d=n(d),d.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!d.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||o(this.semver,"<",f.semver,d)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||o(this.semver,">",f.semver,d)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}o2=t;const n=vC(),{safeRe:r,t:i}=Wg(),o=i8(),a=eb(),s=Tr(),l=_a();return o2}var s2,S5;function rb(){if(S5)return s2;S5=1;const e=_a();return s2=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},s2}var u2,x5;function ZQ(){if(x5)return u2;x5=1;const e=_a();return u2=(n,r)=>new e(n,r).set.map(i=>i.map(o=>o.value).join(" ").trim().split(" ")),u2}var l2,_5;function KQ(){if(_5)return l2;_5=1;const e=Tr(),t=_a();return l2=(r,i,o)=>{let a=null,s=null,l=null;try{l=new t(i,o)}catch{return null}return r.forEach(u=>{l.test(u)&&(!a||s.compare(u)===-1)&&(a=u,s=new e(a,o))}),a},l2}var c2,E5;function JQ(){if(E5)return c2;E5=1;const e=Tr(),t=_a();return c2=(r,i,o)=>{let a=null,s=null,l=null;try{l=new t(i,o)}catch{return null}return r.forEach(u=>{l.test(u)&&(!a||s.compare(u)===1)&&(a=u,s=new e(a,o))}),a},c2}var f2,w5;function eZ(){if(w5)return f2;w5=1;const e=Tr(),t=_a(),n=tb();return f2=(i,o)=>{i=new t(i,o);let a=new e("0.0.0");if(i.test(a)||(a=new e("0.0.0-0"),i.test(a)))return a;a=null;for(let s=0;s<i.set.length;++s){const l=i.set[s];let u=null;l.forEach(f=>{const d=new e(f.semver.version);switch(f.operator){case">":d.prerelease.length===0?d.patch++:d.prerelease.push(0),d.raw=d.format();case"":case">=":(!u||n(d,u))&&(u=d);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),u&&(!a||n(a,u))&&(a=u)}return a&&i.test(a)?a:null},f2}var d2,A5;function tZ(){if(A5)return d2;A5=1;const e=_a();return d2=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},d2}var h2,T5;function EC(){if(T5)return h2;T5=1;const e=Tr(),t=nb(),{ANY:n}=t,r=_a(),i=rb(),o=tb(),a=SC(),s=_C(),l=xC();return h2=(f,d,p,g)=>{f=new e(f,g),d=new r(d,g);let y,v,b,x,_;switch(p){case">":y=o,v=s,b=a,x=">",_=">=";break;case"<":y=a,v=l,b=o,x="<",_="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(f,d,g))return!1;for(let T=0;T<d.set.length;++T){const A=d.set[T];let w=null,C=null;if(A.forEach(D=>{D.semver===n&&(D=new t(">=0.0.0")),w=w||D,C=C||D,y(D.semver,w.semver,g)?w=D:b(D.semver,C.semver,g)&&(C=D)}),w.operator===x||w.operator===_||(!C.operator||C.operator===x)&&v(f,C.semver))return!1;if(C.operator===_&&b(f,C.semver))return!1}return!0},h2}var p2,C5;function nZ(){if(C5)return p2;C5=1;const e=EC();return p2=(n,r,i)=>e(n,r,">",i),p2}var g2,D5;function rZ(){if(D5)return g2;D5=1;const e=EC();return g2=(n,r,i)=>e(n,r,"<",i),g2}var m2,O5;function iZ(){if(O5)return m2;O5=1;const e=_a();return m2=(n,r,i)=>(n=new e(n,i),r=new e(r,i),n.intersects(r,i)),m2}var y2,I5;function aZ(){if(I5)return y2;I5=1;const e=rb(),t=xa();return y2=(n,r,i)=>{const o=[];let a=null,s=null;const l=n.sort((p,g)=>t(p,g,i));for(const p of l)e(p,r,i)?(s=p,a||(a=p)):(s&&o.push([a,s]),s=null,a=null);a&&o.push([a,null]);const u=[];for(const[p,g]of o)p===g?u.push(p):!g&&p===l[0]?u.push("*"):g?p===l[0]?u.push(`<=${g}`):u.push(`${p} - ${g}`):u.push(`>=${p}`);const f=u.join(" || "),d=typeof r.raw=="string"?r.raw:String(r);return f.length<d.length?f:r},y2}var v2,M5;function oZ(){if(M5)return v2;M5=1;const e=_a(),t=nb(),{ANY:n}=t,r=rb(),i=xa(),o=(d,p,g={})=>{if(d===p)return!0;d=new e(d,g),p=new e(p,g);let y=!1;e:for(const v of d.set){for(const b of p.set){const x=l(v,b,g);if(y=y||x!==null,x)continue e}if(y)return!1}return!0},a=[new t(">=0.0.0-0")],s=[new t(">=0.0.0")],l=(d,p,g)=>{if(d===p)return!0;if(d.length===1&&d[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;g.includePrerelease?d=a:d=s}if(p.length===1&&p[0].semver===n){if(g.includePrerelease)return!0;p=s}const y=new Set;let v,b;for(const I of d)I.operator===">"||I.operator===">="?v=u(v,I,g):I.operator==="<"||I.operator==="<="?b=f(b,I,g):y.add(I.semver);if(y.size>1)return null;let x;if(v&&b){if(x=i(v.semver,b.semver,g),x>0)return null;if(x===0&&(v.operator!==">="||b.operator!=="<="))return null}for(const I of y){if(v&&!r(I,String(v),g)||b&&!r(I,String(b),g))return null;for(const M of p)if(!r(I,String(M),g))return!1;return!0}let _,T,A,w,C=b&&!g.includePrerelease&&b.semver.prerelease.length?b.semver:!1,D=v&&!g.includePrerelease&&v.semver.prerelease.length?v.semver:!1;C&&C.prerelease.length===1&&b.operator==="<"&&C.prerelease[0]===0&&(C=!1);for(const I of p){if(w=w||I.operator===">"||I.operator===">=",A=A||I.operator==="<"||I.operator==="<=",v){if(D&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===D.major&&I.semver.minor===D.minor&&I.semver.patch===D.patch&&(D=!1),I.operator===">"||I.operator===">="){if(_=u(v,I,g),_===I&&_!==v)return!1}else if(v.operator===">="&&!r(v.semver,String(I),g))return!1}if(b){if(C&&I.semver.prerelease&&I.semver.prerelease.length&&I.semver.major===C.major&&I.semver.minor===C.minor&&I.semver.patch===C.patch&&(C=!1),I.operator==="<"||I.operator==="<="){if(T=f(b,I,g),T===I&&T!==b)return!1}else if(b.operator==="<="&&!r(b.semver,String(I),g))return!1}if(!I.operator&&(b||v)&&x!==0)return!1}return!(v&&A&&!b&&x!==0||b&&w&&!v&&x!==0||D||C)},u=(d,p,g)=>{if(!d)return p;const y=i(d.semver,p.semver,g);return y>0?d:y<0||p.operator===">"&&d.operator===">="?p:d},f=(d,p,g)=>{if(!d)return p;const y=i(d.semver,p.semver,g);return y<0?d:y>0||p.operator==="<"&&d.operator==="<="?p:d};return v2=o,v2}var b2,R5;function sZ(){if(R5)return b2;R5=1;const e=Wg(),t=J1(),n=Tr(),r=t8(),i=Ld(),o=$Q(),a=zQ(),s=LQ(),l=jQ(),u=UQ(),f=BQ(),d=VQ(),p=HQ(),g=xa(),y=qQ(),v=GQ(),b=bC(),x=YQ(),_=WQ(),T=tb(),A=SC(),w=n8(),C=r8(),D=xC(),I=_C(),M=i8(),k=XQ(),R=nb(),z=_a(),P=rb(),$=ZQ(),N=KQ(),L=JQ(),B=eZ(),q=tZ(),H=EC(),U=nZ(),Y=rZ(),Q=iZ(),J=aZ(),de=oZ();return b2={parse:i,valid:o,clean:a,inc:s,diff:l,major:u,minor:f,patch:d,prerelease:p,compare:g,rcompare:y,compareLoose:v,compareBuild:b,sort:x,rsort:_,gt:T,lt:A,eq:w,neq:C,gte:D,lte:I,cmp:M,coerce:k,Comparator:R,Range:z,satisfies:P,toComparators:$,maxSatisfying:N,minSatisfying:L,minVersion:B,validRange:q,outside:H,gtr:U,ltr:Y,intersects:Q,simplifyRange:J,subset:de,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},b2}var a8=sZ();function Gr(e,t,n){return e.fields=t||[],e.fname=n,e}function Kt(e){return e==null?null:e.fname}function ir(e){return e==null?null:e.fields}function o8(e){return e.length===1?uZ(e[0]):lZ(e)}const uZ=e=>function(t){return t[e]},lZ=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function re(e){throw Error(e)}function fo(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s++),a=s;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=s+1,r=l):l==="."&&!i?s>a?u():a=s+1:l==="["?(s>a&&u(),i=a=s+1):l==="]"&&(i||re("Access path missing open bracket: "+e),i>0&&u(),i=0,a=s+1)}return i&&re("Access path missing closing bracket: "+e),r&&re("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function Li(e,t,n){const r=fo(e);return e=r.length===1?r[0]:e,Gr((n&&n.get||o8)(r),[e],t||e)}const Xg=Li("id"),ur=Gr(e=>e,[],"identity"),uu=Gr(()=>0,[],"zero"),jd=Gr(()=>1,[],"one"),ji=Gr(()=>!0,[],"true"),eu=Gr(()=>!1,[],"false");function cZ(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const s8=0,wC=1,AC=2,u8=3,l8=4;function TC(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cZ,r=e||s8;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=wC&&n(t||"error","ERROR",arguments),this},warn(){return r>=AC&&n(t||"warn","WARN",arguments),this},info(){return r>=u8&&n(t||"log","INFO",arguments),this},debug(){return r>=l8&&n(t||"log","DEBUG",arguments),this}}}var ae=Array.isArray;function xe(e){return e===Object(e)}const k5=e=>e!=="__proto__";function ib(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=fZ(r.signals,i.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;Ud(r,o,i[o],a)}return r},{})}function Ud(e,t,n,r){if(!k5(t))return;let i,o;if(xe(n)&&!ae(n)){o=xe(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?Ud(o,i,n[i]):k5(i)&&(o[i]=n[i])}else e[t]=n}function fZ(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function at(e){return e[e.length-1]}function nr(e){return e==null||e===""?null:+e}const c8=e=>t=>e*Math.exp(t),f8=e=>t=>Math.log(e*t),d8=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),h8=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,bv=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function ab(e,t,n,r){const i=n(e[0]),o=n(at(e)),a=(o-i)*t;return[r(i-a),r(o-a)]}function p8(e,t){return ab(e,t,nr,ur)}function g8(e,t){var n=Math.sign(e[0]);return ab(e,t,f8(n),c8(n))}function m8(e,t,n){return ab(e,t,bv(n),bv(1/n))}function y8(e,t,n){return ab(e,t,d8(n),h8(n))}function ob(e,t,n,r,i){const o=r(e[0]),a=r(at(e)),s=t!=null?r(t):(o+a)/2;return[i(s+(o-s)*n),i(s+(a-s)*n)]}function CC(e,t,n){return ob(e,t,n,nr,ur)}function DC(e,t,n){const r=Math.sign(e[0]);return ob(e,t,n,f8(r),c8(r))}function Sv(e,t,n,r){return ob(e,t,n,bv(r),bv(1/r))}function OC(e,t,n,r){return ob(e,t,n,d8(r),h8(r))}function v8(e){return 1+~~(new Date(e).getMonth()/3)}function b8(e){return 1+~~(new Date(e).getUTCMonth()/3)}function Se(e){return e!=null?ae(e)?e:[e]:[]}function S8(e,t,n){let r=e[0],i=e[1],o;return i<r&&(o=i,i=r,r=o),o=i-r,o>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-o),r+o]}function Ge(e){return typeof e=="function"}const dZ="descending";function IC(e,t,n){n=n||{},t=Se(t)||[];const r=[],i=[],o={},a=n.comparator||hZ;return Se(e).forEach((s,l)=>{s!=null&&(r.push(t[l]===dZ?-1:1),i.push(s=Ge(s)?s:Li(s,null,n)),(ir(s)||[]).forEach(u=>o[u]=1))}),i.length===0?null:Gr(a(i,r),Object.keys(o))}const Qg=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),hZ=(e,t)=>e.length===1?pZ(e[0],t[0]):gZ(e,t,e.length),pZ=(e,t)=>function(n,r){return Qg(e(n),e(r))*t},gZ=(e,t,n)=>(t.push(0),function(r,i){let o,a=0,s=-1;for(;a===0&&++s<n;)o=e[s],a=Qg(o(r),o(i));return a*t[s]});function lr(e){return Ge(e)?e:()=>e}function MC(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function qe(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function no(e,t){let n=0,r,i,o,a;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(o=a=i;n<r;++n)i=e[n],i!=null&&(i<o&&(o=i),i>a&&(a=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(o=a=i;n<r;++n)i=t(e[n]),i!=null&&(i<o&&(o=i),i>a&&(a=i))}return[o,a]}function x8(e,t){const n=e.length;let r=-1,i,o,a,s,l;if(t==null){for(;++r<n;)if(o=e[r],o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=l=r;++r<n;)o=e[r],o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,l=r))}else{for(;++r<n;)if(o=t(e[r],r,e),o!=null&&o>=o){i=a=o;break}if(r===n)return[-1,-1];for(s=l=r;++r<n;)o=t(e[r],r,e),o!=null&&(i>o&&(i=o,s=r),a<o&&(a=o,l=r))}return[s,l]}function _e(e,t){return Object.hasOwn(e,t)}const r0={};function Bd(e){let t={},n;function r(o){return _e(t,o)&&t[o]!==r0}const i={size:0,empty:0,object:t,has:r,get(o){return r(o)?t[o]:void 0},set(o,a){return r(o)||(++i.size,t[o]===r0&&--i.empty),t[o]=a,this},delete(o){return r(o)&&(--i.size,++i.empty,t[o]=r0),this},clear(){i.size=i.empty=0,i.object=t={}},test(o){return arguments.length?(n=o,i):n},clean(){const o={};let a=0;for(const s in t){const l=t[s];l!==r0&&(!n||!n(l))&&(o[s]=l,++a)}i.size=a,i.empty=0,i.object=t=o}};return e&&Object.keys(e).forEach(o=>{i.set(o,e[o])}),i}function _8(e,t,n,r,i,o){if(!n&&n!==0)return o;const a=+n;let s=e[0],l=at(e),u;l<s&&(u=s,s=l,l=u),u=Math.abs(t-s);const f=Math.abs(l-t);return u<f&&u<=a?r:f<=a?i:o}function ye(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),qe(r,n)}function Bf(e,t,n,r){let i=t[0],o=t[t.length-1],a;return i>o&&(a=i,i=o,o=a),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=o:e<o)}function Sc(e){return typeof e=="boolean"}function Su(e){return Object.prototype.toString.call(e)==="[object Date]"}function E8(e){return e&&Ge(e[Symbol.iterator])}function ct(e){return typeof e=="number"}function RC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ee(e){return typeof e=="string"}function kC(e,t,n){e&&(e=t?Se(e).map(s=>s.replace(/\\(.)/g,"$1")):Se(e));const r=e&&e.length,i=n&&n.get||o8,o=s=>i(t?[s]:fo(s));let a;if(!r)a=function(){return""};else if(r===1){const s=o(e[0]);a=function(l){return""+s(l)}}else{const s=e.map(o);a=function(l){let u=""+s[0](l),f=0;for(;++f<r;)u+="|"+s[f](l);return u}}return Gr(a,e,"key")}function w8(e,t){const n=e[0],r=at(e),i=+t;return i?i===1?r:n+i*(r-n):n}const mZ=1e4;function A8(e){e=+e||mZ;let t,n,r;const i=()=>{t={},n={},r=0},o=(a,s)=>(++r>e&&(n=t,t={},r=1),t[a]=s);return i(),{clear:i,has:a=>_e(t,a)||_e(n,a),get:a=>_e(t,a)?t[a]:_e(n,a)?o(a,n[a]):void 0,set:(a,s)=>_e(t,a)?t[a]=s:o(a,s)}}function T8(e,t,n,r){const i=t.length,o=n.length;if(!o)return t;if(!i)return n;const a=r||new t.constructor(i+o);let s=0,l=0,u=0;for(;s<i&&l<o;++u)a[u]=e(t[s],n[l])>0?n[l++]:t[s++];for(;s<i;++s,++u)a[u]=t[s];for(;l<o;++l,++u)a[u]=n[l];return a}function Rp(e,t){let n="";for(;--t>=0;)n+=e;return n}function C8(e,t,n,r){const i=n||" ",o=e+"",a=t-o.length;return a<=0?o:r==="left"?Rp(i,a)+o:r==="center"?Rp(i,~~(a/2))+o+Rp(i,Math.ceil(a/2)):o+Rp(i,a)}function Zg(e){return e&&at(e)-e[0]||0}function pe(e){return ae(e)?"["+e.map(pe)+"]":xe(e)||Ee(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function NC(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const yZ=e=>ct(e)||Su(e)?e:Date.parse(e);function FC(e,t){return t=t||yZ,e==null||e===""?null:t(e)}function PC(e){return e==null||e===""?null:e+""}function pa(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function D8(e,t,n,r){const i=r??"…",o=e+"",a=o.length,s=Math.max(0,t-i.length);return a<=t?o:n==="left"?i+o.slice(a-s):n==="center"?o.slice(0,Math.ceil(s/2))+i+o.slice(a-~~(s/2)):o.slice(0,s)+i}function ru(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const o=t(e[i]);o&&n(o,i,e)}}else e.forEach(n)}var N5={},S2={},x2=34,up=10,_2=13;function O8(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function vZ(e,t){var n=O8(e);return function(r,i){return t(n(r),i,e)}}function F5(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function Nr(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function bZ(e){return e<0?"-"+Nr(-e,6):e>9999?"+"+Nr(e,6):Nr(e,4)}function SZ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":bZ(e.getUTCFullYear())+"-"+Nr(e.getUTCMonth()+1,2)+"-"+Nr(e.getUTCDate(),2)+(i?"T"+Nr(t,2)+":"+Nr(n,2)+":"+Nr(r,2)+"."+Nr(i,3)+"Z":r?"T"+Nr(t,2)+":"+Nr(n,2)+":"+Nr(r,2)+"Z":n||t?"T"+Nr(t,2)+":"+Nr(n,2)+"Z":"")}function xZ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(d,p){var g,y,v=i(d,function(b,x){if(g)return g(b,x-1);y=b,g=p?vZ(b,p):O8(b)});return v.columns=y||[],v}function i(d,p){var g=[],y=d.length,v=0,b=0,x,_=y<=0,T=!1;d.charCodeAt(y-1)===up&&--y,d.charCodeAt(y-1)===_2&&--y;function A(){if(_)return S2;if(T)return T=!1,N5;var C,D=v,I;if(d.charCodeAt(D)===x2){for(;v++<y&&d.charCodeAt(v)!==x2||d.charCodeAt(++v)===x2;);return(C=v)>=y?_=!0:(I=d.charCodeAt(v++))===up?T=!0:I===_2&&(T=!0,d.charCodeAt(v)===up&&++v),d.slice(D+1,C-1).replace(/""/g,'"')}for(;v<y;){if((I=d.charCodeAt(C=v++))===up)T=!0;else if(I===_2)T=!0,d.charCodeAt(v)===up&&++v;else if(I!==n)continue;return d.slice(D,C)}return _=!0,d.slice(D,y)}for(;(x=A())!==S2;){for(var w=[];x!==N5&&x!==S2;)w.push(x),x=A();p&&(w=p(w,b++))==null||g.push(w)}return g}function o(d,p){return d.map(function(g){return p.map(function(y){return f(g[y])}).join(e)})}function a(d,p){return p==null&&(p=F5(d)),[p.map(f).join(e)].concat(o(d,p)).join(`
`)}function s(d,p){return p==null&&(p=F5(d)),o(d,p).join(`
`)}function l(d){return d.map(u).join(`
`)}function u(d){return d.map(f).join(e)}function f(d){return d==null?"":d instanceof Date?SZ(d):t.test(d+="")?'"'+d.replace(/"/g,'""')+'"':d}return{parse:r,parseRows:i,format:a,formatBody:s,formatRows:l,formatRow:u,formatValue:f}}function _Z(e){return e}function EZ(e){if(e==null)return _Z;var t,n,r=e.scale[0],i=e.scale[1],o=e.translate[0],a=e.translate[1];return function(s,l){l||(t=n=0);var u=2,f=s.length,d=new Array(f);for(d[0]=(t+=s[0])*r+o,d[1]=(n+=s[1])*i+a;u<f;)d[u]=s[u],++u;return d}}function wZ(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function AZ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return P5(e,n)})}:P5(e,t)}function P5(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,o=I8(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:o}:r==null?{type:"Feature",id:n,properties:i,geometry:o}:{type:"Feature",id:n,bbox:r,properties:i,geometry:o}}function I8(e,t){var n=EZ(e.transform),r=e.arcs;function i(f,d){d.length&&d.pop();for(var p=r[f<0?~f:f],g=0,y=p.length;g<y;++g)d.push(n(p[g],g));f<0&&wZ(d,y)}function o(f){return n(f)}function a(f){for(var d=[],p=0,g=f.length;p<g;++p)i(f[p],d);return d.length<2&&d.push(d[0]),d}function s(f){for(var d=a(f);d.length<4;)d.push(d[0]);return d}function l(f){return f.map(s)}function u(f){var d=f.type,p;switch(d){case"GeometryCollection":return{type:d,geometries:f.geometries.map(u)};case"Point":p=o(f.coordinates);break;case"MultiPoint":p=f.coordinates.map(o);break;case"LineString":p=a(f.arcs);break;case"MultiLineString":p=f.arcs.map(a);break;case"Polygon":p=l(f.arcs);break;case"MultiPolygon":p=f.arcs.map(l);break;default:return null}return{type:d,coordinates:p}}return u(t)}function TZ(e,t){var n={},r={},i={},o=[],a=-1;t.forEach(function(u,f){var d=e.arcs[u<0?~u:u],p;d.length<3&&!d[1][0]&&!d[1][1]&&(p=t[++a],t[a]=u,t[f]=p)}),t.forEach(function(u){var f=s(u),d=f[0],p=f[1],g,y;if(g=i[d])if(delete i[g.end],g.push(u),g.end=p,y=r[p]){delete r[y.start];var v=y===g?g:g.concat(y);r[v.start=g.start]=i[v.end=y.end]=v}else r[g.start]=i[g.end]=g;else if(g=r[p])if(delete r[g.start],g.unshift(u),g.start=d,y=i[d]){delete i[y.end];var b=y===g?g:y.concat(g);r[b.start=y.start]=i[b.end=g.end]=b}else r[g.start]=i[g.end]=g;else g=[u],r[g.start=d]=i[g.end=p]=g});function s(u){var f=e.arcs[u<0?~u:u],d=f[0],p;return e.transform?(p=[0,0],f.forEach(function(g){p[0]+=g[0],p[1]+=g[1]})):p=f[f.length-1],u<0?[p,d]:[d,p]}function l(u,f){for(var d in u){var p=u[d];delete f[p.start],delete p.start,delete p.end,p.forEach(function(g){n[g<0?~g:g]=1}),o.push(p)}}return l(i,r),l(r,i),t.forEach(function(u){n[u<0?~u:u]||o.push([u])}),o}function CZ(e){return I8(e,DZ.apply(this,arguments))}function DZ(e,t,n){var r,i,o;if(arguments.length>1)r=OZ(e,t,n);else for(i=0,r=new Array(o=e.arcs.length);i<o;++i)r[i]=i;return{type:"MultiLineString",arcs:TZ(e,r)}}function OZ(e,t,n){var r=[],i=[],o;function a(d){var p=d<0?~d:d;(i[p]||(i[p]=[])).push({i:d,g:o})}function s(d){d.forEach(a)}function l(d){d.forEach(s)}function u(d){d.forEach(l)}function f(d){switch(o=d,d.type){case"GeometryCollection":d.geometries.forEach(f);break;case"LineString":s(d.arcs);break;case"MultiLineString":case"Polygon":l(d.arcs);break;case"MultiPolygon":u(d.arcs);break}}return f(t),i.forEach(n==null?function(d){r.push(d[0].i)}:function(d){n(d[0].g,d[d.length-1].g)&&r.push(d[0].i)}),r}function ns(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function IZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Vd(e){let t,n,r;e.length!==2?(t=ns,n=(s,l)=>ns(e(s),l),r=(s,l)=>e(s)-l):(t=e===ns||e===IZ?e:MZ,n=e,r=e);function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(s[d],l)<0?u=d+1:f=d}while(u<f)}return u}function o(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const d=u+f>>>1;n(s[d],l)<=0?u=d+1:f=d}while(u<f)}return u}function a(s,l,u=0,f=s.length){const d=i(s,l,u,f-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:a,right:o}}function MZ(){return 0}function M8(e){return e===null?NaN:+e}function*RZ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const R8=Vd(ns),Tu=R8.right,kZ=R8.left;Vd(M8).center;function NZ(e,t){let n=0,r,i=0,o=0;if(t===void 0)for(let a of e)a!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,o+=r*(a-i));else{let a=-1;for(let s of e)(s=t(s,++a,e))!=null&&(s=+s)>=s&&(r=s-i,i+=r/++n,o+=r*(s-i))}if(n>1)return o/(n-1)}function FZ(e,t){const n=NZ(e,t);return n&&Math.sqrt(n)}class xr{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const o=n[i],a=t+o,s=Math.abs(t)<Math.abs(o)?t-(a-o):o-(a-t);s&&(n[r++]=s),t=a}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,o,a=0;if(n>0){for(a=t[--n];n>0&&(r=a,i=t[--n],a=r+i,o=i-(a-r),!o););n>0&&(o<0&&t[n-1]<0||o>0&&t[n-1]>0)&&(i=o*2,r=a+i,i==r-a&&(a=r))}return a}}class $5 extends Map{constructor(t,n=F8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(rA(this,t))}has(t){return super.has(rA(this,t))}set(t,n){return super.set(k8(this,t),n)}delete(t){return super.delete(N8(this,t))}}class xv extends Set{constructor(t,n=F8){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(rA(this,t))}add(t){return super.add(k8(this,t))}delete(t){return super.delete(N8(this,t))}}function rA({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function k8({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function N8({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function F8(e){return e!==null&&typeof e=="object"?e.valueOf():e}function PZ(e,t){return Array.from(t,n=>e[n])}function $Z(e=ns){if(e===ns)return P8;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function P8(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const zZ=Math.sqrt(50),LZ=Math.sqrt(10),jZ=Math.sqrt(2);function _v(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=zZ?10:o>=LZ?5:o>=jZ?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?_v(e,t,n*2):[s,l,u]}function iA(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,o,a]=r?_v(t,e,n):_v(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let u=0;u<s;++u)l[u]=(o-u)/-a;else for(let u=0;u<s;++u)l[u]=(o-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function aA(e,t,n){return t=+t,e=+e,n=+n,_v(e,t,n)[2]}function Cu(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?aA(t,e,n):aA(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Vl(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function oA(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function $8(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?P8:$Z(i);r>n;){if(r-n>600){const l=r-n+1,u=t-n+1,f=Math.log(l),d=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*d*(l-d)/l)*(u-l/2<0?-1:1),g=Math.max(n,Math.floor(t-u*d/l+p)),y=Math.min(r,Math.floor(t+(l-u)*d/l+p));$8(e,t,g,y,i)}const o=e[t];let a=n,s=r;for(lp(e,n,t),i(e[r],o)>0&&lp(e,n,r);a<s;){for(lp(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}i(e[n],o)===0?lp(e,n,s):(++s,lp(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function lp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function sA(e,t,n){if(e=Float64Array.from(RZ(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return oA(e);if(t>=1)return Vl(e);var r,i=(r-1)*t,o=Math.floor(i),a=Vl($8(e,o).subarray(0,o+1)),s=oA(e.subarray(o+1));return a+(s-a)*(i-o)}}function z8(e,t,n=M8){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e),s=+n(e[o+1],o+1,e);return a+(s-a)*(i-o)}}function UZ(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let o of e)(o=t(o,++i,e))!=null&&(o=+o)>=o&&(++n,r+=o)}if(n)return r/n}function L8(e,t){return sA(e,.5,t)}function*BZ(e){for(const t of e)yield*t}function j8(e){return Array.from(BZ(e))}function si(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,o=new Array(i);++r<i;)o[r]=e+r*n;return o}function U8(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function VZ(e,...t){e=new xv(e),t=t.map(HZ);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function HZ(e){return e instanceof xv?e:new xv(e)}function qZ(...e){const t=new xv;for(const n of e)for(const r of n)t.add(r);return t}function GZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ev(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function id(e){return e=Ev(Math.abs(e)),e?e[1]:NaN}function YZ(e,t){return function(n,r){for(var i=n.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(t)}}function WZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var XZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kl(e){if(!(t=XZ.exec(e)))throw new Error("invalid format: "+e);var t;return new $C({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kl.prototype=$C.prototype;function $C(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}$C.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QZ(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var B8;function ZZ(e,t){var n=Ev(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(B8=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Ev(e,Math.max(0,t+o-1))[0]}function z5(e,t){var n=Ev(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const L5={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:GZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>z5(e*100,t),r:z5,s:ZZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function j5(e){return e}var U5=Array.prototype.map,B5=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function V8(e){var t=e.grouping===void 0||e.thousands===void 0?j5:YZ(U5.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",o=e.numerals===void 0?j5:WZ(U5.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Kl(d);var p=d.fill,g=d.align,y=d.sign,v=d.symbol,b=d.zero,x=d.width,_=d.comma,T=d.precision,A=d.trim,w=d.type;w==="n"?(_=!0,w="g"):L5[w]||(T===void 0&&(T=12),A=!0,w="g"),(b||p==="0"&&g==="=")&&(b=!0,p="0",g="=");var C=v==="$"?n:v==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",D=v==="$"?r:/[%p]/.test(w)?a:"",I=L5[w],M=/[defgprs%]/.test(w);T=T===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,T)):Math.max(0,Math.min(20,T));function k(R){var z=C,P=D,$,N,L;if(w==="c")P=I(R)+P,R="";else{R=+R;var B=R<0||1/R<0;if(R=isNaN(R)?l:I(Math.abs(R),T),A&&(R=QZ(R)),B&&+R==0&&y!=="+"&&(B=!1),z=(B?y==="("?y:s:y==="-"||y==="("?"":y)+z,P=(w==="s"?B5[8+B8/3]:"")+P+(B&&y==="("?")":""),M){for($=-1,N=R.length;++$<N;)if(L=R.charCodeAt($),48>L||L>57){P=(L===46?i+R.slice($+1):R.slice($))+P,R=R.slice(0,$);break}}}_&&!b&&(R=t(R,1/0));var q=z.length+R.length+P.length,H=q<x?new Array(x-q+1).join(p):"";switch(_&&b&&(R=t(H+R,H.length?x-P.length:1/0),H=""),g){case"<":R=z+R+P+H;break;case"=":R=z+H+R+P;break;case"^":R=H.slice(0,q=H.length>>1)+z+R+P+H.slice(q);break;default:R=H+z+R+P;break}return o(R)}return k.toString=function(){return d+""},k}function f(d,p){var g=u((d=Kl(d),d.type="f",d)),y=Math.max(-8,Math.min(8,Math.floor(id(p)/3)))*3,v=Math.pow(10,-y),b=B5[8+y/3];return function(x){return g(v*x)+b}}return{format:u,formatPrefix:f}}var i0,sb,zC;KZ({thousands:",",grouping:[3],currency:["$",""]});function KZ(e){return i0=V8(e),sb=i0.format,zC=i0.formatPrefix,i0}function H8(e){return Math.max(0,-id(Math.abs(e)))}function q8(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(id(t)/3)))*3-id(Math.abs(e)))}function G8(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,id(t)-id(e))+1}const E2=new Date,w2=new Date;function yn(e,t,n,r){function i(o){return e(o=arguments.length===0?new Date:new Date(+o)),o}return i.floor=o=>(e(o=new Date(+o)),o),i.ceil=o=>(e(o=new Date(o-1)),t(o,1),e(o),o),i.round=o=>{const a=i(o),s=i.ceil(o);return o-a<s-o?a:s},i.offset=(o,a)=>(t(o=new Date(+o),a==null?1:Math.floor(a)),o),i.range=(o,a,s)=>{const l=[];if(o=i.ceil(o),s=s==null?1:Math.floor(s),!(o<a)||!(s>0))return l;let u;do l.push(u=new Date(+o)),t(o,s),e(o);while(u<o&&o<a);return l},i.filter=o=>yn(a=>{if(a>=a)for(;e(a),!o(a);)a.setTime(a-1)},(a,s)=>{if(a>=a)if(s<0)for(;++s<=0;)for(;t(a,-1),!o(a););else for(;--s>=0;)for(;t(a,1),!o(a););}),n&&(i.count=(o,a)=>(E2.setTime(+o),w2.setTime(+a),e(E2),e(w2),Math.floor(n(E2,w2))),i.every=o=>(o=Math.floor(o),!isFinite(o)||!(o>0)?null:o>1?i.filter(r?a=>r(a)%o===0:a=>i.count(0,a)%o===0):i)),i}const ad=yn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ad.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?yn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):ad);ad.range;const Qo=1e3,ki=Qo*60,Zo=ki*60,cs=Zo*24,LC=cs*7,V5=cs*30,A2=cs*365,Ko=yn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qo)},(e,t)=>(t-e)/Qo,e=>e.getUTCSeconds());Ko.range;const ub=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qo)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getMinutes());ub.range;const lb=yn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*ki)},(e,t)=>(t-e)/ki,e=>e.getUTCMinutes());lb.range;const cb=yn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qo-e.getMinutes()*ki)},(e,t)=>{e.setTime(+e+t*Zo)},(e,t)=>(t-e)/Zo,e=>e.getHours());cb.range;const fb=yn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Zo)},(e,t)=>(t-e)/Zo,e=>e.getUTCHours());fb.range;const rs=yn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*ki)/cs,e=>e.getDate()-1);rs.range;const xu=yn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cs,e=>e.getUTCDate()-1);xu.range;const Y8=yn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/cs,e=>Math.floor(e/cs));Y8.range;function xc(e){return yn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*ki)/LC)}const Hd=xc(0),wv=xc(1),JZ=xc(2),eK=xc(3),od=xc(4),tK=xc(5),nK=xc(6);Hd.range;wv.range;JZ.range;eK.range;od.range;tK.range;nK.range;function _c(e){return yn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/LC)}const qd=_c(0),Av=_c(1),rK=_c(2),iK=_c(3),sd=_c(4),aK=_c(5),oK=_c(6);qd.range;Av.range;rK.range;iK.range;sd.range;aK.range;oK.range;const yg=yn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());yg.range;const vg=yn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vg.range;const ro=yn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ro.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ro.range;const io=yn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());io.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:yn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});io.range;function W8(e,t,n,r,i,o){const a=[[Ko,1,Qo],[Ko,5,5*Qo],[Ko,15,15*Qo],[Ko,30,30*Qo],[o,1,ki],[o,5,5*ki],[o,15,15*ki],[o,30,30*ki],[i,1,Zo],[i,3,3*Zo],[i,6,6*Zo],[i,12,12*Zo],[r,1,cs],[r,2,2*cs],[n,1,LC],[t,1,V5],[t,3,3*V5],[e,1,A2]];function s(u,f,d){const p=f<u;p&&([u,f]=[f,u]);const g=d&&typeof d.range=="function"?d:l(u,f,d),y=g?g.range(u,+f+1):[];return p?y.reverse():y}function l(u,f,d){const p=Math.abs(f-u)/d,g=Vd(([,,b])=>b).right(a,p);if(g===a.length)return e.every(Cu(u/A2,f/A2,d));if(g===0)return ad.every(Math.max(Cu(u,f,d),1));const[y,v]=a[p/a[g-1][2]<a[g][2]/p?g-1:g];return y.every(v)}return[s,l]}const[sK,uK]=W8(io,vg,qd,Y8,fb,lb),[lK,cK]=W8(ro,yg,Hd,rs,cb,ub),Bn="year",jr="quarter",ar="month",pn="week",Ur="date",tr="day",ao="dayofyear",hi="hours",pi="minutes",Ui="seconds",ga="milliseconds",jC=[Bn,jr,ar,pn,Ur,tr,ao,hi,pi,Ui,ga],T2=jC.reduce((e,t,n)=>(e[t]=1+n,e),{});function UC(e){const t=Se(e).slice(),n={};return t.length||re("Missing time unit."),t.forEach(i=>{_e(T2,i)?n[i]=1:re(`Invalid time unit: ${i}.`)}),(n[pn]||n[tr]?1:0)+(n[jr]||n[ar]||n[Ur]?1:0)+(n[ao]?1:0)>1&&re(`Incompatible time units: ${e}`),t.sort((i,o)=>T2[i]-T2[o]),t}const fK={[Bn]:"%Y ",[jr]:"Q%q ",[ar]:"%b ",[Ur]:"%d ",[pn]:"W%U ",[tr]:"%a ",[ao]:"%j ",[hi]:"%H:00",[pi]:"00:%M",[Ui]:":%S",[ga]:".%L",[`${Bn}-${ar}`]:"%Y-%m ",[`${Bn}-${ar}-${Ur}`]:"%Y-%m-%d ",[`${hi}-${pi}`]:"%H:%M"};function X8(e,t){const n=qe({},fK,t),r=UC(e),i=r.length;let o="",a=0,s,l;for(a=0;a<i;)for(s=r.length;s>a;--s)if(l=r.slice(a,s).join("-"),n[l]!=null){o+=n[l],a=s;break}return o.trim()}const kl=new Date;function BC(e){return kl.setFullYear(e),kl.setMonth(0),kl.setDate(1),kl.setHours(0,0,0,0),kl}function Q8(e){return K8(new Date(e))}function Z8(e){return uA(new Date(e))}function K8(e){return rs.count(BC(e.getFullYear())-1,e)}function uA(e){return Hd.count(BC(e.getFullYear())-1,e)}function lA(e){return BC(e).getDay()}function dK(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(-1,t,n,r,i,o,a);return s.setFullYear(e),s}return new Date(e,t,n,r,i,o,a)}function J8(e){return tz(new Date(e))}function ez(e){return cA(new Date(e))}function tz(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return xu.count(t-1,e)}function cA(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return qd.count(t-1,e)}function fA(e){return kl.setTime(Date.UTC(e,0,1)),kl.getUTCDay()}function hK(e,t,n,r,i,o,a){if(0<=e&&e<100){const s=new Date(Date.UTC(-1,t,n,r,i,o,a));return s.setUTCFullYear(n.y),s}return new Date(Date.UTC(e,t,n,r,i,o,a))}function nz(e,t,n,r,i){const o=t||1,a=at(e),s=(x,_,T)=>(T=T||x,pK(n[T],r[T],x===a&&o,_)),l=new Date,u=pa(e),f=u[Bn]?s(Bn):lr(2012),d=u[ar]?s(ar):u[jr]?s(jr):uu,p=u[pn]&&u[tr]?s(tr,1,pn+tr):u[pn]?s(pn,1):u[tr]?s(tr,1):u[Ur]?s(Ur,1):u[ao]?s(ao,1):jd,g=u[hi]?s(hi):uu,y=u[pi]?s(pi):uu,v=u[Ui]?s(Ui):uu,b=u[ga]?s(ga):uu;return function(x){l.setTime(+x);const _=f(l);return i(_,d(l),p(l,_),g(l),y(l),v(l),b(l))}}function pK(e,t,n,r){const i=n<=1?e:r?(o,a)=>r+n*Math.floor((e(o,a)-r)/n):(o,a)=>n*Math.floor(e(o,a)/n);return t?(o,a)=>t(i(o,a),a):i}function ud(e,t,n){return t+e*7-(n+6)%7}const gK={[Bn]:e=>e.getFullYear(),[jr]:e=>Math.floor(e.getMonth()/3),[ar]:e=>e.getMonth(),[Ur]:e=>e.getDate(),[hi]:e=>e.getHours(),[pi]:e=>e.getMinutes(),[Ui]:e=>e.getSeconds(),[ga]:e=>e.getMilliseconds(),[ao]:e=>K8(e),[pn]:e=>uA(e),[pn+tr]:(e,t)=>ud(uA(e),e.getDay(),lA(t)),[tr]:(e,t)=>ud(1,e.getDay(),lA(t))},mK={[jr]:e=>3*e,[pn]:(e,t)=>ud(e,0,lA(t))};function rz(e,t){return nz(e,t||1,gK,mK,dK)}const yK={[Bn]:e=>e.getUTCFullYear(),[jr]:e=>Math.floor(e.getUTCMonth()/3),[ar]:e=>e.getUTCMonth(),[Ur]:e=>e.getUTCDate(),[hi]:e=>e.getUTCHours(),[pi]:e=>e.getUTCMinutes(),[Ui]:e=>e.getUTCSeconds(),[ga]:e=>e.getUTCMilliseconds(),[ao]:e=>tz(e),[pn]:e=>cA(e),[tr]:(e,t)=>ud(1,e.getUTCDay(),fA(t)),[pn+tr]:(e,t)=>ud(cA(e),e.getUTCDay(),fA(t))},vK={[jr]:e=>3*e,[pn]:(e,t)=>ud(e,0,fA(t))};function iz(e,t){return nz(e,t||1,yK,vK,hK)}const bK={[Bn]:ro,[jr]:yg.every(3),[ar]:yg,[pn]:Hd,[Ur]:rs,[tr]:rs,[ao]:rs,[hi]:cb,[pi]:ub,[Ui]:Ko,[ga]:ad},SK={[Bn]:io,[jr]:vg.every(3),[ar]:vg,[pn]:qd,[Ur]:xu,[tr]:xu,[ao]:xu,[hi]:fb,[pi]:lb,[Ui]:Ko,[ga]:ad};function Gd(e){return bK[e]}function Yd(e){return SK[e]}function az(e,t,n){return e?e.offset(t,n):void 0}function oz(e,t,n){return az(Gd(e),t,n)}function sz(e,t,n){return az(Yd(e),t,n)}function uz(e,t,n,r){return e?e.range(t,n,r):void 0}function lz(e,t,n,r){return uz(Gd(e),t,n,r)}function cz(e,t,n,r){return uz(Yd(e),t,n,r)}const kp=1e3,Np=kp*60,Fp=Np*60,db=Fp*24,xK=db*7,H5=db*30,dA=db*365,fz=[Bn,ar,Ur,hi,pi,Ui,ga],Pp=fz.slice(0,-1),$p=Pp.slice(0,-1),zp=$p.slice(0,-1),_K=zp.slice(0,-1),EK=[Bn,pn],q5=[Bn,ar],dz=[Bn],cp=[[Pp,1,kp],[Pp,5,5*kp],[Pp,15,15*kp],[Pp,30,30*kp],[$p,1,Np],[$p,5,5*Np],[$p,15,15*Np],[$p,30,30*Np],[zp,1,Fp],[zp,3,3*Fp],[zp,6,6*Fp],[zp,12,12*Fp],[_K,1,db],[EK,1,xK],[q5,1,H5],[q5,3,3*H5],[dz,1,dA]];function hz(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(Zg(t))/n;let i=Vd(s=>s[2]).right(cp,r),o,a;return i===cp.length?(o=dz,a=Cu(t[0]/dA,t[1]/dA,n)):i?(i=cp[r/cp[i-1][2]<cp[i][2]/r?i-1:i],o=i[0],a=i[1]):(o=fz,a=Math.max(Cu(t[0],t[1],n),1)),{units:o,step:a}}function C2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function D2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function fp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function pz(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,u=dp(i),f=hp(i),d=dp(o),p=hp(o),g=dp(a),y=hp(a),v=dp(s),b=hp(s),x=dp(l),_=hp(l),T={a:B,A:q,b:H,B:U,c:null,d:Z5,e:Z5,f:GK,g:nJ,G:iJ,H:VK,I:HK,j:qK,L:gz,m:YK,M:WK,p:Y,q:Q,Q:eP,s:tP,S:XK,u:QK,U:ZK,V:KK,w:JK,W:eJ,x:null,X:null,y:tJ,Y:rJ,Z:aJ,"%":J5},A={a:J,A:de,b:ve,B:we,c:null,d:K5,e:K5,f:lJ,g:bJ,G:xJ,H:oJ,I:sJ,j:uJ,L:yz,m:cJ,M:fJ,p:Be,q:Ve,Q:eP,s:tP,S:dJ,u:hJ,U:pJ,V:gJ,w:mJ,W:yJ,x:null,X:null,y:vJ,Y:SJ,Z:_J,"%":J5},w={a:k,A:R,b:z,B:P,c:$,d:X5,e:X5,f:LK,g:W5,G:Y5,H:Q5,I:Q5,j:FK,L:zK,m:NK,M:PK,p:M,q:kK,Q:UK,s:BK,S:$K,u:DK,U:OK,V:IK,w:CK,W:MK,x:N,X:L,y:W5,Y:Y5,Z:RK,"%":jK};T.x=C(n,T),T.X=C(r,T),T.c=C(t,T),A.x=C(n,A),A.X=C(r,A),A.c=C(t,A);function C(me,$e){return function(De){var ue=[],Et=-1,nt=0,$t=me.length,Gt,Ot,Lc;for(De instanceof Date||(De=new Date(+De));++Et<$t;)me.charCodeAt(Et)===37&&(ue.push(me.slice(nt,Et)),(Ot=G5[Gt=me.charAt(++Et)])!=null?Gt=me.charAt(++Et):Ot=Gt==="e"?" ":"0",(Lc=$e[Gt])&&(Gt=Lc(De,Ot)),ue.push(Gt),nt=Et+1);return ue.push(me.slice(nt,Et)),ue.join("")}}function D(me,$e){return function(De){var ue=fp(1900,void 0,1),Et=I(ue,me,De+="",0),nt,$t;if(Et!=De.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if($e&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(nt=D2(fp(ue.y,0,1)),$t=nt.getUTCDay(),nt=$t>4||$t===0?Av.ceil(nt):Av(nt),nt=xu.offset(nt,(ue.V-1)*7),ue.y=nt.getUTCFullYear(),ue.m=nt.getUTCMonth(),ue.d=nt.getUTCDate()+(ue.w+6)%7):(nt=C2(fp(ue.y,0,1)),$t=nt.getDay(),nt=$t>4||$t===0?wv.ceil(nt):wv(nt),nt=rs.offset(nt,(ue.V-1)*7),ue.y=nt.getFullYear(),ue.m=nt.getMonth(),ue.d=nt.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),$t="Z"in ue?D2(fp(ue.y,0,1)).getUTCDay():C2(fp(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-($t+5)%7:ue.w+ue.U*7-($t+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,D2(ue)):C2(ue)}}function I(me,$e,De,ue){for(var Et=0,nt=$e.length,$t=De.length,Gt,Ot;Et<nt;){if(ue>=$t)return-1;if(Gt=$e.charCodeAt(Et++),Gt===37){if(Gt=$e.charAt(Et++),Ot=w[Gt in G5?$e.charAt(Et++):Gt],!Ot||(ue=Ot(me,De,ue))<0)return-1}else if(Gt!=De.charCodeAt(ue++))return-1}return ue}function M(me,$e,De){var ue=u.exec($e.slice(De));return ue?(me.p=f.get(ue[0].toLowerCase()),De+ue[0].length):-1}function k(me,$e,De){var ue=g.exec($e.slice(De));return ue?(me.w=y.get(ue[0].toLowerCase()),De+ue[0].length):-1}function R(me,$e,De){var ue=d.exec($e.slice(De));return ue?(me.w=p.get(ue[0].toLowerCase()),De+ue[0].length):-1}function z(me,$e,De){var ue=x.exec($e.slice(De));return ue?(me.m=_.get(ue[0].toLowerCase()),De+ue[0].length):-1}function P(me,$e,De){var ue=v.exec($e.slice(De));return ue?(me.m=b.get(ue[0].toLowerCase()),De+ue[0].length):-1}function $(me,$e,De){return I(me,t,$e,De)}function N(me,$e,De){return I(me,n,$e,De)}function L(me,$e,De){return I(me,r,$e,De)}function B(me){return a[me.getDay()]}function q(me){return o[me.getDay()]}function H(me){return l[me.getMonth()]}function U(me){return s[me.getMonth()]}function Y(me){return i[+(me.getHours()>=12)]}function Q(me){return 1+~~(me.getMonth()/3)}function J(me){return a[me.getUTCDay()]}function de(me){return o[me.getUTCDay()]}function ve(me){return l[me.getUTCMonth()]}function we(me){return s[me.getUTCMonth()]}function Be(me){return i[+(me.getUTCHours()>=12)]}function Ve(me){return 1+~~(me.getUTCMonth()/3)}return{format:function(me){var $e=C(me+="",T);return $e.toString=function(){return me},$e},parse:function(me){var $e=D(me+="",!1);return $e.toString=function(){return me},$e},utcFormat:function(me){var $e=C(me+="",A);return $e.toString=function(){return me},$e},utcParse:function(me){var $e=D(me+="",!0);return $e.toString=function(){return me},$e}}}var G5={"-":"",_:" ",0:"0"},Mn=/^\s*\d+/,wK=/^%/,AK=/[\\^$*+?|[\]().{}]/g;function ft(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function TK(e){return e.replace(AK,"\\$&")}function dp(e){return new RegExp("^(?:"+e.map(TK).join("|")+")","i")}function hp(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function CK(e,t,n){var r=Mn.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function DK(e,t,n){var r=Mn.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function OK(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function IK(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function MK(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Y5(e,t,n){var r=Mn.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function W5(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function RK(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function kK(e,t,n){var r=Mn.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function NK(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function X5(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function FK(e,t,n){var r=Mn.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Q5(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function PK(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function $K(e,t,n){var r=Mn.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zK(e,t,n){var r=Mn.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function LK(e,t,n){var r=Mn.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function jK(e,t,n){var r=wK.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function UK(e,t,n){var r=Mn.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function BK(e,t,n){var r=Mn.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Z5(e,t){return ft(e.getDate(),t,2)}function VK(e,t){return ft(e.getHours(),t,2)}function HK(e,t){return ft(e.getHours()%12||12,t,2)}function qK(e,t){return ft(1+rs.count(ro(e),e),t,3)}function gz(e,t){return ft(e.getMilliseconds(),t,3)}function GK(e,t){return gz(e,t)+"000"}function YK(e,t){return ft(e.getMonth()+1,t,2)}function WK(e,t){return ft(e.getMinutes(),t,2)}function XK(e,t){return ft(e.getSeconds(),t,2)}function QK(e){var t=e.getDay();return t===0?7:t}function ZK(e,t){return ft(Hd.count(ro(e)-1,e),t,2)}function mz(e){var t=e.getDay();return t>=4||t===0?od(e):od.ceil(e)}function KK(e,t){return e=mz(e),ft(od.count(ro(e),e)+(ro(e).getDay()===4),t,2)}function JK(e){return e.getDay()}function eJ(e,t){return ft(wv.count(ro(e)-1,e),t,2)}function tJ(e,t){return ft(e.getFullYear()%100,t,2)}function nJ(e,t){return e=mz(e),ft(e.getFullYear()%100,t,2)}function rJ(e,t){return ft(e.getFullYear()%1e4,t,4)}function iJ(e,t){var n=e.getDay();return e=n>=4||n===0?od(e):od.ceil(e),ft(e.getFullYear()%1e4,t,4)}function aJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ft(t/60|0,"0",2)+ft(t%60,"0",2)}function K5(e,t){return ft(e.getUTCDate(),t,2)}function oJ(e,t){return ft(e.getUTCHours(),t,2)}function sJ(e,t){return ft(e.getUTCHours()%12||12,t,2)}function uJ(e,t){return ft(1+xu.count(io(e),e),t,3)}function yz(e,t){return ft(e.getUTCMilliseconds(),t,3)}function lJ(e,t){return yz(e,t)+"000"}function cJ(e,t){return ft(e.getUTCMonth()+1,t,2)}function fJ(e,t){return ft(e.getUTCMinutes(),t,2)}function dJ(e,t){return ft(e.getUTCSeconds(),t,2)}function hJ(e){var t=e.getUTCDay();return t===0?7:t}function pJ(e,t){return ft(qd.count(io(e)-1,e),t,2)}function vz(e){var t=e.getUTCDay();return t>=4||t===0?sd(e):sd.ceil(e)}function gJ(e,t){return e=vz(e),ft(sd.count(io(e),e)+(io(e).getUTCDay()===4),t,2)}function mJ(e){return e.getUTCDay()}function yJ(e,t){return ft(Av.count(io(e)-1,e),t,2)}function vJ(e,t){return ft(e.getUTCFullYear()%100,t,2)}function bJ(e,t){return e=vz(e),ft(e.getUTCFullYear()%100,t,2)}function SJ(e,t){return ft(e.getUTCFullYear()%1e4,t,4)}function xJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?sd(e):sd.ceil(e),ft(e.getUTCFullYear()%1e4,t,4)}function _J(){return"+0000"}function J5(){return"%"}function eP(e){return+e}function tP(e){return Math.floor(+e/1e3)}var Tf,VC,bz,HC,Sz;EJ({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function EJ(e){return Tf=pz(e),VC=Tf.format,bz=Tf.parse,HC=Tf.utcFormat,Sz=Tf.utcParse,Tf}function Lp(e){const t={};return n=>t[n]||(t[n]=e(n))}function wJ(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let o=AJ(r,i);const a=o<r.length?r.slice(o):"";for(;--o>i;)if(r[o]!=="0"){++o;break}return r.slice(0,o)+a}}function AJ(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function xz(e){const t=Lp(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=Kl(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return wJ(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,o,a){a=Kl(a??",f");const s=Cu(r,i,o),l=Math.max(Math.abs(r),Math.abs(i));let u;if(a.precision==null)switch(a.type){case"s":return isNaN(u=q8(s,l))||(a.precision=u),n(a,l);case"":case"e":case"g":case"p":case"r":{isNaN(u=G8(s,l))||(a.precision=u-(a.type==="e"));break}case"f":case"%":{isNaN(u=H8(s))||(a.precision=u-(a.type==="%")*2);break}}return t(a)}}}let hA;_z();function _z(){return hA=xz({format:sb,formatPrefix:zC})}function Ez(e){return xz(V8(e))}function Tv(e){return arguments.length?hA=Ez(e):hA}function nP(e,t,n){n=n||{},xe(n)||re(`Invalid time multi-format specifier: ${n}`);const r=t(Ui),i=t(pi),o=t(hi),a=t(Ur),s=t(pn),l=t(ar),u=t(jr),f=t(Bn),d=e(n[ga]||".%L"),p=e(n[Ui]||":%S"),g=e(n[pi]||"%I:%M"),y=e(n[hi]||"%I %p"),v=e(n[Ur]||n[tr]||"%a %d"),b=e(n[pn]||"%b %d"),x=e(n[ar]||"%B"),_=e(n[jr]||"%B"),T=e(n[Bn]||"%Y");return A=>(r(A)<A?d:i(A)<A?p:o(A)<A?g:a(A)<A?y:l(A)<A?s(A)<A?v:b:f(A)<A?u(A)<A?x:_:T)(A)}function wz(e){const t=Lp(e.format),n=Lp(e.utcFormat);return{timeFormat:r=>Ee(r)?t(r):nP(t,Gd,r),utcFormat:r=>Ee(r)?n(r):nP(n,Yd,r),timeParse:Lp(e.parse),utcParse:Lp(e.utcParse)}}let pA;Az();function Az(){return pA=wz({format:VC,parse:bz,utcFormat:HC,utcParse:Sz})}function Tz(e){return wz(pz(e))}function bg(e){return arguments.length?pA=Tz(e):pA}const gA=(e,t)=>qe({},e,t);function Cz(e,t){const n=e?Ez(e):Tv(),r=t?Tz(t):bg();return gA(n,r)}function qC(e,t){const n=arguments.length;return n&&n!==2&&re("defaultLocale expects either zero or two arguments."),n?gA(Tv(e),bg(t)):gA(Tv(),bg())}function TJ(){return _z(),Az(),qC()}const CJ=/^(data:|([A-Za-z]+:)?\/\/)/,DJ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,OJ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,rP="file://";function IJ(e,t){return n=>({options:n||{},sanitize:RJ,load:MJ,fileAccess:!1,file:kJ(),http:FJ(e)})}async function MJ(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function RJ(e,t){t=qe({},this.options,t);const n=this.fileAccess,r={href:null};let i,o,a;const s=DJ.test(e.replace(OJ,""));(e==null||typeof e!="string"||!s)&&re("Sanitize failure, invalid URI: "+pe(e));const l=CJ.test(e);return(a=t.baseURL)&&!l&&(!e.startsWith("/")&&!a.endsWith("/")&&(e="/"+e),e=a+e),o=(i=e.startsWith(rP))||t.mode==="file"||t.mode!=="http"&&!l&&n,i?e=e.slice(rP.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),o=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!o}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function kJ(e){return NJ}async function NJ(){re("No file system access.")}function FJ(e){return e?async function(t,n){const r=qe({},this.options.http,n),i=n&&n.response,o=await e(t,r);return o.ok?Ge(o[i])?o[i]():o.text():re(o.status+""+o.statusText)}:PJ}async function PJ(){re("No HTTP fetch method available.")}const $J=e=>e!=null&&e===e,zJ=e=>e==="true"||e==="false"||e===!0||e===!1,LJ=e=>!Number.isNaN(Date.parse(e)),Dz=e=>!Number.isNaN(+e)&&!(e instanceof Date),jJ=e=>Dz(e)&&Number.isInteger(+e),mA={boolean:NC,integer:nr,number:nr,date:FC,string:PC,unknown:ur},a0=[zJ,jJ,Dz,LJ],UJ=["boolean","integer","number","date"];function Oz(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=a0.length,i=a0.map((o,a)=>a+1);for(let o=0,a=0,s,l;o<n;++o)for(l=t?e[o][t]:e[o],s=0;s<r;++s)if(i[s]&&$J(l)&&!a0[s](l)&&(i[s]=0,++a,a===a0.length))return"string";return UJ[i.reduce((o,a)=>o===0?a:o,0)-1]}function Iz(e,t){return t.reduce((n,r)=>(n[r]=Oz(e,r),n),{})}function iP(e){const t=function(n,r){const i={delimiter:e};return GC(n,r?qe(r,i):i)};return t.responseType="text",t}function GC(e,t){return t.header&&(e=t.header.map(pe).join(t.delimiter)+`
`+e),xZ(t.delimiter).parse(e+"")}GC.responseType="text";function BJ(e){return typeof Buffer=="function"&&Ge(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function YC(e,t){const n=t&&t.property?Li(t.property):ur;return xe(e)&&!BJ(e)?VJ(n(e),t):n(JSON.parse(e))}YC.responseType="json";function VJ(e,t){return!ae(e)&&E8(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const HJ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function Mz(e,t){let n,r,i,o;return e=YC(e,t),t&&t.feature?(n=AZ,i=t.feature):t&&t.mesh?(n=CZ,i=t.mesh,o=HJ[t.filter]):re("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,o):re("Invalid TopoJSON object: "+i),r&&r.features||[r]}Mz.responseType="json";const H0={dsv:GC,csv:iP(","),tsv:iP("	"),json:YC,topojson:Mz};function WC(e,t){return arguments.length>1?(H0[e]=t,this):_e(H0,e)?H0[e]:null}function Rz(e){const t=WC(e);return t&&t.responseType||"text"}function kz(e,t,n,r){t=t||{};const i=WC(t.type||"json");return i||re("Unknown data format type: "+t.type),e=i(e,t),t.parse&&qJ(e,t.parse,n,r),_e(e,"columns")&&delete e.columns,e}function qJ(e,t,n,r){if(!e.length)return;const i=bg();n=n||i.timeParse,r=r||i.utcParse;let o=e.columns||Object.keys(e[0]),a,s,l,u,f,d;t==="auto"&&(t=Iz(e,o)),o=Object.keys(t);const p=o.map(g=>{const y=t[g];let v,b;if(y&&(y.startsWith("date:")||y.startsWith("utc:")))return v=y.split(/:(.+)?/,2),b=v[1],(b[0]==="'"&&b[b.length-1]==="'"||b[0]==='"'&&b[b.length-1]==='"')&&(b=b.slice(1,-1)),(v[0]==="utc"?r:n)(b);if(!mA[y])throw Error("Illegal format pattern: "+g+":"+y);return mA[y]});for(l=0,f=e.length,d=o.length;l<f;++l)for(a=e[l],u=0;u<d;++u)s=o[u],a[s]=p[u](a[s])}const hb=IJ(typeof fetch<"u"&&fetch);function pb(e){const t=e||ur,n=[],r={};return n.add=i=>{const o=t(i);return r[o]||(r[o]=1,n.push(i)),n},n.remove=i=>{const o=t(i);if(r[o]){r[o]=0;const a=n.indexOf(i);a>=0&&n.splice(a,1)}return n},n}async function q0(e,t){try{await t(e)}catch(n){e.error(n)}}const Nz=Symbol("vega_id");let GJ=1;function gb(e){return!!(e&&Re(e))}function Re(e){return e[Nz]}function Fz(e,t){return e[Nz]=t,e}function gt(e){const t=e===Object(e)?e:{data:e};return Re(t)?t:Fz(t,GJ++)}function XC(e){return mb(e,gt({}))}function mb(e,t){for(const n in e)t[n]=e[n];return t}function Pz(e,t){return Fz(t,Re(e))}function Ec(e,t){return e?t?(n,r)=>e(n,r)||Re(t(n))-Re(t(r)):(n,r)=>e(n,r)||Re(n)-Re(r):null}function $z(e){return e&&e.constructor===wc}function wc(){const e=[],t=[],n=[],r=[],i=[];let o=null,a=!1;return{constructor:wc,insert(s){const l=Se(s),u=l.length;for(let f=0;f<u;++f)e.push(l[f]);return this},remove(s){const l=Ge(s)?r:t,u=Se(s),f=u.length;for(let d=0;d<f;++d)l.push(u[d]);return this},modify(s,l,u){const f={field:l,value:lr(u)};return Ge(s)?(f.filter=s,i.push(f)):(f.tuple=s,n.push(f)),this},encode(s,l){return Ge(s)?i.push({filter:s,field:l}):n.push({tuple:s,field:l}),this},clean(s){return o=s,this},reflow(){return a=!0,this},pulse(s,l){const u={},f={};let d,p,g,y,v,b;for(d=0,p=l.length;d<p;++d)u[Re(l[d])]=1;for(d=0,p=t.length;d<p;++d)v=t[d],u[Re(v)]=-1;for(d=0,p=r.length;d<p;++d)y=r[d],l.forEach(_=>{y(_)&&(u[Re(_)]=-1)});for(d=0,p=e.length;d<p;++d)v=e[d],b=Re(v),u[b]?u[b]=1:s.add.push(gt(e[d]));for(d=0,p=l.length;d<p;++d)v=l[d],u[Re(v)]<0&&s.rem.push(v);function x(_,T,A){A?_[T]=A(_):s.encode=T,a||(f[Re(_)]=_)}for(d=0,p=n.length;d<p;++d)g=n[d],v=g.tuple,y=g.field,b=u[Re(v)],b>0&&(x(v,y,g.value),s.modifies(y));for(d=0,p=i.length;d<p;++d)g=i[d],y=g.filter,l.forEach(_=>{y(_)&&u[Re(_)]>0&&x(_,g.field,g.value)}),s.modifies(g.field);if(a)s.mod=t.length||r.length?l.filter(_=>u[Re(_)]>0):l.slice();else for(b in f)s.mod.push(f[b]);return(o||o==null&&(t.length||r.length))&&s.clean(!0),s}}}const G0="_:mod:_";function yb(){Object.defineProperty(this,G0,{writable:!0,value:{}})}yb.prototype={set(e,t,n,r){const i=this,o=i[e],a=i[G0];return t!=null&&t>=0?(o[t]!==n||r)&&(o[t]=n,a[t+":"+e]=-1,a[e]=-1):(o!==n||r)&&(i[e]=n,a[e]=ae(n)?1+n.length:-1),i},modified(e,t){const n=this[G0];if(arguments.length){if(ae(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[G0]={},this}};let YJ=0;const WJ="pulse",XJ=new yb,QJ=1,ZJ=2;function Mt(e,t,n,r){this.id=++YJ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function aP(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Mt.prototype={targets(){return this._targets||(this._targets=pb(Xg))},set(e){return this.value!==e?(this.value=e,1):0},skip:aP(QJ),modified:aP(ZJ),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new yb,i=this._argops=this._argops||[],o=[];let a,s,l,u;const f=(d,p,g)=>{g instanceof Mt?(g!==this&&(t&&g.targets().add(this),o.push(g)),i.push({op:g,name:d,index:p})):r.set(d,p,g)};for(a in e)if(s=e[a],a===WJ)Se(s).forEach(d=>{d instanceof Mt?d!==this&&(d.targets().add(this),o.push(d)):re("Pulse parameters must be operator instances.")}),this.source=s;else if(ae(s))for(r.set(a,-1,Array(l=s.length)),u=0;u<l;++u)f(a,u,s[u]);else f(a,-1,s);return this.marshall().clear(),n&&(i.initonly=!0),o},marshall(e){const t=this._argval||XJ,n=this._argops;let r,i,o,a;if(n){const s=n.length;for(i=0;i<s;++i)r=n[i],o=r.op,a=o.modified()&&o.stamp===e,t.set(r.name,r.index,o.value,a);if(n.initonly){for(i=0;i<s;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function KJ(e,t,n,r){let i=1,o;return e instanceof Mt?o=e:e&&e.prototype instanceof Mt?o=new e:Ge(e)?o=new Mt(null,e):(i=0,o=new Mt(e,t)),this.rank(o),i&&(r=n,n=t),n&&this.connect(o,o.parameters(n,r)),this.touch(o),o}function JJ(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let eee=0;function vb(e,t,n){this.id=++eee,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function tu(e,t,n){return new vb(e,t,n)}vb.prototype={_filter:ji,_apply:ur,targets(){return this._targets||(this._targets=pb(Xg))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=tu(e);return this.targets().add(t),t},apply(e){const t=tu(null,e);return this.targets().add(t),t},merge(){const e=tu();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=tu();return this.targets().add(tu(null,null,MC(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(tu(null,null,()=>n=!0)),t.targets().add(tu(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=ji,this._targets=null}};function tee(e,t,n,r){const i=this,o=tu(n,r),a=function(u){u.dataflow=i;try{o.receive(u)}catch(f){i.error(f)}finally{i.run()}};let s;typeof e=="string"&&typeof document<"u"?s=document.querySelectorAll(e):s=Se(e);const l=s.length;for(let u=0;u<l;++u)s[u].addEventListener(t,a);return o}function nee(e,t){const n=this.locale();return kz(e,t,n.timeParse,n.utcParse)}function ree(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function iee(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:Rz(t&&t.type)});try{i=n.parse(i,t)}catch(o){r=-2,n.warn("Data ingestion failed",e,o)}}catch(o){r=-1,n.warn("Loading failed",e,o)}return{data:i,status:r}}async function aee(e,t,n){const r=this,i=r._pending||oee(r);i.requests+=1;const o=await r.request(t,n);return r.pulse(e,r.changeset().remove(ji).insert(o.data||[])),i.done(),o}function oee(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const see={skip:!0};function uee(e,t,n,r,i){return(e instanceof Mt?cee:lee)(this,e,t,n,r,i),this}function lee(e,t,n,r,i,o){const a=qe({},o,see);let s,l;Ge(n)||(n=lr(n)),r===void 0?s=u=>e.touch(n(u)):Ge(r)?(l=new Mt(null,r,i,!1),s=u=>{l.evaluate(u);const f=n(u),d=l.value;$z(d)?e.pulse(f,d,o):e.update(f,d,a)}):s=u=>e.update(n(u),r,a),t.apply(s)}function cee(e,t,n,r,i,o){if(r===void 0)t.targets().add(n);else{const a=o||{},s=new Mt(null,fee(n,r),i,!1);s.modified(a.force),s.rank=t.rank,t.targets().add(s),n&&(s.skip(!0),s.value=n.value,s.targets().add(n),e.connect(n,[s]))}}function fee(e,t){return t=Ge(t)?t:lr(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function dee(e){e.rank=++this._rank}function hee(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&re("Cycle detected in dataflow graph.")}const Cv={},Ba=1,iu=2,qo=4,pee=Ba|iu,oP=Ba|qo,Cf=Ba|iu|qo,sP=8,pp=16,uP=32,lP=64;function _u(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function O2(e,t){const n=[];return ru(e,t,r=>n.push(r)),n}function cP(e,t){const n={};return e.visit(t,r=>{n[Re(r)]=1}),r=>n[Re(r)]?null:r}function o0(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}_u.prototype={StopPropagation:Cv,ADD:Ba,REM:iu,MOD:qo,ADD_REM:pee,ADD_MOD:oP,ALL:Cf,REFLOW:sP,SOURCE:pp,NO_SOURCE:uP,NO_FIELDS:lP,fork(e){return new _u(this.dataflow).init(this,e)},clone(){const e=this.fork(Cf);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(Cf|pp)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new _u(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&lP)&&(n.fields=e.fields),t&Ba?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&iu?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&qo?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&uP?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||Cf;return t&Ba&&this.add.length||t&iu&&this.rem.length||t&qo&&this.mod.length},reflow(e){if(e)return this.fork(Cf).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(qo,cP(this,Ba))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return ae(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?ae(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ba&&(n.addF=o0(n.addF,t)),e&iu&&(n.remF=o0(n.remF,t)),e&qo&&(n.modF=o0(n.modF,t)),e&pp&&(n.srcF=o0(n.srcF,t)),n},materialize(e){e=e||Cf;const t=this;return e&Ba&&t.addF&&(t.add=O2(t.add,t.addF),t.addF=null),e&iu&&t.remF&&(t.rem=O2(t.rem,t.remF),t.remF=null),e&qo&&t.modF&&(t.mod=O2(t.mod,t.modF),t.modF=null),e&pp&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&pp)return ru(n.source,n.srcF,r),n;e&Ba&&ru(n.add,n.addF,r),e&iu&&ru(n.rem,n.remF,r),e&qo&&ru(n.mod,n.modF,r);const i=n.source;if(e&sP&&i){const o=n.add.length+n.mod.length;o===i.length||(o?ru(i,cP(n,oP),r):ru(i,n.srcF,r))}return n}};function QC(e,t,n,r){const i=this;let o=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const a of n)if(a.stamp===t){if(a.fields){const s=i.fields||(i.fields={});for(const l in a.fields)s[l]=1}a.changed(i.ADD)&&(o|=i.ADD),a.changed(i.REM)&&(o|=i.REM),a.changed(i.MOD)&&(o|=i.MOD)}this.changes=o}ye(QC,_u,{fork(e){const t=new _u(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?ae(e)?e.some(r=>n[r]):n[e]:0},filter(){re("MultiPulse does not support filtering.")},materialize(){re("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let o=0;if(e&n.SOURCE)for(;o<i;++o)r[o].visit(e,t);else for(;o<i;++o)r[o].stamp===n.stamp&&r[o].visit(e,t);return n}});async function gee(e,t,n){const r=this,i=[];if(r._pulse)return zz(r);if(r._pending&&await r._pending,t&&await q0(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const o=++r._clock;r._pulse=new _u(r,o,e),r._touched.forEach(f=>r._enqueue(f,!0)),r._touched=pb(Xg);let a=0,s,l,u;try{for(;r._heap.size()>0;){if(s=r._heap.pop(),s.rank!==s.qrank){r._enqueue(s,!0);continue}l=s.run(r._getPulse(s,e)),l.then?l=await l:l.async&&(i.push(l.async),l=Cv),l!==Cv&&s._targets&&s._targets.forEach(f=>r._enqueue(f)),++a}}catch(f){r._heap.clear(),u=f}if(r._input={},r._pulse=null,r.debug(`Pulse ${o}: ${a} operators`),u&&(r._postrun=[],r.error(u)),r._postrun.length){const f=r._postrun.sort((d,p)=>p.priority-d.priority);r._postrun=[];for(let d=0;d<f.length;++d)await q0(r,f[d].callback)}return n&&await q0(r,n),i.length&&Promise.all(i).then(f=>r.runAsync(null,()=>{f.forEach(d=>{try{d(r)}catch(p){r.error(p)}})})),r}async function mee(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function yee(e,t,n){return this._pulse?zz(this):(this.evaluate(e,t,n),this)}function vee(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function zz(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function bee(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function See(e,t){const n=e.source,r=this._clock;return n&&ae(n)?new QC(this,r,n.map(i=>i.pulse),t):this._input[e.id]||xee(this._pulse,n&&n.pulse)}function xee(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==Cv&&(e.source=t.source),e)}const ZC={skip:!1,force:!1};function _ee(e,t){const n=t||ZC;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function Eee(e,t,n){const r=n||ZC;return(e.set(t)||r.force)&&this.touch(e,r),this}function wee(e,t,n){this.touch(e,n||ZC);const r=new _u(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function Aee(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),Lz(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,Tee(t,0,e)):r=n,r}}}function Lz(e,t,n,r){let i,o;const a=e[n];for(;n>t;){if(o=n-1>>1,i=e[o],r(a,i)<0){e[n]=i,n=o;continue}break}return e[n]=a}function Tee(e,t,n){const r=t,i=e.length,o=e[t];let a=(t<<1)+1,s;for(;a<i;)s=a+1,s<i&&n(e[a],e[s])>=0&&(a=s),e[t]=e[a],t=a,a=(t<<1)+1;return e[t]=o,Lz(e,r,t,n)}function Wf(){this.logger(TC()),this.logLevel(wC),this._clock=0,this._rank=0,this._locale=qC();try{this._loader=hb()}catch{}this._touched=pb(Xg),this._input={},this._pulse=null,this._heap=Aee((e,t)=>e.qrank-t.qrank),this._postrun=[]}function gp(e){return function(){return this._log[e].apply(this,arguments)}}Wf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:gp("error"),warn:gp("warn"),info:gp("info"),debug:gp("debug"),logLevel:gp("level"),cleanThreshold:1e4,add:KJ,connect:JJ,rank:dee,rerank:hee,pulse:wee,touch:_ee,update:Eee,changeset:wc,ingest:ree,parse:nee,preload:aee,request:iee,events:tee,on:uee,evaluate:gee,run:yee,runAsync:mee,runAfter:vee,_enqueue:bee,_getPulse:See};function te(e,t){Mt.call(this,e,null,t)}ye(te,Mt,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const ld={};function jz(e){const t=Uz(e);return t&&t.Definition||null}function Uz(e){return e=e&&e.toLowerCase(),_e(ld,e)?ld[e]:null}function*Bz(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function KC(e,t,n){const r=Float64Array.from(Bz(e,n));return r.sort(ns),t.map(i=>z8(r,i))}function JC(e,t){return KC(e,[.25,.5,.75],t)}function eD(e,t){const n=e.length,r=FZ(e,t),i=JC(e,t),o=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,o)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Vz(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let o=e.extent[0],a=e.extent[1],s,l,u,f,d,p;const g=e.span||a-o||Math.abs(o)||1;if(e.step)s=e.step;else if(e.steps){for(f=g/t,d=0,p=e.steps.length;d<p&&e.steps[d]<f;++d);s=e.steps[Math.max(0,d-1)]}else{for(l=Math.ceil(Math.log(t)/r),u=e.minstep||0,s=Math.max(u,Math.pow(n,Math.round(Math.log(g)/r)-l));Math.ceil(g/s)>t;)s*=n;for(d=0,p=i.length;d<p;++d)f=s/i[d],f>=u&&g/f<=t&&(s=f)}f=Math.log(s);const y=f>=0?0:~~(-f/r)+1,v=Math.pow(n,-y-1);return(e.nice||e.nice===void 0)&&(f=Math.floor(o/s+v)*s,o=o<f?f-s:f,a=Math.ceil(a/s)*s),{start:o,stop:a===o?o+s:a,step:s}}var Bi=Math.random;function Cee(e){Bi=e}function Hz(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(Bz(e,r)),o=i.length,a=t;let s,l,u,f;for(u=0,f=Array(a);u<a;++u){for(s=0,l=0;l<o;++l)s+=i[~~(Bi()*o)];f[u]=s/o}return f.sort(ns),[sA(f,n/2),sA(f,1-n/2)]}function qz(e,t,n,r){r=r||(p=>p);const i=e.length,o=new Float64Array(i);let a=0,s=1,l=r(e[0]),u=l,f=l+t,d;for(;s<i;++s){if(d=r(e[s]),d>=f){for(u=(l+u)/2;a<s;++a)o[a]=u;f=d+t,l=d}u=d}for(u=(l+u)/2;a<s;++a)o[a]=u;return n?Dee(o,t+t/4):o}function Dee(e,t){const n=e.length;let r=0,i=1,o,a;for(;e[r]===e[i];)++i;for(;i<n;){for(o=i+1;e[i]===e[o];)++o;if(e[i]-e[i-1]<t){for(a=i+(r+o-i-i>>1);a<i;)e[a++]=e[i];for(;a>i;)e[a--]=e[r]}r=i,i=o}return e}function Oee(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function Iee(e,t){t==null&&(t=e,e=0);let n,r,i;const o={min(a){return arguments.length?(n=a||0,i=r-n,o):n},max(a){return arguments.length?(r=a||0,i=r-n,o):r},sample(){return n+Math.floor(i*Bi())},pdf(a){return a===Math.floor(a)&&a>=n&&a<r?1/i:0},cdf(a){const s=Math.floor(a);return s<n?0:s>=r?1:(s-n+1)/i},icdf(a){return a>=0&&a<=1?n-1+Math.floor(a*i):NaN}};return o.min(e).max(t)}const Gz=Math.sqrt(2*Math.PI),Mee=Math.SQRT2;let mp=NaN;function bb(e,t){e=e||0,t=t??1;let n=0,r=0,i,o;if(mp===mp)n=mp,mp=NaN;else{do n=Bi()*2-1,r=Bi()*2-1,i=n*n+r*r;while(i===0||i>1);o=Math.sqrt(-2*Math.log(i)/i),n*=o,mp=r*o}return e+n*t}function tD(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*Gz)}function Sb(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let o;if(i>37)o=0;else{const a=Math.exp(-i*i/2);let s;i<7.07106781186547?(s=.0352624965998911*i+.700383064443688,s=s*i+6.37396220353165,s=s*i+33.912866078383,s=s*i+112.079291497871,s=s*i+221.213596169931,s=s*i+220.206867912376,o=a*s,s=.0883883476483184*i+1.75566716318264,s=s*i+16.064177579207,s=s*i+86.7807322029461,s=s*i+296.564248779674,s=s*i+637.333633378831,s=s*i+793.826512519948,s=s*i+440.413735824752,o=o/s):(s=i+.65,s=i+4/s,s=i+3/s,s=i+2/s,s=i+1/s,o=a/s/2.506628274631)}return r>0?1-o:o}function xb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Mee*Ree(2*e-1)}function Ree(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function nD(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>bb(n,r),pdf:o=>tD(o,n,r),cdf:o=>Sb(o,n,r),icdf:o=>xb(o,n,r)};return i.mean(e).stdev(t)}function rD(e,t){const n=nD();let r=0;const i={data(o){return arguments.length?(e=o,r=o?o.length:0,i.bandwidth(t)):e},bandwidth(o){return arguments.length?(t=o,!t&&e&&(t=eD(e)),i):t},sample(){return e[~~(Bi()*r)]+t*n.sample()},pdf(o){let a=0,s=0;for(;s<r;++s)a+=n.pdf((o-e[s])/t);return a/t/r},cdf(o){let a=0,s=0;for(;s<r;++s)a+=n.cdf((o-e[s])/t);return a/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function iD(e,t){return e=e||0,t=t??1,Math.exp(e+bb()*t)}function aD(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*Gz*e)}function oD(e,t,n){return Sb(Math.log(e),t,n)}function sD(e,t,n){return Math.exp(xb(e,t,n))}function Yz(e,t){let n,r;const i={mean(o){return arguments.length?(n=o||0,i):n},stdev(o){return arguments.length?(r=o??1,i):r},sample:()=>iD(n,r),pdf:o=>aD(o,n,r),cdf:o=>oD(o,n,r),icdf:o=>sD(o,n,r)};return i.mean(e).stdev(t)}function Wz(e,t){let n=0,r;function i(a){const s=[];let l=0,u;for(u=0;u<n;++u)l+=s[u]=a[u]==null?1:+a[u];for(u=0;u<n;++u)s[u]/=l;return s}const o={weights(a){return arguments.length?(r=i(t=a||[]),o):t},distributions(a){return arguments.length?(a?(n=a.length,e=a):(n=0,e=[]),o.weights(t)):e},sample(){const a=Bi();let s=e[n-1],l=r[0],u=0;for(;u<n-1;l+=r[++u])if(a<l){s=e[u];break}return s.sample()},pdf(a){let s=0,l=0;for(;l<n;++l)s+=r[l]*e[l].pdf(a);return s},cdf(a){let s=0,l=0;for(;l<n;++l)s+=r[l]*e[l].cdf(a);return s},icdf(){throw Error("Mixture icdf not supported.")}};return o.distributions(e).weights(t)}function uD(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Bi()}function lD(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function cD(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function fD(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function Xz(e,t){let n,r;const i={min(o){return arguments.length?(n=o||0,i):n},max(o){return arguments.length?(r=o??1,i):r},sample:()=>uD(n,r),pdf:o=>lD(o,n,r),cdf:o=>cD(o,n,r),icdf:o=>fD(o,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function dD(e,t,n){let r=0,i=0;for(const o of e){const a=n(o);t(o)==null||a==null||isNaN(a)||(r+=(a-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function Kg(e,t,n,r){const i=r-e*e,o=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-o*e,o]}function _b(e,t,n,r){e=e.filter(g=>{let y=t(g),v=n(g);return y!=null&&(y=+y)>=y&&v!=null&&(v=+v)>=v}),r&&e.sort((g,y)=>t(g)-t(y));const i=e.length,o=new Float64Array(i),a=new Float64Array(i);let s=0,l=0,u=0,f,d,p;for(p of e)o[s]=f=+t(p),a[s]=d=+n(p),++s,l+=(f-l)/s,u+=(d-u)/s;for(s=0;s<i;++s)o[s]-=l,a[s]-=u;return[o,a,l,u]}function Jg(e,t,n,r){let i=-1,o,a;for(const s of e)o=t(s),a=n(s),o!=null&&(o=+o)>=o&&a!=null&&(a=+a)>=a&&r(o,a,++i)}function Wd(e,t,n,r,i){let o=0,a=0;return Jg(e,t,n,(s,l)=>{const u=l-i(s),f=l-r;o+=u*u,a+=f*f}),1-o/a}function hD(e,t,n){let r=0,i=0,o=0,a=0,s=0;Jg(e,t,n,(f,d)=>{++s,r+=(f-r)/s,i+=(d-i)/s,o+=(f*d-o)/s,a+=(f*f-a)/s});const l=Kg(r,i,o,a),u=f=>l[0]+l[1]*f;return{coef:l,predict:u,rSquared:Wd(e,t,n,i,u)}}function Qz(e,t,n){let r=0,i=0,o=0,a=0,s=0;Jg(e,t,n,(f,d)=>{++s,f=Math.log(f),r+=(f-r)/s,i+=(d-i)/s,o+=(f*d-o)/s,a+=(f*f-a)/s});const l=Kg(r,i,o,a),u=f=>l[0]+l[1]*Math.log(f);return{coef:l,predict:u,rSquared:Wd(e,t,n,i,u)}}function Zz(e,t,n){const[r,i,o,a]=_b(e,t,n);let s=0,l=0,u=0,f=0,d=0,p,g,y;Jg(e,t,n,(_,T)=>{p=r[d++],g=Math.log(T),y=p*T,s+=(T*g-s)/d,l+=(y-l)/d,u+=(y*g-u)/d,f+=(p*y-f)/d});const[v,b]=Kg(l/a,s/a,u/a,f/a),x=_=>Math.exp(v+b*(_-o));return{coef:[Math.exp(v-b*o),b],predict:x,rSquared:Wd(e,t,n,a,x)}}function Kz(e,t,n){let r=0,i=0,o=0,a=0,s=0,l=0;Jg(e,t,n,(d,p)=>{const g=Math.log(d),y=Math.log(p);++l,r+=(g-r)/l,i+=(y-i)/l,o+=(g*y-o)/l,a+=(g*g-a)/l,s+=(p-s)/l});const u=Kg(r,i,o,a),f=d=>u[0]*Math.pow(d,u[1]);return u[0]=Math.exp(u[0]),{coef:u,predict:f,rSquared:Wd(e,t,n,s,f)}}function pD(e,t,n){const[r,i,o,a]=_b(e,t,n),s=r.length;let l=0,u=0,f=0,d=0,p=0,g,y,v,b;for(g=0;g<s;)y=r[g],v=i[g++],b=y*y,l+=(b-l)/g,u+=(b*y-u)/g,f+=(b*b-f)/g,d+=(y*v-d)/g,p+=(b*v-p)/g;const x=f-l*l,_=l*x-u*u,T=(p*l-d*u)/_,A=(d*x-p*u)/_,w=-T*l,C=D=>(D=D-o,T*D*D+A*D+w+a);return{coef:[w-A*o+T*o*o+a,A-2*T*o,T],predict:C,rSquared:Wd(e,t,n,a,C)}}function Jz(e,t,n,r){if(r===0)return dD(e,t,n);if(r===1)return hD(e,t,n);if(r===2)return pD(e,t,n);const[i,o,a,s]=_b(e,t,n),l=i.length,u=[],f=[],d=r+1;let p,g,y,v,b;for(p=0;p<d;++p){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p)*o[y];for(u.push(v),b=new Float64Array(d),g=0;g<d;++g){for(y=0,v=0;y<l;++y)v+=Math.pow(i[y],p+g);b[g]=v}f.push(b)}f.push(u);const x=Nee(f),_=T=>{T-=a;let A=s+x[0]+x[1]*T+x[2]*T*T;for(p=3;p<d;++p)A+=x[p]*Math.pow(T,p);return A};return{coef:kee(d,x,-a,s),predict:_,rSquared:Wd(e,t,n,s,_)}}function kee(e,t,n,r){const i=Array(e);let o,a,s,l;for(o=0;o<e;++o)i[o]=0;for(o=e-1;o>=0;--o)for(s=t[o],l=1,i[o]+=s,a=1;a<=o;++a)l*=(o+1-a)/a,i[o-a]+=s*Math.pow(n,a)*l;return i[0]+=r,i}function Nee(e){const t=e.length-1,n=[];let r,i,o,a,s;for(r=0;r<t;++r){for(a=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][a])&&(a=i);for(o=r;o<t+1;++o)s=e[o][r],e[o][r]=e[o][a],e[o][a]=s;for(i=r+1;i<t;++i)for(o=t;o>=r;o--)e[o][i]-=e[o][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(s=0,o=i+1;o<t;++o)s+=e[o][i]*n[o];n[i]=(e[t][i]-s)/e[i][i]}return n}const fP=2,dP=1e-12;function e7(e,t,n,r){const[i,o,a,s]=_b(e,t,n,!0),l=i.length,u=Math.max(2,~~(r*l)),f=new Float64Array(l),d=new Float64Array(l),p=new Float64Array(l).fill(1);for(let g=-1;++g<=fP;){const y=[0,u-1];for(let b=0;b<l;++b){const x=i[b],_=y[0],T=y[1],A=x-i[_]>i[T]-x?_:T;let w=0,C=0,D=0,I=0,M=0;const k=1/Math.abs(i[A]-x||1);for(let P=_;P<=T;++P){const $=i[P],N=o[P],L=Fee(Math.abs(x-$)*k)*p[P],B=$*L;w+=L,C+=B,D+=N*L,I+=N*B,M+=$*B}const[R,z]=Kg(C/w,D/w,I/w,M/w);f[b]=R+z*x,d[b]=Math.abs(o[b]-f[b]),Pee(i,b+1,y)}if(g===fP)break;const v=L8(d);if(Math.abs(v)<dP)break;for(let b=0,x,_;b<l;++b)x=d[b]/(6*v),p[b]=x>=1?dP:(_=1-x*x)*_}return $ee(i,f,a,s)}function Fee(e){return(e=1-e*e*e)*e*e}function Pee(e,t,n){const r=e[t];let i=n[0],o=n[1]+1;if(!(o>=e.length))for(;t>i&&e[o]-r<=r-e[i];)n[0]=++i,n[1]=o,++o}function $ee(e,t,n,r){const i=e.length,o=[];let a=0,s=0,l=[],u;for(;a<i;++a)u=e[a]+n,l[0]===u?l[1]+=(t[a]-l[1])/++s:(s=0,l[1]+=r,l=[u,t[a]],o.push(l));return l[1]+=r,o}const zee=.5*Math.PI/180;function Eb(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=v=>[v,e(v)],o=t[0],a=t[1],s=a-o,l=s/r,u=[i(o)],f=[];if(n===r){for(let v=1;v<r;++v)u.push(i(o+v/n*s));return u.push(i(a)),u}else{f.push(i(a));for(let v=n;--v>0;)f.push(i(o+v/n*s))}let d=u[0],p=f[f.length-1];const g=1/s,y=Lee(d[1],f);for(;p;){const v=i((d[0]+p[0])/2);v[0]-d[0]>=l&&jee(d,v,p,g,y)>zee?f.push(v):(d=p,u.push(p),f.pop()),p=f[f.length-1]}return u}function Lee(e,t){let n=e,r=e;const i=t.length;for(let o=0;o<i;++o){const a=t[o][1];a<n&&(n=a),a>r&&(r=a)}return 1/(r-n)}function jee(e,t,n,r,i){const o=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),a=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(o-a)}function Uee(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function yA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Uee(e)}function t7(e,t,n){return n||e+(t?"_"+t:"")}const I2=()=>{},Bee={init:I2,add:I2,rem:I2,idx:0},Sg={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},em=Object.keys(Sg).filter(e=>e!=="__count__");function Vee(e,t){return(n,r)=>qe({name:e,aggregate_param:r,out:n||e},Bee,t)}[...em,"__count__"].forEach(e=>{Sg[e]=Vee(e,Sg[e])});function n7(e,t,n){return Sg[e](n,t)}function r7(e,t){return e.idx-t.idx}function Hee(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=Sg[i]())})};return e.forEach(n),Object.values(t).sort(r7)}function qee(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Gee(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Yee(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Wee(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function i7(e,t){const n=t||ur,r=Hee(e),i=e.slice().sort(r7);function o(a){this._ops=r,this._out=i,this.cell=a,this.init()}return o.prototype.init=qee,o.prototype.add=Gee,o.prototype.rem=Yee,o.prototype.set=Wee,o.prototype.get=n,o.fields=e.map(a=>a.out),o}function gD(e){this._key=e?Li(e):Re,this.reset()}const Hn=gD.prototype;Hn.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Hn.add=function(e){this._add.push(e)};Hn.rem=function(e){this._rem.push(e)};Hn.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,o=Array(r-i),a={};let s,l,u;for(s=0;s<i;++s)a[n(t[s])]=1;for(s=0,l=0;s<r;++s)a[n(u=e[s])]?a[n(u)]=0:o[l++]=u;return this._rem=[],this._add=o};Hn.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,o;for(;--r>=0;)o=e(t[r])+"",_e(n,o)||(n[o]=1,++i);return i};Hn.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=x8(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Hn.argmin=function(e){return this.extent(e)[0]||{}};Hn.argmax=function(e){return this.extent(e)[1]||{}};Hn.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Hn.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Hn.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=JC(this.values(),e),this._get=e),this._q};Hn.q1=function(e){return this.quartile(e)[0]};Hn.q2=function(e){return this.quartile(e)[1]};Hn.q3=function(e){return this.quartile(e)[2]};Hn.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=Hz(this.values(),1e3,.05,e),this._get=e),this._ci};Hn.ci0=function(e){return this.ci(e)[0]};Hn.ci1=function(e){return this.ci(e)[1]};function Du(e){te.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Du.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:em},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ye(Du,te,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,o=>n.add(o))):(n.value=n.value||n.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function o(s){let l,u,f,d;for(l in s)for(f=s[l].tuple,u=0;u<i;++u)r[u][d=f[n[u]]]=d}o(e._prev),o(t);function a(s,l,u){const f=n[u],d=r[u++];for(const p in d){const g=s?s+"|"+p:p;l[f]=d[p],u<i?a(g,l,u):t[g]||e.cell(g,l)}}a("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(_){const T=Se(ir(_)),A=T.length;let w=0,C;for(;w<A;++w)r[C=T[w]]||(r[C]=1,t.push(C))}this._dims=Se(e.groupby),this._dnames=this._dims.map(_=>{const T=Kt(_);return i(_),n.push(T),T}),this.cellkey=e.key?e.key:yA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const o=e.fields||[null],a=e.ops||["count"],s=e.aggregate_params||[null],l=e.as||[],u=o.length,f={};let d,p,g,y,v,b,x;for(u!==a.length&&re("Unmatched number of fields and aggregate ops."),x=0;x<u;++x){if(d=o[x],p=a[x],g=s[x]||null,d==null&&p!=="count"&&re("Null aggregate field specified."),v=Kt(d),b=t7(p,v,l[x]),n.push(b),p==="count"){this._counts.push(b);continue}y=f[v],y||(i(d),y=f[v]=[],y.field=d,this._measures.push(y)),p!=="count"&&(this._countOnly=!1),y.push(n7(p,g,b))}return this._measures=this._measures.map(_=>i7(_,_.field)),Object.create(null)},cellkey:yA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let o=0;o<i;++o)n.agg[o]=new r[o](n)}return n.store&&(n.data=new gD),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,o={};for(let a=0;a<i;++a)o[n[a]]=r[a](e);return t?Pz(t.tuple,o):gt(o)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,o=r.length;i<o;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,o=r.length;i<o;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,o=e.add,a=e.rem,s=e.mod;let l,u,f,d;if(r)for(u in r)l=r[u],(!i||l.num)&&a.push(l.tuple);for(f=0,d=this._alen;f<d;++f)o.push(this.celltuple(t[f])),t[f]=null;for(f=0,d=this._mlen;f<d;++f)l=n[f],(l.num===0&&i?a:s).push(this.celltuple(l)),n[f]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Xee=1e-14;function mD(e){te.call(this,null,e)}mD.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ye(mD,te,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,o=r.step,a=e.as||["bin0","bin1"],s=a[0],l=a[1];let u;return e.modified()?(t=t.reflow(!0),u=t.SOURCE):u=t.modified(ir(e.field))?t.ADD_MOD:t.ADD,t.visit(u,n?f=>{const d=r(f);f[s]=d,f[l]=d==null?null:i+o*(1+(d-i)/o)}:f=>f[s]=r(f)),t.modifies(n?a:s)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Vz(e),r=n.step;let i=n.start,o=i+Math.ceil((n.stop-i)/r)*r,a,s;(a=e.anchor)!=null&&(s=a-(i+r*Math.floor((a-i)/r)),i+=s,o+=s);const l=function(u){let f=nr(t(u));return f==null?null:f<i?-1/0:f>o?1/0:(f=Math.max(i,Math.min(f,o-r)),i+r*Math.floor(Xee+(f-i)/r))};return l.start=i,l.stop=n.stop,l.step=r,this.value=Gr(l,ir(t),e.name||"bin_"+Kt(t))}});function a7(e,t,n){const r=e;let i=t||[],o=n||[],a={},s=0;return{add:l=>o.push(l),remove:l=>a[r(l)]=++s,size:()=>i.length,data:(l,u)=>(s&&(i=i.filter(f=>!a[r(f)]),a={},s=0),u&&l&&i.sort(l),o.length&&(i=l?T8(l,i,o.sort(l)):i.concat(o),o=[]),i)}}function yD(e){te.call(this,[],e)}yD.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ye(yD,te,{transform(e,t){const n=t.fork(t.ALL),r=a7(Re,this.value,n.materialize(n.ADD).add),i=e.sort,o=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(o),this.value=n.source=r.data(Ec(i),o),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function o7(e){Mt.call(this,null,Qee,e)}ye(o7,Mt);function Qee(e){return this.value&&!e.modified()?this.value:IC(e.fields,e.orders)}function vD(e){te.call(this,null,e)}vD.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Zee(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ye(vD,te,{transform(e,t){const n=d=>p=>{for(var g=Zee(s(p),e.case,o)||[],y,v=0,b=g.length;v<b;++v)a.test(y=g[v])||d(y)},r=this._parameterCheck(e,t),i=this._counts,o=this._match,a=this._stop,s=e.field,l=e.as||["text","count"],u=n(d=>i[d]=1+(i[d]||0)),f=n(d=>i[d]-=1);return r?t.visit(t.SOURCE,u):(t.visit(t.ADD,u),t.visit(t.REM,f)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],o=t[1],a=e.fork(e.NO_SOURCE|e.NO_FIELDS);let s,l,u;for(s in n)l=r[s],u=n[s]||0,!l&&u?(r[s]=l=gt({}),l[i]=s,l[o]=u,a.add.push(l)):u===0?(l&&a.rem.push(l),n[s]=null,r[s]=null):l[o]!==u&&(l[o]=u,a.mod.push(l));return a.modifies(t)}});function bD(e){te.call(this,null,e)}bD.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ye(bD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],o=r[1],a=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let s=this.value;return a?(s&&(n.rem=s),s=t.materialize(t.SOURCE).source,n.add=this.value=Kee(s,i,o,e.filter||ji)):n.mod=s,n.source=this.value,n.modifies(r)}});function Kee(e,t,n,r){for(var i=[],o={},a=e.length,s=0,l,u;s<a;++s)for(o[t]=u=e[s],l=0;l<a;++l)o[n]=e[l],r(o)&&(i.push(gt(o)),o={},o[t]=u);return i}const hP={kde:rD,mixture:Wz,normal:nD,lognormal:Yz,uniform:Xz},Jee="distributions",pP="function",ete="field";function s7(e,t){const n=e[pP];_e(hP,n)||re("Unknown distribution function: "+n);const r=hP[n]();for(const i in e)i===ete?r.data((e.from||t()).map(e[i])):i===Jee?r[i](e[i].map(o=>s7(o,t))):typeof r[i]===pP&&r[i](e[i]);return r}function SD(e){te.call(this,null,e)}const u7=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],tte={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:u7},{name:"weights",type:"number",array:!0}]};SD.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:u7.concat(tte)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(SD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=s7(e.distribution,nte(t)),i=e.steps||e.minsteps||25,o=e.steps||e.maxsteps||200;let a=e.method||"pdf";a!=="pdf"&&a!=="cdf"&&re("Invalid density method: "+a),!e.extent&&!r.data&&re("Missing density extent parameter."),a=r[a];const s=e.as||["value","density"],l=e.extent||no(r.data()),u=Eb(a,l,i,o).map(f=>{const d={};return d[s[0]]=f[0],d[s[1]]=f[1],gt(d)});this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function nte(e){return()=>e.materialize(e.SOURCE).source}function l7(e,t){return e?e.map((n,r)=>t[r]||Kt(n)):null}function xD(e,t,n){const r=[],i=d=>d(l);let o,a,s,l,u,f;if(t==null)r.push(e.map(n));else for(o={},a=0,s=e.length;a<s;++a)l=e[a],u=t.map(i),f=o[u],f||(o[u]=f=[],f.dims=u,r.push(f)),f.push(n(l));return r}const c7="bin";function _D(e){te.call(this,null,e)}_D.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:c7}]};const rte=(e,t)=>Zg(no(e,t))/30;ye(_D,te,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=xD(t.source,e.groupby,ur),i=e.smooth||!1,o=e.field,a=e.step||rte(n,o),s=Ec((y,v)=>o(y)-o(v)),l=e.as||c7,u=r.length;let f=1/0,d=-1/0,p=0,g;for(;p<u;++p){const y=r[p].sort(s);g=-1;for(const v of qz(y,a,i,o))v<f&&(f=v),v>d&&(d=v),y[++g][l]=v}return this.value={start:f,stop:d,step:a},t.reflow(!0).modifies(l)}});function f7(e){Mt.call(this,null,ite,e),this.modified(!0)}ye(f7,Mt);function ite(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Gr(n=>t(n,e),ir(t),Kt(t))}function ED(e){te.call(this,[void 0,void 0],e)}ED.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ye(ED,te,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let o=n[0],a=n[1];if((i||o==null)&&(o=1/0,a=-1/0),t.visit(i?t.SOURCE:t.ADD,s=>{const l=nr(r(s));l!=null&&(l<o&&(o=l),l>a&&(a=l))}),!Number.isFinite(o)||!Number.isFinite(a)){let s=Kt(r);s&&(s=` for field "${s}"`),t.dataflow.warn(`Infinite extent${s}: [${o}, ${a}]`),o=a=void 0}this.value=[o,a]}});function wD(e,t){Mt.call(this,e),this.parent=t,this.count=0}ye(wD,Mt,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function wb(e){te.call(this,{},e),this._keys=Bd();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}ye(wb,te,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let o=_e(i,e)&&i[e],a,s;return o?o.value.stamp<n.stamp&&(o.init(n),this.activate(o)):(s=r||(s=this._group[e])&&s.tuple,a=n.dataflow,o=new wD(n.fork(n.NO_SOURCE),this),a.add(o).connect(t(a,e,s)),i[e]=o,this.activate(o)),o},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,o=this._keys,a=e.modified("key"),s=l=>this.subflow(l,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const u=Re(l),f=o.get(u);f!==void 0&&(o.delete(u),s(f).rem(l))}),t.visit(t.ADD,l=>{const u=r(l);o.set(Re(l),u),s(u).add(l)}),a||t.modified(r.fields)?t.visit(t.MOD,l=>{const u=Re(l),f=o.get(u),d=r(l);f===d?s(d).mod(l):(o.set(u,d),s(f).rem(l),s(d).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{s(o.get(Re(l))).mod(l)}),a&&t.visit(t.REFLOW,l=>{const u=Re(l),f=o.get(u),d=r(l);f!==d&&(o.set(u,d),s(f).rem(l),s(d).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),o.clean()}):o.empty>n.cleanThreshold&&n.runAfter(o.clean),t}});function d7(e){Mt.call(this,null,ate,e)}ye(d7,Mt);function ate(e){return this.value&&!e.modified()?this.value:ae(e.name)?Se(e.name).map(t=>Li(t)):Li(e.name,e.as)}function AD(e){te.call(this,Bd(),e)}AD.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ye(AD,te,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),o=i.add,a=i.rem,s=i.mod,l=e.expr;let u=!0;t.visit(t.REM,d=>{const p=Re(d);r.has(p)?r.delete(p):a.push(d)}),t.visit(t.ADD,d=>{l(d,e)?o.push(d):r.set(Re(d),1)});function f(d){const p=Re(d),g=l(d,e),y=r.get(p);g&&y?(r.delete(p),o.push(d)):!g&&!y?(r.set(p,1),a.push(d)):u&&g&&!y&&s.push(d)}return t.visit(t.MOD,f),e.modified()&&(u=!1,t.visit(t.REFLOW,f)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function TD(e){te.call(this,[],e)}TD.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ye(TD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=l7(r,e.as||[]),o=e.index||null,a=i.length;return n.rem=this.value,t.visit(t.SOURCE,s=>{const l=r.map(y=>y(s)),u=l.reduce((y,v)=>Math.max(y,v.length),0);let f=0,d,p,g;for(;f<u;++f){for(p=XC(s),d=0;d<a;++d)p[i[d]]=(g=l[d][f])==null?null:g;o&&(p[o]=f),n.add.push(p)}}),this.value=n.source=n.add,o&&n.modifies(o),n.modifies(i)}});function CD(e){te.call(this,[],e)}CD.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ye(CD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Kt),o=e.as||["key","value"],a=o[0],s=o[1],l=r.length;return n.rem=this.value,t.visit(t.SOURCE,u=>{for(let f=0,d;f<l;++f)d=XC(u),d[a]=i[f],d[s]=r[f](u),n.add.push(d)}),this.value=n.source=n.add,n.modifies(o)}});function DD(e){te.call(this,null,e)}DD.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ye(DD,te,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),o=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(o,a=>a[r]=n(a,e))}});function h7(e){te.call(this,[],e)}ye(h7,te,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,o=e.size-i.length,a,s,l;if(o>0){for(a=[];--o>=0;)a.push(l=gt(r(e))),i.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(a):a}else s=i.slice(0,-o),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(s):s,i=i.slice(-o);return n.source=this.value=i,n}});const s0={value:"value",median:L8,mean:UZ,min:oA,max:Vl},ote=[];function OD(e){te.call(this,[],e)}OD.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ste(e){var t=e.method||s0.value,n;if(s0[t]==null)re("Unrecognized imputation method: "+t);else return t===s0.value?(n=e.value!==void 0?e.value:0,()=>n):s0[t]}function ute(e){const t=e.field;return n=>n?t(n):NaN}ye(OD,te,{transform(e,t){var n=t.fork(t.ALL),r=ste(e),i=ute(e),o=Kt(e.field),a=Kt(e.key),s=(e.groupby||[]).map(Kt),l=lte(t.source,e.groupby,e.key,e.keyvals),u=[],f=this.value,d=l.domain.length,p,g,y,v,b,x,_,T,A,w;for(b=0,T=l.length;b<T;++b)for(p=l[b],y=p.values,g=NaN,_=0;_<d;++_)if(p[_]==null){for(v=l.domain[_],w={_impute:!0},x=0,A=y.length;x<A;++x)w[s[x]]=y[x];w[a]=v,w[o]=Number.isNaN(g)?g=r(p,i):g,u.push(gt(w))}return u.length&&(n.add=n.materialize(n.ADD).add.concat(u)),f.length&&(n.rem=n.materialize(n.REM).rem.concat(f)),this.value=u,n}});function lte(e,t,n,r){var i=x=>x(b),o=[],a=r?r.slice():[],s={},l={},u,f,d,p,g,y,v,b;for(a.forEach((x,_)=>s[x]=_+1),p=0,v=e.length;p<v;++p)b=e[p],y=n(b),g=s[y]||(s[y]=a.push(y)),f=(u=t?t.map(i):ote)+"",(d=l[f])||(d=l[f]=[],o.push(d),d.values=u),d[g-1]=b;return o.domain=a,o}function ID(e){Du.call(this,e)}ID.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:em},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ye(ID,Du,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,o=>n.add(o))):(i=n.value=n.value||this.init(e),t.visit(t.REM,o=>n.rem(o)),t.visit(t.ADD,o=>n.add(o))),n.changes(),t.visit(t.SOURCE,o=>{qe(o,i[n.cellkey(o)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function MD(e){te.call(this,null,e)}MD.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ye(MD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=xD(r,e.groupby,e.field),o=(e.groupby||[]).map(Kt),a=e.bandwidth,s=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],u=[];let f=e.extent,d=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;s!=="pdf"&&s!=="cdf"&&re("Invalid density method: "+s),e.resolve==="shared"&&(f||(f=no(r,e.field)),d=p=e.steps||p),i.forEach(g=>{const y=rD(g,a)[s],v=e.counts?g.length:1,b=f||no(g);Eb(y,b,d,p).forEach(x=>{const _={};for(let T=0;T<o.length;++T)_[o[T]]=g.dims[T];_[l[0]]=x[0],_[l[1]]=x[1]*v,u.push(gt(_))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});function p7(e){Mt.call(this,null,cte,e)}ye(p7,Mt);function cte(e){return this.value&&!e.modified()?this.value:kC(e.fields,e.flat)}function g7(e){te.call(this,[],e),this._pending=null}ye(g7,te,{transform(e,t){const n=t.dataflow;return this._pending?M2(this,t,this._pending):fte(e)?t.StopPropagation:e.values?M2(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=Se(i.data),o=>o.touch(this)))}:n.request(e.url,e.format).then(r=>M2(this,t,Se(r.data)))}});function fte(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function M2(e,t,n){n.forEach(gt);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function RD(e){te.call(this,{},e)}RD.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ye(RD,te,{transform(e,t){const n=e.fields,r=e.index,i=e.values,o=e.default==null?null:e.default,a=e.modified(),s=n.length;let l=a?t.SOURCE:t.ADD,u=t,f=e.as,d,p,g;return i?(p=i.length,s>1&&!f&&re('Multi-field lookup requires explicit "as" parameter.'),f&&f.length!==s*p&&re('The "as" parameter has too few output field names.'),f=f||i.map(Kt),d=function(y){for(var v=0,b=0,x,_;v<s;++v)if(_=r.get(n[v](y)),_==null)for(x=0;x<p;++x,++b)y[f[b]]=o;else for(x=0;x<p;++x,++b)y[f[b]]=i[x](_)}):(f||re("Missing output field names."),d=function(y){for(var v=0,b;v<s;++v)b=r.get(n[v](y)),y[f[v]]=b??o}),a?u=t.reflow(!0):(g=n.some(y=>t.modified(y.fields)),l|=g?t.MOD:0),t.visit(l,d),u.modifies(f)}});function m7(e){Mt.call(this,null,dte,e)}ye(m7,Mt);function dte(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,o,a;for(o=0;o<n;++o)a=t[o],a[0]<r&&(r=a[0]),a[1]>i&&(i=a[1]);return[r,i]}function y7(e){Mt.call(this,null,hte,e)}ye(y7,Mt);function hte(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function v7(e){te.call(this,null,e)}ye(v7,te,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kD(e){Du.call(this,e)}kD.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:em,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ye(kD,Du,{_transform:Du.prototype.transform,transform(e,t){return this._transform(pte(e,t),t)}});function pte(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",o=ir(n).concat(ir(r)),a=mte(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:a.map(()=>i),fields:a.map(s=>gte(s,n,r,o)),as:a.map(s=>s+""),modified:e.modified.bind(e)}}function gte(e,t,n,r){return Gr(i=>t(i)===e?n(i):NaN,r,e+"")}function mte(e,t,n){const r={},i=[];return n.visit(n.SOURCE,o=>{const a=e(o);r[a]||(r[a]=1,i.push(a))}),i.sort(Qg),t?i.slice(0,t):i}function b7(e){wb.call(this,e)}ye(b7,wb,{transform(e,t){const n=e.subflow,r=e.field,i=o=>this.subflow(Re(o),n,t,o);return(e.modified("field")||r&&t.modified(ir(r)))&&re("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,o=>{const a=i(o);r(o).forEach(s=>a.mod(s))}),t.visit(t.ADD,o=>{const a=i(o);r(o).forEach(s=>a.add(gt(s)))}),t.visit(t.REM,o=>{const a=i(o);r(o).forEach(s=>a.rem(s))})):(t.visit(t.MOD,o=>i(o).mod(o)),t.visit(t.ADD,o=>i(o).add(o)),t.visit(t.REM,o=>i(o).rem(o))),t.clean()&&t.runAfter(()=>this.clean()),t}});function ND(e){te.call(this,null,e)}ND.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ye(ND,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=l7(e.fields,e.as||[]),o=r?(s,l)=>yte(s,l,r,i):mb;let a;return this.value?a=this.value:(t=t.addAll(),a=this.value={}),t.visit(t.REM,s=>{const l=Re(s);n.rem.push(a[l]),a[l]=null}),t.visit(t.ADD,s=>{const l=o(s,gt({}));a[Re(s)]=l,n.add.push(l)}),t.visit(t.MOD,s=>{n.mod.push(o(s,a[Re(s)]))}),n}});function yte(e,t,n,r){for(let i=0,o=n.length;i<o;++i)t[r[i]]=n[i](e);return t}function S7(e){te.call(this,null,e)}ye(S7,te,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function FD(e){te.call(this,null,e)}FD.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const vte=1e-14;ye(FD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,o=xD(i,e.groupby,e.field),a=(e.groupby||[]).map(Kt),s=[],l=e.step||.01,u=e.probs||si(l/2,1-vte,l),f=u.length;return o.forEach(d=>{const p=KC(d,u);for(let g=0;g<f;++g){const y={};for(let v=0;v<a.length;++v)y[a[v]]=d.dims[v];y[r[0]]=u[g],y[r[1]]=p[g],s.push(gt(y))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=s,n}});function x7(e){te.call(this,null,e)}ye(x7,te,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const o=Re(i);n.rem.push(r[o]),r[o]=null}),t.visit(t.ADD,i=>{const o=XC(i);r[Re(i)]=o,n.add.push(o)}),t.visit(t.MOD,i=>{const o=r[Re(i)];for(const a in i)o[a]=i[a],n.modifies(a);n.mod.push(o)})),n}});function PD(e){te.call(this,[],e),this.count=0}PD.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ye(PD,te,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,o=this.value.reduce((f,d)=>(f[Re(d)]=1,f),{});let a=this.value,s=this.count,l=0;function u(f){let d,p;a.length<i?a.push(f):(p=~~((s+1)*Bi()),p<a.length&&p>=l&&(d=a[p],o[Re(d)]&&n.rem.push(d),a[p]=f)),++s}if(t.rem.length&&(t.visit(t.REM,f=>{const d=Re(f);o[d]&&(o[d]=-1,n.rem.push(f)),--s}),a=a.filter(f=>o[Re(f)]!==-1)),(t.rem.length||r)&&a.length<i&&t.source&&(l=s=a.length,t.visit(t.SOURCE,f=>{o[Re(f)]||u(f)}),l=-1),r&&a.length>i){const f=a.length-i;for(let d=0;d<f;++d)o[Re(a[d])]=-1,n.rem.push(a[d]);a=a.slice(f)}return t.mod.length&&t.visit(t.MOD,f=>{o[Re(f)]&&n.mod.push(f)}),t.add.length&&t.visit(t.ADD,u),(t.add.length||l<0)&&(n.add=a.filter(f=>!o[Re(f)])),this.count=s,this.value=n.source=a,n}});function $D(e){te.call(this,null,e)}$D.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ye($D,te,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=si(e.start,e.stop,e.step||1).map(i=>{const o={};return o[r]=i,gt(o)}),n.add=t.add.concat(this.value),n}});function _7(e){te.call(this,null,e),this.modified(!0)}ye(_7,te,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function zD(e){te.call(this,null,e)}const E7=["unit0","unit1"];zD.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:jC,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:E7}]};ye(zD,te,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",o=this._floor(e,t),a=(i?Yd:Gd)(o.unit).offset,s=e.as||E7,l=s[0],u=s[1],f=o.step;let d=o.start||1/0,p=o.stop||-1/0,g=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(ir(n)))&&(t=t.reflow(!0),g=t.SOURCE,d=1/0,p=-1/0),t.visit(g,y=>{const v=n(y);let b,x;v==null?(y[l]=null,r&&(y[u]=null)):(y[l]=b=x=o(v),r&&(y[u]=x=a(b,f)),b<d&&(d=b),x>p&&(p=x))}),o.start=d,o.stop=p,t.modifies(r?s:l)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:hz({extent:e.extent||no(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),o=UC(r),a=this.value||{},s=(n?iz:rz)(o,i);return s.unit=at(o),s.units=o,s.step=i,s.start=a.start,s.stop=a.stop,this.value=s}});function w7(e){te.call(this,Bd(),e)}ye(w7,te,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,o=s=>i.set(r(s),s);let a=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,o)):t.changed()?(t.visit(t.REM,s=>i.delete(r(s))),t.visit(t.ADD,o)):a=!1,this.modified(a),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function A7(e){te.call(this,null,e)}ye(A7,te,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Ec(e.sort)):t.source).map(e.field))}});function bte(e,t,n,r){const i=xg[e](t,n);return{init:i.init||uu,update:function(o,a){a[r]=i.next(o)}}}const xg={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=xg.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||re("ntile num must be greater than zero.");const n=xg.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||re("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=Ste(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function Ste(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const xte=Object.keys(xg);function T7(e){const t=Se(e.ops),n=Se(e.fields),r=Se(e.params),i=Se(e.aggregate_params),o=Se(e.as),a=this.outputs=[],s=this.windows=[],l={},u={},f=[],d=[];let p=!0;function g(y){Se(ir(y)).forEach(v=>l[v]=1)}g(e.sort),t.forEach((y,v)=>{const b=n[v],x=r[v],_=i[v]||null,T=Kt(b),A=t7(y,T,o[v]);if(g(b),a.push(A),_e(xg,y))s.push(bte(y,b,x,A));else{if(b==null&&y!=="count"&&re("Null aggregate field specified."),y==="count"){f.push(A);return}p=!1;let w=u[T];w||(w=u[T]=[],w.field=b,d.push(w)),w.push(n7(y,_,A))}}),(f.length||d.length)&&(this.cell=_te(d,f,p)),this.inputs=Object.keys(l)}const C7=T7.prototype;C7.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};C7.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,o=r&&r.length;let a;if(n){for(a=e.p0;a<e.i0;++a)n.rem(i[a]);for(a=e.p1;a<e.i1;++a)n.add(i[a]);n.set(t)}for(a=0;a<o;++a)r[a].update(e,t)};function _te(e,t,n){e=e.map(l=>i7(l,l.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,o=r.agg=Array(i),a=0;a<i;++a)o[a]=new e[a](r);if(r.store)var s=r.data=new gD;return r.add=function(l){if(r.num+=1,!n){s&&s.add(l);for(let u=0;u<i;++u)o[u].add(o[u].get(l),l)}},r.rem=function(l){if(r.num-=1,!n){s&&s.rem(l);for(let u=0;u<i;++u)o[u].rem(o[u].get(l),l)}},r.set=function(l){let u,f;for(s&&s.values(),u=0,f=t.length;u<f;++u)l[t[u]]=r.num;if(!n)for(u=0,f=o.length;u<f;++u)o[u].set(l)},r.init=function(){r.num=0,s&&s.reset();for(let l=0;l<i;++l)o[l].init()},r}function LD(e){te.call(this,{},e),this._mlen=0,this._mods=[]}LD.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:xte.concat(em)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ye(LD,te,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Ec(e.sort),i=yA(e.groupby),o=s=>this.group(i(s));let a=this.state;(!a||n)&&(a=this.state=new T7(e)),n||t.modified(a.inputs)?(this.value={},t.visit(t.SOURCE,s=>o(s).add(s))):(t.visit(t.REM,s=>o(s).remove(s)),t.visit(t.ADD,s=>o(s).add(s)));for(let s=0,l=this._mlen;s<l;++s)Ete(this._mods[s],a,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(a.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=a7(Re),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function Ete(e,t,n,r){const i=r.sort,o=i&&!r.ignorePeers,a=r.frame||[null,0],s=e.data(n),l=s.length,u=o?Vd(i):null,f={i0:0,i1:0,p0:0,p1:0,index:0,data:s,compare:i||lr(-1)};t.init();for(let d=0;d<l;++d)wte(f,a,d,l),o&&Ate(f,u),t.update(f,s[d])}function wte(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Ate(e,t){const n=e.i0,r=e.i1-1,i=e.compare,o=e.data,a=o.length-1;n>0&&!i(o[n],o[n-1])&&(e.i0=t.left(o,o[n])),r<a&&!i(o[r],o[r+1])&&(e.i1=t.right(o,o[r]))}const Tte=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Du,bin:mD,collect:yD,compare:o7,countpattern:vD,cross:bD,density:SD,dotbin:_D,expression:f7,extent:ED,facet:wb,field:d7,filter:AD,flatten:TD,fold:CD,formula:DD,generate:h7,impute:OD,joinaggregate:ID,kde:MD,key:p7,load:g7,lookup:RD,multiextent:m7,multivalues:y7,params:v7,pivot:kD,prefacet:b7,project:ND,proxy:S7,quantile:FD,relay:x7,sample:PD,sequence:$D,sieve:_7,subflow:wD,timeunit:zD,tupleindex:w7,values:A7,window:LD},Symbol.toStringTag,{value:"Module"}));function mt(e){return function(){return e}}const gP=Math.abs,Qn=Math.atan2,Sl=Math.cos,Cte=Math.max,R2=Math.min,La=Math.sin,zl=Math.sqrt,Kn=1e-12,cd=Math.PI,Dv=cd/2,D7=2*cd;function Dte(e){return e>1?0:e<-1?cd:Math.acos(e)}function mP(e){return e>=1?Dv:e<=-1?-Dv:Math.asin(e)}const vA=Math.PI,bA=2*vA,Ml=1e-6,Ote=bA-Ml;function O7(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Ite(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return O7;const n=10**t;return function(r){this._+=r[0];for(let i=1,o=r.length;i<o;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let jD=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?O7:Ite(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,o,a){this._append`C${+t},${+n},${+r},${+i},${this._x1=+o},${this._y1=+a}`}arcTo(t,n,r,i,o){if(t=+t,n=+n,r=+r,i=+i,o=+o,o<0)throw new Error(`negative radius: ${o}`);let a=this._x1,s=this._y1,l=r-t,u=i-n,f=a-t,d=s-n,p=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>Ml)if(!(Math.abs(d*l-u*f)>Ml)||!o)this._append`L${this._x1=t},${this._y1=n}`;else{let g=r-a,y=i-s,v=l*l+u*u,b=g*g+y*y,x=Math.sqrt(v),_=Math.sqrt(p),T=o*Math.tan((vA-Math.acos((v+p-b)/(2*x*_)))/2),A=T/_,w=T/x;Math.abs(A-1)>Ml&&this._append`L${t+A*f},${n+A*d}`,this._append`A${o},${o},0,0,${+(d*g>f*y)},${this._x1=t+w*l},${this._y1=n+w*u}`}}arc(t,n,r,i,o,a){if(t=+t,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let s=r*Math.cos(i),l=r*Math.sin(i),u=t+s,f=n+l,d=1^a,p=a?i-o:o-i;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>Ml||Math.abs(this._y1-f)>Ml)&&this._append`L${u},${f}`,r&&(p<0&&(p=p%bA+bA),p>Ote?this._append`A${r},${r},0,1,${d},${t-s},${n-l}A${r},${r},0,1,${d},${this._x1=u},${this._y1=f}`:p>Ml&&this._append`A${r},${r},0,${+(p>=vA)},${d},${this._x1=t+r*Math.cos(o)},${this._y1=n+r*Math.sin(o)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function Ab(){return new jD}Ab.prototype=jD.prototype;function Tb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new jD(t)}function Mte(e){return e.innerRadius}function Rte(e){return e.outerRadius}function kte(e){return e.startAngle}function Nte(e){return e.endAngle}function Fte(e){return e&&e.padAngle}function Pte(e,t,n,r,i,o,a,s){var l=n-e,u=r-t,f=a-i,d=s-o,p=d*l-f*u;if(!(p*p<Kn))return p=(f*(t-o)-d*(e-i))/p,[e+p*l,t+p*u]}function u0(e,t,n,r,i,o,a){var s=e-n,l=t-r,u=(a?o:-o)/zl(s*s+l*l),f=u*l,d=-u*s,p=e+f,g=t+d,y=n+f,v=r+d,b=(p+y)/2,x=(g+v)/2,_=y-p,T=v-g,A=_*_+T*T,w=i-o,C=p*v-y*g,D=(T<0?-1:1)*zl(Cte(0,w*w*A-C*C)),I=(C*T-_*D)/A,M=(-C*_-T*D)/A,k=(C*T+_*D)/A,R=(-C*_+T*D)/A,z=I-b,P=M-x,$=k-b,N=R-x;return z*z+P*P>$*$+N*N&&(I=k,M=R),{cx:I,cy:M,x01:-f,y01:-d,x11:I*(i/w-1),y11:M*(i/w-1)}}function $te(){var e=Mte,t=Rte,n=mt(0),r=null,i=kte,o=Nte,a=Fte,s=null,l=Tb(u);function u(){var f,d,p=+e.apply(this,arguments),g=+t.apply(this,arguments),y=i.apply(this,arguments)-Dv,v=o.apply(this,arguments)-Dv,b=gP(v-y),x=v>y;if(s||(s=f=l()),g<p&&(d=g,g=p,p=d),!(g>Kn))s.moveTo(0,0);else if(b>D7-Kn)s.moveTo(g*Sl(y),g*La(y)),s.arc(0,0,g,y,v,!x),p>Kn&&(s.moveTo(p*Sl(v),p*La(v)),s.arc(0,0,p,v,y,x));else{var _=y,T=v,A=y,w=v,C=b,D=b,I=a.apply(this,arguments)/2,M=I>Kn&&(r?+r.apply(this,arguments):zl(p*p+g*g)),k=R2(gP(g-p)/2,+n.apply(this,arguments)),R=k,z=k,P,$;if(M>Kn){var N=mP(M/p*La(I)),L=mP(M/g*La(I));(C-=N*2)>Kn?(N*=x?1:-1,A+=N,w-=N):(C=0,A=w=(y+v)/2),(D-=L*2)>Kn?(L*=x?1:-1,_+=L,T-=L):(D=0,_=T=(y+v)/2)}var B=g*Sl(_),q=g*La(_),H=p*Sl(w),U=p*La(w);if(k>Kn){var Y=g*Sl(T),Q=g*La(T),J=p*Sl(A),de=p*La(A),ve;if(b<cd)if(ve=Pte(B,q,J,de,Y,Q,H,U)){var we=B-ve[0],Be=q-ve[1],Ve=Y-ve[0],me=Q-ve[1],$e=1/La(Dte((we*Ve+Be*me)/(zl(we*we+Be*Be)*zl(Ve*Ve+me*me)))/2),De=zl(ve[0]*ve[0]+ve[1]*ve[1]);R=R2(k,(p-De)/($e-1)),z=R2(k,(g-De)/($e+1))}else R=z=0}D>Kn?z>Kn?(P=u0(J,de,B,q,g,z,x),$=u0(Y,Q,H,U,g,z,x),s.moveTo(P.cx+P.x01,P.cy+P.y01),z<k?s.arc(P.cx,P.cy,z,Qn(P.y01,P.x01),Qn($.y01,$.x01),!x):(s.arc(P.cx,P.cy,z,Qn(P.y01,P.x01),Qn(P.y11,P.x11),!x),s.arc(0,0,g,Qn(P.cy+P.y11,P.cx+P.x11),Qn($.cy+$.y11,$.cx+$.x11),!x),s.arc($.cx,$.cy,z,Qn($.y11,$.x11),Qn($.y01,$.x01),!x))):(s.moveTo(B,q),s.arc(0,0,g,_,T,!x)):s.moveTo(B,q),!(p>Kn)||!(C>Kn)?s.lineTo(H,U):R>Kn?(P=u0(H,U,Y,Q,p,-R,x),$=u0(B,q,J,de,p,-R,x),s.lineTo(P.cx+P.x01,P.cy+P.y01),R<k?s.arc(P.cx,P.cy,R,Qn(P.y01,P.x01),Qn($.y01,$.x01),!x):(s.arc(P.cx,P.cy,R,Qn(P.y01,P.x01),Qn(P.y11,P.x11),!x),s.arc(0,0,p,Qn(P.cy+P.y11,P.cx+P.x11),Qn($.cy+$.y11,$.cx+$.x11),x),s.arc($.cx,$.cy,R,Qn($.y11,$.x11),Qn($.y01,$.x01),!x))):s.arc(0,0,p,w,A,x)}if(s.closePath(),f)return s=null,f+""||null}return u.centroid=function(){var f=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-cd/2;return[Sl(d)*f,La(d)*f]},u.innerRadius=function(f){return arguments.length?(e=typeof f=="function"?f:mt(+f),u):e},u.outerRadius=function(f){return arguments.length?(t=typeof f=="function"?f:mt(+f),u):t},u.cornerRadius=function(f){return arguments.length?(n=typeof f=="function"?f:mt(+f),u):n},u.padRadius=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:mt(+f),u):r},u.startAngle=function(f){return arguments.length?(i=typeof f=="function"?f:mt(+f),u):i},u.endAngle=function(f){return arguments.length?(o=typeof f=="function"?f:mt(+f),u):o},u.padAngle=function(f){return arguments.length?(a=typeof f=="function"?f:mt(+f),u):a},u.context=function(f){return arguments.length?(s=f??null,u):s},u}function I7(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function M7(e){this._context=e}M7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function UD(e){return new M7(e)}function R7(e){return e[0]}function k7(e){return e[1]}function N7(e,t){var n=mt(!0),r=null,i=UD,o=null,a=Tb(s);e=typeof e=="function"?e:e===void 0?R7:mt(e),t=typeof t=="function"?t:t===void 0?k7:mt(t);function s(l){var u,f=(l=I7(l)).length,d,p=!1,g;for(r==null&&(o=i(g=a())),u=0;u<=f;++u)!(u<f&&n(d=l[u],u,l))===p&&((p=!p)?o.lineStart():o.lineEnd()),p&&o.point(+e(d,u,l),+t(d,u,l));if(g)return o=null,g+""||null}return s.x=function(l){return arguments.length?(e=typeof l=="function"?l:mt(+l),s):e},s.y=function(l){return arguments.length?(t=typeof l=="function"?l:mt(+l),s):t},s.defined=function(l){return arguments.length?(n=typeof l=="function"?l:mt(!!l),s):n},s.curve=function(l){return arguments.length?(i=l,r!=null&&(o=i(r)),s):i},s.context=function(l){return arguments.length?(l==null?r=o=null:o=i(r=l),s):r},s}function F7(e,t,n){var r=null,i=mt(!0),o=null,a=UD,s=null,l=Tb(u);e=typeof e=="function"?e:e===void 0?R7:mt(+e),t=typeof t=="function"?t:mt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?k7:mt(+n);function u(d){var p,g,y,v=(d=I7(d)).length,b,x=!1,_,T=new Array(v),A=new Array(v);for(o==null&&(s=a(_=l())),p=0;p<=v;++p){if(!(p<v&&i(b=d[p],p,d))===x)if(x=!x)g=p,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),y=p-1;y>=g;--y)s.point(T[y],A[y]);s.lineEnd(),s.areaEnd()}x&&(T[p]=+e(b,p,d),A[p]=+t(b,p,d),s.point(r?+r(b,p,d):T[p],n?+n(b,p,d):A[p]))}if(_)return s=null,_+""||null}function f(){return N7().defined(i).curve(a).context(o)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:mt(+d),r=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:mt(+d),u):e},u.x1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:mt(+d),u):r},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:mt(+d),n=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:mt(+d),u):t},u.y1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:mt(+d),u):n},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(n)},u.lineX1=function(){return f().x(r).y(t)},u.defined=function(d){return arguments.length?(i=typeof d=="function"?d:mt(!!d),u):i},u.curve=function(d){return arguments.length?(a=d,o!=null&&(s=a(o)),u):a},u.context=function(d){return arguments.length?(d==null?o=s=null:s=a(o=d),u):o},u}const zte={draw(e,t){const n=zl(t/cd);e.moveTo(n,0),e.arc(0,0,n,0,D7)}};function Lte(e,t){let n=null,r=Tb(i);e=typeof e=="function"?e:mt(e||zte),t=typeof t=="function"?t:mt(t===void 0?64:+t);function i(){let o;if(n||(n=o=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),o)return n=null,o+""||null}return i.type=function(o){return arguments.length?(e=typeof o=="function"?o:mt(o),i):e},i.size=function(o){return arguments.length?(t=typeof o=="function"?o:mt(+o),i):t},i.context=function(o){return arguments.length?(n=o??null,i):n},i}function Ou(){}function Ov(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Cb(e){this._context=e}Cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ov(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jte(e){return new Cb(e)}function P7(e){this._context=e}P7.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ute(e){return new P7(e)}function $7(e){this._context=e}$7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Ov(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Bte(e){return new $7(e)}function z7(e,t){this._basis=new Cb(e),this._beta=t}z7.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],o=e[n]-r,a=t[n]-i,s=-1,l;++s<=n;)l=s/n,this._basis.point(this._beta*e[s]+(1-this._beta)*(r+l*o),this._beta*t[s]+(1-this._beta)*(i+l*a));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Vte=(function e(t){function n(r){return t===1?new Cb(r):new z7(r,t)}return n.beta=function(r){return e(+r)},n})(.85);function Iv(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function BD(e,t){this._context=e,this._k=(1-t)/6}BD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Iv(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hte=(function e(t){function n(r){return new BD(r,t)}return n.tension=function(r){return e(+r)},n})(0);function VD(e,t){this._context=e,this._k=(1-t)/6}VD.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qte=(function e(t){function n(r){return new VD(r,t)}return n.tension=function(r){return e(+r)},n})(0);function HD(e,t){this._context=e,this._k=(1-t)/6}HD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Iv(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gte=(function e(t){function n(r){return new HD(r,t)}return n.tension=function(r){return e(+r)},n})(0);function qD(e,t,n){var r=e._x1,i=e._y1,o=e._x2,a=e._y2;if(e._l01_a>Kn){var s=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*s-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,i=(i*s-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Kn){var u=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,f=3*e._l23_a*(e._l23_a+e._l12_a);o=(o*u+e._x1*e._l23_2a-t*e._l12_2a)/f,a=(a*u+e._y1*e._l23_2a-n*e._l12_2a)/f}e._context.bezierCurveTo(r,i,o,a,e._x2,e._y2)}function L7(e,t){this._context=e,this._alpha=t}L7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:qD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yte=(function e(t){function n(r){return t?new L7(r,t):new BD(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function j7(e,t){this._context=e,this._alpha=t}j7.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:qD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wte=(function e(t){function n(r){return t?new j7(r,t):new VD(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function U7(e,t){this._context=e,this._alpha=t}U7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:qD(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xte=(function e(t){function n(r){return t?new U7(r,t):new HD(r,0)}return n.alpha=function(r){return e(+r)},n})(.5);function B7(e){this._context=e}B7.prototype={areaStart:Ou,areaEnd:Ou,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Qte(e){return new B7(e)}function yP(e){return e<0?-1:1}function vP(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(yP(o)+yP(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function bP(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function k2(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Mv(e){this._context=e}Mv.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:k2(this,this._t0,bP(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,k2(this,bP(this,n=vP(this,e,t)),n);break;default:k2(this,this._t0,n=vP(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function V7(e){this._context=new H7(e)}(V7.prototype=Object.create(Mv.prototype)).point=function(e,t){Mv.prototype.point.call(this,t,e)};function H7(e){this._context=e}H7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}};function Zte(e){return new Mv(e)}function Kte(e){return new V7(e)}function q7(e){this._context=e}q7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=SP(e),i=SP(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function SP(e){var t,n=e.length-1,r,i=new Array(n),o=new Array(n),a=new Array(n);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,o[n-1]=7,a[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/o[t-1],o[t]-=r,a[t]-=r*a[t-1];for(i[n-1]=a[n-1]/o[n-1],t=n-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Jte(e){return new q7(e)}function Db(e,t){this._context=e,this._t=t}Db.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ene(e){return new Db(e,.5)}function tne(e){return new Db(e,0)}function nne(e){return new Db(e,1)}function Eu(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const rne=()=>typeof Image<"u"?Image:null;function ho(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Uu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const SA=Symbol("implicit");function GD(){var e=new $5,t=[],n=[],r=SA;function i(o){let a=e.get(o);if(a===void 0){if(r!==SA)return r;e.set(o,a=t.push(o)-1)}return n[a%n.length]}return i.domain=function(o){if(!arguments.length)return t.slice();t=[],e=new $5;for(const a of o)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(o){return arguments.length?(n=Array.from(o),i):n.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.copy=function(){return GD(t,n).unknown(r)},ho.apply(i,arguments),i}function Xd(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function tm(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bu(){}var Jl=.7,fd=1/Jl,Xf="\\s*([+-]?\\d+)\\s*",_g="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ine=/^#([0-9a-f]{3,8})$/,ane=new RegExp(`^rgb\\(${Xf},${Xf},${Xf}\\)$`),one=new RegExp(`^rgb\\(${Qa},${Qa},${Qa}\\)$`),sne=new RegExp(`^rgba\\(${Xf},${Xf},${Xf},${_g}\\)$`),une=new RegExp(`^rgba\\(${Qa},${Qa},${Qa},${_g}\\)$`),lne=new RegExp(`^hsl\\(${_g},${Qa},${Qa}\\)$`),cne=new RegExp(`^hsla\\(${_g},${Qa},${Qa},${_g}\\)$`),xP={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Xd(Bu,Eg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_P,formatHex:_P,formatHex8:fne,formatHsl:dne,formatRgb:EP,toString:EP});function _P(){return this.rgb().formatHex()}function fne(){return this.rgb().formatHex8()}function dne(){return G7(this).formatHsl()}function EP(){return this.rgb().formatRgb()}function Eg(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ine.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?wP(t):n===3?new wn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?l0(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?l0(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ane.exec(e))?new wn(t[1],t[2],t[3],1):(t=one.exec(e))?new wn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=sne.exec(e))?l0(t[1],t[2],t[3],t[4]):(t=une.exec(e))?l0(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lne.exec(e))?CP(t[1],t[2]/100,t[3]/100,1):(t=cne.exec(e))?CP(t[1],t[2]/100,t[3]/100,t[4]):xP.hasOwnProperty(e)?wP(xP[e]):e==="transparent"?new wn(NaN,NaN,NaN,0):null}function wP(e){return new wn(e>>16&255,e>>8&255,e&255,1)}function l0(e,t,n,r){return r<=0&&(e=t=n=NaN),new wn(e,t,n,r)}function YD(e){return e instanceof Bu||(e=Eg(e)),e?(e=e.rgb(),new wn(e.r,e.g,e.b,e.opacity)):new wn}function Iu(e,t,n,r){return arguments.length===1?YD(e):new wn(e,t,n,r??1)}function wn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Xd(wn,Iu,tm(Bu,{brighter(e){return e=e==null?fd:Math.pow(fd,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new wn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new wn(Hl(this.r),Hl(this.g),Hl(this.b),Rv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:AP,formatHex:AP,formatHex8:hne,formatRgb:TP,toString:TP}));function AP(){return`#${Ll(this.r)}${Ll(this.g)}${Ll(this.b)}`}function hne(){return`#${Ll(this.r)}${Ll(this.g)}${Ll(this.b)}${Ll((isNaN(this.opacity)?1:this.opacity)*255)}`}function TP(){const e=Rv(this.opacity);return`${e===1?"rgb(":"rgba("}${Hl(this.r)}, ${Hl(this.g)}, ${Hl(this.b)}${e===1?")":`, ${e})`}`}function Rv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Hl(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ll(e){return e=Hl(e),(e<16?"0":"")+e.toString(16)}function CP(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new oa(e,t,n,r)}function G7(e){if(e instanceof oa)return new oa(e.h,e.s,e.l,e.opacity);if(e instanceof Bu||(e=Eg(e)),!e)return new oa;if(e instanceof oa)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(t===o?a=(n-r)/s+(n<r)*6:n===o?a=(r-t)/s+2:a=(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new oa(a,s,l,e.opacity)}function kv(e,t,n,r){return arguments.length===1?G7(e):new oa(e,t,n,r??1)}function oa(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xd(oa,kv,tm(Bu,{brighter(e){return e=e==null?fd:Math.pow(fd,e),new oa(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new oa(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new wn(N2(e>=240?e-240:e+120,i,r),N2(e,i,r),N2(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new oa(DP(this.h),c0(this.s),c0(this.l),Rv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Rv(this.opacity);return`${e===1?"hsl(":"hsla("}${DP(this.h)}, ${c0(this.s)*100}%, ${c0(this.l)*100}%${e===1?")":`, ${e})`}`}}));function DP(e){return e=(e||0)%360,e<0?e+360:e}function c0(e){return Math.max(0,Math.min(1,e||0))}function N2(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Y7=Math.PI/180,W7=180/Math.PI,Nv=18,X7=.96422,Q7=1,Z7=.82521,K7=4/29,Qf=6/29,J7=3*Qf*Qf,pne=Qf*Qf*Qf;function eL(e){if(e instanceof Za)return new Za(e.l,e.a,e.b,e.opacity);if(e instanceof Jo)return tL(e);e instanceof wn||(e=YD(e));var t=z2(e.r),n=z2(e.g),r=z2(e.b),i=F2((.2225045*t+.7168786*n+.0606169*r)/Q7),o,a;return t===n&&n===r?o=a=i:(o=F2((.4360747*t+.3850649*n+.1430804*r)/X7),a=F2((.0139322*t+.0971045*n+.7141733*r)/Z7)),new Za(116*i-16,500*(o-i),200*(i-a),e.opacity)}function Fv(e,t,n,r){return arguments.length===1?eL(e):new Za(e,t,n,r??1)}function Za(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Xd(Za,Fv,tm(Bu,{brighter(e){return new Za(this.l+Nv*(e??1),this.a,this.b,this.opacity)},darker(e){return new Za(this.l-Nv*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=X7*P2(t),e=Q7*P2(e),n=Z7*P2(n),new wn($2(3.1338561*t-1.6168667*e-.4906146*n),$2(-.9787684*t+1.9161415*e+.033454*n),$2(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function F2(e){return e>pne?Math.pow(e,1/3):e/J7+K7}function P2(e){return e>Qf?e*e*e:J7*(e-K7)}function $2(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function z2(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function gne(e){if(e instanceof Jo)return new Jo(e.h,e.c,e.l,e.opacity);if(e instanceof Za||(e=eL(e)),e.a===0&&e.b===0)return new Jo(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*W7;return new Jo(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function Pv(e,t,n,r){return arguments.length===1?gne(e):new Jo(e,t,n,r??1)}function Jo(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function tL(e){if(isNaN(e.h))return new Za(e.l,0,0,e.opacity);var t=e.h*Y7;return new Za(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Xd(Jo,Pv,tm(Bu,{brighter(e){return new Jo(this.h,this.c,this.l+Nv*(e??1),this.opacity)},darker(e){return new Jo(this.h,this.c,this.l-Nv*(e??1),this.opacity)},rgb(){return tL(this).rgb()}}));var nL=-.14861,WD=1.78277,XD=-.29227,Ob=-.90649,wg=1.97294,OP=wg*Ob,IP=wg*WD,MP=WD*XD-Ob*nL;function mne(e){if(e instanceof ql)return new ql(e.h,e.s,e.l,e.opacity);e instanceof wn||(e=YD(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(MP*r+OP*t-IP*n)/(MP+OP-IP),o=r-i,a=(wg*(n-i)-XD*o)/Ob,s=Math.sqrt(a*a+o*o)/(wg*i*(1-i)),l=s?Math.atan2(a,o)*W7-120:NaN;return new ql(l<0?l+360:l,s,i,e.opacity)}function xA(e,t,n,r){return arguments.length===1?mne(e):new ql(e,t,n,r??1)}function ql(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Xd(ql,xA,tm(Bu,{brighter(e){return e=e==null?fd:Math.pow(fd,e),new ql(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jl:Math.pow(Jl,e),new ql(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Y7,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new wn(255*(t+n*(nL*r+WD*i)),255*(t+n*(XD*r+Ob*i)),255*(t+n*(wg*r)),this.opacity)}}));function rL(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}function iL(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return rL((n-r/t)*t,a,i,o,s)}}function aL(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return rL((n-r/t)*t,i,o,a,s)}}const Ib=e=>()=>e;function oL(e,t){return function(n){return e+n*t}}function yne(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Mb(e,t){var n=t-e;return n?oL(e,n>180||n<-180?n-360*Math.round(n/360):n):Ib(isNaN(e)?t:e)}function vne(e){return(e=+e)==1?An:function(t,n){return n-t?yne(t,n,e):Ib(isNaN(t)?n:t)}}function An(e,t){var n=t-e;return n?oL(e,n):Ib(isNaN(e)?t:e)}const _A=(function e(t){var n=vne(t);function r(i,o){var a=n((i=Iu(i)).r,(o=Iu(o)).r),s=n(i.g,o.g),l=n(i.b,o.b),u=An(i.opacity,o.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return r.gamma=e,r})(1);function sL(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),o=new Array(n),a,s;for(a=0;a<n;++a)s=Iu(t[a]),r[a]=s.r||0,i[a]=s.g||0,o[a]=s.b||0;return r=e(r),i=e(i),o=e(o),s.opacity=1,function(l){return s.r=r(l),s.g=i(l),s.b=o(l),s+""}}}var bne=sL(iL),Sne=sL(aL);function QD(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(o){for(i=0;i<n;++i)r[i]=e[i]*(1-o)+t[i]*o;return r}}function uL(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function xne(e,t){return(uL(t)?QD:lL)(e,t)}function lL(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),o=new Array(n),a;for(a=0;a<r;++a)i[a]=Vu(e[a],t[a]);for(;a<n;++a)o[a]=t[a];return function(s){for(a=0;a<r;++a)o[a]=i[a](s);return o}}function cL(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function ia(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function fL(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Vu(e[i],t[i]):r[i]=t[i];return function(o){for(i in n)r[i]=n[i](o);return r}}var EA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,L2=new RegExp(EA.source,"g");function _ne(e){return function(){return e}}function Ene(e){return function(t){return e(t)+""}}function dL(e,t){var n=EA.lastIndex=L2.lastIndex=0,r,i,o,a=-1,s=[],l=[];for(e=e+"",t=t+"";(r=EA.exec(e))&&(i=L2.exec(t));)(o=i.index)>n&&(o=t.slice(n,o),s[a]?s[a]+=o:s[++a]=o),(r=r[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:ia(r,i)})),n=L2.lastIndex;return n<t.length&&(o=t.slice(n),s[a]?s[a]+=o:s[++a]=o),s.length<2?l[0]?Ene(l[0].x):_ne(t):(t=l.length,function(u){for(var f=0,d;f<t;++f)s[(d=l[f]).i]=d.x(u);return s.join("")})}function Vu(e,t){var n=typeof t,r;return t==null||n==="boolean"?Ib(t):(n==="number"?ia:n==="string"?(r=Eg(t))?(t=r,_A):dL:t instanceof Eg?_A:t instanceof Date?cL:uL(t)?QD:Array.isArray(t)?lL:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?fL:ia)(e,t)}function wne(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ane(e,t){var n=Mb(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function nm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var RP=180/Math.PI,wA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function hL(e,t,n,r,i,o){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(t,e)*RP,skewX:Math.atan(l)*RP,scaleX:a,scaleY:s}}var f0;function Tne(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?wA:hL(t.a,t.b,t.c,t.d,t.e,t.f)}function Cne(e){return e==null||(f0||(f0=document.createElementNS("http://www.w3.org/2000/svg","g")),f0.setAttribute("transform",e),!(e=f0.transform.baseVal.consolidate()))?wA:(e=e.matrix,hL(e.a,e.b,e.c,e.d,e.e,e.f))}function pL(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function o(u,f,d,p,g,y){if(u!==d||f!==p){var v=g.push("translate(",null,t,null,n);y.push({i:v-4,x:ia(u,d)},{i:v-2,x:ia(f,p)})}else(d||p)&&g.push("translate("+d+t+p+n)}function a(u,f,d,p){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),p.push({i:d.push(i(d)+"rotate(",null,r)-2,x:ia(u,f)})):f&&d.push(i(d)+"rotate("+f+r)}function s(u,f,d,p){u!==f?p.push({i:d.push(i(d)+"skewX(",null,r)-2,x:ia(u,f)}):f&&d.push(i(d)+"skewX("+f+r)}function l(u,f,d,p,g,y){if(u!==d||f!==p){var v=g.push(i(g)+"scale(",null,",",null,")");y.push({i:v-4,x:ia(u,d)},{i:v-2,x:ia(f,p)})}else(d!==1||p!==1)&&g.push(i(g)+"scale("+d+","+p+")")}return function(u,f){var d=[],p=[];return u=e(u),f=e(f),o(u.translateX,u.translateY,f.translateX,f.translateY,d,p),a(u.rotate,f.rotate,d,p),s(u.skewX,f.skewX,d,p),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,d,p),u=f=null,function(g){for(var y=-1,v=p.length,b;++y<v;)d[(b=p[y]).i]=b.x(g);return d.join("")}}}var Dne=pL(Tne,"px, ","px)","deg)"),One=pL(Cne,", ",")",")"),Ine=1e-12;function kP(e){return((e=Math.exp(e))+1/e)/2}function Mne(e){return((e=Math.exp(e))-1/e)/2}function Rne(e){return((e=Math.exp(2*e))-1)/(e+1)}const kne=(function e(t,n,r){function i(o,a){var s=o[0],l=o[1],u=o[2],f=a[0],d=a[1],p=a[2],g=f-s,y=d-l,v=g*g+y*y,b,x;if(v<Ine)x=Math.log(p/u)/t,b=function(D){return[s+D*g,l+D*y,u*Math.exp(t*D*x)]};else{var _=Math.sqrt(v),T=(p*p-u*u+r*v)/(2*u*n*_),A=(p*p-u*u-r*v)/(2*p*n*_),w=Math.log(Math.sqrt(T*T+1)-T),C=Math.log(Math.sqrt(A*A+1)-A);x=(C-w)/t,b=function(D){var I=D*x,M=kP(w),k=u/(n*_)*(M*Rne(t*I+w)-Mne(w));return[s+k*g,l+k*y,u*M/kP(t*I+w)]}}return b.duration=x*1e3*t/Math.SQRT2,b}return i.rho=function(o){var a=Math.max(.001,+o),s=a*a,l=s*s;return e(a,s,l)},i})(Math.SQRT2,2,4);function gL(e){return function(t,n){var r=e((t=kv(t)).h,(n=kv(n)).h),i=An(t.s,n.s),o=An(t.l,n.l),a=An(t.opacity,n.opacity);return function(s){return t.h=r(s),t.s=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const Nne=gL(Mb);var Fne=gL(An);function Pne(e,t){var n=An((e=Fv(e)).l,(t=Fv(t)).l),r=An(e.a,t.a),i=An(e.b,t.b),o=An(e.opacity,t.opacity);return function(a){return e.l=n(a),e.a=r(a),e.b=i(a),e.opacity=o(a),e+""}}function mL(e){return function(t,n){var r=e((t=Pv(t)).h,(n=Pv(n)).h),i=An(t.c,n.c),o=An(t.l,n.l),a=An(t.opacity,n.opacity);return function(s){return t.h=r(s),t.c=i(s),t.l=o(s),t.opacity=a(s),t+""}}}const $ne=mL(Mb);var zne=mL(An);function yL(e){return(function t(n){n=+n;function r(i,o){var a=e((i=xA(i)).h,(o=xA(o)).h),s=An(i.s,o.s),l=An(i.l,o.l),u=An(i.opacity,o.opacity);return function(f){return i.h=a(f),i.s=s(f),i.l=l(Math.pow(f,n)),i.opacity=u(f),i+""}}return r.gamma=t,r})(1)}const Lne=yL(Mb);var jne=yL(An);function ZD(e,t){t===void 0&&(t=e,e=Vu);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(a){var s=Math.max(0,Math.min(r-1,Math.floor(a*=r)));return o[s](a-s)}}function Une(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Bne=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Vu,interpolateArray:xne,interpolateBasis:iL,interpolateBasisClosed:aL,interpolateCubehelix:Lne,interpolateCubehelixLong:jne,interpolateDate:cL,interpolateDiscrete:wne,interpolateHcl:$ne,interpolateHclLong:zne,interpolateHsl:Nne,interpolateHslLong:Fne,interpolateHue:Ane,interpolateLab:Pne,interpolateNumber:ia,interpolateNumberArray:QD,interpolateObject:fL,interpolateRgb:_A,interpolateRgbBasis:bne,interpolateRgbBasisClosed:Sne,interpolateRound:nm,interpolateString:dL,interpolateTransformCss:Dne,interpolateTransformSvg:One,interpolateZoom:kne,piecewise:ZD,quantize:Une},Symbol.toStringTag,{value:"Module"}));function Vne(e){return function(){return e}}function AA(e){return+e}var NP=[0,1];function zr(e){return e}function TA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Vne(isNaN(t)?NaN:.5)}function Hne(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function qne(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=TA(i,r),o=n(a,o)):(r=TA(r,i),o=n(o,a)),function(s){return o(r(s))}}function Gne(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=TA(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(s){var l=Tu(e,s,1,r)-1;return o[l](i[l](s))}}function rm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Rb(){var e=NP,t=NP,n=Vu,r,i,o,a=zr,s,l,u;function f(){var p=Math.min(e.length,t.length);return a!==zr&&(a=Hne(e[0],e[p-1])),s=p>2?Gne:qne,l=u=null,d}function d(p){return p==null||isNaN(p=+p)?o:(l||(l=s(e.map(r),t,n)))(r(a(p)))}return d.invert=function(p){return a(i((u||(u=s(t,e.map(r),ia)))(p)))},d.domain=function(p){return arguments.length?(e=Array.from(p,AA),f()):e.slice()},d.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},d.rangeRound=function(p){return t=Array.from(p),n=nm,f()},d.clamp=function(p){return arguments.length?(a=p?!0:zr,f()):a!==zr},d.interpolate=function(p){return arguments.length?(n=p,f()):n},d.unknown=function(p){return arguments.length?(o=p,d):o},function(p,g){return r=p,i=g,f()}}function vL(){return Rb()(zr,zr)}function bL(e,t,n,r){var i=Cu(e,t,n),o;switch(r=Kl(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(o=q8(i,a))&&(r.precision=o),zC(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(o=G8(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=o-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(o=H8(i))&&(r.precision=o-(r.type==="%")*2);break}}return sb(r)}function Ac(e){var t=e.domain;return e.ticks=function(n){var r=t();return iA(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return bL(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,o=r.length-1,a=r[i],s=r[o],l,u,f=10;for(s<a&&(u=a,a=s,s=u,u=i,i=o,o=u);f-- >0;){if(u=aA(a,s,n),u===l)return r[i]=a,r[o]=s,t(r);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function SL(){var e=vL();return e.copy=function(){return rm(e,SL())},ho.apply(e,arguments),Ac(e)}function xL(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,AA),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return xL(e).unknown(t)},e=arguments.length?Array.from(e,AA):[0,1],Ac(n)}function _L(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],o=e[r],a;return o<i&&(a=n,n=r,r=a,a=i,i=o,o=a),e[n]=t.floor(i),e[r]=t.ceil(o),e}function FP(e){return Math.log(e)}function PP(e){return Math.exp(e)}function Yne(e){return-Math.log(-e)}function Wne(e){return-Math.exp(-e)}function Xne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qne(e){return e===10?Xne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function $P(e){return(t,n)=>-e(-t,n)}function KD(e){const t=e(FP,PP),n=t.domain;let r=10,i,o;function a(){return i=Zne(r),o=Qne(r),n()[0]<0?(i=$P(i),o=$P(o),e(Yne,Wne)):e(FP,PP),t}return t.base=function(s){return arguments.length?(r=+s,a()):r},t.domain=function(s){return arguments.length?(n(s),a()):n()},t.ticks=s=>{const l=n();let u=l[0],f=l[l.length-1];const d=f<u;d&&([u,f]=[f,u]);let p=i(u),g=i(f),y,v;const b=s==null?10:+s;let x=[];if(!(r%1)&&g-p<b){if(p=Math.floor(p),g=Math.ceil(g),u>0){for(;p<=g;++p)for(y=1;y<r;++y)if(v=p<0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;x.push(v)}}else for(;p<=g;++p)for(y=r-1;y>=1;--y)if(v=p>0?y/o(-p):y*o(p),!(v<u)){if(v>f)break;x.push(v)}x.length*2<b&&(x=iA(u,f,b))}else x=iA(p,g,Math.min(g-p,b)).map(o);return d?x.reverse():x},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Kl(l)).precision==null&&(l.trim=!0),l=sb(l)),s===1/0)return l;const u=Math.max(1,r*s/t.ticks().length);return f=>{let d=f/o(Math.round(i(f)));return d*r<r-.5&&(d*=r),d<=u?l(f):""}},t.nice=()=>n(_L(n(),{floor:s=>o(Math.floor(i(s))),ceil:s=>o(Math.ceil(i(s)))})),t}function EL(){const e=KD(Rb()).domain([1,10]);return e.copy=()=>rm(e,EL()).base(e.base()),ho.apply(e,arguments),e}function zP(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function LP(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function JD(e){var t=1,n=e(zP(t),LP(t));return n.constant=function(r){return arguments.length?e(zP(t=+r),LP(t)):t},Ac(n)}function wL(){var e=JD(Rb());return e.copy=function(){return rm(e,wL()).constant(e.constant())},ho.apply(e,arguments)}function jP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Kne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jne(e){return e<0?-e*e:e*e}function eO(e){var t=e(zr,zr),n=1;function r(){return n===1?e(zr,zr):n===.5?e(Kne,Jne):e(jP(n),jP(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ac(t)}function tO(){var e=eO(Rb());return e.copy=function(){return rm(e,tO()).exponent(e.exponent())},ho.apply(e,arguments),e}function ere(){return tO.apply(null,arguments).exponent(.5)}function AL(){var e=[],t=[],n=[],r;function i(){var a=0,s=Math.max(1,t.length);for(n=new Array(s-1);++a<s;)n[a-1]=z8(e,a/s);return o}function o(a){return a==null||isNaN(a=+a)?r:t[Tu(n,a)]}return o.invertExtent=function(a){var s=t.indexOf(a);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},o.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(ns),i()},o.range=function(a){return arguments.length?(t=Array.from(a),i()):t.slice()},o.unknown=function(a){return arguments.length?(r=a,o):r},o.quantiles=function(){return n.slice()},o.copy=function(){return AL().domain(e).range(t).unknown(r)},ho.apply(o,arguments)}function TL(){var e=0,t=1,n=1,r=[.5],i=[0,1],o;function a(l){return l!=null&&l<=l?i[Tu(r,l,0,n)]:o}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return a}return a.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},a.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},a.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},a.unknown=function(l){return arguments.length&&(o=l),a},a.thresholds=function(){return r.slice()},a.copy=function(){return TL().domain([e,t]).range(i).unknown(o)},ho.apply(Ac(a),arguments)}function CL(){var e=[.5],t=[0,1],n,r=1;function i(o){return o!=null&&o<=o?t[Tu(e,o,0,r)]:n}return i.domain=function(o){return arguments.length?(e=Array.from(o),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(o){return arguments.length?(t=Array.from(o),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(o){var a=t.indexOf(o);return[e[a-1],e[a]]},i.unknown=function(o){return arguments.length?(n=o,i):n},i.copy=function(){return CL().domain(e).range(t).unknown(n)},ho.apply(i,arguments)}function tre(e){return new Date(e)}function nre(e){return e instanceof Date?+e:+new Date(+e)}function nO(e,t,n,r,i,o,a,s,l,u){var f=vL(),d=f.invert,p=f.domain,g=u(".%L"),y=u(":%S"),v=u("%I:%M"),b=u("%I %p"),x=u("%a %d"),_=u("%b %d"),T=u("%B"),A=u("%Y");function w(C){return(l(C)<C?g:s(C)<C?y:a(C)<C?v:o(C)<C?b:r(C)<C?i(C)<C?x:_:n(C)<C?T:A)(C)}return f.invert=function(C){return new Date(d(C))},f.domain=function(C){return arguments.length?p(Array.from(C,nre)):p().map(tre)},f.ticks=function(C){var D=p();return e(D[0],D[D.length-1],C??10)},f.tickFormat=function(C,D){return D==null?w:u(D)},f.nice=function(C){var D=p();return(!C||typeof C.range!="function")&&(C=t(D[0],D[D.length-1],C??10)),C?p(_L(D,C)):f},f.copy=function(){return rm(f,nO(e,t,n,r,i,o,a,s,l,u))},f}function rre(){return ho.apply(nO(lK,cK,ro,yg,Hd,rs,cb,ub,Ko,VC).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ire(){return ho.apply(nO(sK,uK,io,vg,qd,xu,fb,lb,Ko,HC).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function kb(){var e=0,t=1,n,r,i,o,a=zr,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(o(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=o(e=+e),r=o(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(a=d,u):a};function f(d){return function(p){var g,y;return arguments.length?([g,y]=p,a=d(g,y),u):[a(0),a(1)]}}return u.range=f(Vu),u.rangeRound=f(nm),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return o=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function Hu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function rO(){var e=Ac(kb()(zr));return e.copy=function(){return Hu(e,rO())},Uu.apply(e,arguments)}function DL(){var e=KD(kb()).domain([1,10]);return e.copy=function(){return Hu(e,DL()).base(e.base())},Uu.apply(e,arguments)}function OL(){var e=JD(kb());return e.copy=function(){return Hu(e,OL()).constant(e.constant())},Uu.apply(e,arguments)}function iO(){var e=eO(kb());return e.copy=function(){return Hu(e,iO()).exponent(e.exponent())},Uu.apply(e,arguments)}function are(){return iO.apply(null,arguments).exponent(.5)}function Nb(){var e=0,t=.5,n=1,r=1,i,o,a,s,l,u=zr,f,d=!1,p;function g(v){return isNaN(v=+v)?p:(v=.5+((v=+f(v))-o)*(r*v<r*o?s:l),u(d?Math.max(0,Math.min(1,v)):v))}g.domain=function(v){return arguments.length?([e,t,n]=v,i=f(e=+e),o=f(t=+t),a=f(n=+n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g):[e,t,n]},g.clamp=function(v){return arguments.length?(d=!!v,g):d},g.interpolator=function(v){return arguments.length?(u=v,g):u};function y(v){return function(b){var x,_,T;return arguments.length?([x,_,T]=b,u=ZD(v,[x,_,T]),g):[u(0),u(.5),u(1)]}}return g.range=y(Vu),g.rangeRound=y(nm),g.unknown=function(v){return arguments.length?(p=v,g):p},function(v){return f=v,i=v(e),o=v(t),a=v(n),s=i===o?0:.5/(o-i),l=o===a?0:.5/(a-o),r=o<i?-1:1,g}}function IL(){var e=Ac(Nb()(zr));return e.copy=function(){return Hu(e,IL())},Uu.apply(e,arguments)}function ML(){var e=KD(Nb()).domain([.1,1,10]);return e.copy=function(){return Hu(e,ML()).base(e.base())},Uu.apply(e,arguments)}function RL(){var e=JD(Nb());return e.copy=function(){return Hu(e,RL()).constant(e.constant())},Uu.apply(e,arguments)}function aO(){var e=eO(Nb());return e.copy=function(){return Hu(e,aO()).exponent(e.exponent())},Uu.apply(e,arguments)}function ore(){return aO.apply(null,arguments).exponent(.5)}function po(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const sre=po("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),ure=po("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),lre=po("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cre=po("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),fre=po("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),dre=po("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),hre=po("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pre=po("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),gre=po("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),mre=po("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function oO(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const yre="identity",dd="linear",fs="log",im="pow",am="sqrt",Fb="symlog",ec="time",tc="utc",Ka="sequential",Qd="diverging",hd="quantile",Pb="quantize",$b="threshold",sO="ordinal",CA="point",kL="band",uO="bin-ordinal",vn="continuous",om="discrete",sm="discretizing",Gi="interpolating",lO="temporal";function vre(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function bre(e){return function(t){const n=e.range();let r=t[0],i=t[1],o=-1,a,s,l,u;for(i<r&&(s=r,r=i,i=s),l=0,u=n.length;l<u;++l)n[l]>=r&&n[l]<=i&&(o<0&&(o=l),a=l);if(!(o<0))return r=e.invertExtent(n[o]),i=e.invertExtent(n[a]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function cO(){const e=GD().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,o,a=!1,s=0,l=0,u=.5;delete e.unknown;function f(){const d=t().length,p=r[1]<r[0],g=r[1-p],y=oO(d,s,l);let v=r[p-0];i=(g-v)/(y||1),a&&(i=Math.floor(i)),v+=(g-v-i*(d-s))*u,o=i*(1-s),a&&(v=Math.round(v),o=Math.round(o));const b=si(d).map(x=>v+i*x);return n(p?b.reverse():b)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?(r=[+d[0],+d[1]],f()):r.slice()},e.rangeRound=function(d){return r=[+d[0],+d[1]],a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),s=l,f()):s},e.paddingInner=function(d){return arguments.length?(s=Math.max(0,Math.min(1,d)),f()):s},e.paddingOuter=function(d){return arguments.length?(l=Math.max(0,Math.min(1,d)),f()):l},e.align=function(d){return arguments.length?(u=Math.max(0,Math.min(1,d)),f()):u},e.invertRange=function(d){if(d[0]==null||d[1]==null)return;const p=r[1]<r[0],g=p?n().reverse():n(),y=g.length-1;let v=+d[0],b=+d[1],x,_,T;if(!(v!==v||b!==b)&&(b<v&&(T=v,v=b,b=T),!(b<g[0]||v>r[1-p])))return x=Math.max(0,Tu(g,v)-1),_=v===b?x:Tu(g,b)-1,v-g[x]>o+1e-10&&++x,p&&(T=x,x=y-_,_=y-T),x>_?void 0:t().slice(x,_+1)},e.invert=function(d){const p=e.invertRange([d,d]);return p&&p[0]},e.copy=function(){return cO().domain(t()).range(r).round(a).paddingInner(s).paddingOuter(l).align(u)},f()}function NL(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return NL(t())},e}function Sre(){return NL(cO().paddingInner(1))}var xre=Array.prototype.map;function _re(e){return xre.call(e,nr)}const Ere=Array.prototype.slice;function FL(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(Tu(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=_re(r),n):e.slice()},n.range=function(r){return arguments.length?(t=Ere.call(r),n):t.slice()},n.tickFormat=function(r,i){return bL(e[0],at(e),r??10,i)},n.copy=function(){return FL().domain(n.domain()).range(n.range())},n}const $v=new Map,PL=Symbol("vega_scale");function $L(e){return e[PL]=!0,e}function UP(e){return e&&e[PL]===!0}function wre(e,t,n){const r=function(){const o=t();return o.invertRange||(o.invertRange=o.invert?vre(o):o.invertExtent?bre(o):void 0),o.type=e,$L(o)};return r.metadata=pa(Se(n)),r}function dt(e,t,n){return arguments.length>1?($v.set(e,wre(e,t,n)),this):zL(e)?$v.get(e):void 0}dt(yre,xL);dt(dd,SL,vn);dt(fs,EL,[vn,fs]);dt(im,tO,vn);dt(am,ere,vn);dt(Fb,wL,vn);dt(ec,rre,[vn,lO]);dt(tc,ire,[vn,lO]);dt(Ka,rO,[vn,Gi]);dt(`${Ka}-${dd}`,rO,[vn,Gi]);dt(`${Ka}-${fs}`,DL,[vn,Gi,fs]);dt(`${Ka}-${im}`,iO,[vn,Gi]);dt(`${Ka}-${am}`,are,[vn,Gi]);dt(`${Ka}-${Fb}`,OL,[vn,Gi]);dt(`${Qd}-${dd}`,IL,[vn,Gi]);dt(`${Qd}-${fs}`,ML,[vn,Gi,fs]);dt(`${Qd}-${im}`,aO,[vn,Gi]);dt(`${Qd}-${am}`,ore,[vn,Gi]);dt(`${Qd}-${Fb}`,RL,[vn,Gi]);dt(hd,AL,[sm,hd]);dt(Pb,TL,sm);dt($b,CL,sm);dt(uO,FL,[om,sm]);dt(sO,GD,om);dt(kL,cO,om);dt(CA,Sre,om);function zL(e){return $v.has(e)}function Tc(e,t){const n=$v.get(e);return n&&n.metadata[t]}function fO(e){return Tc(e,vn)}function pd(e){return Tc(e,om)}function DA(e){return Tc(e,sm)}function LL(e){return Tc(e,fs)}function Are(e){return Tc(e,lO)}function jL(e){return Tc(e,Gi)}function UL(e){return Tc(e,hd)}const Tre=["clamp","base","constant","exponent"];function BL(e,t){const n=t[0],r=at(t)-n;return function(i){return e(n+i*r)}}function zb(e,t,n){return ZD(dO(t||"rgb",n),e)}function VL(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function HL(e,t,n){const r=n-t;let i,o,a;return!r||!Number.isFinite(r)?lr(.5):(i=(o=e.type).indexOf("-"),o=i<0?o:o.slice(i+1),a=dt(o)().domain([t,n]).range([0,1]),Tre.forEach(s=>e[s]?a[s](e[s]()):0),a)}function dO(e,t){const n=Bne[Cre(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function Cre(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Dre={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Ore={accent:ure,category10:sre,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:lre,observable10:cre,paired:fre,pastel1:dre,pastel2:hre,set1:pre,set2:gre,set3:mre,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function qL(e){if(ae(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function GL(e,t){for(const n in e)hO(n,t(e[n]))}const BP={};GL(Ore,qL);GL(Dre,e=>zb(qL(e)));function hO(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(BP[e]=t,this):BP[e]}const Y0="symbol",Ire="discrete",Mre="gradient",Rre=e=>ae(e)?e.map(t=>String(t)):String(e),kre=(e,t)=>e[1]-t[1],Nre=(e,t)=>t[1]-e[1];function pO(e,t,n){let r;return ct(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Zg(e.domain())/n||1)+1))),xe(t)&&(r=t.step,t=t.interval),Ee(t)&&(t=e.type===ec?Gd(t):e.type==tc?Yd(t):re("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function YL(e,t,n){let r=e.range(),i=r[0],o=at(r),a=kre;if(i>o&&(r=o,o=i,i=r,a=Nre),i=Math.floor(i),o=Math.ceil(o),t=t.map(s=>[s,e(s)]).filter(s=>i<=s[1]&&s[1]<=o).sort(a).map(s=>s[0]),n>0&&t.length>1){const s=[t[0],at(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,u)=>!(u%2));t.length<3&&(t=s)}return t}function gO(e,t){return e.bins?YL(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function WL(e,t,n,r,i,o){const a=t.type;let s=Rre;if(a===ec||i===ec)s=e.timeFormat(r);else if(a===tc||i===tc)s=e.utcFormat(r);else if(LL(a)){const l=e.formatFloat(r);if(o||t.bins)s=l;else{const u=XL(t,n,!1);s=f=>u(f)?l(f):""}}else if(t.tickFormat){const l=t.domain();s=e.formatSpan(l[0],l[l.length-1],n,r)}else r&&(s=e.format(r));return s}function XL(e,t,n){const r=gO(e,t),i=e.base(),o=Math.log(i),a=Math.max(1,i*t/r.length),s=l=>{let u=l/Math.pow(i,Math.round(Math.log(l)/o));return u*i<i-.5&&(u*=i),u<=a};return n?r.filter(s):s}const OA={[hd]:"quantiles",[Pb]:"thresholds",[$b]:"domain"},QL={[hd]:"quantiles",[Pb]:"domain"};function ZL(e,t){return e.bins?$re(e.bins):e.type===fs?XL(e,t,!0):OA[e.type]?Pre(e[OA[e.type]]()):gO(e,t)}function Fre(e,t,n){const r=t[QL[t.type]](),i=r.length;let o=i>1?r[1]-r[0]:r[0],a;for(a=1;a<i;++a)o=Math.min(o,r[a]-r[a-1]);return e.formatSpan(0,o,30,n)}function Pre(e){const t=[-1/0].concat(e);return t.max=1/0,t}function $re(e){const t=e.slice(0,-1);return t.max=at(e),t}const zre=e=>OA[e.type]||e.bins;function KL(e,t,n,r,i,o,a){const s=QL[t.type]&&o!==ec&&o!==tc?Fre(e,t,i):WL(e,t,n,i,o,a);return r===Y0&&zre(t)?Lre(s):r===Ire?jre(s):Ure(s)}const Lre=e=>(t,n,r)=>{const i=VP(r[n+1],VP(r.max,1/0)),o=HP(t,e),a=HP(i,e);return o&&a?o+" – "+a:a?"< "+a:"≥ "+o},VP=(e,t)=>e??t,jre=e=>(t,n)=>n?e(t):null,Ure=e=>t=>e(t),HP=(e,t)=>Number.isFinite(e)?t(e):null;function Bre(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+at(t),o=i-r;if(e.type===$b){const a=n?o/n:.1;r-=a,i+=a,o=i-r}return a=>(a-r)/o}function Vre(e,t,n,r){const i=r||t.type;return Ee(n)&&Are(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ec?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===tc?e.utcFormat("%A, %d %B %Y, %X UTC"):KL(e,t,5,null,n,r,!0)}function JL(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Vre(e,t,n.format,n.formatType);if(DA(t.type)){const o=ZL(t).slice(1).map(i),a=o.length;return`${a} boundar${a===1?"y":"ies"}: ${o.join(", ")}`}else if(pd(t.type)){const o=t.domain(),a=o.length,s=a>r?o.slice(0,r-2).map(i).join(", ")+", ending with "+o.slice(-1).map(i):o.map(i).join(", ");return`${a} value${a===1?"":"s"}: ${s}`}else{const o=t.domain();return`values from ${i(o[0])} to ${i(at(o))}`}}let ej=0;function Hre(){ej=0}const zv="p_";function mO(e){return e&&e.gradient}function tj(e,t,n){const r=e.gradient;let i=e.id,o=r==="radial"?zv:"";return i||(i=e.id="gradient_"+ej++,r==="radial"?(e.x1=ja(e.x1,.5),e.y1=ja(e.y1,.5),e.r1=ja(e.r1,0),e.x2=ja(e.x2,.5),e.y2=ja(e.y2,.5),e.r2=ja(e.r2,.5),o=zv):(e.x1=ja(e.x1,0),e.y1=ja(e.y1,0),e.x2=ja(e.x2,1),e.y2=ja(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+o+i+")"}function ja(e,t){return e??t}function nj(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,o){return n.push({offset:i,color:o}),r}}}const qP={basis:{curve:jte},"basis-closed":{curve:Ute},"basis-open":{curve:Bte},bundle:{curve:Vte,tension:"beta",value:.85},cardinal:{curve:Hte,tension:"tension",value:0},"cardinal-open":{curve:Gte,tension:"tension",value:0},"cardinal-closed":{curve:qte,tension:"tension",value:0},"catmull-rom":{curve:Yte,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Wte,tension:"alpha",value:.5},"catmull-rom-open":{curve:Xte,tension:"alpha",value:.5},linear:{curve:UD},"linear-closed":{curve:Qte},monotone:{horizontal:Kte,vertical:Zte},natural:{curve:Jte},step:{curve:ene},"step-after":{curve:nne},"step-before":{curve:tne}};function yO(e,t,n){var r=_e(qP,e)&&qP[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const qre={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Gre=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Yre=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Wre=/^((\s+,?\s*)|(,\s*))/,Xre=/^[01]/;function gd(e){const t=[];return(e.match(Gre)||[]).forEach(r=>{let i=r[0];const o=i.toLowerCase(),a=qre[o],s=Qre(o,a,r.slice(1).trim()),l=s.length;if(l<a||l&&l%a!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...s.slice(0,a)]),l!==a){o==="m"&&(i=i==="M"?"L":"l");for(let u=a;u<l;u+=a)t.push([i,...s.slice(u,u+a)])}}),t}function Qre(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let o=0;o<t;++o){const a=e==="a"&&(o===3||o===4)?Xre:Yre,s=n.slice(i).match(a);if(s===null)throw Error("Invalid SVG path, incorrect parameter type");i+=s[0].length,r.push(+s[0]);const l=n.slice(i).match(Wre);l!==null&&(i+=l[0].length)}return r}const Mu=Math.PI/180,Zre=1e-14,Nl=Math.PI/2,qa=Math.PI*2,Df=Math.sqrt(3)/2;var j2={},U2={},rj=[].join;function Kre(e,t,n,r,i,o,a,s,l){const u=rj.call(arguments);if(j2[u])return j2[u];const f=a*Mu,d=Math.sin(f),p=Math.cos(f);n=Math.abs(n),r=Math.abs(r);const g=p*(s-e)*.5+d*(l-t)*.5,y=p*(l-t)*.5-d*(s-e)*.5;let v=g*g/(n*n)+y*y/(r*r);v>1&&(v=Math.sqrt(v),n*=v,r*=v);const b=p/n,x=d/n,_=-d/r,T=p/r,A=b*s+x*l,w=_*s+T*l,C=b*e+x*t,D=_*e+T*t;let M=1/((C-A)*(C-A)+(D-w)*(D-w))-.25;M<0&&(M=0);let k=Math.sqrt(M);o==i&&(k=-k);const R=.5*(A+C)-k*(D-w),z=.5*(w+D)+k*(C-A),P=Math.atan2(w-z,A-R);let N=Math.atan2(D-z,C-R)-P;N<0&&o===1?N+=qa:N>0&&o===0&&(N-=qa);const L=Math.ceil(Math.abs(N/(Nl+.001))),B=[];for(let q=0;q<L;++q){const H=P+q*N/L,U=P+(q+1)*N/L;B[q]=[R,z,H,U,n,r,d,p]}return j2[u]=B}function Jre(e){const t=rj.call(e);if(U2[t])return U2[t];var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],s=e[5],l=e[6],u=e[7];const f=u*a,d=-l*s,p=l*a,g=u*s,y=Math.cos(i),v=Math.sin(i),b=Math.cos(o),x=Math.sin(o),_=.5*(o-i),T=Math.sin(_*.5),A=8/3*T*T/Math.sin(_),w=n+y-A*v,C=r+v+A*y,D=n+b,I=r+x,M=D+A*x,k=I-A*b;return U2[t]=[f*w+d*C,p*w+g*C,f*M+d*k,p*M+g*k,f*D+d*I,p*D+g*I]}const Oi=["l",0,0,0,0,0,0,0];function eie(e,t,n){const r=Oi[0]=e[0];if(r==="a"||r==="A")Oi[1]=t*e[1],Oi[2]=n*e[2],Oi[3]=e[3],Oi[4]=e[4],Oi[5]=e[5],Oi[6]=t*e[6],Oi[7]=n*e[7];else if(r==="h"||r==="H")Oi[1]=t*e[1];else if(r==="v"||r==="V")Oi[1]=n*e[1];else for(var i=1,o=e.length;i<o;++i)Oi[i]=(i%2==1?t:n)*e[i];return Oi}function Ag(e,t,n,r,i,o){var a,s=null,l=0,u=0,f=0,d=0,p,g,y,v,b=0,x=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),o==null&&(o=i),e.beginPath&&e.beginPath();for(var _=0,T=t.length;_<T;++_){switch(a=t[_],(i!==1||o!==1)&&(a=eie(a,i,o)),a[0]){case"l":l+=a[1],u+=a[2],e.lineTo(l+n,u+r);break;case"L":l=a[1],u=a[2],e.lineTo(l+n,u+r);break;case"h":l+=a[1],e.lineTo(l+n,u+r);break;case"H":l=a[1],e.lineTo(l+n,u+r);break;case"v":u+=a[1],e.lineTo(l+n,u+r);break;case"V":u=a[1],e.lineTo(l+n,u+r);break;case"m":l+=a[1],u+=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"M":l=a[1],u=a[2],b=l,x=u,e.moveTo(l+n,u+r);break;case"c":p=l+a[5],g=u+a[6],f=l+a[3],d=u+a[4],e.bezierCurveTo(l+a[1]+n,u+a[2]+r,f+n,d+r,p+n,g+r),l=p,u=g;break;case"C":l=a[5],u=a[6],f=a[3],d=a[4],e.bezierCurveTo(a[1]+n,a[2]+r,f+n,d+r,l+n,u+r);break;case"s":p=l+a[3],g=u+a[4],f=2*l-f,d=2*u-d,e.bezierCurveTo(f+n,d+r,l+a[1]+n,u+a[2]+r,p+n,g+r),f=l+a[1],d=u+a[2],l=p,u=g;break;case"S":p=a[3],g=a[4],f=2*l-f,d=2*u-d,e.bezierCurveTo(f+n,d+r,a[1]+n,a[2]+r,p+n,g+r),l=p,u=g,f=a[1],d=a[2];break;case"q":p=l+a[3],g=u+a[4],f=l+a[1],d=u+a[2],e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g;break;case"Q":p=a[3],g=a[4],e.quadraticCurveTo(a[1]+n,a[2]+r,p+n,g+r),l=p,u=g,f=a[1],d=a[2];break;case"t":p=l+a[1],g=u+a[2],s[0].match(/[QqTt]/)===null?(f=l,d=u):s[0]==="t"?(f=2*l-y,d=2*u-v):s[0]==="q"&&(f=2*l-f,d=2*u-d),y=f,v=d,e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g,f=l+a[1],d=u+a[2];break;case"T":p=a[1],g=a[2],f=2*l-f,d=2*u-d,e.quadraticCurveTo(f+n,d+r,p+n,g+r),l=p,u=g;break;case"a":GP(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+u+r]),l+=a[6],u+=a[7];break;case"A":GP(e,l+n,u+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],u=a[7];break;case"z":case"Z":l=b,u=x,e.closePath();break}s=a}}function GP(e,t,n,r){const i=Kre(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let o=0;o<i.length;++o){const a=Jre(i[o]);e.bezierCurveTo(a[0],a[1],a[2],a[3],a[4],a[5])}}const YP=.5773502691896257,WP={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,qa)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,o=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-o),e.lineTo(i,-o),e.lineTo(0,-n),e.lineTo(-i,-o),e.lineTo(-r,-o),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n,i=r-n*YP,o=n/4;e.moveTo(0,-r-i),e.lineTo(-o,r-i),e.lineTo(o,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n,i=r-n*YP;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Df*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function ij(e){return _e(WP,e)?WP[e]:tie(e)}var B2={};function tie(e){if(!_e(B2,e)){const t=gd(e);B2[e]={draw:function(n,r){Ag(n,t,0,0,Math.sqrt(r)/2)}}}return B2[e]}const Js=.448084975506;function nie(e){return e.x}function rie(e){return e.y}function iie(e){return e.width}function aie(e){return e.height}function Uo(e){return typeof e=="function"?e:()=>+e}function d0(e,t,n){return Math.max(t,Math.min(e,n))}function aj(){var e=nie,t=rie,n=iie,r=aie,i=Uo(0),o=i,a=i,s=i,l=null;function u(f,d,p){var g,y=d??+e.call(this,f),v=p??+t.call(this,f),b=+n.call(this,f),x=+r.call(this,f),_=Math.min(b,x)/2,T=d0(+i.call(this,f),0,_),A=d0(+o.call(this,f),0,_),w=d0(+a.call(this,f),0,_),C=d0(+s.call(this,f),0,_);if(l||(l=g=Ab()),T<=0&&A<=0&&w<=0&&C<=0)l.rect(y,v,b,x);else{var D=y+b,I=v+x;l.moveTo(y+T,v),l.lineTo(D-A,v),l.bezierCurveTo(D-Js*A,v,D,v+Js*A,D,v+A),l.lineTo(D,I-C),l.bezierCurveTo(D,I-Js*C,D-Js*C,I,D-C,I),l.lineTo(y+w,I),l.bezierCurveTo(y+Js*w,I,y,I-Js*w,y,I-w),l.lineTo(y,v+T),l.bezierCurveTo(y,v+Js*T,y+Js*T,v,y+T,v),l.closePath()}if(g)return l=null,g+""||null}return u.x=function(f){return arguments.length?(e=Uo(f),u):e},u.y=function(f){return arguments.length?(t=Uo(f),u):t},u.width=function(f){return arguments.length?(n=Uo(f),u):n},u.height=function(f){return arguments.length?(r=Uo(f),u):r},u.cornerRadius=function(f,d,p,g){return arguments.length?(i=Uo(f),o=d!=null?Uo(d):i,s=p!=null?Uo(p):i,a=g!=null?Uo(g):o,u):i},u.context=function(f){return arguments.length?(l=f??null,u):l},u}function oj(){var e,t,n,r,i=null,o,a,s,l;function u(d,p,g){const y=g/2;if(o){var v=s-p,b=d-a;if(v||b){var x=Math.hypot(v,b),_=(v/=x)*l,T=(b/=x)*l,A=Math.atan2(b,v);i.moveTo(a-_,s-T),i.lineTo(d-v*y,p-b*y),i.arc(d,p,y,A-Math.PI,A),i.lineTo(a+_,s+T),i.arc(a,s,l,A,A+Math.PI)}else i.arc(d,p,y,0,qa);i.closePath()}else o=1;a=d,s=p,l=y}function f(d){var p,g=d.length,y,v=!1,b;for(i==null&&(i=b=Ab()),p=0;p<=g;++p)!(p<g&&r(y=d[p],p,d))===v&&(v=!v)&&(o=0),v&&u(+e(y,p,d),+t(y,p,d),+n(y,p,d));if(b)return i=null,b+""||null}return f.x=function(d){return arguments.length?(e=d,f):e},f.y=function(d){return arguments.length?(t=d,f):t},f.size=function(d){return arguments.length?(n=d,f):n},f.defined=function(d){return arguments.length?(r=d,f):r},f.context=function(d){return arguments.length?(d==null?i=null:i=d,f):i},f}function um(e,t){return e??t}const lm=e=>e.x||0,cm=e=>e.y||0,oie=e=>e.width||0,sie=e=>e.height||0,uie=e=>(e.x||0)+(e.width||0),lie=e=>(e.y||0)+(e.height||0),cie=e=>e.startAngle||0,fie=e=>e.endAngle||0,die=e=>e.padAngle||0,hie=e=>e.innerRadius||0,pie=e=>e.outerRadius||0,gie=e=>e.cornerRadius||0,mie=e=>um(e.cornerRadiusTopLeft,e.cornerRadius)||0,yie=e=>um(e.cornerRadiusTopRight,e.cornerRadius)||0,vie=e=>um(e.cornerRadiusBottomRight,e.cornerRadius)||0,bie=e=>um(e.cornerRadiusBottomLeft,e.cornerRadius)||0,Sie=e=>um(e.size,64),xie=e=>e.size||1,Lb=e=>e.defined!==!1,_ie=e=>ij(e.shape||"circle"),Eie=$te().startAngle(cie).endAngle(fie).padAngle(die).innerRadius(hie).outerRadius(pie).cornerRadius(gie),wie=F7().x(lm).y1(cm).y0(lie).defined(Lb),Aie=F7().y(cm).x1(lm).x0(uie).defined(Lb),Tie=N7().x(lm).y(cm).defined(Lb),Cie=aj().x(lm).y(cm).width(oie).height(sie).cornerRadius(mie,yie,vie,bie),Die=Lte().type(_ie).size(Sie),Oie=oj().x(lm).y(cm).defined(Lb).size(xie);function vO(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Iie(e,t){return Eie.context(e)(t)}function Mie(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Aie:wie).curve(yO(r,n.orient,n.tension)).context(e)(t)}function Rie(e,t){const n=t[0],r=n.interpolate||"linear";return Tie.curve(yO(r,n.orient,n.tension)).context(e)(t)}function Zd(e,t,n,r){return Cie.context(e)(t,n,r)}function kie(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Nie(e,t){return Die.context(e)(t)}function Fie(e,t){return Oie.context(e)(t)}var sj=1;function Pie(){sj=1}function bO(e,t,n){var r=t.clip,i=e._defs,o=t.clip_id||(t.clip_id="clip"+sj++),a=i.clipping[o]||(i.clipping[o]={id:o});return Ge(r)?a.path=r(null):vO(n)?a.path=Zd(null,n,0,0):(a.width=n.width||0,a.height=n.height||0),"url(#"+o+")"}function ln(e){this.clear(),e&&this.union(e)}ln.prototype={clone(){return new ln(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:o,y2:a}=this,s=Math.cos(e),l=Math.sin(e),u=t-t*s+n*l,f=n-t*l-n*s;return[s*r-l*i+u,l*r+s*i+f,s*r-l*a+u,l*r+s*a+f,s*o-l*i+u,l*o+s*i+f,s*o-l*a+u,l*o+s*a+f]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function jb(e){this.mark=e,this.bounds=this.bounds||new ln}function Ub(e){jb.call(this,e),this.items=this.items||[]}ye(Ub,jb);class uj{constructor(t){this._pending=0,this._loader=t||hb()}pending(){return this._pending}sanitizeURL(t){const n=this;return XP(n),n._loader.sanitize(t,{context:"href"}).then(r=>(yp(n),r)).catch(()=>(yp(n),null))}loadImage(t){const n=this,r=rne();return XP(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const o=i.href;if(!o||!r)throw{url:o};const a=new r,s=_e(i,"crossOrigin")?i.crossOrigin:"anonymous";return s!=null&&(a.crossOrigin=s),a.onload=()=>yp(n),a.onerror=()=>yp(n),a.src=o,a}).catch(i=>(yp(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function XP(e){e._pending+=1}function yp(e){e._pending-=1}function ms(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?$ie(t,r):0))}return e}function $ie(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const zie=qa-1e-8;let Bb,W0,X0,jl,IA,Q0,MA,RA;const cu=(e,t)=>Bb.add(e,t),Z0=(e,t)=>cu(W0=e,X0=t),QP=e=>cu(e,Bb.y1),ZP=e=>cu(Bb.x1,e),Fl=(e,t)=>IA*e+MA*t,Pl=(e,t)=>Q0*e+RA*t,V2=(e,t)=>cu(Fl(e,t),Pl(e,t)),H2=(e,t)=>Z0(Fl(e,t),Pl(e,t));function fm(e,t){return Bb=e,t?(jl=t*Mu,IA=RA=Math.cos(jl),Q0=Math.sin(jl),MA=-Q0):(IA=RA=1,jl=Q0=MA=0),Lie}const Lie={beginPath(){},closePath(){},moveTo:H2,lineTo:H2,rect(e,t,n,r){jl?(V2(e+n,t),V2(e+n,t+r),V2(e,t+r),H2(e,t)):(cu(e+n,t+r),Z0(e,t))},quadraticCurveTo(e,t,n,r){const i=Fl(e,t),o=Pl(e,t),a=Fl(n,r),s=Pl(n,r);KP(W0,i,a,QP),KP(X0,o,s,ZP),Z0(a,s)},bezierCurveTo(e,t,n,r,i,o){const a=Fl(e,t),s=Pl(e,t),l=Fl(n,r),u=Pl(n,r),f=Fl(i,o),d=Pl(i,o);JP(W0,a,l,f,QP),JP(X0,s,u,d,ZP),Z0(f,d)},arc(e,t,n,r,i,o){if(r+=jl,i+=jl,W0=n*Math.cos(i)+e,X0=n*Math.sin(i)+t,Math.abs(i-r)>zie)cu(e-n,t-n),cu(e+n,t+n);else{const a=u=>cu(n*Math.cos(u)+e,n*Math.sin(u)+t);let s,l;if(a(r),a(i),i!==r)if(r=r%qa,r<0&&(r+=qa),i=i%qa,i<0&&(i+=qa),i<r&&(o=!o,s=r,r=i,i=s),o)for(i-=qa,s=r-r%Nl,l=0;l<4&&s>i;++l,s-=Nl)a(s);else for(s=r-r%Nl+Nl,l=0;l<4&&s<i;++l,s=s+Nl)a(s)}}};function KP(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function JP(e,t,n,r,i){const o=r-e+3*t-3*n,a=e+n-2*t,s=e-t;let l=0,u=0,f;Math.abs(o)>Zre?(f=a*a+s*o,f>=0&&(f=Math.sqrt(f),l=(-a+f)/o,u=(-a-f)/o)):l=.5*s/a,0<l&&l<1&&i(e6(l,e,t,n,r)),0<u&&u<1&&i(e6(u,e,t,n,r))}function e6(e,t,n,r,i){const o=1-e,a=o*o,s=e*e;return a*o*t+3*a*e*n+3*o*s*r+s*e*i}var wu=(wu=Eu(1,1))?wu.getContext("2d"):null;const kA=new ln;function SO(e){return function(t,n){if(!wu)return!0;e(wu,t),kA.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:o,y2:a}=kA;for(let s=i;s<=a;++s)for(let l=r;l<=o;++l)if(wu.isPointInPath(l,s))return!0;return!1}}function xO(e,t){return t.contains(e.x||0,e.y||0)}function lj(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,o=e.height||0;return t.intersects(kA.set(n,r,n+i,r+o))}function cj(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,o=e.y2!=null?e.y2:r;return Vf(t,n,r,i,o)}function Vf(e,t,n,r,i){const{x1:o,y1:a,x2:s,y2:l}=e,u=r-t,f=i-n;let d=0,p=1,g,y,v,b;for(b=0;b<4;++b){if(b===0&&(g=-u,y=-(o-t)),b===1&&(g=u,y=s-t),b===2&&(g=-f,y=-(a-n)),b===3&&(g=f,y=l-n),Math.abs(g)<1e-10&&y<0)return!1;if(v=y/g,g<0){if(v>p)return!1;v>d&&(d=v)}else if(g>0){if(v<d)return!1;v<p&&(p=v)}}return!0}function md(e,t){e.globalCompositeOperation=t.blend||"source-over"}function ea(e,t){return e??t}function t6(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function jie(e,t,n){const r=n.width(),i=n.height();let o;if(t.gradient==="radial")o=e.createRadialGradient(n.x1+ea(t.x1,.5)*r,n.y1+ea(t.y1,.5)*i,Math.max(r,i)*ea(t.r1,0),n.x1+ea(t.x2,.5)*r,n.y1+ea(t.y2,.5)*i,Math.max(r,i)*ea(t.r2,.5));else{const a=ea(t.x1,0),s=ea(t.y1,0),l=ea(t.x2,1),u=ea(t.y2,0);if(a===l||s===u||r===i)o=e.createLinearGradient(n.x1+a*r,n.y1+s*i,n.x1+l*r,n.y1+u*i);else{const f=Eu(Math.ceil(r),Math.ceil(i)),d=f.getContext("2d");return d.scale(r,i),d.fillStyle=t6(d.createLinearGradient(a,s,l,u),t.stops),d.fillRect(0,0,r,i),e.createPattern(f,"no-repeat")}}return t6(o,t.stops)}function fj(e,t,n){return mO(n)?jie(e,n,t.bounds):n}function Lv(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=fj(e,t,t.fill),!0):!1}var Uie=[];function yd(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=fj(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Uie),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Bie(e,t){return e.zindex-t.zindex||e.index-t.index}function _O(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,o;for(i=0,o=t.length;i<o;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(Bie)}function ma(e,t){var n=e.items,r,i;if(!n||!n.length)return;const o=_O(e);if(o&&o.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=o}for(r=0,i=n.length;r<i;++r)t(n[r])}function jv(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const o=_O(e);for(o&&o.length&&(n=o),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===o){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function EO(e){return function(t,n,r){ma(n,i=>{(!r||r.intersects(i.bounds))&&dj(e,t,i,i)})}}function Vie(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&dj(e,t,n.items[0],n.items)}}function dj(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(md(t,n),n.fill&&Lv(t,n,i)&&t.fill(),n.stroke&&yd(t,n,i)&&t.stroke()))}function Vb(e){return e=e||ji,function(t,n,r,i,o,a){return r*=t.pixelRatio,i*=t.pixelRatio,jv(n,s=>{const l=s.bounds;if(!(l&&!l.contains(o,a)||!l)&&e(t,s,r,i,o,a))return s})}}function dm(e,t){return function(n,r,i,o){var a=Array.isArray(r)?r[0]:r,s=t??a.fill,l=a.stroke&&n.isPointInStroke,u,f;return l&&(u=a.strokeWidth,f=a.strokeCap,n.lineWidth=u??1,n.lineCap=f??"butt"),e(n,r)?!1:s&&n.isPointInPath(i,o)||l&&n.isPointInStroke(i,o)}}function wO(e){return Vb(dm(e))}function Gl(e,t){return"translate("+e+","+t+")"}function AO(e){return"rotate("+e+")"}function Hie(e,t){return"scale("+e+","+t+")"}function hj(e){return Gl(e.x||0,e.y||0)}function qie(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+AO(e.angle):"")}function Gie(e){return Gl(e.x||0,e.y||0)+(e.angle?" "+AO(e.angle):"")+(e.scaleX||e.scaleY?" "+Hie(e.scaleX||1,e.scaleY||1):"")}function TO(e,t,n){function r(a,s){a("transform",qie(s)),a("d",t(null,s))}function i(a,s){return t(fm(a,s.angle),s),ms(a,s).translate(s.x||0,s.y||0)}function o(a,s){var l=s.x||0,u=s.y||0,f=s.angle||0;a.translate(l,u),f&&a.rotate(f*=Mu),a.beginPath(),t(a,s),f&&a.rotate(-f),a.translate(-l,-u)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:EO(o),pick:wO(o),isect:n||SO(o)}}var Yie=TO("arc",Iie);function Wie(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,o=1/0,a,s;--i>=0;)e[i].defined!==!1&&(s=Math.abs(e[i][r]-n),s<o&&(o=s,a=e[i]));return a}function Xie(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,o,a;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],o=e[r].y-t[1],a=i*i+o*o,a<n))return e[r];return null}function Qie(e,t){for(var n=e.length,r,i,o;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],o=r*r+i*i,r=e[n].size||1,o<r*r))return e[n];return null}function CO(e,t,n){function r(l,u){var f=u.mark.items;f.length&&l("d",t(null,f))}function i(l,u){var f=u.items;return f.length===0?l:(t(fm(l),f),ms(l,f[0]))}function o(l,u){l.beginPath(),t(l,u)}const a=dm(o);function s(l,u,f,d,p,g){var y=u.items,v=u.bounds;return!y||!y.length||v&&!v.contains(p,g)?null:(f*=l.pixelRatio,d*=l.pixelRatio,a(l,y,f,d)?y[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:Vie(o),pick:s,isect:xO,tip:n}}var Zie=CO("area",Mie,Wie);function Kie(e,t){var n=t.clip;e.save(),Ge(n)?(e.beginPath(),n(e),e.clip()):pj(e,t.group)}function pj(e,t){e.beginPath(),vO(t)?Zd(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function gj(e){const t=ea(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Jie(e,t){e("transform",hj(t))}function mj(e,t){const n=gj(t);e("d",Zd(null,t,n,n))}function eae(e,t){e("class","background"),e("aria-hidden",!0),mj(e,t)}function tae(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?mj(e,t):e("d","")}function nae(e,t,n){const r=t.clip?bO(n,t,t):null;e("clip-path",r)}function rae(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),ms(e,t),e.translate(t.x||0,t.y||0)}function Tg(e,t,n,r){const i=gj(t);e.beginPath(),Zd(e,t,(n||0)+i,(r||0)+i)}const iae=dm(Tg),aae=dm(Tg,!1),oae=dm(Tg,!0);function sae(e,t,n,r){ma(t,i=>{const o=i.x||0,a=i.y||0,s=i.strokeForeground,l=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&l&&(Tg(e,i,o,a),md(e,i),i.fill&&Lv(e,i,l)&&e.fill(),i.stroke&&!s&&yd(e,i,l)&&e.stroke()),e.save(),e.translate(o,a),i.clip&&pj(e,i),n&&n.translate(-o,-a),ma(i,u=>{(u.marktype==="group"||r==null||r.includes(u.marktype))&&this.draw(e,u,n,r)}),n&&n.translate(o,a),e.restore(),s&&i.stroke&&l&&(Tg(e,i,o,a),md(e,i),yd(e,i,l)&&e.stroke())})}function uae(e,t,n,r,i,o){if(t.bounds&&!t.bounds.contains(i,o)||!t.items)return null;const a=n*e.pixelRatio,s=r*e.pixelRatio;return jv(t,l=>{let u,f,d;const p=l.bounds;if(p&&!p.contains(i,o))return;f=l.x||0,d=l.y||0;const g=f+(l.width||0),y=d+(l.height||0),v=l.clip;if(v&&(i<f||i>g||o<d||o>y))return;if(e.save(),e.translate(f,d),f=i-f,d=o-d,v&&vO(l)&&!oae(e,l,a,s))return e.restore(),null;const b=l.strokeForeground,x=t.interactive!==!1;return x&&b&&l.stroke&&aae(e,l,a,s)?(e.restore(),l):(u=jv(l,_=>lae(_,f,d)?this.pick(_,n,r,f,d):null),!u&&x&&(l.fill||!b&&l.stroke)&&iae(e,l,a,s)&&(u=l),e.restore(),u||null)})}function lae(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var cae={type:"group",tag:"g",nested:!1,attr:Jie,bound:rae,draw:sae,pick:uae,isect:lj,content:nae,background:eae,foreground:tae},Cg={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function DO(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function OO(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function IO(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function Hb(e,t){return e==="center"?t/2:e==="right"?t:0}function qb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function fae(e,t,n){const r=DO(t,n),i=OO(t,r),o=IO(t,r),a=(t.x||0)-Hb(t.align,i),s=(t.y||0)-qb(t.baseline,o),l=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",l,Cg["xmlns:xlink"],"xlink:href"),e("transform",Gl(a,s)),e("width",i),e("height",o),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function dae(e,t){const n=t.image,r=OO(t,n),i=IO(t,n),o=(t.x||0)-Hb(t.align,r),a=(t.y||0)-qb(t.baseline,i);return e.set(o,a,o+r,a+i)}function hae(e,t,n){ma(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=DO(r,this);let o=OO(r,i),a=IO(r,i);if(o===0||a===0)return;let s=(r.x||0)-Hb(r.align,o),l=(r.y||0)-qb(r.baseline,a),u,f,d,p;r.aspect!==!1&&(f=i.width/i.height,d=r.width/r.height,f===f&&d===d&&f!==d&&(d<f?(p=o/f,l+=(a-p)/2,a=p):(p=a*f,s+=(o-p)/2,o=p))),(i.complete||i.toDataURL)&&(md(e,r),e.globalAlpha=(u=r.opacity)!=null?u:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,s,l,o,a))})}var pae={type:"image",tag:"image",nested:!1,attr:fae,bound:dae,draw:hae,pick:Vb(),isect:ji,get:DO,xOffset:Hb,yOffset:qb},gae=CO("line",Rie,Xie);function mae(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Gie(t)),e("d",t.path)}function K0(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,o=t.scaleX||1,a=t.scaleY||1,s=(t.angle||0)*Mu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=gd(n)).path=n),s&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(s),Ag(e,l,0,0,o,a),e.rotate(-s),e.translate(-r,-i)):Ag(e,l,r,i,o,a)}function yae(e,t){return K0(fm(e,t.angle),t)?e.set(0,0,0,0):ms(e,t,!0)}var vae={type:"path",tag:"path",nested:!1,attr:mae,bound:yae,draw:EO(K0),pick:wO(K0),isect:SO(K0)};function bae(e,t){e("d",Zd(null,t))}function Sae(e,t){var n,r;return ms(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function n6(e,t){e.beginPath(),Zd(e,t)}var xae={type:"rect",tag:"path",nested:!1,attr:bae,bound:Sae,draw:EO(n6),pick:wO(n6),isect:lj};function _ae(e,t){e("transform",hj(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function Eae(e,t){var n,r;return ms(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function yj(e,t,n){var r,i,o,a;return t.stroke&&yd(e,t,n)?(r=t.x||0,i=t.y||0,o=t.x2!=null?t.x2:r,a=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(o,a),!0):!1}function wae(e,t,n){ma(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&yj(e,r,i)&&(md(e,r),e.stroke())}})}function Aae(e,t,n,r){return e.isPointInStroke?yj(e,t,1)&&e.isPointInStroke(n,r):!1}var Tae={type:"rule",tag:"line",nested:!1,attr:_ae,bound:Eae,draw:wae,pick:Vb(Aae),isect:cj},Cae=TO("shape",kie),Dae=TO("symbol",Nie,xO);const r6=A8();var li={height:go,measureWidth:MO,estimateWidth:Uv,width:Uv,canvas:vj};vj(!0);function vj(e){li.width=e&&wu?MO:Uv}function Uv(e,t){return bj(ku(e,t),go(e))}function bj(e,t){return~~(.8*e.length*t)}function MO(e,t){return go(e)<=0||!(t=ku(e,t))?0:Sj(t,Gb(e))}function Sj(e,t){const n=`(${t}) ${e}`;let r=r6.get(n);return r===void 0&&(wu.font=t,r=wu.measureText(e).width,r6.set(n,r)),r}function go(e){return e.fontSize!=null?+e.fontSize||0:11}function Ru(e){return e.lineHeight!=null?e.lineHeight:go(e)+2}function Oae(e){return ae(e)?e.length>1?e:e[0]:e}function hm(e){return Oae(e.lineBreak&&e.text&&!ae(e.text)?e.text.split(e.lineBreak):e.text)}function RO(e){const t=hm(e);return(ae(t)?t.length-1:0)*Ru(e)}function ku(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Mae(e,n):n}function Iae(e){if(li.width===MO){const t=Gb(e);return n=>Sj(n,t)}else if(li.width===Uv){const t=go(e);return n=>bj(n,t)}else return t=>li.width(e,t)}function Mae(e,t){var n=+e.limit,r=Iae(e);if(r(t)<n)return t;var i=e.ellipsis||"…",o=e.dir==="rtl",a=0,s=t.length,l;if(n-=r(i),o){for(;a<s;)l=a+s>>>1,r(t.slice(l))>n?a=l+1:s=l;return i+t.slice(a)}else{for(;a<s;)l=1+(a+s>>>1),r(t.slice(0,l))<n?a=l:s=l-1;return t.slice(0,a)+i}}function pm(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Gb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+go(e)+"px "+pm(e,t)}function kO(e){var t=e.baseline,n=go(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ru(e):t==="line-bottom"?.29*n-.5*Ru(e):0)}const Rae={left:"start",center:"middle",right:"end"},ng=new ln;function Yb(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Nl,t+=r*Math.cos(i),n+=r*Math.sin(i)),ng.x1=t,ng.y1=n,ng}function kae(e,t){var n=t.dx||0,r=(t.dy||0)+kO(t),i=Yb(t),o=i.x1,a=i.y1,s=t.angle||0,l;e("text-anchor",Rae[t.align]||"start"),s?(l=Gl(o,a)+" "+AO(s),(n||r)&&(l+=" "+Gl(n,r))):l=Gl(o+n,a+r),e("transform",l)}function NO(e,t,n){var r=li.height(t),i=t.align,o=Yb(t),a=o.x1,s=o.y1,l=t.dx||0,u=(t.dy||0)+kO(t)-Math.round(.8*r),f=hm(t),d;if(ae(f)?(r+=Ru(t)*(f.length-1),d=f.reduce((p,g)=>Math.max(p,li.width(t,g)),0)):d=li.width(t,f),i==="center"?l-=d/2:i==="right"&&(l-=d),e.set(l+=a,u+=s,l+d,u+r),t.angle&&!n)e.rotate(t.angle*Mu,a,s);else if(n===2)return e.rotatedPoints(t.angle*Mu,a,s);return e}function Nae(e,t,n){ma(t,r=>{var i=r.opacity==null?1:r.opacity,o,a,s,l,u,f,d;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=Gb(r),e.textAlign=r.align||"left",o=Yb(r),a=o.x1,s=o.y1,r.angle&&(e.save(),e.translate(a,s),e.rotate(r.angle*Mu),a=s=0),a+=r.dx||0,s+=(r.dy||0)+kO(r),f=hm(r),md(e,r),ae(f))for(u=Ru(r),l=0;l<f.length;++l)d=ku(r,f[l]),r.fill&&Lv(e,r,i)&&e.fillText(d,a,s),r.stroke&&yd(e,r,i)&&e.strokeText(d,a,s),s+=u;else d=ku(r,f),r.fill&&Lv(e,r,i)&&e.fillText(d,a,s),r.stroke&&yd(e,r,i)&&e.strokeText(d,a,s);r.angle&&e.restore()}})}function Fae(e,t,n,r,i,o){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var a=Yb(t),s=a.x1,l=a.y1,u=NO(ng,t,1),f=-t.angle*Mu,d=Math.cos(f),p=Math.sin(f),g=d*i-p*o+(s-d*s+p*l),y=p*i+d*o+(l-p*s-d*l);return u.contains(g,y)}function Pae(e,t){const n=NO(ng,e,2);return Vf(t,n[0],n[1],n[2],n[3])||Vf(t,n[0],n[1],n[4],n[5])||Vf(t,n[4],n[5],n[6],n[7])||Vf(t,n[2],n[3],n[6],n[7])}var $ae={type:"text",tag:"text",nested:!1,attr:kae,bound:NO,draw:Nae,pick:Vb(Fae),isect:Pae},zae=CO("trail",Fie,Qie),gi={arc:Yie,area:Zie,group:cae,image:pae,line:gae,path:vae,rect:xae,rule:Tae,shape:Cae,symbol:Dae,text:$ae,trail:zae};function NA(e,t,n){var r=gi[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new ln),e,n)}var i6={mark:null};function xj(e,t,n){var r=gi[e.marktype],i=r.bound,o=e.items,a=o&&o.length,s,l,u,f;if(r.nested)return a?u=o[0]:(i6.mark=e,u=i6),f=NA(u,i,n),t=t&&t.union(f)||f,t;if(t=t||e.bounds&&e.bounds.clear()||new ln,a)for(s=0,l=o.length;s<l;++s)t.union(NA(o[s],i,n));return e.bounds=t}const Lae=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function _j(e,t){return JSON.stringify(e,Lae,t)}function Ej(e){const t=typeof e=="string"?JSON.parse(e):e;return wj(t)}function wj(e){var t=e.marktype,n=e.items,r,i,o;if(n)for(i=0,o=n.length;i<o;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&wj(n[i]);return t&&xj(e),e}class Aj{constructor(t){arguments.length?this.root=Ej(t):(this.root=a6({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Ub(this.root)])}toJSON(t){return _j(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=a6(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function a6(e,t){const n={bounds:new ln,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function fu(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function FO(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function hn(e,t,n,r){var i=e.childNodes[t],o;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(o=i||null,i=fu(e.ownerDocument,n,r),e.insertBefore(i,o)),i}function Mi(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function Tj(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Wb(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function jae(e,t,n,r){var i=e&&e.mark,o,a;if(i&&(o=gi[i.marktype]).tip){for(a=Wb(t,n),a[0]-=r[0],a[1]-=r[1];e=e.mark.group;)a[0]-=e.x||0,a[1]-=e.y||0;e=o.tip(i.items,a)}return e}let PO=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||hb(),this._tooltip=n||Uae}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const o=new MouseEvent(t.type,t),a=fu(null,"a");for(const s in i)a.setAttribute(s,i[s]);a.dispatchEvent(o)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=jae(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,o=t.bounds,a=o.width(),s=o.height();let l=o.x1+i[0]+r.left,u=o.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,u+=t.y||0;return{x:l,y:u,width:a,height:s,left:l,top:u,right:l+a,bottom:u+s}}};function Uae(e,t,n,r){e.element().setAttribute("title",r||"")}class gm{constructor(t){this._el=null,this._bgcolor=null,this._loader=new uj(t)}initialize(t,n,r,i,o){return this._el=t,this.resize(n,r,i,o)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const o=r._call;r._ready=r._loader.ready().then(a=>{a&&o(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Bae="keydown",Vae="keypress",Hae="keyup",Cj="dragenter",J0="dragleave",Dj="dragover",FA="pointerdown",qae="pointerup",Bv="pointermove",ev="pointerout",Oj="pointerover",PA="mousedown",Gae="mouseup",Ij="mousemove",Vv="mouseout",Mj="mouseover",Hv="click",Yae="dblclick",Wae="wheel",Rj="mousewheel",qv="touchstart",Gv="touchmove",Yv="touchend",Xae=[Bae,Vae,Hae,Cj,J0,Dj,FA,qae,Bv,ev,Oj,PA,Gae,Ij,Vv,Mj,Hv,Yae,Wae,Rj,qv,Gv,Yv],$A=Bv,rg=Vv,zA=Hv;class mm extends PO{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Xae,this.pointermove=s6([Bv,Ij],[Oj,Mj],[ev,Vv]),this.dragover=s6([Dj],[Cj],[J0]),this.pointerout=u6([ev,Vv]),this.dragleave=u6([J0])}initialize(t,n,r){return this._canvas=t&&FO(t,"canvas"),[Hv,PA,FA,Bv,ev,J0].forEach(i=>o6(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(Rj,t)}pointerdown(t){this._down=this._active,this.fire(FA,t)}mousedown(t){this._down=this._active,this.fire(PA,t)}click(t){this._down===this._active&&(this.fire(Hv,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(qv,t,!0)}touchmove(t){this.fire(Gv,t,!0)}touchend(t){this.fire(Yv,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,o=this._handlers[t];if(n.vegaType=t,t===zA&&i&&i.href?this.handleHref(n,i,i.href):(t===$A||t===rg)&&this.handleTooltip(n,i,t!==rg),o)for(let a=0,s=o.length;a<s;++a)o[a].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(o6(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&i.splice(o,1),this}pickEvent(t){const n=Wb(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,o){const a=this.context();return gi[t.marktype].pick.call(this,a,t,n,r,i,o)}}const Qae=e=>e===qv||e===Gv||e===Yv?[qv,Gv,Yv]:[e];function o6(e,t){Qae(t).forEach(n=>Zae(e,n))}function Zae(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function jp(e,t,n){t.forEach(r=>e.fire(r,n))}function s6(e,t,n){return function(r){const i=this._active,o=this.pickEvent(r);o===i?jp(this,e,r):((!i||!i.exit)&&jp(this,n,r),this._active=o,jp(this,t,r),jp(this,e,r))}}function u6(e){return function(t){jp(this,e,t),this._active=null}}function Kae(){return typeof window<"u"&&window.devicePixelRatio||1}function Jae(e,t,n,r,i,o){const a=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,s=e.getContext("2d"),l=a?Kae():i;e.width=t*l,e.height=n*l;for(const u in o)s[u]=o[u];return a&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),s.pixelRatio=l,s.setTransform(l,0,0,l,l*r[0],l*r[1]),e}class Wv extends gm{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new ln,this._tempb=new ln}initialize(t,n,r,i,o,a){return this._options=a||{},this._canvas=this._options.externalContext?null:Eu(1,1,this._options.type),t&&this._canvas&&(Mi(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,o)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)Jae(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const o=this._options.externalContext;o||re("CanvasRenderer is missing a valid canvas or context"),o.scale(this._scale,this._scale),o.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,o=this._width,a=this._height,s=this._dirty,l=eoe(i,o,a);r.save();const u=this._redraw||s.empty()?(this._redraw=!1,l.expand(1)):toe(r,l.intersect(s),i);return this.clear(-i[0],-i[1],o,a),this.draw(r,t,u,n),r.restore(),s.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const o=gi[n.marktype];n.clip&&Kie(t,n),o.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const o=this._options,a=this.context();o.type!=="pdf"&&!o.externalContext&&a.clearRect(t,n,r,i),this._bgcolor!=null&&(a.fillStyle=this._bgcolor,a.fillRect(t,n,r,i))}}const eoe=(e,t,n)=>new ln().set(0,0,t,n).translate(-e[0],-e[1]);function toe(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class kj extends PO{constructor(t,n){super(t,n);const r=this;r._hrefHandler=q2(r,(i,o)=>{o&&o.href&&r.handleHref(i,o,o.href)}),r._tooltipHandler=q2(r,(i,o)=>{r.handleTooltip(i,o,i.type!==rg)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(zA,this._hrefHandler),i.removeEventListener($A,this._tooltipHandler),i.removeEventListener(rg,this._tooltipHandler)),this._svg=i=t&&FO(t,"svg"),i&&(i.addEventListener(zA,this._hrefHandler),i.addEventListener($A,this._tooltipHandler),i.addEventListener(rg,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const a={type:t,handler:n,listener:q2(this,n)};(i[r]||(i[r]=[])).push(a),this._svg&&this._svg.addEventListener(r,a.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],o=this._handlerIndex(i,t,n);return o>=0&&(this._svg&&this._svg.removeEventListener(r,i[o].listener),i.splice(o,1)),this}}const q2=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},Nj="aria-hidden",$O="aria-label",zO="role",LO="aria-roledescription",Fj="graphics-object",jO="graphics-symbol",Pj=(e,t,n)=>({[zO]:e,[LO]:t,[$O]:n||void 0}),noe=pa(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),l6={axis:{desc:"axis",caption:aoe},legend:{desc:"legend",caption:ooe},"title-text":{desc:"title",caption:e=>`Title text '${f6(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${f6(e)}'`}},c6={ariaRole:zO,ariaRoleDescription:LO,description:$O};function $j(e,t){const n=t.aria===!1;if(e(Nj,n||void 0),n||t.description==null)for(const r in c6)e(c6[r],void 0);else{const r=t.mark.marktype;e($O,t.description),e(zO,t.ariaRole||(r==="group"?Fj:jO)),e(LO,t.ariaRoleDescription||`${r} mark`)}}function zj(e){return e.aria===!1?{[Nj]:!0}:noe[e.role]?null:l6[e.role]?ioe(e,l6[e.role]):roe(e)}function roe(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return Pj(n?Fj:jO,`${t} mark container`,e.description)}function ioe(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return Pj(t.role||jO,t.desc,n.description||r(n))}catch{return null}}function f6(e){return Se(e.text).join(" ")}function aoe(e){const t=e.datum,n=e.orient,r=t.title?Lj(e):null,i=e.context,o=i.scales[t.scale].value,a=i.dataflow.locale(),s=o.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${pd(s)?"discrete":s} scale with ${JL(a,o,e)}`}function ooe(e){const t=e.datum,n=t.title?Lj(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,o=Object.keys(i),a=e.context,s=a.scales[i[o[0]]].value,l=a.dataflow.locale();return uoe(r)+(n?` titled '${n}'`:"")+` for ${soe(o)} with ${JL(l,s,e)}`}function Lj(e){try{return Se(at(e.items).items[0].text).join(" ")}catch{return null}}function soe(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+at(e)}function uoe(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const jj=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),loe=e=>jj(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function UO(){let e="",t="",n="";const r=[],i=()=>t=n="",o=l=>{t&&(e+=`${t}>${n}`,i()),r.push(l)},a=(l,u)=>(u!=null&&(t+=` ${l}="${loe(u)}"`),s),s={open(l){o(l),t="<"+l;for(var u=arguments.length,f=new Array(u>1?u-1:0),d=1;d<u;d++)f[d-1]=arguments[d];for(const p of f)for(const g in p)a(g,p[g]);return s},close(){const l=r.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,i(),s},attr:a,text:l=>(n+=jj(l),s),toString:()=>e};return s}const Uj=e=>Bj(UO(),e)+"";function Bj(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):Bj(e,r)}return e.close()}const Xv={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Qv={blend:"mix-blend-mode"},Vj={fill:"none","stroke-miterlimit":10},vp=0,d6="http://www.w3.org/2000/xmlns/",dn=Cg.xmlns;class BO extends gm{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,o){return this._defs={},this._clearDefs(),t&&(this._svg=hn(t,0,"svg",dn),this._svg.setAttributeNS(d6,"xmlns",dn),this._svg.setAttributeNS(d6,"xmlns:xlink",Cg["xmlns:xlink"]),this._svg.setAttribute("version",Cg.version),this._svg.setAttribute("class","marks"),Mi(t,1),this._root=hn(this._svg,vp,"g",dn),du(this._root,Vj),Mi(this._svg,vp+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,o)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(du(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=hn(t,vp,"rect",dn),du(r,{width:this._width,height:this._height,fill:n}));const i=Uj(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Mi(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,o,a,s,l,u;for(s=0,l=t.length;s<l;++s)if(r=t[s],i=r.mark,i.marktype!==o&&(o=i.marktype,a=gi[o]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,h6(r,n),i.items.forEach(f=>{f.dirty=n})),!i.zdirty){if(r.exit){a.nested&&i.items.length?(u=i.items[0],u._svg&&this._update(a,u._svg,u)):r._svg&&(u=r._svg.parentNode,u&&u.removeChild(r._svg)),r._svg=null;continue}r=a.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,h6(r,n)):this._update(a,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const o=this._svg,a=n.marktype,s=gi[a],l=n.interactive===!1?"none":null,u=s.tag==="g",f=p6(n,t,r,"g",o);if(a!=="group"&&i!=null&&!i.includes(a))return Mi(f,0),n._svg;f.setAttribute("class",Tj(n));const d=zj(n);for(const v in d)hr(f,v,d[v]);u||hr(f,"pointer-events",l),hr(f,"clip-path",n.clip?bO(this,n,n.group):null);let p=null,g=0;const y=v=>{const b=this.isDirty(v),x=p6(v,f,p,s.tag,o);b&&(this._update(s,x,v),u&&doe(this,x,v,i)),p=x,++g};return s.nested?n.items.length&&y(n.items[0]):ma(n,y),Mi(f,g),f}_update(t,n,r){es=n,er=n.__values__,$j(ig,r),t.attr(ig,r,this);const i=poe[t.type];i&&i.call(this,t,n,r),es&&this.style(es,r)}style(t,n){if(n!=null){for(const r in Xv){let i=r==="font"?pm(n):n[r];if(i===er[r])continue;const o=Xv[r];i==null?t.removeAttribute(o):(mO(i)&&(i=tj(i,this._defs.gradient,Hj())),t.setAttribute(o,i+"")),er[r]=i}for(const r in Qv)tv(t,Qv[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const o in n.gradient)r||(n.el=r=hn(t,vp+1,"defs",dn)),i=coe(r,n.gradient[o],i);for(const o in n.clipping)r||(n.el=r=hn(t,vp+1,"defs",dn)),i=foe(r,n.clipping[o],i);r&&(i===0?(t.removeChild(r),n.el=null):Mi(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function h6(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function coe(e,t,n){let r,i,o;if(t.gradient==="radial"){let a=hn(e,n++,"pattern",dn);du(a,{id:zv+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),a=hn(a,0,"rect",dn),du(a,{width:1,height:1,fill:`url(${Hj()}#${t.id})`}),e=hn(e,n++,"radialGradient",dn),du(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=hn(e,n++,"linearGradient",dn),du(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)o=hn(e,r,"stop",dn),o.setAttribute("offset",t.stops[r].offset),o.setAttribute("stop-color",t.stops[r].color);return Mi(e,r),n}function foe(e,t,n){let r;return e=hn(e,n,"clipPath",dn),e.setAttribute("id",t.id),t.path?(r=hn(e,0,"path",dn),r.setAttribute("d",t.path)):(r=hn(e,0,"rect",dn),du(r,{x:0,y:0,width:t.width,height:t.height})),Mi(e,1),n+1}function doe(e,t,n,r){t=t.lastChild.previousSibling;let i,o=0;ma(n,a=>{i=e.mark(t,a,i,r),++o}),Mi(t,1+o)}function p6(e,t,n,r,i){let o=e._svg,a;if(!o&&(a=t.ownerDocument,o=fu(a,r,dn),e._svg=o,e.mark&&(o.__data__=e,o.__values__={fill:"default"},r==="g"))){const s=fu(a,"path",dn);o.appendChild(s),s.__data__=e;const l=fu(a,"g",dn);o.appendChild(l),l.__data__=e;const u=fu(a,"path",dn);o.appendChild(u),u.__data__=e,u.__values__={fill:"default"}}return(o.ownerSVGElement!==i||hoe(o,n))&&t.insertBefore(o,n?n.nextSibling:t.firstChild),o}function hoe(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let es=null,er=null;const poe={group(e,t,n){const r=es=t.childNodes[2];er=r.__values__,e.foreground(ig,n,this),er=t.__values__,es=t.childNodes[1],e.content(ig,n,this);const i=es=t.childNodes[0];e.background(ig,n,this);const o=n.mark.interactive===!1?"none":null;if(o!==er.events&&(hr(r,"pointer-events",o),hr(i,"pointer-events",o),er.events=o),n.strokeForeground&&n.stroke){const a=n.fill;hr(r,"display",null),this.style(i,n),hr(i,"stroke",null),a&&(n.fill=null),er=r.__values__,this.style(r,n),a&&(n.fill=a),es=null}else hr(r,"display","none")},image(e,t,n){n.smooth===!1?(tv(t,"image-rendering","optimizeSpeed"),tv(t,"image-rendering","pixelated")):tv(t,"image-rendering",null)},text(e,t,n){const r=hm(n);let i,o,a,s;ae(r)?(o=r.map(l=>ku(n,l)),i=o.join(`
`),i!==er.text&&(Mi(t,0),a=t.ownerDocument,s=Ru(n),o.forEach((l,u)=>{const f=fu(a,"tspan",dn);f.__data__=n,f.textContent=l,u&&(f.setAttribute("x",0),f.setAttribute("dy",s)),t.appendChild(f)}),er.text=i)):(o=ku(n,r),o!==er.text&&(t.textContent=o,er.text=o)),hr(t,"font-family",pm(n)),hr(t,"font-size",go(n)+"px"),hr(t,"font-style",n.fontStyle),hr(t,"font-variant",n.fontVariant),hr(t,"font-weight",n.fontWeight)}};function ig(e,t,n){t!==er[e]&&(n?goe(es,e,t,n):hr(es,e,t),er[e]=t)}function tv(e,t,n){n!==er[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),er[t]=n)}function du(e,t){for(const n in t)hr(e,n,t[n])}function hr(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function goe(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Hj(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class qj extends gm{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=UO();n.open("svg",qe({},Cg,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",Vj,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=gi[n.marktype],i=r.tag,o=[$j,r.attr];t.open("g",{class:Tj(n),"clip-path":n.clip?bO(this,n,n.group):null},zj(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const a=s=>{const l=this.href(s);if(l&&t.open("a",l),t.open(i,this.attr(n,s,o,i!=="g"?i:null)),i==="text"){const u=hm(s);if(ae(u)){const f={x:0,dy:Ru(s)};for(let d=0;d<u.length;++d)t.open("tspan",d?f:null).text(ku(s,u[d])).close()}else t.text(ku(s,u))}else if(i==="g"){const u=s.strokeForeground,f=s.fill,d=s.stroke;u&&d&&(s.stroke=null),t.open("path",this.attr(n,s,r.background,"bgrect")).close(),t.open("g",this.attr(n,s,r.content)),ma(s,p=>this.mark(t,p)),t.close(),u&&d?(f&&(s.fill=null),s.stroke=d,t.open("path",this.attr(n,s,r.foreground,"bgrect")).close(),f&&(s.fill=f)):t.open("path",this.attr(n,s,r.foreground,"bgfore")).close()}t.close(),l&&t.close()};return r.nested?n.items&&n.items.length&&a(n.items[0]):ma(n,a),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const o={},a=(s,l,u,f)=>{o[f||s]=l};return Array.isArray(r)?r.forEach(s=>s(a,n,this)):r(a,n,this),i&&moe(o,n,t,i,this._defs),o}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const o in n){const a=n[o],s=a.stops;a.gradient==="radial"?(t.open("pattern",{id:zv+o,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+o+")"}).close(),t.close(),t.open("radialGradient",{id:o,fx:a.x1,fy:a.y1,fr:a.r1,cx:a.x2,cy:a.y2,r:a.r2})):t.open("linearGradient",{id:o,x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2});for(let l=0;l<s.length;++l)t.open("stop",{offset:s[l].offset,"stop-color":s[l].color}).close();t.close()}for(const o in r){const a=r[o];t.open("clipPath",{id:o}),a.path?t.open("path",{d:a.path}).close():t.open("rect",{x:0,y:0,width:a.width,height:a.height}).close(),t.close()}t.close()}}}function moe(e,t,n,r,i){let o;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(o=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=pm(t),e["font-size"]=go(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const a in Xv){let s=t[a];const l=Xv[a];s==="transparent"&&(l==="fill"||l==="stroke")||s!=null&&(mO(s)&&(s=tj(s,i.gradient,"")),e[l]=s)}for(const a in Qv){const s=t[a];s!=null&&(o=o||[],o.push(`${Qv[a]}: ${s};`))}return o&&(e.style=o.join(" ")),e}const na={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function yoe(e){na.svgMarkTypes=e.svgMarkTypes??["text"],na.svgOnTop=e.svgOnTop??!0,na.debug=e.debug??!1}class LA extends gm{constructor(t){super(t),this._svgRenderer=new BO(t),this._canvasRenderer=new Wv(t)}initialize(t,n,r,i,o){this._root_el=hn(t,0,"div");const a=hn(this._root_el,0,"div"),s=hn(this._root_el,1,"div");return this._root_el.style.position="relative",na.debug||(a.style.height="100%",s.style.position="absolute",s.style.top="0",s.style.left="0",s.style.height="100%",s.style.width="100%"),this._svgEl=na.svgOnTop?s:a,this._canvasEl=na.svgOnTop?a:s,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,o),this._svgRenderer.initialize(this._svgEl,n,r,i,o),super.initialize(t,n,r,i,o)}dirty(t){return na.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(o=>!na.svgMarkTypes.includes(o));this._svgRenderer.render(t,na.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return na.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class Gj extends mm{constructor(t,n){super(t,n)}initialize(t,n,r){const i=hn(hn(t,0,"div"),na.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const Yj="canvas",Wj="hybrid",Xj="png",Qj="svg",Zj="none",hu={Canvas:Yj,PNG:Xj,SVG:Qj,Hybrid:Wj,None:Zj},nc={};nc[Yj]=nc[Xj]={renderer:Wv,headless:Wv,handler:mm};nc[Qj]={renderer:BO,headless:qj,handler:kj};nc[Wj]={renderer:LA,headless:LA,handler:Gj};nc[Zj]={};function Xb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(nc[e]=t,this):nc[e]}function Kj(e,t,n){const r=[],i=new ln().union(t),o=e.marktype;return o?Jj(e,i,n,r):o==="group"?eU(e,i,n,r):re("Intersect scene must be mark node or group item.")}function Jj(e,t,n,r){if(voe(e,t,n)){const i=e.items,o=e.marktype,a=i.length;let s=0;if(o==="group")for(;s<a;++s)eU(i[s],t,n,r);else for(const l=gi[o].isect;s<a;++s){const u=i[s];tU(u,t,l)&&r.push(u)}}return r}function voe(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function eU(e,t,n,r){n&&n(e.mark)&&tU(e,t,gi.group.isect)&&r.push(e);const i=e.items,o=i&&i.length;if(o){const a=e.x||0,s=e.y||0;t.translate(-a,-s);for(let l=0;l<o;++l)Jj(i[l],t,n,r);t.translate(a,s)}return r}function tU(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const G2=new ln;function nU(e){const t=e.clip;if(Ge(t))t(fm(G2.clear()));else if(t)G2.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(G2)}const boe=1e-9;function VO(e,t,n){return e===t?!0:n==="path"?rU(e,t):e instanceof Date&&t instanceof Date?+e==+t:ct(e)&&ct(t)?Math.abs(e-t)<=boe:!e||!t||!xe(e)&&!xe(t)?e==t:Soe(e,t)}function rU(e,t){return VO(gd(e),gd(t))}function Soe(e,t){var n=Object.keys(e),r=Object.keys(t),i,o;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),o=n.length-1;o>=0;o--)if(n[o]!=r[o])return!1;for(o=n.length-1;o>=0;o--)if(i=n[o],!VO(e[i],t[i],i))return!1;return typeof e==typeof t}function xoe(){Pie(),Hre()}const vd="top",sa="left",ua="right",Nu="bottom",_oe="top-left",Eoe="top-right",woe="bottom-left",Aoe="bottom-right",HO="start",jA="middle",pr="end",Toe="x",Coe="y",Qb="group",qO="axis",GO="title",Doe="frame",Ooe="scope",YO="legend",iU="row-header",aU="row-footer",oU="row-title",sU="column-header",uU="column-footer",lU="column-title",Ioe="padding",Moe="symbol",cU="fit",fU="fit-x",dU="fit-y",Roe="pad",WO="none",h0="all",UA="each",XO="flush",pu="column",gu="row";function hU(e){te.call(this,null,e)}ye(hU,te,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,o=gi[i],a=o.bound;let s=r.bounds,l;if(o.nested)r.items.length&&n.dirty(r.items[0]),s=p0(r,a),r.items.forEach(u=>{u.bounds.clear().union(s)});else if(i===Qb||e.modified())switch(t.visit(t.MOD,u=>n.dirty(u)),s.clear(),r.items.forEach(u=>s.union(p0(u,a))),r.role){case qO:case YO:case GO:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,u=>{s.union(p0(u,a))}),t.visit(t.MOD,u=>{l=l||s.alignsWith(u.bounds),n.dirty(u),s.union(p0(u,a))}),l&&(s.clear(),r.items.forEach(u=>s.union(u.bounds)));return nU(r),t.modifies("bounds")}});function p0(e,t,n){return t(e.bounds.clear(),e,n)}const g6=":vega_identifier:";function QO(e){te.call(this,0,e)}QO.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ye(QO,te,{transform(e,t){const n=koe(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,o=>o[r]=o[r]||++i),n.set(this.value=i),t}});function koe(e){return e._signals[g6]||(e._signals[g6]=e.add(0))}function pU(e){te.call(this,null,e)}ye(pU,te,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Noe(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===Qb?Ub:jb;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Noe(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function gU(e){te.call(this,null,e)}const m6={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!mU(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},mU=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),y6=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,o;n<r;i=o,++n)if(mU(i,o=e[n].bounds,t))return!0},Foe=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Poe=(e,t,n)=>{var r=e.range(),i=new ln;return t===vd||t===Nu?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),o=>i.encloses(o.bounds)},v6=e=>(e.forEach(t=>t.opacity=1),e),b6=(e,t)=>e.reflow(t.modified()).modifies("opacity");ye(gU,te,{transform(e,t){const n=m6[e.method]||m6.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,o,a;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(v6(i),t=b6(t,e)),t;if(i=i.filter(Foe),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),o=v6(i),t=b6(t,e),o.length>=3&&y6(o,r)){do o=n(o,r);while(o.length>=3&&y6(o,r));o.length<3&&!at(i).opacity&&(o.length>1&&(at(o).opacity=0),at(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(a=Poe(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(l=>{a(l)||(l.opacity=0)}));const s=o[0].mark.bounds.clear();return i.forEach(l=>{l.opacity&&s.union(l.bounds)}),t}});function yU(e){te.call(this,null,e)}ye(yU,te,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const Jn=new ln;function Hf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function $oe(e){var t=e.items[0].orient;return t===sa||t===ua}function zoe(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Loe(e,t,n,r){var i=t.items[0],o=i.datum,a=i.translate!=null?i.translate:.5,s=i.orient,l=zoe(o),u=i.range,f=i.offset,d=i.position,p=i.minExtent,g=i.maxExtent,y=o.title&&i.items[l[2]].items[0],v=i.titlePadding,b=i.bounds,x=y&&RO(y),_=0,T=0,A,w;switch(Jn.clear().union(b),b.clear(),(A=l[0])>-1&&b.union(i.items[A].bounds),(A=l[1])>-1&&b.union(i.items[A].bounds),s){case vd:_=d||0,T=-f,w=Math.max(p,Math.min(g,-b.y1)),b.add(0,-w).add(u,0),y&&g0(e,y,w,v,x,0,-1,b);break;case sa:_=-f,T=d||0,w=Math.max(p,Math.min(g,-b.x1)),b.add(-w,0).add(0,u),y&&g0(e,y,w,v,x,1,-1,b);break;case ua:_=n+f,T=d||0,w=Math.max(p,Math.min(g,b.x2)),b.add(0,0).add(w,u),y&&g0(e,y,w,v,x,1,1,b);break;case Nu:_=d||0,T=r+f,w=Math.max(p,Math.min(g,b.y2)),b.add(0,0).add(u,w),y&&g0(e,y,w,v,0,0,1,b);break;default:_=i.x,T=i.y}return ms(b.translate(_,T),i),Hf(i,"x",_+a)|Hf(i,"y",T+a)&&(i.bounds=Jn,e.dirty(i),i.bounds=b,e.dirty(i)),i.mark.bounds.clear().union(b)}function g0(e,t,n,r,i,o,a,s){const l=t.bounds;if(t.auto){const u=a*(n+i+r);let f=0,d=0;e.dirty(t),o?f=(t.x||0)-(t.x=u):d=(t.y||0)-(t.y=u),t.mark.bounds.clear().union(l.translate(-f,-d)),e.dirty(t)}s.union(l)}const S6=(e,t)=>Math.floor(Math.min(e,t)),x6=(e,t)=>Math.ceil(Math.max(e,t));function joe(e){var t=e.items,n=t.length,r=0,i,o;const a={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],o=i.items,i.marktype===Qb)switch(i.role){case qO:case YO:case GO:break;case iU:a.rowheaders.push(...o);break;case aU:a.rowfooters.push(...o);break;case sU:a.colheaders.push(...o);break;case uU:a.colfooters.push(...o);break;case oU:a.rowtitle=o[0];break;case lU:a.coltitle=o[0];break;default:a.marks.push(...o)}return a}function Uoe(e){return new ln().set(0,0,e.width||0,e.height||0)}function Boe(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function Lt(e,t,n){const r=xe(e)?e[t]:e;return r??(n!==void 0?n:0)}function _6(e){return e<0?Math.ceil(-e):0}function vU(e,t,n){var r=!n.nodirty,i=n.bounds===XO?Uoe:Boe,o=Jn.set(0,0,0,0),a=Lt(n.align,pu),s=Lt(n.align,gu),l=Lt(n.padding,pu),u=Lt(n.padding,gu),f=n.columns||t.length,d=f<=0?1:Math.ceil(t.length/f),p=t.length,g=Array(p),y=Array(f),v=0,b=Array(p),x=Array(d),_=0,T=Array(p),A=Array(p),w=Array(p),C,D,I,M,k,R,z,P,$,N,L;for(D=0;D<f;++D)y[D]=0;for(D=0;D<d;++D)x[D]=0;for(D=0;D<p;++D)R=t[D],k=w[D]=i(R),R.x=R.x||0,T[D]=0,R.y=R.y||0,A[D]=0,I=D%f,M=~~(D/f),v=Math.max(v,z=Math.ceil(k.x2)),_=Math.max(_,P=Math.ceil(k.y2)),y[I]=Math.max(y[I],z),x[M]=Math.max(x[M],P),g[D]=l+_6(k.x1),b[D]=u+_6(k.y1),r&&e.dirty(t[D]);for(D=0;D<p;++D)D%f===0&&(g[D]=0),D<f&&(b[D]=0);if(a===UA)for(I=1;I<f;++I){for(L=0,D=I;D<p;D+=f)L<g[D]&&(L=g[D]);for(D=I;D<p;D+=f)g[D]=L+y[I-1]}else if(a===h0){for(L=0,D=0;D<p;++D)D%f&&L<g[D]&&(L=g[D]);for(D=0;D<p;++D)D%f&&(g[D]=L+v)}else for(a=!1,I=1;I<f;++I)for(D=I;D<p;D+=f)g[D]+=y[I-1];if(s===UA)for(M=1;M<d;++M){for(L=0,D=M*f,C=D+f;D<C;++D)L<b[D]&&(L=b[D]);for(D=M*f;D<C;++D)b[D]=L+x[M-1]}else if(s===h0){for(L=0,D=f;D<p;++D)L<b[D]&&(L=b[D]);for(D=f;D<p;++D)b[D]=L+_}else for(s=!1,M=1;M<d;++M)for(D=M*f,C=D+f;D<C;++D)b[D]+=x[M-1];for($=0,D=0;D<p;++D)$=g[D]+(D%f?$:0),T[D]+=$-t[D].x;for(I=0;I<f;++I)for(N=0,D=I;D<p;D+=f)N+=b[D],A[D]+=N-t[D].y;if(a&&Lt(n.center,pu)&&d>1)for(D=0;D<p;++D)k=a===h0?v:y[D%f],$=k-w[D].x2-t[D].x-T[D],$>0&&(T[D]+=$/2);if(s&&Lt(n.center,gu)&&f!==1)for(D=0;D<p;++D)k=s===h0?_:x[~~(D/f)],N=k-w[D].y2-t[D].y-A[D],N>0&&(A[D]+=N/2);for(D=0;D<p;++D)o.union(w[D].translate(T[D],A[D]));switch($=Lt(n.anchor,Toe),N=Lt(n.anchor,Coe),Lt(n.anchor,pu)){case pr:$-=o.width();break;case jA:$-=o.width()/2}switch(Lt(n.anchor,gu)){case pr:N-=o.height();break;case jA:N-=o.height()/2}for($=Math.round($),N=Math.round(N),o.clear(),D=0;D<p;++D)t[D].mark.bounds.clear();for(D=0;D<p;++D)R=t[D],R.x+=T[D]+=$,R.y+=A[D]+=N,o.union(R.mark.bounds.union(R.bounds.translate(T[D],A[D]))),r&&e.dirty(R);return o}function Voe(e,t,n){var r=joe(t),i=r.marks,o=n.bounds===XO?Hoe:qoe,a=n.offset,s=n.columns||i.length,l=s<=0?1:Math.ceil(i.length/s),u=l*s,f,d,p,g,y,v,b;const x=vU(e,i,n);x.empty()&&x.set(0,0,0,0),r.rowheaders&&(v=Lt(n.headerBand,gu,null),f=m0(e,r.rowheaders,i,s,l,-Lt(a,"rowHeader"),S6,0,o,"x1",0,s,1,v)),r.colheaders&&(v=Lt(n.headerBand,pu,null),d=m0(e,r.colheaders,i,s,s,-Lt(a,"columnHeader"),S6,1,o,"y1",0,1,s,v)),r.rowfooters&&(v=Lt(n.footerBand,gu,null),p=m0(e,r.rowfooters,i,s,l,Lt(a,"rowFooter"),x6,0,o,"x2",s-1,s,1,v)),r.colfooters&&(v=Lt(n.footerBand,pu,null),g=m0(e,r.colfooters,i,s,s,Lt(a,"columnFooter"),x6,1,o,"y2",u-s,1,s,v)),r.rowtitle&&(y=Lt(n.titleAnchor,gu),b=Lt(a,"rowTitle"),b=y===pr?p+b:f-b,v=Lt(n.titleBand,gu,.5),E6(e,r.rowtitle,b,0,x,v)),r.coltitle&&(y=Lt(n.titleAnchor,pu),b=Lt(a,"columnTitle"),b=y===pr?g+b:d-b,v=Lt(n.titleBand,pu,.5),E6(e,r.coltitle,b,1,x,v))}function Hoe(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function qoe(e,t){return e.bounds[t]}function m0(e,t,n,r,i,o,a,s,l,u,f,d,p,g){var y=n.length,v=0,b=0,x,_,T,A,w,C,D,I,M;if(!y)return v;for(x=f;x<y;x+=d)n[x]&&(v=a(v,l(n[x],u)));if(!t.length)return v;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),v+=o,_=0,A=t.length;_<A;++_)e.dirty(t[_]),t[_].mark.bounds.clear();for(x=f,_=0,A=t.length;_<A;++_,x+=d){for(C=t[_],w=C.mark.bounds,T=x;T>=0&&(D=n[T])==null;T-=p);s?(I=g==null?D.x:Math.round(D.bounds.x1+g*D.bounds.width()),M=v):(I=v,M=g==null?D.y:Math.round(D.bounds.y1+g*D.bounds.height())),w.union(C.bounds.translate(I-(C.x||0),M-(C.y||0))),C.x=I,C.y=M,e.dirty(C),b=a(b,w[u])}return b}function E6(e,t,n,r,i,o){if(t){e.dirty(t);var a=n,s=n;r?a=Math.round(i.x1+o*i.width()):s=Math.round(i.y1+o*i.height()),t.bounds.translate(a-(t.x||0),s-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=a,t.y=s,e.dirty(t)}}function Goe(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function Yoe(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function Woe(e,t,n,r,i,o,a){const s=Goe(n,t),l=Yoe(e,s("offset",0)),u=s("anchor",HO),f=u===pr?1:u===jA?.5:0,d={align:UA,bounds:s("bounds",XO),columns:s("direction")==="vertical"?1:e.length,padding:s("margin",8),center:s("center"),nodirty:!0};switch(t){case sa:d.anchor={x:Math.floor(r.x1)-l,column:pr,y:f*(a||r.height()+2*r.y1),row:u};break;case ua:d.anchor={x:Math.ceil(r.x2)+l,y:f*(a||r.height()+2*r.y1),row:u};break;case vd:d.anchor={y:Math.floor(i.y1)-l,row:pr,x:f*(o||i.width()+2*i.x1),column:u};break;case Nu:d.anchor={y:Math.ceil(i.y2)+l,x:f*(o||i.width()+2*i.x1),column:u};break;case _oe:d.anchor={x:l,y:l};break;case Eoe:d.anchor={x:o-l,y:l,column:pr};break;case woe:d.anchor={x:l,y:a-l,row:pr};break;case Aoe:d.anchor={x:o-l,y:a-l,column:pr,row:pr};break}return d}function Xoe(e,t){var n=t.items[0],r=n.datum,i=n.orient,o=n.bounds,a=n.x,s=n.y,l,u;return n._bounds?n._bounds.clear().union(o):n._bounds=o.clone(),o.clear(),Zoe(e,n,n.items[0].items[0]),o=Qoe(n,o),l=2*n.padding,u=2*n.padding,o.empty()||(l=Math.ceil(o.width()+l),u=Math.ceil(o.height()+u)),r.type===Moe&&Koe(n.items[0].items[0].items[0].items),i!==WO&&(n.x=a=0,n.y=s=0),n.width=l,n.height=u,ms(o.set(a,s,a+l,s+u),n),n.mark.bounds.clear().union(o),n}function Qoe(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Zoe(e,t,n){var r=t.padding,i=r-n.x,o=r-n.y;if(!t.datum.title)(i||o)&&bp(e,n,i,o);else{var a=t.items[1].items[0],s=a.anchor,l=t.titlePadding||0,u=r-a.x,f=r-a.y;switch(a.orient){case sa:i+=Math.ceil(a.bounds.width())+l;break;case ua:case Nu:break;default:o+=a.bounds.height()+l}switch((i||o)&&bp(e,n,i,o),a.orient){case sa:f+=Of(t,n,a,s,1,1);break;case ua:u+=Of(t,n,a,pr,0,0)+l,f+=Of(t,n,a,s,1,1);break;case Nu:u+=Of(t,n,a,s,0,0),f+=Of(t,n,a,pr,-1,0,1)+l;break;default:u+=Of(t,n,a,s,0,0)}(u||f)&&bp(e,a,u,f),(u=Math.round(a.bounds.x1-r))<0&&(bp(e,n,-u,0),bp(e,a,-u,0))}}function Of(e,t,n,r,i,o,a){const s=e.datum.type!=="symbol",l=n.datum.vgrad,u=s&&(o||!l)&&!a?t.items[0]:t,f=u.bounds[i?"y2":"x2"]-e.padding,d=l&&o?f:0,p=l&&o?0:f,g=i<=0?0:RO(n);return Math.round(r===HO?d:r===pr?p-g:.5*(f-g))}function bp(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function Koe(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Joe(e,t,n,r,i){var o=t.items[0],a=o.frame,s=o.orient,l=o.anchor,u=o.offset,f=o.padding,d=o.items[0].items[0],p=o.items[1]&&o.items[1].items[0],g=s===sa||s===ua?r:n,y=0,v=0,b=0,x=0,_=0,T;if(a!==Qb?s===sa?(y=i.y2,g=i.y1):s===ua?(y=i.y1,g=i.y2):(y=i.x1,g=i.x2):s===sa&&(y=r,g=0),T=l===HO?y:l===pr?g:(y+g)/2,p&&p.text){switch(s){case vd:case Nu:_=d.bounds.height()+f;break;case sa:x=d.bounds.width()+f;break;case ua:x=-d.bounds.width()-f;break}Jn.clear().union(p.bounds),Jn.translate(x-(p.x||0),_-(p.y||0)),Hf(p,"x",x)|Hf(p,"y",_)&&(e.dirty(p),p.bounds.clear().union(Jn),p.mark.bounds.clear().union(Jn),e.dirty(p)),Jn.clear().union(p.bounds)}else Jn.clear();switch(Jn.union(d.bounds),s){case vd:v=T,b=i.y1-Jn.height()-u;break;case sa:v=i.x1-Jn.width()-u,b=T;break;case ua:v=i.x2+Jn.width()+u,b=T;break;case Nu:v=T,b=i.y2+u;break;default:v=o.x,b=o.y}return Hf(o,"x",v)|Hf(o,"y",b)&&(Jn.translate(v,b),e.dirty(o),o.bounds.clear().union(Jn),t.bounds.clear().union(Jn),e.dirty(o)),o.bounds}function bU(e){te.call(this,null,e)}ye(bU,te,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&Voe(n,r,e.layout),tse(n,r,e)}),ese(e.mark.group)?t.reflow():t}});function ese(e){return e&&e.mark.role!=="legend-entry"}function tse(e,t,n){var r=t.items,i=Math.max(0,t.width||0),o=Math.max(0,t.height||0),a=new ln().set(0,0,i,o),s=a.clone(),l=a.clone(),u=[],f,d,p,g,y,v;for(y=0,v=r.length;y<v;++y)switch(d=r[y],d.role){case qO:g=$oe(d)?s:l,g.union(Loe(e,d,i,o));break;case GO:f=d;break;case YO:u.push(Xoe(e,d));break;case Doe:case Ooe:case iU:case aU:case oU:case sU:case uU:case lU:s.union(d.bounds),l.union(d.bounds);break;default:a.union(d.bounds)}if(u.length){const b={};u.forEach(x=>{p=x.orient||ua,p!==WO&&(b[p]||(b[p]=[])).push(x)});for(const x in b){const _=b[x];vU(e,_,Woe(_,x,n.legends,s,l,i,o))}u.forEach(x=>{const _=x.bounds;if(_.equals(x._bounds)||(x.bounds=x._bounds,e.dirty(x),x.bounds=_,e.dirty(x)),n.autosize&&(n.autosize.type===cU||n.autosize.type===fU||n.autosize.type===dU))switch(x.orient){case sa:case ua:a.add(_.x1,0).add(_.x2,0);break;case vd:case Nu:a.add(0,_.y1).add(0,_.y2)}else a.union(_)})}a.union(s).union(l),f&&a.union(Joe(e,f,i,o,a)),t.clip&&a.set(0,0,t.width||0,t.height||0),nse(e,t,a,n)}function nse(e,t,n,r){const i=r.autosize||{},o=i.type;if(e._autosize<1||!o)return;let a=e._width,s=e._height,l=Math.max(0,t.width||0),u=Math.max(0,Math.ceil(-n.x1)),f=Math.max(0,t.height||0),d=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),g=Math.max(0,Math.ceil(n.y2-f));if(i.contains===Ioe){const y=e.padding();a-=y.left+y.right,s-=y.top+y.bottom}o===WO?(u=0,d=0,l=a,f=s):o===cU?(l=Math.max(0,a-u-p),f=Math.max(0,s-d-g)):o===fU?(l=Math.max(0,a-u-p),s=f+d+g):o===dU?(a=l+u+p,f=Math.max(0,s-d-g)):o===Roe&&(a=l+u+p,s=f+d+g),e._resizeView(a,s,l,f,[u,d],i.resize)}const rse=Object.freeze(Object.defineProperty({__proto__:null,bound:hU,identifier:QO,mark:pU,overlap:gU,render:yU,viewlayout:bU},Symbol.toStringTag,{value:"Module"}));function SU(e){te.call(this,null,e)}ye(SU,te,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.scale,a=e.count==null?e.values?e.values.length:10:e.count,s=pO(o,a,e.minstep),l=e.format||WL(n,o,s,e.formatSpecifier,e.formatType,!!e.values),u=e.values?YL(o,e.values,s):gO(o,s);return i&&(r.rem=i),i=u.map((f,d)=>gt({index:d/(u.length-1||1),value:f,label:l(f)})),e.extra&&i.length&&i.push(gt({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function xU(e){te.call(this,null,e)}function ise(){return gt({})}function ase(e){const t=Bd().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ye(xU,te,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||ise,o=e.key||Re,a=this.value;return ae(r.encode)&&(r.encode=null),a&&(e.modified("key")||t.modified(o))&&re("DataJoin does not support modified key function or fields."),a||(t=t.addAll(),this.value=a=ase(o)),t.visit(t.ADD,s=>{const l=o(s);let u=a.get(l);u?u.exit?(a.empty--,r.add.push(u)):r.mod.push(u):(u=i(s),a.set(l,u),r.add.push(u)),u.datum=s,u.exit=!1}),t.visit(t.MOD,s=>{const l=o(s),u=a.get(l);u&&(u.datum=s,r.mod.push(u))}),t.visit(t.REM,s=>{const l=o(s),u=a.get(l);s===u.datum&&!u.exit&&(r.rem.push(u),u.exit=!0,++a.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&a.empty>n.cleanThreshold)&&n.runAfter(a.clean),r}});function _U(e){te.call(this,null,e)}ye(_U,te,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,o=t.encode;if(ae(o))if(n.changed()||o.every(d=>i[d]))o=o[0],n.encode=null;else return t.StopPropagation;var a=o==="enter",s=i.update||eu,l=i.enter||eu,u=i.exit||eu,f=(o&&!a?i[o]:s)||eu;if(t.changed(t.ADD)&&(t.visit(t.ADD,d=>{l(d,e),s(d,e)}),n.modifies(l.output),n.modifies(s.output),f!==eu&&f!==s&&(t.visit(t.ADD,d=>{f(d,e)}),n.modifies(f.output))),t.changed(t.REM)&&u!==eu&&(t.visit(t.REM,d=>{u(d,e)}),n.modifies(u.output)),a||f!==eu){const d=t.MOD|(e.modified()?t.REFLOW:0);a?(t.visit(d,p=>{const g=l(p,e)||r;(f(p,e)||g)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(d,p=>{(f(p,e)||r)&&n.mod.push(p)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:t.StopPropagation}});function EU(e){te.call(this,[],e)}ye(EU,te,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,o=e.type||Y0,a=e.scale,s=+e.limit,l=pO(a,e.count==null?5:e.count,e.minstep),u=!!e.values||o===Y0,f=e.format||KL(n,a,l,o,e.formatSpecifier,e.formatType,u),d=e.values||ZL(a,l),p,g,y,v,b;return i&&(r.rem=i),o===Y0?(s&&d.length>s?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=d.slice(0,s-1),b=!0):i=d,Ge(y=e.size)?(!e.values&&a(i[0])===0&&(i=i.slice(1)),v=i.reduce((x,_)=>Math.max(x,y(_,e)),0)):y=lr(v=y||8),i=i.map((x,_)=>gt({index:_,label:f(x,_,i),value:x,offset:v,size:y(x,e)})),b&&(b=d[i.length],i.push(gt({index:i.length,label:`…${d.length-i.length} entries`,value:b,offset:v,size:y(b,e)})))):o===Mre?(p=a.domain(),g=HL(a,p[0],at(p)),d.length<3&&!e.values&&p[0]!==at(p)&&(d=[p[0],at(p)]),i=d.map((x,_)=>gt({index:_,label:f(x,_,d),value:x,perc:g(x)}))):(y=d.length-1,g=Bre(a),i=d.map((x,_)=>gt({index:_,label:f(x,_,d),value:x,perc:_?g(x):0,perc2:_===y?1:g(d[_+1])}))),r.source=i,r.add=i,this.value=i,r}});const ose=e=>e.source.x,sse=e=>e.source.y,use=e=>e.target.x,lse=e=>e.target.y;function ZO(e){te.call(this,{},e)}ZO.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ye(ZO,te,{transform(e,t){var n=e.sourceX||ose,r=e.sourceY||sse,i=e.targetX||use,o=e.targetY||lse,a=e.as||"path",s=e.orient||"vertical",l=e.shape||"line",u=w6.get(l+"-"+s)||w6.get(l);return u||re("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,f=>{f[a]=u(n(f),r(f),i(f),o(f))}),t.reflow(e.modified()).modifies(a)}});const wU=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,cse=(e,t,n,r)=>wU(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),AU=(e,t,n,r)=>{var i=n-e,o=r-t,a=Math.hypot(i,o)/2,s=180*Math.atan2(o,i)/Math.PI;return"M"+e+","+t+"A"+a+","+a+" "+s+" 0 1 "+n+","+r},fse=(e,t,n,r)=>AU(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),TU=(e,t,n,r)=>{const i=n-e,o=r-t,a=.2*(i+o),s=.2*(o-i);return"M"+e+","+t+"C"+(e+a)+","+(t+s)+" "+(n+s)+","+(r-a)+" "+n+","+r},dse=(e,t,n,r)=>TU(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),hse=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,pse=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,gse=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*o+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*a+","+t*s+"L"+r*a+","+r*s},mse=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},yse=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},vse=(e,t,n,r)=>{const i=Math.cos(e),o=Math.sin(e),a=Math.cos(n),s=Math.sin(n),l=(t+r)/2;return"M"+t*i+","+t*o+"C"+l*i+","+l*o+" "+l*a+","+l*s+" "+r*a+","+r*s},w6=Bd({line:wU,"line-radial":cse,arc:AU,"arc-radial":fse,curve:TU,"curve-radial":dse,"orthogonal-horizontal":hse,"orthogonal-vertical":pse,"orthogonal-radial":gse,"diagonal-horizontal":mse,"diagonal-vertical":yse,"diagonal-radial":vse});function KO(e){te.call(this,null,e)}KO.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ye(KO,te,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],o=e.field||jd,a=e.startAngle||0,s=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,u=l.map(o),f=u.length,d=a,p=(s-a)/U8(u),g=si(f),y,v,b;for(e.sort&&g.sort((x,_)=>u[x]-u[_]),y=0;y<f;++y)b=u[g[y]],v=l[g[y]],v[r]=d,v[i]=d+=b*p;return this.value=u,t.reflow(e.modified()).modifies(n)}});const bse=5;function Sse(e){const t=e.type;return!e.bins&&(t===dd||t===im||t===am)}function CU(e){return fO(e)&&e!==Ka}const xse=pa(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function DU(e){te.call(this,null,e),this.modified(!0)}ye(DU,te,{transform(e,t){var n=t.dataflow,r=this.value,i=_se(e);(!r||i!==r.type)&&(this.value=r=dt(i)());for(i in e)if(!xse[i]){if(i==="padding"&&CU(r.type))continue;Ge(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Dse(r,e,Cse(r,e,wse(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function _se(e){var t=e.type,n="",r;return t===Ka?Ka+"-"+dd:(Ese(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Ka+"-":r===3?Qd+"-":""),(n+t||dd).toLowerCase())}function Ese(e){const t=e.type;return fO(t)&&t!==ec&&t!==tc&&(e.scheme||e.range&&e.range.length&&e.range.every(Ee))}function wse(e,t,n){const r=Ase(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,o=e.type,a=t.zero||t.zero===void 0&&Sse(e),s,l;if(!i)return 0;if((a||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(s=(i=i.slice()).length-1||1,a&&(i[0]>0&&(i[0]=0),i[s]<0&&(i[s]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[s]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const u=l>i[s]?s+1:l<i[0]?0:s;u!==s&&n.warn("Scale domainMid exceeds domain min or max.",l),i.splice(u,0,l)}return CU(o)&&t.padding&&i[0]!==at(i)&&(i=Tse(o,i,t.range,t.padding,t.exponent,t.constant)),e.domain(OU(o,i,n)),o===sO&&e.unknown(t.domainImplicit?SA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&pO(e,t.nice)||null),i.length}function Ase(e,t,n){return t?(e.domain(OU(e.type,t,n)),t.length):-1}function Tse(e,t,n,r,i,o){var a=Math.abs(at(n)-n[0]),s=a/(a-2*r),l=e===fs?DC(t,null,s):e===am?Sv(t,null,s,.5):e===im?Sv(t,null,s,i||1):e===Fb?OC(t,null,s,o||1):CC(t,null,s);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function OU(e,t,n){if(LL(e)){var r=Math.abs(t.reduce((i,o)=>i+(o<0?-1:o>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+pe(t))}return t}function Cse(e,t,n){let r=t.bins;if(r&&!ae(r)){const i=e.domain(),o=i[0],a=at(i),s=r.step;let l=r.start==null?o:r.start,u=r.stop==null?a:r.stop;s||re("Scale bins parameter missing step property."),l<o&&(l=s*Math.ceil(o/s)),u>a&&(u=s*Math.floor(a/s)),r=si(l,u+s/2,s)}return r?e.bins=r:e.bins&&delete e.bins,e.type===uO&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Dse(e,t,n){var r=e.type,i=t.round||!1,o=t.range;if(t.rangeStep!=null)o=Ose(r,t,n);else if(t.scheme&&(o=Ise(r,t,n),Ge(o))){if(e.interpolator)return e.interpolator(o);re(`Scale type ${r} does not support interpolating color schemes.`)}if(o&&jL(r))return e.interpolator(zb(BA(o,t.reverse),t.interpolate,t.interpolateGamma));o&&t.interpolate&&e.interpolate?e.interpolate(dO(t.interpolate,t.interpolateGamma)):Ge(e.round)?e.round(i):Ge(e.rangeRound)&&e.interpolate(i?nm:Vu),o&&e.range(BA(o,t.reverse))}function Ose(e,t,n){e!==kL&&e!==CA&&re("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===CA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*oO(n,i,r)]}function Ise(e,t,n){var r=t.schemeExtent,i,o;return ae(t.scheme)?o=zb(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),o=hO(i),o||re(`Unrecognized scheme name: ${t.scheme}`)),n=e===$b?n+1:e===uO?n-1:e===hd||e===Pb?+t.schemeCount||bse:n,jL(e)?A6(o,r,t.reverse):Ge(o)?VL(A6(o,r),n):e===sO?o:o.slice(0,n)}function A6(e,t,n){return Ge(e)&&(t||n)?BL(e,BA(t||[0,1],n)):e}function BA(e,t){return t?e.slice().reverse():e}function IU(e){te.call(this,null,e)}ye(IU,te,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Ec(e.sort)),this.modified(n),t}});const T6="zero",MU="center",RU="normalize",kU=["y0","y1"];function JO(e){te.call(this,null,e)}JO.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:T6,values:[T6,MU,RU]},{name:"as",type:"string",array:!0,length:2,default:kU}]};ye(JO,te,{transform(e,t){var n=e.as||kU,r=n[0],i=n[1],o=Ec(e.sort),a=e.field||jd,s=e.offset===MU?Mse:e.offset===RU?Rse:kse,l,u,f,d;for(l=Nse(t.source,e.groupby,o,a),u=0,f=l.length,d=l.max;u<f;++u)s(l[u],d,a,r,i);return t.reflow(e.modified()).modifies(n)}});function Mse(e,t,n,r,i){for(var o=(t-e.sum)/2,a=e.length,s=0,l;s<a;++s)l=e[s],l[r]=o,l[i]=o+=Math.abs(n(l))}function Rse(e,t,n,r,i){for(var o=1/e.sum,a=0,s=e.length,l=0,u=0,f;l<s;++l)f=e[l],f[r]=a,f[i]=a=o*(u+=Math.abs(n(f)))}function kse(e,t,n,r,i){for(var o=0,a=0,s=e.length,l=0,u,f;l<s;++l)f=e[l],u=+n(f),u<0?(f[r]=a,f[i]=a+=u):(f[r]=o,f[i]=o+=u)}function Nse(e,t,n,r){var i=[],o=v=>v(f),a,s,l,u,f,d,p,g,y;if(t==null)i.push(e.slice());else for(a={},s=0,l=e.length;s<l;++s)f=e[s],d=t.map(o),p=a[d],p||(a[d]=p=[],i.push(p)),p.push(f);for(d=0,y=0,u=i.length;d<u;++d){for(p=i[d],s=0,g=0,l=p.length;s<l;++s)g+=Math.abs(r(p[s]));p.sum=g,g>y&&(y=g),n&&p.sort(n)}return i.max=y,i}const Fse=Object.freeze(Object.defineProperty({__proto__:null,axisticks:SU,datajoin:xU,encode:_U,legendentries:EU,linkpath:ZO,pie:KO,scale:DU,sortitems:IU,stack:JO},Symbol.toStringTag,{value:"Module"}));var Ne=1e-6,Zv=1e-12,Ke=Math.PI,Zt=Ke/2,Kv=Ke/4,Er=Ke*2,tn=180/Ke,Xe=Ke/180,it=Math.abs,Kd=Math.atan,Vi=Math.atan2,Fe=Math.cos,y0=Math.ceil,NU=Math.exp,VA=Math.hypot,Jv=Math.log,Y2=Math.pow,ke=Math.sin,Ni=Math.sign||function(e){return e>0?1:e<0?-1:0},wr=Math.sqrt,eI=Math.tan;function FU(e){return e>1?0:e<-1?Ke:Math.acos(e)}function Br(e){return e>1?Zt:e<-1?-Zt:Math.asin(e)}function jn(){}function e1(e,t){e&&D6.hasOwnProperty(e.type)&&D6[e.type](e,t)}var C6={Feature:function(e,t){e1(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)e1(n[r].geometry,t)}},D6={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){HA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)HA(n[r],t,0)},Polygon:function(e,t){O6(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)O6(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)e1(n[r],t)}};function HA(e,t,n){var r=-1,i=e.length-n,o;for(t.lineStart();++r<i;)o=e[r],t.point(o[0],o[1],o[2]);t.lineEnd()}function O6(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)HA(e[n],t,1);t.polygonEnd()}function Wo(e,t){e&&C6.hasOwnProperty(e.type)?C6[e.type](e,t):e1(e,t)}var t1=new xr,n1=new xr,PU,$U,qA,GA,YA,oo={point:jn,lineStart:jn,lineEnd:jn,polygonStart:function(){t1=new xr,oo.lineStart=Pse,oo.lineEnd=$se},polygonEnd:function(){var e=+t1;n1.add(e<0?Er+e:e),this.lineStart=this.lineEnd=this.point=jn},sphere:function(){n1.add(Er)}};function Pse(){oo.point=zse}function $se(){zU(PU,$U)}function zse(e,t){oo.point=zU,PU=e,$U=t,e*=Xe,t*=Xe,qA=e,GA=Fe(t=t/2+Kv),YA=ke(t)}function zU(e,t){e*=Xe,t*=Xe,t=t/2+Kv;var n=e-qA,r=n>=0?1:-1,i=r*n,o=Fe(t),a=ke(t),s=YA*a,l=GA*o+s*Fe(i),u=s*r*ke(i);t1.add(Vi(u,l)),qA=e,GA=o,YA=a}function Lse(e){return n1=new xr,Wo(e,oo),n1*2}function r1(e){return[Vi(e[1],e[0]),Br(e[2])]}function rc(e){var t=e[0],n=e[1],r=Fe(n);return[r*Fe(t),r*ke(t),ke(n)]}function v0(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function bd(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function W2(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function b0(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function i1(e){var t=wr(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Vt,Pr,Xt,ii,Rl,LU,jU,Zf,ag,au,ds,Go={point:WA,lineStart:I6,lineEnd:M6,polygonStart:function(){Go.point=BU,Go.lineStart=jse,Go.lineEnd=Use,ag=new xr,oo.polygonStart()},polygonEnd:function(){oo.polygonEnd(),Go.point=WA,Go.lineStart=I6,Go.lineEnd=M6,t1<0?(Vt=-(Xt=180),Pr=-(ii=90)):ag>Ne?ii=90:ag<-Ne&&(Pr=-90),ds[0]=Vt,ds[1]=Xt},sphere:function(){Vt=-(Xt=180),Pr=-(ii=90)}};function WA(e,t){au.push(ds=[Vt=e,Xt=e]),t<Pr&&(Pr=t),t>ii&&(ii=t)}function UU(e,t){var n=rc([e*Xe,t*Xe]);if(Zf){var r=bd(Zf,n),i=[r[1],-r[0],0],o=bd(i,r);i1(o),o=r1(o);var a=e-Rl,s=a>0?1:-1,l=o[0]*tn*s,u,f=it(a)>180;f^(s*Rl<l&&l<s*e)?(u=o[1]*tn,u>ii&&(ii=u)):(l=(l+360)%360-180,f^(s*Rl<l&&l<s*e)?(u=-o[1]*tn,u<Pr&&(Pr=u)):(t<Pr&&(Pr=t),t>ii&&(ii=t))),f?e<Rl?ri(Vt,e)>ri(Vt,Xt)&&(Xt=e):ri(e,Xt)>ri(Vt,Xt)&&(Vt=e):Xt>=Vt?(e<Vt&&(Vt=e),e>Xt&&(Xt=e)):e>Rl?ri(Vt,e)>ri(Vt,Xt)&&(Xt=e):ri(e,Xt)>ri(Vt,Xt)&&(Vt=e)}else au.push(ds=[Vt=e,Xt=e]);t<Pr&&(Pr=t),t>ii&&(ii=t),Zf=n,Rl=e}function I6(){Go.point=UU}function M6(){ds[0]=Vt,ds[1]=Xt,Go.point=WA,Zf=null}function BU(e,t){if(Zf){var n=e-Rl;ag.add(it(n)>180?n+(n>0?360:-360):n)}else LU=e,jU=t;oo.point(e,t),UU(e,t)}function jse(){oo.lineStart()}function Use(){BU(LU,jU),oo.lineEnd(),it(ag)>Ne&&(Vt=-(Xt=180)),ds[0]=Vt,ds[1]=Xt,Zf=null}function ri(e,t){return(t-=e)<0?t+360:t}function Bse(e,t){return e[0]-t[0]}function R6(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Vse(e){var t,n,r,i,o,a,s;if(ii=Xt=-(Vt=Pr=1/0),au=[],Wo(e,Go),n=au.length){for(au.sort(Bse),t=1,r=au[0],o=[r];t<n;++t)i=au[t],R6(r,i[0])||R6(r,i[1])?(ri(r[0],i[1])>ri(r[0],r[1])&&(r[1]=i[1]),ri(i[0],r[1])>ri(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=o.length-1,t=0,r=o[n];t<=n;r=i,++t)i=o[t],(s=ri(r[1],i[0]))>a&&(a=s,Vt=i[0],Xt=r[1])}return au=ds=null,Vt===1/0||Pr===1/0?[[NaN,NaN],[NaN,NaN]]:[[Vt,Pr],[Xt,ii]]}var Up,a1,o1,s1,u1,l1,c1,f1,XA,QA,ZA,VU,HU,gr,mr,yr,la={sphere:jn,point:tI,lineStart:k6,lineEnd:N6,polygonStart:function(){la.lineStart=Gse,la.lineEnd=Yse},polygonEnd:function(){la.lineStart=k6,la.lineEnd=N6}};function tI(e,t){e*=Xe,t*=Xe;var n=Fe(t);ym(n*Fe(e),n*ke(e),ke(t))}function ym(e,t,n){++Up,o1+=(e-o1)/Up,s1+=(t-s1)/Up,u1+=(n-u1)/Up}function k6(){la.point=Hse}function Hse(e,t){e*=Xe,t*=Xe;var n=Fe(t);gr=n*Fe(e),mr=n*ke(e),yr=ke(t),la.point=qse,ym(gr,mr,yr)}function qse(e,t){e*=Xe,t*=Xe;var n=Fe(t),r=n*Fe(e),i=n*ke(e),o=ke(t),a=Vi(wr((a=mr*o-yr*i)*a+(a=yr*r-gr*o)*a+(a=gr*i-mr*r)*a),gr*r+mr*i+yr*o);a1+=a,l1+=a*(gr+(gr=r)),c1+=a*(mr+(mr=i)),f1+=a*(yr+(yr=o)),ym(gr,mr,yr)}function N6(){la.point=tI}function Gse(){la.point=Wse}function Yse(){qU(VU,HU),la.point=tI}function Wse(e,t){VU=e,HU=t,e*=Xe,t*=Xe,la.point=qU;var n=Fe(t);gr=n*Fe(e),mr=n*ke(e),yr=ke(t),ym(gr,mr,yr)}function qU(e,t){e*=Xe,t*=Xe;var n=Fe(t),r=n*Fe(e),i=n*ke(e),o=ke(t),a=mr*o-yr*i,s=yr*r-gr*o,l=gr*i-mr*r,u=VA(a,s,l),f=Br(u),d=u&&-f/u;XA.add(d*a),QA.add(d*s),ZA.add(d*l),a1+=f,l1+=f*(gr+(gr=r)),c1+=f*(mr+(mr=i)),f1+=f*(yr+(yr=o)),ym(gr,mr,yr)}function Xse(e){Up=a1=o1=s1=u1=l1=c1=f1=0,XA=new xr,QA=new xr,ZA=new xr,Wo(e,la);var t=+XA,n=+QA,r=+ZA,i=VA(t,n,r);return i<Zv&&(t=l1,n=c1,r=f1,a1<Ne&&(t=o1,n=s1,r=u1),i=VA(t,n,r),i<Zv)?[NaN,NaN]:[Vi(n,t)*tn,Br(r/i)*tn]}function KA(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function JA(e,t){return it(e)>Ke&&(e-=Math.round(e/Er)*Er),[e,t]}JA.invert=JA;function GU(e,t,n){return(e%=Er)?t||n?KA(P6(e),$6(t,n)):P6(e):t||n?$6(t,n):JA}function F6(e){return function(t,n){return t+=e,it(t)>Ke&&(t-=Math.round(t/Er)*Er),[t,n]}}function P6(e){var t=F6(e);return t.invert=F6(-e),t}function $6(e,t){var n=Fe(e),r=ke(e),i=Fe(t),o=ke(t);function a(s,l){var u=Fe(l),f=Fe(s)*u,d=ke(s)*u,p=ke(l),g=p*n+f*r;return[Vi(d*i-g*o,f*n-p*r),Br(g*i+d*o)]}return a.invert=function(s,l){var u=Fe(l),f=Fe(s)*u,d=ke(s)*u,p=ke(l),g=p*i-d*o;return[Vi(d*i+p*o,f*n+g*r),Br(g*n-f*r)]},a}function Qse(e){e=GU(e[0]*Xe,e[1]*Xe,e.length>2?e[2]*Xe:0);function t(n){return n=e(n[0]*Xe,n[1]*Xe),n[0]*=tn,n[1]*=tn,n}return t.invert=function(n){return n=e.invert(n[0]*Xe,n[1]*Xe),n[0]*=tn,n[1]*=tn,n},t}function Zse(e,t,n,r,i,o){if(n){var a=Fe(t),s=ke(t),l=r*n;i==null?(i=t+r*Er,o=t-l/2):(i=z6(a,i),o=z6(a,o),(r>0?i<o:i>o)&&(i+=r*Er));for(var u,f=i;r>0?f>o:f<o;f-=l)u=r1([a,-s*Fe(f),-s*ke(f)]),e.point(u[0],u[1])}}function z6(e,t){t=rc(t),t[0]-=e,i1(t);var n=FU(-t[1]);return((-t[2]<0?-n:n)+Er-Ne)%Er}function YU(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:jn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function nv(e,t){return it(e[0]-t[0])<Ne&&it(e[1]-t[1])<Ne}function S0(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function WU(e,t,n,r,i){var o=[],a=[],s,l;if(e.forEach(function(y){if(!((v=y.length-1)<=0)){var v,b=y[0],x=y[v],_;if(nv(b,x)){if(!b[2]&&!x[2]){for(i.lineStart(),s=0;s<v;++s)i.point((b=y[s])[0],b[1]);i.lineEnd();return}x[0]+=2*Ne}o.push(_=new S0(b,y,null,!0)),a.push(_.o=new S0(b,null,_,!1)),o.push(_=new S0(x,y,null,!1)),a.push(_.o=new S0(x,null,_,!0))}}),!!o.length){for(a.sort(t),L6(o),L6(a),s=0,l=a.length;s<l;++s)a[s].e=n=!n;for(var u=o[0],f,d;;){for(var p=u,g=!0;p.v;)if((p=p.n)===u)return;f=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(g)for(s=0,l=f.length;s<l;++s)i.point((d=f[s])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(g)for(f=p.p.z,s=f.length-1;s>=0;--s)i.point((d=f[s])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,f=p.z,g=!g}while(!p.v);i.lineEnd()}}}function L6(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function X2(e){return it(e[0])<=Ke?e[0]:Ni(e[0])*((it(e[0])+Ke)%Er-Ke)}function Kse(e,t){var n=X2(t),r=t[1],i=ke(r),o=[ke(n),-Fe(n),0],a=0,s=0,l=new xr;i===1?r=Zt+Ne:i===-1&&(r=-Zt-Ne);for(var u=0,f=e.length;u<f;++u)if(p=(d=e[u]).length)for(var d,p,g=d[p-1],y=X2(g),v=g[1]/2+Kv,b=ke(v),x=Fe(v),_=0;_<p;++_,y=A,b=C,x=D,g=T){var T=d[_],A=X2(T),w=T[1]/2+Kv,C=ke(w),D=Fe(w),I=A-y,M=I>=0?1:-1,k=M*I,R=k>Ke,z=b*C;if(l.add(Vi(z*M*ke(k),x*D+z*Fe(k))),a+=R?I+M*Er:I,R^y>=n^A>=n){var P=bd(rc(g),rc(T));i1(P);var $=bd(o,P);i1($);var N=(R^I>=0?-1:1)*Br($[2]);(r>N||r===N&&(P[0]||P[1]))&&(s+=R^I>=0?1:-1)}}return(a<-Ne||a<Ne&&l<-Zv)^s&1}function XU(e,t,n,r){return function(i){var o=t(i),a=YU(),s=t(a),l=!1,u,f,d,p={point:g,lineStart:v,lineEnd:b,polygonStart:function(){p.point=x,p.lineStart=_,p.lineEnd=T,f=[],u=[]},polygonEnd:function(){p.point=g,p.lineStart=v,p.lineEnd=b,f=j8(f);var A=Kse(u,r);f.length?(l||(i.polygonStart(),l=!0),WU(f,eue,A,n,i)):A&&(l||(i.polygonStart(),l=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),f=u=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function g(A,w){e(A,w)&&i.point(A,w)}function y(A,w){o.point(A,w)}function v(){p.point=y,o.lineStart()}function b(){p.point=g,o.lineEnd()}function x(A,w){d.push([A,w]),s.point(A,w)}function _(){s.lineStart(),d=[]}function T(){x(d[0][0],d[0][1]),s.lineEnd();var A=s.clean(),w=a.result(),C,D=w.length,I,M,k;if(d.pop(),u.push(d),d=null,!!D){if(A&1){if(M=w[0],(I=M.length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),C=0;C<I;++C)i.point((k=M[C])[0],k[1]);i.lineEnd()}return}D>1&&A&2&&w.push(w.pop().concat(w.shift())),f.push(w.filter(Jse))}}return p}}function Jse(e){return e.length>1}function eue(e,t){return((e=e.x)[0]<0?e[1]-Zt-Ne:Zt-e[1])-((t=t.x)[0]<0?t[1]-Zt-Ne:Zt-t[1])}const j6=XU(function(){return!0},tue,rue,[-Ke,-Zt]);function tue(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(o,a){var s=o>0?Ke:-Ke,l=it(o-t);it(l-Ke)<Ne?(e.point(t,n=(n+a)/2>0?Zt:-Zt),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),e.point(o,n),i=0):r!==s&&l>=Ke&&(it(t-r)<Ne&&(t-=r*Ne),it(o-s)<Ne&&(o-=s*Ne),n=nue(t,n,o,a),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(s,n),i=0),e.point(t=o,n=a),r=s},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function nue(e,t,n,r){var i,o,a=ke(e-n);return it(a)>Ne?Kd((ke(t)*(o=Fe(r))*ke(n)-ke(r)*(i=Fe(t))*ke(e))/(i*o*a)):(t+r)/2}function rue(e,t,n,r){var i;if(e==null)i=n*Zt,r.point(-Ke,i),r.point(0,i),r.point(Ke,i),r.point(Ke,0),r.point(Ke,-i),r.point(0,-i),r.point(-Ke,-i),r.point(-Ke,0),r.point(-Ke,i);else if(it(e[0]-t[0])>Ne){var o=e[0]<t[0]?Ke:-Ke;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function iue(e){var t=Fe(e),n=2*Xe,r=t>0,i=it(t)>Ne;function o(f,d,p,g){Zse(g,e,n,p,f,d)}function a(f,d){return Fe(f)*Fe(d)>t}function s(f){var d,p,g,y,v;return{lineStart:function(){y=g=!1,v=1},point:function(b,x){var _=[b,x],T,A=a(b,x),w=r?A?0:u(b,x):A?u(b+(b<0?Ke:-Ke),x):0;if(!d&&(y=g=A)&&f.lineStart(),A!==g&&(T=l(d,_),(!T||nv(d,T)||nv(_,T))&&(_[2]=1)),A!==g)v=0,A?(f.lineStart(),T=l(_,d),f.point(T[0],T[1])):(T=l(d,_),f.point(T[0],T[1],2),f.lineEnd()),d=T;else if(i&&d&&r^A){var C;!(w&p)&&(C=l(_,d,!0))&&(v=0,r?(f.lineStart(),f.point(C[0][0],C[0][1]),f.point(C[1][0],C[1][1]),f.lineEnd()):(f.point(C[1][0],C[1][1]),f.lineEnd(),f.lineStart(),f.point(C[0][0],C[0][1],3)))}A&&(!d||!nv(d,_))&&f.point(_[0],_[1]),d=_,g=A,p=w},lineEnd:function(){g&&f.lineEnd(),d=null},clean:function(){return v|(y&&g)<<1}}}function l(f,d,p){var g=rc(f),y=rc(d),v=[1,0,0],b=bd(g,y),x=v0(b,b),_=b[0],T=x-_*_;if(!T)return!p&&f;var A=t*x/T,w=-t*_/T,C=bd(v,b),D=b0(v,A),I=b0(b,w);W2(D,I);var M=C,k=v0(D,M),R=v0(M,M),z=k*k-R*(v0(D,D)-1);if(!(z<0)){var P=wr(z),$=b0(M,(-k-P)/R);if(W2($,D),$=r1($),!p)return $;var N=f[0],L=d[0],B=f[1],q=d[1],H;L<N&&(H=N,N=L,L=H);var U=L-N,Y=it(U-Ke)<Ne,Q=Y||U<Ne;if(!Y&&q<B&&(H=B,B=q,q=H),Q?Y?B+q>0^$[1]<(it($[0]-N)<Ne?B:q):B<=$[1]&&$[1]<=q:U>Ke^(N<=$[0]&&$[0]<=L)){var J=b0(M,(-k+P)/R);return W2(J,D),[$,r1(J)]}}}function u(f,d){var p=r?e:Ke-e,g=0;return f<-p?g|=1:f>p&&(g|=2),d<-p?g|=4:d>p&&(g|=8),g}return XU(a,s,o,r?[0,-e]:[-Ke,e-Ke])}function aue(e,t,n,r,i,o){var a=e[0],s=e[1],l=t[0],u=t[1],f=0,d=1,p=l-a,g=u-s,y;if(y=n-a,!(!p&&y>0)){if(y/=p,p<0){if(y<f)return;y<d&&(d=y)}else if(p>0){if(y>d)return;y>f&&(f=y)}if(y=i-a,!(!p&&y<0)){if(y/=p,p<0){if(y>d)return;y>f&&(f=y)}else if(p>0){if(y<f)return;y<d&&(d=y)}if(y=r-s,!(!g&&y>0)){if(y/=g,g<0){if(y<f)return;y<d&&(d=y)}else if(g>0){if(y>d)return;y>f&&(f=y)}if(y=o-s,!(!g&&y<0)){if(y/=g,g<0){if(y>d)return;y>f&&(f=y)}else if(g>0){if(y<f)return;y<d&&(d=y)}return f>0&&(e[0]=a+f*p,e[1]=s+f*g),d<1&&(t[0]=a+d*p,t[1]=s+d*g),!0}}}}}var Bp=1e9,x0=-Bp;function QU(e,t,n,r){function i(u,f){return e<=u&&u<=n&&t<=f&&f<=r}function o(u,f,d,p){var g=0,y=0;if(u==null||(g=a(u,d))!==(y=a(f,d))||l(u,f)<0^d>0)do p.point(g===0||g===3?e:n,g>1?r:t);while((g=(g+d+4)%4)!==y);else p.point(f[0],f[1])}function a(u,f){return it(u[0]-e)<Ne?f>0?0:3:it(u[0]-n)<Ne?f>0?2:1:it(u[1]-t)<Ne?f>0?1:0:f>0?3:2}function s(u,f){return l(u.x,f.x)}function l(u,f){var d=a(u,1),p=a(f,1);return d!==p?d-p:d===0?f[1]-u[1]:d===1?u[0]-f[0]:d===2?u[1]-f[1]:f[0]-u[0]}return function(u){var f=u,d=YU(),p,g,y,v,b,x,_,T,A,w,C,D={point:I,lineStart:z,lineEnd:P,polygonStart:k,polygonEnd:R};function I(N,L){i(N,L)&&f.point(N,L)}function M(){for(var N=0,L=0,B=g.length;L<B;++L)for(var q=g[L],H=1,U=q.length,Y=q[0],Q,J,de=Y[0],ve=Y[1];H<U;++H)Q=de,J=ve,Y=q[H],de=Y[0],ve=Y[1],J<=r?ve>r&&(de-Q)*(r-J)>(ve-J)*(e-Q)&&++N:ve<=r&&(de-Q)*(r-J)<(ve-J)*(e-Q)&&--N;return N}function k(){f=d,p=[],g=[],C=!0}function R(){var N=M(),L=C&&N,B=(p=j8(p)).length;(L||B)&&(u.polygonStart(),L&&(u.lineStart(),o(null,null,1,u),u.lineEnd()),B&&WU(p,s,N,o,u),u.polygonEnd()),f=u,p=g=y=null}function z(){D.point=$,g&&g.push(y=[]),w=!0,A=!1,_=T=NaN}function P(){p&&($(v,b),x&&A&&d.rejoin(),p.push(d.result())),D.point=I,A&&f.lineEnd()}function $(N,L){var B=i(N,L);if(g&&y.push([N,L]),w)v=N,b=L,x=B,w=!1,B&&(f.lineStart(),f.point(N,L));else if(B&&A)f.point(N,L);else{var q=[_=Math.max(x0,Math.min(Bp,_)),T=Math.max(x0,Math.min(Bp,T))],H=[N=Math.max(x0,Math.min(Bp,N)),L=Math.max(x0,Math.min(Bp,L))];aue(q,H,e,t,n,r)?(A||(f.lineStart(),f.point(q[0],q[1])),f.point(H[0],H[1]),B||f.lineEnd(),C=!1):B&&(f.lineStart(),f.point(N,L),C=!1)}_=N,T=L,A=B}return D}}function U6(e,t,n){var r=si(e,t-Ne,n).concat(t);return function(i){return r.map(function(o){return[i,o]})}}function B6(e,t,n){var r=si(e,t-Ne,n).concat(t);return function(i){return r.map(function(o){return[o,i]})}}function oue(){var e,t,n,r,i,o,a,s,l=10,u=l,f=90,d=360,p,g,y,v,b=2.5;function x(){return{type:"MultiLineString",coordinates:_()}}function _(){return si(y0(r/f)*f,n,f).map(y).concat(si(y0(s/d)*d,a,d).map(v)).concat(si(y0(t/l)*l,e,l).filter(function(T){return it(T%f)>Ne}).map(p)).concat(si(y0(o/u)*u,i,u).filter(function(T){return it(T%d)>Ne}).map(g))}return x.lines=function(){return _().map(function(T){return{type:"LineString",coordinates:T}})},x.outline=function(){return{type:"Polygon",coordinates:[y(r).concat(v(a).slice(1),y(n).reverse().slice(1),v(s).reverse().slice(1))]}},x.extent=function(T){return arguments.length?x.extentMajor(T).extentMinor(T):x.extentMinor()},x.extentMajor=function(T){return arguments.length?(r=+T[0][0],n=+T[1][0],s=+T[0][1],a=+T[1][1],r>n&&(T=r,r=n,n=T),s>a&&(T=s,s=a,a=T),x.precision(b)):[[r,s],[n,a]]},x.extentMinor=function(T){return arguments.length?(t=+T[0][0],e=+T[1][0],o=+T[0][1],i=+T[1][1],t>e&&(T=t,t=e,e=T),o>i&&(T=o,o=i,i=T),x.precision(b)):[[t,o],[e,i]]},x.step=function(T){return arguments.length?x.stepMajor(T).stepMinor(T):x.stepMinor()},x.stepMajor=function(T){return arguments.length?(f=+T[0],d=+T[1],x):[f,d]},x.stepMinor=function(T){return arguments.length?(l=+T[0],u=+T[1],x):[l,u]},x.precision=function(T){return arguments.length?(b=+T,p=U6(o,i,90),g=B6(t,e,b),y=U6(s,a,90),v=B6(r,n,b),x):b},x.extentMajor([[-180,-90+Ne],[180,90-Ne]]).extentMinor([[-180,-80-Ne],[180,80+Ne]])}const Dg=e=>e;var Q2=new xr,eT=new xr,ZU,KU,tT,nT,Xo={point:jn,lineStart:jn,lineEnd:jn,polygonStart:function(){Xo.lineStart=sue,Xo.lineEnd=lue},polygonEnd:function(){Xo.lineStart=Xo.lineEnd=Xo.point=jn,Q2.add(it(eT)),eT=new xr},result:function(){var e=Q2/2;return Q2=new xr,e}};function sue(){Xo.point=uue}function uue(e,t){Xo.point=JU,ZU=tT=e,KU=nT=t}function JU(e,t){eT.add(nT*e-tT*t),tT=e,nT=t}function lue(){JU(ZU,KU)}var Sd=1/0,d1=Sd,Og=-Sd,h1=Og,p1={point:cue,lineStart:jn,lineEnd:jn,polygonStart:jn,polygonEnd:jn,result:function(){var e=[[Sd,d1],[Og,h1]];return Og=h1=-(d1=Sd=1/0),e}};function cue(e,t){e<Sd&&(Sd=e),e>Og&&(Og=e),t<d1&&(d1=t),t>h1&&(h1=t)}var rT=0,iT=0,Vp=0,g1=0,m1=0,qf=0,aT=0,oT=0,Hp=0,eB,tB,Ga,Ya,Ri={point:ic,lineStart:V6,lineEnd:H6,polygonStart:function(){Ri.lineStart=hue,Ri.lineEnd=pue},polygonEnd:function(){Ri.point=ic,Ri.lineStart=V6,Ri.lineEnd=H6},result:function(){var e=Hp?[aT/Hp,oT/Hp]:qf?[g1/qf,m1/qf]:Vp?[rT/Vp,iT/Vp]:[NaN,NaN];return rT=iT=Vp=g1=m1=qf=aT=oT=Hp=0,e}};function ic(e,t){rT+=e,iT+=t,++Vp}function V6(){Ri.point=fue}function fue(e,t){Ri.point=due,ic(Ga=e,Ya=t)}function due(e,t){var n=e-Ga,r=t-Ya,i=wr(n*n+r*r);g1+=i*(Ga+e)/2,m1+=i*(Ya+t)/2,qf+=i,ic(Ga=e,Ya=t)}function H6(){Ri.point=ic}function hue(){Ri.point=gue}function pue(){nB(eB,tB)}function gue(e,t){Ri.point=nB,ic(eB=Ga=e,tB=Ya=t)}function nB(e,t){var n=e-Ga,r=t-Ya,i=wr(n*n+r*r);g1+=i*(Ga+e)/2,m1+=i*(Ya+t)/2,qf+=i,i=Ya*e-Ga*t,aT+=i*(Ga+e),oT+=i*(Ya+t),Hp+=i*3,ic(Ga=e,Ya=t)}function rB(e){this._context=e}rB.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Er);break}}},result:jn};var sT=new xr,Z2,iB,aB,qp,Gp,Ig={point:jn,lineStart:function(){Ig.point=mue},lineEnd:function(){Z2&&oB(iB,aB),Ig.point=jn},polygonStart:function(){Z2=!0},polygonEnd:function(){Z2=null},result:function(){var e=+sT;return sT=new xr,e}};function mue(e,t){Ig.point=oB,iB=qp=e,aB=Gp=t}function oB(e,t){qp-=e,Gp-=t,sT.add(wr(qp*qp+Gp*Gp)),qp=e,Gp=t}let q6,y1,G6,Y6;class W6{constructor(t){this._append=t==null?sB:yue(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==G6||this._append!==y1){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,G6=r,y1=this._append,Y6=this._,this._=i}this._+=Y6;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sB(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function yue(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sB;if(t!==q6){const n=10**t;q6=t,y1=function(i){let o=1;this._+=i[0];for(const a=i.length;o<a;++o)this._+=Math.round(arguments[o]*n)/n+i[o]}}return y1}function uB(e,t){let n=3,r=4.5,i,o;function a(s){return s&&(typeof r=="function"&&o.pointRadius(+r.apply(this,arguments)),Wo(s,i(o))),o.result()}return a.area=function(s){return Wo(s,i(Xo)),Xo.result()},a.measure=function(s){return Wo(s,i(Ig)),Ig.result()},a.bounds=function(s){return Wo(s,i(p1)),p1.result()},a.centroid=function(s){return Wo(s,i(Ri)),Ri.result()},a.projection=function(s){return arguments.length?(i=s==null?(e=null,Dg):(e=s).stream,a):e},a.context=function(s){return arguments.length?(o=s==null?(t=null,new W6(n)):new rB(t=s),typeof r!="function"&&o.pointRadius(r),a):t},a.pointRadius=function(s){return arguments.length?(r=typeof s=="function"?s:(o.pointRadius(+s),+s),a):r},a.digits=function(s){if(!arguments.length)return n;if(s==null)n=null;else{const l=Math.floor(s);if(!(l>=0))throw new RangeError(`invalid digits: ${s}`);n=l}return t===null&&(o=new W6(n)),a},a.projection(e).digits(n).context(t)}function Zb(e){return function(t){var n=new uT;for(var r in e)n[r]=e[r];return n.stream=t,n}}function uT(){}uT.prototype={constructor:uT,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function nI(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Wo(n,e.stream(p1)),t(p1.result()),r!=null&&e.clipExtent(r),e}function Kb(e,t,n){return nI(e,function(r){var i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],a=Math.min(i/(r[1][0]-r[0][0]),o/(r[1][1]-r[0][1])),s=+t[0][0]+(i-a*(r[1][0]+r[0][0]))/2,l=+t[0][1]+(o-a*(r[1][1]+r[0][1]))/2;e.scale(150*a).translate([s,l])},n)}function rI(e,t,n){return Kb(e,[[0,0],t],n)}function iI(e,t,n){return nI(e,function(r){var i=+t,o=i/(r[1][0]-r[0][0]),a=(i-o*(r[1][0]+r[0][0]))/2,s=-o*r[0][1];e.scale(150*o).translate([a,s])},n)}function aI(e,t,n){return nI(e,function(r){var i=+t,o=i/(r[1][1]-r[0][1]),a=-o*r[0][0],s=(i-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,s])},n)}var X6=16,vue=Fe(30*Xe);function Q6(e,t){return+t?Sue(e,t):bue(e)}function bue(e){return Zb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Sue(e,t){function n(r,i,o,a,s,l,u,f,d,p,g,y,v,b){var x=u-r,_=f-i,T=x*x+_*_;if(T>4*t&&v--){var A=a+p,w=s+g,C=l+y,D=wr(A*A+w*w+C*C),I=Br(C/=D),M=it(it(C)-1)<Ne||it(o-d)<Ne?(o+d)/2:Vi(w,A),k=e(M,I),R=k[0],z=k[1],P=R-r,$=z-i,N=_*P-x*$;(N*N/T>t||it((x*P+_*$)/T-.5)>.3||a*p+s*g+l*y<vue)&&(n(r,i,o,a,s,l,R,z,M,A/=D,w/=D,C,v,b),b.point(R,z),n(R,z,M,A,w,C,u,f,d,p,g,y,v,b))}}return function(r){var i,o,a,s,l,u,f,d,p,g,y,v,b={point:x,lineStart:_,lineEnd:A,polygonStart:function(){r.polygonStart(),b.lineStart=w},polygonEnd:function(){r.polygonEnd(),b.lineStart=_}};function x(I,M){I=e(I,M),r.point(I[0],I[1])}function _(){d=NaN,b.point=T,r.lineStart()}function T(I,M){var k=rc([I,M]),R=e(I,M);n(d,p,f,g,y,v,d=R[0],p=R[1],f=I,g=k[0],y=k[1],v=k[2],X6,r),r.point(d,p)}function A(){b.point=x,r.lineEnd()}function w(){_(),b.point=C,b.lineEnd=D}function C(I,M){T(i=I,M),o=d,a=p,s=g,l=y,u=v,b.point=T}function D(){n(d,p,f,g,y,v,o,a,i,s,l,u,X6,r),b.lineEnd=A,A()}return b}}var xue=Zb({point:function(e,t){this.stream.point(e*Xe,t*Xe)}});function _ue(e){return Zb({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Eue(e,t,n,r,i){function o(a,s){return a*=r,s*=i,[t+e*a,n-e*s]}return o.invert=function(a,s){return[(a-t)/e*r,(n-s)/e*i]},o}function Z6(e,t,n,r,i,o){if(!o)return Eue(e,t,n,r,i);var a=Fe(o),s=ke(o),l=a*e,u=s*e,f=a/e,d=s/e,p=(s*n-a*t)/e,g=(s*t+a*n)/e;function y(v,b){return v*=r,b*=i,[l*v-u*b+t,n-u*v-l*b]}return y.invert=function(v,b){return[r*(f*v-d*b+p),i*(g-d*v-f*b)]},y}function mo(e){return lB(function(){return e})()}function lB(e){var t,n=150,r=480,i=250,o=0,a=0,s=0,l=0,u=0,f,d=0,p=1,g=1,y=null,v=j6,b=null,x,_,T,A=Dg,w=.5,C,D,I,M,k;function R(N){return I(N[0]*Xe,N[1]*Xe)}function z(N){return N=I.invert(N[0],N[1]),N&&[N[0]*tn,N[1]*tn]}R.stream=function(N){return M&&k===N?M:M=xue(_ue(f)(v(C(A(k=N)))))},R.preclip=function(N){return arguments.length?(v=N,y=void 0,$()):v},R.postclip=function(N){return arguments.length?(A=N,b=x=_=T=null,$()):A},R.clipAngle=function(N){return arguments.length?(v=+N?iue(y=N*Xe):(y=null,j6),$()):y*tn},R.clipExtent=function(N){return arguments.length?(A=N==null?(b=x=_=T=null,Dg):QU(b=+N[0][0],x=+N[0][1],_=+N[1][0],T=+N[1][1]),$()):b==null?null:[[b,x],[_,T]]},R.scale=function(N){return arguments.length?(n=+N,P()):n},R.translate=function(N){return arguments.length?(r=+N[0],i=+N[1],P()):[r,i]},R.center=function(N){return arguments.length?(o=N[0]%360*Xe,a=N[1]%360*Xe,P()):[o*tn,a*tn]},R.rotate=function(N){return arguments.length?(s=N[0]%360*Xe,l=N[1]%360*Xe,u=N.length>2?N[2]%360*Xe:0,P()):[s*tn,l*tn,u*tn]},R.angle=function(N){return arguments.length?(d=N%360*Xe,P()):d*tn},R.reflectX=function(N){return arguments.length?(p=N?-1:1,P()):p<0},R.reflectY=function(N){return arguments.length?(g=N?-1:1,P()):g<0},R.precision=function(N){return arguments.length?(C=Q6(D,w=N*N),$()):wr(w)},R.fitExtent=function(N,L){return Kb(R,N,L)},R.fitSize=function(N,L){return rI(R,N,L)},R.fitWidth=function(N,L){return iI(R,N,L)},R.fitHeight=function(N,L){return aI(R,N,L)};function P(){var N=Z6(n,0,0,p,g,d).apply(null,t(o,a)),L=Z6(n,r-N[0],i-N[1],p,g,d);return f=GU(s,l,u),D=KA(t,L),I=KA(f,D),C=Q6(D,w),$()}function $(){return M=k=null,R}return function(){return t=e.apply(this,arguments),R.invert=t.invert&&z,P()}}function oI(e){var t=0,n=Ke/3,r=lB(e),i=r(t,n);return i.parallels=function(o){return arguments.length?r(t=o[0]*Xe,n=o[1]*Xe):[t*tn,n*tn]},i}function wue(e){var t=Fe(e);function n(r,i){return[r*t,ke(i)/t]}return n.invert=function(r,i){return[r/t,Br(i*t)]},n}function Aue(e,t){var n=ke(e),r=(n+ke(t))/2;if(it(r)<Ne)return wue(e);var i=1+n*(2*r-n),o=wr(i)/r;function a(s,l){var u=wr(i-2*r*ke(l))/r;return[u*ke(s*=r),o-u*Fe(s)]}return a.invert=function(s,l){var u=o-l,f=Vi(s,it(u))*Ni(u);return u*r<0&&(f-=Ke*Ni(s)*Ni(u)),[f/r,Br((i-(s*s+u*u)*r*r)/(2*r))]},a}function v1(){return oI(Aue).scale(155.424).center([0,33.6442])}function cB(){return v1().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Tue(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Cue(){var e,t,n=cB(),r,i=v1().rotate([154,0]).center([-2,58.5]).parallels([55,65]),o,a=v1().rotate([157,0]).center([-3,19.9]).parallels([8,18]),s,l,u={point:function(p,g){l=[p,g]}};function f(p){var g=p[0],y=p[1];return l=null,r.point(g,y),l||(o.point(g,y),l)||(s.point(g,y),l)}f.invert=function(p){var g=n.scale(),y=n.translate(),v=(p[0]-y[0])/g,b=(p[1]-y[1])/g;return(b>=.12&&b<.234&&v>=-.425&&v<-.214?i:b>=.166&&b<.234&&v>=-.214&&v<-.115?a:n).invert(p)},f.stream=function(p){return e&&t===p?e:e=Tue([n.stream(t=p),i.stream(p),a.stream(p)])},f.precision=function(p){return arguments.length?(n.precision(p),i.precision(p),a.precision(p),d()):n.precision()},f.scale=function(p){return arguments.length?(n.scale(p),i.scale(p*.35),a.scale(p),f.translate(n.translate())):n.scale()},f.translate=function(p){if(!arguments.length)return n.translate();var g=n.scale(),y=+p[0],v=+p[1];return r=n.translate(p).clipExtent([[y-.455*g,v-.238*g],[y+.455*g,v+.238*g]]).stream(u),o=i.translate([y-.307*g,v+.201*g]).clipExtent([[y-.425*g+Ne,v+.12*g+Ne],[y-.214*g-Ne,v+.234*g-Ne]]).stream(u),s=a.translate([y-.205*g,v+.212*g]).clipExtent([[y-.214*g+Ne,v+.166*g+Ne],[y-.115*g-Ne,v+.234*g-Ne]]).stream(u),d()},f.fitExtent=function(p,g){return Kb(f,p,g)},f.fitSize=function(p,g){return rI(f,p,g)},f.fitWidth=function(p,g){return iI(f,p,g)},f.fitHeight=function(p,g){return aI(f,p,g)};function d(){return e=t=null,f}return f.scale(1070)}function fB(e){return function(t,n){var r=Fe(t),i=Fe(n),o=e(r*i);return o===1/0?[2,0]:[o*i*ke(t),o*ke(n)]}}function vm(e){return function(t,n){var r=wr(t*t+n*n),i=e(r),o=ke(i),a=Fe(i);return[Vi(t*o,r*a),Br(r&&n*o/r)]}}var dB=fB(function(e){return wr(2/(1+e))});dB.invert=vm(function(e){return 2*Br(e/2)});function Due(){return mo(dB).scale(124.75).clipAngle(180-.001)}var hB=fB(function(e){return(e=FU(e))&&e/ke(e)});hB.invert=vm(function(e){return e});function Oue(){return mo(hB).scale(79.4188).clipAngle(180-.001)}function Jb(e,t){return[e,Jv(eI((Zt+t)/2))]}Jb.invert=function(e,t){return[e,2*Kd(NU(t))-Zt]};function Iue(){return pB(Jb).scale(961/Er)}function pB(e){var t=mo(e),n=t.center,r=t.scale,i=t.translate,o=t.clipExtent,a=null,s,l,u;t.scale=function(d){return arguments.length?(r(d),f()):r()},t.translate=function(d){return arguments.length?(i(d),f()):i()},t.center=function(d){return arguments.length?(n(d),f()):n()},t.clipExtent=function(d){return arguments.length?(d==null?a=s=l=u=null:(a=+d[0][0],s=+d[0][1],l=+d[1][0],u=+d[1][1]),f()):a==null?null:[[a,s],[l,u]]};function f(){var d=Ke*r(),p=t(Qse(t.rotate()).invert([0,0]));return o(a==null?[[p[0]-d,p[1]-d],[p[0]+d,p[1]+d]]:e===Jb?[[Math.max(p[0]-d,a),s],[Math.min(p[0]+d,l),u]]:[[a,Math.max(p[1]-d,s)],[l,Math.min(p[1]+d,u)]])}return f()}function _0(e){return eI((Zt+e)/2)}function Mue(e,t){var n=Fe(e),r=e===t?ke(e):Jv(n/Fe(t))/Jv(_0(t)/_0(e)),i=n*Y2(_0(e),r)/r;if(!r)return Jb;function o(a,s){i>0?s<-Zt+Ne&&(s=-Zt+Ne):s>Zt-Ne&&(s=Zt-Ne);var l=i/Y2(_0(s),r);return[l*ke(r*a),i-l*Fe(r*a)]}return o.invert=function(a,s){var l=i-s,u=Ni(r)*wr(a*a+l*l),f=Vi(a,it(l))*Ni(l);return l*r<0&&(f-=Ke*Ni(a)*Ni(l)),[f/r,2*Kd(Y2(i/u,1/r))-Zt]},o}function Rue(){return oI(Mue).scale(109.5).parallels([30,30])}function b1(e,t){return[e,t]}b1.invert=b1;function kue(){return mo(b1).scale(152.63)}function Nue(e,t){var n=Fe(e),r=e===t?ke(e):(n-Fe(t))/(t-e),i=n/r+e;if(it(r)<Ne)return b1;function o(a,s){var l=i-s,u=r*a;return[l*ke(u),i-l*Fe(u)]}return o.invert=function(a,s){var l=i-s,u=Vi(a,it(l))*Ni(l);return l*r<0&&(u-=Ke*Ni(a)*Ni(l)),[u/r,i-Ni(r)*wr(a*a+l*l)]},o}function Fue(){return oI(Nue).scale(131.154).center([0,13.9389])}var og=1.340264,sg=-.081106,ug=893e-6,lg=.003796,S1=wr(3)/2,Pue=12;function gB(e,t){var n=Br(S1*ke(t)),r=n*n,i=r*r*r;return[e*Fe(n)/(S1*(og+3*sg*r+i*(7*ug+9*lg*r))),n*(og+sg*r+i*(ug+lg*r))]}gB.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,o=0,a,s,l;o<Pue&&(s=n*(og+sg*r+i*(ug+lg*r))-t,l=og+3*sg*r+i*(7*ug+9*lg*r),n-=a=s/l,r=n*n,i=r*r*r,!(it(a)<Zv));++o);return[S1*e*(og+3*sg*r+i*(7*ug+9*lg*r))/Fe(n),Br(ke(n)/S1)]};function $ue(){return mo(gB).scale(177.158)}function mB(e,t){var n=Fe(t),r=Fe(e)*n;return[n*ke(e)/r,ke(t)/r]}mB.invert=vm(Kd);function zue(){return mo(mB).scale(144.049).clipAngle(60)}function Lue(){var e=1,t=0,n=0,r=1,i=1,o=0,a,s,l=null,u,f,d,p=1,g=1,y=Zb({point:function(A,w){var C=T([A,w]);this.stream.point(C[0],C[1])}}),v=Dg,b,x;function _(){return p=e*r,g=e*i,b=x=null,T}function T(A){var w=A[0]*p,C=A[1]*g;if(o){var D=C*a-w*s;w=w*a+C*s,C=D}return[w+t,C+n]}return T.invert=function(A){var w=A[0]-t,C=A[1]-n;if(o){var D=C*a+w*s;w=w*a-C*s,C=D}return[w/p,C/g]},T.stream=function(A){return b&&x===A?b:b=y(v(x=A))},T.postclip=function(A){return arguments.length?(v=A,l=u=f=d=null,_()):v},T.clipExtent=function(A){return arguments.length?(v=A==null?(l=u=f=d=null,Dg):QU(l=+A[0][0],u=+A[0][1],f=+A[1][0],d=+A[1][1]),_()):l==null?null:[[l,u],[f,d]]},T.scale=function(A){return arguments.length?(e=+A,_()):e},T.translate=function(A){return arguments.length?(t=+A[0],n=+A[1],_()):[t,n]},T.angle=function(A){return arguments.length?(o=A%360*Xe,s=ke(o),a=Fe(o),_()):o*tn},T.reflectX=function(A){return arguments.length?(r=A?-1:1,_()):r<0},T.reflectY=function(A){return arguments.length?(i=A?-1:1,_()):i<0},T.fitExtent=function(A,w){return Kb(T,A,w)},T.fitSize=function(A,w){return rI(T,A,w)},T.fitWidth=function(A,w){return iI(T,A,w)},T.fitHeight=function(A,w){return aI(T,A,w)},T}function yB(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}yB.invert=function(e,t){var n=t,r=25,i;do{var o=n*n,a=o*o;n-=i=(n*(1.007226+o*(.015085+a*(-.044475+.028874*o-.005916*a)))-t)/(1.007226+o*(.015085*3+a*(-.044475*7+.028874*9*o-.005916*11*a)))}while(it(i)>Ne&&--r>0);return[e/(.8707+(o=n*n)*(-.131979+o*(-.013791+o*o*o*(.003971-.001529*o)))),n]};function jue(){return mo(yB).scale(175.295)}function vB(e,t){return[Fe(t)*ke(e),ke(t)]}vB.invert=vm(Br);function Uue(){return mo(vB).scale(249.5).clipAngle(90+Ne)}function bB(e,t){var n=Fe(t),r=1+Fe(e)*n;return[n*ke(e)/r,ke(t)/r]}bB.invert=vm(function(e){return 2*Kd(e)});function Bue(){return mo(bB).scale(250).clipAngle(142)}function SB(e,t){return[Jv(eI((Zt+t)/2)),-e]}SB.invert=function(e,t){return[-t,2*Kd(NU(e))-Zt]};function Vue(){var e=pB(SB),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}var Hue=Math.abs,lT=Math.cos,x1=Math.sin,que=1e-6,xB=Math.PI,cT=xB/2,K6=Gue(2);function J6(e){return e>1?cT:e<-1?-cT:Math.asin(e)}function Gue(e){return e>0?Math.sqrt(e):0}function Yue(e,t){var n=e*x1(t),r=30,i;do t-=i=(t+x1(t)-n)/(1+lT(t));while(Hue(i)>que&&--r>0);return t/2}function Wue(e,t,n){function r(i,o){return[e*i*lT(o=Yue(n,o)),t*x1(o)]}return r.invert=function(i,o){return o=J6(o/t),[i/(e*lT(o)),J6((2*o+x1(2*o))/n)]},r}var Xue=Wue(K6/cT,K6,xB);function Que(){return mo(Xue).scale(169.529)}const Zue=uB(),fT=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Kue(e,t){return function n(){const r=t();return r.type=e,r.path=uB().projection(r),r.copy=r.copy||function(){const i=n();return fT.forEach(o=>{r[o]&&i[o](r[o]())}),i.path.pointRadius(r.path.pointRadius()),i},$L(r)}}function sI(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(_1[e]=Kue(e,t),this):_1[e]||null}function _B(e){return e&&e.path||Zue}const _1={albers:cB,albersusa:Cue,azimuthalequalarea:Due,azimuthalequidistant:Oue,conicconformal:Rue,conicequalarea:v1,conicequidistant:Fue,equalEarth:$ue,equirectangular:kue,gnomonic:zue,identity:Lue,mercator:Iue,mollweide:Que,naturalEarth1:jue,orthographic:Uue,stereographic:Bue,transversemercator:Vue};for(const e in _1)sI(e,_1[e]);function Jue(){}const Bo=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function EB(){var e=1,t=1,n=s;function r(l,u){return u.map(f=>i(l,f))}function i(l,u){var f=[],d=[];return o(l,u,p=>{n(p,l,u),ele(p)>0?f.push([p]):d.push(p)}),d.forEach(p=>{for(var g=0,y=f.length,v;g<y;++g)if(tle((v=f[g])[0],p)!==-1){v.push(p);return}}),{type:"MultiPolygon",value:u,coordinates:f}}function o(l,u,f){var d=[],p=[],g,y,v,b,x,_;for(g=y=-1,b=l[0]>=u,Bo[b<<1].forEach(T);++g<e-1;)v=b,b=l[g+1]>=u,Bo[v|b<<1].forEach(T);for(Bo[b<<0].forEach(T);++y<t-1;){for(g=-1,b=l[y*e+e]>=u,x=l[y*e]>=u,Bo[b<<1|x<<2].forEach(T);++g<e-1;)v=b,b=l[y*e+e+g+1]>=u,_=x,x=l[y*e+g+1]>=u,Bo[v|b<<1|x<<2|_<<3].forEach(T);Bo[b|x<<3].forEach(T)}for(g=-1,x=l[y*e]>=u,Bo[x<<2].forEach(T);++g<e-1;)_=x,x=l[y*e+g+1]>=u,Bo[x<<2|_<<3].forEach(T);Bo[x<<3].forEach(T);function T(A){var w=[A[0][0]+g,A[0][1]+y],C=[A[1][0]+g,A[1][1]+y],D=a(w),I=a(C),M,k;(M=p[D])?(k=d[I])?(delete p[M.end],delete d[k.start],M===k?(M.ring.push(C),f(M.ring)):d[M.start]=p[k.end]={start:M.start,end:k.end,ring:M.ring.concat(k.ring)}):(delete p[M.end],M.ring.push(C),p[M.end=I]=M):(M=d[I])?(k=p[D])?(delete d[M.start],delete p[k.end],M===k?(M.ring.push(C),f(M.ring)):d[k.start]=p[M.end]={start:k.start,end:M.end,ring:k.ring.concat(M.ring)}):(delete d[M.start],M.ring.unshift(w),d[M.start=D]=M):d[D]=p[I]={start:D,end:I,ring:[w,C]}}}function a(l){return l[0]*2+l[1]*(e+1)*4}function s(l,u,f){l.forEach(d=>{var p=d[0],g=d[1],y=p|0,v=g|0,b,x=u[v*e+y];p>0&&p<e&&y===p&&(b=u[v*e+y-1],d[0]=p+(f-b)/(x-b)-.5),g>0&&g<t&&v===g&&(b=u[(v-1)*e+y],d[1]=g+(f-b)/(x-b)-.5)})}return r.contour=i,r.size=function(l){if(!arguments.length)return[e,t];var u=Math.floor(l[0]),f=Math.floor(l[1]);return u>=0&&f>=0||re("invalid size"),e=u,t=f,r},r.smooth=function(l){return arguments.length?(n=l?s:Jue,r):n===s},r}function ele(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function tle(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=nle(e,t[n]))return i;return 0}function nle(e,t){for(var n=t[0],r=t[1],i=-1,o=0,a=e.length,s=a-1;o<a;s=o++){var l=e[o],u=l[0],f=l[1],d=e[s],p=d[0],g=d[1];if(rle(l,d,t))return 0;f>r!=g>r&&n<(p-u)*(r-f)/(g-f)+u&&(i=-i)}return i}function rle(e,t,n){var r;return ile(e,t,n)&&ale(e[r=+(e[0]===t[0])],n[r],t[r])}function ile(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ale(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function wB(e,t,n){return function(r){var i=no(r),o=n?Math.min(i[0],0):i[0],a=i[1],s=a-o,l=t?Cu(o,a,e):s/(e+1);return si(o+l,a,l)}}function uI(e){te.call(this,null,e)}uI.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ye(uI,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||ur,o=EB().smooth(e.smooth!==!1),a=e.thresholds||ole(r,i,e),s=e.as===null?null:e.as||"contour",l=[];return r.forEach(u=>{const f=i(u),d=o.size([f.width,f.height])(f.values,ae(a)?a:a(f.values));sle(d,f,u,e),d.forEach(p=>{l.push(mb(u,gt(s!=null?{[s]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function ole(e,t,n){const r=wB(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>Vl(t(i).values)))}function sle(e,t,n,r){let i=r.scale||t.scale,o=r.translate||t.translate;if(Ge(i)&&(i=i(n,r)),Ge(o)&&(o=o(n,r)),(i===1||i==null)&&!o)return;const a=(ct(i)?i:i[0])||1,s=(ct(i)?i:i[1])||1,l=o&&o[0]||0,u=o&&o[1]||0;e.forEach(AB(t,a,s,l,u))}function AB(e,t,n,r,i){const o=e.x1||0,a=e.y1||0,s=t*n<0;function l(d){d.forEach(u)}function u(d){s&&d.reverse(),d.forEach(f)}function f(d){d[0]=(d[0]-o)*t+r,d[1]=(d[1]-a)*n+i}return function(d){return d.coordinates.forEach(l),d}}function e$(e,t,n){const r=e>=0?e:eD(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function K2(e){return Ge(e)?e:lr(+e)}function TB(){var e=l=>l[0],t=l=>l[1],n=jd,r=[-1,-1],i=960,o=500,a=2;function s(l,u){const f=e$(r[0],l,e)>>a,d=e$(r[1],l,t)>>a,p=f?f+2:0,g=d?d+2:0,y=2*p+(i>>a),v=2*g+(o>>a),b=new Float32Array(y*v),x=new Float32Array(y*v);let _=b;l.forEach(A=>{const w=p+(+e(A)>>a),C=g+(+t(A)>>a);w>=0&&w<y&&C>=0&&C<v&&(b[w+C*y]+=+n(A))}),f>0&&d>0?(If(y,v,b,x,f),Mf(y,v,x,b,d),If(y,v,b,x,f),Mf(y,v,x,b,d),If(y,v,b,x,f),Mf(y,v,x,b,d)):f>0?(If(y,v,b,x,f),If(y,v,x,b,f),If(y,v,b,x,f),_=x):d>0&&(Mf(y,v,b,x,d),Mf(y,v,x,b,d),Mf(y,v,b,x,d),_=x);const T=u?Math.pow(2,-2*a):1/U8(_);for(let A=0,w=y*v;A<w;++A)_[A]*=T;return{values:_,scale:1<<a,width:y,height:v,x1:p,y1:g,x2:p+(i>>a),y2:g+(o>>a)}}return s.x=function(l){return arguments.length?(e=K2(l),s):e},s.y=function(l){return arguments.length?(t=K2(l),s):t},s.weight=function(l){return arguments.length?(n=K2(l),s):n},s.size=function(l){if(!arguments.length)return[i,o];var u=+l[0],f=+l[1];return u>=0&&f>=0||re("invalid size"),i=u,o=f,s},s.cellSize=function(l){return arguments.length?((l=+l)>=1||re("invalid cell size"),a=Math.floor(Math.log(l)/Math.LN2),s):1<<a},s.bandwidth=function(l){return arguments.length?(l=Se(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&re("invalid bandwidth"),r=l,s):r},s}function If(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<t;++a)for(let s=0,l=0;s<e+i;++s)s<e&&(l+=n[s+a*e]),s>=i&&(s>=o&&(l-=n[s-o+a*e]),r[s-i+a*e]=l/Math.min(s+1,e-1+o-s,o))}function Mf(e,t,n,r,i){const o=(i<<1)+1;for(let a=0;a<e;++a)for(let s=0,l=0;s<t+i;++s)s<t&&(l+=n[a+s*e]),s>=i&&(s>=o&&(l-=n[a+(s-o)*e]),r[a+(s-i)*e]=l/Math.min(s+1,t-1+o-s,o))}function lI(e){te.call(this,null,e)}lI.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ule=["x","y","weight","size","cellSize","bandwidth"];function CB(e,t){return ule.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ye(lI,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=lle(r,e.groupby),o=(e.groupby||[]).map(Kt),a=CB(TB(),e),s=e.as||"grid",l=[];function u(f,d){for(let p=0;p<o.length;++p)f[o[p]]=d[p];return f}return l=i.map(f=>gt(u({[s]:a(f,e.counts)},f.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function lle(e,t){var n=[],r=f=>f(s),i,o,a,s,l,u;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function cI(e){te.call(this,null,e)}cI.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ye(cI,te,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=EB().smooth(e.smooth!==!1),i=e.values,o=e.thresholds||wB(e.count||10,e.nice,!!i),a=e.size,s,l;return i||(i=t.materialize(t.SOURCE).source,s=CB(TB(),e)(i,!0),l=AB(s,s.scale||1,s.scale||1,0,0),a=[s.width,s.height],i=s.values),o=ae(o)?o:o(i),i=r.size(a)(i,o),l&&i.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(gt),n}});const dT="Feature",fI="FeatureCollection",cle="MultiPoint";function dI(e){te.call(this,null,e)}dI.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ye(dI,te,{transform(e,t){var n=this._features,r=this._points,i=e.fields,o=i&&i[0],a=i&&i[1],s=e.geojson||!i&&ur,l=t.ADD,u;u=e.modified()||t.changed(t.REM)||t.modified(ir(s))||o&&t.modified(ir(o))||a&&t.modified(ir(a)),(!this.value||u)&&(l=t.SOURCE,this._features=n=[],this._points=r=[]),s&&t.visit(l,f=>n.push(s(f))),o&&a&&(t.visit(l,f=>{var d=o(f),p=a(f);d!=null&&p!=null&&(d=+d)===d&&(p=+p)===p&&r.push([d,p])}),n=n.concat({type:dT,geometry:{type:cle,coordinates:r}})),this.value={type:fI,features:n}}});function hI(e){te.call(this,null,e)}hI.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ye(hI,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||ur,o=e.as||"path",a=n.SOURCE;!r||e.modified()?(this.value=r=_B(e.projection),n.materialize().reflow()):a=i===ur||t.modified(i.fields)?n.ADD_MOD:n.ADD;const s=fle(r,e.pointRadius);return n.visit(a,l=>l[o]=r(i(l))),r.pointRadius(s),n.modifies(o)}});function fle(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function pI(e){te.call(this,null,e)}pI.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ye(pI,te,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],o=e.as||["x","y"],a=o[0],s=o[1],l;function u(f){const d=n([r(f),i(f)]);d?(f[a]=d[0],f[s]=d[1]):(f[a]=void 0,f[s]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,u):(l=t.modified(r.fields)||t.modified(i.fields),t.visit(l?t.ADD_MOD:t.ADD,u)),t.modifies(o)}});function gI(e){te.call(this,null,e)}gI.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ye(gI,te,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",o=n.ADD;return(!r||e.modified())&&(this.value=r=dle(_B(e.projection),e.field||Li("datum"),e.pointRadius),n.materialize().reflow(),o=n.SOURCE),n.visit(o,a=>a[i]=r),n.modifies(i)}});function dle(e,t,n){const r=n==null?i=>e(t(i)):i=>{var o=e.pointRadius(),a=e.pointRadius(n)(t(i));return e.pointRadius(o),a};return r.context=i=>(e.context(i),r),r}function mI(e){te.call(this,[],e),this.generator=oue()}mI.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ye(mI,te,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const o in e)Ge(r[o])&&r[o](e[o]);return i=r(),n.length?t.mod.push(Pz(n[0],i)):t.add.push(gt(i)),n[0]=i,t}});function yI(e){te.call(this,null,e)}yI.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ye(yI,te,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||ur,o=ple(e.opacity,e),a=hle(e.color,e),s=e.as||"image",l={$x:0,$y:0,$value:0,$max:r?Vl(n.map(u=>Vl(i(u).values))):0};return n.forEach(u=>{const f=i(u),d=qe({},u,l);r||(d.$max=Vl(f.values||[])),u[s]=gle(f,d,a.dep?a:lr(a(d)),o.dep?o:lr(o(d)))}),t.reflow(!0).modifies(s)}});function hle(e,t){let n;return Ge(e)?(n=r=>Iu(e(r,t)),n.dep=DB(e)):n=lr(Iu(e||"#888")),n}function ple(e,t){let n;return Ge(e)?(n=r=>e(r,t),n.dep=DB(e)):e?n=lr(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function DB(e){if(!Ge(e))return!1;const t=pa(ir(e));return t.$x||t.$y||t.$value||t.$max}function gle(e,t,n,r){const i=e.width,o=e.height,a=e.x1||0,s=e.y1||0,l=e.x2||i,u=e.y2||o,f=e.values,d=f?b=>f[b]:uu,p=Eu(l-a,u-s),g=p.getContext("2d"),y=g.getImageData(0,0,l-a,u-s),v=y.data;for(let b=s,x=0;b<u;++b){t.$y=b-s;for(let _=a,T=b*i;_<l;++_,x+=4){t.$x=_-a,t.$value=d(_+T);const A=n(t);v[x+0]=A.r,v[x+1]=A.g,v[x+2]=A.b,v[x+3]=~~(255*r(t))}}return g.putImageData(y,0,0),p}function OB(e){te.call(this,null,e),this.modified(!0)}ye(OB,te,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=yle(e.type),fT.forEach(r=>{e[r]!=null&&t$(n,r,e[r])})):fT.forEach(r=>{e.modified(r)&&t$(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&mle(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mle(e,t){const n=vle(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function yle(e){const t=sI((e||"mercator").toLowerCase());return t||re("Unrecognized projection type: "+e),t()}function t$(e,t,n){Ge(e[t])&&e[t](n)}function vle(e){return e=Se(e),e.length===1?e[0]:{type:fI,features:e.reduce((t,n)=>t.concat(ble(n)),[])}}function ble(e){return e.type===fI?e.features:Se(e).filter(t=>t!=null).map(t=>t.type===dT?t:{type:dT,geometry:t})}const Sle=Object.freeze(Object.defineProperty({__proto__:null,contour:cI,geojson:dI,geopath:hI,geopoint:pI,geoshape:gI,graticule:mI,heatmap:yI,isocontour:uI,kde2d:lI,projection:OB},Symbol.toStringTag,{value:"Module"}));function xle(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var o,a=n.length,s,l=0,u=0;for(o=0;o<a;++o)s=n[o],l+=s.x,u+=s.y;for(l=(l/a-e)*r,u=(u/a-t)*r,o=0;o<a;++o)s=n[o],s.x-=l,s.y-=u}return i.initialize=function(o){n=o},i.x=function(o){return arguments.length?(e=+o,i):e},i.y=function(o){return arguments.length?(t=+o,i):t},i.strength=function(o){return arguments.length?(r=+o,i):r},i}function _le(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return IB(this.cover(t,n),t,n,e)}function IB(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,o=e._root,a={data:r},s=e._x0,l=e._y0,u=e._x1,f=e._y1,d,p,g,y,v,b,x,_;if(!o)return e._root=a,e;for(;o.length;)if((v=t>=(d=(s+u)/2))?s=d:u=d,(b=n>=(p=(l+f)/2))?l=p:f=p,i=o,!(o=o[x=b<<1|v]))return i[x]=a,e;if(g=+e._x.call(null,o.data),y=+e._y.call(null,o.data),t===g&&n===y)return a.next=o,i?i[x]=a:e._root=a,e;do i=i?i[x]=new Array(4):e._root=new Array(4),(v=t>=(d=(s+u)/2))?s=d:u=d,(b=n>=(p=(l+f)/2))?l=p:f=p;while((x=b<<1|v)===(_=(y>=p)<<1|g>=d));return i[_]=o,i[x]=a,e}function Ele(e){var t,n,r=e.length,i,o,a=new Array(r),s=new Array(r),l=1/0,u=1/0,f=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(o=+this._y.call(null,t))||(a[n]=i,s[n]=o,i<l&&(l=i),i>f&&(f=i),o<u&&(u=o),o>d&&(d=o));if(l>f||u>d)return this;for(this.cover(l,u).cover(f,d),n=0;n<r;++n)IB(this,a[n],s[n],e[n]);return this}function wle(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,o=(r=Math.floor(t))+1;else{for(var a=i-n||1,s=this._root,l,u;n>e||e>=i||r>t||t>=o;)switch(u=(t<r)<<1|e<n,l=new Array(4),l[u]=s,s=l,a*=2,u){case 0:i=n+a,o=r+a;break;case 1:n=i-a,o=r+a;break;case 2:i=n+a,r=o-a;break;case 3:n=i-a,r=o-a;break}this._root&&this._root.length&&(this._root=s)}return this._x0=n,this._y0=r,this._x1=i,this._y1=o,this}function Ale(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Tle(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function vr(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Cle(e,t,n){var r,i=this._x0,o=this._y0,a,s,l,u,f=this._x1,d=this._y1,p=[],g=this._root,y,v;for(g&&p.push(new vr(g,i,o,f,d)),n==null?n=1/0:(i=e-n,o=t-n,f=e+n,d=t+n,n*=n);y=p.pop();)if(!(!(g=y.node)||(a=y.x0)>f||(s=y.y0)>d||(l=y.x1)<i||(u=y.y1)<o))if(g.length){var b=(a+l)/2,x=(s+u)/2;p.push(new vr(g[3],b,x,l,u),new vr(g[2],a,x,b,u),new vr(g[1],b,s,l,x),new vr(g[0],a,s,b,x)),(v=(t>=x)<<1|e>=b)&&(y=p[p.length-1],p[p.length-1]=p[p.length-1-v],p[p.length-1-v]=y)}else{var _=e-+this._x.call(null,g.data),T=t-+this._y.call(null,g.data),A=_*_+T*T;if(A<n){var w=Math.sqrt(n=A);i=e-w,o=t-w,f=e+w,d=t+w,r=g.data}}return r}function Dle(e){if(isNaN(f=+this._x.call(null,e))||isNaN(d=+this._y.call(null,e)))return this;var t,n=this._root,r,i,o,a=this._x0,s=this._y0,l=this._x1,u=this._y1,f,d,p,g,y,v,b,x;if(!n)return this;if(n.length)for(;;){if((y=f>=(p=(a+l)/2))?a=p:l=p,(v=d>=(g=(s+u)/2))?s=g:u=g,t=n,!(n=n[b=v<<1|y]))return this;if(!n.length)break;(t[b+1&3]||t[b+2&3]||t[b+3&3])&&(r=t,x=b)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(o=n.next)&&delete n.next,i?(o?i.next=o:delete i.next,this):t?(o?t[b]=o:delete t[b],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[x]=n:this._root=n),this):(this._root=o,this)}function Ole(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function Ile(){return this._root}function Mle(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Rle(e){var t=[],n,r=this._root,i,o,a,s,l;for(r&&t.push(new vr(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,o=n.x0,a=n.y0,s=n.x1,l=n.y1)&&r.length){var u=(o+s)/2,f=(a+l)/2;(i=r[3])&&t.push(new vr(i,u,f,s,l)),(i=r[2])&&t.push(new vr(i,o,f,u,l)),(i=r[1])&&t.push(new vr(i,u,a,s,f)),(i=r[0])&&t.push(new vr(i,o,a,u,f))}return this}function kle(e){var t=[],n=[],r;for(this._root&&t.push(new vr(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var o,a=r.x0,s=r.y0,l=r.x1,u=r.y1,f=(a+l)/2,d=(s+u)/2;(o=i[0])&&t.push(new vr(o,a,s,f,d)),(o=i[1])&&t.push(new vr(o,f,s,l,d)),(o=i[2])&&t.push(new vr(o,a,d,f,u)),(o=i[3])&&t.push(new vr(o,f,d,l,u))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Nle(e){return e[0]}function Fle(e){return arguments.length?(this._x=e,this):this._x}function Ple(e){return e[1]}function $le(e){return arguments.length?(this._y=e,this):this._y}function vI(e,t,n){var r=new bI(t??Nle,n??Ple,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function bI(e,t,n,r,i,o){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function n$(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var Cr=vI.prototype=bI.prototype;Cr.copy=function(){var e=new bI(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=n$(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=n$(r));return e};Cr.add=_le;Cr.addAll=Ele;Cr.cover=wle;Cr.data=Ale;Cr.extent=Tle;Cr.find=Cle;Cr.remove=Dle;Cr.removeAll=Ole;Cr.root=Ile;Cr.size=Mle;Cr.visit=Rle;Cr.visitAfter=kle;Cr.x=Fle;Cr.y=$le;function br(e){return function(){return e}}function mu(e){return(e()-.5)*1e-6}function zle(e){return e.x+e.vx}function Lle(e){return e.y+e.vy}function jle(e){var t,n,r,i=1,o=1;typeof e!="function"&&(e=br(e==null?1:+e));function a(){for(var u,f=t.length,d,p,g,y,v,b,x=0;x<o;++x)for(d=vI(t,zle,Lle).visitAfter(s),u=0;u<f;++u)p=t[u],v=n[p.index],b=v*v,g=p.x+p.vx,y=p.y+p.vy,d.visit(_);function _(T,A,w,C,D){var I=T.data,M=T.r,k=v+M;if(I){if(I.index>p.index){var R=g-I.x-I.vx,z=y-I.y-I.vy,P=R*R+z*z;P<k*k&&(R===0&&(R=mu(r),P+=R*R),z===0&&(z=mu(r),P+=z*z),P=(k-(P=Math.sqrt(P)))/P*i,p.vx+=(R*=P)*(k=(M*=M)/(b+M)),p.vy+=(z*=P)*k,I.vx-=R*(k=1-k),I.vy-=z*k)}return}return A>g+k||C<g-k||w>y+k||D<y-k}}function s(u){if(u.data)return u.r=n[u.data.index];for(var f=u.r=0;f<4;++f)u[f]&&u[f].r>u.r&&(u.r=u[f].r)}function l(){if(t){var u,f=t.length,d;for(n=new Array(f),u=0;u<f;++u)d=t[u],n[d.index]=+e(d,u,t)}}return a.initialize=function(u,f){t=u,r=f,l()},a.iterations=function(u){return arguments.length?(o=+u,a):o},a.strength=function(u){return arguments.length?(i=+u,a):i},a.radius=function(u){return arguments.length?(e=typeof u=="function"?u:br(+u),l(),a):e},a}function Ule(e){return e.index}function r$(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Ble(e){var t=Ule,n=d,r,i=br(30),o,a,s,l,u,f=1;e==null&&(e=[]);function d(b){return 1/Math.min(s[b.source.index],s[b.target.index])}function p(b){for(var x=0,_=e.length;x<f;++x)for(var T=0,A,w,C,D,I,M,k;T<_;++T)A=e[T],w=A.source,C=A.target,D=C.x+C.vx-w.x-w.vx||mu(u),I=C.y+C.vy-w.y-w.vy||mu(u),M=Math.sqrt(D*D+I*I),M=(M-o[T])/M*b*r[T],D*=M,I*=M,C.vx-=D*(k=l[T]),C.vy-=I*k,w.vx+=D*(k=1-k),w.vy+=I*k}function g(){if(a){var b,x=a.length,_=e.length,T=new Map(a.map((w,C)=>[t(w,C,a),w])),A;for(b=0,s=new Array(x);b<_;++b)A=e[b],A.index=b,typeof A.source!="object"&&(A.source=r$(T,A.source)),typeof A.target!="object"&&(A.target=r$(T,A.target)),s[A.source.index]=(s[A.source.index]||0)+1,s[A.target.index]=(s[A.target.index]||0)+1;for(b=0,l=new Array(_);b<_;++b)A=e[b],l[b]=s[A.source.index]/(s[A.source.index]+s[A.target.index]);r=new Array(_),y(),o=new Array(_),v()}}function y(){if(a)for(var b=0,x=e.length;b<x;++b)r[b]=+n(e[b],b,e)}function v(){if(a)for(var b=0,x=e.length;b<x;++b)o[b]=+i(e[b],b,e)}return p.initialize=function(b,x){a=b,u=x,g()},p.links=function(b){return arguments.length?(e=b,g(),p):e},p.id=function(b){return arguments.length?(t=b,p):t},p.iterations=function(b){return arguments.length?(f=+b,p):f},p.strength=function(b){return arguments.length?(n=typeof b=="function"?b:br(+b),y(),p):n},p.distance=function(b){return arguments.length?(i=typeof b=="function"?b:br(+b),v(),p):i},p}var Vle={value:()=>{}};function MB(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rv(n)}function rv(e){this._=e}function Hle(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rv.prototype=MB.prototype={constructor:rv,on:function(e,t){var n=this._,r=Hle(e+"",n),i,o=-1,a=r.length;if(arguments.length<2){for(;++o<a;)if((i=(e=r[o]).type)&&(i=qle(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++o<a;)if(i=(e=r[o]).type)n[i]=i$(n[i],e.name,t);else if(t==null)for(i in n)n[i]=i$(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rv(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,o;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(o=this._[e],r=0,i=o.length;r<i;++r)o[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,o=r.length;i<o;++i)r[i].value.apply(t,n)}};function qle(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function i$(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Vle,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var xd=0,Yp=0,Sp=0,RB=1e3,E1,Wp,w1=0,ac=0,eS=0,Mg=typeof performance=="object"&&performance.now?performance:Date,kB=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function SI(){return ac||(kB(Gle),ac=Mg.now()+eS)}function Gle(){ac=0}function A1(){this._call=this._time=this._next=null}A1.prototype=NB.prototype={constructor:A1,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?SI():+n)+(t==null?0:+t),!this._next&&Wp!==this&&(Wp?Wp._next=this:E1=this,Wp=this),this._call=e,this._time=n,hT()},stop:function(){this._call&&(this._call=null,this._time=1/0,hT())}};function NB(e,t,n){var r=new A1;return r.restart(e,t,n),r}function Yle(){SI(),++xd;for(var e=E1,t;e;)(t=ac-e._time)>=0&&e._call.call(void 0,t),e=e._next;--xd}function a$(){ac=(w1=Mg.now())+eS,xd=Yp=0;try{Yle()}finally{xd=0,Xle(),ac=0}}function Wle(){var e=Mg.now(),t=e-w1;t>RB&&(eS-=t,w1=e)}function Xle(){for(var e,t=E1,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:E1=n);Wp=e,hT(r)}function hT(e){if(!xd){Yp&&(Yp=clearTimeout(Yp));var t=e-ac;t>24?(e<1/0&&(Yp=setTimeout(a$,e-Mg.now()-eS)),Sp&&(Sp=clearInterval(Sp))):(Sp||(w1=Mg.now(),Sp=setInterval(Wle,RB)),xd=1,kB(a$))}}function Qle(e,t,n){var r=new A1,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(o,a,s){a=+a,s=s==null?SI():+s,r._restart(function l(u){u+=i,r._restart(l,i+=a,s),o(u)},a,s)},r.restart(e,t,n),r)}const Zle=1664525,Kle=1013904223,o$=4294967296;function Jle(){let e=1;return()=>(e=(Zle*e+Kle)%o$)/o$}function ece(e){return e.x}function tce(e){return e.y}var nce=10,rce=Math.PI*(3-Math.sqrt(5));function ice(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,s=new Map,l=NB(d),u=MB("tick","end"),f=Jle();e==null&&(e=[]);function d(){p(),u.call("tick",t),n<r&&(l.stop(),u.call("end",t))}function p(v){var b,x=e.length,_;v===void 0&&(v=1);for(var T=0;T<v;++T)for(n+=(o-n)*i,s.forEach(function(A){A(n)}),b=0;b<x;++b)_=e[b],_.fx==null?_.x+=_.vx*=a:(_.x=_.fx,_.vx=0),_.fy==null?_.y+=_.vy*=a:(_.y=_.fy,_.vy=0);return t}function g(){for(var v=0,b=e.length,x;v<b;++v){if(x=e[v],x.index=v,x.fx!=null&&(x.x=x.fx),x.fy!=null&&(x.y=x.fy),isNaN(x.x)||isNaN(x.y)){var _=nce*Math.sqrt(.5+v),T=v*rce;x.x=_*Math.cos(T),x.y=_*Math.sin(T)}(isNaN(x.vx)||isNaN(x.vy))&&(x.vx=x.vy=0)}}function y(v){return v.initialize&&v.initialize(e,f),v}return g(),t={tick:p,restart:function(){return l.restart(d),t},stop:function(){return l.stop(),t},nodes:function(v){return arguments.length?(e=v,g(),s.forEach(y),t):e},alpha:function(v){return arguments.length?(n=+v,t):n},alphaMin:function(v){return arguments.length?(r=+v,t):r},alphaDecay:function(v){return arguments.length?(i=+v,t):+i},alphaTarget:function(v){return arguments.length?(o=+v,t):o},velocityDecay:function(v){return arguments.length?(a=1-v,t):1-a},randomSource:function(v){return arguments.length?(f=v,s.forEach(y),t):f},force:function(v,b){return arguments.length>1?(b==null?s.delete(v):s.set(v,y(b)),t):s.get(v)},find:function(v,b,x){var _=0,T=e.length,A,w,C,D,I;for(x==null?x=1/0:x*=x,_=0;_<T;++_)D=e[_],A=v-D.x,w=b-D.y,C=A*A+w*w,C<x&&(I=D,x=C);return I},on:function(v,b){return arguments.length>1?(u.on(v,b),t):u.on(v)}}}function ace(){var e,t,n,r,i=br(-30),o,a=1,s=1/0,l=.81;function u(g){var y,v=e.length,b=vI(e,ece,tce).visitAfter(d);for(r=g,y=0;y<v;++y)t=e[y],b.visit(p)}function f(){if(e){var g,y=e.length,v;for(o=new Array(y),g=0;g<y;++g)v=e[g],o[v.index]=+i(v,g,e)}}function d(g){var y=0,v,b,x=0,_,T,A;if(g.length){for(_=T=A=0;A<4;++A)(v=g[A])&&(b=Math.abs(v.value))&&(y+=v.value,x+=b,_+=b*v.x,T+=b*v.y);g.x=_/x,g.y=T/x}else{v=g,v.x=v.data.x,v.y=v.data.y;do y+=o[v.data.index];while(v=v.next)}g.value=y}function p(g,y,v,b){if(!g.value)return!0;var x=g.x-t.x,_=g.y-t.y,T=b-y,A=x*x+_*_;if(T*T/l<A)return A<s&&(x===0&&(x=mu(n),A+=x*x),_===0&&(_=mu(n),A+=_*_),A<a&&(A=Math.sqrt(a*A)),t.vx+=x*g.value*r/A,t.vy+=_*g.value*r/A),!0;if(g.length||A>=s)return;(g.data!==t||g.next)&&(x===0&&(x=mu(n),A+=x*x),_===0&&(_=mu(n),A+=_*_),A<a&&(A=Math.sqrt(a*A)));do g.data!==t&&(T=o[g.data.index]*r/A,t.vx+=x*T,t.vy+=_*T);while(g=g.next)}return u.initialize=function(g,y){e=g,n=y,f()},u.strength=function(g){return arguments.length?(i=typeof g=="function"?g:br(+g),f(),u):i},u.distanceMin=function(g){return arguments.length?(a=g*g,u):Math.sqrt(a)},u.distanceMax=function(g){return arguments.length?(s=g*g,u):Math.sqrt(s)},u.theta=function(g){return arguments.length?(l=g*g,u):Math.sqrt(l)},u}function oce(e){var t=br(.1),n,r,i;typeof e!="function"&&(e=br(e==null?0:+e));function o(s){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vx+=(i[l]-f.x)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:br(+s),a(),o):t},o.x=function(s){return arguments.length?(e=typeof s=="function"?s:br(+s),a(),o):e},o}function sce(e){var t=br(.1),n,r,i;typeof e!="function"&&(e=br(e==null?0:+e));function o(s){for(var l=0,u=n.length,f;l<u;++l)f=n[l],f.vy+=(i[l]-f.y)*r[l]*s}function a(){if(n){var s,l=n.length;for(r=new Array(l),i=new Array(l),s=0;s<l;++s)r[s]=isNaN(i[s]=+e(n[s],s,n))?0:+t(n[s],s,n)}}return o.initialize=function(s){n=s,a()},o.strength=function(s){return arguments.length?(t=typeof s=="function"?s:br(+s),a(),o):t},o.y=function(s){return arguments.length?(e=typeof s=="function"?s:br(+s),a(),o):e},o}const s$={center:xle,collide:jle,nbody:ace,link:Ble,x:oce,y:sce},Xp="forces",pT=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],uce=["static","iterations"],FB=["x","y","vx","vy"];function xI(e){te.call(this,null,e)}xI.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:FB}]};ye(xI,te,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(pT),o=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&PB(n,e,0,t)):(this.value=n=cce(t.source,e),n.on("tick",lce(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(uce)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/o)),e.static)for(n.stop();--o>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let s=this._argops,l=0,u=s.length,f;l<u;++l)if(f=s[l],!(f.name!==Xp||f.op._argval.force!=="link")){for(var r=f.op._argops,i=0,o=r.length,a;i<o;++i)if(r[i].name==="links"&&(a=r[i].op.source)){n.pulse(a,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(FB)}});function lce(e,t){return()=>e.touch(t).run()}function cce(e,t){const n=ice(e),r=n.stop,i=n.restart;let o=!1;return n.stopped=()=>o,n.restart=()=>(o=!1,i()),n.stop=()=>(o=!0,r()),PB(n,t,!0).on("end",()=>o=!0)}function PB(e,t,n,r){var i=Se(t.forces),o,a,s,l;for(o=0,a=pT.length;o<a;++o)s=pT[o],s!==Xp&&t.modified(s)&&e[s](t[s]);for(o=0,a=i.length;o<a;++o)l=Xp+o,s=n||t.modified(Xp,o)?dce(i[o]):r&&fce(i[o],r)?e.force(l):null,s&&e.force(l,s);for(a=e.numForces||0;o<a;++o)e.force(Xp+o,null);return e.numForces=i.length,e}function fce(e,t){var n,r;for(n in e)if(Ge(r=e[n])&&t.modified(ir(r)))return 1;return 0}function dce(e){var t,n;_e(s$,e.force)||re("Unrecognized force: "+e.force),t=s$[e.force]();for(n in e)Ge(t[n])&&hce(t[n],e[n],e);return t}function hce(e,t,n){e(Ge(t)?r=>t(r,n):t)}const pce=Object.freeze(Object.defineProperty({__proto__:null,force:xI},Symbol.toStringTag,{value:"Module"}));function gce(e,t){return e.parent===t.parent?1:2}function mce(e){return e.reduce(yce,0)/e.length}function yce(e,t){return e+t.x}function vce(e){return 1+e.reduce(bce,0)}function bce(e,t){return Math.max(e,t.y)}function Sce(e){for(var t;t=e.children;)e=t[0];return e}function xce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function _ce(){var e=gce,t=1,n=1,r=!1;function i(o){var a,s=0;o.eachAfter(function(p){var g=p.children;g?(p.x=mce(g),p.y=vce(g)):(p.x=a?s+=e(p,a):0,p.y=0,a=p)});var l=Sce(o),u=xce(o),f=l.x-e(l,u)/2,d=u.x+e(u,l)/2;return o.eachAfter(r?function(p){p.x=(p.x-o.x)*t,p.y=(o.y-p.y)*n}:function(p){p.x=(p.x-f)/(d-f)*t,p.y=(1-(o.y?p.y/o.y:1))*n})}return i.separation=function(o){return arguments.length?(e=o,i):e},i.size=function(o){return arguments.length?(r=!1,t=+o[0],n=+o[1],i):r?null:[t,n]},i.nodeSize=function(o){return arguments.length?(r=!0,t=+o[0],n=+o[1],i):r?[t,n]:null},i}function Ece(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function wce(){return this.eachAfter(Ece)}function Ace(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Tce(e,t){for(var n=this,r=[n],i,o,a=-1;n=r.pop();)if(e.call(t,n,++a,this),i=n.children)for(o=i.length-1;o>=0;--o)r.push(i[o]);return this}function Cce(e,t){for(var n=this,r=[n],i=[],o,a,s,l=-1;n=r.pop();)if(i.push(n),o=n.children)for(a=0,s=o.length;a<s;++a)r.push(o[a]);for(;n=i.pop();)e.call(t,n,++l,this);return this}function Dce(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function Oce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function Ice(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Mce(e){for(var t=this,n=Rce(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function Rce(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function kce(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Nce(){return Array.from(this)}function Fce(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Pce(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*$ce(){var e=this,t,n=[e],r,i,o;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,o=r.length;i<o;++i)n.push(r[i]);while(n.length)}function _I(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=jce)):t===void 0&&(t=Lce);for(var n=new _d(e),r,i=[n],o,a,s,l;r=i.pop();)if((a=t(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,s=l-1;s>=0;--s)i.push(o=a[s]=new _d(a[s])),o.parent=r,o.depth=r.depth+1;return n.eachBefore($B)}function zce(){return _I(this).eachBefore(Uce)}function Lce(e){return e.children}function jce(e){return Array.isArray(e)?e[1]:null}function Uce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function $B(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function _d(e){this.data=e,this.depth=this.height=0,this.parent=null}_d.prototype=_I.prototype={constructor:_d,count:wce,each:Ace,eachAfter:Cce,eachBefore:Tce,find:Dce,sum:Oce,sort:Ice,path:Mce,ancestors:kce,descendants:Nce,leaves:Fce,links:Pce,copy:zce,[Symbol.iterator]:$ce};function iv(e){return e==null?null:zB(e)}function zB(e){if(typeof e!="function")throw new Error;return e}function $l(){return 0}function zf(e){return function(){return e}}const Bce=1664525,Vce=1013904223,u$=4294967296;function Hce(){let e=1;return()=>(e=(Bce*e+Vce)%u$)/u$}function qce(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Gce(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Yce(e,t){for(var n=0,r=(e=Gce(Array.from(e),t)).length,i=[],o,a;n<r;)o=e[n],a&&LB(a,o)?++n:(a=Xce(i=Wce(i,o)),n=0);return a}function Wce(e,t){var n,r;if(J2(t,e))return[t];for(n=0;n<e.length;++n)if(E0(t,e[n])&&J2(Qp(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(E0(Qp(e[n],e[r]),t)&&E0(Qp(e[n],t),e[r])&&E0(Qp(e[r],t),e[n])&&J2(jB(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function E0(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function LB(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function J2(e,t){for(var n=0;n<t.length;++n)if(!LB(e,t[n]))return!1;return!0}function Xce(e){switch(e.length){case 1:return Qce(e[0]);case 2:return Qp(e[0],e[1]);case 3:return jB(e[0],e[1],e[2])}}function Qce(e){return{x:e.x,y:e.y,r:e.r}}function Qp(e,t){var n=e.x,r=e.y,i=e.r,o=t.x,a=t.y,s=t.r,l=o-n,u=a-r,f=s-i,d=Math.sqrt(l*l+u*u);return{x:(n+o+l/d*f)/2,y:(r+a+u/d*f)/2,r:(d+i+s)/2}}function jB(e,t,n){var r=e.x,i=e.y,o=e.r,a=t.x,s=t.y,l=t.r,u=n.x,f=n.y,d=n.r,p=r-a,g=r-u,y=i-s,v=i-f,b=l-o,x=d-o,_=r*r+i*i-o*o,T=_-a*a-s*s+l*l,A=_-u*u-f*f+d*d,w=g*y-p*v,C=(y*A-v*T)/(w*2)-r,D=(v*b-y*x)/w,I=(g*T-p*A)/(w*2)-i,M=(p*x-g*b)/w,k=D*D+M*M-1,R=2*(o+C*D+I*M),z=C*C+I*I-o*o,P=-(Math.abs(k)>1e-6?(R+Math.sqrt(R*R-4*k*z))/(2*k):z/R);return{x:r+C+D*P,y:i+I+M*P,r:P}}function l$(e,t,n){var r=e.x-t.x,i,o,a=e.y-t.y,s,l,u=r*r+a*a;u?(o=t.r+n.r,o*=o,l=e.r+n.r,l*=l,o>l?(i=(u+l-o)/(2*u),s=Math.sqrt(Math.max(0,l/u-i*i)),n.x=e.x-i*r-s*a,n.y=e.y-i*a+s*r):(i=(u+o-l)/(2*u),s=Math.sqrt(Math.max(0,o/u-i*i)),n.x=t.x+i*r-s*a,n.y=t.y+i*a+s*r)):(n.x=t.x+n.r,n.y=t.y)}function c$(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function f$(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,o=(t.y*n.r+n.y*t.r)/r;return i*i+o*o}function w0(e){this._=e,this.next=null,this.previous=null}function Zce(e,t){if(!(o=(e=qce(e)).length))return 0;var n,r,i,o,a,s,l,u,f,d,p;if(n=e[0],n.x=0,n.y=0,!(o>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(o>2))return n.r+r.r;l$(r,n,i=e[2]),n=new w0(n),r=new w0(r),i=new w0(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(l=3;l<o;++l){l$(n._,r._,i=e[l]),i=new w0(i),u=r.next,f=n.previous,d=r._.r,p=n._.r;do if(d<=p){if(c$(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue e}d+=u._.r,u=u.next}else{if(c$(f._,i._)){n=f,n.next=r,r.previous=n,--l;continue e}p+=f._.r,f=f.previous}while(u!==f.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=f$(n);(i=i.next)!==r;)(s=f$(i))<a&&(n=i,a=s);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Yce(n,t),l=0;l<o;++l)n=e[l],n.x-=i.x,n.y-=i.y;return i.r}function Kce(e){return Math.sqrt(e.value)}function Jce(){var e=null,t=1,n=1,r=$l;function i(o){const a=Hce();return o.x=t/2,o.y=n/2,e?o.eachBefore(d$(e)).eachAfter(ew(r,.5,a)).eachBefore(h$(1)):o.eachBefore(d$(Kce)).eachAfter(ew($l,1,a)).eachAfter(ew(r,o.r/Math.min(t,n),a)).eachBefore(h$(Math.min(t,n)/(2*o.r))),o}return i.radius=function(o){return arguments.length?(e=iv(o),i):e},i.size=function(o){return arguments.length?(t=+o[0],n=+o[1],i):[t,n]},i.padding=function(o){return arguments.length?(r=typeof o=="function"?o:zf(+o),i):r},i}function d$(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function ew(e,t,n){return function(r){if(i=r.children){var i,o,a=i.length,s=e(r)*t||0,l;if(s)for(o=0;o<a;++o)i[o].r+=s;if(l=Zce(i,n),s)for(o=0;o<a;++o)i[o].r-=s;r.r=l+s}}}function h$(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function UB(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function bm(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(r-t)/e.value;++s<l;)a=o[s],a.y0=n,a.y1=i,a.x0=t,a.x1=t+=a.value*u}function efe(){var e=1,t=1,n=0,r=!1;function i(a){var s=a.height+1;return a.x0=a.y0=n,a.x1=e,a.y1=t/s,a.eachBefore(o(t,s)),r&&a.eachBefore(UB),a}function o(a,s){return function(l){l.children&&bm(l,l.x0,a*(l.depth+1)/s,l.x1,a*(l.depth+2)/s);var u=l.x0,f=l.y0,d=l.x1-n,p=l.y1-n;d<u&&(u=d=(u+d)/2),p<f&&(f=p=(f+p)/2),l.x0=u,l.y0=f,l.x1=d,l.y1=p}}return i.round=function(a){return arguments.length?(r=!!a,i):r},i.size=function(a){return arguments.length?(e=+a[0],t=+a[1],i):[e,t]},i.padding=function(a){return arguments.length?(n=+a,i):n},i}var tfe={depth:-1},p$={},tw={};function nfe(e){return e.id}function rfe(e){return e.parentId}function g$(){var e=nfe,t=rfe,n;function r(i){var o=Array.from(i),a=e,s=t,l,u,f,d,p,g,y,v,b=new Map;if(n!=null){const x=o.map((A,w)=>ife(n(A,w,i))),_=x.map(m$),T=new Set(x).add("");for(const A of _)T.has(A)||(T.add(A),x.push(A),_.push(m$(A)),o.push(tw));a=(A,w)=>x[w],s=(A,w)=>_[w]}for(f=0,l=o.length;f<l;++f)u=o[f],g=o[f]=new _d(u),(y=a(u,f,i))!=null&&(y+="")&&(v=g.id=y,b.set(v,b.has(v)?p$:g)),(y=s(u,f,i))!=null&&(y+="")&&(g.parent=y);for(f=0;f<l;++f)if(g=o[f],y=g.parent){if(p=b.get(y),!p)throw new Error("missing: "+y);if(p===p$)throw new Error("ambiguous: "+y);p.children?p.children.push(g):p.children=[g],g.parent=p}else{if(d)throw new Error("multiple roots");d=g}if(!d)throw new Error("no root");if(n!=null){for(;d.data===tw&&d.children.length===1;)d=d.children[0],--l;for(let x=o.length-1;x>=0&&(g=o[x],g.data===tw);--x)g.data=null}if(d.parent=tfe,d.eachBefore(function(x){x.depth=x.parent.depth+1,--l}).eachBefore($B),d.parent=null,l>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(e=iv(i),r):e},r.parentId=function(i){return arguments.length?(t=iv(i),r):t},r.path=function(i){return arguments.length?(n=iv(i),r):n},r}function ife(e){e=`${e}`;let t=e.length;return gT(e,t-1)&&!gT(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function m$(e){let t=e.length;if(t<2)return"";for(;--t>1&&!gT(e,t););return e.slice(0,t)}function gT(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function afe(e,t){return e.parent===t.parent?1:2}function nw(e){var t=e.children;return t?t[0]:e.t}function rw(e){var t=e.children;return t?t[t.length-1]:e.t}function ofe(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function sfe(e){for(var t=0,n=0,r=e.children,i=r.length,o;--i>=0;)o=r[i],o.z+=t,o.m+=t,t+=o.s+(n+=o.c)}function ufe(e,t,n){return e.a.parent===t.parent?e.a:n}function av(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}av.prototype=Object.create(_d.prototype);function lfe(e){for(var t=new av(e,0),n,r=[t],i,o,a,s;n=r.pop();)if(o=n._.children)for(n.children=new Array(s=o.length),a=s-1;a>=0;--a)r.push(i=n.children[a]=new av(o[a],a)),i.parent=n;return(t.parent=new av(null,0)).children=[t],t}function cfe(){var e=afe,t=1,n=1,r=null;function i(u){var f=lfe(u);if(f.eachAfter(o),f.parent.m=-f.z,f.eachBefore(a),r)u.eachBefore(l);else{var d=u,p=u,g=u;u.eachBefore(function(_){_.x<d.x&&(d=_),_.x>p.x&&(p=_),_.depth>g.depth&&(g=_)});var y=d===p?1:e(d,p)/2,v=y-d.x,b=t/(p.x+y+v),x=n/(g.depth||1);u.eachBefore(function(_){_.x=(_.x+v)*b,_.y=_.depth*x})}return u}function o(u){var f=u.children,d=u.parent.children,p=u.i?d[u.i-1]:null;if(f){sfe(u);var g=(f[0].z+f[f.length-1].z)/2;p?(u.z=p.z+e(u._,p._),u.m=u.z-g):u.z=g}else p&&(u.z=p.z+e(u._,p._));u.parent.A=s(u,p,u.parent.A||d[0])}function a(u){u._.x=u.z+u.parent.m,u.m+=u.parent.m}function s(u,f,d){if(f){for(var p=u,g=u,y=f,v=p.parent.children[0],b=p.m,x=g.m,_=y.m,T=v.m,A;y=rw(y),p=nw(p),y&&p;)v=nw(v),g=rw(g),g.a=u,A=y.z+_-p.z-b+e(y._,p._),A>0&&(ofe(ufe(y,u,d),u,A),b+=A,x+=A),_+=y.m,b+=p.m,T+=v.m,x+=g.m;y&&!rw(g)&&(g.t=y,g.m+=_-x),p&&!nw(v)&&(v.t=p,v.m+=b-T,d=u)}return d}function l(u){u.x*=t,u.y=u.depth*n}return i.separation=function(u){return arguments.length?(e=u,i):e},i.size=function(u){return arguments.length?(r=!1,t=+u[0],n=+u[1],i):r?null:[t,n]},i.nodeSize=function(u){return arguments.length?(r=!0,t=+u[0],n=+u[1],i):r?[t,n]:null},i}function tS(e,t,n,r,i){for(var o=e.children,a,s=-1,l=o.length,u=e.value&&(i-n)/e.value;++s<l;)a=o[s],a.x0=t,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var BB=(1+Math.sqrt(5))/2;function VB(e,t,n,r,i,o){for(var a=[],s=t.children,l,u,f=0,d=0,p=s.length,g,y,v=t.value,b,x,_,T,A,w,C;f<p;){g=i-n,y=o-r;do b=s[d++].value;while(!b&&d<p);for(x=_=b,w=Math.max(y/g,g/y)/(v*e),C=b*b*w,A=Math.max(_/C,C/x);d<p;++d){if(b+=u=s[d].value,u<x&&(x=u),u>_&&(_=u),C=b*b*w,T=Math.max(_/C,C/x),T>A){b-=u;break}A=T}a.push(l={value:b,dice:g<y,children:s.slice(f,d)}),l.dice?bm(l,n,r,i,v?r+=y*b/v:o):tS(l,n,r,v?n+=g*b/v:i,o),v-=b,f=d}return a}const HB=(function e(t){function n(r,i,o,a,s){VB(t,r,i,o,a,s)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})(BB);function ffe(){var e=HB,t=!1,n=1,r=1,i=[0],o=$l,a=$l,s=$l,l=$l,u=$l;function f(p){return p.x0=p.y0=0,p.x1=n,p.y1=r,p.eachBefore(d),i=[0],t&&p.eachBefore(UB),p}function d(p){var g=i[p.depth],y=p.x0+g,v=p.y0+g,b=p.x1-g,x=p.y1-g;b<y&&(y=b=(y+b)/2),x<v&&(v=x=(v+x)/2),p.x0=y,p.y0=v,p.x1=b,p.y1=x,p.children&&(g=i[p.depth+1]=o(p)/2,y+=u(p)-g,v+=a(p)-g,b-=s(p)-g,x-=l(p)-g,b<y&&(y=b=(y+b)/2),x<v&&(v=x=(v+x)/2),e(p,y,v,b,x))}return f.round=function(p){return arguments.length?(t=!!p,f):t},f.size=function(p){return arguments.length?(n=+p[0],r=+p[1],f):[n,r]},f.tile=function(p){return arguments.length?(e=zB(p),f):e},f.padding=function(p){return arguments.length?f.paddingInner(p).paddingOuter(p):f.paddingInner()},f.paddingInner=function(p){return arguments.length?(o=typeof p=="function"?p:zf(+p),f):o},f.paddingOuter=function(p){return arguments.length?f.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):f.paddingTop()},f.paddingTop=function(p){return arguments.length?(a=typeof p=="function"?p:zf(+p),f):a},f.paddingRight=function(p){return arguments.length?(s=typeof p=="function"?p:zf(+p),f):s},f.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:zf(+p),f):l},f.paddingLeft=function(p){return arguments.length?(u=typeof p=="function"?p:zf(+p),f):u},f}function dfe(e,t,n,r,i){var o=e.children,a,s=o.length,l,u=new Array(s+1);for(u[0]=l=a=0;a<s;++a)u[a+1]=l+=o[a].value;f(0,s,e.value,t,n,r,i);function f(d,p,g,y,v,b,x){if(d>=p-1){var _=o[d];_.x0=y,_.y0=v,_.x1=b,_.y1=x;return}for(var T=u[d],A=g/2+T,w=d+1,C=p-1;w<C;){var D=w+C>>>1;u[D]<A?w=D+1:C=D}A-u[w-1]<u[w]-A&&d+1<w&&--w;var I=u[w]-T,M=g-I;if(b-y>x-v){var k=g?(y*M+b*I)/g:b;f(d,w,I,y,v,k,x),f(w,p,M,k,v,b,x)}else{var R=g?(v*M+x*I)/g:x;f(d,w,I,y,v,b,R),f(w,p,M,y,R,b,x)}}}function hfe(e,t,n,r,i){(e.depth&1?tS:bm)(e,t,n,r,i)}const pfe=(function e(t){function n(r,i,o,a,s){if((l=r._squarify)&&l.ratio===t)for(var l,u,f,d,p=-1,g,y=l.length,v=r.value;++p<y;){for(u=l[p],f=u.children,d=u.value=0,g=f.length;d<g;++d)u.value+=f[d].value;u.dice?bm(u,i,o,a,v?o+=(s-o)*u.value/v:s):tS(u,i,o,v?i+=(a-i)*u.value/v:a,s),v-=u.value}else r._squarify=l=VB(t,r,i,o,a,s),l.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n})(BB);function mT(e,t,n){const r={};return e.each(i=>{const o=i.data;n(o)&&(r[t(o)]=i)}),e.lookup=r,e}function EI(e){te.call(this,null,e)}EI.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const gfe=e=>e.values;ye(EI,te,{transform(e,t){t.source||re("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),o=this.value;return(!o||r||t.changed())&&(o&&o.each(a=>{a.children&&gb(a.data)&&i.rem.push(a.data)}),this.value=o=_I({values:Se(e.keys).reduce((a,s)=>(a.key(s),a),mfe()).entries(i.source)},gfe),n&&o.each(a=>{a.children&&(a=gt(a.data),i.add.push(a),i.source.push(a))}),mT(o,Re,Re)),i.source.root=o,i}});function mfe(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,o){if(o>=e.length)return i;const a=i.length,s=e[o++],l={},u={};let f=-1,d,p,g;for(;++f<a;)d=s(p=i[f])+"",(g=l[d])?g.push(p):l[d]=[p];for(d in l)u[d]=n(l[d],o);return u}function r(i,o){if(++o>e.length)return i;const a=[];for(const s in i)a.push({key:s,values:r(i[s],o)});return a}return t}function ys(e){te.call(this,null,e)}const yfe=(e,t)=>e.parent===t.parent?1:2;ye(ys,te,{transform(e,t){(!t.source||!t.source.root)&&re(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,o=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Ec(e.sort,a=>a.data)),vfe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?yfe:jd);try{this.value=n(i)}catch(a){re(a)}return i.each(a=>bfe(a,r,o)),t.reflow(e.modified()).modifies(o).modifies("leaf")}});function vfe(e,t,n){for(let r,i=0,o=t.length;i<o;++i)r=t[i],r in n&&e[r](n[r])}function bfe(e,t,n){const r=e.data,i=t.length-1;for(let o=0;o<i;++o)r[n[o]]=e[t[o]];r[n[i]]=e.children?e.children.length:0}const yT=["x","y","r","depth","children"];function wI(e){ys.call(this,e)}wI.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:yT.length,default:yT}]};ye(wI,ys,{layout:Jce,params:["radius","size","padding"],fields:yT});const vT=["x0","y0","x1","y1","depth","children"];function AI(e){ys.call(this,e)}AI.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:vT.length,default:vT}]};ye(AI,ys,{layout:efe,params:["size","round","padding"],fields:vT});function TI(e){te.call(this,null,e)}TI.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ye(TI,te,{transform(e,t){t.source||re("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),o=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),o&&(n=i.source.length?mT(g$().id(e.key).parentId(e.parentKey)(i.source),e.key,ji):mT(g$()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const y$={tidy:cfe,cluster:_ce},bT=["x","y","depth","children"];function CI(e){ys.call(this,e)}CI.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:bT.length,default:bT}]};ye(CI,ys,{layout(e){const t=e||"tidy";if(_e(y$,t))return y$[t]();re("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:bT});function DI(e){te.call(this,[],e)}DI.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ye(DI,te,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),o={};return r||re("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,a=>o[Re(a)]=1),r.each(a=>{const s=a.data,l=a.parent&&a.parent.data;l&&o[Re(s)]&&o[Re(l)]&&i.add.push(gt({source:l,target:s}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,a=>o[Re(a)]=1),n.forEach(a=>{(o[Re(a.source)]||o[Re(a.target)])&&i.mod.push(a)})),i}});const v$={binary:dfe,dice:bm,slice:tS,slicedice:hfe,squarify:HB,resquarify:pfe},ST=["x0","y0","x1","y1","depth","children"];function OI(e){ys.call(this,e)}OI.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:ST.length,default:ST}]};ye(OI,ys,{layout(){const e=ffe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{_e(v$,t)?e.tile(v$[t]):re("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:ST});const Sfe=Object.freeze(Object.defineProperty({__proto__:null,nest:EI,pack:wI,partition:AI,stratify:TI,tree:CI,treelinks:DI,treemap:OI},Symbol.toStringTag,{value:"Module"})),iw=4278190080;function xfe(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function _fe(e,t,n,r,i){const o=e.width,a=e.height,s=r||i,l=Eu(o,a).getContext("2d"),u=Eu(o,a).getContext("2d"),f=s&&Eu(o,a).getContext("2d");n.forEach(I=>ov(l,I,!1)),ov(u,t,!1),s&&ov(f,t,!0);const d=aw(l,o,a),p=aw(u,o,a),g=s&&aw(f,o,a),y=e.bitmap(),v=s&&e.bitmap();let b,x,_,T,A,w,C,D;for(x=0;x<a;++x)for(b=0;b<o;++b)A=x*o+b,w=d[A]&iw,D=p[A]&iw,C=s&&g[A]&iw,(w||C||D)&&(_=e(b),T=e(x),!i&&(w||D)&&y.set(_,T),s&&(w||C)&&v.set(_,T));return[y,v]}function aw(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function ov(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(o=>ov(e,o.items,n))}):gi[r].draw(e,{items:n?t.map(Efe):t})}function Efe(e){const t=mb(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Vo=5,fr=31,Rg=32,ou=new Uint32Array(Rg+1),aa=new Uint32Array(Rg+1);aa[0]=0;ou[0]=~aa[0];for(let e=1;e<=Rg;++e)aa[e]=aa[e-1]<<1|1,ou[e]=~aa[e];function wfe(e,t){const n=new Uint32Array(~~((e*t+Rg)/Rg));function r(o,a){n[o]|=a}function i(o,a){n[o]&=a}return{array:n,get:(o,a)=>{const s=a*e+o;return n[s>>>Vo]&1<<(s&fr)},set:(o,a)=>{const s=a*e+o;r(s>>>Vo,1<<(s&fr))},clear:(o,a)=>{const s=a*e+o;i(s>>>Vo,~(1<<(s&fr)))},getRange:(o,a,s,l)=>{let u=l,f,d,p,g;for(;u>=a;--u)if(f=u*e+o,d=u*e+s,p=f>>>Vo,g=d>>>Vo,p===g){if(n[p]&ou[f&fr]&aa[(d&fr)+1])return!0}else{if(n[p]&ou[f&fr]||n[g]&aa[(d&fr)+1])return!0;for(let y=p+1;y<g;++y)if(n[y])return!0}return!1},setRange:(o,a,s,l)=>{let u,f,d,p,g;for(;a<=l;++a)if(u=a*e+o,f=a*e+s,d=u>>>Vo,p=f>>>Vo,d===p)r(d,ou[u&fr]&aa[(f&fr)+1]);else for(r(d,ou[u&fr]),r(p,aa[(f&fr)+1]),g=d+1;g<p;++g)r(g,4294967295)},clearRange:(o,a,s,l)=>{let u,f,d,p,g;for(;a<=l;++a)if(u=a*e+o,f=a*e+s,d=u>>>Vo,p=f>>>Vo,d===p)i(d,aa[u&fr]|ou[(f&fr)+1]);else for(i(d,aa[u&fr]),i(p,ou[(f&fr)+1]),g=d+1;g<p;++g)i(g,0)},outOfBounds:(o,a,s,l)=>o<0||a<0||l>=t||s>=e}}function Afe(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),o=~~((t+2*n+r)/r),a=s=>~~((s+n)/r);return a.invert=s=>s*r-n,a.bitmap=()=>wfe(i,o),a.ratio=r,a.padding=n,a.width=e,a.height=t,a}function Tfe(e,t,n,r){const i=e.width,o=e.height;return function(a){const s=a.datum.datum.items[r].items,l=s.length,u=a.datum.fontSize,f=li.width(a.datum,a.datum.text);let d=0,p,g,y,v,b,x,_;for(let T=0;T<l;++T)p=s[T].x,y=s[T].y,g=s[T].x2===void 0?p:s[T].x2,v=s[T].y2===void 0?y:s[T].y2,b=(p+g)/2,x=(y+v)/2,_=Math.abs(g-p+v-y),_>=d&&(d=_,a.x=b,a.y=x);return b=f/2,x=u/2,p=a.x-b,g=a.x+b,y=a.y-x,v=a.y+x,a.align="center",p<0&&g<=i?a.align="left":0<=p&&i<g&&(a.align="right"),a.baseline="middle",y<0&&v<=o?a.baseline="top":0<=y&&o<v&&(a.baseline="bottom"),!0}}function T1(e,t,n,r,i,o){let a=n/2;return e-a<0||e+a>i||t-(a=r/2)<0||t+a>o}function yu(e,t,n,r,i,o,a,s){const l=i*o/(r*2),u=e(t-l),f=e(t+l),d=e(n-(o=o/2)),p=e(n+o);return a.outOfBounds(u,d,f,p)||a.getRange(u,d,f,p)||s&&s.getRange(u,d,f,p)}function Cfe(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1];function l(u,f,d,p,g){const y=e.invert(u),v=e.invert(f);let b=d,x=o,_;if(!T1(y,v,p,g,i,o)&&!yu(e,y,v,g,p,b,a,s)&&!yu(e,y,v,g,p,g,a,null)){for(;x-b>=1;)_=(b+x)/2,yu(e,y,v,g,p,_,a,s)?x=_:b=_;if(b>d)return[y,v,b,!0]}}return function(u){const f=u.datum.datum.items[r].items,d=f.length,p=u.datum.fontSize,g=li.width(u.datum,u.datum.text);let y=n?p:0,v=!1,b=!1,x=0,_,T,A,w,C,D,I,M,k,R,z,P,$,N,L,B,q;for(let H=0;H<d;++H){for(_=f[H].x,A=f[H].y,T=f[H].x2===void 0?_:f[H].x2,w=f[H].y2===void 0?A:f[H].y2,_>T&&(q=_,_=T,T=q),A>w&&(q=A,A=w,w=q),k=e(_),z=e(T),R=~~((k+z)/2),P=e(A),N=e(w),$=~~((P+N)/2),I=R;I>=k;--I)for(M=$;M>=P;--M)B=l(I,M,y,g,p),B&&([u.x,u.y,y,v]=B);for(I=R;I<=z;++I)for(M=$;M<=N;++M)B=l(I,M,y,g,p),B&&([u.x,u.y,y,v]=B);!v&&!n&&(L=Math.abs(T-_+w-A),C=(_+T)/2,D=(A+w)/2,L>=x&&!T1(C,D,g,p,i,o)&&!yu(e,C,D,p,g,p,a,null)&&(x=L,u.x=C,u.y=D,b=!0))}return v||b?(C=g/2,D=p/2,a.setRange(e(u.x-C),e(u.y-D),e(u.x+C),e(u.y+D)),u.align="center",u.baseline="middle",!0):!1}}const Dfe=[-1,-1,1,1],Ofe=[-1,1,-1,1];function Ife(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=e.bitmap();return function(u){const f=u.datum.datum.items[r].items,d=f.length,p=u.datum.fontSize,g=li.width(u.datum,u.datum.text),y=[];let v=n?p:0,b=!1,x=!1,_=0,T,A,w,C,D,I,M,k,R,z,P,$;for(let N=0;N<d;++N){for(T=f[N].x,w=f[N].y,A=f[N].x2===void 0?T:f[N].x2,C=f[N].y2===void 0?w:f[N].y2,y.push([e((T+A)/2),e((w+C)/2)]);y.length;)if([M,k]=y.pop(),!(a.get(M,k)||s.get(M,k)||l.get(M,k))){l.set(M,k);for(let L=0;L<4;++L)D=M+Dfe[L],I=k+Ofe[L],l.outOfBounds(D,I,D,I)||y.push([D,I]);if(D=e.invert(M),I=e.invert(k),R=v,z=o,!T1(D,I,g,p,i,o)&&!yu(e,D,I,p,g,R,a,s)&&!yu(e,D,I,p,g,p,a,null)){for(;z-R>=1;)P=(R+z)/2,yu(e,D,I,p,g,P,a,s)?z=P:R=P;R>v&&(u.x=D,u.y=I,v=R,b=!0)}}!b&&!n&&($=Math.abs(A-T+C-w),D=(T+A)/2,I=(w+C)/2,$>=_&&!T1(D,I,g,p,i,o)&&!yu(e,D,I,p,g,p,a,null)&&(_=$,u.x=D,u.y=I,x=!0))}return b||x?(D=g/2,I=p/2,a.setRange(e(u.x-D),e(u.y-I),e(u.x+D),e(u.y+I)),u.align="center",u.baseline="middle",!0):!1}}const Mfe=["right","center","left"],Rfe=["bottom","middle","top"];function kfe(e,t,n,r){const i=e.width,o=e.height,a=t[0],s=t[1],l=r.length;return function(u){const f=u.boundary,d=u.datum.fontSize;if(f[2]<0||f[5]<0||f[0]>i||f[3]>o)return!1;let p=u.textWidth??0,g,y,v,b,x,_,T,A,w,C,D,I,M,k,R;for(let z=0;z<l;++z){if(g=(n[z]&3)-1,y=(n[z]>>>2&3)-1,v=g===0&&y===0||r[z]<0,b=g&&y?Math.SQRT1_2:1,x=r[z]<0?-1:1,_=f[1+g]+r[z]*g*b,D=f[4+y]+x*d*y/2+r[z]*y*b,A=D-d/2,w=D+d/2,I=e(_),k=e(A),R=e(w),!p)if(b$(I,I,k,R,a,s,_,_,A,w,f,v))p=li.width(u.datum,u.datum.text);else continue;if(C=_+x*p*g/2,_=C-p/2,T=C+p/2,I=e(_),M=e(T),b$(I,M,k,R,a,s,_,T,A,w,f,v))return u.x=g?g*x<0?T:_:C,u.y=y?y*x<0?w:A:D,u.align=Mfe[g*x+1],u.baseline=Rfe[y*x+1],a.setRange(I,k,M,R),!0}return!1}}function b$(e,t,n,r,i,o,a,s,l,u,f,d){return!(i.outOfBounds(e,n,t,r)||(d&&o||i).getRange(e,n,t,r))}const ow=0,sw=4,uw=8,lw=0,cw=1,fw=2,Nfe={"top-left":ow+lw,top:ow+cw,"top-right":ow+fw,left:sw+lw,middle:sw+cw,right:sw+fw,"bottom-left":uw+lw,bottom:uw+cw,"bottom-right":uw+fw},Ffe={naive:Tfe,"reduced-search":Cfe,floodfill:Ife};function Pfe(e,t,n,r,i,o,a,s,l,u,f){if(!e.length)return e;const d=Math.max(r.length,i.length),p=$fe(r,d),g=zfe(i,d),y=Lfe(e[0].datum),v=y==="group"&&e[0].datum.items[l].marktype,b=v==="area",x=jfe(y,v,s,l),_=u===null||u===1/0,T=b&&f==="naive";let A=-1,w=-1;const C=e.map(k=>{const R=_?li.width(k,k.text):void 0;return A=Math.max(A,R),w=Math.max(w,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:x(k),textWidth:R}});u=u===null||u===1/0?Math.max(A,w)+Math.max(...r):u;const D=Afe(t[0],t[1],u);let I;if(!T){n&&C.sort((z,P)=>n(z.datum,P.datum));let k=!1;for(let z=0;z<g.length&&!k;++z)k=g[z]===5||p[z]<0;const R=(y&&a||b)&&e.map(z=>z.datum);I=o.length||R?_fe(D,R||[],o,k,b):xfe(D,a&&C)}const M=b?Ffe[f](D,I,a,l):kfe(D,I,g,p);return C.forEach(k=>k.opacity=+M(k)),C}function $fe(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function zfe(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=Nfe[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function Lfe(e){return e&&e.mark&&e.mark.marktype}function jfe(e,t,n,r){const i=o=>[o.x,o.x,o.x,o.y,o.y,o.y];return e?e==="line"||e==="area"?o=>i(o.datum):t==="line"?o=>{const a=o.datum.items[r].items;return i(a.length?a[n==="start"?0:a.length-1]:{x:NaN,y:NaN})}:o=>{const a=o.datum.bounds;return[a.x1,(a.x1+a.x2)/2,a.x2,a.y1,(a.y1+a.y2)/2,a.y2]}:i}const xT=["x","y","opacity","align","baseline"],qB=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function II(e){te.call(this,null,e)}II.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:qB},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:xT.length,default:xT}]};ye(II,te,{transform(e,t){function n(o){const a=e[o];return Ge(a)&&t.modified(a.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&re("Size parameter should be specified as a [width, height] array.");const i=e.as||xT;return Pfe(t.materialize(t.SOURCE).source||[],e.size,e.sort,Se(e.offset==null?1:e.offset),Se(e.anchor||qB),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(o=>{const a=o.datum;a[i[0]]=o.x,a[i[1]]=o.y,a[i[2]]=o.opacity,a[i[3]]=o.align,a[i[4]]=o.baseline}),t.reflow(r).modifies(i)}});const Ufe=Object.freeze(Object.defineProperty({__proto__:null,label:II},Symbol.toStringTag,{value:"Module"}));function GB(e,t){var n=[],r=function(f){return f(s)},i,o,a,s,l,u;if(t==null)n.push(e);else for(i={},o=0,a=e.length;o<a;++o)s=e[o],l=t.map(r),u=i[l],u||(i[l]=u=[],u.dims=l,n.push(u)),u.push(s);return n}function MI(e){te.call(this,null,e)}MI.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ye(MI,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=GB(r,e.groupby),o=(e.groupby||[]).map(Kt),a=o.length,s=e.as||[Kt(e.x),Kt(e.y)],l=[];i.forEach(u=>{e7(u,e.x,e.y,e.bandwidth||.3).forEach(f=>{const d={};for(let p=0;p<a;++p)d[o[p]]=u.dims[p];d[s[0]]=f[0],d[s[1]]=f[1],l.push(gt(d))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const _T={constant:dD,linear:hD,log:Qz,exp:Zz,pow:Kz,quad:pD,poly:Jz},Bfe=(e,t)=>e==="poly"?t:e==="quad"?2:1;function RI(e){te.call(this,null,e)}RI.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(_T)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ye(RI,te,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=GB(r,e.groupby),o=(e.groupby||[]).map(Kt),a=e.method||"linear",s=e.order==null?3:e.order,l=Bfe(a,s),u=e.as||[Kt(e.x),Kt(e.y)],f=_T[a],d=[];let p=e.extent;_e(_T,a)||re("Invalid regression method: "+a),p!=null&&a==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),i.forEach(g=>{if(g.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const v=f(g,e.x,e.y,s);if(e.params){d.push(gt({keys:g.dims,coef:v.coef,rSquared:v.rSquared}));return}const b=p||no(g,e.x),x=_=>{const T={};for(let A=0;A<o.length;++A)T[o[A]]=g.dims[A];T[u[0]]=_[0],T[u[1]]=_[1],d.push(gt(T))};a==="linear"||a==="constant"?b.forEach(_=>x([_,v.predict(_)])):Eb(v.predict,b,25,200).forEach(x)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=d}return n}});const Vfe=Object.freeze(Object.defineProperty({__proto__:null,loess:MI,regression:RI},Symbol.toStringTag,{value:"Module"})),is=11102230246251565e-32,Zn=134217729,Hfe=(3+8*is)*is;function dw(e,t,n,r,i){let o,a,s,l,u=t[0],f=r[0],d=0,p=0;f>u==f>-u?(o=u,u=t[++d]):(o=f,f=r[++p]);let g=0;if(d<e&&p<n)for(f>u==f>-u?(a=u+o,s=o-(a-u),u=t[++d]):(a=f+o,s=o-(a-f),f=r[++p]),o=a,s!==0&&(i[g++]=s);d<e&&p<n;)f>u==f>-u?(a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d]):(a=o+f,l=a-o,s=o-(a-l)+(f-l),f=r[++p]),o=a,s!==0&&(i[g++]=s);for(;d<e;)a=o+u,l=a-o,s=o-(a-l)+(u-l),u=t[++d],o=a,s!==0&&(i[g++]=s);for(;p<n;)a=o+f,l=a-o,s=o-(a-l)+(f-l),f=r[++p],o=a,s!==0&&(i[g++]=s);return(o!==0||g===0)&&(i[g++]=o),g}function qfe(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Sm(e){return new Float64Array(e)}const Gfe=(3+16*is)*is,Yfe=(2+12*is)*is,Wfe=(9+64*is)*is*is,Rf=Sm(4),S$=Sm(8),x$=Sm(12),_$=Sm(16),dr=Sm(4);function Xfe(e,t,n,r,i,o,a){let s,l,u,f,d,p,g,y,v,b,x,_,T,A,w,C,D,I;const M=e-i,k=n-i,R=t-o,z=r-o;A=M*z,p=Zn*M,g=p-(p-M),y=M-g,p=Zn*z,v=p-(p-z),b=z-v,w=y*b-(A-g*v-y*v-g*b),C=R*k,p=Zn*R,g=p-(p-R),y=R-g,p=Zn*k,v=p-(p-k),b=k-v,D=y*b-(C-g*v-y*v-g*b),x=w-D,d=w-x,Rf[0]=w-(x+d)+(d-D),_=A+x,d=_-A,T=A-(_-d)+(x-d),x=T-C,d=T-x,Rf[1]=T-(x+d)+(d-C),I=_+x,d=I-_,Rf[2]=_-(I-d)+(x-d),Rf[3]=I;let P=qfe(4,Rf),$=Yfe*a;if(P>=$||-P>=$||(d=e-M,s=e-(M+d)+(d-i),d=n-k,u=n-(k+d)+(d-i),d=t-R,l=t-(R+d)+(d-o),d=r-z,f=r-(z+d)+(d-o),s===0&&l===0&&u===0&&f===0)||($=Wfe*a+Hfe*Math.abs(P),P+=M*f+z*s-(R*u+k*l),P>=$||-P>=$))return P;A=s*z,p=Zn*s,g=p-(p-s),y=s-g,p=Zn*z,v=p-(p-z),b=z-v,w=y*b-(A-g*v-y*v-g*b),C=l*k,p=Zn*l,g=p-(p-l),y=l-g,p=Zn*k,v=p-(p-k),b=k-v,D=y*b-(C-g*v-y*v-g*b),x=w-D,d=w-x,dr[0]=w-(x+d)+(d-D),_=A+x,d=_-A,T=A-(_-d)+(x-d),x=T-C,d=T-x,dr[1]=T-(x+d)+(d-C),I=_+x,d=I-_,dr[2]=_-(I-d)+(x-d),dr[3]=I;const N=dw(4,Rf,4,dr,S$);A=M*f,p=Zn*M,g=p-(p-M),y=M-g,p=Zn*f,v=p-(p-f),b=f-v,w=y*b-(A-g*v-y*v-g*b),C=R*u,p=Zn*R,g=p-(p-R),y=R-g,p=Zn*u,v=p-(p-u),b=u-v,D=y*b-(C-g*v-y*v-g*b),x=w-D,d=w-x,dr[0]=w-(x+d)+(d-D),_=A+x,d=_-A,T=A-(_-d)+(x-d),x=T-C,d=T-x,dr[1]=T-(x+d)+(d-C),I=_+x,d=I-_,dr[2]=_-(I-d)+(x-d),dr[3]=I;const L=dw(N,S$,4,dr,x$);A=s*f,p=Zn*s,g=p-(p-s),y=s-g,p=Zn*f,v=p-(p-f),b=f-v,w=y*b-(A-g*v-y*v-g*b),C=l*u,p=Zn*l,g=p-(p-l),y=l-g,p=Zn*u,v=p-(p-u),b=u-v,D=y*b-(C-g*v-y*v-g*b),x=w-D,d=w-x,dr[0]=w-(x+d)+(d-D),_=A+x,d=_-A,T=A-(_-d)+(x-d),x=T-C,d=T-x,dr[1]=T-(x+d)+(d-C),I=_+x,d=I-_,dr[2]=_-(I-d)+(x-d),dr[3]=I;const B=dw(L,x$,4,dr,_$);return _$[B-1]}function A0(e,t,n,r,i,o){const a=(t-o)*(n-i),s=(e-i)*(r-o),l=a-s,u=Math.abs(a+s);return Math.abs(l)>=Gfe*u?l:-Xfe(e,t,n,r,i,o,u)}const E$=Math.pow(2,-52),T0=new Uint32Array(512);class C1{static from(t,n=ede,r=tde){const i=t.length,o=new Float64Array(i*2);for(let a=0;a<i;a++){const s=t[a];o[2*a]=n(s),o[2*a+1]=r(s)}return new C1(o)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:o}=this,a=t.length>>1;let s=1/0,l=1/0,u=-1/0,f=-1/0;for(let M=0;M<a;M++){const k=t[2*M],R=t[2*M+1];k<s&&(s=k),R<l&&(l=R),k>u&&(u=k),R>f&&(f=R),this._ids[M]=M}const d=(s+u)/2,p=(l+f)/2;let g,y,v;for(let M=0,k=1/0;M<a;M++){const R=hw(d,p,t[2*M],t[2*M+1]);R<k&&(g=M,k=R)}const b=t[2*g],x=t[2*g+1];for(let M=0,k=1/0;M<a;M++){if(M===g)continue;const R=hw(b,x,t[2*M],t[2*M+1]);R<k&&R>0&&(y=M,k=R)}let _=t[2*y],T=t[2*y+1],A=1/0;for(let M=0;M<a;M++){if(M===g||M===y)continue;const k=Kfe(b,x,_,T,t[2*M],t[2*M+1]);k<A&&(v=M,A=k)}let w=t[2*v],C=t[2*v+1];if(A===1/0){for(let R=0;R<a;R++)this._dists[R]=t[2*R]-t[0]||t[2*R+1]-t[1];Gf(this._ids,this._dists,0,a-1);const M=new Uint32Array(a);let k=0;for(let R=0,z=-1/0;R<a;R++){const P=this._ids[R],$=this._dists[P];$>z&&(M[k++]=P,z=$)}this.hull=M.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(A0(b,x,_,T,w,C)<0){const M=y,k=_,R=T;y=v,_=w,T=C,v=M,w=k,C=R}const D=Jfe(b,x,_,T,w,C);this._cx=D.x,this._cy=D.y;for(let M=0;M<a;M++)this._dists[M]=hw(t[2*M],t[2*M+1],D.x,D.y);Gf(this._ids,this._dists,0,a-1),this._hullStart=g;let I=3;r[g]=n[v]=y,r[y]=n[g]=v,r[v]=n[y]=g,i[g]=0,i[y]=1,i[v]=2,o.fill(-1),o[this._hashKey(b,x)]=g,o[this._hashKey(_,T)]=y,o[this._hashKey(w,C)]=v,this.trianglesLen=0,this._addTriangle(g,y,v,-1,-1,-1);for(let M=0,k,R;M<this._ids.length;M++){const z=this._ids[M],P=t[2*z],$=t[2*z+1];if(M>0&&Math.abs(P-k)<=E$&&Math.abs($-R)<=E$||(k=P,R=$,z===g||z===y||z===v))continue;let N=0;for(let U=0,Y=this._hashKey(P,$);U<this._hashSize&&(N=o[(Y+U)%this._hashSize],!(N!==-1&&N!==r[N]));U++);N=n[N];let L=N,B;for(;B=r[L],A0(P,$,t[2*L],t[2*L+1],t[2*B],t[2*B+1])>=0;)if(L=B,L===N){L=-1;break}if(L===-1)continue;let q=this._addTriangle(L,z,r[L],-1,-1,i[L]);i[z]=this._legalize(q+2),i[L]=q,I++;let H=r[L];for(;B=r[H],A0(P,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)q=this._addTriangle(H,z,B,i[z],-1,i[H]),i[z]=this._legalize(q+2),r[H]=H,I--,H=B;if(L===N)for(;B=n[L],A0(P,$,t[2*B],t[2*B+1],t[2*L],t[2*L+1])<0;)q=this._addTriangle(B,z,L,-1,i[L],i[B]),this._legalize(q+2),i[B]=q,r[L]=L,I--,L=B;this._hullStart=n[z]=L,r[L]=n[H]=z,r[z]=H,o[this._hashKey(P,$)]=z,o[this._hashKey(t[2*L],t[2*L+1])]=L}this.hull=new Uint32Array(I);for(let M=0,k=this._hullStart;M<I;M++)this.hull[M]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Qfe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let o=0,a=0;for(;;){const s=r[t],l=t-t%3;if(a=l+(t+2)%3,s===-1){if(o===0)break;t=T0[--o];continue}const u=s-s%3,f=l+(t+1)%3,d=u+(s+2)%3,p=n[a],g=n[t],y=n[f],v=n[d];if(Zfe(i[2*p],i[2*p+1],i[2*g],i[2*g+1],i[2*y],i[2*y+1],i[2*v],i[2*v+1])){n[t]=v,n[s]=p;const x=r[d];if(x===-1){let T=this._hullStart;do{if(this._hullTri[T]===d){this._hullTri[T]=t;break}T=this._hullPrev[T]}while(T!==this._hullStart)}this._link(t,x),this._link(s,r[a]),this._link(a,d);const _=u+(s+1)%3;o<T0.length&&(T0[o++]=_)}else{if(o===0)break;t=T0[--o]}}return a}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,o,a){const s=this.trianglesLen;return this._triangles[s]=t,this._triangles[s+1]=n,this._triangles[s+2]=r,this._link(s,i),this._link(s+1,o),this._link(s+2,a),this.trianglesLen+=3,s}}function Qfe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function hw(e,t,n,r){const i=e-n,o=t-r;return i*i+o*o}function Zfe(e,t,n,r,i,o,a,s){const l=e-a,u=t-s,f=n-a,d=r-s,p=i-a,g=o-s,y=l*l+u*u,v=f*f+d*d,b=p*p+g*g;return l*(d*b-v*g)-u*(f*b-v*p)+y*(f*g-d*p)<0}function Kfe(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,f=a*a+s*s,d=l*l+u*u,p=.5/(a*u-s*l),g=(u*f-s*d)*p,y=(a*d-l*f)*p;return g*g+y*y}function Jfe(e,t,n,r,i,o){const a=n-e,s=r-t,l=i-e,u=o-t,f=a*a+s*s,d=l*l+u*u,p=.5/(a*u-s*l),g=e+(u*f-s*d)*p,y=t+(a*d-l*f)*p;return{x:g,y}}function Gf(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const o=e[i],a=t[o];let s=i-1;for(;s>=n&&t[e[s]]>a;)e[s+1]=e[s--];e[s+1]=o}else{const i=n+r>>1;let o=n+1,a=r;xp(e,i,o),t[e[n]]>t[e[r]]&&xp(e,n,r),t[e[o]]>t[e[r]]&&xp(e,o,r),t[e[n]]>t[e[o]]&&xp(e,n,o);const s=e[o],l=t[s];for(;;){do o++;while(t[e[o]]<l);do a--;while(t[e[a]]>l);if(a<o)break;xp(e,o,a)}e[n+1]=e[a],e[a]=s,r-o+1>=a-n?(Gf(e,t,o,r),Gf(e,t,n,a-1)):(Gf(e,t,n,a-1),Gf(e,t,o,r))}}function xp(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function ede(e){return e[0]}function tde(e){return e[1]}const w$=1e-6;class Ul{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,o=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${o}`:(Math.abs(this._x1-i)>w$||Math.abs(this._y1-o)>w$)&&(this._+="L"+i+","+o),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=o}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class ET{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let nde=class{constructor(t,[n,r,i,o]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((o=+o)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=o,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let o,a;const s=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let v=0,b=0,x=r.length,_,T;v<x;v+=3,b+=2){const A=r[v]*2,w=r[v+1]*2,C=r[v+2]*2,D=t[A],I=t[A+1],M=t[w],k=t[w+1],R=t[C],z=t[C+1],P=M-D,$=k-I,N=R-D,L=z-I,B=(P*L-$*N)*2;if(Math.abs(B)<1e-9){if(o===void 0){o=a=0;for(const H of n)o+=t[H*2],a+=t[H*2+1];o/=n.length,a/=n.length}const q=1e9*Math.sign((o-D)*L-(a-I)*N);_=(D+R)/2-q*L,T=(I+z)/2+q*N}else{const q=1/B,H=P*P+$*$,U=N*N+L*L;_=D+(L*H-$*U)*q,T=I+(P*U-N*H)*q}s[b]=_,s[b+1]=T}let l=n[n.length-1],u,f=l*4,d,p=t[2*l],g,y=t[2*l+1];i.fill(0);for(let v=0;v<n.length;++v)l=n[v],u=f,d=p,g=y,f=l*4,p=t[2*l],y=t[2*l+1],i[u+2]=i[f]=g-y,i[u+3]=i[f+1]=p-d}render(t){const n=t==null?t=new Ul:void 0,{delaunay:{halfedges:r,inedges:i,hull:o},circumcenters:a,vectors:s}=this;if(o.length<=1)return null;for(let f=0,d=r.length;f<d;++f){const p=r[f];if(p<f)continue;const g=Math.floor(f/3)*2,y=Math.floor(p/3)*2,v=a[g],b=a[g+1],x=a[y],_=a[y+1];this._renderSegment(v,b,x,_,t)}let l,u=o[o.length-1];for(let f=0;f<o.length;++f){l=u,u=o[f];const d=Math.floor(i[u]/3)*2,p=a[d],g=a[d+1],y=l*4,v=this._project(p,g,s[y+2],s[y+3]);v&&this._renderSegment(p,g,v[0],v[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new Ul:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new Ul:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let o=i.length;for(;i[0]===i[o-2]&&i[1]===i[o-1]&&o>1;)o-=2;for(let a=2;a<o;a+=2)(i[a]!==i[a-2]||i[a+1]!==i[a-1])&&n.lineTo(i[a],i[a+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new ET;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,o){let a;const s=this._regioncode(t,n),l=this._regioncode(r,i);s===0&&l===0?(o.moveTo(t,n),o.lineTo(r,i)):(a=this._clipSegment(t,n,r,i,s,l))&&(o.moveTo(a[0],a[1]),o.lineTo(a[2],a[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let o=0,a=n.length;o<a;o+=2)for(let s=0,l=i.length;s<l;s+=2)if(n[o]===i[s]&&n[o+1]===i[s+1]&&n[(o+2)%a]===i[(s+l-2)%l]&&n[(o+3)%a]===i[(s+l-1)%l]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:o}}=this,a=r[t];if(a===-1)return null;const s=[];let l=a;do{const u=Math.floor(l/3);if(s.push(n[u*2],n[u*2+1]),l=l%3===2?l-2:l+1,o[l]!==t)break;l=i[l]}while(l!==a&&l!==-1);return s}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,o,a,s=n[r-2],l=n[r-1],u,f=this._regioncode(s,l),d,p=0;for(let g=0;g<r;g+=2)if(o=s,a=l,s=n[g],l=n[g+1],u=f,f=this._regioncode(s,l),u===0&&f===0)d=p,p=0,i?i.push(s,l):i=[s,l];else{let y,v,b,x,_;if(u===0){if((y=this._clipSegment(o,a,s,l,u,f))===null)continue;[v,b,x,_]=y}else{if((y=this._clipSegment(s,l,o,a,f,u))===null)continue;[x,_,v,b]=y,d=p,p=this._edgecode(v,b),d&&p&&this._edge(t,d,p,i,i.length),i?i.push(v,b):i=[v,b]}d=p,p=this._edgecode(x,_),d&&p&&this._edge(t,d,p,i,i.length),i?i.push(x,_):i=[x,_]}if(i)d=p,p=this._edgecode(i[0],i[1]),d&&p&&this._edge(t,d,p,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,o,a){const s=o<a;for(s&&([t,n,r,i,o,a]=[r,i,t,n,a,o]);;){if(o===0&&a===0)return s?[r,i,t,n]:[t,n,r,i];if(o&a)return null;let l,u,f=o||a;f&8?(l=t+(r-t)*(this.ymax-n)/(i-n),u=this.ymax):f&4?(l=t+(r-t)*(this.ymin-n)/(i-n),u=this.ymin):f&2?(u=n+(i-n)*(this.xmax-t)/(r-t),l=this.xmax):(u=n+(i-n)*(this.xmin-t)/(r-t),l=this.xmin),o?(t=l,n=u,o=this._regioncode(t,n)):(r=l,i=u,a=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,o,a){let s=Array.from(n),l;if((l=this._project(s[0],s[1],r,i))&&s.unshift(l[0],l[1]),(l=this._project(s[s.length-2],s[s.length-1],o,a))&&s.push(l[0],l[1]),s=this._clipFinite(t,s))for(let u=0,f=s.length,d,p=this._edgecode(s[f-2],s[f-1]);u<f;u+=2)d=p,p=this._edgecode(s[u],s[u+1]),d&&p&&(u=this._edge(t,d,p,s,u),f=s.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(s=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return s}_edge(t,n,r,i,o){for(;n!==r;){let a,s;switch(n){case 5:n=4;continue;case 4:n=6,a=this.xmax,s=this.ymin;break;case 6:n=2;continue;case 2:n=10,a=this.xmax,s=this.ymax;break;case 10:n=8;continue;case 8:n=9,a=this.xmin,s=this.ymax;break;case 9:n=1;continue;case 1:n=5,a=this.xmin,s=this.ymin;break}(i[o]!==a||i[o+1]!==s)&&this.contains(t,a,s)&&(i.splice(o,0,a,s),o+=2)}return o}_project(t,n,r,i){let o=1/0,a,s,l;if(i<0){if(n<=this.ymin)return null;(a=(this.ymin-n)/i)<o&&(l=this.ymin,s=t+(o=a)*r)}else if(i>0){if(n>=this.ymax)return null;(a=(this.ymax-n)/i)<o&&(l=this.ymax,s=t+(o=a)*r)}if(r>0){if(t>=this.xmax)return null;(a=(this.xmax-t)/r)<o&&(s=this.xmax,l=n+(o=a)*i)}else if(r<0){if(t<=this.xmin)return null;(a=(this.xmin-t)/r)<o&&(s=this.xmin,l=n+(o=a)*i)}return[s,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const rde=2*Math.PI,kf=Math.pow;function ide(e){return e[0]}function ade(e){return e[1]}function ode(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],o=2*t[r+1],a=2*t[r+2];if((n[a]-n[i])*(n[o+1]-n[i+1])-(n[o]-n[i])*(n[a+1]-n[i+1])>1e-10)return!1}return!0}function sde(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class kI{static from(t,n=ide,r=ade,i){return new kI("length"in t?ude(t,n,r,i):Float64Array.from(lde(t,n,r,i)))}constructor(t){this._delaunator=new C1(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&ode(t)){this.collinear=Int32Array.from({length:n.length/2},(p,g)=>g).sort((p,g)=>n[2*p]-n[2*g]||n[2*p+1]-n[2*g+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],f=[n[2*l],n[2*l+1],n[2*u],n[2*u+1]],d=1e-8*Math.hypot(f[3]-f[1],f[2]-f[0]);for(let p=0,g=n.length/2;p<g;++p){const y=sde(n[2*p],n[2*p+1],d);n[2*p]=y[0],n[2*p+1]=y[1]}this._delaunator=new C1(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,o=this.triangles=this._delaunator.triangles,a=this.inedges.fill(-1),s=this._hullIndex.fill(-1);for(let l=0,u=r.length;l<u;++l){const f=o[l%3===2?l-2:l+1];(r[l]===-1||a[f]===-1)&&(a[f]=l)}for(let l=0,u=i.length;l<u;++l)s[i[l]]=l;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],a[i[0]]=1,i.length===2&&(a[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new nde(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:o,triangles:a,collinear:s}=this;if(s){const d=s.indexOf(t);d>0&&(yield s[d-1]),d<s.length-1&&(yield s[d+1]);return}const l=n[t];if(l===-1)return;let u=l,f=-1;do{if(yield f=a[u],u=u%3===2?u-2:u+1,a[u]!==t)return;if(u=o[u],u===-1){const d=r[(i[t]+1)%r.length];d!==f&&(yield d);return}}while(u!==l)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let o;for(;(o=this._step(r,t,n))>=0&&o!==r&&o!==i;)r=o;return o}_step(t,n,r){const{inedges:i,hull:o,_hullIndex:a,halfedges:s,triangles:l,points:u}=this;if(i[t]===-1||!u.length)return(t+1)%(u.length>>1);let f=t,d=kf(n-u[t*2],2)+kf(r-u[t*2+1],2);const p=i[t];let g=p;do{let y=l[g];const v=kf(n-u[y*2],2)+kf(r-u[y*2+1],2);if(v<d&&(d=v,f=y),g=g%3===2?g-2:g+1,l[g]!==t)break;if(g=s[g],g===-1){if(g=o[(a[t]+1)%o.length],g!==y&&kf(n-u[g*2],2)+kf(r-u[g*2+1],2)<d)return g;break}}while(g!==p);return f}render(t){const n=t==null?t=new Ul:void 0,{points:r,halfedges:i,triangles:o}=this;for(let a=0,s=i.length;a<s;++a){const l=i[a];if(l<a)continue;const u=o[a]*2,f=o[l]*2;t.moveTo(r[u],r[u+1]),t.lineTo(r[f],r[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new Ul:void 0,{points:i}=this;for(let o=0,a=i.length;o<a;o+=2){const s=i[o],l=i[o+1];t.moveTo(s+n,l),t.arc(s,l,n,0,rde)}return r&&r.value()}renderHull(t){const n=t==null?t=new Ul:void 0,{hull:r,points:i}=this,o=r[0]*2,a=r.length;t.moveTo(i[o],i[o+1]);for(let s=1;s<a;++s){const l=2*r[s];t.lineTo(i[l],i[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new ET;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new Ul:void 0,{points:i,triangles:o}=this,a=o[t*=3]*2,s=o[t+1]*2,l=o[t+2]*2;return n.moveTo(i[a],i[a+1]),n.lineTo(i[s],i[s+1]),n.lineTo(i[l],i[l+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new ET;return this.renderTriangle(t,n),n.value()}}function ude(e,t,n,r){const i=e.length,o=new Float64Array(i*2);for(let a=0;a<i;++a){const s=e[a];o[a*2]=t.call(r,s,a,e),o[a*2+1]=n.call(r,s,a,e)}return o}function*lde(e,t,n,r){let i=0;for(const o of e)yield t.call(r,o,i,e),yield n.call(r,o,i,e),++i}function NI(e){te.call(this,null,e)}NI.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const cde=[-1e5,-1e5,1e5,1e5];ye(NI,te,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:cde;const o=this.value=kI.from(r,e.x,e.y).voronoi(i);for(let a=0,s=r.length;a<s;++a){const l=o.cellPolygon(a);r[a][n]=l&&!dde(l)?fde(l):null}return t.reflow(e.modified()).modifies(n)}});function fde(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function dde(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const hde=Object.freeze(Object.defineProperty({__proto__:null,voronoi:NI},Symbol.toStringTag,{value:"Module"}));var pw=Math.PI/180,Zp=64,sv=2048;function pde(){var e=[256,256],t,n,r,i,o,a,s,l=YB,u=[],f=Math.random,d={};d.layout=function(){for(var y=p(Eu()),v=Sde((e[0]>>5)*e[1]),b=null,x=u.length,_=-1,T=[],A=u.map(C=>({text:t(C),font:n(C),style:i(C),weight:o(C),rotate:a(C),size:~~(r(C)+1e-14),padding:s(C),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:C})).sort((C,D)=>D.size-C.size);++_<x;){var w=A[_];w.x=e[0]*(f()+.5)>>1,w.y=e[1]*(f()+.5)>>1,gde(y,w,A,_),w.hasText&&g(v,w,b)&&(T.push(w),b?yde(b,w):b=[{x:w.x+w.x0,y:w.y+w.y0},{x:w.x+w.x1,y:w.y+w.y1}],w.x-=e[0]>>1,w.y-=e[1]>>1)}return T};function p(y){y.width=y.height=1;var v=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Zp<<5)/v,y.height=sv/v;var b=y.getContext("2d");return b.fillStyle=b.strokeStyle="red",b.textAlign="center",{context:b,ratio:v}}function g(y,v,b){for(var x=v.x,_=v.y,T=Math.hypot(e[0],e[1]),A=l(e),w=f()<.5?1:-1,C=-w,D,I,M;(D=A(C+=w))&&(I=~~D[0],M=~~D[1],!(Math.min(Math.abs(I),Math.abs(M))>=T));)if(v.x=x+I,v.y=_+M,!(v.x+v.x0<0||v.y+v.y0<0||v.x+v.x1>e[0]||v.y+v.y1>e[1])&&(!b||!mde(v,y,e[0]))&&(!b||vde(v,b))){for(var k=v.sprite,R=v.width>>5,z=e[0]>>5,P=v.x-(R<<4),$=P&127,N=32-$,L=v.y1-v.y0,B=(v.y+v.y0)*z+(P>>5),q,H=0;H<L;H++){q=0;for(var U=0;U<=R;U++)y[B+U]|=q<<N|(U<R?(q=k[H*R+U])>>>$:0);B+=z}return v.sprite=null,!0}return!1}return d.words=function(y){return arguments.length?(u=y,d):u},d.size=function(y){return arguments.length?(e=[+y[0],+y[1]],d):e},d.font=function(y){return arguments.length?(n=xl(y),d):n},d.fontStyle=function(y){return arguments.length?(i=xl(y),d):i},d.fontWeight=function(y){return arguments.length?(o=xl(y),d):o},d.rotate=function(y){return arguments.length?(a=xl(y),d):a},d.text=function(y){return arguments.length?(t=xl(y),d):t},d.spiral=function(y){return arguments.length?(l=xde[y]||y,d):l},d.fontSize=function(y){return arguments.length?(r=xl(y),d):r},d.padding=function(y){return arguments.length?(s=xl(y),d):s},d.random=function(y){return arguments.length?(f=y,d):f},d}function gde(e,t,n,r){if(!t.sprite){var i=e.context,o=e.ratio;i.clearRect(0,0,(Zp<<5)/o,sv/o);var a=0,s=0,l=0,u=n.length,f,d,p,g,y;for(--r;++r<u;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/o)+"px "+t.font,f=i.measureText(t.text+"m").width*o,p=t.size<<1,t.rotate){var v=Math.sin(t.rotate*pw),b=Math.cos(t.rotate*pw),x=f*b,_=f*v,T=p*b,A=p*v;f=Math.max(Math.abs(x+A),Math.abs(x-A))+31>>5<<5,p=~~Math.max(Math.abs(_+T),Math.abs(_-T))}else f=f+31>>5<<5;if(p>l&&(l=p),a+f>=Zp<<5&&(a=0,s+=l,l=0),s+p>=sv)break;i.translate((a+(f>>1))/o,(s+(p>>1))/o),t.rotate&&i.rotate(t.rotate*pw),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=f,t.height=p,t.xoff=a,t.yoff=s,t.x1=f>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,a+=f}for(var w=i.getImageData(0,0,(Zp<<5)/o,sv/o).data,C=[];--r>=0;)if(t=n[r],!!t.hasText){for(f=t.width,d=f>>5,p=t.y1-t.y0,g=0;g<p*d;g++)C[g]=0;if(a=t.xoff,a==null)return;s=t.yoff;var D=0,I=-1;for(y=0;y<p;y++){for(g=0;g<f;g++){var M=d*y+(g>>5),k=w[(s+y)*(Zp<<5)+(a+g)<<2]?1<<31-g%32:0;C[M]|=k,D|=k}D?I=y:(t.y0++,p--,y--,s++)}t.y1=t.y0+I,t.sprite=C.slice(0,(t.y1-t.y0)*d)}}}function mde(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,o=e.x-(i<<4),a=o&127,s=32-a,l=e.y1-e.y0,u=(e.y+e.y0)*n+(o>>5),f,d=0;d<l;d++){f=0;for(var p=0;p<=i;p++)if((f<<s|(p<i?(f=r[d*i+p])>>>a:0))&t[u+p])return!0;u+=n}return!1}function yde(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function vde(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function YB(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function bde(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(o){var a=o<0?-1:1;switch(Math.sqrt(1+4*a*o)-a&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function Sde(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function xl(e){return typeof e=="function"?e:function(){return e}}var xde={archimedean:YB,rectangular:bde};const WB=["x","y","font","fontSize","fontStyle","fontWeight","angle"],_de=["text","font","rotate","fontSize","fontStyle","fontWeight"];function FI(e){te.call(this,pde(),e)}FI.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:WB}]};ye(FI,te,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&re("Wordcloud size dimensions must be non-zero.");function n(y){const v=e[y];return Ge(v)&&t.modified(v.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||_de.some(n)))return;const i=t.materialize(t.SOURCE).source,o=this.value,a=e.as||WB;let s=e.fontSize||14,l;if(Ge(s)?l=e.fontSizeRange:s=lr(s),l){const y=s,v=dt("sqrt")().domain(no(i,y)).range(l);s=b=>v(y(b))}i.forEach(y=>{y[a[0]]=NaN,y[a[1]]=NaN,y[a[3]]=0});const u=o.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(s).random(Bi).layout(),f=o.size(),d=f[0]>>1,p=f[1]>>1,g=u.length;for(let y=0,v,b;y<g;++y)v=u[y],b=v.datum,b[a[0]]=v.x+d,b[a[1]]=v.y+p,b[a[2]]=v.font,b[a[3]]=v.size,b[a[4]]=v.style,b[a[5]]=v.weight,b[a[6]]=v.rotate;return t.reflow(r).modifies(a)}});const Ede=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:FI},Symbol.toStringTag,{value:"Module"})),wde=e=>new Uint8Array(e),Ade=e=>new Uint16Array(e),cg=e=>new Uint32Array(e);function Tde(){let e=8,t=[],n=cg(0),r=C0(0,e),i=C0(0,e);return{data:()=>t,seen:()=>n=Cde(n,t.length),add(o){for(let a=0,s=t.length,l=o.length,u;a<l;++a)u=o[a],u._index=s++,t.push(u)},remove(o,a){const s=t.length,l=Array(s-o),u=t;let f,d,p;for(d=0;!a[d]&&d<s;++d)l[d]=t[d],u[d]=d;for(p=d;d<s;++d)f=t[d],a[d]?u[d]=-1:(u[d]=p,r[p]=r[d],i[p]=i[d],l[p]=f,f._index=p++),r[d]=0;return t=l,u},size:()=>t.length,curr:()=>r,prev:()=>i,reset:o=>i[o]=r[o],all:()=>e<257?255:e<65537?65535:4294967295,set(o,a){r[o]|=a},clear(o,a){r[o]&=~a},resize(o,a){const s=r.length;(o>s||a>e)&&(e=Math.max(a,e),r=C0(o,e,r),i=C0(o,e))}}}function Cde(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function C0(e,t,n){const r=(t<257?wde:t<65537?Ade:cg)(e);return n&&r.set(n),r}function A$(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,o){const a=this,s=a.bisect(a.range,i.value),l=i.index,u=s[0],f=s[1],d=l.length;let p;for(p=0;p<u;++p)o[l[p]]|=r;for(p=f;p<d;++p)o[l[p]]|=r;return a}}}function T$(){let e=cg(0),t=[],n=0;function r(s,l,u){if(!l.length)return[];const f=n,d=l.length,p=cg(d);let g=Array(d),y,v,b;for(b=0;b<d;++b)g[b]=s(l[b]),p[b]=b;if(g=Dde(g,p),f)y=t,v=e,t=Array(f+d),e=cg(f+d),Ode(u,y,v,f,g,p,d,t,e);else{if(u>0)for(b=0;b<d;++b)p[b]+=u;t=g,e=p}return n=f+d,{index:p,value:g}}function i(s,l){const u=n;let f,d,p;for(d=0;!l[e[d]]&&d<u;++d);for(p=d;d<u;++d)l[f=e[d]]||(e[p]=f,t[p]=t[d],++p);n=u-s}function o(s){for(let l=0,u=n;l<u;++l)e[l]=s[e[l]]}function a(s,l){let u;return l?u=l.length:(l=t,u=n),[kZ(l,s[0],0,u),Tu(l,s[1],0,u)]}return{insert:r,remove:i,bisect:a,reindex:o,index:()=>e,size:()=>n}}function Dde(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],o=e[r];return i<o?-1:i>o?1:0}),PZ(e,t)}function Ode(e,t,n,r,i,o,a,s,l){let u=0,f=0,d;for(d=0;u<r&&f<a;++d)t[u]<i[f]?(s[d]=t[u],l[d]=n[u++]):(s[d]=i[f],l[d]=o[f++]+e);for(;u<r;++u,++d)s[d]=t[u],l[d]=n[u];for(;f<a;++f,++d)s[d]=i[f],l[d]=o[f]+e}function PI(e){te.call(this,Tde(),e),this._indices=null,this._dims=null}PI.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ye(PI,te,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},o=this._dims=[],a=r.length;let s=0,l,u;for(;s<a;++s)l=n[s].fname,u=i[l]||(i[l]=T$()),o.push(A$(u,s,r[s]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,o=this._indices,a=this._dims,s=this.value,l=s.curr(),u=s.prev(),f=s.all(),d=n.rem=n.add,p=n.mod,g=i.length,y={};let v,b,x,_,T,A,w,C,D;if(u.set(l),t.rem.length&&(T=this.remove(e,t,n)),t.add.length&&s.add(t.add),t.mod.length)for(A={},_=t.mod,w=0,C=_.length;w<C;++w)A[_[w]._index]=1;for(w=0;w<g;++w)D=r[w],(!a[w]||e.modified("fields",w)||t.modified(D.fields))&&(x=D.fname,(v=y[x])||(o[x]=b=T$(),y[x]=v=b.insert(D,t.source,0)),a[w]=A$(b,w,i[w]).onAdd(v,l));for(w=0,C=s.data().length;w<C;++w)T[w]||(u[w]!==l[w]?d.push(w):A[w]&&l[w]!==f&&p.push(w));return s.mask=(1<<g)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,o=this._dims,a=this._indices,s=e.fields,l={},u=n.add,f=i.size()+r.length,d=o.length;let p=i.size(),g,y,v;i.resize(f,d),i.add(r);const b=i.curr(),x=i.prev(),_=i.all();for(g=0;g<d;++g)y=s[g].fname,v=l[y]||(l[y]=a[y].insert(s[g],r,p)),o[g].onAdd(v,b);for(;p<f;++p)x[p]=_,b[p]!==_&&u.push(p)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),o=r.all(),a=e.mod;let s,l,u;for(s=0,l=a.length;s<l;++s)u=a[s]._index,i[u]!==o&&n.push(u)},remove(e,t,n){const r=this._indices,i=this.value,o=i.curr(),a=i.prev(),s=i.all(),l={},u=n.rem,f=t.rem;let d,p,g,y;for(d=0,p=f.length;d<p;++d)g=f[d]._index,l[g]=1,a[g]=y=o[g],o[g]=s,y!==s&&u.push(g);for(g in r)r[g].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const o=i.remove(t,n);for(const a in r)r[a].reindex(o)})},update(e,t,n){const r=this._dims,i=e.query,o=t.stamp,a=r.length;let s=0,l,u;for(n.filters=0,u=0;u<a;++u)e.modified("query",u)&&(l=u,++s);if(s===1)s=r[l].one,this.incrementOne(r[l],i[l],n.add,n.rem);else for(u=0,s=0;u<a;++u)e.modified("query",u)&&(s|=r[u].one,this.incrementAll(r[u],i[u],o,n.add),n.rem=n.add);return s},incrementAll(e,t,n,r){const i=this.value,o=i.seen(),a=i.curr(),s=i.prev(),l=e.index(),u=e.bisect(e.range),f=e.bisect(t),d=f[0],p=f[1],g=u[0],y=u[1],v=e.one;let b,x,_;if(d<g)for(b=d,x=Math.min(g,p);b<x;++b)_=l[b],o[_]!==n&&(s[_]=a[_],o[_]=n,r.push(_)),a[_]^=v;else if(d>g)for(b=g,x=Math.min(d,y);b<x;++b)_=l[b],o[_]!==n&&(s[_]=a[_],o[_]=n,r.push(_)),a[_]^=v;if(p>y)for(b=Math.max(d,y),x=p;b<x;++b)_=l[b],o[_]!==n&&(s[_]=a[_],o[_]=n,r.push(_)),a[_]^=v;else if(p<y)for(b=Math.max(g,p),x=y;b<x;++b)_=l[b],o[_]!==n&&(s[_]=a[_],o[_]=n,r.push(_)),a[_]^=v;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,o=i.curr(),a=e.index(),s=e.bisect(e.range),l=e.bisect(t),u=l[0],f=l[1],d=s[0],p=s[1],g=e.one;let y,v,b;if(u<d)for(y=u,v=Math.min(d,f);y<v;++y)b=a[y],o[b]^=g,n.push(b);else if(u>d)for(y=d,v=Math.min(u,p);y<v;++y)b=a[y],o[b]^=g,r.push(b);if(f>p)for(y=Math.max(u,p),v=f;y<v;++y)b=a[y],o[b]^=g,n.push(b);else if(f<p)for(y=Math.max(d,f),v=p;y<v;++y)b=a[y],o[b]^=g,r.push(b);e.range=t.slice()}});function $I(e){te.call(this,null,e)}$I.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ye($I,te,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if((i&n)===0)return t.StopPropagation;const o=t.fork(t.ALL),a=r.data(),s=r.curr(),l=r.prev(),u=f=>s[f]&n?null:a[f];return o.filter(o.MOD,u),i&i-1?(o.filter(o.ADD,f=>{const d=s[f]&n;return!d&&d^l[f]&n?a[f]:null}),o.filter(o.REM,f=>{const d=s[f]&n;return d&&!(d^(d^l[f]&n))?a[f]:null})):(o.filter(o.ADD,u),o.filter(o.REM,f=>(s[f]&n)===i?a[f]:null)),o.filter(o.SOURCE,f=>u(f._index))}});const Ide=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:PI,resolvefilter:$I},Symbol.toStringTag,{value:"Module"})),Mde="RawCode",oc="Literal",Rde="Property",kde="Identifier",Nde="ArrayExpression",Fde="BinaryExpression",XB="CallExpression",Pde="ConditionalExpression",$de="LogicalExpression",zde="MemberExpression",Lde="ObjectExpression",jde="UnaryExpression";function Ea(e){this.type=e}Ea.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=Ude(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function Ude(e){switch(e.type){case Nde:return e.elements;case Fde:case $de:return[e.left,e.right];case XB:return[e.callee].concat(e.arguments);case Pde:return[e.test,e.consequent,e.alternate];case zde:return[e.object,e.property];case Lde:return e.properties;case Rde:return[e.key,e.value];case jde:return[e.argument];case kde:case oc:case Mde:default:return[]}}var yo,Te,ne,or,xt,nS=1,xm=2,sc=3,qu=4,rS=5,Cc=6,Fr=7,_m=8,Bde=9;yo={};yo[nS]="Boolean";yo[xm]="<end>";yo[sc]="Identifier";yo[qu]="Keyword";yo[rS]="Null";yo[Cc]="Numeric";yo[Fr]="Punctuator";yo[_m]="String";yo[Bde]="RegularExpression";var Vde="ArrayExpression",Hde="BinaryExpression",qde="CallExpression",Gde="ConditionalExpression",QB="Identifier",Yde="Literal",Wde="LogicalExpression",Xde="MemberExpression",Qde="ObjectExpression",Zde="Property",Kde="UnaryExpression",Tn="Unexpected token %0",Jde="Unexpected number",ehe="Unexpected string",the="Unexpected identifier",nhe="Unexpected reserved word",rhe="Unexpected end of input",wT="Invalid regular expression",gw="Invalid regular expression: missing /",ZB="Octal literals are not allowed in strict mode.",ihe="Duplicate data property in object literal not allowed in strict mode",Un="ILLEGAL",kg="Disabled.",ahe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),ohe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function iS(e,t){if(!e)throw new Error("ASSERT: "+t)}function Yo(e){return e>=48&&e<=57}function zI(e){return"0123456789abcdefABCDEF".includes(e)}function fg(e){return"01234567".includes(e)}function she(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function Ng(e){return e===10||e===13||e===8232||e===8233}function Em(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&ahe.test(String.fromCharCode(e))}function D1(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&ohe.test(String.fromCharCode(e))}const uhe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function KB(){for(;ne<or;){const e=Te.charCodeAt(ne);if(she(e)||Ng(e))++ne;else break}}function AT(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)ne<or&&zI(Te[ne])?(r=Te[ne++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):lt({},Tn,Un);return String.fromCharCode(i)}function lhe(){var e,t,n,r;for(e=Te[ne],t=0,e==="}"&&lt({},Tn,Un);ne<or&&(e=Te[ne++],!!zI(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&lt({},Tn,Un),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function JB(){var e,t;for(e=Te.charCodeAt(ne++),t=String.fromCharCode(e),e===92&&(Te.charCodeAt(ne)!==117&&lt({},Tn,Un),++ne,e=AT("u"),(!e||e==="\\"||!Em(e.charCodeAt(0)))&&lt({},Tn,Un),t=e);ne<or&&(e=Te.charCodeAt(ne),!!D1(e));)++ne,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),Te.charCodeAt(ne)!==117&&lt({},Tn,Un),++ne,e=AT("u"),(!e||e==="\\"||!D1(e.charCodeAt(0)))&&lt({},Tn,Un),t+=e);return t}function che(){var e,t;for(e=ne++;ne<or;){if(t=Te.charCodeAt(ne),t===92)return ne=e,JB();if(D1(t))++ne;else break}return Te.slice(e,ne)}function fhe(){var e,t,n;return e=ne,t=Te.charCodeAt(ne)===92?JB():che(),t.length===1?n=sc:uhe.hasOwnProperty(t)?n=qu:t==="null"?n=rS:t==="true"||t==="false"?n=nS:n=sc,{type:n,value:t,start:e,end:ne}}function mw(){var e=ne,t=Te.charCodeAt(ne),n,r=Te[ne],i,o,a;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ne,{type:Fr,value:String.fromCharCode(t),start:e,end:ne};default:if(n=Te.charCodeAt(ne+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ne+=2,{type:Fr,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ne};case 33:case 61:return ne+=2,Te.charCodeAt(ne)===61&&++ne,{type:Fr,value:Te.slice(e,ne),start:e,end:ne}}}if(a=Te.substr(ne,4),a===">>>=")return ne+=4,{type:Fr,value:a,start:e,end:ne};if(o=a.substr(0,3),o===">>>"||o==="<<="||o===">>=")return ne+=3,{type:Fr,value:o,start:e,end:ne};if(i=o.substr(0,2),r===i[1]&&"+-<>&|".includes(r)||i==="=>")return ne+=2,{type:Fr,value:i,start:e,end:ne};if(i==="//"&&lt({},Tn,Un),"<>=!+-*%&|^/".includes(r))return++ne,{type:Fr,value:r,start:e,end:ne};lt({},Tn,Un)}function dhe(e){let t="";for(;ne<or&&zI(Te[ne]);)t+=Te[ne++];return t.length===0&&lt({},Tn,Un),Em(Te.charCodeAt(ne))&&lt({},Tn,Un),{type:Cc,value:parseInt("0x"+t,16),start:e,end:ne}}function hhe(e){let t="0"+Te[ne++];for(;ne<or&&fg(Te[ne]);)t+=Te[ne++];return(Em(Te.charCodeAt(ne))||Yo(Te.charCodeAt(ne)))&&lt({},Tn,Un),{type:Cc,value:parseInt(t,8),octal:!0,start:e,end:ne}}function C$(){var e,t,n;if(n=Te[ne],iS(Yo(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ne,e="",n!=="."){if(e=Te[ne++],n=Te[ne],e==="0"){if(n==="x"||n==="X")return++ne,dhe(t);if(fg(n))return hhe(t);n&&Yo(n.charCodeAt(0))&&lt({},Tn,Un)}for(;Yo(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="."){for(e+=Te[ne++];Yo(Te.charCodeAt(ne));)e+=Te[ne++];n=Te[ne]}if(n==="e"||n==="E")if(e+=Te[ne++],n=Te[ne],(n==="+"||n==="-")&&(e+=Te[ne++]),Yo(Te.charCodeAt(ne)))for(;Yo(Te.charCodeAt(ne));)e+=Te[ne++];else lt({},Tn,Un);return Em(Te.charCodeAt(ne))&&lt({},Tn,Un),{type:Cc,value:parseFloat(e),start:t,end:ne}}function phe(){var e="",t,n,r,i,o=!1;for(t=Te[ne],iS(t==="'"||t==='"',"String literal must starts with a quote"),n=ne,++ne;ne<or;)if(r=Te[ne++],r===t){t="";break}else if(r==="\\")if(r=Te[ne++],!r||!Ng(r.charCodeAt(0)))switch(r){case"u":case"x":Te[ne]==="{"?(++ne,e+=lhe()):e+=AT(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:fg(r)?(i="01234567".indexOf(r),i!==0&&(o=!0),ne<or&&fg(Te[ne])&&(o=!0,i=i*8+"01234567".indexOf(Te[ne++]),"0123".includes(r)&&ne<or&&fg(Te[ne])&&(i=i*8+"01234567".indexOf(Te[ne++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&Te[ne]===`
`&&++ne;else{if(Ng(r.charCodeAt(0)))break;e+=r}return t!==""&&lt({},Tn,Un),{type:_m,value:e,octal:o,start:n,end:ne}}function ghe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";lt({},wT)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{lt({},wT)}try{return new RegExp(e,t)}catch{return null}}function mhe(){var e,t,n,r,i;for(e=Te[ne],iS(e==="/","Regular expression literal must start with a slash"),t=Te[ne++],n=!1,r=!1;ne<or;)if(e=Te[ne++],t+=e,e==="\\")e=Te[ne++],Ng(e.charCodeAt(0))&&lt({},gw),t+=e;else if(Ng(e.charCodeAt(0)))lt({},gw);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||lt({},gw),i=t.substr(1,t.length-2),{value:i,literal:t}}function yhe(){var e,t,n;for(t="",n="";ne<or&&(e=Te[ne],!!D1(e.charCodeAt(0)));)++ne,e==="\\"&&ne<or?lt({},Tn,Un):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&lt({},wT,n),{value:n,literal:t}}function vhe(){var e,t,n,r;return xt=null,KB(),e=ne,t=mhe(),n=yhe(),r=ghe(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:ne}}function bhe(e){return e.type===sc||e.type===qu||e.type===nS||e.type===rS}function eV(){if(KB(),ne>=or)return{type:xm,start:ne,end:ne};const e=Te.charCodeAt(ne);return Em(e)?fhe():e===40||e===41||e===59?mw():e===39||e===34?phe():e===46?Yo(Te.charCodeAt(ne+1))?C$():mw():Yo(e)?C$():mw()}function $r(){const e=xt;return ne=e.end,xt=eV(),ne=e.end,e}function tV(){const e=ne;xt=eV(),ne=e}function She(e){const t=new Ea(Vde);return t.elements=e,t}function D$(e,t,n){const r=new Ea(e==="||"||e==="&&"?Wde:Hde);return r.operator=e,r.left=t,r.right=n,r}function xhe(e,t){const n=new Ea(qde);return n.callee=e,n.arguments=t,n}function _he(e,t,n){const r=new Ea(Gde);return r.test=e,r.consequent=t,r.alternate=n,r}function LI(e){const t=new Ea(QB);return t.name=e,t}function Kp(e){const t=new Ea(Yde);return t.value=e.value,t.raw=Te.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function O$(e,t,n){const r=new Ea(Xde);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function Ehe(e){const t=new Ea(Qde);return t.properties=e,t}function I$(e,t,n){const r=new Ea(Zde);return r.key=t,r.value=n,r.kind=e,r}function whe(e,t){const n=new Ea(Kde);return n.operator=e,n.argument=t,n.prefix=!0,n}function lt(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(o,a)=>(iS(a<r.length,"Message reference must be in range"),r[a]));throw n=new Error(i),n.index=ne,n.description=i,n}function aS(e){e.type===xm&&lt(e,rhe),e.type===Cc&&lt(e,Jde),e.type===_m&&lt(e,ehe),e.type===sc&&lt(e,the),e.type===qu&&lt(e,nhe),lt(e,Tn,e.value)}function sr(e){const t=$r();(t.type!==Fr||t.value!==e)&&aS(t)}function Ft(e){return xt.type===Fr&&xt.value===e}function yw(e){return xt.type===qu&&xt.value===e}function Ahe(){const e=[];for(ne=xt.start,sr("[");!Ft("]");)Ft(",")?($r(),e.push(null)):(e.push(uc()),Ft("]")||sr(","));return $r(),She(e)}function M$(){ne=xt.start;const e=$r();return e.type===_m||e.type===Cc?(e.octal&&lt(e,ZB),Kp(e)):LI(e.value)}function The(){var e,t,n,r;if(ne=xt.start,e=xt,e.type===sc)return n=M$(),sr(":"),r=uc(),I$("init",n,r);if(e.type===xm||e.type===Fr)aS(e);else return t=M$(),sr(":"),r=uc(),I$("init",t,r)}function Che(){var e=[],t,n,r,i={},o=String;for(ne=xt.start,sr("{");!Ft("}");)t=The(),t.key.type===QB?n=t.key.name:n=o(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?lt({},ihe):i[r]=!0,e.push(t),Ft("}")||sr(",");return sr("}"),Ehe(e)}function Dhe(){sr("(");const e=jI();return sr(")"),e}const Ohe={if:1};function Ihe(){var e,t,n;if(Ft("("))return Dhe();if(Ft("["))return Ahe();if(Ft("{"))return Che();if(e=xt.type,ne=xt.start,e===sc||Ohe[xt.value])n=LI($r().value);else if(e===_m||e===Cc)xt.octal&&lt(xt,ZB),n=Kp($r());else{if(e===qu)throw new Error(kg);e===nS?(t=$r(),t.value=t.value==="true",n=Kp(t)):e===rS?(t=$r(),t.value=null,n=Kp(t)):Ft("/")||Ft("/=")?(n=Kp(vhe()),tV()):aS($r())}return n}function Mhe(){const e=[];if(sr("("),!Ft(")"))for(;ne<or&&(e.push(uc()),!Ft(")"));)sr(",");return sr(")"),e}function Rhe(){ne=xt.start;const e=$r();return bhe(e)||aS(e),LI(e.value)}function khe(){return sr("."),Rhe()}function Nhe(){sr("[");const e=jI();return sr("]"),e}function Fhe(){var e,t,n;for(e=Ihe();;)if(Ft("."))n=khe(),e=O$(".",e,n);else if(Ft("("))t=Mhe(),e=xhe(e,t);else if(Ft("["))n=Nhe(),e=O$("[",e,n);else break;return e}function R$(){const e=Fhe();if(xt.type===Fr&&(Ft("++")||Ft("--")))throw new Error(kg);return e}function uv(){var e,t;if(xt.type!==Fr&&xt.type!==qu)t=R$();else{if(Ft("++")||Ft("--"))throw new Error(kg);if(Ft("+")||Ft("-")||Ft("~")||Ft("!"))e=$r(),t=uv(),t=whe(e.value,t);else{if(yw("delete")||yw("void")||yw("typeof"))throw new Error(kg);t=R$()}}return t}function k$(e){let t=0;if(e.type!==Fr&&e.type!==qu)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Phe(){var e,t,n,r,i,o,a,s,l,u;if(e=xt,l=uv(),r=xt,i=k$(r),i===0)return l;for(r.prec=i,$r(),t=[e,xt],a=uv(),o=[l,r,a];(i=k$(xt))>0;){for(;o.length>2&&i<=o[o.length-2].prec;)a=o.pop(),s=o.pop().value,l=o.pop(),t.pop(),n=D$(s,l,a),o.push(n);r=$r(),r.prec=i,o.push(r),t.push(xt),n=uv(),o.push(n)}for(u=o.length-1,n=o[u],t.pop();u>1;)t.pop(),n=D$(o[u-1].value,o[u-2],n),u-=2;return n}function uc(){var e,t,n;return e=Phe(),Ft("?")&&($r(),t=uc(),sr(":"),n=uc(),e=_he(e,t,n)),e}function jI(){const e=uc();if(Ft(","))throw new Error(kg);return e}function UI(e){Te=e,ne=0,or=Te.length,xt=null,tV();const t=jI();if(xt.type!==xm)throw new Error("Unexpect token after expression.");return t}var nV={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function rV(e){function t(a,s,l,u){let f=e(s[0]);return l&&(f=l+"("+f+")",l.lastIndexOf("new ",0)===0&&(f="("+f+")")),f+"."+a+(u<0?"":u===0?"()":"("+s.slice(1).map(e).join(",")+")")}function n(a,s,l){return u=>t(a,u,s,l)}const r="new Date",i="String",o="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(a){a.length<3&&re("Missing arguments to clamp function."),a.length>3&&re("Too many arguments to clamp function.");const s=a.map(e);return"Math.max("+s[1]+", Math.min("+s[2]+","+s[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),btoa:"btoa",atob:"atob",regexp:o,test:n("test",o),if:function(a){a.length<3&&re("Missing arguments to if function."),a.length>3&&re("Too many arguments to if function.");const s=a.map(e);return"("+s[0]+"?"+s[1]+":"+s[2]+")"}}}function $he(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function iV(e){e=e||{};const t=e.allowed?pa(e.allowed):{},n=e.forbidden?pa(e.forbidden):{},r=e.constants||nV,i=(e.functions||rV)(d),o=e.globalvar,a=e.fieldvar,s=Ge(o)?o:y=>`${o}["${y}"]`;let l={},u={},f=0;function d(y){if(Ee(y))return y;const v=p[y.type];return v==null&&re("Unsupported type: "+y.type),v(y)}const p={Literal:y=>y.raw,Identifier:y=>{const v=y.name;return f>0?v:_e(n,v)?re("Illegal identifier: "+v):_e(r,v)?r[v]:_e(t,v)?v:(l[v]=1,s(v))},MemberExpression:y=>{const v=!y.computed,b=d(y.object);v&&(f+=1);const x=d(y.property);return b===a&&(u[$he(x)]=1),v&&(f-=1),b+(v?"."+x:"["+x+"]")},CallExpression:y=>{y.callee.type!=="Identifier"&&re("Illegal callee type: "+y.callee.type);const v=y.callee.name,b=y.arguments,x=_e(i,v)&&i[v];return x||re("Unrecognized function: "+v),Ge(x)?x(b):x+"("+b.map(d).join(",")+")"},ArrayExpression:y=>"["+y.elements.map(d).join(",")+"]",BinaryExpression:y=>"("+d(y.left)+" "+y.operator+" "+d(y.right)+")",UnaryExpression:y=>"("+y.operator+d(y.argument)+")",ConditionalExpression:y=>"("+d(y.test)+"?"+d(y.consequent)+":"+d(y.alternate)+")",LogicalExpression:y=>"("+d(y.left)+y.operator+d(y.right)+")",ObjectExpression:y=>"{"+y.properties.map(d).join(",")+"}",Property:y=>{f+=1;const v=d(y.key);return f-=1,v+":"+d(y.value)}};function g(y){const v={code:d(y),globals:Object.keys(l),fields:Object.keys(u)};return l={},u={},v}return g.functions=i,g.constants=r,g}const N$=Symbol("vega_selection_getter");function aV(e){return(!e.getter||!e.getter[N$])&&(e.getter=Li(e.field),e.getter[N$]=!0),e.getter}const BI="intersect",F$="union",zhe="vlMulti",Lhe="vlPoint",P$="or",jhe="and",Ha="_vgsid_",Fg=Li(Ha),Uhe="E",Bhe="R",Vhe="R-E",Hhe="R-LE",qhe="R-RE",Ghe="E-LT",Yhe="E-LTE",Whe="E-GT",Xhe="E-GTE",Qhe="E-VALID",Zhe="E-ONE",O1="index:unit";function $$(e,t){for(var n=t.fields,r=t.values,i=n.length,o=0,a,s;o<i;++o)if(s=n[o],a=aV(s)(e),Su(a)&&(a=nr(a)),Su(r[o])&&(r[o]=nr(r[o])),ae(r[o])&&Su(r[o][0])&&(r[o]=r[o].map(nr)),s.type===Uhe){if(ae(r[o])?!r[o].includes(a):a!==r[o])return!1}else if(s.type===Bhe){if(!Bf(a,r[o]))return!1}else if(s.type===qhe){if(!Bf(a,r[o],!0,!1))return!1}else if(s.type===Vhe){if(!Bf(a,r[o],!1,!1))return!1}else if(s.type===Hhe){if(!Bf(a,r[o],!1,!0))return!1}else if(s.type===Ghe){if(a>=r[o])return!1}else if(s.type===Yhe){if(a>r[o])return!1}else if(s.type===Whe){if(a<=r[o])return!1}else if(s.type===Xhe){if(a<r[o])return!1}else if(s.type===Qhe){if(a===null||isNaN(a))return!1}else if(s.type===Zhe&&r[o].indexOf(a)===-1)return!1;return!0}function Khe(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],o=r?r[O1]&&r[O1].value:void 0,a=n===BI,s=i.length,l=0,u,f,d,p,g;l<s;++l)if(u=i[l],o&&a){if(f=f||{},d=f[p=u.unit]||0,d===-1)continue;if(g=$$(t,u),f[p]=g?-1:++d,g&&o.size===1)return!0;if(!g&&d===o.get(p).count)return!1}else if(g=$$(t,u),a^g)return g;return s&&a}const oV=Vd(Fg),Jhe=oV.left,epe=oV.right;function tpe(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],o=r?r[O1]&&r[O1].value:void 0,a=n===BI,s=Fg(t),l=Jhe(i,s);if(l===i.length||Fg(i[l])!==s)return!1;if(o&&a){if(o.size===1)return!0;if(epe(i,s)-l<o.size)return!1}return!0}function npe(e,t){return e.map(n=>qe(t.fields?{values:t.fields.map(r=>aV(r)(n.datum))}:{[Ha]:Fg(n.datum)},t))}function rpe(e,t,n,r){for(var i=this.context.data[e],o=i?i.values.value:[],a={},s={},l={},u,f,d,p,g,y,v,b,x,_,T=o.length,A=0,w,C;A<T;++A)if(u=o[A],p=u.unit,f=u.fields,d=u.values,f&&d){for(w=0,C=f.length;w<C;++w)g=f[w],v=a[g.field]||(a[g.field]={}),b=v[p]||(v[p]=[]),l[g.field]=x=g.type.charAt(0),_=vw[`${x}_union`],v[p]=_(b,Se(d[w]));n&&(b=s[p]||(s[p]=[]),b.push(Se(d).reduce((D,I,M)=>(D[f[M].field]=I,D),{})))}else g=Ha,y=Fg(u),v=a[g]||(a[g]={}),b=v[p]||(v[p]=[]),b.push(y),n&&(b=s[p]||(s[p]=[]),b.push({[Ha]:y}));if(t=t||F$,a[Ha]?a[Ha]=vw[`${Ha}_${t}`](...Object.values(a[Ha])):Object.keys(a).forEach(D=>{a[D]=Object.keys(a[D]).map(I=>a[D][I]).reduce((I,M)=>I===void 0?M:vw[`${l[D]}_${t}`](I,M))}),o=Object.keys(s),n&&o.length){const D=r?Lhe:zhe;a[D]=t===F$?{[P$]:o.reduce((I,M)=>(I.push(...s[M]),I),[])}:{[jhe]:o.map(I=>({[P$]:s[I]}))}}return a}var vw={[`${Ha}_union`]:qZ,[`${Ha}_intersect`]:VZ,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=nr(t[0]),r=nr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=nr(t[0]),r=nr(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const ipe=":",ape="@";function VI(e,t,n,r){t[0].type!==oc&&re("First argument to selection functions must be a string literal.");const i=t[0].value,o=t.length>=2&&at(t).value,a="unit",s=ape+a,l=ipe+i;o===BI&&!_e(r,s)&&(r[s]=n.getData(i).indataRef(n,a)),_e(r,l)||(r[l]=n.getData(i).tuplesRef())}function sV(e){const t=this.context.data[e];return t?t.values.value:[]}function ope(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function spe(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(ji).insert(t)),1}function upe(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const wm=e=>function(t,n){const r=this.context.dataflow.locale();return t===null?"null":r[e](n)(t)},lpe=wm("format"),uV=wm("timeFormat"),cpe=wm("utcFormat"),fpe=wm("timeParse"),dpe=wm("utcParse"),D0=new Date(2e3,0,1);function oS(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(D0.setYear(2e3),D0.setMonth(e),D0.setDate(t),uV.call(this,D0,n))}function hpe(e){return oS.call(this,e,1,"%B")}function ppe(e){return oS.call(this,e,1,"%b")}function gpe(e){return oS.call(this,0,2+e,"%A")}function mpe(e){return oS.call(this,0,2+e,"%a")}const ype=":",vpe="@",TT="%",lV="$";function HI(e,t,n,r){t[0].type!==oc&&re("First argument to data functions must be a string literal.");const i=t[0].value,o=ype+i;if(!_e(o,r))try{r[o]=n.getData(i).tuplesRef()}catch{}}function bpe(e,t,n,r){t[0].type!==oc&&re("First argument to indata must be a string literal."),t[1].type!==oc&&re("Second argument to indata must be a string literal.");const i=t[0].value,o=t[1].value,a=vpe+o;_e(a,r)||(r[a]=n.getData(i).indataRef(n,o))}function _r(e,t,n,r){if(t[0].type===oc)z$(n,r,t[0].value);else for(e in n.scales)z$(n,r,e)}function z$(e,t,n){const r=TT+n;if(!_e(t,r))try{t[r]=e.scaleRef(n)}catch{}}function vo(e,t){if(Ee(e)){const n=t.scales[e];return n&&UP(n.value)?n.value:void 0}else if(Ge(e))return UP(e)?e:void 0}function Spe(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=_r,n._range=_r,n._scale=_r;const r=i=>"_["+(i.type===oc?pe(TT+i.value):pe(TT)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function qI(e,t){return function(n,r,i){if(n){const o=vo(n,(i||this).context);return o&&o.path[e](r)}else return t(r)}}const xpe=qI("area",Lse),_pe=qI("bounds",Vse),Epe=qI("centroid",Xse);function wpe(e,t){const n=vo(e,(t||this).context);return n&&n.scale()}function Ape(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function GI(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function Tpe(){return GI(this.context.dataflow,"warn",arguments)}function Cpe(){return GI(this.context.dataflow,"info",arguments)}function Dpe(){return GI(this.context.dataflow,"debug",arguments)}function bw(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function CT(e){const t=Iu(e),n=bw(t.r),r=bw(t.g),i=bw(t.b);return .2126*n+.7152*r+.0722*i}function Ope(e,t){const n=CT(e),r=CT(t),i=Math.max(n,r),o=Math.min(n,r);return(i+.05)/(o+.05)}function Ipe(){const e=[].slice.call(arguments);return e.unshift({}),qe(...e)}function cV(e,t){return e===t||e!==e&&t!==t?!0:ae(e)?ae(t)&&e.length===t.length?Mpe(e,t):!1:xe(e)&&xe(t)?fV(e,t):!1}function Mpe(e,t){for(let n=0,r=e.length;n<r;++n)if(!cV(e[n],t[n]))return!1;return!0}function fV(e,t){for(const n in e)if(!cV(e[n],t[n]))return!1;return!0}function L$(e){return t=>fV(e,t)}function Rpe(e,t,n,r,i,o){const a=this.context.dataflow,s=this.context.data[e],l=s.input,u=a.stamp();let f=s.changes,d,p;if(a._trigger===!1||!(l.value.length||t||r))return 0;if((!f||f.stamp<u)&&(s.changes=f=a.changeset(),f.stamp=u,a.runAfter(()=>{s.modified=!0,a.pulse(l,f).run()},!0,1)),n&&(d=n===!0?ji:ae(n)||gb(n)?n:L$(n),f.remove(d)),t&&f.insert(t),r&&(d=L$(r),l.value.some(d)?f.remove(d):f.insert(r)),i)for(p in o)f.modify(i,p,o[p]);return 1}function kpe(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function Npe(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const j$={};function Fpe(e,t){const n=j$[t]||(j$[t]=Li(t));return ae(e)?e.map(n):n(e)}function sS(e){return ae(e)||ArrayBuffer.isView(e)?e:null}function YI(e){return sS(e)||(Ee(e)?e:null)}function Ppe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return sS(e).join(...n)}function $pe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return YI(e).indexOf(...n)}function zpe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return YI(e).lastIndexOf(...n)}function Lpe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return YI(e).slice(...n)}function jpe(e,t,n){return Ge(n)&&re("Function argument passed to replace."),!Ee(t)&&!RC(t)&&re("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Upe(e){return sS(e).slice().reverse()}function Bpe(e){return sS(e).slice().sort(Qg)}function Vpe(e,t,n){return oO(e||0,t||0,n||0)}function Hpe(e,t){const n=vo(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function qpe(e,t){const n=vo(e,(t||this).context);return n?n.copy():void 0}function Gpe(e,t){const n=vo(e,(t||this).context);return n?n.domain():[]}function Ype(e,t,n){const r=vo(e,(n||this).context);return r?ae(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function Wpe(e,t){const n=vo(e,(t||this).context);return n&&n.range?n.range():[]}function Xpe(e,t,n){const r=vo(e,(n||this).context);return r?r(t):void 0}function Qpe(e,t,n,r,i){e=vo(e,(i||this).context);const o=nj(t,n);let a=e.domain(),s=a[0],l=at(a),u=ur;return l-s?u=HL(e,s,l):e=(e.interpolator?dt("sequential")().interpolator(e.interpolator()):dt("linear")().interpolate(e.interpolate()).range(e.range())).domain([s=0,l=1]),e.ticks&&(a=e.ticks(+r||15),s!==a[0]&&a.unshift(s),l!==at(a)&&a.push(l)),a.forEach(f=>o.stop(u(f),e(f))),o}function Zpe(e,t,n){const r=vo(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function Kpe(e){let t=null;return function(n){return n?Ag(n,t=t||gd(e)):e}}const dV=e=>e.data;function hV(e,t){const n=sV.call(t,e);return n.root&&n.root.lookup||{}}function Jpe(e,t,n){const r=hV(e,this),i=r[t],o=r[n];return i&&o?i.path(o).map(dV):void 0}function ege(e,t){const n=hV(e,this)[t];return n?n.ancestors().map(dV):void 0}const pV=()=>typeof window<"u"&&window||null;function tge(){const e=pV();return e?e.screen:{}}function nge(){const e=pV();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function rge(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function gV(e,t,n){if(!e)return[];const[r,i]=e,o=new ln().set(r[0],r[1],i[0],i[1]),a=n||this.context.dataflow.scenegraph().root;return Kj(a,o,ige(t))}function ige(e){let t=null;if(e){const n=Se(e.marktype),r=Se(e.markname);t=i=>(!n.length||n.some(o=>i.marktype===o))&&(!r.length||r.some(o=>i.name===o))}return t}function age(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=Se(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function oge(e){return Se(e).reduce((t,n,r)=>{let[i,o]=n;return t+=r==0?`M ${i},${o} `:r===e.length-1?" Z":`L ${i},${o} `},"")}function sge(e,t,n){const{x:r,y:i,mark:o}=n,a=new ln().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,u]of t)l<a.x1&&(a.x1=l),l>a.x2&&(a.x2=l),u<a.y1&&(a.y1=u),u>a.y2&&(a.y2=u);return a.translate(r,i),gV([[a.x1,a.y1],[a.x2,a.y2]],e,o).filter(l=>uge(l.x,l.y,t))}function uge(e,t,n){let r=0;for(let i=0,o=n.length-1;i<n.length;o=i++){const[a,s]=n[o],[l,u]=n[i];u>t!=s>t&&e<(a-l)*(t-u)/(s-u)+l&&r++}return r&1}const Pg={random(){return Bi()},cumulativeNormal:Sb,cumulativeLogNormal:oD,cumulativeUniform:cD,densityNormal:tD,densityLogNormal:aD,densityUniform:lD,quantileNormal:xb,quantileLogNormal:sD,quantileUniform:fD,sampleNormal:bb,sampleLogNormal:iD,sampleUniform:uD,isArray:ae,isBoolean:Sc,isDate:Su,isDefined(e){return e!==void 0},isNumber:ct,isObject:xe,isRegExp:RC,isString:Ee,isTuple:gb,isValid(e){return e!=null&&e===e},toBoolean:NC,toDate(e){return FC(e)},toNumber:nr,toString:PC,indexof:$pe,join:Ppe,lastindexof:zpe,replace:jpe,reverse:Upe,sort:Bpe,slice:Lpe,flush:_8,lerp:w8,merge:Ipe,pad:C8,peek:at,pluck:Fpe,span:Zg,inrange:Bf,truncate:D8,rgb:Iu,lab:Fv,hcl:Pv,hsl:kv,luminance:CT,contrast:Ope,sequence:si,format:lpe,utcFormat:cpe,utcParse:dpe,utcOffset:sz,utcSequence:cz,timeFormat:uV,timeParse:fpe,timeOffset:oz,timeSequence:lz,timeUnitSpecifier:X8,monthFormat:hpe,monthAbbrevFormat:ppe,dayFormat:gpe,dayAbbrevFormat:mpe,quarter:v8,utcquarter:b8,week:Z8,utcweek:ez,dayofyear:Q8,utcdayofyear:J8,warn:Tpe,info:Cpe,debug:Dpe,extent(e){return no(e)},inScope:Ape,intersect:gV,clampRange:S8,pinchDistance:kpe,pinchAngle:Npe,screen:tge,containerSize:rge,windowSize:nge,bandspace:Vpe,setdata:spe,pathShape:Kpe,panLinear:p8,panLog:g8,panPow:m8,panSymlog:y8,zoomLinear:CC,zoomLog:DC,zoomPow:Sv,zoomSymlog:OC,encode:upe,modify:Rpe,lassoAppend:age,lassoPath:oge,intersectLasso:sge},lge=["view","item","group","xy","x","y"],cge="event.vega.",mV="this.",WI={},yV={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${pe(lV+e)}]`,functions:fge,constants:nV,visitors:WI},DT=iV(yV);function fge(e){const t=rV(e);lge.forEach(n=>t[n]=cge+n);for(const n in Pg)t[n]=mV+n;return qe(t,Spe(e,Pg,WI)),t}function an(e,t,n){return arguments.length===1?Pg[e]:(Pg[e]=t,n&&(WI[e]=n),DT&&(DT.functions[e]=mV+e),this)}an("bandwidth",Hpe,_r);an("copy",qpe,_r);an("domain",Gpe,_r);an("range",Wpe,_r);an("invert",Ype,_r);an("scale",Xpe,_r);an("gradient",Qpe,_r);an("geoArea",xpe,_r);an("geoBounds",_pe,_r);an("geoCentroid",Epe,_r);an("geoShape",Zpe,_r);an("geoScale",wpe,_r);an("indata",ope,bpe);an("data",sV,HI);an("treePath",Jpe,HI);an("treeAncestors",ege,HI);an("vlSelectionTest",Khe,VI);an("vlSelectionIdTest",tpe,VI);an("vlSelectionResolve",rpe,VI);an("vlSelectionTuples",npe);function so(e,t){const n={};let r;try{e=Ee(e)?e:pe(e)+"",r=UI(e)}catch{re("Expression parse error: "+e)}r.visit(o=>{if(o.type!==XB)return;const a=o.callee.name,s=yV.visitors[a];s&&s(a,o.arguments,t,n)});const i=DT(r);return i.globals.forEach(o=>{const a=lV+o;!_e(n,a)&&t.getSignal(o)&&(n[a]=t.signalRef(o))}),{$expr:qe({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function dge(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const hge=pa(["rule"]),U$=pa(["group","image","rect"]);function pge(e,t){let n="";return hge[t]||(e.x2&&(e.x?(U$[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(U$[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function XI(e){return(e+"").toLowerCase()}function gge(e){return XI(e)==="operator"}function mge(e){return XI(e)==="collect"}function _p(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function yge(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var vge={operator:(e,t)=>_p(e,["_"],t.code),parameter:(e,t)=>_p(e,["datum","_"],t.code),event:(e,t)=>_p(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return _p(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const o in r){const a="o["+pe(o)+"]";i+=`$=${r[o].code};if(${a}!==$)${a}=$,m=1;`}return i+=pge(r,n),i+="return m;",_p(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(pe).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(o,a)=>{const s=t[a];let l,u;return o.path?(l=`a${o.path}`,u=`b${o.path}`):((n=n||{})["f"+a]=o,l=`this.f${a}(a)`,u=`this.f${a}(b)`),yge(l,u,-s,s)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function bge(e){const t=this;gge(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function Sge(e){const t=this;if(e.params){const n=t.get(e.id);n||re("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function xge(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=ae(i)?i.map(o=>B$(o,n,t)):B$(i,n,t)}return t}function B$(e,t,n){if(!e||!xe(e))return e;for(let r=0,i=V$.length,o;r<i;++r)if(o=V$[r],_e(e,o.key))return o.parse(e,t,n);return e}var V$=[{key:"$ref",parse:_ge},{key:"$key",parse:wge},{key:"$expr",parse:Ege},{key:"$field",parse:Age},{key:"$encode",parse:Cge},{key:"$compare",parse:Tge},{key:"$context",parse:Dge},{key:"$subflow",parse:Oge},{key:"$tupleid",parse:Ige}];function _ge(e,t){return t.get(e.$ref)||re("Operator not defined: "+e.$ref)}function Ege(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=Gr(t.parameterExpression(e.$expr),e.$fields))}function wge(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=kC(e.$key,e.$flat,t.expr.codegen))}function Age(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Li(e.$field,e.$name,t.expr.codegen))}function Tge(e,t){const n="c:"+e.$compare+"_"+e.$order,r=Se(e.$compare).map(i=>i&&i.$tupleid?Re:i);return t.fn[n]||(t.fn[n]=IC(r,e.$order,t.expr.codegen))}function Cge(e,t){const n=e.$encode,r={};for(const i in n){const o=n[i];r[i]=Gr(t.encodeExpression(o.$expr),o.$fields),r[i].output=o.$output}return r}function Dge(e,t){return t}function Oge(e,t){const n=e.$subflow;return function(r,i,o){const a=t.fork().parse(n),s=a.get(n.operators[0].id),l=a.signals.parent;return l&&l.set(o),s.detachSubflow=()=>t.detach(a),s}}function Ige(){return Re}function Mge(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(o=>t.get(o)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(o=>t.get(o)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&re("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function Rge(e){var t=this,n=xe(n=e.source)?n.$ref:n,r=t.get(n),i=null,o=e.update,a=void 0;r||re("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),o&&o.$expr&&(o.$params&&(a=t.parseParameters(o.$params)),o=t.handlerExpression(o.$expr)),t.update(e,r,i,o,a)}const kge={skip:!0};function Nge(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(o=>{const a=t.signals[o];e.signals(o,a)&&(r[o]=a.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(o=>{const a=t.data[o];e.data(o,a)&&(i[o]=a.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(o=>o.getState(e))),n}function Fge(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(o=>{n.update(t.signals[o],i[o],kge)}),Object.keys(r||{}).forEach(o=>{n.pulse(t.data[o].input,n.changeset().remove(ji).insert(r[o]))}),(e.subcontext||[]).forEach((o,a)=>{const s=t.subcontext[a];s&&s.setState(o)})}function vV(e,t,n,r){return new bV(e,t,n,r)}function bV(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||vge,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function H$(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}bV.prototype=H$.prototype={fork(){const e=new H$(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),mge(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let o=n.get(e.parent.$ref);o?(r.connect(o,[t]),t.targets().add(o)):(n.unresolved=n.unresolved||[]).push(()=>{o=n.get(e.parent.$ref),r.connect(o,[t]),t.targets().add(o)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const o in e.data){const a=n.data[o]||(n.data[o]={});e.data[o].forEach(s=>a[s]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[XI(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:dge,parseOperator:bge,parseOperatorParameters:Sge,parseParameters:xge,parseStream:Mge,parseUpdate:Rge,getState:Nge,setState:Fge};function Pge(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),SV(t,e.description()))}function SV(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function $ge(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const Sw="default";function zge(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:Sw,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,o=i?Ee(i)?i:i.user:Sw,a=r.item&&r.item.cursor||null;return i&&o===i.user&&a==i.item?i:{user:o,item:a}}),e.add(null,function(n){let r=n.cursor,i=this.value;return Ee(r)||(i=r.item,r=r.user),OT(e,r&&r!==Sw?r:i||r),i},{cursor:t})}function OT(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function I1(e,t){var n=e._runtime.data;return _e(n,t)||re("Unrecognized data set: "+t),n[t]}function Lge(e,t){return arguments.length<2?I1(this,e).values.value:uS.call(this,e,wc().remove(ji).insert(t))}function uS(e,t){$z(t)||re("Second argument to changes must be a changeset.");const n=I1(this,e);return n.modified=!0,this.pulse(n.input,t)}function jge(e,t){return uS.call(this,e,wc().insert(t))}function Uge(e,t){return uS.call(this,e,wc().remove(t))}function xV(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function _V(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function lS(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Bge(e){var t=lS(e),n=xV(e),r=_V(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(o){e.error(o)}})}function Vge(e,t,n){var r=e._renderer,i=r&&r.canvas(),o,a,s;return i&&(s=lS(e),a=t.changedTouches?t.changedTouches[0]:t,o=Wb(a,i),o[0]-=s[0],o[1]-=s[1]),t.dataflow=e,t.item=n,t.vega=Hge(e,n,o),t}function Hge(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(a){var s=r,l;if(a){for(l=t;l;l=l.mark.group)if(l.mark.name===a){s=l;break}}return s&&s.mark&&s.mark.interactive?s:{}}function o(a){if(!a)return n;Ee(a)&&(a=i(a));const s=n.slice();for(;a;)s[0]-=a.x||0,s[1]-=a.y||0,a=a.mark&&a.mark.group;return s}return{view:lr(e),item:lr(t||{}),group:i,xy:o,x:a=>o(a)[0],y:a=>o(a)[1]}}const q$="view",qge="timer",Gge="window",Yge={trap:!1};function Wge(e){const t=qe({defaults:{}},e),n=(r,i)=>{i.forEach(o=>{ae(r[o])&&(r[o]=pa(r[o]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function EV(e,t,n,r){e._eventListeners.push({type:n,sources:Se(t),handler:r})}function Xge(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function O0(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||xe(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Qge(e,t,n){var r=this,i=new vb(n),o=function(u,f){r.runAsync(null,()=>{e===q$&&Xge(r,t)&&u.preventDefault(),i.receive(Vge(r,u,f))})},a;if(e===qge)O0(r,"timer",t)&&r.timer(o,t);else if(e===q$)O0(r,"view",t)&&r.addEventListener(t,o,Yge);else if(e===Gge?O0(r,"window",t)&&typeof window<"u"&&(a=[window]):typeof document<"u"&&O0(r,"selector",t)&&(a=Array.from(document.querySelectorAll(e))),!a)r.warn("Can not resolve event source: "+e);else{for(var s=0,l=a.length;s<l;++s)a[s].addEventListener(t,o);EV(r,a,t,o)}return i}function G$(e){return e.item}function Y$(e){return e.item.mark.source}function W$(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Zge(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",G$),Y$,W$(e)),this.on(this.events("view","pointerout",G$),Y$,W$(t)),this}function Kge(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,o,a,s,l;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(a=r[i],o=a.sources.length;--o>=0;)a.sources[o].removeEventListener(a.type,a.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)l=n[i].type,s=n[i].handler,this._handler.off(l,s);return this}function ci(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const Jge="vega-bind",eme="vega-bind-name",tme="vega-bind-radio";function nme(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:a=>{a!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,a)})}},r.debounce&&(i.update=MC(r.debounce,i.update))),(r.input==null&&r.element?rme:ame)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function rme(e,t,n,r){const i=n.event||"input",o=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,o),EV(r,t,i,o),e.set=a=>{t.value=a,t.dispatchEvent(ime(i))}}function ime(e){return typeof Event<"u"?new Event(e):{type:e}}function ame(e,t,n,r){const i=r.signal(n.signal),o=ci("div",{class:Jge}),a=n.input==="radio"?o:o.appendChild(ci("label"));a.appendChild(ci("span",{class:eme},n.name||n.signal)),t.appendChild(o);let s=ome;switch(n.input){case"checkbox":s=sme;break;case"select":s=ume;break;case"radio":s=lme;break;case"range":s=cme;break}s(e,a,n,i)}function ome(e,t,n,r){const i=ci("input");for(const o in n)o!=="signal"&&o!=="element"&&i.setAttribute(o==="input"?"type":o,n[o]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=o=>i.value=o}function sme(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const o=ci("input",i);t.appendChild(o),o.addEventListener("change",()=>e.update(o.checked)),e.elements=[o],e.set=a=>o.checked=!!a||null}function ume(e,t,n,r){const i=ci("select",{name:n.signal}),o=n.labels||[];n.options.forEach((a,s)=>{const l={value:a};M1(a,r)&&(l.selected=!0),i.appendChild(ci("option",l,(o[s]||a)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=a=>{for(let s=0,l=n.options.length;s<l;++s)if(M1(n.options[s],a)){i.selectedIndex=s;return}}}function lme(e,t,n,r){const i=ci("span",{class:tme}),o=n.labels||[];t.appendChild(i),e.elements=n.options.map((a,s)=>{const l={type:"radio",name:n.signal,value:a};M1(a,r)&&(l.checked=!0);const u=ci("input",l);u.addEventListener("change",()=>e.update(a));const f=ci("label",{},(o[s]||a)+"");return f.prepend(u),i.appendChild(f),u}),e.set=a=>{const s=e.elements,l=s.length;for(let u=0;u<l;++u)M1(s[u].value,a)&&(s[u].checked=!0)}}function cme(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,o=n.min||Math.min(0,i,+r)||0,a=n.step||Cu(o,i,100),s=ci("input",{type:"range",name:n.signal,min:o,max:i,step:a});s.value=r;const l=ci("span",{},+r);t.appendChild(s),t.appendChild(l);const u=()=>{l.textContent=s.value,e.update(+s.value)};s.addEventListener("input",u),s.addEventListener("change",u),e.elements=[s],e.set=f=>{s.value=f,l.textContent=f}}function M1(e,t){return e===t||e+""==t+""}function wV(e,t,n,r,i,o){return t=t||new r(e.loader()),t.initialize(n,xV(e),_V(e),lS(e),i,o).background(e.background())}function QI(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function fme(e,t,n,r){const i=new r(e.loader(),QI(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,lS(e),e);return t&&t.handlers().forEach(o=>{i.on(o.type,o.handler)}),i}function dme(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,o=Xb(r);e=n._el=e?xw(n,e,!0):null,Pge(n),o||n.error("Unrecognized renderer type: "+r);const a=o.handler||mm,s=e?o.renderer:o.headless;return n._renderer=s?wV(n,n._renderer,e,s):null,n._handler=fme(n,n._handler,e,a),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=xw(n,t,!0):e.appendChild(ci("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&i!=="container"&&(l.element=xw(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{nme(n,l.element||t,l)})),n}function xw(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const Ep=e=>+e||0,hme=e=>({top:e,bottom:e,left:e,right:e});function X$(e){return xe(e)?{top:Ep(e.top),bottom:Ep(e.bottom),left:Ep(e.left),right:Ep(e.right)}:hme(Ep(e))}async function ZI(e,t,n,r){const i=Xb(t),o=i&&i.headless;return o||re("Unrecognized renderer type: "+t),await e.runAsync(),wV(e,null,null,o,n,r).renderAsync(e._scenegraph.root)}async function pme(e,t){e!==hu.Canvas&&e!==hu.SVG&&e!==hu.PNG&&re("Unrecognized image type: "+e);const n=await ZI(this,e,t);return e===hu.SVG?gme(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function gme(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function mme(e,t){return(await ZI(this,hu.Canvas,e,t)).canvas()}async function yme(e){return(await ZI(this,hu.SVG,e)).svg()}function vme(e,t,n){return vV(e,ld,Pg,n).parse(t)}function bme(e){var t=this._runtime.scales;return _e(t,e)||re("Unrecognized scale or projection: "+e),t[e].value}var AV="width",TV="height",KI="padding",Q$={skip:!0};function CV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===KI?r.left+r.right:0)}function DV(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===KI?r.top+r.bottom:0)}function Sme(e){var t=e._signals,n=t[AV],r=t[TV],i=t[KI];function o(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,s=>{e._width=s.size,e._viewWidth=CV(e,s.size),o()},{size:n}),e._resizeHeight=e.add(null,s=>{e._height=s.size,e._viewHeight=DV(e,s.size),o()},{size:r});const a=e.add(null,o,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,a.rank=i.rank+1}function xme(e,t,n,r,i,o){this.runAfter(a=>{let s=0;a._autosize=0,a.width()!==n&&(s=1,a.signal(AV,n,Q$),a._resizeWidth.skip(!0)),a.height()!==r&&(s=1,a.signal(TV,r,Q$),a._resizeHeight.skip(!0)),a._viewWidth!==e&&(a._resize=1,a._viewWidth=e),a._viewHeight!==t&&(a._resize=1,a._viewHeight=t),(a._origin[0]!==i[0]||a._origin[1]!==i[1])&&(a._resize=1,a._origin=i),s&&a.run("enter"),o&&a.runAfter(l=>l.resize())},!1,1)}function _me(e){return this._runtime.getState(e||{data:Eme,signals:wme,recurse:!0})}function Eme(e,t){return t.modified&&ae(t.input.value)&&!e.startsWith("_:vega:_")}function wme(e,t){return!(e==="parent"||t instanceof ld.proxy)}function Ame(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Tme(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Qle(n,t))}function Cme(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Dme(r))}function Dme(e){return e==null?"":ae(e)?OV(e):xe(e)&&!Su(e)?Ome(e):e+""}function Ome(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(ae(n)?OV(n):IV(n))}).join(`
`)}function OV(e){return"["+e.map(IV).join(", ")+"]"}function IV(e){return ae(e)?"[…]":xe(e)&&!Su(e)?"{…}":e}function Ime(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function MV(e,t){const n=this;if(t=t||{},Wf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const o=qe({},e.locale,t.locale);n.locale(Cz(o.number,o.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||hu.Canvas,n._scenegraph=new Aj;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||Cme,n._redraw=!0,n._handler=new mm().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Wge(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=vme(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(o=>({state:null,param:qe({},o)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=CV(n,n._width),n._viewHeight=DV(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Sme(n),$ge(n),zge(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function I0(e,t){return _e(e._signals,t)?e._signals[t]:re("Unrecognized signal name: "+pe(t))}function RV(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Z$(e,t,n,r){let i=RV(n,r);return i||(i=QI(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function K$(e,t,n){const r=RV(t,n);return r&&t._targets.remove(r),e}ye(MV,Wf,{async evaluate(e,t,n){if(await Wf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Bge(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&q0(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&SV(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=I0(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",X$(e)):X$(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Xb(e)||re("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Wf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(I0(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:xme,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=QI(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,o;--r>=0;)if(o=n[r].type,i=n[r].handler,e===o&&(t===i||t===i.raw)){this._handler.off(o,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Z$(this,e,I0(this,e),t)},removeSignalListener(e,t){return K$(this,I0(this,e),t)},addDataListener(e,t){return Z$(this,e,I1(this,e).values,t)},removeDataListener(e,t){return K$(this,I1(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=OT(this,null);this._globalCursor=!!e,t&&OT(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Tme,events:Qge,finalize:Kge,hover:Zge,data:Lge,change:uS,insert:jge,remove:Uge,scale:bme,initialize:dme,toImageURL:pme,toCanvas:mme,toSVG:yme,getState:_me,setState:Ame,_watchPixelRatio:Ime});const Mme="view",R1="[",k1="]",kV="{",NV="}",Rme=":",FV=",",kme="@",Nme=">",Fme=/[[\]{}]/,Pme={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let PV,$V;function Gu(e,t,n){return PV=t||Mme,$V=n||Pme,zV(e.trim()).map(IT)}function $me(e){return $V[e]}function dg(e,t,n,r,i){const o=e.length;let a=0,s;for(;t<o;++t){if(s=e[t],!a&&s===n)return t;i&&i.includes(s)?--a:r&&r.includes(s)&&++a}return t}function zV(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=dg(e,i,FV,R1+kV,k1+NV),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function IT(e){return e[0]==="["?zme(e):Lme(e)}function zme(e){const t=e.length;let n=1,r;if(n=dg(e,n,k1,R1,k1),n===t)throw"Empty between selector: "+e;if(r=zV(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Nme)throw"Expected '>' after between selector: "+e;r=r.map(IT);const i=IT(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Lme(e){const t={source:PV},n=[];let r=[0,0],i=0,o=0,a=e.length,s=0,l,u;if(e[a-1]===NV){if(s=e.lastIndexOf(kV),s>=0){try{r=jme(e.substring(s+1,a-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,s).trim(),a=e.length}else throw"Unmatched right brace: "+e;s=0}if(!a)throw e;if(e[0]===kme&&(i=++s),l=dg(e,s,Rme),l<a&&(n.push(e.substring(o,l).trim()),o=s=++l),s=dg(e,s,R1),s===a)n.push(e.substring(o,a).trim());else if(n.push(e.substring(o,s).trim()),u=[],o=++s,o===a)throw"Unmatched left bracket: "+e;for(;s<a;){if(s=dg(e,s,k1),s===a)throw"Unmatched left bracket: "+e;if(u.push(e.substring(o,s).trim()),s<a-1&&e[++s]!==R1)throw"Expected left bracket: "+e;o=++s}if(!(a=n.length)||Fme.test(n[a-1]))throw"Invalid event selector: "+e;return a>1?(t.type=n[1],i?t.markname=n[0].slice(1):$me(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),u!=null&&(t.filter=u),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function jme(e){const t=e.split(FV);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Ume(e){return xe(e)?e:{type:e||"pad"}}const wp=e=>+e||0,Bme=e=>({top:e,bottom:e,left:e,right:e});function Vme(e){return xe(e)?e.signal?e:{top:wp(e.top),bottom:wp(e.bottom),left:wp(e.left),right:wp(e.right)}:Bme(wp(e))}const Cn=e=>xe(e)&&!ae(e)?qe({},e):{value:e};function J$(e,t,n,r){return n!=null?(xe(n)&&!ae(n)||ae(n)&&n.length&&xe(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Vn(e,t,n){for(const r in t)J$(e,r,t[r]);for(const r in n)J$(e,r,n[r],"update")}function Jd(e,t,n){for(const r in t)n&&_e(n,r)||(e[r]=qe(e[r]||{},t[r]));return e}function Lf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const JI="mark",eM="frame",tM="scope",Hme="axis",qme="axis-domain",Gme="axis-grid",Yme="axis-label",Wme="axis-tick",Xme="axis-title",Qme="legend",Zme="legend-band",Kme="legend-entry",Jme="legend-gradient",LV="legend-label",eye="legend-symbol",tye="legend-title",nye="title",rye="title-text",iye="title-subtitle";function aye(e,t,n,r,i){const o={},a={};let s,l,u,f;l="lineBreak",t==="text"&&i[l]!=null&&!Lf(l,e)&&_w(o,l,i[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),f=n===eM?i.group:n===JI?qe({},i.mark,i[t]):null;for(l in f)u=Lf(l,e)||(l==="fill"||l==="stroke")&&(Lf("fill",e)||Lf("stroke",e)),u||_w(o,l,f[l]);Se(r).forEach(d=>{const p=i.style&&i.style[d];for(const g in p)Lf(g,e)||_w(o,g,p[g])}),e=qe({},e);for(l in o)f=o[l],f.signal?(s=s||{})[l]=f:a[l]=f;return e.enter=qe(a,e.enter),s&&(e.update=qe(s,e.update)),e}function _w(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const jV=e=>Ee(e)?pe(e):e.signal?`(${e.signal})`:UV(e);function cS(e){if(e.gradient!=null)return sye(e);let t=e.signal?`(${e.signal})`:e.color?oye(e.color):e.field!=null?UV(e.field):e.value!==void 0?pe(e.value):void 0;return e.scale!=null&&(t=uye(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${lv(e.exponent)})`),e.mult!=null&&(t+=`*${lv(e.mult)}`),e.offset!=null&&(t+=`+${lv(e.offset)}`),e.round&&(t=`round(${t})`),t}const M0=(e,t,n,r)=>`(${e}(${[t,n,r].map(cS).join(",")})+'')`;function oye(e){return e.c?M0("hcl",e.h,e.c,e.l):e.h||e.s?M0("hsl",e.h,e.s,e.l):e.l||e.a?M0("lab",e.l,e.a,e.b):e.r||e.g||e.b?M0("rgb",e.r,e.g,e.b):null}function sye(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:pe(n));for(;t.length&&at(t)==null;)t.pop();return t.unshift(jV(e.gradient)),`gradient(${t.join(",")})`}function lv(e){return xe(e)?"("+cS(e)+")":e}function UV(e){return BV(xe(e)?e:{datum:e})}function BV(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):re("Invalid field reference: "+pe(e));return e.signal||(r=Ee(r)?fo(r).map(pe).join("]["):BV(r)),t+"["+r+"]"}function uye(e,t){const n=jV(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+lv(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function lye(e){let t="";return e.forEach(n=>{const r=cS(n);t+=n.test?`(${n.test})?${r}:`:r}),at(t)===":"&&(t+="null"),t}function VV(e,t,n,r,i,o){const a={};o=o||{},o.encoders={$encode:a},e=aye(e,t,n,r,i.config);for(const s in e)a[s]=cye(e[s],t,o,i);return o}function cye(e,t,n,r){const i={},o={};for(const a in e)e[a]!=null&&(i[a]=dye(fye(e[a]),r,n,o));return{$expr:{marktype:t,channels:i},$fields:Object.keys(o),$output:Object.keys(e)}}function fye(e){return ae(e)?lye(e):cS(e)}function dye(e,t,n,r){const i=so(e,t);return i.$fields.forEach(o=>r[o]=1),qe(n,i.$params),i.$expr}const hye="outer",pye=["value","update","init","react","bind"];function e4(e,t){re(e+' for "outer" push: '+pe(t))}function HV(e,t){const n=e.name;if(e.push===hye)t.signals[n]||e4("No prior signal definition",n),pye.forEach(r=>{e[r]!==void 0&&e4("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function MT(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function fS(e,t,n,r){return new MT(e,t,n,r)}function N1(e,t){return fS("operator",e,t)}function Me(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function $g(e,t){return t?{$field:e,$name:t}:{$field:e}}const RT=$g("key");function t4(e,t){return{$compare:e,$order:t}}function gye(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const mye="ascending",yye="descending";function vye(e){return xe(e)?(e.order===yye?"-":"+")+dS(e.op,e.field):""}function dS(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const nM="scope",kT="view";function mn(e){return e&&e.signal}function bye(e){return e&&e.expr}function cv(e){if(mn(e))return!0;if(xe(e)){for(const t in e)if(cv(e[t]))return!0}return!1}function ra(e,t){return e??t}function Yl(e){return e&&e.signal||e}const n4="timer";function zg(e,t){return(e.merge?xye:e.stream?_ye:e.type?Eye:re("Invalid stream specification: "+pe(e)))(e,t)}function Sye(e){return e===nM?kT:e||kT}function xye(e,t){const n=e.merge.map(i=>zg(i,t)),r=rM({merge:n},e,t);return t.addStream(r).id}function _ye(e,t){const n=zg(e.stream,t),r=rM({stream:n},e,t);return t.addStream(r).id}function Eye(e,t){let n;e.type===n4?(n=t.event(n4,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(Sye(e.source),e.type);const r=rM({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function rM(e,t,n){let r=t.between;return r&&(r.length!==2&&re('Stream "between" parameter must have 2 entries: '+pe(t)),e.between=[zg(r[0],n),zg(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(wye(t.marktype,t.markname,t.markrole)),t.source===nM&&r.push("inScope(event.item)"),r.length&&(e.filter=so("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function wye(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const Aye={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Tye(e,t,n){const r=e.encode,i={target:n};let o=e.events,a=e.update,s=[];o||re("Signal update missing events specification."),Ee(o)&&(o=Gu(o,t.isSubscope()?nM:kT)),o=Se(o).filter(l=>l.signal||l.scale?(s.push(l),0):1),s.length>1&&(s=[Dye(s)]),o.length&&s.push(o.length>1?{merge:o}:o[0]),r!=null&&(a&&re("Signal encode and update are mutually exclusive."),a="encode(item(),"+pe(r)+")"),i.update=Ee(a)?so(a,t):a.expr!=null?so(a.expr,t):a.value!=null?a.value:a.signal!=null?{$expr:Aye,$params:{$value:t.signalRef(a.signal)}}:re("Invalid signal update specification."),e.force&&(i.options={force:!0}),s.forEach(l=>t.addUpdate(qe(Cye(l,t),i)))}function Cye(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):zg(e,t)}}function Dye(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Oye(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?re("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=so(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>Tye(i,t,n.id))}const Dt=e=>(t,n,r)=>fS(e,n,t||void 0,r),qV=Dt("aggregate"),Iye=Dt("axisticks"),GV=Dt("bound"),wa=Dt("collect"),r4=Dt("compare"),Mye=Dt("datajoin"),YV=Dt("encode"),Rye=Dt("expression"),kye=Dt("facet"),Nye=Dt("field"),Fye=Dt("key"),Pye=Dt("legendentries"),$ye=Dt("load"),zye=Dt("mark"),Lye=Dt("multiextent"),jye=Dt("multivalues"),Uye=Dt("overlap"),Bye=Dt("params"),WV=Dt("prefacet"),Vye=Dt("projection"),Hye=Dt("proxy"),qye=Dt("relay"),XV=Dt("render"),Gye=Dt("scale"),Dc=Dt("sieve"),Yye=Dt("sortitems"),QV=Dt("viewlayout"),Wye=Dt("values");let Xye=0;const ZV={min:"min",max:"max",count:"sum"};function Qye(e,t){const n=e.type||"linear";zL(n)||re("Unrecognized scale type: "+pe(n)),t.addScale(e.name,{type:n,domain:void 0})}function Zye(e,t){const n=t.getScale(e.name).params;let r;n.domain=KV(e.domain,e,t),e.range!=null&&(n.range=eH(e,t,n)),e.interpolate!=null&&s0e(e.interpolate,n),e.nice!=null&&(n.nice=o0e(e.nice,t)),e.bins!=null&&(n.bins=a0e(e.bins,t));for(r in e)_e(n,r)||r==="name"||(n[r]=Fi(e[r],t))}function Fi(e,t){return xe(e)?e.signal?t.signalRef(e.signal):re("Unsupported object: "+pe(e)):e}function fv(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Fi(n,t))}function hS(e){re("Can not find data set: "+pe(e))}function KV(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&re("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(ae(e)?Kye:e.fields?e0e:Jye)(e,t,n)}function Kye(e,t,n){return e.map(r=>Fi(r,n))}function Jye(e,t,n){const r=n.getData(e.data);return r||hS(e.data),pd(t.type)?r.valuesRef(n,e.field,JV(e.sort,!1)):UL(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function e0e(e,t,n){const r=e.data,i=e.fields.reduce((o,a)=>(a=Ee(a)?{data:r,field:a}:ae(a)||a.signal?t0e(a,n):a,o.push(a),o),[]);return(pd(t.type)?n0e:UL(t.type)?r0e:i0e)(e,n,i)}function t0e(e,t){const n="_:vega:_"+Xye++,r=wa({});if(ae(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+pe(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,Dc({})]),{data:n,field:"data"}}function n0e(e,t,n){const r=JV(e.sort,!0);let i,o;const a=n.map(u=>{const f=t.getData(u.data);return f||hS(u.data),f.countsRef(t,u.field,r)}),s={groupby:RT,pulse:a};r&&(i=r.op||"count",o=r.field?dS(i,r.field):"count",s.ops=[ZV[i]],s.fields=[t.fieldRef(o)],s.as=[o]),i=t.add(qV(s));const l=t.add(wa({pulse:Me(i)}));return o=t.add(Wye({field:RT,sort:t.sortRef(r),pulse:Me(l)})),Me(o)}function JV(e,t){return e&&(!e.field&&!e.op?xe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?re("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!ZV[e.op]&&re("Multiple domain scales can not be sorted using "+e.op)),e}function r0e(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||hS(i.data),o.domainRef(t,i.field)});return Me(t.add(jye({values:r})))}function i0e(e,t,n){const r=n.map(i=>{const o=t.getData(i.data);return o||hS(i.data),o.extentRef(t,i.field)});return Me(t.add(Lye({extents:r})))}function a0e(e,t){return e.signal||ae(e)?fv(e,t):t.objectProperty(e)}function o0e(e,t){return e.signal?t.signalRef(e.signal):xe(e)?{interval:Fi(e.interval),step:Fi(e.step)}:Fi(e)}function s0e(e,t){t.interpolate=Fi(e.type||e),e.gamma!=null&&(t.interpolateGamma=Fi(e.gamma))}function eH(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(Ee(i)){if(r&&_e(r,i))return e=qe({},e,{range:r[i]}),eH(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=pd(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:re("Unrecognized scale range value: "+pe(i))}else if(i.scheme){n.scheme=ae(i.scheme)?fv(i.scheme,t):Fi(i.scheme,t),i.extent&&(n.schemeExtent=fv(i.extent,t)),i.count&&(n.schemeCount=Fi(i.count,t));return}else if(i.step){n.rangeStep=Fi(i.step,t);return}else{if(pd(e.type)&&!ae(i))return KV(i,e,t);ae(i)||re("Unsupported range type: "+pe(i))}return i.map(o=>(ae(o)?fv:Fi)(o,t))}function u0e(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=NT(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=NT(n[i],i,t));t.addProjection(e.name,r)}function NT(e,t,n){return ae(e)?e.map(r=>NT(r,t,n)):xe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:re("Unsupported parameter object: "+pe(e)):e}const Aa="top",eh="left",th="right",Fu="bottom",tH="center",l0e="vertical",c0e="start",f0e="middle",d0e="end",FT="index",iM="label",h0e="offset",Ed="perc",p0e="perc2",$i="value",Am="guide-label",aM="guide-title",g0e="group-title",m0e="group-subtitle",i4="symbol",dv="gradient",PT="discrete",$T="size",y0e="shape",v0e="fill",b0e="stroke",S0e="strokeWidth",x0e="strokeDash",_0e="opacity",oM=[$T,y0e,v0e,b0e,S0e,x0e,_0e],Tm={name:1,style:1,interactive:1},st={value:0},zi={value:1},pS="group",nH="rect",sM="rule",E0e="symbol",Oc="text";function Lg(e){return e.type=pS,e.interactive=e.interactive||!1,e}function Yr(e,t){const n=(r,i)=>ra(e[r],ra(t[r],i));return n.isVertical=r=>l0e===ra(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>ra(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>ra(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>ra(e.columns,ra(t.columns,+n.isVertical(!0))),n}function rH(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function w0e(e,t,n){const r=t.config.style[n];return r&&r[e]}function gS(e,t,n){return`item.anchor === '${c0e}' ? ${e} : item.anchor === '${d0e}' ? ${t} : ${n}`}const uM=gS(pe(eh),pe(th),pe(tH));function A0e(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},xe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function iH(e,t){return t?e?xe(e)?Object.assign({},e,{offset:iH(e.offset,t)}):{value:e,offset:t}:t:e}function mi(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Jd(e.encode,t,Tm)):e.interactive=!1,e}function T0e(e,t,n,r){const i=Yr(e,n),o=i.isVertical(),a=i.gradientThickness(),s=i.gradientLength();let l,u,f,d,p;o?(u=[0,1],f=[0,0],d=a,p=s):(u=[0,0],f=[1,0],d=s,p=a);const g={enter:l={opacity:st,x:st,y:st,width:Cn(d),height:Cn(p)},update:qe({},l,{opacity:zi,fill:{gradient:t,start:u,stop:f}}),exit:{opacity:st}};return Vn(g,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),mi({type:nH,role:Jme,encode:g},r)}function C0e(e,t,n,r,i){const o=Yr(e,n),a=o.isVertical(),s=o.gradientThickness(),l=o.gradientLength();let u,f,d,p,g="";a?(u="y",d="y2",f="x",p="width",g="1-"):(u="x",d="x2",f="y",p="height");const y={opacity:st,fill:{scale:t,field:$i}};y[u]={signal:g+"datum."+Ed,mult:l},y[f]=st,y[d]={signal:g+"datum."+p0e,mult:l},y[p]=Cn(s);const v={enter:y,update:qe({},y,{opacity:zi}),exit:{opacity:st}};return Vn(v,{stroke:o("gradientStrokeColor"),strokeWidth:o("gradientStrokeWidth")},{opacity:o("gradientOpacity")}),mi({type:nH,role:Zme,key:$i,from:i,encode:v},r)}const D0e=`datum.${Ed}<=0?"${eh}":datum.${Ed}>=1?"${th}":"${tH}"`,O0e=`datum.${Ed}<=0?"${Fu}":datum.${Ed}>=1?"${Aa}":"${f0e}"`;function a4(e,t,n,r){const i=Yr(e,t),o=i.isVertical(),a=Cn(i.gradientThickness()),s=i.gradientLength();let l=i("labelOverlap"),u,f,d,p,g="";const y={enter:u={opacity:st},update:f={opacity:zi,text:{field:iM}},exit:{opacity:st}};return Vn(y,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:ra(e.labelLimit,t.gradientLabelLimit)}),o?(u.align={value:"left"},u.baseline=f.baseline={signal:O0e},d="y",p="x",g="1-"):(u.align=f.align={signal:D0e},u.baseline={value:"top"},d="x",p="y"),u[d]=f[d]={signal:g+"datum."+Ed,mult:s},u[p]=f[p]=a,a.offset=ra(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:i("labelSeparation"),method:l,order:"datum."+FT}:void 0,mi({type:Oc,role:LV,style:Am,key:$i,from:r,encode:y,overlap:l},n)}function I0e(e,t,n,r,i){const o=Yr(e,t),a=n.entries,s=!!(a&&a.interactive),l=a?a.name:void 0,u=o("clipHeight"),f=o("symbolOffset"),d={data:"value"},p=`(${i}) ? datum.${h0e} : datum.${$T}`,g=u?Cn(u):{field:$T},y=`datum.${FT}`,v=`max(1, ${i})`;let b,x,_,T,A;g.mult=.5,b={enter:x={opacity:st,x:{signal:p,mult:.5,offset:f},y:g},update:_={opacity:zi,x:x.x,y:x.y},exit:{opacity:st}};let w=null,C=null;e.fill||(w=t.symbolBaseFillColor,C=t.symbolBaseStrokeColor),Vn(b,{fill:o("symbolFillColor",w),shape:o("symbolType"),size:o("symbolSize"),stroke:o("symbolStrokeColor",C),strokeDash:o("symbolDash"),strokeDashOffset:o("symbolDashOffset"),strokeWidth:o("symbolStrokeWidth")},{opacity:o("symbolOpacity")}),oM.forEach(k=>{e[k]&&(_[k]=x[k]={scale:e[k],field:$i})});const D=mi({type:E0e,role:eye,key:$i,from:d,clip:u?!0:void 0,encode:b},n.symbols),I=Cn(f);I.offset=o("labelOffset"),b={enter:x={opacity:st,x:{signal:p,offset:I},y:g},update:_={opacity:zi,text:{field:iM},x:x.x,y:x.y},exit:{opacity:st}},Vn(b,{align:o("labelAlign"),baseline:o("labelBaseline"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontStyle:o("labelFontStyle"),fontWeight:o("labelFontWeight"),limit:o("labelLimit")});const M=mi({type:Oc,role:LV,style:Am,key:$i,from:d,encode:b},n.labels);return b={enter:{noBound:{value:!u},width:st,height:u?Cn(u):st,opacity:st},exit:{opacity:st},update:_={opacity:zi,row:{signal:null},column:{signal:null}}},o.isVertical(!0)?(T=`ceil(item.mark.items.length / ${v})`,_.row.signal=`${y}%${T}`,_.column.signal=`floor(${y} / ${T})`,A={field:["row",y]}):(_.row.signal=`floor(${y} / ${v})`,_.column.signal=`${y} % ${v}`,A={field:y}),_.column.signal=`(${i})?${_.column.signal}:${y}`,r={facet:{data:r,name:"value",groupby:FT}},Lg({role:tM,from:r,encode:Jd(b,a,Tm),marks:[D,M],name:l,interactive:s,sort:A})}function M0e(e,t){const n=Yr(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const lM='item.orient === "left"',cM='item.orient === "right"',mS=`(${lM} || ${cM})`,R0e=`datum.vgrad && ${mS}`,k0e=gS('"top"','"bottom"','"middle"'),N0e=gS('"right"','"left"','"center"'),F0e=`datum.vgrad && ${cM} ? (${N0e}) : (${mS} && !(datum.vgrad && ${lM})) ? "left" : ${uM}`,P0e=`item._anchor || (${mS} ? "middle" : "start")`,$0e=`${R0e} ? (${lM} ? -90 : 90) : 0`,z0e=`${mS} ? (datum.vgrad ? (${cM} ? "bottom" : "top") : ${k0e}) : "top"`;function L0e(e,t,n,r){const i=Yr(e,t),o={enter:{opacity:st},update:{opacity:zi,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:st}};return Vn(o,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:P0e},angle:{signal:$0e},align:{signal:F0e},baseline:{signal:z0e},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),mi({type:Oc,role:tye,style:aM,from:r,encode:o},n)}function j0e(e,t){let n;return xe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+o4(e.path)+")":e.sphere&&(n="geoShape("+o4(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function o4(e){return xe(e)&&e.signal?e.signal:pe(e)}function aH(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===pS?tM:t||JI}function U0e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||aH(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function B0e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function fM(e,t){const n=jz(e.type);n||re("Unrecognized transform type: "+pe(e.type));const r=fS(n.type.toLowerCase(),null,oH(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function oH(e,t,n){const r={},i=e.params.length;for(let o=0;o<i;++o){const a=e.params[o];r[a.name]=V0e(a,t,n)}return r}function V0e(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return H0e(e,t,n);if(i===void 0){e.required&&re("Missing required "+pe(t.type)+" parameter: "+pe(e.name));return}else{if(r==="param")return q0e(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!mn(i)?i.map(o=>s4(e,o,n)):s4(e,i,n)}function s4(e,t,n){const r=e.type;if(mn(t))return l4(r)?re("Expression references can not be signals."):Ew(r)?n.fieldRef(t):c4(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||Ew(r);return i&&G0e(t)?n.exprRef(t.expr,t.as):i&&Y0e(t)?$g(t.field,t.as):l4(r)?so(t,n):W0e(r)?Me(n.getData(t).values):Ew(r)?$g(t):c4(r)?n.compareRef(t):t}}function H0e(e,t,n){return Ee(t.from)||re('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function q0e(e,t,n){const r=t[e.name];return e.array?(ae(r)||re("Expected an array of sub-parameters. Instead: "+pe(r)),r.map(i=>u4(e,i,n))):u4(e,r,n)}function u4(e,t,n){const r=e.params.length;let i;for(let a=0;a<r;++a){i=e.params[a];for(const s in i.key)if(i.key[s]!==t[s]){i=null;break}if(i)break}i||re("Unsupported parameter: "+pe(t));const o=qe(oH(i,t,n),i.key);return Me(n.add(Bye(o)))}const G0e=e=>e&&e.expr,Y0e=e=>e&&e.field,W0e=e=>e==="data",l4=e=>e==="expr",Ew=e=>e==="field",c4=e=>e==="compare";function X0e(e,t,n){let r,i,o,a,s;return e?(r=e.facet)&&(t||re("Only group marks can be faceted."),r.field!=null?a=s=hv(r,n):(e.data?s=Me(n.getData(e.data).aggregate):(o=fM(qe({type:"aggregate",groupby:Se(r.groupby)},r.aggregate),n),o.params.key=n.keyRef(r.groupby),o.params.pulse=hv(r,n),a=s=Me(n.add(o))),i=n.keyRef(r.groupby,!0))):a=Me(n.add(wa(null,[{}]))),a||(a=hv(e,n)),{key:i,pulse:a,parent:s}}function hv(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Me(t.getData(e.data).output)}function lc(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}lc.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let o=t[0],a=null,s=1;for(o&&o.type==="load"&&(o=t[1]),e.add(t[0]);s<n;++s)t[s].params.pulse=Me(t[s-1]),e.add(t[s]),t[s].type==="aggregate"&&(a=t[s]);return new lc(e,o,i,r,a)};function sH(e){return Ee(e)?e:null}function f4(e,t,n){const r=dS(n.op,n.field);let i;if(t.ops){for(let o=0,a=t.as.length;o<a;++o)if(t.as[o]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function Ap(e,t,n,r,i,o,a){const s=t[n]||(t[n]={}),l=vye(o);let u=sH(i),f,d;if(u!=null&&(e=t.scope,u=u+(l?"|"+l:""),f=s[u]),!f){const p=o?{field:RT,pulse:t.countsRef(e,i,o)}:{field:e.fieldRef(i),pulse:Me(t.output)};l&&(p.sort=e.sortRef(o)),d=e.add(fS(r,void 0,p)),a&&(t.index[i]=d),f=Me(d),u!=null&&(s[u]=f)}return f}lc.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),o=sH(t);let a,s,l;return o!=null&&(e=r.scope,a=i[o]),a?n&&n.field&&f4(e,a.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Me(r.output)},n&&n.field&&f4(e,l,n),s=e.add(qV(l)),a=e.add(wa({pulse:Me(s)})),a={agg:s,ref:Me(a)},o!=null&&(i[o]=a)),a.ref},tuplesRef(){return Me(this.values)},extentRef(e,t){return Ap(e,this,"extent","extent",t,!1)},domainRef(e,t){return Ap(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return Ap(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return Ap(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return Ap(e,this,"indata","tupleindex",t,!0,!0)}};function Q0e(e,t,n){const r=e.from.facet,i=r.name,o=hv(r,t);let a;r.name||re("Facet must have a name: "+pe(r)),r.data||re("Facet must reference a data set: "+pe(r)),r.field?a=t.add(WV({field:t.fieldRef(r.field),pulse:o})):r.groupby?a=t.add(kye({key:t.keyRef(r.groupby),group:Me(t.proxy(n.parent)),pulse:o})):re("Facet must specify groupby or field: "+pe(r));const s=t.fork(),l=s.add(wa()),u=s.add(Dc({pulse:Me(l)}));s.addData(i,new lc(s,l,l,u)),s.addSignal("parent",null),a.params.subflow={$subflow:s.parse(e).toRuntime()}}function Z0e(e,t,n){const r=t.add(WV({pulse:n.pulse})),i=t.fork();i.add(Dc()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function uH(e,t,n){const r=e.remove,i=e.insert,o=e.toggle,a=e.modify,s=e.values,l=t.add(N1()),u="if("+e.trigger+',modify("'+n+'",'+[i,r,o,a,s].map(d=>d??"null").join(",")+"),0)",f=so(u,t);l.update=f.$expr,l.params=f.$params}function yS(e,t){const n=aH(e),r=e.type===pS,i=e.from&&e.from.facet,o=e.overlap;let a=e.layout||n===tM||n===eM,s,l,u,f,d,p,g;const y=n===JI||a||i,v=X0e(e.from,r,t);l=t.add(Mye({key:v.key||(e.key?$g(e.key):void 0),pulse:v.pulse,clean:!r}));const b=Me(l);l=u=t.add(wa({pulse:b})),l=t.add(zye({markdef:U0e(e),interactive:B0e(e.interactive,t),clip:j0e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Me(l)}));const x=Me(l);l=f=t.add(YV(VV(e.encode,e.type,n,e.style,t,{mod:!1,pulse:x}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(C=>{const D=fM(C,t),I=D.metadata;(I.generates||I.changes)&&re("Mark transforms should not generate new data."),I.nomod||(f.params.mod=!0),D.params.pulse=Me(l),t.add(l=D)}),e.sort&&(l=t.add(Yye({sort:t.compareRef(e.sort),pulse:Me(l)})));const _=Me(l);(i||a)&&(a=t.add(QV({layout:t.objectProperty(e.layout),legends:t.legends,mark:x,pulse:_})),p=Me(a));const T=t.add(GV({mark:x,pulse:p||_}));g=Me(T),r&&(y&&(s=t.operators,s.pop(),a&&s.pop()),t.pushState(_,p||g,b),i?Q0e(e,t,v):y?Z0e(e,t,v):t.parse(e),t.popState(),y&&(a&&s.push(a),s.push(T))),o&&(g=K0e(o,g,t));const A=t.add(XV({pulse:g})),w=t.add(Dc({pulse:Me(A)},void 0,t.parent()));e.name!=null&&(d=e.name,t.addData(d,new lc(t,u,A,w)),e.on&&e.on.forEach(C=>{(C.insert||C.remove||C.toggle)&&re("Marks only support modify triggers."),uH(C,t,d)}))}function K0e(e,t,n){const r=e.method,i=e.bound,o=e.separation,a={separation:mn(o)?n.signalRef(o.signal):o,method:mn(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(a.sort=n.compareRef({field:e.order})),i){const s=i.tolerance;a.boundTolerance=mn(s)?n.signalRef(s.signal):+s,a.boundScale=n.scaleRef(i.scale),a.boundOrient=i.orient}return Me(n.add(Uye(a)))}function J0e(e,t){const n=t.config.legend,r=e.encode||{},i=Yr(e,n),o=r.legend||{},a=o.name||void 0,s=o.interactive,l=o.style,u={};let f=0,d,p,g;oM.forEach(T=>e[T]?(u[T]=e[T],f=f||e[T]):0),f||re("Missing valid scale for legend.");const y=eve(e,t.scaleType(f)),v={title:e.title!=null,scales:u,type:y,vgrad:y!=="symbol"&&i.isVertical()},b=Me(t.add(wa(null,[v]))),x={enter:{x:{value:0},y:{value:0}}},_=Me(t.add(Pye(p={type:y,scale:t.scaleRef(f),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return y===dv?(g=[T0e(e,f,n,r.gradient),a4(e,n,r.labels,_)],p.count=p.count||t.signalRef(`max(2,2*floor((${Yl(i.gradientLength())})/100))`)):y===PT?g=[C0e(e,f,n,r.gradient,_),a4(e,n,r.labels,_)]:(d=M0e(e,n),g=[I0e(e,n,r,_,Yl(d.columns))],p.size=rve(e,t,g[0].marks)),g=[Lg({role:Kme,from:b,encode:x,marks:g,layout:d,interactive:s})],v.title&&g.push(L0e(e,n,r.title,b)),yS(Lg({role:Qme,from:b,encode:Jd(nve(i,e,n),o,Tm),marks:g,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:a,interactive:s,style:l}),t)}function eve(e,t){let n=e.type||i4;return!e.type&&tve(e)===1&&(e.fill||e.stroke)&&(n=fO(t)?dv:DA(t)?PT:i4),n!==dv?n:DA(t)?PT:dv}function tve(e){return oM.reduce((t,n)=>t+(e[n]?1:0),0)}function nve(e,t,n){const r={enter:{},update:{}};return Vn(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function rve(e,t,n){const r=Yl(d4("size",e,n)),i=Yl(d4("strokeWidth",e,n)),o=Yl(ive(n[1].encode,t,Am));return so(`max(ceil(sqrt(${r})+${i}),${o})`,t)}function d4(e,t,n){return t[e]?`scale("${t[e]}",datum)`:rH(e,n[0].encode)}function ive(e,t,n){return rH("fontSize",e)||w0e("fontSize",t,n)}const ave=`item.orient==="${eh}"?-90:item.orient==="${th}"?90:0`;function ove(e,t){e=Ee(e)?{text:e}:e;const n=Yr(e,t.config.title),r=e.encode||{},i=r.group||{},o=i.name||void 0,a=i.interactive,s=i.style,l=[],u={},f=Me(t.add(wa(null,[u])));return l.push(lve(e,n,sve(e),f)),e.subtitle&&l.push(cve(e,n,r.subtitle,f)),yS(Lg({role:nye,from:f,encode:uve(n,i),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:o,interactive:a,style:s}),t)}function sve(e){const t=e.encode;return t&&t.title||qe({name:e.name,interactive:e.interactive,style:e.style},t)}function uve(e,t){const n={enter:{},update:{}};return Vn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:uM},angle:{signal:ave},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Jd(n,t,Tm)}function lve(e,t,n,r){const i={value:0},o=e.text,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vn(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),mi({type:Oc,role:rye,style:g0e,from:r,encode:a},n)}function cve(e,t,n,r){const i={value:0},o=e.subtitle,a={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Vn(a,{text:o,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),mi({type:Oc,role:iye,style:m0e,from:r,encode:a},n)}function fve(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(fM(r,t))}),e.on&&e.on.forEach(r=>{uH(r,t,e.name)}),t.addDataPipeline(e.name,dve(e,t,n))}function dve(e,t,n){const r=[];let i=null,o=!1,a=!1,s,l,u,f,d;for(e.values?mn(e.values)||cv(e.format)?(r.push(h4(t,e)),r.push(i=_l())):r.push(i=_l({$ingest:e.values,$format:e.format})):e.url?cv(e.url)||cv(e.format)?(r.push(h4(t,e)),r.push(i=_l())):r.push(i=_l({$request:e.url,$format:e.format})):e.source&&(i=s=Se(e.source).map(p=>Me(t.getData(p).output)),r.push(null)),l=0,u=n.length;l<u;++l)f=n[l],d=f.metadata,!i&&!d.source&&r.push(i=_l()),r.push(f),d.generates&&(a=!0),d.modifies&&!a&&(o=!0),d.source?i=f:d.changes&&(i=null);return s&&(u=s.length-1,r[0]=qye({derive:o,pulse:u?s:s[0]}),(o||u)&&r.splice(1,0,_l())),i||r.push(_l()),r.push(Dc({})),r}function _l(e){const t=wa({},e);return t.metadata={source:!0},t}function h4(e,t){return $ye({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const lH=e=>e===Fu||e===Aa,vS=(e,t,n)=>mn(e)?mve(e.signal,t,n):e===eh||e===Aa?t:n,Dn=(e,t,n)=>mn(e)?pve(e.signal,t,n):lH(e)?t:n,da=(e,t,n)=>mn(e)?gve(e.signal,t,n):lH(e)?n:t,cH=(e,t,n)=>mn(e)?yve(e.signal,t,n):e===Aa?{value:t}:{value:n},hve=(e,t,n)=>mn(e)?vve(e.signal,t,n):e===th?{value:t}:{value:n},pve=(e,t,n)=>fH(`${e} === '${Aa}' || ${e} === '${Fu}'`,t,n),gve=(e,t,n)=>fH(`${e} !== '${Aa}' && ${e} !== '${Fu}'`,t,n),mve=(e,t,n)=>dM(`${e} === '${eh}' || ${e} === '${Aa}'`,t,n),yve=(e,t,n)=>dM(`${e} === '${Aa}'`,t,n),vve=(e,t,n)=>dM(`${e} === '${th}'`,t,n),fH=(e,t,n)=>(t=t!=null?Cn(t):t,n=n!=null?Cn(n):n,p4(t)&&p4(n)?(t=t?t.signal||pe(t.value):null,n=n?n.signal||pe(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[qe({test:e},t)].concat(n||[])),p4=e=>e==null||Object.keys(e).length===1,dM=(e,t,n)=>({signal:`${e} ? (${Yf(t)}) : (${Yf(n)})`}),bve=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${eh}' ? (${Yf(r)}) : `:"")+(n!=null?`${e} === '${Fu}' ? (${Yf(n)}) : `:"")+(i!=null?`${e} === '${th}' ? (${Yf(i)}) : `:"")+(t!=null?`${e} === '${Aa}' ? (${Yf(t)}) : `:"")+"(null)"}),Yf=e=>mn(e)?e.signal:e==null?null:pe(e),Sve=(e,t)=>t===0?0:mn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Kf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function Nf(e,t,n,r){let i;if(t&&_e(t,e))return t[e];if(_e(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[aM][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[Am][i]}return null}function g4(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function xve(e,t){var n=t.config,r=n.style,i=n.axis,o=t.scaleType(e.scale)==="band"&&n.axisBand,a=e.orient,s,l,u;if(mn(a)){const d=g4([n.axisX,n.axisY]),p=g4([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);s={};for(u of d)s[u]=Dn(a,Nf(u,n.axisX,i,r),Nf(u,n.axisY,i,r));l={};for(u of p)l[u]=bve(a.signal,Nf(u,n.axisTop,i,r),Nf(u,n.axisBottom,i,r),Nf(u,n.axisLeft,i,r),Nf(u,n.axisRight,i,r))}else s=a===Aa||a===Fu?n.axisX:n.axisY,l=n["axis"+a[0].toUpperCase()+a.slice(1)];return s||l||o?qe({},i,s,l,o):i}function _ve(e,t,n,r){const i=Yr(e,t),o=e.orient;let a,s;const l={enter:a={opacity:st},update:s={opacity:zi},exit:{opacity:st}};Vn(l,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const u=m4(e,0),f=m4(e,1);return a.x=s.x=Dn(o,u,st),a.x2=s.x2=Dn(o,f),a.y=s.y=da(o,u,st),a.y2=s.y2=da(o,f),mi({type:sM,role:qme,from:r,encode:l},n)}function m4(e,t){return{scale:e.scale,range:t}}function Eve(e,t,n,r,i){const o=Yr(e,t),a=e.orient,s=e.gridScale,l=vS(a,1,-1),u=wve(e.offset,l);let f,d,p;const g={enter:f={opacity:st},update:p={opacity:zi},exit:d={opacity:st}};Vn(g,{stroke:o("gridColor"),strokeCap:o("gridCap"),strokeDash:o("gridDash"),strokeDashOffset:o("gridDashOffset"),strokeOpacity:o("gridOpacity"),strokeWidth:o("gridWidth")});const y={scale:e.scale,field:$i,band:i.band,extra:i.extra,offset:i.offset,round:o("tickRound")},v=Dn(a,{signal:"height"},{signal:"width"}),b=s?{scale:s,range:0,mult:l,offset:u}:{value:0,offset:u},x=s?{scale:s,range:1,mult:l,offset:u}:qe(v,{mult:l,offset:u});return f.x=p.x=Dn(a,y,b),f.y=p.y=da(a,y,b),f.x2=p.x2=da(a,x),f.y2=p.y2=Dn(a,x),d.x=Dn(a,y),d.y=da(a,y),mi({type:sM,role:Gme,key:$i,from:r,encode:g},n)}function wve(e,t){if(t!==1)if(!xe(e))e=mn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=qe({},e);for(;n.mult!=null;)if(xe(n.mult))n=n.mult=qe({},n.mult);else return n.mult=mn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Ave(e,t,n,r,i,o){const a=Yr(e,t),s=e.orient,l=vS(s,-1,1);let u,f,d;const p={enter:u={opacity:st},update:d={opacity:zi},exit:f={opacity:st}};Vn(p,{stroke:a("tickColor"),strokeCap:a("tickCap"),strokeDash:a("tickDash"),strokeDashOffset:a("tickDashOffset"),strokeOpacity:a("tickOpacity"),strokeWidth:a("tickWidth")});const g=Cn(i);g.mult=l;const y={scale:e.scale,field:$i,band:o.band,extra:o.extra,offset:o.offset,round:a("tickRound")};return d.y=u.y=Dn(s,st,y),d.y2=u.y2=Dn(s,g),f.x=Dn(s,y),d.x=u.x=da(s,st,y),d.x2=u.x2=da(s,g),f.y=da(s,y),mi({type:sM,role:Wme,key:$i,from:r,encode:p},n)}function ww(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Tve(e,t,n,r,i,o){const a=Yr(e,t),s=e.orient,l=e.scale,u=vS(s,-1,1),f=Yl(a("labelFlush")),d=Yl(a("labelFlushOffset")),p=a("labelAlign"),g=a("labelBaseline");let y=f===0||!!f,v;const b=Cn(i);b.mult=u,b.offset=Cn(a("labelPadding")||0),b.offset.mult=u;const x={scale:l,field:$i,band:.5,offset:iH(o.offset,a("labelOffset"))},_=Dn(s,y?ww(l,f,'"left"','"right"','"center"'):{value:"center"},hve(s,"left","right")),T=Dn(s,cH(s,"bottom","top"),y?ww(l,f,'"top"','"bottom"','"middle"'):{value:"middle"}),A=ww(l,f,`-(${d})`,d,0);y=y&&d;const w={opacity:st,x:Dn(s,x,b),y:da(s,x,b)},C={enter:w,update:v={opacity:zi,text:{field:iM},x:w.x,y:w.y,align:_,baseline:T},exit:{opacity:st,x:w.x,y:w.y}};Vn(C,{dx:!p&&y?Dn(s,A):null,dy:!g&&y?da(s,A):null}),Vn(C,{angle:a("labelAngle"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontWeight:a("labelFontWeight"),fontStyle:a("labelFontStyle"),limit:a("labelLimit"),lineHeight:a("labelLineHeight")},{align:p,baseline:g});const D=a("labelBound");let I=a("labelOverlap");return I=I||D?{separation:a("labelSeparation"),method:I,order:"datum.index",bound:D?{scale:l,orient:s,tolerance:D}:null}:void 0,v.align!==_&&(v.align=Kf(v.align,_)),v.baseline!==T&&(v.baseline=Kf(v.baseline,T)),mi({type:Oc,role:Yme,style:Am,key:$i,from:r,encode:C,overlap:I},n)}function Cve(e,t,n,r){const i=Yr(e,t),o=e.orient,a=vS(o,-1,1);let s,l;const u={enter:s={opacity:st,anchor:Cn(i("titleAnchor",null)),align:{signal:uM}},update:l=qe({},s,{opacity:zi,text:Cn(e.title)}),exit:{opacity:st}},f={signal:`lerp(range("${e.scale}"), ${gS(0,1,.5)})`};return l.x=Dn(o,f),l.y=da(o,f),s.angle=Dn(o,st,Sve(a,90)),s.baseline=Dn(o,cH(o,Fu,Aa),{value:Fu}),l.angle=s.angle,l.baseline=s.baseline,Vn(u,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Dve(i,o,u,n),u.update.align=Kf(u.update.align,s.align),u.update.angle=Kf(u.update.angle,s.angle),u.update.baseline=Kf(u.update.baseline,s.baseline),mi({type:Oc,role:Xme,style:aM,from:r,encode:u},n)}function Dve(e,t,n,r){const i=(s,l)=>s!=null?(n.update[l]=Kf(Cn(s),n.update[l]),!1):!Lf(l,r),o=i(e("titleX"),"x"),a=i(e("titleY"),"y");n.enter.auto=a===o?Cn(a):Dn(t,Cn(a),Cn(o))}function Ove(e,t){const n=xve(e,t),r=e.encode||{},i=r.axis||{},o=i.name||void 0,a=i.interactive,s=i.style,l=Yr(e,n),u=A0e(l),f={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},d=Me(t.add(wa({},[f]))),p=Me(t.add(Iye({scale:t.scaleRef(e.scale),extra:t.property(u.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),g=[];let y;return f.grid&&g.push(Eve(e,n,r.grid,p,u)),f.ticks&&(y=l("tickSize"),g.push(Ave(e,n,r.ticks,p,y,u))),f.labels&&(y=f.ticks?y:0,g.push(Tve(e,n,r.labels,p,y,u))),f.domain&&g.push(_ve(e,n,r.domain,d)),f.title&&g.push(Cve(e,n,r.title,d)),yS(Lg({role:Hme,from:d,encode:Jd(Ive(l,e),i,Tm),marks:g,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:o,interactive:a,style:s}),t)}function Ive(e,t){const n={enter:{},update:{}};return Vn(n,{orient:e("orient"),offset:e("offset")||0,position:ra(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function dH(e,t,n){const r=Se(e.signals),i=Se(e.scales);return n||r.forEach(o=>HV(o,t)),Se(e.projections).forEach(o=>u0e(o,t)),i.forEach(o=>Qye(o,t)),Se(e.data).forEach(o=>fve(o,t)),i.forEach(o=>Zye(o,t)),(n||r).forEach(o=>Oye(o,t)),Se(e.axes).forEach(o=>Ove(o,t)),Se(e.marks).forEach(o=>yS(o,t)),Se(e.legends).forEach(o=>J0e(o,t)),e.title&&ove(e.title,t),t.parseLambdas(),t}const Mve=e=>Jd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Rve(e,t){const n=t.config,r=Me(t.root=t.add(N1())),i=kve(e,n);i.forEach(u=>HV(u,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const o=t.add(wa()),a=t.add(YV(VV(Mve(e.encode),pS,eM,e.style,t,{pulse:Me(o)}))),s=t.add(QV({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Me(a)}));t.operators.pop(),t.pushState(Me(a),Me(s),null),dH(e,t,i),t.operators.push(s);let l=t.add(GV({mark:r,pulse:Me(s)}));return l=t.add(XV({pulse:Me(l)})),l=t.add(Dc({pulse:Me(l)})),t.addData("root",new lc(t,o,o,l)),t}function Tp(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function kve(e,t){const n=a=>ra(e[a],t[a]),r=[Tp("background",n("background")),Tp("autosize",Ume(n("autosize"))),Tp("padding",Vme(n("padding"))),Tp("width",n("width")||0),Tp("height",n("height")||0)],i=r.reduce((a,s)=>(a[s.name]=s,a),{}),o={};return Se(e.signals).forEach(a=>{_e(i,a.name)?a=qe(i[a.name],a):r.push(a),o[a.name]=a}),Se(t.signals).forEach(a=>{!_e(o,a.name)&&!_e(i,a.name)&&r.push(a)}),r}function hH(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function y4(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}hH.prototype=y4.prototype={parse(e){return dH(e,this)},fork(){return new y4(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof MT?Me(e):e;return this.add(Hye({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,o){let a,s;r&&(a=r.data||(r.data={}),s=a[i]||(a[i]=[]),s.push(o))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Me(this.add(Dc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Me(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return at(this._parent)},encode(){return at(this._encode)},lookup(){return at(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ee(e))return $g(e,t);e.signal||re("Unsupported field reference: "+pe(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Me(this.add(Nye(i)))}return r},compareRef(e){let t=!1;const n=o=>mn(o)?(t=!0,this.signalRef(o.signal)):bye(o)?(t=!0,this.exprRef(o.expr)):o,r=Se(e.field).map(n),i=Se(e.order).map(n);return t?Me(this.add(r4({fields:r,orders:i}))):t4(r,i)},keyRef(e,t){let n=!1;const r=o=>mn(o)?(n=!0,Me(i[o.signal])):o,i=this.signals;return e=Se(e).map(r),n?Me(this.add(Fye({fields:e,flat:t}))):gye(e,t)},sortRef(e){if(!e)return e;const t=dS(e.op,e.field),n=e.order||mye;return n.signal?Me(this.add(r4({fields:t,orders:this.signalRef(n.signal)}))):t4(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return _e(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&re("Duplicate signal name: "+pe(e));const n=t instanceof MT?t:this.add(N1(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||re("Unrecognized signal name: "+pe(e)),this.signals[e]},signalRef(e){return this.signals[e]?Me(this.signals[e]):(_e(this.lambdas,e)||(this.lambdas[e]=this.add(N1(null))),Me(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=so(r,this),o=this.lambdas[r];o.params=i.$params,o.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!xe(e)?e:this.signalRef(e.signal||hM(e))},exprRef(e,t){const n={expr:so(e,this)};return t&&(n.expr.$name=t),Me(this.add(Rye(n)))},addBinding(e,t){this.bindings||re("Nested signals do not support binding: "+pe(e)),this.bindings.push(qe({signal:e},t))},addScaleProj(e,t){_e(this.scales,e)&&re("Duplicate scale or projection name: "+pe(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Gye(t))},addProjection(e,t){this.addScaleProj(e,Vye(t))},getScale(e){return this.scales[e]||re("Unrecognized scale name: "+pe(e)),this.scales[e]},scaleRef(e){return Me(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return _e(this.data,e)&&re("Duplicate data set name: "+pe(e)),this.data[e]=t},getData(e){return this.data[e]||re("Undefined data set name: "+pe(e)),this.data[e]},addDataPipeline(e,t){return _e(this.data,e)&&re("Duplicate data set name: "+pe(e)),this.addData(e,lc.fromEntries(this,t))}};function hM(e){return(ae(e)?Nve:Fve)(e)}function Nve(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(xe(i)?i.signal||hM(i):pe(i))}return n+"]"}function Fve(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+pe(r)+":"+(xe(i)?i.signal||hM(i):pe(i));return t+"}"}function Pve(){const e="sans-serif",r="#4c78a8",i="#000",o="#888",a="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:a},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:o,grid:!1,gridWidth:1,gridColor:a,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:o,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:a,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:o,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function $ve(e,t,n){return xe(e)||re("Input Vega specification must be an object."),t=ib(Pve(),t,e.config),Rve(e,new hH(t,n)).toRuntime()}var zve="6.1.2";qe(ld,Tte,rse,Fse,Sle,pce,Ufe,Sfe,Vfe,hde,Ede,Ide);const Lve=zve,jve=Object.freeze(Object.defineProperty({__proto__:null,Bounds:ln,CanvasHandler:mm,CanvasRenderer:Wv,DATE:Ur,DAY:tr,DAYOFYEAR:ao,Dataflow:Wf,Debug:l8,Error:wC,EventStream:vb,Gradient:nj,GroupItem:Ub,HOURS:hi,Handler:PO,HybridHandler:Gj,HybridRenderer:LA,Info:u8,Item:jb,MILLISECONDS:ga,MINUTES:pi,MONTH:ar,Marks:gi,MultiPulse:QC,None:s8,Operator:Mt,Parameters:yb,Pulse:_u,QUARTER:jr,RenderType:hu,Renderer:gm,ResourceLoader:uj,SECONDS:Ui,SVGHandler:kj,SVGRenderer:BO,SVGStringRenderer:qj,Scenegraph:Aj,TIME_UNITS:jC,Transform:te,View:MV,WEEK:pn,Warn:AC,YEAR:Bn,accessor:Gr,accessorFields:ir,accessorName:Kt,array:Se,ascending:Qg,bandwidthNRD:eD,bin:Vz,bootstrapCI:Hz,boundClip:nU,boundContext:fm,boundItem:NA,boundMark:xj,boundStroke:ms,changeset:wc,clampRange:S8,codegenExpression:iV,compare:IC,constant:lr,cumulativeLogNormal:oD,cumulativeNormal:Sb,cumulativeUniform:cD,dayofyear:Q8,debounce:MC,defaultLocale:qC,definition:jz,densityLogNormal:aD,densityNormal:tD,densityUniform:lD,domChild:hn,domClear:Mi,domCreate:fu,domFind:FO,dotbin:qz,error:re,expressionFunction:an,extend:qe,extent:no,extentIndex:x8,falsy:eu,fastmap:Bd,field:Li,flush:_8,font:Gb,fontFamily:pm,fontSize:go,format:H0,formatLocale:Tv,formats:WC,hasOwnProperty:_e,id:Xg,identity:ur,inferType:Oz,inferTypes:Iz,ingest:gt,inherits:ye,inrange:Bf,interpolate:dO,interpolateColors:zb,interpolateRange:BL,intersect:Kj,intersectBoxLine:Vf,intersectPath:SO,intersectPoint:xO,intersectRule:cj,isArray:ae,isBoolean:Sc,isDate:Su,isFunction:Ge,isIterable:E8,isNumber:ct,isObject:xe,isRegExp:RC,isString:Ee,isTuple:gb,key:kC,lerp:w8,lineHeight:Ru,loader:hb,locale:Cz,logger:TC,lruCache:A8,markup:UO,merge:T8,mergeConfig:ib,multiLineOffset:RO,one:jd,pad:C8,panLinear:p8,panLog:g8,panPow:m8,panSymlog:y8,parse:$ve,parseExpression:UI,parseSelector:Gu,path:Ab,pathCurves:yO,pathEqual:rU,pathParse:gd,pathRectangle:aj,pathRender:Ag,pathSymbols:ij,pathTrail:oj,peek:at,point:Wb,projection:sI,quantileLogNormal:sD,quantileNormal:xb,quantileUniform:fD,quantiles:KC,quantizeInterpolator:VL,quarter:v8,quartiles:JC,get random(){return Bi},randomInteger:Iee,randomKDE:rD,randomLCG:Oee,randomLogNormal:Yz,randomMixture:Wz,randomNormal:nD,randomUniform:Xz,read:kz,regressionConstant:dD,regressionExp:Zz,regressionLinear:hD,regressionLoess:e7,regressionLog:Qz,regressionPoly:Jz,regressionPow:Kz,regressionQuad:pD,renderModule:Xb,repeat:Rp,resetDefaultLocale:TJ,resetSVGDefIds:xoe,responseType:Rz,runtimeContext:vV,sampleCurve:Eb,sampleLogNormal:iD,sampleNormal:bb,sampleUniform:uD,scale:dt,sceneEqual:VO,sceneFromJSON:Ej,scenePickVisit:jv,sceneToJSON:_j,sceneVisit:ma,sceneZOrder:_O,scheme:hO,serializeXML:Uj,setHybridRendererOptions:yoe,setRandom:Cee,span:Zg,splitAccessPath:fo,stringValue:pe,textMetrics:li,timeBin:hz,timeFloor:rz,timeFormatLocale:bg,timeInterval:Gd,timeOffset:oz,timeSequence:lz,timeUnitSpecifier:X8,timeUnits:UC,toBoolean:NC,toDate:FC,toNumber:nr,toSet:pa,toString:PC,transform:Uz,transforms:ld,truncate:D8,truthy:ji,tupleid:Re,typeParsers:mA,utcFloor:iz,utcInterval:Yd,utcOffset:sz,utcSequence:cz,utcdayofyear:J8,utcquarter:b8,utcweek:ez,version:Lve,visitArray:ru,week:Z8,writeConfig:Ud,zero:uu,zoomLinear:CC,zoomLog:DC,zoomPow:Sv,zoomSymlog:OC},Symbol.toStringTag,{value:"Module"}));var Uve="6.2.0",Bve={version:Uve};function pM(e){return ce(e,"or")}function gM(e){return ce(e,"and")}function mM(e){return ce(e,"not")}function pv(e,t){if(mM(e))pv(e.not,t);else if(gM(e))for(const n of e.and)pv(n,t);else if(pM(e))for(const n of e.or)pv(n,t);else t(e)}function Jf(e,t){return mM(e)?{not:Jf(e.not,t)}:gM(e)?{and:e.and.map(n=>Jf(n,t))}:pM(e)?{or:e.or.map(n=>Jf(n,t))}:t(e)}const je=structuredClone;function pH(e){throw new Error(e)}function wd(e,t){const n={};for(const r of t)_e(e,r)&&(n[r]=e[r]);return n}function fi(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>yt(e)).join(",")})`};function rt(e){if(ct(e))return e;const t=Ee(e)?e:yt(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function zT(e){return e===!1||e===null}function Je(e,t){return e.includes(t)}function Ad(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function yM(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function gH(e,...t){for(const n of t)Vve(e,n??{});return e}function Vve(e,t){for(const n of le(t))Ud(e,n,t[n],!0)}function Wa(e,t){const n=[],r={};let i;for(const o of e)i=t(o),!(i in r)&&(r[i]=1,n.push(o));return n}function Hve(e,t){const n=le(e),r=le(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function mH(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function vM(e,t){for(const n of e)if(t.has(n))return!0;return!1}function LT(e){const t=new Set;for(const n of e){const i=fo(n).map((a,s)=>s===0?a:`[${a}]`),o=i.map((a,s)=>i.slice(0,s+1).join(""));for(const a of o)t.add(a)}return t}function bM(e,t){return e===void 0||t===void 0?!0:vM(LT(e),LT(t))}function Rt(e){return le(e).length===0}const le=Object.keys,un=Object.values,Pu=Object.entries;function jg(e){return e===!0||e===!1}function jt(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function hg(e,t){return mM(e)?`!(${hg(e.not,t)})`:gM(e)?`(${e.and.map(n=>hg(n,t)).join(") && (")})`:pM(e)?`(${e.or.map(n=>hg(n,t)).join(") || (")})`:t(e)}function F1(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&F1(e[n],t)&&delete e[n],Rt(e)}function Cm(e){return e.charAt(0).toUpperCase()+e.substr(1)}function SM(e,t="datum"){const n=fo(e),r=[];for(let i=1;i<=n.length;i++){const o=`[${n.slice(0,i).map(pe).join("][")}]`;r.push(`${t}${o}`)}return r.join(" && ")}function yH(e,t="datum"){return`${t}[${pe(fo(e).join("."))}]`}function St(e){return`datum['${e.replaceAll("'","\\'")}']`}function qve(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Hi(e){return`${fo(e).map(qve).join("\\.")}`}function cc(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function nh(e){return`${fo(e).join(".")}`}function Td(e){return e?fo(e).length:0}function nn(...e){return e.find(t=>t!==void 0)}let vH=42;function bH(e){const t=++vH;return e?String(e)+t:t}function Gve(){vH=42}function SH(e){return xH(e)?e:`__${e}`}function xH(e){return e.startsWith("__")}function Ug(e){if(e!==void 0)return(e%360+360)%360}function bS(e){return ct(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const v4=Object.getPrototypeOf(structuredClone({}));function ui(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!ui(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;for(const o of e.entries())if(!ui(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==v4.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==v4.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!ui(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function yt(e){const t=[];return(function n(r){if(r?.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?`${r}`:"null";if(typeof r!="object")return JSON.stringify(r);let i,o;if(Array.isArray(r)){for(o="[",i=0;i<r.length;i++)i&&(o+=","),o+=n(r[i])||"null";return`${o}]`}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const a=t.push(r)-1,s=Object.keys(r).sort();for(o="",i=0;i<s.length;i++){const l=s[i],u=n(r[l]);u&&(o&&(o+=","),o+=`${JSON.stringify(l)}:${u}`)}return t.splice(a,1),`{${o}}`})(e)}function ce(e,t){return xe(e)&&_e(e,t)&&e[t]!==void 0}const as="row",os="column",SS="facet",Ut="x",Rn="y",Ta="x2",bo="y2",Yu="xOffset",rh="yOffset",Ca="radius",vs="radius2",Yi="theta",bs="theta2",Da="latitude",Oa="longitude",Ia="latitude2",qi="longitude2",Wu="time",Vr="color",So="fill",xo="stroke",Hr="shape",Ss="size",Ic="angle",xs="opacity",Xu="fillOpacity",Qu="strokeOpacity",Zu="strokeWidth",Ku="strokeDash",Dm="text",Cd="order",Om="detail",xS="key",fc="tooltip",_S="href",ES="url",wS="description",Yve={x:1,y:1,x2:1,y2:1},_H={theta:1,theta2:1,radius:1,radius2:1};function EH(e){return _e(_H,e)}const xM={longitude:1,longitude2:1,latitude:1,latitude2:1};function wH(e){switch(e){case Da:return"y";case Ia:return"y2";case Oa:return"x";case qi:return"x2"}}function AH(e){return _e(xM,e)}const Wve=le(xM),_M={...Yve,..._H,...xM,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function ed(e){return e===Vr||e===So||e===xo}const TH={row:1,column:1,facet:1},Pi=le(TH),EM={..._M,...TH},Xve=le(EM),{order:XTe,detail:QTe,tooltip:ZTe,...Qve}=EM,{row:KTe,column:JTe,facet:eCe,...Zve}=Qve;function Kve(e){return _e(Zve,e)}function CH(e){return _e(EM,e)}const Jve=[Ta,bo,Ia,qi,bs,vs];function DH(e){return Mc(e)!==e}function Mc(e){switch(e){case Ta:return Ut;case bo:return Rn;case Ia:return Da;case qi:return Oa;case bs:return Yi;case vs:return Ca}return e}function $u(e){if(EH(e))switch(e){case Yi:return"startAngle";case bs:return"endAngle";case Ca:return"outerRadius";case vs:return"innerRadius"}return e}function _o(e){switch(e){case Ut:return Ta;case Rn:return bo;case Da:return Ia;case Oa:return qi;case Yi:return bs;case Ca:return vs}}function qr(e){switch(e){case Ut:case Ta:return"width";case Rn:case bo:return"height"}}function OH(e){switch(e){case Ut:return"xOffset";case Rn:return"yOffset";case Ta:return"x2Offset";case bo:return"y2Offset";case Yi:return"thetaOffset";case Ca:return"radiusOffset";case bs:return"theta2Offset";case vs:return"radius2Offset"}}function wM(e){switch(e){case Ut:return"xOffset";case Rn:return"yOffset"}}function e1e(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const t1e=le(_M),{x:tCe,y:nCe,x2:rCe,y2:iCe,xOffset:aCe,yOffset:oCe,latitude:sCe,longitude:uCe,latitude2:lCe,longitude2:cCe,theta:fCe,theta2:dCe,radius:hCe,radius2:pCe,...AM}=_M,n1e=le(AM),TM={x:1,y:1},_s=le(TM);function rn(e){return _e(TM,e)}const CM={theta:1,radius:1},r1e=le(CM);function AS(e){return e==="width"?Ut:Rn}const IH={xOffset:1,yOffset:1};function Im(e){return _e(IH,e)}const i1e={time:1};function Aw(e){return e in i1e}const{text:gCe,tooltip:mCe,href:yCe,url:vCe,description:bCe,detail:SCe,key:xCe,order:_Ce,...MH}=AM,a1e=le(MH);function o1e(e){return _e(AM,e)}function s1e(e){switch(e){case Vr:case So:case xo:case Ss:case Hr:case xs:case Zu:case Ku:return!0;case Xu:case Qu:case Ic:case Wu:return!1}}const RH={...TM,...CM,...IH,...MH},DM=le(RH);function Eo(e){return _e(RH,e)}function u1e(e,t){return c1e(e)[t]}const kH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:ECe,...l1e}=kH;function c1e(e){switch(e){case Vr:case So:case xo:case wS:case Om:case xS:case fc:case _S:case Cd:case xs:case Xu:case Qu:case Zu:case SS:case as:case os:return kH;case Ut:case Rn:case Yu:case rh:case Da:case Oa:case Wu:return l1e;case Ta:case bo:case Ia:case qi:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case Ss:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Ku:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Hr:return{point:"always",geoshape:"always"};case Dm:return{text:"always"};case Ic:return{point:"always",square:"always",text:"always"};case ES:return{image:"always"};case Yi:return{text:"always",arc:"always"};case Ca:return{text:"always",arc:"always"};case bs:case vs:return{arc:"always"}}}function Tw(e){switch(e){case Ut:case Rn:case Yi:case Ca:case Yu:case rh:case Ss:case Ic:case Zu:case xs:case Xu:case Qu:case Wu:case Ta:case bo:case bs:case vs:return;case SS:case as:case os:case Hr:case Ku:case Dm:case fc:case _S:case ES:case wS:return"discrete";case Vr:case So:case xo:return"flexible";case Da:case Oa:case Ia:case qi:case Om:case xS:case Cd:return}}const f1e={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},d1e={count:1,min:1,max:1};function hs(e){return ce(e,"argmin")}function Ju(e){return ce(e,"argmax")}function OM(e){return Ee(e)&&_e(f1e,e)}const h1e=new Set(["count","valid","missing","distinct"]);function TS(e){return Ee(e)&&h1e.has(e)}function p1e(e){return Ee(e)&&Je(["min","max"],e)}const g1e=new Set(["count","sum","distinct","valid","missing"]),m1e=new Set(["mean","average","median","q1","q3","min","max"]);function NH(e){return Sc(e)&&(e=zS(e,void 0)),`bin${le(e).map(t=>CS(e[t])?jt(`_${t}_${Pu(e[t])}`):jt(`_${t}_${e[t]}`)).join("")}`}function Nt(e){return e===!0||Rc(e)&&!e.binned}function Pn(e){return e==="binned"||Rc(e)&&e.binned===!0}function Rc(e){return xe(e)}function CS(e){return ce(e,"param")}function b4(e){switch(e){case as:case os:case Ss:case Vr:case So:case xo:case Zu:case xs:case Xu:case Qu:case Hr:return 6;case Ku:return 4;default:return 10}}function Mm(e){return ce(e,"expr")}function $n(e,{level:t}={level:0}){const n=le(e||{}),r={};for(const i of n)r[i]=t===0?ai(e[i]):$n(e[i],{level:t-1});return r}function FH(e){const{anchor:t,frame:n,offset:r,orient:i,angle:o,limit:a,color:s,subtitleColor:l,subtitleFont:u,subtitleFontSize:f,subtitleFontStyle:d,subtitleFontWeight:p,subtitleLineHeight:g,subtitlePadding:y,...v}=e,b={...v,...s?{fill:s}:{}},x={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...o!==void 0?{angle:o}:{},...a!==void 0?{limit:a}:{}},_={...l?{subtitleColor:l}:{},...u?{subtitleFont:u}:{},...f?{subtitleFontSize:f}:{},...d?{subtitleFontStyle:d}:{},...p?{subtitleFontWeight:p}:{},...g?{subtitleLineHeight:g}:{},...y?{subtitlePadding:y}:{}},T=wd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:b,subtitleMarkConfig:T,nonMarkTitleProperties:x,subtitle:_}}function su(e){return Ee(e)||ae(e)&&Ee(e[0])}function Ce(e){return ce(e,"signal")}function kc(e){return ce(e,"step")}function y1e(e){return ae(e)?!1:ce(e,"fields")&&!ce(e,"data")}function v1e(e){return ae(e)?!1:ce(e,"fields")&&ce(e,"data")}function ts(e){return ae(e)?!1:ce(e,"field")&&ce(e,"data")}const b1e={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},S1e=le(b1e),x1e={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},jT=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],_1e=" – ";function PH(e){const t=ae(e.condition)?e.condition.map(S4):S4(e.condition);return{...ai(e),condition:t}}function ai(e){if(Mm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function S4(e){if(Mm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Pt(e){if(Mm(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ce(e)?e:e!==void 0?{value:e}:void 0}function E1e(e){return Ce(e)?e.signal:pe(e)}function x4(e){return Ce(e)?e.signal:pe(e.value)}function ca(e){return Ce(e)?e.signal:e==null?null:pe(e)}function w1e(e,t,n){for(const r of n){const i=uo(r,t.markDef,t.config);i!==void 0&&(e[r]=Pt(i))}return e}function $H(e){return[].concat(e.type,e.style??[])}function Ct(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:o}=r;return i&&ce(t,i)?t[i]:t[e]!==void 0?t[e]:o&&(!i||i===e)?void 0:uo(e,t,n,r)}function uo(e,t,n,{vgChannel:r}={}){const i=UT(e,t,n.style);return nn(r?i:void 0,i,r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function UT(e,t,n){return zH(e,$H(t),n)}function zH(e,t,n){t=Se(t);let r;for(const i of t){const o=n[i];ce(o,e)&&(r=o[e])}return r}function LH(e,t){return Se(e).reduce((n,r)=>(n.field.push(be(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function jH(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(ui(i,r))return;n.push(r)}),n}function UH(e,t){return ui(e,t)||!t?e:e?[...Se(e),...Se(t)].join(", "):t}function BH(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((su(n)||Ce(n))&&(su(r)||Ce(r)))return{explicit:e.explicit,value:UH(n,r)};if(su(n)||Ce(n))return{explicit:e.explicit,value:n};if(su(r)||Ce(r))return{explicit:e.explicit,value:r};if(!su(n)&&!Ce(n)&&!su(r)&&!Ce(r))return{explicit:e.explicit,value:jH(n,r)};throw new Error("It should never reach here")}function IM(e){return`Invalid specification ${yt(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const A1e='Autosize "fit" only works for single views and layered views.';function _4(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function E4(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function w4(e){return e?`Dropping "fit-${e}" because spec has discrete ${qr(e)}.`:'Dropping "fit" because spec has discrete size.'}function MM(e){return`Unknown field for ${e}. Cannot calculate view size.`}function A4(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function T1e(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function C1e(e){return`The "nearest" transform is not supported for ${e} marks.`}function VH(e){return`Selection not supported for ${e} yet.`}function D1e(e){return`Cannot find a selection named "${e}".`}const O1e="Scale bindings are currently only supported for scales with unbinned, continuous domains.",I1e="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",M1e="Legend bindings are only supported for selections over an individual field or encoding channel.";function R1e(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function k1e(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const N1e="The same selection must be used to override scale domains in a layered view.",F1e='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function P1e(e){return`Unknown repeated value "${e}".`}function T4(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const $1e="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",RM="Animation involving facet, layer, or concat is currently unsupported.";function z1e(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${pe(e)}.`}function L1e(e,t,n,r){return`${e.length?"Multiple ":"No "}matching ${pe(t)} encoding found for selection ${pe(n.param)}. Using "field": ${pe(r)}.`}const j1e="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function U1e(e){return`Unrecognized parse "${e}".`}function C4(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const B1e="Attempt to add the same child twice.";function V1e(e){return`Ignoring an invalid transform: ${yt(e)}.`}const H1e='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function D4(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function q1e(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${yt(t)} is overridden by a child projection ${yt(n)}.`}const G1e="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Y1e(e){return`${e}Offset dropped because ${e} is continuous`}function W1e(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${yt(n)}}.`}function HH(e){return`Invalid field type "${e}".`}function X1e(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Q1e(e){return`Invalid aggregation operator "${e}".`}function qH(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Z1e(e){return`Position range does not support relative band size for ${e}.`}function BT(e,t){return`Dropping ${yt(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const K1e="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function DS(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function J1e(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ebe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function tbe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function nbe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function Cw(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function rbe(e){return`The ${e} for range marks cannot be an expression`}function ibe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function abe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function obe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function sbe(e){return`Cannot use the relative band size with ${e} scale.`}function ube(e){return`Using unaggregated domain with raw field has no effect (${yt(e)}).`}function lbe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function cbe(e){return`Unaggregated domain is currently unsupported for log scale (${yt(e)}).`}function fbe(e){return`Cannot apply size to non-oriented mark "${e}".`}function dbe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function hbe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function GH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function YH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function pbe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(r)}). Using ${yt(n)}.`}function gbe(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${yt(n)} and ${yt(r)}). Using the union of the two domains.`}function mbe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ybe(e){return`Dropping sort property ${yt(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const O4="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",vbe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",bbe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",Sbe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function xbe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function _be(e){return`Stack is applied to a non-linear scale (${e}).`}function Ebe(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function P1(e,t){return`Invalid ${e}: ${yt(t)}.`}function wbe(e){return`Dropping day from datetime ${yt(e)} as day cannot be combined with other units.`}function Abe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Tbe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Cbe(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function I4(e){return`1D error band does not support ${e}.`}function WH(e){return`Channel ${e} is required for "binned" bin.`}function Dbe(e){return`Channel ${e} should not be used with "binned" bin.`}function Obe(e){return`Domain for ${e} is required for threshold scale.`}const XH=TC(AC);let dc=XH;function Ibe(e){return dc=e,dc}function Mbe(){return dc=XH,dc}function kM(...e){dc.error(...e)}function fe(...e){dc.warn(...e)}function Rbe(...e){dc.debug(...e)}function Nc(e){if(e&&xe(e)){for(const t of FM)if(ce(e,t))return!0}return!1}const QH=["january","february","march","april","may","june","july","august","september","october","november","december"],kbe=QH.map(e=>e.substr(0,3)),ZH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Nbe=ZH.map(e=>e.substr(0,3));function Fbe(e){if(bS(e)&&(e=+e),ct(e))return e>4&&fe(P1("quarter",e)),e-1;throw new Error(P1("quarter",e))}function Pbe(e){if(bS(e)&&(e=+e),ct(e))return e-1;{const t=e.toLowerCase(),n=QH.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=kbe.indexOf(r);if(i!==-1)return i;throw new Error(P1("month",e))}}function $be(e){if(bS(e)&&(e=+e),ct(e))return e%7;{const t=e.toLowerCase(),n=ZH.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=Nbe.indexOf(r);if(i!==-1)return i;throw new Error(P1("day",e))}}function NM(e,t){const n=[];if(t&&e.day!==void 0&&le(e).length>1&&(fe(wbe(e)),e=je(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?Pbe(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?Fbe(e.quarter):e.quarter;n.push(ct(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?$be(e.day):e.day;n.push(ct(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function hc(e){const n=NM(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function zbe(e){const n=NM(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Lbe(e){const t=NM(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const KH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},FM=le(KH);function jbe(e){return _e(KH,e)}function Fc(e){return xe(e)?e.binned:JH(e)}function JH(e){return e?.startsWith("binned")}function PM(e){return e.startsWith("utc")}function Ube(e){return e.substring(3)}const Bbe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function OS(e){return FM.filter(t=>tq(e,t))}function eq(e){const t=OS(e);return t[t.length-1]}function tq(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function Vbe(e,t,{end:n}={end:!1}){const r=SM(t),i=PM(e)?"utc":"";function o(l){return l==="quarter"?`(${i}quarter(${r})-1)`:`${i}${l}(${r})`}let a;const s={};for(const l of FM)tq(e,l)&&(s[l]=o(l),a=l);return n&&(s[a]+="+1"),zbe(s)}function nq(e){if(!e)return;const t=OS(e);return`timeUnitSpecifier(${yt(t)}, ${yt(Bbe)})`}function Hbe(e,t,n){if(!e)return;const r=nq(e);return`${n||PM(e)?"utc":"time"}Format(${t}, ${r})`}function On(e){if(!e)return;let t;return Ee(e)?JH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:xe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),PM(t.unit)&&(t.utc=!0,t.unit=Ube(t.unit)),t}function qbe(e){const{utc:t,...n}=On(e);return n.unit?(t?"utc":"")+le(n).map(r=>jt(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):`${t?"utc":""}timeunit${le(n).map(r=>jt(`_${r}_${n[r]}`)).join("")}`}function rq(e,t=n=>n){const n=On(e),r=eq(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:o,part:a}=iq(r,n.step),s={...i,[a]:+i[a]+o};return`${t(hc(s))} - ${t(hc(i))}`}}const Gbe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Ybe(e){return _e(Gbe,e)}function iq(e,t=1){if(Ybe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Wbe(e){return ce(e,"param")}function $M(e){return!!e?.field&&e.equal!==void 0}function zM(e){return!!e?.field&&e.lt!==void 0}function LM(e){return!!e?.field&&e.lte!==void 0}function jM(e){return!!e?.field&&e.gt!==void 0}function UM(e){return!!e?.field&&e.gte!==void 0}function BM(e){if(e?.field){if(ae(e.range)&&e.range.length===2)return!0;if(Ce(e.range))return!0}return!1}function VM(e){return!!e?.field&&(ae(e.oneOf)||ae(e.in))}function Xbe(e){return!!e?.field&&e.valid!==void 0}function aq(e){return VM(e)||$M(e)||BM(e)||zM(e)||jM(e)||LM(e)||UM(e)}function Ua(e,t){return LS(e,{timeUnit:t,wrapTime:!0})}function Qbe(e,t){return e.map(n=>Ua(n,t))}function oq(e,t=!0){const{field:n}=e,r=On(e.timeUnit),{unit:i,binned:o}=r||{},a=be(e,{expr:"datum"}),s=i?`time(${o?a:Vbe(i,n)})`:a;if($M(e))return`${s}===${Ua(e.equal,i)}`;if(zM(e)){const l=e.lt;return`${s}<${Ua(l,i)}`}else if(jM(e)){const l=e.gt;return`${s}>${Ua(l,i)}`}else if(LM(e)){const l=e.lte;return`${s}<=${Ua(l,i)}`}else if(UM(e)){const l=e.gte;return`${s}>=${Ua(l,i)}`}else{if(VM(e))return`indexof([${Qbe(e.oneOf,i).join(",")}], ${s}) !== -1`;if(Xbe(e))return IS(s,e.valid);if(BM(e)){const{range:l}=$n(e),u=Ce(l)?{signal:`${l.signal}[0]`}:l[0],f=Ce(l)?{signal:`${l.signal}[1]`}:l[1];if(u!==null&&f!==null&&t)return`inrange(${s}, [${Ua(u,i)}, ${Ua(f,i)}])`;const d=[];return u!==null&&d.push(`${s} >= ${Ua(u,i)}`),f!==null&&d.push(`${s} <= ${Ua(f,i)}`),d.length>0?d.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${yt(e)}`)}function IS(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Zbe(e){return aq(e)&&e.timeUnit?{...e,timeUnit:On(e.timeUnit)}:e}const Rm={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Kbe(e){return e==="quantitative"||e==="temporal"}function sq(e){return e==="ordinal"||e==="nominal"}const pc=Rm.quantitative,HM=Rm.ordinal,Dd=Rm.temporal,qM=Rm.nominal,ih=Rm.geojson;function Jbe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case pc:return"quantitative";case"t":case Dd:return"temporal";case"o":case HM:return"ordinal";case"n":case qM:return"nominal";case ih:return"geojson"}}const zn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},VT={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function eSe(e,t){const n=VT[e],r=VT[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const tSe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function M4(e){return tSe[e]}const uq=new Set(["linear","log","pow","sqrt","symlog"]),lq=new Set([...uq,"time","utc"]);function cq(e){return uq.has(e)}const fq=new Set(["quantile","quantize","threshold"]),nSe=new Set([...lq,...fq,"sequential","identity"]),rSe=new Set(["ordinal","bin-ordinal","point","band"]);function In(e){return rSe.has(e)}function ya(e){return nSe.has(e)}function Xa(e){return lq.has(e)}function Od(e){return fq.has(e)}const iSe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function aSe(e){return!Ee(e)&&ce(e,"name")}function dq(e){return ce(e,"param")}function oSe(e){return ce(e,"unionWith")}function sSe(e){return xe(e)&&"field"in e}const uSe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:wCe,domain:ACe,range:TCe,rangeMax:CCe,rangeMin:DCe,scheme:OCe,...lSe}=uSe,cSe=le(lSe);function HT(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Xa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Xa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Xa(e);case"nice":return Xa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return ya(e)&&!Je(["log","time","utc","threshold","quantile"],e)}}function hq(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return ed(e)?void 0:obe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function fSe(e,t){return Je([HM,qM],t)?e===void 0||In(e):t===Dd?Je([zn.TIME,zn.UTC,void 0],e):t===pc?cq(e)||Od(e)||e===void 0:!0}function dSe(e,t,n=!1){if(!Eo(e))return!1;switch(e){case Ut:case Rn:case Yu:case rh:case Yi:case Ca:return Xa(t)||t==="band"?!0:t==="point"?!n:!1;case Wu:return Je(["linear","band"],t);case Ss:case Zu:case xs:case Xu:case Qu:case Ic:return Xa(t)||Od(t)||Je(["band","point","ordinal"],t);case Vr:case So:case xo:return t!=="band";case Ku:case Hr:return t==="ordinal"||Od(t)}}function hSe(e){return xe(e)&&"value"in e}const Dr={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},pq=Dr.arc,MS=Dr.area,RS=Dr.bar,pSe=Dr.image,kS=Dr.line,NS=Dr.point,gSe=Dr.rect,$1=Dr.rule,gq=Dr.text,GM=Dr.tick,mSe=Dr.trail,YM=Dr.circle,WM=Dr.square,mq=Dr.geoshape;function el(e){return["line","area","trail"].includes(e)}function Bg(e){return["rect","bar","image","arc","tick"].includes(e)}const ySe=new Set(le(Dr));function lo(e){return ce(e,"type")}const vSe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],bSe=["fill","fillOpacity"],SSe=[...vSe,...bSe],xSe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},R4=le(xSe),Dw=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],_Se={area:["line","point"],bar:Dw,rect:Dw,line:["point"],tick:["bandSize","thickness",...Dw]},ESe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},wSe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},yq=le(wSe);function gc(e){return ce(e,"band")}const ASe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},TSe=5,XM={binSpacing:0,continuousBandSize:TSe,minBandSize:.25,timeUnitBandPosition:.5},CSe={...XM,binSpacing:1},DSe={...XM,thickness:1};function OSe(e){return lo(e)?e.type:e}function vq(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function QM({markDef:e,config:t,scaleChannel:n,scaleType:r,isCountAggregate:i}){if(!r||!ya(r)||i)return"always-valid";const o=vq(Ct("invalid",e,t),{isPath:el(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":o}function ISe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function bq({scaleName:e,scale:t,mode:n}){const r=`domain('${e}')`;if(!t||!e)return;const i=`${r}[0]`,o=`peek(${r})`,a=t.domainHasZero();return a==="definitely"?{scale:e,value:0}:a==="maybe"?{signal:`scale('${e}', inrange(0, ${r}) ? 0 : ${n==="zeroOrMin"?i:o})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?i:o})`}}function Sq({scaleChannel:e,channelDef:t,scale:n,scaleName:r,markDef:i,config:o}){const a=n?.get("type"),s=ba(t),l=TS(s?.aggregate),u=QM({scaleChannel:e,markDef:i,config:o,scaleType:a,isCountAggregate:l});if(s&&u==="show"){const f=o.scale.invalid?.[e]??"zero-or-min";return{test:IS(be(s,{expr:"datum"}),!1),...MSe(f,n,r)}}}function MSe(e,t,n){if(hSe(e)){const{value:r}=e;return Ce(r)?{signal:r.signal}:{value:r}}return bq({scale:t,scaleName:n,mode:"zeroOrMin"})}function ZM(e){const{channel:t,channelDef:n,markDef:r,scale:i,scaleName:o,config:a}=e,s=Mc(t),l=KM(e),u=Sq({scaleChannel:s,channelDef:n,scale:i,scaleName:o,markDef:r,config:a});return u!==void 0?[u,l]:l}function RSe(e){const{datum:t}=e;return Nc(t)?hc(t):`${yt(t)}`}function Wl(e,t,n,r){const i={};if(t&&(i.scale=t),wo(e)){const{datum:o}=e;Nc(o)?i.signal=hc(o):Ce(o)?i.signal=o.signal:Mm(o)?i.signal=o.expr:i.value=o}else i.field=be(e,n);if(r){const{offset:o,band:a}=r;o&&(i.offset=o),a&&(i.band=a)}return i}function z1({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:o="end",bandPosition:a=.5}){const s=!Ce(a)&&0<a&&a<1?"datum":void 0,l=be(t,{expr:s,suffix:i}),u=n!==void 0?be(n,{expr:s}):be(t,{suffix:o,expr:s}),f={};if(a===0||a===1){f.scale=e;const d=a===0?l:u;f.field=d}else{const d=Ce(a)?`(1-${a.signal}) * ${l} + ${a.signal} * ${u}`:`${1-a} * ${l} + ${a} * ${u}`;f.signal=`scale("${e}", ${d})`}return r&&(f.offset=r),f}function kSe({scaleName:e,fieldDef:t}){const n=be(t,{expr:"datum"}),r=be(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function KM({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u,bandPosition:f}){if(t){if(Ue(t)){const d=a?.get("type");if(Ar(t)){f??=zu({fieldDef:t,fieldDef2:n,markDef:r,config:i});const{bin:p,timeUnit:g,type:y}=t;if(Nt(p)||f&&g&&y===Dd)return s?.impute?Wl(t,o,{binSuffix:"mid"},{offset:l}):f&&!In(d)?z1({scaleName:o,fieldOrDatumDef:t,bandPosition:f,offset:l}):Wl(t,o,$m(t,e)?{binSuffix:"range"}:{},{offset:l});if(Pn(p)){if(he(n))return z1({scaleName:o,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:f,offset:l});fe(WH(e===Ut?Ta:bo))}}return Wl(t,o,In(d)?{binSuffix:"range"}:{},{offset:l,band:d==="band"?f??t.bandPosition??.5:void 0})}else if(va(t)){const d=t.value,p=l?{offset:l}:{};return{...pg(e,d),...p}}}return Ge(u)&&(u=u()),u&&{...u,...l?{offset:l}:{}}}function pg(e,t){return Je(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Je(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Pt(t)}function mc(e){return e&&e!=="number"&&e!=="time"}function xq(e,t,n){return`${e}(${t}${n?`, ${yt(n)}`:""})`}function JM({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o}){if(mc(n))return fa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:o});const a=_q(e,r,i),s=Id(e);if(t===void 0&&n===void 0&&o.customFormatTypes){if(s==="quantitative"){if(i&&o.normalizedNumberFormatType)return fa({fieldOrDatumDef:e,format:o.normalizedNumberFormat,formatType:o.normalizedNumberFormatType,expr:r,config:o});if(o.numberFormatType)return fa({fieldOrDatumDef:e,format:o.numberFormat,formatType:o.numberFormatType,expr:r,config:o})}if(s==="temporal"&&o.timeFormatType&&he(e)&&e.timeUnit===void 0)return fa({fieldOrDatumDef:e,format:o.timeFormat,formatType:o.timeFormatType,expr:r,config:o})}function l(u){return he(u)?On(u.timeUnit)||{}:{unit:void 0,utc:void 0}}if(Rd(e)){const{unit:u,utc:f}=l(e),d=FSe({field:a,timeUnit:u,format:t,formatType:o.timeFormatType,rawTimeFormat:o.timeFormat,isUTCScale:f||Pc(e)&&e.scale?.type===zn.UTC});return d?{signal:d}:void 0}if(t=qT({type:s,specifiedFormat:t,config:o,normalizeStack:i}),he(e)&&Nt(e.bin)){const u=be(e,{expr:r,binSuffix:"end"});return{signal:km(a,u,t,n,o)}}else return t||Id(e)==="quantitative"?{signal:`${Aq(a,t)}`}:{signal:`isValid(${a}) ? ${a} : ""+${a}`}}function _q(e,t,n){return he(e)?n?`${be(e,{expr:t,suffix:"end"})}-${be(e,{expr:t,suffix:"start"})}`:be(e,{expr:t}):RSe(e)}function fa({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:o,field:a}){if(a??=_q(e,r,i),a!=="datum.value"&&he(e)&&Nt(e.bin)){const s=be(e,{expr:r,binSuffix:"end"});return{signal:km(a,s,t,n,o)}}return{signal:xq(n,a,t)}}function Eq(e,t,n,r,i,o){if(!(Ee(r)&&mc(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Id(e)==="quantitative"&&(i.normalizedNumberFormatType&&Md(e)&&e.stack==="normalize"||i.numberFormatType))){if(Md(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return qT({type:"quantitative",config:i,normalizeStack:!0});if(Rd(e)){const a=he(e)?On(e.timeUnit)?.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:NSe({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:o})}return qT({type:t,specifiedFormat:n,config:i})}}function wq(e,t,n){if(e&&(Ce(e)||e==="number"||e==="time"))return e;if(Rd(t)&&n!=="time"&&n!=="utc")return he(t)&&On(t?.timeUnit)?.utc?"utc":"time"}function qT({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(Ee(t))return t;if(e===pc)return r?n.normalizedNumberFormat:n.numberFormat}function NSe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:nq(t)}:r?void 0:n.timeFormat)}function Aq(e,t){return`format(${e}, "${t||""}")`}function k4(e,t,n,r){return mc(n)?xq(n,e,t):Aq(e,(Ee(t)?t:void 0)??r.numberFormat)}function km(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return km(e,t,i.numberFormat,i.numberFormatType,i);const o=k4(e,n,r,i),a=k4(t,n,r,i);return`${IS(e,!1)} ? "null" : ${o} + "${_1e}" + ${a}`}function FSe({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:o}){return!t||n?!t&&r?`${r}(${e}, ${yt(n)})`:(n=Ee(n)?n:i,`${o?"utc":"time"}Format(${e}, ${yt(n)})`):Hbe(t,e,o)}const FS="min",PSe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function N4(e){return _e(PSe,e)}function $Se(e){return ce(e,"encoding")}function ss(e){return e&&(e.op==="count"||ce(e,"field"))}function Tq(e){return e&&ae(e)}function Nm(e){return ce(e,"row")||ce(e,"column")}function eR(e){return ce(e,"header")}function PS(e){return ce(e,"facet")}function zSe(e){return ce(e,"param")}function LSe(e){return!Ee(e)&&ce(e,"repeat")}function F4(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function tR(e){return ce(e,"sort")}function zu({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(Ue(e)&&e.bandPosition!==void 0)return e.bandPosition;if(he(e)){const{timeUnit:i,bin:o}=e;if(i&&!t)return uo("timeUnitBandPosition",n,r);if(Nt(o))return .5}}function Cq({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:o,useVlSizeChannel:a}){const s=qr(e),l=Ct(a?"size":s,r,i,{vgChannel:s});if(l!==void 0)return l;if(he(t)){const{timeUnit:u,bin:f}=t;if(u&&!n)return{band:uo("timeUnitBandSize",r,i)};if(Nt(f)&&!In(o))return{band:1}}if(Bg(r.type))return o?In(o)?i[r.type]?.discreteBandSize||{band:1}:i[r.type]?.continuousBandSize:i[r.type]?.discreteBandSize}function Dq(e,t,n,r){return Nt(e.bin)||e.timeUnit&&Ar(e)&&e.type==="temporal"?zu({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Oq(e){return ce(e,"sort")&&!ce(e,"field")}function Fm(e){return ce(e,"condition")}function $S(e){const t=e?.condition;return!!t&&!ae(t)&&he(t)}function Pm(e){const t=e?.condition;return!!t&&!ae(t)&&Ue(t)}function jSe(e){const t=e?.condition;return!!t&&(ae(t)||va(t))}function he(e){return ce(e,"field")||e?.aggregate==="count"}function Id(e){return e?.type}function wo(e){return ce(e,"datum")}function vu(e){return Ar(e)&&!j1(e)||L1(e)}function P4(e){return Ar(e)&&e.type==="quantitative"&&!e.bin||L1(e)}function L1(e){return wo(e)&&ct(e.datum)}function Ue(e){return he(e)||wo(e)}function Ar(e){return e&&(ce(e,"field")||e.aggregate==="count")&&ce(e,"type")}function va(e){return ce(e,"value")}function Pc(e){return ce(e,"scale")||ce(e,"sort")}function Md(e){return ce(e,"axis")||ce(e,"stack")||ce(e,"impute")}function Iq(e){return ce(e,"legend")}function Mq(e){return ce(e,"format")||ce(e,"formatType")}function USe(e){return fi(e,["legend","axis","header","scale"])}function BSe(e){return ce(e,"op")}function be(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,o="";if(HSe(e))n=SH("count");else{let a;if(!t.nofn)if(BSe(e))a=e.op;else{const{bin:s,aggregate:l,timeUnit:u}=e;Nt(s)?(a=NH(s),i=(t.binSuffix??"")+(t.suffix??"")):l?Ju(l)?(o=`["${n}"]`,n=`argmax_${l.argmax}`):hs(l)?(o=`["${n}"]`,n=`argmin_${l.argmin}`):a=String(l):u&&!Fc(u)&&(a=qbe(u),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}a&&(n=n?`${a}_${n}`:a)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?nh(n):t.expr?yH(n,t.expr)+o:Hi(n)+o}function j1(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return he(e)&&!!e.bin;case"temporal":return!1}throw new Error(HH(e.type))}function VSe(e){return Pc(e)&&Od(e.scale?.type)}function HSe(e){return e.aggregate==="count"}function qSe(e,t){const{field:n,bin:r,timeUnit:i,aggregate:o}=e;if(o==="count")return t.countTitle;if(Nt(r))return`${n} (binned)`;if(i&&!Fc(i)){const a=On(i)?.unit;if(a)return`${n} (${OS(a).join("-")})`}else if(o)return Ju(o)?`${n} for max ${o.argmax}`:hs(o)?`${n} for min ${o.argmin}`:`${Cm(o)} of ${n}`;return n}function GSe(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Ju(t))return`${i} for argmax(${t.argmax})`;if(hs(t))return`${i} for argmin(${t.argmin})`;const o=r&&!Fc(r)?On(r):void 0,a=t||o?.unit||o?.maxbins&&"timeunit"||Nt(n)&&"bin";return a?`${a.toUpperCase()}(${i})`:i}const Rq=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return GSe(e);default:return qSe(e,t)}};let kq=Rq;function Nq(e){kq=e}function YSe(){Nq(Rq)}function td(e,t,{allowDisabling:n,includeDefault:r=!0}){const i=nR(e)?.title;if(!he(e))return i??e.title;const o=e,a=r?rR(o,t):void 0;return n?nn(i,o.title,a):i??o.title??a}function nR(e){if(Md(e)&&e.axis)return e.axis;if(Iq(e)&&e.legend)return e.legend;if(eR(e)&&e.header)return e.header}function rR(e,t){return kq(e,t)}function U1(e){if(Mq(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=nR(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function WSe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(tR(e)&&ae(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Ju(n)&&!hs(n))return"quantitative";if(Pc(e)&&e.scale?.type)switch(VT[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function ba(e){if(he(e))return e;if($S(e))return e.condition}function gn(e){if(Ue(e))return e;if(Pm(e))return e.condition}function Fq(e,t,n,r={}){if(Ee(e)||ct(e)||Sc(e)){const i=Ee(e)?"string":ct(e)?"number":"boolean";return fe(W1e(t,i,e)),{value:e}}return Ue(e)?B1(e,t,n,r):Pm(e)?{...e,condition:B1(e.condition,t,n,r)}:e}function B1(e,t,n,r){if(Mq(e)){const{format:i,formatType:o,...a}=e;if(mc(o)&&!n.customFormatTypes)return fe(D4(t)),B1(a,t,n,r)}else{const i=Md(e)?"axis":Iq(e)?"legend":eR(e)?"header":null;if(i&&e[i]){const{format:o,formatType:a,...s}=e[i];if(mc(a)&&!n.customFormatTypes)return fe(D4(t)),B1({...e,[i]:s},t,n,r)}}return he(e)?iR(e,t,r):XSe(e)}function XSe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=ct(n)?"quantitative":Ee(n)?"nominal":Nc(n)?"temporal":void 0,{...e,type:t}}function iR(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:o,field:a}=e,s={...e};if(!n&&r&&!OM(r)&&!Ju(r)&&!hs(r)&&(fe(Q1e(r)),delete s.aggregate),i&&(s.timeUnit=On(i)),a&&(s.field=`${a}`),Nt(o)&&(s.bin=zS(o,t)),Pn(o)&&!rn(t)&&fe(Dbe(t)),Ar(s)){const{type:l}=s,u=Jbe(l);l!==u&&(s.type=u),l!=="quantitative"&&TS(r)&&(fe(X1e(l,r)),s.type="quantitative")}else if(!DH(t)){const l=WSe(s,t);s.type=l}if(Ar(s)){const{compatible:l,warning:u}=QSe(s,t)||{};l===!1&&fe(u)}if(tR(s)&&Ee(s.sort)){const{sort:l}=s;if(N4(l))return{...s,sort:{encoding:l}};const u=l.substring(1);if(l.charAt(0)==="-"&&N4(u))return{...s,sort:{encoding:u,order:"descending"}}}if(eR(s)){const{header:l}=s;if(l){const{orient:u,...f}=l;if(u)return{...s,header:{...f,labelOrient:l.labelOrient||u,titleOrient:l.titleOrient||u}}}}return s}function zS(e,t){return Sc(e)?{maxbins:b4(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:b4(t)}:e}const Ff={compatible:!0};function QSe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case as:case os:case SS:return j1(e)?Ff:{compatible:!1,warning:ebe(t)};case Ut:case Rn:case Yu:case rh:case Vr:case So:case xo:case Dm:case Om:case xS:case fc:case _S:case ES:case Ic:case Yi:case Ca:case wS:return Ff;case Oa:case qi:case Da:case Ia:return n!==pc?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:Ff;case xs:case Xu:case Qu:case Zu:case Ss:case bs:case vs:case Ta:case bo:case Wu:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:Ff;case Hr:case Ku:return!j1(e)&&!VSe(e)?{compatible:!1,warning:tbe(t)}:Ff;case Cd:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:Ff}}function Rd(e){const{formatType:t}=U1(e);return t==="time"||!t&&ZSe(e)}function ZSe(e){return e&&(e.type==="temporal"||he(e)&&!!e.timeUnit)}function LS(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){const o=t&&On(t)?.unit;let a=o||n==="temporal",s;return Mm(e)?s=e.expr:Ce(e)?s=e.signal:Nc(e)?(a=!0,s=hc(e)):(Ee(e)||ct(e))&&a&&(s=`datetime(${yt(e)})`,jbe(o)&&(ct(e)&&e<1e4||Ee(e)&&isNaN(Date.parse(e)))&&(s=hc({[o]:e}))),s?r&&a?`time(${s})`:s:i?void 0:yt(e)}function Pq(e,t){const{type:n}=e;return t.map(r=>{const i=he(e)&&!Fc(e.timeUnit)?e.timeUnit:void 0,o=LS(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return o!==void 0?{signal:o}:r})}function $m(e,t){return Nt(e.bin)?Eo(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const $4={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function zm(e){return e?.condition}const $q=["domain","grid","labels","ticks","title"],KSe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},zq={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},JSe={...zq,style:1,labelExpr:1,encoding:1};function z4(e){return _e(JSe,e)}const exe={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Lq=le(exe);function Es(e){return ce(e,"mark")}class jS{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Es(t)?OSe(t.mark)===this.name:!1}}function Xl(e,t){const n=e?.[t];return n?ae(n)?Ad(n,r=>!!r.field):he(n)||$S(n):!1}function jq(e,t){const n=e?.[t];return n?ae(n)?Ad(n,r=>!!r.field):he(n)||wo(n)||Pm(n):!1}function Uq(e,t){if(rn(t)){const n=e[t];if((he(n)||wo(n))&&(sq(n.type)||he(n)&&n.timeUnit)){const r=wM(t);return jq(e,r)}}return!1}function Bq(e){return Ad(Xve,t=>{if(Xl(e,t)){const n=e[t];if(ae(n))return Ad(n,r=>!!r.aggregate);{const r=ba(n);return r&&!!r.aggregate}}return!1})}function Vq(e,t){const n=[],r=[],i=[],o=[],a={};return aR(e,(s,l)=>{if(he(s)){const{field:u,aggregate:f,bin:d,timeUnit:p,...g}=s;if(f||p||d){const v=nR(s)?.title;let b=be(s,{forAs:!0});const x={...v?[]:{title:td(s,t,{allowDisabling:!0})},...g,field:b};if(f){let _;if(Ju(f)?(_="argmax",b=be({op:"argmax",field:f.argmax},{forAs:!0}),x.field=`${b}.${u}`):hs(f)?(_="argmin",b=be({op:"argmin",field:f.argmin},{forAs:!0}),x.field=`${b}.${u}`):f!=="boxplot"&&f!=="errorbar"&&f!=="errorband"&&(_=f),_){const T={op:_,as:b};u&&(T.field=u),o.push(T)}}else if(n.push(b),Ar(s)&&Nt(d)){if(r.push({bin:d,field:u,as:b}),n.push(be(s,{binSuffix:"end"})),$m(s,l)&&n.push(be(s,{binSuffix:"range"})),rn(l)){const _={field:`${b}_end`};a[`${l}2`]=_}x.bin="binned",DH(l)||(x.type=pc)}else if(p&&!Fc(p)){i.push({timeUnit:p,field:u,as:b});const _=Ar(s)&&s.type!==Dd&&"time";_&&(l===Dm||l===fc?x.formatType=_:o1e(l)?x.legend={formatType:_,...x.legend}:rn(l)&&(x.axis={formatType:_,...x.axis}))}a[l]=x}else n.push(u),a[l]=e[l]}else a[l]=e[l]}),{bins:r,timeUnits:i,aggregate:o,groupby:n,encoding:a}}function txe(e,t,n){const r=u1e(t,n);if(r){if(r==="binned"){const i=e[t===Ta?Ut:Rn];return!!(he(i)&&he(e[t])&&Pn(i.bin))}}else return!1;return!0}function nxe(e,t,n,r){const i={};for(const o of le(e))CH(o)||fe(J1e(o));for(let o of t1e){if(!e[o])continue;const a=e[o];if(Im(o)){const s=e1e(o),l=i[s];if(he(l)&&Kbe(l.type)&&he(a)&&!l.timeUnit){fe(Y1e(s));continue}}if(o==="angle"&&t==="arc"&&!e.theta&&(fe(G1e),o=Yi),!txe(e,o,t)){fe(DS(o,t));continue}if(o===Ss&&t==="line"&&ba(e[o])?.aggregate){fe(K1e);continue}if(o===Vr&&(n?"fill"in e:"stroke"in e)){fe(qH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(o===Om||o===Cd&&!ae(a)&&!va(a)||o===fc&&ae(a)){if(a){if(o===Cd){const s=e[o];if(Oq(s)){i[o]=s;continue}}i[o]=Se(a).reduce((s,l)=>(he(l)?s.push(iR(l,o)):fe(BT(l,o)),s),[])}}else{if(o===fc&&a===null)i[o]=null;else if(!he(a)&&!wo(a)&&!va(a)&&!Fm(a)&&!Ce(a)){fe(BT(a,o));continue}i[o]=Fq(a,o,r)}}return i}function US(e,t){const n={};for(const r of le(e)){const i=Fq(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function rxe(e){const t=[];for(const n of le(e))if(Xl(e,n)){const r=e[n],i=Se(r);for(const o of i)he(o)?t.push(o):$S(o)&&t.push(o.condition)}return t}function aR(e,t,n){if(e)for(const r of le(e)){const i=e[r];if(ae(i))for(const o of i)t.call(n,o,r);else t.call(n,i,r)}}function ixe(e,t,n,r){return e?le(e).reduce((i,o)=>{const a=e[o];return ae(a)?a.reduce((s,l)=>t.call(r,s,l,o),i):t.call(r,i,a,o)},n):n}function Hq(e,t){return le(t).reduce((n,r)=>{switch(r){case Ut:case Rn:case _S:case wS:case ES:case Ta:case bo:case Yu:case rh:case Yi:case bs:case Ca:case vs:case Wu:case Da:case Oa:case Ia:case qi:case Dm:case Hr:case Ic:case fc:return n;case Cd:if(e==="line"||e==="trail")return n;case Om:case xS:{const i=t[r];if(ae(i)||he(i))for(const o of Se(i))o.aggregate||n.push(be(o,{}));return n}case Ss:if(e==="trail")return n;case Vr:case So:case xo:case xs:case Xu:case Qu:case Ku:case Zu:{const i=ba(t[r]);return i&&!i.aggregate&&n.push(be(i,{})),n}}},[])}function axe(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(ae(t)){for(const o of t)o.aggregate?(r||(r=[]),r.push(o)):(i||(i=[]),i.push(o));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return ae(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function GT(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:a,titlePrefix:s})=>{const l=r?` of ${oR(t)}`:"";return{field:a+t.field,type:t.type,title:Ce(s)?{signal:`${s}"${escape(l)}"`}:s+l}}),o=rxe(n).map(USe);return{tooltip:[...i,...Wa(o,rt)]}}function oR(e){const{title:t,field:n}=e;return nn(t,n)}function sR(e,t,n,r,i){const{scale:o,axis:a}=n;return({partName:s,mark:l,positionPrefix:u,endPositionPrefix:f=void 0,extraEncoding:d={}})=>{const p=oR(n);return qq(e,s,i,{mark:l,encoding:{[t]:{field:`${u}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...o!==void 0?{scale:o}:{},...a!==void 0?{axis:a}:{}},...Ee(f)?{[`${t}2`]:{field:`${f}_${n.field}`}}:{},...r,...d}})}}function qq(e,t,n,r){const{clip:i,color:o,opacity:a}=e,s=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...o?{color:o}:{},...a?{opacity:a}:{},...lo(r.mark)?r.mark:{type:r.mark},style:`${s}-${String(t)}`,...Sc(e[t])?{}:e[t]}}]:[]}function Gq(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",o=r[i],a=r[`${i}2`],s=r[`${i}Error`],l=r[`${i}Error2`];return{continuousAxisChannelDef:R0(o,n),continuousAxisChannelDef2:R0(a,n),continuousAxisChannelDefError:R0(s,n),continuousAxisChannelDefError2:R0(l,n),continuousAxis:i}}function R0(e,t){if(e?.aggregate){const{aggregate:n,...r}=e;return n!==t&&fe(Cbe(n,t)),r}else return e}function Yq(e,t){const{mark:n,encoding:r}=e,{x:i,y:o}=r;if(lo(n)&&n.orient)return n.orient;if(vu(i)){if(vu(o)){const a=he(i)&&i.aggregate,s=he(o)&&o.aggregate;if(!a&&s===t)return"vertical";if(!s&&a===t)return"horizontal";if(a===t&&s===t)throw new Error("Both x and y cannot have aggregate");return Rd(o)&&!Rd(i)?"horizontal":"vertical"}return"horizontal"}else{if(vu(o))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const V1="boxplot",oxe=["box","median","outliers","rule","ticks"],sxe=new jS(V1,Xq);function Wq(e){return ct(e)?"tukey":e}function Xq(e,{config:t}){e={...e,encoding:US(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:o,...a}=e,s=lo(n)?n:{type:n};i&&fe(VH("boxplot"));const l=s.extent??t.boxplot.extent,u=Ct("size",s,t),f=s.invalid,d=Wq(l),{bins:p,timeUnits:g,transform:y,continuousAxisChannelDef:v,continuousAxis:b,groupby:x,aggregate:_,encodingWithoutContinuousAxis:T,ticksOrient:A,boxOrient:w,customTooltipWithoutAggregatedField:C}=uxe(e,l,t),D=nh(v.field),{color:I,size:M,...k}=T,R=Ot=>sR(s,b,v,Ot,t.boxplot),z=R(k),P=R(T),$=(xe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",N=R({...k,...M?{size:M}:{},color:{condition:{test:`${St(`lower_box_${v.field}`)} >= ${St(`upper_box_${v.field}`)}`,...I||{value:$}}}}),L=GT([{fieldPrefix:d==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:d==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],v,T),B={type:"tick",color:"black",opacity:1,orient:A,invalid:f,aria:!1},q=d==="min-max"?L:GT([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],v,T),H=[...z({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:q}),...z({partName:"rule",mark:{type:"rule",invalid:f,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:q}),...z({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:q}),...z({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:q})],U=[...d!=="tukey"?H:[],...P({partName:"box",mark:{type:"bar",...u?{size:u}:{},orient:w,invalid:f,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:L}),...N({partName:"median",mark:{type:"tick",invalid:f,...xe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...u?{size:u}:{},orient:A,aria:!1},positionPrefix:"mid_box",extraEncoding:L})];if(d==="min-max")return{...a,transform:(a.transform??[]).concat(y),layer:U};const Y=St(`lower_box_${v.field}`),Q=St(`upper_box_${v.field}`),J=`(${Q} - ${Y})`,de=`${Y} - ${l} * ${J}`,ve=`${Q} + ${l} * ${J}`,we=St(v.field),Be={joinaggregate:Qq(v.field),groupby:x},Ve={transform:[{filter:`(${de} <= ${we}) && (${we} <= ${ve})`},{aggregate:[{op:"min",field:v.field,as:`lower_whisker_${D}`},{op:"max",field:v.field,as:`upper_whisker_${D}`},{op:"min",field:`lower_box_${v.field}`,as:`lower_box_${D}`},{op:"max",field:`upper_box_${v.field}`,as:`upper_box_${D}`},..._],groupby:x}],layer:H},{tooltip:me,...$e}=k,{scale:De,axis:ue}=v,Et=oR(v),nt=qq(s,"outliers",t.boxplot,{transform:[{filter:`(${we} < ${de}) || (${we} > ${ve})`}],mark:"point",encoding:{[b]:{field:v.field,type:v.type,...Et!==void 0?{title:Et}:{},...De!==void 0?{scale:De}:{},...ue!==void 0?{axis:ue}:{}},...$e,...I?{color:I}:{},...C?{tooltip:C}:{}}})[0];let $t;const Gt=[...p,...g,Be];return nt?$t={transform:Gt,layer:[nt,Ve]}:($t=Ve,$t.transform.unshift(...Gt)),{...a,layer:[$t,{transform:y,layer:U}]}}function Qq(e){const t=nh(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function uxe(e,t,n){const r=Yq(e,V1),{continuousAxisChannelDef:i,continuousAxis:o}=Gq(e,r,V1),a=i.field,s=nh(a),l=Wq(t),u=[...Qq(a),{op:"median",field:a,as:`mid_box_${s}`},{op:"min",field:a,as:(l==="min-max"?"lower_whisker_":"min_")+s},{op:"max",field:a,as:(l==="min-max"?"upper_whisker_":"max_")+s}],f=l==="min-max"||l==="tukey"?[]:[{calculate:`${St(`upper_box_${s}`)} - ${St(`lower_box_${s}`)}`,as:`iqr_${s}`},{calculate:`min(${St(`upper_box_${s}`)} + ${St(`iqr_${s}`)} * ${t}, ${St(`max_${s}`)})`,as:`upper_whisker_${s}`},{calculate:`max(${St(`lower_box_${s}`)} - ${St(`iqr_${s}`)} * ${t}, ${St(`min_${s}`)})`,as:`lower_whisker_${s}`}],{[o]:d,...p}=e.encoding,{customTooltipWithoutAggregatedField:g,filteredEncoding:y}=axe(p),{bins:v,timeUnits:b,aggregate:x,groupby:_,encoding:T}=Vq(y,n),A=r==="vertical"?"horizontal":"vertical",w=r,C=[...v,...b,{aggregate:[...x,...u],groupby:_},...f];return{bins:v,timeUnits:b,transform:C,groupby:_,aggregate:x,continuousAxisChannelDef:i,continuousAxis:o,encodingWithoutContinuousAxis:T,ticksOrient:A,boxOrient:w,customTooltipWithoutAggregatedField:g}}const uR="errorbar",lxe=["ticks","rule"],cxe=new jS(uR,Zq);function Zq(e,{config:t}){e={...e,encoding:US(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,ticksOrient:a,markDef:s,outerSpec:l,tooltipEncoding:u}=Kq(e,uR,t);delete o.size;const f=sR(s,i,r,o,t.errorbar),d=s.thickness,p=s.size,g={type:"tick",orient:a,aria:!1,...d!==void 0?{thickness:d}:{},...p!==void 0?{size:p}:{}},y=[...f({partName:"ticks",mark:g,positionPrefix:"lower",extraEncoding:u}),...f({partName:"ticks",mark:g,positionPrefix:"upper",extraEncoding:u}),...f({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...d!==void 0?{size:d}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u})];return{...l,transform:n,...y.length>1?{layer:y}:{...y[0]}}}function fxe(e,t){const{encoding:n}=e;if(dxe(n))return{orient:Yq(e,t),inputType:"raw"};const r=hxe(n),i=pxe(n),o=n.x,a=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const s=n.x2,l=n.y2;if(Ue(s)&&Ue(l))throw new Error(`${t} cannot have both x2 and y2`);if(Ue(s)){if(vu(o))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Ue(l)){if(vu(a))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const s=n.xError,l=n.xError2,u=n.yError,f=n.yError2;if(Ue(l)&&!Ue(s))throw new Error(`${t} cannot have xError2 without xError`);if(Ue(f)&&!Ue(u))throw new Error(`${t} cannot have yError2 without yError`);if(Ue(s)&&Ue(u))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Ue(s)){if(vu(o))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Ue(u)){if(vu(a))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function dxe(e){return(Ue(e.x)||Ue(e.y))&&!Ue(e.x2)&&!Ue(e.y2)&&!Ue(e.xError)&&!Ue(e.xError2)&&!Ue(e.yError)&&!Ue(e.yError2)}function hxe(e){return Ue(e.x2)||Ue(e.y2)}function pxe(e){return Ue(e.xError)||Ue(e.xError2)||Ue(e.yError)||Ue(e.yError2)}function Kq(e,t,n){const{mark:r,encoding:i,params:o,projection:a,...s}=e,l=lo(r)?r:{type:r};o&&fe(VH(t));const{orient:u,inputType:f}=fxe(e,t),{continuousAxisChannelDef:d,continuousAxisChannelDef2:p,continuousAxisChannelDefError:g,continuousAxisChannelDefError2:y,continuousAxis:v}=Gq(e,u,t),{errorBarSpecificAggregate:b,postAggregateCalculates:x,tooltipSummary:_,tooltipTitleWithFieldName:T}=gxe(l,d,p,g,y,f,t,n),{[v]:A,[v==="x"?"x2":"y2"]:w,[v==="x"?"xError":"yError"]:C,[v==="x"?"xError2":"yError2"]:D,...I}=i,{bins:M,timeUnits:k,aggregate:R,groupby:z,encoding:P}=Vq(I,n),$=[...R,...b],N=f!=="raw"?[]:z,L=GT(_,d,P,T);return{transform:[...s.transform??[],...M,...k,...$.length===0?[]:[{aggregate:$,groupby:N}],...x],groupby:N,continuousAxisChannelDef:d,continuousAxis:v,encodingWithoutContinuousAxis:P,ticksOrient:u==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:s,tooltipEncoding:L}}function gxe(e,t,n,r,i,o,a,s){let l=[],u=[];const f=t.field;let d,p=!1;if(o==="raw"){const g=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":s.errorbar.center,y=e.extent?e.extent:g==="mean"?"stderr":"iqr";if(g==="median"!=(y==="iqr")&&fe(Tbe(g,y,a)),y==="stderr"||y==="stdev")l=[{op:y,field:f,as:`extent_${f}`},{op:g,field:f,as:`center_${f}`}],u=[{calculate:`${St(`center_${f}`)} + ${St(`extent_${f}`)}`,as:`upper_${f}`},{calculate:`${St(`center_${f}`)} - ${St(`extent_${f}`)}`,as:`lower_${f}`}],d=[{fieldPrefix:"center_",titlePrefix:Cm(g)},{fieldPrefix:"upper_",titlePrefix:L4(g,y,"+")},{fieldPrefix:"lower_",titlePrefix:L4(g,y,"-")}],p=!0;else{let v,b,x;y==="ci"?(v="mean",b="ci0",x="ci1"):(v="median",b="q1",x="q3"),l=[{op:b,field:f,as:`lower_${f}`},{op:x,field:f,as:`upper_${f}`},{op:v,field:f,as:`center_${f}`}],d=[{fieldPrefix:"upper_",titlePrefix:td({field:f,aggregate:x,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:td({field:f,aggregate:b,type:"quantitative"},s,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:td({field:f,aggregate:v,type:"quantitative"},s,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(Abe(e.center,e.extent)),o==="aggregated-upper-lower"?(d=[],u=[{calculate:St(n.field),as:`upper_${f}`},{calculate:St(f),as:`lower_${f}`}]):o==="aggregated-error"&&(d=[{fieldPrefix:"",titlePrefix:f}],u=[{calculate:`${St(f)} + ${St(r.field)}`,as:`upper_${f}`}],i?u.push({calculate:`${St(f)} + ${St(i.field)}`,as:`lower_${f}`}):u.push({calculate:`${St(f)} - ${St(r.field)}`,as:`lower_${f}`}));for(const g of u)d.push({fieldPrefix:g.as.substring(0,6),titlePrefix:cc(cc(g.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:u,errorBarSpecificAggregate:l,tooltipSummary:d,tooltipTitleWithFieldName:p}}function L4(e,t,n){return`${Cm(e)} ${n} ${t}`}const lR="errorband",mxe=["band","borders"],yxe=new jS(lR,Jq);function Jq(e,{config:t}){e={...e,encoding:US(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:o,markDef:a,outerSpec:s,tooltipEncoding:l}=Kq(e,lR,t),u=a,f=sR(u,i,r,o,t.errorband),d=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:d?"area":"rect"},g={type:d?"line":"rule"};const y={...u.interpolate?{interpolate:u.interpolate}:{},...u.tension&&u.interpolate?{tension:u.tension}:{}};return d?(p={...p,...y,ariaRoleDescription:"errorband"},g={...g,...y,aria:!1}):u.interpolate?fe(I4("interpolate")):u.tension&&fe(I4("tension")),{...s,transform:n,layer:[...f({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...f({partName:"borders",mark:g,positionPrefix:"lower",extraEncoding:l}),...f({partName:"borders",mark:g,positionPrefix:"upper",extraEncoding:l})]}}const eG={};function cR(e,t,n){const r=new jS(e,t);eG[e]={normalizer:r,parts:n}}function vxe(){return le(eG)}cR(V1,Xq,oxe);cR(uR,Zq,lxe);cR(lR,Jq,mxe);const bxe=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],tG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},nG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Sxe=le(tG),xxe=le(nG),_xe={header:1,headerRow:1,headerColumn:1,headerFacet:1},rG=le(_xe),iG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Exe={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},wxe={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},Sa="_vgsid_",Axe={point:{on:"click",fields:[Sa],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function fR(e){return e==="legend"||!!e?.legend}function Ow(e){return fR(e)&&xe(e)}function dR(e){return!!e?.select}function aG(e){const t=[];for(const n of e||[]){if(dR(n))continue;const{expr:r,bind:i,...o}=n;if(i&&r){const a={...o,bind:i,init:r};t.push(a)}else{const a={...o,...r?{update:r}:{},...i?{bind:i}:{}};t.push(a)}}return t}function Txe(e){return BS(e)||pR(e)||hR(e)}function hR(e){return ce(e,"concat")}function BS(e){return ce(e,"vconcat")}function pR(e){return ce(e,"hconcat")}function oG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function co(e){return ce(e,"step")}function j4(e){return ce(e,"view")||ce(e,"width")||ce(e,"height")}const U4=20,Cxe={align:1,bounds:1,center:1,columns:1,spacing:1},Dxe=le(Cxe);function Oxe(e,t,n){const r=n[t],i={},{spacing:o,columns:a}=r;o!==void 0&&(i.spacing=o),a!==void 0&&(PS(e)&&!Nm(e.facet)||hR(e))&&(i.columns=a),BS(e)&&(i.columns=1);for(const s of Dxe)if(e[s]!==void 0)if(s==="spacing"){const l=e[s];i[s]=ct(l)?l:{row:l.row??o,column:l.column??o}}else i[s]=e[s];return i}function YT(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function WT(e,t){const n=H1(e,t);return co(n)?n.step:sG}function H1(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return nn(n,{step:e.step})}const sG=20,Ixe={continuousWidth:300,continuousHeight:300,step:sG},Mxe={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:Ixe,mark:ESe,arc:{},area:{},bar:CSe,circle:{},geoshape:{},image:{},line:{},point:{},rect:XM,rule:{color:"black"},square:{},text:{color:"black"},tick:DSe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:iSe,projection:{},legend:Exe,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Axe,style:{},title:{},facet:{spacing:U4},concat:{spacing:U4},normalizedNumberFormat:".0%"},Ho=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],B4={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},V4={blue:Ho[0],orange:Ho[1],red:Ho[2],teal:Ho[3],green:Ho[4],yellow:Ho[5],purple:Ho[6],pink:Ho[7],brown:Ho[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function Rxe(e={}){return{signals:[{name:"color",value:xe(e)?{...V4,...e}:V4}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function kxe(e){return{signals:[{name:"fontSize",value:xe(e)?{...B4,...e}:B4}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function Nxe(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function uG(e){const t=le(e||{}),n={};for(const r of t){const i=e[r];n[r]=zm(i)?PH(i):ai(i)}return n}function Fxe(e){const t=le(e),n={};for(const r of t)n[r]=uG(e[r]);return n}const Pxe=[...yq,...Lq,...rG,"background","padding","legend","lineBreak","scale","style","title","view"];function lG(e={}){const{color:t,font:n,fontSize:r,selection:i,...o}=e,a=ib({},je(Mxe),n?Nxe(n):{},t?Rxe(t):{},r?kxe(r):{},o||{});i&&Ud(a,"selection",i,!0);const s=fi(a,Pxe);for(const l of["background","lineBreak","padding"])a[l]&&(s[l]=ai(a[l]));for(const l of yq)a[l]&&(s[l]=$n(a[l]));for(const l of Lq)a[l]&&(s[l]=uG(a[l]));for(const l of rG)a[l]&&(s[l]=$n(a[l]));if(a.legend&&(s.legend=$n(a.legend)),a.scale){const{invalid:l,...u}=a.scale,f=$n(l,{level:1});s.scale={...$n(u),...le(f).length>0?{invalid:f}:{}}}return a.style&&(s.style=Fxe(a.style)),a.title&&(s.title=$n(a.title)),a.view&&(s.view=$n(a.view)),s}const $xe=new Set(["view",...ySe]),zxe=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],Lxe={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],..._Se};function jxe(e){e=je(e);for(const t of zxe)delete e[t];if(e.axis)for(const t in e.axis)zm(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of bxe)delete e.legend[t];if(e.mark){for(const t of R4)delete e.mark[t];e.mark.tooltip&&xe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(aG(e.params)),delete e.params);for(const t of $xe){for(const r of R4)delete e[t][r];const n=Lxe[t];if(n)for(const r of n)delete e[t][r];Bxe(e,t)}for(const t of vxe())delete e[t];Uxe(e);for(const t in e)xe(e[t])&&Rt(e[t])&&delete e[t];return Rt(e)?void 0:e}function Uxe(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=FH(e.title);Rt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Rt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Rt(r)?delete e.title:e.title=r}function Bxe(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const o={...i,...e.style[n??t]};Rt(o)||(e.style[n??t]=o),delete e[t]}function VS(e){return ce(e,"layer")}function Vxe(e){return ce(e,"repeat")}function Hxe(e){return!ae(e.repeat)&&ce(e.repeat,"layer")}class gR{map(t,n){return PS(t)?this.mapFacet(t,n):Vxe(t)?this.mapRepeat(t,n):pR(t)?this.mapHConcat(t,n):BS(t)?this.mapVConcat(t,n):hR(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(VS(t))return this.mapLayer(t,n);if(Es(t))return this.mapUnit(t,n);throw new Error(IM(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(o=>this.map(o,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const qxe={zero:1,center:1,normalize:1};function Gxe(e){return _e(qxe,e)}const Yxe=new Set([pq,RS,MS,$1,NS,YM,WM,kS,gq,GM]),Wxe=new Set([RS,MS,pq]);function Pf(e){return he(e)&&Id(e)==="quantitative"&&!e.bin}function H4(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",o=t==="x"&&["bar","area"].includes(r),a=e[t],s=e[i];if(he(a)&&he(s))if(Pf(a)&&Pf(s)){if(a.stack)return t;if(s.stack)return i;const l=he(a)&&!!a.aggregate,u=he(s)&&!!s.aggregate;if(l!==u)return l?t:i;if(o){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(Pf(a))return t;if(Pf(s))return i}else{if(Pf(a))return o&&n==="vertical"?void 0:t;if(Pf(s))return o&&n==="horizontal"?void 0:i}}function Xxe(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function cG(e,t){const n=lo(e)?e:{type:e},r=n.type;if(!Yxe.has(r))return null;const i=H4(t,"x",n)||H4(t,"theta",n);if(!i)return null;const o=t[i],a=he(o)?be(o,{}):void 0,s=Xxe(i),l=[],u=new Set;if(t[s]){const v=t[s],b=he(v)?be(v,{}):void 0;b&&b!==a&&(l.push(s),u.add(b))}const f=s==="x"?"xOffset":"yOffset",d=t[f],p=he(d)?be(d,{}):void 0;p&&p!==a&&(l.push(f),u.add(p));const g=n1e.reduce((v,b)=>{if(b!=="tooltip"&&Xl(t,b)){const x=t[b];for(const _ of Se(x)){const T=ba(_);if(T.aggregate)continue;const A=be(T,{});(!A||!u.has(A))&&v.push({channel:b,fieldDef:T})}}return v},[]);let y;return o.stack!==void 0?Sc(o.stack)?y=o.stack?"zero":null:y=o.stack:Wxe.has(r)&&(y="zero"),!y||!Gxe(y)||Bq(t)&&g.length===0?null:(o?.scale?.type&&o?.scale?.type!==zn.LINEAR&&o?.stack&&fe(_be(o.scale.type)),Ue(t[_o(i)])?(o.stack!==void 0&&fe(xbe(i)),null):(he(o)&&o.aggregate&&!g1e.has(o.aggregate)&&fe(Ebe(o.aggregate)),{groupbyChannels:l,groupbyFields:u,fieldChannel:i,impute:o.impute===null?!1:el(r),stackBy:g,offset:y}))}function fG(e,t,n){const r=$n(e),i=Ct("orient",r,n);if(r.orient=Jxe(r.type,t,i),i!==void 0&&i!==r.orient&&fe(abe(r.orient,i)),r.type==="bar"&&r.orient){const l=Ct("cornerRadiusEnd",r,n);if(l!==void 0){const u=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:ASe[r.orient];for(const f of u)r[f]=l;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const o=Ct("opacity",r,n),a=Ct("fillOpacity",r,n);return o===void 0&&a===void 0&&(r.opacity=Zxe(r.type,t)),Ct("cursor",r,n)===void 0&&(r.cursor=Qxe(r,t,n)),r}function Qxe(e,t,n){return t.href||e.href||Ct("href",e,n)?"pointer":e.cursor}function Zxe(e,t){if(Je([NS,GM,YM,WM],e)&&!Bq(t))return .7}function Kxe(e,t,{graticule:n}){if(n)return!1;const r=uo("filled",e,t),i=e.type;return nn(r,i!==NS&&i!==kS&&i!==$1)}function Jxe(e,t,n){switch(e){case NS:case YM:case WM:case gq:case gSe:case pSe:return}const{x:r,y:i,x2:o,y2:a}=t;switch(e){case RS:if(he(r)&&(Pn(r.bin)||he(i)&&i.aggregate&&!r.aggregate))return"vertical";if(he(i)&&(Pn(i.bin)||he(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(a||o){if(n)return n;if(!o)return(he(r)&&r.type===pc&&!Nt(r.bin)||L1(r))&&he(i)&&Pn(i.bin)?"horizontal":"vertical";if(!a)return(he(i)&&i.type===pc&&!Nt(i.bin)||L1(i))&&he(r)&&Pn(r.bin)?"vertical":"horizontal"}case $1:if(o&&!(he(r)&&Pn(r.bin))&&a&&!(he(i)&&Pn(i.bin)))return;case MS:if(a)return he(i)&&Pn(i.bin)?"horizontal":"vertical";if(o)return he(r)&&Pn(r.bin)?"vertical":"horizontal";if(e===$1){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case kS:case GM:{const s=P4(r),l=P4(i);if(n)return n;if(s&&!l)return e!=="tick"?"horizontal":"vertical";if(!s&&l)return e!=="tick"?"vertical":"horizontal";if(s&&l)return"vertical";{const u=Ar(r)&&r.type===Dd,f=Ar(i)&&i.type===Dd;if(u&&!f)return"vertical";if(!u&&f)return"horizontal"}return}}return"vertical"}function e_e(e){const{point:t,line:n,...r}=e;return le(r).length>1?r:r.type}function t_e(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:fi(e[t],["point","line"])});return e}function Iw(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?xe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?xe(t.point)?t.point:{}:void 0}function q4(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class n_e{name="path-overlay";hasMatchingType(t,n){if(Es(t)){const{mark:r,encoding:i}=t,o=lo(r)?r:{type:r};switch(o.type){case"line":case"rule":case"trail":return!!Iw(o,n[o.type],i);case"area":return!!Iw(o,n[o.type],i)||!!q4(o,n[o.type])}}return!1}run(t,n,r){const{config:i}=n,{params:o,projection:a,mark:s,name:l,encoding:u,...f}=t,d=US(u,i),p=lo(s)?s:{type:s},g=Iw(p,i[p.type],d),y=p.type==="area"&&q4(p,i[p.type]),v=[{name:l,...o?{params:o}:{},mark:e_e({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:fi(d,["shape"])}],b=cG(fG(p,d,i),d);let x=d;if(b){const{fieldChannel:_,offset:T}=b;x={...d,[_]:{...d[_],...T?{stack:T}:{}}}}return x=fi(x,["y2","x2"]),y&&v.push({...a?{projection:a}:{},mark:{type:"line",...wd(p,["clip","interpolate","tension","tooltip"]),...y},encoding:x}),g&&v.push({...a?{projection:a}:{},mark:{type:"point",opacity:1,filled:!0,...wd(p,["clip","tooltip"]),...g},encoding:x}),r({...f,layer:v},{...n,config:t_e(i)})}}function r_e(e,t){return t?Nm(e)?hG(e,t):dG(e,t):e}function Mw(e,t){return t?hG(e,t):e}function XT(e,t,n){const r=t[e];if(LSe(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};fe(P1e(r.repeat));return}return t}function dG(e,t){if(e=XT("field",e,t),e!==void 0){if(e===null)return null;if(tR(e)&&ss(e.sort)){const n=XT("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function G4(e,t){if(he(e))return dG(e,t);{const n=XT("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Y4(e,t){if(Ue(e)){const n=G4(e,t);if(n)return n;if(Fm(e))return{condition:e.condition}}else{if(Pm(e)){const n=G4(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function hG(e,t){const n={};for(const r in e)if(ce(e,r)){const i=e[r];if(ae(i))n[r]=i.map(o=>Y4(o,t)).filter(o=>o);else{const o=Y4(i,t);o!==void 0&&(n[r]=o)}}return n}class i_e{name="RuleForRangedLine";hasMatchingType(t){if(Es(t)){const{encoding:n,mark:r}=t;if(r==="line"||lo(r)&&r.type==="line")for(const i of Jve){const o=Mc(i),a=n[o];if(n[i]&&(he(a)&&!Pn(a.bin)||wo(a)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:o}=t;return fe(ibe(!!i.x2,!!i.y2)),r({...t,mark:xe(o)?{...o,type:"rule"}:"rule"},n)}}class a_e extends gR{nonFacetUnitNormalizers=[sxe,cxe,yxe,new n_e,new i_e];map(t,n){if(Es(t)){const r=Xl(t.encoding,as),i=Xl(t.encoding,os),o=Xl(t.encoding,SS);if(r||i||o)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,o=Mw(t.encoding,n.repeater),a={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...o?{encoding:o}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(a,n);const s=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(a,n.config))return l.run(a,n,s);return a}mapRepeat(t,n){return Hxe(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...o}=t,{row:a,column:s,layer:l}=r,{repeater:u={},repeaterPrefix:f=""}=n;return a||s?this.mapRepeat({...t,repeat:{...a?{row:a}:{},...s?{column:s}:{}},spec:{repeat:{layer:l},spec:i}},n):{...o,layer:l.map(d=>{const p={...u,layer:d},g=`${(i.name?`${i.name}_`:"")+f}child__layer_${jt(d)}`,y=this.mapLayerOrUnit(i,{...n,repeater:p,repeaterPrefix:g});return y.name=g,y})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:o,...a}=t;!ae(r)&&t.columns&&(t=fi(t,["columns"]),fe(T4("repeat")));const s=[],{repeater:l={},repeaterPrefix:u=""}=n,f=!ae(r)&&r.row||[l?l.row:null],d=!ae(r)&&r.column||[l?l.column:null],p=ae(r)&&r||[l?l.repeat:null];for(const y of p)for(const v of f)for(const b of d){const x={repeat:y,row:v,column:b,layer:l.layer},_=`${(i.name?`${i.name}_`:"")+u}child__${ae(r)?`${jt(y)}`:(r.row?`row_${jt(v)}`:"")+(r.column?`column_${jt(b)}`:"")}`,T=this.map(i,{...n,repeater:x,repeaterPrefix:_});T.name=_,s.push(fi(T,["data"]))}const g=ae(r)?t.columns:r.column?r.column.length:1;return{data:i.data??o,align:"all",...a,columns:g,concat:s}}mapFacet(t,n){const{facet:r}=t;return Nm(r)&&t.columns&&(t=fi(t,["columns"]),fe(T4("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:o,parentProjection:a,config:s}=n,l=X4({parentProjection:a,projection:i}),u=W4({parentEncoding:o,encoding:Mw(r,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...u?{encoding:u}:{}},{config:s})}mapFacetedUnit(t,n){const{row:r,column:i,facet:o,...a}=t.encoding,{mark:s,width:l,projection:u,height:f,view:d,params:p,encoding:g,...y}=t,{facetMapping:v,layout:b}=this.getFacetMappingAndLayout({row:r,column:i,facet:o},n),x=Mw(a,n.repeater);return this.mapFacet({...y,...b,facet:v,spec:{...l?{width:l}:{},...f?{height:f}:{},...d?{view:d}:{},...u?{projection:u}:{},mark:s,encoding:x,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:o}=t;if(r||i){o&&fe(nbe([...r?[as]:[],...i?[os]:[]]));const a={},s={};for(const l of[as,os]){const u=t[l];if(u){const{align:f,center:d,spacing:p,columns:g,...y}=u;a[l]=y;for(const v of["align","center","spacing"])u[v]!==void 0&&(s[v]??={},s[v][l]=u[v])}}return{facetMapping:a,layout:s}}else{const{align:a,center:s,spacing:l,columns:u,...f}=o;return{facetMapping:r_e(f,n.repeater),layout:{...a?{align:a}:{},...s?{center:s}:{},...l?{spacing:l}:{},...u?{columns:u}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:o,projection:a,...s}=t,l={...i,parentEncoding:W4({parentEncoding:n,encoding:o,layer:!0}),parentProjection:X4({parentProjection:r,projection:a})};return super.mapLayer({...s,...t.name?{name:[l.repeaterPrefix,t.name].filter(u=>u).join("_")}:{}},l)}}function W4({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...le(e),...le(t)]);for(const o of i){const a=t[o],s=e[o];if(Ue(a)){const l={...s,...a};r[o]=l}else Pm(a)?r[o]={...a,condition:{...s,...a.condition}}:a||a===null?r[o]=a:(n||va(s)||Ce(s)||Ue(s)||ae(s))&&(r[o]=s)}}else r=t;return!r||Rt(r)?void 0:r}function X4(e){const{parentProjection:t,projection:n}=e;return t&&n&&fe(q1e({parentProjection:t,projection:n})),n??t}function mR(e){return ce(e,"filter")}function o_e(e){return ce(e,"stop")}function pG(e){return ce(e,"lookup")}function s_e(e){return ce(e,"data")}function u_e(e){return ce(e,"param")}function l_e(e){return ce(e,"pivot")}function c_e(e){return ce(e,"density")}function f_e(e){return ce(e,"quantile")}function d_e(e){return ce(e,"regression")}function h_e(e){return ce(e,"loess")}function p_e(e){return ce(e,"sample")}function g_e(e){return ce(e,"window")}function m_e(e){return ce(e,"joinaggregate")}function y_e(e){return ce(e,"flatten")}function v_e(e){return ce(e,"calculate")}function gG(e){return ce(e,"bin")}function b_e(e){return ce(e,"impute")}function S_e(e){return ce(e,"timeUnit")}function x_e(e){return ce(e,"aggregate")}function __e(e){return ce(e,"stack")}function E_e(e){return ce(e,"fold")}function w_e(e){return ce(e,"extent")&&!ce(e,"density")&&!ce(e,"regression")}function A_e(e){return e.map(t=>mR(t)?{filter:Jf(t.filter,Zbe)}:t)}class T_e extends gR{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=Q4(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Q4(t,n),t.encoding){const r={};for(const[i,o]of Pu(t.encoding))r[i]=mG(o,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Pu(r).map(([o,a])=>{const{init:s,bind:l,empty:u,...f}=a;f.type==="single"?(f.type="point",f.toggle=!1):f.type==="multi"&&(f.type="point"),n.emptySelections[o]=u!=="none";for(const d of un(n.selectionPredicates[o]??{}))d.empty=u!=="none";return{name:o,value:s,select:f,bind:l}})}:t}}function Q4(e,t){const{transform:n,...r}=e;if(n){const i=n.map(o=>{if(mR(o))return{filter:QT(o,t)};if(gG(o)&&Rc(o.bin))return{...o,bin:yG(o.bin)};if(pG(o)){const{selection:a,...s}=o.from;return a?{...o,from:{param:a,...s}}:o}return o});return{...r,transform:i}}return e}function mG(e,t){const n=je(e);if(he(n)&&Rc(n.bin)&&(n.bin=yG(n.bin)),Pc(n)&&n.scale?.domain?.selection){const{selection:r,...i}=n.scale.domain;n.scale.domain={...i,...r?{param:r}:{}}}if(Fm(n))if(ae(n.condition))n.condition=n.condition.map(r=>{const{selection:i,param:o,test:a,...s}=r;return o?r:{...s,test:QT(r,t)}});else{const{selection:r,param:i,test:o,...a}=mG(n.condition,t);n.condition=i?n.condition:{...a,test:QT(n.condition,t)}}return n}function yG(e){const t=e.extent;if(t?.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function QT(e,t){const n=r=>Jf(r,i=>{const o=t.emptySelections[i]??!0,a={param:i,empty:o};return t.selectionPredicates[i]??=[],t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):Jf(e.test||e.filter,r=>r.selection?n(r.selection):r)}class ZT extends gR{map(t,n){const r=n.selections??[];if(t.params&&!Es(t)){const i=[];for(const o of t.params)dR(o)?r.push(o):i.push(o);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),o=[];for(const a of r)if(!a.views||!a.views.length)o.push(a);else for(const s of a.views)(Ee(s)&&(s===t.name||i.includes(s))||ae(s)&&s.map(l=>i.indexOf(l)).every((l,u,f)=>l!==-1&&(u===0||l>f[u-1])))&&o.push(a);return o.length&&(t.params=o),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=ZT.prototype[e];ZT.prototype[e]=function(n,r){return t.call(this,n,C_e(n,r))}}function C_e(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function vG(e,t){t===void 0&&(t=lG(e.config));const n=M_e(e,t),{width:r,height:i}=e,o=R_e(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...o?{autosize:o}:{}}}const D_e=new a_e,O_e=new T_e,I_e=new ZT;function M_e(e,t={}){const n={config:t};return I_e.map(D_e.map(O_e.map(e,n),n),n)}function Z4(e){return Ee(e)?{type:e}:e??{}}function R_e(e,t,n){let{width:r,height:i}=t;const o=Es(e)||VS(e),a={};o?r=="container"&&i=="container"?(a.type="fit",a.contains="padding"):r=="container"?(a.type="fit-x",a.contains="padding"):i=="container"&&(a.type="fit-y",a.contains="padding"):(r=="container"&&(fe(_4("width")),r=void 0),i=="container"&&(fe(_4("height")),i=void 0));const s={type:"pad",...a,...n?Z4(n.autosize):{},...Z4(e.autosize)};if(s.type==="fit"&&!o&&(fe(A1e),s.type="pad"),r=="container"&&!(s.type=="fit"||s.type=="fit-x")&&fe(E4("width")),i=="container"&&!(s.type=="fit"||s.type=="fit-y")&&fe(E4("height")),!ui(s,{type:"pad"}))return s}function k_e(e){return["fit","fit-x","fit-y"].includes(e)}function N_e(e){return e?`fit-${AS(e)}`:"fit"}const F_e=["background","padding"];function K4(e,t){const n={};for(const r of F_e)e&&e[r]!==void 0&&(n[r]=ai(e[r]));return t&&(n.params=e.params),n}class ws{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new ws(je(this.explicit),je(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return nn(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of le(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Va(e){return{explicit:!0,value:e}}function ni(e){return{explicit:!1,value:e}}function bG(e){return(t,n,r,i)=>{const o=e(t.value,n.value);return o>0?t:o<0?n:HS(t,n,r,i)}}function HS(e,t,n,r){return e.explicit&&t.explicit&&fe(pbe(n,r,e.value,t.value)),e}function Lu(e,t,n,r,i=HS){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:ui(e.value,t.value)?e:i(e,t,n,r)}class P_e extends ws{explicit;implicit;parseNothing;constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function kd(e){return ce(e,"url")}function Vg(e){return ce(e,"values")}function SG(e){return ce(e,"name")&&!kd(e)&&!Vg(e)&&!Au(e)}function Au(e){return e&&(xG(e)||_G(e)||yR(e))}function xG(e){return ce(e,"sequence")}function _G(e){return ce(e,"sphere")}function yR(e){return ce(e,"graticule")}var qt;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(qt||(qt={}));function EG({invalid:e,isPath:t}){switch(vq(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function $_e(e){const{marks:t,scales:n}=EG(e);return t===n?qt.Main:n==="include-invalid-values"?qt.PreFilterInvalid:qt.PostFilterInvalid}class _t{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){fe(B1e);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Lr extends _t{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${bH()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function Rw(e){return e.as!==void 0}function J4(e){return`${e}_end`}class Ja extends _t{timeUnits;clone(){return new Ja(null,je(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{const{field:s,timeUnit:l}=o;if(l){let u;if(Fc(l)){if(Ht(n)){const{mark:f,markDef:d,config:p}=n,g=zu({fieldDef:o,markDef:d,config:p});(Bg(f)||g)&&(u={timeUnit:On(l),field:s})}}else u={as:be(o,{forAs:!0}),field:s,timeUnit:l};if(Ht(n)){const{mark:f,markDef:d,config:p}=n,g=zu({fieldDef:o,markDef:d,config:p});Bg(f)&&rn(a)&&g!==.5&&(u.rectBandPosition=g)}u&&(i[rt(u)]=u)}return i},{});return Rt(r)?null:new Ja(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},o=On(r),a={...i,timeUnit:o};return new Ja(t,{[rt(a)]:a})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Pu(this.timeUnits)){const o=Rw(i)?i.as:`${i.field}_end`;t.has(o)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(un(this.timeUnits).map(t=>Rw(t)?t.as:J4(t.field)))}dependentFields(){return new Set(un(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${rt(this.timeUnits)}`}assemble(){const t=[];for(const n of un(this.timeUnits)){const{rectBandPosition:r}=n,i=On(n.timeUnit);if(Rw(n)){const{field:o,as:a}=n,{unit:s,utc:l,...u}=i,f=[a,`${a}_end`];t.push({field:Hi(o),type:"timeunit",...s?{units:OS(s)}:{},...l?{timezone:"utc"}:{},...u,as:f}),t.push(...e9(f,r,i))}else if(n){const{field:o}=n,a=o.replaceAll("\\.","."),s=wG({timeUnit:i,field:a}),l=J4(a);t.push({type:"formula",expr:s,as:l}),t.push(...e9([a,l],r,i))}}return t}}const qS="offsetted_rect_start",GS="offsetted_rect_end";function wG({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,o=eq(r),{part:a,step:s}=iq(o,e.step);return`${i?"utcOffset":"timeOffset"}('${a}', ${St(t)}, ${n?-s:s})`}function e9([e,t],n,r){if(n!==void 0&&n!==.5){const i=St(e),o=St(t);return[{type:"formula",expr:t9([wG({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${qS}`},{type:"formula",expr:t9([i,o],n+.5),as:`${e}_${GS}`}]}return[]}function t9([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const Lm="_tuple_fields";class z_e{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const L_e={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??=new z_e,o={},a={},s=new Set,l=(y,v)=>{const b=v==="visual"?y.channel:y.field;let x=jt(`${r}_${b}`);for(let _=1;s.has(x);_++)x=jt(`${r}_${b}_${_}`);return s.add(x),{[v]:x}},u=t.type,f=e.config.selection[u],d=n.value!==void 0?Se(n.value):null;let{fields:p,encodings:g}=xe(n.select)?n.select:{};if(!p&&!g&&d){for(const y of d)if(xe(y))for(const v of le(y))Kve(v)?(g||(g=[])).push(v):u==="interval"?(fe(F1e),g=f.encodings):(p??=[]).push(v)}!p&&!g&&(g=f.encodings,"fields"in f&&(p=f.fields));for(const y of g??[]){const v=e.fieldDef(y);if(v){let b=v.field;if(v.aggregate){fe(T1e(y,v.aggregate));continue}else if(!b){fe(A4(y));continue}if(v.timeUnit&&!Fc(v.timeUnit)){b=e.vgField(y);const x={timeUnit:v.timeUnit,as:b,field:v.field};a[rt(x)]=x}if(!o[b]){const x=u==="interval"&&Eo(y)&&ya(e.getScaleComponent(y).get("type"))?"R":v.bin?"R-RE":"E",_={field:b,channel:y,type:x,index:i.items.length};_.signals={...l(_,"data"),...l(_,"visual")},i.items.push(o[b]=_),i.hasField[b]=o[b],i.hasSelectionId=i.hasSelectionId||b===Sa,AH(y)?(_.geoChannel=y,_.channel=wH(y),i.hasChannel[_.channel]=o[b]):i.hasChannel[y]=o[b]}}else fe(A4(y))}for(const y of p??[]){if(i.hasField[y])continue;const v={type:"E",field:y,index:i.items.length};v.signals={...l(v,"data")},i.items.push(v),i.hasField[y]=v,i.hasSelectionId=i.hasSelectionId||y===Sa}d&&(t.init=d.map(y=>i.items.map(v=>xe(y)?y[v.geoChannel||v.channel]!==void 0?y[v.geoChannel||v.channel]:y[v.field]:y))),Rt(a)||(i.timeUnit=new Ja(null,a))},signals:(e,t,n)=>{const r=t.name+Lm;return n.filter(o=>o.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(DG)})}},AG="_curr",gv="anim_value",jf="anim_clock",KT="eased_anim_clock",TG="min_extent",CG="max_range_extent",kw="last_tick_at",Nw="is_playing",j_e=1/60*1e3,U_e=(e,t)=>[{name:KT,update:jf},{name:`${e}_domain`,init:`domain('${t}')`},{name:TG,init:`extent(${e}_domain)[0]`},{name:CG,init:`extent(range('${t}'))[1]`},{name:gv,update:`invert('${t}', ${KT})`}],B_e={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(eo(t)&&(n=n.concat([{name:jf,init:"0",on:[{events:{type:"timer",throttle:j_e},update:`${Nw} ? (${jf} + (now() - ${kw}) > ${CG} ? 0 : ${jf} + (now() - ${kw})) : ${jf}`}]},{name:kw,init:"now()",on:[{events:[{signal:jf},{signal:Nw}],update:"now()"}]},{name:Nw,init:"true"}])),n),signals:(e,t,n)=>{const r=t.name,i=r+Lm,o=t.project,a="(item().isVoronoi ? datum.datum : datum)",s=un(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+nd):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${s?` && ${s}`:""}`;let u=`unit: ${Ql(e)}, `;if(t.project.hasSelectionId)u+=`${Sa}: ${a}[${pe(Sa)}]`;else if(eo(t))u+=`fields: ${i}, values: [${gv} ? ${gv} : ${TG}]`;else{const f=o.items.map(d=>e.fieldDef(d.channel)?.bin?`[${a}[${pe(e.vgField(d.channel,{}))}], ${a}[${pe(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${a}[${pe(d.field)}]`).join(", ");u+=`fields: ${i}, values: [${f}]`}if(eo(t))return n.concat(U_e(t.name,e.scaleName(Wu)),[{name:r+gs,on:[{events:[{signal:KT},{signal:gv}],update:`{${u}}`,force:!0}]}]);{const f=t.events;return n.concat([{name:r+gs,on:f?[{events:f,update:`${l} ? {${u}} : null`,force:!0}]:[]}])}}};function DG(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Hi(i.field),i}function yc(e,t=!0,n=ur){if(ae(e)){const r=e.map(i=>yc(i,t,n));return t?`[${r.join(", ")}]`:r}else if(Nc(e))return n(t?hc(e):Lbe(e));return t?n(yt(e)):e}function V_e(e,t){for(const n of un(e.component.selection??{})){const r=n.name;let i=`${r}${gs}, ${n.resolve==="global"?"true":`{unit: ${Ql(e)}}`}`;for(const o of WS)o.defined(n)&&(o.signals&&(t=o.signals(e,n,t)),o.modifyExpr&&(i=o.modifyExpr(e,n,i)));t.push({name:r+mEe,on:[{events:{signal:n.name+gs},update:`modify(${pe(n.name+vc)}, ${i})`}]})}return vR(t)}function H_e(e,t){if(e.component.selection&&le(e.component.selection).length){const n=pe(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Gu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return vR(t)}function q_e(e,t){let n=!1;for(const r of un(e.component.selection??{})){const i=r.name,o=pe(i+vc);if(t.filter(s=>s.name===i).length===0){const s=r.resolve==="global"?"union":r.resolve,l=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${qG}(${o}, ${pe(s)}${l}`})}n=!0;for(const s of WS)s.defined(r)&&s.topLevelSignals&&(t=s.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),vR(t)}function G_e(e,t){const n=[],r=[],i=Ql(e,{escape:!1});for(const o of un(e.component.selection??{})){const a={name:o.name+vc};if(o.project.hasSelectionId&&(a.transform=[{type:"collect",sort:{field:Sa}}]),o.init){const l=o.project.items.map(DG);a.values=o.project.hasSelectionId?o.init.map(u=>({unit:i,[Sa]:yc(u,!1)[0]})):o.init.map(u=>({unit:i,fields:l,values:yc(u,!1)}))}if([...n,...t].filter(l=>l.name===o.name+vc).length||n.push(a),eo(o)&&t.length){const l=e.lookupDataSource(e.getDataName(qt.Main)),u=t.find(d=>d.name===l),f=u.transform.find(d=>d.type==="filter"&&d.expr.includes("vlSelectionTest"));if(f){u.transform=u.transform.filter(p=>p!==f);const d={name:u.name+AG,source:u.name,transform:[f]};r.push(d)}}}return n.concat(t,r)}function OG(e,t){for(const n of un(e.component.selection??{}))for(const r of WS)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Y_e(e,t){for(const n of e.children)Ht(n)&&(t=OG(n,t));return t}function W_e(e,t,n,r){const i=QG(e,t.param,t);return{signal:ya(n.get("type"))&&ae(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function vR(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const us={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!Eo(i))continue;const o=e.getScaleComponent(i),a=o?o.get("type"):void 0;if(a=="sequential"&&fe(I1e),!o||!ya(a)){fe(O1e);continue}o.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(a=>n.filter(s=>s.name===a.signals.data).length===0);if(!e.parent||eC(e)||r.length===0)return n;const i=n.find(a=>a.name===t.name);let o=i.update;if(o.includes(qG))i.update=`{${r.map(a=>`${pe(Hi(a.field))}: ${a.signals.data}`).join(", ")}}`;else{for(const a of r){const s=`${pe(Hi(a.field))}: ${a.signals.data}`;o.includes(s)||(o=`${o.substring(0,o.length-1)}, ${s}}`)}i.update=o}return n.concat(r.map(a=>({name:a.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!eC(e))for(const r of t.scales){const i=n.find(o=>o.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function JT(e,t){return`domain(${pe(e.scaleName(t))})`}function eC(e){return e.parent&&lh(e.parent)&&(!e.parent.parent||eC(e.parent.parent))}const nd="_brush",IG="_scale_trigger",Cp="geo_interval_init_tick",MG="_init",X_e="_center",Q_e={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const r={...xe(n.select)?n.select:{}};r.fields=[Sa],r.encodings||(r.encodings=n.value?le(n.value):[Oa,Da]),n.select={type:"interval",...r}}if(t.translate&&!us.defined(t)){const r=`!event.item || event.item.mark.name !== ${pe(t.name+nd)}`;for(const i of t.events){if(!i.between){fe(`${i} is not an ordered event stream for interval selections.`);continue}const o=Se(i.between[0].filter??=[]);o.includes(r)||o.push(r)}}},signals:(e,t,n)=>{const r=t.name,i=r+gs,o=un(t.project.hasChannel).filter(s=>s.channel===Ut||s.channel===Rn),a=t.init?t.init[0]:null;if(n.push(...o.reduce((s,l)=>s.concat(Z_e(e,t,l,a?.[l.index])),[])),e.hasProjection){const s=pe(e.projectionName()),l=e.projectionName()+X_e,{x:u,y:f}=t.project.hasChannel,d=u?.signals.visual,p=f?.signals.visual,g=u?a?.[u.index]:`${l}[0]`,y=f?a?.[f.index]:`${l}[1]`,v=w=>e.getSizeSignalRef(w).signal,b=`[[${d?`${d}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${d?`${d}[1]`:v("width")}, ${p?`${p}[1]`:v("height")}]]`;a&&(n.unshift({name:r+MG,init:`[scale(${s}, [${u?g[0]:g}, ${f?y[0]:y}]), scale(${s}, [${u?g[1]:g}, ${f?y[1]:y}])]`}),(!u||!f)&&(n.find(C=>C.name===l)||n.unshift({name:l,update:`invert(${s}, [${v("width")}/2, ${v("height")}/2])`})));const x=`intersect(${b}, {markname: ${pe(e.getName("marks"))}}, unit.mark)`,_=`{unit: ${Ql(e)}}`,T=`vlSelectionTuples(${x}, ${_})`,A=o.map(w=>w.signals.visual);return n.concat({name:i,on:[{events:[...A.length?[{signal:A.join(" || ")}]:[],...a?[{signal:Cp}]:[]],update:T}]})}else{if(!us.defined(t)){const u=r+IG,f=o.map(d=>{const p=d.channel,{data:g,visual:y}=d.signals,v=pe(e.scaleName(p)),b=e.getScaleComponent(p).get("type"),x=ya(b)?"+":"";return`(!isArray(${g}) || (${x}invert(${v}, ${y})[0] === ${x}${g}[0] && ${x}invert(${v}, ${y})[1] === ${x}${g}[1]))`});f.length&&n.push({name:u,value:{},on:[{events:o.map(d=>({scale:e.scaleName(d.channel)})),update:`${f.join(" && ")} ? ${u} : {}`}]})}const s=o.map(u=>u.signals.data),l=`unit: ${Ql(e)}, fields: ${r+Lm}, values`;return n.concat({name:i,...a?{init:`{${l}: ${yc(a)}}`}:{},...s.length?{on:[{events:[{signal:s.join(" || ")}],update:`${s.join(" && ")} ? {${l}: [${s}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Ht(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===Cp).length||n.unshift({name:Cp,value:null,on:[{events:"timer{1}",update:`${Cp} === null ? {} : ${Cp}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:o}=t.project.hasChannel,a=i?.signals.visual,s=o?.signals.visual,l=`data(${pe(t.name+vc)})`;if(us.defined(t)||!i&&!o)return n;const u={x:i!==void 0?{signal:`${a}[0]`}:{value:0},y:o!==void 0?{signal:`${s}[0]`}:{value:0},x2:i!==void 0?{signal:`${a}[1]`}:{field:{group:"width"}},y2:o!==void 0?{signal:`${s}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const b of le(u))u[b]=[{test:`${l}.length && ${l}[0].unit === ${Ql(e)}`,...u[b]},{value:0}];const{fill:f,fillOpacity:d,cursor:p,...g}=t.mark,y=le(g).reduce((b,x)=>(b[x]=[{test:[i!==void 0&&`${a}[0] !== ${a}[1]`,o!==void 0&&`${s}[0] !== ${s}[1]`].filter(_=>_).join(" && "),value:g[x]},{value:null}],b),{}),v=p??(t.translate?"move":null);return[{name:`${r+nd}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:f},fillOpacity:{value:d}},update:u}},...n,{name:r+nd,type:"rect",clip:!0,encode:{enter:{...v?{cursor:{value:v}}:{},fill:{value:"transparent"}},update:{...u,...y}}}]}};function Z_e(e,t,n,r){const i=!e.hasProjection,o=n.channel,a=n.signals.visual,s=pe(i?e.scaleName(o):e.projectionName()),l=p=>`scale(${s}, ${p})`,u=e.getSizeSignalRef(o===Ut?"width":"height").signal,f=`${o}(unit)`,d=t.events.reduce((p,g)=>[...p,{events:g.between[0],update:`[${f}, ${f}]`},{events:g,update:`[${a}[0], clamp(${f}, 0, ${u})]`}],[]);if(i){const p=n.signals.data,g=us.defined(t),y=e.getScaleComponent(o),v=y?y.get("type"):void 0,b=r?{init:yc(r,!0,l)}:{value:[]};return d.push({events:{signal:t.name+IG},update:ya(v)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),g?[{name:p,on:[]}]:[{name:a,...b,on:d},{name:p,...r?{init:yc(r)}:{},on:[{events:{signal:a},update:`${a}[0] === ${a}[1] ? null : invert(${s}, ${a})`}]}]}else{const p=o===Ut?0:1,g=t.name+MG,y=r?{init:`[${g}[0][${p}], ${g}[1][${p}]]`}:{value:[]};return[{name:a,...y,on:d}]}}function ah({model:e,channelDef:t,vgChannel:n,invalidValueRef:r,mainRefFn:i}){const o=Fm(t)&&t.condition;let a=[];o&&(a=Se(o).map(u=>{const f=i(u);if(zSe(u)){const{param:d,empty:p}=u;return{test:XG(e,{param:d,empty:p}),...f}}else return{test:Y1(e,u.test),...f}})),r!==void 0&&a.push(r);const s=i(t);return s!==void 0&&a.push(s),a.length>1||a.length===1&&a[0].test?{[n]:a}:a.length===1?{[n]:a[0]}:{}}function bR(e,t="text"){const n=e.encoding[t];return ah({model:e,channelDef:n,vgChannel:t,mainRefFn:r=>YS(r,e.config),invalidValueRef:void 0})}function YS(e,t,n="datum"){if(e){if(va(e))return Pt(e.value);if(Ue(e)){const{format:r,formatType:i}=U1(e);return JM({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function RG(e,t={}){const{encoding:n,markDef:r,config:i,stack:o}=e,a=n.tooltip;if(ae(a))return{tooltip:n9({tooltip:a},o,i,t)};{const s=t.reactiveGeom?"datum.datum":"datum";return ah({model:e,channelDef:a,vgChannel:"tooltip",mainRefFn:u=>{const f=YS(u,i,s);if(f)return f;if(u===null)return;let d=Ct("tooltip",r,i);if(d===!0&&(d={content:"encoding"}),Ee(d))return{value:d};if(xe(d))return Ce(d)?d:d.content==="encoding"?n9(n,o,i,t):{signal:s}},invalidValueRef:void 0})}}function kG(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},o=new Set,a=r?"datum.datum":"datum",s=[];function l(f,d){const p=Mc(d),g=Ar(f)?f:{...f,type:e[p].type},y=g.title||rR(g,i),v=Se(y).join(", ").replaceAll(/"/g,'\\"');let b;if(rn(d)){const x=d==="x"?"x2":"y2",_=ba(e[x]);if(Pn(g.bin)&&_){const T=be(g,{expr:a}),A=be(_,{expr:a}),{format:w,formatType:C}=U1(g);b=km(T,A,w,C,i),o.add(x)}}if((rn(d)||d===Yi||d===Ca)&&t&&t.fieldChannel===d&&t.offset==="normalize"){const{format:x,formatType:_}=U1(g);b=JM({fieldOrDatumDef:g,format:x,formatType:_,expr:a,config:i,normalizeStack:!0}).signal}b??=YS(g,i,a).signal,s.push({channel:d,key:v,value:b})}aR(e,(f,d)=>{he(f)?l(f,d):$S(f)&&l(f.condition,d)});const u={};for(const{channel:f,key:d,value:p}of s)!o.has(f)&&!u[d]&&(u[d]=p);return u}function n9(e,t,n,{reactiveGeom:r}={}){const i=kG(e,t,n,{reactiveGeom:r}),o=Pu(i).map(([a,s])=>`"${a}": ${s}`);return o.length>0?{signal:`{${o.join(", ")}}`}:void 0}function K_e(e){const{markDef:t,config:n}=e,r=Ct("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...J_e(e),...eEe(e)}}function J_e(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Ct("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:_e(x1e,t)?{}:{ariaRoleDescription:{value:t}}}function eEe(e){const{encoding:t,markDef:n,config:r,stack:i}=e,o=t.description;if(o)return ah({model:e,channelDef:o,vgChannel:"description",mainRefFn:l=>YS(l,e.config),invalidValueRef:void 0});const a=Ct("description",n,r);if(a!=null)return{description:Pt(a)};if(r.aria===!1)return{};const s=kG(t,i,r);if(!Rt(s))return{description:{signal:Pu(s).map(([l,u],f)=>`"${f>0?"; ":""}${l}: " + (${u})`).join(" + ")}}}function Ln(e,t,n={}){const{markDef:r,encoding:i,config:o}=t,{vgChannel:a}=n;let{defaultRef:s,defaultValue:l}=n;const u=i[e];s===void 0&&(l??=Ct(e,r,o,{vgChannel:a,ignoreVgConfig:!Fm(u)}),l!==void 0&&(s=Pt(l)));const f={markDef:r,config:o,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},d=Sq({...f,scaleChannel:e,channelDef:u});return ah({model:t,channelDef:u,vgChannel:a??e,invalidValueRef:d,mainRefFn:g=>KM({...f,channel:e,channelDef:g,stack:null,defaultRef:s})})}function NG(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:o}=n,a=t.filled??Ct("filled",n,i),s=Je(["bar","point","circle","square","geoshape"],o)?"transparent":void 0,l=Ct(a===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[a===!0&&"color"]??s,u=Ct(a===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[a===!1&&"color"],f=a?"fill":"stroke",d={...l?{fill:Pt(l)}:{},...u?{stroke:Pt(u)}:{}};return n.color&&(a?n.fill:n.stroke)&&fe(qH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...d,...Ln("color",e,{vgChannel:f,defaultValue:a?l:u}),...Ln("fill",e,{defaultValue:r.fill?l:void 0}),...Ln("stroke",e,{defaultValue:r.stroke?u:void 0})}}function tEe(e){const{encoding:t,mark:n}=e,r=t.order;return!el(n)&&va(r)?ah({model:e,channelDef:r,vgChannel:"zindex",mainRefFn:i=>Pt(i.value),invalidValueRef:void 0}):{}}function Nd({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const o=`${e}Offset`,a=t[o],s=n[o];if((o==="xOffset"||o==="yOffset")&&s)return{offsetType:"encoding",offset:KM({channel:o,channelDef:s,markDef:t,config:r?.config,scaleName:r.scaleName(o),scale:r.getScaleComponent(o),stack:null,defaultRef:Pt(a),bandPosition:i})};const l=t[o];return l?{offsetType:"visual",offset:l}:{}}function Sr(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:o,config:a,stack:s}=t,l=i[e],u=i[_o(e)],f=t.scaleName(e),d=t.getScaleComponent(e),{offset:p,offsetType:g}=Nd({channel:e,markDef:o,encoding:i,model:t,bandPosition:.5}),y=SR({model:t,defaultPos:n,channel:e,scaleName:f,scale:d}),v=!l&&rn(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:nEe({channel:e,channelDef:l,channel2Def:u,markDef:o,config:a,scaleName:f,scale:d,stack:s,offset:p,defaultRef:y,bandPosition:g==="encoding"?0:void 0});return v?{[r||e]:v}:void 0}function nEe(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:o,markDef:a}=e;if(Ue(n)&&i&&t===i.fieldChannel){if(he(n)){let s=n.bandPosition;if(s===void 0&&a.type==="text"&&(t==="radius"||t==="theta")&&(s=.5),s!==void 0)return z1({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:s,offset:o})}return Wl(n,r,{suffix:"end"},{offset:o})}return ZM(e)}function SR({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:o,config:a}=e;return()=>{const s=Mc(n),l=$u(n),u=Ct(n,o,a,{vgChannel:l});if(u!==void 0)return pg(n,u);switch(t){case"zeroOrMin":return r9({scaleName:r,scale:i,mode:"zeroOrMin",mainChannel:s,config:a});case"zeroOrMax":return r9({scaleName:r,scale:i,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:s,config:a});case"mid":return{...e[qr(n)],mult:.5}}}}function r9({mainChannel:e,config:t,...n}){const r=bq(n),{mode:i}=n;if(r)return r;switch(e){case"radius":{if(i==="zeroOrMin")return{value:0};const{widthSignal:o,heightSignal:a}=i.zeroOrMax;return{signal:`min(${o},${a})/2`}}case"theta":return i==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return i==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return i==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const rEe={left:"x",center:"xc",right:"x2"},iEe={top:"y",middle:"yc",bottom:"y2"};function FG(e,t,n,r="middle"){if(e==="radius"||e==="theta")return $u(e);const i=e==="x"?"align":"baseline",o=Ct(i,t,n);let a;return Ce(o)?(fe(rbe(i)),a=void 0):a=o,e==="x"?rEe[a||(r==="top"?"left":"center")]:iEe[a||r]}function q1(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?PG(e,t,{defaultPos:n,defaultPos2:r}):Sr(e,t,{defaultPos:n})}function PG(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:o}=t,a=_o(e),s=qr(e),l=aEe(t,r,a),u=l[s]?FG(e,i,o):$u(e);return{...Sr(e,t,{defaultPos:n,vgChannel:u}),...l}}function aEe(e,t,n){const{encoding:r,mark:i,markDef:o,stack:a,config:s}=e,l=Mc(n),u=qr(n),f=$u(n),d=r[l],p=e.scaleName(l),g=e.getScaleComponent(l),{offset:y}=n in r||n in o?Nd({channel:n,markDef:o,encoding:r,model:e}):Nd({channel:l,markDef:o,encoding:r,model:e});if(!d&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const b=qr(n),x=e.markDef[b];return x!=null?{[b]:{value:x}}:{[f]:{field:e.getName(n)}}}const v=oEe({channel:n,channelDef:d,channel2Def:r[n],markDef:o,config:s,scaleName:p,scale:g,stack:a,offset:y,defaultRef:void 0});return v!==void 0?{[f]:v}:k0(n,o)||k0(n,{[n]:UT(n,o,s.style),[u]:UT(u,o,s.style)})||k0(n,s[i])||k0(n,s.mark)||{[f]:SR({model:e,defaultPos:t,channel:n,scaleName:p,scale:g})()}}function oEe({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:o,scale:a,stack:s,offset:l,defaultRef:u}){return Ue(t)&&s&&e.charAt(0)===s.fieldChannel.charAt(0)?Wl(t,o,{suffix:"start"},{offset:l}):ZM({channel:e,channelDef:n,scaleName:o,scale:a,stack:s,markDef:r,config:i,offset:l,defaultRef:u})}function k0(e,t){const n=qr(e),r=$u(e);if(t[r]!==void 0)return{[r]:pg(e,t[r])};if(t[e]!==void 0)return{[r]:pg(e,t[e])};if(t[n]){const i=t[n];if(gc(i))fe(Z1e(n));else return{[n]:pg(e,i)}}}function ps(e,t){const{config:n,encoding:r,markDef:i}=e,o=i.type,a=_o(t),s=qr(t),l=r[t],u=r[a],f=e.getScaleComponent(t),d=f?f.get("type"):void 0,p=i.orient,g=r[s]??r.size??Ct("size",i,n,{vgChannel:s}),y=OH(t),v=o==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||o==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return he(l)&&(Nt(l.bin)||Pn(l.bin)||l.timeUnit&&!u)&&!(g&&!gc(g))&&!r[y]&&!In(d)?lEe({fieldDef:l,fieldDef2:u,channel:t,model:e}):(Ue(l)&&In(d)||v)&&!u?uEe(l,t,e):PG(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function sEe(e,t,n,r,i,o,a){if(gc(i))if(n){const l=n.get("type");if(l==="band"){let u=`bandwidth('${t}')`;i.band!==1&&(u=`${i.band} * ${u}`);const f=uo("minBandSize",{type:a},r);return{signal:f?`max(${ca(f)}, ${u})`:u}}else i.band!==1&&(fe(sbe(l)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Ce(i))return i;if(i)return{value:i}}if(n){const l=n.get("range");if(kc(l)&&ct(l.step))return{value:l.step-2}}if(!o){const{bandPaddingInner:l,barBandPaddingInner:u,rectBandPaddingInner:f,tickBandPaddingInner:d}=r.scale,p=nn(l,a==="tick"?d:a==="bar"?u:f);if(Ce(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(ct(p))return{signal:`${1-p} * ${e}`}}return{value:WT(r.view,e)-2}}function uEe(e,t,n){const{markDef:r,encoding:i,config:o,stack:a}=n,s=r.orient,l=n.scaleName(t),u=n.getScaleComponent(t),f=qr(t),d=_o(t),p=OH(t),g=n.scaleName(p),y=n.getScaleComponent(wM(t)),v=r.type==="tick"||s==="horizontal"&&t==="y"||s==="vertical"&&t==="x";let b;(i.size||r.size)&&(v?b=Ln("size",n,{vgChannel:f,defaultRef:Pt(r.size)}):fe(fbe(r.type)));const x=!!b,_=Cq({channel:t,fieldDef:e,markDef:r,config:o,scaleType:(u||y)?.get("type"),useVlSizeChannel:v});b=b||{[f]:sEe(f,g||l,y||u,o,_,!!e,r.type)};const T=(u||y)?.get("type")==="band"&&gc(_)&&!x?"top":"middle",A=FG(t,r,o,T),w=A==="xc"||A==="yc",{offset:C,offsetType:D}=Nd({channel:t,markDef:r,encoding:i,model:n,bandPosition:w?.5:0}),I=ZM({channel:t,channelDef:e,markDef:r,config:o,scaleName:l,scale:u,stack:a,offset:C,defaultRef:SR({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:u}),bandPosition:w?D==="encoding"?0:.5:Ce(_)?{signal:`(1-${_})/2`}:gc(_)?(1-_.band)/2:0});if(f)return{[A]:I,...b};{const M=$u(d),k=b[f],R=C?{...k,offset:C}:k;return{[A]:I,[M]:ae(I)?[I[0],{...I[1],offset:R}]:{...I,offset:R}}}}function i9(e,t,n,r,i,o,a){if(EH(e))return 0;const s=e==="x"||e==="y2",l=s?-t/2:t/2;if(Ce(n)||Ce(i)||Ce(r)||o){const u=ca(n),f=ca(i),d=ca(r),p=ca(o),y=o?`(${a} < ${p} ? ${s?"":"-"}0.5 * (${p} - (${a})) : ${l})`:l,v=d?`${d} + `:"",b=u?`(${u} ? -1 : 1) * `:"",x=f?`(${f} + ${y})`:y;return{signal:v+b+x}}else return i=i||0,r+(n?-i-l:+i+l)}function lEe({fieldDef:e,fieldDef2:t,channel:n,model:r}){const{config:i,markDef:o,encoding:a}=r,s=r.getScaleComponent(n),l=r.scaleName(n),u=s?s.get("type"):void 0,f=s.get("reverse"),d=Cq({channel:n,fieldDef:e,markDef:o,config:i,scaleType:u}),g=r.component.axes[n]?.[0]?.get("translate")??.5,y=rn(n)?Ct("binSpacing",o,i)??0:0,v=_o(n),b=$u(n),x=$u(v),_=uo("minBandSize",o,i),{offset:T}=Nd({channel:n,markDef:o,encoding:a,model:r,bandPosition:0}),{offset:A}=Nd({channel:v,markDef:o,encoding:a,model:r,bandPosition:0}),w=kSe({fieldDef:e,scaleName:l}),C=i9(n,y,f,g,T,_,w),D=i9(v,y,f,g,A??T,_,w),I=Ce(d)?{signal:`(1-${d.signal})/2`}:gc(d)?(1-d.band)/2:.5,M=zu({fieldDef:e,fieldDef2:t,markDef:o,config:i});if(Nt(e.bin)||e.timeUnit){const k=e.timeUnit&&M!==.5;return{[x]:a9({fieldDef:e,scaleName:l,bandPosition:I,offset:D,useRectOffsetField:k}),[b]:a9({fieldDef:e,scaleName:l,bandPosition:Ce(I)?{signal:`1-${I.signal}`}:1-I,offset:C,useRectOffsetField:k})}}else if(Pn(e.bin)){const k=Wl(e,l,{},{offset:D});if(he(t))return{[x]:k,[b]:Wl(t,l,{},{offset:C})};if(Rc(e.bin)&&e.bin.step)return{[x]:k,[b]:{signal:`scale("${l}", ${be(e,{expr:"datum"})} + ${e.bin.step})`,offset:C}}}fe(WH(v))}function a9({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return z1({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:qS,endSuffix:GS}:{}})}const cEe=new Set(["aria","width","height"]);function Wi(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?NG(e):{};return{...fEe(e.markDef,t),...o9("fill",n),...o9("stroke",r),...Ln("opacity",e),...Ln("fillOpacity",e),...Ln("strokeOpacity",e),...Ln("strokeWidth",e),...Ln("strokeDash",e),...tEe(e),...RG(e),...bR(e,"href"),...K_e(e)}}function o9(e,t){return t?{[e]:t}:{}}function fEe(e,t){return S1e.reduce((n,r)=>(!cEe.has(r)&&ce(e,r)&&t[r]!=="ignore"&&(n[r]=Pt(e[r])),n),{})}function xR(e){const{config:t,markDef:n}=e,r=new Set;if(e.forEachFieldDef((i,o)=>{let a;if(!Eo(o)||!(a=e.getScaleType(o)))return;const s=TS(i.aggregate),l=QM({scaleChannel:o,markDef:n,config:t,scaleType:a,isCountAggregate:s});if(ISe(l)){const u=e.vgField(o,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});u&&r.add(u)}}),r.size>0)return{defined:{signal:[...r].map(o=>IS(o,!0)).join(" && ")}}}function s9(e,t){if(t!==void 0)return{[e]:Pt(t)}}const Fw="voronoi",$G={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(Fw)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,o=e.mark;if(el(o))return fe(C1e(o)),n;const a={name:e.getName(Fw),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...RG(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let s=0,l=!1;return n.forEach((u,f)=>{const d=u.name??"";d===e.component.mark[0].name?s=f:d.includes(Fw)&&(l=!0)}),l||n.splice(s+1,0,a),n}},zG={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!fR(e.bind),parse:(e,t,n)=>GG(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,o=t.bind,a=t.init?.[0],s=$G.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((l,u)=>{const f=jt(`${r}_${l.field}`);n.filter(p=>p.name===f).length||n.unshift({name:f,...a?{init:yc(a[u])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${s}[${pe(l.field)}] : null`}]:[],bind:o[l.field]??o[l.channel]??o})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(u=>u.name===r+gs),a=r+Lm,s=i.items.map(u=>jt(`${r}_${u.field}`)),l=s.map(u=>`${u} !== null`).join(" && ");return s.length&&(o.update=`${l} ? {fields: ${a}, values: [${s.join(", ")}]} : null`),delete o.value,delete o.on,n}},G1="_toggle",LG={defined:e=>e.type==="point"&&!eo(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+G1,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+gs,r=t.name+G1;return`${r} ? null : ${n}, ${t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${Ql(e)}}, `}${r} ? ${n} : null`}},dEe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!eo(e),parse:(e,t)=>{t.clear&&(t.clear=Ee(t.clear)?Gu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(zG.defined(t))for(const r of t.project.items){const i=n.findIndex(o=>o.name===jt(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,o){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:o})}if(t.type==="interval")for(const i of t.project.items){const o=n.findIndex(a=>a.name===i.signals.visual);if(r(o,"[0, 0]"),o===-1){const a=n.findIndex(s=>s.name===i.signals.data);r(a,"null")}}else{let i=n.findIndex(o=>o.name===t.name+gs);r(i,"null"),LG.defined(t)&&(i=n.findIndex(o=>o.name===t.name+G1),r(i,"false"))}return n}},jG={defined:e=>{const t=e.resolve==="global"&&e.bind&&fR(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==Sa;return t&&!n&&fe(M1e),t&&n},parse:(e,t,n)=>{const r=je(n);if(r.select=Ee(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},GG(t,r),xe(n.select)&&(n.select.on||n.select.clear)){const a='event.item && indexof(event.item.mark.role, "legend") < 0';for(const s of t.events)s.filter=Se(s.filter??[]),s.filter.includes(a)||s.filter.push(a)}const i=Ow(t.bind)?t.bind.legend:"click",o=Ee(i)?Gu(i,"view"):Se(i);t.bind={legend:{merge:o}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=Ow(t.bind)&&t.bind.legend,o=a=>s=>{const l=je(s);return l.markname=a,l};for(const a of t.project.items){if(!a.hasLegend)continue;const s=`${jt(a.field)}_legend`,l=`${r}_${s}`;if(n.filter(f=>f.name===l).length===0){const f=i.merge.map(o(`${s}_symbols`)).concat(i.merge.map(o(`${s}_labels`))).concat(i.merge.map(o(`${s}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:f,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,o=n.find(p=>p.name===r+gs),a=r+Lm,s=i.items.filter(p=>p.hasLegend).map(p=>jt(`${r}_${jt(p.field)}_legend`)),u=`${s.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${a}, values: [${s.join(", ")}]} : null`;t.events&&s.length>0?o.on.push({events:s.map(p=>({signal:p})),update:u}):s.length>0&&(o.update=u,delete o.value,delete o.on);const f=n.find(p=>p.name===r+G1),d=Ow(t.bind)&&t.bind.legend;return f&&(t.events?f.on.push({...f.on[0],events:d}):f.on[0].events=d),n}};function hEe(e,t,n){const r=e.fieldDef(t)?.field;for(const i of un(e.component.selection??{})){const o=i.project.hasField[r]??i.project.hasChannel[t];if(o&&jG.defined(i)){const a=n.get("selections")??[];a.push(i.name),n.set("selections",a,!1),o.hasLegend=!0}}}const UG="_translate_anchor",BG="_translate_delta",pEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=us.defined(t),o=r+UG,{x:a,y:s}=t.project.hasChannel;let l=Gu(t.translate,"scope");return i||(l=l.map(u=>(u.between[0].markname=r+nd,u))),n.push({name:o,value:{},on:[{events:l.map(u=>u.between[0]),update:`{x: x(unit), y: y(unit)${a!==void 0?`, extent_x: ${i?JT(e,Ut):`slice(${a.signals.visual})`}`:""}${s!==void 0?`, extent_y: ${i?JT(e,Rn):`slice(${s.signals.visual})`}`:""}}`}]},{name:r+BG,value:{},on:[{events:l,update:`{x: ${o}.x - x(unit), y: ${o}.y - y(unit)}`}]}),a!==void 0&&u9(e,t,a,"width",n),s!==void 0&&u9(e,t,s,"height",n),n}};function u9(e,t,n,r,i){const o=t.name,a=o+UG,s=o+BG,l=n.channel,u=us.defined(t),f=i.find(w=>w.name===n.signals[u?"data":"visual"]),d=e.getSizeSignalRef(r).signal,p=e.getScaleComponent(l),g=p?.get("type"),y=p?.get("reverse"),v=u?l===Ut?y?"":"-":y?"-":"":"",b=`${a}.extent_${l}`,x=`${v}${s}.${l} / ${u?`${d}`:`span(${b})`}`,_=!u||!p?"panLinear":g==="log"?"panLog":g==="symlog"?"panSymlog":g==="pow"?"panPow":"panLinear",T=u?g==="pow"?`, ${p.get("exponent")??1}`:g==="symlog"?`, ${p.get("constant")??1}`:"":"",A=`${_}(${b}, ${x}${T})`;f.on.push({events:{signal:s},update:u?A:`clampRange(${A}, 0, ${d})`})}const VG="_zoom_anchor",HG="_zoom_delta",gEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=us.defined(t),o=r+HG,{x:a,y:s}=t.project.hasChannel,l=pe(e.scaleName(Ut)),u=pe(e.scaleName(Rn));let f=Gu(t.zoom,"scope");return i||(f=f.map(d=>(d.markname=r+nd,d))),n.push({name:r+VG,on:[{events:f,update:i?`{${[l?`x: invert(${l}, x(unit))`:"",u?`y: invert(${u}, y(unit))`:""].filter(d=>d).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:o,on:[{events:f,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),a!==void 0&&l9(e,t,a,"width",n),s!==void 0&&l9(e,t,s,"height",n),n}};function l9(e,t,n,r,i){const o=t.name,a=n.channel,s=us.defined(t),l=i.find(_=>_.name===n.signals[s?"data":"visual"]),u=e.getSizeSignalRef(r).signal,f=e.getScaleComponent(a),d=f?.get("type"),p=s?JT(e,a):l.name,g=o+HG,y=`${o}${VG}.${a}`,v=!s||!f?"zoomLinear":d==="log"?"zoomLog":d==="symlog"?"zoomSymlog":d==="pow"?"zoomPow":"zoomLinear",b=s?d==="pow"?`, ${f.get("exponent")??1}`:d==="symlog"?`, ${f.get("constant")??1}`:"":"",x=`${v}(${p}, ${y}, ${g}${b})`;l.on.push({events:{signal:g},update:s?x:`clampRange(${x}, 0, ${u})`})}const vc="_store",gs="_tuple",mEe="_modify",qG="vlSelectionResolve",WS=[B_e,Q_e,L_e,LG,zG,us,jG,dEe,pEe,gEe,$G];function yEe(e){let t=e.parent;for(;t&&!di(t);)t=t.parent;return t}function Ql(e,{escape:t}={escape:!0}){let n=t?pe(e.name):e.name;const r=yEe(e);if(r){const{facet:i}=r;for(const o of Pi)i[o]&&(n+=` + '__facet_${o}_' + (facet[${pe(r.vgField(o))}])`)}return n}function _R(e){return un(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function GG(e,t){(Ee(t.select)||!t.select.on)&&delete e.events,(Ee(t.select)||!t.select.clear)&&delete e.clear,(Ee(t.select)||!t.select.toggle)&&delete e.toggle}function eo(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function tC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...tC(e.object)),t.push(...tC(e.property))),t)}function YG(e){return e.object.type==="MemberExpression"?YG(e.object):e.object.name==="datum"}function WG(e){const t=UI(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&YG(r)&&n.add(tC(r).slice(1).join("."))}),n}class oh extends _t{model;filter;expr;_dependentFields;clone(){return new oh(null,this.model,je(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=Y1(this.model,this.filter,this),this._dependentFields=WG(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function vEe(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;let i=0;for(const o of t){const a=jt(o.name),s=o.select,l=Ee(s)?s:s.type,u=xe(s)?je(s):{type:l},f=r[l];for(const g in f)g==="fields"||g==="encodings"||(g==="mark"&&(u.mark={...f.mark,...u.mark}),(u[g]===void 0||u[g]===!0)&&(u[g]=je(f[g]??u[g])));const d=n[a]={...u,name:a,type:l,init:o.value,bind:o.bind,events:Ee(u.on)?Gu(u.on,"scope"):Se(je(u.on))};if(eo(d)&&(i++,i>1)){delete n[a];continue}const p=je(o);for(const g of WS)g.defined(d)&&g.parse&&g.parse(e,d,p)}return i>1&&fe($1e),n}function XG(e,t,n,r="datum"){const i=Ee(t)?t:t.param,o=jt(i),a=pe(o+vc);let s;try{s=e.getSelectionComponent(o,i)}catch{return`!!${o}`}if(s.project.timeUnit){const p=n??e.component.data.raw,g=s.project.timeUnit.clone();p.parent?g.insertAsParentOf(p):p.parent=g}const l=s.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",u=s.resolve==="global"?")":`, ${pe(s.resolve)})`,f=`${l}${a}, ${r}${u}`,d=`length(data(${a}))`;return t.empty===!1?`${d} && ${f}`:`!${d} || ${f}`}function QG(e,t,n){const r=jt(t),i=n.encoding;let o=n.field,a;try{a=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!o)o=a.project.items[0].field,a.project.items.length>1&&fe(z1e(o));else if(i&&!o){const s=a.project.items.filter(l=>l.channel===i);!s.length||s.length>1?(o=a.project.items[0].field,fe(L1e(s,i,n,o))):o=s[0].field}return`${a.name}[${pe(Hi(o))}]`}function bEe(e,t){for(const[n,r]of Pu(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Lr(new oh(t,e,{param:n}),i,qt.Lookup,e.component.data.outputNodeRefCounts)}}function Y1(e,t,n){return hg(t,r=>Ee(r)?r:Wbe(r)?XG(e,r,n):oq(r))}function SEe(e,t){if(e)return ae(e)&&!su(e)?e.map(n=>rR(n,t)).join(", "):e}function Pw(e,t,n,r){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=r}function Jp(e,t,n,r={header:!1}){const{disable:i,orient:o,scale:a,labelExpr:s,title:l,zindex:u,...f}=e.combine();if(!i){for(const d in f){const p=d,g=KSe[p],y=f[p];if(g&&g!==t&&g!=="both")delete f[p];else if(zm(y)){const{condition:v,...b}=y,x=Se(v),_=$4[p];if(_){const{vgProp:T,part:A}=_,w=[...x.map(C=>{const{test:D,...I}=C;return{test:Y1(null,D),...I}}),b];Pw(f,A,T,w),delete f[p]}else if(_===null){const T={signal:x.map(A=>{const{test:w,...C}=A;return`${Y1(null,w)} ? ${x4(C)} : `}).join("")+x4(b)};f[p]=T}}else if(Ce(y)){const v=$4[p];if(v){const{vgProp:b,part:x}=v;Pw(f,x,b,y),delete f[p]}}Je(["labelAlign","labelBaseline"],p)&&f[p]===null&&delete f[p]}if(t==="grid"){if(!f.grid)return;if(f.encode){const{grid:d}=f.encode;f.encode={...d?{grid:d}:{}},Rt(f.encode)&&delete f.encode}return{scale:a,orient:o,...f,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:nn(u,0)}}else{if(!r.header&&e.mainExtracted)return;if(s!==void 0){let p=s;f.encode?.labels?.update&&Ce(f.encode.labels.update.text)&&(p=cc(s,"datum.label",f.encode.labels.update.text.signal)),Pw(f,"labels","text",{signal:p})}if(f.labelAlign===null&&delete f.labelAlign,f.encode){for(const p of $q)e.hasAxisPart(p)||delete f.encode[p];Rt(f.encode)&&delete f.encode}const d=SEe(l,n);return{scale:a,orient:o,grid:!1,...d?{title:d}:{},...f,...n.aria===!1?{aria:!1}:{},zindex:nn(u,0)}}}}function ZG(e){const{axes:t}=e.component,n=[];for(const r of _s)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const o=r==="x"?"height":"width",a=e.getSizeSignalRef(o).signal;o!==a&&n.push({name:o,update:a})}}return n}function xEe(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Jp(i,"grid",t)),...r.map(i=>Jp(i,"grid",t)),...n.map(i=>Jp(i,"main",t)),...r.map(i=>Jp(i,"main",t))].filter(i=>i)}function c9(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const o=n==="x"?"bottom":"left",a=t[n==="x"?"axisBottom":"axisLeft"]||{},s=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...le(a),...le(s)]),u={};for(const f of l.values())u[f]={signal:`${r.signal} === "${o}" ? ${ca(a[f])} : ${ca(s[f])}`};return u}return t[i]})])}function _Ee(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:cq(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],o=e==="x"?"axisX":"axisY",a=Ce(n)?"axisOrient":`axis${Cm(n)}`,s=[...i,...i.map(u=>o+u.substr(4))],l=["axis",a,o];return{vlOnlyAxisConfig:c9(s,r,e,n),vgAxisConfig:c9(l,r,e,n),axisConfigStyle:EEe([...l,...s],r)}}function EEe(e,t){const n=[{}];for(const r of e){let i=t[r]?.style;if(i){i=Se(i);for(const o of i)n.push(t.style[o])}}return Object.assign.apply(null,n)}function nC(e,t,n,r={}){const i=zH(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(r[o]?.[e]!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const f9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??wEe(n,e),gridScale:({model:e,channel:t})=>AEe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||JG(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||KG(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??CEe(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??DEe(t.type,n,he(t)&&!!t.timeUnit,he(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const o=e==="x"?"width":e==="y"?"height":void 0,a=o?t.getSizeSignalRef(o):void 0;return n.tickCount??IEe({fieldOrDatumDef:r,scaleType:i,size:a,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??MEe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=eY(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),o=n==="x"?"x2":"y2",a=t.fieldDef(o);return jH(i?[F4(i)]:[],he(a)?[F4(a)]:[])},values:({axis:e,fieldOrDatumDef:t})=>REe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??kEe(n,t)};function wEe(e,t){return!In(e)&&he(t)&&!Nt(t?.bin)&&!Pn(t?.bin)}function AEe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function TEe(e,t,n,r,i){const o=t?.labelAngle;if(o!==void 0)return Ce(o)?o:Ug(o);{const{configValue:a}=nC("labelAngle",r,t?.style,i);return a!==void 0?Ug(a):n===Ut&&Je([qM,HM],e.type)&&!(he(e)&&e.timeUnit)?270:void 0}}function rC(e){return`(((${e.signal} % 360) + 360) % 360)`}function KG(e,t,n,r){if(e!==void 0)if(n==="x"){if(Ce(e)){const i=rC(e),o=Ce(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${o} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ce(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ce(e)){const i=rC(e),o=Ce(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${o} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Ce(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function JG(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,o=r?"bottom":"left";if(Ce(e)){const a=rC(e),s=Ce(t)?`(${t.signal} === "${o}")`:t===o;return{signal:`(${i?`(${a} + 90)`:a} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${a} && ${a} < ${180+i}) === ${s} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Ce(t)){const a=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${a} "${o}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===o)?"left":"right"}function CEe(e,t){if(t==="x"&&Je(["quantitative","temporal"],e))return!0}function DEe(e,t,n,r){if(n&&!xe(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function OEe(e){return e==="x"?"bottom":"left"}function IEe({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){if(!r&&!In(t)&&t!=="log"){if(he(e)){if(Nt(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Je(["month","hours","day","quarter"],On(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function MEe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(he(t)){const{timeUnit:n}=t;if(n){const r=rq(n);if(r)return{signal:r}}}}function eY(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),o=r?r.title:void 0,a=i?i.title:void 0;if(o&&a)return UH(o,a);if(o)return o;if(a)return a;if(o!==void 0)return o;if(a!==void 0)return a}function REe(e,t){const n=e.values;if(ae(n))return Pq(t,n);if(Ce(n))return n}function kEe(e,t){return e==="rect"&&j1(t)?1:0}class Fd extends _t{transform;_dependentFields;clone(){return new Fd(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=WG(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(Pc(r)&&Tq(r.sort)){const{field:o,timeUnit:a}=r,s=r.sort,l=s.map((u,f)=>`${oq({field:o,timeUnit:a,equal:u})} ? ${f} : `).join("")+s.length;t=new Fd(t,{calculate:l,as:Pd(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${rt(this.transform)}`}}function Pd(e,t,n){return be(e,{prefix:t,suffix:"sort_index",...n})}function XS(e,t){return Je(["top","bottom"],t)?"column":Je(["left","right"],t)||e==="row"?"row":"column"}function $d(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return nn((t||{})[e],i[e],n.header[e])}function QS(e,t,n,r){const i={};for(const o of e){const a=$d(o,t||{},n,r);a!==void 0&&(i[o]=a)}return i}const ER=["row","column"],wR=["header","footer"];function NEe(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:o,titleAngle:a,titleOrient:s}=QS(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),l=XS(t,s),u=Ug(a);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...nY(u,l),...tY(l,u,o),...rY(r,i,t,Sxe,tG)}}}function tY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=JG(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function nY(e,t){const n=KG(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function FEe(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of wR)if(n[i])for(const o of n[i]){const a=$Ee(e,t,i,n,o);a!=null&&r.push(a)}return r}function PEe(e,t){const{sort:n}=e;return ss(n)?{field:be(n,{expr:"datum"}),order:n.order??"ascending"}:ae(n)?{field:Pd(e,t,{expr:"datum"}),order:"ascending"}:{field:be(e,{expr:"datum"}),order:n??"ascending"}}function iC(e,t,n){const{format:r,formatType:i,labelAngle:o,labelAnchor:a,labelOrient:s,labelExpr:l}=QS(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),u=JM({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,f=XS(t,s);return{text:{signal:l?cc(cc(l,"datum.label",u),"datum.value",be(e,{expr:"parent"})):u},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...nY(o,f),...tY(f,o,a),...rY(n,e,t,xxe,nG)}}function $Ee(e,t,n,r,i){if(i){let o=null;const{facetFieldDef:a}=r,s=e.config?e.config:void 0;if(a&&i.labels){const{labelOrient:d}=QS(["labelOrient"],a.header,s,t);(t==="row"&&!Je(["top","bottom"],d)||t==="column"&&!Je(["left","right"],d))&&(o=iC(a,t,s))}const l=di(e)&&!Nm(e.facet),u=i.axes,f=u?.length>0;if(o||f){const d=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:PEe(a,t)}:{},...f&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...o?{title:o}:{},...i.sizeSignal?{encode:{update:{[d]:i.sizeSignal}}}:{},...f?{axes:u}:{}}}}return null}const zEe={column:{start:0,end:1},row:{start:1,end:0}};function LEe(e,t){return zEe[t][e]}function jEe(e,t){const n={};for(const r of Pi){const i=e[r];if(i?.facetFieldDef){const{titleAnchor:o,titleOrient:a}=QS(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),s=XS(r,a),l=LEe(o,s);l!==void 0&&(n[s]=l)}}return Rt(n)?void 0:n}function rY(e,t,n,r,i){const o={};for(const a of r){if(!i[a])continue;const s=$d(a,t?.header,e,n);s!==void 0&&(o[i[a]]=s)}return o}function AR(e){return[...N0(e,"width"),...N0(e,"height"),...N0(e,"childWidth"),...N0(e,"childHeight")]}function N0(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const o=e.getScaleComponent(n);if(o){const a=o.get("type"),s=o.get("range");if(In(a)&&kc(s)){const l=e.scaleName(n);return di(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[d9(l,s)]:[d9(l,s),{name:i,update:iY(l,o,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const o=i.endsWith("width"),a=o?"containerSize()[0]":"containerSize()[1]",s=YT(e.config.view,o?"width":"height"),l=`isFinite(${a}) ? ${a} : ${s}`;return[{name:i,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:i,value:r}]}function d9(e,t){const n=`${e}_step`;return Ce(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function iY(e,t,n){const r=t.get("type"),i=t.get("padding"),o=nn(t.get("paddingOuter"),i);let a=t.get("paddingInner");return a=r==="band"?a!==void 0?a:i:1,`bandspace(${n}, ${ca(a)}, ${ca(o)}) * ${e}_step`}function aY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function oY(e,t){return le(e).reduce((n,r)=>({...n,...ah({model:t,channelDef:e[r],vgChannel:r,mainRefFn:i=>Pt(i.value),invalidValueRef:void 0})}),{})}function sY(e,t){if(di(t))return e==="theta"?"independent":"shared";if(lh(t))return"shared";if(RR(t))return rn(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function TR(e,t){const n=e.scale[t],r=rn(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&fe(mbe(t)),"independent"):e[r][t]||"shared"}const UEe={...wxe,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},uY=le(UEe);class BEe extends ws{}const h9={symbols:VEe,gradient:HEe,labels:qEe,entries:GEe};function VEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:o}){if(o!=="symbol")return;const{markDef:a,encoding:s,config:l,mark:u}=n,f=a.filled&&u!=="trail";let d={...w1e({},n,SSe),...NG(n,{filled:f})};const p=i.get("symbolOpacity")??l.legend.symbolOpacity,g=i.get("symbolFillColor")??l.legend.symbolFillColor,y=i.get("symbolStrokeColor")??l.legend.symbolStrokeColor,v=p===void 0?lY(s.opacity)??a.opacity:void 0;if(d.fill){if(r==="fill"||f&&r===Vr)delete d.fill;else if(ce(d.fill,"field"))g?delete d.fill:(d.fill=Pt(l.legend.symbolBaseFillColor??"black"),d.fillOpacity=Pt(v??1));else if(ae(d.fill)){const b=aC(s.fill??s.color)??a.fill??(f&&a.color);b&&(d.fill=Pt(b))}}if(d.stroke){if(r==="stroke"||!f&&r===Vr)delete d.stroke;else if(ce(d.stroke,"field")||y)delete d.stroke;else if(ae(d.stroke)){const b=nn(aC(s.stroke||s.color),a.stroke,f?a.color:void 0);b&&(d.stroke={value:b})}}if(r!==xs){const b=he(t)&&fY(n,i,t);b?d.opacity=[{test:b,...Pt(v??1)},Pt(l.legend.unselectedOpacity)]:v&&(d.opacity=Pt(v))}return d={...d,...e},Rt(d)?void 0:d}function HEe(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:o,encoding:a}=t;let s={};const u=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?lY(a.opacity)||o.opacity:void 0;return u&&(s.opacity=Pt(u)),s={...s,...e},Rt(s)?void 0:s}function qEe(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const o=n.legend(r)||{},a=n.config,s=he(t)?fY(n,i,t):void 0,l=s?[{test:s,value:1},{value:a.legend.unselectedOpacity}]:void 0,{format:u,formatType:f}=o;let d;mc(f)?d=fa({fieldOrDatumDef:t,field:"datum.value",format:u,formatType:f,config:a}):u===void 0&&f===void 0&&a.customFormatTypes&&(t.type==="quantitative"&&a.numberFormatType?d=fa({fieldOrDatumDef:t,field:"datum.value",format:a.numberFormat,formatType:a.numberFormatType,config:a}):t.type==="temporal"&&a.timeFormatType&&he(t)&&t.timeUnit===void 0&&(d=fa({fieldOrDatumDef:t,field:"datum.value",format:a.timeFormat,formatType:a.timeFormatType,config:a})));const p={...l?{opacity:l}:{},...d?{text:d}:{},...e};return Rt(p)?void 0:p}function GEe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function lY(e){return cY(e,(t,n)=>Math.max(t,n.value))}function aC(e){return cY(e,(t,n)=>nn(t,n.value))}function cY(e,t){if(jSe(e))return Se(e.condition).reduce(t,e.value);if(va(e))return e.value}function fY(e,t,n){const r=t.get("selections");if(!r?.length)return;const i=pe(n.field);return r.map(o=>`(!length(data(${pe(jt(o)+vc)})) || (${o}[${i}] && indexof(${o}[${i}], datum.value) >= 0))`).join(" || ")}const p9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return Eq(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return wq(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??JEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??e2e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??WEe(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>td(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(ed(n)&&Xa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>YEe(t,e)};function YEe(e,t){const n=e.values;if(ae(n))return Pq(t,n);if(Ce(n))return n}function WEe(e,t,n,r){if(t!=="shape"){const i=aC(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function XEe(e){const{legend:t}=e;return nn(t.type,QEe(e))}function QEe({channel:e,timeUnit:t,scaleType:n}){if(ed(e)){if(Je(["quarter","month","day"],t))return"symbol";if(Xa(n))return"gradient"}return"symbol"}function ZEe({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??KEe(n,t)}function KEe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function JEe({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:o,gradientHorizontalMinLength:a,gradientVerticalMaxLength:s,gradientVerticalMinLength:l}=e;if(Xa(i))return n==="horizontal"?r==="top"||r==="bottom"?g9(t,"width",a,o):a:g9(t,"height",l,s)}function g9(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function e2e(e){if(Je(["quantile","threshold","log","symlog"],e))return"greedy"}function dY(e){const t=Ht(e)?t2e(e):a2e(e);return e.component.legends=t,t}function t2e(e){const{encoding:t}=e,n={};for(const r of[Vr,...iG]){const i=gn(t[r]);!i||!e.getScaleComponent(r)||r===Hr&&he(i)&&i.type===ih||(n[r]=i2e(e,r))}return n}function n2e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function r2e(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===r?.title)return!0}return e===(n||{})[t]}function i2e(e,t){let n=e.legend(t);const{markDef:r,encoding:i,config:o}=e,a=o.legend,s=new BEe({},n2e(e,t));hEe(e,t,s);const l=n!==void 0?!n:a.disable;if(s.set("disable",l,n!==void 0),l)return s;n=n||{};const u=e.getScaleComponent(t).get("type"),f=gn(i[t]),d=he(f)?On(f.timeUnit)?.unit:void 0,p=n.orient||o.legend.orient||"right",g=XEe({legend:n,channel:t,timeUnit:d,scaleType:u}),y=ZEe({legend:n,legendType:g,orient:p,legendConfig:a}),v={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:f,legendConfig:a,config:o,scaleType:u,orient:p,legendType:g,direction:y};for(const A of uY){if(g==="gradient"&&A.startsWith("symbol")||g==="symbol"&&A.startsWith("gradient"))continue;const w=A in p9?p9[A](v):n[A];if(w!==void 0){const C=r2e(w,A,n,e.fieldDef(t));(C||o.legend[A]===void 0)&&s.set(A,w,C)}}const b=n?.encoding??{},x=s.get("selections"),_={},T={fieldOrDatumDef:f,model:e,channel:t,legendCmpt:s,legendType:g};for(const A of["labels","legend","title","symbols","gradient","entries"]){const w=oY(b[A]??{},e),C=A in h9?h9[A](w,T):w;C!==void 0&&!Rt(C)&&(_[A]={...x?.length&&he(f)?{name:`${jt(f.field)}_legend_${A}`}:{},...x?.length?{interactive:!!x}:{},update:C})}return Rt(_)||s.set("encode",_,!!n?.encoding),s}function a2e(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){dY(r);for(const i of le(r.component.legends))n.legend[i]=TR(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=hY(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of le(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function hY(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const o of uY){const a=Lu(e.getWithExplicit(o),t.getWithExplicit(o),o,"legend",(s,l)=>{switch(o){case"symbolType":return o2e(s,l);case"title":return BH(s,l);case"type":return i=!0,ni("symbol")}return HS(s,l,o,"legend")});e.setWithExplicit(o,a)}return i&&(e.implicit?.encode?.gradient&&F1(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&F1(e.explicit,["encode","gradient"])),e}function o2e(e,t){return t.value==="circle"?t:e}function s2e(e,t,n,r){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=r}function pY(e){const t=e.component.legends,n={};for(const i of le(t)){const o=e.getScaleComponent(i),a=yt(o.get("domains"));if(n[a])for(const s of n[a])hY(s,t[i])||n[a].push(t[i]);else n[a]=[t[i].clone()]}return un(n).flat().map(i=>u2e(i,e.config)).filter(i=>i!==void 0)}function u2e(e,t){const{disable:n,labelExpr:r,selections:i,...o}=e.combine();if(!n){if(t.aria===!1&&o.aria==null&&(o.aria=!1),o.encode?.symbols){const a=o.encode.symbols.update;a.fill&&a.fill.value!=="transparent"&&!a.stroke&&!o.stroke&&(a.stroke={value:"transparent"});for(const s of iG)o[s]&&delete a[s]}if(o.title||delete o.title,r!==void 0){let a=r;o.encode?.labels?.update&&Ce(o.encode.labels.update.text)&&(a=cc(r,"datum.label",o.encode.labels.update.text.signal)),s2e(o,"labels","text",{signal:a})}return o}}function l2e(e){return lh(e)||RR(e)?c2e(e):gY(e)}function c2e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),gY(e))}function gY(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(a=>a.signal).join(", ")}]`},o=t.data.reduce((a,s)=>{const l=Ce(s)?s.signal:`data('${e.lookupDataSource(s)}')`;return Je(a,l)||a.push(l),a},[]);if(o.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:o.length>1?`[${o.join(", ")}]`:o[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const f2e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class mY extends ws{specifiedProjection;size;data;merged=!1;constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i}get isFit(){return!!this.data}}function yY(e){e.component.projection=Ht(e)?d2e(e):g2e(e)}function d2e(e){if(e.hasProjection){const t=$n(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?h2e(e):void 0,o=new mY(e.projectionName(!0),{...$n(e.config.projection),...t},r,i);return o.get("type")||o.set("type","equalEarth",!1),o}}function h2e(e){const t=[],{encoding:n}=e;for(const r of[[Oa,Da],[qi,Ia]])(gn(n[r[0]])||gn(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Hr)&&e.typedFieldDef(Hr).type===ih&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(qt.Main)),t}function p2e(e,t){const n=yM(f2e,i=>!!(!_e(e.explicit,i)&&!_e(t.explicit,i)||_e(e.explicit,i)&&_e(t.explicit,i)&&ui(e.get(i),t.get(i))));if(ui(e.size,t.size)){if(n)return e;if(ui(e.explicit,{}))return t;if(ui(t.explicit,{}))return e}return null}function g2e(e){if(e.children.length===0)return;let t;for(const r of e.children)yY(r);const n=yM(e.children,r=>{const i=r.component.projection;if(i)if(t){const o=p2e(t,i);return o&&(t=o),!!o}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new mY(r,t.specifiedProjection,t.size,je(t.data));for(const o of e.children){const a=o.component.projection;a&&(a.isFit&&i.data.push(...o.component.projection.data),o.renameProjection(a.get("name"),r),a.merged=!0)}return i}}function m2e(e,t,n,r){if($m(t,n)){const i=Ht(e)?e.axis(n)??e.legend(n)??{}:{},o=be(t,{expr:"datum"}),a=be(t,{expr:"datum",binSuffix:"end"});return{formulaAs:be(t,{binSuffix:"range",forAs:!0}),formula:km(o,a,i.format,i.formatType,r)}}return{}}function vY(e,t){return`${NH(e)}_${t}`}function y2e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function CR(e,t,n){const r=zS(n,void 0)??{},i=vY(r,t);return e.getName(`${i}_bins`)}function v2e(e){return"as"in e}function m9(e,t,n){let r,i;v2e(e)?r=Ee(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[be(e,{forAs:!0}),be(e,{binSuffix:"end",forAs:!0})];const o={...zS(t,void 0)},a=vY(o,e.field),{signal:s,extentSignal:l}=y2e(n,a);if(CS(o.extent)){const f=o.extent;i=QG(n,f.param,f),delete o.extent}const u={bin:o,field:e.field,as:[r],...s?{signal:s}:{},...l?{extentSignal:l}:{},...i?{span:i}:{}};return{key:a,binComponent:u}}class to extends _t{bins;clone(){return new to(null,je(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,o,a)=>{if(Ar(o)&&Nt(o.bin)){const{key:s,binComponent:l}=m9(o,o.bin,n);i[s]={...l,...i[s],...m2e(n,o,a,n.config)}}return i},{});return Rt(r)?null:new to(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:o}=m9(n,n.bin,r);return new to(t,{[i]:o})}merge(t,n){for(const r of le(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=Wa([...this.bins[r].as,...t.bins[r].as],rt)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(un(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(un(this.bins).map(t=>t.field))}hash(){return`Bin ${rt(this.bins)}`}assemble(){return un(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:o,...a}=t.bin,s={type:"bin",field:Hi(t.field),as:r,signal:t.signal,...CS(o)?{extent:null}:{extent:o},...t.span?{span:{signal:`span(${t.span})`}}:{},...a};!o&&t.extentSignal&&(n.push({type:"extent",field:Hi(t.field),signal:t.extentSignal}),s.extent={signal:t.extentSignal}),n.push(s);for(const l of i)for(let u=0;u<2;u++)n.push({type:"formula",expr:be({field:r[u]},{expr:"datum"}),as:l[u]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function b2e(e,t,n,r){const i=Ht(r)?r.encoding[_o(t)]:void 0;if(Ar(n)&&Ht(r)&&Dq(n,i,r.markDef,r.config)){e.add(be(n,{})),e.add(be(n,{suffix:"end"}));const{mark:o,markDef:a,config:s}=r,l=zu({fieldDef:n,markDef:a,config:s});Bg(o)&&l!==.5&&rn(t)&&(e.add(be(n,{suffix:qS})),e.add(be(n,{suffix:GS}))),n.bin&&$m(n,t)&&e.add(be(n,{binSuffix:"range"}))}else if(AH(t)){const o=wH(t);e.add(r.getName(o))}else e.add(be(n));return Pc(n)&&sSe(n.scale?.range)&&e.add(n.scale.range.field),e}function S2e(e,t){for(const n of le(t)){const r=t[n];for(const i of le(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class ha extends _t{dimensions;measures;clone(){return new ha(null,new Set(this.dimensions),je(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(a=>{a.aggregate&&(r=!0)});const i={},o=new Set;return!r||(n.forEachFieldDef((a,s)=>{const{aggregate:l,field:u}=a;if(l)if(l==="count")i["*"]??={},i["*"].count=new Set([be(a,{forAs:!0})]);else{if(hs(l)||Ju(l)){const f=hs(l)?"argmin":"argmax",d=l[f];i[d]??={},i[d][f]=new Set([be({op:f,field:d},{forAs:!0})])}else i[u]??={},i[u][l]=new Set([be(a,{forAs:!0})]);Eo(s)&&n.scaleDomain(s)==="unaggregated"&&(i[u]??={},i[u].min=new Set([be({field:u,aggregate:"min"},{forAs:!0})]),i[u].max=new Set([be({field:u,aggregate:"max"},{forAs:!0})]))}else b2e(o,s,a,n)}),o.size+le(i).length===0)?null:new ha(t,o,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const o of n.aggregate){const{op:a,field:s,as:l}=o;a&&(a==="count"?(i["*"]??={},i["*"].count=new Set([l||be(o,{forAs:!0})])):(i[s]??={},i[s][a]??=new Set,i[s][a].add(l||be(o,{forAs:!0}))))}for(const o of n.groupby??[])r.add(o);return r.size+le(i).length===0?null:new ha(t,r,i)}merge(t){return mH(this.dimensions,t.dimensions)?(S2e(this.measures,t.measures),!0):(Rbe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...le(this.measures)])}producedFields(){const t=new Set;for(const n of le(this.measures))for(const r of le(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${rt({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const o of le(this.measures))for(const a of le(this.measures[o]))for(const s of this.measures[o][a])r.push(s),t.push(a),n.push(o==="*"?null:Hi(o));return{type:"aggregate",groupby:[...this.dimensions].map(Hi),ops:t,fields:n,as:r}}}class sh extends _t{model;name;data;column;row;facet;childModel;constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const o of Pi){const a=n.facet[o];if(a){const{bin:s,sort:l}=a;this[o]={name:n.getName(`${o}_domain`),fields:[be(a),...Nt(s)?[be(a,{binSuffix:"end"})]:[]],...ss(l)?{sortField:l}:ae(l)?{sortIndexField:Pd(a,o)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Pi)this[n]&&(t+=` ${n.charAt(0)}:${rt(this[n])}`);return t}get fields(){const t=[];for(const n of Pi)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Pi)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of _s){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),o=r.get("range");if(In(i)&&kc(o)){const a=ZS(this.childModel,n),s=MR(a);s?t[n]=s:fe(MM(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],o=[],a=[],s=[];i&&r&&r[i]&&(n?(o.push(`distinct_${r[i]}`),a.push("max")):(o.push(r[i]),a.push("distinct")),s.push(`distinct_${r[i]}`));const{sortField:l,sortIndexField:u}=this[t];if(l){const{op:f=FS,field:d}=l;o.push(d),a.push(f),s.push(be(l,{forAs:!0}))}else u&&(o.push(u),a.push("max"),s.push(u));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...o.length?{fields:o,ops:a,as:s}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],o={};for(const l of ER){for(const u of wR){const f=r[l]?.[u]??[];for(const d of f)if(d.axes?.length>0){o[l]=!0;break}}if(o[l]){const u=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${u} / ${n})`}:1:n?{signal:`min(${u}, ${n})`}:{signal:u};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:a,column:s}=o;return(a||s)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:o,facet:a}=this;if(i&&o&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const s=[].concat(r.x??[],r.y??[]),l=s.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:s,ops:l}]})}for(const s of[os,as])this[s]&&t.push(this.assembleRowColumnHeaderData(s,n,r));if(a){const s=this.assembleFacetHeaderData(r);s&&t.push(...s)}return t}}function y9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function x2e(e,t){const n=SM(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=y9(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=y9(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return fe(U1e(t)),null}function _2e(e){const t={};return pv(e.filter,n=>{if(aq(n)){let r=null;$M(n)?r=ai(n.equal):LM(n)?r=ai(n.lte):zM(n)?r=ai(n.lt):jM(n)?r=ai(n.gt):UM(n)?r=ai(n.gte):BM(n)?r=n.range[0]:VM(n)&&(r=(n.oneOf??n.in)[0]),r&&(Nc(r)?t[n.field]="date":ct(r)?t[n.field]="number":Ee(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function E2e(e){const t={};function n(r){Rd(r)?t[r.field]="date":r.type==="quantitative"&&p1e(r.aggregate)?t[r.field]="number":Td(r.field)>1?r.field in t||(t[r.field]="flatten"):Pc(r)&&ss(r.sort)&&Td(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Ht(e)||di(e))&&e.forEachFieldDef((r,i)=>{if(Ar(r))n(r);else{const o=Mc(i),a=e.fieldDef(o);n({...r,type:a.type})}}),Ht(e)){const{mark:r,markDef:i,encoding:o}=e;if(el(r)&&!e.encoding.order){const a=i.orient==="horizontal"?"y":"x",s=o[a];he(s)&&s.type==="quantitative"&&!(s.field in t)&&(t[s.field]="number")}}return t}function w2e(e){const t={};if(Ht(e)&&e.component.selection)for(const n of le(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Td(i.field)>1&&(t[i.field]="flatten")}return t}class rr extends _t{_parse;clone(){return new rr(null,je(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${rt(this._parse)}`}static makeExplicit(t,n,r){let i={};const o=n.data;return!Au(o)&&o?.format?.parse&&(i=o.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const s of le(r)){const l=i.getWithExplicit(s);l.value!==void 0&&(l.explicit||l.value===r[s]||l.value==="derived"||r[s]==="flatten"?delete r[s]:fe(C4(s,r[s],l.value)))}for(const s of le(n)){const l=i.get(s);l!==void 0&&(l===n[s]?delete n[s]:fe(C4(s,n[s],l)))}const o=new ws(n,r);i.copyAll(o);const a={};for(const s of le(o.combine())){const l=o.get(s);l!==null&&(a[s]=l)}return le(a).length===0||i.parseNothing?null:new rr(t,a)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of le(this._parse)){const r=this._parse[n];Td(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(le(this._parse))}dependentFields(){return new Set(le(this._parse))}assembleTransforms(t=!1){return le(this._parse).filter(n=>t?Td(n)>1:!0).map(n=>{const r=x2e(n,this._parse[n]);return r?{type:"formula",expr:r,as:nh(n)}:null}).filter(n=>n!==null)}}class ju extends _t{clone(){return new ju(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([Sa])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:Sa}}}class jm extends _t{params;clone(){return new jm(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${rt(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class Um extends _t{params;clone(){return new Um(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${rt(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class bc extends _t{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(Au(t)||(n=t.format?{...fi(t.format,["parse"])}:{}),Vg(t))this._data={values:t.values};else if(kd(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Je(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else _G(t)?this._data={values:[{type:"Sphere"}]}:(SG(t)||Au(t))&&(this._data={});this._generator=Au(t),t.name&&(this._name=t.name),n&&!Rt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function DR(e){return e instanceof bc||e instanceof jm||e instanceof Um}class OR{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class $c extends OR{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,o)=>o[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class IR extends OR{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class A2e extends IR{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of le(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class T2e extends IR{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&_R(t)}run(t){t instanceof ju&&(this.requiresSelectionId&&(DR(t.parent)||t.parent instanceof ha||t.parent instanceof rr)||(this.setModified(),t.remove()))}}class C2e extends OR{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ja&&(r=t.producedFields(),vM(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class D2e extends IR{constructor(){super()}run(t){t instanceof Lr&&!t.isRequired()&&(this.setModified(),t.remove())}}class O2e extends $c{run(t){if(!DR(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof rr)if(t instanceof rr)this.setModified(),t.merge(n);else{if(bM(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class I2e extends $c{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof rr);if(t.numChildren()>1&&r.length>=1){const i={},o=new Set;for(const a of r){const s=a.parse;for(const l of le(s))l in i?i[l]!==s[l]&&o.add(l):i[l]=s[l]}for(const a of o)delete i[a];if(!Rt(i)){this.setModified();const a=new rr(t,i);for(const s of n){if(s instanceof rr)for(const l of le(i))delete s.parse[l];t.removeChild(s),s.parent=a,s instanceof rr&&le(s.parse).length===0&&s.remove()}}}}}class M2e extends $c{run(t){t instanceof Lr||t.numChildren()>0||t instanceof sh||t instanceof bc||(this.setModified(),t.remove())}}class R2e extends $c{run(t){const n=t.children.filter(i=>i instanceof Ja),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class k2e extends $c{run(t){const n=t.children.filter(i=>i instanceof ha),r={};for(const i of n){const o=rt(i.groupBy);o in r||(r[o]=[]),r[o].push(i)}for(const i of le(r)){const o=r[i];if(o.length>1){const a=o.pop();for(const s of o)a.merge(s)&&(t.removeChild(s),s.parent=a,s.remove(),this.setModified())}}}}class N2e extends $c{model;constructor(t){super(),this.model=t}run(t){const n=!(DR(t)||t instanceof oh||t instanceof rr||t instanceof ju),r=[],i=[];for(const o of t.children)o instanceof to&&(n&&!bM(t.producedFields(),o.dependentFields())?r.push(o):i.push(o));if(r.length>0){const o=r.pop();for(const a of r)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof to?t.merge(o,this.model.renameSignal.bind(this.model)):o.swapWithParent()}if(i.length>1){const o=i.pop();for(const a of i)o.merge(a,this.model.renameSignal.bind(this.model));this.setModified()}}}class F2e extends $c{run(t){const n=[...t.children];if(!Ad(n,a=>a instanceof Lr)||t.numChildren()<=1)return;const i=[];let o;for(const a of n)if(a instanceof Lr){let s=a;for(;s.numChildren()===1;){const[l]=s.children;if(l instanceof Lr)s=l;else break}i.push(...s.children),o?(t.removeChild(a),a.parent=o.parent,o.parent.removeChild(o),o.parent=s,this.setModified()):o=s}else i.push(a);if(i.length){this.setModified();for(const a of i)a.parent.removeChild(a),a.parent=o}}}class zc extends _t{transform;clone(){return new zc(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Wa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??be(t)}hash(){return`JoinAggregateTransform ${rt(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const o of this.transform.joinaggregate)n.push(o.op),r.push(this.getDefaultName(o)),t.push(o.field===void 0?null:o.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}class zd extends _t{filter;clone(){return new zd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,r){const{config:i,markDef:o}=n,{marks:a,scales:s}=r;if(a==="include-invalid-values"&&s==="include-invalid-values")return null;const l=n.reduceFieldDef((u,f,d)=>{const p=Eo(d)&&n.getScaleComponent(d);if(p){const g=p.get("type"),{aggregate:y}=f,v=QM({scaleChannel:d,markDef:o,config:i,scaleType:g,isCountAggregate:TS(y)});v!=="show"&&v!=="always-valid"&&(u[f.field]=f)}return u},{});return le(l).length?new zd(t,l):null}dependentFields(){return new Set(le(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${rt(this.filter)}`}assemble(){const t=le(this.filter).reduce((n,r)=>{const i=this.filter[r],o=be(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${o}) || (${oC(o)}))`):i.type==="quantitative"&&n.push(oC(o))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function oC(e){return`isValid(${e}) && isFinite(+${e})`}function P2e(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=be(r);return i&&t.push(i),t},[])}function $2e(e){return ae(e)&&e.every(t=>Ee(t))&&e.length>1}class ls extends _t{_stack;clone(){return new ls(null,je(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:o,offset:a="zero"}=n,s=[],l=[];if(n.sort!==void 0)for(const d of n.sort)s.push(d.field),l.push(nn(d.order,"ascending"));const u={field:s,order:l};let f;return $2e(o)?f=o:Ee(o)?f=[o,`${o}_end`]:f=[`${n.stack}_start`,`${n.stack}_end`],new ls(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:a,sort:u,facetby:[],as:f})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:o,fieldChannel:a,offset:s,impute:l}=r,u=o.map(g=>{const y=i[g];return ba(y)}).filter(g=>!!g),f=P2e(n),d=n.encoding.order;let p;if(ae(d)||he(d))p=LH(d);else{const g=Oq(d)?d.sort:a==="y"?"descending":"ascending";p=f.reduce((y,v)=>(y.field.includes(v)||(y.field.push(v),y.order.push(g)),y),{field:[],order:[]})}return new ls(t,{dimensionFieldDefs:u,stackField:n.vgField(a),facetby:[],stackby:f,sort:p,offset:s,impute:l,as:[n.vgField(a,{suffix:"start",forAs:!0}),n.vgField(a,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${rt(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[be(i,{binSuffix:"mid"})]:[be(i,{}),be(i,{binSuffix:"end"})]:[be(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:o,sort:a,offset:s,impute:l,as:u}=this._stack;if(l)for(const f of r){const{bandPosition:d=.5,bin:p}=f;if(p){const g=be(f,{expr:"datum"}),y=be(f,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${oC(g)} ? ${d}*${g}+${1-d}*${y} : ${g}`,as:be(f,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...o,...n],key:be(f,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:a,as:u,offset:s}),t}}class uh extends _t{transform;clone(){return new uh(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Wa(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??be(t)}hash(){return`WindowTransform ${rt(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const d of this.transform.window)n.push(d.op),r.push(this.getDefaultName(d)),i.push(d.param===void 0?null:d.param),t.push(d.field===void 0?null:d.field);const o=this.transform.frame,a=this.transform.groupby;if(o&&o[0]===null&&o[1]===null&&n.every(d=>OM(d)))return{type:"joinaggregate",as:r,ops:n,fields:t,...a!==void 0?{groupby:a}:{}};const s=[],l=[];if(this.transform.sort!==void 0)for(const d of this.transform.sort)s.push(d.field),l.push(d.order??"ascending");const u={field:s,order:l},f=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:u,...f!==void 0?{ignorePeers:f}:{},...a!==void 0?{groupby:a}:{},...o!==void 0?{frame:o}:{}}}}function z2e(e){function t(n){if(!(n instanceof sh)){const r=n.clone();if(r instanceof Lr){const i=uC+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof ha||r instanceof ls||r instanceof uh||r instanceof zc)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function sC(e){if(e instanceof sh)if(e.numChildren()===1&&!(e.children[0]instanceof Lr)){const t=e.children[0];(t instanceof ha||t instanceof ls||t instanceof uh||t instanceof zc)&&t.addDimensions(e.fields),t.swapWithParent(),sC(e)}else{const t=e.model.component.data.main;bY(t);const n=z2e(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(sC)}function bY(e){if(e instanceof Lr&&e.type===qt.Main&&e.numChildren()===1){const t=e.children[0];t instanceof sh||(t.swapWithParent(),bY(e))}}const uC="scale_",F0=5;function lC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!lC(t.children))return!1}return!0}function Ji(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function v9(e,t,n){let r=e.sources,i=!1;return i=Ji(new D2e,r)||i,i=Ji(new T2e(t),r)||i,r=r.filter(o=>o.numChildren()>0),i=Ji(new M2e,r)||i,r=r.filter(o=>o.numChildren()>0),n||(i=Ji(new O2e,r)||i,i=Ji(new N2e(t),r)||i,i=Ji(new C2e,r)||i,i=Ji(new I2e,r)||i,i=Ji(new k2e,r)||i,i=Ji(new R2e,r)||i,i=Ji(new A2e,r)||i,i=Ji(new F2e,r)||i),e.sources=r,i}function L2e(e,t){lC(e.sources);let n=0,r=0;for(let i=0;i<F0&&v9(e,t,!0);i++)n++;e.sources.map(sC);for(let i=0;i<F0&&v9(e,t,!1);i++)r++;lC(e.sources),Math.max(n,r)===F0&&fe(`Maximum optimization runs(${F0}) reached.`)}class En{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new En(()=>t(n))}}function SY(e){Ht(e)?j2e(e):U2e(e)}function j2e(e){const t=e.component.scales;for(const n of le(t)){const r=V2e(e,n);if(t[n].setWithExplicit("domains",r),q2e(e,n),e.component.data.isFaceted){let o=e;for(;!di(o)&&o.parent;)o=o.parent;if(o.component.resolve.scale[n]==="shared")for(const s of r.value)ts(s)&&(s.data=uC+s.data.replace(uC,""))}}}function U2e(e){for(const n of e.children)SY(n);const t=e.component.scales;for(const n of le(t)){let r,i=null;for(const o of e.children){const a=o.component.scales[n];if(a){r===void 0?r=a.getWithExplicit("domains"):r=Lu(r,a.getWithExplicit("domains"),"domains","scale",cC);const s=a.get("selectionExtent");i&&s&&i.param!==s.param&&fe(N1e),i=s}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function B2e(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:o}=b9(t,n);if(!i){fe(o);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=b9(t,n);if(i)return"unaggregated"}return e}function V2e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=B2e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&gn(r.x2)?gn(r.x)?Lu(nu(n,i,e,"x"),nu(n,i,e,"x2"),"domain","scale",cC):nu(n,i,e,"x2"):t==="y"&&gn(r.y2)?gn(r.y)?Lu(nu(n,i,e,"y"),nu(n,i,e,"y2"),"domain","scale",cC):nu(n,i,e,"y2"):nu(n,i,e,t)}function H2e(e,t,n){return e.map(r=>({signal:`{data: ${LS(r,{timeUnit:n,type:t})}}`}))}function $w(e,t,n){const r=On(n)?.unit;return t==="temporal"||r?H2e(e,t,r):[e]}function nu(e,t,n,r){const{encoding:i,markDef:o,mark:a,config:s,stack:l}=n,u=gn(i[r]),{type:f}=u,d=u.timeUnit,p=$_e({invalid:uo("invalid",o,s),isPath:el(a)});if(oSe(t)){const v=nu(e,void 0,n,r),b=$w(t.unionWith,f,d);return Va([...b,...v.value])}else{if(Ce(t))return Va([t]);if(t&&t!=="unaggregated"&&!dq(t))return Va($w(t,f,d))}if(l&&r===l.fieldChannel){if(l.offset==="normalize")return ni([[0,1]]);const v=n.requestDataName(p);return ni([{data:v,field:n.vgField(r,{suffix:"start"})},{data:v,field:n.vgField(r,{suffix:"end"})}])}const g=Eo(r)&&he(u)?G2e(n,r,e):void 0;if(wo(u)){const v=$w([u.datum],f,d);return ni(v)}const y=u;if(t==="unaggregated"){const{field:v}=u;return ni([{data:n.requestDataName(p),field:be({field:v,aggregate:"min"})},{data:n.requestDataName(p),field:be({field:v,aggregate:"max"})}])}else if(Nt(y.bin)){if(In(e))return ni(e==="bin-ordinal"?[]:[{data:jg(g)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(r,$m(y,r)?{binSuffix:"range"}:{}),sort:g===!0||!xe(g)?{field:n.vgField(r,{}),op:"min"}:g}]);{const{bin:v}=y;if(Nt(v)){const b=CR(n,y.field,v);return ni([new En(()=>{const x=n.getSignalName(b);return`[${x}.start, ${x}.stop]`})])}else return ni([{data:n.requestDataName(p),field:n.vgField(r,{})}])}}else if(y.timeUnit&&Je(["time","utc"],e)){const v=i[_o(r)];if(Dq(y,v,o,s)){const b=n.requestDataName(p),x=zu({fieldDef:y,fieldDef2:v,markDef:o,config:s}),_=Bg(a)&&x!==.5&&rn(r);return ni([{data:b,field:n.vgField(r,_?{suffix:qS}:{})},{data:b,field:n.vgField(r,{suffix:_?GS:"end"})}])}}return ni(g?[{data:jg(g)?n.requestDataName(p):n.requestDataName(qt.Raw),field:n.vgField(r),sort:g}]:[{data:n.requestDataName(p),field:n.vgField(r)}])}function zw(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":FS),...r?{field:Hi(r)}:{},...i?{order:i}:{}}}function q2e(e,t){const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=e.fieldDef(t)?.bin,o=dq(r)?r:void 0,a=Rc(i)&&CS(i.extent)?i.extent:void 0;(o||a)&&n.set("selectionExtent",o??a,!0)}function G2e(e,t,n){if(!In(n))return;const r=e.fieldDef(t),i=r.sort;if(Tq(i))return{op:"min",field:Pd(r,t),order:"ascending"};const{stack:o}=e,a=o?new Set([...o.groupbyFields,...o.stackBy.map(s=>s.fieldDef.field)]):void 0;if(ss(i)){const s=o&&!a.has(i.field);return zw(i,s)}else if($Se(i)){const{encoding:s,order:l}=i,u=e.fieldDef(s),{aggregate:f,field:d}=u,p=o&&!a.has(d);if(hs(f)||Ju(f))return zw({field:be(u),order:l},p);if(OM(f)||!f)return zw({op:f,field:d,order:l},p)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Je(["ascending",void 0],i))return!0}}function b9(e,t){const{aggregate:n,type:r}=e;return n?Ee(n)&&!m1e.has(n)?{valid:!1,reason:lbe(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:cbe(e)}:{valid:!0}:{valid:!1,reason:ube(e)}}function cC(e,t,n,r){return e.explicit&&t.explicit&&fe(gbe(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Y2e(e){const t=Wa(e.map(a=>{if(ts(a)){const{sort:s,...l}=a;return l}return a}),rt),n=Wa(e.map(a=>{if(ts(a)){const s=a.sort;return s!==void 0&&!jg(s)&&("op"in s&&s.op==="count"&&delete s.field,s.order==="ascending"&&delete s.order),s}}).filter(a=>a!==void 0),rt);if(t.length===0)return;if(t.length===1){const a=e[0];if(ts(a)&&n.length>0){let s=n[0];if(n.length>1){fe(O4);const l=n.filter(u=>xe(u)&&"op"in u&&u.op!=="min");n.every(u=>xe(u)&&"op"in u)&&l.length===1?s=l[0]:s=!0}else if(xe(s)&&"field"in s){const l=s.field;a.field===l&&(s=s.order?{order:s.order}:!0)}return{...a,sort:s}}return a}const r=Wa(n.map(a=>jg(a)||!("op"in a)||Ee(a.op)&&_e(d1e,a.op)?a:(fe(ybe(a)),!0)),rt);let i;r.length===1?i=r[0]:r.length>1&&(fe(O4),i=!0);const o=Wa(e.map(a=>ts(a)?a.data:null),a=>a);return o.length===1&&o[0]!==null?{data:o[0],fields:t.map(s=>s.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function MR(e){if(ts(e)&&Ee(e.field))return e.field;if(y1e(e)){let t;for(const n of e.fields)if(ts(n)&&Ee(n.field)){if(!t)t=n.field;else if(t!==n.field)return fe(vbe),t}return fe(bbe),t}else if(v1e(e)){fe(Sbe);const t=e.fields[0];return Ee(t)?t:void 0}}function ZS(e,t){const r=e.component.scales[t].get("domains").map(i=>(ts(i)&&(i.data=e.lookupDataSource(i.data)),i));return Y2e(r)}function xY(e){return lh(e)||RR(e)?e.children.reduce((t,n)=>t.concat(xY(n)),S9(e)):S9(e)}function S9(e){return le(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:o,type:a,selectionExtent:s,domains:l,range:u,reverse:f,...d}=i,p=W2e(i.range,o,n,e),g=ZS(e,n),y=s?W_e(e,s,r,g):null;return t.push({name:o,type:a,...g?{domain:g}:{},...y?{domainRaw:y}:{},range:p,...f!==void 0?{reverse:f}:{},...d}),t},[])}function W2e(e,t,n,r){if(rn(n)){if(kc(e))return{step:{signal:`${t}_step`}}}else if(xe(e)&&ts(e))return{...e,data:r.lookupDataSource(e.data)};return e}class _Y extends ws{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Je([zn.LOG,zn.TIME,zn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Je([zn.LINEAR,zn.SQRT,zn.POW],t))return"definitely";const r=this.get("domains");if(r.length>0){let i=!1,o=!1,a=!1;for(const s of r){if(ae(s)){const l=s[0],u=s[s.length-1];if(ct(l)&&ct(u))if(l<=0&&u>=0){i=!0;continue}else{o=!0;continue}}a=!0}if(i)return"definitely";if(o&&!a)return"definitely-not"}return"maybe"}}const X2e=["range","scheme"];function Q2e(e){const t=e.component.scales;for(const n of DM){const r=t[n];if(!r)continue;const i=Z2e(n,e);r.setWithExplicit("range",i)}}function x9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:r,field:i}=n,o=qr(t),a=e.getName(o);if(xe(r)&&r.binned&&r.step!==void 0)return new En(()=>{const s=e.scaleName(t),l=`(domain("${s}")[1] - domain("${s}")[0]) / ${r.step}`;return`${e.getSignalName(a)} / (${l})`});if(Nt(r)){const s=CR(e,i,r);return new En(()=>{const l=e.getSignalName(s),u=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(a)} / (${u})`})}}}function Z2e(e,t){const n=t.specifiedScales[e],{size:r}=t,o=t.getScaleComponent(e).get("type");for(const d of X2e)if(n[d]!==void 0){const p=HT(o,d),g=hq(e,d);if(!p)fe(GH(o,d,e));else if(g)fe(g);else switch(d){case"range":{const y=n.range;if(ae(y)){if(rn(e))return Va(y.map(v=>{if(v==="width"||v==="height"){const b=t.getName(v),x=t.getSignalName.bind(t);return En.fromName(x,b)}return v}))}else if(xe(y))return Va({data:t.requestDataName(qt.Main),field:y.field,sort:{op:"min",field:t.vgField(e)}});return Va(y)}case"scheme":return Va(K2e(n[d]))}}const a=e===Ut||e==="xOffset"?"width":"height",s=r[a];if(co(s)){if(rn(e))if(In(o)){const d=wY(s,t,e);if(d)return Va({step:d})}else fe(YH(a));else if(Im(e)){const d=e===Yu?"x":"y";if(t.getScaleComponent(d).get("type")==="band"){const y=AY(s,o);if(y)return Va(y)}}}const{rangeMin:l,rangeMax:u}=n,f=J2e(e,t);return(l!==void 0||u!==void 0)&&HT(o,"rangeMin")&&ae(f)&&f.length===2?Va([l??f[0],u??f[1]]):ni(f)}function K2e(e){return aSe(e)?{scheme:e.name,...fi(e,["name"])}:{scheme:e}}function EY(e,t,n,{center:r}={}){const i=qr(e),o=t.getName(i),a=t.getSignalName.bind(t);return e===Rn&&ya(n)?r?[En.fromName(s=>`${a(s)}/2`,o),En.fromName(s=>`-${a(s)}/2`,o)]:[En.fromName(a,o),0]:r?[En.fromName(s=>`-${a(s)}/2`,o),En.fromName(s=>`${a(s)}/2`,o)]:[0,En.fromName(a,o)]}function J2e(e,t){const{size:n,config:r,mark:i,encoding:o}=t,{type:a}=gn(o[e]),l=t.getScaleComponent(e).get("type"),{domain:u,domainMid:f}=t.specifiedScales[e];switch(e){case Ut:case Rn:{if(Je(["point","band"],l)){const d=TY(e,n,r.view);if(co(d))return{step:wY(d,t,e)}}return EY(e,t,l)}case Yu:case rh:return ewe(e,t,l);case Ss:{const d=rwe(i,r),p=iwe(i,n,t,r);return Od(l)?nwe(d,p,twe(l,r,u,e)):[d,p]}case Yi:return[0,Math.PI*2];case Ic:return[0,360];case Ca:return[0,new En(()=>{const d=t.getSignalName(di(t.parent)?"child_width":"width"),p=t.getSignalName(di(t.parent)?"child_height":"height");return`min(${d},${p})/2`})];case Wu:return{step:1e3/r.scale.framesPerSecond};case Zu:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Ku:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Hr:return"symbol";case Vr:case So:case xo:return l==="ordinal"?a==="nominal"?"category":"ordinal":f!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case xs:case Xu:case Qu:return[r.scale.minOpacity,r.scale.maxOpacity]}}function wY(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),o=wM(n),a=r[o];if(oG({step:e,offsetIsDiscrete:Ue(a)&&sq(a.type)})==="offset"&&jq(r,o)){const l=t.getScaleComponent(o);let f=`domain('${t.scaleName(o)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,g=l.get("paddingOuter")??l.get("padding")??0;f=`bandspace(${f}, ${p}, ${g})`}const d=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${f} / (1-${E1e(d)})`}}else return e.step}function AY(e,t){if(oG({step:e,offsetIsDiscrete:In(t)})==="offset")return{step:e.step}}function ewe(e,t,n){const r=e===Yu?"x":"y",i=t.getScaleComponent(r);if(!i)return EY(r,t,n,{center:!0});const o=i.get("type"),a=t.scaleName(r),{markDef:s,config:l}=t;if(o==="band"){const u=TY(r,t.size,t.config.view);if(co(u)){const f=AY(u,n);if(f)return f}return[0,{signal:`bandwidth('${a}')`}]}else{const u=t.encoding[r];if(he(u)&&u.timeUnit){const f=rq(u.timeUnit,y=>`scale('${a}', ${y})`),d=t.config.scale.bandWithNestedOffsetPaddingInner,p=zu({fieldDef:u,markDef:s,config:l})-.5,g=p!==0?` + ${p}`:"";if(d){const y=Ce(d)?`${d.signal}/2${g}`:`${d/2+p}`,v=Ce(d)?`(1 - ${d.signal}/2)${g}`:`${1-d/2+p}`;return[{signal:`${y} * (${f})`},{signal:`${v} * (${f})`}]}return[0,{signal:f}]}return pH(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function TY(e,t,n){const r=e===Ut?"width":"height",i=t[r];return i||H1(n,r)}function twe(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&ae(n)?n.length+1:(fe(Obe(r)),3)}}function nwe(e,t,n){const r=()=>{const i=ca(t),o=ca(e),a=`(${i} - ${o}) / (${n} - 1)`;return`sequence(${o}, ${i} + ${a}, ${a})`};return Ce(t)?new En(r):{signal:r()}}function rwe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(DS("size",e))}const _9=.95;function iwe(e,t,n,r){const i={x:x9(n,"x"),y:x9(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const o=E9(t,i,r.view);return ct(o)?o-1:new En(()=>`${o.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const o=E9(t,i,r.view);return ct(o)?Math.pow(_9*o,2):new En(()=>`pow(${_9} * ${o.signal}, 2)`)}}throw new Error(DS("size",e))}function E9(e,t,n){const r=co(e.width)?e.width.step:WT(n,"width"),i=co(e.height)?e.height.step:WT(n,"height");return t.x||t.y?new En(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function CY(e,t){Ht(e)?awe(e,t):OY(e,t)}function awe(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:o,specifiedScales:a}=e;for(const s of le(n)){const l=a[s],u=n[s],f=e.getScaleComponent(s),d=gn(i[s]),p=l[t],g=f.get("type"),y=f.get("padding"),v=f.get("paddingInner"),b=HT(g,t),x=hq(s,t);if(p!==void 0&&(b?x&&fe(x):fe(GH(g,t,s))),b&&x===void 0)if(p!==void 0){const _=d.timeUnit,T=d.type;switch(t){case"domainMax":case"domainMin":Nc(l[t])||T==="temporal"||_?u.set(t,{signal:LS(l[t],{type:T,timeUnit:_})},!0):u.set(t,l[t],!0);break;default:u.copyKeyFromObject(t,l)}}else{const _=ce(w9,t)?w9[t]({model:e,channel:s,fieldOrDatumDef:d,scaleType:g,scalePadding:y,scalePaddingInner:v,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:o,config:r,hasNestedOffsetScale:Uq(i,s),hasSecondaryRangeChannel:!!i[_o(s)]}):r.scale[t];_!==void 0&&u.set(t,_,!1)}}}const w9={bins:({model:e,fieldOrDatumDef:t})=>he(t)?owe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>swe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:o})=>uwe(e,t,n,r,i,o),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>lwe(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:o})=>cwe(e,t,n.type,r,i.scale,o),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:o})=>fwe(e,t,n,r,i.scale,o),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=he(e)?e.sort:void 0;return dwe(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:o,hasSecondaryRangeChannel:a})=>hwe(e,t,n,r,i,o.scale,a)};function DY(e){Ht(e)?Q2e(e):OY(e,"range")}function OY(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?DY(r):CY(r,t);for(const r of le(n)){let i;for(const o of e.children){const a=o.component.scales[r];if(a){const s=a.getWithExplicit(t);i=Lu(i,s,t,"scale",bG((l,u)=>{switch(t){case"range":return l.step&&u.step?l.step-u.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function owe(e,t){const n=t.bin;if(Nt(n)){const r=CR(e,t.field,n);return new En(()=>e.getSignalName(r))}else if(Pn(n)&&Rc(n)&&n.step!==void 0)return{step:n.step}}function swe(e,t){if(Je([Vr,So,xo],e)&&t!=="nominal")return"hcl"}function uwe(e,t,n,r,i,o){if(!(ba(o)?.bin||ae(n)||i!=null||r!=null||Je([zn.TIME,zn.UTC],e)))return rn(t)?!0:void 0}function lwe(e,t,n,r,i,o){if(rn(e)){if(Xa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:a,orient:s}=i;if(a==="bar"&&!(he(r)&&(r.bin||r.timeUnit))&&(s==="vertical"&&e==="x"||s==="horizontal"&&e==="y"))return o.continuousBandSize}if(t===zn.POINT)return n.pointPadding}}function cwe(e,t,n,r,i,o=!1){if(e===void 0){if(rn(t)){const{bandPaddingInner:a,barBandPaddingInner:s,rectBandPaddingInner:l,tickBandPaddingInner:u,bandWithNestedOffsetPaddingInner:f}=i;return o?f:nn(a,n==="bar"?s:n==="tick"?u:l)}else if(Im(t)&&r===zn.BAND)return i.offsetBandPaddingInner}}function fwe(e,t,n,r,i,o=!1){if(e===void 0){if(rn(t)){const{bandPaddingOuter:a,bandWithNestedOffsetPaddingOuter:s}=i;if(o)return s;if(n===zn.BAND)return nn(a,Ce(r)?{signal:`${r.signal}/2`}:r/2)}else if(Im(t)){if(n===zn.POINT)return .5;if(n===zn.BAND)return i.offsetBandPaddingOuter}}}function dwe(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return ya(e)&&t==="descending"?Ce(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(ya(e)&&t==="descending")return!0}function hwe(e,t,n,r,i,o,a){if(!!n&&n!=="unaggregated"&&ya(i)){if(ae(n)){const l=n[0],u=n[n.length-1];if(ct(l)&&l<=0&&ct(u)&&u>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Od(i))return!0;if(!(he(t)&&t.bin)&&Je([..._s,...r1e],e)){const{orient:l,type:u}=r;return Je(["bar","area","line","trail"],u)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Je(["bar","area"],u)&&!a?!0:o?.zero}return!1}function pwe(e,t,n,r,i=!1){const o=gwe(t,n,r,i),{type:a}=e;return Eo(t)?a!==void 0?dSe(t,a)?he(n)&&!fSe(a,n.type)?(fe(hbe(a,o)),o):a:(fe(dbe(t,a,o)),o):o:null}function gwe(e,t,n,r){switch(t.type){case"nominal":case"ordinal":{if(ed(e)||Tw(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&fe(Cw(e,"ordinal")),"ordinal";if(Aw(e))return"band";if(rn(e)||Im(e)){if(Je(["rect","bar","image","rule","tick"],n.type)||r)return"band"}else if(n.type==="arc"&&e in CM)return"band";const i=n[qr(e)];return gc(i)||Md(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return ed(e)?"time":Tw(e)==="discrete"?(fe(Cw(e,"temporal")),"ordinal"):he(t)&&t.timeUnit&&On(t.timeUnit).utc?"utc":Aw(e)?"band":"time";case"quantitative":return ed(e)?he(t)&&Nt(t.bin)?"bin-ordinal":"linear":Tw(e)==="discrete"?(fe(Cw(e,"quantitative")),"ordinal"):Aw(e)?"band":"linear";case"geojson":return}throw new Error(HH(t.type))}function mwe(e,{ignoreRange:t}={}){IY(e),SY(e);for(const n of cSe)CY(e,n);t||DY(e)}function IY(e){Ht(e)?e.component.scales=ywe(e):e.component.scales=bwe(e)}function ywe(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const o of DM){const a=gn(t[o]);if(a&&n===mq&&o===Hr&&a.type===ih)continue;let s=a&&a.scale;if(a&&s!==null&&s!==!1){s??={};const l=Uq(t,o),u=pwe(s,o,a,r,l);i[o]=new _Y(e.scaleName(`${o}`,!0),{value:u,explicit:s.type===u})}}return i}const vwe=bG((e,t)=>M4(e)-M4(t));function bwe(e){const t=e.component.scales={},n={},r=e.component.resolve;for(const i of e.children){IY(i);for(const o of le(i.component.scales))if(r.scale[o]??=sY(o,e),r.scale[o]==="shared"){const a=n[o],s=i.component.scales[o].getWithExplicit("type");a?eSe(a.value,s.value)?n[o]=Lu(a,s,"type","scale",vwe):(r.scale[o]="independent",delete n[o]):n[o]=s}}for(const i of le(n)){const o=e.scaleName(i,!0),a=n[i];t[i]=new _Y(o,a);for(const s of e.children){const l=s.component.scales[i];l&&(s.renameScale(l.get("name"),o),l.merged=!0)}}return t}class Lw{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Ht(e){return e?.type==="unit"}function di(e){return e?.type==="facet"}function RR(e){return e?.type==="concat"}function lh(e){return e?.type==="layer"}class kR{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,r,i,o,a,s){this.type=n,this.parent=r,this.config=o,this.parent=r,this.config=o,this.view=$n(s),this.name=t.name??i,this.title=su(t.title)?{text:t.title}:t.title?$n(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new Lw,this.projectionNameMap=r?r.projectionNameMap:new Lw,this.signalNameMap=r?r.signalNameMap:new Lw,this.data=t.data,this.description=t.description,this.transforms=A_e(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Oxe(t,n,o),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:PS(t)||r?.component.data.isFaceted&&t.data===void 0},layoutSize:new ws,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...a?je(a):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){mwe(this)}parseProjection(){yY(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){dY(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const o of le(r)){const a=r[o];a!==void 0&&(i[o]=Pt(a))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Pt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Rt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,o=jEe(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...o?{titleBand:o}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Pi)t[r].title&&n.push(NEe(this,r));for(const r of ER)n=n.concat(FEe(this,r));return n}assembleAxes(){return xEe(this.component.axes,this.config)}assembleLegends(){return pY(this)}assembleProjections(){return l2e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...FH(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Je(["unit","layer"],this.type)?Je(["middle",void 0],r.anchor)&&(r.frame??="group"):r.anchor??="start",Rt(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||di(this.parent)?xY(this):[];i.length>0&&(n.scales=i);const o=this.assembleAxes();o.length>0&&(n.axes=o);const a=this.assembleLegends();return a.length>0&&(n.legends=a),n}getName(t){return jt((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(qt[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(di(this.parent)){const n=aY(t),r=AS(n),i=this.component.scales[r];if(i&&!i.merged){const o=i.get("type"),a=i.get("range");if(In(o)&&kc(a)){const s=i.get("name"),l=ZS(this,r),u=MR(l);if(u){const f=be({aggregate:"distinct",field:u},{expr:"datum"});return{signal:iY(s,i,f)}}else return fe(MM(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(CH(t)&&Eo(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(D1e(n));return r}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class MY extends kR{vgField(t,n={}){const r=this.fieldDef(t);if(r)return be(r,n)}reduceFieldDef(t,n){return ixe(this.getMapping(),(r,i,o)=>{const a=ba(i);return a?t(r,a,o):r},n)}forEachFieldDef(t,n){aR(this.getMapping(),(r,i)=>{const o=ba(r);o&&t(o,i)},n)}}class KS extends _t{transform;clone(){return new KS(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${rt(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class JS extends _t{transform;clone(){return new JS(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${rt(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class ex extends _t{transform;clone(){return new ex(this.parent,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((o,a)=>i[a]??o)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${rt(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class tx extends _t{transform;clone(){return new tx(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${rt(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class rd extends _t{fields;geojson;signal;clone(){return new rd(null,je(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[Oa,Da],[qi,Ia]]){const o=i.map(a=>{const s=gn(n.encoding[a]);return he(s)?s.field:wo(s)?{expr:`${s.datum}`}:va(s)?{expr:`${s.value}`}:void 0});(o[0]||o[1])&&(t=new rd(t,o,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(Hr)){const i=n.typedFieldDef(Hr);i.type===ih&&(t=new rd(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(Ee);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${rt(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Hg extends _t{projection;fields;as;clone(){return new Hg(null,this.projection,je(this.fields),je(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[Oa,Da],[qi,Ia]]){const i=r.map(a=>{const s=gn(n.encoding[a]);return he(s)?s.field:wo(s)?{expr:`${s.datum}`}:va(s)?{expr:`${s.value}`}:void 0}),o=r[0]===qi?"2":"";(i[0]||i[1])&&(t=new Hg(t,n.projectionName(),i,[n.getName(`x${o}`),n.getName(`y${o}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ee))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${rt(this.fields)} ${rt(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Zl extends _t{transform;clone(){return new Zl(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Zl(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,o=r.y;if(he(i)&&he(o)){const a=i.impute?i:o.impute?o:void 0;if(a===void 0)return;const s=i.impute?o:o.impute?i:void 0,{method:l,value:u,frame:f,keyvals:d}=a.impute,p=Hq(n.mark,r);return new Zl(t,{impute:a.field,key:s.field,...l?{method:l}:{},...u!==void 0?{value:u}:{},...f?{frame:f}:{},...d!==void 0?{keyvals:d}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${rt(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:o,value:a,frame:s=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...r?{keyvals:o_e(r)?this.processSequence(r):r}:{},method:"value",...o?{groupby:o}:{},value:!i||i==="value"?a:null};if(i&&i!=="value"){const u={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:s,ignorePeers:!1,...o?{groupby:o}:{}},f={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,u,f]}else return[l]}}class nx extends _t{transform;clone(){return new nx(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${rt(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class qg extends _t{transform;secondary;clone(){return new qg(null,je(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const o=n.component.data.sources,{from:a}=r;let s=null;if(s_e(a)){let l=NY(a.data,o);l||(l=new bc(a.data),o.push(l));const u=n.getName(`lookup_${i}`);s=new Lr(l,u,qt.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[u]=s}else if(u_e(a)){const l=a.param;r={as:l,...r};let u;try{u=n.getSelectionComponent(jt(l),l)}catch{throw new Error(R1e(l))}if(s=u.materialized,!s)throw new Error(k1e(l))}return new qg(t,r,s.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?Se(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${rt({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:Se(this.transform.as)}:{}};else{let n=this.transform.as;Ee(n)||(fe(H1e),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class rx extends _t{transform;clone(){return new rx(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${rt(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class ix extends _t{transform;clone(){return new ix(null,je(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=je(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${rt(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class ax extends _t{transform;clone(){return new ax(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=Wa((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${rt(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:o}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...o!==void 0?{op:o}:{},...r!==void 0?{groupby:r}:{}}}}class ox extends _t{transform;clone(){return new ox(null,je(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${rt(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function RY(e){let t=0;function n(r,i){if(r instanceof bc&&!r.isGenerator&&!kd(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof rr&&(r.parent instanceof bc&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof sh){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof jm||r instanceof Um||r instanceof zd||r instanceof oh||r instanceof Fd||r instanceof Hg||r instanceof ha||r instanceof qg||r instanceof uh||r instanceof zc||r instanceof tx||r instanceof ex||r instanceof KS||r instanceof nx||r instanceof rx||r instanceof ix||r instanceof ju||r instanceof ox||r instanceof ax||r instanceof JS)&&i.transform.push(r.assemble()),(r instanceof to||r instanceof Ja||r instanceof Zl||r instanceof ls||r instanceof rd)&&i.transform.push(...r.assemble()),r instanceof Lr&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Lr?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Lr&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let o=i.name;!i.source||i.transform.length>0?e.push(i):o=i.source;for(const a of r.children)n(a,{name:null,source:o,transform:[]});break}}}return n}function Swe(e){const t=[],n=RY(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function xwe(e,t){const n=[],r=RY(n);let i=0;for(const a of e.sources){a.hasName()||(a.dataName=`source_${i++}`);const s=a.assemble();r(a,s)}for(const a of n)a.transform.length===0&&delete a.transform;let o=0;for(const[a,s]of n.entries())(s.transform??[]).length===0&&!s.source&&n.splice(o++,0,n.splice(a,1)[0]);for(const a of n)for(const s of a.transform??[])s.type==="lookup"&&(s.from=e.outputNodes[s.from].getSource());for(const a of n)a.name in t&&(a.values=t[a.name]);return n}function _we(e){return e==="top"||e==="left"||Ce(e)?"header":"footer"}function Ewe(e){for(const t of Pi)wwe(e,t);A9(e,"x"),A9(e,"y")}function wwe(e,t){const{facet:n,config:r,child:i,component:o}=e;if(e.channelHasField(t)){const a=n[t],s=$d("title",null,r,t);let l=td(a,r,{allowDisabling:!0,includeDefault:s===void 0||!!s});i.component.layoutHeaders[t].title&&(l=ae(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const u=$d("labelOrient",a.header,r,t),f=a.header!==null?nn(a.header?.labels,r.header.labels,!0):!1,d=Je(["bottom","right"],u)?"footer":"header";o.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[kY(e,t,f)]}}}function kY(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function A9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=TR(i,t),i.axis[t]==="shared"){const o=t==="x"?"column":"row",a=r[o];for(const s of n.component.axes[t]){const l=_we(s.get("orient"));a[l]??=[kY(e,o,!1)];const u=Jp(s,"main",e.config,{header:!0});u&&a[l][0].axes.push(u),s.mainExtracted=!0}}}}function Awe(e){NR(e),W1(e,"width"),W1(e,"height")}function Twe(e){NR(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";W1(e,t),W1(e,n)}function NR(e){for(const t of e.children)t.parseLayoutSize()}function W1(e,t){const n=aY(t),r=AS(n),i=e.component.resolve,o=e.component.layoutSize;let a;for(const s of e.children){const l=s.component.layoutSize.getWithExplicit(n),u=i.scale[r]??sY(r,e);if(u==="independent"&&l.value==="step"){a=void 0;break}if(a){if(u==="independent"&&a.value!==l.value){a=void 0;break}a=Lu(a,l,n,"")}else a=l}if(a){for(const s of e.children)e.renameSignal(s.getName(n),e.getName(t)),s.component.layoutSize.set(n,"merged",!1);o.setWithExplicit(t,a)}else o.setWithExplicit(t,{explicit:!1,value:void 0})}function Cwe(e){const{size:t,component:n}=e;for(const r of _s){const i=qr(r);if(t[i]){const o=t[i];n.layoutSize.set(i,co(o)?"step":o,!0)}else{const o=Dwe(e,i);n.layoutSize.set(i,o,!1)}}}function Dwe(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const o=i.get("type"),a=i.get("range");if(In(o)){const s=H1(r.view,t);return kc(a)||co(s)?"step":s}else return YT(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return YT(r.view,t);{const o=H1(r.view,t);return co(o)?o.step:o}}}function fC(e,t,n){return be(t,{suffix:`by_${be(e)}`,...n})}class gg extends MY{facet;child;children;constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=LR(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!Nm(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=le(t),r={};for(const i of n){if(![as,os].includes(i)){fe(DS(i,"facet"));break}const o=t[i];if(o.field===void 0){fe(BT(o,i));break}r[i]=this.initFacetFieldDef(o,i)}return r}initFacetFieldDef(t,n){const r=iR(t,n);return r.header?r.header=$n(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return ce(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=sx(this),this.child.parseData()}parseLayoutSize(){NR(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,un(this.component.selection).some(t=>eo(t))&&kM(RM)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Ewe(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Pi)for(const r of wR){const i=this.component.layoutHeaders[n],o=i[r],{facetFieldDef:a}=i;if(a){const s=$d("titleOrient",a.header,this.config,n);if(["right","bottom"].includes(s)){const l=XS(n,s);t.titleAnchor??={},t.titleAnchor[l]="end"}}if(o?.[0]){const s=n==="row"?"height":"width",l=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(s)&&(t[l]??={},t[l][n]=.5),i.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof gg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof gg?{...this.channelHasField("column")?{encode:{update:{columns:{field:be(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof gg){if(this.child.channelHasField("column")){const i=be(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of _s){const o=this.child.component.scales[i];if(o&&!o.merged){const a=o.get("type"),s=o.get("range");if(In(a)&&kc(s)){const l=ZS(this.child,i),u=MR(l);u?(t.push(u),n.push("distinct"),r.push(`distinct_${u}`)):fe(MM(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:o,ops:a,as:s}=this.getCardinalityAggregateForChild(),l=[];for(const f of Pi){const d=this.facet[f];if(d){l.push(be(d));const{bin:p,sort:g}=d;if(Nt(p)&&l.push(be(d,{binSuffix:"end"})),ss(g)){const{field:y,op:v=FS}=g,b=fC(d,g);r&&i?(o.push(b),a.push("max"),s.push(b)):(o.push(y),a.push(v),s.push(b))}else if(ae(g)){const y=Pd(d,f);o.push(y),a.push("max"),s.push(y)}}}const u=!!r&&!!i;return{name:t,data:n,groupby:l,...u||o.length>0?{aggregate:{...u?{cross:u}:{},...o.length?{fields:o,ops:a,as:s}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?ss(r.sort)?[fC(r,r.sort,{expr:"datum"})]:ae(r.sort)?[Pd(r,t,{expr:"datum"})]:[be(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(ss(i)?i.order:!ae(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return iC(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const i of ER)if(t[i]){const o=$d("labelOrient",t[i]?.header,n,i);if(r[i].includes(o))return iC(t[i],i,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Swe(n),i=t.assembleGroupEncodeEntry(!1),o=this.assembleLabelTitle()||t.assembleTitle(),a=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...o?{title:o}:{},...a?{style:a}:{},from:{facet:this.assembleFacet()},sort:{field:Pi.map(l=>this.facetSortFields(l)).flat(),order:Pi.map(l=>this.facetSortOrder(l)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(H_e(this,[]))}]}getMapping(){return this.facet}}function Owe(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const o of[n,r])if(ss(o.sort)){const{field:a,op:s=FS}=o.sort;e=i=new zc(e,{joinaggregate:[{op:s,field:a,as:fC(o,o.sort,{forAs:!0})}],groupby:[be(o)]})}return i}return null}function NY(e,t){for(const n of t){const r=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const i=e.format?.mesh,o=r.format?.feature;if(i&&o)continue;const a=e.format?.feature;if((a||o)&&a!==o)continue;const s=r.format?.mesh;if(!((i||s)&&i!==s)){if(Vg(e)&&Vg(r)){if(ui(e.values,r.values))return n}else if(kd(e)&&kd(r)){if(e.url===r.url)return n}else if(SG(e)&&e.name===n.dataName)return n}}return null}function Iwe(e,t){if(e.data||!e.parent){if(e.data===null){const r=new bc({values:[]});return t.push(r),r}const n=NY(e.data,t);if(n)return Au(e.data)||(n.data.format=gH({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new bc(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Mwe(e,t,n){let r=0;for(const i of t.transforms){let o,a;if(v_e(i))a=e=new Fd(e,i),o="derived";else if(mR(i)){const s=_2e(i);a=e=rr.makeWithAncestors(e,{},s,n)??e,e=new oh(e,t,i.filter)}else if(gG(i))a=e=to.makeFromTransform(e,i,t),o="number";else if(S_e(i))o="date",n.getWithExplicit(i.field).value===void 0&&(e=new rr(e,{[i.field]:o}),n.set(i.field,o,!1)),a=e=Ja.makeFromTransform(e,i);else if(x_e(i))a=e=ha.makeFromTransform(e,i),o="number",_R(t)&&(e=new ju(e));else if(pG(i))a=e=qg.make(e,t,i,r++),o="derived";else if(g_e(i))a=e=new uh(e,i),o="number";else if(m_e(i))a=e=new zc(e,i),o="number";else if(__e(i))a=e=ls.makeFromTransform(e,i),o="derived";else if(E_e(i))a=e=new tx(e,i),o="derived";else if(w_e(i))a=e=new JS(e,i),o="derived";else if(y_e(i))a=e=new ex(e,i),o="derived";else if(l_e(i))a=e=new ax(e,i),o="derived";else if(p_e(i))e=new ox(e,i);else if(b_e(i))a=e=Zl.makeFromTransform(e,i),o="derived";else if(c_e(i))a=e=new KS(e,i),o="derived";else if(f_e(i))a=e=new rx(e,i),o="derived";else if(d_e(i))a=e=new ix(e,i),o="derived";else if(h_e(i))a=e=new nx(e,i),o="derived";else{fe(V1e(i));continue}if(a&&o!==void 0)for(const s of a.producedFields()??[])n.set(s,o,!1)}return e}function sx(e){let t=Iwe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,a=!(i&&(Au(i)||kd(i)||Vg(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new P_e;Au(i)?(xG(i)?t=new Um(t,i.sequence):yR(i)&&(t=new jm(t,i.graticule)),a.parseNothing=!0):i?.format?.parse===null&&(a.parseNothing=!0),t=rr.makeExplicit(t,e,a)??t,t=new ju(t);const s=e.parent&&lh(e.parent);(Ht(e)||di(e))&&s&&(t=to.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Mwe(t,e,a));const l=w2e(e),u=E2e(e);t=rr.makeWithAncestors(t,{},{...l,...u},a)??t,Ht(e)&&(t=rd.parseAll(t,e),t=Hg.parseAll(t,e)),(Ht(e)||di(e))&&(s||(t=to.makeFromEncoding(t,e)??t),t=Ja.makeFromEncoding(t,e)??t,t=Fd.parseAllForSortIndex(t,e));const f=t=P0(qt.Raw,e,t);if(Ht(e)){const b=ha.makeFromEncoding(t,e);b&&(t=b,_R(e)&&(t=new ju(t))),t=Zl.makeFromEncoding(t,e)??t,t=ls.makeFromEncoding(t,e)??t}let d,p;if(Ht(e)){const{markDef:b,mark:x,config:_}=e,T=Ct("invalid",b,_),{marks:A,scales:w}=p=EG({invalid:T,isPath:el(x)});A!==w&&w==="include-invalid-values"&&(d=t=P0(qt.PreFilterInvalid,e,t)),A==="exclude-invalid-values"&&(t=zd.make(t,e,p)??t)}const g=t=P0(qt.Main,e,t);let y;if(Ht(e)&&p){const{marks:b,scales:x}=p;b==="include-invalid-values"&&x==="exclude-invalid-values"&&(t=zd.make(t,e,p)??t,y=t=P0(qt.PostFilterInvalid,e,t))}Ht(e)&&bEe(e,g);let v=null;if(di(e)){const b=e.getName("facet");t=Owe(t,e.facet)??t,v=new sh(t,e,b,g.getSource()),n[b]=v}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:f,main:g,facetRoot:v,ancestorParse:a,preFilterInvalid:d,postFilterInvalid:y}}function P0(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,o=t.getDataName(e),a=new Lr(n,o,e,i);return r[o]=a,a}class Rwe extends kR{children;constructor(t,n,r,i){super(t,"concat",n,r,i,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&fe(j1e),this.children=this.getChildren(t).map((o,a)=>LR(o,this,this.getName(`concat_${a}`),void 0,i))}parseData(){this.component.data=sx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}un(this.component.selection).some(t=>eo(t))&&kM(RM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return BS(t)?t.vconcat:pR(t)?t.hconcat:t.concat}parseLayoutSize(){Twe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=AR(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function kwe(e){return e===!1||e===null}const Nwe={disable:1,gridScale:1,scale:1,...zq,labelExpr:1,encode:1},FY=le(Nwe);class FR extends ws{explicit;implicit;mainExtracted;constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new FR(je(this.explicit),je(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!kwe(this.get(t))}hasOrientSignalRef(){return Ce(this.explicit.orient)}}function Fwe(e,t,n){const{encoding:r,config:i}=e,o=gn(r[t])??gn(r[_o(t)]),a=e.axis(t)||{},{format:s,formatType:l}=a;if(mc(l))return{text:fa({fieldOrDatumDef:o,field:"datum.value",format:s,formatType:l,config:i}),...n};if(s===void 0&&l===void 0&&i.customFormatTypes){if(Id(o)==="quantitative"){if(Md(o)&&o.stack==="normalize"&&i.normalizedNumberFormatType)return{text:fa({fieldOrDatumDef:o,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:fa({fieldOrDatumDef:o,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Id(o)==="temporal"&&i.timeFormatType&&he(o)&&!o.timeUnit)return{text:fa({fieldOrDatumDef:o,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function Pwe(e){return _s.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Vwe(n,e)]),t),{})}const $we={bottom:"top",top:"bottom",left:"right",right:"left"};function zwe(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const o of le(i.component.axes))n.axis[o]=TR(e.component.resolve,o),n.axis[o]==="shared"&&(t[o]=Lwe(t[o],i.component.axes[o]),t[o]||(n.axis[o]="independent",delete t[o]))}for(const i of _s){for(const o of e.children)if(o.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(o.component.axes[i]);for(const a of o.component.axes[i]){const{value:s,explicit:l}=a.getWithExplicit("orient");if(!Ce(s)){if(r[s]>0&&!l){const u=$we[s];r[s]>r[u]&&a.set("orient",u,!1)}r[s]++}}}delete o.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[o,a]of(t[i]||[]).entries())o>0&&a.get("grid")&&!a.explicit.grid&&(a.implicit.grid=!1)}}function Lwe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],o=t[r];if(!!i!=!!o)return;if(i&&o){const a=i.getWithExplicit("orient"),s=o.getWithExplicit("orient");if(a.explicit&&s.explicit&&a.value!==s.value)return;e[r]=jwe(i,o)}}}else return t.map(n=>n.clone());return e}function jwe(e,t){for(const n of FY){const r=Lu(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,o)=>{switch(n){case"title":return BH(i,o);case"gridScale":return{explicit:i.explicit,value:nn(i.value,o.value)}}return HS(i,o,n,"axis")});e.setWithExplicit(n,r)}return e}function Uwe(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ce(n.labelAngle)?n.labelAngle:Ug(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===eY(r,i))return!0}return e===n[t]}const Bwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Vwe(e,t){let n=t.axis(e);const r=new FR,i=gn(t.encoding[e]),{mark:o,config:a}=t,s=n?.orient||a[e==="x"?"axisX":"axisY"]?.orient||a.axis?.orient||OEe(e),l=t.getScaleComponent(e).get("type"),u=_Ee(e,l,s,t.config),f=n!==void 0?!n:nC("disable",a.style,n?.style,u).configValue;if(r.set("disable",f,n!==void 0),f)return r;n=n||{};const d=TEe(i,n,e,a.style,u),p=wq(n.formatType,i,l),g=Eq(i,i.type,n.format,n.formatType,a,!0),y={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:l,orient:s,labelAngle:d,format:g,formatType:p,mark:o,config:a};for(const x of FY){const _=x in f9?f9[x](y):z4(x)?n[x]:void 0,T=_!==void 0,A=Uwe(_,x,n,t,e);if(T&&A)r.set(x,_,A);else{const{configValue:w=void 0,configFrom:C=void 0}=z4(x)&&x!=="values"?nC(x,a.style,n.style,u):{},D=w!==void 0;T&&!D?r.set(x,_,A):(C!=="vgAxisConfig"||Bwe.has(x)&&D||zm(w)||Ce(w))&&r.set(x,w,!1)}}const v=n.encoding??{},b=$q.reduce((x,_)=>{if(!r.hasAxisPart(_))return x;const T=oY(v[_]??{},t),A=_==="labels"?Fwe(t,e,T):T;return A!==void 0&&!Rt(A)&&(x[_]={update:A}),x},{});return Rt(b)||r.set("encode",b,!!n.encoding||n.labelAngle!==void 0),r}function Hwe({encoding:e,size:t}){for(const n of _s){const r=qr(n);co(t[r])&&vu(e[n])&&(delete t[r],fe(YH(r)))}return t}const qwe={vgMark:"arc",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Sr("x",e,{defaultPos:"mid"}),...Sr("y",e,{defaultPos:"mid"}),...ps(e,"radius"),...ps(e,"theta")})},Gwe={vgMark:"area",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...q1("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...q1("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...xR(e)})},Ywe={vgMark:"rect",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ps(e,"x"),...ps(e,"y")})},Wwe={vgMark:"shape",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&he(n)&&n.type===ih?{field:be(n,{expr:"datum"})}:{}}]}},Xwe={vgMark:"image",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...ps(e,"x"),...ps(e,"y"),...bR(e,"url")})},Qwe={vgMark:"line",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Sr("x",e,{defaultPos:"mid"}),...Sr("y",e,{defaultPos:"mid"}),...Ln("size",e,{vgChannel:"strokeWidth"}),...xR(e)})},Zwe={vgMark:"trail",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Sr("x",e,{defaultPos:"mid"}),...Sr("y",e,{defaultPos:"mid"}),...Ln("size",e),...xR(e)})};function PR(e,t){const{config:n}=e;return{...Wi(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Sr("x",e,{defaultPos:"mid"}),...Sr("y",e,{defaultPos:"mid"}),...Ln("size",e),...Ln("angle",e),...Kwe(e,n,t)}}function Kwe(e,t,n){return n?{shape:{value:n}}:Ln("shape",e)}const Jwe={vgMark:"symbol",encodeEntry:e=>PR(e)},eAe={vgMark:"symbol",encodeEntry:e=>PR(e,"circle")},tAe={vgMark:"symbol",encodeEntry:e=>PR(e,"square")},nAe={vgMark:"rect",encodeEntry:e=>({...Wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ps(e,"x"),...ps(e,"y")})},rAe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...q1("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...q1("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Ln("size",e,{vgChannel:"strokeWidth"})}}},iAe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Wi(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...Sr("x",e,{defaultPos:"mid"}),...Sr("y",e,{defaultPos:"mid"}),...bR(e),...Ln("size",e,{vgChannel:"fontSize"}),...Ln("angle",e),...s9("align",aAe(e.markDef,n,t)),...s9("baseline",oAe(e.markDef,n,t)),...Sr("radius",e,{defaultPos:null}),...Sr("theta",e,{defaultPos:null})}}};function aAe(e,t,n){if(Ct("align",e,n)===void 0)return"center"}function oAe(e,t,n){if(Ct("baseline",e,n)===void 0)return"middle"}const sAe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"x":"y",o=r==="horizontal"?"y":"x",a=r==="horizontal"?"height":"width";return{...Wi(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ps(e,i),...Sr(o,e,{defaultPos:"mid",vgChannel:o==="y"?"yc":"xc"}),[a]:Pt(Ct("thickness",n,t))}}},$0={arc:qwe,area:Gwe,bar:Ywe,circle:eAe,geoshape:Wwe,image:Xwe,line:Qwe,point:Jwe,rect:nAe,rule:rAe,square:tAe,text:iAe,tick:sAe,trail:Zwe};function uAe(e){if(Je([kS,MS,mSe],e.mark)){const t=Hq(e.mark,e.encoding);if(t.length>0)return lAe(e,t)}else if(e.mark===RS){const t=jT.some(n=>Ct(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return cAe(e)}return $R(e)}const T9="faceted_path_";function lAe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:T9+e.requestDataName(qt.Main),data:e.requestDataName(qt.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:$R(e,{fromPrefix:T9})}]}const C9="stack_group_";function cAe(e){const[t]=$R(e,{fromPrefix:C9}),n=e.scaleName(e.stack.fieldChannel),r=(u={})=>e.vgField(e.stack.fieldChannel,u),i=(u,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${u}(${d.map(p=>`scale('${n}',${p})`).join(",")})`};let o,a;e.stack.fieldChannel==="x"?(o={...wd(t.encode.update,["y","yc","y2","height",...jT]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},a={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...fi(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(o={...wd(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},a={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...fi(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const u of jT){const f=uo(u,e.markDef,e.config);t.encode.update[u]?(o[u]=t.encode.update[u],delete t.encode.update[u]):f&&(o[u]=Pt(f)),f&&(t.encode.update[u]={value:0})}const s=[];if(e.stack.groupbyChannels?.length>0)for(const u of e.stack.groupbyChannels){const f=e.fieldDef(u),d=be(f);d&&s.push(d),(f?.bin||f?.timeUnit)&&s.push(be(f,{binSuffix:"end"}))}return o=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((u,f)=>{if(t.encode.update[f])return{...u,[f]:t.encode.update[f]};{const d=uo(f,e.markDef,e.config);return d!==void 0?{...u,[f]:Pt(d)}:u}},o),o.stroke&&(o.strokeForeground={value:!0},o.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(qt.Main),name:C9+e.requestDataName(qt.Main),groupby:s,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:o},marks:[{type:"group",encode:{update:a},marks:[t]}]}]}function fAe(e){const{encoding:t,stack:n,mark:r,markDef:i,config:o}=e,a=t.order;if(!(!ae(a)&&va(a)&&zT(a.value)||!a&&zT(Ct("order",i,o)))){if((ae(a)||he(a))&&!n)return LH(a,{expr:"datum"});if(el(r)){const s=i.orient==="horizontal"?"y":"x",l=t[s];if(he(l))return{field:s}}}}function $R(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:o}=e,a=nn(r.clip,dAe(e),hAe(e)),s=$H(r),l=i.key,u=fAe(e),f=pAe(e),d=Ct("aria",r,o),p=$0[n].postEncodingTransform?$0[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:$0[n].vgMark,...a?{clip:a}:{},...s?{style:s}:{},...l?{key:l.field}:{},...u?{sort:u}:{},...f||{},...d===!1?{aria:d}:{},from:{data:t.fromPrefix+e.requestDataName(qt.Main)},encode:{update:$0[n].encodeEntry(e)},...p?{transform:p}:{}}]}function dAe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function hAe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function pAe(e){if(!e.component.selection)return null;const t=le(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=le(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class PY extends MY{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,r,i={},o){super(t,"unit",n,r,o,void 0,j4(t)?t.view:void 0);const a=lo(t.mark)?{...t.mark}:{type:t.mark},s=a.type;a.filled===void 0&&(a.filled=Kxe(a,o,{graticule:t.data&&yR(t.data)}));const l=this.encoding=nxe(t.encoding||{},s,a.filled,o);this.markDef=fG(a,l,o),this.size=Hwe({encoding:l,size:j4(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=cG(this.markDef,l),this.specifiedScales=this.initScales(s,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(u=>dR(u))}get hasProjection(){const{encoding:t}=this,n=this.mark===mq,r=t&&Wve.some(i=>Ue(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return DM.reduce((r,i)=>{const o=gn(n[i]);return o&&(r[i]=this.initScale(o.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=$n(t);return ae(n)&&(i.domain=n.map(ai)),ae(r)&&(i.range=r.map(ai)),i}initAxes(t){return _s.reduce((n,r)=>{const i=t[r];if(Ue(i)||r===Ut&&Ue(t.x2)||r===Rn&&Ue(t.y2)){const o=Ue(i)?i.axis:void 0;n[r]=o&&this.initAxis({...o})}return n},{})}initAxis(t){const n=le(t),r={};for(const i of n){const o=t[i];r[i]=zm(o)?PH(o):ai(o)}return r}initLegends(t){return a1e.reduce((n,r)=>{const i=gn(t[r]);if(i&&s1e(r)){const o=i.legend;n[r]=o&&$n(o)}return n},{})}parseData(){this.component.data=sx(this)}parseLayoutSize(){Cwe(this)}parseSelections(){this.component.selection=vEe(this,this.selection)}parseMarkGroup(){this.component.mark=uAe(this)}parseAxesAndHeaders(){this.component.axes=Pwe(this)}assembleSelectionTopLevelSignals(t){return q_e(this,t)}assembleSignals(){return[...ZG(this),...V_e(this,[])]}assembleSelectionData(t){return G_e(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return AR(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+AG)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!lh(this.parent))&&(t=OG(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return Xl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return ba(n)}typedFieldDef(t){const n=this.fieldDef(t);return Ar(n)?n:null}}class zR extends kR{children;constructor(t,n,r,i,o){super(t,"layer",n,r,o,t.resolve,t.view);const a={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((s,l)=>{if(VS(s))return new zR(s,this,this.getName(`layer_${l}`),a,o);if(Es(s))return new PY(s,this,this.getName(`layer_${l}`),a,o);throw new Error(IM(s))})}parseData(){this.component.data=sx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Awe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of le(t.component.selection))this.component.selection[n]=t.component.selection[n]}un(this.component.selection).some(t=>eo(t))&&kM(RM)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){zwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),ZG(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),AR(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of Se(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Y_e(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),pY(this))}}function LR(e,t,n,r,i){if(PS(e))return new gg(e,t,n,i);if(VS(e))return new zR(e,t,n,r,i);if(Es(e))return new PY(e,t,n,r,i);if(Txe(e))return new Rwe(e,t,n,i);throw new Error(IM(e))}function gAe(e,t={}){t.logger&&Ibe(t.logger),t.fieldTitle&&Nq(t.fieldTitle);try{const n=lG(ib(t.config,e.config)),r=vG(e,n),i=LR(r,null,"",void 0,n);return i.parse(),L2e(i.component.data,i),{spec:yAe(i,mAe(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&Mbe(),t.fieldTitle&&YSe()}}function mAe(e,t,n,r){const i=r.component.layoutSize.get("width"),o=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):Ee(t)&&(t={type:t}),i&&o&&k_e(t.type)){if(i==="step"&&o==="step")fe(w4()),t.type="pad";else if(i==="step"||o==="step"){const a=i==="step"?"width":"height";fe(w4(AS(a)));const s=a==="width"?"height":"width";t.type=N_e(s)}}return{...le(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...K4(n,!1),...K4(e,!0)}}function yAe(e,t,n={},r){const i=e.config?jxe(e.config):void 0,o=xwe(e.component.data,n),a=e.assembleSelectionData(o),s=e.assembleProjections(),l=e.assembleTitle(),u=e.assembleGroupStyle(),f=e.assembleGroupEncodeEntry(!0);let d=e.assembleLayoutSignals();d=d.filter(y=>(y.name==="width"||y.name==="height")&&y.value!==void 0?(t[y.name]=+y.value,!1):!0);const{params:p,...g}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...g,...l?{title:l}:{},...u?{style:u}:{},...f?{encode:{update:f}}:{},data:a,...s.length>0?{projections:s}:{},...e.assembleGroup([...d,...e.assembleSelectionTopLevelSignals([]),...aG(p)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const vAe=Bve.version,bAe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Td,accessPathWithDatum:SM,accessWithDatumToUnescapedPath:St,compile:gAe,contains:Je,deepEqual:ui,deleteNestedProperty:F1,duplicate:je,entries:Pu,every:yM,fieldIntersection:bM,flatAccessWithDatum:yH,getFirstDefined:nn,hasIntersection:vM,hasProperty:ce,hash:rt,internalField:SH,isBoolean:jg,isEmpty:Rt,isEqual:Hve,isInternalField:xH,isNullOrFalse:zT,isNumeric:bS,keys:le,logicalExpr:hg,mergeDeep:gH,never:pH,normalize:vG,normalizeAngle:Ug,omit:fi,pick:wd,prefixGenerator:LT,removePathFromField:nh,replaceAll:cc,replacePathInField:Hi,resetIdCounter:Gve,setEqual:mH,some:Ad,stringify:yt,titleCase:Cm,unique:Wa,uniqueId:bH,vals:un,varName:jt,version:vAe},Symbol.toStringTag,{value:"Module"}));var z0={},D9;function SAe(){if(D9)return z0;D9=1,Object.defineProperty(z0,"__esModule",{value:!0});function e(t){var n=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,r=n.exec(t).slice(1,3),i=r[0],o=r[1];return{library:i,version:o}}return z0.default=e,z0}var xAe=SAe();const $Y=Yg(xAe);var _Ae="2.15.0",EAe={version:_Ae};const $f="#fff",O9="#888",wAe={background:"#333",view:{stroke:O9},title:{color:$f,subtitleColor:$f},style:{"guide-label":{fill:$f},"guide-title":{fill:$f}},axis:{domainColor:$f,gridColor:O9,tickColor:$f}},El="#4572a7",AAe={background:"#fff",arc:{fill:El},area:{fill:El},line:{stroke:El,strokeWidth:2},path:{stroke:El},rect:{fill:El},shape:{stroke:El},symbol:{fill:El,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},wl="#30a2da",jw="#cbcbcb",TAe="#999",CAe="#333",I9="#f0f0f0",M9="#333",DAe={arc:{fill:wl},area:{fill:wl},axis:{domainColor:jw,grid:!0,gridColor:jw,gridWidth:1,labelColor:TAe,labelFontSize:10,titleColor:CAe,tickColor:jw,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:I9,group:{fill:I9},legend:{labelColor:M9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:M9,titleFontSize:14,titlePadding:10},line:{stroke:wl,strokeWidth:2},path:{stroke:wl,strokeWidth:.5},rect:{fill:wl},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:wl},bar:{binSpacing:2,fill:wl,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Al="#000",OAe={group:{fill:"#e5e5e5"},arc:{fill:Al},area:{fill:Al},line:{stroke:Al},path:{stroke:Al},rect:{fill:Al},shape:{stroke:Al},symbol:{fill:Al,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},IAe=22,MAe="normal",R9="Benton Gothic, sans-serif",k9=11.5,RAe="normal",Tl="#82c6df",Uw="Benton Gothic Bold, sans-serif",N9="normal",F9=13,Dp={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},kAe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Uw,fontSize:IAe,fontWeight:MAe},arc:{fill:Tl},area:{fill:Tl},line:{stroke:Tl,strokeWidth:2},path:{stroke:Tl},rect:{fill:Tl},shape:{stroke:Tl},symbol:{fill:Tl,size:30},axis:{labelFont:R9,labelFontSize:k9,labelFontWeight:RAe,titleFont:Uw,titleFontSize:F9,titleFontWeight:N9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:R9,labelFontSize:k9,symbolType:"square",titleFont:Uw,titleFontSize:F9,titleFontWeight:N9},range:{category:Dp["category-6"],diverging:Dp["fireandice-6"],heatmap:Dp["fire-7"],ordinal:Dp["fire-7"],ramp:Dp["fire-7"]}},Cl="#ab5787",L0="#979797",NAe={background:"#f9f9f9",arc:{fill:Cl},area:{fill:Cl},line:{stroke:Cl},path:{stroke:Cl},rect:{fill:Cl},shape:{stroke:Cl},symbol:{fill:Cl,size:30},axis:{domainColor:L0,domainWidth:.5,gridWidth:.2,labelColor:L0,tickColor:L0,tickWidth:.2,titleColor:L0},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Dl="#3e5c69",FAe={background:"#fff",arc:{fill:Dl},area:{fill:Dl},line:{stroke:Dl},path:{stroke:Dl},rect:{fill:Dl},shape:{stroke:Dl},symbol:{fill:Dl},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Ii="#1696d2",P9="#000000",PAe="#FFFFFF",j0="Lato",Bw="Lato",$Ae="Lato",zAe="#DEDDDD",LAe=18,Op={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},jAe={background:PAe,title:{anchor:"start",fontSize:LAe,font:j0},axisX:{domain:!0,domainColor:P9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Bw,labelAngle:0,tickColor:P9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:j0},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:zAe,gridWidth:1,labelFontSize:12,labelFont:Bw,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:j0,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Bw,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:j0,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Op["six-groups-cat-1"],diverging:Op["diverging-colors"],heatmap:Op["diverging-colors"],ordinal:Op["six-groups-seq"],ramp:Op["shades-blue"]},area:{fill:Ii},rect:{fill:Ii},line:{color:Ii,stroke:Ii,strokeWidth:5},trail:{color:Ii,stroke:Ii,strokeWidth:0,size:1},path:{stroke:Ii,strokeWidth:.5},point:{filled:!0},text:{font:$Ae,color:Ii,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Ii,stroke:null}},arc:{fill:Ii},shape:{stroke:Ii},symbol:{fill:Ii,size:30}},Ol="#3366CC",$9="#ccc",U0="Arial, sans-serif",UAe={arc:{fill:Ol},area:{fill:Ol},path:{stroke:Ol},rect:{fill:Ol},shape:{stroke:Ol},symbol:{stroke:Ol},circle:{fill:Ol},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:U0,fontSize:12},"guide-title":{font:U0,fontSize:12},"group-title":{font:U0,fontSize:12}},title:{font:U0,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:$9,tickColor:$9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},jR=e=>e*(1/3+1),z9=jR(9),L9=jR(10),j9=jR(12),Ip="Segoe UI",U9="wf_standard-font, helvetica, arial, sans-serif",B9="#252423",Mp="#605E5C",V9="transparent",BAe="#C8C6C4",ta="#118DFF",VAe="#12239E",HAe="#E66C37",qAe="#6B007B",GAe="#E044A7",YAe="#744EC2",WAe="#D9B300",XAe="#D64550",zY=ta,LY="#DEEFFF",H9=[LY,zY],QAe=[LY,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",zY],ZAe={view:{stroke:V9},background:V9,font:Ip,header:{titleFont:U9,titleFontSize:j9,titleColor:B9,labelFont:Ip,labelFontSize:L9,labelColor:Mp},axis:{ticks:!1,grid:!1,domain:!1,labelColor:Mp,labelFontSize:z9,titleFont:U9,titleColor:B9,titleFontSize:j9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:BAe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:ta},line:{stroke:ta,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:Ip,fontSize:z9,fill:Mp},arc:{fill:ta},area:{fill:ta,line:!0,opacity:.6},path:{stroke:ta},rect:{fill:ta},point:{fill:ta,filled:!0,size:75},shape:{stroke:ta},symbol:{fill:ta,strokeWidth:1.5,size:50},legend:{titleFont:Ip,titleFontWeight:"bold",titleColor:Mp,labelFont:Ip,labelFontSize:L9,labelColor:Mp,symbolType:"circle",symbolSize:75},range:{category:[ta,VAe,HAe,qAe,GAe,YAe,WAe,XAe],diverging:H9,heatmap:H9,ordinal:QAe}},Vw='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',KAe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Hw=400,B0={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},JAe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],eTe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function ux({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=B0.gridBg[e],i=B0.textPrimary[e],o=B0.textSecondary[e],a=n==="dark"?JAe:eTe,s=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:s},area:{fill:s},path:{stroke:s},rect:{fill:s},shape:{stroke:s},symbol:{stroke:s},circle:{fill:s},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:Vw,fontWeight:600},axis:{labelColor:o,labelFontSize:12,labelFont:KAe,labelFontWeight:Hw,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:B0.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:Vw,fill:o,fontWeight:Hw},"guide-title":{font:Vw,fill:o,fontWeight:Hw}},range:{category:a,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const tTe=ux({theme:"white",background:"#ffffff"}),nTe=ux({theme:"g10",background:"#f4f4f4"}),rTe=ux({theme:"g90",background:"#262626"}),iTe=ux({theme:"g100",background:"#161616"}),aTe=EAe.version,oTe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:nTe,carbong100:iTe,carbong90:rTe,carbonwhite:tTe,dark:wAe,excel:AAe,fivethirtyeight:DAe,ggplot2:OAe,googlecharts:UAe,latimes:kAe,powerbi:ZAe,quartz:NAe,urbaninstitute:jAe,version:aTe,vox:FAe},Symbol.toStringTag,{value:"Module"})),sTe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,jY="vg-tooltip-element",uTe={offsetX:10,offsetY:10,id:jY,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:lTe,maxDepth:2};function lTe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function cTe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return sTe.toString().replace(jY,e)}function ch(e,t,n){return e.fields=t||[],e.fname=n,e}function fTe(e){return e.length===1?dTe(e[0]):hTe(e)}const dTe=e=>function(t){return t[e]},hTe=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function qw(e){throw Error(e)}function pTe(e){const t=[],n=e.length;let r=null,i=0,o="",a,s,l;e=e+"";function u(){t.push(o+e.substring(a,s)),o="",a=s+1}for(a=s=0;s<n;++s)if(l=e[s],l==="\\")o+=e.substring(a,s++),a=s;else if(l===r)u(),r=null,i=-1;else{if(r)continue;a===i&&l==='"'||a===i&&l==="'"?(a=s+1,r=l):l==="."&&!i?s>a?u():a=s+1:l==="["?(s>a&&u(),i=a=s+1):l==="]"&&(i||qw("Access path missing open bracket: "+e),i>0&&u(),i=0,a=s+1)}return i&&qw("Access path missing closing bracket: "+e),r&&qw("Access path missing closing quote: "+e),s>a&&(s++,u()),t}function gTe(e,t,n){const r=pTe(e);return e=r.length===1?r[0]:e,ch(fTe(r),[e],e)}gTe("id");ch(e=>e,[],"identity");ch(()=>0,[],"zero");ch(()=>1,[],"one");ch(()=>!0,[],"true");ch(()=>!1,[],"false");var UY=Array.isArray;function X1(e){return e===Object(e)}const q9=e=>e!=="__proto__";function BY(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const o in i)if(o==="signals")r.signals=mTe(r.signals,i.signals);else{const a=o==="legend"?{layout:1}:o==="style"?!0:null;VY(r,o,i[o],a)}return r},{})}function VY(e,t,n,r){if(!q9(t))return;let i,o;if(X1(n)&&!UY(n)){o=X1(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?VY(o,i,n[i]):q9(i)&&(o[i]=n[i])}else e[t]=n}function mTe(e,t){if(e==null)return t;const n={},r=[];function i(o){n[o.name]||(n[o.name]=1,r.push(o))}return t.forEach(i),e.forEach(i),r}function yTe(e){return typeof e=="boolean"}function Q1(e){return typeof e=="string"}var vTe=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};function bTe(e,t,n){if(UY(e))return`[${e.map(r=>t(Q1(r)?r:G9(r,n))).join(", ")}]`;if(X1(e)){let r="";const i=e,{title:o}=i,a=vTe(i,["title"]);o&&(r+=`<h2>${t(o)}</h2>`);const s=Object.keys(a);if(s.length>0){r+="<table>";for(const l of s){let u=a[l];u!==void 0&&(X1(u)&&(u=G9(u,n)),r+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(u)}</td></tr>`)}r+="</table>"}return r||"{}"}return t(e)}function STe(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function G9(e,t){return JSON.stringify(e,STe(t))}function xTe(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let o=e.clientY+r;return o+t.height>window.innerHeight&&(o=+e.clientY-r-t.height),{x:i,y:o}}class _Te{constructor(t){this.options=Object.assign(Object.assign({},uTe),t);const n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=cTe(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,n,r,i){if(i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=bTe(i,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:o,y:a}=xTe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${a}px; left: ${o}px`)}}function ETe(e,t,n){const r=e.open(t),i=250;let o=40;function a(l){l.source===r&&(o=0,e.removeEventListener("message",a,!1))}e.addEventListener("message",a,!1);function s(){o<=0||(r.postMessage(n,"*"),setTimeout(s,i),o-=1)}setTimeout(s,i)}const wTe=`.vega-embed {
  position: relative;
  display: inline-block; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: scroll;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function HY(e,...t){for(const n of t)ATe(e,n);return e}function ATe(e,t){for(const n of Object.keys(t))Ud(e,n,t[n],!0)}var Gw;const lu=jve;let Gg=bAe;const V0=typeof window<"u"?window:void 0;Gg===void 0&&(!((Gw=V0?.vl)===null||Gw===void 0)&&Gw.compile)&&(Gg=V0.vl);const TTe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},CTe={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},eg={vega:"Vega","vega-lite":"Vega-Lite"},Z1={vega:lu.version,"vega-lite":Gg?Gg.version:"not available"},DTe={vega:e=>e,"vega-lite":(e,t)=>Gg.compile(e,{config:t}).spec},OTe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`;function ITe(e){return typeof e=="function"}function Y9(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,o=`</code></pre>${n}</body></html>`,a=window.open("");a.document.write(i+e+o),a.document.title=`${eg[r]} JSON Source`}function MTe(e,t){var n;if(e.$schema){const r=$Y(e.$schema);t&&t!==r.library&&console.warn(`The given visualization spec is written in ${eg[r.library]}, but mode argument sets ${(n=eg[t])!==null&&n!==void 0?n:t}.`);const i=r.library;return a8.satisfies(Z1[i],`^${r.version.slice(1)}`)||console.warn(`The input spec uses ${eg[i]} ${r.version}, but the current version of ${eg[i]} is v${Z1[i]}.`),i}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function RTe(e){return!!(e&&"load"in e)}function kTe(e,t,n={}){var r,i,o;return mv(this,void 0,void 0,function*(){const a=RTe(n.loader)?n.loader:lu.loader(n.loader),s=Q1(t)?JSON.parse(yield a.load(t)):t,l=yield W9((r=s.usermeta&&s.usermeta.embedOptions)!==null&&r!==void 0?r:{},a),u=yield W9(n,a),f=Object.assign(Object.assign({},HY(u,l)),{config:BY((i=u.config)!==null&&i!==void 0?i:{},(o=l.config)!==null&&o!==void 0?o:{})});return yield NTe(e,s,f,a)})}function W9(e,t){var n;return mv(this,void 0,void 0,function*(){const r=Q1(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},i=Q1(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),i?{patch:i}:{}),r?{config:r}:{})})}function NTe(e,t,n={},r){var i,o,a,s,l,u;return mv(this,void 0,void 0,function*(){const f=n.theme?BY(oTe[n.theme],(i=n.config)!==null&&i!==void 0?i:{}):n.config,d=yTe(n.actions)?n.actions:HY({},TTe,(o=n.actions)!==null&&o!==void 0?o:{}),p=Object.assign(Object.assign({},CTe),n.i18n),g=(a=n.renderer)!==null&&a!==void 0?a:"canvas",y=(s=n.logLevel)!==null&&s!==void 0?s:lu.Warn,v=(l=n.downloadFileName)!==null&&l!==void 0?l:"visualization";if(n.defaultStyle!==!1){const M="vega-embed-style";if(!document.getElementById(M)){const k=document.createElement("style");k.id=M,k.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?wTe.toString():n.defaultStyle,document.head.appendChild(k)}}const b=MTe(t,n.mode);let x=DTe[b](t,f);if(b==="vega-lite"&&x.$schema){const M=$Y(x.$schema);a8.satisfies(Z1.vega,`^${M.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${M.version}, but current version is v${Z1.vega}.`)}const _=typeof e=="string"?document.querySelector(e):e;if(!_)throw Error(`${e} does not exist`);_.classList.add("vega-embed"),d&&_.classList.add("has-actions"),_.innerHTML="";const T=n.patch;T&&(T instanceof Function?x=T(x):x=K1(x,T,!0,!1).newDocument),n.formatLocale&&lu.formatLocale(n.formatLocale),n.timeFormatLocale&&lu.timeFormatLocale(n.timeFormatLocale);const A=lu.parse(x,b==="vega-lite"?{}:f),w=new lu.View(A,{loader:r,logLevel:y,renderer:g});if(n.tooltip!==!1){let M;ITe(n.tooltip)?M=n.tooltip:M=new _Te(n.tooltip===!0?{}:n.tooltip).call,w.tooltip(M)}let{hover:C}=n;if(C===void 0&&(C=b==="vega"),C){const{hoverSet:M,updateSet:k}=typeof C=="boolean"?{}:C;w.hover(M,k)}n&&(n.width!=null&&w.width(n.width),n.height!=null&&w.height(n.height),n.padding!=null&&w.padding(n.padding)),yield w.initialize(e).runAsync();let D;if(d!==!1){let M=_;if(n.defaultStyle!==!1){const R=document.createElement("details");R.title=p.CLICK_TO_VIEW_ACTIONS,_.append(R),M=R;const z=document.createElement("summary");z.innerHTML=OTe,R.append(z),D=P=>{R.contains(P.target)||R.removeAttribute("open")},document.addEventListener("click",D)}const k=document.createElement("div");if(M.append(k),k.classList.add("vega-actions"),d===!0||d.export!==!1){for(const R of["svg","png"])if(d===!0||d.export===!0||d.export[R]){const z=p[`${R.toUpperCase()}_ACTION`],P=document.createElement("a");P.text=z,P.href="#",P.target="_blank",P.download=`${v}.${R}`,P.addEventListener("mousedown",function($){return mv(this,void 0,void 0,function*(){$.preventDefault();const N=yield w.toImageURL(R,n.scaleFactor);this.href=N})}),k.append(P)}}if(d===!0||d.source!==!1){const R=document.createElement("a");R.text=p.SOURCE_ACTION,R.href="#",R.addEventListener("mousedown",function(z){var P,$;Y9(OE(t),(P=n.sourceHeader)!==null&&P!==void 0?P:"",($=n.sourceFooter)!==null&&$!==void 0?$:"",b),z.preventDefault()}),k.append(R)}if(b==="vega-lite"&&(d===!0||d.compiled!==!1)){const R=document.createElement("a");R.text=p.COMPILED_ACTION,R.href="#",R.addEventListener("mousedown",function(z){var P,$;Y9(OE(x),(P=n.sourceHeader)!==null&&P!==void 0?P:"",($=n.sourceFooter)!==null&&$!==void 0?$:"","vega"),z.preventDefault()}),k.append(R)}if(d===!0||d.editor!==!1){const R=(u=n.editorUrl)!==null&&u!==void 0?u:"https://vega.github.io/editor/",z=document.createElement("a");z.text=p.EDITOR_ACTION,z.href="#",z.addEventListener("mousedown",function(P){ETe(window,R,{config:f,mode:b,renderer:g,spec:OE(t)}),P.preventDefault()}),k.append(z)}}function I(){D&&document.removeEventListener("click",D),w.finalize()}return{view:w,spec:t,vgSpec:x,finalize:I}})}function FTe(e){return!!e&&{}.toString.call(e)==="[object Function]"}function PTe(e,t,n){n&&(FTe(n)?n(e.data(t)):e.change(t,lu.changeset().remove(()=>!0).insert(n)))}function $Te(e,t){Object.keys(t).forEach(n=>{PTe(e,n,t[n])})}function qY(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const GY=()=>{};function Yw(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}var Ww,X9;function zTe(){return X9||(X9=1,Ww=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,o;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(o=Object.keys(t),r=o.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,o[i]))return!1;for(i=r;i--!==0;){var a=o[i];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}),Ww}var LTe=zTe();const jTe=Yg(LTe);function UTe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=qY([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!jTe(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function Q9(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function Xw(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class YY extends bu.PureComponent{constructor(){super(...arguments),tg(this,"containerRef",bu.createRef()),tg(this,"resultPromise",void 0),tg(this,"handleError",t=>{const{onError:n=GY}=this.props;n(t,this.containerRef.current),console.warn(t)}),tg(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=qY([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=UTe(Xw(this.props),Xw(t)),{signalListeners:i}=this.props,{signalListeners:o}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const a=!Zw(i,o);this.modifyView(s=>{r.width!==!1&&s.width(r.width),r.height!==!1&&s.height(r.height),a&&(o&&Q9(s,o),i&&Yw(s,i)),s.run()})}else Zw(i,o)||this.modifyView(a=>{o&&Q9(a,o),i&&Yw(a,i),a.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:o,...a}=this.props;if(this.containerRef.current){const s=Xw(this.props);this.resultPromise=kTe(this.containerRef.current,s,a).then(l=>{if(l){const{view:u}=l;Yw(u,r)&&u.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return bu.createElement("div",{ref:this.containerRef,className:t,style:n})}}tg(YY,"propTypes",{className:zF.string,onError:zF.func});function dC(){return dC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dC.apply(this,arguments)}function hC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const BTe={};class WY extends bu.PureComponent{constructor(){super(...arguments),hC(this,"vegaEmbed",bu.createRef()),hC(this,"handleNewView",t=>{this.update();const{onNewView:n=GY}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){Zw(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{$Te(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return bu.createElement(YY,dC({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}hC(WY,"defaultProps",{data:BTe});function pC(){return pC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pC.apply(this,arguments)}function VTe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HTe(e){let{mode:t,spec:n}=e;class r extends bu.PureComponent{render(){return bu.createElement(WY,pC({mode:t,spec:n},this.props))}}return VTe(r,"getSpec",function(){return n}),r}function qTe(e){Qw.useEffect(()=>{console.debug("[Extension.jsx] Props Changed",e)},[e]),Qw.useEffect(()=>{console.debug("[Extension.jsx] useEffect"),tableau.extensions.initializeAsync({configure:t}).then(()=>{})},[]);function t(){console.debug("[Extension.jsx] Opening configure popup");const r=`${window.location.origin}/configure`;tableau.extensions.ui.displayDialogAsync(r,null,{height:500,width:500}).then(i=>{console.debug("[Extension.jsx] Dialog was closed with payload:",i),console.debug("[Extension.jsx] Config window closed",e)}).catch(i=>{switch(i.errorCode){case tableau.ErrorCodes.DialogClosedByUser:console.debug("[Extension.jsx] Dialog was closed by user");break;default:console.error("[Extension.jsx]",i.message)}})}const n=HTe({spec:{$schema:"https://vega.github.io/schema/vega-lite/v6.json",data:{values:[{"i-type":"A",count:3,color:"rgb(121, 199, 227)"},{"i-type":"B",count:20,color:"rgb(26, 49, 119)"},{"i-type":"C",count:24,color:"rgb(18, 147, 154)"}]},description:"A simple pie chart with labels.",encoding:{theta:{field:"count",type:"quantitative",stack:!0},color:{field:"color",type:"nominal",legend:null,scale:null}},layer:[{mark:{type:"arc",outerRadius:80}}]}});return Z9.jsx(n,{})}gQ.createRoot(document.getElementById("root")).render(Z9.jsx(qTe,{}));
