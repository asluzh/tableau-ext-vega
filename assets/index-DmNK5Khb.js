(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function Mp(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var iE={exports:{}},Ih={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y5;function sQ(){if(y5)return Ih;y5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,r,a){var s=null;if(a!==void 0&&(s=""+a),r.key!==void 0&&(s=""+r.key),"key"in r){a={};for(var o in r)o!=="key"&&(a[o]=r[o])}else a=r;return r=a.ref,{$$typeof:e,type:i,key:s,ref:r!==void 0?r:null,props:a}}return Ih.Fragment=t,Ih.jsx=n,Ih.jsxs=n,Ih}var v5;function oQ(){return v5||(v5=1,iE.exports=sQ()),iE.exports}var Nw=oQ(),rE={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b5;function uQ(){if(b5)return Ie;b5=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),s=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),h=Symbol.iterator;function p(N){return N===null||typeof N!="object"?null:(N=h&&N[h]||N["@@iterator"],typeof N=="function"?N:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,b={};function S(N,W,ne){this.props=N,this.context=W,this.refs=b,this.updater=ne||y}S.prototype.isReactComponent={},S.prototype.setState=function(N,W){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,W,"setState")},S.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=S.prototype;function w(N,W,ne){this.props=N,this.context=W,this.refs=b,this.updater=ne||y}var A=w.prototype=new _;A.constructor=w,v(A,S.prototype),A.isPureReactComponent=!0;var C=Array.isArray,T={H:null,A:null,T:null,S:null,V:null},k=Object.prototype.hasOwnProperty;function M(N,W,ne,ae,me,be){return ne=be.ref,{$$typeof:e,type:N,key:W,ref:ne!==void 0?ne:null,props:be}}function R(N,W){return M(N.type,W,void 0,void 0,void 0,N.props)}function z(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function U(N){var W={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(ne){return W[ne]})}var L=/\/+/g;function G(N,W){return typeof N=="object"&&N!==null&&N.key!=null?U(""+N.key):W.toString(36)}function j(){}function q(N){switch(N.status){case"fulfilled":return N.value;case"rejected":throw N.reason;default:switch(typeof N.status=="string"?N.then(j,j):(N.status="pending",N.then(function(W){N.status==="pending"&&(N.status="fulfilled",N.value=W)},function(W){N.status==="pending"&&(N.status="rejected",N.reason=W)})),N.status){case"fulfilled":return N.value;case"rejected":throw N.reason}}throw N}function F(N,W,ne,ae,me){var be=typeof N;(be==="undefined"||be==="boolean")&&(N=null);var Ae=!1;if(N===null)Ae=!0;else switch(be){case"bigint":case"string":case"number":Ae=!0;break;case"object":switch(N.$$typeof){case e:case t:Ae=!0;break;case d:return Ae=N._init,F(Ae(N._payload),W,ne,ae,me)}}if(Ae)return me=me(N),Ae=ae===""?"."+G(N,0):ae,C(me)?(ne="",Ae!=null&&(ne=Ae.replace(L,"$&/")+"/"),F(me,W,ne,"",function(ye){return ye})):me!=null&&(z(me)&&(me=R(me,ne+(me.key==null||N&&N.key===me.key?"":(""+me.key).replace(L,"$&/")+"/")+Ae)),W.push(me)),1;Ae=0;var jt=ae===""?".":ae+":";if(C(N))for(var tt=0;tt<N.length;tt++)ae=N[tt],be=jt+G(ae,tt),Ae+=F(ae,W,ne,be,me);else if(tt=p(N),typeof tt=="function")for(N=tt.call(N),tt=0;!(ae=N.next()).done;)ae=ae.value,be=jt+G(ae,tt++),Ae+=F(ae,W,ne,be,me);else if(be==="object"){if(typeof N.then=="function")return F(q(N),W,ne,ae,me);throw W=String(N),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return Ae}function D(N,W,ne){if(N==null)return N;var ae=[],me=0;return F(N,ae,"","",function(be){return W.call(ne,be,me++)}),ae}function P(N){if(N._status===-1){var W=N._result;W=W(),W.then(function(ne){(N._status===0||N._status===-1)&&(N._status=1,N._result=ne)},function(ne){(N._status===0||N._status===-1)&&(N._status=2,N._result=ne)}),N._status===-1&&(N._status=0,N._result=W)}if(N._status===1)return N._result.default;throw N._result}var X=typeof reportError=="function"?reportError:function(N){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof N=="object"&&N!==null&&typeof N.message=="string"?String(N.message):String(N),error:N});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",N);return}console.error(N)};function Z(){}return Ie.Children={map:D,forEach:function(N,W,ne){D(N,function(){W.apply(this,arguments)},ne)},count:function(N){var W=0;return D(N,function(){W++}),W},toArray:function(N){return D(N,function(W){return W})||[]},only:function(N){if(!z(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},Ie.Component=S,Ie.Fragment=n,Ie.Profiler=r,Ie.PureComponent=w,Ie.StrictMode=i,Ie.Suspense=l,Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=T,Ie.__COMPILER_RUNTIME={__proto__:null,c:function(N){return T.H.useMemoCache(N)}},Ie.cache=function(N){return function(){return N.apply(null,arguments)}},Ie.cloneElement=function(N,W,ne){if(N==null)throw Error("The argument must be a React element, but you passed "+N+".");var ae=v({},N.props),me=N.key,be=void 0;if(W!=null)for(Ae in W.ref!==void 0&&(be=void 0),W.key!==void 0&&(me=""+W.key),W)!k.call(W,Ae)||Ae==="key"||Ae==="__self"||Ae==="__source"||Ae==="ref"&&W.ref===void 0||(ae[Ae]=W[Ae]);var Ae=arguments.length-2;if(Ae===1)ae.children=ne;else if(1<Ae){for(var jt=Array(Ae),tt=0;tt<Ae;tt++)jt[tt]=arguments[tt+2];ae.children=jt}return M(N.type,me,void 0,void 0,be,ae)},Ie.createContext=function(N){return N={$$typeof:s,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null},N.Provider=N,N.Consumer={$$typeof:a,_context:N},N},Ie.createElement=function(N,W,ne){var ae,me={},be=null;if(W!=null)for(ae in W.key!==void 0&&(be=""+W.key),W)k.call(W,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(me[ae]=W[ae]);var Ae=arguments.length-2;if(Ae===1)me.children=ne;else if(1<Ae){for(var jt=Array(Ae),tt=0;tt<Ae;tt++)jt[tt]=arguments[tt+2];me.children=jt}if(N&&N.defaultProps)for(ae in Ae=N.defaultProps,Ae)me[ae]===void 0&&(me[ae]=Ae[ae]);return M(N,be,void 0,void 0,null,me)},Ie.createRef=function(){return{current:null}},Ie.forwardRef=function(N){return{$$typeof:o,render:N}},Ie.isValidElement=z,Ie.lazy=function(N){return{$$typeof:d,_payload:{_status:-1,_result:N},_init:P}},Ie.memo=function(N,W){return{$$typeof:f,type:N,compare:W===void 0?null:W}},Ie.startTransition=function(N){var W=T.T,ne={};T.T=ne;try{var ae=N(),me=T.S;me!==null&&me(ne,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(Z,X)}catch(be){X(be)}finally{T.T=W}},Ie.unstable_useCacheRefresh=function(){return T.H.useCacheRefresh()},Ie.use=function(N){return T.H.use(N)},Ie.useActionState=function(N,W,ne){return T.H.useActionState(N,W,ne)},Ie.useCallback=function(N,W){return T.H.useCallback(N,W)},Ie.useContext=function(N){return T.H.useContext(N)},Ie.useDebugValue=function(){},Ie.useDeferredValue=function(N,W){return T.H.useDeferredValue(N,W)},Ie.useEffect=function(N,W,ne){var ae=T.H;if(typeof ne=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(N,W)},Ie.useId=function(){return T.H.useId()},Ie.useImperativeHandle=function(N,W,ne){return T.H.useImperativeHandle(N,W,ne)},Ie.useInsertionEffect=function(N,W){return T.H.useInsertionEffect(N,W)},Ie.useLayoutEffect=function(N,W){return T.H.useLayoutEffect(N,W)},Ie.useMemo=function(N,W){return T.H.useMemo(N,W)},Ie.useOptimistic=function(N,W){return T.H.useOptimistic(N,W)},Ie.useReducer=function(N,W,ne){return T.H.useReducer(N,W,ne)},Ie.useRef=function(N){return T.H.useRef(N)},Ie.useState=function(N){return T.H.useState(N)},Ie.useSyncExternalStore=function(N,W,ne){return T.H.useSyncExternalStore(N,W,ne)},Ie.useTransition=function(){return T.H.useTransition()},Ie.version="19.1.1",Ie}var x5;function JC(){return x5||(x5=1,rE.exports=uQ()),rE.exports}var j9=JC();const tu=Mp(j9);var aE={exports:{}},jh={},sE={exports:{}},oE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function lQ(){return S5||(S5=1,(function(e){function t(D,P){var X=D.length;D.push(P);e:for(;0<X;){var Z=X-1>>>1,N=D[Z];if(0<r(N,P))D[Z]=P,D[X]=N,X=Z;else break e}}function n(D){return D.length===0?null:D[0]}function i(D){if(D.length===0)return null;var P=D[0],X=D.pop();if(X!==P){D[0]=X;e:for(var Z=0,N=D.length,W=N>>>1;Z<W;){var ne=2*(Z+1)-1,ae=D[ne],me=ne+1,be=D[me];if(0>r(ae,X))me<N&&0>r(be,ae)?(D[Z]=be,D[me]=X,Z=me):(D[Z]=ae,D[ne]=X,Z=ne);else if(me<N&&0>r(be,X))D[Z]=be,D[me]=X,Z=me;else break e}}return P}function r(D,P){var X=D.sortIndex-P.sortIndex;return X!==0?X:D.id-P.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],f=[],d=1,h=null,p=3,y=!1,v=!1,b=!1,S=!1,_=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function C(D){for(var P=n(f);P!==null;){if(P.callback===null)i(f);else if(P.startTime<=D)i(f),P.sortIndex=P.expirationTime,t(l,P);else break;P=n(f)}}function T(D){if(b=!1,C(D),!v)if(n(l)!==null)v=!0,k||(k=!0,G());else{var P=n(f);P!==null&&F(T,P.startTime-D)}}var k=!1,M=-1,R=5,z=-1;function U(){return S?!0:!(e.unstable_now()-z<R)}function L(){if(S=!1,k){var D=e.unstable_now();z=D;var P=!0;try{e:{v=!1,b&&(b=!1,w(M),M=-1),y=!0;var X=p;try{t:{for(C(D),h=n(l);h!==null&&!(h.expirationTime>D&&U());){var Z=h.callback;if(typeof Z=="function"){h.callback=null,p=h.priorityLevel;var N=Z(h.expirationTime<=D);if(D=e.unstable_now(),typeof N=="function"){h.callback=N,C(D),P=!0;break t}h===n(l)&&i(l),C(D)}else i(l);h=n(l)}if(h!==null)P=!0;else{var W=n(f);W!==null&&F(T,W.startTime-D),P=!1}}break e}finally{h=null,p=X,y=!1}P=void 0}}finally{P?G():k=!1}}}var G;if(typeof A=="function")G=function(){A(L)};else if(typeof MessageChannel<"u"){var j=new MessageChannel,q=j.port2;j.port1.onmessage=L,G=function(){q.postMessage(null)}}else G=function(){_(L,0)};function F(D,P){M=_(function(){D(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_next=function(D){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var X=p;p=P;try{return D()}finally{p=X}},e.unstable_requestPaint=function(){S=!0},e.unstable_runWithPriority=function(D,P){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var X=p;p=D;try{return P()}finally{p=X}},e.unstable_scheduleCallback=function(D,P,X){var Z=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Z+X:Z):X=Z,D){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=X+N,D={id:d++,callback:P,priorityLevel:D,startTime:X,expirationTime:N,sortIndex:-1},X>Z?(D.sortIndex=X,t(f,D),n(l)===null&&D===n(f)&&(b?(w(M),M=-1):b=!0,F(T,X-Z))):(D.sortIndex=N,t(l,D),v||y||(v=!0,k||(k=!0,G()))),D},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(D){var P=p;return function(){var X=p;p=P;try{return D.apply(this,arguments)}finally{p=X}}}})(oE)),oE}var E5;function cQ(){return E5||(E5=1,sE.exports=lQ()),sE.exports}var uE={exports:{}},In={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5;function fQ(){if(_5)return In;_5=1;var e=JC();function t(l){var f="https://react.dev/errors/"+l;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)f+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+l+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(l,f,d){var h=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:h==null?null:""+h,children:l,containerInfo:f,implementation:d}}var s=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,f){if(l==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return In.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,In.createPortal=function(l,f){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return a(l,f,null,d)},In.flushSync=function(l){var f=s.T,d=i.p;try{if(s.T=null,i.p=2,l)return l()}finally{s.T=f,i.p=d,i.d.f()}},In.preconnect=function(l,f){typeof l=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,i.d.C(l,f))},In.prefetchDNS=function(l){typeof l=="string"&&i.d.D(l)},In.preinit=function(l,f){if(typeof l=="string"&&f&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin),p=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;d==="style"?i.d.S(l,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:h,integrity:p,fetchPriority:y}):d==="script"&&i.d.X(l,{crossOrigin:h,integrity:p,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},In.preinitModule=function(l,f){if(typeof l=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var d=o(f.as,f.crossOrigin);i.d.M(l,{crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&i.d.M(l)},In.preload=function(l,f){if(typeof l=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var d=f.as,h=o(d,f.crossOrigin);i.d.L(l,d,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},In.preloadModule=function(l,f){if(typeof l=="string")if(f){var d=o(f.as,f.crossOrigin);i.d.m(l,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:d,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else i.d.m(l)},In.requestFormReset=function(l){i.d.r(l)},In.unstable_batchedUpdates=function(l,f){return l(f)},In.useFormState=function(l,f,d){return s.H.useFormState(l,f,d)},In.useFormStatus=function(){return s.H.useHostTransitionStatus()},In.version="19.1.1",In}var w5;function dQ(){if(w5)return uE.exports;w5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),uE.exports=fQ(),uE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A5;function hQ(){if(A5)return jh;A5=1;var e=cQ(),t=JC(),n=dQ();function i(u){var c="https://react.dev/errors/"+u;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var g=2;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g])}return"Minified React error #"+u+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function a(u){var c=u,g=u;if(u.alternate)for(;c.return;)c=c.return;else{u=c;do c=u,(c.flags&4098)!==0&&(g=c.return),u=c.return;while(u)}return c.tag===3?g:null}function s(u){if(u.tag===13){var c=u.memoizedState;if(c===null&&(u=u.alternate,u!==null&&(c=u.memoizedState)),c!==null)return c.dehydrated}return null}function o(u){if(a(u)!==u)throw Error(i(188))}function l(u){var c=u.alternate;if(!c){if(c=a(u),c===null)throw Error(i(188));return c!==u?null:u}for(var g=u,m=c;;){var x=g.return;if(x===null)break;var E=x.alternate;if(E===null){if(m=x.return,m!==null){g=m;continue}break}if(x.child===E.child){for(E=x.child;E;){if(E===g)return o(x),u;if(E===m)return o(x),c;E=E.sibling}throw Error(i(188))}if(g.return!==m.return)g=x,m=E;else{for(var $=!1,O=x.child;O;){if(O===g){$=!0,g=x,m=E;break}if(O===m){$=!0,m=x,g=E;break}O=O.sibling}if(!$){for(O=E.child;O;){if(O===g){$=!0,g=E,m=x;break}if(O===m){$=!0,m=E,g=x;break}O=O.sibling}if(!$)throw Error(i(189))}}if(g.alternate!==m)throw Error(i(190))}if(g.tag!==3)throw Error(i(188));return g.stateNode.current===g?u:c}function f(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u;for(u=u.child;u!==null;){if(c=f(u),c!==null)return c;u=u.sibling}return null}var d=Object.assign,h=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),b=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),A=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function G(u){return u===null||typeof u!="object"?null:(u=L&&u[L]||u["@@iterator"],typeof u=="function"?u:null)}var j=Symbol.for("react.client.reference");function q(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===j?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case v:return"Fragment";case S:return"Profiler";case b:return"StrictMode";case T:return"Suspense";case k:return"SuspenseList";case z:return"Activity"}if(typeof u=="object")switch(u.$$typeof){case y:return"Portal";case A:return(u.displayName||"Context")+".Provider";case w:return(u._context.displayName||"Context")+".Consumer";case C:var c=u.render;return u=u.displayName,u||(u=c.displayName||c.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case M:return c=u.displayName||null,c!==null?c:q(u.type)||"Memo";case R:c=u._payload,u=u._init;try{return q(u(c))}catch{}}return null}var F=Array.isArray,D=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,P=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X={pending:!1,data:null,method:null,action:null},Z=[],N=-1;function W(u){return{current:u}}function ne(u){0>N||(u.current=Z[N],Z[N]=null,N--)}function ae(u,c){N++,Z[N]=u.current,u.current=c}var me=W(null),be=W(null),Ae=W(null),jt=W(null);function tt(u,c){switch(ae(Ae,c),ae(be,u),ae(me,null),c.nodeType){case 9:case 11:u=(u=c.documentElement)&&(u=u.namespaceURI)?GN(u):0;break;default:if(u=c.tagName,c=c.namespaceURI)c=GN(c),u=YN(c,u);else switch(u){case"svg":u=1;break;case"math":u=2;break;default:u=0}}ne(me),ae(me,u)}function ye(){ne(me),ne(be),ne(Ae)}function Le(u){u.memoizedState!==null&&ae(jt,u);var c=me.current,g=YN(c,u.type);c!==g&&(ae(be,u),ae(me,g))}function Ue(u){be.current===u&&(ne(me),ne(be)),jt.current===u&&(ne(jt),Lh._currentValue=X)}var ce=Object.prototype.hasOwnProperty,Ht=e.unstable_scheduleCallback,nt=e.unstable_cancelCallback,Zt=e.unstable_shouldYield,hn=e.unstable_requestPaint,Kt=e.unstable_now,w0=e.unstable_getCurrentPriorityLevel,AO=e.unstable_ImmediatePriority,CO=e.unstable_UserBlockingPriority,A0=e.unstable_NormalPriority,PX=e.unstable_LowPriority,$O=e.unstable_IdlePriority,IX=e.log,jX=e.unstable_setDisableYieldValue,Gd=null,Pi=null;function co(u){if(typeof IX=="function"&&jX(u),Pi&&typeof Pi.setStrictMode=="function")try{Pi.setStrictMode(Gd,u)}catch{}}var Ii=Math.clz32?Math.clz32:YX,HX=Math.log,GX=Math.LN2;function YX(u){return u>>>=0,u===0?32:31-(HX(u)/GX|0)|0}var C0=256,$0=4194304;function Lu(u){var c=u&42;if(c!==0)return c;switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return u&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return u}}function T0(u,c,g){var m=u.pendingLanes;if(m===0)return 0;var x=0,E=u.suspendedLanes,$=u.pingedLanes;u=u.warmLanes;var O=m&134217727;return O!==0?(m=O&~E,m!==0?x=Lu(m):($&=O,$!==0?x=Lu($):g||(g=O&~u,g!==0&&(x=Lu(g))))):(O=m&~E,O!==0?x=Lu(O):$!==0?x=Lu($):g||(g=m&~u,g!==0&&(x=Lu(g)))),x===0?0:c!==0&&c!==x&&(c&E)===0&&(E=x&-x,g=c&-c,E>=g||E===32&&(g&4194048)!==0)?c:x}function Yd(u,c){return(u.pendingLanes&~(u.suspendedLanes&~u.pingedLanes)&c)===0}function XX(u,c){switch(u){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function TO(){var u=C0;return C0<<=1,(C0&4194048)===0&&(C0=256),u}function MO(){var u=$0;return $0<<=1,($0&62914560)===0&&($0=4194304),u}function Yx(u){for(var c=[],g=0;31>g;g++)c.push(u);return c}function Xd(u,c){u.pendingLanes|=c,c!==268435456&&(u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0)}function VX(u,c,g,m,x,E){var $=u.pendingLanes;u.pendingLanes=g,u.suspendedLanes=0,u.pingedLanes=0,u.warmLanes=0,u.expiredLanes&=g,u.entangledLanes&=g,u.errorRecoveryDisabledLanes&=g,u.shellSuspendCounter=0;var O=u.entanglements,B=u.expirationTimes,V=u.hiddenUpdates;for(g=$&~g;0<g;){var ie=31-Ii(g),oe=1<<ie;O[ie]=0,B[ie]=-1;var Q=V[ie];if(Q!==null)for(V[ie]=null,ie=0;ie<Q.length;ie++){var K=Q[ie];K!==null&&(K.lane&=-536870913)}g&=~oe}m!==0&&kO(u,m,0),E!==0&&x===0&&u.tag!==0&&(u.suspendedLanes|=E&~($&~c))}function kO(u,c,g){u.pendingLanes|=c,u.suspendedLanes&=~c;var m=31-Ii(c);u.entangledLanes|=c,u.entanglements[m]=u.entanglements[m]|1073741824|g&4194090}function OO(u,c){var g=u.entangledLanes|=c;for(u=u.entanglements;g;){var m=31-Ii(g),x=1<<m;x&c|u[m]&c&&(u[m]|=c),g&=~x}}function Xx(u){switch(u){case 2:u=1;break;case 8:u=4;break;case 32:u=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:u=128;break;case 268435456:u=134217728;break;default:u=0}return u}function Vx(u){return u&=-u,2<u?8<u?(u&134217727)!==0?32:268435456:8:2}function RO(){var u=P.p;return u!==0?u:(u=window.event,u===void 0?32:f5(u.type))}function WX(u,c){var g=P.p;try{return P.p=u,c()}finally{P.p=g}}var fo=Math.random().toString(36).slice(2),qn="__reactFiber$"+fo,Ei="__reactProps$"+fo,xc="__reactContainer$"+fo,Wx="__reactEvents$"+fo,QX="__reactListeners$"+fo,ZX="__reactHandles$"+fo,DO="__reactResources$"+fo,Vd="__reactMarker$"+fo;function Qx(u){delete u[qn],delete u[Ei],delete u[Wx],delete u[QX],delete u[ZX]}function Sc(u){var c=u[qn];if(c)return c;for(var g=u.parentNode;g;){if(c=g[xc]||g[qn]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(u=QN(u);u!==null;){if(g=u[qn])return g;u=QN(u)}return c}u=g,g=u.parentNode}return null}function Ec(u){if(u=u[qn]||u[xc]){var c=u.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return u}return null}function Wd(u){var c=u.tag;if(c===5||c===26||c===27||c===6)return u.stateNode;throw Error(i(33))}function _c(u){var c=u[DO];return c||(c=u[DO]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function gn(u){u[Vd]=!0}var NO=new Set,zO={};function Bu(u,c){wc(u,c),wc(u+"Capture",c)}function wc(u,c){for(zO[u]=c,u=0;u<c.length;u++)NO.add(c[u])}var KX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),FO={},LO={};function JX(u){return ce.call(LO,u)?!0:ce.call(FO,u)?!1:KX.test(u)?LO[u]=!0:(FO[u]=!0,!1)}function M0(u,c,g){if(JX(c))if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":u.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){u.removeAttribute(c);return}}u.setAttribute(c,""+g)}}function k0(u,c,g){if(g===null)u.removeAttribute(c);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(c);return}u.setAttribute(c,""+g)}}function fs(u,c,g,m){if(m===null)u.removeAttribute(g);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":u.removeAttribute(g);return}u.setAttributeNS(c,g,""+m)}}var Zx,BO;function Ac(u){if(Zx===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Zx=c&&c[1]||"",BO=-1<g.stack.indexOf(`
    at`)?" (<anonymous>)":-1<g.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Zx+u+BO}var Kx=!1;function Jx(u,c){if(!u||Kx)return"";Kx=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var oe=function(){throw Error()};if(Object.defineProperty(oe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(oe,[])}catch(K){var Q=K}Reflect.construct(u,[],oe)}else{try{oe.call()}catch(K){Q=K}u.call(oe.prototype)}}else{try{throw Error()}catch(K){Q=K}(oe=u())&&typeof oe.catch=="function"&&oe.catch(function(){})}}catch(K){if(K&&Q&&typeof K.stack=="string")return[K.stack,Q.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),$=E[0],O=E[1];if($&&O){var B=$.split(`
`),V=O.split(`
`);for(x=m=0;m<B.length&&!B[m].includes("DetermineComponentFrameRoot");)m++;for(;x<V.length&&!V[x].includes("DetermineComponentFrameRoot");)x++;if(m===B.length||x===V.length)for(m=B.length-1,x=V.length-1;1<=m&&0<=x&&B[m]!==V[x];)x--;for(;1<=m&&0<=x;m--,x--)if(B[m]!==V[x]){if(m!==1||x!==1)do if(m--,x--,0>x||B[m]!==V[x]){var ie=`
`+B[m].replace(" at new "," at ");return u.displayName&&ie.includes("<anonymous>")&&(ie=ie.replace("<anonymous>",u.displayName)),ie}while(1<=m&&0<=x);break}}}finally{Kx=!1,Error.prepareStackTrace=g}return(g=u?u.displayName||u.name:"")?Ac(g):""}function eV(u){switch(u.tag){case 26:case 27:case 5:return Ac(u.type);case 16:return Ac("Lazy");case 13:return Ac("Suspense");case 19:return Ac("SuspenseList");case 0:case 15:return Jx(u.type,!1);case 11:return Jx(u.type.render,!1);case 1:return Jx(u.type,!0);case 31:return Ac("Activity");default:return""}}function UO(u){try{var c="";do c+=eV(u),u=u.return;while(u);return c}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}function fr(u){switch(typeof u){case"bigint":case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function qO(u){var c=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function tV(u){var c=qO(u)?"checked":"value",g=Object.getOwnPropertyDescriptor(u.constructor.prototype,c),m=""+u[c];if(!u.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var x=g.get,E=g.set;return Object.defineProperty(u,c,{configurable:!0,get:function(){return x.call(this)},set:function($){m=""+$,E.call(this,$)}}),Object.defineProperty(u,c,{enumerable:g.enumerable}),{getValue:function(){return m},setValue:function($){m=""+$},stopTracking:function(){u._valueTracker=null,delete u[c]}}}}function O0(u){u._valueTracker||(u._valueTracker=tV(u))}function PO(u){if(!u)return!1;var c=u._valueTracker;if(!c)return!0;var g=c.getValue(),m="";return u&&(m=qO(u)?u.checked?"true":"false":u.value),u=m,u!==g?(c.setValue(u),!0):!1}function R0(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}var nV=/[\n"\\]/g;function dr(u){return u.replace(nV,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function e2(u,c,g,m,x,E,$,O){u.name="",$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"?u.type=$:u.removeAttribute("type"),c!=null?$==="number"?(c===0&&u.value===""||u.value!=c)&&(u.value=""+fr(c)):u.value!==""+fr(c)&&(u.value=""+fr(c)):$!=="submit"&&$!=="reset"||u.removeAttribute("value"),c!=null?t2(u,$,fr(c)):g!=null?t2(u,$,fr(g)):m!=null&&u.removeAttribute("value"),x==null&&E!=null&&(u.defaultChecked=!!E),x!=null&&(u.checked=x&&typeof x!="function"&&typeof x!="symbol"),O!=null&&typeof O!="function"&&typeof O!="symbol"&&typeof O!="boolean"?u.name=""+fr(O):u.removeAttribute("name")}function IO(u,c,g,m,x,E,$,O){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(u.type=E),c!=null||g!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;g=g!=null?""+fr(g):"",c=c!=null?""+fr(c):g,O||c===u.value||(u.value=c),u.defaultValue=c}m=m??x,m=typeof m!="function"&&typeof m!="symbol"&&!!m,u.checked=O?u.checked:!!m,u.defaultChecked=!!m,$!=null&&typeof $!="function"&&typeof $!="symbol"&&typeof $!="boolean"&&(u.name=$)}function t2(u,c,g){c==="number"&&R0(u.ownerDocument)===u||u.defaultValue===""+g||(u.defaultValue=""+g)}function Cc(u,c,g,m){if(u=u.options,c){c={};for(var x=0;x<g.length;x++)c["$"+g[x]]=!0;for(g=0;g<u.length;g++)x=c.hasOwnProperty("$"+u[g].value),u[g].selected!==x&&(u[g].selected=x),x&&m&&(u[g].defaultSelected=!0)}else{for(g=""+fr(g),c=null,x=0;x<u.length;x++){if(u[x].value===g){u[x].selected=!0,m&&(u[x].defaultSelected=!0);return}c!==null||u[x].disabled||(c=u[x])}c!==null&&(c.selected=!0)}}function jO(u,c,g){if(c!=null&&(c=""+fr(c),c!==u.value&&(u.value=c),g==null)){u.defaultValue!==c&&(u.defaultValue=c);return}u.defaultValue=g!=null?""+fr(g):""}function HO(u,c,g,m){if(c==null){if(m!=null){if(g!=null)throw Error(i(92));if(F(m)){if(1<m.length)throw Error(i(93));m=m[0]}g=m}g==null&&(g=""),c=g}g=fr(c),u.defaultValue=g,m=u.textContent,m===g&&m!==""&&m!==null&&(u.value=m)}function $c(u,c){if(c){var g=u.firstChild;if(g&&g===u.lastChild&&g.nodeType===3){g.nodeValue=c;return}}u.textContent=c}var iV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function GO(u,c,g){var m=c.indexOf("--")===0;g==null||typeof g=="boolean"||g===""?m?u.setProperty(c,""):c==="float"?u.cssFloat="":u[c]="":m?u.setProperty(c,g):typeof g!="number"||g===0||iV.has(c)?c==="float"?u.cssFloat=g:u[c]=(""+g).trim():u[c]=g+"px"}function YO(u,c,g){if(c!=null&&typeof c!="object")throw Error(i(62));if(u=u.style,g!=null){for(var m in g)!g.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?u.setProperty(m,""):m==="float"?u.cssFloat="":u[m]="");for(var x in c)m=c[x],c.hasOwnProperty(x)&&g[x]!==m&&GO(u,x,m)}else for(var E in c)c.hasOwnProperty(E)&&GO(u,E,c[E])}function n2(u){if(u.indexOf("-")===-1)return!1;switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),aV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function D0(u){return aV.test(""+u)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":u}var i2=null;function r2(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Tc=null,Mc=null;function XO(u){var c=Ec(u);if(c&&(u=c.stateNode)){var g=u[Ei]||null;e:switch(u=c.stateNode,c.type){case"input":if(e2(u,g.value,g.defaultValue,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name),c=g.name,g.type==="radio"&&c!=null){for(g=u;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll('input[name="'+dr(""+c)+'"][type="radio"]'),c=0;c<g.length;c++){var m=g[c];if(m!==u&&m.form===u.form){var x=m[Ei]||null;if(!x)throw Error(i(90));e2(m,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<g.length;c++)m=g[c],m.form===u.form&&PO(m)}break e;case"textarea":jO(u,g.value,g.defaultValue);break e;case"select":c=g.value,c!=null&&Cc(u,!!g.multiple,c,!1)}}}var a2=!1;function VO(u,c,g){if(a2)return u(c,g);a2=!0;try{var m=u(c);return m}finally{if(a2=!1,(Tc!==null||Mc!==null)&&(vm(),Tc&&(c=Tc,u=Mc,Mc=Tc=null,XO(c),u)))for(c=0;c<u.length;c++)XO(u[c])}}function Qd(u,c){var g=u.stateNode;if(g===null)return null;var m=g[Ei]||null;if(m===null)return null;g=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(u=u.type,m=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!m;break e;default:u=!1}if(u)return null;if(g&&typeof g!="function")throw Error(i(231,c,typeof g));return g}var ds=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),s2=!1;if(ds)try{var Zd={};Object.defineProperty(Zd,"passive",{get:function(){s2=!0}}),window.addEventListener("test",Zd,Zd),window.removeEventListener("test",Zd,Zd)}catch{s2=!1}var ho=null,o2=null,N0=null;function WO(){if(N0)return N0;var u,c=o2,g=c.length,m,x="value"in ho?ho.value:ho.textContent,E=x.length;for(u=0;u<g&&c[u]===x[u];u++);var $=g-u;for(m=1;m<=$&&c[g-m]===x[E-m];m++);return N0=x.slice(u,1<m?1-m:void 0)}function z0(u){var c=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&c===13&&(u=13)):u=c,u===10&&(u=13),32<=u||u===13?u:0}function F0(){return!0}function QO(){return!1}function _i(u){function c(g,m,x,E,$){this._reactName=g,this._targetInst=x,this.type=m,this.nativeEvent=E,this.target=$,this.currentTarget=null;for(var O in u)u.hasOwnProperty(O)&&(g=u[O],this[O]=g?g(E):E[O]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?F0:QO,this.isPropagationStopped=QO,this}return d(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=F0)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=F0)},persist:function(){},isPersistent:F0}),c}var Uu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},L0=_i(Uu),Kd=d({},Uu,{view:0,detail:0}),sV=_i(Kd),u2,l2,Jd,B0=d({},Kd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:f2,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Jd&&(Jd&&u.type==="mousemove"?(u2=u.screenX-Jd.screenX,l2=u.screenY-Jd.screenY):l2=u2=0,Jd=u),u2)},movementY:function(u){return"movementY"in u?u.movementY:l2}}),ZO=_i(B0),oV=d({},B0,{dataTransfer:0}),uV=_i(oV),lV=d({},Kd,{relatedTarget:0}),c2=_i(lV),cV=d({},Uu,{animationName:0,elapsedTime:0,pseudoElement:0}),fV=_i(cV),dV=d({},Uu,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),hV=_i(dV),gV=d({},Uu,{data:0}),KO=_i(gV),pV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vV(u){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(u):(u=yV[u])?!!c[u]:!1}function f2(){return vV}var bV=d({},Kd,{key:function(u){if(u.key){var c=pV[u.key]||u.key;if(c!=="Unidentified")return c}return u.type==="keypress"?(u=z0(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?mV[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:f2,charCode:function(u){return u.type==="keypress"?z0(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?z0(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),xV=_i(bV),SV=d({},B0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),JO=_i(SV),EV=d({},Kd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:f2}),_V=_i(EV),wV=d({},Uu,{propertyName:0,elapsedTime:0,pseudoElement:0}),AV=_i(wV),CV=d({},B0,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),$V=_i(CV),TV=d({},Uu,{newState:0,oldState:0}),MV=_i(TV),kV=[9,13,27,32],d2=ds&&"CompositionEvent"in window,eh=null;ds&&"documentMode"in document&&(eh=document.documentMode);var OV=ds&&"TextEvent"in window&&!eh,eR=ds&&(!d2||eh&&8<eh&&11>=eh),tR=" ",nR=!1;function iR(u,c){switch(u){case"keyup":return kV.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function rR(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var kc=!1;function RV(u,c){switch(u){case"compositionend":return rR(c);case"keypress":return c.which!==32?null:(nR=!0,tR);case"textInput":return u=c.data,u===tR&&nR?null:u;default:return null}}function DV(u,c){if(kc)return u==="compositionend"||!d2&&iR(u,c)?(u=WO(),N0=o2=ho=null,kc=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return eR&&c.locale!=="ko"?null:c.data;default:return null}}var NV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function aR(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c==="input"?!!NV[u.type]:c==="textarea"}function sR(u,c,g,m){Tc?Mc?Mc.push(m):Mc=[m]:Tc=m,c=wm(c,"onChange"),0<c.length&&(g=new L0("onChange","change",null,g,m),u.push({event:g,listeners:c}))}var th=null,nh=null;function zV(u){qN(u,0)}function U0(u){var c=Wd(u);if(PO(c))return u}function oR(u,c){if(u==="change")return c}var uR=!1;if(ds){var h2;if(ds){var g2="oninput"in document;if(!g2){var lR=document.createElement("div");lR.setAttribute("oninput","return;"),g2=typeof lR.oninput=="function"}h2=g2}else h2=!1;uR=h2&&(!document.documentMode||9<document.documentMode)}function cR(){th&&(th.detachEvent("onpropertychange",fR),nh=th=null)}function fR(u){if(u.propertyName==="value"&&U0(nh)){var c=[];sR(c,nh,u,r2(u)),VO(zV,c)}}function FV(u,c,g){u==="focusin"?(cR(),th=c,nh=g,th.attachEvent("onpropertychange",fR)):u==="focusout"&&cR()}function LV(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return U0(nh)}function BV(u,c){if(u==="click")return U0(c)}function UV(u,c){if(u==="input"||u==="change")return U0(c)}function qV(u,c){return u===c&&(u!==0||1/u===1/c)||u!==u&&c!==c}var ji=typeof Object.is=="function"?Object.is:qV;function ih(u,c){if(ji(u,c))return!0;if(typeof u!="object"||u===null||typeof c!="object"||c===null)return!1;var g=Object.keys(u),m=Object.keys(c);if(g.length!==m.length)return!1;for(m=0;m<g.length;m++){var x=g[m];if(!ce.call(c,x)||!ji(u[x],c[x]))return!1}return!0}function dR(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function hR(u,c){var g=dR(u);u=0;for(var m;g;){if(g.nodeType===3){if(m=u+g.textContent.length,u<=c&&m>=c)return{node:g,offset:c-u};u=m}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=dR(g)}}function gR(u,c){return u&&c?u===c?!0:u&&u.nodeType===3?!1:c&&c.nodeType===3?gR(u,c.parentNode):"contains"in u?u.contains(c):u.compareDocumentPosition?!!(u.compareDocumentPosition(c)&16):!1:!1}function pR(u){u=u!=null&&u.ownerDocument!=null&&u.ownerDocument.defaultView!=null?u.ownerDocument.defaultView:window;for(var c=R0(u.document);c instanceof u.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)u=c.contentWindow;else break;c=R0(u.document)}return c}function p2(u){var c=u&&u.nodeName&&u.nodeName.toLowerCase();return c&&(c==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||c==="textarea"||u.contentEditable==="true")}var PV=ds&&"documentMode"in document&&11>=document.documentMode,Oc=null,m2=null,rh=null,y2=!1;function mR(u,c,g){var m=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;y2||Oc==null||Oc!==R0(m)||(m=Oc,"selectionStart"in m&&p2(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),rh&&ih(rh,m)||(rh=m,m=wm(m2,"onSelect"),0<m.length&&(c=new L0("onSelect","select",null,c,g),u.push({event:c,listeners:m}),c.target=Oc)))}function qu(u,c){var g={};return g[u.toLowerCase()]=c.toLowerCase(),g["Webkit"+u]="webkit"+c,g["Moz"+u]="moz"+c,g}var Rc={animationend:qu("Animation","AnimationEnd"),animationiteration:qu("Animation","AnimationIteration"),animationstart:qu("Animation","AnimationStart"),transitionrun:qu("Transition","TransitionRun"),transitionstart:qu("Transition","TransitionStart"),transitioncancel:qu("Transition","TransitionCancel"),transitionend:qu("Transition","TransitionEnd")},v2={},yR={};ds&&(yR=document.createElement("div").style,"AnimationEvent"in window||(delete Rc.animationend.animation,delete Rc.animationiteration.animation,delete Rc.animationstart.animation),"TransitionEvent"in window||delete Rc.transitionend.transition);function Pu(u){if(v2[u])return v2[u];if(!Rc[u])return u;var c=Rc[u],g;for(g in c)if(c.hasOwnProperty(g)&&g in yR)return v2[u]=c[g];return u}var vR=Pu("animationend"),bR=Pu("animationiteration"),xR=Pu("animationstart"),IV=Pu("transitionrun"),jV=Pu("transitionstart"),HV=Pu("transitioncancel"),SR=Pu("transitionend"),ER=new Map,b2="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");b2.push("scrollEnd");function qr(u,c){ER.set(u,c),Bu(c,[u])}var _R=new WeakMap;function hr(u,c){if(typeof u=="object"&&u!==null){var g=_R.get(u);return g!==void 0?g:(c={value:u,source:c,stack:UO(c)},_R.set(u,c),c)}return{value:u,source:c,stack:UO(c)}}var gr=[],Dc=0,x2=0;function q0(){for(var u=Dc,c=x2=Dc=0;c<u;){var g=gr[c];gr[c++]=null;var m=gr[c];gr[c++]=null;var x=gr[c];gr[c++]=null;var E=gr[c];if(gr[c++]=null,m!==null&&x!==null){var $=m.pending;$===null?x.next=x:(x.next=$.next,$.next=x),m.pending=x}E!==0&&wR(g,x,E)}}function P0(u,c,g,m){gr[Dc++]=u,gr[Dc++]=c,gr[Dc++]=g,gr[Dc++]=m,x2|=m,u.lanes|=m,u=u.alternate,u!==null&&(u.lanes|=m)}function S2(u,c,g,m){return P0(u,c,g,m),I0(u)}function Nc(u,c){return P0(u,null,null,c),I0(u)}function wR(u,c,g){u.lanes|=g;var m=u.alternate;m!==null&&(m.lanes|=g);for(var x=!1,E=u.return;E!==null;)E.childLanes|=g,m=E.alternate,m!==null&&(m.childLanes|=g),E.tag===22&&(u=E.stateNode,u===null||u._visibility&1||(x=!0)),u=E,E=E.return;return u.tag===3?(E=u.stateNode,x&&c!==null&&(x=31-Ii(g),u=E.hiddenUpdates,m=u[x],m===null?u[x]=[c]:m.push(c),c.lane=g|536870912),E):null}function I0(u){if(50<Mh)throw Mh=0,$S=null,Error(i(185));for(var c=u.return;c!==null;)u=c,c=u.return;return u.tag===3?u.stateNode:null}var zc={};function GV(u,c,g,m){this.tag=u,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hi(u,c,g,m){return new GV(u,c,g,m)}function E2(u){return u=u.prototype,!(!u||!u.isReactComponent)}function hs(u,c){var g=u.alternate;return g===null?(g=Hi(u.tag,c,u.key,u.mode),g.elementType=u.elementType,g.type=u.type,g.stateNode=u.stateNode,g.alternate=u,u.alternate=g):(g.pendingProps=c,g.type=u.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=u.flags&65011712,g.childLanes=u.childLanes,g.lanes=u.lanes,g.child=u.child,g.memoizedProps=u.memoizedProps,g.memoizedState=u.memoizedState,g.updateQueue=u.updateQueue,c=u.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=u.sibling,g.index=u.index,g.ref=u.ref,g.refCleanup=u.refCleanup,g}function AR(u,c){u.flags&=65011714;var g=u.alternate;return g===null?(u.childLanes=0,u.lanes=c,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=g.childLanes,u.lanes=g.lanes,u.child=g.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=g.memoizedProps,u.memoizedState=g.memoizedState,u.updateQueue=g.updateQueue,u.type=g.type,c=g.dependencies,u.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),u}function j0(u,c,g,m,x,E){var $=0;if(m=u,typeof u=="function")E2(u)&&($=1);else if(typeof u=="string")$=XW(u,g,me.current)?26:u==="html"||u==="head"||u==="body"?27:5;else e:switch(u){case z:return u=Hi(31,g,c,x),u.elementType=z,u.lanes=E,u;case v:return Iu(g.children,x,E,c);case b:$=8,x|=24;break;case S:return u=Hi(12,g,c,x|2),u.elementType=S,u.lanes=E,u;case T:return u=Hi(13,g,c,x),u.elementType=T,u.lanes=E,u;case k:return u=Hi(19,g,c,x),u.elementType=k,u.lanes=E,u;default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case _:case A:$=10;break e;case w:$=9;break e;case C:$=11;break e;case M:$=14;break e;case R:$=16,m=null;break e}$=29,g=Error(i(130,u===null?"null":typeof u,"")),m=null}return c=Hi($,g,c,x),c.elementType=u,c.type=m,c.lanes=E,c}function Iu(u,c,g,m){return u=Hi(7,u,m,c),u.lanes=g,u}function _2(u,c,g){return u=Hi(6,u,null,c),u.lanes=g,u}function w2(u,c,g){return c=Hi(4,u.children!==null?u.children:[],u.key,c),c.lanes=g,c.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},c}var Fc=[],Lc=0,H0=null,G0=0,pr=[],mr=0,ju=null,gs=1,ps="";function Hu(u,c){Fc[Lc++]=G0,Fc[Lc++]=H0,H0=u,G0=c}function CR(u,c,g){pr[mr++]=gs,pr[mr++]=ps,pr[mr++]=ju,ju=u;var m=gs;u=ps;var x=32-Ii(m)-1;m&=~(1<<x),g+=1;var E=32-Ii(c)+x;if(30<E){var $=x-x%5;E=(m&(1<<$)-1).toString(32),m>>=$,x-=$,gs=1<<32-Ii(c)+x|g<<x|m,ps=E+u}else gs=1<<E|g<<x|m,ps=u}function A2(u){u.return!==null&&(Hu(u,1),CR(u,1,0))}function C2(u){for(;u===H0;)H0=Fc[--Lc],Fc[Lc]=null,G0=Fc[--Lc],Fc[Lc]=null;for(;u===ju;)ju=pr[--mr],pr[mr]=null,ps=pr[--mr],pr[mr]=null,gs=pr[--mr],pr[mr]=null}var ii=null,Lt=null,ut=!1,Gu=null,Sa=!1,$2=Error(i(519));function Yu(u){var c=Error(i(418,""));throw oh(hr(c,u)),$2}function $R(u){var c=u.stateNode,g=u.type,m=u.memoizedProps;switch(c[qn]=u,c[Ei]=m,g){case"dialog":We("cancel",c),We("close",c);break;case"iframe":case"object":case"embed":We("load",c);break;case"video":case"audio":for(g=0;g<Oh.length;g++)We(Oh[g],c);break;case"source":We("error",c);break;case"img":case"image":case"link":We("error",c),We("load",c);break;case"details":We("toggle",c);break;case"input":We("invalid",c),IO(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),O0(c);break;case"select":We("invalid",c);break;case"textarea":We("invalid",c),HO(c,m.value,m.defaultValue,m.children),O0(c)}g=m.children,typeof g!="string"&&typeof g!="number"&&typeof g!="bigint"||c.textContent===""+g||m.suppressHydrationWarning===!0||HN(c.textContent,g)?(m.popover!=null&&(We("beforetoggle",c),We("toggle",c)),m.onScroll!=null&&We("scroll",c),m.onScrollEnd!=null&&We("scrollend",c),m.onClick!=null&&(c.onclick=Am),c=!0):c=!1,c||Yu(u)}function TR(u){for(ii=u.return;ii;)switch(ii.tag){case 5:case 13:Sa=!1;return;case 27:case 3:Sa=!0;return;default:ii=ii.return}}function ah(u){if(u!==ii)return!1;if(!ut)return TR(u),ut=!0,!1;var c=u.tag,g;if((g=c!==3&&c!==27)&&((g=c===5)&&(g=u.type,g=!(g!=="form"&&g!=="button")||jS(u.type,u.memoizedProps)),g=!g),g&&Lt&&Yu(u),TR(u),c===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,c=0;u;){if(u.nodeType===8)if(g=u.data,g==="/$"){if(c===0){Lt=Ir(u.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++;u=u.nextSibling}Lt=null}}else c===27?(c=Lt,Mo(u.type)?(u=XS,XS=null,Lt=u):Lt=c):Lt=ii?Ir(u.stateNode.nextSibling):null;return!0}function sh(){Lt=ii=null,ut=!1}function MR(){var u=Gu;return u!==null&&(Ci===null?Ci=u:Ci.push.apply(Ci,u),Gu=null),u}function oh(u){Gu===null?Gu=[u]:Gu.push(u)}var T2=W(null),Xu=null,ms=null;function go(u,c,g){ae(T2,c._currentValue),c._currentValue=g}function ys(u){u._currentValue=T2.current,ne(T2)}function M2(u,c,g){for(;u!==null;){var m=u.alternate;if((u.childLanes&c)!==c?(u.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),u===g)break;u=u.return}}function k2(u,c,g,m){var x=u.child;for(x!==null&&(x.return=u);x!==null;){var E=x.dependencies;if(E!==null){var $=x.child;E=E.firstContext;e:for(;E!==null;){var O=E;E=x;for(var B=0;B<c.length;B++)if(O.context===c[B]){E.lanes|=g,O=E.alternate,O!==null&&(O.lanes|=g),M2(E.return,g,u),m||($=null);break e}E=O.next}}else if(x.tag===18){if($=x.return,$===null)throw Error(i(341));$.lanes|=g,E=$.alternate,E!==null&&(E.lanes|=g),M2($,g,u),$=null}else $=x.child;if($!==null)$.return=x;else for($=x;$!==null;){if($===u){$=null;break}if(x=$.sibling,x!==null){x.return=$.return,$=x;break}$=$.return}x=$}}function uh(u,c,g,m){u=null;for(var x=c,E=!1;x!==null;){if(!E){if((x.flags&524288)!==0)E=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var $=x.alternate;if($===null)throw Error(i(387));if($=$.memoizedProps,$!==null){var O=x.type;ji(x.pendingProps.value,$.value)||(u!==null?u.push(O):u=[O])}}else if(x===jt.current){if($=x.alternate,$===null)throw Error(i(387));$.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(u!==null?u.push(Lh):u=[Lh])}x=x.return}u!==null&&k2(c,u,g,m),c.flags|=262144}function Y0(u){for(u=u.firstContext;u!==null;){if(!ji(u.context._currentValue,u.memoizedValue))return!0;u=u.next}return!1}function Vu(u){Xu=u,ms=null,u=u.dependencies,u!==null&&(u.firstContext=null)}function Pn(u){return kR(Xu,u)}function X0(u,c){return Xu===null&&Vu(u),kR(u,c)}function kR(u,c){var g=c._currentValue;if(c={context:c,memoizedValue:g,next:null},ms===null){if(u===null)throw Error(i(308));ms=c,u.dependencies={lanes:0,firstContext:c},u.flags|=524288}else ms=ms.next=c;return g}var YV=typeof AbortController<"u"?AbortController:function(){var u=[],c=this.signal={aborted:!1,addEventListener:function(g,m){u.push(m)}};this.abort=function(){c.aborted=!0,u.forEach(function(g){return g()})}},XV=e.unstable_scheduleCallback,VV=e.unstable_NormalPriority,rn={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function O2(){return{controller:new YV,data:new Map,refCount:0}}function lh(u){u.refCount--,u.refCount===0&&XV(VV,function(){u.controller.abort()})}var ch=null,R2=0,Bc=0,Uc=null;function WV(u,c){if(ch===null){var g=ch=[];R2=0,Bc=NS(),Uc={status:"pending",value:void 0,then:function(m){g.push(m)}}}return R2++,c.then(OR,OR),c}function OR(){if(--R2===0&&ch!==null){Uc!==null&&(Uc.status="fulfilled");var u=ch;ch=null,Bc=0,Uc=null;for(var c=0;c<u.length;c++)(0,u[c])()}}function QV(u,c){var g=[],m={status:"pending",value:null,reason:null,then:function(x){g.push(x)}};return u.then(function(){m.status="fulfilled",m.value=c;for(var x=0;x<g.length;x++)(0,g[x])(c)},function(x){for(m.status="rejected",m.reason=x,x=0;x<g.length;x++)(0,g[x])(void 0)}),m}var RR=D.S;D.S=function(u,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&WV(u,c),RR!==null&&RR(u,c)};var Wu=W(null);function D2(){var u=Wu.current;return u!==null?u:At.pooledCache}function V0(u,c){c===null?ae(Wu,Wu.current):ae(Wu,c.pool)}function DR(){var u=D2();return u===null?null:{parent:rn._currentValue,pool:u}}var fh=Error(i(460)),NR=Error(i(474)),W0=Error(i(542)),N2={then:function(){}};function zR(u){return u=u.status,u==="fulfilled"||u==="rejected"}function Q0(){}function FR(u,c,g){switch(g=u[g],g===void 0?u.push(c):g!==c&&(c.then(Q0,Q0),c=g),c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,BR(u),u;default:if(typeof c.status=="string")c.then(Q0,Q0);else{if(u=At,u!==null&&100<u.shellSuspendCounter)throw Error(i(482));u=c,u.status="pending",u.then(function(m){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=m}},function(m){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw u=c.reason,BR(u),u}throw dh=c,fh}}var dh=null;function LR(){if(dh===null)throw Error(i(459));var u=dh;return dh=null,u}function BR(u){if(u===fh||u===W0)throw Error(i(483))}var po=!1;function z2(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function F2(u,c){u=u.updateQueue,c.updateQueue===u&&(c.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,callbacks:null})}function mo(u){return{lane:u,tag:0,payload:null,callback:null,next:null}}function yo(u,c,g){var m=u.updateQueue;if(m===null)return null;if(m=m.shared,(dt&2)!==0){var x=m.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),m.pending=c,c=I0(u),wR(u,null,g),c}return P0(u,m,c,g),I0(u)}function hh(u,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194048)!==0)){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,OO(u,g)}}function L2(u,c){var g=u.updateQueue,m=u.alternate;if(m!==null&&(m=m.updateQueue,g===m)){var x=null,E=null;if(g=g.firstBaseUpdate,g!==null){do{var $={lane:g.lane,tag:g.tag,payload:g.payload,callback:null,next:null};E===null?x=E=$:E=E.next=$,g=g.next}while(g!==null);E===null?x=E=c:E=E.next=c}else x=E=c;g={baseState:m.baseState,firstBaseUpdate:x,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},u.updateQueue=g;return}u=g.lastBaseUpdate,u===null?g.firstBaseUpdate=c:u.next=c,g.lastBaseUpdate=c}var B2=!1;function gh(){if(B2){var u=Uc;if(u!==null)throw u}}function ph(u,c,g,m){B2=!1;var x=u.updateQueue;po=!1;var E=x.firstBaseUpdate,$=x.lastBaseUpdate,O=x.shared.pending;if(O!==null){x.shared.pending=null;var B=O,V=B.next;B.next=null,$===null?E=V:$.next=V,$=B;var ie=u.alternate;ie!==null&&(ie=ie.updateQueue,O=ie.lastBaseUpdate,O!==$&&(O===null?ie.firstBaseUpdate=V:O.next=V,ie.lastBaseUpdate=B))}if(E!==null){var oe=x.baseState;$=0,ie=V=B=null,O=E;do{var Q=O.lane&-536870913,K=Q!==O.lane;if(K?(Je&Q)===Q:(m&Q)===Q){Q!==0&&Q===Bc&&(B2=!0),ie!==null&&(ie=ie.next={lane:0,tag:O.tag,payload:O.payload,callback:null,next:null});e:{var ze=u,De=O;Q=c;var bt=g;switch(De.tag){case 1:if(ze=De.payload,typeof ze=="function"){oe=ze.call(bt,oe,Q);break e}oe=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=De.payload,Q=typeof ze=="function"?ze.call(bt,oe,Q):ze,Q==null)break e;oe=d({},oe,Q);break e;case 2:po=!0}}Q=O.callback,Q!==null&&(u.flags|=64,K&&(u.flags|=8192),K=x.callbacks,K===null?x.callbacks=[Q]:K.push(Q))}else K={lane:Q,tag:O.tag,payload:O.payload,callback:O.callback,next:null},ie===null?(V=ie=K,B=oe):ie=ie.next=K,$|=Q;if(O=O.next,O===null){if(O=x.shared.pending,O===null)break;K=O,O=K.next,K.next=null,x.lastBaseUpdate=K,x.shared.pending=null}}while(!0);ie===null&&(B=oe),x.baseState=B,x.firstBaseUpdate=V,x.lastBaseUpdate=ie,E===null&&(x.shared.lanes=0),Ao|=$,u.lanes=$,u.memoizedState=oe}}function UR(u,c){if(typeof u!="function")throw Error(i(191,u));u.call(c)}function qR(u,c){var g=u.callbacks;if(g!==null)for(u.callbacks=null,u=0;u<g.length;u++)UR(g[u],c)}var qc=W(null),Z0=W(0);function PR(u,c){u=ws,ae(Z0,u),ae(qc,c),ws=u|c.baseLanes}function U2(){ae(Z0,ws),ae(qc,qc.current)}function q2(){ws=Z0.current,ne(qc),ne(Z0)}var vo=0,je=null,yt=null,Jt=null,K0=!1,Pc=!1,Qu=!1,J0=0,mh=0,Ic=null,ZV=0;function Gt(){throw Error(i(321))}function P2(u,c){if(c===null)return!1;for(var g=0;g<c.length&&g<u.length;g++)if(!ji(u[g],c[g]))return!1;return!0}function I2(u,c,g,m,x,E){return vo=E,je=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,D.H=u===null||u.memoizedState===null?wD:AD,Qu=!1,E=g(m,x),Qu=!1,Pc&&(E=jR(c,g,m,x)),IR(u),E}function IR(u){D.H=am;var c=yt!==null&&yt.next!==null;if(vo=0,Jt=yt=je=null,K0=!1,mh=0,Ic=null,c)throw Error(i(300));u===null||pn||(u=u.dependencies,u!==null&&Y0(u)&&(pn=!0))}function jR(u,c,g,m){je=u;var x=0;do{if(Pc&&(Ic=null),mh=0,Pc=!1,25<=x)throw Error(i(301));if(x+=1,Jt=yt=null,u.updateQueue!=null){var E=u.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}D.H=rW,E=c(g,m)}while(Pc);return E}function KV(){var u=D.H,c=u.useState()[0];return c=typeof c.then=="function"?yh(c):c,u=u.useState()[0],(yt!==null?yt.memoizedState:null)!==u&&(je.flags|=1024),c}function j2(){var u=J0!==0;return J0=0,u}function H2(u,c,g){c.updateQueue=u.updateQueue,c.flags&=-2053,u.lanes&=~g}function G2(u){if(K0){for(u=u.memoizedState;u!==null;){var c=u.queue;c!==null&&(c.pending=null),u=u.next}K0=!1}vo=0,Jt=yt=je=null,Pc=!1,mh=J0=0,Ic=null}function wi(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Jt===null?je.memoizedState=Jt=u:Jt=Jt.next=u,Jt}function en(){if(yt===null){var u=je.alternate;u=u!==null?u.memoizedState:null}else u=yt.next;var c=Jt===null?je.memoizedState:Jt.next;if(c!==null)Jt=c,yt=u;else{if(u===null)throw je.alternate===null?Error(i(467)):Error(i(310));yt=u,u={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},Jt===null?je.memoizedState=Jt=u:Jt=Jt.next=u}return Jt}function Y2(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yh(u){var c=mh;return mh+=1,Ic===null&&(Ic=[]),u=FR(Ic,u,c),c=je,(Jt===null?c.memoizedState:Jt.next)===null&&(c=c.alternate,D.H=c===null||c.memoizedState===null?wD:AD),u}function em(u){if(u!==null&&typeof u=="object"){if(typeof u.then=="function")return yh(u);if(u.$$typeof===A)return Pn(u)}throw Error(i(438,String(u)))}function X2(u){var c=null,g=je.updateQueue;if(g!==null&&(c=g.memoCache),c==null){var m=je.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),g===null&&(g=Y2(),je.updateQueue=g),g.memoCache=c,g=c.data[c.index],g===void 0)for(g=c.data[c.index]=Array(u),m=0;m<u;m++)g[m]=U;return c.index++,g}function vs(u,c){return typeof c=="function"?c(u):c}function tm(u){var c=en();return V2(c,yt,u)}function V2(u,c,g){var m=u.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=g;var x=u.baseQueue,E=m.pending;if(E!==null){if(x!==null){var $=x.next;x.next=E.next,E.next=$}c.baseQueue=x=E,m.pending=null}if(E=u.baseState,x===null)u.memoizedState=E;else{c=x.next;var O=$=null,B=null,V=c,ie=!1;do{var oe=V.lane&-536870913;if(oe!==V.lane?(Je&oe)===oe:(vo&oe)===oe){var Q=V.revertLane;if(Q===0)B!==null&&(B=B.next={lane:0,revertLane:0,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),oe===Bc&&(ie=!0);else if((vo&Q)===Q){V=V.next,Q===Bc&&(ie=!0);continue}else oe={lane:0,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},B===null?(O=B=oe,$=E):B=B.next=oe,je.lanes|=Q,Ao|=Q;oe=V.action,Qu&&g(E,oe),E=V.hasEagerState?V.eagerState:g(E,oe)}else Q={lane:oe,revertLane:V.revertLane,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},B===null?(O=B=Q,$=E):B=B.next=Q,je.lanes|=oe,Ao|=oe;V=V.next}while(V!==null&&V!==c);if(B===null?$=E:B.next=O,!ji(E,u.memoizedState)&&(pn=!0,ie&&(g=Uc,g!==null)))throw g;u.memoizedState=E,u.baseState=$,u.baseQueue=B,m.lastRenderedState=E}return x===null&&(m.lanes=0),[u.memoizedState,m.dispatch]}function W2(u){var c=en(),g=c.queue;if(g===null)throw Error(i(311));g.lastRenderedReducer=u;var m=g.dispatch,x=g.pending,E=c.memoizedState;if(x!==null){g.pending=null;var $=x=x.next;do E=u(E,$.action),$=$.next;while($!==x);ji(E,c.memoizedState)||(pn=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),g.lastRenderedState=E}return[E,m]}function HR(u,c,g){var m=je,x=en(),E=ut;if(E){if(g===void 0)throw Error(i(407));g=g()}else g=c();var $=!ji((yt||x).memoizedState,g);$&&(x.memoizedState=g,pn=!0),x=x.queue;var O=XR.bind(null,m,x,u);if(vh(2048,8,O,[u]),x.getSnapshot!==c||$||Jt!==null&&Jt.memoizedState.tag&1){if(m.flags|=2048,jc(9,nm(),YR.bind(null,m,x,g,c),null),At===null)throw Error(i(349));E||(vo&124)!==0||GR(m,c,g)}return g}function GR(u,c,g){u.flags|=16384,u={getSnapshot:c,value:g},c=je.updateQueue,c===null?(c=Y2(),je.updateQueue=c,c.stores=[u]):(g=c.stores,g===null?c.stores=[u]:g.push(u))}function YR(u,c,g,m){c.value=g,c.getSnapshot=m,VR(c)&&WR(u)}function XR(u,c,g){return g(function(){VR(c)&&WR(u)})}function VR(u){var c=u.getSnapshot;u=u.value;try{var g=c();return!ji(u,g)}catch{return!0}}function WR(u){var c=Nc(u,2);c!==null&&Wi(c,u,2)}function Q2(u){var c=wi();if(typeof u=="function"){var g=u;if(u=g(),Qu){co(!0);try{g()}finally{co(!1)}}}return c.memoizedState=c.baseState=u,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:u},c}function QR(u,c,g,m){return u.baseState=g,V2(u,yt,typeof m=="function"?m:vs)}function JV(u,c,g,m,x){if(rm(u))throw Error(i(485));if(u=c.action,u!==null){var E={payload:x,action:u,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function($){E.listeners.push($)}};D.T!==null?g(!0):E.isTransition=!1,m(E),g=c.pending,g===null?(E.next=c.pending=E,ZR(c,E)):(E.next=g.next,c.pending=g.next=E)}}function ZR(u,c){var g=c.action,m=c.payload,x=u.state;if(c.isTransition){var E=D.T,$={};D.T=$;try{var O=g(x,m),B=D.S;B!==null&&B($,O),KR(u,c,O)}catch(V){Z2(u,c,V)}finally{D.T=E}}else try{E=g(x,m),KR(u,c,E)}catch(V){Z2(u,c,V)}}function KR(u,c,g){g!==null&&typeof g=="object"&&typeof g.then=="function"?g.then(function(m){JR(u,c,m)},function(m){return Z2(u,c,m)}):JR(u,c,g)}function JR(u,c,g){c.status="fulfilled",c.value=g,eD(c),u.state=g,c=u.pending,c!==null&&(g=c.next,g===c?u.pending=null:(g=g.next,c.next=g,ZR(u,g)))}function Z2(u,c,g){var m=u.pending;if(u.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=g,eD(c),c=c.next;while(c!==m)}u.action=null}function eD(u){u=u.listeners;for(var c=0;c<u.length;c++)(0,u[c])()}function tD(u,c){return c}function nD(u,c){if(ut){var g=At.formState;if(g!==null){e:{var m=je;if(ut){if(Lt){t:{for(var x=Lt,E=Sa;x.nodeType!==8;){if(!E){x=null;break t}if(x=Ir(x.nextSibling),x===null){x=null;break t}}E=x.data,x=E==="F!"||E==="F"?x:null}if(x){Lt=Ir(x.nextSibling),m=x.data==="F!";break e}}Yu(m)}m=!1}m&&(c=g[0])}}return g=wi(),g.memoizedState=g.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:tD,lastRenderedState:c},g.queue=m,g=SD.bind(null,je,m),m.dispatch=g,m=Q2(!1),E=nS.bind(null,je,!1,m.queue),m=wi(),x={state:c,dispatch:null,action:u,pending:null},m.queue=x,g=JV.bind(null,je,x,E,g),x.dispatch=g,m.memoizedState=u,[c,g,!1]}function iD(u){var c=en();return rD(c,yt,u)}function rD(u,c,g){if(c=V2(u,c,tD)[0],u=tm(vs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=yh(c)}catch($){throw $===fh?W0:$}else m=c;c=en();var x=c.queue,E=x.dispatch;return g!==c.memoizedState&&(je.flags|=2048,jc(9,nm(),eW.bind(null,x,g),null)),[m,E,u]}function eW(u,c){u.action=c}function aD(u){var c=en(),g=yt;if(g!==null)return rD(c,g,u);en(),c=c.memoizedState,g=en();var m=g.queue.dispatch;return g.memoizedState=u,[c,m,!1]}function jc(u,c,g,m){return u={tag:u,create:g,deps:m,inst:c,next:null},c=je.updateQueue,c===null&&(c=Y2(),je.updateQueue=c),g=c.lastEffect,g===null?c.lastEffect=u.next=u:(m=g.next,g.next=u,u.next=m,c.lastEffect=u),u}function nm(){return{destroy:void 0,resource:void 0}}function sD(){return en().memoizedState}function im(u,c,g,m){var x=wi();m=m===void 0?null:m,je.flags|=u,x.memoizedState=jc(1|c,nm(),g,m)}function vh(u,c,g,m){var x=en();m=m===void 0?null:m;var E=x.memoizedState.inst;yt!==null&&m!==null&&P2(m,yt.memoizedState.deps)?x.memoizedState=jc(c,E,g,m):(je.flags|=u,x.memoizedState=jc(1|c,E,g,m))}function oD(u,c){im(8390656,8,u,c)}function uD(u,c){vh(2048,8,u,c)}function lD(u,c){return vh(4,2,u,c)}function cD(u,c){return vh(4,4,u,c)}function fD(u,c){if(typeof c=="function"){u=u();var g=c(u);return function(){typeof g=="function"?g():c(null)}}if(c!=null)return u=u(),c.current=u,function(){c.current=null}}function dD(u,c,g){g=g!=null?g.concat([u]):null,vh(4,4,fD.bind(null,c,u),g)}function K2(){}function hD(u,c){var g=en();c=c===void 0?null:c;var m=g.memoizedState;return c!==null&&P2(c,m[1])?m[0]:(g.memoizedState=[u,c],u)}function gD(u,c){var g=en();c=c===void 0?null:c;var m=g.memoizedState;if(c!==null&&P2(c,m[1]))return m[0];if(m=u(),Qu){co(!0);try{u()}finally{co(!1)}}return g.memoizedState=[m,c],m}function J2(u,c,g){return g===void 0||(vo&1073741824)!==0?u.memoizedState=c:(u.memoizedState=g,u=yN(),je.lanes|=u,Ao|=u,g)}function pD(u,c,g,m){return ji(g,c)?g:qc.current!==null?(u=J2(u,g,m),ji(u,c)||(pn=!0),u):(vo&42)===0?(pn=!0,u.memoizedState=g):(u=yN(),je.lanes|=u,Ao|=u,c)}function mD(u,c,g,m,x){var E=P.p;P.p=E!==0&&8>E?E:8;var $=D.T,O={};D.T=O,nS(u,!1,c,g);try{var B=x(),V=D.S;if(V!==null&&V(O,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ie=QV(B,m);bh(u,c,ie,Vi(u))}else bh(u,c,m,Vi(u))}catch(oe){bh(u,c,{then:function(){},status:"rejected",reason:oe},Vi())}finally{P.p=E,D.T=$}}function tW(){}function eS(u,c,g,m){if(u.tag!==5)throw Error(i(476));var x=yD(u).queue;mD(u,x,c,X,g===null?tW:function(){return vD(u),g(m)})}function yD(u){var c=u.memoizedState;if(c!==null)return c;c={memoizedState:X,baseState:X,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:X},next:null};var g={};return c.next={memoizedState:g,baseState:g,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:vs,lastRenderedState:g},next:null},u.memoizedState=c,u=u.alternate,u!==null&&(u.memoizedState=c),c}function vD(u){var c=yD(u).next.queue;bh(u,c,{},Vi())}function tS(){return Pn(Lh)}function bD(){return en().memoizedState}function xD(){return en().memoizedState}function nW(u){for(var c=u.return;c!==null;){switch(c.tag){case 24:case 3:var g=Vi();u=mo(g);var m=yo(c,u,g);m!==null&&(Wi(m,c,g),hh(m,c,g)),c={cache:O2()},u.payload=c;return}c=c.return}}function iW(u,c,g){var m=Vi();g={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null},rm(u)?ED(c,g):(g=S2(u,c,g,m),g!==null&&(Wi(g,u,m),_D(g,c,m)))}function SD(u,c,g){var m=Vi();bh(u,c,g,m)}function bh(u,c,g,m){var x={lane:m,revertLane:0,action:g,hasEagerState:!1,eagerState:null,next:null};if(rm(u))ED(c,x);else{var E=u.alternate;if(u.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var $=c.lastRenderedState,O=E($,g);if(x.hasEagerState=!0,x.eagerState=O,ji(O,$))return P0(u,c,x,0),At===null&&q0(),!1}catch{}finally{}if(g=S2(u,c,x,m),g!==null)return Wi(g,u,m),_D(g,c,m),!0}return!1}function nS(u,c,g,m){if(m={lane:2,revertLane:NS(),action:m,hasEagerState:!1,eagerState:null,next:null},rm(u)){if(c)throw Error(i(479))}else c=S2(u,g,m,2),c!==null&&Wi(c,u,2)}function rm(u){var c=u.alternate;return u===je||c!==null&&c===je}function ED(u,c){Pc=K0=!0;var g=u.pending;g===null?c.next=c:(c.next=g.next,g.next=c),u.pending=c}function _D(u,c,g){if((g&4194048)!==0){var m=c.lanes;m&=u.pendingLanes,g|=m,c.lanes=g,OO(u,g)}}var am={readContext:Pn,use:em,useCallback:Gt,useContext:Gt,useEffect:Gt,useImperativeHandle:Gt,useLayoutEffect:Gt,useInsertionEffect:Gt,useMemo:Gt,useReducer:Gt,useRef:Gt,useState:Gt,useDebugValue:Gt,useDeferredValue:Gt,useTransition:Gt,useSyncExternalStore:Gt,useId:Gt,useHostTransitionStatus:Gt,useFormState:Gt,useActionState:Gt,useOptimistic:Gt,useMemoCache:Gt,useCacheRefresh:Gt},wD={readContext:Pn,use:em,useCallback:function(u,c){return wi().memoizedState=[u,c===void 0?null:c],u},useContext:Pn,useEffect:oD,useImperativeHandle:function(u,c,g){g=g!=null?g.concat([u]):null,im(4194308,4,fD.bind(null,c,u),g)},useLayoutEffect:function(u,c){return im(4194308,4,u,c)},useInsertionEffect:function(u,c){im(4,2,u,c)},useMemo:function(u,c){var g=wi();c=c===void 0?null:c;var m=u();if(Qu){co(!0);try{u()}finally{co(!1)}}return g.memoizedState=[m,c],m},useReducer:function(u,c,g){var m=wi();if(g!==void 0){var x=g(c);if(Qu){co(!0);try{g(c)}finally{co(!1)}}}else x=c;return m.memoizedState=m.baseState=x,u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:x},m.queue=u,u=u.dispatch=iW.bind(null,je,u),[m.memoizedState,u]},useRef:function(u){var c=wi();return u={current:u},c.memoizedState=u},useState:function(u){u=Q2(u);var c=u.queue,g=SD.bind(null,je,c);return c.dispatch=g,[u.memoizedState,g]},useDebugValue:K2,useDeferredValue:function(u,c){var g=wi();return J2(g,u,c)},useTransition:function(){var u=Q2(!1);return u=mD.bind(null,je,u.queue,!0,!1),wi().memoizedState=u,[!1,u]},useSyncExternalStore:function(u,c,g){var m=je,x=wi();if(ut){if(g===void 0)throw Error(i(407));g=g()}else{if(g=c(),At===null)throw Error(i(349));(Je&124)!==0||GR(m,c,g)}x.memoizedState=g;var E={value:g,getSnapshot:c};return x.queue=E,oD(XR.bind(null,m,E,u),[u]),m.flags|=2048,jc(9,nm(),YR.bind(null,m,E,g,c),null),g},useId:function(){var u=wi(),c=At.identifierPrefix;if(ut){var g=ps,m=gs;g=(m&~(1<<32-Ii(m)-1)).toString(32)+g,c="«"+c+"R"+g,g=J0++,0<g&&(c+="H"+g.toString(32)),c+="»"}else g=ZV++,c="«"+c+"r"+g.toString(32)+"»";return u.memoizedState=c},useHostTransitionStatus:tS,useFormState:nD,useActionState:nD,useOptimistic:function(u){var c=wi();c.memoizedState=c.baseState=u;var g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=g,c=nS.bind(null,je,!0,g),g.dispatch=c,[u,c]},useMemoCache:X2,useCacheRefresh:function(){return wi().memoizedState=nW.bind(null,je)}},AD={readContext:Pn,use:em,useCallback:hD,useContext:Pn,useEffect:uD,useImperativeHandle:dD,useInsertionEffect:lD,useLayoutEffect:cD,useMemo:gD,useReducer:tm,useRef:sD,useState:function(){return tm(vs)},useDebugValue:K2,useDeferredValue:function(u,c){var g=en();return pD(g,yt.memoizedState,u,c)},useTransition:function(){var u=tm(vs)[0],c=en().memoizedState;return[typeof u=="boolean"?u:yh(u),c]},useSyncExternalStore:HR,useId:bD,useHostTransitionStatus:tS,useFormState:iD,useActionState:iD,useOptimistic:function(u,c){var g=en();return QR(g,yt,u,c)},useMemoCache:X2,useCacheRefresh:xD},rW={readContext:Pn,use:em,useCallback:hD,useContext:Pn,useEffect:uD,useImperativeHandle:dD,useInsertionEffect:lD,useLayoutEffect:cD,useMemo:gD,useReducer:W2,useRef:sD,useState:function(){return W2(vs)},useDebugValue:K2,useDeferredValue:function(u,c){var g=en();return yt===null?J2(g,u,c):pD(g,yt.memoizedState,u,c)},useTransition:function(){var u=W2(vs)[0],c=en().memoizedState;return[typeof u=="boolean"?u:yh(u),c]},useSyncExternalStore:HR,useId:bD,useHostTransitionStatus:tS,useFormState:aD,useActionState:aD,useOptimistic:function(u,c){var g=en();return yt!==null?QR(g,yt,u,c):(g.baseState=u,[u,g.queue.dispatch])},useMemoCache:X2,useCacheRefresh:xD},Hc=null,xh=0;function sm(u){var c=xh;return xh+=1,Hc===null&&(Hc=[]),FR(Hc,u,c)}function Sh(u,c){c=c.props.ref,u.ref=c!==void 0?c:null}function om(u,c){throw c.$$typeof===h?Error(i(525)):(u=Object.prototype.toString.call(c),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":u)))}function CD(u){var c=u._init;return c(u._payload)}function $D(u){function c(H,I){if(u){var Y=H.deletions;Y===null?(H.deletions=[I],H.flags|=16):Y.push(I)}}function g(H,I){if(!u)return null;for(;I!==null;)c(H,I),I=I.sibling;return null}function m(H){for(var I=new Map;H!==null;)H.key!==null?I.set(H.key,H):I.set(H.index,H),H=H.sibling;return I}function x(H,I){return H=hs(H,I),H.index=0,H.sibling=null,H}function E(H,I,Y){return H.index=Y,u?(Y=H.alternate,Y!==null?(Y=Y.index,Y<I?(H.flags|=67108866,I):Y):(H.flags|=67108866,I)):(H.flags|=1048576,I)}function $(H){return u&&H.alternate===null&&(H.flags|=67108866),H}function O(H,I,Y,se){return I===null||I.tag!==6?(I=_2(Y,H.mode,se),I.return=H,I):(I=x(I,Y),I.return=H,I)}function B(H,I,Y,se){var _e=Y.type;return _e===v?ie(H,I,Y.props.children,se,Y.key):I!==null&&(I.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&CD(_e)===I.type)?(I=x(I,Y.props),Sh(I,Y),I.return=H,I):(I=j0(Y.type,Y.key,Y.props,null,H.mode,se),Sh(I,Y),I.return=H,I)}function V(H,I,Y,se){return I===null||I.tag!==4||I.stateNode.containerInfo!==Y.containerInfo||I.stateNode.implementation!==Y.implementation?(I=w2(Y,H.mode,se),I.return=H,I):(I=x(I,Y.children||[]),I.return=H,I)}function ie(H,I,Y,se,_e){return I===null||I.tag!==7?(I=Iu(Y,H.mode,se,_e),I.return=H,I):(I=x(I,Y),I.return=H,I)}function oe(H,I,Y){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=_2(""+I,H.mode,Y),I.return=H,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case p:return Y=j0(I.type,I.key,I.props,null,H.mode,Y),Sh(Y,I),Y.return=H,Y;case y:return I=w2(I,H.mode,Y),I.return=H,I;case R:var se=I._init;return I=se(I._payload),oe(H,I,Y)}if(F(I)||G(I))return I=Iu(I,H.mode,Y,null),I.return=H,I;if(typeof I.then=="function")return oe(H,sm(I),Y);if(I.$$typeof===A)return oe(H,X0(H,I),Y);om(H,I)}return null}function Q(H,I,Y,se){var _e=I!==null?I.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return _e!==null?null:O(H,I,""+Y,se);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:return Y.key===_e?B(H,I,Y,se):null;case y:return Y.key===_e?V(H,I,Y,se):null;case R:return _e=Y._init,Y=_e(Y._payload),Q(H,I,Y,se)}if(F(Y)||G(Y))return _e!==null?null:ie(H,I,Y,se,null);if(typeof Y.then=="function")return Q(H,I,sm(Y),se);if(Y.$$typeof===A)return Q(H,I,X0(H,Y),se);om(H,Y)}return null}function K(H,I,Y,se,_e){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return H=H.get(Y)||null,O(I,H,""+se,_e);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case p:return H=H.get(se.key===null?Y:se.key)||null,B(I,H,se,_e);case y:return H=H.get(se.key===null?Y:se.key)||null,V(I,H,se,_e);case R:var Ge=se._init;return se=Ge(se._payload),K(H,I,Y,se,_e)}if(F(se)||G(se))return H=H.get(Y)||null,ie(I,H,se,_e,null);if(typeof se.then=="function")return K(H,I,Y,sm(se),_e);if(se.$$typeof===A)return K(H,I,Y,X0(I,se),_e);om(I,se)}return null}function ze(H,I,Y,se){for(var _e=null,Ge=null,$e=I,Ne=I=0,yn=null;$e!==null&&Ne<Y.length;Ne++){$e.index>Ne?(yn=$e,$e=null):yn=$e.sibling;var it=Q(H,$e,Y[Ne],se);if(it===null){$e===null&&($e=yn);break}u&&$e&&it.alternate===null&&c(H,$e),I=E(it,I,Ne),Ge===null?_e=it:Ge.sibling=it,Ge=it,$e=yn}if(Ne===Y.length)return g(H,$e),ut&&Hu(H,Ne),_e;if($e===null){for(;Ne<Y.length;Ne++)$e=oe(H,Y[Ne],se),$e!==null&&(I=E($e,I,Ne),Ge===null?_e=$e:Ge.sibling=$e,Ge=$e);return ut&&Hu(H,Ne),_e}for($e=m($e);Ne<Y.length;Ne++)yn=K($e,H,Ne,Y[Ne],se),yn!==null&&(u&&yn.alternate!==null&&$e.delete(yn.key===null?Ne:yn.key),I=E(yn,I,Ne),Ge===null?_e=yn:Ge.sibling=yn,Ge=yn);return u&&$e.forEach(function(No){return c(H,No)}),ut&&Hu(H,Ne),_e}function De(H,I,Y,se){if(Y==null)throw Error(i(151));for(var _e=null,Ge=null,$e=I,Ne=I=0,yn=null,it=Y.next();$e!==null&&!it.done;Ne++,it=Y.next()){$e.index>Ne?(yn=$e,$e=null):yn=$e.sibling;var No=Q(H,$e,it.value,se);if(No===null){$e===null&&($e=yn);break}u&&$e&&No.alternate===null&&c(H,$e),I=E(No,I,Ne),Ge===null?_e=No:Ge.sibling=No,Ge=No,$e=yn}if(it.done)return g(H,$e),ut&&Hu(H,Ne),_e;if($e===null){for(;!it.done;Ne++,it=Y.next())it=oe(H,it.value,se),it!==null&&(I=E(it,I,Ne),Ge===null?_e=it:Ge.sibling=it,Ge=it);return ut&&Hu(H,Ne),_e}for($e=m($e);!it.done;Ne++,it=Y.next())it=K($e,H,Ne,it.value,se),it!==null&&(u&&it.alternate!==null&&$e.delete(it.key===null?Ne:it.key),I=E(it,I,Ne),Ge===null?_e=it:Ge.sibling=it,Ge=it);return u&&$e.forEach(function(aQ){return c(H,aQ)}),ut&&Hu(H,Ne),_e}function bt(H,I,Y,se){if(typeof Y=="object"&&Y!==null&&Y.type===v&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case p:e:{for(var _e=Y.key;I!==null;){if(I.key===_e){if(_e=Y.type,_e===v){if(I.tag===7){g(H,I.sibling),se=x(I,Y.props.children),se.return=H,H=se;break e}}else if(I.elementType===_e||typeof _e=="object"&&_e!==null&&_e.$$typeof===R&&CD(_e)===I.type){g(H,I.sibling),se=x(I,Y.props),Sh(se,Y),se.return=H,H=se;break e}g(H,I);break}else c(H,I);I=I.sibling}Y.type===v?(se=Iu(Y.props.children,H.mode,se,Y.key),se.return=H,H=se):(se=j0(Y.type,Y.key,Y.props,null,H.mode,se),Sh(se,Y),se.return=H,H=se)}return $(H);case y:e:{for(_e=Y.key;I!==null;){if(I.key===_e)if(I.tag===4&&I.stateNode.containerInfo===Y.containerInfo&&I.stateNode.implementation===Y.implementation){g(H,I.sibling),se=x(I,Y.children||[]),se.return=H,H=se;break e}else{g(H,I);break}else c(H,I);I=I.sibling}se=w2(Y,H.mode,se),se.return=H,H=se}return $(H);case R:return _e=Y._init,Y=_e(Y._payload),bt(H,I,Y,se)}if(F(Y))return ze(H,I,Y,se);if(G(Y)){if(_e=G(Y),typeof _e!="function")throw Error(i(150));return Y=_e.call(Y),De(H,I,Y,se)}if(typeof Y.then=="function")return bt(H,I,sm(Y),se);if(Y.$$typeof===A)return bt(H,I,X0(H,Y),se);om(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,I!==null&&I.tag===6?(g(H,I.sibling),se=x(I,Y),se.return=H,H=se):(g(H,I),se=_2(Y,H.mode,se),se.return=H,H=se),$(H)):g(H,I)}return function(H,I,Y,se){try{xh=0;var _e=bt(H,I,Y,se);return Hc=null,_e}catch($e){if($e===fh||$e===W0)throw $e;var Ge=Hi(29,$e,null,H.mode);return Ge.lanes=se,Ge.return=H,Ge}finally{}}}var Gc=$D(!0),TD=$D(!1),yr=W(null),Ea=null;function bo(u){var c=u.alternate;ae(an,an.current&1),ae(yr,u),Ea===null&&(c===null||qc.current!==null||c.memoizedState!==null)&&(Ea=u)}function MD(u){if(u.tag===22){if(ae(an,an.current),ae(yr,u),Ea===null){var c=u.alternate;c!==null&&c.memoizedState!==null&&(Ea=u)}}else xo()}function xo(){ae(an,an.current),ae(yr,yr.current)}function bs(u){ne(yr),Ea===u&&(Ea=null),ne(an)}var an=W(0);function um(u){for(var c=u;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||YS(g)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function iS(u,c,g,m){c=u.memoizedState,g=g(m,c),g=g==null?c:d({},c,g),u.memoizedState=g,u.lanes===0&&(u.updateQueue.baseState=g)}var rS={enqueueSetState:function(u,c,g){u=u._reactInternals;var m=Vi(),x=mo(m);x.payload=c,g!=null&&(x.callback=g),c=yo(u,x,m),c!==null&&(Wi(c,u,m),hh(c,u,m))},enqueueReplaceState:function(u,c,g){u=u._reactInternals;var m=Vi(),x=mo(m);x.tag=1,x.payload=c,g!=null&&(x.callback=g),c=yo(u,x,m),c!==null&&(Wi(c,u,m),hh(c,u,m))},enqueueForceUpdate:function(u,c){u=u._reactInternals;var g=Vi(),m=mo(g);m.tag=2,c!=null&&(m.callback=c),c=yo(u,m,g),c!==null&&(Wi(c,u,g),hh(c,u,g))}};function kD(u,c,g,m,x,E,$){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(m,E,$):c.prototype&&c.prototype.isPureReactComponent?!ih(g,m)||!ih(x,E):!0}function OD(u,c,g,m){u=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,m),c.state!==u&&rS.enqueueReplaceState(c,c.state,null)}function Zu(u,c){var g=c;if("ref"in c){g={};for(var m in c)m!=="ref"&&(g[m]=c[m])}if(u=u.defaultProps){g===c&&(g=d({},g));for(var x in u)g[x]===void 0&&(g[x]=u[x])}return g}var lm=typeof reportError=="function"?reportError:function(u){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof u=="object"&&u!==null&&typeof u.message=="string"?String(u.message):String(u),error:u});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",u);return}console.error(u)};function RD(u){lm(u)}function DD(u){console.error(u)}function ND(u){lm(u)}function cm(u,c){try{var g=u.onUncaughtError;g(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function zD(u,c,g){try{var m=u.onCaughtError;m(g.value,{componentStack:g.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function aS(u,c,g){return g=mo(g),g.tag=3,g.payload={element:null},g.callback=function(){cm(u,c)},g}function FD(u){return u=mo(u),u.tag=3,u}function LD(u,c,g,m){var x=g.type.getDerivedStateFromError;if(typeof x=="function"){var E=m.value;u.payload=function(){return x(E)},u.callback=function(){zD(c,g,m)}}var $=g.stateNode;$!==null&&typeof $.componentDidCatch=="function"&&(u.callback=function(){zD(c,g,m),typeof x!="function"&&(Co===null?Co=new Set([this]):Co.add(this));var O=m.stack;this.componentDidCatch(m.value,{componentStack:O!==null?O:""})})}function aW(u,c,g,m,x){if(g.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=g.alternate,c!==null&&uh(c,g,x,!0),g=yr.current,g!==null){switch(g.tag){case 13:return Ea===null?MS():g.alternate===null&&Bt===0&&(Bt=3),g.flags&=-257,g.flags|=65536,g.lanes=x,m===N2?g.flags|=16384:(c=g.updateQueue,c===null?g.updateQueue=new Set([m]):c.add(m),OS(u,m,x)),!1;case 22:return g.flags|=65536,m===N2?g.flags|=16384:(c=g.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},g.updateQueue=c):(g=c.retryQueue,g===null?c.retryQueue=new Set([m]):g.add(m)),OS(u,m,x)),!1}throw Error(i(435,g.tag))}return OS(u,m,x),MS(),!1}if(ut)return c=yr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,m!==$2&&(u=Error(i(422),{cause:m}),oh(hr(u,g)))):(m!==$2&&(c=Error(i(423),{cause:m}),oh(hr(c,g))),u=u.current.alternate,u.flags|=65536,x&=-x,u.lanes|=x,m=hr(m,g),x=aS(u.stateNode,m,x),L2(u,x),Bt!==4&&(Bt=2)),!1;var E=Error(i(520),{cause:m});if(E=hr(E,g),Th===null?Th=[E]:Th.push(E),Bt!==4&&(Bt=2),c===null)return!0;m=hr(m,g),g=c;do{switch(g.tag){case 3:return g.flags|=65536,u=x&-x,g.lanes|=u,u=aS(g.stateNode,m,u),L2(g,u),!1;case 1:if(c=g.type,E=g.stateNode,(g.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Co===null||!Co.has(E))))return g.flags|=65536,x&=-x,g.lanes|=x,x=FD(x),LD(x,u,g,m),L2(g,x),!1}g=g.return}while(g!==null);return!1}var BD=Error(i(461)),pn=!1;function Tn(u,c,g,m){c.child=u===null?TD(c,null,g,m):Gc(c,u.child,g,m)}function UD(u,c,g,m,x){g=g.render;var E=c.ref;if("ref"in m){var $={};for(var O in m)O!=="ref"&&($[O]=m[O])}else $=m;return Vu(c),m=I2(u,c,g,$,E,x),O=j2(),u!==null&&!pn?(H2(u,c,x),xs(u,c,x)):(ut&&O&&A2(c),c.flags|=1,Tn(u,c,m,x),c.child)}function qD(u,c,g,m,x){if(u===null){var E=g.type;return typeof E=="function"&&!E2(E)&&E.defaultProps===void 0&&g.compare===null?(c.tag=15,c.type=E,PD(u,c,E,m,x)):(u=j0(g.type,null,m,c,c.mode,x),u.ref=c.ref,u.return=c,c.child=u)}if(E=u.child,!hS(u,x)){var $=E.memoizedProps;if(g=g.compare,g=g!==null?g:ih,g($,m)&&u.ref===c.ref)return xs(u,c,x)}return c.flags|=1,u=hs(E,m),u.ref=c.ref,u.return=c,c.child=u}function PD(u,c,g,m,x){if(u!==null){var E=u.memoizedProps;if(ih(E,m)&&u.ref===c.ref)if(pn=!1,c.pendingProps=m=E,hS(u,x))(u.flags&131072)!==0&&(pn=!0);else return c.lanes=u.lanes,xs(u,c,x)}return sS(u,c,g,m,x)}function ID(u,c,g){var m=c.pendingProps,x=m.children,E=u!==null?u.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=E!==null?E.baseLanes|g:g,u!==null){for(x=c.child=u.child,E=0;x!==null;)E=E|x.lanes|x.childLanes,x=x.sibling;c.childLanes=E&~m}else c.childLanes=0,c.child=null;return jD(u,c,m,g)}if((g&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},u!==null&&V0(c,E!==null?E.cachePool:null),E!==null?PR(c,E):U2(),MD(c);else return c.lanes=c.childLanes=536870912,jD(u,c,E!==null?E.baseLanes|g:g,g)}else E!==null?(V0(c,E.cachePool),PR(c,E),xo(),c.memoizedState=null):(u!==null&&V0(c,null),U2(),xo());return Tn(u,c,x,g),c.child}function jD(u,c,g,m){var x=D2();return x=x===null?null:{parent:rn._currentValue,pool:x},c.memoizedState={baseLanes:g,cachePool:x},u!==null&&V0(c,null),U2(),MD(c),u!==null&&uh(u,c,m,!0),null}function fm(u,c){var g=c.ref;if(g===null)u!==null&&u.ref!==null&&(c.flags|=4194816);else{if(typeof g!="function"&&typeof g!="object")throw Error(i(284));(u===null||u.ref!==g)&&(c.flags|=4194816)}}function sS(u,c,g,m,x){return Vu(c),g=I2(u,c,g,m,void 0,x),m=j2(),u!==null&&!pn?(H2(u,c,x),xs(u,c,x)):(ut&&m&&A2(c),c.flags|=1,Tn(u,c,g,x),c.child)}function HD(u,c,g,m,x,E){return Vu(c),c.updateQueue=null,g=jR(c,m,g,x),IR(u),m=j2(),u!==null&&!pn?(H2(u,c,E),xs(u,c,E)):(ut&&m&&A2(c),c.flags|=1,Tn(u,c,g,E),c.child)}function GD(u,c,g,m,x){if(Vu(c),c.stateNode===null){var E=zc,$=g.contextType;typeof $=="object"&&$!==null&&(E=Pn($)),E=new g(m,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=rS,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=m,E.state=c.memoizedState,E.refs={},z2(c),$=g.contextType,E.context=typeof $=="object"&&$!==null?Pn($):zc,E.state=c.memoizedState,$=g.getDerivedStateFromProps,typeof $=="function"&&(iS(c,g,$,m),E.state=c.memoizedState),typeof g.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||($=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),$!==E.state&&rS.enqueueReplaceState(E,E.state,null),ph(c,m,E,x),gh(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(u===null){E=c.stateNode;var O=c.memoizedProps,B=Zu(g,O);E.props=B;var V=E.context,ie=g.contextType;$=zc,typeof ie=="object"&&ie!==null&&($=Pn(ie));var oe=g.getDerivedStateFromProps;ie=typeof oe=="function"||typeof E.getSnapshotBeforeUpdate=="function",O=c.pendingProps!==O,ie||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(O||V!==$)&&OD(c,E,m,$),po=!1;var Q=c.memoizedState;E.state=Q,ph(c,m,E,x),gh(),V=c.memoizedState,O||Q!==V||po?(typeof oe=="function"&&(iS(c,g,oe,m),V=c.memoizedState),(B=po||kD(c,g,B,m,Q,V,$))?(ie||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=V),E.props=m,E.state=V,E.context=$,m=B):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{E=c.stateNode,F2(u,c),$=c.memoizedProps,ie=Zu(g,$),E.props=ie,oe=c.pendingProps,Q=E.context,V=g.contextType,B=zc,typeof V=="object"&&V!==null&&(B=Pn(V)),O=g.getDerivedStateFromProps,(V=typeof O=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||($!==oe||Q!==B)&&OD(c,E,m,B),po=!1,Q=c.memoizedState,E.state=Q,ph(c,m,E,x),gh();var K=c.memoizedState;$!==oe||Q!==K||po||u!==null&&u.dependencies!==null&&Y0(u.dependencies)?(typeof O=="function"&&(iS(c,g,O,m),K=c.memoizedState),(ie=po||kD(c,g,ie,m,Q,K,B)||u!==null&&u.dependencies!==null&&Y0(u.dependencies))?(V||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,K,B),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,K,B)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||$===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=K),E.props=m,E.state=K,E.context=B,m=ie):(typeof E.componentDidUpdate!="function"||$===u.memoizedProps&&Q===u.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||$===u.memoizedProps&&Q===u.memoizedState||(c.flags|=1024),m=!1)}return E=m,fm(u,c),m=(c.flags&128)!==0,E||m?(E=c.stateNode,g=m&&typeof g.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,u!==null&&m?(c.child=Gc(c,u.child,null,x),c.child=Gc(c,null,g,x)):Tn(u,c,g,x),c.memoizedState=E.state,u=c.child):u=xs(u,c,x),u}function YD(u,c,g,m){return sh(),c.flags|=256,Tn(u,c,g,m),c.child}var oS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function uS(u){return{baseLanes:u,cachePool:DR()}}function lS(u,c,g){return u=u!==null?u.childLanes&~g:0,c&&(u|=vr),u}function XD(u,c,g){var m=c.pendingProps,x=!1,E=(c.flags&128)!==0,$;if(($=E)||($=u!==null&&u.memoizedState===null?!1:(an.current&2)!==0),$&&(x=!0,c.flags&=-129),$=(c.flags&32)!==0,c.flags&=-33,u===null){if(ut){if(x?bo(c):xo(),ut){var O=Lt,B;if(B=O){e:{for(B=O,O=Sa;B.nodeType!==8;){if(!O){O=null;break e}if(B=Ir(B.nextSibling),B===null){O=null;break e}}O=B}O!==null?(c.memoizedState={dehydrated:O,treeContext:ju!==null?{id:gs,overflow:ps}:null,retryLane:536870912,hydrationErrors:null},B=Hi(18,null,null,0),B.stateNode=O,B.return=c,c.child=B,ii=c,Lt=null,B=!0):B=!1}B||Yu(c)}if(O=c.memoizedState,O!==null&&(O=O.dehydrated,O!==null))return YS(O)?c.lanes=32:c.lanes=536870912,null;bs(c)}return O=m.children,m=m.fallback,x?(xo(),x=c.mode,O=dm({mode:"hidden",children:O},x),m=Iu(m,x,g,null),O.return=c,m.return=c,O.sibling=m,c.child=O,x=c.child,x.memoizedState=uS(g),x.childLanes=lS(u,$,g),c.memoizedState=oS,m):(bo(c),cS(c,O))}if(B=u.memoizedState,B!==null&&(O=B.dehydrated,O!==null)){if(E)c.flags&256?(bo(c),c.flags&=-257,c=fS(u,c,g)):c.memoizedState!==null?(xo(),c.child=u.child,c.flags|=128,c=null):(xo(),x=m.fallback,O=c.mode,m=dm({mode:"visible",children:m.children},O),x=Iu(x,O,g,null),x.flags|=2,m.return=c,x.return=c,m.sibling=x,c.child=m,Gc(c,u.child,null,g),m=c.child,m.memoizedState=uS(g),m.childLanes=lS(u,$,g),c.memoizedState=oS,c=x);else if(bo(c),YS(O)){if($=O.nextSibling&&O.nextSibling.dataset,$)var V=$.dgst;$=V,m=Error(i(419)),m.stack="",m.digest=$,oh({value:m,source:null,stack:null}),c=fS(u,c,g)}else if(pn||uh(u,c,g,!1),$=(g&u.childLanes)!==0,pn||$){if($=At,$!==null&&(m=g&-g,m=(m&42)!==0?1:Xx(m),m=(m&($.suspendedLanes|g))!==0?0:m,m!==0&&m!==B.retryLane))throw B.retryLane=m,Nc(u,m),Wi($,u,m),BD;O.data==="$?"||MS(),c=fS(u,c,g)}else O.data==="$?"?(c.flags|=192,c.child=u.child,c=null):(u=B.treeContext,Lt=Ir(O.nextSibling),ii=c,ut=!0,Gu=null,Sa=!1,u!==null&&(pr[mr++]=gs,pr[mr++]=ps,pr[mr++]=ju,gs=u.id,ps=u.overflow,ju=c),c=cS(c,m.children),c.flags|=4096);return c}return x?(xo(),x=m.fallback,O=c.mode,B=u.child,V=B.sibling,m=hs(B,{mode:"hidden",children:m.children}),m.subtreeFlags=B.subtreeFlags&65011712,V!==null?x=hs(V,x):(x=Iu(x,O,g,null),x.flags|=2),x.return=c,m.return=c,m.sibling=x,c.child=m,m=x,x=c.child,O=u.child.memoizedState,O===null?O=uS(g):(B=O.cachePool,B!==null?(V=rn._currentValue,B=B.parent!==V?{parent:V,pool:V}:B):B=DR(),O={baseLanes:O.baseLanes|g,cachePool:B}),x.memoizedState=O,x.childLanes=lS(u,$,g),c.memoizedState=oS,m):(bo(c),g=u.child,u=g.sibling,g=hs(g,{mode:"visible",children:m.children}),g.return=c,g.sibling=null,u!==null&&($=c.deletions,$===null?(c.deletions=[u],c.flags|=16):$.push(u)),c.child=g,c.memoizedState=null,g)}function cS(u,c){return c=dm({mode:"visible",children:c},u.mode),c.return=u,u.child=c}function dm(u,c){return u=Hi(22,u,null,c),u.lanes=0,u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},u}function fS(u,c,g){return Gc(c,u.child,null,g),u=cS(c,c.pendingProps.children),u.flags|=2,c.memoizedState=null,u}function VD(u,c,g){u.lanes|=c;var m=u.alternate;m!==null&&(m.lanes|=c),M2(u.return,c,g)}function dS(u,c,g,m,x){var E=u.memoizedState;E===null?u.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:g,tailMode:x}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=g,E.tailMode=x)}function WD(u,c,g){var m=c.pendingProps,x=m.revealOrder,E=m.tail;if(Tn(u,c,m.children,g),m=an.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(u!==null&&(u.flags&128)!==0)e:for(u=c.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&VD(u,g,c);else if(u.tag===19)VD(u,g,c);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break e;for(;u.sibling===null;){if(u.return===null||u.return===c)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}m&=1}switch(ae(an,m),x){case"forwards":for(g=c.child,x=null;g!==null;)u=g.alternate,u!==null&&um(u)===null&&(x=g),g=g.sibling;g=x,g===null?(x=c.child,c.child=null):(x=g.sibling,g.sibling=null),dS(c,!1,x,g,E);break;case"backwards":for(g=null,x=c.child,c.child=null;x!==null;){if(u=x.alternate,u!==null&&um(u)===null){c.child=x;break}u=x.sibling,x.sibling=g,g=x,x=u}dS(c,!0,g,null,E);break;case"together":dS(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function xs(u,c,g){if(u!==null&&(c.dependencies=u.dependencies),Ao|=c.lanes,(g&c.childLanes)===0)if(u!==null){if(uh(u,c,g,!1),(g&c.childLanes)===0)return null}else return null;if(u!==null&&c.child!==u.child)throw Error(i(153));if(c.child!==null){for(u=c.child,g=hs(u,u.pendingProps),c.child=g,g.return=c;u.sibling!==null;)u=u.sibling,g=g.sibling=hs(u,u.pendingProps),g.return=c;g.sibling=null}return c.child}function hS(u,c){return(u.lanes&c)!==0?!0:(u=u.dependencies,!!(u!==null&&Y0(u)))}function sW(u,c,g){switch(c.tag){case 3:tt(c,c.stateNode.containerInfo),go(c,rn,u.memoizedState.cache),sh();break;case 27:case 5:Le(c);break;case 4:tt(c,c.stateNode.containerInfo);break;case 10:go(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(bo(c),c.flags|=128,null):(g&c.child.childLanes)!==0?XD(u,c,g):(bo(c),u=xs(u,c,g),u!==null?u.sibling:null);bo(c);break;case 19:var x=(u.flags&128)!==0;if(m=(g&c.childLanes)!==0,m||(uh(u,c,g,!1),m=(g&c.childLanes)!==0),x){if(m)return WD(u,c,g);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ae(an,an.current),m)break;return null;case 22:case 23:return c.lanes=0,ID(u,c,g);case 24:go(c,rn,u.memoizedState.cache)}return xs(u,c,g)}function QD(u,c,g){if(u!==null)if(u.memoizedProps!==c.pendingProps)pn=!0;else{if(!hS(u,g)&&(c.flags&128)===0)return pn=!1,sW(u,c,g);pn=(u.flags&131072)!==0}else pn=!1,ut&&(c.flags&1048576)!==0&&CR(c,G0,c.index);switch(c.lanes=0,c.tag){case 16:e:{u=c.pendingProps;var m=c.elementType,x=m._init;if(m=x(m._payload),c.type=m,typeof m=="function")E2(m)?(u=Zu(m,u),c.tag=1,c=GD(null,c,m,u,g)):(c.tag=0,c=sS(null,c,m,u,g));else{if(m!=null){if(x=m.$$typeof,x===C){c.tag=11,c=UD(null,c,m,u,g);break e}else if(x===M){c.tag=14,c=qD(null,c,m,u,g);break e}}throw c=q(m)||m,Error(i(306,c,""))}}return c;case 0:return sS(u,c,c.type,c.pendingProps,g);case 1:return m=c.type,x=Zu(m,c.pendingProps),GD(u,c,m,x,g);case 3:e:{if(tt(c,c.stateNode.containerInfo),u===null)throw Error(i(387));m=c.pendingProps;var E=c.memoizedState;x=E.element,F2(u,c),ph(c,m,null,g);var $=c.memoizedState;if(m=$.cache,go(c,rn,m),m!==E.cache&&k2(c,[rn],g,!0),gh(),m=$.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:$.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=YD(u,c,m,g);break e}else if(m!==x){x=hr(Error(i(424)),c),oh(x),c=YD(u,c,m,g);break e}else{switch(u=c.stateNode.containerInfo,u.nodeType){case 9:u=u.body;break;default:u=u.nodeName==="HTML"?u.ownerDocument.body:u}for(Lt=Ir(u.firstChild),ii=c,ut=!0,Gu=null,Sa=!0,g=TD(c,null,m,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling}else{if(sh(),m===x){c=xs(u,c,g);break e}Tn(u,c,m,g)}c=c.child}return c;case 26:return fm(u,c),u===null?(g=e5(c.type,null,c.pendingProps,null))?c.memoizedState=g:ut||(g=c.type,u=c.pendingProps,m=Cm(Ae.current).createElement(g),m[qn]=c,m[Ei]=u,kn(m,g,u),gn(m),c.stateNode=m):c.memoizedState=e5(c.type,u.memoizedProps,c.pendingProps,u.memoizedState),null;case 27:return Le(c),u===null&&ut&&(m=c.stateNode=ZN(c.type,c.pendingProps,Ae.current),ii=c,Sa=!0,x=Lt,Mo(c.type)?(XS=x,Lt=Ir(m.firstChild)):Lt=x),Tn(u,c,c.pendingProps.children,g),fm(u,c),u===null&&(c.flags|=4194304),c.child;case 5:return u===null&&ut&&((x=m=Lt)&&(m=NW(m,c.type,c.pendingProps,Sa),m!==null?(c.stateNode=m,ii=c,Lt=Ir(m.firstChild),Sa=!1,x=!0):x=!1),x||Yu(c)),Le(c),x=c.type,E=c.pendingProps,$=u!==null?u.memoizedProps:null,m=E.children,jS(x,E)?m=null:$!==null&&jS(x,$)&&(c.flags|=32),c.memoizedState!==null&&(x=I2(u,c,KV,null,null,g),Lh._currentValue=x),fm(u,c),Tn(u,c,m,g),c.child;case 6:return u===null&&ut&&((u=g=Lt)&&(g=zW(g,c.pendingProps,Sa),g!==null?(c.stateNode=g,ii=c,Lt=null,u=!0):u=!1),u||Yu(c)),null;case 13:return XD(u,c,g);case 4:return tt(c,c.stateNode.containerInfo),m=c.pendingProps,u===null?c.child=Gc(c,null,m,g):Tn(u,c,m,g),c.child;case 11:return UD(u,c,c.type,c.pendingProps,g);case 7:return Tn(u,c,c.pendingProps,g),c.child;case 8:return Tn(u,c,c.pendingProps.children,g),c.child;case 12:return Tn(u,c,c.pendingProps.children,g),c.child;case 10:return m=c.pendingProps,go(c,c.type,m.value),Tn(u,c,m.children,g),c.child;case 9:return x=c.type._context,m=c.pendingProps.children,Vu(c),x=Pn(x),m=m(x),c.flags|=1,Tn(u,c,m,g),c.child;case 14:return qD(u,c,c.type,c.pendingProps,g);case 15:return PD(u,c,c.type,c.pendingProps,g);case 19:return WD(u,c,g);case 31:return m=c.pendingProps,g=c.mode,m={mode:m.mode,children:m.children},u===null?(g=dm(m,g),g.ref=c.ref,c.child=g,g.return=c,c=g):(g=hs(u.child,m),g.ref=c.ref,c.child=g,g.return=c,c=g),c;case 22:return ID(u,c,g);case 24:return Vu(c),m=Pn(rn),u===null?(x=D2(),x===null&&(x=At,E=O2(),x.pooledCache=E,E.refCount++,E!==null&&(x.pooledCacheLanes|=g),x=E),c.memoizedState={parent:m,cache:x},z2(c),go(c,rn,x)):((u.lanes&g)!==0&&(F2(u,c),ph(c,null,null,g),gh()),x=u.memoizedState,E=c.memoizedState,x.parent!==m?(x={parent:m,cache:m},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),go(c,rn,m)):(m=E.cache,go(c,rn,m),m!==x.cache&&k2(c,[rn],g,!0))),Tn(u,c,c.pendingProps.children,g),c.child;case 29:throw c.pendingProps}throw Error(i(156,c.tag))}function Ss(u){u.flags|=4}function ZD(u,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)u.flags&=-16777217;else if(u.flags|=16777216,!a5(c)){if(c=yr.current,c!==null&&((Je&4194048)===Je?Ea!==null:(Je&62914560)!==Je&&(Je&536870912)===0||c!==Ea))throw dh=N2,NR;u.flags|=8192}}function hm(u,c){c!==null&&(u.flags|=4),u.flags&16384&&(c=u.tag!==22?MO():536870912,u.lanes|=c,Wc|=c)}function Eh(u,c){if(!ut)switch(u.tailMode){case"hidden":c=u.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?u.tail=null:g.sibling=null;break;case"collapsed":g=u.tail;for(var m=null;g!==null;)g.alternate!==null&&(m=g),g=g.sibling;m===null?c||u.tail===null?u.tail=null:u.tail.sibling=null:m.sibling=null}}function Dt(u){var c=u.alternate!==null&&u.alternate.child===u.child,g=0,m=0;if(c)for(var x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags&65011712,m|=x.flags&65011712,x.return=u,x=x.sibling;else for(x=u.child;x!==null;)g|=x.lanes|x.childLanes,m|=x.subtreeFlags,m|=x.flags,x.return=u,x=x.sibling;return u.subtreeFlags|=m,u.childLanes=g,c}function oW(u,c,g){var m=c.pendingProps;switch(C2(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(c),null;case 1:return Dt(c),null;case 3:return g=c.stateNode,m=null,u!==null&&(m=u.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),ys(rn),ye(),g.pendingContext&&(g.context=g.pendingContext,g.pendingContext=null),(u===null||u.child===null)&&(ah(c)?Ss(c):u===null||u.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,MR())),Dt(c),null;case 26:return g=c.memoizedState,u===null?(Ss(c),g!==null?(Dt(c),ZD(c,g)):(Dt(c),c.flags&=-16777217)):g?g!==u.memoizedState?(Ss(c),Dt(c),ZD(c,g)):(Dt(c),c.flags&=-16777217):(u.memoizedProps!==m&&Ss(c),Dt(c),c.flags&=-16777217),null;case 27:Ue(c),g=Ae.current;var x=c.type;if(u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ss(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Dt(c),null}u=me.current,ah(c)?$R(c):(u=ZN(x,m,g),c.stateNode=u,Ss(c))}return Dt(c),null;case 5:if(Ue(c),g=c.type,u!==null&&c.stateNode!=null)u.memoizedProps!==m&&Ss(c);else{if(!m){if(c.stateNode===null)throw Error(i(166));return Dt(c),null}if(u=me.current,ah(c))$R(c);else{switch(x=Cm(Ae.current),u){case 1:u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case 2:u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;default:switch(g){case"svg":u=x.createElementNS("http://www.w3.org/2000/svg",g);break;case"math":u=x.createElementNS("http://www.w3.org/1998/Math/MathML",g);break;case"script":u=x.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild);break;case"select":u=typeof m.is=="string"?x.createElement("select",{is:m.is}):x.createElement("select"),m.multiple?u.multiple=!0:m.size&&(u.size=m.size);break;default:u=typeof m.is=="string"?x.createElement(g,{is:m.is}):x.createElement(g)}}u[qn]=c,u[Ei]=m;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)u.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=u;e:switch(kn(u,g,m),g){case"button":case"input":case"select":case"textarea":u=!!m.autoFocus;break e;case"img":u=!0;break e;default:u=!1}u&&Ss(c)}}return Dt(c),c.flags&=-16777217,null;case 6:if(u&&c.stateNode!=null)u.memoizedProps!==m&&Ss(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(i(166));if(u=Ae.current,ah(c)){if(u=c.stateNode,g=c.memoizedProps,m=null,x=ii,x!==null)switch(x.tag){case 27:case 5:m=x.memoizedProps}u[qn]=c,u=!!(u.nodeValue===g||m!==null&&m.suppressHydrationWarning===!0||HN(u.nodeValue,g)),u||Yu(c)}else u=Cm(u).createTextNode(m),u[qn]=c,c.stateNode=u}return Dt(c),null;case 13:if(m=c.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(x=ah(c),m!==null&&m.dehydrated!==null){if(u===null){if(!x)throw Error(i(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(i(317));x[qn]=c}else sh(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Dt(c),x=!1}else x=MR(),u!==null&&u.memoizedState!==null&&(u.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(bs(c),c):(bs(c),null)}if(bs(c),(c.flags&128)!==0)return c.lanes=g,c;if(g=m!==null,u=u!==null&&u.memoizedState!==null,g){m=c.child,x=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(x=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==x&&(m.flags|=2048)}return g!==u&&g&&(c.child.flags|=8192),hm(c,c.updateQueue),Dt(c),null;case 4:return ye(),u===null&&BS(c.stateNode.containerInfo),Dt(c),null;case 10:return ys(c.type),Dt(c),null;case 19:if(ne(an),x=c.memoizedState,x===null)return Dt(c),null;if(m=(c.flags&128)!==0,E=x.rendering,E===null)if(m)Eh(x,!1);else{if(Bt!==0||u!==null&&(u.flags&128)!==0)for(u=c.child;u!==null;){if(E=um(u),E!==null){for(c.flags|=128,Eh(x,!1),u=E.updateQueue,c.updateQueue=u,hm(c,u),c.subtreeFlags=0,u=g,g=c.child;g!==null;)AR(g,u),g=g.sibling;return ae(an,an.current&1|2),c.child}u=u.sibling}x.tail!==null&&Kt()>mm&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304)}else{if(!m)if(u=um(E),u!==null){if(c.flags|=128,m=!0,u=u.updateQueue,c.updateQueue=u,hm(c,u),Eh(x,!0),x.tail===null&&x.tailMode==="hidden"&&!E.alternate&&!ut)return Dt(c),null}else 2*Kt()-x.renderingStartTime>mm&&g!==536870912&&(c.flags|=128,m=!0,Eh(x,!1),c.lanes=4194304);x.isBackwards?(E.sibling=c.child,c.child=E):(u=x.last,u!==null?u.sibling=E:c.child=E,x.last=E)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Kt(),c.sibling=null,u=an.current,ae(an,m?u&1|2:u&1),c):(Dt(c),null);case 22:case 23:return bs(c),q2(),m=c.memoizedState!==null,u!==null?u.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(g&536870912)!==0&&(c.flags&128)===0&&(Dt(c),c.subtreeFlags&6&&(c.flags|=8192)):Dt(c),g=c.updateQueue,g!==null&&hm(c,g.retryQueue),g=null,u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==g&&(c.flags|=2048),u!==null&&ne(Wu),null;case 24:return g=null,u!==null&&(g=u.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ys(rn),Dt(c),null;case 25:return null;case 30:return null}throw Error(i(156,c.tag))}function uW(u,c){switch(C2(c),c.tag){case 1:return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 3:return ys(rn),ye(),u=c.flags,(u&65536)!==0&&(u&128)===0?(c.flags=u&-65537|128,c):null;case 26:case 27:case 5:return Ue(c),null;case 13:if(bs(c),u=c.memoizedState,u!==null&&u.dehydrated!==null){if(c.alternate===null)throw Error(i(340));sh()}return u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 19:return ne(an),null;case 4:return ye(),null;case 10:return ys(c.type),null;case 22:case 23:return bs(c),q2(),u!==null&&ne(Wu),u=c.flags,u&65536?(c.flags=u&-65537|128,c):null;case 24:return ys(rn),null;case 25:return null;default:return null}}function KD(u,c){switch(C2(c),c.tag){case 3:ys(rn),ye();break;case 26:case 27:case 5:Ue(c);break;case 4:ye();break;case 13:bs(c);break;case 19:ne(an);break;case 10:ys(c.type);break;case 22:case 23:bs(c),q2(),u!==null&&ne(Wu);break;case 24:ys(rn)}}function _h(u,c){try{var g=c.updateQueue,m=g!==null?g.lastEffect:null;if(m!==null){var x=m.next;g=x;do{if((g.tag&u)===u){m=void 0;var E=g.create,$=g.inst;m=E(),$.destroy=m}g=g.next}while(g!==x)}}catch(O){Et(c,c.return,O)}}function So(u,c,g){try{var m=c.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var E=x.next;m=E;do{if((m.tag&u)===u){var $=m.inst,O=$.destroy;if(O!==void 0){$.destroy=void 0,x=c;var B=g,V=O;try{V()}catch(ie){Et(x,B,ie)}}}m=m.next}while(m!==E)}}catch(ie){Et(c,c.return,ie)}}function JD(u){var c=u.updateQueue;if(c!==null){var g=u.stateNode;try{qR(c,g)}catch(m){Et(u,u.return,m)}}}function eN(u,c,g){g.props=Zu(u.type,u.memoizedProps),g.state=u.memoizedState;try{g.componentWillUnmount()}catch(m){Et(u,c,m)}}function wh(u,c){try{var g=u.ref;if(g!==null){switch(u.tag){case 26:case 27:case 5:var m=u.stateNode;break;case 30:m=u.stateNode;break;default:m=u.stateNode}typeof g=="function"?u.refCleanup=g(m):g.current=m}}catch(x){Et(u,c,x)}}function _a(u,c){var g=u.ref,m=u.refCleanup;if(g!==null)if(typeof m=="function")try{m()}catch(x){Et(u,c,x)}finally{u.refCleanup=null,u=u.alternate,u!=null&&(u.refCleanup=null)}else if(typeof g=="function")try{g(null)}catch(x){Et(u,c,x)}else g.current=null}function tN(u){var c=u.type,g=u.memoizedProps,m=u.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":g.autoFocus&&m.focus();break e;case"img":g.src?m.src=g.src:g.srcSet&&(m.srcset=g.srcSet)}}catch(x){Et(u,u.return,x)}}function gS(u,c,g){try{var m=u.stateNode;MW(m,u.type,g,c),m[Ei]=c}catch(x){Et(u,u.return,x)}}function nN(u){return u.tag===5||u.tag===3||u.tag===26||u.tag===27&&Mo(u.type)||u.tag===4}function pS(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||nN(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.tag===27&&Mo(u.type)||u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function mS(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?(g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g).insertBefore(u,c):(c=g.nodeType===9?g.body:g.nodeName==="HTML"?g.ownerDocument.body:g,c.appendChild(u),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Am));else if(m!==4&&(m===27&&Mo(u.type)&&(g=u.stateNode,c=null),u=u.child,u!==null))for(mS(u,c,g),u=u.sibling;u!==null;)mS(u,c,g),u=u.sibling}function gm(u,c,g){var m=u.tag;if(m===5||m===6)u=u.stateNode,c?g.insertBefore(u,c):g.appendChild(u);else if(m!==4&&(m===27&&Mo(u.type)&&(g=u.stateNode),u=u.child,u!==null))for(gm(u,c,g),u=u.sibling;u!==null;)gm(u,c,g),u=u.sibling}function iN(u){var c=u.stateNode,g=u.memoizedProps;try{for(var m=u.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);kn(c,m,g),c[qn]=u,c[Ei]=g}catch(E){Et(u,u.return,E)}}var Es=!1,Yt=!1,yS=!1,rN=typeof WeakSet=="function"?WeakSet:Set,mn=null;function lW(u,c){if(u=u.containerInfo,PS=Rm,u=pR(u),p2(u)){if("selectionStart"in u)var g={start:u.selectionStart,end:u.selectionEnd};else e:{g=(g=u.ownerDocument)&&g.defaultView||window;var m=g.getSelection&&g.getSelection();if(m&&m.rangeCount!==0){g=m.anchorNode;var x=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{g.nodeType,E.nodeType}catch{g=null;break e}var $=0,O=-1,B=-1,V=0,ie=0,oe=u,Q=null;t:for(;;){for(var K;oe!==g||x!==0&&oe.nodeType!==3||(O=$+x),oe!==E||m!==0&&oe.nodeType!==3||(B=$+m),oe.nodeType===3&&($+=oe.nodeValue.length),(K=oe.firstChild)!==null;)Q=oe,oe=K;for(;;){if(oe===u)break t;if(Q===g&&++V===x&&(O=$),Q===E&&++ie===m&&(B=$),(K=oe.nextSibling)!==null)break;oe=Q,Q=oe.parentNode}oe=K}g=O===-1||B===-1?null:{start:O,end:B}}else g=null}g=g||{start:0,end:0}}else g=null;for(IS={focusedElem:u,selectionRange:g},Rm=!1,mn=c;mn!==null;)if(c=mn,u=c.child,(c.subtreeFlags&1024)!==0&&u!==null)u.return=c,mn=u;else for(;mn!==null;){switch(c=mn,E=c.alternate,u=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((u&1024)!==0&&E!==null){u=void 0,g=c,x=E.memoizedProps,E=E.memoizedState,m=g.stateNode;try{var ze=Zu(g.type,x,g.elementType===g.type);u=m.getSnapshotBeforeUpdate(ze,E),m.__reactInternalSnapshotBeforeUpdate=u}catch(De){Et(g,g.return,De)}}break;case 3:if((u&1024)!==0){if(u=c.stateNode.containerInfo,g=u.nodeType,g===9)GS(u);else if(g===1)switch(u.nodeName){case"HEAD":case"HTML":case"BODY":GS(u);break;default:u.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((u&1024)!==0)throw Error(i(163))}if(u=c.sibling,u!==null){u.return=c.return,mn=u;break}mn=c.return}}function aN(u,c,g){var m=g.flags;switch(g.tag){case 0:case 11:case 15:Eo(u,g),m&4&&_h(5,g);break;case 1:if(Eo(u,g),m&4)if(u=g.stateNode,c===null)try{u.componentDidMount()}catch($){Et(g,g.return,$)}else{var x=Zu(g.type,c.memoizedProps);c=c.memoizedState;try{u.componentDidUpdate(x,c,u.__reactInternalSnapshotBeforeUpdate)}catch($){Et(g,g.return,$)}}m&64&&JD(g),m&512&&wh(g,g.return);break;case 3:if(Eo(u,g),m&64&&(u=g.updateQueue,u!==null)){if(c=null,g.child!==null)switch(g.child.tag){case 27:case 5:c=g.child.stateNode;break;case 1:c=g.child.stateNode}try{qR(u,c)}catch($){Et(g,g.return,$)}}break;case 27:c===null&&m&4&&iN(g);case 26:case 5:Eo(u,g),c===null&&m&4&&tN(g),m&512&&wh(g,g.return);break;case 12:Eo(u,g);break;case 13:Eo(u,g),m&4&&uN(u,g),m&64&&(u=g.memoizedState,u!==null&&(u=u.dehydrated,u!==null&&(g=vW.bind(null,g),FW(u,g))));break;case 22:if(m=g.memoizedState!==null||Es,!m){c=c!==null&&c.memoizedState!==null||Yt,x=Es;var E=Yt;Es=m,(Yt=c)&&!E?_o(u,g,(g.subtreeFlags&8772)!==0):Eo(u,g),Es=x,Yt=E}break;case 30:break;default:Eo(u,g)}}function sN(u){var c=u.alternate;c!==null&&(u.alternate=null,sN(c)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(c=u.stateNode,c!==null&&Qx(c)),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}var Mt=null,Ai=!1;function _s(u,c,g){for(g=g.child;g!==null;)oN(u,c,g),g=g.sibling}function oN(u,c,g){if(Pi&&typeof Pi.onCommitFiberUnmount=="function")try{Pi.onCommitFiberUnmount(Gd,g)}catch{}switch(g.tag){case 26:Yt||_a(g,c),_s(u,c,g),g.memoizedState?g.memoizedState.count--:g.stateNode&&(g=g.stateNode,g.parentNode.removeChild(g));break;case 27:Yt||_a(g,c);var m=Mt,x=Ai;Mo(g.type)&&(Mt=g.stateNode,Ai=!1),_s(u,c,g),Dh(g.stateNode),Mt=m,Ai=x;break;case 5:Yt||_a(g,c);case 6:if(m=Mt,x=Ai,Mt=null,_s(u,c,g),Mt=m,Ai=x,Mt!==null)if(Ai)try{(Mt.nodeType===9?Mt.body:Mt.nodeName==="HTML"?Mt.ownerDocument.body:Mt).removeChild(g.stateNode)}catch(E){Et(g,c,E)}else try{Mt.removeChild(g.stateNode)}catch(E){Et(g,c,E)}break;case 18:Mt!==null&&(Ai?(u=Mt,WN(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,g.stateNode),Ph(u)):WN(Mt,g.stateNode));break;case 4:m=Mt,x=Ai,Mt=g.stateNode.containerInfo,Ai=!0,_s(u,c,g),Mt=m,Ai=x;break;case 0:case 11:case 14:case 15:Yt||So(2,g,c),Yt||So(4,g,c),_s(u,c,g);break;case 1:Yt||(_a(g,c),m=g.stateNode,typeof m.componentWillUnmount=="function"&&eN(g,c,m)),_s(u,c,g);break;case 21:_s(u,c,g);break;case 22:Yt=(m=Yt)||g.memoizedState!==null,_s(u,c,g),Yt=m;break;default:_s(u,c,g)}}function uN(u,c){if(c.memoizedState===null&&(u=c.alternate,u!==null&&(u=u.memoizedState,u!==null&&(u=u.dehydrated,u!==null))))try{Ph(u)}catch(g){Et(c,c.return,g)}}function cW(u){switch(u.tag){case 13:case 19:var c=u.stateNode;return c===null&&(c=u.stateNode=new rN),c;case 22:return u=u.stateNode,c=u._retryCache,c===null&&(c=u._retryCache=new rN),c;default:throw Error(i(435,u.tag))}}function vS(u,c){var g=cW(u);c.forEach(function(m){var x=bW.bind(null,u,m);g.has(m)||(g.add(m),m.then(x,x))})}function Gi(u,c){var g=c.deletions;if(g!==null)for(var m=0;m<g.length;m++){var x=g[m],E=u,$=c,O=$;e:for(;O!==null;){switch(O.tag){case 27:if(Mo(O.type)){Mt=O.stateNode,Ai=!1;break e}break;case 5:Mt=O.stateNode,Ai=!1;break e;case 3:case 4:Mt=O.stateNode.containerInfo,Ai=!0;break e}O=O.return}if(Mt===null)throw Error(i(160));oN(E,$,x),Mt=null,Ai=!1,E=x.alternate,E!==null&&(E.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)lN(c,u),c=c.sibling}var Pr=null;function lN(u,c){var g=u.alternate,m=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:Gi(c,u),Yi(u),m&4&&(So(3,u,u.return),_h(3,u),So(5,u,u.return));break;case 1:Gi(c,u),Yi(u),m&512&&(Yt||g===null||_a(g,g.return)),m&64&&Es&&(u=u.updateQueue,u!==null&&(m=u.callbacks,m!==null&&(g=u.shared.hiddenCallbacks,u.shared.hiddenCallbacks=g===null?m:g.concat(m))));break;case 26:var x=Pr;if(Gi(c,u),Yi(u),m&512&&(Yt||g===null||_a(g,g.return)),m&4){var E=g!==null?g.memoizedState:null;if(m=u.memoizedState,g===null)if(m===null)if(u.stateNode===null){e:{m=u.type,g=u.memoizedProps,x=x.ownerDocument||x;t:switch(m){case"title":E=x.getElementsByTagName("title")[0],(!E||E[Vd]||E[qn]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=x.createElement(m),x.head.insertBefore(E,x.querySelector("head > title"))),kn(E,m,g),E[qn]=u,gn(E),m=E;break e;case"link":var $=i5("link","href",x).get(m+(g.href||""));if($){for(var O=0;O<$.length;O++)if(E=$[O],E.getAttribute("href")===(g.href==null||g.href===""?null:g.href)&&E.getAttribute("rel")===(g.rel==null?null:g.rel)&&E.getAttribute("title")===(g.title==null?null:g.title)&&E.getAttribute("crossorigin")===(g.crossOrigin==null?null:g.crossOrigin)){$.splice(O,1);break t}}E=x.createElement(m),kn(E,m,g),x.head.appendChild(E);break;case"meta":if($=i5("meta","content",x).get(m+(g.content||""))){for(O=0;O<$.length;O++)if(E=$[O],E.getAttribute("content")===(g.content==null?null:""+g.content)&&E.getAttribute("name")===(g.name==null?null:g.name)&&E.getAttribute("property")===(g.property==null?null:g.property)&&E.getAttribute("http-equiv")===(g.httpEquiv==null?null:g.httpEquiv)&&E.getAttribute("charset")===(g.charSet==null?null:g.charSet)){$.splice(O,1);break t}}E=x.createElement(m),kn(E,m,g),x.head.appendChild(E);break;default:throw Error(i(468,m))}E[qn]=u,gn(E),m=E}u.stateNode=m}else r5(x,u.type,u.stateNode);else u.stateNode=n5(x,m,u.memoizedProps);else E!==m?(E===null?g.stateNode!==null&&(g=g.stateNode,g.parentNode.removeChild(g)):E.count--,m===null?r5(x,u.type,u.stateNode):n5(x,m,u.memoizedProps)):m===null&&u.stateNode!==null&&gS(u,u.memoizedProps,g.memoizedProps)}break;case 27:Gi(c,u),Yi(u),m&512&&(Yt||g===null||_a(g,g.return)),g!==null&&m&4&&gS(u,u.memoizedProps,g.memoizedProps);break;case 5:if(Gi(c,u),Yi(u),m&512&&(Yt||g===null||_a(g,g.return)),u.flags&32){x=u.stateNode;try{$c(x,"")}catch(K){Et(u,u.return,K)}}m&4&&u.stateNode!=null&&(x=u.memoizedProps,gS(u,x,g!==null?g.memoizedProps:x)),m&1024&&(yS=!0);break;case 6:if(Gi(c,u),Yi(u),m&4){if(u.stateNode===null)throw Error(i(162));m=u.memoizedProps,g=u.stateNode;try{g.nodeValue=m}catch(K){Et(u,u.return,K)}}break;case 3:if(Mm=null,x=Pr,Pr=$m(c.containerInfo),Gi(c,u),Pr=x,Yi(u),m&4&&g!==null&&g.memoizedState.isDehydrated)try{Ph(c.containerInfo)}catch(K){Et(u,u.return,K)}yS&&(yS=!1,cN(u));break;case 4:m=Pr,Pr=$m(u.stateNode.containerInfo),Gi(c,u),Yi(u),Pr=m;break;case 12:Gi(c,u),Yi(u);break;case 13:Gi(c,u),Yi(u),u.child.flags&8192&&u.memoizedState!==null!=(g!==null&&g.memoizedState!==null)&&(wS=Kt()),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,vS(u,m)));break;case 22:x=u.memoizedState!==null;var B=g!==null&&g.memoizedState!==null,V=Es,ie=Yt;if(Es=V||x,Yt=ie||B,Gi(c,u),Yt=ie,Es=V,Yi(u),m&8192)e:for(c=u.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(g===null||B||Es||Yt||Ku(u)),g=null,c=u;;){if(c.tag===5||c.tag===26){if(g===null){B=g=c;try{if(E=B.stateNode,x)$=E.style,typeof $.setProperty=="function"?$.setProperty("display","none","important"):$.display="none";else{O=B.stateNode;var oe=B.memoizedProps.style,Q=oe!=null&&oe.hasOwnProperty("display")?oe.display:null;O.style.display=Q==null||typeof Q=="boolean"?"":(""+Q).trim()}}catch(K){Et(B,B.return,K)}}}else if(c.tag===6){if(g===null){B=c;try{B.stateNode.nodeValue=x?"":B.memoizedProps}catch(K){Et(B,B.return,K)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===u)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;g===c&&(g=null),c=c.return}g===c&&(g=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=u.updateQueue,m!==null&&(g=m.retryQueue,g!==null&&(m.retryQueue=null,vS(u,g))));break;case 19:Gi(c,u),Yi(u),m&4&&(m=u.updateQueue,m!==null&&(u.updateQueue=null,vS(u,m)));break;case 30:break;case 21:break;default:Gi(c,u),Yi(u)}}function Yi(u){var c=u.flags;if(c&2){try{for(var g,m=u.return;m!==null;){if(nN(m)){g=m;break}m=m.return}if(g==null)throw Error(i(160));switch(g.tag){case 27:var x=g.stateNode,E=pS(u);gm(u,E,x);break;case 5:var $=g.stateNode;g.flags&32&&($c($,""),g.flags&=-33);var O=pS(u);gm(u,O,$);break;case 3:case 4:var B=g.stateNode.containerInfo,V=pS(u);mS(u,V,B);break;default:throw Error(i(161))}}catch(ie){Et(u,u.return,ie)}u.flags&=-3}c&4096&&(u.flags&=-4097)}function cN(u){if(u.subtreeFlags&1024)for(u=u.child;u!==null;){var c=u;cN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),u=u.sibling}}function Eo(u,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)aN(u,c.alternate,c),c=c.sibling}function Ku(u){for(u=u.child;u!==null;){var c=u;switch(c.tag){case 0:case 11:case 14:case 15:So(4,c,c.return),Ku(c);break;case 1:_a(c,c.return);var g=c.stateNode;typeof g.componentWillUnmount=="function"&&eN(c,c.return,g),Ku(c);break;case 27:Dh(c.stateNode);case 26:case 5:_a(c,c.return),Ku(c);break;case 22:c.memoizedState===null&&Ku(c);break;case 30:Ku(c);break;default:Ku(c)}u=u.sibling}}function _o(u,c,g){for(g=g&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,x=u,E=c,$=E.flags;switch(E.tag){case 0:case 11:case 15:_o(x,E,g),_h(4,E);break;case 1:if(_o(x,E,g),m=E,x=m.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(V){Et(m,m.return,V)}if(m=E,x=m.updateQueue,x!==null){var O=m.stateNode;try{var B=x.shared.hiddenCallbacks;if(B!==null)for(x.shared.hiddenCallbacks=null,x=0;x<B.length;x++)UR(B[x],O)}catch(V){Et(m,m.return,V)}}g&&$&64&&JD(E),wh(E,E.return);break;case 27:iN(E);case 26:case 5:_o(x,E,g),g&&m===null&&$&4&&tN(E),wh(E,E.return);break;case 12:_o(x,E,g);break;case 13:_o(x,E,g),g&&$&4&&uN(x,E);break;case 22:E.memoizedState===null&&_o(x,E,g),wh(E,E.return);break;case 30:break;default:_o(x,E,g)}c=c.sibling}}function bS(u,c){var g=null;u!==null&&u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(g=u.memoizedState.cachePool.pool),u=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(u=c.memoizedState.cachePool.pool),u!==g&&(u!=null&&u.refCount++,g!=null&&lh(g))}function xS(u,c){u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&lh(u))}function wa(u,c,g,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)fN(u,c,g,m),c=c.sibling}function fN(u,c,g,m){var x=c.flags;switch(c.tag){case 0:case 11:case 15:wa(u,c,g,m),x&2048&&_h(9,c);break;case 1:wa(u,c,g,m);break;case 3:wa(u,c,g,m),x&2048&&(u=null,c.alternate!==null&&(u=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==u&&(c.refCount++,u!=null&&lh(u)));break;case 12:if(x&2048){wa(u,c,g,m),u=c.stateNode;try{var E=c.memoizedProps,$=E.id,O=E.onPostCommit;typeof O=="function"&&O($,c.alternate===null?"mount":"update",u.passiveEffectDuration,-0)}catch(B){Et(c,c.return,B)}}else wa(u,c,g,m);break;case 13:wa(u,c,g,m);break;case 23:break;case 22:E=c.stateNode,$=c.alternate,c.memoizedState!==null?E._visibility&2?wa(u,c,g,m):Ah(u,c):E._visibility&2?wa(u,c,g,m):(E._visibility|=2,Yc(u,c,g,m,(c.subtreeFlags&10256)!==0)),x&2048&&bS($,c);break;case 24:wa(u,c,g,m),x&2048&&xS(c.alternate,c);break;default:wa(u,c,g,m)}}function Yc(u,c,g,m,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=u,$=c,O=g,B=m,V=$.flags;switch($.tag){case 0:case 11:case 15:Yc(E,$,O,B,x),_h(8,$);break;case 23:break;case 22:var ie=$.stateNode;$.memoizedState!==null?ie._visibility&2?Yc(E,$,O,B,x):Ah(E,$):(ie._visibility|=2,Yc(E,$,O,B,x)),x&&V&2048&&bS($.alternate,$);break;case 24:Yc(E,$,O,B,x),x&&V&2048&&xS($.alternate,$);break;default:Yc(E,$,O,B,x)}c=c.sibling}}function Ah(u,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var g=u,m=c,x=m.flags;switch(m.tag){case 22:Ah(g,m),x&2048&&bS(m.alternate,m);break;case 24:Ah(g,m),x&2048&&xS(m.alternate,m);break;default:Ah(g,m)}c=c.sibling}}var Ch=8192;function Xc(u){if(u.subtreeFlags&Ch)for(u=u.child;u!==null;)dN(u),u=u.sibling}function dN(u){switch(u.tag){case 26:Xc(u),u.flags&Ch&&u.memoizedState!==null&&WW(Pr,u.memoizedState,u.memoizedProps);break;case 5:Xc(u);break;case 3:case 4:var c=Pr;Pr=$m(u.stateNode.containerInfo),Xc(u),Pr=c;break;case 22:u.memoizedState===null&&(c=u.alternate,c!==null&&c.memoizedState!==null?(c=Ch,Ch=16777216,Xc(u),Ch=c):Xc(u));break;default:Xc(u)}}function hN(u){var c=u.alternate;if(c!==null&&(u=c.child,u!==null)){c.child=null;do c=u.sibling,u.sibling=null,u=c;while(u!==null)}}function $h(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];mn=m,pN(m,u)}hN(u)}if(u.subtreeFlags&10256)for(u=u.child;u!==null;)gN(u),u=u.sibling}function gN(u){switch(u.tag){case 0:case 11:case 15:$h(u),u.flags&2048&&So(9,u,u.return);break;case 3:$h(u);break;case 12:$h(u);break;case 22:var c=u.stateNode;u.memoizedState!==null&&c._visibility&2&&(u.return===null||u.return.tag!==13)?(c._visibility&=-3,pm(u)):$h(u);break;default:$h(u)}}function pm(u){var c=u.deletions;if((u.flags&16)!==0){if(c!==null)for(var g=0;g<c.length;g++){var m=c[g];mn=m,pN(m,u)}hN(u)}for(u=u.child;u!==null;){switch(c=u,c.tag){case 0:case 11:case 15:So(8,c,c.return),pm(c);break;case 22:g=c.stateNode,g._visibility&2&&(g._visibility&=-3,pm(c));break;default:pm(c)}u=u.sibling}}function pN(u,c){for(;mn!==null;){var g=mn;switch(g.tag){case 0:case 11:case 15:So(8,g,c);break;case 23:case 22:if(g.memoizedState!==null&&g.memoizedState.cachePool!==null){var m=g.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:lh(g.memoizedState.cache)}if(m=g.child,m!==null)m.return=g,mn=m;else e:for(g=u;mn!==null;){m=mn;var x=m.sibling,E=m.return;if(sN(m),m===g){mn=null;break e}if(x!==null){x.return=E,mn=x;break e}mn=E}}}var fW={getCacheForType:function(u){var c=Pn(rn),g=c.data.get(u);return g===void 0&&(g=u(),c.data.set(u,g)),g}},dW=typeof WeakMap=="function"?WeakMap:Map,dt=0,At=null,Ve=null,Je=0,ht=0,Xi=null,wo=!1,Vc=!1,SS=!1,ws=0,Bt=0,Ao=0,Ju=0,ES=0,vr=0,Wc=0,Th=null,Ci=null,_S=!1,wS=0,mm=1/0,ym=null,Co=null,Mn=0,$o=null,Qc=null,Zc=0,AS=0,CS=null,mN=null,Mh=0,$S=null;function Vi(){if((dt&2)!==0&&Je!==0)return Je&-Je;if(D.T!==null){var u=Bc;return u!==0?u:NS()}return RO()}function yN(){vr===0&&(vr=(Je&536870912)===0||ut?TO():536870912);var u=yr.current;return u!==null&&(u.flags|=32),vr}function Wi(u,c,g){(u===At&&(ht===2||ht===9)||u.cancelPendingCommit!==null)&&(Kc(u,0),To(u,Je,vr,!1)),Xd(u,g),((dt&2)===0||u!==At)&&(u===At&&((dt&2)===0&&(Ju|=g),Bt===4&&To(u,Je,vr,!1)),Aa(u))}function vN(u,c,g){if((dt&6)!==0)throw Error(i(327));var m=!g&&(c&124)===0&&(c&u.expiredLanes)===0||Yd(u,c),x=m?pW(u,c):kS(u,c,!0),E=m;do{if(x===0){Vc&&!m&&To(u,c,0,!1);break}else{if(g=u.current.alternate,E&&!hW(g)){x=kS(u,c,!1),E=!1;continue}if(x===2){if(E=c,u.errorRecoveryDisabledLanes&E)var $=0;else $=u.pendingLanes&-536870913,$=$!==0?$:$&536870912?536870912:0;if($!==0){c=$;e:{var O=u;x=Th;var B=O.current.memoizedState.isDehydrated;if(B&&(Kc(O,$).flags|=256),$=kS(O,$,!1),$!==2){if(SS&&!B){O.errorRecoveryDisabledLanes|=E,Ju|=E,x=4;break e}E=Ci,Ci=x,E!==null&&(Ci===null?Ci=E:Ci.push.apply(Ci,E))}x=$}if(E=!1,x!==2)continue}}if(x===1){Kc(u,0),To(u,c,0,!0);break}e:{switch(m=u,E=x,E){case 0:case 1:throw Error(i(345));case 4:if((c&4194048)!==c)break;case 6:To(m,c,vr,!wo);break e;case 2:Ci=null;break;case 3:case 5:break;default:throw Error(i(329))}if((c&62914560)===c&&(x=wS+300-Kt(),10<x)){if(To(m,c,vr,!wo),T0(m,0,!0)!==0)break e;m.timeoutHandle=XN(bN.bind(null,m,g,Ci,ym,_S,c,vr,Ju,Wc,wo,E,2,-0,0),x);break e}bN(m,g,Ci,ym,_S,c,vr,Ju,Wc,wo,E,0,-0,0)}}break}while(!0);Aa(u)}function bN(u,c,g,m,x,E,$,O,B,V,ie,oe,Q,K){if(u.timeoutHandle=-1,oe=c.subtreeFlags,(oe&8192||(oe&16785408)===16785408)&&(Fh={stylesheets:null,count:0,unsuspend:VW},dN(c),oe=QW(),oe!==null)){u.cancelPendingCommit=oe(CN.bind(null,u,c,E,g,m,x,$,O,B,ie,1,Q,K)),To(u,E,$,!V);return}CN(u,c,E,g,m,x,$,O,B)}function hW(u){for(var c=u;;){var g=c.tag;if((g===0||g===11||g===15)&&c.flags&16384&&(g=c.updateQueue,g!==null&&(g=g.stores,g!==null)))for(var m=0;m<g.length;m++){var x=g[m],E=x.getSnapshot;x=x.value;try{if(!ji(E(),x))return!1}catch{return!1}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===u)break;for(;c.sibling===null;){if(c.return===null||c.return===u)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function To(u,c,g,m){c&=~ES,c&=~Ju,u.suspendedLanes|=c,u.pingedLanes&=~c,m&&(u.warmLanes|=c),m=u.expirationTimes;for(var x=c;0<x;){var E=31-Ii(x),$=1<<E;m[E]=-1,x&=~$}g!==0&&kO(u,g,c)}function vm(){return(dt&6)===0?(kh(0),!1):!0}function TS(){if(Ve!==null){if(ht===0)var u=Ve.return;else u=Ve,ms=Xu=null,G2(u),Hc=null,xh=0,u=Ve;for(;u!==null;)KD(u.alternate,u),u=u.return;Ve=null}}function Kc(u,c){var g=u.timeoutHandle;g!==-1&&(u.timeoutHandle=-1,OW(g)),g=u.cancelPendingCommit,g!==null&&(u.cancelPendingCommit=null,g()),TS(),At=u,Ve=g=hs(u.current,null),Je=c,ht=0,Xi=null,wo=!1,Vc=Yd(u,c),SS=!1,Wc=vr=ES=Ju=Ao=Bt=0,Ci=Th=null,_S=!1,(c&8)!==0&&(c|=c&32);var m=u.entangledLanes;if(m!==0)for(u=u.entanglements,m&=c;0<m;){var x=31-Ii(m),E=1<<x;c|=u[x],m&=~E}return ws=c,q0(),g}function xN(u,c){je=null,D.H=am,c===fh||c===W0?(c=LR(),ht=3):c===NR?(c=LR(),ht=4):ht=c===BD?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Xi=c,Ve===null&&(Bt=1,cm(u,hr(c,u.current)))}function SN(){var u=D.H;return D.H=am,u===null?am:u}function EN(){var u=D.A;return D.A=fW,u}function MS(){Bt=4,wo||(Je&4194048)!==Je&&yr.current!==null||(Vc=!0),(Ao&134217727)===0&&(Ju&134217727)===0||At===null||To(At,Je,vr,!1)}function kS(u,c,g){var m=dt;dt|=2;var x=SN(),E=EN();(At!==u||Je!==c)&&(ym=null,Kc(u,c)),c=!1;var $=Bt;e:do try{if(ht!==0&&Ve!==null){var O=Ve,B=Xi;switch(ht){case 8:TS(),$=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(c=!0);var V=ht;if(ht=0,Xi=null,Jc(u,O,B,V),g&&Vc){$=0;break e}break;default:V=ht,ht=0,Xi=null,Jc(u,O,B,V)}}gW(),$=Bt;break}catch(ie){xN(u,ie)}while(!0);return c&&u.shellSuspendCounter++,ms=Xu=null,dt=m,D.H=x,D.A=E,Ve===null&&(At=null,Je=0,q0()),$}function gW(){for(;Ve!==null;)_N(Ve)}function pW(u,c){var g=dt;dt|=2;var m=SN(),x=EN();At!==u||Je!==c?(ym=null,mm=Kt()+500,Kc(u,c)):Vc=Yd(u,c);e:do try{if(ht!==0&&Ve!==null){c=Ve;var E=Xi;t:switch(ht){case 1:ht=0,Xi=null,Jc(u,c,E,1);break;case 2:case 9:if(zR(E)){ht=0,Xi=null,wN(c);break}c=function(){ht!==2&&ht!==9||At!==u||(ht=7),Aa(u)},E.then(c,c);break e;case 3:ht=7;break e;case 4:ht=5;break e;case 7:zR(E)?(ht=0,Xi=null,wN(c)):(ht=0,Xi=null,Jc(u,c,E,7));break;case 5:var $=null;switch(Ve.tag){case 26:$=Ve.memoizedState;case 5:case 27:var O=Ve;if(!$||a5($)){ht=0,Xi=null;var B=O.sibling;if(B!==null)Ve=B;else{var V=O.return;V!==null?(Ve=V,bm(V)):Ve=null}break t}}ht=0,Xi=null,Jc(u,c,E,5);break;case 6:ht=0,Xi=null,Jc(u,c,E,6);break;case 8:TS(),Bt=6;break e;default:throw Error(i(462))}}mW();break}catch(ie){xN(u,ie)}while(!0);return ms=Xu=null,D.H=m,D.A=x,dt=g,Ve!==null?0:(At=null,Je=0,q0(),Bt)}function mW(){for(;Ve!==null&&!Zt();)_N(Ve)}function _N(u){var c=QD(u.alternate,u,ws);u.memoizedProps=u.pendingProps,c===null?bm(u):Ve=c}function wN(u){var c=u,g=c.alternate;switch(c.tag){case 15:case 0:c=HD(g,c,c.pendingProps,c.type,void 0,Je);break;case 11:c=HD(g,c,c.pendingProps,c.type.render,c.ref,Je);break;case 5:G2(c);default:KD(g,c),c=Ve=AR(c,ws),c=QD(g,c,ws)}u.memoizedProps=u.pendingProps,c===null?bm(u):Ve=c}function Jc(u,c,g,m){ms=Xu=null,G2(c),Hc=null,xh=0;var x=c.return;try{if(aW(u,x,c,g,Je)){Bt=1,cm(u,hr(g,u.current)),Ve=null;return}}catch(E){if(x!==null)throw Ve=x,E;Bt=1,cm(u,hr(g,u.current)),Ve=null;return}c.flags&32768?(ut||m===1?u=!0:Vc||(Je&536870912)!==0?u=!1:(wo=u=!0,(m===2||m===9||m===3||m===6)&&(m=yr.current,m!==null&&m.tag===13&&(m.flags|=16384))),AN(c,u)):bm(c)}function bm(u){var c=u;do{if((c.flags&32768)!==0){AN(c,wo);return}u=c.return;var g=oW(c.alternate,c,ws);if(g!==null){Ve=g;return}if(c=c.sibling,c!==null){Ve=c;return}Ve=c=u}while(c!==null);Bt===0&&(Bt=5)}function AN(u,c){do{var g=uW(u.alternate,u);if(g!==null){g.flags&=32767,Ve=g;return}if(g=u.return,g!==null&&(g.flags|=32768,g.subtreeFlags=0,g.deletions=null),!c&&(u=u.sibling,u!==null)){Ve=u;return}Ve=u=g}while(u!==null);Bt=6,Ve=null}function CN(u,c,g,m,x,E,$,O,B){u.cancelPendingCommit=null;do xm();while(Mn!==0);if((dt&6)!==0)throw Error(i(327));if(c!==null){if(c===u.current)throw Error(i(177));if(E=c.lanes|c.childLanes,E|=x2,VX(u,g,E,$,O,B),u===At&&(Ve=At=null,Je=0),Qc=c,$o=u,Zc=g,AS=E,CS=x,mN=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(u.callbackNode=null,u.callbackPriority=0,xW(A0,function(){return ON(),null})):(u.callbackNode=null,u.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=D.T,D.T=null,x=P.p,P.p=2,$=dt,dt|=4;try{lW(u,c,g)}finally{dt=$,P.p=x,D.T=m}}Mn=1,$N(),TN(),MN()}}function $N(){if(Mn===1){Mn=0;var u=$o,c=Qc,g=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||g){g=D.T,D.T=null;var m=P.p;P.p=2;var x=dt;dt|=4;try{lN(c,u);var E=IS,$=pR(u.containerInfo),O=E.focusedElem,B=E.selectionRange;if($!==O&&O&&O.ownerDocument&&gR(O.ownerDocument.documentElement,O)){if(B!==null&&p2(O)){var V=B.start,ie=B.end;if(ie===void 0&&(ie=V),"selectionStart"in O)O.selectionStart=V,O.selectionEnd=Math.min(ie,O.value.length);else{var oe=O.ownerDocument||document,Q=oe&&oe.defaultView||window;if(Q.getSelection){var K=Q.getSelection(),ze=O.textContent.length,De=Math.min(B.start,ze),bt=B.end===void 0?De:Math.min(B.end,ze);!K.extend&&De>bt&&($=bt,bt=De,De=$);var H=hR(O,De),I=hR(O,bt);if(H&&I&&(K.rangeCount!==1||K.anchorNode!==H.node||K.anchorOffset!==H.offset||K.focusNode!==I.node||K.focusOffset!==I.offset)){var Y=oe.createRange();Y.setStart(H.node,H.offset),K.removeAllRanges(),De>bt?(K.addRange(Y),K.extend(I.node,I.offset)):(Y.setEnd(I.node,I.offset),K.addRange(Y))}}}}for(oe=[],K=O;K=K.parentNode;)K.nodeType===1&&oe.push({element:K,left:K.scrollLeft,top:K.scrollTop});for(typeof O.focus=="function"&&O.focus(),O=0;O<oe.length;O++){var se=oe[O];se.element.scrollLeft=se.left,se.element.scrollTop=se.top}}Rm=!!PS,IS=PS=null}finally{dt=x,P.p=m,D.T=g}}u.current=c,Mn=2}}function TN(){if(Mn===2){Mn=0;var u=$o,c=Qc,g=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||g){g=D.T,D.T=null;var m=P.p;P.p=2;var x=dt;dt|=4;try{aN(u,c.alternate,c)}finally{dt=x,P.p=m,D.T=g}}Mn=3}}function MN(){if(Mn===4||Mn===3){Mn=0,hn();var u=$o,c=Qc,g=Zc,m=mN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Mn=5:(Mn=0,Qc=$o=null,kN(u,u.pendingLanes));var x=u.pendingLanes;if(x===0&&(Co=null),Vx(g),c=c.stateNode,Pi&&typeof Pi.onCommitFiberRoot=="function")try{Pi.onCommitFiberRoot(Gd,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=D.T,x=P.p,P.p=2,D.T=null;try{for(var E=u.onRecoverableError,$=0;$<m.length;$++){var O=m[$];E(O.value,{componentStack:O.stack})}}finally{D.T=c,P.p=x}}(Zc&3)!==0&&xm(),Aa(u),x=u.pendingLanes,(g&4194090)!==0&&(x&42)!==0?u===$S?Mh++:(Mh=0,$S=u):Mh=0,kh(0)}}function kN(u,c){(u.pooledCacheLanes&=c)===0&&(c=u.pooledCache,c!=null&&(u.pooledCache=null,lh(c)))}function xm(u){return $N(),TN(),MN(),ON()}function ON(){if(Mn!==5)return!1;var u=$o,c=AS;AS=0;var g=Vx(Zc),m=D.T,x=P.p;try{P.p=32>g?32:g,D.T=null,g=CS,CS=null;var E=$o,$=Zc;if(Mn=0,Qc=$o=null,Zc=0,(dt&6)!==0)throw Error(i(331));var O=dt;if(dt|=4,gN(E.current),fN(E,E.current,$,g),dt=O,kh(0,!1),Pi&&typeof Pi.onPostCommitFiberRoot=="function")try{Pi.onPostCommitFiberRoot(Gd,E)}catch{}return!0}finally{P.p=x,D.T=m,kN(u,c)}}function RN(u,c,g){c=hr(g,c),c=aS(u.stateNode,c,2),u=yo(u,c,2),u!==null&&(Xd(u,2),Aa(u))}function Et(u,c,g){if(u.tag===3)RN(u,u,g);else for(;c!==null;){if(c.tag===3){RN(c,u,g);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Co===null||!Co.has(m))){u=hr(g,u),g=FD(2),m=yo(c,g,2),m!==null&&(LD(g,m,c,u),Xd(m,2),Aa(m));break}}c=c.return}}function OS(u,c,g){var m=u.pingCache;if(m===null){m=u.pingCache=new dW;var x=new Set;m.set(c,x)}else x=m.get(c),x===void 0&&(x=new Set,m.set(c,x));x.has(g)||(SS=!0,x.add(g),u=yW.bind(null,u,c,g),c.then(u,u))}function yW(u,c,g){var m=u.pingCache;m!==null&&m.delete(c),u.pingedLanes|=u.suspendedLanes&g,u.warmLanes&=~g,At===u&&(Je&g)===g&&(Bt===4||Bt===3&&(Je&62914560)===Je&&300>Kt()-wS?(dt&2)===0&&Kc(u,0):ES|=g,Wc===Je&&(Wc=0)),Aa(u)}function DN(u,c){c===0&&(c=MO()),u=Nc(u,c),u!==null&&(Xd(u,c),Aa(u))}function vW(u){var c=u.memoizedState,g=0;c!==null&&(g=c.retryLane),DN(u,g)}function bW(u,c){var g=0;switch(u.tag){case 13:var m=u.stateNode,x=u.memoizedState;x!==null&&(g=x.retryLane);break;case 19:m=u.stateNode;break;case 22:m=u.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(c),DN(u,g)}function xW(u,c){return Ht(u,c)}var Sm=null,ef=null,RS=!1,Em=!1,DS=!1,el=0;function Aa(u){u!==ef&&u.next===null&&(ef===null?Sm=ef=u:ef=ef.next=u),Em=!0,RS||(RS=!0,EW())}function kh(u,c){if(!DS&&Em){DS=!0;do for(var g=!1,m=Sm;m!==null;){if(u!==0){var x=m.pendingLanes;if(x===0)var E=0;else{var $=m.suspendedLanes,O=m.pingedLanes;E=(1<<31-Ii(42|u)+1)-1,E&=x&~($&~O),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(g=!0,LN(m,E))}else E=Je,E=T0(m,m===At?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Yd(m,E)||(g=!0,LN(m,E));m=m.next}while(g);DS=!1}}function SW(){NN()}function NN(){Em=RS=!1;var u=0;el!==0&&(kW()&&(u=el),el=0);for(var c=Kt(),g=null,m=Sm;m!==null;){var x=m.next,E=zN(m,c);E===0?(m.next=null,g===null?Sm=x:g.next=x,x===null&&(ef=g)):(g=m,(u!==0||(E&3)!==0)&&(Em=!0)),m=x}kh(u)}function zN(u,c){for(var g=u.suspendedLanes,m=u.pingedLanes,x=u.expirationTimes,E=u.pendingLanes&-62914561;0<E;){var $=31-Ii(E),O=1<<$,B=x[$];B===-1?((O&g)===0||(O&m)!==0)&&(x[$]=XX(O,c)):B<=c&&(u.expiredLanes|=O),E&=~O}if(c=At,g=Je,g=T0(u,u===c?g:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m=u.callbackNode,g===0||u===c&&(ht===2||ht===9)||u.cancelPendingCommit!==null)return m!==null&&m!==null&&nt(m),u.callbackNode=null,u.callbackPriority=0;if((g&3)===0||Yd(u,g)){if(c=g&-g,c===u.callbackPriority)return c;switch(m!==null&&nt(m),Vx(g)){case 2:case 8:g=CO;break;case 32:g=A0;break;case 268435456:g=$O;break;default:g=A0}return m=FN.bind(null,u),g=Ht(g,m),u.callbackPriority=c,u.callbackNode=g,c}return m!==null&&m!==null&&nt(m),u.callbackPriority=2,u.callbackNode=null,2}function FN(u,c){if(Mn!==0&&Mn!==5)return u.callbackNode=null,u.callbackPriority=0,null;var g=u.callbackNode;if(xm()&&u.callbackNode!==g)return null;var m=Je;return m=T0(u,u===At?m:0,u.cancelPendingCommit!==null||u.timeoutHandle!==-1),m===0?null:(vN(u,m,c),zN(u,Kt()),u.callbackNode!=null&&u.callbackNode===g?FN.bind(null,u):null)}function LN(u,c){if(xm())return null;vN(u,c,!0)}function EW(){RW(function(){(dt&6)!==0?Ht(AO,SW):NN()})}function NS(){return el===0&&(el=TO()),el}function BN(u){return u==null||typeof u=="symbol"||typeof u=="boolean"?null:typeof u=="function"?u:D0(""+u)}function UN(u,c){var g=c.ownerDocument.createElement("input");return g.name=c.name,g.value=c.value,u.id&&g.setAttribute("form",u.id),c.parentNode.insertBefore(g,c),u=new FormData(u),g.parentNode.removeChild(g),u}function _W(u,c,g,m,x){if(c==="submit"&&g&&g.stateNode===x){var E=BN((x[Ei]||null).action),$=m.submitter;$&&(c=(c=$[Ei]||null)?BN(c.formAction):$.getAttribute("formAction"),c!==null&&(E=c,$=null));var O=new L0("action","action",null,m,x);u.push({event:O,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(el!==0){var B=$?UN(x,$):new FormData(x);eS(g,{pending:!0,data:B,method:x.method,action:E},null,B)}}else typeof E=="function"&&(O.preventDefault(),B=$?UN(x,$):new FormData(x),eS(g,{pending:!0,data:B,method:x.method,action:E},E,B))},currentTarget:x}]})}}for(var zS=0;zS<b2.length;zS++){var FS=b2[zS],wW=FS.toLowerCase(),AW=FS[0].toUpperCase()+FS.slice(1);qr(wW,"on"+AW)}qr(vR,"onAnimationEnd"),qr(bR,"onAnimationIteration"),qr(xR,"onAnimationStart"),qr("dblclick","onDoubleClick"),qr("focusin","onFocus"),qr("focusout","onBlur"),qr(IV,"onTransitionRun"),qr(jV,"onTransitionStart"),qr(HV,"onTransitionCancel"),qr(SR,"onTransitionEnd"),wc("onMouseEnter",["mouseout","mouseover"]),wc("onMouseLeave",["mouseout","mouseover"]),wc("onPointerEnter",["pointerout","pointerover"]),wc("onPointerLeave",["pointerout","pointerover"]),Bu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Bu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Bu("onBeforeInput",["compositionend","keypress","textInput","paste"]),Bu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Bu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Bu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CW=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Oh));function qN(u,c){c=(c&4)!==0;for(var g=0;g<u.length;g++){var m=u[g],x=m.event;m=m.listeners;e:{var E=void 0;if(c)for(var $=m.length-1;0<=$;$--){var O=m[$],B=O.instance,V=O.currentTarget;if(O=O.listener,B!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=V;try{E(x)}catch(ie){lm(ie)}x.currentTarget=null,E=B}else for($=0;$<m.length;$++){if(O=m[$],B=O.instance,V=O.currentTarget,O=O.listener,B!==E&&x.isPropagationStopped())break e;E=O,x.currentTarget=V;try{E(x)}catch(ie){lm(ie)}x.currentTarget=null,E=B}}}}function We(u,c){var g=c[Wx];g===void 0&&(g=c[Wx]=new Set);var m=u+"__bubble";g.has(m)||(PN(c,u,2,!1),g.add(m))}function LS(u,c,g){var m=0;c&&(m|=4),PN(g,u,m,c)}var _m="_reactListening"+Math.random().toString(36).slice(2);function BS(u){if(!u[_m]){u[_m]=!0,NO.forEach(function(g){g!=="selectionchange"&&(CW.has(g)||LS(g,!1,u),LS(g,!0,u))});var c=u.nodeType===9?u:u.ownerDocument;c===null||c[_m]||(c[_m]=!0,LS("selectionchange",!1,c))}}function PN(u,c,g,m){switch(f5(c)){case 2:var x=JW;break;case 8:x=eQ;break;default:x=KS}g=x.bind(null,c,g,u),x=void 0,!s2||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),m?x!==void 0?u.addEventListener(c,g,{capture:!0,passive:x}):u.addEventListener(c,g,!0):x!==void 0?u.addEventListener(c,g,{passive:x}):u.addEventListener(c,g,!1)}function US(u,c,g,m,x){var E=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var $=m.tag;if($===3||$===4){var O=m.stateNode.containerInfo;if(O===x)break;if($===4)for($=m.return;$!==null;){var B=$.tag;if((B===3||B===4)&&$.stateNode.containerInfo===x)return;$=$.return}for(;O!==null;){if($=Sc(O),$===null)return;if(B=$.tag,B===5||B===6||B===26||B===27){m=E=$;continue e}O=O.parentNode}}m=m.return}VO(function(){var V=E,ie=r2(g),oe=[];e:{var Q=ER.get(u);if(Q!==void 0){var K=L0,ze=u;switch(u){case"keypress":if(z0(g)===0)break e;case"keydown":case"keyup":K=xV;break;case"focusin":ze="focus",K=c2;break;case"focusout":ze="blur",K=c2;break;case"beforeblur":case"afterblur":K=c2;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":K=ZO;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":K=uV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":K=_V;break;case vR:case bR:case xR:K=fV;break;case SR:K=AV;break;case"scroll":case"scrollend":K=sV;break;case"wheel":K=$V;break;case"copy":case"cut":case"paste":K=hV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":K=JO;break;case"toggle":case"beforetoggle":K=MV}var De=(c&4)!==0,bt=!De&&(u==="scroll"||u==="scrollend"),H=De?Q!==null?Q+"Capture":null:Q;De=[];for(var I=V,Y;I!==null;){var se=I;if(Y=se.stateNode,se=se.tag,se!==5&&se!==26&&se!==27||Y===null||H===null||(se=Qd(I,H),se!=null&&De.push(Rh(I,se,Y))),bt)break;I=I.return}0<De.length&&(Q=new K(Q,ze,null,g,ie),oe.push({event:Q,listeners:De}))}}if((c&7)===0){e:{if(Q=u==="mouseover"||u==="pointerover",K=u==="mouseout"||u==="pointerout",Q&&g!==i2&&(ze=g.relatedTarget||g.fromElement)&&(Sc(ze)||ze[xc]))break e;if((K||Q)&&(Q=ie.window===ie?ie:(Q=ie.ownerDocument)?Q.defaultView||Q.parentWindow:window,K?(ze=g.relatedTarget||g.toElement,K=V,ze=ze?Sc(ze):null,ze!==null&&(bt=a(ze),De=ze.tag,ze!==bt||De!==5&&De!==27&&De!==6)&&(ze=null)):(K=null,ze=V),K!==ze)){if(De=ZO,se="onMouseLeave",H="onMouseEnter",I="mouse",(u==="pointerout"||u==="pointerover")&&(De=JO,se="onPointerLeave",H="onPointerEnter",I="pointer"),bt=K==null?Q:Wd(K),Y=ze==null?Q:Wd(ze),Q=new De(se,I+"leave",K,g,ie),Q.target=bt,Q.relatedTarget=Y,se=null,Sc(ie)===V&&(De=new De(H,I+"enter",ze,g,ie),De.target=Y,De.relatedTarget=bt,se=De),bt=se,K&&ze)t:{for(De=K,H=ze,I=0,Y=De;Y;Y=tf(Y))I++;for(Y=0,se=H;se;se=tf(se))Y++;for(;0<I-Y;)De=tf(De),I--;for(;0<Y-I;)H=tf(H),Y--;for(;I--;){if(De===H||H!==null&&De===H.alternate)break t;De=tf(De),H=tf(H)}De=null}else De=null;K!==null&&IN(oe,Q,K,De,!1),ze!==null&&bt!==null&&IN(oe,bt,ze,De,!0)}}e:{if(Q=V?Wd(V):window,K=Q.nodeName&&Q.nodeName.toLowerCase(),K==="select"||K==="input"&&Q.type==="file")var _e=oR;else if(aR(Q))if(uR)_e=UV;else{_e=LV;var Ge=FV}else K=Q.nodeName,!K||K.toLowerCase()!=="input"||Q.type!=="checkbox"&&Q.type!=="radio"?V&&n2(V.elementType)&&(_e=oR):_e=BV;if(_e&&(_e=_e(u,V))){sR(oe,_e,g,ie);break e}Ge&&Ge(u,Q,V),u==="focusout"&&V&&Q.type==="number"&&V.memoizedProps.value!=null&&t2(Q,"number",Q.value)}switch(Ge=V?Wd(V):window,u){case"focusin":(aR(Ge)||Ge.contentEditable==="true")&&(Oc=Ge,m2=V,rh=null);break;case"focusout":rh=m2=Oc=null;break;case"mousedown":y2=!0;break;case"contextmenu":case"mouseup":case"dragend":y2=!1,mR(oe,g,ie);break;case"selectionchange":if(PV)break;case"keydown":case"keyup":mR(oe,g,ie)}var $e;if(d2)e:{switch(u){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else kc?iR(u,g)&&(Ne="onCompositionEnd"):u==="keydown"&&g.keyCode===229&&(Ne="onCompositionStart");Ne&&(eR&&g.locale!=="ko"&&(kc||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&kc&&($e=WO()):(ho=ie,o2="value"in ho?ho.value:ho.textContent,kc=!0)),Ge=wm(V,Ne),0<Ge.length&&(Ne=new KO(Ne,u,null,g,ie),oe.push({event:Ne,listeners:Ge}),$e?Ne.data=$e:($e=rR(g),$e!==null&&(Ne.data=$e)))),($e=OV?RV(u,g):DV(u,g))&&(Ne=wm(V,"onBeforeInput"),0<Ne.length&&(Ge=new KO("onBeforeInput","beforeinput",null,g,ie),oe.push({event:Ge,listeners:Ne}),Ge.data=$e)),_W(oe,u,V,g,ie)}qN(oe,c)})}function Rh(u,c,g){return{instance:u,listener:c,currentTarget:g}}function wm(u,c){for(var g=c+"Capture",m=[];u!==null;){var x=u,E=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||E===null||(x=Qd(u,g),x!=null&&m.unshift(Rh(u,x,E)),x=Qd(u,c),x!=null&&m.push(Rh(u,x,E))),u.tag===3)return m;u=u.return}return[]}function tf(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5&&u.tag!==27);return u||null}function IN(u,c,g,m,x){for(var E=c._reactName,$=[];g!==null&&g!==m;){var O=g,B=O.alternate,V=O.stateNode;if(O=O.tag,B!==null&&B===m)break;O!==5&&O!==26&&O!==27||V===null||(B=V,x?(V=Qd(g,E),V!=null&&$.unshift(Rh(g,V,B))):x||(V=Qd(g,E),V!=null&&$.push(Rh(g,V,B)))),g=g.return}$.length!==0&&u.push({event:c,listeners:$})}var $W=/\r\n?/g,TW=/\u0000|\uFFFD/g;function jN(u){return(typeof u=="string"?u:""+u).replace($W,`
`).replace(TW,"")}function HN(u,c){return c=jN(c),jN(u)===c}function Am(){}function vt(u,c,g,m,x,E){switch(g){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||$c(u,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&$c(u,""+m);break;case"className":k0(u,"class",m);break;case"tabIndex":k0(u,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":k0(u,g,m);break;case"style":YO(u,m,E);break;case"data":if(c!=="object"){k0(u,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||g!=="href")){u.removeAttribute(g);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=D0(""+m),u.setAttribute(g,m);break;case"action":case"formAction":if(typeof m=="function"){u.setAttribute(g,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(g==="formAction"?(c!=="input"&&vt(u,c,"name",x.name,x,null),vt(u,c,"formEncType",x.formEncType,x,null),vt(u,c,"formMethod",x.formMethod,x,null),vt(u,c,"formTarget",x.formTarget,x,null)):(vt(u,c,"encType",x.encType,x,null),vt(u,c,"method",x.method,x,null),vt(u,c,"target",x.target,x,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){u.removeAttribute(g);break}m=D0(""+m),u.setAttribute(g,m);break;case"onClick":m!=null&&(u.onclick=Am);break;case"onScroll":m!=null&&We("scroll",u);break;case"onScrollEnd":m!=null&&We("scrollend",u);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"multiple":u.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":u.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){u.removeAttribute("xlink:href");break}g=D0(""+m),u.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",g);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""+m):u.removeAttribute(g);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,""):u.removeAttribute(g);break;case"capture":case"download":m===!0?u.setAttribute(g,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?u.setAttribute(g,m):u.removeAttribute(g);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?u.setAttribute(g,m):u.removeAttribute(g);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?u.removeAttribute(g):u.setAttribute(g,m);break;case"popover":We("beforetoggle",u),We("toggle",u),M0(u,"popover",m);break;case"xlinkActuate":fs(u,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":fs(u,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":fs(u,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":fs(u,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":fs(u,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":fs(u,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":fs(u,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":fs(u,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":fs(u,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":M0(u,"is",m);break;case"innerText":case"textContent":break;default:(!(2<g.length)||g[0]!=="o"&&g[0]!=="O"||g[1]!=="n"&&g[1]!=="N")&&(g=rV.get(g)||g,M0(u,g,m))}}function qS(u,c,g,m,x,E){switch(g){case"style":YO(u,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(g=m.__html,g!=null){if(x.children!=null)throw Error(i(60));u.innerHTML=g}}break;case"children":typeof m=="string"?$c(u,m):(typeof m=="number"||typeof m=="bigint")&&$c(u,""+m);break;case"onScroll":m!=null&&We("scroll",u);break;case"onScrollEnd":m!=null&&We("scrollend",u);break;case"onClick":m!=null&&(u.onclick=Am);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zO.hasOwnProperty(g))e:{if(g[0]==="o"&&g[1]==="n"&&(x=g.endsWith("Capture"),c=g.slice(2,x?g.length-7:void 0),E=u[Ei]||null,E=E!=null?E[g]:null,typeof E=="function"&&u.removeEventListener(c,E,x),typeof m=="function")){typeof E!="function"&&E!==null&&(g in u?u[g]=null:u.hasAttribute(g)&&u.removeAttribute(g)),u.addEventListener(c,m,x);break e}g in u?u[g]=m:m===!0?u.setAttribute(g,""):M0(u,g,m)}}}function kn(u,c,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",u),We("load",u);var m=!1,x=!1,E;for(E in g)if(g.hasOwnProperty(E)){var $=g[E];if($!=null)switch(E){case"src":m=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:vt(u,c,E,$,g,null)}}x&&vt(u,c,"srcSet",g.srcSet,g,null),m&&vt(u,c,"src",g.src,g,null);return;case"input":We("invalid",u);var O=E=$=x=null,B=null,V=null;for(m in g)if(g.hasOwnProperty(m)){var ie=g[m];if(ie!=null)switch(m){case"name":x=ie;break;case"type":$=ie;break;case"checked":B=ie;break;case"defaultChecked":V=ie;break;case"value":E=ie;break;case"defaultValue":O=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,c));break;default:vt(u,c,m,ie,g,null)}}IO(u,E,O,B,V,$,x,!1),O0(u);return;case"select":We("invalid",u),m=$=E=null;for(x in g)if(g.hasOwnProperty(x)&&(O=g[x],O!=null))switch(x){case"value":E=O;break;case"defaultValue":$=O;break;case"multiple":m=O;default:vt(u,c,x,O,g,null)}c=E,g=$,u.multiple=!!m,c!=null?Cc(u,!!m,c,!1):g!=null&&Cc(u,!!m,g,!0);return;case"textarea":We("invalid",u),E=x=m=null;for($ in g)if(g.hasOwnProperty($)&&(O=g[$],O!=null))switch($){case"value":m=O;break;case"defaultValue":x=O;break;case"children":E=O;break;case"dangerouslySetInnerHTML":if(O!=null)throw Error(i(91));break;default:vt(u,c,$,O,g,null)}HO(u,m,x,E),O0(u);return;case"option":for(B in g)if(g.hasOwnProperty(B)&&(m=g[B],m!=null))switch(B){case"selected":u.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:vt(u,c,B,m,g,null)}return;case"dialog":We("beforetoggle",u),We("toggle",u),We("cancel",u),We("close",u);break;case"iframe":case"object":We("load",u);break;case"video":case"audio":for(m=0;m<Oh.length;m++)We(Oh[m],u);break;case"image":We("error",u),We("load",u);break;case"details":We("toggle",u);break;case"embed":case"source":case"link":We("error",u),We("load",u);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in g)if(g.hasOwnProperty(V)&&(m=g[V],m!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,c));default:vt(u,c,V,m,g,null)}return;default:if(n2(c)){for(ie in g)g.hasOwnProperty(ie)&&(m=g[ie],m!==void 0&&qS(u,c,ie,m,g,void 0));return}}for(O in g)g.hasOwnProperty(O)&&(m=g[O],m!=null&&vt(u,c,O,m,g,null))}function MW(u,c,g,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,E=null,$=null,O=null,B=null,V=null,ie=null;for(K in g){var oe=g[K];if(g.hasOwnProperty(K)&&oe!=null)switch(K){case"checked":break;case"value":break;case"defaultValue":B=oe;default:m.hasOwnProperty(K)||vt(u,c,K,null,m,oe)}}for(var Q in m){var K=m[Q];if(oe=g[Q],m.hasOwnProperty(Q)&&(K!=null||oe!=null))switch(Q){case"type":E=K;break;case"name":x=K;break;case"checked":V=K;break;case"defaultChecked":ie=K;break;case"value":$=K;break;case"defaultValue":O=K;break;case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(i(137,c));break;default:K!==oe&&vt(u,c,Q,K,m,oe)}}e2(u,$,O,B,V,ie,E,x);return;case"select":K=$=O=Q=null;for(E in g)if(B=g[E],g.hasOwnProperty(E)&&B!=null)switch(E){case"value":break;case"multiple":K=B;default:m.hasOwnProperty(E)||vt(u,c,E,null,m,B)}for(x in m)if(E=m[x],B=g[x],m.hasOwnProperty(x)&&(E!=null||B!=null))switch(x){case"value":Q=E;break;case"defaultValue":O=E;break;case"multiple":$=E;default:E!==B&&vt(u,c,x,E,m,B)}c=O,g=$,m=K,Q!=null?Cc(u,!!g,Q,!1):!!m!=!!g&&(c!=null?Cc(u,!!g,c,!0):Cc(u,!!g,g?[]:"",!1));return;case"textarea":K=Q=null;for(O in g)if(x=g[O],g.hasOwnProperty(O)&&x!=null&&!m.hasOwnProperty(O))switch(O){case"value":break;case"children":break;default:vt(u,c,O,null,m,x)}for($ in m)if(x=m[$],E=g[$],m.hasOwnProperty($)&&(x!=null||E!=null))switch($){case"value":Q=x;break;case"defaultValue":K=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(i(91));break;default:x!==E&&vt(u,c,$,x,m,E)}jO(u,Q,K);return;case"option":for(var ze in g)if(Q=g[ze],g.hasOwnProperty(ze)&&Q!=null&&!m.hasOwnProperty(ze))switch(ze){case"selected":u.selected=!1;break;default:vt(u,c,ze,null,m,Q)}for(B in m)if(Q=m[B],K=g[B],m.hasOwnProperty(B)&&Q!==K&&(Q!=null||K!=null))switch(B){case"selected":u.selected=Q&&typeof Q!="function"&&typeof Q!="symbol";break;default:vt(u,c,B,Q,m,K)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in g)Q=g[De],g.hasOwnProperty(De)&&Q!=null&&!m.hasOwnProperty(De)&&vt(u,c,De,null,m,Q);for(V in m)if(Q=m[V],K=g[V],m.hasOwnProperty(V)&&Q!==K&&(Q!=null||K!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(Q!=null)throw Error(i(137,c));break;default:vt(u,c,V,Q,m,K)}return;default:if(n2(c)){for(var bt in g)Q=g[bt],g.hasOwnProperty(bt)&&Q!==void 0&&!m.hasOwnProperty(bt)&&qS(u,c,bt,void 0,m,Q);for(ie in m)Q=m[ie],K=g[ie],!m.hasOwnProperty(ie)||Q===K||Q===void 0&&K===void 0||qS(u,c,ie,Q,m,K);return}}for(var H in g)Q=g[H],g.hasOwnProperty(H)&&Q!=null&&!m.hasOwnProperty(H)&&vt(u,c,H,null,m,Q);for(oe in m)Q=m[oe],K=g[oe],!m.hasOwnProperty(oe)||Q===K||Q==null&&K==null||vt(u,c,oe,Q,m,K)}var PS=null,IS=null;function Cm(u){return u.nodeType===9?u:u.ownerDocument}function GN(u){switch(u){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function YN(u,c){if(u===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return u===1&&c==="foreignObject"?0:u}function jS(u,c){return u==="textarea"||u==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var HS=null;function kW(){var u=window.event;return u&&u.type==="popstate"?u===HS?!1:(HS=u,!0):(HS=null,!1)}var XN=typeof setTimeout=="function"?setTimeout:void 0,OW=typeof clearTimeout=="function"?clearTimeout:void 0,VN=typeof Promise=="function"?Promise:void 0,RW=typeof queueMicrotask=="function"?queueMicrotask:typeof VN<"u"?function(u){return VN.resolve(null).then(u).catch(DW)}:XN;function DW(u){setTimeout(function(){throw u})}function Mo(u){return u==="head"}function WN(u,c){var g=c,m=0,x=0;do{var E=g.nextSibling;if(u.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(0<m&&8>m){g=m;var $=u.ownerDocument;if(g&1&&Dh($.documentElement),g&2&&Dh($.body),g&4)for(g=$.head,Dh(g),$=g.firstChild;$;){var O=$.nextSibling,B=$.nodeName;$[Vd]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&$.rel.toLowerCase()==="stylesheet"||g.removeChild($),$=O}}if(x===0){u.removeChild(E),Ph(c);return}x--}else g==="$"||g==="$?"||g==="$!"?x++:m=g.charCodeAt(0)-48;else m=0;g=E}while(g);Ph(c)}function GS(u){var c=u.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var g=c;switch(c=c.nextSibling,g.nodeName){case"HTML":case"HEAD":case"BODY":GS(g),Qx(g);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(g.rel.toLowerCase()==="stylesheet")continue}u.removeChild(g)}}function NW(u,c,g,m){for(;u.nodeType===1;){var x=g;if(u.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(u.nodeName!=="INPUT"||u.type!=="hidden"))break}else if(m){if(!u[Vd])switch(c){case"meta":if(!u.hasAttribute("itemprop"))break;return u;case"link":if(E=u.getAttribute("rel"),E==="stylesheet"&&u.hasAttribute("data-precedence"))break;if(E!==x.rel||u.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||u.getAttribute("title")!==(x.title==null?null:x.title))break;return u;case"style":if(u.hasAttribute("data-precedence"))break;return u;case"script":if(E=u.getAttribute("src"),(E!==(x.src==null?null:x.src)||u.getAttribute("type")!==(x.type==null?null:x.type)||u.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&E&&u.hasAttribute("async")&&!u.hasAttribute("itemprop"))break;return u;default:return u}}else if(c==="input"&&u.type==="hidden"){var E=x.name==null?null:""+x.name;if(x.type==="hidden"&&u.getAttribute("name")===E)return u}else return u;if(u=Ir(u.nextSibling),u===null)break}return null}function zW(u,c,g){if(c==="")return null;for(;u.nodeType!==3;)if((u.nodeType!==1||u.nodeName!=="INPUT"||u.type!=="hidden")&&!g||(u=Ir(u.nextSibling),u===null))return null;return u}function YS(u){return u.data==="$!"||u.data==="$?"&&u.ownerDocument.readyState==="complete"}function FW(u,c){var g=u.ownerDocument;if(u.data!=="$?"||g.readyState==="complete")c();else{var m=function(){c(),g.removeEventListener("DOMContentLoaded",m)};g.addEventListener("DOMContentLoaded",m),u._reactRetry=m}}function Ir(u){for(;u!=null;u=u.nextSibling){var c=u.nodeType;if(c===1||c===3)break;if(c===8){if(c=u.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return u}var XS=null;function QN(u){u=u.previousSibling;for(var c=0;u;){if(u.nodeType===8){var g=u.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return u;c--}else g==="/$"&&c++}u=u.previousSibling}return null}function ZN(u,c,g){switch(c=Cm(g),u){case"html":if(u=c.documentElement,!u)throw Error(i(452));return u;case"head":if(u=c.head,!u)throw Error(i(453));return u;case"body":if(u=c.body,!u)throw Error(i(454));return u;default:throw Error(i(451))}}function Dh(u){for(var c=u.attributes;c.length;)u.removeAttributeNode(c[0]);Qx(u)}var br=new Map,KN=new Set;function $m(u){return typeof u.getRootNode=="function"?u.getRootNode():u.nodeType===9?u:u.ownerDocument}var As=P.d;P.d={f:LW,r:BW,D:UW,C:qW,L:PW,m:IW,X:HW,S:jW,M:GW};function LW(){var u=As.f(),c=vm();return u||c}function BW(u){var c=Ec(u);c!==null&&c.tag===5&&c.type==="form"?vD(c):As.r(u)}var nf=typeof document>"u"?null:document;function JN(u,c,g){var m=nf;if(m&&typeof c=="string"&&c){var x=dr(c);x='link[rel="'+u+'"][href="'+x+'"]',typeof g=="string"&&(x+='[crossorigin="'+g+'"]'),KN.has(x)||(KN.add(x),u={rel:u,crossOrigin:g,href:c},m.querySelector(x)===null&&(c=m.createElement("link"),kn(c,"link",u),gn(c),m.head.appendChild(c)))}}function UW(u){As.D(u),JN("dns-prefetch",u,null)}function qW(u,c){As.C(u,c),JN("preconnect",u,c)}function PW(u,c,g){As.L(u,c,g);var m=nf;if(m&&u&&c){var x='link[rel="preload"][as="'+dr(c)+'"]';c==="image"&&g&&g.imageSrcSet?(x+='[imagesrcset="'+dr(g.imageSrcSet)+'"]',typeof g.imageSizes=="string"&&(x+='[imagesizes="'+dr(g.imageSizes)+'"]')):x+='[href="'+dr(u)+'"]';var E=x;switch(c){case"style":E=rf(u);break;case"script":E=af(u)}br.has(E)||(u=d({rel:"preload",href:c==="image"&&g&&g.imageSrcSet?void 0:u,as:c},g),br.set(E,u),m.querySelector(x)!==null||c==="style"&&m.querySelector(Nh(E))||c==="script"&&m.querySelector(zh(E))||(c=m.createElement("link"),kn(c,"link",u),gn(c),m.head.appendChild(c)))}}function IW(u,c){As.m(u,c);var g=nf;if(g&&u){var m=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+dr(m)+'"][href="'+dr(u)+'"]',E=x;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=af(u)}if(!br.has(E)&&(u=d({rel:"modulepreload",href:u},c),br.set(E,u),g.querySelector(x)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(g.querySelector(zh(E)))return}m=g.createElement("link"),kn(m,"link",u),gn(m),g.head.appendChild(m)}}}function jW(u,c,g){As.S(u,c,g);var m=nf;if(m&&u){var x=_c(m).hoistableStyles,E=rf(u);c=c||"default";var $=x.get(E);if(!$){var O={loading:0,preload:null};if($=m.querySelector(Nh(E)))O.loading=5;else{u=d({rel:"stylesheet",href:u,"data-precedence":c},g),(g=br.get(E))&&VS(u,g);var B=$=m.createElement("link");gn(B),kn(B,"link",u),B._p=new Promise(function(V,ie){B.onload=V,B.onerror=ie}),B.addEventListener("load",function(){O.loading|=1}),B.addEventListener("error",function(){O.loading|=2}),O.loading|=4,Tm($,c,m)}$={type:"stylesheet",instance:$,count:1,state:O},x.set(E,$)}}}function HW(u,c){As.X(u,c);var g=nf;if(g&&u){var m=_c(g).hoistableScripts,x=af(u),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(u=d({src:u,async:!0},c),(c=br.get(x))&&WS(u,c),E=g.createElement("script"),gn(E),kn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function GW(u,c){As.M(u,c);var g=nf;if(g&&u){var m=_c(g).hoistableScripts,x=af(u),E=m.get(x);E||(E=g.querySelector(zh(x)),E||(u=d({src:u,async:!0,type:"module"},c),(c=br.get(x))&&WS(u,c),E=g.createElement("script"),gn(E),kn(E,"link",u),g.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(x,E))}}function e5(u,c,g,m){var x=(x=Ae.current)?$m(x):null;if(!x)throw Error(i(446));switch(u){case"meta":case"title":return null;case"style":return typeof g.precedence=="string"&&typeof g.href=="string"?(c=rf(g.href),g=_c(x).hoistableStyles,m=g.get(c),m||(m={type:"style",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(g.rel==="stylesheet"&&typeof g.href=="string"&&typeof g.precedence=="string"){u=rf(g.href);var E=_c(x).hoistableStyles,$=E.get(u);if($||(x=x.ownerDocument||x,$={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(u,$),(E=x.querySelector(Nh(u)))&&!E._p&&($.instance=E,$.state.loading=5),br.has(u)||(g={rel:"preload",as:"style",href:g.href,crossOrigin:g.crossOrigin,integrity:g.integrity,media:g.media,hrefLang:g.hrefLang,referrerPolicy:g.referrerPolicy},br.set(u,g),E||YW(x,u,g,$.state))),c&&m===null)throw Error(i(528,""));return $}if(c&&m!==null)throw Error(i(529,""));return null;case"script":return c=g.async,g=g.src,typeof g=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=af(g),g=_c(x).hoistableScripts,m=g.get(c),m||(m={type:"script",instance:null,count:0,state:null},g.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,u))}}function rf(u){return'href="'+dr(u)+'"'}function Nh(u){return'link[rel="stylesheet"]['+u+"]"}function t5(u){return d({},u,{"data-precedence":u.precedence,precedence:null})}function YW(u,c,g,m){u.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=u.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),kn(c,"link",g),gn(c),u.head.appendChild(c))}function af(u){return'[src="'+dr(u)+'"]'}function zh(u){return"script[async]"+u}function n5(u,c,g){if(c.count++,c.instance===null)switch(c.type){case"style":var m=u.querySelector('style[data-href~="'+dr(g.href)+'"]');if(m)return c.instance=m,gn(m),m;var x=d({},g,{"data-href":g.href,"data-precedence":g.precedence,href:null,precedence:null});return m=(u.ownerDocument||u).createElement("style"),gn(m),kn(m,"style",x),Tm(m,g.precedence,u),c.instance=m;case"stylesheet":x=rf(g.href);var E=u.querySelector(Nh(x));if(E)return c.state.loading|=4,c.instance=E,gn(E),E;m=t5(g),(x=br.get(x))&&VS(m,x),E=(u.ownerDocument||u).createElement("link"),gn(E);var $=E;return $._p=new Promise(function(O,B){$.onload=O,$.onerror=B}),kn(E,"link",m),c.state.loading|=4,Tm(E,g.precedence,u),c.instance=E;case"script":return E=af(g.src),(x=u.querySelector(zh(E)))?(c.instance=x,gn(x),x):(m=g,(x=br.get(E))&&(m=d({},g),WS(m,x)),u=u.ownerDocument||u,x=u.createElement("script"),gn(x),kn(x,"link",m),u.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(i(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,Tm(m,g.precedence,u));return c.instance}function Tm(u,c,g){for(var m=g.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=m.length?m[m.length-1]:null,E=x,$=0;$<m.length;$++){var O=m[$];if(O.dataset.precedence===c)E=O;else if(E!==x)break}E?E.parentNode.insertBefore(u,E.nextSibling):(c=g.nodeType===9?g.head:g,c.insertBefore(u,c.firstChild))}function VS(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.title==null&&(u.title=c.title)}function WS(u,c){u.crossOrigin==null&&(u.crossOrigin=c.crossOrigin),u.referrerPolicy==null&&(u.referrerPolicy=c.referrerPolicy),u.integrity==null&&(u.integrity=c.integrity)}var Mm=null;function i5(u,c,g){if(Mm===null){var m=new Map,x=Mm=new Map;x.set(g,m)}else x=Mm,m=x.get(g),m||(m=new Map,x.set(g,m));if(m.has(u))return m;for(m.set(u,null),g=g.getElementsByTagName(u),x=0;x<g.length;x++){var E=g[x];if(!(E[Vd]||E[qn]||u==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var $=E.getAttribute(c)||"";$=u+$;var O=m.get($);O?O.push(E):m.set($,[E])}}return m}function r5(u,c,g){u=u.ownerDocument||u,u.head.insertBefore(g,c==="title"?u.querySelector("head > title"):null)}function XW(u,c,g){if(g===1||c.itemProp!=null)return!1;switch(u){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return u=c.disabled,typeof c.precedence=="string"&&u==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function a5(u){return!(u.type==="stylesheet"&&(u.state.loading&3)===0)}var Fh=null;function VW(){}function WW(u,c,g){if(Fh===null)throw Error(i(475));var m=Fh;if(c.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=rf(g.href),E=u.querySelector(Nh(x));if(E){u=E._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(m.count++,m=km.bind(m),u.then(m,m)),c.state.loading|=4,c.instance=E,gn(E);return}E=u.ownerDocument||u,g=t5(g),(x=br.get(x))&&VS(g,x),E=E.createElement("link"),gn(E);var $=E;$._p=new Promise(function(O,B){$.onload=O,$.onerror=B}),kn(E,"link",g),c.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,u),(u=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=km.bind(m),u.addEventListener("load",c),u.addEventListener("error",c))}}function QW(){if(Fh===null)throw Error(i(475));var u=Fh;return u.stylesheets&&u.count===0&&QS(u,u.stylesheets),0<u.count?function(c){var g=setTimeout(function(){if(u.stylesheets&&QS(u,u.stylesheets),u.unsuspend){var m=u.unsuspend;u.unsuspend=null,m()}},6e4);return u.unsuspend=c,function(){u.unsuspend=null,clearTimeout(g)}}:null}function km(){if(this.count--,this.count===0){if(this.stylesheets)QS(this,this.stylesheets);else if(this.unsuspend){var u=this.unsuspend;this.unsuspend=null,u()}}}var Om=null;function QS(u,c){u.stylesheets=null,u.unsuspend!==null&&(u.count++,Om=new Map,c.forEach(ZW,u),Om=null,km.call(u))}function ZW(u,c){if(!(c.state.loading&4)){var g=Om.get(u);if(g)var m=g.get(null);else{g=new Map,Om.set(u,g);for(var x=u.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<x.length;E++){var $=x[E];($.nodeName==="LINK"||$.getAttribute("media")!=="not all")&&(g.set($.dataset.precedence,$),m=$)}m&&g.set(null,m)}x=c.instance,$=x.getAttribute("data-precedence"),E=g.get($)||m,E===m&&g.set(null,x),g.set($,x),this.count++,m=km.bind(this),x.addEventListener("load",m),x.addEventListener("error",m),E?E.parentNode.insertBefore(x,E.nextSibling):(u=u.nodeType===9?u.head:u,u.insertBefore(x,u.firstChild)),c.state.loading|=4}}var Lh={$$typeof:A,Provider:null,Consumer:null,_currentValue:X,_currentValue2:X,_threadCount:0};function KW(u,c,g,m,x,E,$,O){this.tag=1,this.containerInfo=u,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Yx(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yx(0),this.hiddenUpdates=Yx(null),this.identifierPrefix=m,this.onUncaughtError=x,this.onCaughtError=E,this.onRecoverableError=$,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=O,this.incompleteTransitions=new Map}function s5(u,c,g,m,x,E,$,O,B,V,ie,oe){return u=new KW(u,c,g,$,O,B,V,oe),c=1,E===!0&&(c|=24),E=Hi(3,null,null,c),u.current=E,E.stateNode=u,c=O2(),c.refCount++,u.pooledCache=c,c.refCount++,E.memoizedState={element:m,isDehydrated:g,cache:c},z2(E),u}function o5(u){return u?(u=zc,u):zc}function u5(u,c,g,m,x,E){x=o5(x),m.context===null?m.context=x:m.pendingContext=x,m=mo(c),m.payload={element:g},E=E===void 0?null:E,E!==null&&(m.callback=E),g=yo(u,m,c),g!==null&&(Wi(g,u,c),hh(g,u,c))}function l5(u,c){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var g=u.retryLane;u.retryLane=g!==0&&g<c?g:c}}function ZS(u,c){l5(u,c),(u=u.alternate)&&l5(u,c)}function c5(u){if(u.tag===13){var c=Nc(u,67108864);c!==null&&Wi(c,u,67108864),ZS(u,67108864)}}var Rm=!0;function JW(u,c,g,m){var x=D.T;D.T=null;var E=P.p;try{P.p=2,KS(u,c,g,m)}finally{P.p=E,D.T=x}}function eQ(u,c,g,m){var x=D.T;D.T=null;var E=P.p;try{P.p=8,KS(u,c,g,m)}finally{P.p=E,D.T=x}}function KS(u,c,g,m){if(Rm){var x=JS(m);if(x===null)US(u,c,m,Dm,g),d5(u,m);else if(nQ(x,u,c,g,m))m.stopPropagation();else if(d5(u,m),c&4&&-1<tQ.indexOf(u)){for(;x!==null;){var E=Ec(x);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var $=Lu(E.pendingLanes);if($!==0){var O=E;for(O.pendingLanes|=2,O.entangledLanes|=2;$;){var B=1<<31-Ii($);O.entanglements[1]|=B,$&=~B}Aa(E),(dt&6)===0&&(mm=Kt()+500,kh(0))}}break;case 13:O=Nc(E,2),O!==null&&Wi(O,E,2),vm(),ZS(E,2)}if(E=JS(m),E===null&&US(u,c,m,Dm,g),E===x)break;x=E}x!==null&&m.stopPropagation()}else US(u,c,m,null,g)}}function JS(u){return u=r2(u),eE(u)}var Dm=null;function eE(u){if(Dm=null,u=Sc(u),u!==null){var c=a(u);if(c===null)u=null;else{var g=c.tag;if(g===13){if(u=s(c),u!==null)return u;u=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;u=null}else c!==u&&(u=null)}}return Dm=u,null}function f5(u){switch(u){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(w0()){case AO:return 2;case CO:return 8;case A0:case PX:return 32;case $O:return 268435456;default:return 32}default:return 32}}var tE=!1,ko=null,Oo=null,Ro=null,Bh=new Map,Uh=new Map,Do=[],tQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d5(u,c){switch(u){case"focusin":case"focusout":ko=null;break;case"dragenter":case"dragleave":Oo=null;break;case"mouseover":case"mouseout":Ro=null;break;case"pointerover":case"pointerout":Bh.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Uh.delete(c.pointerId)}}function qh(u,c,g,m,x,E){return u===null||u.nativeEvent!==E?(u={blockedOn:c,domEventName:g,eventSystemFlags:m,nativeEvent:E,targetContainers:[x]},c!==null&&(c=Ec(c),c!==null&&c5(c)),u):(u.eventSystemFlags|=m,c=u.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),u)}function nQ(u,c,g,m,x){switch(c){case"focusin":return ko=qh(ko,u,c,g,m,x),!0;case"dragenter":return Oo=qh(Oo,u,c,g,m,x),!0;case"mouseover":return Ro=qh(Ro,u,c,g,m,x),!0;case"pointerover":var E=x.pointerId;return Bh.set(E,qh(Bh.get(E)||null,u,c,g,m,x)),!0;case"gotpointercapture":return E=x.pointerId,Uh.set(E,qh(Uh.get(E)||null,u,c,g,m,x)),!0}return!1}function h5(u){var c=Sc(u.target);if(c!==null){var g=a(c);if(g!==null){if(c=g.tag,c===13){if(c=s(g),c!==null){u.blockedOn=c,WX(u.priority,function(){if(g.tag===13){var m=Vi();m=Xx(m);var x=Nc(g,m);x!==null&&Wi(x,g,m),ZS(g,m)}});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){u.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}u.blockedOn=null}function Nm(u){if(u.blockedOn!==null)return!1;for(var c=u.targetContainers;0<c.length;){var g=JS(u.nativeEvent);if(g===null){g=u.nativeEvent;var m=new g.constructor(g.type,g);i2=m,g.target.dispatchEvent(m),i2=null}else return c=Ec(g),c!==null&&c5(c),u.blockedOn=g,!1;c.shift()}return!0}function g5(u,c,g){Nm(u)&&g.delete(c)}function iQ(){tE=!1,ko!==null&&Nm(ko)&&(ko=null),Oo!==null&&Nm(Oo)&&(Oo=null),Ro!==null&&Nm(Ro)&&(Ro=null),Bh.forEach(g5),Uh.forEach(g5)}function zm(u,c){u.blockedOn===c&&(u.blockedOn=null,tE||(tE=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,iQ)))}var Fm=null;function p5(u){Fm!==u&&(Fm=u,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Fm===u&&(Fm=null);for(var c=0;c<u.length;c+=3){var g=u[c],m=u[c+1],x=u[c+2];if(typeof m!="function"){if(eE(m||g)===null)continue;break}var E=Ec(g);E!==null&&(u.splice(c,3),c-=3,eS(E,{pending:!0,data:x,method:g.method,action:m},m,x))}}))}function Ph(u){function c(B){return zm(B,u)}ko!==null&&zm(ko,u),Oo!==null&&zm(Oo,u),Ro!==null&&zm(Ro,u),Bh.forEach(c),Uh.forEach(c);for(var g=0;g<Do.length;g++){var m=Do[g];m.blockedOn===u&&(m.blockedOn=null)}for(;0<Do.length&&(g=Do[0],g.blockedOn===null);)h5(g),g.blockedOn===null&&Do.shift();if(g=(u.ownerDocument||u).$$reactFormReplay,g!=null)for(m=0;m<g.length;m+=3){var x=g[m],E=g[m+1],$=x[Ei]||null;if(typeof E=="function")$||p5(g);else if($){var O=null;if(E&&E.hasAttribute("formAction")){if(x=E,$=E[Ei]||null)O=$.formAction;else if(eE(x)!==null)continue}else O=$.action;typeof O=="function"?g[m+1]=O:(g.splice(m,3),m-=3),p5(g)}}}function nE(u){this._internalRoot=u}Lm.prototype.render=nE.prototype.render=function(u){var c=this._internalRoot;if(c===null)throw Error(i(409));var g=c.current,m=Vi();u5(g,m,u,c,null,null)},Lm.prototype.unmount=nE.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var c=u.containerInfo;u5(u.current,2,null,u,null,null),vm(),c[xc]=null}};function Lm(u){this._internalRoot=u}Lm.prototype.unstable_scheduleHydration=function(u){if(u){var c=RO();u={blockedOn:null,target:u,priority:c};for(var g=0;g<Do.length&&c!==0&&c<Do[g].priority;g++);Do.splice(g,0,u),g===0&&h5(u)}};var m5=t.version;if(m5!=="19.1.1")throw Error(i(527,m5,"19.1.1"));P.findDOMNode=function(u){var c=u._reactInternals;if(c===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=l(c),u=u!==null?f(u):null,u=u===null?null:u.stateNode,u};var rQ={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bm.isDisabled&&Bm.supportsFiber)try{Gd=Bm.inject(rQ),Pi=Bm}catch{}}return jh.createRoot=function(u,c){if(!r(u))throw Error(i(299));var g=!1,m="",x=RD,E=DD,$=ND,O=null;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&($=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(O=c.unstable_transitionCallbacks)),c=s5(u,1,!1,null,null,g,m,x,E,$,O,null),u[xc]=c.current,BS(u),new nE(c)},jh.hydrateRoot=function(u,c,g){if(!r(u))throw Error(i(299));var m=!1,x="",E=RD,$=DD,O=ND,B=null,V=null;return g!=null&&(g.unstable_strictMode===!0&&(m=!0),g.identifierPrefix!==void 0&&(x=g.identifierPrefix),g.onUncaughtError!==void 0&&(E=g.onUncaughtError),g.onCaughtError!==void 0&&($=g.onCaughtError),g.onRecoverableError!==void 0&&(O=g.onRecoverableError),g.unstable_transitionCallbacks!==void 0&&(B=g.unstable_transitionCallbacks),g.formState!==void 0&&(V=g.formState)),c=s5(u,1,!0,c,g??null,m,x,E,$,O,B,V),c.context=o5(null),g=c.current,m=Vi(),m=Xx(m),x=mo(m),x.callback=null,yo(g,x,m),g=m,c.current.lanes=g,Xd(c,g),Aa(c),u[xc]=c.current,BS(u),new Lm(c)},jh.version="19.1.1",jh}var C5;function gQ(){if(C5)return aE.exports;C5=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),aE.exports=hQ(),aE.exports}var pQ=gQ(),lE={exports:{}},cE,$5;function mQ(){if($5)return cE;$5=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return cE=e,cE}var fE,T5;function yQ(){if(T5)return fE;T5=1;var e=mQ();function t(){}function n(){}return n.resetWarningCache=t,fE=function(){function i(s,o,l,f,d,h){if(h!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},fE}var M5;function vQ(){return M5||(M5=1,lE.exports=yQ()()),lE.exports}var bQ=vQ();const k5=Mp(bQ),O5={};function zw(e,t){e===void 0&&(e=O5),t===void 0&&(t=O5);const n=Object.keys(e),i=Object.keys(t);return e===t||n.length===i.length&&n.every(r=>e[r]===t[r])}function J1(e,t,n,i){function r(a){return a instanceof n?a:new n(function(s){s(a)})}return new(n||(n=Promise))(function(a,s){function o(d){try{f(i.next(d))}catch(h){s(h)}}function l(d){try{f(i.throw(d))}catch(h){s(h)}}function f(d){d.done?a(d.value):r(d.value).then(o,l)}f((i=i.apply(e,t||[])).next())})}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var xQ=(function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)r.hasOwnProperty(a)&&(i[a]=r[a])},e(t,n)};return function(t,n){e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}})(),SQ=Object.prototype.hasOwnProperty;function Fw(e,t){return SQ.call(e,t)}function Lw(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var i=[];for(var r in e)Fw(e,r)&&i.push(r);return i}function er(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function Bw(e){for(var t=0,n=e.length,i;t<n;){if(i=e.charCodeAt(t),i>=48&&i<=57){t++;continue}return!1}return!0}function fl(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function H9(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function Uw(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(Uw(e[t]))return!0}else if(typeof e=="object"){for(var i=Lw(e),r=i.length,a=0;a<r;a++)if(Uw(e[i[a]]))return!0}}return!1}function R5(e,t){var n=[e];for(var i in t){var r=typeof t[i]=="object"?JSON.stringify(t[i],null,2):t[i];typeof r<"u"&&n.push(i+": "+r)}return n.join(`
`)}var G9=(function(e){xQ(t,e);function t(n,i,r,a,s){var o=this.constructor,l=e.call(this,R5(n,{name:i,index:r,operation:a,tree:s}))||this;return l.name=i,l.index=r,l.operation=a,l.tree=s,Object.setPrototypeOf(l,o.prototype),l.message=R5(n,{name:i,index:r,operation:a,tree:s}),l}return t})(Error),qt=G9,EQ=er,Sf={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var i=e[t];return delete e[t],{newDocument:n,removed:i}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:function(e,t,n){var i=ey(n,this.path);i&&(i=er(i));var r=_l(n,{op:"remove",path:this.from}).removed;return _l(n,{op:"add",path:this.path,value:r}),{newDocument:n,removed:i}},copy:function(e,t,n){var i=ey(n,this.from);return _l(n,{op:"add",path:this.path,value:er(i)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:Kg(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},_Q={add:function(e,t,n){return Bw(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var i=e.splice(t,1);return{newDocument:n,removed:i[0]}},replace:function(e,t,n){var i=e[t];return e[t]=this.value,{newDocument:n,removed:i}},move:Sf.move,copy:Sf.copy,test:Sf.test,_get:Sf._get};function ey(e,t){if(t=="")return e;var n={op:"_get",path:t};return _l(e,n),n.value}function _l(e,t,n,i,r,a){if(n===void 0&&(n=!1),i===void 0&&(i=!0),r===void 0&&(r=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):ty(t,0)),t.path===""){var s={newDocument:e};if(t.op==="add")return s.newDocument=t.value,s;if(t.op==="replace")return s.newDocument=t.value,s.removed=e,s;if(t.op==="move"||t.op==="copy")return s.newDocument=ey(e,t.from),t.op==="move"&&(s.removed=e),s;if(t.op==="test"){if(s.test=Kg(e,t.value),s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s.newDocument=e,s}else{if(t.op==="remove")return s.removed=e,s.newDocument=null,s;if(t.op==="_get")return t.value=e,s;if(n)throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return s}}else{i||(e=er(e));var o=t.path||"",l=o.split("/"),f=e,d=1,h=l.length,p=void 0,y=void 0,v=void 0;for(typeof n=="function"?v=n:v=ty;;){if(y=l[d],y&&y.indexOf("~")!=-1&&(y=H9(y)),r&&(y=="__proto__"||y=="prototype"&&d>0&&l[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(f[y]===void 0?p=l.slice(0,d).join("/"):d==h-1&&(p=t.path),p!==void 0&&v(t,0,e,p)),d++,Array.isArray(f)){if(y==="-")y=f.length;else{if(n&&!Bw(y))throw new qt("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);Bw(y)&&(y=~~y)}if(d>=h){if(n&&t.op==="add"&&y>f.length)throw new qt("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var s=_Q[t.op].call(t,f,y,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}}else if(d>=h){var s=Sf[t.op].call(t,f,y,e);if(s.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return s}if(f=f[y],n&&d<h&&(!f||typeof f!="object"))throw new qt("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function zv(e,t,n,i,r){if(i===void 0&&(i=!0),r===void 0&&(r=!0),n&&!Array.isArray(t))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");i||(e=er(e));for(var a=new Array(t.length),s=0,o=t.length;s<o;s++)a[s]=_l(e,t[s],n,!0,r,s),e=a[s].newDocument;return a.newDocument=e,a}function wQ(e,t,n){var i=_l(e,t);if(i.test===!1)throw new qt("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return i.newDocument}function ty(e,t,n,i){if(typeof e!="object"||e===null||Array.isArray(e))throw new qt("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Sf[e.op]){if(typeof e.path!="string")throw new qt("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qt('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qt("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&Uw(e.value))throw new qt("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var r=e.path.split("/").length,a=i.split("/").length;if(r!==a+1&&r!==a)throw new qt("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==i)throw new qt("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var s={op:"_get",path:e.from,value:void 0},o=Y9([s],n);if(o&&o.name==="OPERATION_PATH_UNRESOLVABLE")throw new qt("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qt("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Y9(e,t,n){try{if(!Array.isArray(e))throw new qt("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)zv(er(t),er(e),n||!0);else{n=n||ty;for(var i=0;i<e.length;i++)n(e[i],i,t,void 0)}}catch(r){if(r instanceof qt)return r;throw r}}function Kg(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),i=Array.isArray(t),r,a,s;if(n&&i){if(a=e.length,a!=t.length)return!1;for(r=a;r--!==0;)if(!Kg(e[r],t[r]))return!1;return!0}if(n!=i)return!1;var o=Object.keys(e);if(a=o.length,a!==Object.keys(t).length)return!1;for(r=a;r--!==0;)if(!t.hasOwnProperty(o[r]))return!1;for(r=a;r--!==0;)if(s=o[r],!Kg(e[s],t[s]))return!1;return!0}return e!==e&&t!==t}const AQ=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qt,_areEquals:Kg,applyOperation:_l,applyPatch:zv,applyReducer:wQ,deepClone:EQ,getValueByPointer:ey,validate:Y9,validator:ty},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var e$=new WeakMap,CQ=(function(){function e(t){this.observers=new Map,this.obj=t}return e})(),$Q=(function(){function e(t,n){this.callback=t,this.observer=n}return e})();function TQ(e){return e$.get(e)}function MQ(e,t){return e.observers.get(t)}function kQ(e,t){e.observers.delete(t.callback)}function OQ(e,t){t.unobserve()}function RQ(e,t){var n=[],i,r=TQ(e);if(!r)r=new CQ(e),e$.set(e,r);else{var a=MQ(r,t);i=a&&a.observer}if(i)return i;if(i={},r.value=er(e),t){i.callback=t,i.next=null;var s=function(){qw(i)},o=function(){clearTimeout(i.next),i.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",o),window.addEventListener("keyup",o),window.addEventListener("mousedown",o),window.addEventListener("keydown",o),window.addEventListener("change",o))}return i.patches=n,i.object=e,i.unobserve=function(){qw(i),clearTimeout(i.next),kQ(r,i),typeof window<"u"&&(window.removeEventListener("mouseup",o),window.removeEventListener("keyup",o),window.removeEventListener("mousedown",o),window.removeEventListener("keydown",o),window.removeEventListener("change",o))},r.observers.set(t,new $Q(t,i)),i}function qw(e,t){t===void 0&&(t=!1);var n=e$.get(e.object);t$(n.value,e.object,e.patches,"",t),e.patches.length&&zv(n.value,e.patches);var i=e.patches;return i.length>0&&(e.patches=[],e.callback&&e.callback(i)),i}function t$(e,t,n,i,r){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=Lw(t),s=Lw(e),o=!1,l=s.length-1;l>=0;l--){var f=s[l],d=e[f];if(Fw(t,f)&&!(t[f]===void 0&&d!==void 0&&Array.isArray(t)===!1)){var h=t[f];typeof d=="object"&&d!=null&&typeof h=="object"&&h!=null&&Array.isArray(d)===Array.isArray(h)?t$(d,h,n,i+"/"+fl(f),r):d!==h&&(r&&n.push({op:"test",path:i+"/"+fl(f),value:er(d)}),n.push({op:"replace",path:i+"/"+fl(f),value:er(h)}))}else Array.isArray(e)===Array.isArray(t)?(r&&n.push({op:"test",path:i+"/"+fl(f),value:er(d)}),n.push({op:"remove",path:i+"/"+fl(f)}),o=!0):(r&&n.push({op:"test",path:i,value:e}),n.push({op:"replace",path:i,value:t}))}if(!(!o&&a.length==s.length))for(var l=0;l<a.length;l++){var f=a[l];!Fw(e,f)&&t[f]!==void 0&&n.push({op:"add",path:i+"/"+fl(f),value:er(t[f])})}}}function DQ(e,t,n){n===void 0&&(n=!1);var i=[];return t$(e,t,i,"",n),i}const NQ=Object.freeze(Object.defineProperty({__proto__:null,compare:DQ,generate:qw,observe:RQ,unobserve:OQ},Symbol.toStringTag,{value:"Module"}));Object.assign({},AQ,NQ,{JsonPatchError:G9,deepClone:er,escapePathComponent:fl,unescapePathComponent:H9});var dE,D5;function zQ(){if(D5)return dE;D5=1;var e=/("(?:[^\\"]|\\.)*")|[:,]/g;return dE=function(n,i){var r,a,s;return i=i||{},r=JSON.stringify([1],void 0,i.indent===void 0?2:i.indent).slice(2,-3),a=r===""?1/0:i.maxLength===void 0?80:i.maxLength,s=i.replacer,(function o(l,f,d){var h,p,y,v,b,S,_,w,A,C,T,k;if(l&&typeof l.toJSON=="function"&&(l=l.toJSON()),T=JSON.stringify(l,s),T===void 0)return T;if(_=a-f.length-d,T.length<=_&&(A=T.replace(e,function(M,R){return R||M+" "}),A.length<=_))return A;if(s!=null&&(l=JSON.parse(T),s=void 0),typeof l=="object"&&l!==null){if(w=f+r,y=[],p=0,Array.isArray(l))for(C="[",h="]",_=l.length;p<_;p++)y.push(o(l[p],w,p===_-1?0:1)||"null");else for(C="{",h="}",S=Object.keys(l),_=S.length;p<_;p++)v=S[p],b=JSON.stringify(v)+": ",k=o(l[v],w,b.length+(p===_-1?0:1)),k!==void 0&&y.push(b+k);if(y.length>0)return[C,r+y.join(`,
`+w),h].join(`
`+f)}return T})(n,"",0)},dE}var FQ=zQ();const hE=Mp(FQ);var Um={exports:{}},gE,N5;function Fv(){if(N5)return gE;N5=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,i=16,r=t-6;return gE={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:i,MAX_SAFE_BUILD_LENGTH:r,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},gE}var pE,z5;function Lv(){if(z5)return pE;z5=1;var e={};return pE=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},pE}var F5;function kp(){return F5||(F5=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_LENGTH:r}=Fv(),a=Lv();t=e.exports={};const s=t.re=[],o=t.safeRe=[],l=t.src=[],f=t.safeSrc=[],d=t.t={};let h=0;const p="[a-zA-Z0-9-]",y=[["\\s",1],["\\d",r],[p,i]],v=S=>{for(const[_,w]of y)S=S.split(`${_}*`).join(`${_}{0,${w}}`).split(`${_}+`).join(`${_}{1,${w}}`);return S},b=(S,_,w)=>{const A=v(_),C=h++;a(S,C,_),d[S]=C,l[C]=_,f[C]=A,s[C]=new RegExp(_,w?"g":void 0),o[C]=new RegExp(A,w?"g":void 0)};b("NUMERICIDENTIFIER","0|[1-9]\\d*"),b("NUMERICIDENTIFIERLOOSE","\\d+"),b("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),b("MAINVERSION",`(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})\\.(${l[d.NUMERICIDENTIFIER]})`),b("MAINVERSIONLOOSE",`(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})\\.(${l[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASEIDENTIFIER",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIER]})`),b("PRERELEASEIDENTIFIERLOOSE",`(?:${l[d.NONNUMERICIDENTIFIER]}|${l[d.NUMERICIDENTIFIERLOOSE]})`),b("PRERELEASE",`(?:-(${l[d.PRERELEASEIDENTIFIER]}(?:\\.${l[d.PRERELEASEIDENTIFIER]})*))`),b("PRERELEASELOOSE",`(?:-?(${l[d.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${l[d.PRERELEASEIDENTIFIERLOOSE]})*))`),b("BUILDIDENTIFIER",`${p}+`),b("BUILD",`(?:\\+(${l[d.BUILDIDENTIFIER]}(?:\\.${l[d.BUILDIDENTIFIER]})*))`),b("FULLPLAIN",`v?${l[d.MAINVERSION]}${l[d.PRERELEASE]}?${l[d.BUILD]}?`),b("FULL",`^${l[d.FULLPLAIN]}$`),b("LOOSEPLAIN",`[v=\\s]*${l[d.MAINVERSIONLOOSE]}${l[d.PRERELEASELOOSE]}?${l[d.BUILD]}?`),b("LOOSE",`^${l[d.LOOSEPLAIN]}$`),b("GTLT","((?:<|>)?=?)"),b("XRANGEIDENTIFIERLOOSE",`${l[d.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),b("XRANGEIDENTIFIER",`${l[d.NUMERICIDENTIFIER]}|x|X|\\*`),b("XRANGEPLAIN",`[v=\\s]*(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:\\.(${l[d.XRANGEIDENTIFIER]})(?:${l[d.PRERELEASE]})?${l[d.BUILD]}?)?)?`),b("XRANGEPLAINLOOSE",`[v=\\s]*(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:\\.(${l[d.XRANGEIDENTIFIERLOOSE]})(?:${l[d.PRERELEASELOOSE]})?${l[d.BUILD]}?)?)?`),b("XRANGE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAIN]}$`),b("XRANGELOOSE",`^${l[d.GTLT]}\\s*${l[d.XRANGEPLAINLOOSE]}$`),b("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),b("COERCE",`${l[d.COERCEPLAIN]}(?:$|[^\\d])`),b("COERCEFULL",l[d.COERCEPLAIN]+`(?:${l[d.PRERELEASE]})?(?:${l[d.BUILD]})?(?:$|[^\\d])`),b("COERCERTL",l[d.COERCE],!0),b("COERCERTLFULL",l[d.COERCEFULL],!0),b("LONETILDE","(?:~>?)"),b("TILDETRIM",`(\\s*)${l[d.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",b("TILDE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAIN]}$`),b("TILDELOOSE",`^${l[d.LONETILDE]}${l[d.XRANGEPLAINLOOSE]}$`),b("LONECARET","(?:\\^)"),b("CARETTRIM",`(\\s*)${l[d.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",b("CARET",`^${l[d.LONECARET]}${l[d.XRANGEPLAIN]}$`),b("CARETLOOSE",`^${l[d.LONECARET]}${l[d.XRANGEPLAINLOOSE]}$`),b("COMPARATORLOOSE",`^${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]})$|^$`),b("COMPARATOR",`^${l[d.GTLT]}\\s*(${l[d.FULLPLAIN]})$|^$`),b("COMPARATORTRIM",`(\\s*)${l[d.GTLT]}\\s*(${l[d.LOOSEPLAIN]}|${l[d.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",b("HYPHENRANGE",`^\\s*(${l[d.XRANGEPLAIN]})\\s+-\\s+(${l[d.XRANGEPLAIN]})\\s*$`),b("HYPHENRANGELOOSE",`^\\s*(${l[d.XRANGEPLAINLOOSE]})\\s+-\\s+(${l[d.XRANGEPLAINLOOSE]})\\s*$`),b("STAR","(<|>)?=?\\s*\\*"),b("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),b("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Um,Um.exports)),Um.exports}var mE,L5;function n$(){if(L5)return mE;L5=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return mE=i=>i?typeof i!="object"?e:i:t,mE}var yE,B5;function X9(){if(B5)return yE;B5=1;const e=/^[0-9]+$/,t=(i,r)=>{const a=e.test(i),s=e.test(r);return a&&s&&(i=+i,r=+r),i===r?0:a&&!s?-1:s&&!a?1:i<r?-1:1};return yE={compareIdentifiers:t,rcompareIdentifiers:(i,r)=>t(r,i)},yE}var vE,U5;function bi(){if(U5)return vE;U5=1;const e=Lv(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=Fv(),{safeRe:i,t:r}=kp(),a=n$(),{compareIdentifiers:s}=X9();class o{constructor(f,d){if(d=a(d),f instanceof o){if(f.loose===!!d.loose&&f.includePrerelease===!!d.includePrerelease)return f;f=f.version}else if(typeof f!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof f}".`);if(f.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",f,d),this.options=d,this.loose=!!d.loose,this.includePrerelease=!!d.includePrerelease;const h=f.trim().match(d.loose?i[r.LOOSE]:i[r.FULL]);if(!h)throw new TypeError(`Invalid Version: ${f}`);if(this.raw=f,this.major=+h[1],this.minor=+h[2],this.patch=+h[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");h[4]?this.prerelease=h[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const y=+p;if(y>=0&&y<n)return y}return p}):this.prerelease=[],this.build=h[5]?h[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(f){if(e("SemVer.compare",this.version,this.options,f),!(f instanceof o)){if(typeof f=="string"&&f===this.version)return 0;f=new o(f,this.options)}return f.version===this.version?0:this.compareMain(f)||this.comparePre(f)}compareMain(f){return f instanceof o||(f=new o(f,this.options)),s(this.major,f.major)||s(this.minor,f.minor)||s(this.patch,f.patch)}comparePre(f){if(f instanceof o||(f=new o(f,this.options)),this.prerelease.length&&!f.prerelease.length)return-1;if(!this.prerelease.length&&f.prerelease.length)return 1;if(!this.prerelease.length&&!f.prerelease.length)return 0;let d=0;do{const h=this.prerelease[d],p=f.prerelease[d];if(e("prerelease compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}compareBuild(f){f instanceof o||(f=new o(f,this.options));let d=0;do{const h=this.build[d],p=f.build[d];if(e("build compare",d,h,p),h===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(h===void 0)return-1;if(h===p)continue;return s(h,p)}while(++d)}inc(f,d,h){if(f.startsWith("pre")){if(!d&&h===!1)throw new Error("invalid increment argument: identifier is empty");if(d){const p=`-${d}`.match(this.options.loose?i[r.PRERELEASELOOSE]:i[r.PRERELEASE]);if(!p||p[1]!==d)throw new Error(`invalid identifier: ${d}`)}}switch(f){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",d,h);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",d,h);break;case"prepatch":this.prerelease.length=0,this.inc("patch",d,h),this.inc("pre",d,h);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",d,h),this.inc("pre",d,h);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(h)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let y=this.prerelease.length;for(;--y>=0;)typeof this.prerelease[y]=="number"&&(this.prerelease[y]++,y=-2);if(y===-1){if(d===this.prerelease.join(".")&&h===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(d){let y=[d,p];h===!1&&(y=[d]),s(this.prerelease[0],d)===0?isNaN(this.prerelease[1])&&(this.prerelease=y):this.prerelease=y}break}default:throw new Error(`invalid increment argument: ${f}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return vE=o,vE}var bE,q5;function bd(){if(q5)return bE;q5=1;const e=bi();return bE=(n,i,r=!1)=>{if(n instanceof e)return n;try{return new e(n,i)}catch(a){if(!r)return null;throw a}},bE}var xE,P5;function LQ(){if(P5)return xE;P5=1;const e=bd();return xE=(n,i)=>{const r=e(n,i);return r?r.version:null},xE}var SE,I5;function BQ(){if(I5)return SE;I5=1;const e=bd();return SE=(n,i)=>{const r=e(n.trim().replace(/^[=v]+/,""),i);return r?r.version:null},SE}var EE,j5;function UQ(){if(j5)return EE;j5=1;const e=bi();return EE=(n,i,r,a,s)=>{typeof r=="string"&&(s=a,a=r,r=void 0);try{return new e(n instanceof e?n.version:n,r).inc(i,a,s).version}catch{return null}},EE}var _E,H5;function qQ(){if(H5)return _E;H5=1;const e=bd();return _E=(n,i)=>{const r=e(n,null,!0),a=e(i,null,!0),s=r.compare(a);if(s===0)return null;const o=s>0,l=o?r:a,f=o?a:r,d=!!l.prerelease.length;if(!!f.prerelease.length&&!d){if(!f.patch&&!f.minor)return"major";if(f.compareMain(l)===0)return f.minor&&!f.patch?"minor":"patch"}const p=d?"pre":"";return r.major!==a.major?p+"major":r.minor!==a.minor?p+"minor":r.patch!==a.patch?p+"patch":"prerelease"},_E}var wE,G5;function PQ(){if(G5)return wE;G5=1;const e=bi();return wE=(n,i)=>new e(n,i).major,wE}var AE,Y5;function IQ(){if(Y5)return AE;Y5=1;const e=bi();return AE=(n,i)=>new e(n,i).minor,AE}var CE,X5;function jQ(){if(X5)return CE;X5=1;const e=bi();return CE=(n,i)=>new e(n,i).patch,CE}var $E,V5;function HQ(){if(V5)return $E;V5=1;const e=bd();return $E=(n,i)=>{const r=e(n,i);return r&&r.prerelease.length?r.prerelease:null},$E}var TE,W5;function fa(){if(W5)return TE;W5=1;const e=bi();return TE=(n,i,r)=>new e(n,r).compare(new e(i,r)),TE}var ME,Q5;function GQ(){if(Q5)return ME;Q5=1;const e=fa();return ME=(n,i,r)=>e(i,n,r),ME}var kE,Z5;function YQ(){if(Z5)return kE;Z5=1;const e=fa();return kE=(n,i)=>e(n,i,!0),kE}var OE,K5;function i$(){if(K5)return OE;K5=1;const e=bi();return OE=(n,i,r)=>{const a=new e(n,r),s=new e(i,r);return a.compare(s)||a.compareBuild(s)},OE}var RE,J5;function XQ(){if(J5)return RE;J5=1;const e=i$();return RE=(n,i)=>n.sort((r,a)=>e(r,a,i)),RE}var DE,e6;function VQ(){if(e6)return DE;e6=1;const e=i$();return DE=(n,i)=>n.sort((r,a)=>e(a,r,i)),DE}var NE,t6;function Bv(){if(t6)return NE;t6=1;const e=fa();return NE=(n,i,r)=>e(n,i,r)>0,NE}var zE,n6;function r$(){if(n6)return zE;n6=1;const e=fa();return zE=(n,i,r)=>e(n,i,r)<0,zE}var FE,i6;function V9(){if(i6)return FE;i6=1;const e=fa();return FE=(n,i,r)=>e(n,i,r)===0,FE}var LE,r6;function W9(){if(r6)return LE;r6=1;const e=fa();return LE=(n,i,r)=>e(n,i,r)!==0,LE}var BE,a6;function a$(){if(a6)return BE;a6=1;const e=fa();return BE=(n,i,r)=>e(n,i,r)>=0,BE}var UE,s6;function s$(){if(s6)return UE;s6=1;const e=fa();return UE=(n,i,r)=>e(n,i,r)<=0,UE}var qE,o6;function Q9(){if(o6)return qE;o6=1;const e=V9(),t=W9(),n=Bv(),i=a$(),r=r$(),a=s$();return qE=(o,l,f,d)=>{switch(l){case"===":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o===f;case"!==":return typeof o=="object"&&(o=o.version),typeof f=="object"&&(f=f.version),o!==f;case"":case"=":case"==":return e(o,f,d);case"!=":return t(o,f,d);case">":return n(o,f,d);case">=":return i(o,f,d);case"<":return r(o,f,d);case"<=":return a(o,f,d);default:throw new TypeError(`Invalid operator: ${l}`)}},qE}var PE,u6;function WQ(){if(u6)return PE;u6=1;const e=bi(),t=bd(),{safeRe:n,t:i}=kp();return PE=(a,s)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;s=s||{};let o=null;if(!s.rtl)o=a.match(s.includePrerelease?n[i.COERCEFULL]:n[i.COERCE]);else{const y=s.includePrerelease?n[i.COERCERTLFULL]:n[i.COERCERTL];let v;for(;(v=y.exec(a))&&(!o||o.index+o[0].length!==a.length);)(!o||v.index+v[0].length!==o.index+o[0].length)&&(o=v),y.lastIndex=v.index+v[1].length+v[2].length;y.lastIndex=-1}if(o===null)return null;const l=o[2],f=o[3]||"0",d=o[4]||"0",h=s.includePrerelease&&o[5]?`-${o[5]}`:"",p=s.includePrerelease&&o[6]?`+${o[6]}`:"";return t(`${l}.${f}.${d}${h}${p}`,s)},PE}var IE,l6;function QQ(){if(l6)return IE;l6=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const i=this.map.get(n);if(i!==void 0)return this.map.delete(n),this.map.set(n,i),i}delete(n){return this.map.delete(n)}set(n,i){if(!this.delete(n)&&i!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,i)}return this}}return IE=e,IE}var jE,c6;function da(){if(c6)return jE;c6=1;const e=/\s+/g;class t{constructor(F,D){if(D=r(D),F instanceof t)return F.loose===!!D.loose&&F.includePrerelease===!!D.includePrerelease?F:new t(F.raw,D);if(F instanceof a)return this.raw=F.value,this.set=[[F]],this.formatted=void 0,this;if(this.options=D,this.loose=!!D.loose,this.includePrerelease=!!D.includePrerelease,this.raw=F.trim().replace(e," "),this.set=this.raw.split("||").map(P=>this.parseRange(P.trim())).filter(P=>P.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const P=this.set[0];if(this.set=this.set.filter(X=>!b(X[0])),this.set.length===0)this.set=[P];else if(this.set.length>1){for(const X of this.set)if(X.length===1&&S(X[0])){this.set=[X];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let F=0;F<this.set.length;F++){F>0&&(this.formatted+="||");const D=this.set[F];for(let P=0;P<D.length;P++)P>0&&(this.formatted+=" "),this.formatted+=D[P].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(F){const P=((this.options.includePrerelease&&y)|(this.options.loose&&v))+":"+F,X=i.get(P);if(X)return X;const Z=this.options.loose,N=Z?l[f.HYPHENRANGELOOSE]:l[f.HYPHENRANGE];F=F.replace(N,G(this.options.includePrerelease)),s("hyphen replace",F),F=F.replace(l[f.COMPARATORTRIM],d),s("comparator trim",F),F=F.replace(l[f.TILDETRIM],h),s("tilde trim",F),F=F.replace(l[f.CARETTRIM],p),s("caret trim",F);let W=F.split(" ").map(be=>w(be,this.options)).join(" ").split(/\s+/).map(be=>L(be,this.options));Z&&(W=W.filter(be=>(s("loose invalid filter",be,this.options),!!be.match(l[f.COMPARATORLOOSE])))),s("range list",W);const ne=new Map,ae=W.map(be=>new a(be,this.options));for(const be of ae){if(b(be))return[be];ne.set(be.value,be)}ne.size>1&&ne.has("")&&ne.delete("");const me=[...ne.values()];return i.set(P,me),me}intersects(F,D){if(!(F instanceof t))throw new TypeError("a Range is required");return this.set.some(P=>_(P,D)&&F.set.some(X=>_(X,D)&&P.every(Z=>X.every(N=>Z.intersects(N,D)))))}test(F){if(!F)return!1;if(typeof F=="string")try{F=new o(F,this.options)}catch{return!1}for(let D=0;D<this.set.length;D++)if(j(this.set[D],F,this.options))return!0;return!1}}jE=t;const n=QQ(),i=new n,r=n$(),a=Uv(),s=Lv(),o=bi(),{safeRe:l,t:f,comparatorTrimReplace:d,tildeTrimReplace:h,caretTrimReplace:p}=kp(),{FLAG_INCLUDE_PRERELEASE:y,FLAG_LOOSE:v}=Fv(),b=q=>q.value==="<0.0.0-0",S=q=>q.value==="",_=(q,F)=>{let D=!0;const P=q.slice();let X=P.pop();for(;D&&P.length;)D=P.every(Z=>X.intersects(Z,F)),X=P.pop();return D},w=(q,F)=>(s("comp",q,F),q=k(q,F),s("caret",q),q=C(q,F),s("tildes",q),q=R(q,F),s("xrange",q),q=U(q,F),s("stars",q),q),A=q=>!q||q.toLowerCase()==="x"||q==="*",C=(q,F)=>q.trim().split(/\s+/).map(D=>T(D,F)).join(" "),T=(q,F)=>{const D=F.loose?l[f.TILDELOOSE]:l[f.TILDE];return q.replace(D,(P,X,Z,N,W)=>{s("tilde",q,P,X,Z,N,W);let ne;return A(X)?ne="":A(Z)?ne=`>=${X}.0.0 <${+X+1}.0.0-0`:A(N)?ne=`>=${X}.${Z}.0 <${X}.${+Z+1}.0-0`:W?(s("replaceTilde pr",W),ne=`>=${X}.${Z}.${N}-${W} <${X}.${+Z+1}.0-0`):ne=`>=${X}.${Z}.${N} <${X}.${+Z+1}.0-0`,s("tilde return",ne),ne})},k=(q,F)=>q.trim().split(/\s+/).map(D=>M(D,F)).join(" "),M=(q,F)=>{s("caret",q,F);const D=F.loose?l[f.CARETLOOSE]:l[f.CARET],P=F.includePrerelease?"-0":"";return q.replace(D,(X,Z,N,W,ne)=>{s("caret",q,X,Z,N,W,ne);let ae;return A(Z)?ae="":A(N)?ae=`>=${Z}.0.0${P} <${+Z+1}.0.0-0`:A(W)?Z==="0"?ae=`>=${Z}.${N}.0${P} <${Z}.${+N+1}.0-0`:ae=`>=${Z}.${N}.0${P} <${+Z+1}.0.0-0`:ne?(s("replaceCaret pr",ne),Z==="0"?N==="0"?ae=`>=${Z}.${N}.${W}-${ne} <${Z}.${N}.${+W+1}-0`:ae=`>=${Z}.${N}.${W}-${ne} <${Z}.${+N+1}.0-0`:ae=`>=${Z}.${N}.${W}-${ne} <${+Z+1}.0.0-0`):(s("no pr"),Z==="0"?N==="0"?ae=`>=${Z}.${N}.${W}${P} <${Z}.${N}.${+W+1}-0`:ae=`>=${Z}.${N}.${W}${P} <${Z}.${+N+1}.0-0`:ae=`>=${Z}.${N}.${W} <${+Z+1}.0.0-0`),s("caret return",ae),ae})},R=(q,F)=>(s("replaceXRanges",q,F),q.split(/\s+/).map(D=>z(D,F)).join(" ")),z=(q,F)=>{q=q.trim();const D=F.loose?l[f.XRANGELOOSE]:l[f.XRANGE];return q.replace(D,(P,X,Z,N,W,ne)=>{s("xRange",q,P,X,Z,N,W,ne);const ae=A(Z),me=ae||A(N),be=me||A(W),Ae=be;return X==="="&&Ae&&(X=""),ne=F.includePrerelease?"-0":"",ae?X===">"||X==="<"?P="<0.0.0-0":P="*":X&&Ae?(me&&(N=0),W=0,X===">"?(X=">=",me?(Z=+Z+1,N=0,W=0):(N=+N+1,W=0)):X==="<="&&(X="<",me?Z=+Z+1:N=+N+1),X==="<"&&(ne="-0"),P=`${X+Z}.${N}.${W}${ne}`):me?P=`>=${Z}.0.0${ne} <${+Z+1}.0.0-0`:be&&(P=`>=${Z}.${N}.0${ne} <${Z}.${+N+1}.0-0`),s("xRange return",P),P})},U=(q,F)=>(s("replaceStars",q,F),q.trim().replace(l[f.STAR],"")),L=(q,F)=>(s("replaceGTE0",q,F),q.trim().replace(l[F.includePrerelease?f.GTE0PRE:f.GTE0],"")),G=q=>(F,D,P,X,Z,N,W,ne,ae,me,be,Ae)=>(A(P)?D="":A(X)?D=`>=${P}.0.0${q?"-0":""}`:A(Z)?D=`>=${P}.${X}.0${q?"-0":""}`:N?D=`>=${D}`:D=`>=${D}${q?"-0":""}`,A(ae)?ne="":A(me)?ne=`<${+ae+1}.0.0-0`:A(be)?ne=`<${ae}.${+me+1}.0-0`:Ae?ne=`<=${ae}.${me}.${be}-${Ae}`:q?ne=`<${ae}.${me}.${+be+1}-0`:ne=`<=${ne}`,`${D} ${ne}`.trim()),j=(q,F,D)=>{for(let P=0;P<q.length;P++)if(!q[P].test(F))return!1;if(F.prerelease.length&&!D.includePrerelease){for(let P=0;P<q.length;P++)if(s(q[P].semver),q[P].semver!==a.ANY&&q[P].semver.prerelease.length>0){const X=q[P].semver;if(X.major===F.major&&X.minor===F.minor&&X.patch===F.patch)return!0}return!1}return!0};return jE}var HE,f6;function Uv(){if(f6)return HE;f6=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(d,h){if(h=n(h),d instanceof t){if(d.loose===!!h.loose)return d;d=d.value}d=d.trim().split(/\s+/).join(" "),s("comparator",d,h),this.options=h,this.loose=!!h.loose,this.parse(d),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(d){const h=this.options.loose?i[r.COMPARATORLOOSE]:i[r.COMPARATOR],p=d.match(h);if(!p)throw new TypeError(`Invalid comparator: ${d}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new o(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(d){if(s("Comparator.test",d,this.options.loose),this.semver===e||d===e)return!0;if(typeof d=="string")try{d=new o(d,this.options)}catch{return!1}return a(d,this.operator,this.semver,this.options)}intersects(d,h){if(!(d instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new l(d.value,h).test(this.value):d.operator===""?d.value===""?!0:new l(this.value,h).test(d.semver):(h=n(h),h.includePrerelease&&(this.value==="<0.0.0-0"||d.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||d.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&d.operator.startsWith(">")||this.operator.startsWith("<")&&d.operator.startsWith("<")||this.semver.version===d.semver.version&&this.operator.includes("=")&&d.operator.includes("=")||a(this.semver,"<",d.semver,h)&&this.operator.startsWith(">")&&d.operator.startsWith("<")||a(this.semver,">",d.semver,h)&&this.operator.startsWith("<")&&d.operator.startsWith(">")))}}HE=t;const n=n$(),{safeRe:i,t:r}=kp(),a=Q9(),s=Lv(),o=bi(),l=da();return HE}var GE,d6;function qv(){if(d6)return GE;d6=1;const e=da();return GE=(n,i,r)=>{try{i=new e(i,r)}catch{return!1}return i.test(n)},GE}var YE,h6;function ZQ(){if(h6)return YE;h6=1;const e=da();return YE=(n,i)=>new e(n,i).set.map(r=>r.map(a=>a.value).join(" ").trim().split(" ")),YE}var XE,g6;function KQ(){if(g6)return XE;g6=1;const e=bi(),t=da();return XE=(i,r,a)=>{let s=null,o=null,l=null;try{l=new t(r,a)}catch{return null}return i.forEach(f=>{l.test(f)&&(!s||o.compare(f)===-1)&&(s=f,o=new e(s,a))}),s},XE}var VE,p6;function JQ(){if(p6)return VE;p6=1;const e=bi(),t=da();return VE=(i,r,a)=>{let s=null,o=null,l=null;try{l=new t(r,a)}catch{return null}return i.forEach(f=>{l.test(f)&&(!s||o.compare(f)===1)&&(s=f,o=new e(s,a))}),s},VE}var WE,m6;function eZ(){if(m6)return WE;m6=1;const e=bi(),t=da(),n=Bv();return WE=(r,a)=>{r=new t(r,a);let s=new e("0.0.0");if(r.test(s)||(s=new e("0.0.0-0"),r.test(s)))return s;s=null;for(let o=0;o<r.set.length;++o){const l=r.set[o];let f=null;l.forEach(d=>{const h=new e(d.semver.version);switch(d.operator){case">":h.prerelease.length===0?h.patch++:h.prerelease.push(0),h.raw=h.format();case"":case">=":(!f||n(h,f))&&(f=h);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${d.operator}`)}}),f&&(!s||n(s,f))&&(s=f)}return s&&r.test(s)?s:null},WE}var QE,y6;function tZ(){if(y6)return QE;y6=1;const e=da();return QE=(n,i)=>{try{return new e(n,i).range||"*"}catch{return null}},QE}var ZE,v6;function o$(){if(v6)return ZE;v6=1;const e=bi(),t=Uv(),{ANY:n}=t,i=da(),r=qv(),a=Bv(),s=r$(),o=s$(),l=a$();return ZE=(d,h,p,y)=>{d=new e(d,y),h=new i(h,y);let v,b,S,_,w;switch(p){case">":v=a,b=o,S=s,_=">",w=">=";break;case"<":v=s,b=l,S=a,_="<",w="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(r(d,h,y))return!1;for(let A=0;A<h.set.length;++A){const C=h.set[A];let T=null,k=null;if(C.forEach(M=>{M.semver===n&&(M=new t(">=0.0.0")),T=T||M,k=k||M,v(M.semver,T.semver,y)?T=M:S(M.semver,k.semver,y)&&(k=M)}),T.operator===_||T.operator===w||(!k.operator||k.operator===_)&&b(d,k.semver))return!1;if(k.operator===w&&S(d,k.semver))return!1}return!0},ZE}var KE,b6;function nZ(){if(b6)return KE;b6=1;const e=o$();return KE=(n,i,r)=>e(n,i,">",r),KE}var JE,x6;function iZ(){if(x6)return JE;x6=1;const e=o$();return JE=(n,i,r)=>e(n,i,"<",r),JE}var e_,S6;function rZ(){if(S6)return e_;S6=1;const e=da();return e_=(n,i,r)=>(n=new e(n,r),i=new e(i,r),n.intersects(i,r)),e_}var t_,E6;function aZ(){if(E6)return t_;E6=1;const e=qv(),t=fa();return t_=(n,i,r)=>{const a=[];let s=null,o=null;const l=n.sort((p,y)=>t(p,y,r));for(const p of l)e(p,i,r)?(o=p,s||(s=p)):(o&&a.push([s,o]),o=null,s=null);s&&a.push([s,null]);const f=[];for(const[p,y]of a)p===y?f.push(p):!y&&p===l[0]?f.push("*"):y?p===l[0]?f.push(`<=${y}`):f.push(`${p} - ${y}`):f.push(`>=${p}`);const d=f.join(" || "),h=typeof i.raw=="string"?i.raw:String(i);return d.length<h.length?d:i},t_}var n_,_6;function sZ(){if(_6)return n_;_6=1;const e=da(),t=Uv(),{ANY:n}=t,i=qv(),r=fa(),a=(h,p,y={})=>{if(h===p)return!0;h=new e(h,y),p=new e(p,y);let v=!1;e:for(const b of h.set){for(const S of p.set){const _=l(b,S,y);if(v=v||_!==null,_)continue e}if(v)return!1}return!0},s=[new t(">=0.0.0-0")],o=[new t(">=0.0.0")],l=(h,p,y)=>{if(h===p)return!0;if(h.length===1&&h[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;y.includePrerelease?h=s:h=o}if(p.length===1&&p[0].semver===n){if(y.includePrerelease)return!0;p=o}const v=new Set;let b,S;for(const R of h)R.operator===">"||R.operator===">="?b=f(b,R,y):R.operator==="<"||R.operator==="<="?S=d(S,R,y):v.add(R.semver);if(v.size>1)return null;let _;if(b&&S){if(_=r(b.semver,S.semver,y),_>0)return null;if(_===0&&(b.operator!==">="||S.operator!=="<="))return null}for(const R of v){if(b&&!i(R,String(b),y)||S&&!i(R,String(S),y))return null;for(const z of p)if(!i(R,String(z),y))return!1;return!0}let w,A,C,T,k=S&&!y.includePrerelease&&S.semver.prerelease.length?S.semver:!1,M=b&&!y.includePrerelease&&b.semver.prerelease.length?b.semver:!1;k&&k.prerelease.length===1&&S.operator==="<"&&k.prerelease[0]===0&&(k=!1);for(const R of p){if(T=T||R.operator===">"||R.operator===">=",C=C||R.operator==="<"||R.operator==="<=",b){if(M&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===M.major&&R.semver.minor===M.minor&&R.semver.patch===M.patch&&(M=!1),R.operator===">"||R.operator===">="){if(w=f(b,R,y),w===R&&w!==b)return!1}else if(b.operator===">="&&!i(b.semver,String(R),y))return!1}if(S){if(k&&R.semver.prerelease&&R.semver.prerelease.length&&R.semver.major===k.major&&R.semver.minor===k.minor&&R.semver.patch===k.patch&&(k=!1),R.operator==="<"||R.operator==="<="){if(A=d(S,R,y),A===R&&A!==S)return!1}else if(S.operator==="<="&&!i(S.semver,String(R),y))return!1}if(!R.operator&&(S||b)&&_!==0)return!1}return!(b&&C&&!S&&_!==0||S&&T&&!b&&_!==0||M||k)},f=(h,p,y)=>{if(!h)return p;const v=r(h.semver,p.semver,y);return v>0?h:v<0||p.operator===">"&&h.operator===">="?p:h},d=(h,p,y)=>{if(!h)return p;const v=r(h.semver,p.semver,y);return v<0?h:v>0||p.operator==="<"&&h.operator==="<="?p:h};return n_=a,n_}var i_,w6;function oZ(){if(w6)return i_;w6=1;const e=kp(),t=Fv(),n=bi(),i=X9(),r=bd(),a=LQ(),s=BQ(),o=UQ(),l=qQ(),f=PQ(),d=IQ(),h=jQ(),p=HQ(),y=fa(),v=GQ(),b=YQ(),S=i$(),_=XQ(),w=VQ(),A=Bv(),C=r$(),T=V9(),k=W9(),M=a$(),R=s$(),z=Q9(),U=WQ(),L=Uv(),G=da(),j=qv(),q=ZQ(),F=KQ(),D=JQ(),P=eZ(),X=tZ(),Z=o$(),N=nZ(),W=iZ(),ne=rZ(),ae=aZ(),me=sZ();return i_={parse:r,valid:a,clean:s,inc:o,diff:l,major:f,minor:d,patch:h,prerelease:p,compare:y,rcompare:v,compareLoose:b,compareBuild:S,sort:_,rsort:w,gt:A,lt:C,eq:T,neq:k,gte:M,lte:R,cmp:z,coerce:U,Comparator:L,Range:G,satisfies:j,toComparators:q,maxSatisfying:F,minSatisfying:D,minVersion:P,validRange:X,outside:Z,gtr:N,ltr:W,intersects:ne,simplifyRange:ae,subset:me,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:i.compareIdentifiers,rcompareIdentifiers:i.rcompareIdentifiers},i_}var Z9=oZ();function Ui(e,t,n){return e.fields=t||[],e.fname=n,e}function It(e){return e==null?null:e.fname}function Zn(e){return e==null?null:e.fields}function K9(e){return e.length===1?uZ(e[0]):lZ(e)}const uZ=e=>function(t){return t[e]},lZ=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function te(e){throw Error(e)}function Ka(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||te("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&te("Access path missing closing bracket: "+e),i&&te("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function kr(e,t,n){const i=Ka(e);return e=i.length===1?i[0]:e,Ui((n&&n.get||K9)(i),[e],t||e)}const Op=kr("id"),ti=Ui(e=>e,[],"identity"),Ho=Ui(()=>0,[],"zero"),xd=Ui(()=>1,[],"one"),Or=Ui(()=>!0,[],"true"),Fo=Ui(()=>!1,[],"false");function cZ(e,t,n){const i=[t].concat([].slice.call(n));console[e].apply(console,i)}const J9=0,u$=1,l$=2,e7=3,t7=4;function c$(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cZ,i=e||J9;return{level(r){return arguments.length?(i=+r,this):i},error(){return i>=u$&&n(t||"error","ERROR",arguments),this},warn(){return i>=l$&&n(t||"warn","WARN",arguments),this},info(){return i>=e7&&n(t||"log","INFO",arguments),this},debug(){return i>=t7&&n(t||"log","DEBUG",arguments),this}}}var re=Array.isArray;function xe(e){return e===Object(e)}const A6=e=>e!=="__proto__";function Pv(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=fZ(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;Sd(i,a,r[a],s)}return i},{})}function Sd(e,t,n,i){if(!A6(t))return;let r,a;if(xe(n)&&!re(n)){a=xe(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?Sd(a,r,n[r]):A6(r)&&(a[r]=n[r])}else e[t]=n}function fZ(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function Ke(e){return e[e.length-1]}function Wn(e){return e==null||e===""?null:+e}const n7=e=>t=>e*Math.exp(t),i7=e=>t=>Math.log(e*t),r7=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),a7=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,ny=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function Iv(e,t,n,i){const r=n(e[0]),a=n(Ke(e)),s=(a-r)*t;return[i(r-s),i(a-s)]}function s7(e,t){return Iv(e,t,Wn,ti)}function o7(e,t){var n=Math.sign(e[0]);return Iv(e,t,i7(n),n7(n))}function u7(e,t,n){return Iv(e,t,ny(n),ny(1/n))}function l7(e,t,n){return Iv(e,t,r7(n),a7(n))}function jv(e,t,n,i,r){const a=i(e[0]),s=i(Ke(e)),o=t!=null?i(t):(a+s)/2;return[r(o+(a-o)*n),r(o+(s-o)*n)]}function f$(e,t,n){return jv(e,t,n,Wn,ti)}function d$(e,t,n){const i=Math.sign(e[0]);return jv(e,t,n,i7(i),n7(i))}function iy(e,t,n,i){return jv(e,t,n,ny(i),ny(1/i))}function h$(e,t,n,i){return jv(e,t,n,r7(i),a7(i))}function c7(e){return 1+~~(new Date(e).getMonth()/3)}function f7(e){return 1+~~(new Date(e).getUTCMonth()/3)}function ve(e){return e!=null?re(e)?e:[e]:[]}function d7(e,t,n){let i=e[0],r=e[1],a;return r<i&&(a=r,r=i,i=a),a=r-i,a>=n-t?[t,n]:[i=Math.min(Math.max(i,t),n-a),i+a]}function Pe(e){return typeof e=="function"}const dZ="descending";function g$(e,t,n){n=n||{},t=ve(t)||[];const i=[],r=[],a={},s=n.comparator||hZ;return ve(e).forEach((o,l)=>{o!=null&&(i.push(t[l]===dZ?-1:1),r.push(o=Pe(o)?o:kr(o,null,n)),(Zn(o)||[]).forEach(f=>a[f]=1))}),r.length===0?null:Ui(s(r,i),Object.keys(a))}const Rp=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),hZ=(e,t)=>e.length===1?gZ(e[0],t[0]):pZ(e,t,e.length),gZ=(e,t)=>function(n,i){return Rp(e(n),e(i))*t},pZ=(e,t,n)=>(t.push(0),function(i,r){let a,s=0,o=-1;for(;s===0&&++o<n;)a=e[o],s=Rp(a(i),a(r));return s*t[o]});function ni(e){return Pe(e)?e:()=>e}function p$(e,t){let n;return i=>{n&&clearTimeout(n),n=setTimeout(()=>(t(i),n=null),e)}}function qe(e){for(let t,n,i=1,r=arguments.length;i<r;++i){t=arguments[i];for(n in t)e[n]=t[n]}return e}function ja(e,t){let n=0,i,r,a,s;if(e&&(i=e.length))if(t==null){for(r=e[n];n<i&&(r==null||r!==r);r=e[++n]);for(a=s=r;n<i;++n)r=e[n],r!=null&&(r<a&&(a=r),r>s&&(s=r))}else{for(r=t(e[n]);n<i&&(r==null||r!==r);r=t(e[++n]));for(a=s=r;n<i;++n)r=t(e[n]),r!=null&&(r<a&&(a=r),r>s&&(s=r))}return[a,s]}function h7(e,t){const n=e.length;let i=-1,r,a,s,o,l;if(t==null){for(;++i<n;)if(a=e[i],a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=e[i],a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}else{for(;++i<n;)if(a=t(e[i],i,e),a!=null&&a>=a){r=s=a;break}if(i===n)return[-1,-1];for(o=l=i;++i<n;)a=t(e[i],i,e),a!=null&&(r>a&&(r=a,o=i),s<a&&(s=a,l=i))}return[o,l]}function Se(e,t){return Object.hasOwn(e,t)}const qm={};function Ed(e){let t={},n;function i(a){return Se(t,a)&&t[a]!==qm}const r={size:0,empty:0,object:t,has:i,get(a){return i(a)?t[a]:void 0},set(a,s){return i(a)||(++r.size,t[a]===qm&&--r.empty),t[a]=s,this},delete(a){return i(a)&&(--r.size,++r.empty,t[a]=qm),this},clear(){r.size=r.empty=0,r.object=t={}},test(a){return arguments.length?(n=a,r):n},clean(){const a={};let s=0;for(const o in t){const l=t[o];l!==qm&&(!n||!n(l))&&(a[o]=l,++s)}r.size=s,r.empty=0,r.object=t=a}};return e&&Object.keys(e).forEach(a=>{r.set(a,e[a])}),r}function g7(e,t,n,i,r,a){if(!n&&n!==0)return a;const s=+n;let o=e[0],l=Ke(e),f;l<o&&(f=o,o=l,l=f),f=Math.abs(t-o);const d=Math.abs(l-t);return f<d&&f<=s?i:d<=s?r:a}function ge(e,t,n){const i=e.prototype=Object.create(t.prototype);return Object.defineProperty(i,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),qe(i,n)}function Ef(e,t,n,i){let r=t[0],a=t[t.length-1],s;return r>a&&(s=r,r=a,a=s),n=n===void 0||n,i=i===void 0||i,(n?r<=e:r<e)&&(i?e<=a:e<a)}function tc(e){return typeof e=="boolean"}function nu(e){return Object.prototype.toString.call(e)==="[object Date]"}function p7(e){return e&&Pe(e[Symbol.iterator])}function at(e){return typeof e=="number"}function m$(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ee(e){return typeof e=="string"}function y$(e,t,n){e&&(e=t?ve(e).map(o=>o.replace(/\\(.)/g,"$1")):ve(e));const i=e&&e.length,r=n&&n.get||K9,a=o=>r(t?[o]:Ka(o));let s;if(!i)s=function(){return""};else if(i===1){const o=a(e[0]);s=function(l){return""+o(l)}}else{const o=e.map(a);s=function(l){let f=""+o[0](l),d=0;for(;++d<i;)f+="|"+o[d](l);return f}}return Ui(s,e,"key")}function m7(e,t){const n=e[0],i=Ke(e),r=+t;return r?r===1?i:n+r*(i-n):n}const mZ=1e4;function y7(e){e=+e||mZ;let t,n,i;const r=()=>{t={},n={},i=0},a=(s,o)=>(++i>e&&(n=t,t={},i=1),t[s]=o);return r(),{clear:r,has:s=>Se(t,s)||Se(n,s),get:s=>Se(t,s)?t[s]:Se(n,s)?a(s,n[s]):void 0,set:(s,o)=>Se(t,s)?t[s]=o:a(s,o)}}function v7(e,t,n,i){const r=t.length,a=n.length;if(!a)return t;if(!r)return n;const s=i||new t.constructor(r+a);let o=0,l=0,f=0;for(;o<r&&l<a;++f)s[f]=e(t[o],n[l])>0?n[l++]:t[o++];for(;o<r;++o,++f)s[f]=t[o];for(;l<a;++l,++f)s[f]=n[l];return s}function gg(e,t){let n="";for(;--t>=0;)n+=e;return n}function b7(e,t,n,i){const r=n||" ",a=e+"",s=t-a.length;return s<=0?a:i==="left"?gg(r,s)+a:i==="center"?gg(r,~~(s/2))+a+gg(r,Math.ceil(s/2)):a+gg(r,s)}function Dp(e){return e&&Ke(e)-e[0]||0}function he(e){return re(e)?"["+e.map(he)+"]":xe(e)||Ee(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function v$(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const yZ=e=>at(e)||nu(e)?e:Date.parse(e);function b$(e,t){return t=t||yZ,e==null||e===""?null:t(e)}function x$(e){return e==null||e===""?null:e+""}function ra(e){const t={},n=e.length;for(let i=0;i<n;++i)t[e[i]]=!0;return t}function x7(e,t,n,i){const r=i??"…",a=e+"",s=a.length,o=Math.max(0,t-r.length);return s<=t?a:n==="left"?r+a.slice(s-o):n==="center"?a.slice(0,Math.ceil(o/2))+r+a.slice(s-~~(o/2)):a.slice(0,o)+r}function Uo(e,t,n){if(e)if(t){const i=e.length;for(let r=0;r<i;++r){const a=t(e[r]);a&&n(a,r,e)}}else e.forEach(n)}var C6={},r_={},a_=34,Hh=10,s_=13;function S7(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function vZ(e,t){var n=S7(e);return function(i,r){return t(n(i),r,e)}}function $6(e){var t=Object.create(null),n=[];return e.forEach(function(i){for(var r in i)r in t||n.push(t[r]=r)}),n}function $i(e,t){var n=e+"",i=n.length;return i<t?new Array(t-i+1).join(0)+n:n}function bZ(e){return e<0?"-"+$i(-e,6):e>9999?"+"+$i(e,6):$i(e,4)}function xZ(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),i=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":bZ(e.getUTCFullYear())+"-"+$i(e.getUTCMonth()+1,2)+"-"+$i(e.getUTCDate(),2)+(r?"T"+$i(t,2)+":"+$i(n,2)+":"+$i(i,2)+"."+$i(r,3)+"Z":i?"T"+$i(t,2)+":"+$i(n,2)+":"+$i(i,2)+"Z":n||t?"T"+$i(t,2)+":"+$i(n,2)+"Z":"")}function SZ(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function i(h,p){var y,v,b=r(h,function(S,_){if(y)return y(S,_-1);v=S,y=p?vZ(S,p):S7(S)});return b.columns=v||[],b}function r(h,p){var y=[],v=h.length,b=0,S=0,_,w=v<=0,A=!1;h.charCodeAt(v-1)===Hh&&--v,h.charCodeAt(v-1)===s_&&--v;function C(){if(w)return r_;if(A)return A=!1,C6;var k,M=b,R;if(h.charCodeAt(M)===a_){for(;b++<v&&h.charCodeAt(b)!==a_||h.charCodeAt(++b)===a_;);return(k=b)>=v?w=!0:(R=h.charCodeAt(b++))===Hh?A=!0:R===s_&&(A=!0,h.charCodeAt(b)===Hh&&++b),h.slice(M+1,k-1).replace(/""/g,'"')}for(;b<v;){if((R=h.charCodeAt(k=b++))===Hh)A=!0;else if(R===s_)A=!0,h.charCodeAt(b)===Hh&&++b;else if(R!==n)continue;return h.slice(M,k)}return w=!0,h.slice(M,v)}for(;(_=C())!==r_;){for(var T=[];_!==C6&&_!==r_;)T.push(_),_=C();p&&(T=p(T,S++))==null||y.push(T)}return y}function a(h,p){return h.map(function(y){return p.map(function(v){return d(y[v])}).join(e)})}function s(h,p){return p==null&&(p=$6(h)),[p.map(d).join(e)].concat(a(h,p)).join(`
`)}function o(h,p){return p==null&&(p=$6(h)),a(h,p).join(`
`)}function l(h){return h.map(f).join(`
`)}function f(h){return h.map(d).join(e)}function d(h){return h==null?"":h instanceof Date?xZ(h):t.test(h+="")?'"'+h.replace(/"/g,'""')+'"':h}return{parse:i,parseRows:r,format:s,formatBody:o,formatRows:l,formatRow:f,formatValue:d}}function EZ(e){return e}function _Z(e){if(e==null)return EZ;var t,n,i=e.scale[0],r=e.scale[1],a=e.translate[0],s=e.translate[1];return function(o,l){l||(t=n=0);var f=2,d=o.length,h=new Array(d);for(h[0]=(t+=o[0])*i+a,h[1]=(n+=o[1])*r+s;f<d;)h[f]=o[f],++f;return h}}function wZ(e,t){for(var n,i=e.length,r=i-t;r<--i;)n=e[r],e[r++]=e[i],e[i]=n}function AZ(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return T6(e,n)})}:T6(e,t)}function T6(e,t){var n=t.id,i=t.bbox,r=t.properties==null?{}:t.properties,a=E7(e,t);return n==null&&i==null?{type:"Feature",properties:r,geometry:a}:i==null?{type:"Feature",id:n,properties:r,geometry:a}:{type:"Feature",id:n,bbox:i,properties:r,geometry:a}}function E7(e,t){var n=_Z(e.transform),i=e.arcs;function r(d,h){h.length&&h.pop();for(var p=i[d<0?~d:d],y=0,v=p.length;y<v;++y)h.push(n(p[y],y));d<0&&wZ(h,v)}function a(d){return n(d)}function s(d){for(var h=[],p=0,y=d.length;p<y;++p)r(d[p],h);return h.length<2&&h.push(h[0]),h}function o(d){for(var h=s(d);h.length<4;)h.push(h[0]);return h}function l(d){return d.map(o)}function f(d){var h=d.type,p;switch(h){case"GeometryCollection":return{type:h,geometries:d.geometries.map(f)};case"Point":p=a(d.coordinates);break;case"MultiPoint":p=d.coordinates.map(a);break;case"LineString":p=s(d.arcs);break;case"MultiLineString":p=d.arcs.map(s);break;case"Polygon":p=l(d.arcs);break;case"MultiPolygon":p=d.arcs.map(l);break;default:return null}return{type:h,coordinates:p}}return f(t)}function CZ(e,t){var n={},i={},r={},a=[],s=-1;t.forEach(function(f,d){var h=e.arcs[f<0?~f:f],p;h.length<3&&!h[1][0]&&!h[1][1]&&(p=t[++s],t[s]=f,t[d]=p)}),t.forEach(function(f){var d=o(f),h=d[0],p=d[1],y,v;if(y=r[h])if(delete r[y.end],y.push(f),y.end=p,v=i[p]){delete i[v.start];var b=v===y?y:y.concat(v);i[b.start=y.start]=r[b.end=v.end]=b}else i[y.start]=r[y.end]=y;else if(y=i[p])if(delete i[y.start],y.unshift(f),y.start=h,v=r[h]){delete r[v.end];var S=v===y?y:v.concat(y);i[S.start=v.start]=r[S.end=y.end]=S}else i[y.start]=r[y.end]=y;else y=[f],i[y.start=h]=r[y.end=p]=y});function o(f){var d=e.arcs[f<0?~f:f],h=d[0],p;return e.transform?(p=[0,0],d.forEach(function(y){p[0]+=y[0],p[1]+=y[1]})):p=d[d.length-1],f<0?[p,h]:[h,p]}function l(f,d){for(var h in f){var p=f[h];delete d[p.start],delete p.start,delete p.end,p.forEach(function(y){n[y<0?~y:y]=1}),a.push(p)}}return l(r,i),l(i,r),t.forEach(function(f){n[f<0?~f:f]||a.push([f])}),a}function $Z(e){return E7(e,TZ.apply(this,arguments))}function TZ(e,t,n){var i,r,a;if(arguments.length>1)i=MZ(e,t,n);else for(r=0,i=new Array(a=e.arcs.length);r<a;++r)i[r]=r;return{type:"MultiLineString",arcs:CZ(e,i)}}function MZ(e,t,n){var i=[],r=[],a;function s(h){var p=h<0?~h:h;(r[p]||(r[p]=[])).push({i:h,g:a})}function o(h){h.forEach(s)}function l(h){h.forEach(o)}function f(h){h.forEach(l)}function d(h){switch(a=h,h.type){case"GeometryCollection":h.geometries.forEach(d);break;case"LineString":o(h.arcs);break;case"MultiLineString":case"Polygon":l(h.arcs);break;case"MultiPolygon":f(h.arcs);break}}return d(t),r.forEach(n==null?function(h){i.push(h[0].i)}:function(h){n(h[0].g,h[h.length-1].g)&&i.push(h[0].i)}),i}function Ps(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function kZ(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function _d(e){let t,n,i;e.length!==2?(t=Ps,n=(o,l)=>Ps(e(o),l),i=(o,l)=>e(o)-l):(t=e===Ps||e===kZ?e:OZ,n=e,i=e);function r(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<0?f=h+1:d=h}while(f<d)}return f}function a(o,l,f=0,d=o.length){if(f<d){if(t(l,l)!==0)return d;do{const h=f+d>>>1;n(o[h],l)<=0?f=h+1:d=h}while(f<d)}return f}function s(o,l,f=0,d=o.length){const h=r(o,l,f,d-1);return h>f&&i(o[h-1],l)>-i(o[h],l)?h-1:h}return{left:r,center:s,right:a}}function OZ(){return 0}function _7(e){return e===null?NaN:+e}function*RZ(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)(i=t(i,++n,e))!=null&&(i=+i)>=i&&(yield i)}}const w7=_d(Ps),uu=w7.right,DZ=w7.left;_d(_7).center;function NZ(e,t){let n=0,i,r=0,a=0;if(t===void 0)for(let s of e)s!=null&&(s=+s)>=s&&(i=s-r,r+=i/++n,a+=i*(s-r));else{let s=-1;for(let o of e)(o=t(o,++s,e))!=null&&(o=+o)>=o&&(i=o-r,r+=i/++n,a+=i*(o-r))}if(n>1)return a/(n-1)}function zZ(e,t){const n=NZ(e,t);return n&&Math.sqrt(n)}class gi{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let i=0;for(let r=0;r<this._n&&r<32;r++){const a=n[r],s=t+a,o=Math.abs(t)<Math.abs(a)?t-(s-a):a-(s-t);o&&(n[i++]=o),t=s}return n[i]=t,this._n=i+1,this}valueOf(){const t=this._partials;let n=this._n,i,r,a,s=0;if(n>0){for(s=t[--n];n>0&&(i=s,r=t[--n],s=i+r,a=r-(s-i),!a););n>0&&(a<0&&t[n-1]<0||a>0&&t[n-1]>0)&&(r=a*2,i=s+r,r==i-s&&(s=i))}return s}}class M6 extends Map{constructor(t,n=$7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[i,r]of t)this.set(i,r)}get(t){return super.get(Pw(this,t))}has(t){return super.has(Pw(this,t))}set(t,n){return super.set(A7(this,t),n)}delete(t){return super.delete(C7(this,t))}}class ry extends Set{constructor(t,n=$7){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const i of t)this.add(i)}has(t){return super.has(Pw(this,t))}add(t){return super.add(A7(this,t))}delete(t){return super.delete(C7(this,t))}}function Pw({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):n}function A7({_intern:e,_key:t},n){const i=t(n);return e.has(i)?e.get(i):(e.set(i,n),n)}function C7({_intern:e,_key:t},n){const i=t(n);return e.has(i)&&(n=e.get(i),e.delete(i)),n}function $7(e){return e!==null&&typeof e=="object"?e.valueOf():e}function FZ(e,t){return Array.from(t,n=>e[n])}function LZ(e=Ps){if(e===Ps)return T7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const i=e(t,n);return i||i===0?i:(e(n,n)===0)-(e(t,t)===0)}}function T7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const BZ=Math.sqrt(50),UZ=Math.sqrt(10),qZ=Math.sqrt(2);function ay(e,t,n){const i=(t-e)/Math.max(0,n),r=Math.floor(Math.log10(i)),a=i/Math.pow(10,r),s=a>=BZ?10:a>=UZ?5:a>=qZ?2:1;let o,l,f;return r<0?(f=Math.pow(10,-r)/s,o=Math.round(e*f),l=Math.round(t*f),o/f<e&&++o,l/f>t&&--l,f=-f):(f=Math.pow(10,r)*s,o=Math.round(e/f),l=Math.round(t/f),o*f<e&&++o,l*f>t&&--l),l<o&&.5<=n&&n<2?ay(e,t,n*2):[o,l,f]}function Iw(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const i=t<e,[r,a,s]=i?ay(t,e,n):ay(e,t,n);if(!(a>=r))return[];const o=a-r+1,l=new Array(o);if(i)if(s<0)for(let f=0;f<o;++f)l[f]=(a-f)/-s;else for(let f=0;f<o;++f)l[f]=(a-f)*s;else if(s<0)for(let f=0;f<o;++f)l[f]=(r+f)/-s;else for(let f=0;f<o;++f)l[f]=(r+f)*s;return l}function jw(e,t,n){return t=+t,e=+e,n=+n,ay(e,t,n)[2]}function lu(e,t,n){t=+t,e=+e,n=+n;const i=t<e,r=i?jw(t,e,n):jw(e,t,n);return(i?-1:1)*(r<0?1/-r:r)}function wl(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n<i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n<r||n===void 0&&r>=r)&&(n=r)}return n}function Hw(e,t){let n;if(t===void 0)for(const i of e)i!=null&&(n>i||n===void 0&&i>=i)&&(n=i);else{let i=-1;for(let r of e)(r=t(r,++i,e))!=null&&(n>r||n===void 0&&r>=r)&&(n=r)}return n}function M7(e,t,n=0,i=1/0,r){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(e.length-1,i)),!(n<=t&&t<=i))return e;for(r=r===void 0?T7:LZ(r);i>n;){if(i-n>600){const l=i-n+1,f=t-n+1,d=Math.log(l),h=.5*Math.exp(2*d/3),p=.5*Math.sqrt(d*h*(l-h)/l)*(f-l/2<0?-1:1),y=Math.max(n,Math.floor(t-f*h/l+p)),v=Math.min(i,Math.floor(t+(l-f)*h/l+p));M7(e,t,y,v,r)}const a=e[t];let s=n,o=i;for(Gh(e,n,t),r(e[i],a)>0&&Gh(e,n,i);s<o;){for(Gh(e,s,o),++s,--o;r(e[s],a)<0;)++s;for(;r(e[o],a)>0;)--o}r(e[n],a)===0?Gh(e,n,o):(++o,Gh(e,o,i)),o<=t&&(n=o+1),t<=o&&(i=o-1)}return e}function Gh(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function Gw(e,t,n){if(e=Float64Array.from(RZ(e,n)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return Hw(e);if(t>=1)return wl(e);var i,r=(i-1)*t,a=Math.floor(r),s=wl(M7(e,a).subarray(0,a+1)),o=Hw(e.subarray(a+1));return s+(o-s)*(r-a)}}function k7(e,t,n=_7){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+n(e[0],0,e);if(t>=1)return+n(e[i-1],i-1,e);var i,r=(i-1)*t,a=Math.floor(r),s=+n(e[a],a,e),o=+n(e[a+1],a+1,e);return s+(o-s)*(r-a)}}function PZ(e,t){let n=0,i=0;if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(++n,i+=r);else{let r=-1;for(let a of e)(a=t(a,++r,e))!=null&&(a=+a)>=a&&(++n,i+=a)}if(n)return i/n}function O7(e,t){return Gw(e,.5,t)}function*IZ(e){for(const t of e)yield*t}function R7(e){return Array.from(IZ(e))}function tr(e,t,n){e=+e,t=+t,n=(r=arguments.length)<2?(t=e,e=0,1):r<3?1:+n;for(var i=-1,r=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(r);++i<r;)a[i]=e+i*n;return a}function D7(e,t){let n=0;for(let i of e)(i=+i)&&(n+=i);return n}function jZ(e,...t){e=new ry(e),t=t.map(HZ);e:for(const n of e)for(const i of t)if(!i.has(n)){e.delete(n);continue e}return e}function HZ(e){return e instanceof ry?e:new ry(e)}function GZ(...e){const t=new ry;for(const n of e)for(const i of n)t.add(i);return t}function YZ(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function sy(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,i=e.slice(0,n);return[i.length>1?i[0]+i.slice(2):i,+e.slice(n+1)]}function Bf(e){return e=sy(Math.abs(e)),e?e[1]:NaN}function XZ(e,t){return function(n,i){for(var r=n.length,a=[],s=0,o=e[0],l=0;r>0&&o>0&&(l+o+1>i&&(o=Math.max(1,i-l)),a.push(n.substring(r-=o,r+o)),!((l+=o+1)>i));)o=e[s=(s+1)%e.length];return a.reverse().join(t)}}function VZ(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var WZ=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dl(e){if(!(t=WZ.exec(e)))throw new Error("invalid format: "+e);var t;return new S$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dl.prototype=S$.prototype;function S$(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}S$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function QZ(e){e:for(var t=e.length,n=1,i=-1,r;n<t;++n)switch(e[n]){case".":i=r=n;break;case"0":i===0&&(i=n),r=n;break;default:if(!+e[n])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(r+1):e}var N7;function ZZ(e,t){var n=sy(e,t);if(!n)return e+"";var i=n[0],r=n[1],a=r-(N7=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=i.length;return a===s?i:a>s?i+new Array(a-s+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+sy(e,Math.max(0,t+a-1))[0]}function k6(e,t){var n=sy(e,t);if(!n)return e+"";var i=n[0],r=n[1];return r<0?"0."+new Array(-r).join("0")+i:i.length>r+1?i.slice(0,r+1)+"."+i.slice(r+1):i+new Array(r-i.length+2).join("0")}const O6={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:YZ,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>k6(e*100,t),r:k6,s:ZZ,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function R6(e){return e}var D6=Array.prototype.map,N6=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function z7(e){var t=e.grouping===void 0||e.thousands===void 0?R6:XZ(D6.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?R6:VZ(D6.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function f(h){h=Dl(h);var p=h.fill,y=h.align,v=h.sign,b=h.symbol,S=h.zero,_=h.width,w=h.comma,A=h.precision,C=h.trim,T=h.type;T==="n"?(w=!0,T="g"):O6[T]||(A===void 0&&(A=12),C=!0,T="g"),(S||p==="0"&&y==="=")&&(S=!0,p="0",y="=");var k=b==="$"?n:b==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",M=b==="$"?i:/[%p]/.test(T)?s:"",R=O6[T],z=/[defgprs%]/.test(T);A=A===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,A)):Math.max(0,Math.min(20,A));function U(L){var G=k,j=M,q,F,D;if(T==="c")j=R(L)+j,L="";else{L=+L;var P=L<0||1/L<0;if(L=isNaN(L)?l:R(Math.abs(L),A),C&&(L=QZ(L)),P&&+L==0&&v!=="+"&&(P=!1),G=(P?v==="("?v:o:v==="-"||v==="("?"":v)+G,j=(T==="s"?N6[8+N7/3]:"")+j+(P&&v==="("?")":""),z){for(q=-1,F=L.length;++q<F;)if(D=L.charCodeAt(q),48>D||D>57){j=(D===46?r+L.slice(q+1):L.slice(q))+j,L=L.slice(0,q);break}}}w&&!S&&(L=t(L,1/0));var X=G.length+L.length+j.length,Z=X<_?new Array(_-X+1).join(p):"";switch(w&&S&&(L=t(Z+L,Z.length?_-j.length:1/0),Z=""),y){case"<":L=G+L+j+Z;break;case"=":L=G+Z+L+j;break;case"^":L=Z.slice(0,X=Z.length>>1)+G+L+j+Z.slice(X);break;default:L=Z+G+L+j;break}return a(L)}return U.toString=function(){return h+""},U}function d(h,p){var y=f((h=Dl(h),h.type="f",h)),v=Math.max(-8,Math.min(8,Math.floor(Bf(p)/3)))*3,b=Math.pow(10,-v),S=N6[8+v/3];return function(_){return y(b*_)+S}}return{format:f,formatPrefix:d}}var Pm,Hv,E$;KZ({thousands:",",grouping:[3],currency:["$",""]});function KZ(e){return Pm=z7(e),Hv=Pm.format,E$=Pm.formatPrefix,Pm}function F7(e){return Math.max(0,-Bf(Math.abs(e)))}function L7(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bf(t)/3)))*3-Bf(Math.abs(e)))}function B7(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Bf(t)-Bf(e))+1}const o_=new Date,u_=new Date;function fn(e,t,n,i){function r(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return r.floor=a=>(e(a=new Date(+a)),a),r.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),r.round=a=>{const s=r(a),o=r.ceil(a);return a-s<o-a?s:o},r.offset=(a,s)=>(t(a=new Date(+a),s==null?1:Math.floor(s)),a),r.range=(a,s,o)=>{const l=[];if(a=r.ceil(a),o=o==null?1:Math.floor(o),!(a<s)||!(o>0))return l;let f;do l.push(f=new Date(+a)),t(a,o),e(a);while(f<a&&a<s);return l},r.filter=a=>fn(s=>{if(s>=s)for(;e(s),!a(s);)s.setTime(s-1)},(s,o)=>{if(s>=s)if(o<0)for(;++o<=0;)for(;t(s,-1),!a(s););else for(;--o>=0;)for(;t(s,1),!a(s););}),n&&(r.count=(a,s)=>(o_.setTime(+a),u_.setTime(+s),e(o_),e(u_),Math.floor(n(o_,u_))),r.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?r.filter(i?s=>i(s)%a===0:s=>r.count(0,s)%a===0):r)),r}const Uf=fn(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Uf.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?fn(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Uf);Uf.range;const zs=1e3,wr=zs*60,Fs=wr*60,Ws=Fs*24,_$=Ws*7,z6=Ws*30,l_=Ws*365,Ls=fn(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*zs)},(e,t)=>(t-e)/zs,e=>e.getUTCSeconds());Ls.range;const Gv=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getMinutes());Gv.range;const Yv=fn(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCMinutes());Yv.range;const Xv=fn(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*zs-e.getMinutes()*wr)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getHours());Xv.range;const Vv=fn(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Fs)},(e,t)=>(t-e)/Fs,e=>e.getUTCHours());Vv.range;const Is=fn(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wr)/Ws,e=>e.getDate()-1);Is.range;const iu=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>e.getUTCDate()-1);iu.range;const U7=fn(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ws,e=>Math.floor(e/Ws));U7.range;function nc(e){return fn(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wr)/_$)}const wd=nc(0),oy=nc(1),JZ=nc(2),eK=nc(3),qf=nc(4),tK=nc(5),nK=nc(6);wd.range;oy.range;JZ.range;eK.range;qf.range;tK.range;nK.range;function ic(e){return fn(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/_$)}const Ad=ic(0),uy=ic(1),iK=ic(2),rK=ic(3),Pf=ic(4),aK=ic(5),sK=ic(6);Ad.range;uy.range;iK.range;rK.range;Pf.range;aK.range;sK.range;const Jg=fn(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Jg.range;const ep=fn(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());ep.range;const Ha=fn(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Ha.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Ha.range;const Ga=fn(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ga.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:fn(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ga.range;function q7(e,t,n,i,r,a){const s=[[Ls,1,zs],[Ls,5,5*zs],[Ls,15,15*zs],[Ls,30,30*zs],[a,1,wr],[a,5,5*wr],[a,15,15*wr],[a,30,30*wr],[r,1,Fs],[r,3,3*Fs],[r,6,6*Fs],[r,12,12*Fs],[i,1,Ws],[i,2,2*Ws],[n,1,_$],[t,1,z6],[t,3,3*z6],[e,1,l_]];function o(f,d,h){const p=d<f;p&&([f,d]=[d,f]);const y=h&&typeof h.range=="function"?h:l(f,d,h),v=y?y.range(f,+d+1):[];return p?v.reverse():v}function l(f,d,h){const p=Math.abs(d-f)/h,y=_d(([,,S])=>S).right(s,p);if(y===s.length)return e.every(lu(f/l_,d/l_,h));if(y===0)return Uf.every(Math.max(lu(f,d,h),1));const[v,b]=s[p/s[y-1][2]<s[y][2]/p?y-1:y];return v.every(b)}return[o,l]}const[oK,uK]=q7(Ga,ep,Ad,U7,Vv,Yv),[lK,cK]=q7(Ha,Jg,wd,Is,Xv,Gv),Ln="year",Di="quarter",Kn="month",un="week",Ni="date",Vn="day",Ya="dayofyear",or="hours",ur="minutes",Rr="seconds",aa="milliseconds",w$=[Ln,Di,Kn,un,Ni,Vn,Ya,or,ur,Rr,aa],c_=w$.reduce((e,t,n)=>(e[t]=1+n,e),{});function A$(e){const t=ve(e).slice(),n={};return t.length||te("Missing time unit."),t.forEach(r=>{Se(c_,r)?n[r]=1:te(`Invalid time unit: ${r}.`)}),(n[un]||n[Vn]?1:0)+(n[Di]||n[Kn]||n[Ni]?1:0)+(n[Ya]?1:0)>1&&te(`Incompatible time units: ${e}`),t.sort((r,a)=>c_[r]-c_[a]),t}const fK={[Ln]:"%Y ",[Di]:"Q%q ",[Kn]:"%b ",[Ni]:"%d ",[un]:"W%U ",[Vn]:"%a ",[Ya]:"%j ",[or]:"%H:00",[ur]:"00:%M",[Rr]:":%S",[aa]:".%L",[`${Ln}-${Kn}`]:"%Y-%m ",[`${Ln}-${Kn}-${Ni}`]:"%Y-%m-%d ",[`${or}-${ur}`]:"%H:%M"};function P7(e,t){const n=qe({},fK,t),i=A$(e),r=i.length;let a="",s=0,o,l;for(s=0;s<r;)for(o=i.length;o>s;--o)if(l=i.slice(s,o).join("-"),n[l]!=null){a+=n[l],s=o;break}return a.trim()}const gl=new Date;function C$(e){return gl.setFullYear(e),gl.setMonth(0),gl.setDate(1),gl.setHours(0,0,0,0),gl}function I7(e){return H7(new Date(e))}function j7(e){return Yw(new Date(e))}function H7(e){return Is.count(C$(e.getFullYear())-1,e)}function Yw(e){return wd.count(C$(e.getFullYear())-1,e)}function Xw(e){return C$(e).getDay()}function dK(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(-1,t,n,i,r,a,s);return o.setFullYear(e),o}return new Date(e,t,n,i,r,a,s)}function G7(e){return X7(new Date(e))}function Y7(e){return Vw(new Date(e))}function X7(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return iu.count(t-1,e)}function Vw(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return Ad.count(t-1,e)}function Ww(e){return gl.setTime(Date.UTC(e,0,1)),gl.getUTCDay()}function hK(e,t,n,i,r,a,s){if(0<=e&&e<100){const o=new Date(Date.UTC(-1,t,n,i,r,a,s));return o.setUTCFullYear(n.y),o}return new Date(Date.UTC(e,t,n,i,r,a,s))}function V7(e,t,n,i,r){const a=t||1,s=Ke(e),o=(_,w,A)=>(A=A||_,gK(n[A],i[A],_===s&&a,w)),l=new Date,f=ra(e),d=f[Ln]?o(Ln):ni(2012),h=f[Kn]?o(Kn):f[Di]?o(Di):Ho,p=f[un]&&f[Vn]?o(Vn,1,un+Vn):f[un]?o(un,1):f[Vn]?o(Vn,1):f[Ni]?o(Ni,1):f[Ya]?o(Ya,1):xd,y=f[or]?o(or):Ho,v=f[ur]?o(ur):Ho,b=f[Rr]?o(Rr):Ho,S=f[aa]?o(aa):Ho;return function(_){l.setTime(+_);const w=d(l);return r(w,h(l),p(l,w),y(l),v(l),b(l),S(l))}}function gK(e,t,n,i){const r=n<=1?e:i?(a,s)=>i+n*Math.floor((e(a,s)-i)/n):(a,s)=>n*Math.floor(e(a,s)/n);return t?(a,s)=>t(r(a,s),s):r}function If(e,t,n){return t+e*7-(n+6)%7}const pK={[Ln]:e=>e.getFullYear(),[Di]:e=>Math.floor(e.getMonth()/3),[Kn]:e=>e.getMonth(),[Ni]:e=>e.getDate(),[or]:e=>e.getHours(),[ur]:e=>e.getMinutes(),[Rr]:e=>e.getSeconds(),[aa]:e=>e.getMilliseconds(),[Ya]:e=>H7(e),[un]:e=>Yw(e),[un+Vn]:(e,t)=>If(Yw(e),e.getDay(),Xw(t)),[Vn]:(e,t)=>If(1,e.getDay(),Xw(t))},mK={[Di]:e=>3*e,[un]:(e,t)=>If(e,0,Xw(t))};function W7(e,t){return V7(e,t||1,pK,mK,dK)}const yK={[Ln]:e=>e.getUTCFullYear(),[Di]:e=>Math.floor(e.getUTCMonth()/3),[Kn]:e=>e.getUTCMonth(),[Ni]:e=>e.getUTCDate(),[or]:e=>e.getUTCHours(),[ur]:e=>e.getUTCMinutes(),[Rr]:e=>e.getUTCSeconds(),[aa]:e=>e.getUTCMilliseconds(),[Ya]:e=>X7(e),[un]:e=>Vw(e),[Vn]:(e,t)=>If(1,e.getUTCDay(),Ww(t)),[un+Vn]:(e,t)=>If(Vw(e),e.getUTCDay(),Ww(t))},vK={[Di]:e=>3*e,[un]:(e,t)=>If(e,0,Ww(t))};function Q7(e,t){return V7(e,t||1,yK,vK,hK)}const bK={[Ln]:Ha,[Di]:Jg.every(3),[Kn]:Jg,[un]:wd,[Ni]:Is,[Vn]:Is,[Ya]:Is,[or]:Xv,[ur]:Gv,[Rr]:Ls,[aa]:Uf},xK={[Ln]:Ga,[Di]:ep.every(3),[Kn]:ep,[un]:Ad,[Ni]:iu,[Vn]:iu,[Ya]:iu,[or]:Vv,[ur]:Yv,[Rr]:Ls,[aa]:Uf};function Cd(e){return bK[e]}function $d(e){return xK[e]}function Z7(e,t,n){return e?e.offset(t,n):void 0}function K7(e,t,n){return Z7(Cd(e),t,n)}function J7(e,t,n){return Z7($d(e),t,n)}function eL(e,t,n,i){return e?e.range(t,n,i):void 0}function tL(e,t,n,i){return eL(Cd(e),t,n,i)}function nL(e,t,n,i){return eL($d(e),t,n,i)}const pg=1e3,mg=pg*60,yg=mg*60,Wv=yg*24,SK=Wv*7,F6=Wv*30,Qw=Wv*365,iL=[Ln,Kn,Ni,or,ur,Rr,aa],vg=iL.slice(0,-1),bg=vg.slice(0,-1),xg=bg.slice(0,-1),EK=xg.slice(0,-1),_K=[Ln,un],L6=[Ln,Kn],rL=[Ln],Yh=[[vg,1,pg],[vg,5,5*pg],[vg,15,15*pg],[vg,30,30*pg],[bg,1,mg],[bg,5,5*mg],[bg,15,15*mg],[bg,30,30*mg],[xg,1,yg],[xg,3,3*yg],[xg,6,6*yg],[xg,12,12*yg],[EK,1,Wv],[_K,1,SK],[L6,1,F6],[L6,3,3*F6],[rL,1,Qw]];function aL(e){const t=e.extent,n=e.maxbins||40,i=Math.abs(Dp(t))/n;let r=_d(o=>o[2]).right(Yh,i),a,s;return r===Yh.length?(a=rL,s=lu(t[0]/Qw,t[1]/Qw,n)):r?(r=Yh[i/Yh[r-1][2]<Yh[r][2]/i?r-1:r],a=r[0],s=r[1]):(a=iL,s=Math.max(lu(t[0],t[1],n),1)),{units:a,step:s}}function f_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function d_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Xh(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function sL(e){var t=e.dateTime,n=e.date,i=e.time,r=e.periods,a=e.days,s=e.shortDays,o=e.months,l=e.shortMonths,f=Vh(r),d=Wh(r),h=Vh(a),p=Wh(a),y=Vh(s),v=Wh(s),b=Vh(o),S=Wh(o),_=Vh(l),w=Wh(l),A={a:P,A:X,b:Z,B:N,c:null,d:j6,e:j6,f:YK,g:nJ,G:rJ,H:jK,I:HK,j:GK,L:oL,m:XK,M:VK,p:W,q:ne,Q:Y6,s:X6,S:WK,u:QK,U:ZK,V:KK,w:JK,W:eJ,x:null,X:null,y:tJ,Y:iJ,Z:aJ,"%":G6},C={a:ae,A:me,b:be,B:Ae,c:null,d:H6,e:H6,f:lJ,g:bJ,G:SJ,H:sJ,I:oJ,j:uJ,L:lL,m:cJ,M:fJ,p:jt,q:tt,Q:Y6,s:X6,S:dJ,u:hJ,U:gJ,V:pJ,w:mJ,W:yJ,x:null,X:null,y:vJ,Y:xJ,Z:EJ,"%":G6},T={a:U,A:L,b:G,B:j,c:q,d:P6,e:P6,f:UK,g:q6,G:U6,H:I6,I:I6,j:zK,L:BK,m:NK,M:FK,p:z,q:DK,Q:PK,s:IK,S:LK,u:TK,U:MK,V:kK,w:$K,W:OK,x:F,X:D,y:q6,Y:U6,Z:RK,"%":qK};A.x=k(n,A),A.X=k(i,A),A.c=k(t,A),C.x=k(n,C),C.X=k(i,C),C.c=k(t,C);function k(ye,Le){return function(Ue){var ce=[],Ht=-1,nt=0,Zt=ye.length,hn,Kt,w0;for(Ue instanceof Date||(Ue=new Date(+Ue));++Ht<Zt;)ye.charCodeAt(Ht)===37&&(ce.push(ye.slice(nt,Ht)),(Kt=B6[hn=ye.charAt(++Ht)])!=null?hn=ye.charAt(++Ht):Kt=hn==="e"?" ":"0",(w0=Le[hn])&&(hn=w0(Ue,Kt)),ce.push(hn),nt=Ht+1);return ce.push(ye.slice(nt,Ht)),ce.join("")}}function M(ye,Le){return function(Ue){var ce=Xh(1900,void 0,1),Ht=R(ce,ye,Ue+="",0),nt,Zt;if(Ht!=Ue.length)return null;if("Q"in ce)return new Date(ce.Q);if("s"in ce)return new Date(ce.s*1e3+("L"in ce?ce.L:0));if(Le&&!("Z"in ce)&&(ce.Z=0),"p"in ce&&(ce.H=ce.H%12+ce.p*12),ce.m===void 0&&(ce.m="q"in ce?ce.q:0),"V"in ce){if(ce.V<1||ce.V>53)return null;"w"in ce||(ce.w=1),"Z"in ce?(nt=d_(Xh(ce.y,0,1)),Zt=nt.getUTCDay(),nt=Zt>4||Zt===0?uy.ceil(nt):uy(nt),nt=iu.offset(nt,(ce.V-1)*7),ce.y=nt.getUTCFullYear(),ce.m=nt.getUTCMonth(),ce.d=nt.getUTCDate()+(ce.w+6)%7):(nt=f_(Xh(ce.y,0,1)),Zt=nt.getDay(),nt=Zt>4||Zt===0?oy.ceil(nt):oy(nt),nt=Is.offset(nt,(ce.V-1)*7),ce.y=nt.getFullYear(),ce.m=nt.getMonth(),ce.d=nt.getDate()+(ce.w+6)%7)}else("W"in ce||"U"in ce)&&("w"in ce||(ce.w="u"in ce?ce.u%7:"W"in ce?1:0),Zt="Z"in ce?d_(Xh(ce.y,0,1)).getUTCDay():f_(Xh(ce.y,0,1)).getDay(),ce.m=0,ce.d="W"in ce?(ce.w+6)%7+ce.W*7-(Zt+5)%7:ce.w+ce.U*7-(Zt+6)%7);return"Z"in ce?(ce.H+=ce.Z/100|0,ce.M+=ce.Z%100,d_(ce)):f_(ce)}}function R(ye,Le,Ue,ce){for(var Ht=0,nt=Le.length,Zt=Ue.length,hn,Kt;Ht<nt;){if(ce>=Zt)return-1;if(hn=Le.charCodeAt(Ht++),hn===37){if(hn=Le.charAt(Ht++),Kt=T[hn in B6?Le.charAt(Ht++):hn],!Kt||(ce=Kt(ye,Ue,ce))<0)return-1}else if(hn!=Ue.charCodeAt(ce++))return-1}return ce}function z(ye,Le,Ue){var ce=f.exec(Le.slice(Ue));return ce?(ye.p=d.get(ce[0].toLowerCase()),Ue+ce[0].length):-1}function U(ye,Le,Ue){var ce=y.exec(Le.slice(Ue));return ce?(ye.w=v.get(ce[0].toLowerCase()),Ue+ce[0].length):-1}function L(ye,Le,Ue){var ce=h.exec(Le.slice(Ue));return ce?(ye.w=p.get(ce[0].toLowerCase()),Ue+ce[0].length):-1}function G(ye,Le,Ue){var ce=_.exec(Le.slice(Ue));return ce?(ye.m=w.get(ce[0].toLowerCase()),Ue+ce[0].length):-1}function j(ye,Le,Ue){var ce=b.exec(Le.slice(Ue));return ce?(ye.m=S.get(ce[0].toLowerCase()),Ue+ce[0].length):-1}function q(ye,Le,Ue){return R(ye,t,Le,Ue)}function F(ye,Le,Ue){return R(ye,n,Le,Ue)}function D(ye,Le,Ue){return R(ye,i,Le,Ue)}function P(ye){return s[ye.getDay()]}function X(ye){return a[ye.getDay()]}function Z(ye){return l[ye.getMonth()]}function N(ye){return o[ye.getMonth()]}function W(ye){return r[+(ye.getHours()>=12)]}function ne(ye){return 1+~~(ye.getMonth()/3)}function ae(ye){return s[ye.getUTCDay()]}function me(ye){return a[ye.getUTCDay()]}function be(ye){return l[ye.getUTCMonth()]}function Ae(ye){return o[ye.getUTCMonth()]}function jt(ye){return r[+(ye.getUTCHours()>=12)]}function tt(ye){return 1+~~(ye.getUTCMonth()/3)}return{format:function(ye){var Le=k(ye+="",A);return Le.toString=function(){return ye},Le},parse:function(ye){var Le=M(ye+="",!1);return Le.toString=function(){return ye},Le},utcFormat:function(ye){var Le=k(ye+="",C);return Le.toString=function(){return ye},Le},utcParse:function(ye){var Le=M(ye+="",!0);return Le.toString=function(){return ye},Le}}}var B6={"-":"",_:" ",0:"0"},Cn=/^\s*\d+/,wK=/^%/,AK=/[\\^$*+?|[\]().{}]/g;function st(e,t,n){var i=e<0?"-":"",r=(i?-e:e)+"",a=r.length;return i+(a<n?new Array(n-a+1).join(t)+r:r)}function CK(e){return e.replace(AK,"\\$&")}function Vh(e){return new RegExp("^(?:"+e.map(CK).join("|")+")","i")}function Wh(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function $K(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.w=+i[0],n+i[0].length):-1}function TK(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.u=+i[0],n+i[0].length):-1}function MK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.U=+i[0],n+i[0].length):-1}function kK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.V=+i[0],n+i[0].length):-1}function OK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.W=+i[0],n+i[0].length):-1}function U6(e,t,n){var i=Cn.exec(t.slice(n,n+4));return i?(e.y=+i[0],n+i[0].length):-1}function q6(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),n+i[0].length):-1}function RK(e,t,n){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),n+i[0].length):-1}function DK(e,t,n){var i=Cn.exec(t.slice(n,n+1));return i?(e.q=i[0]*3-3,n+i[0].length):-1}function NK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.m=i[0]-1,n+i[0].length):-1}function P6(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.d=+i[0],n+i[0].length):-1}function zK(e,t,n){var i=Cn.exec(t.slice(n,n+3));return i?(e.m=0,e.d=+i[0],n+i[0].length):-1}function I6(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.H=+i[0],n+i[0].length):-1}function FK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.M=+i[0],n+i[0].length):-1}function LK(e,t,n){var i=Cn.exec(t.slice(n,n+2));return i?(e.S=+i[0],n+i[0].length):-1}function BK(e,t,n){var i=Cn.exec(t.slice(n,n+3));return i?(e.L=+i[0],n+i[0].length):-1}function UK(e,t,n){var i=Cn.exec(t.slice(n,n+6));return i?(e.L=Math.floor(i[0]/1e3),n+i[0].length):-1}function qK(e,t,n){var i=wK.exec(t.slice(n,n+1));return i?n+i[0].length:-1}function PK(e,t,n){var i=Cn.exec(t.slice(n));return i?(e.Q=+i[0],n+i[0].length):-1}function IK(e,t,n){var i=Cn.exec(t.slice(n));return i?(e.s=+i[0],n+i[0].length):-1}function j6(e,t){return st(e.getDate(),t,2)}function jK(e,t){return st(e.getHours(),t,2)}function HK(e,t){return st(e.getHours()%12||12,t,2)}function GK(e,t){return st(1+Is.count(Ha(e),e),t,3)}function oL(e,t){return st(e.getMilliseconds(),t,3)}function YK(e,t){return oL(e,t)+"000"}function XK(e,t){return st(e.getMonth()+1,t,2)}function VK(e,t){return st(e.getMinutes(),t,2)}function WK(e,t){return st(e.getSeconds(),t,2)}function QK(e){var t=e.getDay();return t===0?7:t}function ZK(e,t){return st(wd.count(Ha(e)-1,e),t,2)}function uL(e){var t=e.getDay();return t>=4||t===0?qf(e):qf.ceil(e)}function KK(e,t){return e=uL(e),st(qf.count(Ha(e),e)+(Ha(e).getDay()===4),t,2)}function JK(e){return e.getDay()}function eJ(e,t){return st(oy.count(Ha(e)-1,e),t,2)}function tJ(e,t){return st(e.getFullYear()%100,t,2)}function nJ(e,t){return e=uL(e),st(e.getFullYear()%100,t,2)}function iJ(e,t){return st(e.getFullYear()%1e4,t,4)}function rJ(e,t){var n=e.getDay();return e=n>=4||n===0?qf(e):qf.ceil(e),st(e.getFullYear()%1e4,t,4)}function aJ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+st(t/60|0,"0",2)+st(t%60,"0",2)}function H6(e,t){return st(e.getUTCDate(),t,2)}function sJ(e,t){return st(e.getUTCHours(),t,2)}function oJ(e,t){return st(e.getUTCHours()%12||12,t,2)}function uJ(e,t){return st(1+iu.count(Ga(e),e),t,3)}function lL(e,t){return st(e.getUTCMilliseconds(),t,3)}function lJ(e,t){return lL(e,t)+"000"}function cJ(e,t){return st(e.getUTCMonth()+1,t,2)}function fJ(e,t){return st(e.getUTCMinutes(),t,2)}function dJ(e,t){return st(e.getUTCSeconds(),t,2)}function hJ(e){var t=e.getUTCDay();return t===0?7:t}function gJ(e,t){return st(Ad.count(Ga(e)-1,e),t,2)}function cL(e){var t=e.getUTCDay();return t>=4||t===0?Pf(e):Pf.ceil(e)}function pJ(e,t){return e=cL(e),st(Pf.count(Ga(e),e)+(Ga(e).getUTCDay()===4),t,2)}function mJ(e){return e.getUTCDay()}function yJ(e,t){return st(uy.count(Ga(e)-1,e),t,2)}function vJ(e,t){return st(e.getUTCFullYear()%100,t,2)}function bJ(e,t){return e=cL(e),st(e.getUTCFullYear()%100,t,2)}function xJ(e,t){return st(e.getUTCFullYear()%1e4,t,4)}function SJ(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Pf(e):Pf.ceil(e),st(e.getUTCFullYear()%1e4,t,4)}function EJ(){return"+0000"}function G6(){return"%"}function Y6(e){return+e}function X6(e){return Math.floor(+e/1e3)}var sf,$$,fL,T$,dL;_J({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _J(e){return sf=sL(e),$$=sf.format,fL=sf.parse,T$=sf.utcFormat,dL=sf.utcParse,sf}function Sg(e){const t={};return n=>t[n]||(t[n]=e(n))}function wJ(e,t){return n=>{const i=e(n),r=i.indexOf(t);if(r<0)return i;let a=AJ(i,r);const s=a<i.length?i.slice(a):"";for(;--a>r;)if(i[a]!=="0"){++a;break}return i.slice(0,a)+s}}function AJ(e,t){let n=e.lastIndexOf("e"),i;if(n>0)return n;for(n=e.length;--n>t;)if(i=e.charCodeAt(n),i>=48&&i<=57)return n+1}function hL(e){const t=Sg(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(i){const r=Dl(i||",");if(r.precision==null){switch(r.precision=12,r.type){case"%":r.precision-=2;break;case"e":r.precision-=1;break}return wJ(t(r),t(".1f")(1)[1])}else return t(r)},formatSpan(i,r,a,s){s=Dl(s??",f");const o=lu(i,r,a),l=Math.max(Math.abs(i),Math.abs(r));let f;if(s.precision==null)switch(s.type){case"s":return isNaN(f=L7(o,l))||(s.precision=f),n(s,l);case"":case"e":case"g":case"p":case"r":{isNaN(f=B7(o,l))||(s.precision=f-(s.type==="e"));break}case"f":case"%":{isNaN(f=F7(o))||(s.precision=f-(s.type==="%")*2);break}}return t(s)}}}let Zw;gL();function gL(){return Zw=hL({format:Hv,formatPrefix:E$})}function pL(e){return hL(z7(e))}function ly(e){return arguments.length?Zw=pL(e):Zw}function V6(e,t,n){n=n||{},xe(n)||te(`Invalid time multi-format specifier: ${n}`);const i=t(Rr),r=t(ur),a=t(or),s=t(Ni),o=t(un),l=t(Kn),f=t(Di),d=t(Ln),h=e(n[aa]||".%L"),p=e(n[Rr]||":%S"),y=e(n[ur]||"%I:%M"),v=e(n[or]||"%I %p"),b=e(n[Ni]||n[Vn]||"%a %d"),S=e(n[un]||"%b %d"),_=e(n[Kn]||"%B"),w=e(n[Di]||"%B"),A=e(n[Ln]||"%Y");return C=>(i(C)<C?h:r(C)<C?p:a(C)<C?y:s(C)<C?v:l(C)<C?o(C)<C?b:S:d(C)<C?f(C)<C?_:w:A)(C)}function mL(e){const t=Sg(e.format),n=Sg(e.utcFormat);return{timeFormat:i=>Ee(i)?t(i):V6(t,Cd,i),utcFormat:i=>Ee(i)?n(i):V6(n,$d,i),timeParse:Sg(e.parse),utcParse:Sg(e.utcParse)}}let Kw;yL();function yL(){return Kw=mL({format:$$,parse:fL,utcFormat:T$,utcParse:dL})}function vL(e){return mL(sL(e))}function tp(e){return arguments.length?Kw=vL(e):Kw}const Jw=(e,t)=>qe({},e,t);function bL(e,t){const n=e?pL(e):ly(),i=t?vL(t):tp();return Jw(n,i)}function M$(e,t){const n=arguments.length;return n&&n!==2&&te("defaultLocale expects either zero or two arguments."),n?Jw(ly(e),tp(t)):Jw(ly(),tp())}function CJ(){return gL(),yL(),M$()}const $J=/^(data:|([A-Za-z]+:)?\/\/)/,TJ=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,MJ=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,W6="file://";function kJ(e,t){return n=>({options:n||{},sanitize:RJ,load:OJ,fileAccess:!1,file:DJ(),http:zJ(e)})}async function OJ(e,t){const n=await this.sanitize(e,t),i=n.href;return n.localFile?this.file(i):this.http(i,t)}async function RJ(e,t){t=qe({},this.options,t);const n=this.fileAccess,i={href:null};let r,a,s;const o=TJ.test(e.replace(MJ,""));(e==null||typeof e!="string"||!o)&&te("Sanitize failure, invalid URI: "+he(e));const l=$J.test(e);return(s=t.baseURL)&&!l&&(!e.startsWith("/")&&!s.endsWith("/")&&(e="/"+e),e=s+e),a=(r=e.startsWith(W6))||t.mode==="file"||t.mode!=="http"&&!l&&n,r?e=e.slice(W6.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),a=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(i,"localFile",{value:!!a}),i.href=e,t.target&&(i.target=t.target+""),t.rel&&(i.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(i.crossOrigin=t.crossOrigin+""),i}function DJ(e){return NJ}async function NJ(){te("No file system access.")}function zJ(e){return e?async function(t,n){const i=qe({},this.options.http,n),r=n&&n.response,a=await e(t,i);return a.ok?Pe(a[r])?a[r]():a.text():te(a.status+""+a.statusText)}:FJ}async function FJ(){te("No HTTP fetch method available.")}const LJ=e=>e!=null&&e===e,BJ=e=>e==="true"||e==="false"||e===!0||e===!1,UJ=e=>!Number.isNaN(Date.parse(e)),xL=e=>!Number.isNaN(+e)&&!(e instanceof Date),qJ=e=>xL(e)&&Number.isInteger(+e),eA={boolean:v$,integer:Wn,number:Wn,date:b$,string:x$,unknown:ti},Im=[BJ,qJ,xL,UJ],PJ=["boolean","integer","number","date"];function SL(e,t){if(!e||!e.length)return"unknown";const n=e.length,i=Im.length,r=Im.map((a,s)=>s+1);for(let a=0,s=0,o,l;a<n;++a)for(l=t?e[a][t]:e[a],o=0;o<i;++o)if(r[o]&&LJ(l)&&!Im[o](l)&&(r[o]=0,++s,s===Im.length))return"string";return PJ[r.reduce((a,s)=>a===0?s:a,0)-1]}function EL(e,t){return t.reduce((n,i)=>(n[i]=SL(e,i),n),{})}function Q6(e){const t=function(n,i){const r={delimiter:e};return k$(n,i?qe(i,r):r)};return t.responseType="text",t}function k$(e,t){return t.header&&(e=t.header.map(he).join(t.delimiter)+`
`+e),SZ(t.delimiter).parse(e+"")}k$.responseType="text";function IJ(e){return typeof Buffer=="function"&&Pe(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function O$(e,t){const n=t&&t.property?kr(t.property):ti;return xe(e)&&!IJ(e)?jJ(n(e),t):n(JSON.parse(e))}O$.responseType="json";function jJ(e,t){return!re(e)&&p7(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const HJ={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function _L(e,t){let n,i,r,a;return e=O$(e,t),t&&t.feature?(n=AZ,r=t.feature):t&&t.mesh?(n=$Z,r=t.mesh,a=HJ[t.filter]):te("Missing TopoJSON feature or mesh parameter."),i=(i=e.objects[r])?n(e,i,a):te("Invalid TopoJSON object: "+r),i&&i.features||[i]}_L.responseType="json";const $1={dsv:k$,csv:Q6(","),tsv:Q6("	"),json:O$,topojson:_L};function R$(e,t){return arguments.length>1?($1[e]=t,this):Se($1,e)?$1[e]:null}function wL(e){const t=R$(e);return t&&t.responseType||"text"}function AL(e,t,n,i){t=t||{};const r=R$(t.type||"json");return r||te("Unknown data format type: "+t.type),e=r(e,t),t.parse&&GJ(e,t.parse,n,i),Se(e,"columns")&&delete e.columns,e}function GJ(e,t,n,i){if(!e.length)return;const r=tp();n=n||r.timeParse,i=i||r.utcParse;let a=e.columns||Object.keys(e[0]),s,o,l,f,d,h;t==="auto"&&(t=EL(e,a)),a=Object.keys(t);const p=a.map(y=>{const v=t[y];let b,S;if(v&&(v.startsWith("date:")||v.startsWith("utc:")))return b=v.split(/:(.+)?/,2),S=b[1],(S[0]==="'"&&S[S.length-1]==="'"||S[0]==='"'&&S[S.length-1]==='"')&&(S=S.slice(1,-1)),(b[0]==="utc"?i:n)(S);if(!eA[v])throw Error("Illegal format pattern: "+y+":"+v);return eA[v]});for(l=0,d=e.length,h=a.length;l<d;++l)for(s=e[l],f=0;f<h;++f)o=a[f],s[o]=p[f](s[o])}const Qv=kJ(typeof fetch<"u"&&fetch);function Zv(e){const t=e||ti,n=[],i={};return n.add=r=>{const a=t(r);return i[a]||(i[a]=1,n.push(r)),n},n.remove=r=>{const a=t(r);if(i[a]){i[a]=0;const s=n.indexOf(r);s>=0&&n.splice(s,1)}return n},n}async function T1(e,t){try{await t(e)}catch(n){e.error(n)}}const CL=Symbol("vega_id");let YJ=1;function Kv(e){return!!(e&&Me(e))}function Me(e){return e[CL]}function $L(e,t){return e[CL]=t,e}function lt(e){const t=e===Object(e)?e:{data:e};return Me(t)?t:$L(t,YJ++)}function D$(e){return Jv(e,lt({}))}function Jv(e,t){for(const n in e)t[n]=e[n];return t}function TL(e,t){return $L(t,Me(e))}function rc(e,t){return e?t?(n,i)=>e(n,i)||Me(t(n))-Me(t(i)):(n,i)=>e(n,i)||Me(n)-Me(i):null}function ML(e){return e&&e.constructor===ac}function ac(){const e=[],t=[],n=[],i=[],r=[];let a=null,s=!1;return{constructor:ac,insert(o){const l=ve(o),f=l.length;for(let d=0;d<f;++d)e.push(l[d]);return this},remove(o){const l=Pe(o)?i:t,f=ve(o),d=f.length;for(let h=0;h<d;++h)l.push(f[h]);return this},modify(o,l,f){const d={field:l,value:ni(f)};return Pe(o)?(d.filter=o,r.push(d)):(d.tuple=o,n.push(d)),this},encode(o,l){return Pe(o)?r.push({filter:o,field:l}):n.push({tuple:o,field:l}),this},clean(o){return a=o,this},reflow(){return s=!0,this},pulse(o,l){const f={},d={};let h,p,y,v,b,S;for(h=0,p=l.length;h<p;++h)f[Me(l[h])]=1;for(h=0,p=t.length;h<p;++h)b=t[h],f[Me(b)]=-1;for(h=0,p=i.length;h<p;++h)v=i[h],l.forEach(w=>{v(w)&&(f[Me(w)]=-1)});for(h=0,p=e.length;h<p;++h)b=e[h],S=Me(b),f[S]?f[S]=1:o.add.push(lt(e[h]));for(h=0,p=l.length;h<p;++h)b=l[h],f[Me(b)]<0&&o.rem.push(b);function _(w,A,C){C?w[A]=C(w):o.encode=A,s||(d[Me(w)]=w)}for(h=0,p=n.length;h<p;++h)y=n[h],b=y.tuple,v=y.field,S=f[Me(b)],S>0&&(_(b,v,y.value),o.modifies(v));for(h=0,p=r.length;h<p;++h)y=r[h],v=y.filter,l.forEach(w=>{v(w)&&f[Me(w)]>0&&_(w,y.field,y.value)}),o.modifies(y.field);if(s)o.mod=t.length||i.length?l.filter(w=>f[Me(w)]>0):l.slice();else for(S in d)o.mod.push(d[S]);return(a||a==null&&(t.length||i.length))&&o.clean(!0),o}}}const M1="_:mod:_";function eb(){Object.defineProperty(this,M1,{writable:!0,value:{}})}eb.prototype={set(e,t,n,i){const r=this,a=r[e],s=r[M1];return t!=null&&t>=0?(a[t]!==n||i)&&(a[t]=n,s[t+":"+e]=-1,s[e]=-1):(a!==n||i)&&(r[e]=n,s[e]=re(n)?1+n.length:-1),r},modified(e,t){const n=this[M1];if(arguments.length){if(re(e)){for(let i=0;i<e.length;++i)if(n[e[i]])return!0;return!1}}else{for(const i in n)if(n[i])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[M1]={},this}};let XJ=0;const VJ="pulse",WJ=new eb,QJ=1,ZJ=2;function _t(e,t,n,i){this.id=++XJ,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,i)}function Z6(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}_t.prototype={targets(){return this._targets||(this._targets=Zv(Op))},set(e){return this.value!==e?(this.value=e,1):0},skip:Z6(QJ),modified:Z6(ZJ),parameters(e,t,n){t=t!==!1;const i=this._argval=this._argval||new eb,r=this._argops=this._argops||[],a=[];let s,o,l,f;const d=(h,p,y)=>{y instanceof _t?(y!==this&&(t&&y.targets().add(this),a.push(y)),r.push({op:y,name:h,index:p})):i.set(h,p,y)};for(s in e)if(o=e[s],s===VJ)ve(o).forEach(h=>{h instanceof _t?h!==this&&(h.targets().add(this),a.push(h)):te("Pulse parameters must be operator instances.")}),this.source=o;else if(re(o))for(i.set(s,-1,Array(l=o.length)),f=0;f<l;++f)d(s,f,o[f]);else d(s,-1,o);return this.marshall().clear(),n&&(r.initonly=!0),a},marshall(e){const t=this._argval||WJ,n=this._argops;let i,r,a,s;if(n){const o=n.length;for(r=0;r<o;++r)i=n[r],a=i.op,s=a.modified()&&a.stamp===e,t.set(i.name,i.index,a.value,s);if(n.initonly){for(r=0;r<o;++r)i=n[r],i.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,i,r;if(e)for(t=0,n=e.length;t<n;++t)i=e[t],r=i.op,r._targets&&r._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),i=t.call(this,n,e);if(n.clear(),i!==this.value)this.value=i;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function KJ(e,t,n,i){let r=1,a;return e instanceof _t?a=e:e&&e.prototype instanceof _t?a=new e:Pe(e)?a=new _t(null,e):(r=0,a=new _t(e,t)),this.rank(a),r&&(i=n,n=t),n&&this.connect(a,a.parameters(n,i)),this.touch(a),a}function JJ(e,t){const n=e.rank,i=t.length;for(let r=0;r<i;++r)if(n<t[r].rank){this.rerank(e);return}}let eee=0;function tb(e,t,n){this.id=++eee,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Lo(e,t,n){return new tb(e,t,n)}tb.prototype={_filter:Or,_apply:ti,targets(){return this._targets||(this._targets=Zv(Op))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,i=n?n.length:0;for(let r=0;r<i;++r)n[r].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Lo(e);return this.targets().add(t),t},apply(e){const t=Lo(null,e);return this.targets().add(t),t},merge(){const e=Lo();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Lo();return this.targets().add(Lo(null,null,p$(e,n=>{const i=n.dataflow;t.receive(n),i&&i.run&&i.run()}))),t},between(e,t){let n=!1;return e.targets().add(Lo(null,null,()=>n=!0)),t.targets().add(Lo(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Or,this._targets=null}};function tee(e,t,n,i){const r=this,a=Lo(n,i),s=function(f){f.dataflow=r;try{a.receive(f)}catch(d){r.error(d)}finally{r.run()}};let o;typeof e=="string"&&typeof document<"u"?o=document.querySelectorAll(e):o=ve(e);const l=o.length;for(let f=0;f<l;++f)o[f].addEventListener(t,s);return a}function nee(e,t){const n=this.locale();return AL(e,t,n.timeParse,n.utcParse)}function iee(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function ree(e,t){const n=this;let i=0,r;try{r=await n.loader().load(e,{context:"dataflow",response:wL(t&&t.type)});try{r=n.parse(r,t)}catch(a){i=-2,n.warn("Data ingestion failed",e,a)}}catch(a){i=-1,n.warn("Loading failed",e,a)}return{data:r,status:i}}async function aee(e,t,n){const i=this,r=i._pending||see(i);r.requests+=1;const a=await i.request(t,n);return i.pulse(e,i.changeset().remove(Or).insert(a.data||[])),r.done(),a}function see(e){let t;const n=new Promise(i=>t=i);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const oee={skip:!0};function uee(e,t,n,i,r){return(e instanceof _t?cee:lee)(this,e,t,n,i,r),this}function lee(e,t,n,i,r,a){const s=qe({},a,oee);let o,l;Pe(n)||(n=ni(n)),i===void 0?o=f=>e.touch(n(f)):Pe(i)?(l=new _t(null,i,r,!1),o=f=>{l.evaluate(f);const d=n(f),h=l.value;ML(h)?e.pulse(d,h,a):e.update(d,h,s)}):o=f=>e.update(n(f),i,s),t.apply(o)}function cee(e,t,n,i,r,a){if(i===void 0)t.targets().add(n);else{const s=a||{},o=new _t(null,fee(n,i),r,!1);o.modified(s.force),o.rank=t.rank,t.targets().add(o),n&&(o.skip(!0),o.value=n.value,o.targets().add(n),e.connect(n,[o]))}}function fee(e,t){return t=Pe(t)?t:ni(t),e?function(n,i){const r=t(n,i);return e.skip()||(e.skip(r!==this.value).value=r),r}:t}function dee(e){e.rank=++this._rank}function hee(e){const t=[e];let n,i,r;for(;t.length;)if(this.rank(n=t.pop()),i=n._targets)for(r=i.length;--r>=0;)t.push(n=i[r]),n===e&&te("Cycle detected in dataflow graph.")}const cy={},Ma=1,qo=2,ks=4,gee=Ma|qo,K6=Ma|ks,of=Ma|qo|ks,J6=8,Qh=16,e4=32,t4=64;function ru(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function h_(e,t){const n=[];return Uo(e,t,i=>n.push(i)),n}function n4(e,t){const n={};return e.visit(t,i=>{n[Me(i)]=1}),i=>n[Me(i)]?null:i}function jm(e,t){return e?(n,i)=>e(n,i)&&t(n,i):t}ru.prototype={StopPropagation:cy,ADD:Ma,REM:qo,MOD:ks,ADD_REM:gee,ADD_MOD:K6,ALL:of,REFLOW:J6,SOURCE:Qh,NO_SOURCE:e4,NO_FIELDS:t4,fork(e){return new ru(this.dataflow).init(this,e)},clone(){const e=this.fork(of);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(of|Qh)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new ru(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&t4)&&(n.fields=e.fields),t&Ma?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&qo?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&ks?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&e4?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||of;return t&Ma&&this.add.length||t&qo&&this.rem.length||t&ks&&this.mod.length},reflow(e){if(e)return this.fork(of).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(ks,n4(this,Ma))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return re(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?re(e)?e.some(i=>n[i]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Ma&&(n.addF=jm(n.addF,t)),e&qo&&(n.remF=jm(n.remF,t)),e&ks&&(n.modF=jm(n.modF,t)),e&Qh&&(n.srcF=jm(n.srcF,t)),n},materialize(e){e=e||of;const t=this;return e&Ma&&t.addF&&(t.add=h_(t.add,t.addF),t.addF=null),e&qo&&t.remF&&(t.rem=h_(t.rem,t.remF),t.remF=null),e&ks&&t.modF&&(t.mod=h_(t.mod,t.modF),t.modF=null),e&Qh&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,i=t;if(e&Qh)return Uo(n.source,n.srcF,i),n;e&Ma&&Uo(n.add,n.addF,i),e&qo&&Uo(n.rem,n.remF,i),e&ks&&Uo(n.mod,n.modF,i);const r=n.source;if(e&J6&&r){const a=n.add.length+n.mod.length;a===r.length||(a?Uo(r,n4(n,K6),i):Uo(r,n.srcF,i))}return n}};function N$(e,t,n,i){const r=this;let a=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=i||null,this.pulses=n;for(const s of n)if(s.stamp===t){if(s.fields){const o=r.fields||(r.fields={});for(const l in s.fields)o[l]=1}s.changed(r.ADD)&&(a|=r.ADD),s.changed(r.REM)&&(a|=r.REM),s.changed(r.MOD)&&(a|=r.MOD)}this.changes=a}ge(N$,ru,{fork(e){const t=new ru(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?re(e)?e.some(i=>n[i]):n[e]:0},filter(){te("MultiPulse does not support filtering.")},materialize(){te("MultiPulse does not support materialization.")},visit(e,t){const n=this,i=n.pulses,r=i.length;let a=0;if(e&n.SOURCE)for(;a<r;++a)i[a].visit(e,t);else for(;a<r;++a)i[a].stamp===n.stamp&&i[a].visit(e,t);return n}});async function pee(e,t,n){const i=this,r=[];if(i._pulse)return kL(i);if(i._pending&&await i._pending,t&&await T1(i,t),!i._touched.length)return i.debug("Dataflow invoked, but nothing to do."),i;const a=++i._clock;i._pulse=new ru(i,a,e),i._touched.forEach(d=>i._enqueue(d,!0)),i._touched=Zv(Op);let s=0,o,l,f;try{for(;i._heap.size()>0;){if(o=i._heap.pop(),o.rank!==o.qrank){i._enqueue(o,!0);continue}l=o.run(i._getPulse(o,e)),l.then?l=await l:l.async&&(r.push(l.async),l=cy),l!==cy&&o._targets&&o._targets.forEach(d=>i._enqueue(d)),++s}}catch(d){i._heap.clear(),f=d}if(i._input={},i._pulse=null,i.debug(`Pulse ${a}: ${s} operators`),f&&(i._postrun=[],i.error(f)),i._postrun.length){const d=i._postrun.sort((h,p)=>p.priority-h.priority);i._postrun=[];for(let h=0;h<d.length;++h)await T1(i,d[h].callback)}return n&&await T1(i,n),r.length&&Promise.all(r).then(d=>i.runAsync(null,()=>{d.forEach(h=>{try{h(i)}catch(p){i.error(p)}})})),i}async function mee(e,t,n){for(;this._running;)await this._running;const i=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(i,i),this._running}function yee(e,t,n){return this._pulse?kL(this):(this.evaluate(e,t,n),this)}function vee(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(i){this.error(i)}}function kL(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function bee(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function xee(e,t){const n=e.source,i=this._clock;return n&&re(n)?new N$(this,i,n.map(r=>r.pulse),t):this._input[e.id]||See(this._pulse,n&&n.pulse)}function See(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==cy&&(e.source=t.source),e)}const z$={skip:!1,force:!1};function Eee(e,t){const n=t||z$;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function _ee(e,t,n){const i=n||z$;return(e.set(t)||i.force)&&this.touch(e,i),this}function wee(e,t,n){this.touch(e,n||z$);const i=new ru(this,this._clock+(this._pulse?0:1)),r=e.pulse&&e.pulse.source||[];return i.target=e,this._input[e.id]=t.pulse(i,r),this}function Aee(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),OL(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let i;return t.length?(i=t[0],t[0]=n,Cee(t,0,e)):i=n,i}}}function OL(e,t,n,i){let r,a;const s=e[n];for(;n>t;){if(a=n-1>>1,r=e[a],i(s,r)<0){e[n]=r,n=a;continue}break}return e[n]=s}function Cee(e,t,n){const i=t,r=e.length,a=e[t];let s=(t<<1)+1,o;for(;s<r;)o=s+1,o<r&&n(e[s],e[o])>=0&&(s=o),e[t]=e[s],t=s,s=(t<<1)+1;return e[t]=a,OL(e,i,t,n)}function Tf(){this.logger(c$()),this.logLevel(u$),this._clock=0,this._rank=0,this._locale=M$();try{this._loader=Qv()}catch{}this._touched=Zv(Op),this._input={},this._pulse=null,this._heap=Aee((e,t)=>e.qrank-t.qrank),this._postrun=[]}function Zh(e){return function(){return this._log[e].apply(this,arguments)}}Tf.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:Zh("error"),warn:Zh("warn"),info:Zh("info"),debug:Zh("debug"),logLevel:Zh("level"),cleanThreshold:1e4,add:KJ,connect:JJ,rank:dee,rerank:hee,pulse:wee,touch:Eee,update:_ee,changeset:ac,ingest:iee,parse:nee,preload:aee,request:ree,events:tee,on:uee,evaluate:pee,run:yee,runAsync:mee,runAfter:vee,_enqueue:bee,_getPulse:xee};function J(e,t){_t.call(this,e,null,t)}ge(J,_t,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const jf={};function RL(e){const t=DL(e);return t&&t.Definition||null}function DL(e){return e=e&&e.toLowerCase(),Se(jf,e)?jf[e]:null}function*NL(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let i of e)i=t(i,++n,e),i!=null&&i!==""&&(i=+i)>=i&&(yield i)}}function F$(e,t,n){const i=Float64Array.from(NL(e,n));return i.sort(Ps),t.map(r=>k7(i,r))}function L$(e,t){return F$(e,[.25,.5,.75],t)}function B$(e,t){const n=e.length,i=zZ(e,t),r=L$(e,t),a=(r[2]-r[0])/1.34;return 1.06*(Math.min(i,a)||i||Math.abs(r[0])||1)*Math.pow(n,-.2)}function zL(e){const t=e.maxbins||20,n=e.base||10,i=Math.log(n),r=e.divide||[5,2];let a=e.extent[0],s=e.extent[1],o,l,f,d,h,p;const y=e.span||s-a||Math.abs(a)||1;if(e.step)o=e.step;else if(e.steps){for(d=y/t,h=0,p=e.steps.length;h<p&&e.steps[h]<d;++h);o=e.steps[Math.max(0,h-1)]}else{for(l=Math.ceil(Math.log(t)/i),f=e.minstep||0,o=Math.max(f,Math.pow(n,Math.round(Math.log(y)/i)-l));Math.ceil(y/o)>t;)o*=n;for(h=0,p=r.length;h<p;++h)d=o/r[h],d>=f&&y/d<=t&&(o=d)}d=Math.log(o);const v=d>=0?0:~~(-d/i)+1,b=Math.pow(n,-v-1);return(e.nice||e.nice===void 0)&&(d=Math.floor(a/o+b)*o,a=a<d?d-o:d,s=Math.ceil(s/o)*o),{start:a,stop:s===a?a+o:s,step:o}}var Dr=Math.random;function $ee(e){Dr=e}function FL(e,t,n,i){if(!e.length)return[void 0,void 0];const r=Float64Array.from(NL(e,i)),a=r.length,s=t;let o,l,f,d;for(f=0,d=Array(s);f<s;++f){for(o=0,l=0;l<a;++l)o+=r[~~(Dr()*a)];d[f]=o/a}return d.sort(Ps),[Gw(d,n/2),Gw(d,1-n/2)]}function LL(e,t,n,i){i=i||(p=>p);const r=e.length,a=new Float64Array(r);let s=0,o=1,l=i(e[0]),f=l,d=l+t,h;for(;o<r;++o){if(h=i(e[o]),h>=d){for(f=(l+f)/2;s<o;++s)a[s]=f;d=h+t,l=h}f=h}for(f=(l+f)/2;s<o;++s)a[s]=f;return n?Tee(a,t+t/4):a}function Tee(e,t){const n=e.length;let i=0,r=1,a,s;for(;e[i]===e[r];)++r;for(;r<n;){for(a=r+1;e[r]===e[a];)++a;if(e[r]-e[r-1]<t){for(s=r+(i+a-r-r>>1);s<r;)e[s++]=e[r];for(;s>r;)e[s--]=e[i]}i=r,r=a}return e}function Mee(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function kee(e,t){t==null&&(t=e,e=0);let n,i,r;const a={min(s){return arguments.length?(n=s||0,r=i-n,a):n},max(s){return arguments.length?(i=s||0,r=i-n,a):i},sample(){return n+Math.floor(r*Dr())},pdf(s){return s===Math.floor(s)&&s>=n&&s<i?1/r:0},cdf(s){const o=Math.floor(s);return o<n?0:o>=i?1:(o-n+1)/r},icdf(s){return s>=0&&s<=1?n-1+Math.floor(s*r):NaN}};return a.min(e).max(t)}const BL=Math.sqrt(2*Math.PI),Oee=Math.SQRT2;let Kh=NaN;function nb(e,t){e=e||0,t=t??1;let n=0,i=0,r,a;if(Kh===Kh)n=Kh,Kh=NaN;else{do n=Dr()*2-1,i=Dr()*2-1,r=n*n+i*i;while(r===0||r>1);a=Math.sqrt(-2*Math.log(r)/r),n*=a,Kh=i*a}return e+n*t}function U$(e,t,n){n=n??1;const i=(e-(t||0))/n;return Math.exp(-.5*i*i)/(n*BL)}function ib(e,t,n){t=t||0,n=n??1;const i=(e-t)/n,r=Math.abs(i);let a;if(r>37)a=0;else{const s=Math.exp(-r*r/2);let o;r<7.07106781186547?(o=.0352624965998911*r+.700383064443688,o=o*r+6.37396220353165,o=o*r+33.912866078383,o=o*r+112.079291497871,o=o*r+221.213596169931,o=o*r+220.206867912376,a=s*o,o=.0883883476483184*r+1.75566716318264,o=o*r+16.064177579207,o=o*r+86.7807322029461,o=o*r+296.564248779674,o=o*r+637.333633378831,o=o*r+793.826512519948,o=o*r+440.413735824752,a=a/o):(o=r+.65,o=r+4/o,o=r+3/o,o=r+2/o,o=r+1/o,a=s/o/2.506628274631)}return i>0?1-a:a}function rb(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*Oee*Ree(2*e-1)}function Ree(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function q$(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>nb(n,i),pdf:a=>U$(a,n,i),cdf:a=>ib(a,n,i),icdf:a=>rb(a,n,i)};return r.mean(e).stdev(t)}function P$(e,t){const n=q$();let i=0;const r={data(a){return arguments.length?(e=a,i=a?a.length:0,r.bandwidth(t)):e},bandwidth(a){return arguments.length?(t=a,!t&&e&&(t=B$(e)),r):t},sample(){return e[~~(Dr()*i)]+t*n.sample()},pdf(a){let s=0,o=0;for(;o<i;++o)s+=n.pdf((a-e[o])/t);return s/t/i},cdf(a){let s=0,o=0;for(;o<i;++o)s+=n.cdf((a-e[o])/t);return s/i},icdf(){throw Error("KDE icdf not supported.")}};return r.data(e)}function I$(e,t){return e=e||0,t=t??1,Math.exp(e+nb()*t)}function j$(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const i=(Math.log(e)-t)/n;return Math.exp(-.5*i*i)/(n*BL*e)}function H$(e,t,n){return ib(Math.log(e),t,n)}function G$(e,t,n){return Math.exp(rb(e,t,n))}function UL(e,t){let n,i;const r={mean(a){return arguments.length?(n=a||0,r):n},stdev(a){return arguments.length?(i=a??1,r):i},sample:()=>I$(n,i),pdf:a=>j$(a,n,i),cdf:a=>H$(a,n,i),icdf:a=>G$(a,n,i)};return r.mean(e).stdev(t)}function qL(e,t){let n=0,i;function r(s){const o=[];let l=0,f;for(f=0;f<n;++f)l+=o[f]=s[f]==null?1:+s[f];for(f=0;f<n;++f)o[f]/=l;return o}const a={weights(s){return arguments.length?(i=r(t=s||[]),a):t},distributions(s){return arguments.length?(s?(n=s.length,e=s):(n=0,e=[]),a.weights(t)):e},sample(){const s=Dr();let o=e[n-1],l=i[0],f=0;for(;f<n-1;l+=i[++f])if(s<l){o=e[f];break}return o.sample()},pdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].pdf(s);return o},cdf(s){let o=0,l=0;for(;l<n;++l)o+=i[l]*e[l].cdf(s);return o},icdf(){throw Error("Mixture icdf not supported.")}};return a.distributions(e).weights(t)}function Y$(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Dr()}function X$(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function V$(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function W$(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function PL(e,t){let n,i;const r={min(a){return arguments.length?(n=a||0,r):n},max(a){return arguments.length?(i=a??1,r):i},sample:()=>Y$(n,i),pdf:a=>X$(a,n,i),cdf:a=>V$(a,n,i),icdf:a=>W$(a,n,i)};return t==null&&(t=e??1,e=0),r.min(e).max(t)}function Q$(e,t,n){let i=0,r=0;for(const a of e){const s=n(a);t(a)==null||s==null||isNaN(s)||(i+=(s-i)/++r)}return{coef:[i],predict:()=>i,rSquared:0}}function Np(e,t,n,i){const r=i-e*e,a=Math.abs(r)<1e-24?0:(n-e*t)/r;return[t-a*e,a]}function ab(e,t,n,i){e=e.filter(y=>{let v=t(y),b=n(y);return v!=null&&(v=+v)>=v&&b!=null&&(b=+b)>=b}),i&&e.sort((y,v)=>t(y)-t(v));const r=e.length,a=new Float64Array(r),s=new Float64Array(r);let o=0,l=0,f=0,d,h,p;for(p of e)a[o]=d=+t(p),s[o]=h=+n(p),++o,l+=(d-l)/o,f+=(h-f)/o;for(o=0;o<r;++o)a[o]-=l,s[o]-=f;return[a,s,l,f]}function zp(e,t,n,i){let r=-1,a,s;for(const o of e)a=t(o),s=n(o),a!=null&&(a=+a)>=a&&s!=null&&(s=+s)>=s&&i(a,s,++r)}function Td(e,t,n,i,r){let a=0,s=0;return zp(e,t,n,(o,l)=>{const f=l-r(o),d=l-i;a+=f*f,s+=d*d}),1-a/s}function Z$(e,t,n){let i=0,r=0,a=0,s=0,o=0;zp(e,t,n,(d,h)=>{++o,i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Np(i,r,a,s),f=d=>l[0]+l[1]*d;return{coef:l,predict:f,rSquared:Td(e,t,n,r,f)}}function IL(e,t,n){let i=0,r=0,a=0,s=0,o=0;zp(e,t,n,(d,h)=>{++o,d=Math.log(d),i+=(d-i)/o,r+=(h-r)/o,a+=(d*h-a)/o,s+=(d*d-s)/o});const l=Np(i,r,a,s),f=d=>l[0]+l[1]*Math.log(d);return{coef:l,predict:f,rSquared:Td(e,t,n,r,f)}}function jL(e,t,n){const[i,r,a,s]=ab(e,t,n);let o=0,l=0,f=0,d=0,h=0,p,y,v;zp(e,t,n,(w,A)=>{p=i[h++],y=Math.log(A),v=p*A,o+=(A*y-o)/h,l+=(v-l)/h,f+=(v*y-f)/h,d+=(p*v-d)/h});const[b,S]=Np(l/s,o/s,f/s,d/s),_=w=>Math.exp(b+S*(w-a));return{coef:[Math.exp(b-S*a),S],predict:_,rSquared:Td(e,t,n,s,_)}}function HL(e,t,n){let i=0,r=0,a=0,s=0,o=0,l=0;zp(e,t,n,(h,p)=>{const y=Math.log(h),v=Math.log(p);++l,i+=(y-i)/l,r+=(v-r)/l,a+=(y*v-a)/l,s+=(y*y-s)/l,o+=(p-o)/l});const f=Np(i,r,a,s),d=h=>f[0]*Math.pow(h,f[1]);return f[0]=Math.exp(f[0]),{coef:f,predict:d,rSquared:Td(e,t,n,o,d)}}function K$(e,t,n){const[i,r,a,s]=ab(e,t,n),o=i.length;let l=0,f=0,d=0,h=0,p=0,y,v,b,S;for(y=0;y<o;)v=i[y],b=r[y++],S=v*v,l+=(S-l)/y,f+=(S*v-f)/y,d+=(S*S-d)/y,h+=(v*b-h)/y,p+=(S*b-p)/y;const _=d-l*l,w=l*_-f*f,A=(p*l-h*f)/w,C=(h*_-p*f)/w,T=-A*l,k=M=>(M=M-a,A*M*M+C*M+T+s);return{coef:[T-C*a+A*a*a+s,C-2*A*a,A],predict:k,rSquared:Td(e,t,n,s,k)}}function GL(e,t,n,i){if(i===0)return Q$(e,t,n);if(i===1)return Z$(e,t,n);if(i===2)return K$(e,t,n);const[r,a,s,o]=ab(e,t,n),l=r.length,f=[],d=[],h=i+1;let p,y,v,b,S;for(p=0;p<h;++p){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p)*a[v];for(f.push(b),S=new Float64Array(h),y=0;y<h;++y){for(v=0,b=0;v<l;++v)b+=Math.pow(r[v],p+y);S[y]=b}d.push(S)}d.push(f);const _=Nee(d),w=A=>{A-=s;let C=o+_[0]+_[1]*A+_[2]*A*A;for(p=3;p<h;++p)C+=_[p]*Math.pow(A,p);return C};return{coef:Dee(h,_,-s,o),predict:w,rSquared:Td(e,t,n,o,w)}}function Dee(e,t,n,i){const r=Array(e);let a,s,o,l;for(a=0;a<e;++a)r[a]=0;for(a=e-1;a>=0;--a)for(o=t[a],l=1,r[a]+=o,s=1;s<=a;++s)l*=(a+1-s)/s,r[a-s]+=o*Math.pow(n,s)*l;return r[0]+=i,r}function Nee(e){const t=e.length-1,n=[];let i,r,a,s,o;for(i=0;i<t;++i){for(s=i,r=i+1;r<t;++r)Math.abs(e[i][r])>Math.abs(e[i][s])&&(s=r);for(a=i;a<t+1;++a)o=e[a][i],e[a][i]=e[a][s],e[a][s]=o;for(r=i+1;r<t;++r)for(a=t;a>=i;a--)e[a][r]-=e[a][i]*e[i][r]/e[i][i]}for(r=t-1;r>=0;--r){for(o=0,a=r+1;a<t;++a)o+=e[a][r]*n[a];n[r]=(e[t][r]-o)/e[r][r]}return n}const i4=2,r4=1e-12;function YL(e,t,n,i){const[r,a,s,o]=ab(e,t,n,!0),l=r.length,f=Math.max(2,~~(i*l)),d=new Float64Array(l),h=new Float64Array(l),p=new Float64Array(l).fill(1);for(let y=-1;++y<=i4;){const v=[0,f-1];for(let S=0;S<l;++S){const _=r[S],w=v[0],A=v[1],C=_-r[w]>r[A]-_?w:A;let T=0,k=0,M=0,R=0,z=0;const U=1/Math.abs(r[C]-_||1);for(let j=w;j<=A;++j){const q=r[j],F=a[j],D=zee(Math.abs(_-q)*U)*p[j],P=q*D;T+=D,k+=P,M+=F*D,R+=F*P,z+=q*P}const[L,G]=Np(k/T,M/T,R/T,z/T);d[S]=L+G*_,h[S]=Math.abs(a[S]-d[S]),Fee(r,S+1,v)}if(y===i4)break;const b=O7(h);if(Math.abs(b)<r4)break;for(let S=0,_,w;S<l;++S)_=h[S]/(6*b),p[S]=_>=1?r4:(w=1-_*_)*w}return Lee(r,d,s,o)}function zee(e){return(e=1-e*e*e)*e*e}function Fee(e,t,n){const i=e[t];let r=n[0],a=n[1]+1;if(!(a>=e.length))for(;t>r&&e[a]-i<=i-e[r];)n[0]=++r,n[1]=a,++a}function Lee(e,t,n,i){const r=e.length,a=[];let s=0,o=0,l=[],f;for(;s<r;++s)f=e[s]+n,l[0]===f?l[1]+=(t[s]-l[1])/++o:(o=0,l[1]+=i,l=[f,t[s]],a.push(l));return l[1]+=i,a}const Bee=.5*Math.PI/180;function sb(e,t,n,i){n=n||25,i=Math.max(n,i||200);const r=b=>[b,e(b)],a=t[0],s=t[1],o=s-a,l=o/i,f=[r(a)],d=[];if(n===i){for(let b=1;b<i;++b)f.push(r(a+b/n*o));return f.push(r(s)),f}else{d.push(r(s));for(let b=n;--b>0;)d.push(r(a+b/n*o))}let h=f[0],p=d[d.length-1];const y=1/o,v=Uee(h[1],d);for(;p;){const b=r((h[0]+p[0])/2);b[0]-h[0]>=l&&qee(h,b,p,y,v)>Bee?d.push(b):(h=p,f.push(p),d.pop()),p=d[d.length-1]}return f}function Uee(e,t){let n=e,i=e;const r=t.length;for(let a=0;a<r;++a){const s=t[a][1];s<n&&(n=s),s>i&&(i=s)}return 1/(i-n)}function qee(e,t,n,i,r){const a=Math.atan2(r*(n[1]-e[1]),i*(n[0]-e[0])),s=Math.atan2(r*(t[1]-e[1]),i*(t[0]-e[0]));return Math.abs(a-s)}function Pee(e){return t=>{const n=e.length;let i=1,r=String(e[0](t));for(;i<n;++i)r+="|"+e[i](t);return r}}function tA(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:Pee(e)}function XL(e,t,n){return n||e+(t?"_"+t:"")}const g_=()=>{},Iee={init:g_,add:g_,rem:g_,idx:0},np={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},Fp=Object.keys(np).filter(e=>e!=="__count__");function jee(e,t){return(n,i)=>qe({name:e,aggregate_param:i,out:n||e},Iee,t)}[...Fp,"__count__"].forEach(e=>{np[e]=jee(e,np[e])});function VL(e,t,n){return np[e](n,t)}function WL(e,t){return e.idx-t.idx}function Hee(e){const t={};e.forEach(i=>t[i.name]=i);const n=i=>{i.req&&i.req.forEach(r=>{t[r]||n(t[r]=np[r]())})};return e.forEach(n),Object.values(t).sort(WL)}function Gee(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function Yee(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function Xee(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function Vee(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function QL(e,t){const n=t||ti,i=Hee(e),r=e.slice().sort(WL);function a(s){this._ops=i,this._out=r,this.cell=s,this.init()}return a.prototype.init=Gee,a.prototype.add=Yee,a.prototype.rem=Xee,a.prototype.set=Vee,a.prototype.get=n,a.fields=e.map(s=>s.out),a}function J$(e){this._key=e?kr(e):Me,this.reset()}const Un=J$.prototype;Un.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Un.add=function(e){this._add.push(e)};Un.rem=function(e){this._rem.push(e)};Un.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,i=e.length,r=t.length,a=Array(i-r),s={};let o,l,f;for(o=0;o<r;++o)s[n(t[o])]=1;for(o=0,l=0;o<i;++o)s[n(f=e[o])]?s[n(f)]=0:a[l++]=f;return this._rem=[],this._add=a};Un.distinct=function(e){const t=this.values(),n={};let i=t.length,r=0,a;for(;--i>=0;)a=e(t[i])+"",Se(n,a)||(n[a]=1,++r);return r};Un.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=h7(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Un.argmin=function(e){return this.extent(e)[0]||{}};Un.argmax=function(e){return this.extent(e)[1]||{}};Un.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Un.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Un.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=L$(this.values(),e),this._get=e),this._q};Un.q1=function(e){return this.quartile(e)[0]};Un.q2=function(e){return this.quartile(e)[1]};Un.q3=function(e){return this.quartile(e)[2]};Un.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=FL(this.values(),1e3,.05,e),this._get=e),this._ci};Un.ci0=function(e){return this.ci(e)[0]};Un.ci1=function(e){return this.ci(e)[1]};function cu(e){J.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}cu.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Fp},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};ge(cu,J,{transform(e,t){const n=this,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.modified();return n.stamp=i.stamp,n.value&&(r||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=r?n.init(e):Object.create(null),t.visit(t.SOURCE,a=>n.add(a))):(n.value=n.value||n.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),i.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&i.clean(!0).runAfter(()=>this.clean()),n.changes(i)},cross(){const e=this,t=e.value,n=e._dnames,i=n.map(()=>({})),r=n.length;function a(o){let l,f,d,h;for(l in o)for(d=o[l].tuple,f=0;f<r;++f)i[f][h=d[n[f]]]=h}a(e._prev),a(t);function s(o,l,f){const d=n[f],h=i[f++];for(const p in h){const y=o?o+"|"+p:p;l[d]=h[p],f<r?s(y,l,f):t[y]||e.cell(y,l)}}s("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],i={};function r(w){const A=ve(Zn(w)),C=A.length;let T=0,k;for(;T<C;++T)i[k=A[T]]||(i[k]=1,t.push(k))}this._dims=ve(e.groupby),this._dnames=this._dims.map(w=>{const A=It(w);return r(w),n.push(A),A}),this.cellkey=e.key?e.key:tA(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const a=e.fields||[null],s=e.ops||["count"],o=e.aggregate_params||[null],l=e.as||[],f=a.length,d={};let h,p,y,v,b,S,_;for(f!==s.length&&te("Unmatched number of fields and aggregate ops."),_=0;_<f;++_){if(h=a[_],p=s[_],y=o[_]||null,h==null&&p!=="count"&&te("Null aggregate field specified."),b=It(h),S=XL(p,b,l[_]),n.push(S),p==="count"){this._counts.push(S);continue}v=d[b],v||(r(h),v=d[b]=[],v.field=h,this._measures.push(v)),p!=="count"&&(this._countOnly=!1),v.push(VL(p,y,S))}return this._measures=this._measures.map(w=>QL(w,w.field)),Object.create(null)},cellkey:tA(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const i=this._measures,r=i.length;n.agg=Array(r);for(let a=0;a<r;++a)n.agg[a]=new i[a](n)}return n.store&&(n.data=new J$),n},newtuple(e,t){const n=this._dnames,i=this._dims,r=i.length,a={};for(let s=0;s<r;++s)a[n[s]]=i[s](e);return t?TL(t.tuple,a):lt(a)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].add(i[r].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const i=n.agg;for(let r=0,a=i.length;r<a;++r)i[r].rem(i[r].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let i=0,r=n.length;i<r;++i)t[n[i]]=e.num;if(!this._countOnly){const i=e.agg;for(let r=0,a=i.length;r<a;++r)i[r].set(t)}return t},changes(e){const t=this._adds,n=this._mods,i=this._prev,r=this._drop,a=e.add,s=e.rem,o=e.mod;let l,f,d,h;if(i)for(f in i)l=i[f],(!r||l.num)&&s.push(l.tuple);for(d=0,h=this._alen;d<h;++d)a.push(this.celltuple(t[d])),t[d]=null;for(d=0,h=this._mlen;d<h;++d)l=n[d],(l.num===0&&r?s:o).push(this.celltuple(l)),n[d]=null;return this._alen=this._mlen=0,this._prev=null,e}});const Wee=1e-14;function eT(e){J.call(this,null,e)}eT.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};ge(eT,J,{transform(e,t){const n=e.interval!==!1,i=this._bins(e),r=i.start,a=i.step,s=e.as||["bin0","bin1"],o=s[0],l=s[1];let f;return e.modified()?(t=t.reflow(!0),f=t.SOURCE):f=t.modified(Zn(e.field))?t.ADD_MOD:t.ADD,t.visit(f,n?d=>{const h=i(d);d[o]=h,d[l]=h==null?null:r+a*(1+(h-r)/a)}:d=>d[o]=i(d)),t.modifies(n?s:o)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=zL(e),i=n.step;let r=n.start,a=r+Math.ceil((n.stop-r)/i)*i,s,o;(s=e.anchor)!=null&&(o=s-(r+i*Math.floor((s-r)/i)),r+=o,a+=o);const l=function(f){let d=Wn(t(f));return d==null?null:d<r?-1/0:d>a?1/0:(d=Math.max(r,Math.min(d,a-i)),r+i*Math.floor(Wee+(d-r)/i))};return l.start=r,l.stop=n.stop,l.step=i,this.value=Ui(l,Zn(t),e.name||"bin_"+It(t))}});function ZL(e,t,n){const i=e;let r=t||[],a=n||[],s={},o=0;return{add:l=>a.push(l),remove:l=>s[i(l)]=++o,size:()=>r.length,data:(l,f)=>(o&&(r=r.filter(d=>!s[i(d)]),s={},o=0),f&&l&&r.sort(l),a.length&&(r=l?v7(l,r,a.sort(l)):r.concat(a),a=[]),r)}}function tT(e){J.call(this,[],e)}tT.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};ge(tT,J,{transform(e,t){const n=t.fork(t.ALL),i=ZL(Me,this.value,n.materialize(n.ADD).add),r=e.sort,a=t.changed()||r&&(e.modified("sort")||t.modified(r.fields));return n.visit(n.REM,i.remove),this.modified(a),this.value=n.source=i.data(rc(r),a),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function KL(e){_t.call(this,null,Qee,e)}ge(KL,_t);function Qee(e){return this.value&&!e.modified()?this.value:g$(e.fields,e.orders)}function nT(e){J.call(this,null,e)}nT.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function Zee(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}ge(nT,J,{transform(e,t){const n=h=>p=>{for(var y=Zee(o(p),e.case,a)||[],v,b=0,S=y.length;b<S;++b)s.test(v=y[b])||h(v)},i=this._parameterCheck(e,t),r=this._counts,a=this._match,s=this._stop,o=e.field,l=e.as||["text","count"],f=n(h=>r[h]=1+(r[h]||0)),d=n(h=>r[h]-=1);return i?t.visit(t.SOURCE,f):(t.visit(t.ADD,f),t.visit(t.REM,d)),this._finish(t,l)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,i=this._tuples||(this._tuples={}),r=t[0],a=t[1],s=e.fork(e.NO_SOURCE|e.NO_FIELDS);let o,l,f;for(o in n)l=i[o],f=n[o]||0,!l&&f?(i[o]=l=lt({}),l[r]=o,l[a]=f,s.add.push(l)):f===0?(l&&s.rem.push(l),n[o]=null,i[o]=null):l[a]!==f&&(l[a]=f,s.mod.push(l));return s.modifies(t)}});function iT(e){J.call(this,null,e)}iT.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};ge(iT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.as||["a","b"],r=i[0],a=i[1],s=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let o=this.value;return s?(o&&(n.rem=o),o=t.materialize(t.SOURCE).source,n.add=this.value=Kee(o,r,a,e.filter||Or)):n.mod=o,n.source=this.value,n.modifies(i)}});function Kee(e,t,n,i){for(var r=[],a={},s=e.length,o=0,l,f;o<s;++o)for(a[t]=f=e[o],l=0;l<s;++l)a[n]=e[l],i(a)&&(r.push(lt(a)),a={},a[t]=f);return r}const a4={kde:P$,mixture:qL,normal:q$,lognormal:UL,uniform:PL},Jee="distributions",s4="function",ete="field";function JL(e,t){const n=e[s4];Se(a4,n)||te("Unknown distribution function: "+n);const i=a4[n]();for(const r in e)r===ete?i.data((e.from||t()).map(e[r])):r===Jee?i[r](e[r].map(a=>JL(a,t))):typeof i[r]===s4&&i[r](e[r]);return i}function rT(e){J.call(this,null,e)}const eB=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],tte={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:eB},{name:"weights",type:"number",array:!0}]};rT.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:eB.concat(tte)},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(rT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=JL(e.distribution,nte(t)),r=e.steps||e.minsteps||25,a=e.steps||e.maxsteps||200;let s=e.method||"pdf";s!=="pdf"&&s!=="cdf"&&te("Invalid density method: "+s),!e.extent&&!i.data&&te("Missing density extent parameter."),s=i[s];const o=e.as||["value","density"],l=e.extent||ja(i.data()),f=sb(s,l,r,a).map(d=>{const h={};return h[o[0]]=d[0],h[o[1]]=d[1],lt(h)});this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function nte(e){return()=>e.materialize(e.SOURCE).source}function tB(e,t){return e?e.map((n,i)=>t[i]||It(n)):null}function aT(e,t,n){const i=[],r=h=>h(l);let a,s,o,l,f,d;if(t==null)i.push(e.map(n));else for(a={},s=0,o=e.length;s<o;++s)l=e[s],f=t.map(r),d=a[f],d||(a[f]=d=[],d.dims=f,i.push(d)),d.push(n(l));return i}const nB="bin";function sT(e){J.call(this,null,e)}sT.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:nB}]};const ite=(e,t)=>Dp(ja(e,t))/30;ge(sT,J,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,i=aT(t.source,e.groupby,ti),r=e.smooth||!1,a=e.field,s=e.step||ite(n,a),o=rc((v,b)=>a(v)-a(b)),l=e.as||nB,f=i.length;let d=1/0,h=-1/0,p=0,y;for(;p<f;++p){const v=i[p].sort(o);y=-1;for(const b of LL(v,s,r,a))b<d&&(d=b),b>h&&(h=b),v[++y][l]=b}return this.value={start:d,stop:h,step:s},t.reflow(!0).modifies(l)}});function iB(e){_t.call(this,null,rte,e),this.modified(!0)}ge(iB,_t);function rte(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:Ui(n=>t(n,e),Zn(t),It(t))}function oT(e){J.call(this,[void 0,void 0],e)}oT.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};ge(oT,J,{transform(e,t){const n=this.value,i=e.field,r=t.changed()||t.modified(i.fields)||e.modified("field");let a=n[0],s=n[1];if((r||a==null)&&(a=1/0,s=-1/0),t.visit(r?t.SOURCE:t.ADD,o=>{const l=Wn(i(o));l!=null&&(l<a&&(a=l),l>s&&(s=l))}),!Number.isFinite(a)||!Number.isFinite(s)){let o=It(i);o&&(o=` for field "${o}"`),t.dataflow.warn(`Infinite extent${o}: [${a}, ${s}]`),a=s=void 0}this.value=[a,s]}});function uT(e,t){_t.call(this,e),this.parent=t,this.count=0}ge(uT,_t,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function ob(e){J.call(this,{},e),this._keys=Ed();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let i=0,r=t.active;i<r;++i)n(t[i],i,t)}}ge(ob,J,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,i){const r=this.value;let a=Se(r,e)&&r[e],s,o;return a?a.value.stamp<n.stamp&&(a.init(n),this.activate(a)):(o=i||(o=this._group[e])&&o.tuple,s=n.dataflow,a=new uT(n.fork(n.NO_SOURCE),this),s.add(a).connect(t(s,e,o)),r[e]=a,this.activate(a)),a},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const i=e[n].detachSubflow;i&&i(),delete e[n],++t}if(t){const n=this._targets.filter(i=>i&&i.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,i=e?e.length:0;let r=0;for(;r<i;++r)t[r]=e[r];for(;r<n&&t[r]!=null;++r)t[r]=null;t.active=i},transform(e,t){const n=t.dataflow,i=e.key,r=e.subflow,a=this._keys,s=e.modified("key"),o=l=>this.subflow(l,r,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,l=>{const f=Me(l),d=a.get(f);d!==void 0&&(a.delete(f),o(d).rem(l))}),t.visit(t.ADD,l=>{const f=i(l);a.set(Me(l),f),o(f).add(l)}),s||t.modified(i.fields)?t.visit(t.MOD,l=>{const f=Me(l),d=a.get(f),h=i(l);d===h?o(h).mod(l):(a.set(f,h),o(d).rem(l),o(h).add(l))}):t.changed(t.MOD)&&t.visit(t.MOD,l=>{o(a.get(Me(l))).mod(l)}),s&&t.visit(t.REFLOW,l=>{const f=Me(l),d=a.get(f),h=i(l);d!==h&&(a.set(f,h),o(d).rem(l),o(h).add(l))}),t.clean()?n.runAfter(()=>{this.clean(),a.clean()}):a.empty>n.cleanThreshold&&n.runAfter(a.clean),t}});function rB(e){_t.call(this,null,ate,e)}ge(rB,_t);function ate(e){return this.value&&!e.modified()?this.value:re(e.name)?ve(e.name).map(t=>kr(t)):kr(e.name,e.as)}function lT(e){J.call(this,Ed(),e)}lT.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};ge(lT,J,{transform(e,t){const n=t.dataflow,i=this.value,r=t.fork(),a=r.add,s=r.rem,o=r.mod,l=e.expr;let f=!0;t.visit(t.REM,h=>{const p=Me(h);i.has(p)?i.delete(p):s.push(h)}),t.visit(t.ADD,h=>{l(h,e)?a.push(h):i.set(Me(h),1)});function d(h){const p=Me(h),y=l(h,e),v=i.get(p);y&&v?(i.delete(p),a.push(h)):!y&&!v?(i.set(p,1),s.push(h)):f&&y&&!v&&o.push(h)}return t.visit(t.MOD,d),e.modified()&&(f=!1,t.visit(t.REFLOW,d)),i.empty>n.cleanThreshold&&n.runAfter(i.clean),r}});function cT(e){J.call(this,[],e)}cT.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};ge(cT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=tB(i,e.as||[]),a=e.index||null,s=r.length;return n.rem=this.value,t.visit(t.SOURCE,o=>{const l=i.map(v=>v(o)),f=l.reduce((v,b)=>Math.max(v,b.length),0);let d=0,h,p,y;for(;d<f;++d){for(p=D$(o),h=0;h<s;++h)p[r[h]]=(y=l[h][d])==null?null:y;a&&(p[a]=d),n.add.push(p)}}),this.value=n.source=n.add,a&&n.modifies(a),n.modifies(r)}});function fT(e){J.call(this,[],e)}fT.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};ge(fT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=i.map(It),a=e.as||["key","value"],s=a[0],o=a[1],l=i.length;return n.rem=this.value,t.visit(t.SOURCE,f=>{for(let d=0,h;d<l;++d)h=D$(f),h[s]=r[d],h[o]=i[d](f),n.add.push(h)}),this.value=n.source=n.add,n.modifies(a)}});function dT(e){J.call(this,null,e)}dT.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};ge(dT,J,{transform(e,t){const n=e.expr,i=e.as,r=e.modified(),a=e.initonly?t.ADD:r?t.SOURCE:t.modified(n.fields)||t.modified(i)?t.ADD_MOD:t.ADD;return r&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(i),t.visit(a,s=>s[i]=n(s,e))}});function aB(e){J.call(this,[],e)}ge(aB,J,{transform(e,t){const n=t.fork(t.ALL),i=e.generator;let r=this.value,a=e.size-r.length,s,o,l;if(a>0){for(s=[];--a>=0;)s.push(l=lt(i(e))),r.push(l);n.add=n.add.length?n.materialize(n.ADD).add.concat(s):s}else o=r.slice(0,-a),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(o):o,r=r.slice(-a);return n.source=this.value=r,n}});const Hm={value:"value",median:O7,mean:PZ,min:Hw,max:wl},ste=[];function hT(e){J.call(this,[],e)}hT.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function ote(e){var t=e.method||Hm.value,n;if(Hm[t]==null)te("Unrecognized imputation method: "+t);else return t===Hm.value?(n=e.value!==void 0?e.value:0,()=>n):Hm[t]}function ute(e){const t=e.field;return n=>n?t(n):NaN}ge(hT,J,{transform(e,t){var n=t.fork(t.ALL),i=ote(e),r=ute(e),a=It(e.field),s=It(e.key),o=(e.groupby||[]).map(It),l=lte(t.source,e.groupby,e.key,e.keyvals),f=[],d=this.value,h=l.domain.length,p,y,v,b,S,_,w,A,C,T;for(S=0,A=l.length;S<A;++S)for(p=l[S],v=p.values,y=NaN,w=0;w<h;++w)if(p[w]==null){for(b=l.domain[w],T={_impute:!0},_=0,C=v.length;_<C;++_)T[o[_]]=v[_];T[s]=b,T[a]=Number.isNaN(y)?y=i(p,r):y,f.push(lt(T))}return f.length&&(n.add=n.materialize(n.ADD).add.concat(f)),d.length&&(n.rem=n.materialize(n.REM).rem.concat(d)),this.value=f,n}});function lte(e,t,n,i){var r=_=>_(S),a=[],s=i?i.slice():[],o={},l={},f,d,h,p,y,v,b,S;for(s.forEach((_,w)=>o[_]=w+1),p=0,b=e.length;p<b;++p)S=e[p],v=n(S),y=o[v]||(o[v]=s.push(v)),d=(f=t?t.map(r):ste)+"",(h=l[d])||(h=l[d]=[],a.push(h),h.values=f),h[y-1]=S;return a.domain=s,a}function gT(e){cu.call(this,e)}gT.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:Fp},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};ge(gT,cu,{transform(e,t){const n=this,i=e.modified();let r;return n.value&&(i||t.modified(n._inputs,!0))?(r=n.value=i?n.init(e):{},t.visit(t.SOURCE,a=>n.add(a))):(r=n.value=n.value||this.init(e),t.visit(t.REM,a=>n.rem(a)),t.visit(t.ADD,a=>n.add(a))),n.changes(),t.visit(t.SOURCE,a=>{qe(a,r[n.cellkey(a)].tuple)}),t.reflow(i).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,i;for(n=0,i=this._alen;n<i;++n)this.celltuple(e[n]),e[n]=null;for(n=0,i=this._mlen;n<i;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function pT(e){J.call(this,null,e)}pT.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};ge(pT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=aT(i,e.groupby,e.field),a=(e.groupby||[]).map(It),s=e.bandwidth,o=e.cumulative?"cdf":"pdf",l=e.as||["value","density"],f=[];let d=e.extent,h=e.steps||e.minsteps||25,p=e.steps||e.maxsteps||200;o!=="pdf"&&o!=="cdf"&&te("Invalid density method: "+o),e.resolve==="shared"&&(d||(d=ja(i,e.field)),h=p=e.steps||p),r.forEach(y=>{const v=P$(y,s)[o],b=e.counts?y.length:1,S=d||ja(y);sb(v,S,h,p).forEach(_=>{const w={};for(let A=0;A<a.length;++A)w[a[A]]=y.dims[A];w[l[0]]=_[0],w[l[1]]=_[1]*b,f.push(lt(w))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});function sB(e){_t.call(this,null,cte,e)}ge(sB,_t);function cte(e){return this.value&&!e.modified()?this.value:y$(e.fields,e.flat)}function oB(e){J.call(this,[],e),this._pending=null}ge(oB,J,{transform(e,t){const n=t.dataflow;return this._pending?p_(this,t,this._pending):fte(e)?t.StopPropagation:e.values?p_(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(r=>(this._pending=ve(r.data),a=>a.touch(this)))}:n.request(e.url,e.format).then(i=>p_(this,t,ve(i.data)))}});function fte(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function p_(e,t,n){n.forEach(lt);const i=t.fork(t.NO_FIELDS&t.NO_SOURCE);return i.rem=e.value,e.value=i.source=i.add=n,e._pending=null,i.rem.length&&i.clean(!0),i}function mT(e){J.call(this,{},e)}mT.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};ge(mT,J,{transform(e,t){const n=e.fields,i=e.index,r=e.values,a=e.default==null?null:e.default,s=e.modified(),o=n.length;let l=s?t.SOURCE:t.ADD,f=t,d=e.as,h,p,y;return r?(p=r.length,o>1&&!d&&te('Multi-field lookup requires explicit "as" parameter.'),d&&d.length!==o*p&&te('The "as" parameter has too few output field names.'),d=d||r.map(It),h=function(v){for(var b=0,S=0,_,w;b<o;++b)if(w=i.get(n[b](v)),w==null)for(_=0;_<p;++_,++S)v[d[S]]=a;else for(_=0;_<p;++_,++S)v[d[S]]=r[_](w)}):(d||te("Missing output field names."),h=function(v){for(var b=0,S;b<o;++b)S=i.get(n[b](v)),v[d[b]]=S??a}),s?f=t.reflow(!0):(y=n.some(v=>t.modified(v.fields)),l|=y?t.MOD:0),t.visit(l,h),f.modifies(d)}});function uB(e){_t.call(this,null,dte,e)}ge(uB,_t);function dte(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let i=1/0,r=-1/0,a,s;for(a=0;a<n;++a)s=t[a],s[0]<i&&(i=s[0]),s[1]>r&&(r=s[1]);return[i,r]}function lB(e){_t.call(this,null,hte,e)}ge(lB,_t);function hte(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function cB(e){J.call(this,null,e)}ge(cB,J,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function yT(e){cu.call(this,e)}yT.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Fp,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};ge(yT,cu,{_transform:cu.prototype.transform,transform(e,t){return this._transform(gte(e,t),t)}});function gte(e,t){const n=e.field,i=e.value,r=(e.op==="count"?"__count__":e.op)||"sum",a=Zn(n).concat(Zn(i)),s=mte(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:s.map(()=>r),fields:s.map(o=>pte(o,n,i,a)),as:s.map(o=>o+""),modified:e.modified.bind(e)}}function pte(e,t,n,i){return Ui(r=>t(r)===e?n(r):NaN,i,e+"")}function mte(e,t,n){const i={},r=[];return n.visit(n.SOURCE,a=>{const s=e(a);i[s]||(i[s]=1,r.push(s))}),r.sort(Rp),t?r.slice(0,t):r}function fB(e){ob.call(this,e)}ge(fB,ob,{transform(e,t){const n=e.subflow,i=e.field,r=a=>this.subflow(Me(a),n,t,a);return(e.modified("field")||i&&t.modified(Zn(i)))&&te("PreFacet does not support field modification."),this.initTargets(),i?(t.visit(t.MOD,a=>{const s=r(a);i(a).forEach(o=>s.mod(o))}),t.visit(t.ADD,a=>{const s=r(a);i(a).forEach(o=>s.add(lt(o)))}),t.visit(t.REM,a=>{const s=r(a);i(a).forEach(o=>s.rem(o))})):(t.visit(t.MOD,a=>r(a).mod(a)),t.visit(t.ADD,a=>r(a).add(a)),t.visit(t.REM,a=>r(a).rem(a))),t.clean()&&t.runAfter(()=>this.clean()),t}});function vT(e){J.call(this,null,e)}vT.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};ge(vT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.fields,r=tB(e.fields,e.as||[]),a=i?(o,l)=>yte(o,l,i,r):Jv;let s;return this.value?s=this.value:(t=t.addAll(),s=this.value={}),t.visit(t.REM,o=>{const l=Me(o);n.rem.push(s[l]),s[l]=null}),t.visit(t.ADD,o=>{const l=a(o,lt({}));s[Me(o)]=l,n.add.push(l)}),t.visit(t.MOD,o=>{n.mod.push(a(o,s[Me(o)]))}),n}});function yte(e,t,n,i){for(let r=0,a=n.length;r<a;++r)t[i[r]]=n[r](e);return t}function dB(e){J.call(this,null,e)}ge(dB,J,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function bT(e){J.call(this,null,e)}bT.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const vte=1e-14;ge(bT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const r=t.materialize(t.SOURCE).source,a=aT(r,e.groupby,e.field),s=(e.groupby||[]).map(It),o=[],l=e.step||.01,f=e.probs||tr(l/2,1-vte,l),d=f.length;return a.forEach(h=>{const p=F$(h,f);for(let y=0;y<d;++y){const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[i[0]]=f[y],v[i[1]]=p[y],o.push(lt(v))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=o,n}});function hB(e){J.call(this,null,e)}ge(hB,J,{transform(e,t){let n,i;return this.value?i=this.value:(n=t=t.addAll(),i=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,r=>{const a=Me(r);n.rem.push(i[a]),i[a]=null}),t.visit(t.ADD,r=>{const a=D$(r);i[Me(r)]=a,n.add.push(a)}),t.visit(t.MOD,r=>{const a=i[Me(r)];for(const s in r)a[s]=r[s],n.modifies(s);n.mod.push(a)})),n}});function xT(e){J.call(this,[],e),this.count=0}xT.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};ge(xT,J,{transform(e,t){const n=t.fork(t.NO_SOURCE),i=e.modified("size"),r=e.size,a=this.value.reduce((d,h)=>(d[Me(h)]=1,d),{});let s=this.value,o=this.count,l=0;function f(d){let h,p;s.length<r?s.push(d):(p=~~((o+1)*Dr()),p<s.length&&p>=l&&(h=s[p],a[Me(h)]&&n.rem.push(h),s[p]=d)),++o}if(t.rem.length&&(t.visit(t.REM,d=>{const h=Me(d);a[h]&&(a[h]=-1,n.rem.push(d)),--o}),s=s.filter(d=>a[Me(d)]!==-1)),(t.rem.length||i)&&s.length<r&&t.source&&(l=o=s.length,t.visit(t.SOURCE,d=>{a[Me(d)]||f(d)}),l=-1),i&&s.length>r){const d=s.length-r;for(let h=0;h<d;++h)a[Me(s[h])]=-1,n.rem.push(s[h]);s=s.slice(d)}return t.mod.length&&t.visit(t.MOD,d=>{a[Me(d)]&&n.mod.push(d)}),t.add.length&&t.visit(t.ADD,f),(t.add.length||l<0)&&(n.add=s.filter(d=>!a[Me(d)])),this.count=o,this.value=n.source=s,n}});function ST(e){J.call(this,null,e)}ST.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};ge(ST,J,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),i=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=tr(e.start,e.stop,e.step||1).map(r=>{const a={};return a[i]=r,lt(a)}),n.add=t.add.concat(this.value),n}});function gB(e){J.call(this,null,e),this.modified(!0)}ge(gB,J,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function ET(e){J.call(this,null,e)}const pB=["unit0","unit1"];ET.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:w$,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:pB}]};ge(ET,J,{transform(e,t){const n=e.field,i=e.interval!==!1,r=e.timezone==="utc",a=this._floor(e,t),s=(r?$d:Cd)(a.unit).offset,o=e.as||pB,l=o[0],f=o[1],d=a.step;let h=a.start||1/0,p=a.stop||-1/0,y=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(Zn(n)))&&(t=t.reflow(!0),y=t.SOURCE,h=1/0,p=-1/0),t.visit(y,v=>{const b=n(v);let S,_;b==null?(v[l]=null,i&&(v[f]=null)):(v[l]=S=_=a(b),i&&(v[f]=_=s(S,d)),S<h&&(h=S),_>p&&(p=_))}),a.start=h,a.stop=p,t.modifies(i?o:l)},_floor(e,t){const n=e.timezone==="utc",{units:i,step:r}=e.units?{units:e.units,step:e.step||1}:aL({extent:e.extent||ja(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),a=A$(i),s=this.value||{},o=(n?Q7:W7)(a,r);return o.unit=Ke(a),o.units=a,o.step=r,o.start=s.start,o.stop=s.stop,this.value=o}});function mB(e){J.call(this,Ed(),e)}ge(mB,J,{transform(e,t){const n=t.dataflow,i=e.field,r=this.value,a=o=>r.set(i(o),o);let s=!0;return e.modified("field")||t.modified(i.fields)?(r.clear(),t.visit(t.SOURCE,a)):t.changed()?(t.visit(t.REM,o=>r.delete(i(o))),t.visit(t.ADD,a)):s=!1,this.modified(s),r.empty>n.cleanThreshold&&n.runAfter(r.clean),t.fork()}});function yB(e){J.call(this,null,e)}ge(yB,J,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(rc(e.sort)):t.source).map(e.field))}});function bte(e,t,n,i){const r=ip[e](t,n);return{init:r.init||Ho,update:function(a,s){s[i]=r.next(a)}}}const ip={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,i=t.data;return n&&t.compare(i[n-1],i[n])?++e:e}}},percent_rank:function(){const e=ip.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,i=t.compare;let r=t.index;if(e<r){for(;r+1<n.length&&!i(n[r],n[r+1]);)++r;e=r}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||te("ntile num must be greater than zero.");const n=ip.cume_dist(),i=n.next;return{init:n.init,next:r=>Math.ceil(t*i(r))}},lag:function(e,t){return t=+t||1,{next:n=>{const i=n.index-t;return i>=0?e(n.data[i]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const i=n.index+t,r=n.data;return i<r.length?e(r[i]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||te("nth_value nth must be greater than zero."),{next:n=>{const i=n.i0+(t-1);return i<n.i1?e(n.data[i]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const i=e(n.data[n.index]);return i!=null?t=i:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:i=>{const r=i.data;return i.index<=n?t:(n=xte(e,r,i.index))<0?(n=r.length,t=null):t=e(r[n])}}}};function xte(e,t,n){for(let i=t.length;n<i;++n)if(e(t[n])!=null)return n;return-1}const Ste=Object.keys(ip);function vB(e){const t=ve(e.ops),n=ve(e.fields),i=ve(e.params),r=ve(e.aggregate_params),a=ve(e.as),s=this.outputs=[],o=this.windows=[],l={},f={},d=[],h=[];let p=!0;function y(v){ve(Zn(v)).forEach(b=>l[b]=1)}y(e.sort),t.forEach((v,b)=>{const S=n[b],_=i[b],w=r[b]||null,A=It(S),C=XL(v,A,a[b]);if(y(S),s.push(C),Se(ip,v))o.push(bte(v,S,_,C));else{if(S==null&&v!=="count"&&te("Null aggregate field specified."),v==="count"){d.push(C);return}p=!1;let T=f[A];T||(T=f[A]=[],T.field=S,h.push(T)),T.push(VL(v,w,C))}}),(d.length||h.length)&&(this.cell=Ete(h,d,p)),this.inputs=Object.keys(l)}const bB=vB.prototype;bB.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};bB.update=function(e,t){const n=this.cell,i=this.windows,r=e.data,a=i&&i.length;let s;if(n){for(s=e.p0;s<e.i0;++s)n.rem(r[s]);for(s=e.p1;s<e.i1;++s)n.add(r[s]);n.set(t)}for(s=0;s<a;++s)i[s].update(e,t)};function Ete(e,t,n){e=e.map(l=>QL(l,l.field));const i={num:0,agg:null,store:!1,count:t};if(!n)for(var r=e.length,a=i.agg=Array(r),s=0;s<r;++s)a[s]=new e[s](i);if(i.store)var o=i.data=new J$;return i.add=function(l){if(i.num+=1,!n){o&&o.add(l);for(let f=0;f<r;++f)a[f].add(a[f].get(l),l)}},i.rem=function(l){if(i.num-=1,!n){o&&o.rem(l);for(let f=0;f<r;++f)a[f].rem(a[f].get(l),l)}},i.set=function(l){let f,d;for(o&&o.values(),f=0,d=t.length;f<d;++f)l[t[f]]=i.num;if(!n)for(f=0,d=a.length;f<d;++f)a[f].set(l)},i.init=function(){i.num=0,o&&o.reset();for(let l=0;l<r;++l)a[l].init()},i}function _T(e){J.call(this,{},e),this._mlen=0,this._mods=[]}_T.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ste.concat(Fp)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};ge(_T,J,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),i=rc(e.sort),r=tA(e.groupby),a=o=>this.group(r(o));let s=this.state;(!s||n)&&(s=this.state=new vB(e)),n||t.modified(s.inputs)?(this.value={},t.visit(t.SOURCE,o=>a(o).add(o))):(t.visit(t.REM,o=>a(o).remove(o)),t.visit(t.ADD,o=>a(o).add(o)));for(let o=0,l=this._mlen;o<l;++o)_te(this._mods[o],s,i,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(s.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=ZL(Me),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function _te(e,t,n,i){const r=i.sort,a=r&&!i.ignorePeers,s=i.frame||[null,0],o=e.data(n),l=o.length,f=a?_d(r):null,d={i0:0,i1:0,p0:0,p1:0,index:0,data:o,compare:r||ni(-1)};t.init();for(let h=0;h<l;++h)wte(d,s,h,l),a&&Ate(d,f),t.update(d,o[h])}function wte(e,t,n,i){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?i:Math.min(i,n+Math.abs(t[1])+1),e.index=n}function Ate(e,t){const n=e.i0,i=e.i1-1,r=e.compare,a=e.data,s=a.length-1;n>0&&!r(a[n],a[n-1])&&(e.i0=t.left(a,a[n])),i<s&&!r(a[i],a[i+1])&&(e.i1=t.right(a,a[i]))}const Cte=Object.freeze(Object.defineProperty({__proto__:null,aggregate:cu,bin:eT,collect:tT,compare:KL,countpattern:nT,cross:iT,density:rT,dotbin:sT,expression:iB,extent:oT,facet:ob,field:rB,filter:lT,flatten:cT,fold:fT,formula:dT,generate:aB,impute:hT,joinaggregate:gT,kde:pT,key:sB,load:oB,lookup:mT,multiextent:uB,multivalues:lB,params:cB,pivot:yT,prefacet:fB,project:vT,proxy:dB,quantile:bT,relay:hB,sample:xT,sequence:ST,sieve:gB,subflow:uT,timeunit:ET,tupleindex:mB,values:yB,window:_T},Symbol.toStringTag,{value:"Module"}));function ct(e){return function(){return e}}const o4=Math.abs,jn=Math.atan2,tl=Math.cos,$te=Math.max,m_=Math.min,Ca=Math.sin,bl=Math.sqrt,Gn=1e-12,Hf=Math.PI,fy=Hf/2,xB=2*Hf;function Tte(e){return e>1?0:e<-1?Hf:Math.acos(e)}function u4(e){return e>=1?fy:e<=-1?-fy:Math.asin(e)}const nA=Math.PI,iA=2*nA,dl=1e-6,Mte=iA-dl;function SB(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function kte(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return SB;const n=10**t;return function(i){this._+=i[0];for(let r=1,a=i.length;r<a;++r)this._+=Math.round(arguments[r]*n)/n+i[r]}}let wT=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?SB:kte(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,i,r){this._append`Q${+t},${+n},${this._x1=+i},${this._y1=+r}`}bezierCurveTo(t,n,i,r,a,s){this._append`C${+t},${+n},${+i},${+r},${this._x1=+a},${this._y1=+s}`}arcTo(t,n,i,r,a){if(t=+t,n=+n,i=+i,r=+r,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-t,f=r-n,d=s-t,h=o-n,p=d*d+h*h;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(p>dl)if(!(Math.abs(h*l-f*d)>dl)||!a)this._append`L${this._x1=t},${this._y1=n}`;else{let y=i-s,v=r-o,b=l*l+f*f,S=y*y+v*v,_=Math.sqrt(b),w=Math.sqrt(p),A=a*Math.tan((nA-Math.acos((b+p-S)/(2*_*w)))/2),C=A/w,T=A/_;Math.abs(C-1)>dl&&this._append`L${t+C*d},${n+C*h}`,this._append`A${a},${a},0,0,${+(h*y>d*v)},${this._x1=t+T*l},${this._y1=n+T*f}`}}arc(t,n,i,r,a,s){if(t=+t,n=+n,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(r),l=i*Math.sin(r),f=t+o,d=n+l,h=1^s,p=s?r-a:a-r;this._x1===null?this._append`M${f},${d}`:(Math.abs(this._x1-f)>dl||Math.abs(this._y1-d)>dl)&&this._append`L${f},${d}`,i&&(p<0&&(p=p%iA+iA),p>Mte?this._append`A${i},${i},0,1,${h},${t-o},${n-l}A${i},${i},0,1,${h},${this._x1=f},${this._y1=d}`:p>dl&&this._append`A${i},${i},0,${+(p>=nA)},${h},${this._x1=t+i*Math.cos(a)},${this._y1=n+i*Math.sin(a)}`)}rect(t,n,i,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${i=+i}v${+r}h${-i}Z`}toString(){return this._}};function ub(){return new wT}ub.prototype=wT.prototype;function lb(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const i=Math.floor(n);if(!(i>=0))throw new RangeError(`invalid digits: ${n}`);t=i}return e},()=>new wT(t)}function Ote(e){return e.innerRadius}function Rte(e){return e.outerRadius}function Dte(e){return e.startAngle}function Nte(e){return e.endAngle}function zte(e){return e&&e.padAngle}function Fte(e,t,n,i,r,a,s,o){var l=n-e,f=i-t,d=s-r,h=o-a,p=h*l-d*f;if(!(p*p<Gn))return p=(d*(t-a)-h*(e-r))/p,[e+p*l,t+p*f]}function Gm(e,t,n,i,r,a,s){var o=e-n,l=t-i,f=(s?a:-a)/bl(o*o+l*l),d=f*l,h=-f*o,p=e+d,y=t+h,v=n+d,b=i+h,S=(p+v)/2,_=(y+b)/2,w=v-p,A=b-y,C=w*w+A*A,T=r-a,k=p*b-v*y,M=(A<0?-1:1)*bl($te(0,T*T*C-k*k)),R=(k*A-w*M)/C,z=(-k*w-A*M)/C,U=(k*A+w*M)/C,L=(-k*w+A*M)/C,G=R-S,j=z-_,q=U-S,F=L-_;return G*G+j*j>q*q+F*F&&(R=U,z=L),{cx:R,cy:z,x01:-d,y01:-h,x11:R*(r/T-1),y11:z*(r/T-1)}}function Lte(){var e=Ote,t=Rte,n=ct(0),i=null,r=Dte,a=Nte,s=zte,o=null,l=lb(f);function f(){var d,h,p=+e.apply(this,arguments),y=+t.apply(this,arguments),v=r.apply(this,arguments)-fy,b=a.apply(this,arguments)-fy,S=o4(b-v),_=b>v;if(o||(o=d=l()),y<p&&(h=y,y=p,p=h),!(y>Gn))o.moveTo(0,0);else if(S>xB-Gn)o.moveTo(y*tl(v),y*Ca(v)),o.arc(0,0,y,v,b,!_),p>Gn&&(o.moveTo(p*tl(b),p*Ca(b)),o.arc(0,0,p,b,v,_));else{var w=v,A=b,C=v,T=b,k=S,M=S,R=s.apply(this,arguments)/2,z=R>Gn&&(i?+i.apply(this,arguments):bl(p*p+y*y)),U=m_(o4(y-p)/2,+n.apply(this,arguments)),L=U,G=U,j,q;if(z>Gn){var F=u4(z/p*Ca(R)),D=u4(z/y*Ca(R));(k-=F*2)>Gn?(F*=_?1:-1,C+=F,T-=F):(k=0,C=T=(v+b)/2),(M-=D*2)>Gn?(D*=_?1:-1,w+=D,A-=D):(M=0,w=A=(v+b)/2)}var P=y*tl(w),X=y*Ca(w),Z=p*tl(T),N=p*Ca(T);if(U>Gn){var W=y*tl(A),ne=y*Ca(A),ae=p*tl(C),me=p*Ca(C),be;if(S<Hf)if(be=Fte(P,X,ae,me,W,ne,Z,N)){var Ae=P-be[0],jt=X-be[1],tt=W-be[0],ye=ne-be[1],Le=1/Ca(Tte((Ae*tt+jt*ye)/(bl(Ae*Ae+jt*jt)*bl(tt*tt+ye*ye)))/2),Ue=bl(be[0]*be[0]+be[1]*be[1]);L=m_(U,(p-Ue)/(Le-1)),G=m_(U,(y-Ue)/(Le+1))}else L=G=0}M>Gn?G>Gn?(j=Gm(ae,me,P,X,y,G,_),q=Gm(W,ne,Z,N,y,G,_),o.moveTo(j.cx+j.x01,j.cy+j.y01),G<U?o.arc(j.cx,j.cy,G,jn(j.y01,j.x01),jn(q.y01,q.x01),!_):(o.arc(j.cx,j.cy,G,jn(j.y01,j.x01),jn(j.y11,j.x11),!_),o.arc(0,0,y,jn(j.cy+j.y11,j.cx+j.x11),jn(q.cy+q.y11,q.cx+q.x11),!_),o.arc(q.cx,q.cy,G,jn(q.y11,q.x11),jn(q.y01,q.x01),!_))):(o.moveTo(P,X),o.arc(0,0,y,w,A,!_)):o.moveTo(P,X),!(p>Gn)||!(k>Gn)?o.lineTo(Z,N):L>Gn?(j=Gm(Z,N,W,ne,p,-L,_),q=Gm(P,X,ae,me,p,-L,_),o.lineTo(j.cx+j.x01,j.cy+j.y01),L<U?o.arc(j.cx,j.cy,L,jn(j.y01,j.x01),jn(q.y01,q.x01),!_):(o.arc(j.cx,j.cy,L,jn(j.y01,j.x01),jn(j.y11,j.x11),!_),o.arc(0,0,p,jn(j.cy+j.y11,j.cx+j.x11),jn(q.cy+q.y11,q.cx+q.x11),_),o.arc(q.cx,q.cy,L,jn(q.y11,q.x11),jn(q.y01,q.x01),!_))):o.arc(0,0,p,T,C,_)}if(o.closePath(),d)return o=null,d+""||null}return f.centroid=function(){var d=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,h=(+r.apply(this,arguments)+ +a.apply(this,arguments))/2-Hf/2;return[tl(h)*d,Ca(h)*d]},f.innerRadius=function(d){return arguments.length?(e=typeof d=="function"?d:ct(+d),f):e},f.outerRadius=function(d){return arguments.length?(t=typeof d=="function"?d:ct(+d),f):t},f.cornerRadius=function(d){return arguments.length?(n=typeof d=="function"?d:ct(+d),f):n},f.padRadius=function(d){return arguments.length?(i=d==null?null:typeof d=="function"?d:ct(+d),f):i},f.startAngle=function(d){return arguments.length?(r=typeof d=="function"?d:ct(+d),f):r},f.endAngle=function(d){return arguments.length?(a=typeof d=="function"?d:ct(+d),f):a},f.padAngle=function(d){return arguments.length?(s=typeof d=="function"?d:ct(+d),f):s},f.context=function(d){return arguments.length?(o=d??null,f):o},f}function EB(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _B(e){this._context=e}_B.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function AT(e){return new _B(e)}function wB(e){return e[0]}function AB(e){return e[1]}function CB(e,t){var n=ct(!0),i=null,r=AT,a=null,s=lb(o);e=typeof e=="function"?e:e===void 0?wB:ct(e),t=typeof t=="function"?t:t===void 0?AB:ct(t);function o(l){var f,d=(l=EB(l)).length,h,p=!1,y;for(i==null&&(a=r(y=s())),f=0;f<=d;++f)!(f<d&&n(h=l[f],f,l))===p&&((p=!p)?a.lineStart():a.lineEnd()),p&&a.point(+e(h,f,l),+t(h,f,l));if(y)return a=null,y+""||null}return o.x=function(l){return arguments.length?(e=typeof l=="function"?l:ct(+l),o):e},o.y=function(l){return arguments.length?(t=typeof l=="function"?l:ct(+l),o):t},o.defined=function(l){return arguments.length?(n=typeof l=="function"?l:ct(!!l),o):n},o.curve=function(l){return arguments.length?(r=l,i!=null&&(a=r(i)),o):r},o.context=function(l){return arguments.length?(l==null?i=a=null:a=r(i=l),o):i},o}function $B(e,t,n){var i=null,r=ct(!0),a=null,s=AT,o=null,l=lb(f);e=typeof e=="function"?e:e===void 0?wB:ct(+e),t=typeof t=="function"?t:ct(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?AB:ct(+n);function f(h){var p,y,v,b=(h=EB(h)).length,S,_=!1,w,A=new Array(b),C=new Array(b);for(a==null&&(o=s(w=l())),p=0;p<=b;++p){if(!(p<b&&r(S=h[p],p,h))===_)if(_=!_)y=p,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),v=p-1;v>=y;--v)o.point(A[v],C[v]);o.lineEnd(),o.areaEnd()}_&&(A[p]=+e(S,p,h),C[p]=+t(S,p,h),o.point(i?+i(S,p,h):A[p],n?+n(S,p,h):C[p]))}if(w)return o=null,w+""||null}function d(){return CB().defined(r).curve(s).context(a)}return f.x=function(h){return arguments.length?(e=typeof h=="function"?h:ct(+h),i=null,f):e},f.x0=function(h){return arguments.length?(e=typeof h=="function"?h:ct(+h),f):e},f.x1=function(h){return arguments.length?(i=h==null?null:typeof h=="function"?h:ct(+h),f):i},f.y=function(h){return arguments.length?(t=typeof h=="function"?h:ct(+h),n=null,f):t},f.y0=function(h){return arguments.length?(t=typeof h=="function"?h:ct(+h),f):t},f.y1=function(h){return arguments.length?(n=h==null?null:typeof h=="function"?h:ct(+h),f):n},f.lineX0=f.lineY0=function(){return d().x(e).y(t)},f.lineY1=function(){return d().x(e).y(n)},f.lineX1=function(){return d().x(i).y(t)},f.defined=function(h){return arguments.length?(r=typeof h=="function"?h:ct(!!h),f):r},f.curve=function(h){return arguments.length?(s=h,a!=null&&(o=s(a)),f):s},f.context=function(h){return arguments.length?(h==null?a=o=null:o=s(a=h),f):a},f}const Bte={draw(e,t){const n=bl(t/Hf);e.moveTo(n,0),e.arc(0,0,n,0,xB)}};function Ute(e,t){let n=null,i=lb(r);e=typeof e=="function"?e:ct(e||Bte),t=typeof t=="function"?t:ct(t===void 0?64:+t);function r(){let a;if(n||(n=a=i()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),a)return n=null,a+""||null}return r.type=function(a){return arguments.length?(e=typeof a=="function"?a:ct(a),r):e},r.size=function(a){return arguments.length?(t=typeof a=="function"?a:ct(+a),r):t},r.context=function(a){return arguments.length?(n=a??null,r):n},r}function fu(){}function dy(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function cb(e){this._context=e}cb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:dy(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qte(e){return new cb(e)}function TB(e){this._context=e}TB.prototype={areaStart:fu,areaEnd:fu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Pte(e){return new TB(e)}function MB(e){this._context=e}MB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,i):this._context.moveTo(n,i);break;case 3:this._point=4;default:dy(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ite(e){return new MB(e)}function kB(e,t){this._basis=new cb(e),this._beta=t}kB.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var i=e[0],r=t[0],a=e[n]-i,s=t[n]-r,o=-1,l;++o<=n;)l=o/n,this._basis.point(this._beta*e[o]+(1-this._beta)*(i+l*a),this._beta*t[o]+(1-this._beta)*(r+l*s));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jte=(function e(t){function n(i){return t===1?new cb(i):new kB(i,t)}return n.beta=function(i){return e(+i)},n})(.85);function hy(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function CT(e,t){this._context=e,this._k=(1-t)/6}CT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:hy(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:hy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hte=(function e(t){function n(i){return new CT(i,t)}return n.tension=function(i){return e(+i)},n})(0);function $T(e,t){this._context=e,this._k=(1-t)/6}$T.prototype={areaStart:fu,areaEnd:fu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:hy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Gte=(function e(t){function n(i){return new $T(i,t)}return n.tension=function(i){return e(+i)},n})(0);function TT(e,t){this._context=e,this._k=(1-t)/6}TT.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:hy(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Yte=(function e(t){function n(i){return new TT(i,t)}return n.tension=function(i){return e(+i)},n})(0);function MT(e,t,n){var i=e._x1,r=e._y1,a=e._x2,s=e._y2;if(e._l01_a>Gn){var o=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,l=3*e._l01_a*(e._l01_a+e._l12_a);i=(i*o-e._x0*e._l12_2a+e._x2*e._l01_2a)/l,r=(r*o-e._y0*e._l12_2a+e._y2*e._l01_2a)/l}if(e._l23_a>Gn){var f=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,d=3*e._l23_a*(e._l23_a+e._l12_a);a=(a*f+e._x1*e._l23_2a-t*e._l12_2a)/d,s=(s*f+e._y1*e._l23_2a-n*e._l12_2a)/d}e._context.bezierCurveTo(i,r,a,s,e._x2,e._y2)}function OB(e,t){this._context=e,this._alpha=t}OB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:MT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xte=(function e(t){function n(i){return t?new OB(i,t):new CT(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function RB(e,t){this._context=e,this._alpha=t}RB.prototype={areaStart:fu,areaEnd:fu,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:MT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vte=(function e(t){function n(i){return t?new RB(i,t):new $T(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function DB(e,t){this._context=e,this._alpha=t}DB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,i=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:MT(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Wte=(function e(t){function n(i){return t?new DB(i,t):new TT(i,0)}return n.alpha=function(i){return e(+i)},n})(.5);function NB(e){this._context=e}NB.prototype={areaStart:fu,areaEnd:fu,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Qte(e){return new NB(e)}function l4(e){return e<0?-1:1}function c4(e,t,n){var i=e._x1-e._x0,r=t-e._x1,a=(e._y1-e._y0)/(i||r<0&&-0),s=(n-e._y1)/(r||i<0&&-0),o=(a*r+s*i)/(i+r);return(l4(a)+l4(s))*Math.min(Math.abs(a),Math.abs(s),.5*Math.abs(o))||0}function f4(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function y_(e,t,n){var i=e._x0,r=e._y0,a=e._x1,s=e._y1,o=(a-i)/3;e._context.bezierCurveTo(i+o,r+o*t,a-o,s-o*n,a,s)}function gy(e){this._context=e}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:y_(this,this._t0,f4(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,y_(this,f4(this,n=c4(this,e,t)),n);break;default:y_(this,this._t0,n=c4(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function zB(e){this._context=new FB(e)}(zB.prototype=Object.create(gy.prototype)).point=function(e,t){gy.prototype.point.call(this,t,e)};function FB(e){this._context=e}FB.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,i,r,a){this._context.bezierCurveTo(t,e,i,n,a,r)}};function Zte(e){return new gy(e)}function Kte(e){return new zB(e)}function LB(e){this._context=e}LB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var i=d4(e),r=d4(t),a=0,s=1;s<n;++a,++s)this._context.bezierCurveTo(i[0][a],r[0][a],i[1][a],r[1][a],e[s],t[s]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function d4(e){var t,n=e.length-1,i,r=new Array(n),a=new Array(n),s=new Array(n);for(r[0]=0,a[0]=2,s[0]=e[0]+2*e[1],t=1;t<n-1;++t)r[t]=1,a[t]=4,s[t]=4*e[t]+2*e[t+1];for(r[n-1]=2,a[n-1]=7,s[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)i=r[t]/a[t-1],a[t]-=i,s[t]-=i*s[t-1];for(r[n-1]=s[n-1]/a[n-1],t=n-2;t>=0;--t)r[t]=(s[t]-r[t+1])/a[t];for(a[n-1]=(e[n]+r[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-r[t+1];return[r,a]}function Jte(e){return new LB(e)}function fb(e,t){this._context=e,this._t=t}fb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function ene(e){return new fb(e,.5)}function tne(e){return new fb(e,0)}function nne(e){return new fb(e,1)}function au(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const ine=()=>typeof Image<"u"?Image:null;function Ja(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function _u(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const rA=Symbol("implicit");function kT(){var e=new M6,t=[],n=[],i=rA;function r(a){let s=e.get(a);if(s===void 0){if(i!==rA)return i;e.set(a,s=t.push(a)-1)}return n[s%n.length]}return r.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new M6;for(const s of a)e.has(s)||e.set(s,t.push(s)-1);return r},r.range=function(a){return arguments.length?(n=Array.from(a),r):n.slice()},r.unknown=function(a){return arguments.length?(i=a,r):i},r.copy=function(){return kT(t,n).unknown(i)},Ja.apply(r,arguments),r}function Md(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Lp(e,t){var n=Object.create(e.prototype);for(var i in t)n[i]=t[i];return n}function wu(){}var Nl=.7,Gf=1/Nl,Mf="\\s*([+-]?\\d+)\\s*",rp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",La="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",rne=/^#([0-9a-f]{3,8})$/,ane=new RegExp(`^rgb\\(${Mf},${Mf},${Mf}\\)$`),sne=new RegExp(`^rgb\\(${La},${La},${La}\\)$`),one=new RegExp(`^rgba\\(${Mf},${Mf},${Mf},${rp}\\)$`),une=new RegExp(`^rgba\\(${La},${La},${La},${rp}\\)$`),lne=new RegExp(`^hsl\\(${rp},${La},${La}\\)$`),cne=new RegExp(`^hsla\\(${rp},${La},${La},${rp}\\)$`),h4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Md(wu,ap,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:g4,formatHex:g4,formatHex8:fne,formatHsl:dne,formatRgb:p4,toString:p4});function g4(){return this.rgb().formatHex()}function fne(){return this.rgb().formatHex8()}function dne(){return BB(this).formatHsl()}function p4(){return this.rgb().formatRgb()}function ap(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=rne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?m4(t):n===3?new bn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Ym(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Ym(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ane.exec(e))?new bn(t[1],t[2],t[3],1):(t=sne.exec(e))?new bn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=one.exec(e))?Ym(t[1],t[2],t[3],t[4]):(t=une.exec(e))?Ym(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=lne.exec(e))?b4(t[1],t[2]/100,t[3]/100,1):(t=cne.exec(e))?b4(t[1],t[2]/100,t[3]/100,t[4]):h4.hasOwnProperty(e)?m4(h4[e]):e==="transparent"?new bn(NaN,NaN,NaN,0):null}function m4(e){return new bn(e>>16&255,e>>8&255,e&255,1)}function Ym(e,t,n,i){return i<=0&&(e=t=n=NaN),new bn(e,t,n,i)}function OT(e){return e instanceof wu||(e=ap(e)),e?(e=e.rgb(),new bn(e.r,e.g,e.b,e.opacity)):new bn}function du(e,t,n,i){return arguments.length===1?OT(e):new bn(e,t,n,i??1)}function bn(e,t,n,i){this.r=+e,this.g=+t,this.b=+n,this.opacity=+i}Md(bn,du,Lp(wu,{brighter(e){return e=e==null?Gf:Math.pow(Gf,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new bn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new bn(Al(this.r),Al(this.g),Al(this.b),py(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:y4,formatHex:y4,formatHex8:hne,formatRgb:v4,toString:v4}));function y4(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}`}function hne(){return`#${xl(this.r)}${xl(this.g)}${xl(this.b)}${xl((isNaN(this.opacity)?1:this.opacity)*255)}`}function v4(){const e=py(this.opacity);return`${e===1?"rgb(":"rgba("}${Al(this.r)}, ${Al(this.g)}, ${Al(this.b)}${e===1?")":`, ${e})`}`}function py(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Al(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function xl(e){return e=Al(e),(e<16?"0":"")+e.toString(16)}function b4(e,t,n,i){return i<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Qr(e,t,n,i)}function BB(e){if(e instanceof Qr)return new Qr(e.h,e.s,e.l,e.opacity);if(e instanceof wu||(e=ap(e)),!e)return new Qr;if(e instanceof Qr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,i=e.b/255,r=Math.min(t,n,i),a=Math.max(t,n,i),s=NaN,o=a-r,l=(a+r)/2;return o?(t===a?s=(n-i)/o+(n<i)*6:n===a?s=(i-t)/o+2:s=(t-n)/o+4,o/=l<.5?a+r:2-a-r,s*=60):o=l>0&&l<1?0:s,new Qr(s,o,l,e.opacity)}function my(e,t,n,i){return arguments.length===1?BB(e):new Qr(e,t,n,i??1)}function Qr(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Md(Qr,my,Lp(wu,{brighter(e){return e=e==null?Gf:Math.pow(Gf,e),new Qr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new Qr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,i=n+(n<.5?n:1-n)*t,r=2*n-i;return new bn(v_(e>=240?e-240:e+120,r,i),v_(e,r,i),v_(e<120?e+240:e-120,r,i),this.opacity)},clamp(){return new Qr(x4(this.h),Xm(this.s),Xm(this.l),py(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=py(this.opacity);return`${e===1?"hsl(":"hsla("}${x4(this.h)}, ${Xm(this.s)*100}%, ${Xm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function x4(e){return e=(e||0)%360,e<0?e+360:e}function Xm(e){return Math.max(0,Math.min(1,e||0))}function v_(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const UB=Math.PI/180,qB=180/Math.PI,yy=18,PB=.96422,IB=1,jB=.82521,HB=4/29,kf=6/29,GB=3*kf*kf,gne=kf*kf*kf;function YB(e){if(e instanceof Ba)return new Ba(e.l,e.a,e.b,e.opacity);if(e instanceof Bs)return XB(e);e instanceof bn||(e=OT(e));var t=E_(e.r),n=E_(e.g),i=E_(e.b),r=b_((.2225045*t+.7168786*n+.0606169*i)/IB),a,s;return t===n&&n===i?a=s=r:(a=b_((.4360747*t+.3850649*n+.1430804*i)/PB),s=b_((.0139322*t+.0971045*n+.7141733*i)/jB)),new Ba(116*r-16,500*(a-r),200*(r-s),e.opacity)}function vy(e,t,n,i){return arguments.length===1?YB(e):new Ba(e,t,n,i??1)}function Ba(e,t,n,i){this.l=+e,this.a=+t,this.b=+n,this.opacity=+i}Md(Ba,vy,Lp(wu,{brighter(e){return new Ba(this.l+yy*(e??1),this.a,this.b,this.opacity)},darker(e){return new Ba(this.l-yy*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=PB*x_(t),e=IB*x_(e),n=jB*x_(n),new bn(S_(3.1338561*t-1.6168667*e-.4906146*n),S_(-.9787684*t+1.9161415*e+.033454*n),S_(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function b_(e){return e>gne?Math.pow(e,1/3):e/GB+HB}function x_(e){return e>kf?e*e*e:GB*(e-HB)}function S_(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function E_(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function pne(e){if(e instanceof Bs)return new Bs(e.h,e.c,e.l,e.opacity);if(e instanceof Ba||(e=YB(e)),e.a===0&&e.b===0)return new Bs(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*qB;return new Bs(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function by(e,t,n,i){return arguments.length===1?pne(e):new Bs(e,t,n,i??1)}function Bs(e,t,n,i){this.h=+e,this.c=+t,this.l=+n,this.opacity=+i}function XB(e){if(isNaN(e.h))return new Ba(e.l,0,0,e.opacity);var t=e.h*UB;return new Ba(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Md(Bs,by,Lp(wu,{brighter(e){return new Bs(this.h,this.c,this.l+yy*(e??1),this.opacity)},darker(e){return new Bs(this.h,this.c,this.l-yy*(e??1),this.opacity)},rgb(){return XB(this).rgb()}}));var VB=-.14861,RT=1.78277,DT=-.29227,db=-.90649,sp=1.97294,S4=sp*db,E4=sp*RT,_4=RT*DT-db*VB;function mne(e){if(e instanceof Cl)return new Cl(e.h,e.s,e.l,e.opacity);e instanceof bn||(e=OT(e));var t=e.r/255,n=e.g/255,i=e.b/255,r=(_4*i+S4*t-E4*n)/(_4+S4-E4),a=i-r,s=(sp*(n-r)-DT*a)/db,o=Math.sqrt(s*s+a*a)/(sp*r*(1-r)),l=o?Math.atan2(s,a)*qB-120:NaN;return new Cl(l<0?l+360:l,o,r,e.opacity)}function aA(e,t,n,i){return arguments.length===1?mne(e):new Cl(e,t,n,i??1)}function Cl(e,t,n,i){this.h=+e,this.s=+t,this.l=+n,this.opacity=+i}Md(Cl,aA,Lp(wu,{brighter(e){return e=e==null?Gf:Math.pow(Gf,e),new Cl(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Nl:Math.pow(Nl,e),new Cl(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*UB,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),i=Math.cos(e),r=Math.sin(e);return new bn(255*(t+n*(VB*i+RT*r)),255*(t+n*(DT*i+db*r)),255*(t+n*(sp*i)),this.opacity)}}));function WB(e,t,n,i,r){var a=e*e,s=a*e;return((1-3*e+3*a-s)*t+(4-6*a+3*s)*n+(1+3*e+3*a-3*s)*i+s*r)/6}function QB(e){var t=e.length-1;return function(n){var i=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),r=e[i],a=e[i+1],s=i>0?e[i-1]:2*r-a,o=i<t-1?e[i+2]:2*a-r;return WB((n-i/t)*t,s,r,a,o)}}function ZB(e){var t=e.length;return function(n){var i=Math.floor(((n%=1)<0?++n:n)*t),r=e[(i+t-1)%t],a=e[i%t],s=e[(i+1)%t],o=e[(i+2)%t];return WB((n-i/t)*t,r,a,s,o)}}const hb=e=>()=>e;function KB(e,t){return function(n){return e+n*t}}function yne(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(i){return Math.pow(e+i*t,n)}}function gb(e,t){var n=t-e;return n?KB(e,n>180||n<-180?n-360*Math.round(n/360):n):hb(isNaN(e)?t:e)}function vne(e){return(e=+e)==1?xn:function(t,n){return n-t?yne(t,n,e):hb(isNaN(t)?n:t)}}function xn(e,t){var n=t-e;return n?KB(e,n):hb(isNaN(e)?t:e)}const sA=(function e(t){var n=vne(t);function i(r,a){var s=n((r=du(r)).r,(a=du(a)).r),o=n(r.g,a.g),l=n(r.b,a.b),f=xn(r.opacity,a.opacity);return function(d){return r.r=s(d),r.g=o(d),r.b=l(d),r.opacity=f(d),r+""}}return i.gamma=e,i})(1);function JB(e){return function(t){var n=t.length,i=new Array(n),r=new Array(n),a=new Array(n),s,o;for(s=0;s<n;++s)o=du(t[s]),i[s]=o.r||0,r[s]=o.g||0,a[s]=o.b||0;return i=e(i),r=e(r),a=e(a),o.opacity=1,function(l){return o.r=i(l),o.g=r(l),o.b=a(l),o+""}}}var bne=JB(QB),xne=JB(ZB);function NT(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,i=t.slice(),r;return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}}function eU(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Sne(e,t){return(eU(t)?NT:tU)(e,t)}function tU(e,t){var n=t?t.length:0,i=e?Math.min(n,e.length):0,r=new Array(i),a=new Array(n),s;for(s=0;s<i;++s)r[s]=Au(e[s],t[s]);for(;s<n;++s)a[s]=t[s];return function(o){for(s=0;s<i;++s)a[s]=r[s](o);return a}}function nU(e,t){var n=new Date;return e=+e,t=+t,function(i){return n.setTime(e*(1-i)+t*i),n}}function Vr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function iU(e,t){var n={},i={},r;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(r in t)r in e?n[r]=Au(e[r],t[r]):i[r]=t[r];return function(a){for(r in n)i[r]=n[r](a);return i}}var oA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,__=new RegExp(oA.source,"g");function Ene(e){return function(){return e}}function _ne(e){return function(t){return e(t)+""}}function rU(e,t){var n=oA.lastIndex=__.lastIndex=0,i,r,a,s=-1,o=[],l=[];for(e=e+"",t=t+"";(i=oA.exec(e))&&(r=__.exec(t));)(a=r.index)>n&&(a=t.slice(n,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,l.push({i:s,x:Vr(i,r)})),n=__.lastIndex;return n<t.length&&(a=t.slice(n),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?_ne(l[0].x):Ene(t):(t=l.length,function(f){for(var d=0,h;d<t;++d)o[(h=l[d]).i]=h.x(f);return o.join("")})}function Au(e,t){var n=typeof t,i;return t==null||n==="boolean"?hb(t):(n==="number"?Vr:n==="string"?(i=ap(t))?(t=i,sA):rU:t instanceof ap?sA:t instanceof Date?nU:eU(t)?NT:Array.isArray(t)?tU:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?iU:Vr)(e,t)}function wne(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Ane(e,t){var n=gb(+e,+t);return function(i){var r=n(i);return r-360*Math.floor(r/360)}}function Bp(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var w4=180/Math.PI,uA={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function aU(e,t,n,i,r,a){var s,o,l;return(s=Math.sqrt(e*e+t*t))&&(e/=s,t/=s),(l=e*n+t*i)&&(n-=e*l,i-=t*l),(o=Math.sqrt(n*n+i*i))&&(n/=o,i/=o,l/=o),e*i<t*n&&(e=-e,t=-t,l=-l,s=-s),{translateX:r,translateY:a,rotate:Math.atan2(t,e)*w4,skewX:Math.atan(l)*w4,scaleX:s,scaleY:o}}var Vm;function Cne(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?uA:aU(t.a,t.b,t.c,t.d,t.e,t.f)}function $ne(e){return e==null||(Vm||(Vm=document.createElementNS("http://www.w3.org/2000/svg","g")),Vm.setAttribute("transform",e),!(e=Vm.transform.baseVal.consolidate()))?uA:(e=e.matrix,aU(e.a,e.b,e.c,e.d,e.e,e.f))}function sU(e,t,n,i){function r(f){return f.length?f.pop()+" ":""}function a(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push("translate(",null,t,null,n);v.push({i:b-4,x:Vr(f,h)},{i:b-2,x:Vr(d,p)})}else(h||p)&&y.push("translate("+h+t+p+n)}function s(f,d,h,p){f!==d?(f-d>180?d+=360:d-f>180&&(f+=360),p.push({i:h.push(r(h)+"rotate(",null,i)-2,x:Vr(f,d)})):d&&h.push(r(h)+"rotate("+d+i)}function o(f,d,h,p){f!==d?p.push({i:h.push(r(h)+"skewX(",null,i)-2,x:Vr(f,d)}):d&&h.push(r(h)+"skewX("+d+i)}function l(f,d,h,p,y,v){if(f!==h||d!==p){var b=y.push(r(y)+"scale(",null,",",null,")");v.push({i:b-4,x:Vr(f,h)},{i:b-2,x:Vr(d,p)})}else(h!==1||p!==1)&&y.push(r(y)+"scale("+h+","+p+")")}return function(f,d){var h=[],p=[];return f=e(f),d=e(d),a(f.translateX,f.translateY,d.translateX,d.translateY,h,p),s(f.rotate,d.rotate,h,p),o(f.skewX,d.skewX,h,p),l(f.scaleX,f.scaleY,d.scaleX,d.scaleY,h,p),f=d=null,function(y){for(var v=-1,b=p.length,S;++v<b;)h[(S=p[v]).i]=S.x(y);return h.join("")}}}var Tne=sU(Cne,"px, ","px)","deg)"),Mne=sU($ne,", ",")",")"),kne=1e-12;function A4(e){return((e=Math.exp(e))+1/e)/2}function One(e){return((e=Math.exp(e))-1/e)/2}function Rne(e){return((e=Math.exp(2*e))-1)/(e+1)}const Dne=(function e(t,n,i){function r(a,s){var o=a[0],l=a[1],f=a[2],d=s[0],h=s[1],p=s[2],y=d-o,v=h-l,b=y*y+v*v,S,_;if(b<kne)_=Math.log(p/f)/t,S=function(M){return[o+M*y,l+M*v,f*Math.exp(t*M*_)]};else{var w=Math.sqrt(b),A=(p*p-f*f+i*b)/(2*f*n*w),C=(p*p-f*f-i*b)/(2*p*n*w),T=Math.log(Math.sqrt(A*A+1)-A),k=Math.log(Math.sqrt(C*C+1)-C);_=(k-T)/t,S=function(M){var R=M*_,z=A4(T),U=f/(n*w)*(z*Rne(t*R+T)-One(T));return[o+U*y,l+U*v,f*z/A4(t*R+T)]}}return S.duration=_*1e3*t/Math.SQRT2,S}return r.rho=function(a){var s=Math.max(.001,+a),o=s*s,l=o*o;return e(s,o,l)},r})(Math.SQRT2,2,4);function oU(e){return function(t,n){var i=e((t=my(t)).h,(n=my(n)).h),r=xn(t.s,n.s),a=xn(t.l,n.l),s=xn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.s=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Nne=oU(gb);var zne=oU(xn);function Fne(e,t){var n=xn((e=vy(e)).l,(t=vy(t)).l),i=xn(e.a,t.a),r=xn(e.b,t.b),a=xn(e.opacity,t.opacity);return function(s){return e.l=n(s),e.a=i(s),e.b=r(s),e.opacity=a(s),e+""}}function uU(e){return function(t,n){var i=e((t=by(t)).h,(n=by(n)).h),r=xn(t.c,n.c),a=xn(t.l,n.l),s=xn(t.opacity,n.opacity);return function(o){return t.h=i(o),t.c=r(o),t.l=a(o),t.opacity=s(o),t+""}}}const Lne=uU(gb);var Bne=uU(xn);function lU(e){return(function t(n){n=+n;function i(r,a){var s=e((r=aA(r)).h,(a=aA(a)).h),o=xn(r.s,a.s),l=xn(r.l,a.l),f=xn(r.opacity,a.opacity);return function(d){return r.h=s(d),r.s=o(d),r.l=l(Math.pow(d,n)),r.opacity=f(d),r+""}}return i.gamma=t,i})(1)}const Une=lU(gb);var qne=lU(xn);function zT(e,t){t===void 0&&(t=e,e=Au);for(var n=0,i=t.length-1,r=t[0],a=new Array(i<0?0:i);n<i;)a[n]=e(r,r=t[++n]);return function(s){var o=Math.max(0,Math.min(i-1,Math.floor(s*=i)));return a[o](s-o)}}function Pne(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e(i/(t-1));return n}const Ine=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Au,interpolateArray:Sne,interpolateBasis:QB,interpolateBasisClosed:ZB,interpolateCubehelix:Une,interpolateCubehelixLong:qne,interpolateDate:nU,interpolateDiscrete:wne,interpolateHcl:Lne,interpolateHclLong:Bne,interpolateHsl:Nne,interpolateHslLong:zne,interpolateHue:Ane,interpolateLab:Fne,interpolateNumber:Vr,interpolateNumberArray:NT,interpolateObject:iU,interpolateRgb:sA,interpolateRgbBasis:bne,interpolateRgbBasisClosed:xne,interpolateRound:Bp,interpolateString:rU,interpolateTransformCss:Tne,interpolateTransformSvg:Mne,interpolateZoom:Dne,piecewise:zT,quantize:Pne},Symbol.toStringTag,{value:"Module"}));function jne(e){return function(){return e}}function lA(e){return+e}var C4=[0,1];function Oi(e){return e}function cA(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jne(isNaN(t)?NaN:.5)}function Hne(e,t){var n;return e>t&&(n=e,e=t,t=n),function(i){return Math.max(e,Math.min(t,i))}}function Gne(e,t,n){var i=e[0],r=e[1],a=t[0],s=t[1];return r<i?(i=cA(r,i),a=n(s,a)):(i=cA(i,r),a=n(a,s)),function(o){return a(i(o))}}function Yne(e,t,n){var i=Math.min(e.length,t.length)-1,r=new Array(i),a=new Array(i),s=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++s<i;)r[s]=cA(e[s],e[s+1]),a[s]=n(t[s],t[s+1]);return function(o){var l=uu(e,o,1,i)-1;return a[l](r[l](o))}}function Up(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pb(){var e=C4,t=C4,n=Au,i,r,a,s=Oi,o,l,f;function d(){var p=Math.min(e.length,t.length);return s!==Oi&&(s=Hne(e[0],e[p-1])),o=p>2?Yne:Gne,l=f=null,h}function h(p){return p==null||isNaN(p=+p)?a:(l||(l=o(e.map(i),t,n)))(i(s(p)))}return h.invert=function(p){return s(r((f||(f=o(t,e.map(i),Vr)))(p)))},h.domain=function(p){return arguments.length?(e=Array.from(p,lA),d()):e.slice()},h.range=function(p){return arguments.length?(t=Array.from(p),d()):t.slice()},h.rangeRound=function(p){return t=Array.from(p),n=Bp,d()},h.clamp=function(p){return arguments.length?(s=p?!0:Oi,d()):s!==Oi},h.interpolate=function(p){return arguments.length?(n=p,d()):n},h.unknown=function(p){return arguments.length?(a=p,h):a},function(p,y){return i=p,r=y,d()}}function cU(){return pb()(Oi,Oi)}function fU(e,t,n,i){var r=lu(e,t,n),a;switch(i=Dl(i??",f"),i.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(a=L7(r,s))&&(i.precision=a),E$(i,s)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(a=B7(r,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=a-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(a=F7(r))&&(i.precision=a-(i.type==="%")*2);break}}return Hv(i)}function sc(e){var t=e.domain;return e.ticks=function(n){var i=t();return Iw(i[0],i[i.length-1],n??10)},e.tickFormat=function(n,i){var r=t();return fU(r[0],r[r.length-1],n??10,i)},e.nice=function(n){n==null&&(n=10);var i=t(),r=0,a=i.length-1,s=i[r],o=i[a],l,f,d=10;for(o<s&&(f=s,s=o,o=f,f=r,r=a,a=f);d-- >0;){if(f=jw(s,o,n),f===l)return i[r]=s,i[a]=o,t(i);if(f>0)s=Math.floor(s/f)*f,o=Math.ceil(o/f)*f;else if(f<0)s=Math.ceil(s*f)/f,o=Math.floor(o*f)/f;else break;l=f}return e},e}function dU(){var e=cU();return e.copy=function(){return Up(e,dU())},Ja.apply(e,arguments),sc(e)}function hU(e){var t;function n(i){return i==null||isNaN(i=+i)?t:i}return n.invert=n,n.domain=n.range=function(i){return arguments.length?(e=Array.from(i,lA),n):e.slice()},n.unknown=function(i){return arguments.length?(t=i,n):t},n.copy=function(){return hU(e).unknown(t)},e=arguments.length?Array.from(e,lA):[0,1],sc(n)}function gU(e,t){e=e.slice();var n=0,i=e.length-1,r=e[n],a=e[i],s;return a<r&&(s=n,n=i,i=s,s=r,r=a,a=s),e[n]=t.floor(r),e[i]=t.ceil(a),e}function $4(e){return Math.log(e)}function T4(e){return Math.exp(e)}function Xne(e){return-Math.log(-e)}function Vne(e){return-Math.exp(-e)}function Wne(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Qne(e){return e===10?Wne:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Zne(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function M4(e){return(t,n)=>-e(-t,n)}function FT(e){const t=e($4,T4),n=t.domain;let i=10,r,a;function s(){return r=Zne(i),a=Qne(i),n()[0]<0?(r=M4(r),a=M4(a),e(Xne,Vne)):e($4,T4),t}return t.base=function(o){return arguments.length?(i=+o,s()):i},t.domain=function(o){return arguments.length?(n(o),s()):n()},t.ticks=o=>{const l=n();let f=l[0],d=l[l.length-1];const h=d<f;h&&([f,d]=[d,f]);let p=r(f),y=r(d),v,b;const S=o==null?10:+o;let _=[];if(!(i%1)&&y-p<S){if(p=Math.floor(p),y=Math.ceil(y),f>0){for(;p<=y;++p)for(v=1;v<i;++v)if(b=p<0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}}else for(;p<=y;++p)for(v=i-1;v>=1;--v)if(b=p>0?v/a(-p):v*a(p),!(b<f)){if(b>d)break;_.push(b)}_.length*2<S&&(_=Iw(f,d,S))}else _=Iw(p,y,Math.min(y-p,S)).map(a);return h?_.reverse():_},t.tickFormat=(o,l)=>{if(o==null&&(o=10),l==null&&(l=i===10?"s":","),typeof l!="function"&&(!(i%1)&&(l=Dl(l)).precision==null&&(l.trim=!0),l=Hv(l)),o===1/0)return l;const f=Math.max(1,i*o/t.ticks().length);return d=>{let h=d/a(Math.round(r(d)));return h*i<i-.5&&(h*=i),h<=f?l(d):""}},t.nice=()=>n(gU(n(),{floor:o=>a(Math.floor(r(o))),ceil:o=>a(Math.ceil(r(o)))})),t}function pU(){const e=FT(pb()).domain([1,10]);return e.copy=()=>Up(e,pU()).base(e.base()),Ja.apply(e,arguments),e}function k4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function O4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function LT(e){var t=1,n=e(k4(t),O4(t));return n.constant=function(i){return arguments.length?e(k4(t=+i),O4(t)):t},sc(n)}function mU(){var e=LT(pb());return e.copy=function(){return Up(e,mU()).constant(e.constant())},Ja.apply(e,arguments)}function R4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Kne(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jne(e){return e<0?-e*e:e*e}function BT(e){var t=e(Oi,Oi),n=1;function i(){return n===1?e(Oi,Oi):n===.5?e(Kne,Jne):e(R4(n),R4(1/n))}return t.exponent=function(r){return arguments.length?(n=+r,i()):n},sc(t)}function UT(){var e=BT(pb());return e.copy=function(){return Up(e,UT()).exponent(e.exponent())},Ja.apply(e,arguments),e}function eie(){return UT.apply(null,arguments).exponent(.5)}function yU(){var e=[],t=[],n=[],i;function r(){var s=0,o=Math.max(1,t.length);for(n=new Array(o-1);++s<o;)n[s-1]=k7(e,s/o);return a}function a(s){return s==null||isNaN(s=+s)?i:t[uu(n,s)]}return a.invertExtent=function(s){var o=t.indexOf(s);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},a.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let o of s)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Ps),r()},a.range=function(s){return arguments.length?(t=Array.from(s),r()):t.slice()},a.unknown=function(s){return arguments.length?(i=s,a):i},a.quantiles=function(){return n.slice()},a.copy=function(){return yU().domain(e).range(t).unknown(i)},Ja.apply(a,arguments)}function vU(){var e=0,t=1,n=1,i=[.5],r=[0,1],a;function s(l){return l!=null&&l<=l?r[uu(i,l,0,n)]:a}function o(){var l=-1;for(i=new Array(n);++l<n;)i[l]=((l+1)*t-(l-n)*e)/(n+1);return s}return s.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,o()):[e,t]},s.range=function(l){return arguments.length?(n=(r=Array.from(l)).length-1,o()):r.slice()},s.invertExtent=function(l){var f=r.indexOf(l);return f<0?[NaN,NaN]:f<1?[e,i[0]]:f>=n?[i[n-1],t]:[i[f-1],i[f]]},s.unknown=function(l){return arguments.length&&(a=l),s},s.thresholds=function(){return i.slice()},s.copy=function(){return vU().domain([e,t]).range(r).unknown(a)},Ja.apply(sc(s),arguments)}function bU(){var e=[.5],t=[0,1],n,i=1;function r(a){return a!=null&&a<=a?t[uu(e,a,0,i)]:n}return r.domain=function(a){return arguments.length?(e=Array.from(a),i=Math.min(e.length,t.length-1),r):e.slice()},r.range=function(a){return arguments.length?(t=Array.from(a),i=Math.min(e.length,t.length-1),r):t.slice()},r.invertExtent=function(a){var s=t.indexOf(a);return[e[s-1],e[s]]},r.unknown=function(a){return arguments.length?(n=a,r):n},r.copy=function(){return bU().domain(e).range(t).unknown(n)},Ja.apply(r,arguments)}function tie(e){return new Date(e)}function nie(e){return e instanceof Date?+e:+new Date(+e)}function qT(e,t,n,i,r,a,s,o,l,f){var d=cU(),h=d.invert,p=d.domain,y=f(".%L"),v=f(":%S"),b=f("%I:%M"),S=f("%I %p"),_=f("%a %d"),w=f("%b %d"),A=f("%B"),C=f("%Y");function T(k){return(l(k)<k?y:o(k)<k?v:s(k)<k?b:a(k)<k?S:i(k)<k?r(k)<k?_:w:n(k)<k?A:C)(k)}return d.invert=function(k){return new Date(h(k))},d.domain=function(k){return arguments.length?p(Array.from(k,nie)):p().map(tie)},d.ticks=function(k){var M=p();return e(M[0],M[M.length-1],k??10)},d.tickFormat=function(k,M){return M==null?T:f(M)},d.nice=function(k){var M=p();return(!k||typeof k.range!="function")&&(k=t(M[0],M[M.length-1],k??10)),k?p(gU(M,k)):d},d.copy=function(){return Up(d,qT(e,t,n,i,r,a,s,o,l,f))},d}function iie(){return Ja.apply(qT(lK,cK,Ha,Jg,wd,Is,Xv,Gv,Ls,$$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rie(){return Ja.apply(qT(oK,uK,Ga,ep,Ad,iu,Vv,Yv,Ls,T$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mb(){var e=0,t=1,n,i,r,a,s=Oi,o=!1,l;function f(h){return h==null||isNaN(h=+h)?l:s(r===0?.5:(h=(a(h)-n)*r,o?Math.max(0,Math.min(1,h)):h))}f.domain=function(h){return arguments.length?([e,t]=h,n=a(e=+e),i=a(t=+t),r=n===i?0:1/(i-n),f):[e,t]},f.clamp=function(h){return arguments.length?(o=!!h,f):o},f.interpolator=function(h){return arguments.length?(s=h,f):s};function d(h){return function(p){var y,v;return arguments.length?([y,v]=p,s=h(y,v),f):[s(0),s(1)]}}return f.range=d(Au),f.rangeRound=d(Bp),f.unknown=function(h){return arguments.length?(l=h,f):l},function(h){return a=h,n=h(e),i=h(t),r=n===i?0:1/(i-n),f}}function Cu(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PT(){var e=sc(mb()(Oi));return e.copy=function(){return Cu(e,PT())},_u.apply(e,arguments)}function xU(){var e=FT(mb()).domain([1,10]);return e.copy=function(){return Cu(e,xU()).base(e.base())},_u.apply(e,arguments)}function SU(){var e=LT(mb());return e.copy=function(){return Cu(e,SU()).constant(e.constant())},_u.apply(e,arguments)}function IT(){var e=BT(mb());return e.copy=function(){return Cu(e,IT()).exponent(e.exponent())},_u.apply(e,arguments)}function aie(){return IT.apply(null,arguments).exponent(.5)}function yb(){var e=0,t=.5,n=1,i=1,r,a,s,o,l,f=Oi,d,h=!1,p;function y(b){return isNaN(b=+b)?p:(b=.5+((b=+d(b))-a)*(i*b<i*a?o:l),f(h?Math.max(0,Math.min(1,b)):b))}y.domain=function(b){return arguments.length?([e,t,n]=b,r=d(e=+e),a=d(t=+t),s=d(n=+n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y):[e,t,n]},y.clamp=function(b){return arguments.length?(h=!!b,y):h},y.interpolator=function(b){return arguments.length?(f=b,y):f};function v(b){return function(S){var _,w,A;return arguments.length?([_,w,A]=S,f=zT(b,[_,w,A]),y):[f(0),f(.5),f(1)]}}return y.range=v(Au),y.rangeRound=v(Bp),y.unknown=function(b){return arguments.length?(p=b,y):p},function(b){return d=b,r=b(e),a=b(t),s=b(n),o=r===a?0:.5/(a-r),l=a===s?0:.5/(s-a),i=a<r?-1:1,y}}function EU(){var e=sc(yb()(Oi));return e.copy=function(){return Cu(e,EU())},_u.apply(e,arguments)}function _U(){var e=FT(yb()).domain([.1,1,10]);return e.copy=function(){return Cu(e,_U()).base(e.base())},_u.apply(e,arguments)}function wU(){var e=LT(yb());return e.copy=function(){return Cu(e,wU()).constant(e.constant())},_u.apply(e,arguments)}function jT(){var e=BT(yb());return e.copy=function(){return Cu(e,jT()).exponent(e.exponent())},_u.apply(e,arguments)}function sie(){return jT.apply(null,arguments).exponent(.5)}function es(e){for(var t=e.length/6|0,n=new Array(t),i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}const oie=es("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),uie=es("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),lie=es("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),cie=es("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),fie=es("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),die=es("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),hie=es("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),gie=es("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),pie=es("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),mie=es("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function HT(e,t,n){const i=e-t+n*2;return e?i>0?i:1:0}const yie="identity",Yf="linear",Qs="log",qp="pow",Pp="sqrt",vb="symlog",zl="time",Fl="utc",Ua="sequential",kd="diverging",Xf="quantile",bb="quantize",xb="threshold",GT="ordinal",fA="point",AU="band",YT="bin-ordinal",dn="continuous",Ip="discrete",jp="discretizing",Lr="interpolating",XT="temporal";function vie(e){return function(t){let n=t[0],i=t[1],r;return i<n&&(r=n,n=i,i=r),[e.invert(n),e.invert(i)]}}function bie(e){return function(t){const n=e.range();let i=t[0],r=t[1],a=-1,s,o,l,f;for(r<i&&(o=i,i=r,r=o),l=0,f=n.length;l<f;++l)n[l]>=i&&n[l]<=r&&(a<0&&(a=l),s=l);if(!(a<0))return i=e.invertExtent(n[a]),r=e.invertExtent(n[s]),[i[0]===void 0?i[1]:i[0],r[1]===void 0?r[0]:r[1]]}}function VT(){const e=kT().unknown(void 0),t=e.domain,n=e.range;let i=[0,1],r,a,s=!1,o=0,l=0,f=.5;delete e.unknown;function d(){const h=t().length,p=i[1]<i[0],y=i[1-p],v=HT(h,o,l);let b=i[p-0];r=(y-b)/(v||1),s&&(r=Math.floor(r)),b+=(y-b-r*(h-o))*f,a=r*(1-o),s&&(b=Math.round(b),a=Math.round(a));const S=tr(h).map(_=>b+r*_);return n(p?S.reverse():S)}return e.domain=function(h){return arguments.length?(t(h),d()):t()},e.range=function(h){return arguments.length?(i=[+h[0],+h[1]],d()):i.slice()},e.rangeRound=function(h){return i=[+h[0],+h[1]],s=!0,d()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(h){return arguments.length?(s=!!h,d()):s},e.padding=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),o=l,d()):o},e.paddingInner=function(h){return arguments.length?(o=Math.max(0,Math.min(1,h)),d()):o},e.paddingOuter=function(h){return arguments.length?(l=Math.max(0,Math.min(1,h)),d()):l},e.align=function(h){return arguments.length?(f=Math.max(0,Math.min(1,h)),d()):f},e.invertRange=function(h){if(h[0]==null||h[1]==null)return;const p=i[1]<i[0],y=p?n().reverse():n(),v=y.length-1;let b=+h[0],S=+h[1],_,w,A;if(!(b!==b||S!==S)&&(S<b&&(A=b,b=S,S=A),!(S<y[0]||b>i[1-p])))return _=Math.max(0,uu(y,b)-1),w=b===S?_:uu(y,S)-1,b-y[_]>a+1e-10&&++_,p&&(A=_,_=v-w,w=v-A),_>w?void 0:t().slice(_,w+1)},e.invert=function(h){const p=e.invertRange([h,h]);return p&&p[0]},e.copy=function(){return VT().domain(t()).range(i).round(s).paddingInner(o).paddingOuter(l).align(f)},d()}function CU(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return CU(t())},e}function xie(){return CU(VT().paddingInner(1))}var Sie=Array.prototype.map;function Eie(e){return Sie.call(e,Wn)}const _ie=Array.prototype.slice;function $U(){let e=[],t=[];function n(i){return i==null||i!==i?void 0:t[(uu(e,i)-1)%t.length]}return n.domain=function(i){return arguments.length?(e=Eie(i),n):e.slice()},n.range=function(i){return arguments.length?(t=_ie.call(i),n):t.slice()},n.tickFormat=function(i,r){return fU(e[0],Ke(e),i??10,r)},n.copy=function(){return $U().domain(n.domain()).range(n.range())},n}const xy=new Map,TU=Symbol("vega_scale");function MU(e){return e[TU]=!0,e}function D4(e){return e&&e[TU]===!0}function wie(e,t,n){const i=function(){const a=t();return a.invertRange||(a.invertRange=a.invert?vie(a):a.invertExtent?bie(a):void 0),a.type=e,MU(a)};return i.metadata=ra(ve(n)),i}function ot(e,t,n){return arguments.length>1?(xy.set(e,wie(e,t,n)),this):kU(e)?xy.get(e):void 0}ot(yie,hU);ot(Yf,dU,dn);ot(Qs,pU,[dn,Qs]);ot(qp,UT,dn);ot(Pp,eie,dn);ot(vb,mU,dn);ot(zl,iie,[dn,XT]);ot(Fl,rie,[dn,XT]);ot(Ua,PT,[dn,Lr]);ot(`${Ua}-${Yf}`,PT,[dn,Lr]);ot(`${Ua}-${Qs}`,xU,[dn,Lr,Qs]);ot(`${Ua}-${qp}`,IT,[dn,Lr]);ot(`${Ua}-${Pp}`,aie,[dn,Lr]);ot(`${Ua}-${vb}`,SU,[dn,Lr]);ot(`${kd}-${Yf}`,EU,[dn,Lr]);ot(`${kd}-${Qs}`,_U,[dn,Lr,Qs]);ot(`${kd}-${qp}`,jT,[dn,Lr]);ot(`${kd}-${Pp}`,sie,[dn,Lr]);ot(`${kd}-${vb}`,wU,[dn,Lr]);ot(Xf,yU,[jp,Xf]);ot(bb,vU,jp);ot(xb,bU,jp);ot(YT,$U,[Ip,jp]);ot(GT,kT,Ip);ot(AU,VT,Ip);ot(fA,xie,Ip);function kU(e){return xy.has(e)}function oc(e,t){const n=xy.get(e);return n&&n.metadata[t]}function WT(e){return oc(e,dn)}function Vf(e){return oc(e,Ip)}function dA(e){return oc(e,jp)}function OU(e){return oc(e,Qs)}function Aie(e){return oc(e,XT)}function RU(e){return oc(e,Lr)}function DU(e){return oc(e,Xf)}const Cie=["clamp","base","constant","exponent"];function NU(e,t){const n=t[0],i=Ke(t)-n;return function(r){return e(n+r*i)}}function Sb(e,t,n){return zT(QT(t||"rgb",n),e)}function zU(e,t){const n=new Array(t),i=t+1;for(let r=0;r<t;)n[r]=e(++r/i);return n}function FU(e,t,n){const i=n-t;let r,a,s;return!i||!Number.isFinite(i)?ni(.5):(r=(a=e.type).indexOf("-"),a=r<0?a:a.slice(r+1),s=ot(a)().domain([t,n]).range([0,1]),Cie.forEach(o=>e[o]?s[o](e[o]()):0),s)}function QT(e,t){const n=Ine[$ie(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function $ie(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const Tie={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Mie={accent:uie,category10:oie,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:lie,observable10:cie,paired:fie,pastel1:die,pastel2:hie,set1:gie,set2:pie,set3:mie,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function LU(e){if(re(e))return e;const t=e.length/6|0,n=new Array(t);for(let i=0;i<t;)n[i]="#"+e.slice(i*6,++i*6);return n}function BU(e,t){for(const n in e)ZT(n,t(e[n]))}const N4={};BU(Mie,LU);BU(Tie,e=>Sb(LU(e)));function ZT(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(N4[e]=t,this):N4[e]}const k1="symbol",kie="discrete",Oie="gradient",Rie=e=>re(e)?e.map(t=>String(t)):String(e),Die=(e,t)=>e[1]-t[1],Nie=(e,t)=>t[1]-e[1];function KT(e,t,n){let i;return at(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(Dp(e.domain())/n||1)+1))),xe(t)&&(i=t.step,t=t.interval),Ee(t)&&(t=e.type===zl?Cd(t):e.type==Fl?$d(t):te("Only time and utc scales accept interval strings."),i&&(t=t.every(i))),t}function UU(e,t,n){let i=e.range(),r=i[0],a=Ke(i),s=Die;if(r>a&&(i=a,a=r,r=i,s=Nie),r=Math.floor(r),a=Math.ceil(a),t=t.map(o=>[o,e(o)]).filter(o=>r<=o[1]&&o[1]<=a).sort(s).map(o=>o[0]),n>0&&t.length>1){const o=[t[0],Ke(t)];for(;t.length>n&&t.length>=3;)t=t.filter((l,f)=>!(f%2));t.length<3&&(t=o)}return t}function JT(e,t){return e.bins?UU(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function qU(e,t,n,i,r,a){const s=t.type;let o=Rie;if(s===zl||r===zl)o=e.timeFormat(i);else if(s===Fl||r===Fl)o=e.utcFormat(i);else if(OU(s)){const l=e.formatFloat(i);if(a||t.bins)o=l;else{const f=PU(t,n,!1);o=d=>f(d)?l(d):""}}else if(t.tickFormat){const l=t.domain();o=e.formatSpan(l[0],l[l.length-1],n,i)}else i&&(o=e.format(i));return o}function PU(e,t,n){const i=JT(e,t),r=e.base(),a=Math.log(r),s=Math.max(1,r*t/i.length),o=l=>{let f=l/Math.pow(r,Math.round(Math.log(l)/a));return f*r<r-.5&&(f*=r),f<=s};return n?i.filter(o):o}const hA={[Xf]:"quantiles",[bb]:"thresholds",[xb]:"domain"},IU={[Xf]:"quantiles",[bb]:"domain"};function jU(e,t){return e.bins?Lie(e.bins):e.type===Qs?PU(e,t,!0):hA[e.type]?Fie(e[hA[e.type]]()):JT(e,t)}function zie(e,t,n){const i=t[IU[t.type]](),r=i.length;let a=r>1?i[1]-i[0]:i[0],s;for(s=1;s<r;++s)a=Math.min(a,i[s]-i[s-1]);return e.formatSpan(0,a,30,n)}function Fie(e){const t=[-1/0].concat(e);return t.max=1/0,t}function Lie(e){const t=e.slice(0,-1);return t.max=Ke(e),t}const Bie=e=>hA[e.type]||e.bins;function HU(e,t,n,i,r,a,s){const o=IU[t.type]&&a!==zl&&a!==Fl?zie(e,t,r):qU(e,t,n,r,a,s);return i===k1&&Bie(t)?Uie(o):i===kie?qie(o):Pie(o)}const Uie=e=>(t,n,i)=>{const r=z4(i[n+1],z4(i.max,1/0)),a=F4(t,e),s=F4(r,e);return a&&s?a+" – "+s:s?"< "+s:"≥ "+a},z4=(e,t)=>e??t,qie=e=>(t,n)=>n?e(t):null,Pie=e=>t=>e(t),F4=(e,t)=>Number.isFinite(e)?t(e):null;function Iie(e){const t=e.domain(),n=t.length-1;let i=+t[0],r=+Ke(t),a=r-i;if(e.type===xb){const s=n?a/n:.1;i-=s,r+=s,a=r-i}return s=>(s-i)/a}function jie(e,t,n,i){const r=i||t.type;return Ee(n)&&Aie(r)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&r===zl?e.timeFormat("%A, %d %B %Y, %X"):!n&&r===Fl?e.utcFormat("%A, %d %B %Y, %X UTC"):HU(e,t,5,null,n,i,!0)}function GU(e,t,n){n=n||{};const i=Math.max(3,n.maxlen||7),r=jie(e,t,n.format,n.formatType);if(dA(t.type)){const a=jU(t).slice(1).map(r),s=a.length;return`${s} boundar${s===1?"y":"ies"}: ${a.join(", ")}`}else if(Vf(t.type)){const a=t.domain(),s=a.length,o=s>i?a.slice(0,i-2).map(r).join(", ")+", ending with "+a.slice(-1).map(r):a.map(r).join(", ");return`${s} value${s===1?"":"s"}: ${o}`}else{const a=t.domain();return`values from ${r(a[0])} to ${r(Ke(a))}`}}let YU=0;function Hie(){YU=0}const Sy="p_";function e3(e){return e&&e.gradient}function XU(e,t,n){const i=e.gradient;let r=e.id,a=i==="radial"?Sy:"";return r||(r=e.id="gradient_"+YU++,i==="radial"?(e.x1=$a(e.x1,.5),e.y1=$a(e.y1,.5),e.r1=$a(e.r1,0),e.x2=$a(e.x2,.5),e.y2=$a(e.y2,.5),e.r2=$a(e.r2,.5),a=Sy):(e.x1=$a(e.x1,0),e.y1=$a(e.y1,0),e.x2=$a(e.x2,1),e.y2=$a(e.y2,0))),t[r]=e,"url("+(n||"")+"#"+a+r+")"}function $a(e,t){return e??t}function VU(e,t){var n=[],i;return i={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(r,a){return n.push({offset:r,color:a}),i}}}const L4={basis:{curve:qte},"basis-closed":{curve:Pte},"basis-open":{curve:Ite},bundle:{curve:jte,tension:"beta",value:.85},cardinal:{curve:Hte,tension:"tension",value:0},"cardinal-open":{curve:Yte,tension:"tension",value:0},"cardinal-closed":{curve:Gte,tension:"tension",value:0},"catmull-rom":{curve:Xte,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Vte,tension:"alpha",value:.5},"catmull-rom-open":{curve:Wte,tension:"alpha",value:.5},linear:{curve:AT},"linear-closed":{curve:Qte},monotone:{horizontal:Kte,vertical:Zte},natural:{curve:Jte},step:{curve:ene},"step-after":{curve:nne},"step-before":{curve:tne}};function t3(e,t,n){var i=Se(L4,e)&&L4[e],r=null;return i&&(r=i.curve||i[t||"vertical"],i.tension&&n!=null&&(r=r[i.tension](n))),r}const Gie={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Yie=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Xie=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,Vie=/^((\s+,?\s*)|(,\s*))/,Wie=/^[01]/;function Wf(e){const t=[];return(e.match(Yie)||[]).forEach(i=>{let r=i[0];const a=r.toLowerCase(),s=Gie[a],o=Qie(a,s,i.slice(1).trim()),l=o.length;if(l<s||l&&l%s!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([r,...o.slice(0,s)]),l!==s){a==="m"&&(r=r==="M"?"L":"l");for(let f=s;f<l;f+=s)t.push([r,...o.slice(f,f+s)])}}),t}function Qie(e,t,n){const i=[];for(let r=0;t&&r<n.length;)for(let a=0;a<t;++a){const s=e==="a"&&(a===3||a===4)?Wie:Xie,o=n.slice(r).match(s);if(o===null)throw Error("Invalid SVG path, incorrect parameter type");r+=o[0].length,i.push(+o[0]);const l=n.slice(r).match(Vie);l!==null&&(r+=l[0].length)}return i}const hu=Math.PI/180,Zie=1e-14,pl=Math.PI/2,Ra=Math.PI*2,uf=Math.sqrt(3)/2;var w_={},A_={},WU=[].join;function Kie(e,t,n,i,r,a,s,o,l){const f=WU.call(arguments);if(w_[f])return w_[f];const d=s*hu,h=Math.sin(d),p=Math.cos(d);n=Math.abs(n),i=Math.abs(i);const y=p*(o-e)*.5+h*(l-t)*.5,v=p*(l-t)*.5-h*(o-e)*.5;let b=y*y/(n*n)+v*v/(i*i);b>1&&(b=Math.sqrt(b),n*=b,i*=b);const S=p/n,_=h/n,w=-h/i,A=p/i,C=S*o+_*l,T=w*o+A*l,k=S*e+_*t,M=w*e+A*t;let z=1/((k-C)*(k-C)+(M-T)*(M-T))-.25;z<0&&(z=0);let U=Math.sqrt(z);a==r&&(U=-U);const L=.5*(C+k)-U*(M-T),G=.5*(T+M)+U*(k-C),j=Math.atan2(T-G,C-L);let F=Math.atan2(M-G,k-L)-j;F<0&&a===1?F+=Ra:F>0&&a===0&&(F-=Ra);const D=Math.ceil(Math.abs(F/(pl+.001))),P=[];for(let X=0;X<D;++X){const Z=j+X*F/D,N=j+(X+1)*F/D;P[X]=[L,G,Z,N,n,i,h,p]}return w_[f]=P}function Jie(e){const t=WU.call(e);if(A_[t])return A_[t];var n=e[0],i=e[1],r=e[2],a=e[3],s=e[4],o=e[5],l=e[6],f=e[7];const d=f*s,h=-l*o,p=l*s,y=f*o,v=Math.cos(r),b=Math.sin(r),S=Math.cos(a),_=Math.sin(a),w=.5*(a-r),A=Math.sin(w*.5),C=8/3*A*A/Math.sin(w),T=n+v-C*b,k=i+b+C*v,M=n+S,R=i+_,z=M+C*_,U=R-C*S;return A_[t]=[d*T+h*k,p*T+y*k,d*z+h*U,p*z+y*U,d*M+h*R,p*M+y*R]}const xr=["l",0,0,0,0,0,0,0];function ere(e,t,n){const i=xr[0]=e[0];if(i==="a"||i==="A")xr[1]=t*e[1],xr[2]=n*e[2],xr[3]=e[3],xr[4]=e[4],xr[5]=e[5],xr[6]=t*e[6],xr[7]=n*e[7];else if(i==="h"||i==="H")xr[1]=t*e[1];else if(i==="v"||i==="V")xr[1]=n*e[1];else for(var r=1,a=e.length;r<a;++r)xr[r]=(r%2==1?t:n)*e[r];return xr}function op(e,t,n,i,r,a){var s,o=null,l=0,f=0,d=0,h=0,p,y,v,b,S=0,_=0;n==null&&(n=0),i==null&&(i=0),r==null&&(r=1),a==null&&(a=r),e.beginPath&&e.beginPath();for(var w=0,A=t.length;w<A;++w){switch(s=t[w],(r!==1||a!==1)&&(s=ere(s,r,a)),s[0]){case"l":l+=s[1],f+=s[2],e.lineTo(l+n,f+i);break;case"L":l=s[1],f=s[2],e.lineTo(l+n,f+i);break;case"h":l+=s[1],e.lineTo(l+n,f+i);break;case"H":l=s[1],e.lineTo(l+n,f+i);break;case"v":f+=s[1],e.lineTo(l+n,f+i);break;case"V":f=s[1],e.lineTo(l+n,f+i);break;case"m":l+=s[1],f+=s[2],S=l,_=f,e.moveTo(l+n,f+i);break;case"M":l=s[1],f=s[2],S=l,_=f,e.moveTo(l+n,f+i);break;case"c":p=l+s[5],y=f+s[6],d=l+s[3],h=f+s[4],e.bezierCurveTo(l+s[1]+n,f+s[2]+i,d+n,h+i,p+n,y+i),l=p,f=y;break;case"C":l=s[5],f=s[6],d=s[3],h=s[4],e.bezierCurveTo(s[1]+n,s[2]+i,d+n,h+i,l+n,f+i);break;case"s":p=l+s[3],y=f+s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,l+s[1]+n,f+s[2]+i,p+n,y+i),d=l+s[1],h=f+s[2],l=p,f=y;break;case"S":p=s[3],y=s[4],d=2*l-d,h=2*f-h,e.bezierCurveTo(d+n,h+i,s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"q":p=l+s[3],y=f+s[4],d=l+s[1],h=f+s[2],e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"Q":p=s[3],y=s[4],e.quadraticCurveTo(s[1]+n,s[2]+i,p+n,y+i),l=p,f=y,d=s[1],h=s[2];break;case"t":p=l+s[1],y=f+s[2],o[0].match(/[QqTt]/)===null?(d=l,h=f):o[0]==="t"?(d=2*l-v,h=2*f-b):o[0]==="q"&&(d=2*l-d,h=2*f-h),v=d,b=h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y,d=l+s[1],h=f+s[2];break;case"T":p=s[1],y=s[2],d=2*l-d,h=2*f-h,e.quadraticCurveTo(d+n,h+i,p+n,y+i),l=p,f=y;break;case"a":B4(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+l+n,s[7]+f+i]),l+=s[6],f+=s[7];break;case"A":B4(e,l+n,f+i,[s[1],s[2],s[3],s[4],s[5],s[6]+n,s[7]+i]),l=s[6],f=s[7];break;case"z":case"Z":l=S,f=_,e.closePath();break}o=s}}function B4(e,t,n,i){const r=Kie(i[5],i[6],i[0],i[1],i[3],i[4],i[2],t,n);for(let a=0;a<r.length;++a){const s=Jie(r[a]);e.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5])}}const U4=.5773502691896257,q4={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Ra)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/2.5;e.moveTo(-n,-i),e.lineTo(-n,i),e.lineTo(-i,i),e.lineTo(-i,n),e.lineTo(i,n),e.lineTo(i,i),e.lineTo(n,i),e.lineTo(n,-i),e.lineTo(i,-i),e.lineTo(i,-n),e.lineTo(-i,-n),e.lineTo(-i,-i),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),i=-n/2;e.rect(i,i,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,i=n/7,r=n/2.5,a=n/8;e.moveTo(-i,n),e.lineTo(i,n),e.lineTo(i,-a),e.lineTo(r,-a),e.lineTo(0,-n),e.lineTo(-r,-a),e.lineTo(-i,-a),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n,r=i-n*U4,a=n/4;e.moveTo(0,-i-r),e.lineTo(-a,i-r),e.lineTo(a,i-r),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n,r=i-n*U4;e.moveTo(0,-i-r),e.lineTo(-n,i-r),e.lineTo(n,i-r),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n;e.moveTo(0,-i),e.lineTo(-n,i),e.lineTo(n,i),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n;e.moveTo(0,i),e.lineTo(-n,-i),e.lineTo(n,-i),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n;e.moveTo(i,0),e.lineTo(-i,-n),e.lineTo(-i,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,i=uf*n;e.moveTo(-i,0),e.lineTo(i,-n),e.lineTo(i,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function QU(e){return Se(q4,e)?q4[e]:tre(e)}var C_={};function tre(e){if(!Se(C_,e)){const t=Wf(e);C_[e]={draw:function(n,i){op(n,t,0,0,Math.sqrt(i)/2)}}}return C_[e]}const zo=.448084975506;function nre(e){return e.x}function ire(e){return e.y}function rre(e){return e.width}function are(e){return e.height}function Cs(e){return typeof e=="function"?e:()=>+e}function Wm(e,t,n){return Math.max(t,Math.min(e,n))}function ZU(){var e=nre,t=ire,n=rre,i=are,r=Cs(0),a=r,s=r,o=r,l=null;function f(d,h,p){var y,v=h??+e.call(this,d),b=p??+t.call(this,d),S=+n.call(this,d),_=+i.call(this,d),w=Math.min(S,_)/2,A=Wm(+r.call(this,d),0,w),C=Wm(+a.call(this,d),0,w),T=Wm(+s.call(this,d),0,w),k=Wm(+o.call(this,d),0,w);if(l||(l=y=ub()),A<=0&&C<=0&&T<=0&&k<=0)l.rect(v,b,S,_);else{var M=v+S,R=b+_;l.moveTo(v+A,b),l.lineTo(M-C,b),l.bezierCurveTo(M-zo*C,b,M,b+zo*C,M,b+C),l.lineTo(M,R-k),l.bezierCurveTo(M,R-zo*k,M-zo*k,R,M-k,R),l.lineTo(v+T,R),l.bezierCurveTo(v+zo*T,R,v,R-zo*T,v,R-T),l.lineTo(v,b+A),l.bezierCurveTo(v,b+zo*A,v+zo*A,b,v+A,b),l.closePath()}if(y)return l=null,y+""||null}return f.x=function(d){return arguments.length?(e=Cs(d),f):e},f.y=function(d){return arguments.length?(t=Cs(d),f):t},f.width=function(d){return arguments.length?(n=Cs(d),f):n},f.height=function(d){return arguments.length?(i=Cs(d),f):i},f.cornerRadius=function(d,h,p,y){return arguments.length?(r=Cs(d),a=h!=null?Cs(h):r,o=p!=null?Cs(p):r,s=y!=null?Cs(y):a,f):r},f.context=function(d){return arguments.length?(l=d??null,f):l},f}function KU(){var e,t,n,i,r=null,a,s,o,l;function f(h,p,y){const v=y/2;if(a){var b=o-p,S=h-s;if(b||S){var _=Math.hypot(b,S),w=(b/=_)*l,A=(S/=_)*l,C=Math.atan2(S,b);r.moveTo(s-w,o-A),r.lineTo(h-b*v,p-S*v),r.arc(h,p,v,C-Math.PI,C),r.lineTo(s+w,o+A),r.arc(s,o,l,C,C+Math.PI)}else r.arc(h,p,v,0,Ra);r.closePath()}else a=1;s=h,o=p,l=v}function d(h){var p,y=h.length,v,b=!1,S;for(r==null&&(r=S=ub()),p=0;p<=y;++p)!(p<y&&i(v=h[p],p,h))===b&&(b=!b)&&(a=0),b&&f(+e(v,p,h),+t(v,p,h),+n(v,p,h));if(S)return r=null,S+""||null}return d.x=function(h){return arguments.length?(e=h,d):e},d.y=function(h){return arguments.length?(t=h,d):t},d.size=function(h){return arguments.length?(n=h,d):n},d.defined=function(h){return arguments.length?(i=h,d):i},d.context=function(h){return arguments.length?(h==null?r=null:r=h,d):r},d}function Hp(e,t){return e??t}const Gp=e=>e.x||0,Yp=e=>e.y||0,sre=e=>e.width||0,ore=e=>e.height||0,ure=e=>(e.x||0)+(e.width||0),lre=e=>(e.y||0)+(e.height||0),cre=e=>e.startAngle||0,fre=e=>e.endAngle||0,dre=e=>e.padAngle||0,hre=e=>e.innerRadius||0,gre=e=>e.outerRadius||0,pre=e=>e.cornerRadius||0,mre=e=>Hp(e.cornerRadiusTopLeft,e.cornerRadius)||0,yre=e=>Hp(e.cornerRadiusTopRight,e.cornerRadius)||0,vre=e=>Hp(e.cornerRadiusBottomRight,e.cornerRadius)||0,bre=e=>Hp(e.cornerRadiusBottomLeft,e.cornerRadius)||0,xre=e=>Hp(e.size,64),Sre=e=>e.size||1,Eb=e=>e.defined!==!1,Ere=e=>QU(e.shape||"circle"),_re=Lte().startAngle(cre).endAngle(fre).padAngle(dre).innerRadius(hre).outerRadius(gre).cornerRadius(pre),wre=$B().x(Gp).y1(Yp).y0(lre).defined(Eb),Are=$B().y(Yp).x1(Gp).x0(ure).defined(Eb),Cre=CB().x(Gp).y(Yp).defined(Eb),$re=ZU().x(Gp).y(Yp).width(sre).height(ore).cornerRadius(mre,yre,vre,bre),Tre=Ute().type(Ere).size(xre),Mre=KU().x(Gp).y(Yp).defined(Eb).size(Sre);function n3(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function kre(e,t){return _re.context(e)(t)}function Ore(e,t){const n=t[0],i=n.interpolate||"linear";return(n.orient==="horizontal"?Are:wre).curve(t3(i,n.orient,n.tension)).context(e)(t)}function Rre(e,t){const n=t[0],i=n.interpolate||"linear";return Cre.curve(t3(i,n.orient,n.tension)).context(e)(t)}function Od(e,t,n,i){return $re.context(e)(t,n,i)}function Dre(e,t){return(t.mark.shape||t.shape).context(e)(t)}function Nre(e,t){return Tre.context(e)(t)}function zre(e,t){return Mre.context(e)(t)}var JU=1;function Fre(){JU=1}function i3(e,t,n){var i=t.clip,r=e._defs,a=t.clip_id||(t.clip_id="clip"+JU++),s=r.clipping[a]||(r.clipping[a]={id:a});return Pe(i)?s.path=i(null):n3(n)?s.path=Od(null,n,0,0):(s.width=n.width||0,s.height=n.height||0),"url(#"+a+")"}function nn(e){this.clear(),e&&this.union(e)}nn.prototype={clone(){return new nn(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,i){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),i<t?(this.y2=t,this.y1=i):(this.y1=t,this.y2=i),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const i=this.rotatedPoints(e,t,n);return this.clear().add(i[0],i[1]).add(i[2],i[3]).add(i[4],i[5]).add(i[6],i[7])},rotatedPoints(e,t,n){var{x1:i,y1:r,x2:a,y2:s}=this,o=Math.cos(e),l=Math.sin(e),f=t-t*o+n*l,d=n-t*l-n*o;return[o*i-l*r+f,l*i+o*r+d,o*i-l*s+f,l*i+o*s+d,o*a-l*r+f,l*a+o*r+d,o*a-l*s+f,l*a+o*s+d]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function _b(e){this.mark=e,this.bounds=this.bounds||new nn}function wb(e){_b.call(this,e),this.items=this.items||[]}ge(wb,_b);class eq{constructor(t){this._pending=0,this._loader=t||Qv()}pending(){return this._pending}sanitizeURL(t){const n=this;return P4(n),n._loader.sanitize(t,{context:"href"}).then(i=>(Jh(n),i)).catch(()=>(Jh(n),null))}loadImage(t){const n=this,i=ine();return P4(n),n._loader.sanitize(t,{context:"image"}).then(r=>{const a=r.href;if(!a||!i)throw{url:a};const s=new i,o=Se(r,"crossOrigin")?r.crossOrigin:"anonymous";return o!=null&&(s.crossOrigin=o),s.onload=()=>Jh(n),s.onerror=()=>Jh(n),s.src=a,s}).catch(r=>(Jh(n),{complete:!1,width:0,height:0,src:r&&r.url||""}))}ready(){const t=this;return new Promise(n=>{function i(r){t.pending()?setTimeout(()=>{i(!0)},10):n(r)}i(!1)})}}function P4(e){e._pending+=1}function Jh(e){e._pending-=1}function to(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const i=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(i+(n?Lre(t,i):0))}return e}function Lre(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const Bre=Ra-1e-8;let Ab,O1,R1,Sl,gA,D1,pA,mA;const Yo=(e,t)=>Ab.add(e,t),N1=(e,t)=>Yo(O1=e,R1=t),I4=e=>Yo(e,Ab.y1),j4=e=>Yo(Ab.x1,e),ml=(e,t)=>gA*e+pA*t,yl=(e,t)=>D1*e+mA*t,$_=(e,t)=>Yo(ml(e,t),yl(e,t)),T_=(e,t)=>N1(ml(e,t),yl(e,t));function Xp(e,t){return Ab=e,t?(Sl=t*hu,gA=mA=Math.cos(Sl),D1=Math.sin(Sl),pA=-D1):(gA=mA=1,Sl=D1=pA=0),Ure}const Ure={beginPath(){},closePath(){},moveTo:T_,lineTo:T_,rect(e,t,n,i){Sl?($_(e+n,t),$_(e+n,t+i),$_(e,t+i),T_(e,t)):(Yo(e+n,t+i),N1(e,t))},quadraticCurveTo(e,t,n,i){const r=ml(e,t),a=yl(e,t),s=ml(n,i),o=yl(n,i);H4(O1,r,s,I4),H4(R1,a,o,j4),N1(s,o)},bezierCurveTo(e,t,n,i,r,a){const s=ml(e,t),o=yl(e,t),l=ml(n,i),f=yl(n,i),d=ml(r,a),h=yl(r,a);G4(O1,s,l,d,I4),G4(R1,o,f,h,j4),N1(d,h)},arc(e,t,n,i,r,a){if(i+=Sl,r+=Sl,O1=n*Math.cos(r)+e,R1=n*Math.sin(r)+t,Math.abs(r-i)>Bre)Yo(e-n,t-n),Yo(e+n,t+n);else{const s=f=>Yo(n*Math.cos(f)+e,n*Math.sin(f)+t);let o,l;if(s(i),s(r),r!==i)if(i=i%Ra,i<0&&(i+=Ra),r=r%Ra,r<0&&(r+=Ra),r<i&&(a=!a,o=i,i=r,r=o),a)for(r-=Ra,o=i-i%pl,l=0;l<4&&o>r;++l,o-=pl)s(o);else for(o=i-i%pl+pl,l=0;l<4&&o<r;++l,o=o+pl)s(o)}}};function H4(e,t,n,i){const r=(e-t)/(e+n-2*t);0<r&&r<1&&i(e+(t-e)*r)}function G4(e,t,n,i,r){const a=i-e+3*t-3*n,s=e+n-2*t,o=e-t;let l=0,f=0,d;Math.abs(a)>Zie?(d=s*s+o*a,d>=0&&(d=Math.sqrt(d),l=(-s+d)/a,f=(-s-d)/a)):l=.5*o/s,0<l&&l<1&&r(Y4(l,e,t,n,i)),0<f&&f<1&&r(Y4(f,e,t,n,i))}function Y4(e,t,n,i,r){const a=1-e,s=a*a,o=e*e;return s*a*t+3*s*e*n+3*a*o*i+o*e*r}var su=(su=au(1,1))?su.getContext("2d"):null;const yA=new nn;function r3(e){return function(t,n){if(!su)return!0;e(su,t),yA.clear().union(t.bounds).intersect(n).round();const{x1:i,y1:r,x2:a,y2:s}=yA;for(let o=r;o<=s;++o)for(let l=i;l<=a;++l)if(su.isPointInPath(l,o))return!0;return!1}}function a3(e,t){return t.contains(e.x||0,e.y||0)}function tq(e,t){const n=e.x||0,i=e.y||0,r=e.width||0,a=e.height||0;return t.intersects(yA.set(n,i,n+r,i+a))}function nq(e,t){const n=e.x||0,i=e.y||0,r=e.x2!=null?e.x2:n,a=e.y2!=null?e.y2:i;return _f(t,n,i,r,a)}function _f(e,t,n,i,r){const{x1:a,y1:s,x2:o,y2:l}=e,f=i-t,d=r-n;let h=0,p=1,y,v,b,S;for(S=0;S<4;++S){if(S===0&&(y=-f,v=-(a-t)),S===1&&(y=f,v=o-t),S===2&&(y=-d,v=-(s-n)),S===3&&(y=d,v=l-n),Math.abs(y)<1e-10&&v<0)return!1;if(b=v/y,y<0){if(b>p)return!1;b>h&&(h=b)}else if(y>0){if(b<h)return!1;b<p&&(p=b)}}return!0}function Qf(e,t){e.globalCompositeOperation=t.blend||"source-over"}function Hr(e,t){return e??t}function X4(e,t){const n=t.length;for(let i=0;i<n;++i)e.addColorStop(t[i].offset,t[i].color);return e}function qre(e,t,n){const i=n.width(),r=n.height();let a;if(t.gradient==="radial")a=e.createRadialGradient(n.x1+Hr(t.x1,.5)*i,n.y1+Hr(t.y1,.5)*r,Math.max(i,r)*Hr(t.r1,0),n.x1+Hr(t.x2,.5)*i,n.y1+Hr(t.y2,.5)*r,Math.max(i,r)*Hr(t.r2,.5));else{const s=Hr(t.x1,0),o=Hr(t.y1,0),l=Hr(t.x2,1),f=Hr(t.y2,0);if(s===l||o===f||i===r)a=e.createLinearGradient(n.x1+s*i,n.y1+o*r,n.x1+l*i,n.y1+f*r);else{const d=au(Math.ceil(i),Math.ceil(r)),h=d.getContext("2d");return h.scale(i,r),h.fillStyle=X4(h.createLinearGradient(s,o,l,f),t.stops),h.fillRect(0,0,i,r),e.createPattern(d,"no-repeat")}}return X4(a,t.stops)}function iq(e,t,n){return e3(n)?qre(e,n,t.bounds):n}function Ey(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=iq(e,t,t.fill),!0):!1}var Pre=[];function Zf(e,t,n){var i=(i=t.strokeWidth)!=null?i:1;return i<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=iq(e,t,t.stroke),e.lineWidth=i,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||Pre),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function Ire(e,t){return e.zindex-t.zindex||e.index-t.index}function s3(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],i,r,a;for(r=0,a=t.length;r<a;++r)i=t[r],i.index=r,i.zindex&&n.push(i);return e.zdirty=!1,e.zitems=n.sort(Ire)}function sa(e,t){var n=e.items,i,r;if(!n||!n.length)return;const a=s3(e);if(a&&a.length){for(i=0,r=n.length;i<r;++i)n[i].zindex||t(n[i]);n=a}for(i=0,r=n.length;i<r;++i)t(n[i])}function _y(e,t){var n=e.items,i,r;if(!n||!n.length)return null;const a=s3(e);for(a&&a.length&&(n=a),r=n.length;--r>=0;)if(i=t(n[r]))return i;if(n===a){for(n=e.items,r=n.length;--r>=0;)if(!n[r].zindex&&(i=t(n[r])))return i}return null}function o3(e){return function(t,n,i){sa(n,r=>{(!i||i.intersects(r.bounds))&&rq(e,t,r,r)})}}function jre(e){return function(t,n,i){n.items.length&&(!i||i.intersects(n.bounds))&&rq(e,t,n.items[0],n.items)}}function rq(e,t,n,i){var r=n.opacity==null?1:n.opacity;r!==0&&(e(t,i)||(Qf(t,n),n.fill&&Ey(t,n,r)&&t.fill(),n.stroke&&Zf(t,n,r)&&t.stroke()))}function Cb(e){return e=e||Or,function(t,n,i,r,a,s){return i*=t.pixelRatio,r*=t.pixelRatio,_y(n,o=>{const l=o.bounds;if(!(l&&!l.contains(a,s)||!l)&&e(t,o,i,r,a,s))return o})}}function Vp(e,t){return function(n,i,r,a){var s=Array.isArray(i)?i[0]:i,o=t??s.fill,l=s.stroke&&n.isPointInStroke,f,d;return l&&(f=s.strokeWidth,d=s.strokeCap,n.lineWidth=f??1,n.lineCap=d??"butt"),e(n,i)?!1:o&&n.isPointInPath(r,a)||l&&n.isPointInStroke(r,a)}}function u3(e){return Cb(Vp(e))}function $l(e,t){return"translate("+e+","+t+")"}function l3(e){return"rotate("+e+")"}function Hre(e,t){return"scale("+e+","+t+")"}function aq(e){return $l(e.x||0,e.y||0)}function Gre(e){return $l(e.x||0,e.y||0)+(e.angle?" "+l3(e.angle):"")}function Yre(e){return $l(e.x||0,e.y||0)+(e.angle?" "+l3(e.angle):"")+(e.scaleX||e.scaleY?" "+Hre(e.scaleX||1,e.scaleY||1):"")}function c3(e,t,n){function i(s,o){s("transform",Gre(o)),s("d",t(null,o))}function r(s,o){return t(Xp(s,o.angle),o),to(s,o).translate(o.x||0,o.y||0)}function a(s,o){var l=o.x||0,f=o.y||0,d=o.angle||0;s.translate(l,f),d&&s.rotate(d*=hu),s.beginPath(),t(s,o),d&&s.rotate(-d),s.translate(-l,-f)}return{type:e,tag:"path",nested:!1,attr:i,bound:r,draw:o3(a),pick:u3(a),isect:n||r3(a)}}var Xre=c3("arc",kre);function Vre(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],i=e[0].orient==="horizontal"?"y":"x",r=e.length,a=1/0,s,o;--r>=0;)e[r].defined!==!1&&(o=Math.abs(e[r][i]-n),o<a&&(a=o,s=e[r]));return s}function Wre(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),i=e.length,r,a,s;--i>=0;)if(e[i].defined!==!1&&(r=e[i].x-t[0],a=e[i].y-t[1],s=r*r+a*a,s<n))return e[i];return null}function Qre(e,t){for(var n=e.length,i,r,a;--n>=0;)if(e[n].defined!==!1&&(i=e[n].x-t[0],r=e[n].y-t[1],a=i*i+r*r,i=e[n].size||1,a<i*i))return e[n];return null}function f3(e,t,n){function i(l,f){var d=f.mark.items;d.length&&l("d",t(null,d))}function r(l,f){var d=f.items;return d.length===0?l:(t(Xp(l),d),to(l,d[0]))}function a(l,f){l.beginPath(),t(l,f)}const s=Vp(a);function o(l,f,d,h,p,y){var v=f.items,b=f.bounds;return!v||!v.length||b&&!b.contains(p,y)?null:(d*=l.pixelRatio,h*=l.pixelRatio,s(l,v,d,h)?v[0]:null)}return{type:e,tag:"path",nested:!0,attr:i,bound:r,draw:jre(a),pick:o,isect:a3,tip:n}}var Zre=f3("area",Ore,Vre);function Kre(e,t){var n=t.clip;e.save(),Pe(n)?(e.beginPath(),n(e),e.clip()):sq(e,t.group)}function sq(e,t){e.beginPath(),n3(t)?Od(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function oq(e){const t=Hr(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function Jre(e,t){e("transform",aq(t))}function uq(e,t){const n=oq(t);e("d",Od(null,t,n,n))}function eae(e,t){e("class","background"),e("aria-hidden",!0),uq(e,t)}function tae(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?uq(e,t):e("d","")}function nae(e,t,n){const i=t.clip?i3(n,t,t):null;e("clip-path",i)}function iae(e,t){if(!t.clip&&t.items){const n=t.items,i=n.length;for(let r=0;r<i;++r)e.union(n[r].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),to(e,t),e.translate(t.x||0,t.y||0)}function up(e,t,n,i){const r=oq(t);e.beginPath(),Od(e,t,(n||0)+r,(i||0)+r)}const rae=Vp(up),aae=Vp(up,!1),sae=Vp(up,!0);function oae(e,t,n,i){sa(t,r=>{const a=r.x||0,s=r.y||0,o=r.strokeForeground,l=r.opacity==null?1:r.opacity;(r.stroke||r.fill)&&l&&(up(e,r,a,s),Qf(e,r),r.fill&&Ey(e,r,l)&&e.fill(),r.stroke&&!o&&Zf(e,r,l)&&e.stroke()),e.save(),e.translate(a,s),r.clip&&sq(e,r),n&&n.translate(-a,-s),sa(r,f=>{(f.marktype==="group"||i==null||i.includes(f.marktype))&&this.draw(e,f,n,i)}),n&&n.translate(a,s),e.restore(),o&&r.stroke&&l&&(up(e,r,a,s),Qf(e,r),Zf(e,r,l)&&e.stroke())})}function uae(e,t,n,i,r,a){if(t.bounds&&!t.bounds.contains(r,a)||!t.items)return null;const s=n*e.pixelRatio,o=i*e.pixelRatio;return _y(t,l=>{let f,d,h;const p=l.bounds;if(p&&!p.contains(r,a))return;d=l.x||0,h=l.y||0;const y=d+(l.width||0),v=h+(l.height||0),b=l.clip;if(b&&(r<d||r>y||a<h||a>v))return;if(e.save(),e.translate(d,h),d=r-d,h=a-h,b&&n3(l)&&!sae(e,l,s,o))return e.restore(),null;const S=l.strokeForeground,_=t.interactive!==!1;return _&&S&&l.stroke&&aae(e,l,s,o)?(e.restore(),l):(f=_y(l,w=>lae(w,d,h)?this.pick(w,n,i,d,h):null),!f&&_&&(l.fill||!S&&l.stroke)&&rae(e,l,s,o)&&(f=l),e.restore(),f||null)})}function lae(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var cae={type:"group",tag:"g",nested:!1,attr:Jre,bound:iae,draw:oae,pick:uae,isect:tq,content:nae,background:eae,foreground:tae},lp={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function d3(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(i=>{e.image=i,e.image.url=e.url})),n}function h3(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function g3(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function $b(e,t){return e==="center"?t/2:e==="right"?t:0}function Tb(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function fae(e,t,n){const i=d3(t,n),r=h3(t,i),a=g3(t,i),s=(t.x||0)-$b(t.align,r),o=(t.y||0)-Tb(t.baseline,a),l=!i.src&&i.toDataURL?i.toDataURL():i.src||"";e("href",l,lp["xmlns:xlink"],"xlink:href"),e("transform",$l(s,o)),e("width",r),e("height",a),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function dae(e,t){const n=t.image,i=h3(t,n),r=g3(t,n),a=(t.x||0)-$b(t.align,i),s=(t.y||0)-Tb(t.baseline,r);return e.set(a,s,a+i,s+r)}function hae(e,t,n){sa(t,i=>{if(n&&!n.intersects(i.bounds))return;const r=d3(i,this);let a=h3(i,r),s=g3(i,r);if(a===0||s===0)return;let o=(i.x||0)-$b(i.align,a),l=(i.y||0)-Tb(i.baseline,s),f,d,h,p;i.aspect!==!1&&(d=r.width/r.height,h=i.width/i.height,d===d&&h===h&&d!==h&&(h<d?(p=a/d,l+=(s-p)/2,s=p):(p=s*d,o+=(a-p)/2,a=p))),(r.complete||r.toDataURL)&&(Qf(e,i),e.globalAlpha=(f=i.opacity)!=null?f:1,e.imageSmoothingEnabled=i.smooth!==!1,e.drawImage(r,o,l,a,s))})}var gae={type:"image",tag:"image",nested:!1,attr:fae,bound:dae,draw:hae,pick:Cb(),isect:Or,get:d3,xOffset:$b,yOffset:Tb},pae=f3("line",Rre,Wre);function mae(e,t){var n=t.scaleX||1,i=t.scaleY||1;(n!==1||i!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",Yre(t)),e("d",t.path)}function z1(e,t){var n=t.path;if(n==null)return!0;var i=t.x||0,r=t.y||0,a=t.scaleX||1,s=t.scaleY||1,o=(t.angle||0)*hu,l=t.pathCache;(!l||l.path!==n)&&((t.pathCache=l=Wf(n)).path=n),o&&e.rotate&&e.translate?(e.translate(i,r),e.rotate(o),op(e,l,0,0,a,s),e.rotate(-o),e.translate(-i,-r)):op(e,l,i,r,a,s)}function yae(e,t){return z1(Xp(e,t.angle),t)?e.set(0,0,0,0):to(e,t,!0)}var vae={type:"path",tag:"path",nested:!1,attr:mae,bound:yae,draw:o3(z1),pick:u3(z1),isect:r3(z1)};function bae(e,t){e("d",Od(null,t))}function xae(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,n+t.width||0,i+t.height||0),t)}function V4(e,t){e.beginPath(),Od(e,t)}var Sae={type:"rect",tag:"path",nested:!1,attr:bae,bound:xae,draw:o3(V4),pick:u3(V4),isect:tq};function Eae(e,t){e("transform",aq(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function _ae(e,t){var n,i;return to(e.set(n=t.x||0,i=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:i),t)}function lq(e,t,n){var i,r,a,s;return t.stroke&&Zf(e,t,n)?(i=t.x||0,r=t.y||0,a=t.x2!=null?t.x2:i,s=t.y2!=null?t.y2:r,e.beginPath(),e.moveTo(i,r),e.lineTo(a,s),!0):!1}function wae(e,t,n){sa(t,i=>{if(!(n&&!n.intersects(i.bounds))){var r=i.opacity==null?1:i.opacity;r&&lq(e,i,r)&&(Qf(e,i),e.stroke())}})}function Aae(e,t,n,i){return e.isPointInStroke?lq(e,t,1)&&e.isPointInStroke(n,i):!1}var Cae={type:"rule",tag:"line",nested:!1,attr:Eae,bound:_ae,draw:wae,pick:Cb(Aae),isect:nq},$ae=c3("shape",Dre),Tae=c3("symbol",Nre,a3);const W4=y7();var ir={height:ts,measureWidth:p3,estimateWidth:wy,width:wy,canvas:cq};cq(!0);function cq(e){ir.width=e&&su?p3:wy}function wy(e,t){return fq(pu(e,t),ts(e))}function fq(e,t){return~~(.8*e.length*t)}function p3(e,t){return ts(e)<=0||!(t=pu(e,t))?0:dq(t,Mb(e))}function dq(e,t){const n=`(${t}) ${e}`;let i=W4.get(n);return i===void 0&&(su.font=t,i=su.measureText(e).width,W4.set(n,i)),i}function ts(e){return e.fontSize!=null?+e.fontSize||0:11}function gu(e){return e.lineHeight!=null?e.lineHeight:ts(e)+2}function Mae(e){return re(e)?e.length>1?e:e[0]:e}function Wp(e){return Mae(e.lineBreak&&e.text&&!re(e.text)?e.text.split(e.lineBreak):e.text)}function m3(e){const t=Wp(e);return(re(t)?t.length-1:0)*gu(e)}function pu(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?Oae(e,n):n}function kae(e){if(ir.width===p3){const t=Mb(e);return n=>dq(n,t)}else if(ir.width===wy){const t=ts(e);return n=>fq(n,t)}else return t=>ir.width(e,t)}function Oae(e,t){var n=+e.limit,i=kae(e);if(i(t)<n)return t;var r=e.ellipsis||"…",a=e.dir==="rtl",s=0,o=t.length,l;if(n-=i(r),a){for(;s<o;)l=s+o>>>1,i(t.slice(l))>n?s=l+1:o=l;return r+t.slice(s)}else{for(;s<o;)l=1+(s+o>>>1),i(t.slice(0,l))<n?s=l:o=l-1;return t.slice(0,s)+r}}function Qp(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function Mb(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ts(e)+"px "+Qp(e,t)}function y3(e){var t=e.baseline,n=ts(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*gu(e):t==="line-bottom"?.29*n-.5*gu(e):0)}const Rae={left:"start",center:"middle",right:"end"},Bg=new nn;function kb(e){var t=e.x||0,n=e.y||0,i=e.radius||0,r;return i&&(r=(e.theta||0)-pl,t+=i*Math.cos(r),n+=i*Math.sin(r)),Bg.x1=t,Bg.y1=n,Bg}function Dae(e,t){var n=t.dx||0,i=(t.dy||0)+y3(t),r=kb(t),a=r.x1,s=r.y1,o=t.angle||0,l;e("text-anchor",Rae[t.align]||"start"),o?(l=$l(a,s)+" "+l3(o),(n||i)&&(l+=" "+$l(n,i))):l=$l(a+n,s+i),e("transform",l)}function v3(e,t,n){var i=ir.height(t),r=t.align,a=kb(t),s=a.x1,o=a.y1,l=t.dx||0,f=(t.dy||0)+y3(t)-Math.round(.8*i),d=Wp(t),h;if(re(d)?(i+=gu(t)*(d.length-1),h=d.reduce((p,y)=>Math.max(p,ir.width(t,y)),0)):h=ir.width(t,d),r==="center"?l-=h/2:r==="right"&&(l-=h),e.set(l+=s,f+=o,l+h,f+i),t.angle&&!n)e.rotate(t.angle*hu,s,o);else if(n===2)return e.rotatedPoints(t.angle*hu,s,o);return e}function Nae(e,t,n){sa(t,i=>{var r=i.opacity==null?1:i.opacity,a,s,o,l,f,d,h;if(!(n&&!n.intersects(i.bounds)||r===0||i.fontSize<=0||i.text==null||i.text.length===0)){if(e.font=Mb(i),e.textAlign=i.align||"left",a=kb(i),s=a.x1,o=a.y1,i.angle&&(e.save(),e.translate(s,o),e.rotate(i.angle*hu),s=o=0),s+=i.dx||0,o+=(i.dy||0)+y3(i),d=Wp(i),Qf(e,i),re(d))for(f=gu(i),l=0;l<d.length;++l)h=pu(i,d[l]),i.fill&&Ey(e,i,r)&&e.fillText(h,s,o),i.stroke&&Zf(e,i,r)&&e.strokeText(h,s,o),o+=f;else h=pu(i,d),i.fill&&Ey(e,i,r)&&e.fillText(h,s,o),i.stroke&&Zf(e,i,r)&&e.strokeText(h,s,o);i.angle&&e.restore()}})}function zae(e,t,n,i,r,a){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var s=kb(t),o=s.x1,l=s.y1,f=v3(Bg,t,1),d=-t.angle*hu,h=Math.cos(d),p=Math.sin(d),y=h*r-p*a+(o-h*o+p*l),v=p*r+h*a+(l-p*o-h*l);return f.contains(y,v)}function Fae(e,t){const n=v3(Bg,e,2);return _f(t,n[0],n[1],n[2],n[3])||_f(t,n[0],n[1],n[4],n[5])||_f(t,n[4],n[5],n[6],n[7])||_f(t,n[2],n[3],n[6],n[7])}var Lae={type:"text",tag:"text",nested:!1,attr:Dae,bound:v3,draw:Nae,pick:Cb(zae),isect:Fae},Bae=f3("trail",zre,Qre),lr={arc:Xre,area:Zre,group:cae,image:gae,line:pae,path:vae,rect:Sae,rule:Cae,shape:$ae,symbol:Tae,text:Lae,trail:Bae};function vA(e,t,n){var i=lr[e.mark.marktype],r=t||i.bound;return i.nested&&(e=e.mark),r(e.bounds||(e.bounds=new nn),e,n)}var Q4={mark:null};function hq(e,t,n){var i=lr[e.marktype],r=i.bound,a=e.items,s=a&&a.length,o,l,f,d;if(i.nested)return s?f=a[0]:(Q4.mark=e,f=Q4),d=vA(f,r,n),t=t&&t.union(d)||d,t;if(t=t||e.bounds&&e.bounds.clear()||new nn,s)for(o=0,l=a.length;o<l;++o)t.union(vA(a[o],r,n));return e.bounds=t}const Uae=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function gq(e,t){return JSON.stringify(e,Uae,t)}function pq(e){const t=typeof e=="string"?JSON.parse(e):e;return mq(t)}function mq(e){var t=e.marktype,n=e.items,i,r,a;if(n)for(r=0,a=n.length;r<a;++r)i=t?"mark":"group",n[r][i]=e,n[r].zindex&&(n[r][i].zdirty=!0),(t||i)==="group"&&mq(n[r]);return t&&hq(e),e}class yq{constructor(t){arguments.length?this.root=pq(t):(this.root=Z4({marktype:"group",name:"root",role:"frame"}),this.root.items=[new wb(this.root)])}toJSON(t){return gq(this.root,t||0)}mark(t,n,i){n=n||this.root.items[0];const r=Z4(t,n);return n.items[i]=r,r.zindex&&(r.group.zdirty=!0),r}}function Z4(e,t){const n={bounds:new nn,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function Xo(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function b3(e,t){t=t.toLowerCase();for(var n=e.childNodes,i=0,r=n.length;i<r;++i)if(n[i].tagName.toLowerCase()===t)return n[i]}function on(e,t,n,i){var r=e.childNodes[t],a;return(!r||r.tagName.toLowerCase()!==n.toLowerCase())&&(a=r||null,r=Xo(e.ownerDocument,n,i),e.insertBefore(r,a)),r}function Er(e,t){for(var n=e.childNodes,i=n.length;i>t;)e.removeChild(n[--i]);return e}function vq(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function Ob(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function qae(e,t,n,i){var r=e&&e.mark,a,s;if(r&&(a=lr[r.marktype]).tip){for(s=Ob(t,n),s[0]-=i[0],s[1]-=i[1];e=e.mark.group;)s[0]-=e.x||0,s[1]-=e.y||0;e=a.tip(r.items,s)}return e}let x3=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||Qv(),this._tooltip=n||Pae}initialize(t,n,i){return this._el=t,this._obj=i||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,i){for(let r=t?t.length:0;--r>=0;)if(t[r].type===n&&(!i||t[r].handler===i))return r;return-1}handlers(t){const n=this._handlers,i=[];if(t)i.push(...n[this.eventName(t)]);else for(const r in n)i.push(...n[r]);return i}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,i){this._loader.sanitize(i,{context:"href"}).then(r=>{const a=new MouseEvent(t.type,t),s=Xo(null,"a");for(const o in r)s.setAttribute(o,r[o]);s.dispatchEvent(a)}).catch(()=>{})}handleTooltip(t,n,i){if(n&&n.tooltip!=null){n=qae(n,t,this.canvas(),this._origin);const r=i&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,r)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const i=n.getBoundingClientRect(),r=this._origin,a=t.bounds,s=a.width(),o=a.height();let l=a.x1+r[0]+i.left,f=a.y1+r[1]+i.top;for(;t.mark&&(t=t.mark.group);)l+=t.x||0,f+=t.y||0;return{x:l,y:f,width:s,height:o,left:l,top:f,right:l+s,bottom:f+o}}};function Pae(e,t,n,i){e.element().setAttribute("title",i||"")}class Zp{constructor(t){this._el=null,this._bgcolor=null,this._loader=new eq(t)}initialize(t,n,i,r,a){return this._el=t,this.resize(n,i,r,a)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,i,r){return this._width=t,this._height=n,this._origin=i||[0,0],this._scale=r||1,this}dirty(){}render(t,n){const i=this;return i._call=function(){i._render(t,n)},i._call(),i._call=null,i}_render(){}renderAsync(t,n){const i=this.render(t,n);return this._ready?this._ready.then(()=>i):Promise.resolve(i)}_load(t,n){var i=this,r=i._loader[t](n);if(!i._ready){const a=i._call;i._ready=i._loader.ready().then(s=>{s&&a(),i._ready=null})}return r}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const Iae="keydown",jae="keypress",Hae="keyup",bq="dragenter",F1="dragleave",xq="dragover",bA="pointerdown",Gae="pointerup",Ay="pointermove",L1="pointerout",Sq="pointerover",xA="mousedown",Yae="mouseup",Eq="mousemove",Cy="mouseout",_q="mouseover",$y="click",Xae="dblclick",Vae="wheel",wq="mousewheel",Ty="touchstart",My="touchmove",ky="touchend",Wae=[Iae,jae,Hae,bq,F1,xq,bA,Gae,Ay,L1,Sq,xA,Yae,Eq,Cy,_q,$y,Xae,Vae,wq,Ty,My,ky],SA=Ay,Ug=Cy,EA=$y;class Kp extends x3{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=Wae,this.pointermove=J4([Ay,Eq],[Sq,_q],[L1,Cy]),this.dragover=J4([xq],[bq],[F1]),this.pointerout=ez([L1,Cy]),this.dragleave=ez([F1])}initialize(t,n,i){return this._canvas=t&&b3(t,"canvas"),[$y,xA,bA,Ay,L1,F1].forEach(r=>K4(this,r)),super.initialize(t,n,i)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(wq,t)}pointerdown(t){this._down=this._active,this.fire(bA,t)}mousedown(t){this._down=this._active,this.fire(xA,t)}click(t){this._down===this._active&&(this.fire($y,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(Ty,t,!0)}touchmove(t){this.fire(My,t,!0)}touchend(t){this.fire(ky,t,!0),this._touch=null}fire(t,n,i){const r=i?this._touch:this._active,a=this._handlers[t];if(n.vegaType=t,t===EA&&r&&r.href?this.handleHref(n,r,r.href):(t===SA||t===Ug)&&this.handleTooltip(n,r,t!==Ug),a)for(let s=0,o=a.length;s<o;++s)a[s].handler.call(this._obj,n,r)}on(t,n){const i=this.eventName(t),r=this._handlers;return this._handlerIndex(r[i],t,n)<0&&(K4(this,t),(r[i]||(r[i]=[])).push({type:t,handler:n})),this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&r.splice(a,1),this}pickEvent(t){const n=Ob(t,this._canvas),i=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-i[0],n[1]-i[1])}pick(t,n,i,r,a){const s=this.context();return lr[t.marktype].pick.call(this,s,t,n,i,r,a)}}const Qae=e=>e===Ty||e===My||e===ky?[Ty,My,ky]:[e];function K4(e,t){Qae(t).forEach(n=>Zae(e,n))}function Zae(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?i=>e[t](i):i=>e.fire(t,i)))}function Eg(e,t,n){t.forEach(i=>e.fire(i,n))}function J4(e,t,n){return function(i){const r=this._active,a=this.pickEvent(i);a===r?Eg(this,e,i):((!r||!r.exit)&&Eg(this,n,i),this._active=a,Eg(this,t,i),Eg(this,e,i))}}function ez(e){return function(t){Eg(this,e,t),this._active=null}}function Kae(){return typeof window<"u"&&window.devicePixelRatio||1}function Jae(e,t,n,i,r,a){const s=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,o=e.getContext("2d"),l=s?Kae():r;e.width=t*l,e.height=n*l;for(const f in a)o[f]=a[f];return s&&l!==1&&(e.style.width=t+"px",e.style.height=n+"px"),o.pixelRatio=l,o.setTransform(l,0,0,l,l*i[0],l*i[1]),e}class Oy extends Zp{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new nn,this._tempb=new nn}initialize(t,n,i,r,a,s){return this._options=s||{},this._canvas=this._options.externalContext?null:au(1,1,this._options.type),t&&this._canvas&&(Er(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,i,r,a)}resize(t,n,i,r){if(super.resize(t,n,i,r),this._canvas)Jae(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const a=this._options.externalContext;a||te("CanvasRenderer is missing a valid canvas or context"),a.scale(this._scale,this._scale),a.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let i=t.mark.group;for(;i;)n.translate(i.x||0,i.y||0),i=i.mark.group;this._dirty.union(n)}_render(t,n){const i=this.context(),r=this._origin,a=this._width,s=this._height,o=this._dirty,l=ese(r,a,s);i.save();const f=this._redraw||o.empty()?(this._redraw=!1,l.expand(1)):tse(i,l.intersect(o),r);return this.clear(-r[0],-r[1],a,s),this.draw(i,t,f,n),i.restore(),o.clear(),this}draw(t,n,i,r){if(n.marktype!=="group"&&r!=null&&!r.includes(n.marktype))return;const a=lr[n.marktype];n.clip&&Kre(t,n),a.draw.call(this,t,n,i,r),n.clip&&t.restore()}clear(t,n,i,r){const a=this._options,s=this.context();a.type!=="pdf"&&!a.externalContext&&s.clearRect(t,n,i,r),this._bgcolor!=null&&(s.fillStyle=this._bgcolor,s.fillRect(t,n,i,r))}}const ese=(e,t,n)=>new nn().set(0,0,t,n).translate(-e[0],-e[1]);function tse(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Aq extends x3{constructor(t,n){super(t,n);const i=this;i._hrefHandler=M_(i,(r,a)=>{a&&a.href&&i.handleHref(r,a,a.href)}),i._tooltipHandler=M_(i,(r,a)=>{i.handleTooltip(r,a,r.type!==Ug)})}initialize(t,n,i){let r=this._svg;return r&&(r.removeEventListener(EA,this._hrefHandler),r.removeEventListener(SA,this._tooltipHandler),r.removeEventListener(Ug,this._tooltipHandler)),this._svg=r=t&&b3(t,"svg"),r&&(r.addEventListener(EA,this._hrefHandler),r.addEventListener(SA,this._tooltipHandler),r.addEventListener(Ug,this._tooltipHandler)),super.initialize(t,n,i)}canvas(){return this._svg}on(t,n){const i=this.eventName(t),r=this._handlers;if(this._handlerIndex(r[i],t,n)<0){const s={type:t,handler:n,listener:M_(this,n)};(r[i]||(r[i]=[])).push(s),this._svg&&this._svg.addEventListener(i,s.listener)}return this}off(t,n){const i=this.eventName(t),r=this._handlers[i],a=this._handlerIndex(r,t,n);return a>=0&&(this._svg&&this._svg.removeEventListener(i,r[a].listener),r.splice(a,1)),this}}const M_=(e,t)=>n=>{let i=n.target.__data__;i=Array.isArray(i)?i[0]:i,n.vegaType=n.type,t.call(e._obj,n,i)},Cq="aria-hidden",S3="aria-label",E3="role",_3="aria-roledescription",$q="graphics-object",w3="graphics-symbol",Tq=(e,t,n)=>({[E3]:e,[_3]:t,[S3]:n||void 0}),nse=ra(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),tz={axis:{desc:"axis",caption:ase},legend:{desc:"legend",caption:sse},"title-text":{desc:"title",caption:e=>`Title text '${iz(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${iz(e)}'`}},nz={ariaRole:E3,ariaRoleDescription:_3,description:S3};function Mq(e,t){const n=t.aria===!1;if(e(Cq,n||void 0),n||t.description==null)for(const i in nz)e(nz[i],void 0);else{const i=t.mark.marktype;e(S3,t.description),e(E3,t.ariaRole||(i==="group"?$q:w3)),e(_3,t.ariaRoleDescription||`${i} mark`)}}function kq(e){return e.aria===!1?{[Cq]:!0}:nse[e.role]?null:tz[e.role]?rse(e,tz[e.role]):ise(e)}function ise(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(i=>i.description!=null&&i.aria!==!1);return Tq(n?$q:w3,`${t} mark container`,e.description)}function rse(e,t){try{const n=e.items[0],i=t.caption||(()=>"");return Tq(t.role||w3,t.desc,n.description||i(n))}catch{return null}}function iz(e){return ve(e.text).join(" ")}function ase(e){const t=e.datum,n=e.orient,i=t.title?Oq(e):null,r=e.context,a=r.scales[t.scale].value,s=r.dataflow.locale(),o=a.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(i?` titled '${i}'`:"")+` for a ${Vf(o)?"discrete":o} scale with ${GU(s,a,e)}`}function sse(e){const t=e.datum,n=t.title?Oq(e):null,i=`${t.type||""} legend`.trim(),r=t.scales,a=Object.keys(r),s=e.context,o=s.scales[r[a[0]]].value,l=s.dataflow.locale();return use(i)+(n?` titled '${n}'`:"")+` for ${ose(a)} with ${GU(l,o,e)}`}function Oq(e){try{return ve(Ke(e.items).items[0].text).join(" ")}catch{return null}}function ose(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Ke(e)}function use(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const Rq=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),lse=e=>Rq(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function A3(){let e="",t="",n="";const i=[],r=()=>t=n="",a=l=>{t&&(e+=`${t}>${n}`,r()),i.push(l)},s=(l,f)=>(f!=null&&(t+=` ${l}="${lse(f)}"`),o),o={open(l){a(l),t="<"+l;for(var f=arguments.length,d=new Array(f>1?f-1:0),h=1;h<f;h++)d[h-1]=arguments[h];for(const p of d)for(const y in p)s(y,p[y]);return o},close(){const l=i.pop();return t?e+=t+(n?`>${n}</${l}>`:"/>"):e+=`</${l}>`,r(),o},attr:s,text:l=>(n+=Rq(l),o),toString:()=>e};return o}const Dq=e=>Nq(A3(),e)+"";function Nq(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,i=n.length;for(let r=0;r<i;++r)e.attr(n[r].name,n[r].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const i of n)i.nodeType===3?e.text(i.nodeValue):Nq(e,i)}return e.close()}const Ry={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},Dy={blend:"mix-blend-mode"},zq={fill:"none","stroke-miterlimit":10},eg=0,rz="http://www.w3.org/2000/xmlns/",sn=lp.xmlns;class C3 extends Zp{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,i,r,a){return this._defs={},this._clearDefs(),t&&(this._svg=on(t,0,"svg",sn),this._svg.setAttributeNS(rz,"xmlns",sn),this._svg.setAttributeNS(rz,"xmlns:xlink",lp["xmlns:xlink"]),this._svg.setAttribute("version",lp.version),this._svg.setAttribute("class","marks"),Er(t,1),this._root=on(this._svg,eg,"g",sn),Vo(this._root,zq),Er(this._svg,eg+1)),this.background(this._bgcolor),super.initialize(t,n,i,r,a)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svg&&(Vo(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let i;n&&(t.removeAttribute("style"),i=on(t,eg,"rect",sn),Vo(i,{width:this._width,height:this._height,fill:n}));const r=Dq(t);return n&&(t.removeChild(i),this._svg.style.setProperty("background-color",n)),r}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Er(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let i,r,a,s,o,l,f;for(o=0,l=t.length;o<l;++o)if(i=t[o],r=i.mark,r.marktype!==a&&(a=r.marktype,s=lr[a]),r.zdirty&&r.dirty!==n&&(this._dirtyAll=!1,az(i,n),r.items.forEach(d=>{d.dirty=n})),!r.zdirty){if(i.exit){s.nested&&r.items.length?(f=r.items[0],f._svg&&this._update(s,f._svg,f)):i._svg&&(f=i._svg.parentNode,f&&f.removeChild(i._svg)),i._svg=null;continue}i=s.nested?r.items[0]:i,i._update!==n&&(!i._svg||!i._svg.ownerSVGElement?(this._dirtyAll=!1,az(i,n)):this._update(s,i._svg,i),i._update=n)}return!this._dirtyAll}mark(t,n,i,r){if(!this.isDirty(n))return n._svg;const a=this._svg,s=n.marktype,o=lr[s],l=n.interactive===!1?"none":null,f=o.tag==="g",d=sz(n,t,i,"g",a);if(s!=="group"&&r!=null&&!r.includes(s))return Er(d,0),n._svg;d.setAttribute("class",vq(n));const h=kq(n);for(const b in h)si(d,b,h[b]);f||si(d,"pointer-events",l),si(d,"clip-path",n.clip?i3(this,n,n.group):null);let p=null,y=0;const v=b=>{const S=this.isDirty(b),_=sz(b,d,p,o.tag,a);S&&(this._update(o,_,b),f&&dse(this,_,b,r)),p=_,++y};return o.nested?n.items.length&&v(n.items[0]):sa(n,v),Er(d,y),d}_update(t,n,i){Us=n,Xn=n.__values__,Mq(qg,i),t.attr(qg,i,this);const r=gse[t.type];r&&r.call(this,t,n,i),Us&&this.style(Us,i)}style(t,n){if(n!=null){for(const i in Ry){let r=i==="font"?Qp(n):n[i];if(r===Xn[i])continue;const a=Ry[i];r==null?t.removeAttribute(a):(e3(r)&&(r=XU(r,this._defs.gradient,Fq())),t.setAttribute(a,r+"")),Xn[i]=r}for(const i in Dy)B1(t,Dy[i],n[i])}}defs(){const t=this._svg,n=this._defs;let i=n.el,r=0;for(const a in n.gradient)i||(n.el=i=on(t,eg+1,"defs",sn)),r=cse(i,n.gradient[a],r);for(const a in n.clipping)i||(n.el=i=on(t,eg+1,"defs",sn)),r=fse(i,n.clipping[a],r);i&&(r===0?(t.removeChild(i),n.el=null):Er(i,r))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function az(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function cse(e,t,n){let i,r,a;if(t.gradient==="radial"){let s=on(e,n++,"pattern",sn);Vo(s,{id:Sy+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),s=on(s,0,"rect",sn),Vo(s,{width:1,height:1,fill:`url(${Fq()}#${t.id})`}),e=on(e,n++,"radialGradient",sn),Vo(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=on(e,n++,"linearGradient",sn),Vo(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(i=0,r=t.stops.length;i<r;++i)a=on(e,i,"stop",sn),a.setAttribute("offset",t.stops[i].offset),a.setAttribute("stop-color",t.stops[i].color);return Er(e,i),n}function fse(e,t,n){let i;return e=on(e,n,"clipPath",sn),e.setAttribute("id",t.id),t.path?(i=on(e,0,"path",sn),i.setAttribute("d",t.path)):(i=on(e,0,"rect",sn),Vo(i,{x:0,y:0,width:t.width,height:t.height})),Er(e,1),n+1}function dse(e,t,n,i){t=t.lastChild.previousSibling;let r,a=0;sa(n,s=>{r=e.mark(t,s,r,i),++a}),Er(t,1+a)}function sz(e,t,n,i,r){let a=e._svg,s;if(!a&&(s=t.ownerDocument,a=Xo(s,i,sn),e._svg=a,e.mark&&(a.__data__=e,a.__values__={fill:"default"},i==="g"))){const o=Xo(s,"path",sn);a.appendChild(o),o.__data__=e;const l=Xo(s,"g",sn);a.appendChild(l),l.__data__=e;const f=Xo(s,"path",sn);a.appendChild(f),f.__data__=e,f.__values__={fill:"default"}}return(a.ownerSVGElement!==r||hse(a,n))&&t.insertBefore(a,n?n.nextSibling:t.firstChild),a}function hse(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Us=null,Xn=null;const gse={group(e,t,n){const i=Us=t.childNodes[2];Xn=i.__values__,e.foreground(qg,n,this),Xn=t.__values__,Us=t.childNodes[1],e.content(qg,n,this);const r=Us=t.childNodes[0];e.background(qg,n,this);const a=n.mark.interactive===!1?"none":null;if(a!==Xn.events&&(si(i,"pointer-events",a),si(r,"pointer-events",a),Xn.events=a),n.strokeForeground&&n.stroke){const s=n.fill;si(i,"display",null),this.style(r,n),si(r,"stroke",null),s&&(n.fill=null),Xn=i.__values__,this.style(i,n),s&&(n.fill=s),Us=null}else si(i,"display","none")},image(e,t,n){n.smooth===!1?(B1(t,"image-rendering","optimizeSpeed"),B1(t,"image-rendering","pixelated")):B1(t,"image-rendering",null)},text(e,t,n){const i=Wp(n);let r,a,s,o;re(i)?(a=i.map(l=>pu(n,l)),r=a.join(`
`),r!==Xn.text&&(Er(t,0),s=t.ownerDocument,o=gu(n),a.forEach((l,f)=>{const d=Xo(s,"tspan",sn);d.__data__=n,d.textContent=l,f&&(d.setAttribute("x",0),d.setAttribute("dy",o)),t.appendChild(d)}),Xn.text=r)):(a=pu(n,i),a!==Xn.text&&(t.textContent=a,Xn.text=a)),si(t,"font-family",Qp(n)),si(t,"font-size",ts(n)+"px"),si(t,"font-style",n.fontStyle),si(t,"font-variant",n.fontVariant),si(t,"font-weight",n.fontWeight)}};function qg(e,t,n){t!==Xn[e]&&(n?pse(Us,e,t,n):si(Us,e,t),Xn[e]=t)}function B1(e,t,n){n!==Xn[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),Xn[t]=n)}function Vo(e,t){for(const n in t)si(e,n,t[n])}function si(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function pse(e,t,n,i){n!=null?e.setAttributeNS(i,t,n):e.removeAttributeNS(i,t)}function Fq(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class Lq extends Zp{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=A3();n.open("svg",qe({},lp,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const i=this._bgcolor;return i&&i!=="transparent"&&i!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:i}).close(),n.open("g",zq,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const i=lr[n.marktype],r=i.tag,a=[Mq,i.attr];t.open("g",{class:vq(n),"clip-path":n.clip?i3(this,n,n.group):null},kq(n),{"pointer-events":r!=="g"&&n.interactive===!1?"none":null});const s=o=>{const l=this.href(o);if(l&&t.open("a",l),t.open(r,this.attr(n,o,a,r!=="g"?r:null)),r==="text"){const f=Wp(o);if(re(f)){const d={x:0,dy:gu(o)};for(let h=0;h<f.length;++h)t.open("tspan",h?d:null).text(pu(o,f[h])).close()}else t.text(pu(o,f))}else if(r==="g"){const f=o.strokeForeground,d=o.fill,h=o.stroke;f&&h&&(o.stroke=null),t.open("path",this.attr(n,o,i.background,"bgrect")).close(),t.open("g",this.attr(n,o,i.content)),sa(o,p=>this.mark(t,p)),t.close(),f&&h?(d&&(o.fill=null),o.stroke=h,t.open("path",this.attr(n,o,i.foreground,"bgrect")).close(),d&&(o.fill=d)):t.open("path",this.attr(n,o,i.foreground,"bgfore")).close()}t.close(),l&&t.close()};return i.nested?n.items&&n.items.length&&s(n.items[0]):sa(n,s),t.close()}href(t){const n=t.href;let i;if(n){if(i=this._hrefs&&this._hrefs[n])return i;this.sanitizeURL(n).then(r=>{r["xlink:href"]=r.href,r.href=null,(this._hrefs||(this._hrefs={}))[n]=r})}return null}attr(t,n,i,r){const a={},s=(o,l,f,d)=>{a[d||o]=l};return Array.isArray(i)?i.forEach(o=>o(s,n,this)):i(s,n,this),r&&mse(a,n,t,r,this._defs),a}defs(t){const n=this._defs.gradient,i=this._defs.clipping;if(Object.keys(n).length+Object.keys(i).length!==0){t.open("defs");for(const a in n){const s=n[a],o=s.stops;s.gradient==="radial"?(t.open("pattern",{id:Sy+a,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+a+")"}).close(),t.close(),t.open("radialGradient",{id:a,fx:s.x1,fy:s.y1,fr:s.r1,cx:s.x2,cy:s.y2,r:s.r2})):t.open("linearGradient",{id:a,x1:s.x1,x2:s.x2,y1:s.y1,y2:s.y2});for(let l=0;l<o.length;++l)t.open("stop",{offset:o[l].offset,"stop-color":o[l].color}).close();t.close()}for(const a in i){const s=i[a];t.open("clipPath",{id:a}),s.path?t.open("path",{d:s.path}).close():t.open("rect",{x:0,y:0,width:s.width,height:s.height}).close(),t.close()}t.close()}}}function mse(e,t,n,i,r){let a;if(t==null||(i==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),i==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;i==="image"&&t.smooth===!1&&(a=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),i==="text"&&(e["font-family"]=Qp(t),e["font-size"]=ts(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const s in Ry){let o=t[s];const l=Ry[s];o==="transparent"&&(l==="fill"||l==="stroke")||o!=null&&(e3(o)&&(o=XU(o,r.gradient,"")),e[l]=o)}for(const s in Dy){const o=t[s];o!=null&&(a=a||[],a.push(`${Dy[s]}: ${o};`))}return a&&(e.style=a.join(" ")),e}const Yr={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function yse(e){Yr.svgMarkTypes=e.svgMarkTypes??["text"],Yr.svgOnTop=e.svgOnTop??!0,Yr.debug=e.debug??!1}class _A extends Zp{constructor(t){super(t),this._svgRenderer=new C3(t),this._canvasRenderer=new Oy(t)}initialize(t,n,i,r,a){this._root_el=on(t,0,"div");const s=on(this._root_el,0,"div"),o=on(this._root_el,1,"div");return this._root_el.style.position="relative",Yr.debug||(s.style.height="100%",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.height="100%",o.style.width="100%"),this._svgEl=Yr.svgOnTop?o:s,this._canvasEl=Yr.svgOnTop?s:o,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,i,r,a),this._svgRenderer.initialize(this._svgEl,n,i,r,a),super.initialize(t,n,i,r,a)}dirty(t){return Yr.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const r=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(a=>!Yr.svgMarkTypes.includes(a));this._svgRenderer.render(t,Yr.svgMarkTypes),this._canvasRenderer.render(t,r)}resize(t,n,i,r){return super.resize(t,n,i,r),this._svgRenderer.resize(t,n,i,r),this._canvasRenderer.resize(t,n,i,r),this}background(t){return Yr.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class Bq extends Kp{constructor(t,n){super(t,n)}initialize(t,n,i){const r=on(on(t,0,"div"),Yr.svgOnTop?0:1,"div");return super.initialize(r,n,i)}}const Uq="canvas",qq="hybrid",Pq="png",Iq="svg",jq="none",Wo={Canvas:Uq,PNG:Pq,SVG:Iq,Hybrid:qq,None:jq},Ll={};Ll[Uq]=Ll[Pq]={renderer:Oy,headless:Oy,handler:Kp};Ll[Iq]={renderer:C3,headless:Lq,handler:Aq};Ll[qq]={renderer:_A,headless:_A,handler:Bq};Ll[jq]={};function Rb(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Ll[e]=t,this):Ll[e]}function Hq(e,t,n){const i=[],r=new nn().union(t),a=e.marktype;return a?Gq(e,r,n,i):a==="group"?Yq(e,r,n,i):te("Intersect scene must be mark node or group item.")}function Gq(e,t,n,i){if(vse(e,t,n)){const r=e.items,a=e.marktype,s=r.length;let o=0;if(a==="group")for(;o<s;++o)Yq(r[o],t,n,i);else for(const l=lr[a].isect;o<s;++o){const f=r[o];Xq(f,t,l)&&i.push(f)}}return i}function vse(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function Yq(e,t,n,i){n&&n(e.mark)&&Xq(e,t,lr.group.isect)&&i.push(e);const r=e.items,a=r&&r.length;if(a){const s=e.x||0,o=e.y||0;t.translate(-s,-o);for(let l=0;l<a;++l)Gq(r[l],t,n,i);t.translate(s,o)}return i}function Xq(e,t,n){const i=e.bounds;return t.encloses(i)||t.intersects(i)&&n(e,t)}const k_=new nn;function Vq(e){const t=e.clip;if(Pe(t))t(Xp(k_.clear()));else if(t)k_.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(k_)}const bse=1e-9;function $3(e,t,n){return e===t?!0:n==="path"?Wq(e,t):e instanceof Date&&t instanceof Date?+e==+t:at(e)&&at(t)?Math.abs(e-t)<=bse:!e||!t||!xe(e)&&!xe(t)?e==t:xse(e,t)}function Wq(e,t){return $3(Wf(e),Wf(t))}function xse(e,t){var n=Object.keys(e),i=Object.keys(t),r,a;if(n.length!==i.length)return!1;for(n.sort(),i.sort(),a=n.length-1;a>=0;a--)if(n[a]!=i[a])return!1;for(a=n.length-1;a>=0;a--)if(r=n[a],!$3(e[r],t[r],r))return!1;return typeof e==typeof t}function Sse(){Fre(),Hie()}const Kf="top",Zr="left",Kr="right",mu="bottom",Ese="top-left",_se="top-right",wse="bottom-left",Ase="bottom-right",T3="start",wA="middle",oi="end",Cse="x",$se="y",Db="group",M3="axis",k3="title",Tse="frame",Mse="scope",O3="legend",Qq="row-header",Zq="row-footer",Kq="row-title",Jq="column-header",eP="column-footer",tP="column-title",kse="padding",Ose="symbol",nP="fit",iP="fit-x",rP="fit-y",Rse="pad",R3="none",Qm="all",AA="each",D3="flush",Qo="column",Zo="row";function aP(e){J.call(this,null,e)}ge(aP,J,{transform(e,t){const n=t.dataflow,i=e.mark,r=i.marktype,a=lr[r],s=a.bound;let o=i.bounds,l;if(a.nested)i.items.length&&n.dirty(i.items[0]),o=Zm(i,s),i.items.forEach(f=>{f.bounds.clear().union(o)});else if(r===Db||e.modified())switch(t.visit(t.MOD,f=>n.dirty(f)),o.clear(),i.items.forEach(f=>o.union(Zm(f,s))),i.role){case M3:case O3:case k3:t.reflow()}else l=t.changed(t.REM),t.visit(t.ADD,f=>{o.union(Zm(f,s))}),t.visit(t.MOD,f=>{l=l||o.alignsWith(f.bounds),n.dirty(f),o.union(Zm(f,s))}),l&&(o.clear(),i.items.forEach(f=>o.union(f.bounds)));return Vq(i),t.modifies("bounds")}});function Zm(e,t,n){return t(e.bounds.clear(),e,n)}const oz=":vega_identifier:";function N3(e){J.call(this,0,e)}N3.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};ge(N3,J,{transform(e,t){const n=Dse(t.dataflow),i=e.as;let r=n.value;return t.visit(t.ADD,a=>a[i]=a[i]||++r),n.set(this.value=r),t}});function Dse(e){return e._signals[oz]||(e._signals[oz]=e.add(0))}function sP(e){J.call(this,null,e)}ge(sP,J,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,Nse(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const i=n.marktype===Db?wb:_b;return t.visit(t.ADD,r=>i.call(r,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function Nse(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function oP(e){J.call(this,null,e)}const uz={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((i,r)=>!r||!uP(n.bounds,i.bounds,t)?(n=i,1):i.opacity=0)}},uP=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),lz=(e,t)=>{for(var n=1,i=e.length,r=e[0].bounds,a;n<i;r=a,++n)if(uP(r,a=e[n].bounds,t))return!0},zse=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},Fse=(e,t,n)=>{var i=e.range(),r=new nn;return t===Kf||t===mu?r.set(i[0],-1/0,i[1],1/0):r.set(-1/0,i[0],1/0,i[1]),r.expand(n||1),a=>r.encloses(a.bounds)},cz=e=>(e.forEach(t=>t.opacity=1),e),fz=(e,t)=>e.reflow(t.modified()).modifies("opacity");ge(oP,J,{transform(e,t){const n=uz[e.method]||uz.parity,i=e.separation||0;let r=t.materialize(t.SOURCE).source,a,s;if(!r||!r.length)return;if(!e.method)return e.modified("method")&&(cz(r),t=fz(t,e)),t;if(r=r.filter(zse),!r.length)return;if(e.sort&&(r=r.slice().sort(e.sort)),a=cz(r),t=fz(t,e),a.length>=3&&lz(a,i)){do a=n(a,i);while(a.length>=3&&lz(a,i));a.length<3&&!Ke(r).opacity&&(a.length>1&&(Ke(a).opacity=0),Ke(r).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(s=Fse(e.boundScale,e.boundOrient,+e.boundTolerance),r.forEach(l=>{s(l)||(l.opacity=0)}));const o=a[0].mark.bounds.clear();return r.forEach(l=>{l.opacity&&o.union(l.bounds)}),t}});function lP(e){J.call(this,null,e)}ge(lP,J,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,i=>n.dirty(i)),t.fields&&t.fields.zindex){const i=t.source&&t.source[0];i&&(i.mark.zdirty=!0)}}});const Yn=new nn;function wf(e,t,n){return e[t]===n?0:(e[t]=n,1)}function Lse(e){var t=e.items[0].orient;return t===Zr||t===Kr}function Bse(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function Use(e,t,n,i){var r=t.items[0],a=r.datum,s=r.translate!=null?r.translate:.5,o=r.orient,l=Bse(a),f=r.range,d=r.offset,h=r.position,p=r.minExtent,y=r.maxExtent,v=a.title&&r.items[l[2]].items[0],b=r.titlePadding,S=r.bounds,_=v&&m3(v),w=0,A=0,C,T;switch(Yn.clear().union(S),S.clear(),(C=l[0])>-1&&S.union(r.items[C].bounds),(C=l[1])>-1&&S.union(r.items[C].bounds),o){case Kf:w=h||0,A=-d,T=Math.max(p,Math.min(y,-S.y1)),S.add(0,-T).add(f,0),v&&Km(e,v,T,b,_,0,-1,S);break;case Zr:w=-d,A=h||0,T=Math.max(p,Math.min(y,-S.x1)),S.add(-T,0).add(0,f),v&&Km(e,v,T,b,_,1,-1,S);break;case Kr:w=n+d,A=h||0,T=Math.max(p,Math.min(y,S.x2)),S.add(0,0).add(T,f),v&&Km(e,v,T,b,_,1,1,S);break;case mu:w=h||0,A=i+d,T=Math.max(p,Math.min(y,S.y2)),S.add(0,0).add(f,T),v&&Km(e,v,T,b,0,0,1,S);break;default:w=r.x,A=r.y}return to(S.translate(w,A),r),wf(r,"x",w+s)|wf(r,"y",A+s)&&(r.bounds=Yn,e.dirty(r),r.bounds=S,e.dirty(r)),r.mark.bounds.clear().union(S)}function Km(e,t,n,i,r,a,s,o){const l=t.bounds;if(t.auto){const f=s*(n+r+i);let d=0,h=0;e.dirty(t),a?d=(t.x||0)-(t.x=f):h=(t.y||0)-(t.y=f),t.mark.bounds.clear().union(l.translate(-d,-h)),e.dirty(t)}o.union(l)}const dz=(e,t)=>Math.floor(Math.min(e,t)),hz=(e,t)=>Math.ceil(Math.max(e,t));function qse(e){var t=e.items,n=t.length,i=0,r,a;const s={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;i<n;++i)if(r=t[i],a=r.items,r.marktype===Db)switch(r.role){case M3:case O3:case k3:break;case Qq:s.rowheaders.push(...a);break;case Zq:s.rowfooters.push(...a);break;case Jq:s.colheaders.push(...a);break;case eP:s.colfooters.push(...a);break;case Kq:s.rowtitle=a[0];break;case tP:s.coltitle=a[0];break;default:s.marks.push(...a)}return s}function Pse(e){return new nn().set(0,0,e.width||0,e.height||0)}function Ise(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function kt(e,t,n){const i=xe(e)?e[t]:e;return i??(n!==void 0?n:0)}function gz(e){return e<0?Math.ceil(-e):0}function cP(e,t,n){var i=!n.nodirty,r=n.bounds===D3?Pse:Ise,a=Yn.set(0,0,0,0),s=kt(n.align,Qo),o=kt(n.align,Zo),l=kt(n.padding,Qo),f=kt(n.padding,Zo),d=n.columns||t.length,h=d<=0?1:Math.ceil(t.length/d),p=t.length,y=Array(p),v=Array(d),b=0,S=Array(p),_=Array(h),w=0,A=Array(p),C=Array(p),T=Array(p),k,M,R,z,U,L,G,j,q,F,D;for(M=0;M<d;++M)v[M]=0;for(M=0;M<h;++M)_[M]=0;for(M=0;M<p;++M)L=t[M],U=T[M]=r(L),L.x=L.x||0,A[M]=0,L.y=L.y||0,C[M]=0,R=M%d,z=~~(M/d),b=Math.max(b,G=Math.ceil(U.x2)),w=Math.max(w,j=Math.ceil(U.y2)),v[R]=Math.max(v[R],G),_[z]=Math.max(_[z],j),y[M]=l+gz(U.x1),S[M]=f+gz(U.y1),i&&e.dirty(t[M]);for(M=0;M<p;++M)M%d===0&&(y[M]=0),M<d&&(S[M]=0);if(s===AA)for(R=1;R<d;++R){for(D=0,M=R;M<p;M+=d)D<y[M]&&(D=y[M]);for(M=R;M<p;M+=d)y[M]=D+v[R-1]}else if(s===Qm){for(D=0,M=0;M<p;++M)M%d&&D<y[M]&&(D=y[M]);for(M=0;M<p;++M)M%d&&(y[M]=D+b)}else for(s=!1,R=1;R<d;++R)for(M=R;M<p;M+=d)y[M]+=v[R-1];if(o===AA)for(z=1;z<h;++z){for(D=0,M=z*d,k=M+d;M<k;++M)D<S[M]&&(D=S[M]);for(M=z*d;M<k;++M)S[M]=D+_[z-1]}else if(o===Qm){for(D=0,M=d;M<p;++M)D<S[M]&&(D=S[M]);for(M=d;M<p;++M)S[M]=D+w}else for(o=!1,z=1;z<h;++z)for(M=z*d,k=M+d;M<k;++M)S[M]+=_[z-1];for(q=0,M=0;M<p;++M)q=y[M]+(M%d?q:0),A[M]+=q-t[M].x;for(R=0;R<d;++R)for(F=0,M=R;M<p;M+=d)F+=S[M],C[M]+=F-t[M].y;if(s&&kt(n.center,Qo)&&h>1)for(M=0;M<p;++M)U=s===Qm?b:v[M%d],q=U-T[M].x2-t[M].x-A[M],q>0&&(A[M]+=q/2);if(o&&kt(n.center,Zo)&&d!==1)for(M=0;M<p;++M)U=o===Qm?w:_[~~(M/d)],F=U-T[M].y2-t[M].y-C[M],F>0&&(C[M]+=F/2);for(M=0;M<p;++M)a.union(T[M].translate(A[M],C[M]));switch(q=kt(n.anchor,Cse),F=kt(n.anchor,$se),kt(n.anchor,Qo)){case oi:q-=a.width();break;case wA:q-=a.width()/2}switch(kt(n.anchor,Zo)){case oi:F-=a.height();break;case wA:F-=a.height()/2}for(q=Math.round(q),F=Math.round(F),a.clear(),M=0;M<p;++M)t[M].mark.bounds.clear();for(M=0;M<p;++M)L=t[M],L.x+=A[M]+=q,L.y+=C[M]+=F,a.union(L.mark.bounds.union(L.bounds.translate(A[M],C[M]))),i&&e.dirty(L);return a}function jse(e,t,n){var i=qse(t),r=i.marks,a=n.bounds===D3?Hse:Gse,s=n.offset,o=n.columns||r.length,l=o<=0?1:Math.ceil(r.length/o),f=l*o,d,h,p,y,v,b,S;const _=cP(e,r,n);_.empty()&&_.set(0,0,0,0),i.rowheaders&&(b=kt(n.headerBand,Zo,null),d=Jm(e,i.rowheaders,r,o,l,-kt(s,"rowHeader"),dz,0,a,"x1",0,o,1,b)),i.colheaders&&(b=kt(n.headerBand,Qo,null),h=Jm(e,i.colheaders,r,o,o,-kt(s,"columnHeader"),dz,1,a,"y1",0,1,o,b)),i.rowfooters&&(b=kt(n.footerBand,Zo,null),p=Jm(e,i.rowfooters,r,o,l,kt(s,"rowFooter"),hz,0,a,"x2",o-1,o,1,b)),i.colfooters&&(b=kt(n.footerBand,Qo,null),y=Jm(e,i.colfooters,r,o,o,kt(s,"columnFooter"),hz,1,a,"y2",f-o,1,o,b)),i.rowtitle&&(v=kt(n.titleAnchor,Zo),S=kt(s,"rowTitle"),S=v===oi?p+S:d-S,b=kt(n.titleBand,Zo,.5),pz(e,i.rowtitle,S,0,_,b)),i.coltitle&&(v=kt(n.titleAnchor,Qo),S=kt(s,"columnTitle"),S=v===oi?y+S:h-S,b=kt(n.titleBand,Qo,.5),pz(e,i.coltitle,S,1,_,b))}function Hse(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function Gse(e,t){return e.bounds[t]}function Jm(e,t,n,i,r,a,s,o,l,f,d,h,p,y){var v=n.length,b=0,S=0,_,w,A,C,T,k,M,R,z;if(!v)return b;for(_=d;_<v;_+=h)n[_]&&(b=s(b,l(n[_],f)));if(!t.length)return b;for(t.length>r&&(e.warn("Grid headers exceed limit: "+r),t=t.slice(0,r)),b+=a,w=0,C=t.length;w<C;++w)e.dirty(t[w]),t[w].mark.bounds.clear();for(_=d,w=0,C=t.length;w<C;++w,_+=h){for(k=t[w],T=k.mark.bounds,A=_;A>=0&&(M=n[A])==null;A-=p);o?(R=y==null?M.x:Math.round(M.bounds.x1+y*M.bounds.width()),z=b):(R=b,z=y==null?M.y:Math.round(M.bounds.y1+y*M.bounds.height())),T.union(k.bounds.translate(R-(k.x||0),z-(k.y||0))),k.x=R,k.y=z,e.dirty(k),S=s(S,T[f])}return S}function pz(e,t,n,i,r,a){if(t){e.dirty(t);var s=n,o=n;i?s=Math.round(r.x1+a*r.width()):o=Math.round(r.y1+a*r.height()),t.bounds.translate(s-(t.x||0),o-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=s,t.y=o,e.dirty(t)}}function Yse(e,t){const n=e[t]||{};return(i,r)=>n[i]!=null?n[i]:e[i]!=null?e[i]:r}function Xse(e,t){let n=-1/0;return e.forEach(i=>{i.offset!=null&&(n=Math.max(n,i.offset))}),n>-1/0?n:t}function Vse(e,t,n,i,r,a,s){const o=Yse(n,t),l=Xse(e,o("offset",0)),f=o("anchor",T3),d=f===oi?1:f===wA?.5:0,h={align:AA,bounds:o("bounds",D3),columns:o("direction")==="vertical"?1:e.length,padding:o("margin",8),center:o("center"),nodirty:!0};switch(t){case Zr:h.anchor={x:Math.floor(i.x1)-l,column:oi,y:d*(s||i.height()+2*i.y1),row:f};break;case Kr:h.anchor={x:Math.ceil(i.x2)+l,y:d*(s||i.height()+2*i.y1),row:f};break;case Kf:h.anchor={y:Math.floor(r.y1)-l,row:oi,x:d*(a||r.width()+2*r.x1),column:f};break;case mu:h.anchor={y:Math.ceil(r.y2)+l,x:d*(a||r.width()+2*r.x1),column:f};break;case Ese:h.anchor={x:l,y:l};break;case _se:h.anchor={x:a-l,y:l,column:oi};break;case wse:h.anchor={x:l,y:s-l,row:oi};break;case Ase:h.anchor={x:a-l,y:s-l,column:oi,row:oi};break}return h}function Wse(e,t){var n=t.items[0],i=n.datum,r=n.orient,a=n.bounds,s=n.x,o=n.y,l,f;return n._bounds?n._bounds.clear().union(a):n._bounds=a.clone(),a.clear(),Zse(e,n,n.items[0].items[0]),a=Qse(n,a),l=2*n.padding,f=2*n.padding,a.empty()||(l=Math.ceil(a.width()+l),f=Math.ceil(a.height()+f)),i.type===Ose&&Kse(n.items[0].items[0].items[0].items),r!==R3&&(n.x=s=0,n.y=o=0),n.width=l,n.height=f,to(a.set(s,o,s+l,o+f),n),n.mark.bounds.clear().union(a),n}function Qse(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function Zse(e,t,n){var i=t.padding,r=i-n.x,a=i-n.y;if(!t.datum.title)(r||a)&&tg(e,n,r,a);else{var s=t.items[1].items[0],o=s.anchor,l=t.titlePadding||0,f=i-s.x,d=i-s.y;switch(s.orient){case Zr:r+=Math.ceil(s.bounds.width())+l;break;case Kr:case mu:break;default:a+=s.bounds.height()+l}switch((r||a)&&tg(e,n,r,a),s.orient){case Zr:d+=lf(t,n,s,o,1,1);break;case Kr:f+=lf(t,n,s,oi,0,0)+l,d+=lf(t,n,s,o,1,1);break;case mu:f+=lf(t,n,s,o,0,0),d+=lf(t,n,s,oi,-1,0,1)+l;break;default:f+=lf(t,n,s,o,0,0)}(f||d)&&tg(e,s,f,d),(f=Math.round(s.bounds.x1-i))<0&&(tg(e,n,-f,0),tg(e,s,-f,0))}}function lf(e,t,n,i,r,a,s){const o=e.datum.type!=="symbol",l=n.datum.vgrad,f=o&&(a||!l)&&!s?t.items[0]:t,d=f.bounds[r?"y2":"x2"]-e.padding,h=l&&a?d:0,p=l&&a?0:d,y=r<=0?0:m3(n);return Math.round(i===T3?h:i===oi?p-y:.5*(d-y))}function tg(e,t,n,i){t.x+=n,t.y+=i,t.bounds.translate(n,i),t.mark.bounds.translate(n,i),e.dirty(t)}function Kse(e){const t=e.reduce((n,i)=>(n[i.column]=Math.max(i.bounds.x2-i.x,n[i.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function Jse(e,t,n,i,r){var a=t.items[0],s=a.frame,o=a.orient,l=a.anchor,f=a.offset,d=a.padding,h=a.items[0].items[0],p=a.items[1]&&a.items[1].items[0],y=o===Zr||o===Kr?i:n,v=0,b=0,S=0,_=0,w=0,A;if(s!==Db?o===Zr?(v=r.y2,y=r.y1):o===Kr?(v=r.y1,y=r.y2):(v=r.x1,y=r.x2):o===Zr&&(v=i,y=0),A=l===T3?v:l===oi?y:(v+y)/2,p&&p.text){switch(o){case Kf:case mu:w=h.bounds.height()+d;break;case Zr:_=h.bounds.width()+d;break;case Kr:_=-h.bounds.width()-d;break}Yn.clear().union(p.bounds),Yn.translate(_-(p.x||0),w-(p.y||0)),wf(p,"x",_)|wf(p,"y",w)&&(e.dirty(p),p.bounds.clear().union(Yn),p.mark.bounds.clear().union(Yn),e.dirty(p)),Yn.clear().union(p.bounds)}else Yn.clear();switch(Yn.union(h.bounds),o){case Kf:b=A,S=r.y1-Yn.height()-f;break;case Zr:b=r.x1-Yn.width()-f,S=A;break;case Kr:b=r.x2+Yn.width()+f,S=A;break;case mu:b=A,S=r.y2+f;break;default:b=a.x,S=a.y}return wf(a,"x",b)|wf(a,"y",S)&&(Yn.translate(b,S),e.dirty(a),a.bounds.clear().union(Yn),t.bounds.clear().union(Yn),e.dirty(a)),a.bounds}function fP(e){J.call(this,null,e)}ge(fP,J,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(i=>{e.layout&&jse(n,i,e.layout),toe(n,i,e)}),eoe(e.mark.group)?t.reflow():t}});function eoe(e){return e&&e.mark.role!=="legend-entry"}function toe(e,t,n){var i=t.items,r=Math.max(0,t.width||0),a=Math.max(0,t.height||0),s=new nn().set(0,0,r,a),o=s.clone(),l=s.clone(),f=[],d,h,p,y,v,b;for(v=0,b=i.length;v<b;++v)switch(h=i[v],h.role){case M3:y=Lse(h)?o:l,y.union(Use(e,h,r,a));break;case k3:d=h;break;case O3:f.push(Wse(e,h));break;case Tse:case Mse:case Qq:case Zq:case Kq:case Jq:case eP:case tP:o.union(h.bounds),l.union(h.bounds);break;default:s.union(h.bounds)}if(f.length){const S={};f.forEach(_=>{p=_.orient||Kr,p!==R3&&(S[p]||(S[p]=[])).push(_)});for(const _ in S){const w=S[_];cP(e,w,Vse(w,_,n.legends,o,l,r,a))}f.forEach(_=>{const w=_.bounds;if(w.equals(_._bounds)||(_.bounds=_._bounds,e.dirty(_),_.bounds=w,e.dirty(_)),n.autosize&&(n.autosize.type===nP||n.autosize.type===iP||n.autosize.type===rP))switch(_.orient){case Zr:case Kr:s.add(w.x1,0).add(w.x2,0);break;case Kf:case mu:s.add(0,w.y1).add(0,w.y2)}else s.union(w)})}s.union(o).union(l),d&&s.union(Jse(e,d,r,a,s)),t.clip&&s.set(0,0,t.width||0,t.height||0),noe(e,t,s,n)}function noe(e,t,n,i){const r=i.autosize||{},a=r.type;if(e._autosize<1||!a)return;let s=e._width,o=e._height,l=Math.max(0,t.width||0),f=Math.max(0,Math.ceil(-n.x1)),d=Math.max(0,t.height||0),h=Math.max(0,Math.ceil(-n.y1));const p=Math.max(0,Math.ceil(n.x2-l)),y=Math.max(0,Math.ceil(n.y2-d));if(r.contains===kse){const v=e.padding();s-=v.left+v.right,o-=v.top+v.bottom}a===R3?(f=0,h=0,l=s,d=o):a===nP?(l=Math.max(0,s-f-p),d=Math.max(0,o-h-y)):a===iP?(l=Math.max(0,s-f-p),o=d+h+y):a===rP?(s=l+f+p,d=Math.max(0,o-h-y)):a===Rse&&(s=l+f+p,o=d+h+y),e._resizeView(s,o,l,d,[f,h],r.resize)}const ioe=Object.freeze(Object.defineProperty({__proto__:null,bound:aP,identifier:N3,mark:sP,overlap:oP,render:lP,viewlayout:fP},Symbol.toStringTag,{value:"Module"}));function dP(e){J.call(this,null,e)}ge(dP,J,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.scale,s=e.count==null?e.values?e.values.length:10:e.count,o=KT(a,s,e.minstep),l=e.format||qU(n,a,o,e.formatSpecifier,e.formatType,!!e.values),f=e.values?UU(a,e.values,o):JT(a,o);return r&&(i.rem=r),r=f.map((d,h)=>lt({index:h/(f.length-1||1),value:d,label:l(d)})),e.extra&&r.length&&r.push(lt({index:-1,extra:{value:r[0].value},label:""})),i.source=r,i.add=r,this.value=r,i}});function hP(e){J.call(this,null,e)}function roe(){return lt({})}function aoe(e){const t=Ed().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}ge(hP,J,{transform(e,t){var n=t.dataflow,i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.item||roe,a=e.key||Me,s=this.value;return re(i.encode)&&(i.encode=null),s&&(e.modified("key")||t.modified(a))&&te("DataJoin does not support modified key function or fields."),s||(t=t.addAll(),this.value=s=aoe(a)),t.visit(t.ADD,o=>{const l=a(o);let f=s.get(l);f?f.exit?(s.empty--,i.add.push(f)):i.mod.push(f):(f=r(o),s.set(l,f),i.add.push(f)),f.datum=o,f.exit=!1}),t.visit(t.MOD,o=>{const l=a(o),f=s.get(l);f&&(f.datum=o,i.mod.push(f))}),t.visit(t.REM,o=>{const l=a(o),f=s.get(l);o===f.datum&&!f.exit&&(i.rem.push(f),f.exit=!0,++s.empty)}),t.changed(t.ADD_MOD)&&i.modifies("datum"),(t.clean()||e.clean&&s.empty>n.cleanThreshold)&&n.runAfter(s.clean),i}});function gP(e){J.call(this,null,e)}ge(gP,J,{transform(e,t){var n=t.fork(t.ADD_REM),i=e.mod||!1,r=e.encoders,a=t.encode;if(re(a))if(n.changed()||a.every(h=>r[h]))a=a[0],n.encode=null;else return t.StopPropagation;var s=a==="enter",o=r.update||Fo,l=r.enter||Fo,f=r.exit||Fo,d=(a&&!s?r[a]:o)||Fo;if(t.changed(t.ADD)&&(t.visit(t.ADD,h=>{l(h,e),o(h,e)}),n.modifies(l.output),n.modifies(o.output),d!==Fo&&d!==o&&(t.visit(t.ADD,h=>{d(h,e)}),n.modifies(d.output))),t.changed(t.REM)&&f!==Fo&&(t.visit(t.REM,h=>{f(h,e)}),n.modifies(f.output)),s||d!==Fo){const h=t.MOD|(e.modified()?t.REFLOW:0);s?(t.visit(h,p=>{const y=l(p,e)||i;(d(p,e)||y)&&n.mod.push(p)}),n.mod.length&&n.modifies(l.output)):t.visit(h,p=>{(d(p,e)||i)&&n.mod.push(p)}),n.mod.length&&n.modifies(d.output)}return n.changed()?n:t.StopPropagation}});function pP(e){J.call(this,[],e)}ge(pP,J,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),i=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=this.value,a=e.type||k1,s=e.scale,o=+e.limit,l=KT(s,e.count==null?5:e.count,e.minstep),f=!!e.values||a===k1,d=e.format||HU(n,s,l,a,e.formatSpecifier,e.formatType,f),h=e.values||jU(s,l),p,y,v,b,S;return r&&(i.rem=r),a===k1?(o&&h.length>o?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),r=h.slice(0,o-1),S=!0):r=h,Pe(v=e.size)?(!e.values&&s(r[0])===0&&(r=r.slice(1)),b=r.reduce((_,w)=>Math.max(_,v(w,e)),0)):v=ni(b=v||8),r=r.map((_,w)=>lt({index:w,label:d(_,w,r),value:_,offset:b,size:v(_,e)})),S&&(S=h[r.length],r.push(lt({index:r.length,label:`…${h.length-r.length} entries`,value:S,offset:b,size:v(S,e)})))):a===Oie?(p=s.domain(),y=FU(s,p[0],Ke(p)),h.length<3&&!e.values&&p[0]!==Ke(p)&&(h=[p[0],Ke(p)]),r=h.map((_,w)=>lt({index:w,label:d(_,w,h),value:_,perc:y(_)}))):(v=h.length-1,y=Iie(s),r=h.map((_,w)=>lt({index:w,label:d(_,w,h),value:_,perc:w?y(_):0,perc2:w===v?1:y(h[w+1])}))),i.source=r,i.add=r,this.value=r,i}});const soe=e=>e.source.x,ooe=e=>e.source.y,uoe=e=>e.target.x,loe=e=>e.target.y;function z3(e){J.call(this,{},e)}z3.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};ge(z3,J,{transform(e,t){var n=e.sourceX||soe,i=e.sourceY||ooe,r=e.targetX||uoe,a=e.targetY||loe,s=e.as||"path",o=e.orient||"vertical",l=e.shape||"line",f=mz.get(l+"-"+o)||mz.get(l);return f||te("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,d=>{d[s]=f(n(d),i(d),r(d),a(d))}),t.reflow(e.modified()).modifies(s)}});const mP=(e,t,n,i)=>"M"+e+","+t+"L"+n+","+i,coe=(e,t,n,i)=>mP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),yP=(e,t,n,i)=>{var r=n-e,a=i-t,s=Math.hypot(r,a)/2,o=180*Math.atan2(a,r)/Math.PI;return"M"+e+","+t+"A"+s+","+s+" "+o+" 0 1 "+n+","+i},foe=(e,t,n,i)=>yP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),vP=(e,t,n,i)=>{const r=n-e,a=i-t,s=.2*(r+a),o=.2*(a-r);return"M"+e+","+t+"C"+(e+s)+","+(t+o)+" "+(n+o)+","+(i-s)+" "+n+","+i},doe=(e,t,n,i)=>vP(t*Math.cos(e),t*Math.sin(e),i*Math.cos(n),i*Math.sin(n)),hoe=(e,t,n,i)=>"M"+e+","+t+"V"+i+"H"+n,goe=(e,t,n,i)=>"M"+e+","+t+"H"+n+"V"+i,poe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*r+","+t*a+"A"+t+","+t+" 0 0,"+(l?1:0)+" "+t*s+","+t*o+"L"+i*s+","+i*o},moe=(e,t,n,i)=>{const r=(e+n)/2;return"M"+e+","+t+"C"+r+","+t+" "+r+","+i+" "+n+","+i},yoe=(e,t,n,i)=>{const r=(t+i)/2;return"M"+e+","+t+"C"+e+","+r+" "+n+","+r+" "+n+","+i},voe=(e,t,n,i)=>{const r=Math.cos(e),a=Math.sin(e),s=Math.cos(n),o=Math.sin(n),l=(t+i)/2;return"M"+t*r+","+t*a+"C"+l*r+","+l*a+" "+l*s+","+l*o+" "+i*s+","+i*o},mz=Ed({line:mP,"line-radial":coe,arc:yP,"arc-radial":foe,curve:vP,"curve-radial":doe,"orthogonal-horizontal":hoe,"orthogonal-vertical":goe,"orthogonal-radial":poe,"diagonal-horizontal":moe,"diagonal-vertical":yoe,"diagonal-radial":voe});function F3(e){J.call(this,null,e)}F3.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};ge(F3,J,{transform(e,t){var n=e.as||["startAngle","endAngle"],i=n[0],r=n[1],a=e.field||xd,s=e.startAngle||0,o=e.endAngle!=null?e.endAngle:2*Math.PI,l=t.source,f=l.map(a),d=f.length,h=s,p=(o-s)/D7(f),y=tr(d),v,b,S;for(e.sort&&y.sort((_,w)=>f[_]-f[w]),v=0;v<d;++v)S=f[y[v]],b=l[y[v]],b[i]=h,b[r]=h+=S*p;return this.value=f,t.reflow(e.modified()).modifies(n)}});const boe=5;function xoe(e){const t=e.type;return!e.bins&&(t===Yf||t===qp||t===Pp)}function bP(e){return WT(e)&&e!==Ua}const Soe=ra(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function xP(e){J.call(this,null,e),this.modified(!0)}ge(xP,J,{transform(e,t){var n=t.dataflow,i=this.value,r=Eoe(e);(!i||r!==i.type)&&(this.value=i=ot(r)());for(r in e)if(!Soe[r]){if(r==="padding"&&bP(i.type))continue;Pe(i[r])?i[r](e[r]):n.warn("Unsupported scale property: "+r)}return Toe(i,e,$oe(i,e,woe(i,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Eoe(e){var t=e.type,n="",i;return t===Ua?Ua+"-"+Yf:(_oe(e)&&(i=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=i===2?Ua+"-":i===3?kd+"-":""),(n+t||Yf).toLowerCase())}function _oe(e){const t=e.type;return WT(t)&&t!==zl&&t!==Fl&&(e.scheme||e.range&&e.range.length&&e.range.every(Ee))}function woe(e,t,n){const i=Aoe(e,t.domainRaw,n);if(i>-1)return i;var r=t.domain,a=e.type,s=t.zero||t.zero===void 0&&xoe(e),o,l;if(!r)return 0;if((s||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(o=(r=r.slice()).length-1||1,s&&(r[0]>0&&(r[0]=0),r[o]<0&&(r[o]=0)),t.domainMin!=null&&(r[0]=t.domainMin),t.domainMax!=null&&(r[o]=t.domainMax),t.domainMid!=null)){l=t.domainMid;const f=l>r[o]?o+1:l<r[0]?0:o;f!==o&&n.warn("Scale domainMid exceeds domain min or max.",l),r.splice(f,0,l)}return bP(a)&&t.padding&&r[0]!==Ke(r)&&(r=Coe(a,r,t.range,t.padding,t.exponent,t.constant)),e.domain(SP(a,r,n)),a===GT&&e.unknown(t.domainImplicit?rA:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&KT(e,t.nice)||null),r.length}function Aoe(e,t,n){return t?(e.domain(SP(e.type,t,n)),t.length):-1}function Coe(e,t,n,i,r,a){var s=Math.abs(Ke(n)-n[0]),o=s/(s-2*i),l=e===Qs?d$(t,null,o):e===Pp?iy(t,null,o,.5):e===qp?iy(t,null,o,r||1):e===vb?h$(t,null,o,a||1):f$(t,null,o);return t=t.slice(),t[0]=l[0],t[t.length-1]=l[1],t}function SP(e,t,n){if(OU(e)){var i=Math.abs(t.reduce((r,a)=>r+(a<0?-1:a>0?1:0),0));i!==t.length&&n.warn("Log scale domain includes zero: "+he(t))}return t}function $oe(e,t,n){let i=t.bins;if(i&&!re(i)){const r=e.domain(),a=r[0],s=Ke(r),o=i.step;let l=i.start==null?a:i.start,f=i.stop==null?s:i.stop;o||te("Scale bins parameter missing step property."),l<a&&(l=o*Math.ceil(a/o)),f>s&&(f=o*Math.floor(s/o)),i=tr(l,f+o/2,o)}return i?e.bins=i:e.bins&&delete e.bins,e.type===YT&&(i?!t.domain&&!t.domainRaw&&(e.domain(i),n=i.length):e.bins=e.domain()),n}function Toe(e,t,n){var i=e.type,r=t.round||!1,a=t.range;if(t.rangeStep!=null)a=Moe(i,t,n);else if(t.scheme&&(a=koe(i,t,n),Pe(a))){if(e.interpolator)return e.interpolator(a);te(`Scale type ${i} does not support interpolating color schemes.`)}if(a&&RU(i))return e.interpolator(Sb(CA(a,t.reverse),t.interpolate,t.interpolateGamma));a&&t.interpolate&&e.interpolate?e.interpolate(QT(t.interpolate,t.interpolateGamma)):Pe(e.round)?e.round(r):Pe(e.rangeRound)&&e.interpolate(r?Bp:Au),a&&e.range(CA(a,t.reverse))}function Moe(e,t,n){e!==AU&&e!==fA&&te("Only band and point scales support rangeStep.");var i=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,r=e===fA?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*HT(n,r,i)]}function koe(e,t,n){var i=t.schemeExtent,r,a;return re(t.scheme)?a=Sb(t.scheme,t.interpolate,t.interpolateGamma):(r=t.scheme.toLowerCase(),a=ZT(r),a||te(`Unrecognized scheme name: ${t.scheme}`)),n=e===xb?n+1:e===YT?n-1:e===Xf||e===bb?+t.schemeCount||boe:n,RU(e)?yz(a,i,t.reverse):Pe(a)?zU(yz(a,i),n):e===GT?a:a.slice(0,n)}function yz(e,t,n){return Pe(e)&&(t||n)?NU(e,CA(t||[0,1],n)):e}function CA(e,t){return t?e.slice().reverse():e}function EP(e){J.call(this,null,e)}ge(EP,J,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(rc(e.sort)),this.modified(n),t}});const vz="zero",_P="center",wP="normalize",AP=["y0","y1"];function L3(e){J.call(this,null,e)}L3.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:vz,values:[vz,_P,wP]},{name:"as",type:"string",array:!0,length:2,default:AP}]};ge(L3,J,{transform(e,t){var n=e.as||AP,i=n[0],r=n[1],a=rc(e.sort),s=e.field||xd,o=e.offset===_P?Ooe:e.offset===wP?Roe:Doe,l,f,d,h;for(l=Noe(t.source,e.groupby,a,s),f=0,d=l.length,h=l.max;f<d;++f)o(l[f],h,s,i,r);return t.reflow(e.modified()).modifies(n)}});function Ooe(e,t,n,i,r){for(var a=(t-e.sum)/2,s=e.length,o=0,l;o<s;++o)l=e[o],l[i]=a,l[r]=a+=Math.abs(n(l))}function Roe(e,t,n,i,r){for(var a=1/e.sum,s=0,o=e.length,l=0,f=0,d;l<o;++l)d=e[l],d[i]=s,d[r]=s=a*(f+=Math.abs(n(d)))}function Doe(e,t,n,i,r){for(var a=0,s=0,o=e.length,l=0,f,d;l<o;++l)d=e[l],f=+n(d),f<0?(d[i]=s,d[r]=s+=f):(d[i]=a,d[r]=a+=f)}function Noe(e,t,n,i){var r=[],a=b=>b(d),s,o,l,f,d,h,p,y,v;if(t==null)r.push(e.slice());else for(s={},o=0,l=e.length;o<l;++o)d=e[o],h=t.map(a),p=s[h],p||(s[h]=p=[],r.push(p)),p.push(d);for(h=0,v=0,f=r.length;h<f;++h){for(p=r[h],o=0,y=0,l=p.length;o<l;++o)y+=Math.abs(i(p[o]));p.sum=y,y>v&&(v=y),n&&p.sort(n)}return r.max=v,r}const zoe=Object.freeze(Object.defineProperty({__proto__:null,axisticks:dP,datajoin:hP,encode:gP,legendentries:pP,linkpath:z3,pie:F3,scale:xP,sortitems:EP,stack:L3},Symbol.toStringTag,{value:"Module"}));var Oe=1e-6,Ny=1e-12,Ye=Math.PI,Pt=Ye/2,zy=Ye/4,mi=Ye*2,Xt=180/Ye,He=Ye/180,Ze=Math.abs,Rd=Math.atan,Nr=Math.atan2,Re=Math.cos,e1=Math.ceil,CP=Math.exp,$A=Math.hypot,Fy=Math.log,O_=Math.pow,ke=Math.sin,Ar=Math.sign||function(e){return e>0?1:e<0?-1:0},yi=Math.sqrt,B3=Math.tan;function $P(e){return e>1?0:e<-1?Ye:Math.acos(e)}function zi(e){return e>1?Pt:e<-1?-Pt:Math.asin(e)}function zn(){}function Ly(e,t){e&&xz.hasOwnProperty(e.type)&&xz[e.type](e,t)}var bz={Feature:function(e,t){Ly(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,i=-1,r=n.length;++i<r;)Ly(n[i].geometry,t)}},xz={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)e=n[i],t.point(e[0],e[1],e[2])},LineString:function(e,t){TA(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)TA(n[i],t,0)},Polygon:function(e,t){Sz(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,i=-1,r=n.length;++i<r;)Sz(n[i],t)},GeometryCollection:function(e,t){for(var n=e.geometries,i=-1,r=n.length;++i<r;)Ly(n[i],t)}};function TA(e,t,n){var i=-1,r=e.length-n,a;for(t.lineStart();++i<r;)a=e[i],t.point(a[0],a[1],a[2]);t.lineEnd()}function Sz(e,t){var n=-1,i=e.length;for(t.polygonStart();++n<i;)TA(e[n],t,1);t.polygonEnd()}function Ds(e,t){e&&bz.hasOwnProperty(e.type)?bz[e.type](e,t):Ly(e,t)}var By=new gi,Uy=new gi,TP,MP,MA,kA,OA,Xa={point:zn,lineStart:zn,lineEnd:zn,polygonStart:function(){By=new gi,Xa.lineStart=Foe,Xa.lineEnd=Loe},polygonEnd:function(){var e=+By;Uy.add(e<0?mi+e:e),this.lineStart=this.lineEnd=this.point=zn},sphere:function(){Uy.add(mi)}};function Foe(){Xa.point=Boe}function Loe(){kP(TP,MP)}function Boe(e,t){Xa.point=kP,TP=e,MP=t,e*=He,t*=He,MA=e,kA=Re(t=t/2+zy),OA=ke(t)}function kP(e,t){e*=He,t*=He,t=t/2+zy;var n=e-MA,i=n>=0?1:-1,r=i*n,a=Re(t),s=ke(t),o=OA*s,l=kA*a+o*Re(r),f=o*i*ke(r);By.add(Nr(f,l)),MA=e,kA=a,OA=s}function Uoe(e){return Uy=new gi,Ds(e,Xa),Uy*2}function qy(e){return[Nr(e[1],e[0]),zi(e[2])]}function Bl(e){var t=e[0],n=e[1],i=Re(n);return[i*Re(t),i*ke(t),ke(n)]}function t1(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Jf(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function R_(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function n1(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function Py(e){var t=yi(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Nt,Mi,Ut,Ki,hl,OP,RP,Of,Pg,Po,Zs,Os={point:RA,lineStart:Ez,lineEnd:_z,polygonStart:function(){Os.point=NP,Os.lineStart=qoe,Os.lineEnd=Poe,Pg=new gi,Xa.polygonStart()},polygonEnd:function(){Xa.polygonEnd(),Os.point=RA,Os.lineStart=Ez,Os.lineEnd=_z,By<0?(Nt=-(Ut=180),Mi=-(Ki=90)):Pg>Oe?Ki=90:Pg<-Oe&&(Mi=-90),Zs[0]=Nt,Zs[1]=Ut},sphere:function(){Nt=-(Ut=180),Mi=-(Ki=90)}};function RA(e,t){Po.push(Zs=[Nt=e,Ut=e]),t<Mi&&(Mi=t),t>Ki&&(Ki=t)}function DP(e,t){var n=Bl([e*He,t*He]);if(Of){var i=Jf(Of,n),r=[i[1],-i[0],0],a=Jf(r,i);Py(a),a=qy(a);var s=e-hl,o=s>0?1:-1,l=a[0]*Xt*o,f,d=Ze(s)>180;d^(o*hl<l&&l<o*e)?(f=a[1]*Xt,f>Ki&&(Ki=f)):(l=(l+360)%360-180,d^(o*hl<l&&l<o*e)?(f=-a[1]*Xt,f<Mi&&(Mi=f)):(t<Mi&&(Mi=t),t>Ki&&(Ki=t))),d?e<hl?Zi(Nt,e)>Zi(Nt,Ut)&&(Ut=e):Zi(e,Ut)>Zi(Nt,Ut)&&(Nt=e):Ut>=Nt?(e<Nt&&(Nt=e),e>Ut&&(Ut=e)):e>hl?Zi(Nt,e)>Zi(Nt,Ut)&&(Ut=e):Zi(e,Ut)>Zi(Nt,Ut)&&(Nt=e)}else Po.push(Zs=[Nt=e,Ut=e]);t<Mi&&(Mi=t),t>Ki&&(Ki=t),Of=n,hl=e}function Ez(){Os.point=DP}function _z(){Zs[0]=Nt,Zs[1]=Ut,Os.point=RA,Of=null}function NP(e,t){if(Of){var n=e-hl;Pg.add(Ze(n)>180?n+(n>0?360:-360):n)}else OP=e,RP=t;Xa.point(e,t),DP(e,t)}function qoe(){Xa.lineStart()}function Poe(){NP(OP,RP),Xa.lineEnd(),Ze(Pg)>Oe&&(Nt=-(Ut=180)),Zs[0]=Nt,Zs[1]=Ut,Of=null}function Zi(e,t){return(t-=e)<0?t+360:t}function Ioe(e,t){return e[0]-t[0]}function wz(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function joe(e){var t,n,i,r,a,s,o;if(Ki=Ut=-(Nt=Mi=1/0),Po=[],Ds(e,Os),n=Po.length){for(Po.sort(Ioe),t=1,i=Po[0],a=[i];t<n;++t)r=Po[t],wz(i,r[0])||wz(i,r[1])?(Zi(i[0],r[1])>Zi(i[0],i[1])&&(i[1]=r[1]),Zi(r[0],i[1])>Zi(i[0],i[1])&&(i[0]=r[0])):a.push(i=r);for(s=-1/0,n=a.length-1,t=0,i=a[n];t<=n;i=r,++t)r=a[t],(o=Zi(i[1],r[0]))>s&&(s=o,Nt=r[0],Ut=i[1])}return Po=Zs=null,Nt===1/0||Mi===1/0?[[NaN,NaN],[NaN,NaN]]:[[Nt,Mi],[Ut,Ki]]}var _g,Iy,jy,Hy,Gy,Yy,Xy,Vy,DA,NA,zA,zP,FP,ui,li,ci,Jr={sphere:zn,point:U3,lineStart:Az,lineEnd:Cz,polygonStart:function(){Jr.lineStart=Yoe,Jr.lineEnd=Xoe},polygonEnd:function(){Jr.lineStart=Az,Jr.lineEnd=Cz}};function U3(e,t){e*=He,t*=He;var n=Re(t);Jp(n*Re(e),n*ke(e),ke(t))}function Jp(e,t,n){++_g,jy+=(e-jy)/_g,Hy+=(t-Hy)/_g,Gy+=(n-Gy)/_g}function Az(){Jr.point=Hoe}function Hoe(e,t){e*=He,t*=He;var n=Re(t);ui=n*Re(e),li=n*ke(e),ci=ke(t),Jr.point=Goe,Jp(ui,li,ci)}function Goe(e,t){e*=He,t*=He;var n=Re(t),i=n*Re(e),r=n*ke(e),a=ke(t),s=Nr(yi((s=li*a-ci*r)*s+(s=ci*i-ui*a)*s+(s=ui*r-li*i)*s),ui*i+li*r+ci*a);Iy+=s,Yy+=s*(ui+(ui=i)),Xy+=s*(li+(li=r)),Vy+=s*(ci+(ci=a)),Jp(ui,li,ci)}function Cz(){Jr.point=U3}function Yoe(){Jr.point=Voe}function Xoe(){LP(zP,FP),Jr.point=U3}function Voe(e,t){zP=e,FP=t,e*=He,t*=He,Jr.point=LP;var n=Re(t);ui=n*Re(e),li=n*ke(e),ci=ke(t),Jp(ui,li,ci)}function LP(e,t){e*=He,t*=He;var n=Re(t),i=n*Re(e),r=n*ke(e),a=ke(t),s=li*a-ci*r,o=ci*i-ui*a,l=ui*r-li*i,f=$A(s,o,l),d=zi(f),h=f&&-d/f;DA.add(h*s),NA.add(h*o),zA.add(h*l),Iy+=d,Yy+=d*(ui+(ui=i)),Xy+=d*(li+(li=r)),Vy+=d*(ci+(ci=a)),Jp(ui,li,ci)}function Woe(e){_g=Iy=jy=Hy=Gy=Yy=Xy=Vy=0,DA=new gi,NA=new gi,zA=new gi,Ds(e,Jr);var t=+DA,n=+NA,i=+zA,r=$A(t,n,i);return r<Ny&&(t=Yy,n=Xy,i=Vy,Iy<Oe&&(t=jy,n=Hy,i=Gy),r=$A(t,n,i),r<Ny)?[NaN,NaN]:[Nr(n,t)*Xt,zi(i/r)*Xt]}function FA(e,t){function n(i,r){return i=e(i,r),t(i[0],i[1])}return e.invert&&t.invert&&(n.invert=function(i,r){return i=t.invert(i,r),i&&e.invert(i[0],i[1])}),n}function LA(e,t){return Ze(e)>Ye&&(e-=Math.round(e/mi)*mi),[e,t]}LA.invert=LA;function BP(e,t,n){return(e%=mi)?t||n?FA(Tz(e),Mz(t,n)):Tz(e):t||n?Mz(t,n):LA}function $z(e){return function(t,n){return t+=e,Ze(t)>Ye&&(t-=Math.round(t/mi)*mi),[t,n]}}function Tz(e){var t=$z(e);return t.invert=$z(-e),t}function Mz(e,t){var n=Re(e),i=ke(e),r=Re(t),a=ke(t);function s(o,l){var f=Re(l),d=Re(o)*f,h=ke(o)*f,p=ke(l),y=p*n+d*i;return[Nr(h*r-y*a,d*n-p*i),zi(y*r+h*a)]}return s.invert=function(o,l){var f=Re(l),d=Re(o)*f,h=ke(o)*f,p=ke(l),y=p*r-h*a;return[Nr(h*r+p*a,d*n+y*i),zi(y*n-d*i)]},s}function Qoe(e){e=BP(e[0]*He,e[1]*He,e.length>2?e[2]*He:0);function t(n){return n=e(n[0]*He,n[1]*He),n[0]*=Xt,n[1]*=Xt,n}return t.invert=function(n){return n=e.invert(n[0]*He,n[1]*He),n[0]*=Xt,n[1]*=Xt,n},t}function Zoe(e,t,n,i,r,a){if(n){var s=Re(t),o=ke(t),l=i*n;r==null?(r=t+i*mi,a=t-l/2):(r=kz(s,r),a=kz(s,a),(i>0?r<a:r>a)&&(r+=i*mi));for(var f,d=r;i>0?d>a:d<a;d-=l)f=qy([s,-o*Re(d),-o*ke(d)]),e.point(f[0],f[1])}}function kz(e,t){t=Bl(t),t[0]-=e,Py(t);var n=$P(-t[1]);return((-t[2]<0?-n:n)+mi-Oe)%mi}function UP(){var e=[],t;return{point:function(n,i,r){t.push([n,i,r])},lineStart:function(){e.push(t=[])},lineEnd:zn,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function U1(e,t){return Ze(e[0]-t[0])<Oe&&Ze(e[1]-t[1])<Oe}function i1(e,t,n,i){this.x=e,this.z=t,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function qP(e,t,n,i,r){var a=[],s=[],o,l;if(e.forEach(function(v){if(!((b=v.length-1)<=0)){var b,S=v[0],_=v[b],w;if(U1(S,_)){if(!S[2]&&!_[2]){for(r.lineStart(),o=0;o<b;++o)r.point((S=v[o])[0],S[1]);r.lineEnd();return}_[0]+=2*Oe}a.push(w=new i1(S,v,null,!0)),s.push(w.o=new i1(S,null,w,!1)),a.push(w=new i1(_,v,null,!1)),s.push(w.o=new i1(_,null,w,!0))}}),!!a.length){for(s.sort(t),Oz(a),Oz(s),o=0,l=s.length;o<l;++o)s[o].e=n=!n;for(var f=a[0],d,h;;){for(var p=f,y=!0;p.v;)if((p=p.n)===f)return;d=p.z,r.lineStart();do{if(p.v=p.o.v=!0,p.e){if(y)for(o=0,l=d.length;o<l;++o)r.point((h=d[o])[0],h[1]);else i(p.x,p.n.x,1,r);p=p.n}else{if(y)for(d=p.p.z,o=d.length-1;o>=0;--o)r.point((h=d[o])[0],h[1]);else i(p.x,p.p.x,-1,r);p=p.p}p=p.o,d=p.z,y=!y}while(!p.v);r.lineEnd()}}}function Oz(e){if(t=e.length){for(var t,n=0,i=e[0],r;++n<t;)i.n=r=e[n],r.p=i,i=r;i.n=r=e[0],r.p=i}}function D_(e){return Ze(e[0])<=Ye?e[0]:Ar(e[0])*((Ze(e[0])+Ye)%mi-Ye)}function Koe(e,t){var n=D_(t),i=t[1],r=ke(i),a=[ke(n),-Re(n),0],s=0,o=0,l=new gi;r===1?i=Pt+Oe:r===-1&&(i=-Pt-Oe);for(var f=0,d=e.length;f<d;++f)if(p=(h=e[f]).length)for(var h,p,y=h[p-1],v=D_(y),b=y[1]/2+zy,S=ke(b),_=Re(b),w=0;w<p;++w,v=C,S=k,_=M,y=A){var A=h[w],C=D_(A),T=A[1]/2+zy,k=ke(T),M=Re(T),R=C-v,z=R>=0?1:-1,U=z*R,L=U>Ye,G=S*k;if(l.add(Nr(G*z*ke(U),_*M+G*Re(U))),s+=L?R+z*mi:R,L^v>=n^C>=n){var j=Jf(Bl(y),Bl(A));Py(j);var q=Jf(a,j);Py(q);var F=(L^R>=0?-1:1)*zi(q[2]);(i>F||i===F&&(j[0]||j[1]))&&(o+=L^R>=0?1:-1)}}return(s<-Oe||s<Oe&&l<-Ny)^o&1}function PP(e,t,n,i){return function(r){var a=t(r),s=UP(),o=t(s),l=!1,f,d,h,p={point:y,lineStart:b,lineEnd:S,polygonStart:function(){p.point=_,p.lineStart=w,p.lineEnd=A,d=[],f=[]},polygonEnd:function(){p.point=y,p.lineStart=b,p.lineEnd=S,d=R7(d);var C=Koe(f,i);d.length?(l||(r.polygonStart(),l=!0),qP(d,eue,C,n,r)):C&&(l||(r.polygonStart(),l=!0),r.lineStart(),n(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),d=f=null},sphere:function(){r.polygonStart(),r.lineStart(),n(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function y(C,T){e(C,T)&&r.point(C,T)}function v(C,T){a.point(C,T)}function b(){p.point=v,a.lineStart()}function S(){p.point=y,a.lineEnd()}function _(C,T){h.push([C,T]),o.point(C,T)}function w(){o.lineStart(),h=[]}function A(){_(h[0][0],h[0][1]),o.lineEnd();var C=o.clean(),T=s.result(),k,M=T.length,R,z,U;if(h.pop(),f.push(h),h=null,!!M){if(C&1){if(z=T[0],(R=z.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),k=0;k<R;++k)r.point((U=z[k])[0],U[1]);r.lineEnd()}return}M>1&&C&2&&T.push(T.pop().concat(T.shift())),d.push(T.filter(Joe))}}return p}}function Joe(e){return e.length>1}function eue(e,t){return((e=e.x)[0]<0?e[1]-Pt-Oe:Pt-e[1])-((t=t.x)[0]<0?t[1]-Pt-Oe:Pt-t[1])}const Rz=PP(function(){return!0},tue,iue,[-Ye,-Pt]);function tue(e){var t=NaN,n=NaN,i=NaN,r;return{lineStart:function(){e.lineStart(),r=1},point:function(a,s){var o=a>0?Ye:-Ye,l=Ze(a-t);Ze(l-Ye)<Oe?(e.point(t,n=(n+s)/2>0?Pt:-Pt),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),e.point(a,n),r=0):i!==o&&l>=Ye&&(Ze(t-i)<Oe&&(t-=i*Oe),Ze(a-o)<Oe&&(a-=o*Oe),n=nue(t,n,a,s),e.point(i,n),e.lineEnd(),e.lineStart(),e.point(o,n),r=0),e.point(t=a,n=s),i=o},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-r}}}function nue(e,t,n,i){var r,a,s=ke(e-n);return Ze(s)>Oe?Rd((ke(t)*(a=Re(i))*ke(n)-ke(i)*(r=Re(t))*ke(e))/(r*a*s)):(t+i)/2}function iue(e,t,n,i){var r;if(e==null)r=n*Pt,i.point(-Ye,r),i.point(0,r),i.point(Ye,r),i.point(Ye,0),i.point(Ye,-r),i.point(0,-r),i.point(-Ye,-r),i.point(-Ye,0),i.point(-Ye,r);else if(Ze(e[0]-t[0])>Oe){var a=e[0]<t[0]?Ye:-Ye;r=n*a/2,i.point(-a,r),i.point(0,r),i.point(a,r)}else i.point(t[0],t[1])}function rue(e){var t=Re(e),n=2*He,i=t>0,r=Ze(t)>Oe;function a(d,h,p,y){Zoe(y,e,n,p,d,h)}function s(d,h){return Re(d)*Re(h)>t}function o(d){var h,p,y,v,b;return{lineStart:function(){v=y=!1,b=1},point:function(S,_){var w=[S,_],A,C=s(S,_),T=i?C?0:f(S,_):C?f(S+(S<0?Ye:-Ye),_):0;if(!h&&(v=y=C)&&d.lineStart(),C!==y&&(A=l(h,w),(!A||U1(h,A)||U1(w,A))&&(w[2]=1)),C!==y)b=0,C?(d.lineStart(),A=l(w,h),d.point(A[0],A[1])):(A=l(h,w),d.point(A[0],A[1],2),d.lineEnd()),h=A;else if(r&&h&&i^C){var k;!(T&p)&&(k=l(w,h,!0))&&(b=0,i?(d.lineStart(),d.point(k[0][0],k[0][1]),d.point(k[1][0],k[1][1]),d.lineEnd()):(d.point(k[1][0],k[1][1]),d.lineEnd(),d.lineStart(),d.point(k[0][0],k[0][1],3)))}C&&(!h||!U1(h,w))&&d.point(w[0],w[1]),h=w,y=C,p=T},lineEnd:function(){y&&d.lineEnd(),h=null},clean:function(){return b|(v&&y)<<1}}}function l(d,h,p){var y=Bl(d),v=Bl(h),b=[1,0,0],S=Jf(y,v),_=t1(S,S),w=S[0],A=_-w*w;if(!A)return!p&&d;var C=t*_/A,T=-t*w/A,k=Jf(b,S),M=n1(b,C),R=n1(S,T);R_(M,R);var z=k,U=t1(M,z),L=t1(z,z),G=U*U-L*(t1(M,M)-1);if(!(G<0)){var j=yi(G),q=n1(z,(-U-j)/L);if(R_(q,M),q=qy(q),!p)return q;var F=d[0],D=h[0],P=d[1],X=h[1],Z;D<F&&(Z=F,F=D,D=Z);var N=D-F,W=Ze(N-Ye)<Oe,ne=W||N<Oe;if(!W&&X<P&&(Z=P,P=X,X=Z),ne?W?P+X>0^q[1]<(Ze(q[0]-F)<Oe?P:X):P<=q[1]&&q[1]<=X:N>Ye^(F<=q[0]&&q[0]<=D)){var ae=n1(z,(-U+j)/L);return R_(ae,M),[q,qy(ae)]}}}function f(d,h){var p=i?e:Ye-e,y=0;return d<-p?y|=1:d>p&&(y|=2),h<-p?y|=4:h>p&&(y|=8),y}return PP(s,o,a,i?[0,-e]:[-Ye,e-Ye])}function aue(e,t,n,i,r,a){var s=e[0],o=e[1],l=t[0],f=t[1],d=0,h=1,p=l-s,y=f-o,v;if(v=n-s,!(!p&&v>0)){if(v/=p,p<0){if(v<d)return;v<h&&(h=v)}else if(p>0){if(v>h)return;v>d&&(d=v)}if(v=r-s,!(!p&&v<0)){if(v/=p,p<0){if(v>h)return;v>d&&(d=v)}else if(p>0){if(v<d)return;v<h&&(h=v)}if(v=i-o,!(!y&&v>0)){if(v/=y,y<0){if(v<d)return;v<h&&(h=v)}else if(y>0){if(v>h)return;v>d&&(d=v)}if(v=a-o,!(!y&&v<0)){if(v/=y,y<0){if(v>h)return;v>d&&(d=v)}else if(y>0){if(v<d)return;v<h&&(h=v)}return d>0&&(e[0]=s+d*p,e[1]=o+d*y),h<1&&(t[0]=s+h*p,t[1]=o+h*y),!0}}}}}var wg=1e9,r1=-wg;function IP(e,t,n,i){function r(f,d){return e<=f&&f<=n&&t<=d&&d<=i}function a(f,d,h,p){var y=0,v=0;if(f==null||(y=s(f,h))!==(v=s(d,h))||l(f,d)<0^h>0)do p.point(y===0||y===3?e:n,y>1?i:t);while((y=(y+h+4)%4)!==v);else p.point(d[0],d[1])}function s(f,d){return Ze(f[0]-e)<Oe?d>0?0:3:Ze(f[0]-n)<Oe?d>0?2:1:Ze(f[1]-t)<Oe?d>0?1:0:d>0?3:2}function o(f,d){return l(f.x,d.x)}function l(f,d){var h=s(f,1),p=s(d,1);return h!==p?h-p:h===0?d[1]-f[1]:h===1?f[0]-d[0]:h===2?f[1]-d[1]:d[0]-f[0]}return function(f){var d=f,h=UP(),p,y,v,b,S,_,w,A,C,T,k,M={point:R,lineStart:G,lineEnd:j,polygonStart:U,polygonEnd:L};function R(F,D){r(F,D)&&d.point(F,D)}function z(){for(var F=0,D=0,P=y.length;D<P;++D)for(var X=y[D],Z=1,N=X.length,W=X[0],ne,ae,me=W[0],be=W[1];Z<N;++Z)ne=me,ae=be,W=X[Z],me=W[0],be=W[1],ae<=i?be>i&&(me-ne)*(i-ae)>(be-ae)*(e-ne)&&++F:be<=i&&(me-ne)*(i-ae)<(be-ae)*(e-ne)&&--F;return F}function U(){d=h,p=[],y=[],k=!0}function L(){var F=z(),D=k&&F,P=(p=R7(p)).length;(D||P)&&(f.polygonStart(),D&&(f.lineStart(),a(null,null,1,f),f.lineEnd()),P&&qP(p,o,F,a,f),f.polygonEnd()),d=f,p=y=v=null}function G(){M.point=q,y&&y.push(v=[]),T=!0,C=!1,w=A=NaN}function j(){p&&(q(b,S),_&&C&&h.rejoin(),p.push(h.result())),M.point=R,C&&d.lineEnd()}function q(F,D){var P=r(F,D);if(y&&v.push([F,D]),T)b=F,S=D,_=P,T=!1,P&&(d.lineStart(),d.point(F,D));else if(P&&C)d.point(F,D);else{var X=[w=Math.max(r1,Math.min(wg,w)),A=Math.max(r1,Math.min(wg,A))],Z=[F=Math.max(r1,Math.min(wg,F)),D=Math.max(r1,Math.min(wg,D))];aue(X,Z,e,t,n,i)?(C||(d.lineStart(),d.point(X[0],X[1])),d.point(Z[0],Z[1]),P||d.lineEnd(),k=!1):P&&(d.lineStart(),d.point(F,D),k=!1)}w=F,A=D,C=P}return M}}function Dz(e,t,n){var i=tr(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[r,a]})}}function Nz(e,t,n){var i=tr(e,t-Oe,n).concat(t);return function(r){return i.map(function(a){return[a,r]})}}function sue(){var e,t,n,i,r,a,s,o,l=10,f=l,d=90,h=360,p,y,v,b,S=2.5;function _(){return{type:"MultiLineString",coordinates:w()}}function w(){return tr(e1(i/d)*d,n,d).map(v).concat(tr(e1(o/h)*h,s,h).map(b)).concat(tr(e1(t/l)*l,e,l).filter(function(A){return Ze(A%d)>Oe}).map(p)).concat(tr(e1(a/f)*f,r,f).filter(function(A){return Ze(A%h)>Oe}).map(y))}return _.lines=function(){return w().map(function(A){return{type:"LineString",coordinates:A}})},_.outline=function(){return{type:"Polygon",coordinates:[v(i).concat(b(s).slice(1),v(n).reverse().slice(1),b(o).reverse().slice(1))]}},_.extent=function(A){return arguments.length?_.extentMajor(A).extentMinor(A):_.extentMinor()},_.extentMajor=function(A){return arguments.length?(i=+A[0][0],n=+A[1][0],o=+A[0][1],s=+A[1][1],i>n&&(A=i,i=n,n=A),o>s&&(A=o,o=s,s=A),_.precision(S)):[[i,o],[n,s]]},_.extentMinor=function(A){return arguments.length?(t=+A[0][0],e=+A[1][0],a=+A[0][1],r=+A[1][1],t>e&&(A=t,t=e,e=A),a>r&&(A=a,a=r,r=A),_.precision(S)):[[t,a],[e,r]]},_.step=function(A){return arguments.length?_.stepMajor(A).stepMinor(A):_.stepMinor()},_.stepMajor=function(A){return arguments.length?(d=+A[0],h=+A[1],_):[d,h]},_.stepMinor=function(A){return arguments.length?(l=+A[0],f=+A[1],_):[l,f]},_.precision=function(A){return arguments.length?(S=+A,p=Dz(a,r,90),y=Nz(t,e,S),v=Dz(o,s,90),b=Nz(i,n,S),_):S},_.extentMajor([[-180,-90+Oe],[180,90-Oe]]).extentMinor([[-180,-80-Oe],[180,80+Oe]])}const cp=e=>e;var N_=new gi,BA=new gi,jP,HP,UA,qA,Ns={point:zn,lineStart:zn,lineEnd:zn,polygonStart:function(){Ns.lineStart=oue,Ns.lineEnd=lue},polygonEnd:function(){Ns.lineStart=Ns.lineEnd=Ns.point=zn,N_.add(Ze(BA)),BA=new gi},result:function(){var e=N_/2;return N_=new gi,e}};function oue(){Ns.point=uue}function uue(e,t){Ns.point=GP,jP=UA=e,HP=qA=t}function GP(e,t){BA.add(qA*e-UA*t),UA=e,qA=t}function lue(){GP(jP,HP)}var ed=1/0,Wy=ed,fp=-ed,Qy=fp,Zy={point:cue,lineStart:zn,lineEnd:zn,polygonStart:zn,polygonEnd:zn,result:function(){var e=[[ed,Wy],[fp,Qy]];return fp=Qy=-(Wy=ed=1/0),e}};function cue(e,t){e<ed&&(ed=e),e>fp&&(fp=e),t<Wy&&(Wy=t),t>Qy&&(Qy=t)}var PA=0,IA=0,Ag=0,Ky=0,Jy=0,Af=0,jA=0,HA=0,Cg=0,YP,XP,Da,Na,_r={point:Ul,lineStart:zz,lineEnd:Fz,polygonStart:function(){_r.lineStart=hue,_r.lineEnd=gue},polygonEnd:function(){_r.point=Ul,_r.lineStart=zz,_r.lineEnd=Fz},result:function(){var e=Cg?[jA/Cg,HA/Cg]:Af?[Ky/Af,Jy/Af]:Ag?[PA/Ag,IA/Ag]:[NaN,NaN];return PA=IA=Ag=Ky=Jy=Af=jA=HA=Cg=0,e}};function Ul(e,t){PA+=e,IA+=t,++Ag}function zz(){_r.point=fue}function fue(e,t){_r.point=due,Ul(Da=e,Na=t)}function due(e,t){var n=e-Da,i=t-Na,r=yi(n*n+i*i);Ky+=r*(Da+e)/2,Jy+=r*(Na+t)/2,Af+=r,Ul(Da=e,Na=t)}function Fz(){_r.point=Ul}function hue(){_r.point=pue}function gue(){VP(YP,XP)}function pue(e,t){_r.point=VP,Ul(YP=Da=e,XP=Na=t)}function VP(e,t){var n=e-Da,i=t-Na,r=yi(n*n+i*i);Ky+=r*(Da+e)/2,Jy+=r*(Na+t)/2,Af+=r,r=Na*e-Da*t,jA+=r*(Da+e),HA+=r*(Na+t),Cg+=r*3,Ul(Da=e,Na=t)}function WP(e){this._context=e}WP.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,mi);break}}},result:zn};var GA=new gi,z_,QP,ZP,$g,Tg,dp={point:zn,lineStart:function(){dp.point=mue},lineEnd:function(){z_&&KP(QP,ZP),dp.point=zn},polygonStart:function(){z_=!0},polygonEnd:function(){z_=null},result:function(){var e=+GA;return GA=new gi,e}};function mue(e,t){dp.point=KP,QP=$g=e,ZP=Tg=t}function KP(e,t){$g-=e,Tg-=t,GA.add(yi($g*$g+Tg*Tg)),$g=e,Tg=t}let Lz,ev,Bz,Uz;class qz{constructor(t){this._append=t==null?JP:yue(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Bz||this._append!==ev){const i=this._radius,r=this._;this._="",this._append`m0,${i}a${i},${i} 0 1,1 0,${-2*i}a${i},${i} 0 1,1 0,${2*i}z`,Bz=i,ev=this._append,Uz=this._,this._=r}this._+=Uz;break}}}result(){const t=this._;return this._="",t.length?t:null}}function JP(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function yue(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return JP;if(t!==Lz){const n=10**t;Lz=t,ev=function(r){let a=1;this._+=r[0];for(const s=r.length;a<s;++a)this._+=Math.round(arguments[a]*n)/n+r[a]}}return ev}function eI(e,t){let n=3,i=4.5,r,a;function s(o){return o&&(typeof i=="function"&&a.pointRadius(+i.apply(this,arguments)),Ds(o,r(a))),a.result()}return s.area=function(o){return Ds(o,r(Ns)),Ns.result()},s.measure=function(o){return Ds(o,r(dp)),dp.result()},s.bounds=function(o){return Ds(o,r(Zy)),Zy.result()},s.centroid=function(o){return Ds(o,r(_r)),_r.result()},s.projection=function(o){return arguments.length?(r=o==null?(e=null,cp):(e=o).stream,s):e},s.context=function(o){return arguments.length?(a=o==null?(t=null,new qz(n)):new WP(t=o),typeof i!="function"&&a.pointRadius(i),s):t},s.pointRadius=function(o){return arguments.length?(i=typeof o=="function"?o:(a.pointRadius(+o),+o),s):i},s.digits=function(o){if(!arguments.length)return n;if(o==null)n=null;else{const l=Math.floor(o);if(!(l>=0))throw new RangeError(`invalid digits: ${o}`);n=l}return t===null&&(a=new qz(n)),s},s.projection(e).digits(n).context(t)}function Nb(e){return function(t){var n=new YA;for(var i in e)n[i]=e[i];return n.stream=t,n}}function YA(){}YA.prototype={constructor:YA,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function q3(e,t,n){var i=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),i!=null&&e.clipExtent(null),Ds(n,e.stream(Zy)),t(Zy.result()),i!=null&&e.clipExtent(i),e}function zb(e,t,n){return q3(e,function(i){var r=t[1][0]-t[0][0],a=t[1][1]-t[0][1],s=Math.min(r/(i[1][0]-i[0][0]),a/(i[1][1]-i[0][1])),o=+t[0][0]+(r-s*(i[1][0]+i[0][0]))/2,l=+t[0][1]+(a-s*(i[1][1]+i[0][1]))/2;e.scale(150*s).translate([o,l])},n)}function P3(e,t,n){return zb(e,[[0,0],t],n)}function I3(e,t,n){return q3(e,function(i){var r=+t,a=r/(i[1][0]-i[0][0]),s=(r-a*(i[1][0]+i[0][0]))/2,o=-a*i[0][1];e.scale(150*a).translate([s,o])},n)}function j3(e,t,n){return q3(e,function(i){var r=+t,a=r/(i[1][1]-i[0][1]),s=-a*i[0][0],o=(r-a*(i[1][1]+i[0][1]))/2;e.scale(150*a).translate([s,o])},n)}var Pz=16,vue=Re(30*He);function Iz(e,t){return+t?xue(e,t):bue(e)}function bue(e){return Nb({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function xue(e,t){function n(i,r,a,s,o,l,f,d,h,p,y,v,b,S){var _=f-i,w=d-r,A=_*_+w*w;if(A>4*t&&b--){var C=s+p,T=o+y,k=l+v,M=yi(C*C+T*T+k*k),R=zi(k/=M),z=Ze(Ze(k)-1)<Oe||Ze(a-h)<Oe?(a+h)/2:Nr(T,C),U=e(z,R),L=U[0],G=U[1],j=L-i,q=G-r,F=w*j-_*q;(F*F/A>t||Ze((_*j+w*q)/A-.5)>.3||s*p+o*y+l*v<vue)&&(n(i,r,a,s,o,l,L,G,z,C/=M,T/=M,k,b,S),S.point(L,G),n(L,G,z,C,T,k,f,d,h,p,y,v,b,S))}}return function(i){var r,a,s,o,l,f,d,h,p,y,v,b,S={point:_,lineStart:w,lineEnd:C,polygonStart:function(){i.polygonStart(),S.lineStart=T},polygonEnd:function(){i.polygonEnd(),S.lineStart=w}};function _(R,z){R=e(R,z),i.point(R[0],R[1])}function w(){h=NaN,S.point=A,i.lineStart()}function A(R,z){var U=Bl([R,z]),L=e(R,z);n(h,p,d,y,v,b,h=L[0],p=L[1],d=R,y=U[0],v=U[1],b=U[2],Pz,i),i.point(h,p)}function C(){S.point=_,i.lineEnd()}function T(){w(),S.point=k,S.lineEnd=M}function k(R,z){A(r=R,z),a=h,s=p,o=y,l=v,f=b,S.point=A}function M(){n(h,p,d,y,v,b,a,s,r,o,l,f,Pz,i),S.lineEnd=C,C()}return S}}var Sue=Nb({point:function(e,t){this.stream.point(e*He,t*He)}});function Eue(e){return Nb({point:function(t,n){var i=e(t,n);return this.stream.point(i[0],i[1])}})}function _ue(e,t,n,i,r){function a(s,o){return s*=i,o*=r,[t+e*s,n-e*o]}return a.invert=function(s,o){return[(s-t)/e*i,(n-o)/e*r]},a}function jz(e,t,n,i,r,a){if(!a)return _ue(e,t,n,i,r);var s=Re(a),o=ke(a),l=s*e,f=o*e,d=s/e,h=o/e,p=(o*n-s*t)/e,y=(o*t+s*n)/e;function v(b,S){return b*=i,S*=r,[l*b-f*S+t,n-f*b-l*S]}return v.invert=function(b,S){return[i*(d*b-h*S+p),r*(y-h*b-d*S)]},v}function ns(e){return tI(function(){return e})()}function tI(e){var t,n=150,i=480,r=250,a=0,s=0,o=0,l=0,f=0,d,h=0,p=1,y=1,v=null,b=Rz,S=null,_,w,A,C=cp,T=.5,k,M,R,z,U;function L(F){return R(F[0]*He,F[1]*He)}function G(F){return F=R.invert(F[0],F[1]),F&&[F[0]*Xt,F[1]*Xt]}L.stream=function(F){return z&&U===F?z:z=Sue(Eue(d)(b(k(C(U=F)))))},L.preclip=function(F){return arguments.length?(b=F,v=void 0,q()):b},L.postclip=function(F){return arguments.length?(C=F,S=_=w=A=null,q()):C},L.clipAngle=function(F){return arguments.length?(b=+F?rue(v=F*He):(v=null,Rz),q()):v*Xt},L.clipExtent=function(F){return arguments.length?(C=F==null?(S=_=w=A=null,cp):IP(S=+F[0][0],_=+F[0][1],w=+F[1][0],A=+F[1][1]),q()):S==null?null:[[S,_],[w,A]]},L.scale=function(F){return arguments.length?(n=+F,j()):n},L.translate=function(F){return arguments.length?(i=+F[0],r=+F[1],j()):[i,r]},L.center=function(F){return arguments.length?(a=F[0]%360*He,s=F[1]%360*He,j()):[a*Xt,s*Xt]},L.rotate=function(F){return arguments.length?(o=F[0]%360*He,l=F[1]%360*He,f=F.length>2?F[2]%360*He:0,j()):[o*Xt,l*Xt,f*Xt]},L.angle=function(F){return arguments.length?(h=F%360*He,j()):h*Xt},L.reflectX=function(F){return arguments.length?(p=F?-1:1,j()):p<0},L.reflectY=function(F){return arguments.length?(y=F?-1:1,j()):y<0},L.precision=function(F){return arguments.length?(k=Iz(M,T=F*F),q()):yi(T)},L.fitExtent=function(F,D){return zb(L,F,D)},L.fitSize=function(F,D){return P3(L,F,D)},L.fitWidth=function(F,D){return I3(L,F,D)},L.fitHeight=function(F,D){return j3(L,F,D)};function j(){var F=jz(n,0,0,p,y,h).apply(null,t(a,s)),D=jz(n,i-F[0],r-F[1],p,y,h);return d=BP(o,l,f),M=FA(t,D),R=FA(d,M),k=Iz(M,T),q()}function q(){return z=U=null,L}return function(){return t=e.apply(this,arguments),L.invert=t.invert&&G,j()}}function H3(e){var t=0,n=Ye/3,i=tI(e),r=i(t,n);return r.parallels=function(a){return arguments.length?i(t=a[0]*He,n=a[1]*He):[t*Xt,n*Xt]},r}function wue(e){var t=Re(e);function n(i,r){return[i*t,ke(r)/t]}return n.invert=function(i,r){return[i/t,zi(r*t)]},n}function Aue(e,t){var n=ke(e),i=(n+ke(t))/2;if(Ze(i)<Oe)return wue(e);var r=1+n*(2*i-n),a=yi(r)/i;function s(o,l){var f=yi(r-2*i*ke(l))/i;return[f*ke(o*=i),a-f*Re(o)]}return s.invert=function(o,l){var f=a-l,d=Nr(o,Ze(f))*Ar(f);return f*i<0&&(d-=Ye*Ar(o)*Ar(f)),[d/i,zi((r-(o*o+f*f)*i*i)/(2*i))]},s}function tv(){return H3(Aue).scale(155.424).center([0,33.6442])}function nI(){return tv().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Cue(e){var t=e.length;return{point:function(n,i){for(var r=-1;++r<t;)e[r].point(n,i)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function $ue(){var e,t,n=nI(),i,r=tv().rotate([154,0]).center([-2,58.5]).parallels([55,65]),a,s=tv().rotate([157,0]).center([-3,19.9]).parallels([8,18]),o,l,f={point:function(p,y){l=[p,y]}};function d(p){var y=p[0],v=p[1];return l=null,i.point(y,v),l||(a.point(y,v),l)||(o.point(y,v),l)}d.invert=function(p){var y=n.scale(),v=n.translate(),b=(p[0]-v[0])/y,S=(p[1]-v[1])/y;return(S>=.12&&S<.234&&b>=-.425&&b<-.214?r:S>=.166&&S<.234&&b>=-.214&&b<-.115?s:n).invert(p)},d.stream=function(p){return e&&t===p?e:e=Cue([n.stream(t=p),r.stream(p),s.stream(p)])},d.precision=function(p){return arguments.length?(n.precision(p),r.precision(p),s.precision(p),h()):n.precision()},d.scale=function(p){return arguments.length?(n.scale(p),r.scale(p*.35),s.scale(p),d.translate(n.translate())):n.scale()},d.translate=function(p){if(!arguments.length)return n.translate();var y=n.scale(),v=+p[0],b=+p[1];return i=n.translate(p).clipExtent([[v-.455*y,b-.238*y],[v+.455*y,b+.238*y]]).stream(f),a=r.translate([v-.307*y,b+.201*y]).clipExtent([[v-.425*y+Oe,b+.12*y+Oe],[v-.214*y-Oe,b+.234*y-Oe]]).stream(f),o=s.translate([v-.205*y,b+.212*y]).clipExtent([[v-.214*y+Oe,b+.166*y+Oe],[v-.115*y-Oe,b+.234*y-Oe]]).stream(f),h()},d.fitExtent=function(p,y){return zb(d,p,y)},d.fitSize=function(p,y){return P3(d,p,y)},d.fitWidth=function(p,y){return I3(d,p,y)},d.fitHeight=function(p,y){return j3(d,p,y)};function h(){return e=t=null,d}return d.scale(1070)}function iI(e){return function(t,n){var i=Re(t),r=Re(n),a=e(i*r);return a===1/0?[2,0]:[a*r*ke(t),a*ke(n)]}}function e0(e){return function(t,n){var i=yi(t*t+n*n),r=e(i),a=ke(r),s=Re(r);return[Nr(t*a,i*s),zi(i&&n*a/i)]}}var rI=iI(function(e){return yi(2/(1+e))});rI.invert=e0(function(e){return 2*zi(e/2)});function Tue(){return ns(rI).scale(124.75).clipAngle(180-.001)}var aI=iI(function(e){return(e=$P(e))&&e/ke(e)});aI.invert=e0(function(e){return e});function Mue(){return ns(aI).scale(79.4188).clipAngle(180-.001)}function Fb(e,t){return[e,Fy(B3((Pt+t)/2))]}Fb.invert=function(e,t){return[e,2*Rd(CP(t))-Pt]};function kue(){return sI(Fb).scale(961/mi)}function sI(e){var t=ns(e),n=t.center,i=t.scale,r=t.translate,a=t.clipExtent,s=null,o,l,f;t.scale=function(h){return arguments.length?(i(h),d()):i()},t.translate=function(h){return arguments.length?(r(h),d()):r()},t.center=function(h){return arguments.length?(n(h),d()):n()},t.clipExtent=function(h){return arguments.length?(h==null?s=o=l=f=null:(s=+h[0][0],o=+h[0][1],l=+h[1][0],f=+h[1][1]),d()):s==null?null:[[s,o],[l,f]]};function d(){var h=Ye*i(),p=t(Qoe(t.rotate()).invert([0,0]));return a(s==null?[[p[0]-h,p[1]-h],[p[0]+h,p[1]+h]]:e===Fb?[[Math.max(p[0]-h,s),o],[Math.min(p[0]+h,l),f]]:[[s,Math.max(p[1]-h,o)],[l,Math.min(p[1]+h,f)]])}return d()}function a1(e){return B3((Pt+e)/2)}function Oue(e,t){var n=Re(e),i=e===t?ke(e):Fy(n/Re(t))/Fy(a1(t)/a1(e)),r=n*O_(a1(e),i)/i;if(!i)return Fb;function a(s,o){r>0?o<-Pt+Oe&&(o=-Pt+Oe):o>Pt-Oe&&(o=Pt-Oe);var l=r/O_(a1(o),i);return[l*ke(i*s),r-l*Re(i*s)]}return a.invert=function(s,o){var l=r-o,f=Ar(i)*yi(s*s+l*l),d=Nr(s,Ze(l))*Ar(l);return l*i<0&&(d-=Ye*Ar(s)*Ar(l)),[d/i,2*Rd(O_(r/f,1/i))-Pt]},a}function Rue(){return H3(Oue).scale(109.5).parallels([30,30])}function nv(e,t){return[e,t]}nv.invert=nv;function Due(){return ns(nv).scale(152.63)}function Nue(e,t){var n=Re(e),i=e===t?ke(e):(n-Re(t))/(t-e),r=n/i+e;if(Ze(i)<Oe)return nv;function a(s,o){var l=r-o,f=i*s;return[l*ke(f),r-l*Re(f)]}return a.invert=function(s,o){var l=r-o,f=Nr(s,Ze(l))*Ar(l);return l*i<0&&(f-=Ye*Ar(s)*Ar(l)),[f/i,r-Ar(i)*yi(s*s+l*l)]},a}function zue(){return H3(Nue).scale(131.154).center([0,13.9389])}var Ig=1.340264,jg=-.081106,Hg=893e-6,Gg=.003796,iv=yi(3)/2,Fue=12;function oI(e,t){var n=zi(iv*ke(t)),i=n*n,r=i*i*i;return[e*Re(n)/(iv*(Ig+3*jg*i+r*(7*Hg+9*Gg*i))),n*(Ig+jg*i+r*(Hg+Gg*i))]}oI.invert=function(e,t){for(var n=t,i=n*n,r=i*i*i,a=0,s,o,l;a<Fue&&(o=n*(Ig+jg*i+r*(Hg+Gg*i))-t,l=Ig+3*jg*i+r*(7*Hg+9*Gg*i),n-=s=o/l,i=n*n,r=i*i*i,!(Ze(s)<Ny));++a);return[iv*e*(Ig+3*jg*i+r*(7*Hg+9*Gg*i))/Re(n),zi(ke(n)/iv)]};function Lue(){return ns(oI).scale(177.158)}function uI(e,t){var n=Re(t),i=Re(e)*n;return[n*ke(e)/i,ke(t)/i]}uI.invert=e0(Rd);function Bue(){return ns(uI).scale(144.049).clipAngle(60)}function Uue(){var e=1,t=0,n=0,i=1,r=1,a=0,s,o,l=null,f,d,h,p=1,y=1,v=Nb({point:function(C,T){var k=A([C,T]);this.stream.point(k[0],k[1])}}),b=cp,S,_;function w(){return p=e*i,y=e*r,S=_=null,A}function A(C){var T=C[0]*p,k=C[1]*y;if(a){var M=k*s-T*o;T=T*s+k*o,k=M}return[T+t,k+n]}return A.invert=function(C){var T=C[0]-t,k=C[1]-n;if(a){var M=k*s+T*o;T=T*s-k*o,k=M}return[T/p,k/y]},A.stream=function(C){return S&&_===C?S:S=v(b(_=C))},A.postclip=function(C){return arguments.length?(b=C,l=f=d=h=null,w()):b},A.clipExtent=function(C){return arguments.length?(b=C==null?(l=f=d=h=null,cp):IP(l=+C[0][0],f=+C[0][1],d=+C[1][0],h=+C[1][1]),w()):l==null?null:[[l,f],[d,h]]},A.scale=function(C){return arguments.length?(e=+C,w()):e},A.translate=function(C){return arguments.length?(t=+C[0],n=+C[1],w()):[t,n]},A.angle=function(C){return arguments.length?(a=C%360*He,o=ke(a),s=Re(a),w()):a*Xt},A.reflectX=function(C){return arguments.length?(i=C?-1:1,w()):i<0},A.reflectY=function(C){return arguments.length?(r=C?-1:1,w()):r<0},A.fitExtent=function(C,T){return zb(A,C,T)},A.fitSize=function(C,T){return P3(A,C,T)},A.fitWidth=function(C,T){return I3(A,C,T)},A.fitHeight=function(C,T){return j3(A,C,T)},A}function lI(e,t){var n=t*t,i=n*n;return[e*(.8707-.131979*n+i*(-.013791+i*(.003971*n-.001529*i))),t*(1.007226+n*(.015085+i*(-.044475+.028874*n-.005916*i)))]}lI.invert=function(e,t){var n=t,i=25,r;do{var a=n*n,s=a*a;n-=r=(n*(1.007226+a*(.015085+s*(-.044475+.028874*a-.005916*s)))-t)/(1.007226+a*(.015085*3+s*(-.044475*7+.028874*9*a-.005916*11*s)))}while(Ze(r)>Oe&&--i>0);return[e/(.8707+(a=n*n)*(-.131979+a*(-.013791+a*a*a*(.003971-.001529*a)))),n]};function que(){return ns(lI).scale(175.295)}function cI(e,t){return[Re(t)*ke(e),ke(t)]}cI.invert=e0(zi);function Pue(){return ns(cI).scale(249.5).clipAngle(90+Oe)}function fI(e,t){var n=Re(t),i=1+Re(e)*n;return[n*ke(e)/i,ke(t)/i]}fI.invert=e0(function(e){return 2*Rd(e)});function Iue(){return ns(fI).scale(250).clipAngle(142)}function dI(e,t){return[Fy(B3((Pt+t)/2)),-e]}dI.invert=function(e,t){return[-t,2*Rd(CP(e))-Pt]};function jue(){var e=sI(dI),t=e.center,n=e.rotate;return e.center=function(i){return arguments.length?t([-i[1],i[0]]):(i=t(),[i[1],-i[0]])},e.rotate=function(i){return arguments.length?n([i[0],i[1],i.length>2?i[2]+90:90]):(i=n(),[i[0],i[1],i[2]-90])},n([0,0,90]).scale(159.155)}var Hue=Math.abs,XA=Math.cos,rv=Math.sin,Gue=1e-6,hI=Math.PI,VA=hI/2,Hz=Yue(2);function Gz(e){return e>1?VA:e<-1?-VA:Math.asin(e)}function Yue(e){return e>0?Math.sqrt(e):0}function Xue(e,t){var n=e*rv(t),i=30,r;do t-=r=(t+rv(t)-n)/(1+XA(t));while(Hue(r)>Gue&&--i>0);return t/2}function Vue(e,t,n){function i(r,a){return[e*r*XA(a=Xue(n,a)),t*rv(a)]}return i.invert=function(r,a){return a=Gz(a/t),[r/(e*XA(a)),Gz((2*a+rv(2*a))/n)]},i}var Wue=Vue(Hz/VA,Hz,hI);function Que(){return ns(Wue).scale(169.529)}const Zue=eI(),WA=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function Kue(e,t){return function n(){const i=t();return i.type=e,i.path=eI().projection(i),i.copy=i.copy||function(){const r=n();return WA.forEach(a=>{i[a]&&r[a](i[a]())}),r.path.pointRadius(i.path.pointRadius()),r},MU(i)}}function G3(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(av[e]=Kue(e,t),this):av[e]||null}function gI(e){return e&&e.path||Zue}const av={albers:nI,albersusa:$ue,azimuthalequalarea:Tue,azimuthalequidistant:Mue,conicconformal:Rue,conicequalarea:tv,conicequidistant:zue,equalEarth:Lue,equirectangular:Due,gnomonic:Bue,identity:Uue,mercator:kue,mollweide:Que,naturalEarth1:que,orthographic:Pue,stereographic:Iue,transversemercator:jue};for(const e in av)G3(e,av[e]);function Jue(){}const $s=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function pI(){var e=1,t=1,n=o;function i(l,f){return f.map(d=>r(l,d))}function r(l,f){var d=[],h=[];return a(l,f,p=>{n(p,l,f),ele(p)>0?d.push([p]):h.push(p)}),h.forEach(p=>{for(var y=0,v=d.length,b;y<v;++y)if(tle((b=d[y])[0],p)!==-1){b.push(p);return}}),{type:"MultiPolygon",value:f,coordinates:d}}function a(l,f,d){var h=[],p=[],y,v,b,S,_,w;for(y=v=-1,S=l[0]>=f,$s[S<<1].forEach(A);++y<e-1;)b=S,S=l[y+1]>=f,$s[b|S<<1].forEach(A);for($s[S<<0].forEach(A);++v<t-1;){for(y=-1,S=l[v*e+e]>=f,_=l[v*e]>=f,$s[S<<1|_<<2].forEach(A);++y<e-1;)b=S,S=l[v*e+e+y+1]>=f,w=_,_=l[v*e+y+1]>=f,$s[b|S<<1|_<<2|w<<3].forEach(A);$s[S|_<<3].forEach(A)}for(y=-1,_=l[v*e]>=f,$s[_<<2].forEach(A);++y<e-1;)w=_,_=l[v*e+y+1]>=f,$s[_<<2|w<<3].forEach(A);$s[_<<3].forEach(A);function A(C){var T=[C[0][0]+y,C[0][1]+v],k=[C[1][0]+y,C[1][1]+v],M=s(T),R=s(k),z,U;(z=p[M])?(U=h[R])?(delete p[z.end],delete h[U.start],z===U?(z.ring.push(k),d(z.ring)):h[z.start]=p[U.end]={start:z.start,end:U.end,ring:z.ring.concat(U.ring)}):(delete p[z.end],z.ring.push(k),p[z.end=R]=z):(z=h[R])?(U=p[M])?(delete h[z.start],delete p[U.end],z===U?(z.ring.push(k),d(z.ring)):h[U.start]=p[z.end]={start:U.start,end:z.end,ring:U.ring.concat(z.ring)}):(delete h[z.start],z.ring.unshift(T),h[z.start=M]=z):h[M]=p[R]={start:M,end:R,ring:[T,k]}}}function s(l){return l[0]*2+l[1]*(e+1)*4}function o(l,f,d){l.forEach(h=>{var p=h[0],y=h[1],v=p|0,b=y|0,S,_=f[b*e+v];p>0&&p<e&&v===p&&(S=f[b*e+v-1],h[0]=p+(d-S)/(_-S)-.5),y>0&&y<t&&b===y&&(S=f[(b-1)*e+v],h[1]=y+(d-S)/(_-S)-.5)})}return i.contour=r,i.size=function(l){if(!arguments.length)return[e,t];var f=Math.floor(l[0]),d=Math.floor(l[1]);return f>=0&&d>=0||te("invalid size"),e=f,t=d,i},i.smooth=function(l){return arguments.length?(n=l?o:Jue,i):n===o},i}function ele(e){for(var t=0,n=e.length,i=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)i+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return i}function tle(e,t){for(var n=-1,i=t.length,r;++n<i;)if(r=nle(e,t[n]))return r;return 0}function nle(e,t){for(var n=t[0],i=t[1],r=-1,a=0,s=e.length,o=s-1;a<s;o=a++){var l=e[a],f=l[0],d=l[1],h=e[o],p=h[0],y=h[1];if(ile(l,h,t))return 0;d>i!=y>i&&n<(p-f)*(i-d)/(y-d)+f&&(r=-r)}return r}function ile(e,t,n){var i;return rle(e,t,n)&&ale(e[i=+(e[0]===t[0])],n[i],t[i])}function rle(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function ale(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function mI(e,t,n){return function(i){var r=ja(i),a=n?Math.min(r[0],0):r[0],s=r[1],o=s-a,l=t?lu(a,s,e):o/(e+1);return tr(a+l,s,l)}}function Y3(e){J.call(this,null,e)}Y3.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};ge(Y3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=e.field||ti,a=pI().smooth(e.smooth!==!1),s=e.thresholds||sle(i,r,e),o=e.as===null?null:e.as||"contour",l=[];return i.forEach(f=>{const d=r(f),h=a.size([d.width,d.height])(d.values,re(s)?s:s(d.values));ole(h,d,f,e),h.forEach(p=>{l.push(Jv(f,lt(o!=null?{[o]:p}:p)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function sle(e,t,n){const i=mI(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?i:i(e.map(r=>wl(t(r).values)))}function ole(e,t,n,i){let r=i.scale||t.scale,a=i.translate||t.translate;if(Pe(r)&&(r=r(n,i)),Pe(a)&&(a=a(n,i)),(r===1||r==null)&&!a)return;const s=(at(r)?r:r[0])||1,o=(at(r)?r:r[1])||1,l=a&&a[0]||0,f=a&&a[1]||0;e.forEach(yI(t,s,o,l,f))}function yI(e,t,n,i,r){const a=e.x1||0,s=e.y1||0,o=t*n<0;function l(h){h.forEach(f)}function f(h){o&&h.reverse(),h.forEach(d)}function d(h){h[0]=(h[0]-a)*t+i,h[1]=(h[1]-s)*n+r}return function(h){return h.coordinates.forEach(l),h}}function Yz(e,t,n){const i=e>=0?e:B$(t,n);return Math.round((Math.sqrt(4*i*i+1)-1)/2)}function F_(e){return Pe(e)?e:ni(+e)}function vI(){var e=l=>l[0],t=l=>l[1],n=xd,i=[-1,-1],r=960,a=500,s=2;function o(l,f){const d=Yz(i[0],l,e)>>s,h=Yz(i[1],l,t)>>s,p=d?d+2:0,y=h?h+2:0,v=2*p+(r>>s),b=2*y+(a>>s),S=new Float32Array(v*b),_=new Float32Array(v*b);let w=S;l.forEach(C=>{const T=p+(+e(C)>>s),k=y+(+t(C)>>s);T>=0&&T<v&&k>=0&&k<b&&(S[T+k*v]+=+n(C))}),d>0&&h>0?(cf(v,b,S,_,d),ff(v,b,_,S,h),cf(v,b,S,_,d),ff(v,b,_,S,h),cf(v,b,S,_,d),ff(v,b,_,S,h)):d>0?(cf(v,b,S,_,d),cf(v,b,_,S,d),cf(v,b,S,_,d),w=_):h>0&&(ff(v,b,S,_,h),ff(v,b,_,S,h),ff(v,b,S,_,h),w=_);const A=f?Math.pow(2,-2*s):1/D7(w);for(let C=0,T=v*b;C<T;++C)w[C]*=A;return{values:w,scale:1<<s,width:v,height:b,x1:p,y1:y,x2:p+(r>>s),y2:y+(a>>s)}}return o.x=function(l){return arguments.length?(e=F_(l),o):e},o.y=function(l){return arguments.length?(t=F_(l),o):t},o.weight=function(l){return arguments.length?(n=F_(l),o):n},o.size=function(l){if(!arguments.length)return[r,a];var f=+l[0],d=+l[1];return f>=0&&d>=0||te("invalid size"),r=f,a=d,o},o.cellSize=function(l){return arguments.length?((l=+l)>=1||te("invalid cell size"),s=Math.floor(Math.log(l)/Math.LN2),o):1<<s},o.bandwidth=function(l){return arguments.length?(l=ve(l),l.length===1&&(l=[+l[0],+l[0]]),l.length!==2&&te("invalid bandwidth"),i=l,o):i},o}function cf(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<t;++s)for(let o=0,l=0;o<e+r;++o)o<e&&(l+=n[o+s*e]),o>=r&&(o>=a&&(l-=n[o-a+s*e]),i[o-r+s*e]=l/Math.min(o+1,e-1+a-o,a))}function ff(e,t,n,i,r){const a=(r<<1)+1;for(let s=0;s<e;++s)for(let o=0,l=0;o<t+r;++o)o<t&&(l+=n[s+o*e]),o>=r&&(o>=a&&(l-=n[s+(o-a)*e]),i[s+(o-r)*e]=l/Math.min(o+1,t-1+a-o,a))}function X3(e){J.call(this,null,e)}X3.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const ule=["x","y","weight","size","cellSize","bandwidth"];function bI(e,t){return ule.forEach(n=>t[n]!=null?e[n](t[n]):0),e}ge(X3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=t.materialize(t.SOURCE).source,r=lle(i,e.groupby),a=(e.groupby||[]).map(It),s=bI(vI(),e),o=e.as||"grid",l=[];function f(d,h){for(let p=0;p<a.length;++p)d[a[p]]=h[p];return d}return l=r.map(d=>lt(f({[o]:s(d,e.counts)},d.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=l,n}});function lle(e,t){var n=[],i=d=>d(o),r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function V3(e){J.call(this,null,e)}V3.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};ge(V3,J,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=pI().smooth(e.smooth!==!1),r=e.values,a=e.thresholds||mI(e.count||10,e.nice,!!r),s=e.size,o,l;return r||(r=t.materialize(t.SOURCE).source,o=bI(vI(),e)(r,!0),l=yI(o,o.scale||1,o.scale||1,0,0),s=[o.width,o.height],r=o.values),a=re(a)?a:a(r),r=i.size(s)(r,a),l&&r.forEach(l),this.value&&(n.rem=this.value),this.value=n.source=n.add=(r||[]).map(lt),n}});const QA="Feature",W3="FeatureCollection",cle="MultiPoint";function Q3(e){J.call(this,null,e)}Q3.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};ge(Q3,J,{transform(e,t){var n=this._features,i=this._points,r=e.fields,a=r&&r[0],s=r&&r[1],o=e.geojson||!r&&ti,l=t.ADD,f;f=e.modified()||t.changed(t.REM)||t.modified(Zn(o))||a&&t.modified(Zn(a))||s&&t.modified(Zn(s)),(!this.value||f)&&(l=t.SOURCE,this._features=n=[],this._points=i=[]),o&&t.visit(l,d=>n.push(o(d))),a&&s&&(t.visit(l,d=>{var h=a(d),p=s(d);h!=null&&p!=null&&(h=+h)===h&&(p=+p)===p&&i.push([h,p])}),n=n.concat({type:QA,geometry:{type:cle,coordinates:i}})),this.value={type:W3,features:n}}});function Z3(e){J.call(this,null,e)}Z3.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};ge(Z3,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.field||ti,a=e.as||"path",s=n.SOURCE;!i||e.modified()?(this.value=i=gI(e.projection),n.materialize().reflow()):s=r===ti||t.modified(r.fields)?n.ADD_MOD:n.ADD;const o=fle(i,e.pointRadius);return n.visit(s,l=>l[a]=i(r(l))),i.pointRadius(o),n.modifies(a)}});function fle(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function K3(e){J.call(this,null,e)}K3.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};ge(K3,J,{transform(e,t){var n=e.projection,i=e.fields[0],r=e.fields[1],a=e.as||["x","y"],s=a[0],o=a[1],l;function f(d){const h=n([i(d),r(d)]);h?(d[s]=h[0],d[o]=h[1]):(d[s]=void 0,d[o]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,f):(l=t.modified(i.fields)||t.modified(r.fields),t.visit(l?t.ADD_MOD:t.ADD,f)),t.modifies(a)}});function J3(e){J.call(this,null,e)}J3.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};ge(J3,J,{transform(e,t){var n=t.fork(t.ALL),i=this.value,r=e.as||"shape",a=n.ADD;return(!i||e.modified())&&(this.value=i=dle(gI(e.projection),e.field||kr("datum"),e.pointRadius),n.materialize().reflow(),a=n.SOURCE),n.visit(a,s=>s[r]=i),n.modifies(r)}});function dle(e,t,n){const i=n==null?r=>e(t(r)):r=>{var a=e.pointRadius(),s=e.pointRadius(n)(t(r));return e.pointRadius(a),s};return i.context=r=>(e.context(r),i),i}function eM(e){J.call(this,[],e),this.generator=sue()}eM.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};ge(eM,J,{transform(e,t){var n=this.value,i=this.generator,r;if(!n.length||e.modified())for(const a in e)Pe(i[a])&&i[a](e[a]);return r=i(),n.length?t.mod.push(TL(n[0],r)):t.add.push(lt(r)),n[0]=r,t}});function tM(e){J.call(this,null,e)}tM.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};ge(tM,J,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,i=e.resolve==="shared",r=e.field||ti,a=gle(e.opacity,e),s=hle(e.color,e),o=e.as||"image",l={$x:0,$y:0,$value:0,$max:i?wl(n.map(f=>wl(r(f).values))):0};return n.forEach(f=>{const d=r(f),h=qe({},f,l);i||(h.$max=wl(d.values||[])),f[o]=ple(d,h,s.dep?s:ni(s(h)),a.dep?a:ni(a(h)))}),t.reflow(!0).modifies(o)}});function hle(e,t){let n;return Pe(e)?(n=i=>du(e(i,t)),n.dep=xI(e)):n=ni(du(e||"#888")),n}function gle(e,t){let n;return Pe(e)?(n=i=>e(i,t),n.dep=xI(e)):e?n=ni(e):(n=i=>i.$value/i.$max||0,n.dep=!0),n}function xI(e){if(!Pe(e))return!1;const t=ra(Zn(e));return t.$x||t.$y||t.$value||t.$max}function ple(e,t,n,i){const r=e.width,a=e.height,s=e.x1||0,o=e.y1||0,l=e.x2||r,f=e.y2||a,d=e.values,h=d?S=>d[S]:Ho,p=au(l-s,f-o),y=p.getContext("2d"),v=y.getImageData(0,0,l-s,f-o),b=v.data;for(let S=o,_=0;S<f;++S){t.$y=S-o;for(let w=s,A=S*r;w<l;++w,_+=4){t.$x=w-s,t.$value=h(w+A);const C=n(t);b[_+0]=C.r,b[_+1]=C.g,b[_+2]=C.b,b[_+3]=~~(255*i(t))}}return y.putImageData(v,0,0),p}function SI(e){J.call(this,null,e),this.modified(!0)}ge(SI,J,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=yle(e.type),WA.forEach(i=>{e[i]!=null&&Xz(n,i,e[i])})):WA.forEach(i=>{e.modified(i)&&Xz(n,i,e[i])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&mle(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function mle(e,t){const n=vle(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function yle(e){const t=G3((e||"mercator").toLowerCase());return t||te("Unrecognized projection type: "+e),t()}function Xz(e,t,n){Pe(e[t])&&e[t](n)}function vle(e){return e=ve(e),e.length===1?e[0]:{type:W3,features:e.reduce((t,n)=>t.concat(ble(n)),[])}}function ble(e){return e.type===W3?e.features:ve(e).filter(t=>t!=null).map(t=>t.type===QA?t:{type:QA,geometry:t})}const xle=Object.freeze(Object.defineProperty({__proto__:null,contour:V3,geojson:Q3,geopath:Z3,geopoint:K3,geoshape:J3,graticule:eM,heatmap:tM,isocontour:Y3,kde2d:X3,projection:SI},Symbol.toStringTag,{value:"Module"}));function Sle(e,t){var n,i=1;e==null&&(e=0),t==null&&(t=0);function r(){var a,s=n.length,o,l=0,f=0;for(a=0;a<s;++a)o=n[a],l+=o.x,f+=o.y;for(l=(l/s-e)*i,f=(f/s-t)*i,a=0;a<s;++a)o=n[a],o.x-=l,o.y-=f}return r.initialize=function(a){n=a},r.x=function(a){return arguments.length?(e=+a,r):e},r.y=function(a){return arguments.length?(t=+a,r):t},r.strength=function(a){return arguments.length?(i=+a,r):i},r}function Ele(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return EI(this.cover(t,n),t,n,e)}function EI(e,t,n,i){if(isNaN(t)||isNaN(n))return e;var r,a=e._root,s={data:i},o=e._x0,l=e._y0,f=e._x1,d=e._y1,h,p,y,v,b,S,_,w;if(!a)return e._root=s,e;for(;a.length;)if((b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(l+d)/2))?l=p:d=p,r=a,!(a=a[_=S<<1|b]))return r[_]=s,e;if(y=+e._x.call(null,a.data),v=+e._y.call(null,a.data),t===y&&n===v)return s.next=a,r?r[_]=s:e._root=s,e;do r=r?r[_]=new Array(4):e._root=new Array(4),(b=t>=(h=(o+f)/2))?o=h:f=h,(S=n>=(p=(l+d)/2))?l=p:d=p;while((_=S<<1|b)===(w=(v>=p)<<1|y>=h));return r[w]=a,r[_]=s,e}function _le(e){var t,n,i=e.length,r,a,s=new Array(i),o=new Array(i),l=1/0,f=1/0,d=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,t=e[n]))||isNaN(a=+this._y.call(null,t))||(s[n]=r,o[n]=a,r<l&&(l=r),r>d&&(d=r),a<f&&(f=a),a>h&&(h=a));if(l>d||f>h)return this;for(this.cover(l,f).cover(d,h),n=0;n<i;++n)EI(this,s[n],o[n],e[n]);return this}function wle(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,i=this._y0,r=this._x1,a=this._y1;if(isNaN(n))r=(n=Math.floor(e))+1,a=(i=Math.floor(t))+1;else{for(var s=r-n||1,o=this._root,l,f;n>e||e>=r||i>t||t>=a;)switch(f=(t<i)<<1|e<n,l=new Array(4),l[f]=o,o=l,s*=2,f){case 0:r=n+s,a=i+s;break;case 1:n=r-s,a=i+s;break;case 2:r=n+s,i=a-s;break;case 3:n=r-s,i=a-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=i,this._x1=r,this._y1=a,this}function Ale(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Cle(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function fi(e,t,n,i,r){this.node=e,this.x0=t,this.y0=n,this.x1=i,this.y1=r}function $le(e,t,n){var i,r=this._x0,a=this._y0,s,o,l,f,d=this._x1,h=this._y1,p=[],y=this._root,v,b;for(y&&p.push(new fi(y,r,a,d,h)),n==null?n=1/0:(r=e-n,a=t-n,d=e+n,h=t+n,n*=n);v=p.pop();)if(!(!(y=v.node)||(s=v.x0)>d||(o=v.y0)>h||(l=v.x1)<r||(f=v.y1)<a))if(y.length){var S=(s+l)/2,_=(o+f)/2;p.push(new fi(y[3],S,_,l,f),new fi(y[2],s,_,S,f),new fi(y[1],S,o,l,_),new fi(y[0],s,o,S,_)),(b=(t>=_)<<1|e>=S)&&(v=p[p.length-1],p[p.length-1]=p[p.length-1-b],p[p.length-1-b]=v)}else{var w=e-+this._x.call(null,y.data),A=t-+this._y.call(null,y.data),C=w*w+A*A;if(C<n){var T=Math.sqrt(n=C);r=e-T,a=t-T,d=e+T,h=t+T,i=y.data}}return i}function Tle(e){if(isNaN(d=+this._x.call(null,e))||isNaN(h=+this._y.call(null,e)))return this;var t,n=this._root,i,r,a,s=this._x0,o=this._y0,l=this._x1,f=this._y1,d,h,p,y,v,b,S,_;if(!n)return this;if(n.length)for(;;){if((v=d>=(p=(s+l)/2))?s=p:l=p,(b=h>=(y=(o+f)/2))?o=y:f=y,t=n,!(n=n[S=b<<1|v]))return this;if(!n.length)break;(t[S+1&3]||t[S+2&3]||t[S+3&3])&&(i=t,_=S)}for(;n.data!==e;)if(r=n,!(n=n.next))return this;return(a=n.next)&&delete n.next,r?(a?r.next=a:delete r.next,this):t?(a?t[S]=a:delete t[S],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(i?i[_]=n:this._root=n),this):(this._root=a,this)}function Mle(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function kle(){return this._root}function Ole(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function Rle(e){var t=[],n,i=this._root,r,a,s,o,l;for(i&&t.push(new fi(i,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(i=n.node,a=n.x0,s=n.y0,o=n.x1,l=n.y1)&&i.length){var f=(a+o)/2,d=(s+l)/2;(r=i[3])&&t.push(new fi(r,f,d,o,l)),(r=i[2])&&t.push(new fi(r,a,d,f,l)),(r=i[1])&&t.push(new fi(r,f,s,o,d)),(r=i[0])&&t.push(new fi(r,a,s,f,d))}return this}function Dle(e){var t=[],n=[],i;for(this._root&&t.push(new fi(this._root,this._x0,this._y0,this._x1,this._y1));i=t.pop();){var r=i.node;if(r.length){var a,s=i.x0,o=i.y0,l=i.x1,f=i.y1,d=(s+l)/2,h=(o+f)/2;(a=r[0])&&t.push(new fi(a,s,o,d,h)),(a=r[1])&&t.push(new fi(a,d,o,l,h)),(a=r[2])&&t.push(new fi(a,s,h,d,f)),(a=r[3])&&t.push(new fi(a,d,h,l,f))}n.push(i)}for(;i=n.pop();)e(i.node,i.x0,i.y0,i.x1,i.y1);return this}function Nle(e){return e[0]}function zle(e){return arguments.length?(this._x=e,this):this._x}function Fle(e){return e[1]}function Lle(e){return arguments.length?(this._y=e,this):this._y}function nM(e,t,n){var i=new iM(t??Nle,n??Fle,NaN,NaN,NaN,NaN);return e==null?i:i.addAll(e)}function iM(e,t,n,i,r,a){this._x=e,this._y=t,this._x0=n,this._y0=i,this._x1=r,this._y1=a,this._root=void 0}function Vz(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var xi=nM.prototype=iM.prototype;xi.copy=function(){var e=new iM(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,i;if(!t)return e;if(!t.length)return e._root=Vz(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var r=0;r<4;++r)(i=t.source[r])&&(i.length?n.push({source:i,target:t.target[r]=new Array(4)}):t.target[r]=Vz(i));return e};xi.add=Ele;xi.addAll=_le;xi.cover=wle;xi.data=Ale;xi.extent=Cle;xi.find=$le;xi.remove=Tle;xi.removeAll=Mle;xi.root=kle;xi.size=Ole;xi.visit=Rle;xi.visitAfter=Dle;xi.x=zle;xi.y=Lle;function di(e){return function(){return e}}function Ko(e){return(e()-.5)*1e-6}function Ble(e){return e.x+e.vx}function Ule(e){return e.y+e.vy}function qle(e){var t,n,i,r=1,a=1;typeof e!="function"&&(e=di(e==null?1:+e));function s(){for(var f,d=t.length,h,p,y,v,b,S,_=0;_<a;++_)for(h=nM(t,Ble,Ule).visitAfter(o),f=0;f<d;++f)p=t[f],b=n[p.index],S=b*b,y=p.x+p.vx,v=p.y+p.vy,h.visit(w);function w(A,C,T,k,M){var R=A.data,z=A.r,U=b+z;if(R){if(R.index>p.index){var L=y-R.x-R.vx,G=v-R.y-R.vy,j=L*L+G*G;j<U*U&&(L===0&&(L=Ko(i),j+=L*L),G===0&&(G=Ko(i),j+=G*G),j=(U-(j=Math.sqrt(j)))/j*r,p.vx+=(L*=j)*(U=(z*=z)/(S+z)),p.vy+=(G*=j)*U,R.vx-=L*(U=1-U),R.vy-=G*U)}return}return C>y+U||k<y-U||T>v+U||M<v-U}}function o(f){if(f.data)return f.r=n[f.data.index];for(var d=f.r=0;d<4;++d)f[d]&&f[d].r>f.r&&(f.r=f[d].r)}function l(){if(t){var f,d=t.length,h;for(n=new Array(d),f=0;f<d;++f)h=t[f],n[h.index]=+e(h,f,t)}}return s.initialize=function(f,d){t=f,i=d,l()},s.iterations=function(f){return arguments.length?(a=+f,s):a},s.strength=function(f){return arguments.length?(r=+f,s):r},s.radius=function(f){return arguments.length?(e=typeof f=="function"?f:di(+f),l(),s):e},s}function Ple(e){return e.index}function Wz(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Ile(e){var t=Ple,n=h,i,r=di(30),a,s,o,l,f,d=1;e==null&&(e=[]);function h(S){return 1/Math.min(o[S.source.index],o[S.target.index])}function p(S){for(var _=0,w=e.length;_<d;++_)for(var A=0,C,T,k,M,R,z,U;A<w;++A)C=e[A],T=C.source,k=C.target,M=k.x+k.vx-T.x-T.vx||Ko(f),R=k.y+k.vy-T.y-T.vy||Ko(f),z=Math.sqrt(M*M+R*R),z=(z-a[A])/z*S*i[A],M*=z,R*=z,k.vx-=M*(U=l[A]),k.vy-=R*U,T.vx+=M*(U=1-U),T.vy+=R*U}function y(){if(s){var S,_=s.length,w=e.length,A=new Map(s.map((T,k)=>[t(T,k,s),T])),C;for(S=0,o=new Array(_);S<w;++S)C=e[S],C.index=S,typeof C.source!="object"&&(C.source=Wz(A,C.source)),typeof C.target!="object"&&(C.target=Wz(A,C.target)),o[C.source.index]=(o[C.source.index]||0)+1,o[C.target.index]=(o[C.target.index]||0)+1;for(S=0,l=new Array(w);S<w;++S)C=e[S],l[S]=o[C.source.index]/(o[C.source.index]+o[C.target.index]);i=new Array(w),v(),a=new Array(w),b()}}function v(){if(s)for(var S=0,_=e.length;S<_;++S)i[S]=+n(e[S],S,e)}function b(){if(s)for(var S=0,_=e.length;S<_;++S)a[S]=+r(e[S],S,e)}return p.initialize=function(S,_){s=S,f=_,y()},p.links=function(S){return arguments.length?(e=S,y(),p):e},p.id=function(S){return arguments.length?(t=S,p):t},p.iterations=function(S){return arguments.length?(d=+S,p):d},p.strength=function(S){return arguments.length?(n=typeof S=="function"?S:di(+S),v(),p):n},p.distance=function(S){return arguments.length?(r=typeof S=="function"?S:di(+S),b(),p):r},p}var jle={value:()=>{}};function _I(){for(var e=0,t=arguments.length,n={},i;e<t;++e){if(!(i=arguments[e]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new q1(n)}function q1(e){this._=e}function Hle(e,t){return e.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}q1.prototype=_I.prototype={constructor:q1,on:function(e,t){var n=this._,i=Hle(e+"",n),r,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((r=(e=i[a]).type)&&(r=Gle(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<s;)if(r=(e=i[a]).type)n[r]=Qz(n[r],e.name,t);else if(t==null)for(r in n)n[r]=Qz(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new q1(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,a;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],i=0,r=a.length;i<r;++i)a[i].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var i=this._[e],r=0,a=i.length;r<a;++r)i[r].value.apply(t,n)}};function Gle(e,t){for(var n=0,i=e.length,r;n<i;++n)if((r=e[n]).name===t)return r.value}function Qz(e,t,n){for(var i=0,r=e.length;i<r;++i)if(e[i].name===t){e[i]=jle,e=e.slice(0,i).concat(e.slice(i+1));break}return n!=null&&e.push({name:t,value:n}),e}var td=0,Mg=0,ng=0,wI=1e3,sv,kg,ov=0,ql=0,Lb=0,hp=typeof performance=="object"&&performance.now?performance:Date,AI=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function rM(){return ql||(AI(Yle),ql=hp.now()+Lb)}function Yle(){ql=0}function uv(){this._call=this._time=this._next=null}uv.prototype=CI.prototype={constructor:uv,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?rM():+n)+(t==null?0:+t),!this._next&&kg!==this&&(kg?kg._next=this:sv=this,kg=this),this._call=e,this._time=n,ZA()},stop:function(){this._call&&(this._call=null,this._time=1/0,ZA())}};function CI(e,t,n){var i=new uv;return i.restart(e,t,n),i}function Xle(){rM(),++td;for(var e=sv,t;e;)(t=ql-e._time)>=0&&e._call.call(void 0,t),e=e._next;--td}function Zz(){ql=(ov=hp.now())+Lb,td=Mg=0;try{Xle()}finally{td=0,Wle(),ql=0}}function Vle(){var e=hp.now(),t=e-ov;t>wI&&(Lb-=t,ov=e)}function Wle(){for(var e,t=sv,n,i=1/0;t;)t._call?(i>t._time&&(i=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:sv=n);kg=e,ZA(i)}function ZA(e){if(!td){Mg&&(Mg=clearTimeout(Mg));var t=e-ql;t>24?(e<1/0&&(Mg=setTimeout(Zz,e-hp.now()-Lb)),ng&&(ng=clearInterval(ng))):(ng||(ov=hp.now(),ng=setInterval(Vle,wI)),td=1,AI(Zz))}}function Qle(e,t,n){var i=new uv,r=t;return t==null?(i.restart(e,t,n),i):(i._restart=i.restart,i.restart=function(a,s,o){s=+s,o=o==null?rM():+o,i._restart(function l(f){f+=r,i._restart(l,r+=s,o),a(f)},s,o)},i.restart(e,t,n),i)}const Zle=1664525,Kle=1013904223,Kz=4294967296;function Jle(){let e=1;return()=>(e=(Zle*e+Kle)%Kz)/Kz}function ece(e){return e.x}function tce(e){return e.y}var nce=10,ice=Math.PI*(3-Math.sqrt(5));function rce(e){var t,n=1,i=.001,r=1-Math.pow(i,1/300),a=0,s=.6,o=new Map,l=CI(h),f=_I("tick","end"),d=Jle();e==null&&(e=[]);function h(){p(),f.call("tick",t),n<i&&(l.stop(),f.call("end",t))}function p(b){var S,_=e.length,w;b===void 0&&(b=1);for(var A=0;A<b;++A)for(n+=(a-n)*r,o.forEach(function(C){C(n)}),S=0;S<_;++S)w=e[S],w.fx==null?w.x+=w.vx*=s:(w.x=w.fx,w.vx=0),w.fy==null?w.y+=w.vy*=s:(w.y=w.fy,w.vy=0);return t}function y(){for(var b=0,S=e.length,_;b<S;++b){if(_=e[b],_.index=b,_.fx!=null&&(_.x=_.fx),_.fy!=null&&(_.y=_.fy),isNaN(_.x)||isNaN(_.y)){var w=nce*Math.sqrt(.5+b),A=b*ice;_.x=w*Math.cos(A),_.y=w*Math.sin(A)}(isNaN(_.vx)||isNaN(_.vy))&&(_.vx=_.vy=0)}}function v(b){return b.initialize&&b.initialize(e,d),b}return y(),t={tick:p,restart:function(){return l.restart(h),t},stop:function(){return l.stop(),t},nodes:function(b){return arguments.length?(e=b,y(),o.forEach(v),t):e},alpha:function(b){return arguments.length?(n=+b,t):n},alphaMin:function(b){return arguments.length?(i=+b,t):i},alphaDecay:function(b){return arguments.length?(r=+b,t):+r},alphaTarget:function(b){return arguments.length?(a=+b,t):a},velocityDecay:function(b){return arguments.length?(s=1-b,t):1-s},randomSource:function(b){return arguments.length?(d=b,o.forEach(v),t):d},force:function(b,S){return arguments.length>1?(S==null?o.delete(b):o.set(b,v(S)),t):o.get(b)},find:function(b,S,_){var w=0,A=e.length,C,T,k,M,R;for(_==null?_=1/0:_*=_,w=0;w<A;++w)M=e[w],C=b-M.x,T=S-M.y,k=C*C+T*T,k<_&&(R=M,_=k);return R},on:function(b,S){return arguments.length>1?(f.on(b,S),t):f.on(b)}}}function ace(){var e,t,n,i,r=di(-30),a,s=1,o=1/0,l=.81;function f(y){var v,b=e.length,S=nM(e,ece,tce).visitAfter(h);for(i=y,v=0;v<b;++v)t=e[v],S.visit(p)}function d(){if(e){var y,v=e.length,b;for(a=new Array(v),y=0;y<v;++y)b=e[y],a[b.index]=+r(b,y,e)}}function h(y){var v=0,b,S,_=0,w,A,C;if(y.length){for(w=A=C=0;C<4;++C)(b=y[C])&&(S=Math.abs(b.value))&&(v+=b.value,_+=S,w+=S*b.x,A+=S*b.y);y.x=w/_,y.y=A/_}else{b=y,b.x=b.data.x,b.y=b.data.y;do v+=a[b.data.index];while(b=b.next)}y.value=v}function p(y,v,b,S){if(!y.value)return!0;var _=y.x-t.x,w=y.y-t.y,A=S-v,C=_*_+w*w;if(A*A/l<C)return C<o&&(_===0&&(_=Ko(n),C+=_*_),w===0&&(w=Ko(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)),t.vx+=_*y.value*i/C,t.vy+=w*y.value*i/C),!0;if(y.length||C>=o)return;(y.data!==t||y.next)&&(_===0&&(_=Ko(n),C+=_*_),w===0&&(w=Ko(n),C+=w*w),C<s&&(C=Math.sqrt(s*C)));do y.data!==t&&(A=a[y.data.index]*i/C,t.vx+=_*A,t.vy+=w*A);while(y=y.next)}return f.initialize=function(y,v){e=y,n=v,d()},f.strength=function(y){return arguments.length?(r=typeof y=="function"?y:di(+y),d(),f):r},f.distanceMin=function(y){return arguments.length?(s=y*y,f):Math.sqrt(s)},f.distanceMax=function(y){return arguments.length?(o=y*y,f):Math.sqrt(o)},f.theta=function(y){return arguments.length?(l=y*y,f):Math.sqrt(l)},f}function sce(e){var t=di(.1),n,i,r;typeof e!="function"&&(e=di(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vx+=(r[l]-d.x)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:di(+o),s(),a):t},a.x=function(o){return arguments.length?(e=typeof o=="function"?o:di(+o),s(),a):e},a}function oce(e){var t=di(.1),n,i,r;typeof e!="function"&&(e=di(e==null?0:+e));function a(o){for(var l=0,f=n.length,d;l<f;++l)d=n[l],d.vy+=(r[l]-d.y)*i[l]*o}function s(){if(n){var o,l=n.length;for(i=new Array(l),r=new Array(l),o=0;o<l;++o)i[o]=isNaN(r[o]=+e(n[o],o,n))?0:+t(n[o],o,n)}}return a.initialize=function(o){n=o,s()},a.strength=function(o){return arguments.length?(t=typeof o=="function"?o:di(+o),s(),a):t},a.y=function(o){return arguments.length?(e=typeof o=="function"?o:di(+o),s(),a):e},a}const Jz={center:Sle,collide:qle,nbody:ace,link:Ile,x:sce,y:oce},Og="forces",KA=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],uce=["static","iterations"],$I=["x","y","vx","vy"];function aM(e){J.call(this,null,e)}aM.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:$I}]};ge(aM,J,{transform(e,t){var n=this.value,i=t.changed(t.ADD_REM),r=e.modified(KA),a=e.iterations||300;if(n?(i&&(t.modifies("index"),n.nodes(t.source)),(r||t.changed(t.MOD))&&TI(n,e,0,t)):(this.value=n=cce(t.source,e),n.on("tick",lce(t.dataflow,this)),e.static||(i=!0,n.tick()),t.modifies("index")),r||i||e.modified(uce)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),e.static)for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!i)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let o=this._argops,l=0,f=o.length,d;l<f;++l)if(d=o[l],!(d.name!==Og||d.op._argval.force!=="link")){for(var i=d.op._argops,r=0,a=i.length,s;r<a;++r)if(i[r].name==="links"&&(s=i[r].op.source)){n.pulse(s,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies($I)}});function lce(e,t){return()=>e.touch(t).run()}function cce(e,t){const n=rce(e),i=n.stop,r=n.restart;let a=!1;return n.stopped=()=>a,n.restart=()=>(a=!1,r()),n.stop=()=>(a=!0,i()),TI(n,t,!0).on("end",()=>a=!0)}function TI(e,t,n,i){var r=ve(t.forces),a,s,o,l;for(a=0,s=KA.length;a<s;++a)o=KA[a],o!==Og&&t.modified(o)&&e[o](t[o]);for(a=0,s=r.length;a<s;++a)l=Og+a,o=n||t.modified(Og,a)?dce(r[a]):i&&fce(r[a],i)?e.force(l):null,o&&e.force(l,o);for(s=e.numForces||0;a<s;++a)e.force(Og+a,null);return e.numForces=r.length,e}function fce(e,t){var n,i;for(n in e)if(Pe(i=e[n])&&t.modified(Zn(i)))return 1;return 0}function dce(e){var t,n;Se(Jz,e.force)||te("Unrecognized force: "+e.force),t=Jz[e.force]();for(n in e)Pe(t[n])&&hce(t[n],e[n],e);return t}function hce(e,t,n){e(Pe(t)?i=>t(i,n):t)}const gce=Object.freeze(Object.defineProperty({__proto__:null,force:aM},Symbol.toStringTag,{value:"Module"}));function pce(e,t){return e.parent===t.parent?1:2}function mce(e){return e.reduce(yce,0)/e.length}function yce(e,t){return e+t.x}function vce(e){return 1+e.reduce(bce,0)}function bce(e,t){return Math.max(e,t.y)}function xce(e){for(var t;t=e.children;)e=t[0];return e}function Sce(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Ece(){var e=pce,t=1,n=1,i=!1;function r(a){var s,o=0;a.eachAfter(function(p){var y=p.children;y?(p.x=mce(y),p.y=vce(y)):(p.x=s?o+=e(p,s):0,p.y=0,s=p)});var l=xce(a),f=Sce(a),d=l.x-e(l,f)/2,h=f.x+e(f,l)/2;return a.eachAfter(i?function(p){p.x=(p.x-a.x)*t,p.y=(a.y-p.y)*n}:function(p){p.x=(p.x-d)/(h-d)*t,p.y=(1-(a.y?p.y/a.y:1))*n})}return r.separation=function(a){return arguments.length?(e=a,r):e},r.size=function(a){return arguments.length?(i=!1,t=+a[0],n=+a[1],r):i?null:[t,n]},r.nodeSize=function(a){return arguments.length?(i=!0,t=+a[0],n=+a[1],r):i?[t,n]:null},r}function _ce(e){var t=0,n=e.children,i=n&&n.length;if(!i)t=1;else for(;--i>=0;)t+=n[i].value;e.value=t}function wce(){return this.eachAfter(_ce)}function Ace(e,t){let n=-1;for(const i of this)e.call(t,i,++n,this);return this}function Cce(e,t){for(var n=this,i=[n],r,a,s=-1;n=i.pop();)if(e.call(t,n,++s,this),r=n.children)for(a=r.length-1;a>=0;--a)i.push(r[a]);return this}function $ce(e,t){for(var n=this,i=[n],r=[],a,s,o,l=-1;n=i.pop();)if(r.push(n),a=n.children)for(s=0,o=a.length;s<o;++s)i.push(a[s]);for(;n=r.pop();)e.call(t,n,++l,this);return this}function Tce(e,t){let n=-1;for(const i of this)if(e.call(t,i,++n,this))return i}function Mce(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,i=t.children,r=i&&i.length;--r>=0;)n+=i[r].value;t.value=n})}function kce(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Oce(e){for(var t=this,n=Rce(t,e),i=[t];t!==n;)t=t.parent,i.push(t);for(var r=i.length;e!==n;)i.splice(r,0,e),e=e.parent;return i}function Rce(e,t){if(e===t)return e;var n=e.ancestors(),i=t.ancestors(),r=null;for(e=n.pop(),t=i.pop();e===t;)r=e,e=n.pop(),t=i.pop();return r}function Dce(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function Nce(){return Array.from(this)}function zce(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Fce(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*Lce(){var e=this,t,n=[e],i,r,a;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,i=e.children)for(r=0,a=i.length;r<a;++r)n.push(i[r]);while(n.length)}function sM(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=qce)):t===void 0&&(t=Uce);for(var n=new nd(e),i,r=[n],a,s,o,l;i=r.pop();)if((s=t(i.data))&&(l=(s=Array.from(s)).length))for(i.children=s,o=l-1;o>=0;--o)r.push(a=s[o]=new nd(s[o])),a.parent=i,a.depth=i.depth+1;return n.eachBefore(MI)}function Bce(){return sM(this).eachBefore(Pce)}function Uce(e){return e.children}function qce(e){return Array.isArray(e)?e[1]:null}function Pce(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function MI(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function nd(e){this.data=e,this.depth=this.height=0,this.parent=null}nd.prototype=sM.prototype={constructor:nd,count:wce,each:Ace,eachAfter:$ce,eachBefore:Cce,find:Tce,sum:Mce,sort:kce,path:Oce,ancestors:Dce,descendants:Nce,leaves:zce,links:Fce,copy:Bce,[Symbol.iterator]:Lce};function P1(e){return e==null?null:kI(e)}function kI(e){if(typeof e!="function")throw new Error;return e}function vl(){return 0}function vf(e){return function(){return e}}const Ice=1664525,jce=1013904223,e8=4294967296;function Hce(){let e=1;return()=>(e=(Ice*e+jce)%e8)/e8}function Gce(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Yce(e,t){let n=e.length,i,r;for(;n;)r=t()*n--|0,i=e[n],e[n]=e[r],e[r]=i;return e}function Xce(e,t){for(var n=0,i=(e=Yce(Array.from(e),t)).length,r=[],a,s;n<i;)a=e[n],s&&OI(s,a)?++n:(s=Wce(r=Vce(r,a)),n=0);return s}function Vce(e,t){var n,i;if(L_(t,e))return[t];for(n=0;n<e.length;++n)if(s1(t,e[n])&&L_(Rg(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(i=n+1;i<e.length;++i)if(s1(Rg(e[n],e[i]),t)&&s1(Rg(e[n],t),e[i])&&s1(Rg(e[i],t),e[n])&&L_(RI(e[n],e[i],t),e))return[e[n],e[i],t];throw new Error}function s1(e,t){var n=e.r-t.r,i=t.x-e.x,r=t.y-e.y;return n<0||n*n<i*i+r*r}function OI(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function L_(e,t){for(var n=0;n<t.length;++n)if(!OI(e,t[n]))return!1;return!0}function Wce(e){switch(e.length){case 1:return Qce(e[0]);case 2:return Rg(e[0],e[1]);case 3:return RI(e[0],e[1],e[2])}}function Qce(e){return{x:e.x,y:e.y,r:e.r}}function Rg(e,t){var n=e.x,i=e.y,r=e.r,a=t.x,s=t.y,o=t.r,l=a-n,f=s-i,d=o-r,h=Math.sqrt(l*l+f*f);return{x:(n+a+l/h*d)/2,y:(i+s+f/h*d)/2,r:(h+r+o)/2}}function RI(e,t,n){var i=e.x,r=e.y,a=e.r,s=t.x,o=t.y,l=t.r,f=n.x,d=n.y,h=n.r,p=i-s,y=i-f,v=r-o,b=r-d,S=l-a,_=h-a,w=i*i+r*r-a*a,A=w-s*s-o*o+l*l,C=w-f*f-d*d+h*h,T=y*v-p*b,k=(v*C-b*A)/(T*2)-i,M=(b*S-v*_)/T,R=(y*A-p*C)/(T*2)-r,z=(p*_-y*S)/T,U=M*M+z*z-1,L=2*(a+k*M+R*z),G=k*k+R*R-a*a,j=-(Math.abs(U)>1e-6?(L+Math.sqrt(L*L-4*U*G))/(2*U):G/L);return{x:i+k+M*j,y:r+R+z*j,r:j}}function t8(e,t,n){var i=e.x-t.x,r,a,s=e.y-t.y,o,l,f=i*i+s*s;f?(a=t.r+n.r,a*=a,l=e.r+n.r,l*=l,a>l?(r=(f+l-a)/(2*f),o=Math.sqrt(Math.max(0,l/f-r*r)),n.x=e.x-r*i-o*s,n.y=e.y-r*s+o*i):(r=(f+a-l)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),n.x=t.x+r*i-o*s,n.y=t.y+r*s+o*i)):(n.x=t.x+n.r,n.y=t.y)}function n8(e,t){var n=e.r+t.r-1e-6,i=t.x-e.x,r=t.y-e.y;return n>0&&n*n>i*i+r*r}function i8(e){var t=e._,n=e.next._,i=t.r+n.r,r=(t.x*n.r+n.x*t.r)/i,a=(t.y*n.r+n.y*t.r)/i;return r*r+a*a}function o1(e){this._=e,this.next=null,this.previous=null}function Zce(e,t){if(!(a=(e=Gce(e)).length))return 0;var n,i,r,a,s,o,l,f,d,h,p;if(n=e[0],n.x=0,n.y=0,!(a>1))return n.r;if(i=e[1],n.x=-i.r,i.x=n.r,i.y=0,!(a>2))return n.r+i.r;t8(i,n,r=e[2]),n=new o1(n),i=new o1(i),r=new o1(r),n.next=r.previous=i,i.next=n.previous=r,r.next=i.previous=n;e:for(l=3;l<a;++l){t8(n._,i._,r=e[l]),r=new o1(r),f=i.next,d=n.previous,h=i._.r,p=n._.r;do if(h<=p){if(n8(f._,r._)){i=f,n.next=i,i.previous=n,--l;continue e}h+=f._.r,f=f.next}else{if(n8(d._,r._)){n=d,n.next=i,i.previous=n,--l;continue e}p+=d._.r,d=d.previous}while(f!==d.next);for(r.previous=n,r.next=i,n.next=i.previous=i=r,s=i8(n);(r=r.next)!==i;)(o=i8(r))<s&&(n=r,s=o);i=n.next}for(n=[i._],r=i;(r=r.next)!==i;)n.push(r._);for(r=Xce(n,t),l=0;l<a;++l)n=e[l],n.x-=r.x,n.y-=r.y;return r.r}function Kce(e){return Math.sqrt(e.value)}function Jce(){var e=null,t=1,n=1,i=vl;function r(a){const s=Hce();return a.x=t/2,a.y=n/2,e?a.eachBefore(r8(e)).eachAfter(B_(i,.5,s)).eachBefore(a8(1)):a.eachBefore(r8(Kce)).eachAfter(B_(vl,1,s)).eachAfter(B_(i,a.r/Math.min(t,n),s)).eachBefore(a8(Math.min(t,n)/(2*a.r))),a}return r.radius=function(a){return arguments.length?(e=P1(a),r):e},r.size=function(a){return arguments.length?(t=+a[0],n=+a[1],r):[t,n]},r.padding=function(a){return arguments.length?(i=typeof a=="function"?a:vf(+a),r):i},r}function r8(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function B_(e,t,n){return function(i){if(r=i.children){var r,a,s=r.length,o=e(i)*t||0,l;if(o)for(a=0;a<s;++a)r[a].r+=o;if(l=Zce(r,n),o)for(a=0;a<s;++a)r[a].r-=o;i.r=l+o}}}function a8(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function DI(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function t0(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(i-t)/e.value;++o<l;)s=a[o],s.y0=n,s.y1=r,s.x0=t,s.x1=t+=s.value*f}function efe(){var e=1,t=1,n=0,i=!1;function r(s){var o=s.height+1;return s.x0=s.y0=n,s.x1=e,s.y1=t/o,s.eachBefore(a(t,o)),i&&s.eachBefore(DI),s}function a(s,o){return function(l){l.children&&t0(l,l.x0,s*(l.depth+1)/o,l.x1,s*(l.depth+2)/o);var f=l.x0,d=l.y0,h=l.x1-n,p=l.y1-n;h<f&&(f=h=(f+h)/2),p<d&&(d=p=(d+p)/2),l.x0=f,l.y0=d,l.x1=h,l.y1=p}}return r.round=function(s){return arguments.length?(i=!!s,r):i},r.size=function(s){return arguments.length?(e=+s[0],t=+s[1],r):[e,t]},r.padding=function(s){return arguments.length?(n=+s,r):n},r}var tfe={depth:-1},s8={},U_={};function nfe(e){return e.id}function ife(e){return e.parentId}function o8(){var e=nfe,t=ife,n;function i(r){var a=Array.from(r),s=e,o=t,l,f,d,h,p,y,v,b,S=new Map;if(n!=null){const _=a.map((C,T)=>rfe(n(C,T,r))),w=_.map(u8),A=new Set(_).add("");for(const C of w)A.has(C)||(A.add(C),_.push(C),w.push(u8(C)),a.push(U_));s=(C,T)=>_[T],o=(C,T)=>w[T]}for(d=0,l=a.length;d<l;++d)f=a[d],y=a[d]=new nd(f),(v=s(f,d,r))!=null&&(v+="")&&(b=y.id=v,S.set(b,S.has(b)?s8:y)),(v=o(f,d,r))!=null&&(v+="")&&(y.parent=v);for(d=0;d<l;++d)if(y=a[d],v=y.parent){if(p=S.get(v),!p)throw new Error("missing: "+v);if(p===s8)throw new Error("ambiguous: "+v);p.children?p.children.push(y):p.children=[y],y.parent=p}else{if(h)throw new Error("multiple roots");h=y}if(!h)throw new Error("no root");if(n!=null){for(;h.data===U_&&h.children.length===1;)h=h.children[0],--l;for(let _=a.length-1;_>=0&&(y=a[_],y.data===U_);--_)y.data=null}if(h.parent=tfe,h.eachBefore(function(_){_.depth=_.parent.depth+1,--l}).eachBefore(MI),h.parent=null,l>0)throw new Error("cycle");return h}return i.id=function(r){return arguments.length?(e=P1(r),i):e},i.parentId=function(r){return arguments.length?(t=P1(r),i):t},i.path=function(r){return arguments.length?(n=P1(r),i):n},i}function rfe(e){e=`${e}`;let t=e.length;return JA(e,t-1)&&!JA(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function u8(e){let t=e.length;if(t<2)return"";for(;--t>1&&!JA(e,t););return e.slice(0,t)}function JA(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if((n&1)===0)return!0}return!1}function afe(e,t){return e.parent===t.parent?1:2}function q_(e){var t=e.children;return t?t[0]:e.t}function P_(e){var t=e.children;return t?t[t.length-1]:e.t}function sfe(e,t,n){var i=n/(t.i-e.i);t.c-=i,t.s+=n,e.c+=i,t.z+=n,t.m+=n}function ofe(e){for(var t=0,n=0,i=e.children,r=i.length,a;--r>=0;)a=i[r],a.z+=t,a.m+=t,t+=a.s+(n+=a.c)}function ufe(e,t,n){return e.a.parent===t.parent?e.a:n}function I1(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}I1.prototype=Object.create(nd.prototype);function lfe(e){for(var t=new I1(e,0),n,i=[t],r,a,s,o;n=i.pop();)if(a=n._.children)for(n.children=new Array(o=a.length),s=o-1;s>=0;--s)i.push(r=n.children[s]=new I1(a[s],s)),r.parent=n;return(t.parent=new I1(null,0)).children=[t],t}function cfe(){var e=afe,t=1,n=1,i=null;function r(f){var d=lfe(f);if(d.eachAfter(a),d.parent.m=-d.z,d.eachBefore(s),i)f.eachBefore(l);else{var h=f,p=f,y=f;f.eachBefore(function(w){w.x<h.x&&(h=w),w.x>p.x&&(p=w),w.depth>y.depth&&(y=w)});var v=h===p?1:e(h,p)/2,b=v-h.x,S=t/(p.x+v+b),_=n/(y.depth||1);f.eachBefore(function(w){w.x=(w.x+b)*S,w.y=w.depth*_})}return f}function a(f){var d=f.children,h=f.parent.children,p=f.i?h[f.i-1]:null;if(d){ofe(f);var y=(d[0].z+d[d.length-1].z)/2;p?(f.z=p.z+e(f._,p._),f.m=f.z-y):f.z=y}else p&&(f.z=p.z+e(f._,p._));f.parent.A=o(f,p,f.parent.A||h[0])}function s(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function o(f,d,h){if(d){for(var p=f,y=f,v=d,b=p.parent.children[0],S=p.m,_=y.m,w=v.m,A=b.m,C;v=P_(v),p=q_(p),v&&p;)b=q_(b),y=P_(y),y.a=f,C=v.z+w-p.z-S+e(v._,p._),C>0&&(sfe(ufe(v,f,h),f,C),S+=C,_+=C),w+=v.m,S+=p.m,A+=b.m,_+=y.m;v&&!P_(y)&&(y.t=v,y.m+=w-_),p&&!q_(b)&&(b.t=p,b.m+=S-A,h=f)}return h}function l(f){f.x*=t,f.y=f.depth*n}return r.separation=function(f){return arguments.length?(e=f,r):e},r.size=function(f){return arguments.length?(i=!1,t=+f[0],n=+f[1],r):i?null:[t,n]},r.nodeSize=function(f){return arguments.length?(i=!0,t=+f[0],n=+f[1],r):i?[t,n]:null},r}function Bb(e,t,n,i,r){for(var a=e.children,s,o=-1,l=a.length,f=e.value&&(r-n)/e.value;++o<l;)s=a[o],s.x0=t,s.x1=i,s.y0=n,s.y1=n+=s.value*f}var NI=(1+Math.sqrt(5))/2;function zI(e,t,n,i,r,a){for(var s=[],o=t.children,l,f,d=0,h=0,p=o.length,y,v,b=t.value,S,_,w,A,C,T,k;d<p;){y=r-n,v=a-i;do S=o[h++].value;while(!S&&h<p);for(_=w=S,T=Math.max(v/y,y/v)/(b*e),k=S*S*T,C=Math.max(w/k,k/_);h<p;++h){if(S+=f=o[h].value,f<_&&(_=f),f>w&&(w=f),k=S*S*T,A=Math.max(w/k,k/_),A>C){S-=f;break}C=A}s.push(l={value:S,dice:y<v,children:o.slice(d,h)}),l.dice?t0(l,n,i,r,b?i+=v*S/b:a):Bb(l,n,i,b?n+=y*S/b:r,a),b-=S,d=h}return s}const FI=(function e(t){function n(i,r,a,s,o){zI(t,i,r,a,s,o)}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(NI);function ffe(){var e=FI,t=!1,n=1,i=1,r=[0],a=vl,s=vl,o=vl,l=vl,f=vl;function d(p){return p.x0=p.y0=0,p.x1=n,p.y1=i,p.eachBefore(h),r=[0],t&&p.eachBefore(DI),p}function h(p){var y=r[p.depth],v=p.x0+y,b=p.y0+y,S=p.x1-y,_=p.y1-y;S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),p.x0=v,p.y0=b,p.x1=S,p.y1=_,p.children&&(y=r[p.depth+1]=a(p)/2,v+=f(p)-y,b+=s(p)-y,S-=o(p)-y,_-=l(p)-y,S<v&&(v=S=(v+S)/2),_<b&&(b=_=(b+_)/2),e(p,v,b,S,_))}return d.round=function(p){return arguments.length?(t=!!p,d):t},d.size=function(p){return arguments.length?(n=+p[0],i=+p[1],d):[n,i]},d.tile=function(p){return arguments.length?(e=kI(p),d):e},d.padding=function(p){return arguments.length?d.paddingInner(p).paddingOuter(p):d.paddingInner()},d.paddingInner=function(p){return arguments.length?(a=typeof p=="function"?p:vf(+p),d):a},d.paddingOuter=function(p){return arguments.length?d.paddingTop(p).paddingRight(p).paddingBottom(p).paddingLeft(p):d.paddingTop()},d.paddingTop=function(p){return arguments.length?(s=typeof p=="function"?p:vf(+p),d):s},d.paddingRight=function(p){return arguments.length?(o=typeof p=="function"?p:vf(+p),d):o},d.paddingBottom=function(p){return arguments.length?(l=typeof p=="function"?p:vf(+p),d):l},d.paddingLeft=function(p){return arguments.length?(f=typeof p=="function"?p:vf(+p),d):f},d}function dfe(e,t,n,i,r){var a=e.children,s,o=a.length,l,f=new Array(o+1);for(f[0]=l=s=0;s<o;++s)f[s+1]=l+=a[s].value;d(0,o,e.value,t,n,i,r);function d(h,p,y,v,b,S,_){if(h>=p-1){var w=a[h];w.x0=v,w.y0=b,w.x1=S,w.y1=_;return}for(var A=f[h],C=y/2+A,T=h+1,k=p-1;T<k;){var M=T+k>>>1;f[M]<C?T=M+1:k=M}C-f[T-1]<f[T]-C&&h+1<T&&--T;var R=f[T]-A,z=y-R;if(S-v>_-b){var U=y?(v*z+S*R)/y:S;d(h,T,R,v,b,U,_),d(T,p,z,U,b,S,_)}else{var L=y?(b*z+_*R)/y:_;d(h,T,R,v,b,S,L),d(T,p,z,v,L,S,_)}}}function hfe(e,t,n,i,r){(e.depth&1?Bb:t0)(e,t,n,i,r)}const gfe=(function e(t){function n(i,r,a,s,o){if((l=i._squarify)&&l.ratio===t)for(var l,f,d,h,p=-1,y,v=l.length,b=i.value;++p<v;){for(f=l[p],d=f.children,h=f.value=0,y=d.length;h<y;++h)f.value+=d[h].value;f.dice?t0(f,r,a,s,b?a+=(o-a)*f.value/b:o):Bb(f,r,a,b?r+=(s-r)*f.value/b:s,o),b-=f.value}else i._squarify=l=zI(t,i,r,a,s,o),l.ratio=t}return n.ratio=function(i){return e((i=+i)>1?i:1)},n})(NI);function eC(e,t,n){const i={};return e.each(r=>{const a=r.data;n(a)&&(i[t(a)]=r)}),e.lookup=i,e}function oM(e){J.call(this,null,e)}oM.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const pfe=e=>e.values;ge(oM,J,{transform(e,t){t.source||te("Nest transform requires an upstream data source.");var n=e.generate,i=e.modified(),r=t.clone(),a=this.value;return(!a||i||t.changed())&&(a&&a.each(s=>{s.children&&Kv(s.data)&&r.rem.push(s.data)}),this.value=a=sM({values:ve(e.keys).reduce((s,o)=>(s.key(o),s),mfe()).entries(r.source)},pfe),n&&a.each(s=>{s.children&&(s=lt(s.data),r.add.push(s),r.source.push(s))}),eC(a,Me,Me)),r.source.root=a,r}});function mfe(){const e=[],t={entries:r=>i(n(r,0),0),key:r=>(e.push(r),t)};function n(r,a){if(a>=e.length)return r;const s=r.length,o=e[a++],l={},f={};let d=-1,h,p,y;for(;++d<s;)h=o(p=r[d])+"",(y=l[h])?y.push(p):l[h]=[p];for(h in l)f[h]=n(l[h],a);return f}function i(r,a){if(++a>e.length)return r;const s=[];for(const o in r)s.push({key:o,values:i(r[o],a)});return s}return t}function no(e){J.call(this,null,e)}const yfe=(e,t)=>e.parent===t.parent?1:2;ge(no,J,{transform(e,t){(!t.source||!t.source.root)&&te(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),i=this.fields,r=t.source.root,a=e.as||i;e.field?r.sum(e.field):r.count(),e.sort&&r.sort(rc(e.sort,s=>s.data)),vfe(n,this.params,e),n.separation&&n.separation(e.separation!==!1?yfe:xd);try{this.value=n(r)}catch(s){te(s)}return r.each(s=>bfe(s,i,a)),t.reflow(e.modified()).modifies(a).modifies("leaf")}});function vfe(e,t,n){for(let i,r=0,a=t.length;r<a;++r)i=t[r],i in n&&e[i](n[i])}function bfe(e,t,n){const i=e.data,r=t.length-1;for(let a=0;a<r;++a)i[n[a]]=e[t[a]];i[n[r]]=e.children?e.children.length:0}const tC=["x","y","r","depth","children"];function uM(e){no.call(this,e)}uM.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:tC.length,default:tC}]};ge(uM,no,{layout:Jce,params:["radius","size","padding"],fields:tC});const nC=["x0","y0","x1","y1","depth","children"];function lM(e){no.call(this,e)}lM.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:nC.length,default:nC}]};ge(lM,no,{layout:efe,params:["size","round","padding"],fields:nC});function cM(e){J.call(this,null,e)}cM.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};ge(cM,J,{transform(e,t){t.source||te("Stratify transform requires an upstream data source.");let n=this.value;const i=e.modified(),r=t.fork(t.ALL).materialize(t.SOURCE),a=!n||i||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return r.source=r.source.slice(),a&&(n=r.source.length?eC(o8().id(e.key).parentId(e.parentKey)(r.source),e.key,Or):eC(o8()([{}]),e.key,e.key)),r.source.root=this.value=n,r}});const l8={tidy:cfe,cluster:Ece},iC=["x","y","depth","children"];function fM(e){no.call(this,e)}fM.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:iC.length,default:iC}]};ge(fM,no,{layout(e){const t=e||"tidy";if(Se(l8,t))return l8[t]();te("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:iC});function dM(e){J.call(this,[],e)}dM.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};ge(dM,J,{transform(e,t){const n=this.value,i=t.source&&t.source.root,r=t.fork(t.NO_SOURCE),a={};return i||te("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(r.rem=n,t.visit(t.SOURCE,s=>a[Me(s)]=1),i.each(s=>{const o=s.data,l=s.parent&&s.parent.data;l&&a[Me(o)]&&a[Me(l)]&&r.add.push(lt({source:l,target:o}))}),this.value=r.add):t.changed(t.MOD)&&(t.visit(t.MOD,s=>a[Me(s)]=1),n.forEach(s=>{(a[Me(s.source)]||a[Me(s.target)])&&r.mod.push(s)})),r}});const c8={binary:dfe,dice:t0,slice:Bb,slicedice:hfe,squarify:FI,resquarify:gfe},rC=["x0","y0","x1","y1","depth","children"];function hM(e){no.call(this,e)}hM.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:rC.length,default:rC}]};ge(hM,no,{layout(){const e=ffe();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{Se(c8,t)?e.tile(c8[t]):te("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:rC});const xfe=Object.freeze(Object.defineProperty({__proto__:null,nest:oM,pack:uM,partition:lM,stratify:cM,tree:fM,treelinks:dM,treemap:hM},Symbol.toStringTag,{value:"Module"})),I_=4278190080;function Sfe(e,t){const n=e.bitmap();return(t||[]).forEach(i=>n.set(e(i.boundary[0]),e(i.boundary[3]))),[n,void 0]}function Efe(e,t,n,i,r){const a=e.width,s=e.height,o=i||r,l=au(a,s).getContext("2d"),f=au(a,s).getContext("2d"),d=o&&au(a,s).getContext("2d");n.forEach(R=>j1(l,R,!1)),j1(f,t,!1),o&&j1(d,t,!0);const h=j_(l,a,s),p=j_(f,a,s),y=o&&j_(d,a,s),v=e.bitmap(),b=o&&e.bitmap();let S,_,w,A,C,T,k,M;for(_=0;_<s;++_)for(S=0;S<a;++S)C=_*a+S,T=h[C]&I_,M=p[C]&I_,k=o&&y[C]&I_,(T||k||M)&&(w=e(S),A=e(_),!r&&(T||M)&&v.set(w,A),o&&(T||k)&&b.set(w,A));return[v,b]}function j_(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function j1(e,t,n){if(!t.length)return;const i=t[0].mark.marktype;i==="group"?t.forEach(r=>{r.items.forEach(a=>j1(e,a.items,n))}):lr[i].draw(e,{items:n?t.map(_fe):t})}function _fe(e){const t=Jv(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ts=5,ri=31,gp=32,Io=new Uint32Array(gp+1),Wr=new Uint32Array(gp+1);Wr[0]=0;Io[0]=~Wr[0];for(let e=1;e<=gp;++e)Wr[e]=Wr[e-1]<<1|1,Io[e]=~Wr[e];function wfe(e,t){const n=new Uint32Array(~~((e*t+gp)/gp));function i(a,s){n[a]|=s}function r(a,s){n[a]&=s}return{array:n,get:(a,s)=>{const o=s*e+a;return n[o>>>Ts]&1<<(o&ri)},set:(a,s)=>{const o=s*e+a;i(o>>>Ts,1<<(o&ri))},clear:(a,s)=>{const o=s*e+a;r(o>>>Ts,~(1<<(o&ri)))},getRange:(a,s,o,l)=>{let f=l,d,h,p,y;for(;f>=s;--f)if(d=f*e+a,h=f*e+o,p=d>>>Ts,y=h>>>Ts,p===y){if(n[p]&Io[d&ri]&Wr[(h&ri)+1])return!0}else{if(n[p]&Io[d&ri]||n[y]&Wr[(h&ri)+1])return!0;for(let v=p+1;v<y;++v)if(n[v])return!0}return!1},setRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ts,p=d>>>Ts,h===p)i(h,Io[f&ri]&Wr[(d&ri)+1]);else for(i(h,Io[f&ri]),i(p,Wr[(d&ri)+1]),y=h+1;y<p;++y)i(y,4294967295)},clearRange:(a,s,o,l)=>{let f,d,h,p,y;for(;s<=l;++s)if(f=s*e+a,d=s*e+o,h=f>>>Ts,p=d>>>Ts,h===p)r(h,Wr[f&ri]|Io[(d&ri)+1]);else for(r(h,Wr[f&ri]),r(p,Io[(d&ri)+1]),y=h+1;y<p;++y)r(y,0)},outOfBounds:(a,s,o,l)=>a<0||s<0||l>=t||o>=e}}function Afe(e,t,n){const i=Math.max(1,Math.sqrt(e*t/1e6)),r=~~((e+2*n+i)/i),a=~~((t+2*n+i)/i),s=o=>~~((o+n)/i);return s.invert=o=>o*i-n,s.bitmap=()=>wfe(r,a),s.ratio=i,s.padding=n,s.width=e,s.height=t,s}function Cfe(e,t,n,i){const r=e.width,a=e.height;return function(s){const o=s.datum.datum.items[i].items,l=o.length,f=s.datum.fontSize,d=ir.width(s.datum,s.datum.text);let h=0,p,y,v,b,S,_,w;for(let A=0;A<l;++A)p=o[A].x,v=o[A].y,y=o[A].x2===void 0?p:o[A].x2,b=o[A].y2===void 0?v:o[A].y2,S=(p+y)/2,_=(v+b)/2,w=Math.abs(y-p+b-v),w>=h&&(h=w,s.x=S,s.y=_);return S=d/2,_=f/2,p=s.x-S,y=s.x+S,v=s.y-_,b=s.y+_,s.align="center",p<0&&y<=r?s.align="left":0<=p&&r<y&&(s.align="right"),s.baseline="middle",v<0&&b<=a?s.baseline="top":0<=v&&a<b&&(s.baseline="bottom"),!0}}function lv(e,t,n,i,r,a){let s=n/2;return e-s<0||e+s>r||t-(s=i/2)<0||t+s>a}function Jo(e,t,n,i,r,a,s,o){const l=r*a/(i*2),f=e(t-l),d=e(t+l),h=e(n-(a=a/2)),p=e(n+a);return s.outOfBounds(f,h,d,p)||s.getRange(f,h,d,p)||o&&o.getRange(f,h,d,p)}function $fe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1];function l(f,d,h,p,y){const v=e.invert(f),b=e.invert(d);let S=h,_=a,w;if(!lv(v,b,p,y,r,a)&&!Jo(e,v,b,y,p,S,s,o)&&!Jo(e,v,b,y,p,y,s,null)){for(;_-S>=1;)w=(S+_)/2,Jo(e,v,b,y,p,w,s,o)?_=w:S=w;if(S>h)return[v,b,S,!0]}}return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text);let v=n?p:0,b=!1,S=!1,_=0,w,A,C,T,k,M,R,z,U,L,G,j,q,F,D,P,X;for(let Z=0;Z<h;++Z){for(w=d[Z].x,C=d[Z].y,A=d[Z].x2===void 0?w:d[Z].x2,T=d[Z].y2===void 0?C:d[Z].y2,w>A&&(X=w,w=A,A=X),C>T&&(X=C,C=T,T=X),U=e(w),G=e(A),L=~~((U+G)/2),j=e(C),F=e(T),q=~~((j+F)/2),R=L;R>=U;--R)for(z=q;z>=j;--z)P=l(R,z,v,y,p),P&&([f.x,f.y,v,b]=P);for(R=L;R<=G;++R)for(z=q;z<=F;++z)P=l(R,z,v,y,p),P&&([f.x,f.y,v,b]=P);!b&&!n&&(D=Math.abs(A-w+T-C),k=(w+A)/2,M=(C+T)/2,D>=_&&!lv(k,M,y,p,r,a)&&!Jo(e,k,M,p,y,p,s,null)&&(_=D,f.x=k,f.y=M,S=!0))}return b||S?(k=y/2,M=p/2,s.setRange(e(f.x-k),e(f.y-M),e(f.x+k),e(f.y+M)),f.align="center",f.baseline="middle",!0):!1}}const Tfe=[-1,-1,1,1],Mfe=[-1,1,-1,1];function kfe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=e.bitmap();return function(f){const d=f.datum.datum.items[i].items,h=d.length,p=f.datum.fontSize,y=ir.width(f.datum,f.datum.text),v=[];let b=n?p:0,S=!1,_=!1,w=0,A,C,T,k,M,R,z,U,L,G,j,q;for(let F=0;F<h;++F){for(A=d[F].x,T=d[F].y,C=d[F].x2===void 0?A:d[F].x2,k=d[F].y2===void 0?T:d[F].y2,v.push([e((A+C)/2),e((T+k)/2)]);v.length;)if([z,U]=v.pop(),!(s.get(z,U)||o.get(z,U)||l.get(z,U))){l.set(z,U);for(let D=0;D<4;++D)M=z+Tfe[D],R=U+Mfe[D],l.outOfBounds(M,R,M,R)||v.push([M,R]);if(M=e.invert(z),R=e.invert(U),L=b,G=a,!lv(M,R,y,p,r,a)&&!Jo(e,M,R,p,y,L,s,o)&&!Jo(e,M,R,p,y,p,s,null)){for(;G-L>=1;)j=(L+G)/2,Jo(e,M,R,p,y,j,s,o)?G=j:L=j;L>b&&(f.x=M,f.y=R,b=L,S=!0)}}!S&&!n&&(q=Math.abs(C-A+k-T),M=(A+C)/2,R=(T+k)/2,q>=w&&!lv(M,R,y,p,r,a)&&!Jo(e,M,R,p,y,p,s,null)&&(w=q,f.x=M,f.y=R,_=!0))}return S||_?(M=y/2,R=p/2,s.setRange(e(f.x-M),e(f.y-R),e(f.x+M),e(f.y+R)),f.align="center",f.baseline="middle",!0):!1}}const Ofe=["right","center","left"],Rfe=["bottom","middle","top"];function Dfe(e,t,n,i){const r=e.width,a=e.height,s=t[0],o=t[1],l=i.length;return function(f){const d=f.boundary,h=f.datum.fontSize;if(d[2]<0||d[5]<0||d[0]>r||d[3]>a)return!1;let p=f.textWidth??0,y,v,b,S,_,w,A,C,T,k,M,R,z,U,L;for(let G=0;G<l;++G){if(y=(n[G]&3)-1,v=(n[G]>>>2&3)-1,b=y===0&&v===0||i[G]<0,S=y&&v?Math.SQRT1_2:1,_=i[G]<0?-1:1,w=d[1+y]+i[G]*y*S,M=d[4+v]+_*h*v/2+i[G]*v*S,C=M-h/2,T=M+h/2,R=e(w),U=e(C),L=e(T),!p)if(f8(R,R,U,L,s,o,w,w,C,T,d,b))p=ir.width(f.datum,f.datum.text);else continue;if(k=w+_*p*y/2,w=k-p/2,A=k+p/2,R=e(w),z=e(A),f8(R,z,U,L,s,o,w,A,C,T,d,b))return f.x=y?y*_<0?A:w:k,f.y=v?v*_<0?T:C:M,f.align=Ofe[y*_+1],f.baseline=Rfe[v*_+1],s.setRange(R,U,z,L),!0}return!1}}function f8(e,t,n,i,r,a,s,o,l,f,d,h){return!(r.outOfBounds(e,n,t,i)||(h&&a||r).getRange(e,n,t,i))}const H_=0,G_=4,Y_=8,X_=0,V_=1,W_=2,Nfe={"top-left":H_+X_,top:H_+V_,"top-right":H_+W_,left:G_+X_,middle:G_+V_,right:G_+W_,"bottom-left":Y_+X_,bottom:Y_+V_,"bottom-right":Y_+W_},zfe={naive:Cfe,"reduced-search":$fe,floodfill:kfe};function Ffe(e,t,n,i,r,a,s,o,l,f,d){if(!e.length)return e;const h=Math.max(i.length,r.length),p=Lfe(i,h),y=Bfe(r,h),v=Ufe(e[0].datum),b=v==="group"&&e[0].datum.items[l].marktype,S=b==="area",_=qfe(v,b,o,l),w=f===null||f===1/0,A=S&&d==="naive";let C=-1,T=-1;const k=e.map(U=>{const L=w?ir.width(U,U.text):void 0;return C=Math.max(C,L),T=Math.max(T,U.fontSize),{datum:U,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:_(U),textWidth:L}});f=f===null||f===1/0?Math.max(C,T)+Math.max(...i):f;const M=Afe(t[0],t[1],f);let R;if(!A){n&&k.sort((G,j)=>n(G.datum,j.datum));let U=!1;for(let G=0;G<y.length&&!U;++G)U=y[G]===5||p[G]<0;const L=(v&&s||S)&&e.map(G=>G.datum);R=a.length||L?Efe(M,L||[],a,U,S):Sfe(M,s&&k)}const z=S?zfe[d](M,R,s,l):Dfe(M,R,y,p);return k.forEach(U=>U.opacity=+z(U)),k}function Lfe(e,t){const n=new Float64Array(t),i=e.length;for(let r=0;r<i;++r)n[r]=e[r]||0;for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Bfe(e,t){const n=new Int8Array(t),i=e.length;for(let r=0;r<i;++r)n[r]|=Nfe[e[r]];for(let r=i;r<t;++r)n[r]=n[i-1];return n}function Ufe(e){return e&&e.mark&&e.mark.marktype}function qfe(e,t,n,i){const r=a=>[a.x,a.x,a.x,a.y,a.y,a.y];return e?e==="line"||e==="area"?a=>r(a.datum):t==="line"?a=>{const s=a.datum.items[i].items;return r(s.length?s[n==="start"?0:s.length-1]:{x:NaN,y:NaN})}:a=>{const s=a.datum.bounds;return[s.x1,(s.x1+s.x2)/2,s.x2,s.y1,(s.y1+s.y2)/2,s.y2]}:r}const aC=["x","y","opacity","align","baseline"],LI=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function gM(e){J.call(this,null,e)}gM.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:LI},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:aC.length,default:aC}]};ge(gM,J,{transform(e,t){function n(a){const s=e[a];return Pe(s)&&t.modified(s.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&te("Size parameter should be specified as a [width, height] array.");const r=e.as||aC;return Ffe(t.materialize(t.SOURCE).source||[],e.size,e.sort,ve(e.offset==null?1:e.offset),ve(e.anchor||LI),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(a=>{const s=a.datum;s[r[0]]=a.x,s[r[1]]=a.y,s[r[2]]=a.opacity,s[r[3]]=a.align,s[r[4]]=a.baseline}),t.reflow(i).modifies(r)}});const Pfe=Object.freeze(Object.defineProperty({__proto__:null,label:gM},Symbol.toStringTag,{value:"Module"}));function BI(e,t){var n=[],i=function(d){return d(o)},r,a,s,o,l,f;if(t==null)n.push(e);else for(r={},a=0,s=e.length;a<s;++a)o=e[a],l=t.map(i),f=r[l],f||(r[l]=f=[],f.dims=l,n.push(f)),f.push(o);return n}function pM(e){J.call(this,null,e)}pM.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};ge(pM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=BI(i,e.groupby),a=(e.groupby||[]).map(It),s=a.length,o=e.as||[It(e.x),It(e.y)],l=[];r.forEach(f=>{YL(f,e.x,e.y,e.bandwidth||.3).forEach(d=>{const h={};for(let p=0;p<s;++p)h[a[p]]=f.dims[p];h[o[0]]=d[0],h[o[1]]=d[1],l.push(lt(h))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});const sC={constant:Q$,linear:Z$,log:IL,exp:jL,pow:HL,quad:K$,poly:GL},Ife=(e,t)=>e==="poly"?t:e==="quad"?2:1;function mM(e){J.call(this,null,e)}mM.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(sC)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};ge(mM,J,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const i=t.materialize(t.SOURCE).source,r=BI(i,e.groupby),a=(e.groupby||[]).map(It),s=e.method||"linear",o=e.order==null?3:e.order,l=Ife(s,o),f=e.as||[It(e.x),It(e.y)],d=sC[s],h=[];let p=e.extent;Se(sC,s)||te("Invalid regression method: "+s),p!=null&&s==="log"&&p[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),p=null),r.forEach(y=>{if(y.length<=l){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const b=d(y,e.x,e.y,o);if(e.params){h.push(lt({keys:y.dims,coef:b.coef,rSquared:b.rSquared}));return}const S=p||ja(y,e.x),_=w=>{const A={};for(let C=0;C<a.length;++C)A[a[C]]=y.dims[C];A[f[0]]=w[0],A[f[1]]=w[1],h.push(lt(A))};s==="linear"||s==="constant"?S.forEach(w=>_([w,b.predict(w)])):sb(b.predict,S,25,200).forEach(_)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=h}return n}});const jfe=Object.freeze(Object.defineProperty({__proto__:null,loess:pM,regression:mM},Symbol.toStringTag,{value:"Module"})),js=11102230246251565e-32,Hn=134217729,Hfe=(3+8*js)*js;function Q_(e,t,n,i,r){let a,s,o,l,f=t[0],d=i[0],h=0,p=0;d>f==d>-f?(a=f,f=t[++h]):(a=d,d=i[++p]);let y=0;if(h<e&&p<n)for(d>f==d>-f?(s=f+a,o=a-(s-f),f=t[++h]):(s=d+a,o=a-(s-d),d=i[++p]),a=s,o!==0&&(r[y++]=o);h<e&&p<n;)d>f==d>-f?(s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h]):(s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p]),a=s,o!==0&&(r[y++]=o);for(;h<e;)s=a+f,l=s-a,o=a-(s-l)+(f-l),f=t[++h],a=s,o!==0&&(r[y++]=o);for(;p<n;)s=a+d,l=s-a,o=a-(s-l)+(d-l),d=i[++p],a=s,o!==0&&(r[y++]=o);return(a!==0||y===0)&&(r[y++]=a),y}function Gfe(e,t){let n=t[0];for(let i=1;i<e;i++)n+=t[i];return n}function n0(e){return new Float64Array(e)}const Yfe=(3+16*js)*js,Xfe=(2+12*js)*js,Vfe=(9+64*js)*js*js,df=n0(4),d8=n0(8),h8=n0(12),g8=n0(16),ai=n0(4);function Wfe(e,t,n,i,r,a,s){let o,l,f,d,h,p,y,v,b,S,_,w,A,C,T,k,M,R;const z=e-r,U=n-r,L=t-a,G=i-a;C=z*G,p=Hn*z,y=p-(p-z),v=z-y,p=Hn*G,b=p-(p-G),S=G-b,T=v*S-(C-y*b-v*b-y*S),k=L*U,p=Hn*L,y=p-(p-L),v=L-y,p=Hn*U,b=p-(p-U),S=U-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,df[0]=T-(_+h)+(h-M),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,df[1]=A-(_+h)+(h-k),R=w+_,h=R-w,df[2]=w-(R-h)+(_-h),df[3]=R;let j=Gfe(4,df),q=Xfe*s;if(j>=q||-j>=q||(h=e-z,o=e-(z+h)+(h-r),h=n-U,f=n-(U+h)+(h-r),h=t-L,l=t-(L+h)+(h-a),h=i-G,d=i-(G+h)+(h-a),o===0&&l===0&&f===0&&d===0)||(q=Vfe*s+Hfe*Math.abs(j),j+=z*d+G*o-(L*f+U*l),j>=q||-j>=q))return j;C=o*G,p=Hn*o,y=p-(p-o),v=o-y,p=Hn*G,b=p-(p-G),S=G-b,T=v*S-(C-y*b-v*b-y*S),k=l*U,p=Hn*l,y=p-(p-l),v=l-y,p=Hn*U,b=p-(p-U),S=U-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ai[0]=T-(_+h)+(h-M),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,ai[1]=A-(_+h)+(h-k),R=w+_,h=R-w,ai[2]=w-(R-h)+(_-h),ai[3]=R;const F=Q_(4,df,4,ai,d8);C=z*d,p=Hn*z,y=p-(p-z),v=z-y,p=Hn*d,b=p-(p-d),S=d-b,T=v*S-(C-y*b-v*b-y*S),k=L*f,p=Hn*L,y=p-(p-L),v=L-y,p=Hn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ai[0]=T-(_+h)+(h-M),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,ai[1]=A-(_+h)+(h-k),R=w+_,h=R-w,ai[2]=w-(R-h)+(_-h),ai[3]=R;const D=Q_(F,d8,4,ai,h8);C=o*d,p=Hn*o,y=p-(p-o),v=o-y,p=Hn*d,b=p-(p-d),S=d-b,T=v*S-(C-y*b-v*b-y*S),k=l*f,p=Hn*l,y=p-(p-l),v=l-y,p=Hn*f,b=p-(p-f),S=f-b,M=v*S-(k-y*b-v*b-y*S),_=T-M,h=T-_,ai[0]=T-(_+h)+(h-M),w=C+_,h=w-C,A=C-(w-h)+(_-h),_=A-k,h=A-_,ai[1]=A-(_+h)+(h-k),R=w+_,h=R-w,ai[2]=w-(R-h)+(_-h),ai[3]=R;const P=Q_(D,h8,4,ai,g8);return g8[P-1]}function u1(e,t,n,i,r,a){const s=(t-a)*(n-r),o=(e-r)*(i-a),l=s-o,f=Math.abs(s+o);return Math.abs(l)>=Yfe*f?l:-Wfe(e,t,n,i,r,a,f)}const p8=Math.pow(2,-52),l1=new Uint32Array(512);class cv{static from(t,n=ede,i=tde){const r=t.length,a=new Float64Array(r*2);for(let s=0;s<r;s++){const o=t[s];a[2*s]=n(o),a[2*s+1]=i(o)}return new cv(a)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const i=Math.max(2*n-5,0);this._triangles=new Uint32Array(i*3),this._halfedges=new Int32Array(i*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:i,_hullTri:r,_hullHash:a}=this,s=t.length>>1;let o=1/0,l=1/0,f=-1/0,d=-1/0;for(let z=0;z<s;z++){const U=t[2*z],L=t[2*z+1];U<o&&(o=U),L<l&&(l=L),U>f&&(f=U),L>d&&(d=L),this._ids[z]=z}const h=(o+f)/2,p=(l+d)/2;let y,v,b;for(let z=0,U=1/0;z<s;z++){const L=Z_(h,p,t[2*z],t[2*z+1]);L<U&&(y=z,U=L)}const S=t[2*y],_=t[2*y+1];for(let z=0,U=1/0;z<s;z++){if(z===y)continue;const L=Z_(S,_,t[2*z],t[2*z+1]);L<U&&L>0&&(v=z,U=L)}let w=t[2*v],A=t[2*v+1],C=1/0;for(let z=0;z<s;z++){if(z===y||z===v)continue;const U=Kfe(S,_,w,A,t[2*z],t[2*z+1]);U<C&&(b=z,C=U)}let T=t[2*b],k=t[2*b+1];if(C===1/0){for(let L=0;L<s;L++)this._dists[L]=t[2*L]-t[0]||t[2*L+1]-t[1];Cf(this._ids,this._dists,0,s-1);const z=new Uint32Array(s);let U=0;for(let L=0,G=-1/0;L<s;L++){const j=this._ids[L],q=this._dists[j];q>G&&(z[U++]=j,G=q)}this.hull=z.subarray(0,U),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(u1(S,_,w,A,T,k)<0){const z=v,U=w,L=A;v=b,w=T,A=k,b=z,T=U,k=L}const M=Jfe(S,_,w,A,T,k);this._cx=M.x,this._cy=M.y;for(let z=0;z<s;z++)this._dists[z]=Z_(t[2*z],t[2*z+1],M.x,M.y);Cf(this._ids,this._dists,0,s-1),this._hullStart=y;let R=3;i[y]=n[b]=v,i[v]=n[y]=b,i[b]=n[v]=y,r[y]=0,r[v]=1,r[b]=2,a.fill(-1),a[this._hashKey(S,_)]=y,a[this._hashKey(w,A)]=v,a[this._hashKey(T,k)]=b,this.trianglesLen=0,this._addTriangle(y,v,b,-1,-1,-1);for(let z=0,U,L;z<this._ids.length;z++){const G=this._ids[z],j=t[2*G],q=t[2*G+1];if(z>0&&Math.abs(j-U)<=p8&&Math.abs(q-L)<=p8||(U=j,L=q,G===y||G===v||G===b))continue;let F=0;for(let N=0,W=this._hashKey(j,q);N<this._hashSize&&(F=a[(W+N)%this._hashSize],!(F!==-1&&F!==i[F]));N++);F=n[F];let D=F,P;for(;P=i[D],u1(j,q,t[2*D],t[2*D+1],t[2*P],t[2*P+1])>=0;)if(D=P,D===F){D=-1;break}if(D===-1)continue;let X=this._addTriangle(D,G,i[D],-1,-1,r[D]);r[G]=this._legalize(X+2),r[D]=X,R++;let Z=i[D];for(;P=i[Z],u1(j,q,t[2*Z],t[2*Z+1],t[2*P],t[2*P+1])<0;)X=this._addTriangle(Z,G,P,r[G],-1,r[Z]),r[G]=this._legalize(X+2),i[Z]=Z,R--,Z=P;if(D===F)for(;P=n[D],u1(j,q,t[2*P],t[2*P+1],t[2*D],t[2*D+1])<0;)X=this._addTriangle(P,G,D,-1,r[D],r[P]),this._legalize(X+2),r[P]=X,i[D]=D,R--,D=P;this._hullStart=n[G]=D,i[D]=n[Z]=G,i[G]=Z,a[this._hashKey(j,q)]=G,a[this._hashKey(t[2*D],t[2*D+1])]=D}this.hull=new Uint32Array(R);for(let z=0,U=this._hullStart;z<R;z++)this.hull[z]=U,U=i[U];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Qfe(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:i,coords:r}=this;let a=0,s=0;for(;;){const o=i[t],l=t-t%3;if(s=l+(t+2)%3,o===-1){if(a===0)break;t=l1[--a];continue}const f=o-o%3,d=l+(t+1)%3,h=f+(o+2)%3,p=n[s],y=n[t],v=n[d],b=n[h];if(Zfe(r[2*p],r[2*p+1],r[2*y],r[2*y+1],r[2*v],r[2*v+1],r[2*b],r[2*b+1])){n[t]=b,n[o]=p;const _=i[h];if(_===-1){let A=this._hullStart;do{if(this._hullTri[A]===h){this._hullTri[A]=t;break}A=this._hullPrev[A]}while(A!==this._hullStart)}this._link(t,_),this._link(o,i[s]),this._link(s,h);const w=f+(o+1)%3;a<l1.length&&(l1[a++]=w)}else{if(a===0)break;t=l1[--a]}}return s}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,i,r,a,s){const o=this.trianglesLen;return this._triangles[o]=t,this._triangles[o+1]=n,this._triangles[o+2]=i,this._link(o,r),this._link(o+1,a),this._link(o+2,s),this.trianglesLen+=3,o}}function Qfe(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function Z_(e,t,n,i){const r=e-n,a=t-i;return r*r+a*a}function Zfe(e,t,n,i,r,a,s,o){const l=e-s,f=t-o,d=n-s,h=i-o,p=r-s,y=a-o,v=l*l+f*f,b=d*d+h*h,S=p*p+y*y;return l*(h*S-b*y)-f*(d*S-b*p)+v*(d*y-h*p)<0}function Kfe(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=(f*d-o*h)*p,v=(s*h-l*d)*p;return y*y+v*v}function Jfe(e,t,n,i,r,a){const s=n-e,o=i-t,l=r-e,f=a-t,d=s*s+o*o,h=l*l+f*f,p=.5/(s*f-o*l),y=e+(f*d-o*h)*p,v=t+(s*h-l*d)*p;return{x:y,y:v}}function Cf(e,t,n,i){if(i-n<=20)for(let r=n+1;r<=i;r++){const a=e[r],s=t[a];let o=r-1;for(;o>=n&&t[e[o]]>s;)e[o+1]=e[o--];e[o+1]=a}else{const r=n+i>>1;let a=n+1,s=i;ig(e,r,a),t[e[n]]>t[e[i]]&&ig(e,n,i),t[e[a]]>t[e[i]]&&ig(e,a,i),t[e[n]]>t[e[a]]&&ig(e,n,a);const o=e[a],l=t[o];for(;;){do a++;while(t[e[a]]<l);do s--;while(t[e[s]]>l);if(s<a)break;ig(e,a,s)}e[n+1]=e[s],e[s]=o,i-a+1>=s-n?(Cf(e,t,a,i),Cf(e,t,n,s-1)):(Cf(e,t,n,s-1),Cf(e,t,a,i))}}function ig(e,t,n){const i=e[t];e[t]=e[n],e[n]=i}function ede(e){return e[0]}function tde(e){return e[1]}const m8=1e-6;class El{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,i){t=+t,n=+n,i=+i;const r=t+i,a=n;if(i<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${a}`:(Math.abs(this._x1-r)>m8||Math.abs(this._y1-a)>m8)&&(this._+="L"+r+","+a),i&&(this._+=`A${i},${i},0,1,1,${t-i},${n}A${i},${i},0,1,1,${this._x1=r},${this._y1=a}`)}rect(t,n,i,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+i}v${+r}h${-i}Z`}value(){return this._||null}}class oC{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let nde=class{constructor(t,[n,i,r,a]=[0,0,960,500]){if(!((r=+r)>=(n=+n))||!((a=+a)>=(i=+i)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=r,this.xmin=n,this.ymax=a,this.ymin=i,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:i},vectors:r}=this;let a,s;const o=this.circumcenters=this._circumcenters.subarray(0,i.length/3*2);for(let b=0,S=0,_=i.length,w,A;b<_;b+=3,S+=2){const C=i[b]*2,T=i[b+1]*2,k=i[b+2]*2,M=t[C],R=t[C+1],z=t[T],U=t[T+1],L=t[k],G=t[k+1],j=z-M,q=U-R,F=L-M,D=G-R,P=(j*D-q*F)*2;if(Math.abs(P)<1e-9){if(a===void 0){a=s=0;for(const Z of n)a+=t[Z*2],s+=t[Z*2+1];a/=n.length,s/=n.length}const X=1e9*Math.sign((a-M)*D-(s-R)*F);w=(M+L)/2-X*D,A=(R+G)/2+X*F}else{const X=1/P,Z=j*j+q*q,N=F*F+D*D;w=M+(D*Z-q*N)*X,A=R+(j*N-F*Z)*X}o[S]=w,o[S+1]=A}let l=n[n.length-1],f,d=l*4,h,p=t[2*l],y,v=t[2*l+1];r.fill(0);for(let b=0;b<n.length;++b)l=n[b],f=d,h=p,y=v,d=l*4,p=t[2*l],v=t[2*l+1],r[f+2]=r[d]=y-v,r[f+3]=r[d+1]=p-h}render(t){const n=t==null?t=new El:void 0,{delaunay:{halfedges:i,inedges:r,hull:a},circumcenters:s,vectors:o}=this;if(a.length<=1)return null;for(let d=0,h=i.length;d<h;++d){const p=i[d];if(p<d)continue;const y=Math.floor(d/3)*2,v=Math.floor(p/3)*2,b=s[y],S=s[y+1],_=s[v],w=s[v+1];this._renderSegment(b,S,_,w,t)}let l,f=a[a.length-1];for(let d=0;d<a.length;++d){l=f,f=a[d];const h=Math.floor(r[f]/3)*2,p=s[h],y=s[h+1],v=l*4,b=this._project(p,y,o[v+2],o[v+3]);b&&this._renderSegment(p,y,b[0],b[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new El:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const i=n==null?n=new El:void 0,r=this._clip(t);if(r===null||!r.length)return;n.moveTo(r[0],r[1]);let a=r.length;for(;r[0]===r[a-2]&&r[1]===r[a-1]&&a>1;)a-=2;for(let s=2;s<a;s+=2)(r[s]!==r[s-2]||r[s+1]!==r[s-1])&&n.lineTo(r[s],r[s+1]);return n.closePath(),i&&i.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,i=t.length/2;n<i;++n){const r=this.cellPolygon(n);r&&(r.index=n,yield r)}}cellPolygon(t){const n=new oC;return this.renderCell(t,n),n.value()}_renderSegment(t,n,i,r,a){let s;const o=this._regioncode(t,n),l=this._regioncode(i,r);o===0&&l===0?(a.moveTo(t,n),a.lineTo(i,r)):(s=this._clipSegment(t,n,i,r,o,l))&&(a.moveTo(s[0],s[1]),a.lineTo(s[2],s[3]))}contains(t,n,i){return n=+n,n!==n||(i=+i,i!==i)?!1:this.delaunay._step(t,n,i)===t}*neighbors(t){const n=this._clip(t);if(n)for(const i of this.delaunay.neighbors(t)){const r=this._clip(i);if(r){e:for(let a=0,s=n.length;a<s;a+=2)for(let o=0,l=r.length;o<l;o+=2)if(n[a]===r[o]&&n[a+1]===r[o+1]&&n[(a+2)%s]===r[(o+l-2)%l]&&n[(a+3)%s]===r[(o+l-1)%l]){yield i;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:i,halfedges:r,triangles:a}}=this,s=i[t];if(s===-1)return null;const o=[];let l=s;do{const f=Math.floor(l/3);if(o.push(n[f*2],n[f*2+1]),l=l%3===2?l-2:l+1,a[l]!==t)break;l=r[l]}while(l!==s&&l!==-1);return o}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:i}=this,r=t*4;return this._simplify(i[r]||i[r+1]?this._clipInfinite(t,n,i[r],i[r+1],i[r+2],i[r+3]):this._clipFinite(t,n))}_clipFinite(t,n){const i=n.length;let r=null,a,s,o=n[i-2],l=n[i-1],f,d=this._regioncode(o,l),h,p=0;for(let y=0;y<i;y+=2)if(a=o,s=l,o=n[y],l=n[y+1],f=d,d=this._regioncode(o,l),f===0&&d===0)h=p,p=0,r?r.push(o,l):r=[o,l];else{let v,b,S,_,w;if(f===0){if((v=this._clipSegment(a,s,o,l,f,d))===null)continue;[b,S,_,w]=v}else{if((v=this._clipSegment(o,l,a,s,d,f))===null)continue;[_,w,b,S]=v,h=p,p=this._edgecode(b,S),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(b,S):r=[b,S]}h=p,p=this._edgecode(_,w),h&&p&&this._edge(t,h,p,r,r.length),r?r.push(_,w):r=[_,w]}if(r)h=p,p=this._edgecode(r[0],r[1]),h&&p&&this._edge(t,h,p,r,r.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(t,n,i,r,a,s){const o=a<s;for(o&&([t,n,i,r,a,s]=[i,r,t,n,s,a]);;){if(a===0&&s===0)return o?[i,r,t,n]:[t,n,i,r];if(a&s)return null;let l,f,d=a||s;d&8?(l=t+(i-t)*(this.ymax-n)/(r-n),f=this.ymax):d&4?(l=t+(i-t)*(this.ymin-n)/(r-n),f=this.ymin):d&2?(f=n+(r-n)*(this.xmax-t)/(i-t),l=this.xmax):(f=n+(r-n)*(this.xmin-t)/(i-t),l=this.xmin),a?(t=l,n=f,a=this._regioncode(t,n)):(i=l,r=f,s=this._regioncode(i,r))}}_clipInfinite(t,n,i,r,a,s){let o=Array.from(n),l;if((l=this._project(o[0],o[1],i,r))&&o.unshift(l[0],l[1]),(l=this._project(o[o.length-2],o[o.length-1],a,s))&&o.push(l[0],l[1]),o=this._clipFinite(t,o))for(let f=0,d=o.length,h,p=this._edgecode(o[d-2],o[d-1]);f<d;f+=2)h=p,p=this._edgecode(o[f],o[f+1]),h&&p&&(f=this._edge(t,h,p,o,f),d=o.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(o=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return o}_edge(t,n,i,r,a){for(;n!==i;){let s,o;switch(n){case 5:n=4;continue;case 4:n=6,s=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,s=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,s=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,s=this.xmin,o=this.ymin;break}(r[a]!==s||r[a+1]!==o)&&this.contains(t,s,o)&&(r.splice(a,0,s,o),a+=2)}return a}_project(t,n,i,r){let a=1/0,s,o,l;if(r<0){if(n<=this.ymin)return null;(s=(this.ymin-n)/r)<a&&(l=this.ymin,o=t+(a=s)*i)}else if(r>0){if(n>=this.ymax)return null;(s=(this.ymax-n)/r)<a&&(l=this.ymax,o=t+(a=s)*i)}if(i>0){if(t>=this.xmax)return null;(s=(this.xmax-t)/i)<a&&(o=this.xmax,l=n+(a=s)*r)}else if(i<0){if(t<=this.xmin)return null;(s=(this.xmin-t)/i)<a&&(o=this.xmin,l=n+(a=s)*r)}return[o,l]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const i=(n+2)%t.length,r=(n+4)%t.length;(t[n]===t[i]&&t[i]===t[r]||t[n+1]===t[i+1]&&t[i+1]===t[r+1])&&(t.splice(i,2),n-=2)}t.length||(t=null)}return t}};const ide=2*Math.PI,hf=Math.pow;function rde(e){return e[0]}function ade(e){return e[1]}function sde(e){const{triangles:t,coords:n}=e;for(let i=0;i<t.length;i+=3){const r=2*t[i],a=2*t[i+1],s=2*t[i+2];if((n[s]-n[r])*(n[a+1]-n[r+1])-(n[a]-n[r])*(n[s+1]-n[r+1])>1e-10)return!1}return!0}function ode(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class yM{static from(t,n=rde,i=ade,r){return new yM("length"in t?ude(t,n,i,r):Float64Array.from(lde(t,n,i,r)))}constructor(t){this._delaunator=new cv(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&sde(t)){this.collinear=Int32Array.from({length:n.length/2},(p,y)=>y).sort((p,y)=>n[2*p]-n[2*y]||n[2*p+1]-n[2*y+1]);const l=this.collinear[0],f=this.collinear[this.collinear.length-1],d=[n[2*l],n[2*l+1],n[2*f],n[2*f+1]],h=1e-8*Math.hypot(d[3]-d[1],d[2]-d[0]);for(let p=0,y=n.length/2;p<y;++p){const v=ode(n[2*p],n[2*p+1],h);n[2*p]=v[0],n[2*p+1]=v[1]}this._delaunator=new cv(n)}else delete this.collinear;const i=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,a=this.triangles=this._delaunator.triangles,s=this.inedges.fill(-1),o=this._hullIndex.fill(-1);for(let l=0,f=i.length;l<f;++l){const d=a[l%3===2?l-2:l+1];(i[l]===-1||s[d]===-1)&&(s[d]=l)}for(let l=0,f=r.length;l<f;++l)o[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],s[r[0]]=1,r.length===2&&(s[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(t){return new nde(this,t)}*neighbors(t){const{inedges:n,hull:i,_hullIndex:r,halfedges:a,triangles:s,collinear:o}=this;if(o){const h=o.indexOf(t);h>0&&(yield o[h-1]),h<o.length-1&&(yield o[h+1]);return}const l=n[t];if(l===-1)return;let f=l,d=-1;do{if(yield d=s[f],f=f%3===2?f-2:f+1,s[f]!==t)return;if(f=a[f],f===-1){const h=i[(r[t]+1)%i.length];h!==d&&(yield h);return}}while(f!==l)}find(t,n,i=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const r=i;let a;for(;(a=this._step(i,t,n))>=0&&a!==i&&a!==r;)i=a;return a}_step(t,n,i){const{inedges:r,hull:a,_hullIndex:s,halfedges:o,triangles:l,points:f}=this;if(r[t]===-1||!f.length)return(t+1)%(f.length>>1);let d=t,h=hf(n-f[t*2],2)+hf(i-f[t*2+1],2);const p=r[t];let y=p;do{let v=l[y];const b=hf(n-f[v*2],2)+hf(i-f[v*2+1],2);if(b<h&&(h=b,d=v),y=y%3===2?y-2:y+1,l[y]!==t)break;if(y=o[y],y===-1){if(y=a[(s[t]+1)%a.length],y!==v&&hf(n-f[y*2],2)+hf(i-f[y*2+1],2)<h)return y;break}}while(y!==p);return d}render(t){const n=t==null?t=new El:void 0,{points:i,halfedges:r,triangles:a}=this;for(let s=0,o=r.length;s<o;++s){const l=r[s];if(l<s)continue;const f=a[s]*2,d=a[l]*2;t.moveTo(i[f],i[f+1]),t.lineTo(i[d],i[d+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const i=t==null?t=new El:void 0,{points:r}=this;for(let a=0,s=r.length;a<s;a+=2){const o=r[a],l=r[a+1];t.moveTo(o+n,l),t.arc(o,l,n,0,ide)}return i&&i.value()}renderHull(t){const n=t==null?t=new El:void 0,{hull:i,points:r}=this,a=i[0]*2,s=i.length;t.moveTo(r[a],r[a+1]);for(let o=1;o<s;++o){const l=2*i[o];t.lineTo(r[l],r[l+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new oC;return this.renderHull(t),t.value()}renderTriangle(t,n){const i=n==null?n=new El:void 0,{points:r,triangles:a}=this,s=a[t*=3]*2,o=a[t+1]*2,l=a[t+2]*2;return n.moveTo(r[s],r[s+1]),n.lineTo(r[o],r[o+1]),n.lineTo(r[l],r[l+1]),n.closePath(),i&&i.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,i=t.length/3;n<i;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new oC;return this.renderTriangle(t,n),n.value()}}function ude(e,t,n,i){const r=e.length,a=new Float64Array(r*2);for(let s=0;s<r;++s){const o=e[s];a[s*2]=t.call(i,o,s,e),a[s*2+1]=n.call(i,o,s,e)}return a}function*lde(e,t,n,i){let r=0;for(const a of e)yield t.call(i,a,r,e),yield n.call(i,a,r,e),++r}function vM(e){J.call(this,null,e)}vM.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const cde=[-1e5,-1e5,1e5,1e5];ge(vM,J,{transform(e,t){const n=e.as||"path",i=t.source;if(!i||!i.length)return t;let r=e.size;r=r?[0,0,r[0],r[1]]:(r=e.extent)?[r[0][0],r[0][1],r[1][0],r[1][1]]:cde;const a=this.value=yM.from(i,e.x,e.y).voronoi(r);for(let s=0,o=i.length;s<o;++s){const l=a.cellPolygon(s);i[s][n]=l&&!dde(l)?fde(l):null}return t.reflow(e.modified()).modifies(n)}});function fde(e){const t=e[0][0],n=e[0][1];let i=e.length-1;for(;e[i][0]===t&&e[i][1]===n;--i);return"M"+e.slice(0,i+1).join("L")+"Z"}function dde(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const hde=Object.freeze(Object.defineProperty({__proto__:null,voronoi:vM},Symbol.toStringTag,{value:"Module"}));var K_=Math.PI/180,Dg=64,H1=2048;function gde(){var e=[256,256],t,n,i,r,a,s,o,l=UI,f=[],d=Math.random,h={};h.layout=function(){for(var v=p(au()),b=xde((e[0]>>5)*e[1]),S=null,_=f.length,w=-1,A=[],C=f.map(k=>({text:t(k),font:n(k),style:r(k),weight:a(k),rotate:s(k),size:~~(i(k)+1e-14),padding:o(k),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:k})).sort((k,M)=>M.size-k.size);++w<_;){var T=C[w];T.x=e[0]*(d()+.5)>>1,T.y=e[1]*(d()+.5)>>1,pde(v,T,C,w),T.hasText&&y(b,T,S)&&(A.push(T),S?yde(S,T):S=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=e[0]>>1,T.y-=e[1]>>1)}return A};function p(v){v.width=v.height=1;var b=Math.sqrt(v.getContext("2d").getImageData(0,0,1,1).data.length>>2);v.width=(Dg<<5)/b,v.height=H1/b;var S=v.getContext("2d");return S.fillStyle=S.strokeStyle="red",S.textAlign="center",{context:S,ratio:b}}function y(v,b,S){for(var _=b.x,w=b.y,A=Math.hypot(e[0],e[1]),C=l(e),T=d()<.5?1:-1,k=-T,M,R,z;(M=C(k+=T))&&(R=~~M[0],z=~~M[1],!(Math.min(Math.abs(R),Math.abs(z))>=A));)if(b.x=_+R,b.y=w+z,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>e[0]||b.y+b.y1>e[1])&&(!S||!mde(b,v,e[0]))&&(!S||vde(b,S))){for(var U=b.sprite,L=b.width>>5,G=e[0]>>5,j=b.x-(L<<4),q=j&127,F=32-q,D=b.y1-b.y0,P=(b.y+b.y0)*G+(j>>5),X,Z=0;Z<D;Z++){X=0;for(var N=0;N<=L;N++)v[P+N]|=X<<F|(N<L?(X=U[Z*L+N])>>>q:0);P+=G}return b.sprite=null,!0}return!1}return h.words=function(v){return arguments.length?(f=v,h):f},h.size=function(v){return arguments.length?(e=[+v[0],+v[1]],h):e},h.font=function(v){return arguments.length?(n=nl(v),h):n},h.fontStyle=function(v){return arguments.length?(r=nl(v),h):r},h.fontWeight=function(v){return arguments.length?(a=nl(v),h):a},h.rotate=function(v){return arguments.length?(s=nl(v),h):s},h.text=function(v){return arguments.length?(t=nl(v),h):t},h.spiral=function(v){return arguments.length?(l=Sde[v]||v,h):l},h.fontSize=function(v){return arguments.length?(i=nl(v),h):i},h.padding=function(v){return arguments.length?(o=nl(v),h):o},h.random=function(v){return arguments.length?(d=v,h):d},h}function pde(e,t,n,i){if(!t.sprite){var r=e.context,a=e.ratio;r.clearRect(0,0,(Dg<<5)/a,H1/a);var s=0,o=0,l=0,f=n.length,d,h,p,y,v;for(--i;++i<f;){if(t=n[i],r.save(),r.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font,d=r.measureText(t.text+"m").width*a,p=t.size<<1,t.rotate){var b=Math.sin(t.rotate*K_),S=Math.cos(t.rotate*K_),_=d*S,w=d*b,A=p*S,C=p*b;d=Math.max(Math.abs(_+C),Math.abs(_-C))+31>>5<<5,p=~~Math.max(Math.abs(w+A),Math.abs(w-A))}else d=d+31>>5<<5;if(p>l&&(l=p),s+d>=Dg<<5&&(s=0,o+=l,l=0),o+p>=H1)break;r.translate((s+(d>>1))/a,(o+(p>>1))/a),t.rotate&&r.rotate(t.rotate*K_),r.fillText(t.text,0,0),t.padding&&(r.lineWidth=2*t.padding,r.strokeText(t.text,0,0)),r.restore(),t.width=d,t.height=p,t.xoff=s,t.yoff=o,t.x1=d>>1,t.y1=p>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,s+=d}for(var T=r.getImageData(0,0,(Dg<<5)/a,H1/a).data,k=[];--i>=0;)if(t=n[i],!!t.hasText){for(d=t.width,h=d>>5,p=t.y1-t.y0,y=0;y<p*h;y++)k[y]=0;if(s=t.xoff,s==null)return;o=t.yoff;var M=0,R=-1;for(v=0;v<p;v++){for(y=0;y<d;y++){var z=h*v+(y>>5),U=T[(o+v)*(Dg<<5)+(s+y)<<2]?1<<31-y%32:0;k[z]|=U,M|=U}M?R=v:(t.y0++,p--,v--,o++)}t.y1=t.y0+R,t.sprite=k.slice(0,(t.y1-t.y0)*h)}}}function mde(e,t,n){n>>=5;for(var i=e.sprite,r=e.width>>5,a=e.x-(r<<4),s=a&127,o=32-s,l=e.y1-e.y0,f=(e.y+e.y0)*n+(a>>5),d,h=0;h<l;h++){d=0;for(var p=0;p<=r;p++)if((d<<o|(p<r?(d=i[h*r+p])>>>s:0))&t[f+p])return!0;f+=n}return!1}function yde(e,t){var n=e[0],i=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>i.x&&(i.x=t.x+t.x1),t.y+t.y1>i.y&&(i.y=t.y+t.y1)}function vde(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function UI(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function bde(e){var t=4,n=t*e[0]/e[1],i=0,r=0;return function(a){var s=a<0?-1:1;switch(Math.sqrt(1+4*s*a)-s&3){case 0:i+=n;break;case 1:r+=t;break;case 2:i-=n;break;default:r-=t;break}return[i,r]}}function xde(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function nl(e){return typeof e=="function"?e:function(){return e}}var Sde={archimedean:UI,rectangular:bde};const qI=["x","y","font","fontSize","fontStyle","fontWeight","angle"],Ede=["text","font","rotate","fontSize","fontStyle","fontWeight"];function bM(e){J.call(this,gde(),e)}bM.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:qI}]};ge(bM,J,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&te("Wordcloud size dimensions must be non-zero.");function n(v){const b=e[v];return Pe(b)&&t.modified(b.fields)}const i=e.modified();if(!(i||t.changed(t.ADD_REM)||Ede.some(n)))return;const r=t.materialize(t.SOURCE).source,a=this.value,s=e.as||qI;let o=e.fontSize||14,l;if(Pe(o)?l=e.fontSizeRange:o=ni(o),l){const v=o,b=ot("sqrt")().domain(ja(r,v)).range(l);o=S=>b(v(S))}r.forEach(v=>{v[s[0]]=NaN,v[s[1]]=NaN,v[s[3]]=0});const f=a.words(r).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(o).random(Dr).layout(),d=a.size(),h=d[0]>>1,p=d[1]>>1,y=f.length;for(let v=0,b,S;v<y;++v)b=f[v],S=b.datum,S[s[0]]=b.x+h,S[s[1]]=b.y+p,S[s[2]]=b.font,S[s[3]]=b.size,S[s[4]]=b.style,S[s[5]]=b.weight,S[s[6]]=b.rotate;return t.reflow(i).modifies(s)}});const _de=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:bM},Symbol.toStringTag,{value:"Module"})),wde=e=>new Uint8Array(e),Ade=e=>new Uint16Array(e),Yg=e=>new Uint32Array(e);function Cde(){let e=8,t=[],n=Yg(0),i=c1(0,e),r=c1(0,e);return{data:()=>t,seen:()=>n=$de(n,t.length),add(a){for(let s=0,o=t.length,l=a.length,f;s<l;++s)f=a[s],f._index=o++,t.push(f)},remove(a,s){const o=t.length,l=Array(o-a),f=t;let d,h,p;for(h=0;!s[h]&&h<o;++h)l[h]=t[h],f[h]=h;for(p=h;h<o;++h)d=t[h],s[h]?f[h]=-1:(f[h]=p,i[p]=i[h],r[p]=r[h],l[p]=d,d._index=p++),i[h]=0;return t=l,f},size:()=>t.length,curr:()=>i,prev:()=>r,reset:a=>r[a]=i[a],all:()=>e<257?255:e<65537?65535:4294967295,set(a,s){i[a]|=s},clear(a,s){i[a]&=~s},resize(a,s){const o=i.length;(a>o||s>e)&&(e=Math.max(s,e),i=c1(a,e,i),r=c1(a,e))}}}function $de(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function c1(e,t,n){const i=(t<257?wde:t<65537?Ade:Yg)(e);return n&&i.set(n),i}function y8(e,t,n){const i=1<<t;return{one:i,zero:~i,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(r,a){const s=this,o=s.bisect(s.range,r.value),l=r.index,f=o[0],d=o[1],h=l.length;let p;for(p=0;p<f;++p)a[l[p]]|=i;for(p=d;p<h;++p)a[l[p]]|=i;return s}}}function v8(){let e=Yg(0),t=[],n=0;function i(o,l,f){if(!l.length)return[];const d=n,h=l.length,p=Yg(h);let y=Array(h),v,b,S;for(S=0;S<h;++S)y[S]=o(l[S]),p[S]=S;if(y=Tde(y,p),d)v=t,b=e,t=Array(d+h),e=Yg(d+h),Mde(f,v,b,d,y,p,h,t,e);else{if(f>0)for(S=0;S<h;++S)p[S]+=f;t=y,e=p}return n=d+h,{index:p,value:y}}function r(o,l){const f=n;let d,h,p;for(h=0;!l[e[h]]&&h<f;++h);for(p=h;h<f;++h)l[d=e[h]]||(e[p]=d,t[p]=t[h],++p);n=f-o}function a(o){for(let l=0,f=n;l<f;++l)e[l]=o[e[l]]}function s(o,l){let f;return l?f=l.length:(l=t,f=n),[DZ(l,o[0],0,f),uu(l,o[1],0,f)]}return{insert:i,remove:r,bisect:s,reindex:a,index:()=>e,size:()=>n}}function Tde(e,t){return e.sort.call(t,(n,i)=>{const r=e[n],a=e[i];return r<a?-1:r>a?1:0}),FZ(e,t)}function Mde(e,t,n,i,r,a,s,o,l){let f=0,d=0,h;for(h=0;f<i&&d<s;++h)t[f]<r[d]?(o[h]=t[f],l[h]=n[f++]):(o[h]=r[d],l[h]=a[d++]+e);for(;f<i;++f,++h)o[h]=t[f],l[h]=n[f];for(;d<s;++d,++h)o[h]=r[d],l[h]=a[d]+e}function xM(e){J.call(this,Cde(),e),this._indices=null,this._dims=null}xM.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};ge(xM,J,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(i=>t.modified(i.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,i=e.query,r=this._indices={},a=this._dims=[],s=i.length;let o=0,l,f;for(;o<s;++o)l=n[o].fname,f=r[l]||(r[l]=v8()),a.push(y8(f,o,i[o]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),i=e.fields,r=e.query,a=this._indices,s=this._dims,o=this.value,l=o.curr(),f=o.prev(),d=o.all(),h=n.rem=n.add,p=n.mod,y=r.length,v={};let b,S,_,w,A,C,T,k,M;if(f.set(l),t.rem.length&&(A=this.remove(e,t,n)),t.add.length&&o.add(t.add),t.mod.length)for(C={},w=t.mod,T=0,k=w.length;T<k;++T)C[w[T]._index]=1;for(T=0;T<y;++T)M=i[T],(!s[T]||e.modified("fields",T)||t.modified(M.fields))&&(_=M.fname,(b=v[_])||(a[_]=S=v8(),v[_]=b=S.insert(M,t.source,0)),s[T]=y8(S,T,r[T]).onAdd(b,l));for(T=0,k=o.data().length;T<k;++T)A[T]||(f[T]!==l[T]?h.push(T):C[T]&&l[T]!==d&&p.push(T));return o.mask=(1<<y)-1,n},eval(e,t){const n=t.materialize().fork(),i=this._dims.length;let r=0;return t.rem.length&&(this.remove(e,t,n),r|=(1<<i)-1),e.modified("query")&&!e.modified("fields")&&(r|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),r|=(1<<i)-1),t.mod.length&&(this.modify(t,n),r|=(1<<i)-1),this.value.mask=r,n},insert(e,t,n){const i=t.add,r=this.value,a=this._dims,s=this._indices,o=e.fields,l={},f=n.add,d=r.size()+i.length,h=a.length;let p=r.size(),y,v,b;r.resize(d,h),r.add(i);const S=r.curr(),_=r.prev(),w=r.all();for(y=0;y<h;++y)v=o[y].fname,b=l[v]||(l[v]=s[v].insert(o[y],i,p)),a[y].onAdd(b,S);for(;p<d;++p)_[p]=w,S[p]!==w&&f.push(p)},modify(e,t){const n=t.mod,i=this.value,r=i.curr(),a=i.all(),s=e.mod;let o,l,f;for(o=0,l=s.length;o<l;++o)f=s[o]._index,r[f]!==a&&n.push(f)},remove(e,t,n){const i=this._indices,r=this.value,a=r.curr(),s=r.prev(),o=r.all(),l={},f=n.rem,d=t.rem;let h,p,y,v;for(h=0,p=d.length;h<p;++h)y=d[h]._index,l[y]=1,s[y]=v=a[y],a[y]=o,v!==o&&f.push(y);for(y in i)i[y].remove(p,l);return this.reindex(t,p,l),l},reindex(e,t,n){const i=this._indices,r=this.value;e.runAfter(()=>{const a=r.remove(t,n);for(const s in i)i[s].reindex(a)})},update(e,t,n){const i=this._dims,r=e.query,a=t.stamp,s=i.length;let o=0,l,f;for(n.filters=0,f=0;f<s;++f)e.modified("query",f)&&(l=f,++o);if(o===1)o=i[l].one,this.incrementOne(i[l],r[l],n.add,n.rem);else for(f=0,o=0;f<s;++f)e.modified("query",f)&&(o|=i[f].one,this.incrementAll(i[f],r[f],a,n.add),n.rem=n.add);return o},incrementAll(e,t,n,i){const r=this.value,a=r.seen(),s=r.curr(),o=r.prev(),l=e.index(),f=e.bisect(e.range),d=e.bisect(t),h=d[0],p=d[1],y=f[0],v=f[1],b=e.one;let S,_,w;if(h<y)for(S=h,_=Math.min(y,p);S<_;++S)w=l[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(h>y)for(S=y,_=Math.min(h,v);S<_;++S)w=l[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;if(p>v)for(S=Math.max(h,v),_=p;S<_;++S)w=l[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;else if(p<v)for(S=Math.max(y,p),_=v;S<_;++S)w=l[S],a[w]!==n&&(o[w]=s[w],a[w]=n,i.push(w)),s[w]^=b;e.range=t.slice()},incrementOne(e,t,n,i){const r=this.value,a=r.curr(),s=e.index(),o=e.bisect(e.range),l=e.bisect(t),f=l[0],d=l[1],h=o[0],p=o[1],y=e.one;let v,b,S;if(f<h)for(v=f,b=Math.min(h,d);v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(f>h)for(v=h,b=Math.min(f,p);v<b;++v)S=s[v],a[S]^=y,i.push(S);if(d>p)for(v=Math.max(f,p),b=d;v<b;++v)S=s[v],a[S]^=y,n.push(S);else if(d<p)for(v=Math.max(h,d),b=p;v<b;++v)S=s[v],a[S]^=y,i.push(S);e.range=t.slice()}});function SM(e){J.call(this,null,e)}SM.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};ge(SM,J,{transform(e,t){const n=~(e.ignore||0),i=e.filter,r=i.mask;if((r&n)===0)return t.StopPropagation;const a=t.fork(t.ALL),s=i.data(),o=i.curr(),l=i.prev(),f=d=>o[d]&n?null:s[d];return a.filter(a.MOD,f),r&r-1?(a.filter(a.ADD,d=>{const h=o[d]&n;return!h&&h^l[d]&n?s[d]:null}),a.filter(a.REM,d=>{const h=o[d]&n;return h&&!(h^(h^l[d]&n))?s[d]:null})):(a.filter(a.ADD,f),a.filter(a.REM,d=>(o[d]&n)===r?s[d]:null)),a.filter(a.SOURCE,d=>f(d._index))}});const kde=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:xM,resolvefilter:SM},Symbol.toStringTag,{value:"Module"})),Ode="RawCode",Pl="Literal",Rde="Property",Dde="Identifier",Nde="ArrayExpression",zde="BinaryExpression",PI="CallExpression",Fde="ConditionalExpression",Lde="LogicalExpression",Bde="MemberExpression",Ude="ObjectExpression",qde="UnaryExpression";function ha(e){this.type=e}ha.prototype.visit=function(e){let t,n,i;if(e(this))return 1;for(t=Pde(this),n=0,i=t.length;n<i;++n)if(t[n].visit(e))return 1};function Pde(e){switch(e.type){case Nde:return e.elements;case zde:case Lde:return[e.left,e.right];case PI:return[e.callee].concat(e.arguments);case Fde:return[e.test,e.consequent,e.alternate];case Bde:return[e.object,e.property];case Ude:return e.properties;case Rde:return[e.key,e.value];case qde:return[e.argument];case Dde:case Pl:case Ode:default:return[]}}var is,we,ee,Jn,pt,Ub=1,i0=2,Il=3,$u=4,qb=5,uc=6,Ti=7,r0=8,Ide=9;is={};is[Ub]="Boolean";is[i0]="<end>";is[Il]="Identifier";is[$u]="Keyword";is[qb]="Null";is[uc]="Numeric";is[Ti]="Punctuator";is[r0]="String";is[Ide]="RegularExpression";var jde="ArrayExpression",Hde="BinaryExpression",Gde="CallExpression",Yde="ConditionalExpression",II="Identifier",Xde="Literal",Vde="LogicalExpression",Wde="MemberExpression",Qde="ObjectExpression",Zde="Property",Kde="UnaryExpression",Sn="Unexpected token %0",Jde="Unexpected number",ehe="Unexpected string",the="Unexpected identifier",nhe="Unexpected reserved word",ihe="Unexpected end of input",uC="Invalid regular expression",J_="Invalid regular expression: missing /",jI="Octal literals are not allowed in strict mode.",rhe="Duplicate data property in object literal not allowed in strict mode",Fn="ILLEGAL",pp="Disabled.",ahe=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),she=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function Pb(e,t){if(!e)throw new Error("ASSERT: "+t)}function Rs(e){return e>=48&&e<=57}function EM(e){return"0123456789abcdefABCDEF".includes(e)}function Xg(e){return"01234567".includes(e)}function ohe(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].includes(e)}function mp(e){return e===10||e===13||e===8232||e===8233}function a0(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&ahe.test(String.fromCharCode(e))}function fv(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&she.test(String.fromCharCode(e))}const uhe={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function HI(){for(;ee<Jn;){const e=we.charCodeAt(ee);if(ohe(e)||mp(e))++ee;else break}}function lC(e){var t,n,i,r=0;for(n=e==="u"?4:2,t=0;t<n;++t)ee<Jn&&EM(we[ee])?(i=we[ee++],r=r*16+"0123456789abcdef".indexOf(i.toLowerCase())):rt({},Sn,Fn);return String.fromCharCode(r)}function lhe(){var e,t,n,i;for(e=we[ee],t=0,e==="}"&&rt({},Sn,Fn);ee<Jn&&(e=we[ee++],!!EM(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&rt({},Sn,Fn),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,i=(t-65536&1023)+56320,String.fromCharCode(n,i))}function GI(){var e,t;for(e=we.charCodeAt(ee++),t=String.fromCharCode(e),e===92&&(we.charCodeAt(ee)!==117&&rt({},Sn,Fn),++ee,e=lC("u"),(!e||e==="\\"||!a0(e.charCodeAt(0)))&&rt({},Sn,Fn),t=e);ee<Jn&&(e=we.charCodeAt(ee),!!fv(e));)++ee,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),we.charCodeAt(ee)!==117&&rt({},Sn,Fn),++ee,e=lC("u"),(!e||e==="\\"||!fv(e.charCodeAt(0)))&&rt({},Sn,Fn),t+=e);return t}function che(){var e,t;for(e=ee++;ee<Jn;){if(t=we.charCodeAt(ee),t===92)return ee=e,GI();if(fv(t))++ee;else break}return we.slice(e,ee)}function fhe(){var e,t,n;return e=ee,t=we.charCodeAt(ee)===92?GI():che(),t.length===1?n=Il:uhe.hasOwnProperty(t)?n=$u:t==="null"?n=qb:t==="true"||t==="false"?n=Ub:n=Il,{type:n,value:t,start:e,end:ee}}function ew(){var e=ee,t=we.charCodeAt(ee),n,i=we[ee],r,a,s;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ee,{type:Ti,value:String.fromCharCode(t),start:e,end:ee};default:if(n=we.charCodeAt(ee+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ee+=2,{type:Ti,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:ee};case 33:case 61:return ee+=2,we.charCodeAt(ee)===61&&++ee,{type:Ti,value:we.slice(e,ee),start:e,end:ee}}}if(s=we.substr(ee,4),s===">>>=")return ee+=4,{type:Ti,value:s,start:e,end:ee};if(a=s.substr(0,3),a===">>>"||a==="<<="||a===">>=")return ee+=3,{type:Ti,value:a,start:e,end:ee};if(r=a.substr(0,2),i===r[1]&&"+-<>&|".includes(i)||r==="=>")return ee+=2,{type:Ti,value:r,start:e,end:ee};if(r==="//"&&rt({},Sn,Fn),"<>=!+-*%&|^/".includes(i))return++ee,{type:Ti,value:i,start:e,end:ee};rt({},Sn,Fn)}function dhe(e){let t="";for(;ee<Jn&&EM(we[ee]);)t+=we[ee++];return t.length===0&&rt({},Sn,Fn),a0(we.charCodeAt(ee))&&rt({},Sn,Fn),{type:uc,value:parseInt("0x"+t,16),start:e,end:ee}}function hhe(e){let t="0"+we[ee++];for(;ee<Jn&&Xg(we[ee]);)t+=we[ee++];return(a0(we.charCodeAt(ee))||Rs(we.charCodeAt(ee)))&&rt({},Sn,Fn),{type:uc,value:parseInt(t,8),octal:!0,start:e,end:ee}}function b8(){var e,t,n;if(n=we[ee],Pb(Rs(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=ee,e="",n!=="."){if(e=we[ee++],n=we[ee],e==="0"){if(n==="x"||n==="X")return++ee,dhe(t);if(Xg(n))return hhe(t);n&&Rs(n.charCodeAt(0))&&rt({},Sn,Fn)}for(;Rs(we.charCodeAt(ee));)e+=we[ee++];n=we[ee]}if(n==="."){for(e+=we[ee++];Rs(we.charCodeAt(ee));)e+=we[ee++];n=we[ee]}if(n==="e"||n==="E")if(e+=we[ee++],n=we[ee],(n==="+"||n==="-")&&(e+=we[ee++]),Rs(we.charCodeAt(ee)))for(;Rs(we.charCodeAt(ee));)e+=we[ee++];else rt({},Sn,Fn);return a0(we.charCodeAt(ee))&&rt({},Sn,Fn),{type:uc,value:parseFloat(e),start:t,end:ee}}function ghe(){var e="",t,n,i,r,a=!1;for(t=we[ee],Pb(t==="'"||t==='"',"String literal must starts with a quote"),n=ee,++ee;ee<Jn;)if(i=we[ee++],i===t){t="";break}else if(i==="\\")if(i=we[ee++],!i||!mp(i.charCodeAt(0)))switch(i){case"u":case"x":we[ee]==="{"?(++ee,e+=lhe()):e+=lC(i);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:Xg(i)?(r="01234567".indexOf(i),r!==0&&(a=!0),ee<Jn&&Xg(we[ee])&&(a=!0,r=r*8+"01234567".indexOf(we[ee++]),"0123".includes(i)&&ee<Jn&&Xg(we[ee])&&(r=r*8+"01234567".indexOf(we[ee++]))),e+=String.fromCharCode(r)):e+=i;break}else i==="\r"&&we[ee]===`
`&&++ee;else{if(mp(i.charCodeAt(0)))break;e+=i}return t!==""&&rt({},Sn,Fn),{type:r0,value:e,octal:a,start:n,end:ee}}function phe(e,t){let n=e;t.includes("u")&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(i,r)=>{if(parseInt(r,16)<=1114111)return"x";rt({},uC)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{rt({},uC)}try{return new RegExp(e,t)}catch{return null}}function mhe(){var e,t,n,i,r;for(e=we[ee],Pb(e==="/","Regular expression literal must start with a slash"),t=we[ee++],n=!1,i=!1;ee<Jn;)if(e=we[ee++],t+=e,e==="\\")e=we[ee++],mp(e.charCodeAt(0))&&rt({},J_),t+=e;else if(mp(e.charCodeAt(0)))rt({},J_);else if(n)e==="]"&&(n=!1);else if(e==="/"){i=!0;break}else e==="["&&(n=!0);return i||rt({},J_),r=t.substr(1,t.length-2),{value:r,literal:t}}function yhe(){var e,t,n;for(t="",n="";ee<Jn&&(e=we[ee],!!fv(e.charCodeAt(0)));)++ee,e==="\\"&&ee<Jn?rt({},Sn,Fn):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&rt({},uC,n),{value:n,literal:t}}function vhe(){var e,t,n,i;return pt=null,HI(),e=ee,t=mhe(),n=yhe(),i=phe(t.value,n.value),{literal:t.literal+n.literal,value:i,regex:{pattern:t.value,flags:n.value},start:e,end:ee}}function bhe(e){return e.type===Il||e.type===$u||e.type===Ub||e.type===qb}function YI(){if(HI(),ee>=Jn)return{type:i0,start:ee,end:ee};const e=we.charCodeAt(ee);return a0(e)?fhe():e===40||e===41||e===59?ew():e===39||e===34?ghe():e===46?Rs(we.charCodeAt(ee+1))?b8():ew():Rs(e)?b8():ew()}function ki(){const e=pt;return ee=e.end,pt=YI(),ee=e.end,e}function XI(){const e=ee;pt=YI(),ee=e}function xhe(e){const t=new ha(jde);return t.elements=e,t}function x8(e,t,n){const i=new ha(e==="||"||e==="&&"?Vde:Hde);return i.operator=e,i.left=t,i.right=n,i}function She(e,t){const n=new ha(Gde);return n.callee=e,n.arguments=t,n}function Ehe(e,t,n){const i=new ha(Yde);return i.test=e,i.consequent=t,i.alternate=n,i}function _M(e){const t=new ha(II);return t.name=e,t}function Ng(e){const t=new ha(Xde);return t.value=e.value,t.raw=we.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function S8(e,t,n){const i=new ha(Wde);return i.computed=e==="[",i.object=t,i.property=n,i.computed||(n.member=!0),i}function _he(e){const t=new ha(Qde);return t.properties=e,t}function E8(e,t,n){const i=new ha(Zde);return i.key=t,i.value=n,i.kind=e,i}function whe(e,t){const n=new ha(Kde);return n.operator=e,n.argument=t,n.prefix=!0,n}function rt(e,t){var n,i=Array.prototype.slice.call(arguments,2),r=t.replace(/%(\d)/g,(a,s)=>(Pb(s<i.length,"Message reference must be in range"),i[s]));throw n=new Error(r),n.index=ee,n.description=r,n}function Ib(e){e.type===i0&&rt(e,ihe),e.type===uc&&rt(e,Jde),e.type===r0&&rt(e,ehe),e.type===Il&&rt(e,the),e.type===$u&&rt(e,nhe),rt(e,Sn,e.value)}function ei(e){const t=ki();(t.type!==Ti||t.value!==e)&&Ib(t)}function $t(e){return pt.type===Ti&&pt.value===e}function tw(e){return pt.type===$u&&pt.value===e}function Ahe(){const e=[];for(ee=pt.start,ei("[");!$t("]");)$t(",")?(ki(),e.push(null)):(e.push(jl()),$t("]")||ei(","));return ki(),xhe(e)}function _8(){ee=pt.start;const e=ki();return e.type===r0||e.type===uc?(e.octal&&rt(e,jI),Ng(e)):_M(e.value)}function Che(){var e,t,n,i;if(ee=pt.start,e=pt,e.type===Il)return n=_8(),ei(":"),i=jl(),E8("init",n,i);if(e.type===i0||e.type===Ti)Ib(e);else return t=_8(),ei(":"),i=jl(),E8("init",t,i)}function $he(){var e=[],t,n,i,r={},a=String;for(ee=pt.start,ei("{");!$t("}");)t=Che(),t.key.type===II?n=t.key.name:n=a(t.key.value),i="$"+n,Object.prototype.hasOwnProperty.call(r,i)?rt({},rhe):r[i]=!0,e.push(t),$t("}")||ei(",");return ei("}"),_he(e)}function The(){ei("(");const e=wM();return ei(")"),e}const Mhe={if:1};function khe(){var e,t,n;if($t("("))return The();if($t("["))return Ahe();if($t("{"))return $he();if(e=pt.type,ee=pt.start,e===Il||Mhe[pt.value])n=_M(ki().value);else if(e===r0||e===uc)pt.octal&&rt(pt,jI),n=Ng(ki());else{if(e===$u)throw new Error(pp);e===Ub?(t=ki(),t.value=t.value==="true",n=Ng(t)):e===qb?(t=ki(),t.value=null,n=Ng(t)):$t("/")||$t("/=")?(n=Ng(vhe()),XI()):Ib(ki())}return n}function Ohe(){const e=[];if(ei("("),!$t(")"))for(;ee<Jn&&(e.push(jl()),!$t(")"));)ei(",");return ei(")"),e}function Rhe(){ee=pt.start;const e=ki();return bhe(e)||Ib(e),_M(e.value)}function Dhe(){return ei("."),Rhe()}function Nhe(){ei("[");const e=wM();return ei("]"),e}function zhe(){var e,t,n;for(e=khe();;)if($t("."))n=Dhe(),e=S8(".",e,n);else if($t("("))t=Ohe(),e=She(e,t);else if($t("["))n=Nhe(),e=S8("[",e,n);else break;return e}function w8(){const e=zhe();if(pt.type===Ti&&($t("++")||$t("--")))throw new Error(pp);return e}function G1(){var e,t;if(pt.type!==Ti&&pt.type!==$u)t=w8();else{if($t("++")||$t("--"))throw new Error(pp);if($t("+")||$t("-")||$t("~")||$t("!"))e=ki(),t=G1(),t=whe(e.value,t);else{if(tw("delete")||tw("void")||tw("typeof"))throw new Error(pp);t=w8()}}return t}function A8(e){let t=0;if(e.type!==Ti&&e.type!==$u)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function Fhe(){var e,t,n,i,r,a,s,o,l,f;if(e=pt,l=G1(),i=pt,r=A8(i),r===0)return l;for(i.prec=r,ki(),t=[e,pt],s=G1(),a=[l,i,s];(r=A8(pt))>0;){for(;a.length>2&&r<=a[a.length-2].prec;)s=a.pop(),o=a.pop().value,l=a.pop(),t.pop(),n=x8(o,l,s),a.push(n);i=ki(),i.prec=r,a.push(i),t.push(pt),n=G1(),a.push(n)}for(f=a.length-1,n=a[f],t.pop();f>1;)t.pop(),n=x8(a[f-1].value,a[f-2],n),f-=2;return n}function jl(){var e,t,n;return e=Fhe(),$t("?")&&(ki(),t=jl(),ei(":"),n=jl(),e=Ehe(e,t,n)),e}function wM(){const e=jl();if($t(","))throw new Error(pp);return e}function AM(e){we=e,ee=0,Jn=we.length,pt=null,XI();const t=wM();if(pt.type!==i0)throw new Error("Unexpect token after expression.");return t}var VI={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function WI(e){function t(s,o,l,f){let d=e(o[0]);return l&&(d=l+"("+d+")",l.lastIndexOf("new ",0)===0&&(d="("+d+")")),d+"."+s+(f<0?"":f===0?"()":"("+o.slice(1).map(e).join(",")+")")}function n(s,o,l){return f=>t(s,f,o,l)}const i="new Date",r="String",a="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(s){s.length<3&&te("Missing arguments to clamp function."),s.length>3&&te("Too many arguments to clamp function.");const o=s.map(e);return"Math.max("+o[1]+", Math.min("+o[2]+","+o[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:i,date:n("getDate",i,0),day:n("getDay",i,0),year:n("getFullYear",i,0),month:n("getMonth",i,0),hours:n("getHours",i,0),minutes:n("getMinutes",i,0),seconds:n("getSeconds",i,0),milliseconds:n("getMilliseconds",i,0),time:n("getTime",i,0),timezoneoffset:n("getTimezoneOffset",i,0),utcdate:n("getUTCDate",i,0),utcday:n("getUTCDay",i,0),utcyear:n("getUTCFullYear",i,0),utcmonth:n("getUTCMonth",i,0),utchours:n("getUTCHours",i,0),utcminutes:n("getUTCMinutes",i,0),utcseconds:n("getUTCSeconds",i,0),utcmilliseconds:n("getUTCMilliseconds",i,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",r,0),lower:n("toLowerCase",r,0),substring:n("substring",r),split:n("split",r),trim:n("trim",r,0),btoa:"btoa",atob:"atob",regexp:a,test:n("test",a),if:function(s){s.length<3&&te("Missing arguments to if function."),s.length>3&&te("Too many arguments to if function.");const o=s.map(e);return"("+o[0]+"?"+o[1]+":"+o[2]+")"}}}function Lhe(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function QI(e){e=e||{};const t=e.allowed?ra(e.allowed):{},n=e.forbidden?ra(e.forbidden):{},i=e.constants||VI,r=(e.functions||WI)(h),a=e.globalvar,s=e.fieldvar,o=Pe(a)?a:v=>`${a}["${v}"]`;let l={},f={},d=0;function h(v){if(Ee(v))return v;const b=p[v.type];return b==null&&te("Unsupported type: "+v.type),b(v)}const p={Literal:v=>v.raw,Identifier:v=>{const b=v.name;return d>0?b:Se(n,b)?te("Illegal identifier: "+b):Se(i,b)?i[b]:Se(t,b)?b:(l[b]=1,o(b))},MemberExpression:v=>{const b=!v.computed,S=h(v.object);b&&(d+=1);const _=h(v.property);return S===s&&(f[Lhe(_)]=1),b&&(d-=1),S+(b?"."+_:"["+_+"]")},CallExpression:v=>{v.callee.type!=="Identifier"&&te("Illegal callee type: "+v.callee.type);const b=v.callee.name,S=v.arguments,_=Se(r,b)&&r[b];return _||te("Unrecognized function: "+b),Pe(_)?_(S):_+"("+S.map(h).join(",")+")"},ArrayExpression:v=>"["+v.elements.map(h).join(",")+"]",BinaryExpression:v=>"("+h(v.left)+" "+v.operator+" "+h(v.right)+")",UnaryExpression:v=>"("+v.operator+h(v.argument)+")",ConditionalExpression:v=>"("+h(v.test)+"?"+h(v.consequent)+":"+h(v.alternate)+")",LogicalExpression:v=>"("+h(v.left)+v.operator+h(v.right)+")",ObjectExpression:v=>"{"+v.properties.map(h).join(",")+"}",Property:v=>{d+=1;const b=h(v.key);return d-=1,b+":"+h(v.value)}};function y(v){const b={code:h(v),globals:Object.keys(l),fields:Object.keys(f)};return l={},f={},b}return y.functions=r,y.constants=i,y}const C8=Symbol("vega_selection_getter");function ZI(e){return(!e.getter||!e.getter[C8])&&(e.getter=kr(e.field),e.getter[C8]=!0),e.getter}const CM="intersect",$8="union",Bhe="vlMulti",Uhe="vlPoint",T8="or",qhe="and",Oa="_vgsid_",yp=kr(Oa),Phe="E",Ihe="R",jhe="R-E",Hhe="R-LE",Ghe="R-RE",Yhe="E-LT",Xhe="E-LTE",Vhe="E-GT",Whe="E-GTE",Qhe="E-VALID",Zhe="E-ONE",dv="index:unit";function M8(e,t){for(var n=t.fields,i=t.values,r=n.length,a=0,s,o;a<r;++a)if(o=n[a],s=ZI(o)(e),nu(s)&&(s=Wn(s)),nu(i[a])&&(i[a]=Wn(i[a])),re(i[a])&&nu(i[a][0])&&(i[a]=i[a].map(Wn)),o.type===Phe){if(re(i[a])?!i[a].includes(s):s!==i[a])return!1}else if(o.type===Ihe){if(!Ef(s,i[a]))return!1}else if(o.type===Ghe){if(!Ef(s,i[a],!0,!1))return!1}else if(o.type===jhe){if(!Ef(s,i[a],!1,!1))return!1}else if(o.type===Hhe){if(!Ef(s,i[a],!1,!0))return!1}else if(o.type===Yhe){if(s>=i[a])return!1}else if(o.type===Xhe){if(s>i[a])return!1}else if(o.type===Vhe){if(s<=i[a])return!1}else if(o.type===Whe){if(s<i[a])return!1}else if(o.type===Qhe){if(s===null||isNaN(s))return!1}else if(o.type===Zhe&&i[a].indexOf(s)===-1)return!1;return!0}function Khe(e,t,n){for(var i=this.context.data[e],r=i?i.values.value:[],a=i?i[dv]&&i[dv].value:void 0,s=n===CM,o=r.length,l=0,f,d,h,p,y;l<o;++l)if(f=r[l],a&&s){if(d=d||{},h=d[p=f.unit]||0,h===-1)continue;if(y=M8(t,f),d[p]=y?-1:++h,y&&a.size===1)return!0;if(!y&&h===a.get(p).count)return!1}else if(y=M8(t,f),s^y)return y;return o&&s}const KI=_d(yp),Jhe=KI.left,ege=KI.right;function tge(e,t,n){const i=this.context.data[e],r=i?i.values.value:[],a=i?i[dv]&&i[dv].value:void 0,s=n===CM,o=yp(t),l=Jhe(r,o);if(l===r.length||yp(r[l])!==o)return!1;if(a&&s){if(a.size===1)return!0;if(ege(r,o)-l<a.size)return!1}return!0}function nge(e,t){return e.map(n=>qe(t.fields?{values:t.fields.map(i=>ZI(i)(n.datum))}:{[Oa]:yp(n.datum)},t))}function ige(e,t,n,i){for(var r=this.context.data[e],a=r?r.values.value:[],s={},o={},l={},f,d,h,p,y,v,b,S,_,w,A=a.length,C=0,T,k;C<A;++C)if(f=a[C],p=f.unit,d=f.fields,h=f.values,d&&h){for(T=0,k=d.length;T<k;++T)y=d[T],b=s[y.field]||(s[y.field]={}),S=b[p]||(b[p]=[]),l[y.field]=_=y.type.charAt(0),w=nw[`${_}_union`],b[p]=w(S,ve(h[T]));n&&(S=o[p]||(o[p]=[]),S.push(ve(h).reduce((M,R,z)=>(M[d[z].field]=R,M),{})))}else y=Oa,v=yp(f),b=s[y]||(s[y]={}),S=b[p]||(b[p]=[]),S.push(v),n&&(S=o[p]||(o[p]=[]),S.push({[Oa]:v}));if(t=t||$8,s[Oa]?s[Oa]=nw[`${Oa}_${t}`](...Object.values(s[Oa])):Object.keys(s).forEach(M=>{s[M]=Object.keys(s[M]).map(R=>s[M][R]).reduce((R,z)=>R===void 0?z:nw[`${l[M]}_${t}`](R,z))}),a=Object.keys(o),n&&a.length){const M=i?Uhe:Bhe;s[M]=t===$8?{[T8]:a.reduce((R,z)=>(R.push(...o[z]),R),[])}:{[qhe]:a.map(R=>({[T8]:o[R]}))}}return s}var nw={[`${Oa}_union`]:GZ,[`${Oa}_intersect`]:jZ,E_union:function(e,t){if(!e.length)return t;for(var n=0,i=t.length;n<i;++n)e.includes(t[n])||e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.includes(n)):t},R_union:function(e,t){var n=Wn(t[0]),i=Wn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<i&&(e[1]=i),e):[n,i]},R_intersect:function(e,t){var n=Wn(t[0]),i=Wn(t[1]);return n>i&&(n=t[1],i=t[0]),e.length?i<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>i&&(e[1]=i),e):[n,i]}};const rge=":",age="@";function $M(e,t,n,i){t[0].type!==Pl&&te("First argument to selection functions must be a string literal.");const r=t[0].value,a=t.length>=2&&Ke(t).value,s="unit",o=age+s,l=rge+r;a===CM&&!Se(i,o)&&(i[o]=n.getData(r).indataRef(n,s)),Se(i,l)||(i[l]=n.getData(r).tuplesRef())}function JI(e){const t=this.context.data[e];return t?t.values.value:[]}function sge(e,t,n){const i=this.context.data[e]["index:"+t],r=i?i.value.get(n):void 0;return r&&r.count}function oge(e,t){const n=this.context.dataflow,i=this.context.data[e],r=i.input;return n.pulse(r,n.changeset().remove(Or).insert(t)),1}function uge(e,t,n){if(e){const i=this.context.dataflow,r=e.mark.source;i.pulse(r,i.changeset().encode(e,t))}return n!==void 0?n:e}const s0=e=>function(t,n){const i=this.context.dataflow.locale();return t===null?"null":i[e](n)(t)},lge=s0("format"),ej=s0("timeFormat"),cge=s0("utcFormat"),fge=s0("timeParse"),dge=s0("utcParse"),f1=new Date(2e3,0,1);function jb(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(f1.setYear(2e3),f1.setMonth(e),f1.setDate(t),ej.call(this,f1,n))}function hge(e){return jb.call(this,e,1,"%B")}function gge(e){return jb.call(this,e,1,"%b")}function pge(e){return jb.call(this,0,2+e,"%A")}function mge(e){return jb.call(this,0,2+e,"%a")}const yge=":",vge="@",cC="%",tj="$";function TM(e,t,n,i){t[0].type!==Pl&&te("First argument to data functions must be a string literal.");const r=t[0].value,a=yge+r;if(!Se(a,i))try{i[a]=n.getData(r).tuplesRef()}catch{}}function bge(e,t,n,i){t[0].type!==Pl&&te("First argument to indata must be a string literal."),t[1].type!==Pl&&te("Second argument to indata must be a string literal.");const r=t[0].value,a=t[1].value,s=vge+a;Se(s,i)||(i[s]=n.getData(r).indataRef(n,a))}function pi(e,t,n,i){if(t[0].type===Pl)k8(n,i,t[0].value);else for(e in n.scales)k8(n,i,e)}function k8(e,t,n){const i=cC+n;if(!Se(t,i))try{t[i]=e.scaleRef(n)}catch{}}function rs(e,t){if(Ee(e)){const n=t.scales[e];return n&&D4(n.value)?n.value:void 0}else if(Pe(e))return D4(e)?e:void 0}function xge(e,t,n){t.__bandwidth=r=>r&&r.bandwidth?r.bandwidth():0,n._bandwidth=pi,n._range=pi,n._scale=pi;const i=r=>"_["+(r.type===Pl?he(cC+r.value):he(cC)+"+"+e(r))+"]";return{_bandwidth:r=>`this.__bandwidth(${i(r[0])})`,_range:r=>`${i(r[0])}.range()`,_scale:r=>`${i(r[0])}(${e(r[1])})`}}function MM(e,t){return function(n,i,r){if(n){const a=rs(n,(r||this).context);return a&&a.path[e](i)}else return t(i)}}const Sge=MM("area",Uoe),Ege=MM("bounds",joe),_ge=MM("centroid",Woe);function wge(e,t){const n=rs(e,(t||this).context);return n&&n.scale()}function Age(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function kM(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(i){e.warn(i)}return n[n.length-1]}function Cge(){return kM(this.context.dataflow,"warn",arguments)}function $ge(){return kM(this.context.dataflow,"info",arguments)}function Tge(){return kM(this.context.dataflow,"debug",arguments)}function iw(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function fC(e){const t=du(e),n=iw(t.r),i=iw(t.g),r=iw(t.b);return .2126*n+.7152*i+.0722*r}function Mge(e,t){const n=fC(e),i=fC(t),r=Math.max(n,i),a=Math.min(n,i);return(r+.05)/(a+.05)}function kge(){const e=[].slice.call(arguments);return e.unshift({}),qe(...e)}function nj(e,t){return e===t||e!==e&&t!==t?!0:re(e)?re(t)&&e.length===t.length?Oge(e,t):!1:xe(e)&&xe(t)?ij(e,t):!1}function Oge(e,t){for(let n=0,i=e.length;n<i;++n)if(!nj(e[n],t[n]))return!1;return!0}function ij(e,t){for(const n in e)if(!nj(e[n],t[n]))return!1;return!0}function O8(e){return t=>ij(e,t)}function Rge(e,t,n,i,r,a){const s=this.context.dataflow,o=this.context.data[e],l=o.input,f=s.stamp();let d=o.changes,h,p;if(s._trigger===!1||!(l.value.length||t||i))return 0;if((!d||d.stamp<f)&&(o.changes=d=s.changeset(),d.stamp=f,s.runAfter(()=>{o.modified=!0,s.pulse(l,d).run()},!0,1)),n&&(h=n===!0?Or:re(n)||Kv(n)?n:O8(n),d.remove(h)),t&&d.insert(t),i&&(h=O8(i),l.value.some(h)?d.remove(h):d.insert(i)),r)for(p in a)d.modify(r,p,a[p]);return 1}function Dge(e){const t=e.touches,n=t[0].clientX-t[1].clientX,i=t[0].clientY-t[1].clientY;return Math.hypot(n,i)}function Nge(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const R8={};function zge(e,t){const n=R8[t]||(R8[t]=kr(t));return re(e)?e.map(n):n(e)}function Hb(e){return re(e)||ArrayBuffer.isView(e)?e:null}function OM(e){return Hb(e)||(Ee(e)?e:null)}function Fge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return Hb(e).join(...n)}function Lge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return OM(e).indexOf(...n)}function Bge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return OM(e).lastIndexOf(...n)}function Uge(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return OM(e).slice(...n)}function qge(e,t,n){return Pe(n)&&te("Function argument passed to replace."),!Ee(t)&&!m$(t)&&te("Please pass a string or RegExp argument to replace."),String(e).replace(t,n)}function Pge(e){return Hb(e).slice().reverse()}function Ige(e){return Hb(e).slice().sort(Rp)}function jge(e,t,n){return HT(e||0,t||0,n||0)}function Hge(e,t){const n=rs(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function Gge(e,t){const n=rs(e,(t||this).context);return n?n.copy():void 0}function Yge(e,t){const n=rs(e,(t||this).context);return n?n.domain():[]}function Xge(e,t,n){const i=rs(e,(n||this).context);return i?re(t)?(i.invertRange||i.invert)(t):(i.invert||i.invertExtent)(t):void 0}function Vge(e,t){const n=rs(e,(t||this).context);return n&&n.range?n.range():[]}function Wge(e,t,n){const i=rs(e,(n||this).context);return i?i(t):void 0}function Qge(e,t,n,i,r){e=rs(e,(r||this).context);const a=VU(t,n);let s=e.domain(),o=s[0],l=Ke(s),f=ti;return l-o?f=FU(e,o,l):e=(e.interpolator?ot("sequential")().interpolator(e.interpolator()):ot("linear")().interpolate(e.interpolate()).range(e.range())).domain([o=0,l=1]),e.ticks&&(s=e.ticks(+i||15),o!==s[0]&&s.unshift(o),l!==Ke(s)&&s.push(l)),s.forEach(d=>a.stop(f(d),e(d))),a}function Zge(e,t,n){const i=rs(e,(n||this).context);return function(r){return i?i.path.context(r)(t):""}}function Kge(e){let t=null;return function(n){return n?op(n,t=t||Wf(e)):e}}const rj=e=>e.data;function aj(e,t){const n=JI.call(t,e);return n.root&&n.root.lookup||{}}function Jge(e,t,n){const i=aj(e,this),r=i[t],a=i[n];return r&&a?r.path(a).map(rj):void 0}function epe(e,t){const n=aj(e,this)[t];return n?n.ancestors().map(rj):void 0}const sj=()=>typeof window<"u"&&window||null;function tpe(){const e=sj();return e?e.screen:{}}function npe(){const e=sj();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function ipe(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function oj(e,t,n){if(!e)return[];const[i,r]=e,a=new nn().set(i[0],i[1],r[0],r[1]),s=n||this.context.dataflow.scenegraph().root;return Hq(s,a,rpe(t))}function rpe(e){let t=null;if(e){const n=ve(e.marktype),i=ve(e.markname);t=r=>(!n.length||n.some(a=>r.marktype===a))&&(!i.length||i.some(a=>r.name===a))}return t}function ape(e,t,n){let i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=ve(e);const r=e[e.length-1];return r===void 0||Math.hypot(r[0]-t,r[1]-n)>i?[...e,[t,n]]:e}function spe(e){return ve(e).reduce((t,n,i)=>{let[r,a]=n;return t+=i==0?`M ${r},${a} `:i===e.length-1?" Z":`L ${r},${a} `},"")}function ope(e,t,n){const{x:i,y:r,mark:a}=n,s=new nn().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[l,f]of t)l<s.x1&&(s.x1=l),l>s.x2&&(s.x2=l),f<s.y1&&(s.y1=f),f>s.y2&&(s.y2=f);return s.translate(i,r),oj([[s.x1,s.y1],[s.x2,s.y2]],e,a).filter(l=>upe(l.x,l.y,t))}function upe(e,t,n){let i=0;for(let r=0,a=n.length-1;r<n.length;a=r++){const[s,o]=n[a],[l,f]=n[r];f>t!=o>t&&e<(s-l)*(t-f)/(o-f)+l&&i++}return i&1}const vp={random(){return Dr()},cumulativeNormal:ib,cumulativeLogNormal:H$,cumulativeUniform:V$,densityNormal:U$,densityLogNormal:j$,densityUniform:X$,quantileNormal:rb,quantileLogNormal:G$,quantileUniform:W$,sampleNormal:nb,sampleLogNormal:I$,sampleUniform:Y$,isArray:re,isBoolean:tc,isDate:nu,isDefined(e){return e!==void 0},isNumber:at,isObject:xe,isRegExp:m$,isString:Ee,isTuple:Kv,isValid(e){return e!=null&&e===e},toBoolean:v$,toDate(e){return b$(e)},toNumber:Wn,toString:x$,indexof:Lge,join:Fge,lastindexof:Bge,replace:qge,reverse:Pge,sort:Ige,slice:Uge,flush:g7,lerp:m7,merge:kge,pad:b7,peek:Ke,pluck:zge,span:Dp,inrange:Ef,truncate:x7,rgb:du,lab:vy,hcl:by,hsl:my,luminance:fC,contrast:Mge,sequence:tr,format:lge,utcFormat:cge,utcParse:dge,utcOffset:J7,utcSequence:nL,timeFormat:ej,timeParse:fge,timeOffset:K7,timeSequence:tL,timeUnitSpecifier:P7,monthFormat:hge,monthAbbrevFormat:gge,dayFormat:pge,dayAbbrevFormat:mge,quarter:c7,utcquarter:f7,week:j7,utcweek:Y7,dayofyear:I7,utcdayofyear:G7,warn:Cge,info:$ge,debug:Tge,extent(e){return ja(e)},inScope:Age,intersect:oj,clampRange:d7,pinchDistance:Dge,pinchAngle:Nge,screen:tpe,containerSize:ipe,windowSize:npe,bandspace:jge,setdata:oge,pathShape:Kge,panLinear:s7,panLog:o7,panPow:u7,panSymlog:l7,zoomLinear:f$,zoomLog:d$,zoomPow:iy,zoomSymlog:h$,encode:uge,modify:Rge,lassoAppend:ape,lassoPath:spe,intersectLasso:ope},lpe=["view","item","group","xy","x","y"],cpe="event.vega.",uj="this.",RM={},lj={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${he(tj+e)}]`,functions:fpe,constants:VI,visitors:RM},dC=QI(lj);function fpe(e){const t=WI(e);lpe.forEach(n=>t[n]=cpe+n);for(const n in vp)t[n]=uj+n;return qe(t,xge(e,vp,RM)),t}function Qt(e,t,n){return arguments.length===1?vp[e]:(vp[e]=t,n&&(RM[e]=n),dC&&(dC.functions[e]=uj+e),this)}Qt("bandwidth",Hge,pi);Qt("copy",Gge,pi);Qt("domain",Yge,pi);Qt("range",Vge,pi);Qt("invert",Xge,pi);Qt("scale",Wge,pi);Qt("gradient",Qge,pi);Qt("geoArea",Sge,pi);Qt("geoBounds",Ege,pi);Qt("geoCentroid",_ge,pi);Qt("geoShape",Zge,pi);Qt("geoScale",wge,pi);Qt("indata",sge,bge);Qt("data",JI,TM);Qt("treePath",Jge,TM);Qt("treeAncestors",epe,TM);Qt("vlSelectionTest",Khe,$M);Qt("vlSelectionIdTest",tge,$M);Qt("vlSelectionResolve",ige,$M);Qt("vlSelectionTuples",nge);function Va(e,t){const n={};let i;try{e=Ee(e)?e:he(e)+"",i=AM(e)}catch{te("Expression parse error: "+e)}i.visit(a=>{if(a.type!==PI)return;const s=a.callee.name,o=lj.visitors[s];o&&o(s,a.arguments,t,n)});const r=dC(i);return r.globals.forEach(a=>{const s=tj+a;!Se(n,s)&&t.getSignal(a)&&(n[s]=t.signalRef(a))}),{$expr:qe({code:r.code},t.options.ast?{ast:i}:null),$fields:r.fields,$params:n}}function dpe(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(i=>t.parseOperator(i)),n.forEach(i=>t.parseOperatorParameters(i)),(e.streams||[]).forEach(i=>t.parseStream(i)),(e.updates||[]).forEach(i=>t.parseUpdate(i)),t.resolve()}const hpe=ra(["rule"]),D8=ra(["group","image","rect"]);function gpe(e,t){let n="";return hpe[t]||(e.x2&&(e.x?(D8[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(D8[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function DM(e){return(e+"").toLowerCase()}function ppe(e){return DM(e)==="operator"}function mpe(e){return DM(e)==="collect"}function rg(e,t,n){n.endsWith(";")||(n="return("+n+");");const i=Function(...t.concat(n));return e&&e.functions?i.bind(e.functions):i}function ype(e,t,n,i){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${i}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${i} : `}var vpe={operator:(e,t)=>rg(e,["_"],t.code),parameter:(e,t)=>rg(e,["datum","_"],t.code),event:(e,t)=>rg(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return rg(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:i}=t;let r="var o=item,datum=o.datum,m=0,$;";for(const a in i){const s="o["+he(a)+"]";r+=`$=${i[a].code};if(${s}!==$)${s}=$,m=1;`}return r+=gpe(i,n),r+="return m;",rg(e,["item","_"],r)},codegen:{get(e){const t=`[${e.map(he).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const i=(a,s)=>{const o=t[s];let l,f;return a.path?(l=`a${a.path}`,f=`b${a.path}`):((n=n||{})["f"+s]=a,l=`this.f${s}(a)`,f=`this.f${s}(b)`),ype(l,f,-o,o)},r=Function("a","b","var u, v; return "+e.map(i).join("")+"0;");return n?r.bind(n):r}}};function bpe(e){const t=this;ppe(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function xpe(e){const t=this;if(e.params){const n=t.get(e.id);n||te("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function Spe(e,t){t=t||{};const n=this;for(const i in e){const r=e[i];t[i]=re(r)?r.map(a=>N8(a,n,t)):N8(r,n,t)}return t}function N8(e,t,n){if(!e||!xe(e))return e;for(let i=0,r=z8.length,a;i<r;++i)if(a=z8[i],Se(e,a.key))return a.parse(e,t,n);return e}var z8=[{key:"$ref",parse:Epe},{key:"$key",parse:wpe},{key:"$expr",parse:_pe},{key:"$field",parse:Ape},{key:"$encode",parse:$pe},{key:"$compare",parse:Cpe},{key:"$context",parse:Tpe},{key:"$subflow",parse:Mpe},{key:"$tupleid",parse:kpe}];function Epe(e,t){return t.get(e.$ref)||te("Operator not defined: "+e.$ref)}function _pe(e,t,n){e.$params&&t.parseParameters(e.$params,n);const i="e:"+e.$expr.code;return t.fn[i]||(t.fn[i]=Ui(t.parameterExpression(e.$expr),e.$fields))}function wpe(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=y$(e.$key,e.$flat,t.expr.codegen))}function Ape(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=kr(e.$field,e.$name,t.expr.codegen))}function Cpe(e,t){const n="c:"+e.$compare+"_"+e.$order,i=ve(e.$compare).map(r=>r&&r.$tupleid?Me:r);return t.fn[n]||(t.fn[n]=g$(i,e.$order,t.expr.codegen))}function $pe(e,t){const n=e.$encode,i={};for(const r in n){const a=n[r];i[r]=Ui(t.encodeExpression(a.$expr),a.$fields),i[r].output=a.$output}return i}function Tpe(e,t){return t}function Mpe(e,t){const n=e.$subflow;return function(i,r,a){const s=t.fork().parse(n),o=s.get(n.operators[0].id),l=s.signals.parent;return l&&l.set(a),o.detachSubflow=()=>t.detach(s),o}}function kpe(){return Me}function Ope(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,i=e.stream!=null?t.get(e.stream):void 0,r;e.source?i=t.events(e.source,e.type,n):e.merge&&(r=e.merge.map(a=>t.get(a)),i=r[0].merge.apply(r[0],r.slice(1))),e.between&&(r=e.between.map(a=>t.get(a)),i=i.between(r[0],r[1])),e.filter&&(i=i.filter(n)),e.throttle!=null&&(i=i.throttle(+e.throttle)),e.debounce!=null&&(i=i.debounce(+e.debounce)),i==null&&te("Invalid stream definition: "+JSON.stringify(e)),e.consume&&i.consume(!0),t.stream(e,i)}function Rpe(e){var t=this,n=xe(n=e.source)?n.$ref:n,i=t.get(n),r=null,a=e.update,s=void 0;i||te("Source not defined: "+e.source),r=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),a&&a.$expr&&(a.$params&&(s=t.parseParameters(a.$params)),a=t.handlerExpression(a.$expr)),t.update(e,i,r,a,s)}const Dpe={skip:!0};function Npe(e){var t=this,n={};if(e.signals){var i=n.signals={};Object.keys(t.signals).forEach(a=>{const s=t.signals[a];e.signals(a,s)&&(i[a]=s.value)})}if(e.data){var r=n.data={};Object.keys(t.data).forEach(a=>{const s=t.data[a];e.data(a,s)&&(r[a]=s.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(a=>a.getState(e))),n}function zpe(e){var t=this,n=t.dataflow,i=e.data,r=e.signals;Object.keys(r||{}).forEach(a=>{n.update(t.signals[a],r[a],Dpe)}),Object.keys(i||{}).forEach(a=>{n.pulse(t.data[a].input,n.changeset().remove(Or).insert(i[a]))}),(e.subcontext||[]).forEach((a,s)=>{const o=t.subcontext[s];o&&o.setState(a)})}function cj(e,t,n,i){return new fj(e,t,n,i)}function fj(e,t,n,i){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=i||vpe,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function F8(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}fj.prototype=F8.prototype={fork(){const e=new F8(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,i=n.dataflow,r=e.value;if(n.set(e.id,t),mpe(e.type)&&r&&(r.$ingest?i.ingest(t,r.$ingest,r.$format):r.$request?i.preload(t,r.$request,r.$format):i.pulse(t,i.changeset().insert(r))),e.root&&(n.root=t),e.parent){let a=n.get(e.parent.$ref);a?(i.connect(a,[t]),t.targets().add(a)):(n.unresolved=n.unresolved||[]).push(()=>{a=n.get(e.parent.$ref),i.connect(a,[t]),t.targets().add(a)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const a in e.data){const s=n.data[a]||(n.data[a]={});e.data[a].forEach(o=>s[o]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[DM(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,i,r){this.dataflow.on(t,n,i,r,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:dpe,parseOperator:bpe,parseOperatorParameters:xpe,parseParameters:Spe,parseStream:Ope,parseUpdate:Rpe,getState:Npe,setState:zpe};function Fpe(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),dj(t,e.description()))}function dj(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function Lpe(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const rw="default";function Bpe(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:rw,item:null}));e.on(e.events("view","pointermove"),t,(n,i)=>{const r=t.value,a=r?Ee(r)?r:r.user:rw,s=i.item&&i.item.cursor||null;return r&&a===r.user&&s==r.item?r:{user:a,item:s}}),e.add(null,function(n){let i=n.cursor,r=this.value;return Ee(i)||(r=i.item,i=i.user),hC(e,i&&i!==rw?i:r||i),r},{cursor:t})}function hC(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hv(e,t){var n=e._runtime.data;return Se(n,t)||te("Unrecognized data set: "+t),n[t]}function Upe(e,t){return arguments.length<2?hv(this,e).values.value:Gb.call(this,e,ac().remove(Or).insert(t))}function Gb(e,t){ML(t)||te("Second argument to changes must be a changeset.");const n=hv(this,e);return n.modified=!0,this.pulse(n.input,t)}function qpe(e,t){return Gb.call(this,e,ac().insert(t))}function Ppe(e,t){return Gb.call(this,e,ac().remove(t))}function hj(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function gj(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function Yb(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function Ipe(e){var t=Yb(e),n=hj(e),i=gj(e);e._renderer.background(e.background()),e._renderer.resize(n,i,t),e._handler.origin(t),e._resizeListeners.forEach(r=>{try{r(n,i)}catch(a){e.error(a)}})}function jpe(e,t,n){var i=e._renderer,r=i&&i.canvas(),a,s,o;return r&&(o=Yb(e),s=t.changedTouches?t.changedTouches[0]:t,a=Ob(s,r),a[0]-=o[0],a[1]-=o[1]),t.dataflow=e,t.item=n,t.vega=Hpe(e,n,a),t}function Hpe(e,t,n){const i=t?t.mark.marktype==="group"?t:t.mark.group:null;function r(s){var o=i,l;if(s){for(l=t;l;l=l.mark.group)if(l.mark.name===s){o=l;break}}return o&&o.mark&&o.mark.interactive?o:{}}function a(s){if(!s)return n;Ee(s)&&(s=r(s));const o=n.slice();for(;s;)o[0]-=s.x||0,o[1]-=s.y||0,s=s.mark&&s.mark.group;return o}return{view:ni(e),item:ni(t||{}),group:r,xy:a,x:s=>a(s)[0],y:s=>a(s)[1]}}const L8="view",Gpe="timer",Ype="window",Xpe={trap:!1};function Vpe(e){const t=qe({defaults:{}},e),n=(i,r)=>{r.forEach(a=>{re(i[a])&&(i[a]=ra(i[a]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function pj(e,t,n,i){e._eventListeners.push({type:n,sources:ve(t),handler:i})}function Wpe(e,t){var n=e._eventConfig.defaults,i=n.prevent,r=n.allow;return i===!1||r===!0?!1:i===!0||r===!1?!0:i?i[t]:r?!r[t]:e.preventDefault()}function d1(e,t,n){const i=e._eventConfig&&e._eventConfig[t];return i===!1||xe(i)&&!i[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function Qpe(e,t,n){var i=this,r=new tb(n),a=function(f,d){i.runAsync(null,()=>{e===L8&&Wpe(i,t)&&f.preventDefault(),r.receive(jpe(i,f,d))})},s;if(e===Gpe)d1(i,"timer",t)&&i.timer(a,t);else if(e===L8)d1(i,"view",t)&&i.addEventListener(t,a,Xpe);else if(e===Ype?d1(i,"window",t)&&typeof window<"u"&&(s=[window]):typeof document<"u"&&d1(i,"selector",t)&&(s=Array.from(document.querySelectorAll(e))),!s)i.warn("Can not resolve event source: "+e);else{for(var o=0,l=s.length;o<l;++o)s[o].addEventListener(t,a);pj(i,s,t,a)}return r}function B8(e){return e.item}function U8(e){return e.item.mark.source}function q8(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function Zpe(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",B8),U8,q8(e)),this.on(this.events("view","pointerout",B8),U8,q8(t)),this}function Kpe(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),i=this._eventListeners,r,a,s,o,l;for(r=t.length;--r>=0;)t[r].stop();for(r=i.length;--r>=0;)for(s=i[r],a=s.sources.length;--a>=0;)s.sources[a].removeEventListener(s.type,s.handler);for(e&&e.call(this,this._handler,null,null,null),r=n.length;--r>=0;)l=n[r].type,o=n[r].handler,this._handler.off(l,o);return this}function rr(e,t,n){const i=document.createElement(e);for(const r in t)i.setAttribute(r,t[r]);return n!=null&&(i.textContent=n),i}const Jpe="vega-bind",e0e="vega-bind-name",t0e="vega-bind-radio";function n0e(e,t,n){if(!t)return;const i=n.param;let r=n.state;return r||(r=n.state={elements:null,active:!1,set:null,update:s=>{s!=e.signal(i.signal)&&e.runAsync(null,()=>{r.source=!0,e.signal(i.signal,s)})}},i.debounce&&(r.update=p$(i.debounce,r.update))),(i.input==null&&i.element?i0e:a0e)(r,t,i,e),r.active||(e.on(e._signals[i.signal],null,()=>{r.source?r.source=!1:r.set(e.signal(i.signal))}),r.active=!0),r}function i0e(e,t,n,i){const r=n.event||"input",a=()=>e.update(t.value);i.signal(n.signal,t.value),t.addEventListener(r,a),pj(i,t,r,a),e.set=s=>{t.value=s,t.dispatchEvent(r0e(r))}}function r0e(e){return typeof Event<"u"?new Event(e):{type:e}}function a0e(e,t,n,i){const r=i.signal(n.signal),a=rr("div",{class:Jpe}),s=n.input==="radio"?a:a.appendChild(rr("label"));s.appendChild(rr("span",{class:e0e},n.name||n.signal)),t.appendChild(a);let o=s0e;switch(n.input){case"checkbox":o=o0e;break;case"select":o=u0e;break;case"radio":o=l0e;break;case"range":o=c0e;break}o(e,s,n,r)}function s0e(e,t,n,i){const r=rr("input");for(const a in n)a!=="signal"&&a!=="element"&&r.setAttribute(a==="input"?"type":a,n[a]);r.setAttribute("name",n.signal),r.value=i,t.appendChild(r),r.addEventListener("input",()=>e.update(r.value)),e.elements=[r],e.set=a=>r.value=a}function o0e(e,t,n,i){const r={type:"checkbox",name:n.signal};i&&(r.checked=!0);const a=rr("input",r);t.appendChild(a),a.addEventListener("change",()=>e.update(a.checked)),e.elements=[a],e.set=s=>a.checked=!!s||null}function u0e(e,t,n,i){const r=rr("select",{name:n.signal}),a=n.labels||[];n.options.forEach((s,o)=>{const l={value:s};gv(s,i)&&(l.selected=!0),r.appendChild(rr("option",l,(a[o]||s)+""))}),t.appendChild(r),r.addEventListener("change",()=>{e.update(n.options[r.selectedIndex])}),e.elements=[r],e.set=s=>{for(let o=0,l=n.options.length;o<l;++o)if(gv(n.options[o],s)){r.selectedIndex=o;return}}}function l0e(e,t,n,i){const r=rr("span",{class:t0e}),a=n.labels||[];t.appendChild(r),e.elements=n.options.map((s,o)=>{const l={type:"radio",name:n.signal,value:s};gv(s,i)&&(l.checked=!0);const f=rr("input",l);f.addEventListener("change",()=>e.update(s));const d=rr("label",{},(a[o]||s)+"");return d.prepend(f),r.appendChild(d),f}),e.set=s=>{const o=e.elements,l=o.length;for(let f=0;f<l;++f)gv(o[f].value,s)&&(o[f].checked=!0)}}function c0e(e,t,n,i){i=i!==void 0?i:(+n.max+ +n.min)/2;const r=n.max!=null?n.max:Math.max(100,+i)||100,a=n.min||Math.min(0,r,+i)||0,s=n.step||lu(a,r,100),o=rr("input",{type:"range",name:n.signal,min:a,max:r,step:s});o.value=i;const l=rr("span",{},+i);t.appendChild(o),t.appendChild(l);const f=()=>{l.textContent=o.value,e.update(+o.value)};o.addEventListener("input",f),o.addEventListener("change",f),e.elements=[o],e.set=d=>{o.value=d,l.textContent=d}}function gv(e,t){return e===t||e+""==t+""}function mj(e,t,n,i,r,a){return t=t||new i(e.loader()),t.initialize(n,hj(e),gj(e),Yb(e),r,a).background(e.background())}function NM(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function f0e(e,t,n,i){const r=new i(e.loader(),NM(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,Yb(e),e);return t&&t.handlers().forEach(a=>{r.on(a.type,a.handler)}),r}function d0e(e,t){const n=this,i=n._renderType,r=n._eventConfig.bind,a=Rb(i);e=n._el=e?aw(n,e,!0):null,Fpe(n),a||n.error("Unrecognized renderer type: "+i);const s=a.handler||Kp,o=e?a.renderer:a.headless;return n._renderer=o?mj(n,n._renderer,e,o):null,n._handler=f0e(n,n._handler,e,s),n._redraw=!0,e&&r!=="none"&&(t=t?n._elBind=aw(n,t,!0):e.appendChild(rr("form",{class:"vega-bindings"})),n._bind.forEach(l=>{l.param.element&&r!=="container"&&(l.element=aw(n,l.param.element,!!l.param.input))}),n._bind.forEach(l=>{n0e(n,l.element||t,l)})),n}function aw(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(i){t=null,e.error(i)}return t}const ag=e=>+e||0,h0e=e=>({top:e,bottom:e,left:e,right:e});function P8(e){return xe(e)?{top:ag(e.top),bottom:ag(e.bottom),left:ag(e.left),right:ag(e.right)}:h0e(ag(e))}async function zM(e,t,n,i){const r=Rb(t),a=r&&r.headless;return a||te("Unrecognized renderer type: "+t),await e.runAsync(),mj(e,null,null,a,n,i).renderAsync(e._scenegraph.root)}async function g0e(e,t){e!==Wo.Canvas&&e!==Wo.SVG&&e!==Wo.PNG&&te("Unrecognized image type: "+e);const n=await zM(this,e,t);return e===Wo.SVG?p0e(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function p0e(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function m0e(e,t){return(await zM(this,Wo.Canvas,e,t)).canvas()}async function y0e(e){return(await zM(this,Wo.SVG,e)).svg()}function v0e(e,t,n){return cj(e,jf,vp,n).parse(t)}function b0e(e){var t=this._runtime.scales;return Se(t,e)||te("Unrecognized scale or projection: "+e),t[e].value}var yj="width",vj="height",FM="padding",I8={skip:!0};function bj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===FM?i.left+i.right:0)}function xj(e,t){var n=e.autosize(),i=e.padding();return t-(n&&n.contains===FM?i.top+i.bottom:0)}function x0e(e){var t=e._signals,n=t[yj],i=t[vj],r=t[FM];function a(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,o=>{e._width=o.size,e._viewWidth=bj(e,o.size),a()},{size:n}),e._resizeHeight=e.add(null,o=>{e._height=o.size,e._viewHeight=xj(e,o.size),a()},{size:i});const s=e.add(null,a,{pad:r});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=i.rank+1,s.rank=r.rank+1}function S0e(e,t,n,i,r,a){this.runAfter(s=>{let o=0;s._autosize=0,s.width()!==n&&(o=1,s.signal(yj,n,I8),s._resizeWidth.skip(!0)),s.height()!==i&&(o=1,s.signal(vj,i,I8),s._resizeHeight.skip(!0)),s._viewWidth!==e&&(s._resize=1,s._viewWidth=e),s._viewHeight!==t&&(s._resize=1,s._viewHeight=t),(s._origin[0]!==r[0]||s._origin[1]!==r[1])&&(s._resize=1,s._origin=r),o&&s.run("enter"),a&&s.runAfter(l=>l.resize())},!1,1)}function E0e(e){return this._runtime.getState(e||{data:_0e,signals:w0e,recurse:!0})}function _0e(e,t){return t.modified&&re(t.input.value)&&!e.startsWith("_:vega:_")}function w0e(e,t){return!(e==="parent"||t instanceof jf.proxy)}function A0e(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function C0e(e,t){function n(i){e({timestamp:Date.now(),elapsed:i})}this._timers.push(Qle(n,t))}function $0e(e,t,n,i){const r=e.element();r&&r.setAttribute("title",T0e(i))}function T0e(e){return e==null?"":re(e)?Sj(e):xe(e)&&!nu(e)?M0e(e):e+""}function M0e(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(re(n)?Sj(n):Ej(n))}).join(`
`)}function Sj(e){return"["+e.map(Ej).join(", ")+"]"}function Ej(e){return re(e)?"[…]":xe(e)&&!nu(e)?"{…}":e}function k0e(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e?.();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function _j(e,t){const n=this;if(t=t||{},Tf.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const a=qe({},e.locale,t.locale);n.locale(bL(a.number,a.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||Wo.Canvas,n._scenegraph=new yq;const i=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||$0e,n._redraw=!0,n._handler=new Kp().scene(i),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=Vpe(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const r=v0e(n,e,t.expr);n._runtime=r,n._signals=r.signals,n._bind=(e.bindings||[]).map(a=>({state:null,param:qe({},a)})),r.root&&r.root.set(i),i.source=r.data.root.input,n.pulse(r.data.root.input,n.changeset().insert(i.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=bj(n,n._width),n._viewHeight=xj(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,x0e(n),Lpe(n),Bpe(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function h1(e,t){return Se(e._signals,t)?e._signals[t]:te("Unrecognized signal name: "+he(t))}function wj(e,t){const n=(e._targets||[]).filter(i=>i._update&&i._update.handler===t);return n.length?n[0]:null}function j8(e,t,n,i){let r=wj(n,i);return r||(r=NM(e,()=>i(t,n.value)),r.handler=i,e.on(n,null,r)),e}function H8(e,t,n){const i=wj(t,n);return i&&t._targets.remove(i),e}ge(_j,Tf,{async evaluate(e,t,n){if(await Tf.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,Ipe(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(i){this.error(i)}return n&&T1(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&dj(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const i=h1(this,e);return arguments.length===1?i.value:this.update(i,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",P8(e)):P8(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(Rb(e)||te("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(Tf.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(h1(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:S0e,addEventListener(e,t,n){let i=t;return n&&n.trap===!1||(i=NM(this,t),i.raw=t),this._handler.on(e,i),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),i=n.length,r,a;--i>=0;)if(a=n[i].type,r=n[i].handler,e===a&&(t===r||t===r.raw)){this._handler.off(a,r);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return j8(this,e,h1(this,e),t)},removeSignalListener(e,t){return H8(this,h1(this,e),t)},addDataListener(e,t){return j8(this,e,hv(this,e).values,t)},removeDataListener(e,t){return H8(this,hv(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=hC(this,null);this._globalCursor=!!e,t&&hC(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:C0e,events:Qpe,finalize:Kpe,hover:Zpe,data:Upe,change:Gb,insert:qpe,remove:Ppe,scale:b0e,initialize:d0e,toImageURL:g0e,toCanvas:m0e,toSVG:y0e,getState:E0e,setState:A0e,_watchPixelRatio:k0e});const O0e="view",pv="[",mv="]",Aj="{",Cj="}",R0e=":",$j=",",D0e="@",N0e=">",z0e=/[[\]{}]/,F0e={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Tj,Mj;function Tu(e,t,n){return Tj=t||O0e,Mj=n||F0e,kj(e.trim()).map(gC)}function L0e(e){return Mj[e]}function Vg(e,t,n,i,r){const a=e.length;let s=0,o;for(;t<a;++t){if(o=e[t],!s&&o===n)return t;r&&r.includes(o)?--s:i&&i.includes(o)&&++s}return t}function kj(e){const t=[],n=e.length;let i=0,r=0;for(;r<n;)r=Vg(e,r,$j,pv+Aj,mv+Cj),t.push(e.substring(i,r).trim()),i=++r;if(t.length===0)throw"Empty event selector: "+e;return t}function gC(e){return e[0]==="["?B0e(e):U0e(e)}function B0e(e){const t=e.length;let n=1,i;if(n=Vg(e,n,mv,pv,mv),n===t)throw"Empty between selector: "+e;if(i=kj(e.substring(1,n)),i.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==N0e)throw"Expected '>' after between selector: "+e;i=i.map(gC);const r=gC(e.slice(1).trim());return r.between?{between:i,stream:r}:(r.between=i,r)}function U0e(e){const t={source:Tj},n=[];let i=[0,0],r=0,a=0,s=e.length,o=0,l,f;if(e[s-1]===Cj){if(o=e.lastIndexOf(Aj),o>=0){try{i=q0e(e.substring(o+1,s-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,o).trim(),s=e.length}else throw"Unmatched right brace: "+e;o=0}if(!s)throw e;if(e[0]===D0e&&(r=++o),l=Vg(e,o,R0e),l<s&&(n.push(e.substring(a,l).trim()),a=o=++l),o=Vg(e,o,pv),o===s)n.push(e.substring(a,s).trim());else if(n.push(e.substring(a,o).trim()),f=[],a=++o,a===s)throw"Unmatched left bracket: "+e;for(;o<s;){if(o=Vg(e,o,mv),o===s)throw"Unmatched left bracket: "+e;if(f.push(e.substring(a,o).trim()),o<s-1&&e[++o]!==pv)throw"Expected left bracket: "+e;a=++o}if(!(s=n.length)||z0e.test(n[s-1]))throw"Invalid event selector: "+e;return s>1?(t.type=n[1],r?t.markname=n[0].slice(1):L0e(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),f!=null&&(t.filter=f),i[0]&&(t.throttle=i[0]),i[1]&&(t.debounce=i[1]),t}function q0e(e){const t=e.split($j);if(!e.length||t.length>2)throw e;return t.map(n=>{const i=+n;if(i!==i)throw e;return i})}function P0e(e){return xe(e)?e:{type:e||"pad"}}const sg=e=>+e||0,I0e=e=>({top:e,bottom:e,left:e,right:e});function j0e(e){return xe(e)?e.signal?e:{top:sg(e.top),bottom:sg(e.bottom),left:sg(e.left),right:sg(e.right)}:I0e(sg(e))}const En=e=>xe(e)&&!re(e)?qe({},e):{value:e};function G8(e,t,n,i){return n!=null?(xe(n)&&!re(n)||re(n)&&n.length&&xe(n[0])?e.update[t]=n:e[i||"enter"][t]={value:n},1):0}function Bn(e,t,n){for(const i in t)G8(e,i,t[i]);for(const i in n)G8(e,i,n[i],"update")}function Dd(e,t,n){for(const i in t)n&&Se(n,i)||(e[i]=qe(e[i]||{},t[i]));return e}function bf(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const LM="mark",BM="frame",UM="scope",H0e="axis",G0e="axis-domain",Y0e="axis-grid",X0e="axis-label",V0e="axis-tick",W0e="axis-title",Q0e="legend",Z0e="legend-band",K0e="legend-entry",J0e="legend-gradient",Oj="legend-label",eme="legend-symbol",tme="legend-title",nme="title",ime="title-text",rme="title-subtitle";function ame(e,t,n,i,r){const a={},s={};let o,l,f,d;l="lineBreak",t==="text"&&r[l]!=null&&!bf(l,e)&&sw(a,l,r[l]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),d=n===BM?r.group:n===LM?qe({},r.mark,r[t]):null;for(l in d)f=bf(l,e)||(l==="fill"||l==="stroke")&&(bf("fill",e)||bf("stroke",e)),f||sw(a,l,d[l]);ve(i).forEach(h=>{const p=r.style&&r.style[h];for(const y in p)bf(y,e)||sw(a,y,p[y])}),e=qe({},e);for(l in a)d=a[l],d.signal?(o=o||{})[l]=d:s[l]=d;return e.enter=qe(s,e.enter),o&&(e.update=qe(o,e.update)),e}function sw(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const Rj=e=>Ee(e)?he(e):e.signal?`(${e.signal})`:Dj(e);function Xb(e){if(e.gradient!=null)return ome(e);let t=e.signal?`(${e.signal})`:e.color?sme(e.color):e.field!=null?Dj(e.field):e.value!==void 0?he(e.value):void 0;return e.scale!=null&&(t=ume(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${Y1(e.exponent)})`),e.mult!=null&&(t+=`*${Y1(e.mult)}`),e.offset!=null&&(t+=`+${Y1(e.offset)}`),e.round&&(t=`round(${t})`),t}const g1=(e,t,n,i)=>`(${e}(${[t,n,i].map(Xb).join(",")})+'')`;function sme(e){return e.c?g1("hcl",e.h,e.c,e.l):e.h||e.s?g1("hsl",e.h,e.s,e.l):e.l||e.a?g1("lab",e.l,e.a,e.b):e.r||e.g||e.b?g1("rgb",e.r,e.g,e.b):null}function ome(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:he(n));for(;t.length&&Ke(t)==null;)t.pop();return t.unshift(Rj(e.gradient)),`gradient(${t.join(",")})`}function Y1(e){return xe(e)?"("+Xb(e)+")":e}function Dj(e){return Nj(xe(e)?e:{datum:e})}function Nj(e){let t,n,i;if(e.signal)t="datum",i=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(i=e.parent,t+=".datum"):i=e.group}else e.datum?(t="datum",i=e.datum):te("Invalid field reference: "+he(e));return e.signal||(i=Ee(i)?Ka(i).map(he).join("]["):Nj(i)),t+"["+i+"]"}function ume(e,t){const n=Rj(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+Y1(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function lme(e){let t="";return e.forEach(n=>{const i=Xb(n);t+=n.test?`(${n.test})?${i}:`:i}),Ke(t)===":"&&(t+="null"),t}function zj(e,t,n,i,r,a){const s={};a=a||{},a.encoders={$encode:s},e=ame(e,t,n,i,r.config);for(const o in e)s[o]=cme(e[o],t,a,r);return a}function cme(e,t,n,i){const r={},a={};for(const s in e)e[s]!=null&&(r[s]=dme(fme(e[s]),i,n,a));return{$expr:{marktype:t,channels:r},$fields:Object.keys(a),$output:Object.keys(e)}}function fme(e){return re(e)?lme(e):Xb(e)}function dme(e,t,n,i){const r=Va(e,t);return r.$fields.forEach(a=>i[a]=1),qe(n,r.$params),r.$expr}const hme="outer",gme=["value","update","init","react","bind"];function Y8(e,t){te(e+' for "outer" push: '+he(t))}function Fj(e,t){const n=e.name;if(e.push===hme)t.signals[n]||Y8("No prior signal definition",n),gme.forEach(i=>{e[i]!==void 0&&Y8("Invalid property ",i)});else{const i=t.addSignal(n,e.value);e.react===!1&&(i.react=!1),e.bind&&t.addBinding(n,e.bind)}}function pC(e,t,n,i){this.id=-1,this.type=e,this.value=t,this.params=n,i&&(this.parent=i)}function Vb(e,t,n,i){return new pC(e,t,n,i)}function yv(e,t){return Vb("operator",e,t)}function Te(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function bp(e,t){return t?{$field:e,$name:t}:{$field:e}}const mC=bp("key");function X8(e,t){return{$compare:e,$order:t}}function pme(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const mme="ascending",yme="descending";function vme(e){return xe(e)?(e.order===yme?"-":"+")+Wb(e.op,e.field):""}function Wb(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const qM="scope",yC="view";function cn(e){return e&&e.signal}function bme(e){return e&&e.expr}function X1(e){if(cn(e))return!0;if(xe(e)){for(const t in e)if(X1(e[t]))return!0}return!1}function Xr(e,t){return e??t}function Tl(e){return e&&e.signal||e}const V8="timer";function xp(e,t){return(e.merge?Sme:e.stream?Eme:e.type?_me:te("Invalid stream specification: "+he(e)))(e,t)}function xme(e){return e===qM?yC:e||yC}function Sme(e,t){const n=e.merge.map(r=>xp(r,t)),i=PM({merge:n},e,t);return t.addStream(i).id}function Eme(e,t){const n=xp(e.stream,t),i=PM({stream:n},e,t);return t.addStream(i).id}function _me(e,t){let n;e.type===V8?(n=t.event(V8,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(xme(e.source),e.type);const i=PM({stream:n},e,t);return Object.keys(i).length===1?n:t.addStream(i).id}function PM(e,t,n){let i=t.between;return i&&(i.length!==2&&te('Stream "between" parameter must have 2 entries: '+he(t)),e.between=[xp(i[0],n),xp(i[1],n)]),i=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&i.push(wme(t.marktype,t.markname,t.markrole)),t.source===qM&&i.push("inScope(event.item)"),i.length&&(e.filter=Va("("+i.join(")&&(")+")",n).$expr),(i=t.throttle)!=null&&(e.throttle=+i),(i=t.debounce)!=null&&(e.debounce=+i),t.consume&&(e.consume=!0),e}function wme(e,t,n){const i="event.item";return i+(e&&e!=="*"?"&&"+i+".mark.marktype==='"+e+"'":"")+(n?"&&"+i+".mark.role==='"+n+"'":"")+(t?"&&"+i+".mark.name==='"+t+"'":"")}const Ame={code:"_.$value",ast:{type:"Identifier",value:"value"}};function Cme(e,t,n){const i=e.encode,r={target:n};let a=e.events,s=e.update,o=[];a||te("Signal update missing events specification."),Ee(a)&&(a=Tu(a,t.isSubscope()?qM:yC)),a=ve(a).filter(l=>l.signal||l.scale?(o.push(l),0):1),o.length>1&&(o=[Tme(o)]),a.length&&o.push(a.length>1?{merge:a}:a[0]),i!=null&&(s&&te("Signal encode and update are mutually exclusive."),s="encode(item(),"+he(i)+")"),r.update=Ee(s)?Va(s,t):s.expr!=null?Va(s.expr,t):s.value!=null?s.value:s.signal!=null?{$expr:Ame,$params:{$value:t.signalRef(s.signal)}}:te("Invalid signal update specification."),e.force&&(r.options={force:!0}),o.forEach(l=>t.addUpdate(qe($me(l,t),r)))}function $me(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):xp(e,t)}}function Tme(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function Mme(e,t){const n=t.getSignal(e.name);let i=e.update;e.init&&(i?te("Signals can not include both init and update expressions."):(i=e.init,n.initonly=!0)),i&&(i=Va(i,t),n.update=i.$expr,n.params=i.$params),e.on&&e.on.forEach(r=>Cme(r,t,n.id))}const St=e=>(t,n,i)=>Vb(e,n,t||void 0,i),Lj=St("aggregate"),kme=St("axisticks"),Bj=St("bound"),ga=St("collect"),W8=St("compare"),Ome=St("datajoin"),Uj=St("encode"),Rme=St("expression"),Dme=St("facet"),Nme=St("field"),zme=St("key"),Fme=St("legendentries"),Lme=St("load"),Bme=St("mark"),Ume=St("multiextent"),qme=St("multivalues"),Pme=St("overlap"),Ime=St("params"),qj=St("prefacet"),jme=St("projection"),Hme=St("proxy"),Gme=St("relay"),Pj=St("render"),Yme=St("scale"),lc=St("sieve"),Xme=St("sortitems"),Ij=St("viewlayout"),Vme=St("values");let Wme=0;const jj={min:"min",max:"max",count:"sum"};function Qme(e,t){const n=e.type||"linear";kU(n)||te("Unrecognized scale type: "+he(n)),t.addScale(e.name,{type:n,domain:void 0})}function Zme(e,t){const n=t.getScale(e.name).params;let i;n.domain=Hj(e.domain,e,t),e.range!=null&&(n.range=Yj(e,t,n)),e.interpolate!=null&&o1e(e.interpolate,n),e.nice!=null&&(n.nice=s1e(e.nice,t)),e.bins!=null&&(n.bins=a1e(e.bins,t));for(i in e)Se(n,i)||i==="name"||(n[i]=Cr(e[i],t))}function Cr(e,t){return xe(e)?e.signal?t.signalRef(e.signal):te("Unsupported object: "+he(e)):e}function V1(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Cr(n,t))}function Qb(e){te("Can not find data set: "+he(e))}function Hj(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&te("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(re(e)?Kme:e.fields?e1e:Jme)(e,t,n)}function Kme(e,t,n){return e.map(i=>Cr(i,n))}function Jme(e,t,n){const i=n.getData(e.data);return i||Qb(e.data),Vf(t.type)?i.valuesRef(n,e.field,Gj(e.sort,!1)):DU(t.type)?i.domainRef(n,e.field):i.extentRef(n,e.field)}function e1e(e,t,n){const i=e.data,r=e.fields.reduce((a,s)=>(s=Ee(s)?{data:i,field:s}:re(s)||s.signal?t1e(s,n):s,a.push(s),a),[]);return(Vf(t.type)?n1e:DU(t.type)?i1e:r1e)(e,n,r)}function t1e(e,t){const n="_:vega:_"+Wme++,i=ga({});if(re(e))i.value={$ingest:e};else if(e.signal){const r="setdata("+he(n)+","+e.signal+")";i.params.input=t.signalRef(r)}return t.addDataPipeline(n,[i,lc({})]),{data:n,field:"data"}}function n1e(e,t,n){const i=Gj(e.sort,!0);let r,a;const s=n.map(f=>{const d=t.getData(f.data);return d||Qb(f.data),d.countsRef(t,f.field,i)}),o={groupby:mC,pulse:s};i&&(r=i.op||"count",a=i.field?Wb(r,i.field):"count",o.ops=[jj[r]],o.fields=[t.fieldRef(a)],o.as=[a]),r=t.add(Lj(o));const l=t.add(ga({pulse:Te(r)}));return a=t.add(Vme({field:mC,sort:t.sortRef(i),pulse:Te(l)})),Te(a)}function Gj(e,t){return e&&(!e.field&&!e.op?xe(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?te("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!jj[e.op]&&te("Multiple domain scales can not be sorted using "+e.op)),e}function i1e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Qb(r.data),a.domainRef(t,r.field)});return Te(t.add(qme({values:i})))}function r1e(e,t,n){const i=n.map(r=>{const a=t.getData(r.data);return a||Qb(r.data),a.extentRef(t,r.field)});return Te(t.add(Ume({extents:i})))}function a1e(e,t){return e.signal||re(e)?V1(e,t):t.objectProperty(e)}function s1e(e,t){return e.signal?t.signalRef(e.signal):xe(e)?{interval:Cr(e.interval),step:Cr(e.step)}:Cr(e)}function o1e(e,t){t.interpolate=Cr(e.type||e),e.gamma!=null&&(t.interpolateGamma=Cr(e.gamma))}function Yj(e,t,n){const i=t.config.range;let r=e.range;if(r.signal)return t.signalRef(r.signal);if(Ee(r)){if(i&&Se(i,r))return e=qe({},e,{range:i[r]}),Yj(e,t,n);r==="width"?r=[0,{signal:"width"}]:r==="height"?r=Vf(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:te("Unrecognized scale range value: "+he(r))}else if(r.scheme){n.scheme=re(r.scheme)?V1(r.scheme,t):Cr(r.scheme,t),r.extent&&(n.schemeExtent=V1(r.extent,t)),r.count&&(n.schemeCount=Cr(r.count,t));return}else if(r.step){n.rangeStep=Cr(r.step,t);return}else{if(Vf(e.type)&&!re(r))return Hj(r,e,t);re(r)||te("Unsupported range type: "+he(r))}return r.map(a=>(re(a)?V1:Cr)(a,t))}function u1e(e,t){const n=t.config.projection||{},i={};for(const r in e)r!=="name"&&(i[r]=vC(e[r],r,t));for(const r in n)i[r]==null&&(i[r]=vC(n[r],r,t));t.addProjection(e.name,i)}function vC(e,t,n){return re(e)?e.map(i=>vC(i,t,n)):xe(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:te("Unsupported parameter object: "+he(e)):e}const pa="top",Nd="left",zd="right",yu="bottom",Xj="center",l1e="vertical",c1e="start",f1e="middle",d1e="end",bC="index",IM="label",h1e="offset",id="perc",g1e="perc2",Tr="value",o0="guide-label",jM="guide-title",p1e="group-title",m1e="group-subtitle",Q8="symbol",W1="gradient",xC="discrete",SC="size",y1e="shape",v1e="fill",b1e="stroke",x1e="strokeWidth",S1e="strokeDash",E1e="opacity",HM=[SC,y1e,v1e,b1e,x1e,S1e,E1e],u0={name:1,style:1,interactive:1},et={value:0},Mr={value:1},Zb="group",Vj="rect",GM="rule",_1e="symbol",cc="text";function Sp(e){return e.type=Zb,e.interactive=e.interactive||!1,e}function qi(e,t){const n=(i,r)=>Xr(e[i],Xr(t[i],r));return n.isVertical=i=>l1e===Xr(e.direction,t.direction||(i?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Xr(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Xr(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Xr(e.columns,Xr(t.columns,+n.isVertical(!0))),n}function Wj(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function w1e(e,t,n){const i=t.config.style[n];return i&&i[e]}function Kb(e,t,n){return`item.anchor === '${c1e}' ? ${e} : item.anchor === '${d1e}' ? ${t} : ${n}`}const YM=Kb(he(Nd),he(zd),he(Xj));function A1e(e){const t=e("tickBand");let n=e("tickOffset"),i,r;return t?t.signal?(i={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},r={signal:`(${t.signal}) === 'extent'`},xe(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(i=1,r=!0,n=0):(i=.5,r=!1):(i=e("bandPosition"),r=e("tickExtra")),{extra:r,band:i,offset:n}}function Qj(e,t){return t?e?xe(e)?Object.assign({},e,{offset:Qj(e.offset,t)}):{value:e,offset:t}:t:e}function cr(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=Dd(e.encode,t,u0)):e.interactive=!1,e}function C1e(e,t,n,i){const r=qi(e,n),a=r.isVertical(),s=r.gradientThickness(),o=r.gradientLength();let l,f,d,h,p;a?(f=[0,1],d=[0,0],h=s,p=o):(f=[0,0],d=[1,0],h=o,p=s);const y={enter:l={opacity:et,x:et,y:et,width:En(h),height:En(p)},update:qe({},l,{opacity:Mr,fill:{gradient:t,start:f,stop:d}}),exit:{opacity:et}};return Bn(y,{stroke:r("gradientStrokeColor"),strokeWidth:r("gradientStrokeWidth")},{opacity:r("gradientOpacity")}),cr({type:Vj,role:J0e,encode:y},i)}function $1e(e,t,n,i,r){const a=qi(e,n),s=a.isVertical(),o=a.gradientThickness(),l=a.gradientLength();let f,d,h,p,y="";s?(f="y",h="y2",d="x",p="width",y="1-"):(f="x",h="x2",d="y",p="height");const v={opacity:et,fill:{scale:t,field:Tr}};v[f]={signal:y+"datum."+id,mult:l},v[d]=et,v[h]={signal:y+"datum."+g1e,mult:l},v[p]=En(o);const b={enter:v,update:qe({},v,{opacity:Mr}),exit:{opacity:et}};return Bn(b,{stroke:a("gradientStrokeColor"),strokeWidth:a("gradientStrokeWidth")},{opacity:a("gradientOpacity")}),cr({type:Vj,role:Z0e,key:Tr,from:r,encode:b},i)}const T1e=`datum.${id}<=0?"${Nd}":datum.${id}>=1?"${zd}":"${Xj}"`,M1e=`datum.${id}<=0?"${yu}":datum.${id}>=1?"${pa}":"${f1e}"`;function Z8(e,t,n,i){const r=qi(e,t),a=r.isVertical(),s=En(r.gradientThickness()),o=r.gradientLength();let l=r("labelOverlap"),f,d,h,p,y="";const v={enter:f={opacity:et},update:d={opacity:Mr,text:{field:IM}},exit:{opacity:et}};return Bn(v,{fill:r("labelColor"),fillOpacity:r("labelOpacity"),font:r("labelFont"),fontSize:r("labelFontSize"),fontStyle:r("labelFontStyle"),fontWeight:r("labelFontWeight"),limit:Xr(e.labelLimit,t.gradientLabelLimit)}),a?(f.align={value:"left"},f.baseline=d.baseline={signal:M1e},h="y",p="x",y="1-"):(f.align=d.align={signal:T1e},f.baseline={value:"top"},h="x",p="y"),f[h]=d[h]={signal:y+"datum."+id,mult:o},f[p]=d[p]=s,s.offset=Xr(e.labelOffset,t.gradientLabelOffset)||0,l=l?{separation:r("labelSeparation"),method:l,order:"datum."+bC}:void 0,cr({type:cc,role:Oj,style:o0,key:Tr,from:i,encode:v,overlap:l},n)}function k1e(e,t,n,i,r){const a=qi(e,t),s=n.entries,o=!!(s&&s.interactive),l=s?s.name:void 0,f=a("clipHeight"),d=a("symbolOffset"),h={data:"value"},p=`(${r}) ? datum.${h1e} : datum.${SC}`,y=f?En(f):{field:SC},v=`datum.${bC}`,b=`max(1, ${r})`;let S,_,w,A,C;y.mult=.5,S={enter:_={opacity:et,x:{signal:p,mult:.5,offset:d},y},update:w={opacity:Mr,x:_.x,y:_.y},exit:{opacity:et}};let T=null,k=null;e.fill||(T=t.symbolBaseFillColor,k=t.symbolBaseStrokeColor),Bn(S,{fill:a("symbolFillColor",T),shape:a("symbolType"),size:a("symbolSize"),stroke:a("symbolStrokeColor",k),strokeDash:a("symbolDash"),strokeDashOffset:a("symbolDashOffset"),strokeWidth:a("symbolStrokeWidth")},{opacity:a("symbolOpacity")}),HM.forEach(U=>{e[U]&&(w[U]=_[U]={scale:e[U],field:Tr})});const M=cr({type:_1e,role:eme,key:Tr,from:h,clip:f?!0:void 0,encode:S},n.symbols),R=En(d);R.offset=a("labelOffset"),S={enter:_={opacity:et,x:{signal:p,offset:R},y},update:w={opacity:Mr,text:{field:IM},x:_.x,y:_.y},exit:{opacity:et}},Bn(S,{align:a("labelAlign"),baseline:a("labelBaseline"),fill:a("labelColor"),fillOpacity:a("labelOpacity"),font:a("labelFont"),fontSize:a("labelFontSize"),fontStyle:a("labelFontStyle"),fontWeight:a("labelFontWeight"),limit:a("labelLimit")});const z=cr({type:cc,role:Oj,style:o0,key:Tr,from:h,encode:S},n.labels);return S={enter:{noBound:{value:!f},width:et,height:f?En(f):et,opacity:et},exit:{opacity:et},update:w={opacity:Mr,row:{signal:null},column:{signal:null}}},a.isVertical(!0)?(A=`ceil(item.mark.items.length / ${b})`,w.row.signal=`${v}%${A}`,w.column.signal=`floor(${v} / ${A})`,C={field:["row",v]}):(w.row.signal=`floor(${v} / ${b})`,w.column.signal=`${v} % ${b}`,C={field:v}),w.column.signal=`(${r})?${w.column.signal}:${v}`,i={facet:{data:i,name:"value",groupby:bC}},Sp({role:UM,from:i,encode:Dd(S,s,u0),marks:[M,z],name:l,interactive:o,sort:C})}function O1e(e,t){const n=qi(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const XM='item.orient === "left"',VM='item.orient === "right"',Jb=`(${XM} || ${VM})`,R1e=`datum.vgrad && ${Jb}`,D1e=Kb('"top"','"bottom"','"middle"'),N1e=Kb('"right"','"left"','"center"'),z1e=`datum.vgrad && ${VM} ? (${N1e}) : (${Jb} && !(datum.vgrad && ${XM})) ? "left" : ${YM}`,F1e=`item._anchor || (${Jb} ? "middle" : "start")`,L1e=`${R1e} ? (${XM} ? -90 : 90) : 0`,B1e=`${Jb} ? (datum.vgrad ? (${VM} ? "bottom" : "top") : ${D1e}) : "top"`;function U1e(e,t,n,i){const r=qi(e,t),a={enter:{opacity:et},update:{opacity:Mr,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:et}};return Bn(a,{orient:r("titleOrient"),_anchor:r("titleAnchor"),anchor:{signal:F1e},angle:{signal:L1e},align:{signal:z1e},baseline:{signal:B1e},text:e.title,fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),baseline:r("titleBaseline")}),cr({type:cc,role:tme,style:jM,from:i,encode:a},n)}function q1e(e,t){let n;return xe(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+K8(e.path)+")":e.sphere&&(n="geoShape("+K8(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function K8(e){return xe(e)&&e.signal?e.signal:he(e)}function Zj(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===Zb?UM:t||LM}function P1e(e){return{marktype:e.type,name:e.name||void 0,role:e.role||Zj(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function I1e(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function WM(e,t){const n=RL(e.type);n||te("Unrecognized transform type: "+he(e.type));const i=Vb(n.type.toLowerCase(),null,Kj(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(i)),i.metadata=n.metadata||{},i}function Kj(e,t,n){const i={},r=e.params.length;for(let a=0;a<r;++a){const s=e.params[a];i[s.name]=j1e(s,t,n)}return i}function j1e(e,t,n){const i=e.type,r=t[e.name];if(i==="index")return H1e(e,t,n);if(r===void 0){e.required&&te("Missing required "+he(t.type)+" parameter: "+he(e.name));return}else{if(i==="param")return G1e(e,t,n);if(i==="projection")return n.projectionRef(t[e.name])}return e.array&&!cn(r)?r.map(a=>J8(e,a,n)):J8(e,r,n)}function J8(e,t,n){const i=e.type;if(cn(t))return tF(i)?te("Expression references can not be signals."):ow(i)?n.fieldRef(t):nF(i)?n.compareRef(t):n.signalRef(t.signal);{const r=e.expr||ow(i);return r&&Y1e(t)?n.exprRef(t.expr,t.as):r&&X1e(t)?bp(t.field,t.as):tF(i)?Va(t,n):V1e(i)?Te(n.getData(t).values):ow(i)?bp(t):nF(i)?n.compareRef(t):t}}function H1e(e,t,n){return Ee(t.from)||te('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function G1e(e,t,n){const i=t[e.name];return e.array?(re(i)||te("Expected an array of sub-parameters. Instead: "+he(i)),i.map(r=>eF(e,r,n))):eF(e,i,n)}function eF(e,t,n){const i=e.params.length;let r;for(let s=0;s<i;++s){r=e.params[s];for(const o in r.key)if(r.key[o]!==t[o]){r=null;break}if(r)break}r||te("Unsupported parameter: "+he(t));const a=qe(Kj(r,t,n),r.key);return Te(n.add(Ime(a)))}const Y1e=e=>e&&e.expr,X1e=e=>e&&e.field,V1e=e=>e==="data",tF=e=>e==="expr",ow=e=>e==="field",nF=e=>e==="compare";function W1e(e,t,n){let i,r,a,s,o;return e?(i=e.facet)&&(t||te("Only group marks can be faceted."),i.field!=null?s=o=Q1(i,n):(e.data?o=Te(n.getData(e.data).aggregate):(a=WM(qe({type:"aggregate",groupby:ve(i.groupby)},i.aggregate),n),a.params.key=n.keyRef(i.groupby),a.params.pulse=Q1(i,n),s=o=Te(n.add(a))),r=n.keyRef(i.groupby,!0))):s=Te(n.add(ga(null,[{}]))),s||(s=Q1(e,n)),{key:r,pulse:s,parent:o}}function Q1(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Te(t.getData(e.data).output)}function Hl(e,t,n,i,r){this.scope=e,this.input=t,this.output=n,this.values=i,this.aggregate=r,this.index={}}Hl.fromEntries=function(e,t){const n=t.length,i=t[n-1],r=t[n-2];let a=t[0],s=null,o=1;for(a&&a.type==="load"&&(a=t[1]),e.add(t[0]);o<n;++o)t[o].params.pulse=Te(t[o-1]),e.add(t[o]),t[o].type==="aggregate"&&(s=t[o]);return new Hl(e,a,r,i,s)};function Jj(e){return Ee(e)?e:null}function iF(e,t,n){const i=Wb(n.op,n.field);let r;if(t.ops){for(let a=0,s=t.as.length;a<s;++a)if(t.as[a]===i)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((r=n.op.signal)?e.signalRef(r):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(i))}function og(e,t,n,i,r,a,s){const o=t[n]||(t[n]={}),l=vme(a);let f=Jj(r),d,h;if(f!=null&&(e=t.scope,f=f+(l?"|"+l:""),d=o[f]),!d){const p=a?{field:mC,pulse:t.countsRef(e,r,a)}:{field:e.fieldRef(r),pulse:Te(t.output)};l&&(p.sort=e.sortRef(a)),h=e.add(Vb(i,void 0,p)),s&&(t.index[r]=h),d=Te(h),f!=null&&(o[f]=d)}return d}Hl.prototype={countsRef(e,t,n){const i=this,r=i.counts||(i.counts={}),a=Jj(t);let s,o,l;return a!=null&&(e=i.scope,s=r[a]),s?n&&n.field&&iF(e,s.agg.params,n):(l={groupby:e.fieldRef(t,"key"),pulse:Te(i.output)},n&&n.field&&iF(e,l,n),o=e.add(Lj(l)),s=e.add(ga({pulse:Te(o)})),s={agg:o,ref:Te(s)},a!=null&&(r[a]=s)),s.ref},tuplesRef(){return Te(this.values)},extentRef(e,t){return og(e,this,"extent","extent",t,!1)},domainRef(e,t){return og(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return og(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return og(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return og(e,this,"indata","tupleindex",t,!0,!0)}};function Q1e(e,t,n){const i=e.from.facet,r=i.name,a=Q1(i,t);let s;i.name||te("Facet must have a name: "+he(i)),i.data||te("Facet must reference a data set: "+he(i)),i.field?s=t.add(qj({field:t.fieldRef(i.field),pulse:a})):i.groupby?s=t.add(Dme({key:t.keyRef(i.groupby),group:Te(t.proxy(n.parent)),pulse:a})):te("Facet must specify groupby or field: "+he(i));const o=t.fork(),l=o.add(ga()),f=o.add(lc({pulse:Te(l)}));o.addData(r,new Hl(o,l,l,f)),o.addSignal("parent",null),s.params.subflow={$subflow:o.parse(e).toRuntime()}}function Z1e(e,t,n){const i=t.add(qj({pulse:n.pulse})),r=t.fork();r.add(lc()),r.addSignal("parent",null),i.params.subflow={$subflow:r.parse(e).toRuntime()}}function eH(e,t,n){const i=e.remove,r=e.insert,a=e.toggle,s=e.modify,o=e.values,l=t.add(yv()),f="if("+e.trigger+',modify("'+n+'",'+[r,i,a,s,o].map(h=>h??"null").join(",")+"),0)",d=Va(f,t);l.update=d.$expr,l.params=d.$params}function ex(e,t){const n=Zj(e),i=e.type===Zb,r=e.from&&e.from.facet,a=e.overlap;let s=e.layout||n===UM||n===BM,o,l,f,d,h,p,y;const v=n===LM||s||r,b=W1e(e.from,i,t);l=t.add(Ome({key:b.key||(e.key?bp(e.key):void 0),pulse:b.pulse,clean:!i}));const S=Te(l);l=f=t.add(ga({pulse:S})),l=t.add(Bme({markdef:P1e(e),interactive:I1e(e.interactive,t),clip:q1e(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Te(l)}));const _=Te(l);l=d=t.add(Uj(zj(e.encode,e.type,n,e.style,t,{mod:!1,pulse:_}))),l.params.parent=t.encode(),e.transform&&e.transform.forEach(k=>{const M=WM(k,t),R=M.metadata;(R.generates||R.changes)&&te("Mark transforms should not generate new data."),R.nomod||(d.params.mod=!0),M.params.pulse=Te(l),t.add(l=M)}),e.sort&&(l=t.add(Xme({sort:t.compareRef(e.sort),pulse:Te(l)})));const w=Te(l);(r||s)&&(s=t.add(Ij({layout:t.objectProperty(e.layout),legends:t.legends,mark:_,pulse:w})),p=Te(s));const A=t.add(Bj({mark:_,pulse:p||w}));y=Te(A),i&&(v&&(o=t.operators,o.pop(),s&&o.pop()),t.pushState(w,p||y,S),r?Q1e(e,t,b):v?Z1e(e,t,b):t.parse(e),t.popState(),v&&(s&&o.push(s),o.push(A))),a&&(y=K1e(a,y,t));const C=t.add(Pj({pulse:y})),T=t.add(lc({pulse:Te(C)},void 0,t.parent()));e.name!=null&&(h=e.name,t.addData(h,new Hl(t,f,C,T)),e.on&&e.on.forEach(k=>{(k.insert||k.remove||k.toggle)&&te("Marks only support modify triggers."),eH(k,t,h)}))}function K1e(e,t,n){const i=e.method,r=e.bound,a=e.separation,s={separation:cn(a)?n.signalRef(a.signal):a,method:cn(i)?n.signalRef(i.signal):i,pulse:t};if(e.order&&(s.sort=n.compareRef({field:e.order})),r){const o=r.tolerance;s.boundTolerance=cn(o)?n.signalRef(o.signal):+o,s.boundScale=n.scaleRef(r.scale),s.boundOrient=r.orient}return Te(n.add(Pme(s)))}function J1e(e,t){const n=t.config.legend,i=e.encode||{},r=qi(e,n),a=i.legend||{},s=a.name||void 0,o=a.interactive,l=a.style,f={};let d=0,h,p,y;HM.forEach(A=>e[A]?(f[A]=e[A],d=d||e[A]):0),d||te("Missing valid scale for legend.");const v=eye(e,t.scaleType(d)),b={title:e.title!=null,scales:f,type:v,vgrad:v!=="symbol"&&r.isVertical()},S=Te(t.add(ga(null,[b]))),_={enter:{x:{value:0},y:{value:0}}},w=Te(t.add(Fme(p={type:v,scale:t.scaleRef(d),count:t.objectProperty(r("tickCount")),limit:t.property(r("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return v===W1?(y=[C1e(e,d,n,i.gradient),Z8(e,n,i.labels,w)],p.count=p.count||t.signalRef(`max(2,2*floor((${Tl(r.gradientLength())})/100))`)):v===xC?y=[$1e(e,d,n,i.gradient,w),Z8(e,n,i.labels,w)]:(h=O1e(e,n),y=[k1e(e,n,i,w,Tl(h.columns))],p.size=iye(e,t,y[0].marks)),y=[Sp({role:K0e,from:S,encode:_,marks:y,layout:h,interactive:o})],b.title&&y.push(U1e(e,n,i.title,S)),ex(Sp({role:Q0e,from:S,encode:Dd(nye(r,e,n),a,u0),marks:y,aria:r("aria"),description:r("description"),zindex:r("zindex"),name:s,interactive:o,style:l}),t)}function eye(e,t){let n=e.type||Q8;return!e.type&&tye(e)===1&&(e.fill||e.stroke)&&(n=WT(t)?W1:dA(t)?xC:Q8),n!==W1?n:dA(t)?xC:W1}function tye(e){return HM.reduce((t,n)=>t+(e[n]?1:0),0)}function nye(e,t,n){const i={enter:{},update:{}};return Bn(i,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),i}function iye(e,t,n){const i=Tl(rF("size",e,n)),r=Tl(rF("strokeWidth",e,n)),a=Tl(rye(n[1].encode,t,o0));return Va(`max(ceil(sqrt(${i})+${r}),${a})`,t)}function rF(e,t,n){return t[e]?`scale("${t[e]}",datum)`:Wj(e,n[0].encode)}function rye(e,t,n){return Wj("fontSize",e)||w1e("fontSize",t,n)}const aye=`item.orient==="${Nd}"?-90:item.orient==="${zd}"?90:0`;function sye(e,t){e=Ee(e)?{text:e}:e;const n=qi(e,t.config.title),i=e.encode||{},r=i.group||{},a=r.name||void 0,s=r.interactive,o=r.style,l=[],f={},d=Te(t.add(ga(null,[f])));return l.push(lye(e,n,oye(e),d)),e.subtitle&&l.push(cye(e,n,i.subtitle,d)),ex(Sp({role:nme,from:d,encode:uye(n,r),marks:l,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:a,interactive:s,style:o}),t)}function oye(e){const t=e.encode;return t&&t.title||qe({name:e.name,interactive:e.interactive,style:e.style},t)}function uye(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:YM},angle:{signal:aye},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),Dd(n,t,u0)}function lye(e,t,n,i){const r={value:0},a=e.text,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:cc,role:ime,style:p1e,from:i,encode:s},n)}function cye(e,t,n,i){const r={value:0},a=e.subtitle,s={enter:{opacity:r},update:{opacity:{value:1}},exit:{opacity:r}};return Bn(s,{text:a,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),cr({type:cc,role:rme,style:m1e,from:i,encode:s},n)}function fye(e,t){const n=[];e.transform&&e.transform.forEach(i=>{n.push(WM(i,t))}),e.on&&e.on.forEach(i=>{eH(i,t,e.name)}),t.addDataPipeline(e.name,dye(e,t,n))}function dye(e,t,n){const i=[];let r=null,a=!1,s=!1,o,l,f,d,h;for(e.values?cn(e.values)||X1(e.format)?(i.push(aF(t,e)),i.push(r=il())):i.push(r=il({$ingest:e.values,$format:e.format})):e.url?X1(e.url)||X1(e.format)?(i.push(aF(t,e)),i.push(r=il())):i.push(r=il({$request:e.url,$format:e.format})):e.source&&(r=o=ve(e.source).map(p=>Te(t.getData(p).output)),i.push(null)),l=0,f=n.length;l<f;++l)d=n[l],h=d.metadata,!r&&!h.source&&i.push(r=il()),i.push(d),h.generates&&(s=!0),h.modifies&&!s&&(a=!0),h.source?r=d:h.changes&&(r=null);return o&&(f=o.length-1,i[0]=Gme({derive:a,pulse:f?o:o[0]}),(a||f)&&i.splice(1,0,il())),r||i.push(il()),i.push(lc({})),i}function il(e){const t=ga({},e);return t.metadata={source:!0},t}function aF(e,t){return Lme({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const tH=e=>e===yu||e===pa,tx=(e,t,n)=>cn(e)?mye(e.signal,t,n):e===Nd||e===pa?t:n,_n=(e,t,n)=>cn(e)?gye(e.signal,t,n):tH(e)?t:n,na=(e,t,n)=>cn(e)?pye(e.signal,t,n):tH(e)?n:t,nH=(e,t,n)=>cn(e)?yye(e.signal,t,n):e===pa?{value:t}:{value:n},hye=(e,t,n)=>cn(e)?vye(e.signal,t,n):e===zd?{value:t}:{value:n},gye=(e,t,n)=>iH(`${e} === '${pa}' || ${e} === '${yu}'`,t,n),pye=(e,t,n)=>iH(`${e} !== '${pa}' && ${e} !== '${yu}'`,t,n),mye=(e,t,n)=>QM(`${e} === '${Nd}' || ${e} === '${pa}'`,t,n),yye=(e,t,n)=>QM(`${e} === '${pa}'`,t,n),vye=(e,t,n)=>QM(`${e} === '${zd}'`,t,n),iH=(e,t,n)=>(t=t!=null?En(t):t,n=n!=null?En(n):n,sF(t)&&sF(n)?(t=t?t.signal||he(t.value):null,n=n?n.signal||he(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[qe({test:e},t)].concat(n||[])),sF=e=>e==null||Object.keys(e).length===1,QM=(e,t,n)=>({signal:`${e} ? (${$f(t)}) : (${$f(n)})`}),bye=(e,t,n,i,r)=>({signal:(i!=null?`${e} === '${Nd}' ? (${$f(i)}) : `:"")+(n!=null?`${e} === '${yu}' ? (${$f(n)}) : `:"")+(r!=null?`${e} === '${zd}' ? (${$f(r)}) : `:"")+(t!=null?`${e} === '${pa}' ? (${$f(t)}) : `:"")+"(null)"}),$f=e=>cn(e)?e.signal:e==null?null:he(e),xye=(e,t)=>t===0?0:cn(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},Rf=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function gf(e,t,n,i){let r;if(t&&Se(t,e))return t[e];if(Se(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":r="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":r=e[5].toLowerCase()+e.slice(6)}return i[jM][r]}else if(e.startsWith("label")){switch(e){case"labelColor":r="fill";break;case"labelFont":case"labelFontSize":r=e[5].toLowerCase()+e.slice(6)}return i[o0][r]}return null}function oF(e){const t={};for(const n of e)if(n)for(const i in n)t[i]=1;return Object.keys(t)}function Sye(e,t){var n=t.config,i=n.style,r=n.axis,a=t.scaleType(e.scale)==="band"&&n.axisBand,s=e.orient,o,l,f;if(cn(s)){const h=oF([n.axisX,n.axisY]),p=oF([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);o={};for(f of h)o[f]=_n(s,gf(f,n.axisX,r,i),gf(f,n.axisY,r,i));l={};for(f of p)l[f]=bye(s.signal,gf(f,n.axisTop,r,i),gf(f,n.axisBottom,r,i),gf(f,n.axisLeft,r,i),gf(f,n.axisRight,r,i))}else o=s===pa||s===yu?n.axisX:n.axisY,l=n["axis"+s[0].toUpperCase()+s.slice(1)];return o||l||a?qe({},r,o,l,a):r}function Eye(e,t,n,i){const r=qi(e,t),a=e.orient;let s,o;const l={enter:s={opacity:et},update:o={opacity:Mr},exit:{opacity:et}};Bn(l,{stroke:r("domainColor"),strokeCap:r("domainCap"),strokeDash:r("domainDash"),strokeDashOffset:r("domainDashOffset"),strokeWidth:r("domainWidth"),strokeOpacity:r("domainOpacity")});const f=uF(e,0),d=uF(e,1);return s.x=o.x=_n(a,f,et),s.x2=o.x2=_n(a,d),s.y=o.y=na(a,f,et),s.y2=o.y2=na(a,d),cr({type:GM,role:G0e,from:i,encode:l},n)}function uF(e,t){return{scale:e.scale,range:t}}function _ye(e,t,n,i,r){const a=qi(e,t),s=e.orient,o=e.gridScale,l=tx(s,1,-1),f=wye(e.offset,l);let d,h,p;const y={enter:d={opacity:et},update:p={opacity:Mr},exit:h={opacity:et}};Bn(y,{stroke:a("gridColor"),strokeCap:a("gridCap"),strokeDash:a("gridDash"),strokeDashOffset:a("gridDashOffset"),strokeOpacity:a("gridOpacity"),strokeWidth:a("gridWidth")});const v={scale:e.scale,field:Tr,band:r.band,extra:r.extra,offset:r.offset,round:a("tickRound")},b=_n(s,{signal:"height"},{signal:"width"}),S=o?{scale:o,range:0,mult:l,offset:f}:{value:0,offset:f},_=o?{scale:o,range:1,mult:l,offset:f}:qe(b,{mult:l,offset:f});return d.x=p.x=_n(s,v,S),d.y=p.y=na(s,v,S),d.x2=p.x2=na(s,_),d.y2=p.y2=_n(s,_),h.x=_n(s,v),h.y=na(s,v),cr({type:GM,role:Y0e,key:Tr,from:i,encode:y},n)}function wye(e,t){if(t!==1)if(!xe(e))e=cn(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=qe({},e);for(;n.mult!=null;)if(xe(n.mult))n=n.mult=qe({},n.mult);else return n.mult=cn(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Aye(e,t,n,i,r,a){const s=qi(e,t),o=e.orient,l=tx(o,-1,1);let f,d,h;const p={enter:f={opacity:et},update:h={opacity:Mr},exit:d={opacity:et}};Bn(p,{stroke:s("tickColor"),strokeCap:s("tickCap"),strokeDash:s("tickDash"),strokeDashOffset:s("tickDashOffset"),strokeOpacity:s("tickOpacity"),strokeWidth:s("tickWidth")});const y=En(r);y.mult=l;const v={scale:e.scale,field:Tr,band:a.band,extra:a.extra,offset:a.offset,round:s("tickRound")};return h.y=f.y=_n(o,et,v),h.y2=f.y2=_n(o,y),d.x=_n(o,v),h.x=f.x=na(o,et,v),h.x2=f.x2=na(o,y),d.y=na(o,v),cr({type:GM,role:V0e,key:Tr,from:i,encode:p},n)}function uw(e,t,n,i,r){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+i+","+r+")"}}function Cye(e,t,n,i,r,a){const s=qi(e,t),o=e.orient,l=e.scale,f=tx(o,-1,1),d=Tl(s("labelFlush")),h=Tl(s("labelFlushOffset")),p=s("labelAlign"),y=s("labelBaseline");let v=d===0||!!d,b;const S=En(r);S.mult=f,S.offset=En(s("labelPadding")||0),S.offset.mult=f;const _={scale:l,field:Tr,band:.5,offset:Qj(a.offset,s("labelOffset"))},w=_n(o,v?uw(l,d,'"left"','"right"','"center"'):{value:"center"},hye(o,"left","right")),A=_n(o,nH(o,"bottom","top"),v?uw(l,d,'"top"','"bottom"','"middle"'):{value:"middle"}),C=uw(l,d,`-(${h})`,h,0);v=v&&h;const T={opacity:et,x:_n(o,_,S),y:na(o,_,S)},k={enter:T,update:b={opacity:Mr,text:{field:IM},x:T.x,y:T.y,align:w,baseline:A},exit:{opacity:et,x:T.x,y:T.y}};Bn(k,{dx:!p&&v?_n(o,C):null,dy:!y&&v?na(o,C):null}),Bn(k,{angle:s("labelAngle"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontWeight:s("labelFontWeight"),fontStyle:s("labelFontStyle"),limit:s("labelLimit"),lineHeight:s("labelLineHeight")},{align:p,baseline:y});const M=s("labelBound");let R=s("labelOverlap");return R=R||M?{separation:s("labelSeparation"),method:R,order:"datum.index",bound:M?{scale:l,orient:o,tolerance:M}:null}:void 0,b.align!==w&&(b.align=Rf(b.align,w)),b.baseline!==A&&(b.baseline=Rf(b.baseline,A)),cr({type:cc,role:X0e,style:o0,key:Tr,from:i,encode:k,overlap:R},n)}function $ye(e,t,n,i){const r=qi(e,t),a=e.orient,s=tx(a,-1,1);let o,l;const f={enter:o={opacity:et,anchor:En(r("titleAnchor",null)),align:{signal:YM}},update:l=qe({},o,{opacity:Mr,text:En(e.title)}),exit:{opacity:et}},d={signal:`lerp(range("${e.scale}"), ${Kb(0,1,.5)})`};return l.x=_n(a,d),l.y=na(a,d),o.angle=_n(a,et,xye(s,90)),o.baseline=_n(a,nH(a,yu,pa),{value:yu}),l.angle=o.angle,l.baseline=o.baseline,Bn(f,{fill:r("titleColor"),fillOpacity:r("titleOpacity"),font:r("titleFont"),fontSize:r("titleFontSize"),fontStyle:r("titleFontStyle"),fontWeight:r("titleFontWeight"),limit:r("titleLimit"),lineHeight:r("titleLineHeight")},{align:r("titleAlign"),angle:r("titleAngle"),baseline:r("titleBaseline")}),Tye(r,a,f,n),f.update.align=Rf(f.update.align,o.align),f.update.angle=Rf(f.update.angle,o.angle),f.update.baseline=Rf(f.update.baseline,o.baseline),cr({type:cc,role:W0e,style:jM,from:i,encode:f},n)}function Tye(e,t,n,i){const r=(o,l)=>o!=null?(n.update[l]=Rf(En(o),n.update[l]),!1):!bf(l,i),a=r(e("titleX"),"x"),s=r(e("titleY"),"y");n.enter.auto=s===a?En(s):_n(t,En(s),En(a))}function Mye(e,t){const n=Sye(e,t),i=e.encode||{},r=i.axis||{},a=r.name||void 0,s=r.interactive,o=r.style,l=qi(e,n),f=A1e(l),d={scale:e.scale,ticks:!!l("ticks"),labels:!!l("labels"),grid:!!l("grid"),domain:!!l("domain"),title:e.title!=null},h=Te(t.add(ga({},[d]))),p=Te(t.add(kme({scale:t.scaleRef(e.scale),extra:t.property(f.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),y=[];let v;return d.grid&&y.push(_ye(e,n,i.grid,p,f)),d.ticks&&(v=l("tickSize"),y.push(Aye(e,n,i.ticks,p,v,f))),d.labels&&(v=d.ticks?v:0,y.push(Cye(e,n,i.labels,p,v,f))),d.domain&&y.push(Eye(e,n,i.domain,h)),d.title&&y.push($ye(e,n,i.title,h)),ex(Sp({role:H0e,from:h,encode:Dd(kye(l,e),r,u0),marks:y,aria:l("aria"),description:l("description"),zindex:l("zindex"),name:a,interactive:s,style:o}),t)}function kye(e,t){const n={enter:{},update:{}};return Bn(n,{orient:e("orient"),offset:e("offset")||0,position:Xr(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function rH(e,t,n){const i=ve(e.signals),r=ve(e.scales);return n||i.forEach(a=>Fj(a,t)),ve(e.projections).forEach(a=>u1e(a,t)),r.forEach(a=>Qme(a,t)),ve(e.data).forEach(a=>fye(a,t)),r.forEach(a=>Zme(a,t)),(n||i).forEach(a=>Mme(a,t)),ve(e.axes).forEach(a=>Mye(a,t)),ve(e.marks).forEach(a=>ex(a,t)),ve(e.legends).forEach(a=>J1e(a,t)),e.title&&sye(e.title,t),t.parseLambdas(),t}const Oye=e=>Dd({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Rye(e,t){const n=t.config,i=Te(t.root=t.add(yv())),r=Dye(e,n);r.forEach(f=>Fj(f,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const a=t.add(ga()),s=t.add(Uj(zj(Oye(e.encode),Zb,BM,e.style,t,{pulse:Te(a)}))),o=t.add(Ij({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:i,pulse:Te(s)}));t.operators.pop(),t.pushState(Te(s),Te(o),null),rH(e,t,r),t.operators.push(o);let l=t.add(Bj({mark:i,pulse:Te(o)}));return l=t.add(Pj({pulse:Te(l)})),l=t.add(lc({pulse:Te(l)})),t.addData("root",new Hl(t,a,a,l)),t}function ug(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Dye(e,t){const n=s=>Xr(e[s],t[s]),i=[ug("background",n("background")),ug("autosize",P0e(n("autosize"))),ug("padding",j0e(n("padding"))),ug("width",n("width")||0),ug("height",n("height")||0)],r=i.reduce((s,o)=>(s[o.name]=o,s),{}),a={};return ve(e.signals).forEach(s=>{Se(r,s.name)?s=qe(r[s.name],s):i.push(s),a[s.name]=s}),ve(t.signals).forEach(s=>{!Se(a,s.name)&&!Se(r,s.name)&&i.push(s)}),i}function aH(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function lF(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}aH.prototype=lF.prototype={parse(e){return rH(e,this)},fork(){return new lF(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof pC?Te(e):e;return this.add(Hme({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(i,r,a){let s,o;i&&(s=i.data||(i.data={}),o=s[r]||(s[r]=[]),o.push(a))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const i in t.index)n(t.index[i],e,"index:"+i)}return this},pushState(e,t,n){this._encode.push(Te(this.add(lc({pulse:e})))),this._parent.push(t),this._lookup.push(n?Te(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Ke(this._parent)},encode(){return Ke(this._encode)},lookup(){return Ke(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(Ee(e))return bp(e,t);e.signal||te("Unsupported field reference: "+he(e));const n=e.signal;let i=this.field[n];if(!i){const r={name:this.signalRef(n)};t&&(r.as=t),this.field[n]=i=Te(this.add(Nme(r)))}return i},compareRef(e){let t=!1;const n=a=>cn(a)?(t=!0,this.signalRef(a.signal)):bme(a)?(t=!0,this.exprRef(a.expr)):a,i=ve(e.field).map(n),r=ve(e.order).map(n);return t?Te(this.add(W8({fields:i,orders:r}))):X8(i,r)},keyRef(e,t){let n=!1;const i=a=>cn(a)?(n=!0,Te(r[a.signal])):a,r=this.signals;return e=ve(e).map(i),n?Te(this.add(zme({fields:e,flat:t}))):pme(e,t)},sortRef(e){if(!e)return e;const t=Wb(e.op,e.field),n=e.order||mme;return n.signal?Te(this.add(W8({fields:t,orders:this.signalRef(n.signal)}))):X8(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const i=this.id();this.streams.push({id:i,source:e,type:t}),this.events[n]=i}return this.events[n]},hasOwnSignal(e){return Se(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&te("Duplicate signal name: "+he(e));const n=t instanceof pC?t:this.add(yv(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||te("Unrecognized signal name: "+he(e)),this.signals[e]},signalRef(e){return this.signals[e]?Te(this.signals[e]):(Se(this.lambdas,e)||(this.lambdas[e]=this.add(yv(null))),Te(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const i=e[t],r=Va(i,this),a=this.lambdas[i];a.params=r.$params,a.update=r.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!xe(e)?e:this.signalRef(e.signal||ZM(e))},exprRef(e,t){const n={expr:Va(e,this)};return t&&(n.expr.$name=t),Te(this.add(Rme(n)))},addBinding(e,t){this.bindings||te("Nested signals do not support binding: "+he(e)),this.bindings.push(qe({signal:e},t))},addScaleProj(e,t){Se(this.scales,e)&&te("Duplicate scale or projection name: "+he(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,Yme(t))},addProjection(e,t){this.addScaleProj(e,jme(t))},getScale(e){return this.scales[e]||te("Unrecognized scale name: "+he(e)),this.scales[e]},scaleRef(e){return Te(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return Se(this.data,e)&&te("Duplicate data set name: "+he(e)),this.data[e]=t},getData(e){return this.data[e]||te("Undefined data set name: "+he(e)),this.data[e]},addDataPipeline(e,t){return Se(this.data,e)&&te("Duplicate data set name: "+he(e)),this.addData(e,Hl.fromEntries(this,t))}};function ZM(e){return(re(e)?Nye:zye)(e)}function Nye(e){const t=e.length;let n="[";for(let i=0;i<t;++i){const r=e[i];n+=(i>0?",":"")+(xe(r)?r.signal||ZM(r):he(r))}return n+"]"}function zye(e){let t="{",n=0,i,r;for(i in e)r=e[i],t+=(++n>1?",":"")+he(i)+":"+(xe(r)?r.signal||ZM(r):he(r));return t+"}"}function Fye(){const e="sans-serif",i="#4c78a8",r="#000",a="#888",s="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:i},area:{fill:i},image:null,line:{stroke:i,strokeWidth:2},path:{stroke:i},rect:{fill:i},rule:{stroke:r},shape:{stroke:i},symbol:{fill:i,size:64},text:{fill:r,font:e,fontSize:11},trail:{fill:i,size:2},style:{"guide-label":{fill:r,font:e,fontSize:10},"guide-title":{fill:r,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:r,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:r,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:s},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:a,grid:!1,gridWidth:1,gridColor:s,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:a,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:s,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:a,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Lye(e,t,n){return xe(e)||te("Input Vega specification must be an object."),t=Pv(Fye(),t,e.config),Rye(e,new aH(t,n)).toRuntime()}var Bye="6.1.2";qe(jf,Cte,ioe,zoe,xle,gce,Pfe,xfe,jfe,hde,_de,kde);const Uye=Bye,qye=Object.freeze(Object.defineProperty({__proto__:null,Bounds:nn,CanvasHandler:Kp,CanvasRenderer:Oy,DATE:Ni,DAY:Vn,DAYOFYEAR:Ya,Dataflow:Tf,Debug:t7,Error:u$,EventStream:tb,Gradient:VU,GroupItem:wb,HOURS:or,Handler:x3,HybridHandler:Bq,HybridRenderer:_A,Info:e7,Item:_b,MILLISECONDS:aa,MINUTES:ur,MONTH:Kn,Marks:lr,MultiPulse:N$,None:J9,Operator:_t,Parameters:eb,Pulse:ru,QUARTER:Di,RenderType:Wo,Renderer:Zp,ResourceLoader:eq,SECONDS:Rr,SVGHandler:Aq,SVGRenderer:C3,SVGStringRenderer:Lq,Scenegraph:yq,TIME_UNITS:w$,Transform:J,View:_j,WEEK:un,Warn:l$,YEAR:Ln,accessor:Ui,accessorFields:Zn,accessorName:It,array:ve,ascending:Rp,bandwidthNRD:B$,bin:zL,bootstrapCI:FL,boundClip:Vq,boundContext:Xp,boundItem:vA,boundMark:hq,boundStroke:to,changeset:ac,clampRange:d7,codegenExpression:QI,compare:g$,constant:ni,cumulativeLogNormal:H$,cumulativeNormal:ib,cumulativeUniform:V$,dayofyear:I7,debounce:p$,defaultLocale:M$,definition:RL,densityLogNormal:j$,densityNormal:U$,densityUniform:X$,domChild:on,domClear:Er,domCreate:Xo,domFind:b3,dotbin:LL,error:te,expressionFunction:Qt,extend:qe,extent:ja,extentIndex:h7,falsy:Fo,fastmap:Ed,field:kr,flush:g7,font:Mb,fontFamily:Qp,fontSize:ts,format:$1,formatLocale:ly,formats:R$,hasOwnProperty:Se,id:Op,identity:ti,inferType:SL,inferTypes:EL,ingest:lt,inherits:ge,inrange:Ef,interpolate:QT,interpolateColors:Sb,interpolateRange:NU,intersect:Hq,intersectBoxLine:_f,intersectPath:r3,intersectPoint:a3,intersectRule:nq,isArray:re,isBoolean:tc,isDate:nu,isFunction:Pe,isIterable:p7,isNumber:at,isObject:xe,isRegExp:m$,isString:Ee,isTuple:Kv,key:y$,lerp:m7,lineHeight:gu,loader:Qv,locale:bL,logger:c$,lruCache:y7,markup:A3,merge:v7,mergeConfig:Pv,multiLineOffset:m3,one:xd,pad:b7,panLinear:s7,panLog:o7,panPow:u7,panSymlog:l7,parse:Lye,parseExpression:AM,parseSelector:Tu,path:ub,pathCurves:t3,pathEqual:Wq,pathParse:Wf,pathRectangle:ZU,pathRender:op,pathSymbols:QU,pathTrail:KU,peek:Ke,point:Ob,projection:G3,quantileLogNormal:G$,quantileNormal:rb,quantileUniform:W$,quantiles:F$,quantizeInterpolator:zU,quarter:c7,quartiles:L$,get random(){return Dr},randomInteger:kee,randomKDE:P$,randomLCG:Mee,randomLogNormal:UL,randomMixture:qL,randomNormal:q$,randomUniform:PL,read:AL,regressionConstant:Q$,regressionExp:jL,regressionLinear:Z$,regressionLoess:YL,regressionLog:IL,regressionPoly:GL,regressionPow:HL,regressionQuad:K$,renderModule:Rb,repeat:gg,resetDefaultLocale:CJ,resetSVGDefIds:Sse,responseType:wL,runtimeContext:cj,sampleCurve:sb,sampleLogNormal:I$,sampleNormal:nb,sampleUniform:Y$,scale:ot,sceneEqual:$3,sceneFromJSON:pq,scenePickVisit:_y,sceneToJSON:gq,sceneVisit:sa,sceneZOrder:s3,scheme:ZT,serializeXML:Dq,setHybridRendererOptions:yse,setRandom:$ee,span:Dp,splitAccessPath:Ka,stringValue:he,textMetrics:ir,timeBin:aL,timeFloor:W7,timeFormatLocale:tp,timeInterval:Cd,timeOffset:K7,timeSequence:tL,timeUnitSpecifier:P7,timeUnits:A$,toBoolean:v$,toDate:b$,toNumber:Wn,toSet:ra,toString:x$,transform:DL,transforms:jf,truncate:x7,truthy:Or,tupleid:Me,typeParsers:eA,utcFloor:Q7,utcInterval:$d,utcOffset:J7,utcSequence:nL,utcdayofyear:G7,utcquarter:f7,utcweek:Y7,version:Uye,visitArray:Uo,week:j7,writeConfig:Sd,zero:Ho,zoomLinear:f$,zoomLog:d$,zoomPow:iy,zoomSymlog:h$},Symbol.toStringTag,{value:"Module"}));var Pye="6.2.0",Iye={version:Pye};function KM(e){return le(e,"or")}function JM(e){return le(e,"and")}function ek(e){return le(e,"not")}function Z1(e,t){if(ek(e))Z1(e.not,t);else if(JM(e))for(const n of e.and)Z1(n,t);else if(KM(e))for(const n of e.or)Z1(n,t);else t(e)}function Df(e,t){return ek(e)?{not:Df(e.not,t)}:JM(e)?{and:e.and.map(n=>Df(n,t))}:KM(e)?{or:e.or.map(n=>Df(n,t))}:t(e)}const Fe=structuredClone;function sH(e){throw new Error(e)}function rd(e,t){const n={};for(const i of t)Se(e,i)&&(n[i]=e[i]);return n}function ar(e,t){const n={...e};for(const i of t)delete n[i];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>ft(e)).join(",")})`};function Qe(e){if(at(e))return e;const t=Ee(e)?e:ft(e);if(t.length<250)return t;let n=0;for(let i=0;i<t.length;i++){const r=t.charCodeAt(i);n=(n<<5)-n+r,n=n&n}return n}function EC(e){return e===!1||e===null}function Xe(e,t){return e.includes(t)}function ad(e,t){let n=0;for(const[i,r]of e.entries())if(t(r,i,n++))return!0;return!1}function tk(e,t){let n=0;for(const[i,r]of e.entries())if(!t(r,i,n++))return!1;return!0}function oH(e,...t){for(const n of t)jye(e,n??{});return e}function jye(e,t){for(const n of ue(t))Sd(e,n,t[n],!0)}function za(e,t){const n=[],i={};let r;for(const a of e)r=t(a),!(r in i)&&(i[r]=1,n.push(a));return n}function Hye(e,t){const n=ue(e),i=ue(t);if(n.length!==i.length)return!1;for(const r of n)if(e[r]!==t[r])return!1;return!0}function uH(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function nk(e,t){for(const n of e)if(t.has(n))return!0;return!1}function _C(e){const t=new Set;for(const n of e){const r=Ka(n).map((s,o)=>o===0?s:`[${s}]`),a=r.map((s,o)=>r.slice(0,o+1).join(""));for(const s of a)t.add(s)}return t}function ik(e,t){return e===void 0||t===void 0?!0:nk(_C(e),_C(t))}function wt(e){return ue(e).length===0}const ue=Object.keys,tn=Object.values,vu=Object.entries;function Ep(e){return e===!0||e===!1}function Ot(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function Wg(e,t){return ek(e)?`!(${Wg(e.not,t)})`:JM(e)?`(${e.and.map(n=>Wg(n,t)).join(") && (")})`:KM(e)?`(${e.or.map(n=>Wg(n,t)).join(") || (")})`:t(e)}function vv(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vv(e[n],t)&&delete e[n],wt(e)}function l0(e){return e.charAt(0).toUpperCase()+e.substr(1)}function rk(e,t="datum"){const n=Ka(e),i=[];for(let r=1;r<=n.length;r++){const a=`[${n.slice(0,r).map(he).join("][")}]`;i.push(`${t}${a}`)}return i.join(" && ")}function lH(e,t="datum"){return`${t}[${he(Ka(e).join("."))}]`}function gt(e){return`datum['${e.replaceAll("'","\\'")}']`}function Gye(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function zr(e){return`${Ka(e).map(Gye).join("\\.")}`}function Gl(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function Fd(e){return`${Ka(e).join(".")}`}function sd(e){return e?Ka(e).length:0}function Vt(...e){return e.find(t=>t!==void 0)}let cH=42;function fH(e){const t=++cH;return e?String(e)+t:t}function Yye(){cH=42}function dH(e){return hH(e)?e:`__${e}`}function hH(e){return e.startsWith("__")}function _p(e){if(e!==void 0)return(e%360+360)%360}function nx(e){return at(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const cF=Object.getPrototypeOf(structuredClone({}));function nr(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,i;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!nr(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;for(const a of e.entries())if(!nr(a[1],t.get(a[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const a of e.entries())if(!t.has(a[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==cF.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==cF.toString)return e.toString()===t.toString();const r=Object.keys(e);if(n=r.length,n!==Object.keys(t).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,r[i]))return!1;for(i=n;i--!==0;){const a=r[i];if(!nr(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function ft(e){const t=[];return(function n(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?`${i}`:"null";if(typeof i!="object")return JSON.stringify(i);let r,a;if(Array.isArray(i)){for(a="[",r=0;r<i.length;r++)r&&(a+=","),a+=n(i[r])||"null";return`${a}]`}if(i===null)return"null";if(t.includes(i))throw new TypeError("Converting circular structure to JSON");const s=t.push(i)-1,o=Object.keys(i).sort();for(a="",r=0;r<o.length;r++){const l=o[r],f=n(i[l]);f&&(a&&(a+=","),a+=`${JSON.stringify(l)}:${f}`)}return t.splice(s,1),`{${a}}`})(e)}function le(e,t){return xe(e)&&Se(e,t)&&e[t]!==void 0}const Hs="row",Gs="column",ix="facet",Rt="x",$n="y",ma="x2",as="y2",Mu="xOffset",Ld="yOffset",ya="radius",io="radius2",Br="theta",ro="theta2",va="latitude",ba="longitude",xa="latitude2",Fr="longitude2",ku="time",Fi="color",ss="fill",os="stroke",Li="shape",ao="size",fc="angle",so="opacity",Ou="fillOpacity",Ru="strokeOpacity",Du="strokeWidth",Nu="strokeDash",c0="text",od="order",f0="detail",rx="key",Yl="tooltip",ax="href",sx="url",ox="description",Xye={x:1,y:1,x2:1,y2:1},gH={theta:1,theta2:1,radius:1,radius2:1};function pH(e){return Se(gH,e)}const ak={longitude:1,longitude2:1,latitude:1,latitude2:1};function mH(e){switch(e){case va:return"y";case xa:return"y2";case ba:return"x";case Fr:return"x2"}}function yH(e){return Se(ak,e)}const Vye=ue(ak),sk={...Xye,...gH,...ak,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,time:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function Nf(e){return e===Fi||e===ss||e===os}const vH={row:1,column:1,facet:1},$r=ue(vH),ok={...sk,...vH},Wye=ue(ok),{order:WCe,detail:QCe,tooltip:ZCe,...Qye}=ok,{row:KCe,column:JCe,facet:e$e,...Zye}=Qye;function Kye(e){return Se(Zye,e)}function bH(e){return Se(ok,e)}const Jye=[ma,as,xa,Fr,ro,io];function xH(e){return dc(e)!==e}function dc(e){switch(e){case ma:return Rt;case as:return $n;case xa:return va;case Fr:return ba;case ro:return Br;case io:return ya}return e}function bu(e){if(pH(e))switch(e){case Br:return"startAngle";case ro:return"endAngle";case ya:return"outerRadius";case io:return"innerRadius"}return e}function us(e){switch(e){case Rt:return ma;case $n:return as;case va:return xa;case ba:return Fr;case Br:return ro;case ya:return io}}function Bi(e){switch(e){case Rt:case ma:return"width";case $n:case as:return"height"}}function SH(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset";case ma:return"x2Offset";case as:return"y2Offset";case Br:return"thetaOffset";case ya:return"radiusOffset";case ro:return"theta2Offset";case io:return"radius2Offset"}}function uk(e){switch(e){case Rt:return"xOffset";case $n:return"yOffset"}}function eve(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const tve=ue(sk),{x:t$e,y:n$e,x2:i$e,y2:r$e,xOffset:a$e,yOffset:s$e,latitude:o$e,longitude:u$e,latitude2:l$e,longitude2:c$e,theta:f$e,theta2:d$e,radius:h$e,radius2:g$e,...lk}=sk,nve=ue(lk),ck={x:1,y:1},oo=ue(ck);function Wt(e){return Se(ck,e)}const fk={theta:1,radius:1},ive=ue(fk);function ux(e){return e==="width"?Rt:$n}const EH={xOffset:1,yOffset:1};function d0(e){return Se(EH,e)}const rve={time:1};function lw(e){return e in rve}const{text:p$e,tooltip:m$e,href:y$e,url:v$e,description:b$e,detail:x$e,key:S$e,order:E$e,..._H}=lk,ave=ue(_H);function sve(e){return Se(lk,e)}function ove(e){switch(e){case Fi:case ss:case os:case ao:case Li:case so:case Du:case Nu:return!0;case Ou:case Ru:case fc:case ku:return!1}}const wH={...ck,...fk,...EH,..._H},dk=ue(wH);function ls(e){return Se(wH,e)}function uve(e,t){return cve(e)[t]}const AH={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:_$e,...lve}=AH;function cve(e){switch(e){case Fi:case ss:case os:case ox:case f0:case rx:case Yl:case ax:case od:case so:case Ou:case Ru:case Du:case ix:case Hs:case Gs:return AH;case Rt:case $n:case Mu:case Ld:case va:case ba:case ku:return lve;case ma:case as:case xa:case Fr:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ao:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Nu:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case Li:return{point:"always",geoshape:"always"};case c0:return{text:"always"};case fc:return{point:"always",square:"always",text:"always"};case sx:return{image:"always"};case Br:return{text:"always",arc:"always"};case ya:return{text:"always",arc:"always"};case ro:case io:return{arc:"always"}}}function cw(e){switch(e){case Rt:case $n:case Br:case ya:case Mu:case Ld:case ao:case fc:case Du:case so:case Ou:case Ru:case ku:case ma:case as:case ro:case io:return;case ix:case Hs:case Gs:case Li:case Nu:case c0:case Yl:case ax:case sx:case ox:return"discrete";case Fi:case ss:case os:return"flexible";case va:case ba:case xa:case Fr:case f0:case rx:case od:return}}const fve={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},dve={count:1,min:1,max:1};function Ks(e){return le(e,"argmin")}function zu(e){return le(e,"argmax")}function hk(e){return Ee(e)&&Se(fve,e)}const hve=new Set(["count","valid","missing","distinct"]);function lx(e){return Ee(e)&&hve.has(e)}function gve(e){return Ee(e)&&Xe(["min","max"],e)}const pve=new Set(["count","sum","distinct","valid","missing"]),mve=new Set(["mean","average","median","q1","q3","min","max"]);function CH(e){return tc(e)&&(e=Sx(e,void 0)),`bin${ue(e).map(t=>cx(e[t])?Ot(`_${t}_${vu(e[t])}`):Ot(`_${t}_${e[t]}`)).join("")}`}function Ct(e){return e===!0||hc(e)&&!e.binned}function On(e){return e==="binned"||hc(e)&&e.binned===!0}function hc(e){return xe(e)}function cx(e){return le(e,"param")}function fF(e){switch(e){case Hs:case Gs:case ao:case Fi:case ss:case os:case Du:case so:case Ou:case Ru:case Li:return 6;case Nu:return 4;default:return 10}}function h0(e){return le(e,"expr")}function Rn(e,{level:t}={level:0}){const n=ue(e||{}),i={};for(const r of n)i[r]=t===0?Ji(e[r]):Rn(e[r],{level:t-1});return i}function $H(e){const{anchor:t,frame:n,offset:i,orient:r,angle:a,limit:s,color:o,subtitleColor:l,subtitleFont:f,subtitleFontSize:d,subtitleFontStyle:h,subtitleFontWeight:p,subtitleLineHeight:y,subtitlePadding:v,...b}=e,S={...b,...o?{fill:o}:{}},_={...t?{anchor:t}:{},...n?{frame:n}:{},...i?{offset:i}:{},...r?{orient:r}:{},...a!==void 0?{angle:a}:{},...s!==void 0?{limit:s}:{}},w={...l?{subtitleColor:l}:{},...f?{subtitleFont:f}:{},...d?{subtitleFontSize:d}:{},...h?{subtitleFontStyle:h}:{},...p?{subtitleFontWeight:p}:{},...y?{subtitleLineHeight:y}:{},...v?{subtitlePadding:v}:{}},A=rd(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:S,subtitleMarkConfig:A,nonMarkTitleProperties:_,subtitle:w}}function jo(e){return Ee(e)||re(e)&&Ee(e[0])}function Ce(e){return le(e,"signal")}function gc(e){return le(e,"step")}function yve(e){return re(e)?!1:le(e,"fields")&&!le(e,"data")}function vve(e){return re(e)?!1:le(e,"fields")&&le(e,"data")}function qs(e){return re(e)?!1:le(e,"field")&&le(e,"data")}const bve={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},xve=ue(bve),Sve={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},wC=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],Eve=" – ";function TH(e){const t=re(e.condition)?e.condition.map(dF):dF(e.condition);return{...Ji(e),condition:t}}function Ji(e){if(h0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function dF(e){if(h0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function Tt(e){if(h0(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Ce(e)?e:e!==void 0?{value:e}:void 0}function _ve(e){return Ce(e)?e.signal:he(e)}function hF(e){return Ce(e)?e.signal:he(e.value)}function ea(e){return Ce(e)?e.signal:e==null?null:he(e)}function wve(e,t,n){for(const i of n){const r=Wa(i,t.markDef,t.config);r!==void 0&&(e[i]=Tt(r))}return e}function MH(e){return[].concat(e.type,e.style??[])}function xt(e,t,n,i={}){const{vgChannel:r,ignoreVgConfig:a}=i;return r&&le(t,r)?t[r]:t[e]!==void 0?t[e]:a&&(!r||r===e)?void 0:Wa(e,t,n,i)}function Wa(e,t,n,{vgChannel:i}={}){const r=AC(e,t,n.style);return Vt(i?r:void 0,r,i?n[t.type][i]:void 0,n[t.type][e],i?n.mark[i]:n.mark[e])}function AC(e,t,n){return kH(e,MH(t),n)}function kH(e,t,n){t=ve(t);let i;for(const r of t){const a=n[r];le(a,e)&&(i=a[e])}return i}function OH(e,t){return ve(e).reduce((n,i)=>(n.field.push(pe(i,t)),n.order.push(i.sort??"ascending"),n),{field:[],order:[]})}function RH(e,t){const n=[...e];return t.forEach(i=>{for(const r of n)if(nr(r,i))return;n.push(i)}),n}function DH(e,t){return nr(e,t)||!t?e:e?[...ve(e),...ve(t)].join(", "):t}function NH(e,t){const n=e.value,i=t.value;if(n==null||i===null)return{explicit:e.explicit,value:null};if((jo(n)||Ce(n))&&(jo(i)||Ce(i)))return{explicit:e.explicit,value:DH(n,i)};if(jo(n)||Ce(n))return{explicit:e.explicit,value:n};if(jo(i)||Ce(i))return{explicit:e.explicit,value:i};if(!jo(n)&&!Ce(n)&&!jo(i)&&!Ce(i))return{explicit:e.explicit,value:RH(n,i)};throw new Error("It should never reach here")}function gk(e){return`Invalid specification ${ft(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Ave='Autosize "fit" only works for single views and layered views.';function gF(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function pF(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function mF(e){return e?`Dropping "fit-${e}" because spec has discrete ${Bi(e)}.`:'Dropping "fit" because spec has discrete size.'}function pk(e){return`Unknown field for ${e}. Cannot calculate view size.`}function yF(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function Cve(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function $ve(e){return`The "nearest" transform is not supported for ${e} marks.`}function zH(e){return`Selection not supported for ${e} yet.`}function Tve(e){return`Cannot find a selection named "${e}".`}const Mve="Scale bindings are currently only supported for scales with unbinned, continuous domains.",kve="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",Ove="Legend bindings are only supported for selections over an individual field or encoding channel.";function Rve(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function Dve(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const Nve="The same selection must be used to override scale domains in a layered view.",zve='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function Fve(e){return`Unknown repeated value "${e}".`}function vF(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const Lve="Multiple timer selections in one unit spec are not supported. Ignoring all but the first.",mk="Animation involving facet, layer, or concat is currently unsupported.";function Bve(e){return`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${he(e)}.`}function Uve(e,t,n,i){return`${e.length?"Multiple ":"No "}matching ${he(t)} encoding found for selection ${he(n.param)}. Using "field": ${he(i)}.`}const qve="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function Pve(e){return`Unrecognized parse "${e}".`}function bF(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const Ive="Attempt to add the same child twice.";function jve(e){return`Ignoring an invalid transform: ${ft(e)}.`}const Hve='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function xF(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function Gve(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${ft(t)} is overridden by a child projection ${ft(n)}.`}const Yve="Arc marks uses theta channel rather than angle, replacing angle with theta.";function Xve(e){return`${e}Offset dropped because ${e} is continuous`}function Vve(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${ft(n)}}.`}function FH(e){return`Invalid field type "${e}".`}function Wve(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function Qve(e){return`Invalid aggregation operator "${e}".`}function LH(e,t){const{fill:n,stroke:i}=t;return`Dropping color ${e} as the plot also has ${n&&i?"fill and stroke":n?"fill":"stroke"}.`}function Zve(e){return`Position range does not support relative band size for ${e}.`}function CC(e,t){return`Dropping ${ft(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const Kve="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function fx(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Jve(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function ebe(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function tbe(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function nbe(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function fw(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function ibe(e){return`The ${e} for range marks cannot be an expression`}function rbe(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function abe(e,t){return`Specified orient "${e}" overridden with "${t}".`}function sbe(e){return`Cannot use the scale property "${e}" with non-color channel.`}function obe(e){return`Cannot use the relative band size with ${e} scale.`}function ube(e){return`Using unaggregated domain with raw field has no effect (${ft(e)}).`}function lbe(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function cbe(e){return`Unaggregated domain is currently unsupported for log scale (${ft(e)}).`}function fbe(e){return`Cannot apply size to non-oriented mark "${e}".`}function dbe(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function hbe(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function BH(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function UH(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function gbe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(i)}). Using ${ft(n)}.`}function pbe(e,t,n,i){return`Conflicting ${t.toString()} property "${e.toString()}" (${ft(n)} and ${ft(i)}). Using the union of the two domains.`}function mbe(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function ybe(e){return`Dropping sort property ${ft(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const SF="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",vbe="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",bbe="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",xbe="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Sbe(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Ebe(e){return`Stack is applied to a non-linear scale (${e}).`}function _be(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function bv(e,t){return`Invalid ${e}: ${ft(t)}.`}function wbe(e){return`Dropping day from datetime ${ft(e)} as day cannot be combined with other units.`}function Abe(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Cbe(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function $be(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function EF(e){return`1D error band does not support ${e}.`}function qH(e){return`Channel ${e} is required for "binned" bin.`}function Tbe(e){return`Channel ${e} should not be used with "binned" bin.`}function Mbe(e){return`Domain for ${e} is required for threshold scale.`}const PH=c$(l$);let Xl=PH;function kbe(e){return Xl=e,Xl}function Obe(){return Xl=PH,Xl}function yk(...e){Xl.error(...e)}function fe(...e){Xl.warn(...e)}function Rbe(...e){Xl.debug(...e)}function pc(e){if(e&&xe(e)){for(const t of bk)if(le(e,t))return!0}return!1}const IH=["january","february","march","april","may","june","july","august","september","october","november","december"],Dbe=IH.map(e=>e.substr(0,3)),jH=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Nbe=jH.map(e=>e.substr(0,3));function zbe(e){if(nx(e)&&(e=+e),at(e))return e>4&&fe(bv("quarter",e)),e-1;throw new Error(bv("quarter",e))}function Fbe(e){if(nx(e)&&(e=+e),at(e))return e-1;{const t=e.toLowerCase(),n=IH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Dbe.indexOf(i);if(r!==-1)return r;throw new Error(bv("month",e))}}function Lbe(e){if(nx(e)&&(e=+e),at(e))return e%7;{const t=e.toLowerCase(),n=jH.indexOf(t);if(n!==-1)return n;const i=t.substr(0,3),r=Nbe.indexOf(i);if(r!==-1)return r;throw new Error(bv("day",e))}}function vk(e,t){const n=[];if(t&&e.day!==void 0&&ue(e).length>1&&(fe(wbe(e)),e=Fe(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const i=t?Fbe(e.month):e.month;n.push(i)}else if(e.quarter!==void 0){const i=t?zbe(e.quarter):e.quarter;n.push(at(i)?i*3:`${i}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const i=t?Lbe(e.day):e.day;n.push(at(i)?i+1:`${i}+1`)}else n.push(1);for(const i of["hours","minutes","seconds","milliseconds"]){const r=e[i];n.push(typeof r>"u"?0:r)}return n}function Vl(e){const n=vk(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Bbe(e){const n=vk(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function Ube(e){const t=vk(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const HH={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},bk=ue(HH);function qbe(e){return Se(HH,e)}function mc(e){return xe(e)?e.binned:GH(e)}function GH(e){return e?.startsWith("binned")}function xk(e){return e.startsWith("utc")}function Pbe(e){return e.substring(3)}const Ibe={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function dx(e){return bk.filter(t=>XH(e,t))}function YH(e){const t=dx(e);return t[t.length-1]}function XH(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function jbe(e,t,{end:n}={end:!1}){const i=rk(t),r=xk(e)?"utc":"";function a(l){return l==="quarter"?`(${r}quarter(${i})-1)`:`${r}${l}(${i})`}let s;const o={};for(const l of bk)XH(e,l)&&(o[l]=a(l),s=l);return n&&(o[s]+="+1"),Bbe(o)}function VH(e){if(!e)return;const t=dx(e);return`timeUnitSpecifier(${ft(t)}, ${ft(Ibe)})`}function Hbe(e,t,n){if(!e)return;const i=VH(e);return`${n||xk(e)?"utc":"time"}Format(${t}, ${i})`}function wn(e){if(!e)return;let t;return Ee(e)?GH(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:xe(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),xk(t.unit)&&(t.utc=!0,t.unit=Pbe(t.unit)),t}function Gbe(e){const{utc:t,...n}=wn(e);return n.unit?(t?"utc":"")+ue(n).map(i=>Ot(`${i==="unit"?"":`_${i}_`}${n[i]}`)).join(""):`${t?"utc":""}timeunit${ue(n).map(i=>Ot(`_${i}_${n[i]}`)).join("")}`}function WH(e,t=n=>n){const n=wn(e),i=YH(n.unit);if(i&&i!=="day"){const r={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:a,part:s}=QH(i,n.step),o={...r,[s]:+r[s]+a};return`${t(Vl(o))} - ${t(Vl(r))}`}}const Ybe={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function Xbe(e){return Se(Ybe,e)}function QH(e,t=1){if(Xbe(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function Vbe(e){return le(e,"param")}function Sk(e){return!!e?.field&&e.equal!==void 0}function Ek(e){return!!e?.field&&e.lt!==void 0}function _k(e){return!!e?.field&&e.lte!==void 0}function wk(e){return!!e?.field&&e.gt!==void 0}function Ak(e){return!!e?.field&&e.gte!==void 0}function Ck(e){if(e?.field){if(re(e.range)&&e.range.length===2)return!0;if(Ce(e.range))return!0}return!1}function $k(e){return!!e?.field&&(re(e.oneOf)||re(e.in))}function Wbe(e){return!!e?.field&&e.valid!==void 0}function ZH(e){return $k(e)||Sk(e)||Ck(e)||Ek(e)||wk(e)||_k(e)||Ak(e)}function Ta(e,t){return Ex(e,{timeUnit:t,wrapTime:!0})}function Qbe(e,t){return e.map(n=>Ta(n,t))}function KH(e,t=!0){const{field:n}=e,i=wn(e.timeUnit),{unit:r,binned:a}=i||{},s=pe(e,{expr:"datum"}),o=r?`time(${a?s:jbe(r,n)})`:s;if(Sk(e))return`${o}===${Ta(e.equal,r)}`;if(Ek(e)){const l=e.lt;return`${o}<${Ta(l,r)}`}else if(wk(e)){const l=e.gt;return`${o}>${Ta(l,r)}`}else if(_k(e)){const l=e.lte;return`${o}<=${Ta(l,r)}`}else if(Ak(e)){const l=e.gte;return`${o}>=${Ta(l,r)}`}else{if($k(e))return`indexof([${Qbe(e.oneOf,r).join(",")}], ${o}) !== -1`;if(Wbe(e))return hx(o,e.valid);if(Ck(e)){const{range:l}=Rn(e),f=Ce(l)?{signal:`${l.signal}[0]`}:l[0],d=Ce(l)?{signal:`${l.signal}[1]`}:l[1];if(f!==null&&d!==null&&t)return`inrange(${o}, [${Ta(f,r)}, ${Ta(d,r)}])`;const h=[];return f!==null&&h.push(`${o} >= ${Ta(f,r)}`),d!==null&&h.push(`${o} <= ${Ta(d,r)}`),h.length>0?h.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${ft(e)}`)}function hx(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Zbe(e){return ZH(e)&&e.timeUnit?{...e,timeUnit:wn(e.timeUnit)}:e}const g0={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function Kbe(e){return e==="quantitative"||e==="temporal"}function JH(e){return e==="ordinal"||e==="nominal"}const Wl=g0.quantitative,Tk=g0.ordinal,ud=g0.temporal,Mk=g0.nominal,Bd=g0.geojson;function Jbe(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Wl:return"quantitative";case"t":case ud:return"temporal";case"o":case Tk:return"ordinal";case"n":case Mk:return"nominal";case Bd:return"geojson"}}const Dn={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",TIME:"time",UTC:"utc",POINT:"point",BAND:"band"},$C={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function exe(e,t){const n=$C[e],i=$C[t];return n===i||n==="ordinal-position"&&i==="time"||i==="ordinal-position"&&n==="time"}const txe={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function _F(e){return txe[e]}const eG=new Set(["linear","log","pow","sqrt","symlog"]),tG=new Set([...eG,"time","utc"]);function nG(e){return eG.has(e)}const iG=new Set(["quantile","quantize","threshold"]),nxe=new Set([...tG,...iG,"sequential","identity"]),ixe=new Set(["ordinal","bin-ordinal","point","band"]);function An(e){return ixe.has(e)}function oa(e){return nxe.has(e)}function Fa(e){return tG.has(e)}function ld(e){return iG.has(e)}const rxe={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,tickBandPaddingInner:.25,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:4,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0,framesPerSecond:2,animationDuration:5};function axe(e){return!Ee(e)&&le(e,"name")}function rG(e){return le(e,"param")}function sxe(e){return le(e,"unionWith")}function oxe(e){return xe(e)&&"field"in e}const uxe={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:w$e,domain:A$e,range:C$e,rangeMax:$$e,rangeMin:T$e,scheme:M$e,...lxe}=uxe,cxe=ue(lxe);function TC(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Fa(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Fa(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Fa(e);case"nice":return Fa(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return oa(e)&&!Xe(["log","time","utc","threshold","quantile"],e)}}function aG(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return Nf(e)?void 0:sbe(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function fxe(e,t){return Xe([Tk,Mk],t)?e===void 0||An(e):t===ud?Xe([Dn.TIME,Dn.UTC,void 0],e):t===Wl?nG(e)||ld(e)||e===void 0:!0}function dxe(e,t,n=!1){if(!ls(e))return!1;switch(e){case Rt:case $n:case Mu:case Ld:case Br:case ya:return Fa(t)||t==="band"?!0:t==="point"?!n:!1;case ku:return Xe(["linear","band"],t);case ao:case Du:case so:case Ou:case Ru:case fc:return Fa(t)||ld(t)||Xe(["band","point","ordinal"],t);case Fi:case ss:case os:return t!=="band";case Nu:case Li:return t==="ordinal"||ld(t)}}function hxe(e){return xe(e)&&"value"in e}const Si={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},sG=Si.arc,gx=Si.area,px=Si.bar,gxe=Si.image,mx=Si.line,yx=Si.point,pxe=Si.rect,xv=Si.rule,oG=Si.text,kk=Si.tick,mxe=Si.trail,Ok=Si.circle,Rk=Si.square,uG=Si.geoshape;function Fu(e){return["line","area","trail"].includes(e)}function wp(e){return["rect","bar","image","arc","tick"].includes(e)}const yxe=new Set(ue(Si));function Qa(e){return le(e,"type")}const vxe=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],bxe=["fill","fillOpacity"],xxe=[...vxe,...bxe],Sxe={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},wF=ue(Sxe),dw=["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],Exe={area:["line","point"],bar:dw,rect:dw,line:["point"],tick:["bandSize","thickness",...dw]},_xe={color:"#4c78a8",invalid:"break-paths-show-path-domains",timeUnitBandSize:1},wxe={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},lG=ue(wxe);function Ql(e){return le(e,"band")}const Axe={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Cxe=5,Dk={binSpacing:0,continuousBandSize:Cxe,minBandSize:.25,timeUnitBandPosition:.5},$xe={...Dk,binSpacing:1},Txe={...Dk,thickness:1};function Mxe(e){return Qa(e)?e.type:e}function cG(e,{isPath:t}){return e===void 0||e==="break-paths-show-path-domains"?t?"break-paths-show-domains":"filter":e===null?"show":e}function Nk({markDef:e,config:t,scaleChannel:n,scaleType:i,isCountAggregate:r}){if(!i||!oa(i)||r)return"always-valid";const a=cG(xt("invalid",e,t),{isPath:Fu(e.type)});return t.scale?.invalid?.[n]!==void 0?"show":a}function kxe(e){return e==="break-paths-filter-domains"||e==="break-paths-show-domains"}function fG({scaleName:e,scale:t,mode:n}){const i=`domain('${e}')`;if(!t||!e)return;const r=`${i}[0]`,a=`peek(${i})`,s=t.domainHasZero();return s==="definitely"?{scale:e,value:0}:s==="maybe"?{signal:`scale('${e}', inrange(0, ${i}) ? 0 : ${n==="zeroOrMin"?r:a})`}:{signal:`scale('${e}', ${n==="zeroOrMin"?r:a})`}}function dG({scaleChannel:e,channelDef:t,scale:n,scaleName:i,markDef:r,config:a}){const s=n?.get("type"),o=la(t),l=lx(o?.aggregate),f=Nk({scaleChannel:e,markDef:r,config:a,scaleType:s,isCountAggregate:l});if(o&&f==="show"){const d=a.scale.invalid?.[e]??"zero-or-min";return{test:hx(pe(o,{expr:"datum"}),!1),...Oxe(d,n,i)}}}function Oxe(e,t,n){if(hxe(e)){const{value:i}=e;return Ce(i)?{signal:i.signal}:{value:i}}return fG({scale:t,scaleName:n,mode:"zeroOrMin"})}function zk(e){const{channel:t,channelDef:n,markDef:i,scale:r,scaleName:a,config:s}=e,o=dc(t),l=Fk(e),f=dG({scaleChannel:o,channelDef:n,scale:r,scaleName:a,markDef:i,config:s});return f!==void 0?[f,l]:l}function Rxe(e){const{datum:t}=e;return pc(t)?Vl(t):`${ft(t)}`}function Ml(e,t,n,i){const r={};if(t&&(r.scale=t),cs(e)){const{datum:a}=e;pc(a)?r.signal=Vl(a):Ce(a)?r.signal=a.signal:h0(a)?r.signal=a.expr:r.value=a}else r.field=pe(e,n);if(i){const{offset:a,band:s}=i;a&&(r.offset=a),s&&(r.band=s)}return r}function Sv({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:i,startSuffix:r,endSuffix:a="end",bandPosition:s=.5}){const o=!Ce(s)&&0<s&&s<1?"datum":void 0,l=pe(t,{expr:o,suffix:r}),f=n!==void 0?pe(n,{expr:o}):pe(t,{suffix:a,expr:o}),d={};if(s===0||s===1){d.scale=e;const h=s===0?l:f;d.field=h}else{const h=Ce(s)?`(1-${s.signal}) * ${l} + ${s.signal} * ${f}`:`${1-s} * ${l} + ${s} * ${f}`;d.signal=`scale("${e}", ${h})`}return i&&(d.offset=i),d}function Dxe({scaleName:e,fieldDef:t}){const n=pe(t,{expr:"datum"}),i=pe(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${i}) - scale("${e}", ${n}))`}function Fk({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f,bandPosition:d}){if(t){if(Be(t)){const h=s?.get("type");if(vi(t)){d??=xu({fieldDef:t,fieldDef2:n,markDef:i,config:r});const{bin:p,timeUnit:y,type:v}=t;if(Ct(p)||d&&y&&v===ud)return o?.impute?Ml(t,a,{binSuffix:"mid"},{offset:l}):d&&!An(h)?Sv({scaleName:a,fieldOrDatumDef:t,bandPosition:d,offset:l}):Ml(t,a,b0(t,e)?{binSuffix:"range"}:{},{offset:l});if(On(p)){if(de(n))return Sv({scaleName:a,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:d,offset:l});fe(qH(e===Rt?ma:as))}}return Ml(t,a,An(h)?{binSuffix:"range"}:{},{offset:l,band:h==="band"?d??t.bandPosition??.5:void 0})}else if(ua(t)){const h=t.value,p=l?{offset:l}:{};return{...Qg(e,h),...p}}}return Pe(f)&&(f=f()),f&&{...f,...l?{offset:l}:{}}}function Qg(e,t){return Xe(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Xe(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:Tt(t)}function Zl(e){return e&&e!=="number"&&e!=="time"}function hG(e,t,n){return`${e}(${t}${n?`, ${ft(n)}`:""})`}function Lk({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a}){if(Zl(n))return ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,config:a});const s=gG(e,i,r),o=cd(e);if(t===void 0&&n===void 0&&a.customFormatTypes){if(o==="quantitative"){if(r&&a.normalizedNumberFormatType)return ta({fieldOrDatumDef:e,format:a.normalizedNumberFormat,formatType:a.normalizedNumberFormatType,expr:i,config:a});if(a.numberFormatType)return ta({fieldOrDatumDef:e,format:a.numberFormat,formatType:a.numberFormatType,expr:i,config:a})}if(o==="temporal"&&a.timeFormatType&&de(e)&&e.timeUnit===void 0)return ta({fieldOrDatumDef:e,format:a.timeFormat,formatType:a.timeFormatType,expr:i,config:a})}function l(f){return de(f)?wn(f.timeUnit)||{}:{unit:void 0,utc:void 0}}if(dd(e)){const{unit:f,utc:d}=l(e),h=zxe({field:s,timeUnit:f,format:t,formatType:a.timeFormatType,rawTimeFormat:a.timeFormat,isUTCScale:d||yc(e)&&e.scale?.type===Dn.UTC});return h?{signal:h}:void 0}if(t=MC({type:o,specifiedFormat:t,config:a,normalizeStack:r}),de(e)&&Ct(e.bin)){const f=pe(e,{expr:i,binSuffix:"end"});return{signal:p0(s,f,t,n,a)}}else return t||cd(e)==="quantitative"?{signal:`${yG(s,t)}`}:{signal:`isValid(${s}) ? ${s} : ""+${s}`}}function gG(e,t,n){return de(e)?n?`${pe(e,{expr:t,suffix:"end"})}-${pe(e,{expr:t,suffix:"start"})}`:pe(e,{expr:t}):Rxe(e)}function ta({fieldOrDatumDef:e,format:t,formatType:n,expr:i,normalizeStack:r,config:a,field:s}){if(s??=gG(e,i,r),s!=="datum.value"&&de(e)&&Ct(e.bin)){const o=pe(e,{expr:i,binSuffix:"end"});return{signal:p0(s,o,t,n,a)}}return{signal:hG(n,s,t)}}function pG(e,t,n,i,r,a){if(!(Ee(i)&&Zl(i))&&!(n===void 0&&i===void 0&&r.customFormatTypes&&cd(e)==="quantitative"&&(r.normalizedNumberFormatType&&fd(e)&&e.stack==="normalize"||r.numberFormatType))){if(fd(e)&&e.stack==="normalize"&&r.normalizedNumberFormat)return MC({type:"quantitative",config:r,normalizeStack:!0});if(dd(e)){const s=de(e)?wn(e.timeUnit)?.unit:void 0;return s===void 0&&r.customFormatTypes&&r.timeFormatType?void 0:Nxe({specifiedFormat:n,timeUnit:s,config:r,omitTimeFormatConfig:a})}return MC({type:t,specifiedFormat:n,config:r})}}function mG(e,t,n){if(e&&(Ce(e)||e==="number"||e==="time"))return e;if(dd(t)&&n!=="time"&&n!=="utc")return de(t)&&wn(t?.timeUnit)?.utc?"utc":"time"}function MC({type:e,specifiedFormat:t,config:n,normalizeStack:i}){if(Ee(t))return t;if(e===Wl)return i?n.normalizedNumberFormat:n.numberFormat}function Nxe({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:i}){return e||(t?{signal:VH(t)}:i?void 0:n.timeFormat)}function yG(e,t){return`format(${e}, "${t||""}")`}function AF(e,t,n,i){return Zl(n)?hG(n,e,t):yG(e,(Ee(t)?t:void 0)??i.numberFormat)}function p0(e,t,n,i,r){if(n===void 0&&i===void 0&&r.customFormatTypes&&r.numberFormatType)return p0(e,t,r.numberFormat,r.numberFormatType,r);const a=AF(e,n,i,r),s=AF(t,n,i,r);return`${hx(e,!1)} ? "null" : ${a} + "${Eve}" + ${s}`}function zxe({field:e,timeUnit:t,format:n,formatType:i,rawTimeFormat:r,isUTCScale:a}){return!t||n?!t&&i?`${i}(${e}, ${ft(n)})`:(n=Ee(n)?n:r,`${a?"utc":"time"}Format(${e}, ${ft(n)})`):Hbe(t,e,a)}const vx="min",Fxe={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function CF(e){return Se(Fxe,e)}function Lxe(e){return le(e,"encoding")}function Ys(e){return e&&(e.op==="count"||le(e,"field"))}function vG(e){return e&&re(e)}function m0(e){return le(e,"row")||le(e,"column")}function Bk(e){return le(e,"header")}function bx(e){return le(e,"facet")}function Bxe(e){return le(e,"param")}function Uxe(e){return!Ee(e)&&le(e,"repeat")}function $F(e){const{field:t,timeUnit:n,bin:i,aggregate:r}=e;return{...n?{timeUnit:n}:{},...i?{bin:i}:{},...r?{aggregate:r}:{},field:t}}function Uk(e){return le(e,"sort")}function xu({fieldDef:e,fieldDef2:t,markDef:n,config:i}){if(Be(e)&&e.bandPosition!==void 0)return e.bandPosition;if(de(e)){const{timeUnit:r,bin:a}=e;if(r&&!t)return Wa("timeUnitBandPosition",n,i);if(Ct(a))return .5}}function bG({channel:e,fieldDef:t,fieldDef2:n,markDef:i,config:r,scaleType:a,useVlSizeChannel:s}){const o=Bi(e),l=xt(s?"size":o,i,r,{vgChannel:o});if(l!==void 0)return l;if(de(t)){const{timeUnit:f,bin:d}=t;if(f&&!n)return{band:Wa("timeUnitBandSize",i,r)};if(Ct(d)&&!An(a))return{band:1}}if(wp(i.type))return a?An(a)?r[i.type]?.discreteBandSize||{band:1}:r[i.type]?.continuousBandSize:r[i.type]?.discreteBandSize}function xG(e,t,n,i){return Ct(e.bin)||e.timeUnit&&vi(e)&&e.type==="temporal"?xu({fieldDef:e,fieldDef2:t,markDef:n,config:i})!==void 0:!1}function SG(e){return le(e,"sort")&&!le(e,"field")}function y0(e){return le(e,"condition")}function xx(e){const t=e?.condition;return!!t&&!re(t)&&de(t)}function v0(e){const t=e?.condition;return!!t&&!re(t)&&Be(t)}function qxe(e){const t=e?.condition;return!!t&&(re(t)||ua(t))}function de(e){return le(e,"field")||e?.aggregate==="count"}function cd(e){return e?.type}function cs(e){return le(e,"datum")}function eu(e){return vi(e)&&!_v(e)||Ev(e)}function TF(e){return vi(e)&&e.type==="quantitative"&&!e.bin||Ev(e)}function Ev(e){return cs(e)&&at(e.datum)}function Be(e){return de(e)||cs(e)}function vi(e){return e&&(le(e,"field")||e.aggregate==="count")&&le(e,"type")}function ua(e){return le(e,"value")}function yc(e){return le(e,"scale")||le(e,"sort")}function fd(e){return le(e,"axis")||le(e,"stack")||le(e,"impute")}function EG(e){return le(e,"legend")}function _G(e){return le(e,"format")||le(e,"formatType")}function Pxe(e){return ar(e,["legend","axis","header","scale"])}function Ixe(e){return le(e,"op")}function pe(e,t={}){let n=e.field;const i=t.prefix;let r=t.suffix,a="";if(Hxe(e))n=dH("count");else{let s;if(!t.nofn)if(Ixe(e))s=e.op;else{const{bin:o,aggregate:l,timeUnit:f}=e;Ct(o)?(s=CH(o),r=(t.binSuffix??"")+(t.suffix??"")):l?zu(l)?(a=`["${n}"]`,n=`argmax_${l.argmax}`):Ks(l)?(a=`["${n}"]`,n=`argmin_${l.argmin}`):s=String(l):f&&!mc(f)&&(s=Gbe(f),r=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}s&&(n=n?`${s}_${n}`:s)}return r&&(n=`${n}_${r}`),i&&(n=`${i}_${n}`),t.forAs?Fd(n):t.expr?lH(n,t.expr)+a:zr(n)+a}function _v(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return de(e)&&!!e.bin;case"temporal":return!1}throw new Error(FH(e.type))}function jxe(e){return yc(e)&&ld(e.scale?.type)}function Hxe(e){return e.aggregate==="count"}function Gxe(e,t){const{field:n,bin:i,timeUnit:r,aggregate:a}=e;if(a==="count")return t.countTitle;if(Ct(i))return`${n} (binned)`;if(r&&!mc(r)){const s=wn(r)?.unit;if(s)return`${n} (${dx(s).join("-")})`}else if(a)return zu(a)?`${n} for max ${a.argmax}`:Ks(a)?`${n} for min ${a.argmin}`:`${l0(a)} of ${n}`;return n}function Yxe(e){const{aggregate:t,bin:n,timeUnit:i,field:r}=e;if(zu(t))return`${r} for argmax(${t.argmax})`;if(Ks(t))return`${r} for argmin(${t.argmin})`;const a=i&&!mc(i)?wn(i):void 0,s=t||a?.unit||a?.maxbins&&"timeunit"||Ct(n)&&"bin";return s?`${s.toUpperCase()}(${r})`:r}const wG=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return Yxe(e);default:return Gxe(e,t)}};let AG=wG;function CG(e){AG=e}function Xxe(){CG(wG)}function zf(e,t,{allowDisabling:n,includeDefault:i=!0}){const r=qk(e)?.title;if(!de(e))return r??e.title;const a=e,s=i?Pk(a,t):void 0;return n?Vt(r,a.title,s):r??a.title??s}function qk(e){if(fd(e)&&e.axis)return e.axis;if(EG(e)&&e.legend)return e.legend;if(Bk(e)&&e.header)return e.header}function Pk(e,t){return AG(e,t)}function wv(e){if(_G(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=qk(e)??{},{format:n,formatType:i}=t;return{format:n,formatType:i}}}function Vxe(e,t){switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(Uk(e)&&re(e.sort))return"ordinal";const{aggregate:n,bin:i,timeUnit:r}=e;if(r)return"temporal";if(i||n&&!zu(n)&&!Ks(n))return"quantitative";if(yc(e)&&e.scale?.type)switch($C[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function la(e){if(de(e))return e;if(xx(e))return e.condition}function ln(e){if(Be(e))return e;if(v0(e))return e.condition}function $G(e,t,n,i={}){if(Ee(e)||at(e)||tc(e)){const r=Ee(e)?"string":at(e)?"number":"boolean";return fe(Vve(t,r,e)),{value:e}}return Be(e)?Av(e,t,n,i):v0(e)?{...e,condition:Av(e.condition,t,n,i)}:e}function Av(e,t,n,i){if(_G(e)){const{format:r,formatType:a,...s}=e;if(Zl(a)&&!n.customFormatTypes)return fe(xF(t)),Av(s,t,n,i)}else{const r=fd(e)?"axis":EG(e)?"legend":Bk(e)?"header":null;if(r&&e[r]){const{format:a,formatType:s,...o}=e[r];if(Zl(s)&&!n.customFormatTypes)return fe(xF(t)),Av({...e,[r]:o},t,n,i)}}return de(e)?Ik(e,t,i):Wxe(e)}function Wxe(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=at(n)?"quantitative":Ee(n)?"nominal":pc(n)?"temporal":void 0,{...e,type:t}}function Ik(e,t,{compositeMark:n=!1}={}){const{aggregate:i,timeUnit:r,bin:a,field:s}=e,o={...e};if(!n&&i&&!hk(i)&&!zu(i)&&!Ks(i)&&(fe(Qve(i)),delete o.aggregate),r&&(o.timeUnit=wn(r)),s&&(o.field=`${s}`),Ct(a)&&(o.bin=Sx(a,t)),On(a)&&!Wt(t)&&fe(Tbe(t)),vi(o)){const{type:l}=o,f=Jbe(l);l!==f&&(o.type=f),l!=="quantitative"&&lx(i)&&(fe(Wve(l,i)),o.type="quantitative")}else if(!xH(t)){const l=Vxe(o,t);o.type=l}if(vi(o)){const{compatible:l,warning:f}=Qxe(o,t)||{};l===!1&&fe(f)}if(Uk(o)&&Ee(o.sort)){const{sort:l}=o;if(CF(l))return{...o,sort:{encoding:l}};const f=l.substring(1);if(l.charAt(0)==="-"&&CF(f))return{...o,sort:{encoding:f,order:"descending"}}}if(Bk(o)){const{header:l}=o;if(l){const{orient:f,...d}=l;if(f)return{...o,header:{...d,labelOrient:l.labelOrient||f,titleOrient:l.titleOrient||f}}}}return o}function Sx(e,t){return tc(e)?{maxbins:fF(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:fF(t)}:e}const pf={compatible:!0};function Qxe(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case Hs:case Gs:case ix:return _v(e)?pf:{compatible:!1,warning:ebe(t)};case Rt:case $n:case Mu:case Ld:case Fi:case ss:case os:case c0:case f0:case rx:case Yl:case ax:case sx:case fc:case Br:case ya:case ox:return pf;case ba:case Fr:case va:case xa:return n!==Wl?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:pf;case so:case Ou:case Ru:case Du:case ao:case ro:case io:case ma:case as:case ku:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:pf;case Li:case Nu:return!_v(e)&&!jxe(e)?{compatible:!1,warning:tbe(t)}:pf;case od:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:pf}}function dd(e){const{formatType:t}=wv(e);return t==="time"||!t&&Zxe(e)}function Zxe(e){return e&&(e.type==="temporal"||de(e)&&!!e.timeUnit)}function Ex(e,{timeUnit:t,type:n,wrapTime:i,undefinedIfExprNotRequired:r}){const a=t&&wn(t)?.unit;let s=a||n==="temporal",o;return h0(e)?o=e.expr:Ce(e)?o=e.signal:pc(e)?(s=!0,o=Vl(e)):(Ee(e)||at(e))&&s&&(o=`datetime(${ft(e)})`,qbe(a)&&(at(e)&&e<1e4||Ee(e)&&isNaN(Date.parse(e)))&&(o=Vl({[a]:e}))),o?i&&s?`time(${o})`:o:r?void 0:ft(e)}function TG(e,t){const{type:n}=e;return t.map(i=>{const r=de(e)&&!mc(e.timeUnit)?e.timeUnit:void 0,a=Ex(i,{timeUnit:r,type:n,undefinedIfExprNotRequired:!0});return a!==void 0?{signal:a}:i})}function b0(e,t){return Ct(e.bin)?ls(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const MF={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function x0(e){return e?.condition}const MG=["domain","grid","labels","ticks","title"],Kxe={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},kG={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},Jxe={...kG,style:1,labelExpr:1,encoding:1};function kF(e){return Se(Jxe,e)}const e2e={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},OG=ue(e2e);function uo(e){return le(e,"mark")}class _x{name;run;constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return uo(t)?Mxe(t.mark)===this.name:!1}}function kl(e,t){const n=e?.[t];return n?re(n)?ad(n,i=>!!i.field):de(n)||xx(n):!1}function RG(e,t){const n=e?.[t];return n?re(n)?ad(n,i=>!!i.field):de(n)||cs(n)||v0(n):!1}function DG(e,t){if(Wt(t)){const n=e[t];if((de(n)||cs(n))&&(JH(n.type)||de(n)&&n.timeUnit)){const i=uk(t);return RG(e,i)}}return!1}function NG(e){return ad(Wye,t=>{if(kl(e,t)){const n=e[t];if(re(n))return ad(n,i=>!!i.aggregate);{const i=la(n);return i&&!!i.aggregate}}return!1})}function zG(e,t){const n=[],i=[],r=[],a=[],s={};return jk(e,(o,l)=>{if(de(o)){const{field:f,aggregate:d,bin:h,timeUnit:p,...y}=o;if(d||p||h){const b=qk(o)?.title;let S=pe(o,{forAs:!0});const _={...b?[]:{title:zf(o,t,{allowDisabling:!0})},...y,field:S};if(d){let w;if(zu(d)?(w="argmax",S=pe({op:"argmax",field:d.argmax},{forAs:!0}),_.field=`${S}.${f}`):Ks(d)?(w="argmin",S=pe({op:"argmin",field:d.argmin},{forAs:!0}),_.field=`${S}.${f}`):d!=="boxplot"&&d!=="errorbar"&&d!=="errorband"&&(w=d),w){const A={op:w,as:S};f&&(A.field=f),a.push(A)}}else if(n.push(S),vi(o)&&Ct(h)){if(i.push({bin:h,field:f,as:S}),n.push(pe(o,{binSuffix:"end"})),b0(o,l)&&n.push(pe(o,{binSuffix:"range"})),Wt(l)){const w={field:`${S}_end`};s[`${l}2`]=w}_.bin="binned",xH(l)||(_.type=Wl)}else if(p&&!mc(p)){r.push({timeUnit:p,field:f,as:S});const w=vi(o)&&o.type!==ud&&"time";w&&(l===c0||l===Yl?_.formatType=w:sve(l)?_.legend={formatType:w,..._.legend}:Wt(l)&&(_.axis={formatType:w,..._.axis}))}s[l]=_}else n.push(f),s[l]=e[l]}else s[l]=e[l]}),{bins:i,timeUnits:r,aggregate:a,groupby:n,encoding:s}}function t2e(e,t,n){const i=uve(t,n);if(i){if(i==="binned"){const r=e[t===ma?Rt:$n];return!!(de(r)&&de(e[t])&&On(r.bin))}}else return!1;return!0}function n2e(e,t,n,i){const r={};for(const a of ue(e))bH(a)||fe(Jve(a));for(let a of tve){if(!e[a])continue;const s=e[a];if(d0(a)){const o=eve(a),l=r[o];if(de(l)&&Kbe(l.type)&&de(s)&&!l.timeUnit){fe(Xve(o));continue}}if(a==="angle"&&t==="arc"&&!e.theta&&(fe(Yve),a=Br),!t2e(e,a,t)){fe(fx(a,t));continue}if(a===ao&&t==="line"&&la(e[a])?.aggregate){fe(Kve);continue}if(a===Fi&&(n?"fill"in e:"stroke"in e)){fe(LH("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(a===f0||a===od&&!re(s)&&!ua(s)||a===Yl&&re(s)){if(s){if(a===od){const o=e[a];if(SG(o)){r[a]=o;continue}}r[a]=ve(s).reduce((o,l)=>(de(l)?o.push(Ik(l,a)):fe(CC(l,a)),o),[])}}else{if(a===Yl&&s===null)r[a]=null;else if(!de(s)&&!cs(s)&&!ua(s)&&!y0(s)&&!Ce(s)){fe(CC(s,a));continue}r[a]=$G(s,a,i)}}return r}function wx(e,t){const n={};for(const i of ue(e)){const r=$G(e[i],i,t,{compositeMark:!0});n[i]=r}return n}function i2e(e){const t=[];for(const n of ue(e))if(kl(e,n)){const i=e[n],r=ve(i);for(const a of r)de(a)?t.push(a):xx(a)&&t.push(a.condition)}return t}function jk(e,t,n){if(e)for(const i of ue(e)){const r=e[i];if(re(r))for(const a of r)t.call(n,a,i);else t.call(n,r,i)}}function r2e(e,t,n,i){return e?ue(e).reduce((r,a)=>{const s=e[a];return re(s)?s.reduce((o,l)=>t.call(i,o,l,a),r):t.call(i,r,s,a)},n):n}function FG(e,t){return ue(t).reduce((n,i)=>{switch(i){case Rt:case $n:case ax:case ox:case sx:case ma:case as:case Mu:case Ld:case Br:case ro:case ya:case io:case ku:case va:case ba:case xa:case Fr:case c0:case Li:case fc:case Yl:return n;case od:if(e==="line"||e==="trail")return n;case f0:case rx:{const r=t[i];if(re(r)||de(r))for(const a of ve(r))a.aggregate||n.push(pe(a,{}));return n}case ao:if(e==="trail")return n;case Fi:case ss:case os:case so:case Ou:case Ru:case Nu:case Du:{const r=la(t[i]);return r&&!r.aggregate&&n.push(pe(r,{})),n}}},[])}function a2e(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let i,r;if(re(t)){for(const a of t)a.aggregate?(i||(i=[]),i.push(a)):(r||(r=[]),r.push(a));i&&(n.tooltip=i)}else t.aggregate?n.tooltip=t:r=t;return re(r)&&r.length===1&&(r=r[0]),{customTooltipWithoutAggregatedField:r,filteredEncoding:n}}function kC(e,t,n,i=!0){if("tooltip"in n)return{tooltip:n.tooltip};const r=e.map(({fieldPrefix:s,titlePrefix:o})=>{const l=i?` of ${Hk(t)}`:"";return{field:s+t.field,type:t.type,title:Ce(o)?{signal:`${o}"${escape(l)}"`}:o+l}}),a=i2e(n).map(Pxe);return{tooltip:[...r,...za(a,Qe)]}}function Hk(e){const{title:t,field:n}=e;return Vt(t,n)}function Gk(e,t,n,i,r){const{scale:a,axis:s}=n;return({partName:o,mark:l,positionPrefix:f,endPositionPrefix:d=void 0,extraEncoding:h={}})=>{const p=Hk(n);return LG(e,o,r,{mark:l,encoding:{[t]:{field:`${f}_${n.field}`,type:n.type,...p!==void 0?{title:p}:{},...a!==void 0?{scale:a}:{},...s!==void 0?{axis:s}:{}},...Ee(d)?{[`${t}2`]:{field:`${d}_${n.field}`}}:{},...i,...h}})}}function LG(e,t,n,i){const{clip:r,color:a,opacity:s}=e,o=e.type;return e[t]||e[t]===void 0&&n[t]?[{...i,mark:{...n[t],...r?{clip:r}:{},...a?{color:a}:{},...s?{opacity:s}:{},...Qa(i.mark)?i.mark:{type:i.mark},style:`${o}-${String(t)}`,...tc(e[t])?{}:e[t]}}]:[]}function BG(e,t,n){const{encoding:i}=e,r=t==="vertical"?"y":"x",a=i[r],s=i[`${r}2`],o=i[`${r}Error`],l=i[`${r}Error2`];return{continuousAxisChannelDef:p1(a,n),continuousAxisChannelDef2:p1(s,n),continuousAxisChannelDefError:p1(o,n),continuousAxisChannelDefError2:p1(l,n),continuousAxis:r}}function p1(e,t){if(e?.aggregate){const{aggregate:n,...i}=e;return n!==t&&fe($be(n,t)),i}else return e}function UG(e,t){const{mark:n,encoding:i}=e,{x:r,y:a}=i;if(Qa(n)&&n.orient)return n.orient;if(eu(r)){if(eu(a)){const s=de(r)&&r.aggregate,o=de(a)&&a.aggregate;if(!s&&o===t)return"vertical";if(!o&&s===t)return"horizontal";if(s===t&&o===t)throw new Error("Both x and y cannot have aggregate");return dd(a)&&!dd(r)?"horizontal":"vertical"}return"horizontal"}else{if(eu(a))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const Cv="boxplot",s2e=["box","median","outliers","rule","ticks"],o2e=new _x(Cv,PG);function qG(e){return at(e)?"tukey":e}function PG(e,{config:t}){e={...e,encoding:wx(e.encoding,t)};const{mark:n,encoding:i,params:r,projection:a,...s}=e,o=Qa(n)?n:{type:n};r&&fe(zH("boxplot"));const l=o.extent??t.boxplot.extent,f=xt("size",o,t),d=o.invalid,h=qG(l),{bins:p,timeUnits:y,transform:v,continuousAxisChannelDef:b,continuousAxis:S,groupby:_,aggregate:w,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:T,customTooltipWithoutAggregatedField:k}=u2e(e,l,t),M=Fd(b.field),{color:R,size:z,...U}=A,L=Kt=>Gk(o,S,b,Kt,t.boxplot),G=L(U),j=L(A),q=(xe(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=L({...U,...z?{size:z}:{},color:{condition:{test:`${gt(`lower_box_${b.field}`)} >= ${gt(`upper_box_${b.field}`)}`,...R||{value:q}}}}),D=kC([{fieldPrefix:h==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:h==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],b,A),P={type:"tick",color:"black",opacity:1,orient:C,invalid:d,aria:!1},X=h==="min-max"?D:kC([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],b,A),Z=[...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:X}),...G({partName:"rule",mark:{type:"rule",invalid:d,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"lower_whisker",extraEncoding:X}),...G({partName:"ticks",mark:P,positionPrefix:"upper_whisker",extraEncoding:X})],N=[...h!=="tukey"?Z:[],...j({partName:"box",mark:{type:"bar",...f?{size:f}:{},orient:T,invalid:d,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:D}),...F({partName:"median",mark:{type:"tick",invalid:d,...xe(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...f?{size:f}:{},orient:C,aria:!1},positionPrefix:"mid_box",extraEncoding:D})];if(h==="min-max")return{...s,transform:(s.transform??[]).concat(v),layer:N};const W=gt(`lower_box_${b.field}`),ne=gt(`upper_box_${b.field}`),ae=`(${ne} - ${W})`,me=`${W} - ${l} * ${ae}`,be=`${ne} + ${l} * ${ae}`,Ae=gt(b.field),jt={joinaggregate:IG(b.field),groupby:_},tt={transform:[{filter:`(${me} <= ${Ae}) && (${Ae} <= ${be})`},{aggregate:[{op:"min",field:b.field,as:`lower_whisker_${M}`},{op:"max",field:b.field,as:`upper_whisker_${M}`},{op:"min",field:`lower_box_${b.field}`,as:`lower_box_${M}`},{op:"max",field:`upper_box_${b.field}`,as:`upper_box_${M}`},...w],groupby:_}],layer:Z},{tooltip:ye,...Le}=U,{scale:Ue,axis:ce}=b,Ht=Hk(b),nt=LG(o,"outliers",t.boxplot,{transform:[{filter:`(${Ae} < ${me}) || (${Ae} > ${be})`}],mark:"point",encoding:{[S]:{field:b.field,type:b.type,...Ht!==void 0?{title:Ht}:{},...Ue!==void 0?{scale:Ue}:{},...ce!==void 0?{axis:ce}:{}},...Le,...R?{color:R}:{},...k?{tooltip:k}:{}}})[0];let Zt;const hn=[...p,...y,jt];return nt?Zt={transform:hn,layer:[nt,tt]}:(Zt=tt,Zt.transform.unshift(...hn)),{...s,layer:[Zt,{transform:v,layer:N}]}}function IG(e){const t=Fd(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function u2e(e,t,n){const i=UG(e,Cv),{continuousAxisChannelDef:r,continuousAxis:a}=BG(e,i,Cv),s=r.field,o=Fd(s),l=qG(t),f=[...IG(s),{op:"median",field:s,as:`mid_box_${o}`},{op:"min",field:s,as:(l==="min-max"?"lower_whisker_":"min_")+o},{op:"max",field:s,as:(l==="min-max"?"upper_whisker_":"max_")+o}],d=l==="min-max"||l==="tukey"?[]:[{calculate:`${gt(`upper_box_${o}`)} - ${gt(`lower_box_${o}`)}`,as:`iqr_${o}`},{calculate:`min(${gt(`upper_box_${o}`)} + ${gt(`iqr_${o}`)} * ${t}, ${gt(`max_${o}`)})`,as:`upper_whisker_${o}`},{calculate:`max(${gt(`lower_box_${o}`)} - ${gt(`iqr_${o}`)} * ${t}, ${gt(`min_${o}`)})`,as:`lower_whisker_${o}`}],{[a]:h,...p}=e.encoding,{customTooltipWithoutAggregatedField:y,filteredEncoding:v}=a2e(p),{bins:b,timeUnits:S,aggregate:_,groupby:w,encoding:A}=zG(v,n),C=i==="vertical"?"horizontal":"vertical",T=i,k=[...b,...S,{aggregate:[..._,...f],groupby:w},...d];return{bins:b,timeUnits:S,transform:k,groupby:w,aggregate:_,continuousAxisChannelDef:r,continuousAxis:a,encodingWithoutContinuousAxis:A,ticksOrient:C,boxOrient:T,customTooltipWithoutAggregatedField:y}}const Yk="errorbar",l2e=["ticks","rule"],c2e=new _x(Yk,jG);function jG(e,{config:t}){e={...e,encoding:wx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,ticksOrient:s,markDef:o,outerSpec:l,tooltipEncoding:f}=HG(e,Yk,t);delete a.size;const d=Gk(o,r,i,a,t.errorbar),h=o.thickness,p=o.size,y={type:"tick",orient:s,aria:!1,...h!==void 0?{thickness:h}:{},...p!==void 0?{size:p}:{}},v=[...d({partName:"ticks",mark:y,positionPrefix:"lower",extraEncoding:f}),...d({partName:"ticks",mark:y,positionPrefix:"upper",extraEncoding:f}),...d({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...h!==void 0?{size:h}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:f})];return{...l,transform:n,...v.length>1?{layer:v}:{...v[0]}}}function f2e(e,t){const{encoding:n}=e;if(d2e(n))return{orient:UG(e,t),inputType:"raw"};const i=h2e(n),r=g2e(n),a=n.x,s=n.y;if(i){if(r)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const o=n.x2,l=n.y2;if(Be(o)&&Be(l))throw new Error(`${t} cannot have both x2 and y2`);if(Be(o)){if(eu(a))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(Be(l)){if(eu(s))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const o=n.xError,l=n.xError2,f=n.yError,d=n.yError2;if(Be(l)&&!Be(o))throw new Error(`${t} cannot have xError2 without xError`);if(Be(d)&&!Be(f))throw new Error(`${t} cannot have yError2 without yError`);if(Be(o)&&Be(f))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(Be(o)){if(eu(a))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(Be(f)){if(eu(s))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function d2e(e){return(Be(e.x)||Be(e.y))&&!Be(e.x2)&&!Be(e.y2)&&!Be(e.xError)&&!Be(e.xError2)&&!Be(e.yError)&&!Be(e.yError2)}function h2e(e){return Be(e.x2)||Be(e.y2)}function g2e(e){return Be(e.xError)||Be(e.xError2)||Be(e.yError)||Be(e.yError2)}function HG(e,t,n){const{mark:i,encoding:r,params:a,projection:s,...o}=e,l=Qa(i)?i:{type:i};a&&fe(zH(t));const{orient:f,inputType:d}=f2e(e,t),{continuousAxisChannelDef:h,continuousAxisChannelDef2:p,continuousAxisChannelDefError:y,continuousAxisChannelDefError2:v,continuousAxis:b}=BG(e,f,t),{errorBarSpecificAggregate:S,postAggregateCalculates:_,tooltipSummary:w,tooltipTitleWithFieldName:A}=p2e(l,h,p,y,v,d,t,n),{[b]:C,[b==="x"?"x2":"y2"]:T,[b==="x"?"xError":"yError"]:k,[b==="x"?"xError2":"yError2"]:M,...R}=r,{bins:z,timeUnits:U,aggregate:L,groupby:G,encoding:j}=zG(R,n),q=[...L,...S],F=d!=="raw"?[]:G,D=kC(w,h,j,A);return{transform:[...o.transform??[],...z,...U,...q.length===0?[]:[{aggregate:q,groupby:F}],..._],groupby:F,continuousAxisChannelDef:h,continuousAxis:b,encodingWithoutContinuousAxis:j,ticksOrient:f==="vertical"?"horizontal":"vertical",markDef:l,outerSpec:o,tooltipEncoding:D}}function p2e(e,t,n,i,r,a,s,o){let l=[],f=[];const d=t.field;let h,p=!1;if(a==="raw"){const y=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":o.errorbar.center,v=e.extent?e.extent:y==="mean"?"stderr":"iqr";if(y==="median"!=(v==="iqr")&&fe(Cbe(y,v,s)),v==="stderr"||v==="stdev")l=[{op:v,field:d,as:`extent_${d}`},{op:y,field:d,as:`center_${d}`}],f=[{calculate:`${gt(`center_${d}`)} + ${gt(`extent_${d}`)}`,as:`upper_${d}`},{calculate:`${gt(`center_${d}`)} - ${gt(`extent_${d}`)}`,as:`lower_${d}`}],h=[{fieldPrefix:"center_",titlePrefix:l0(y)},{fieldPrefix:"upper_",titlePrefix:OF(y,v,"+")},{fieldPrefix:"lower_",titlePrefix:OF(y,v,"-")}],p=!0;else{let b,S,_;v==="ci"?(b="mean",S="ci0",_="ci1"):(b="median",S="q1",_="q3"),l=[{op:S,field:d,as:`lower_${d}`},{op:_,field:d,as:`upper_${d}`},{op:b,field:d,as:`center_${d}`}],h=[{fieldPrefix:"upper_",titlePrefix:zf({field:d,aggregate:_,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:zf({field:d,aggregate:S,type:"quantitative"},o,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:zf({field:d,aggregate:b,type:"quantitative"},o,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&fe(Abe(e.center,e.extent)),a==="aggregated-upper-lower"?(h=[],f=[{calculate:gt(n.field),as:`upper_${d}`},{calculate:gt(d),as:`lower_${d}`}]):a==="aggregated-error"&&(h=[{fieldPrefix:"",titlePrefix:d}],f=[{calculate:`${gt(d)} + ${gt(i.field)}`,as:`upper_${d}`}],r?f.push({calculate:`${gt(d)} + ${gt(r.field)}`,as:`lower_${d}`}):f.push({calculate:`${gt(d)} - ${gt(i.field)}`,as:`lower_${d}`}));for(const y of f)h.push({fieldPrefix:y.as.substring(0,6),titlePrefix:Gl(Gl(y.calculate,"datum['",""),"']","")})}return{postAggregateCalculates:f,errorBarSpecificAggregate:l,tooltipSummary:h,tooltipTitleWithFieldName:p}}function OF(e,t,n){return`${l0(e)} ${n} ${t}`}const Xk="errorband",m2e=["band","borders"],y2e=new _x(Xk,GG);function GG(e,{config:t}){e={...e,encoding:wx(e.encoding,t)};const{transform:n,continuousAxisChannelDef:i,continuousAxis:r,encodingWithoutContinuousAxis:a,markDef:s,outerSpec:o,tooltipEncoding:l}=HG(e,Xk,t),f=s,d=Gk(f,r,i,a,t.errorband),h=e.encoding.x!==void 0&&e.encoding.y!==void 0;let p={type:h?"area":"rect"},y={type:h?"line":"rule"};const v={...f.interpolate?{interpolate:f.interpolate}:{},...f.tension&&f.interpolate?{tension:f.tension}:{}};return h?(p={...p,...v,ariaRoleDescription:"errorband"},y={...y,...v,aria:!1}):f.interpolate?fe(EF("interpolate")):f.tension&&fe(EF("tension")),{...o,transform:n,layer:[...d({partName:"band",mark:p,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"lower",extraEncoding:l}),...d({partName:"borders",mark:y,positionPrefix:"upper",extraEncoding:l})]}}const YG={};function Vk(e,t,n){const i=new _x(e,t);YG[e]={normalizer:i,parts:n}}function v2e(){return ue(YG)}Vk(Cv,PG,s2e);Vk(Yk,jG,l2e);Vk(Xk,GG,m2e);const b2e=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],XG={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},VG={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},x2e=ue(XG),S2e=ue(VG),E2e={header:1,headerRow:1,headerColumn:1,headerFacet:1},WG=ue(E2e),QG=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],_2e={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},w2e={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ca="_vgsid_",A2e={point:{on:"click",fields:[ca],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Wk(e){return e==="legend"||!!e?.legend}function hw(e){return Wk(e)&&xe(e)}function Qk(e){return!!e?.select}function ZG(e){const t=[];for(const n of e||[]){if(Qk(n))continue;const{expr:i,bind:r,...a}=n;if(r&&i){const s={...a,bind:r,init:i};t.push(s)}else{const s={...a,...i?{update:i}:{},...r?{bind:r}:{}};t.push(s)}}return t}function C2e(e){return Ax(e)||Kk(e)||Zk(e)}function Zk(e){return le(e,"concat")}function Ax(e){return le(e,"vconcat")}function Kk(e){return le(e,"hconcat")}function KG({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Za(e){return le(e,"step")}function RF(e){return le(e,"view")||le(e,"width")||le(e,"height")}const DF=20,$2e={align:1,bounds:1,center:1,columns:1,spacing:1},T2e=ue($2e);function M2e(e,t,n){const i=n[t],r={},{spacing:a,columns:s}=i;a!==void 0&&(r.spacing=a),s!==void 0&&(bx(e)&&!m0(e.facet)||Zk(e))&&(r.columns=s),Ax(e)&&(r.columns=1);for(const o of T2e)if(e[o]!==void 0)if(o==="spacing"){const l=e[o];r[o]=at(l)?l:{row:l.row??a,column:l.column??a}}else r[o]=e[o];return r}function OC(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function RC(e,t){const n=$v(e,t);return Za(n)?n.step:JG}function $v(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return Vt(n,{step:e.step})}const JG=20,k2e={continuousWidth:300,continuousHeight:300,step:JG},O2e={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:k2e,mark:_xe,arc:{},area:{},bar:$xe,circle:{},geoshape:{},image:{},line:{},point:{},rect:Dk,rule:{color:"black"},square:{},text:{color:"black"},tick:Txe,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:rxe,projection:{},legend:_2e,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:A2e,style:{},title:{},facet:{spacing:DF},concat:{spacing:DF},normalizedNumberFormat:".0%"},Ms=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],NF={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},zF={blue:Ms[0],orange:Ms[1],red:Ms[2],teal:Ms[3],green:Ms[4],yellow:Ms[5],purple:Ms[6],pink:Ms[7],brown:Ms[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function R2e(e={}){return{signals:[{name:"color",value:xe(e)?{...zF,...e}:zF}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function D2e(e){return{signals:[{name:"fontSize",value:xe(e)?{...NF,...e}:NF}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function N2e(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function eY(e){const t=ue(e||{}),n={};for(const i of t){const r=e[i];n[i]=x0(r)?TH(r):Ji(r)}return n}function z2e(e){const t=ue(e),n={};for(const i of t)n[i]=eY(e[i]);return n}const F2e=[...lG,...OG,...WG,"background","padding","legend","lineBreak","scale","style","title","view"];function tY(e={}){const{color:t,font:n,fontSize:i,selection:r,...a}=e,s=Pv({},Fe(O2e),n?N2e(n):{},t?R2e(t):{},i?D2e(i):{},a||{});r&&Sd(s,"selection",r,!0);const o=ar(s,F2e);for(const l of["background","lineBreak","padding"])s[l]&&(o[l]=Ji(s[l]));for(const l of lG)s[l]&&(o[l]=Rn(s[l]));for(const l of OG)s[l]&&(o[l]=eY(s[l]));for(const l of WG)s[l]&&(o[l]=Rn(s[l]));if(s.legend&&(o.legend=Rn(s.legend)),s.scale){const{invalid:l,...f}=s.scale,d=Rn(l,{level:1});o.scale={...Rn(f),...ue(d).length>0?{invalid:d}:{}}}return s.style&&(o.style=z2e(s.style)),s.title&&(o.title=Rn(s.title)),s.view&&(o.view=Rn(s.view)),o}const L2e=new Set(["view",...yxe]),B2e=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],U2e={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Exe};function q2e(e){e=Fe(e);for(const t of B2e)delete e[t];if(e.axis)for(const t in e.axis)x0(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of b2e)delete e.legend[t];if(e.mark){for(const t of wF)delete e.mark[t];e.mark.tooltip&&xe(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(ZG(e.params)),delete e.params);for(const t of L2e){for(const i of wF)delete e[t][i];const n=U2e[t];if(n)for(const i of n)delete e[t][i];I2e(e,t)}for(const t of v2e())delete e[t];P2e(e);for(const t in e)xe(e[t])&&wt(e[t])&&delete e[t];return wt(e)?void 0:e}function P2e(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:i}=$H(e.title);wt(t)||(e.style["group-title"]={...e.style["group-title"],...t}),wt(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),wt(i)?delete e.title:e.title=i}function I2e(e,t,n,i){const r=e[t];t==="view"&&(n="cell");const a={...r,...e.style[n??t]};wt(a)||(e.style[n??t]=a),delete e[t]}function Cx(e){return le(e,"layer")}function j2e(e){return le(e,"repeat")}function H2e(e){return!re(e.repeat)&&le(e.repeat,"layer")}class Jk{map(t,n){return bx(t)?this.mapFacet(t,n):j2e(t)?this.mapRepeat(t,n):Kk(t)?this.mapHConcat(t,n):Ax(t)?this.mapVConcat(t,n):Zk(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(Cx(t))return this.mapLayer(t,n);if(uo(t))return this.mapUnit(t,n);throw new Error(gk(t))}mapLayer(t,n){return{...t,layer:t.layer.map(i=>this.mapLayerOrUnit(i,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(i=>this.map(i,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(i=>this.map(i,n))}}mapConcat(t,n){const{concat:i,...r}=t;return{...r,concat:i.map(a=>this.map(a,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const G2e={zero:1,center:1,normalize:1};function Y2e(e){return Se(G2e,e)}const X2e=new Set([sG,px,gx,xv,yx,Ok,Rk,mx,oG,kk]),V2e=new Set([px,gx,sG]);function mf(e){return de(e)&&cd(e)==="quantitative"&&!e.bin}function FF(e,t,{orient:n,type:i}){const r=t==="x"?"y":"radius",a=t==="x"&&["bar","area"].includes(i),s=e[t],o=e[r];if(de(s)&&de(o))if(mf(s)&&mf(o)){if(s.stack)return t;if(o.stack)return r;const l=de(s)&&!!s.aggregate,f=de(o)&&!!o.aggregate;if(l!==f)return l?t:r;if(a){if(n==="vertical")return r;if(n==="horizontal")return t}}else{if(mf(s))return t;if(mf(o))return r}else{if(mf(s))return a&&n==="vertical"?void 0:t;if(mf(o))return a&&n==="horizontal"?void 0:r}}function W2e(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function nY(e,t){const n=Qa(e)?e:{type:e},i=n.type;if(!X2e.has(i))return null;const r=FF(t,"x",n)||FF(t,"theta",n);if(!r)return null;const a=t[r],s=de(a)?pe(a,{}):void 0,o=W2e(r),l=[],f=new Set;if(t[o]){const b=t[o],S=de(b)?pe(b,{}):void 0;S&&S!==s&&(l.push(o),f.add(S))}const d=o==="x"?"xOffset":"yOffset",h=t[d],p=de(h)?pe(h,{}):void 0;p&&p!==s&&(l.push(d),f.add(p));const y=nve.reduce((b,S)=>{if(S!=="tooltip"&&kl(t,S)){const _=t[S];for(const w of ve(_)){const A=la(w);if(A.aggregate)continue;const C=pe(A,{});(!C||!f.has(C))&&b.push({channel:S,fieldDef:A})}}return b},[]);let v;return a.stack!==void 0?tc(a.stack)?v=a.stack?"zero":null:v=a.stack:V2e.has(i)&&(v="zero"),!v||!Y2e(v)||NG(t)&&y.length===0?null:(a?.scale?.type&&a?.scale?.type!==Dn.LINEAR&&a?.stack&&fe(Ebe(a.scale.type)),Be(t[us(r)])?(a.stack!==void 0&&fe(Sbe(r)),null):(de(a)&&a.aggregate&&!pve.has(a.aggregate)&&fe(_be(a.aggregate)),{groupbyChannels:l,groupbyFields:f,fieldChannel:r,impute:a.impute===null?!1:Fu(i),stackBy:y,offset:v}))}function iY(e,t,n){const i=Rn(e),r=xt("orient",i,n);if(i.orient=J2e(i.type,t,r),r!==void 0&&r!==i.orient&&fe(abe(i.orient,r)),i.type==="bar"&&i.orient){const l=xt("cornerRadiusEnd",i,n);if(l!==void 0){const f=i.orient==="horizontal"&&t.x2||i.orient==="vertical"&&t.y2?["cornerRadius"]:Axe[i.orient];for(const d of f)i[d]=l;i.cornerRadiusEnd!==void 0&&delete i.cornerRadiusEnd}}const a=xt("opacity",i,n),s=xt("fillOpacity",i,n);return a===void 0&&s===void 0&&(i.opacity=Z2e(i.type,t)),xt("cursor",i,n)===void 0&&(i.cursor=Q2e(i,t,n)),i}function Q2e(e,t,n){return t.href||e.href||xt("href",e,n)?"pointer":e.cursor}function Z2e(e,t){if(Xe([yx,kk,Ok,Rk],e)&&!NG(t))return .7}function K2e(e,t,{graticule:n}){if(n)return!1;const i=Wa("filled",e,t),r=e.type;return Vt(i,r!==yx&&r!==mx&&r!==xv)}function J2e(e,t,n){switch(e){case yx:case Ok:case Rk:case oG:case pxe:case gxe:return}const{x:i,y:r,x2:a,y2:s}=t;switch(e){case px:if(de(i)&&(On(i.bin)||de(r)&&r.aggregate&&!i.aggregate))return"vertical";if(de(r)&&(On(r.bin)||de(i)&&i.aggregate&&!r.aggregate))return"horizontal";if(s||a){if(n)return n;if(!a)return(de(i)&&i.type===Wl&&!Ct(i.bin)||Ev(i))&&de(r)&&On(r.bin)?"horizontal":"vertical";if(!s)return(de(r)&&r.type===Wl&&!Ct(r.bin)||Ev(r))&&de(i)&&On(i.bin)?"vertical":"horizontal"}case xv:if(a&&!(de(i)&&On(i.bin))&&s&&!(de(r)&&On(r.bin)))return;case gx:if(s)return de(r)&&On(r.bin)?"horizontal":"vertical";if(a)return de(i)&&On(i.bin)?"vertical":"horizontal";if(e===xv){if(i&&!r)return"vertical";if(r&&!i)return"horizontal"}case mx:case kk:{const o=TF(i),l=TF(r);if(n)return n;if(o&&!l)return e!=="tick"?"horizontal":"vertical";if(!o&&l)return e!=="tick"?"vertical":"horizontal";if(o&&l)return"vertical";{const f=vi(i)&&i.type===ud,d=vi(r)&&r.type===ud;if(f&&!d)return"vertical";if(!f&&d)return"horizontal"}return}}return"vertical"}function eSe(e){const{point:t,line:n,...i}=e;return ue(i).length>1?i:i.type}function tSe(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:ar(e[t],["point","line"])});return e}function gw(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?xe(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?xe(t.point)?t.point:{}:void 0}function LF(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class nSe{name="path-overlay";hasMatchingType(t,n){if(uo(t)){const{mark:i,encoding:r}=t,a=Qa(i)?i:{type:i};switch(a.type){case"line":case"rule":case"trail":return!!gw(a,n[a.type],r);case"area":return!!gw(a,n[a.type],r)||!!LF(a,n[a.type])}}return!1}run(t,n,i){const{config:r}=n,{params:a,projection:s,mark:o,name:l,encoding:f,...d}=t,h=wx(f,r),p=Qa(o)?o:{type:o},y=gw(p,r[p.type],h),v=p.type==="area"&&LF(p,r[p.type]),b=[{name:l,...a?{params:a}:{},mark:eSe({...p.type==="area"&&p.opacity===void 0&&p.fillOpacity===void 0?{opacity:.7}:{},...p}),encoding:ar(h,["shape"])}],S=nY(iY(p,h,r),h);let _=h;if(S){const{fieldChannel:w,offset:A}=S;_={...h,[w]:{...h[w],...A?{stack:A}:{}}}}return _=ar(_,["y2","x2"]),v&&b.push({...s?{projection:s}:{},mark:{type:"line",...rd(p,["clip","interpolate","tension","tooltip"]),...v},encoding:_}),y&&b.push({...s?{projection:s}:{},mark:{type:"point",opacity:1,filled:!0,...rd(p,["clip","tooltip"]),...y},encoding:_}),i({...d,layer:b},{...n,config:tSe(r)})}}function iSe(e,t){return t?m0(e)?aY(e,t):rY(e,t):e}function pw(e,t){return t?aY(e,t):e}function DC(e,t,n){const i=t[e];if(Uxe(i)){if(i.repeat in n)return{...t,[e]:n[i.repeat]};fe(Fve(i.repeat));return}return t}function rY(e,t){if(e=DC("field",e,t),e!==void 0){if(e===null)return null;if(Uk(e)&&Ys(e.sort)){const n=DC("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function BF(e,t){if(de(e))return rY(e,t);{const n=DC("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function UF(e,t){if(Be(e)){const n=BF(e,t);if(n)return n;if(y0(e))return{condition:e.condition}}else{if(v0(e)){const n=BF(e.condition,t);if(n)return{...e,condition:n};{const{condition:i,...r}=e;return r}}return e}}function aY(e,t){const n={};for(const i in e)if(le(e,i)){const r=e[i];if(re(r))n[i]=r.map(a=>UF(a,t)).filter(a=>a);else{const a=UF(r,t);a!==void 0&&(n[i]=a)}}return n}class rSe{name="RuleForRangedLine";hasMatchingType(t){if(uo(t)){const{encoding:n,mark:i}=t;if(i==="line"||Qa(i)&&i.type==="line")for(const r of Jye){const a=dc(r),s=n[a];if(n[r]&&(de(s)&&!On(s.bin)||cs(s)))return!0}}return!1}run(t,n,i){const{encoding:r,mark:a}=t;return fe(rbe(!!r.x2,!!r.y2)),i({...t,mark:xe(a)?{...a,type:"rule"}:"rule"},n)}}class aSe extends Jk{nonFacetUnitNormalizers=[o2e,c2e,y2e,new nSe,new rSe];map(t,n){if(uo(t)){const i=kl(t.encoding,Hs),r=kl(t.encoding,Gs),a=kl(t.encoding,ix);if(i||r||a)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:i,parentProjection:r}=n,a=pw(t.encoding,n.repeater),s={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(l=>l).join("_")}:{},...a?{encoding:a}:{}};if(i||r)return this.mapUnitWithParentEncodingOrProjection(s,n);const o=this.mapLayerOrUnit.bind(this);for(const l of this.nonFacetUnitNormalizers)if(l.hasMatchingType(s,n.config))return l.run(s,n,o);return s}mapRepeat(t,n){return H2e(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:i,spec:r,...a}=t,{row:s,column:o,layer:l}=i,{repeater:f={},repeaterPrefix:d=""}=n;return s||o?this.mapRepeat({...t,repeat:{...s?{row:s}:{},...o?{column:o}:{}},spec:{repeat:{layer:l},spec:r}},n):{...a,layer:l.map(h=>{const p={...f,layer:h},y=`${(r.name?`${r.name}_`:"")+d}child__layer_${Ot(h)}`,v=this.mapLayerOrUnit(r,{...n,repeater:p,repeaterPrefix:y});return v.name=y,v})}}mapNonLayerRepeat(t,n){const{repeat:i,spec:r,data:a,...s}=t;!re(i)&&t.columns&&(t=ar(t,["columns"]),fe(vF("repeat")));const o=[],{repeater:l={},repeaterPrefix:f=""}=n,d=!re(i)&&i.row||[l?l.row:null],h=!re(i)&&i.column||[l?l.column:null],p=re(i)&&i||[l?l.repeat:null];for(const v of p)for(const b of d)for(const S of h){const _={repeat:v,row:b,column:S,layer:l.layer},w=`${(r.name?`${r.name}_`:"")+f}child__${re(i)?`${Ot(v)}`:(i.row?`row_${Ot(b)}`:"")+(i.column?`column_${Ot(S)}`:"")}`,A=this.map(r,{...n,repeater:_,repeaterPrefix:w});A.name=w,o.push(ar(A,["data"]))}const y=re(i)?t.columns:i.column?i.column.length:1;return{data:r.data??a,align:"all",...s,columns:y,concat:o}}mapFacet(t,n){const{facet:i}=t;return m0(i)&&t.columns&&(t=ar(t,["columns"]),fe(vF("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:i,projection:r}=t,{parentEncoding:a,parentProjection:s,config:o}=n,l=PF({parentProjection:s,projection:r}),f=qF({parentEncoding:a,encoding:pw(i,n.repeater)});return this.mapUnit({...t,...l?{projection:l}:{},...f?{encoding:f}:{}},{config:o})}mapFacetedUnit(t,n){const{row:i,column:r,facet:a,...s}=t.encoding,{mark:o,width:l,projection:f,height:d,view:h,params:p,encoding:y,...v}=t,{facetMapping:b,layout:S}=this.getFacetMappingAndLayout({row:i,column:r,facet:a},n),_=pw(s,n.repeater);return this.mapFacet({...v,...S,facet:b,spec:{...l?{width:l}:{},...d?{height:d}:{},...h?{view:h}:{},...f?{projection:f}:{},mark:o,encoding:_,...p?{params:p}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:i,column:r,facet:a}=t;if(i||r){a&&fe(nbe([...i?[Hs]:[],...r?[Gs]:[]]));const s={},o={};for(const l of[Hs,Gs]){const f=t[l];if(f){const{align:d,center:h,spacing:p,columns:y,...v}=f;s[l]=v;for(const b of["align","center","spacing"])f[b]!==void 0&&(o[b]??={},o[b][l]=f[b])}}return{facetMapping:s,layout:o}}else{const{align:s,center:o,spacing:l,columns:f,...d}=a;return{facetMapping:iSe(d,n.repeater),layout:{...s?{align:s}:{},...o?{center:o}:{},...l?{spacing:l}:{},...f?{columns:f}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:i,...r}){const{encoding:a,projection:s,...o}=t,l={...r,parentEncoding:qF({parentEncoding:n,encoding:a,layer:!0}),parentProjection:PF({parentProjection:i,projection:s})};return super.mapLayer({...o,...t.name?{name:[l.repeaterPrefix,t.name].filter(f=>f).join("_")}:{}},l)}}function qF({parentEncoding:e,encoding:t={},layer:n}){let i={};if(e){const r=new Set([...ue(e),...ue(t)]);for(const a of r){const s=t[a],o=e[a];if(Be(s)){const l={...o,...s};i[a]=l}else v0(s)?i[a]={...s,condition:{...o,...s.condition}}:s||s===null?i[a]=s:(n||ua(o)||Ce(o)||Be(o)||re(o))&&(i[a]=o)}}else i=t;return!i||wt(i)?void 0:i}function PF(e){const{parentProjection:t,projection:n}=e;return t&&n&&fe(Gve({parentProjection:t,projection:n})),n??t}function eO(e){return le(e,"filter")}function sSe(e){return le(e,"stop")}function sY(e){return le(e,"lookup")}function oSe(e){return le(e,"data")}function uSe(e){return le(e,"param")}function lSe(e){return le(e,"pivot")}function cSe(e){return le(e,"density")}function fSe(e){return le(e,"quantile")}function dSe(e){return le(e,"regression")}function hSe(e){return le(e,"loess")}function gSe(e){return le(e,"sample")}function pSe(e){return le(e,"window")}function mSe(e){return le(e,"joinaggregate")}function ySe(e){return le(e,"flatten")}function vSe(e){return le(e,"calculate")}function oY(e){return le(e,"bin")}function bSe(e){return le(e,"impute")}function xSe(e){return le(e,"timeUnit")}function SSe(e){return le(e,"aggregate")}function ESe(e){return le(e,"stack")}function _Se(e){return le(e,"fold")}function wSe(e){return le(e,"extent")&&!le(e,"density")&&!le(e,"regression")}function ASe(e){return e.map(t=>eO(t)?{filter:Df(t.filter,Zbe)}:t)}class CSe extends Jk{map(t,n){return n.emptySelections??={},n.selectionPredicates??={},t=IF(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=IF(t,n),t.encoding){const i={};for(const[r,a]of vu(t.encoding))i[r]=uY(a,n);t={...t,encoding:i}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:i,...r}=t;return i?{...r,params:vu(i).map(([a,s])=>{const{init:o,bind:l,empty:f,...d}=s;d.type==="single"?(d.type="point",d.toggle=!1):d.type==="multi"&&(d.type="point"),n.emptySelections[a]=f!=="none";for(const h of tn(n.selectionPredicates[a]??{}))h.empty=f!=="none";return{name:a,value:o,select:d,bind:l}})}:t}}function IF(e,t){const{transform:n,...i}=e;if(n){const r=n.map(a=>{if(eO(a))return{filter:NC(a,t)};if(oY(a)&&hc(a.bin))return{...a,bin:lY(a.bin)};if(sY(a)){const{selection:s,...o}=a.from;return s?{...a,from:{param:s,...o}}:a}return a});return{...i,transform:r}}return e}function uY(e,t){const n=Fe(e);if(de(n)&&hc(n.bin)&&(n.bin=lY(n.bin)),yc(n)&&n.scale?.domain?.selection){const{selection:i,...r}=n.scale.domain;n.scale.domain={...r,...i?{param:i}:{}}}if(y0(n))if(re(n.condition))n.condition=n.condition.map(i=>{const{selection:r,param:a,test:s,...o}=i;return a?i:{...o,test:NC(i,t)}});else{const{selection:i,param:r,test:a,...s}=uY(n.condition,t);n.condition=r?n.condition:{...s,test:NC(n.condition,t)}}return n}function lY(e){const t=e.extent;if(t?.selection){const{selection:n,...i}=t;return{...e,extent:{...i,param:n}}}return e}function NC(e,t){const n=i=>Df(i,r=>{const a=t.emptySelections[r]??!0,s={param:r,empty:a};return t.selectionPredicates[r]??=[],t.selectionPredicates[r].push(s),s});return e.selection?n(e.selection):Df(e.test||e.filter,i=>i.selection?n(i.selection):i)}class zC extends Jk{map(t,n){const i=n.selections??[];if(t.params&&!uo(t)){const r=[];for(const a of t.params)Qk(a)?i.push(a):r.push(a);t.params=r}return n.selections=i,super.map(t,n)}mapUnit(t,n){const i=n.selections;if(!i||!i.length)return t;const r=(n.path??[]).concat(t.name),a=[];for(const s of i)if(!s.views||!s.views.length)a.push(s);else for(const o of s.views)(Ee(o)&&(o===t.name||r.includes(o))||re(o)&&o.map(l=>r.indexOf(l)).every((l,f,d)=>l!==-1&&(f===0||l>d[f-1])))&&a.push(s);return a.length&&(t.params=a),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=zC.prototype[e];zC.prototype[e]=function(n,i){return t.call(this,n,$Se(n,i))}}function $Se(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function cY(e,t){t===void 0&&(t=tY(e.config));const n=OSe(e,t),{width:i,height:r}=e,a=RSe(n,{width:i,height:r,autosize:e.autosize},t);return{...n,...a?{autosize:a}:{}}}const TSe=new aSe,MSe=new CSe,kSe=new zC;function OSe(e,t={}){const n={config:t};return kSe.map(TSe.map(MSe.map(e,n),n),n)}function jF(e){return Ee(e)?{type:e}:e??{}}function RSe(e,t,n){let{width:i,height:r}=t;const a=uo(e)||Cx(e),s={};a?i=="container"&&r=="container"?(s.type="fit",s.contains="padding"):i=="container"?(s.type="fit-x",s.contains="padding"):r=="container"&&(s.type="fit-y",s.contains="padding"):(i=="container"&&(fe(gF("width")),i=void 0),r=="container"&&(fe(gF("height")),r=void 0));const o={type:"pad",...s,...n?jF(n.autosize):{},...jF(e.autosize)};if(o.type==="fit"&&!a&&(fe(Ave),o.type="pad"),i=="container"&&!(o.type=="fit"||o.type=="fit-x")&&fe(pF("width")),r=="container"&&!(o.type=="fit"||o.type=="fit-y")&&fe(pF("height")),!nr(o,{type:"pad"}))return o}function DSe(e){return["fit","fit-x","fit-y"].includes(e)}function NSe(e){return e?`fit-${ux(e)}`:"fit"}const zSe=["background","padding"];function HF(e,t){const n={};for(const i of zSe)e&&e[i]!==void 0&&(n[i]=Ji(e[i]));return t&&(n.params=e.params),n}class lo{explicit;implicit;constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new lo(Fe(this.explicit),Fe(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return Vt(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:i}){n!==void 0&&this.set(t,n,i)}set(t,n,i){return delete this[i?"implicit":"explicit"][t],this[i?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:i}){n[t]!==void 0?this.set(t,n[t],!0):i[t]!==void 0&&this.set(t,i[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of ue(t.combine())){const i=t.getWithExplicit(n);this.setWithExplicit(n,i)}}}function ka(e){return{explicit:!0,value:e}}function Qi(e){return{explicit:!1,value:e}}function fY(e){return(t,n,i,r)=>{const a=e(t.value,n.value);return a>0?t:a<0?n:$x(t,n,i,r)}}function $x(e,t,n,i){return e.explicit&&t.explicit&&fe(gbe(n,i,e.value,t.value)),e}function Su(e,t,n,i,r=$x){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:nr(e.value,t.value)?e:r(e,t,n,i)}class FSe extends lo{explicit;implicit;parseNothing;constructor(t={},n={},i=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=i}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function hd(e){return le(e,"url")}function Ap(e){return le(e,"values")}function dY(e){return le(e,"name")&&!hd(e)&&!Ap(e)&&!ou(e)}function ou(e){return e&&(hY(e)||gY(e)||tO(e))}function hY(e){return le(e,"sequence")}function gY(e){return le(e,"sphere")}function tO(e){return le(e,"graticule")}var Ft;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup",e[e.PreFilterInvalid=5]="PreFilterInvalid",e[e.PostFilterInvalid=6]="PostFilterInvalid"})(Ft||(Ft={}));function pY({invalid:e,isPath:t}){switch(cG(e,{isPath:t})){case"filter":return{marks:"exclude-invalid-values",scales:"exclude-invalid-values"};case"break-paths-show-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"include-invalid-values"};case"break-paths-filter-domains":return{marks:t?"include-invalid-values":"exclude-invalid-values",scales:"exclude-invalid-values"};case"show":return{marks:"include-invalid-values",scales:"include-invalid-values"}}}function LSe(e){const{marks:t,scales:n}=pY(e);return t===n?Ft.Main:n==="include-invalid-values"?Ft.PreFilterInvalid:Ft.PostFilterInvalid}class mt{debugName;_children=[];_parent=null;_hash;constructor(t,n){this.debugName=n,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){fe(Ive);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const r of this._children)r.parent=t;this._children=[],t.removeChild(this);const i=t.parent.removeChild(t);this._parent=n,n.addChild(this,i),t.parent=this}}class Ri extends mt{type;refCounts;_source;_name;clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,i,r){super(t,n),this.type=i,this.refCounts=r,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${fH()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function mw(e){return e.as!==void 0}function GF(e){return`${e}_end`}class qa extends mt{timeUnits;clone(){return new qa(null,Fe(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{const{field:o,timeUnit:l}=a;if(l){let f;if(mc(l)){if(zt(n)){const{mark:d,markDef:h,config:p}=n,y=xu({fieldDef:a,markDef:h,config:p});(wp(d)||y)&&(f={timeUnit:wn(l),field:o})}}else f={as:pe(a,{forAs:!0}),field:o,timeUnit:l};if(zt(n)){const{mark:d,markDef:h,config:p}=n,y=xu({fieldDef:a,markDef:h,config:p});wp(d)&&Wt(s)&&y!==.5&&(f.rectBandPosition=y)}f&&(r[Qe(f)]=f)}return r},{});return wt(i)?null:new qa(t,i)}static makeFromTransform(t,n){const{timeUnit:i,...r}={...n},a=wn(i),s={...r,timeUnit:a};return new qa(t,{[Qe(s)]:s})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[i,r]of vu(this.timeUnits)){const a=mw(r)?r.as:`${r.field}_end`;t.has(a)||(n[i]=r)}this.timeUnits=n}producedFields(){return new Set(tn(this.timeUnits).map(t=>mw(t)?t.as:GF(t.field)))}dependentFields(){return new Set(tn(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Qe(this.timeUnits)}`}assemble(){const t=[];for(const n of tn(this.timeUnits)){const{rectBandPosition:i}=n,r=wn(n.timeUnit);if(mw(n)){const{field:a,as:s}=n,{unit:o,utc:l,...f}=r,d=[s,`${s}_end`];t.push({field:zr(a),type:"timeunit",...o?{units:dx(o)}:{},...l?{timezone:"utc"}:{},...f,as:d}),t.push(...YF(d,i,r))}else if(n){const{field:a}=n,s=a.replaceAll("\\.","."),o=mY({timeUnit:r,field:s}),l=GF(s);t.push({type:"formula",expr:o,as:l}),t.push(...YF([s,l],i,r))}}return t}}const Tx="offsetted_rect_start",Mx="offsetted_rect_end";function mY({timeUnit:e,field:t,reverse:n}){const{unit:i,utc:r}=e,a=YH(i),{part:s,step:o}=QH(a,e.step);return`${r?"utcOffset":"timeOffset"}('${s}', ${gt(t)}, ${n?-o:o})`}function YF([e,t],n,i){if(n!==void 0&&n!==.5){const r=gt(e),a=gt(t);return[{type:"formula",expr:XF([mY({timeUnit:i,field:e,reverse:!0}),r],n+.5),as:`${e}_${Tx}`},{type:"formula",expr:XF([r,a],n+.5),as:`${e}_${Mx}`}]}return[]}function XF([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const S0="_tuple_fields";class BSe{hasChannel;hasField;hasSelectionId;timeUnit;items;constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const USe={defined:()=>!0,parse:(e,t,n)=>{const i=t.name,r=t.project??=new BSe,a={},s={},o=new Set,l=(v,b)=>{const S=b==="visual"?v.channel:v.field;let _=Ot(`${i}_${S}`);for(let w=1;o.has(_);w++)_=Ot(`${i}_${S}_${w}`);return o.add(_),{[b]:_}},f=t.type,d=e.config.selection[f],h=n.value!==void 0?ve(n.value):null;let{fields:p,encodings:y}=xe(n.select)?n.select:{};if(!p&&!y&&h){for(const v of h)if(xe(v))for(const b of ue(v))Kye(b)?(y||(y=[])).push(b):f==="interval"?(fe(zve),y=d.encodings):(p??=[]).push(b)}!p&&!y&&(y=d.encodings,"fields"in d&&(p=d.fields));for(const v of y??[]){const b=e.fieldDef(v);if(b){let S=b.field;if(b.aggregate){fe(Cve(v,b.aggregate));continue}else if(!S){fe(yF(v));continue}if(b.timeUnit&&!mc(b.timeUnit)){S=e.vgField(v);const _={timeUnit:b.timeUnit,as:S,field:b.field};s[Qe(_)]=_}if(!a[S]){const _=f==="interval"&&ls(v)&&oa(e.getScaleComponent(v).get("type"))?"R":b.bin?"R-RE":"E",w={field:S,channel:v,type:_,index:r.items.length};w.signals={...l(w,"data"),...l(w,"visual")},r.items.push(a[S]=w),r.hasField[S]=a[S],r.hasSelectionId=r.hasSelectionId||S===ca,yH(v)?(w.geoChannel=v,w.channel=mH(v),r.hasChannel[w.channel]=a[S]):r.hasChannel[v]=a[S]}}else fe(yF(v))}for(const v of p??[]){if(r.hasField[v])continue;const b={type:"E",field:v,index:r.items.length};b.signals={...l(b,"data")},r.items.push(b),r.hasField[v]=b,r.hasSelectionId=r.hasSelectionId||v===ca}h&&(t.init=h.map(v=>r.items.map(b=>xe(v)?v[b.geoChannel||b.channel]!==void 0?v[b.geoChannel||b.channel]:v[b.field]:v))),wt(s)||(r.timeUnit=new qa(null,s))},signals:(e,t,n)=>{const i=t.name+S0;return n.filter(a=>a.name===i).length>0||t.project.hasSelectionId?n:n.concat({name:i,value:t.project.items.map(xY)})}},yY="_curr",K1="anim_value",xf="anim_clock",FC="eased_anim_clock",vY="min_extent",bY="max_range_extent",yw="last_tick_at",vw="is_playing",qSe=1/60*1e3,PSe=(e,t)=>[{name:FC,update:xf},{name:`${e}_domain`,init:`domain('${t}')`},{name:vY,init:`extent(${e}_domain)[0]`},{name:bY,init:`extent(range('${t}'))[1]`},{name:K1,update:`invert('${t}', ${FC})`}],ISe={defined:e=>e.type==="point",topLevelSignals:(e,t,n)=>(Pa(t)&&(n=n.concat([{name:xf,init:"0",on:[{events:{type:"timer",throttle:qSe},update:`${vw} ? (${xf} + (now() - ${yw}) > ${bY} ? 0 : ${xf} + (now() - ${yw})) : ${xf}`}]},{name:yw,init:"now()",on:[{events:[{signal:xf},{signal:vw}],update:"now()"}]},{name:vw,init:"true"}])),n),signals:(e,t,n)=>{const i=t.name,r=i+S0,a=t.project,s="(item().isVoronoi ? datum.datum : datum)",o=tn(e.component.selection??{}).reduce((d,h)=>h.type==="interval"?d.concat(h.name+Ff):d,[]).map(d=>`indexof(item().mark.name, '${d}') < 0`).join(" && "),l=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${o?` && ${o}`:""}`;let f=`unit: ${Ol(e)}, `;if(t.project.hasSelectionId)f+=`${ca}: ${s}[${he(ca)}]`;else if(Pa(t))f+=`fields: ${r}, values: [${K1} ? ${K1} : ${vY}]`;else{const d=a.items.map(h=>e.fieldDef(h.channel)?.bin?`[${s}[${he(e.vgField(h.channel,{}))}], ${s}[${he(e.vgField(h.channel,{binSuffix:"end"}))}]]`:`${s}[${he(h.field)}]`).join(", ");f+=`fields: ${r}, values: [${d}]`}if(Pa(t))return n.concat(PSe(t.name,e.scaleName(ku)),[{name:i+eo,on:[{events:[{signal:FC},{signal:K1}],update:`{${f}}`,force:!0}]}]);{const d=t.events;return n.concat([{name:i+eo,on:d?[{events:d,update:`${l} ? {${f}} : null`,force:!0}]:[]}])}}};function xY(e){const{signals:t,hasLegend:n,index:i,...r}=e;return r.field=zr(r.field),r}function Kl(e,t=!0,n=ti){if(re(e)){const i=e.map(r=>Kl(r,t,n));return t?`[${i.join(", ")}]`:i}else if(pc(e))return n(t?Vl(e):Ube(e));return t?n(ft(e)):e}function jSe(e,t){for(const n of tn(e.component.selection??{})){const i=n.name;let r=`${i}${eo}, ${n.resolve==="global"?"true":`{unit: ${Ol(e)}}`}`;for(const a of Ox)a.defined(n)&&(a.signals&&(t=a.signals(e,n,t)),a.modifyExpr&&(r=a.modifyExpr(e,n,r)));t.push({name:i+mEe,on:[{events:{signal:n.name+eo},update:`modify(${he(n.name+Jl)}, ${r})`}]})}return nO(t)}function HSe(e,t){if(e.component.selection&&ue(e.component.selection).length){const n=he(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Tu("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return nO(t)}function GSe(e,t){let n=!1;for(const i of tn(e.component.selection??{})){const r=i.name,a=he(r+Jl);if(t.filter(o=>o.name===r).length===0){const o=i.resolve==="global"?"union":i.resolve,l=i.type==="point"?", true, true)":")";t.push({name:i.name,update:`${LY}(${a}, ${he(o)}${l}`})}n=!0;for(const o of Ox)o.defined(i)&&o.topLevelSignals&&(t=o.topLevelSignals(e,i,t))}return n&&t.filter(r=>r.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),nO(t)}function YSe(e,t){const n=[],i=[],r=Ol(e,{escape:!1});for(const a of tn(e.component.selection??{})){const s={name:a.name+Jl};if(a.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ca}}]),a.init){const l=a.project.items.map(xY);s.values=a.project.hasSelectionId?a.init.map(f=>({unit:r,[ca]:Kl(f,!1)[0]})):a.init.map(f=>({unit:r,fields:l,values:Kl(f,!1)}))}if([...n,...t].filter(l=>l.name===a.name+Jl).length||n.push(s),Pa(a)&&t.length){const l=e.lookupDataSource(e.getDataName(Ft.Main)),f=t.find(h=>h.name===l),d=f.transform.find(h=>h.type==="filter"&&h.expr.includes("vlSelectionTest"));if(d){f.transform=f.transform.filter(p=>p!==d);const h={name:f.name+yY,source:f.name,transform:[d]};i.push(h)}}}return n.concat(t,i)}function SY(e,t){for(const n of tn(e.component.selection??{}))for(const i of Ox)i.defined(n)&&i.marks&&(t=i.marks(e,n,t));return t}function XSe(e,t){for(const n of e.children)zt(n)&&(t=SY(n,t));return t}function VSe(e,t,n,i){const r=IY(e,t.param,t);return{signal:oa(n.get("type"))&&re(i)&&i[0]>i[1]?`isValid(${r}) && reverse(${r})`:r}}function nO(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}const Xs={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const i of t.project.items){const r=i.channel;if(!ls(r))continue;const a=e.getScaleComponent(r),s=a?a.get("type"):void 0;if(s=="sequential"&&fe(kve),!a||!oa(s)){fe(Mve);continue}a.set("selectionExtent",{param:t.name,field:i.field},!0),n.push(i)}},topLevelSignals:(e,t,n)=>{const i=t.scales.filter(s=>n.filter(o=>o.name===s.signals.data).length===0);if(!e.parent||BC(e)||i.length===0)return n;const r=n.find(s=>s.name===t.name);let a=r.update;if(a.includes(LY))r.update=`{${i.map(s=>`${he(zr(s.field))}: ${s.signals.data}`).join(", ")}}`;else{for(const s of i){const o=`${he(zr(s.field))}: ${s.signals.data}`;a.includes(o)||(a=`${a.substring(0,a.length-1)}, ${o}}`)}r.update=a}return n.concat(i.map(s=>({name:s.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!BC(e))for(const i of t.scales){const r=n.find(a=>a.name===i.signals.data);r.push="outer",delete r.value,delete r.update}return n}};function LC(e,t){return`domain(${he(e.scaleName(t))})`}function BC(e){return e.parent&&jd(e.parent)&&(!e.parent.parent||BC(e.parent.parent))}const Ff="_brush",EY="_scale_trigger",lg="geo_interval_init_tick",_Y="_init",WSe="_center",QSe={defined:e=>e.type==="interval",parse:(e,t,n)=>{if(e.hasProjection){const i={...xe(n.select)?n.select:{}};i.fields=[ca],i.encodings||(i.encodings=n.value?ue(n.value):[ba,va]),n.select={type:"interval",...i}}if(t.translate&&!Xs.defined(t)){const i=`!event.item || event.item.mark.name !== ${he(t.name+Ff)}`;for(const r of t.events){if(!r.between){fe(`${r} is not an ordered event stream for interval selections.`);continue}const a=ve(r.between[0].filter??=[]);a.includes(i)||a.push(i)}}},signals:(e,t,n)=>{const i=t.name,r=i+eo,a=tn(t.project.hasChannel).filter(o=>o.channel===Rt||o.channel===$n),s=t.init?t.init[0]:null;if(n.push(...a.reduce((o,l)=>o.concat(ZSe(e,t,l,s?.[l.index])),[])),e.hasProjection){const o=he(e.projectionName()),l=e.projectionName()+WSe,{x:f,y:d}=t.project.hasChannel,h=f?.signals.visual,p=d?.signals.visual,y=f?s?.[f.index]:`${l}[0]`,v=d?s?.[d.index]:`${l}[1]`,b=T=>e.getSizeSignalRef(T).signal,S=`[[${h?`${h}[0]`:"0"}, ${p?`${p}[0]`:"0"}],[${h?`${h}[1]`:b("width")}, ${p?`${p}[1]`:b("height")}]]`;s&&(n.unshift({name:i+_Y,init:`[scale(${o}, [${f?y[0]:y}, ${d?v[0]:v}]), scale(${o}, [${f?y[1]:y}, ${d?v[1]:v}])]`}),(!f||!d)&&(n.find(k=>k.name===l)||n.unshift({name:l,update:`invert(${o}, [${b("width")}/2, ${b("height")}/2])`})));const _=`intersect(${S}, {markname: ${he(e.getName("marks"))}}, unit.mark)`,w=`{unit: ${Ol(e)}}`,A=`vlSelectionTuples(${_}, ${w})`,C=a.map(T=>T.signals.visual);return n.concat({name:r,on:[{events:[...C.length?[{signal:C.join(" || ")}]:[],...s?[{signal:lg}]:[]],update:A}]})}else{if(!Xs.defined(t)){const f=i+EY,d=a.map(h=>{const p=h.channel,{data:y,visual:v}=h.signals,b=he(e.scaleName(p)),S=e.getScaleComponent(p).get("type"),_=oa(S)?"+":"";return`(!isArray(${y}) || (${_}invert(${b}, ${v})[0] === ${_}${y}[0] && ${_}invert(${b}, ${v})[1] === ${_}${y}[1]))`});d.length&&n.push({name:f,value:{},on:[{events:a.map(h=>({scale:e.scaleName(h.channel)})),update:`${d.join(" && ")} ? ${f} : {}`}]})}const o=a.map(f=>f.signals.data),l=`unit: ${Ol(e)}, fields: ${i+S0}, values`;return n.concat({name:r,...s?{init:`{${l}: ${Kl(s)}}`}:{},...o.length?{on:[{events:[{signal:o.join(" || ")}],update:`${o.join(" && ")} ? {${l}: [${o}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(zt(e)&&e.hasProjection&&t.init&&(n.filter(r=>r.name===lg).length||n.unshift({name:lg,value:null,on:[{events:"timer{1}",update:`${lg} === null ? {} : ${lg}`}]})),n),marks:(e,t,n)=>{const i=t.name,{x:r,y:a}=t.project.hasChannel,s=r?.signals.visual,o=a?.signals.visual,l=`data(${he(t.name+Jl)})`;if(Xs.defined(t)||!r&&!a)return n;const f={x:r!==void 0?{signal:`${s}[0]`}:{value:0},y:a!==void 0?{signal:`${o}[0]`}:{value:0},x2:r!==void 0?{signal:`${s}[1]`}:{field:{group:"width"}},y2:a!==void 0?{signal:`${o}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const S of ue(f))f[S]=[{test:`${l}.length && ${l}[0].unit === ${Ol(e)}`,...f[S]},{value:0}];const{fill:d,fillOpacity:h,cursor:p,...y}=t.mark,v=ue(y).reduce((S,_)=>(S[_]=[{test:[r!==void 0&&`${s}[0] !== ${s}[1]`,a!==void 0&&`${o}[0] !== ${o}[1]`].filter(w=>w).join(" && "),value:y[_]},{value:null}],S),{}),b=p??(t.translate?"move":null);return[{name:`${i+Ff}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:d},fillOpacity:{value:h}},update:f}},...n,{name:i+Ff,type:"rect",clip:!0,encode:{enter:{...b?{cursor:{value:b}}:{},fill:{value:"transparent"}},update:{...f,...v}}}]}};function ZSe(e,t,n,i){const r=!e.hasProjection,a=n.channel,s=n.signals.visual,o=he(r?e.scaleName(a):e.projectionName()),l=p=>`scale(${o}, ${p})`,f=e.getSizeSignalRef(a===Rt?"width":"height").signal,d=`${a}(unit)`,h=t.events.reduce((p,y)=>[...p,{events:y.between[0],update:`[${d}, ${d}]`},{events:y,update:`[${s}[0], clamp(${d}, 0, ${f})]`}],[]);if(r){const p=n.signals.data,y=Xs.defined(t),v=e.getScaleComponent(a),b=v?v.get("type"):void 0,S=i?{init:Kl(i,!0,l)}:{value:[]};return h.push({events:{signal:t.name+EY},update:oa(b)?`[${l(`${p}[0]`)}, ${l(`${p}[1]`)}]`:"[0, 0]"}),y?[{name:p,on:[]}]:[{name:s,...S,on:h},{name:p,...i?{init:Kl(i)}:{},on:[{events:{signal:s},update:`${s}[0] === ${s}[1] ? null : invert(${o}, ${s})`}]}]}else{const p=a===Rt?0:1,y=t.name+_Y,v=i?{init:`[${y}[0][${p}], ${y}[1][${p}]]`}:{value:[]};return[{name:s,...v,on:h}]}}function Ud({model:e,channelDef:t,vgChannel:n,invalidValueRef:i,mainRefFn:r}){const a=y0(t)&&t.condition;let s=[];a&&(s=ve(a).map(f=>{const d=r(f);if(Bxe(f)){const{param:h,empty:p}=f;return{test:PY(e,{param:h,empty:p}),...d}}else return{test:kv(e,f.test),...d}})),i!==void 0&&s.push(i);const o=r(t);return o!==void 0&&s.push(o),s.length>1||s.length===1&&s[0].test?{[n]:s}:s.length===1?{[n]:s[0]}:{}}function iO(e,t="text"){const n=e.encoding[t];return Ud({model:e,channelDef:n,vgChannel:t,mainRefFn:i=>kx(i,e.config),invalidValueRef:void 0})}function kx(e,t,n="datum"){if(e){if(ua(e))return Tt(e.value);if(Be(e)){const{format:i,formatType:r}=wv(e);return Lk({fieldOrDatumDef:e,format:i,formatType:r,expr:n,config:t})}}}function wY(e,t={}){const{encoding:n,markDef:i,config:r,stack:a}=e,s=n.tooltip;if(re(s))return{tooltip:VF({tooltip:s},a,r,t)};{const o=t.reactiveGeom?"datum.datum":"datum";return Ud({model:e,channelDef:s,vgChannel:"tooltip",mainRefFn:f=>{const d=kx(f,r,o);if(d)return d;if(f===null)return;let h=xt("tooltip",i,r);if(h===!0&&(h={content:"encoding"}),Ee(h))return{value:h};if(xe(h))return Ce(h)?h:h.content==="encoding"?VF(n,a,r,t):{signal:o}},invalidValueRef:void 0})}}function AY(e,t,n,{reactiveGeom:i}={}){const r={...n,...n.tooltipFormat},a=new Set,s=i?"datum.datum":"datum",o=[];function l(d,h){const p=dc(h),y=vi(d)?d:{...d,type:e[p].type},v=y.title||Pk(y,r),b=ve(v).join(", ").replaceAll(/"/g,'\\"');let S;if(Wt(h)){const _=h==="x"?"x2":"y2",w=la(e[_]);if(On(y.bin)&&w){const A=pe(y,{expr:s}),C=pe(w,{expr:s}),{format:T,formatType:k}=wv(y);S=p0(A,C,T,k,r),a.add(_)}}if((Wt(h)||h===Br||h===ya)&&t&&t.fieldChannel===h&&t.offset==="normalize"){const{format:_,formatType:w}=wv(y);S=Lk({fieldOrDatumDef:y,format:_,formatType:w,expr:s,config:r,normalizeStack:!0}).signal}S??=kx(y,r,s).signal,o.push({channel:h,key:b,value:S})}jk(e,(d,h)=>{de(d)?l(d,h):xx(d)&&l(d.condition,h)});const f={};for(const{channel:d,key:h,value:p}of o)!a.has(d)&&!f[h]&&(f[h]=p);return f}function VF(e,t,n,{reactiveGeom:i}={}){const r=AY(e,t,n,{reactiveGeom:i}),a=vu(r).map(([s,o])=>`"${s}": ${o}`);return a.length>0?{signal:`{${a.join(", ")}}`}:void 0}function KSe(e){const{markDef:t,config:n}=e,i=xt("aria",t,n);return i===!1?{}:{...i?{aria:i}:{},...JSe(e),...eEe(e)}}function JSe(e){const{mark:t,markDef:n,config:i}=e;if(i.aria===!1)return{};const r=xt("ariaRoleDescription",n,i);return r!=null?{ariaRoleDescription:{value:r}}:Se(Sve,t)?{}:{ariaRoleDescription:{value:t}}}function eEe(e){const{encoding:t,markDef:n,config:i,stack:r}=e,a=t.description;if(a)return Ud({model:e,channelDef:a,vgChannel:"description",mainRefFn:l=>kx(l,e.config),invalidValueRef:void 0});const s=xt("description",n,i);if(s!=null)return{description:Tt(s)};if(i.aria===!1)return{};const o=AY(t,r,i);if(!wt(o))return{description:{signal:vu(o).map(([l,f],d)=>`"${d>0?"; ":""}${l}: " + (${f})`).join(" + ")}}}function Nn(e,t,n={}){const{markDef:i,encoding:r,config:a}=t,{vgChannel:s}=n;let{defaultRef:o,defaultValue:l}=n;const f=r[e];o===void 0&&(l??=xt(e,i,a,{vgChannel:s,ignoreVgConfig:!y0(f)}),l!==void 0&&(o=Tt(l)));const d={markDef:i,config:a,scaleName:t.scaleName(e),scale:t.getScaleComponent(e)},h=dG({...d,scaleChannel:e,channelDef:f});return Ud({model:t,channelDef:f,vgChannel:s??e,invalidValueRef:h,mainRefFn:y=>Fk({...d,channel:e,channelDef:y,stack:null,defaultRef:o})})}function CY(e,t={filled:void 0}){const{markDef:n,encoding:i,config:r}=e,{type:a}=n,s=t.filled??xt("filled",n,r),o=Xe(["bar","point","circle","square","geoshape"],a)?"transparent":void 0,l=xt(s===!0?"color":void 0,n,r,{vgChannel:"fill"})??r.mark[s===!0&&"color"]??o,f=xt(s===!1?"color":void 0,n,r,{vgChannel:"stroke"})??r.mark[s===!1&&"color"],d=s?"fill":"stroke",h={...l?{fill:Tt(l)}:{},...f?{stroke:Tt(f)}:{}};return n.color&&(s?n.fill:n.stroke)&&fe(LH("property",{fill:"fill"in n,stroke:"stroke"in n})),{...h,...Nn("color",e,{vgChannel:d,defaultValue:s?l:f}),...Nn("fill",e,{defaultValue:i.fill?l:void 0}),...Nn("stroke",e,{defaultValue:i.stroke?f:void 0})}}function tEe(e){const{encoding:t,mark:n}=e,i=t.order;return!Fu(n)&&ua(i)?Ud({model:e,channelDef:i,vgChannel:"zindex",mainRefFn:r=>Tt(r.value),invalidValueRef:void 0}):{}}function gd({channel:e,markDef:t,encoding:n={},model:i,bandPosition:r}){const a=`${e}Offset`,s=t[a],o=n[a];if((a==="xOffset"||a==="yOffset")&&o)return{offsetType:"encoding",offset:Fk({channel:a,channelDef:o,markDef:t,config:i?.config,scaleName:i.scaleName(a),scale:i.getScaleComponent(a),stack:null,defaultRef:Tt(s),bandPosition:r})};const l=t[a];return l?{offsetType:"visual",offset:l}:{}}function hi(e,t,{defaultPos:n,vgChannel:i}){const{encoding:r,markDef:a,config:s,stack:o}=t,l=r[e],f=r[us(e)],d=t.scaleName(e),h=t.getScaleComponent(e),{offset:p,offsetType:y}=gd({channel:e,markDef:a,encoding:r,model:t,bandPosition:.5}),v=rO({model:t,defaultPos:n,channel:e,scaleName:d,scale:h}),b=!l&&Wt(e)&&(r.latitude||r.longitude)?{field:t.getName(e)}:nEe({channel:e,channelDef:l,channel2Def:f,markDef:a,config:s,scaleName:d,scale:h,stack:o,offset:p,defaultRef:v,bandPosition:y==="encoding"?0:void 0});return b?{[i||e]:b}:void 0}function nEe(e){const{channel:t,channelDef:n,scaleName:i,stack:r,offset:a,markDef:s}=e;if(Be(n)&&r&&t===r.fieldChannel){if(de(n)){let o=n.bandPosition;if(o===void 0&&s.type==="text"&&(t==="radius"||t==="theta")&&(o=.5),o!==void 0)return Sv({scaleName:i,fieldOrDatumDef:n,startSuffix:"start",bandPosition:o,offset:a})}return Ml(n,i,{suffix:"end"},{offset:a})}return zk(e)}function rO({model:e,defaultPos:t,channel:n,scaleName:i,scale:r}){const{markDef:a,config:s}=e;return()=>{const o=dc(n),l=bu(n),f=xt(n,a,s,{vgChannel:l});if(f!==void 0)return Qg(n,f);switch(t){case"zeroOrMin":return WF({scaleName:i,scale:r,mode:"zeroOrMin",mainChannel:o,config:s});case"zeroOrMax":return WF({scaleName:i,scale:r,mode:{zeroOrMax:{widthSignal:e.width.signal,heightSignal:e.height.signal}},mainChannel:o,config:s});case"mid":return{...e[Bi(n)],mult:.5}}}}function WF({mainChannel:e,config:t,...n}){const i=fG(n),{mode:r}=n;if(i)return i;switch(e){case"radius":{if(r==="zeroOrMin")return{value:0};const{widthSignal:a,heightSignal:s}=r.zeroOrMax;return{signal:`min(${a},${s})/2`}}case"theta":return r==="zeroOrMin"?{value:0}:{signal:"2*PI"};case"x":return r==="zeroOrMin"?{value:0}:{field:{group:"width"}};case"y":return r==="zeroOrMin"?{field:{group:"height"}}:{value:0}}}const iEe={left:"x",center:"xc",right:"x2"},rEe={top:"y",middle:"yc",bottom:"y2"};function $Y(e,t,n,i="middle"){if(e==="radius"||e==="theta")return bu(e);const r=e==="x"?"align":"baseline",a=xt(r,t,n);let s;return Ce(a)?(fe(ibe(r)),s=void 0):s=a,e==="x"?iEe[s||(i==="top"?"left":"center")]:rEe[s||i]}function Tv(e,t,{defaultPos:n,defaultPos2:i,range:r}){return r?TY(e,t,{defaultPos:n,defaultPos2:i}):hi(e,t,{defaultPos:n})}function TY(e,t,{defaultPos:n,defaultPos2:i}){const{markDef:r,config:a}=t,s=us(e),o=Bi(e),l=aEe(t,i,s),f=l[o]?$Y(e,r,a):bu(e);return{...hi(e,t,{defaultPos:n,vgChannel:f}),...l}}function aEe(e,t,n){const{encoding:i,mark:r,markDef:a,stack:s,config:o}=e,l=dc(n),f=Bi(n),d=bu(n),h=i[l],p=e.scaleName(l),y=e.getScaleComponent(l),{offset:v}=n in i||n in a?gd({channel:n,markDef:a,encoding:i,model:e}):gd({channel:l,markDef:a,encoding:i,model:e});if(!h&&(n==="x2"||n==="y2")&&(i.latitude||i.longitude)){const S=Bi(n),_=e.markDef[S];return _!=null?{[S]:{value:_}}:{[d]:{field:e.getName(n)}}}const b=sEe({channel:n,channelDef:h,channel2Def:i[n],markDef:a,config:o,scaleName:p,scale:y,stack:s,offset:v,defaultRef:void 0});return b!==void 0?{[d]:b}:m1(n,a)||m1(n,{[n]:AC(n,a,o.style),[f]:AC(f,a,o.style)})||m1(n,o[r])||m1(n,o.mark)||{[d]:rO({model:e,defaultPos:t,channel:n,scaleName:p,scale:y})()}}function sEe({channel:e,channelDef:t,channel2Def:n,markDef:i,config:r,scaleName:a,scale:s,stack:o,offset:l,defaultRef:f}){return Be(t)&&o&&e.charAt(0)===o.fieldChannel.charAt(0)?Ml(t,a,{suffix:"start"},{offset:l}):zk({channel:e,channelDef:n,scaleName:a,scale:s,stack:o,markDef:i,config:r,offset:l,defaultRef:f})}function m1(e,t){const n=Bi(e),i=bu(e);if(t[i]!==void 0)return{[i]:Qg(e,t[i])};if(t[e]!==void 0)return{[i]:Qg(e,t[e])};if(t[n]){const r=t[n];if(Ql(r))fe(Zve(n));else return{[n]:Qg(e,r)}}}function Js(e,t){const{config:n,encoding:i,markDef:r}=e,a=r.type,s=us(t),o=Bi(t),l=i[t],f=i[s],d=e.getScaleComponent(t),h=d?d.get("type"):void 0,p=r.orient,y=i[o]??i.size??xt("size",r,n,{vgChannel:o}),v=SH(t),b=a==="bar"&&(t==="x"?p==="vertical":p==="horizontal")||a==="tick"&&(t==="y"?p==="vertical":p==="horizontal");return de(l)&&(Ct(l.bin)||On(l.bin)||l.timeUnit&&!f)&&!(y&&!Ql(y))&&!i[v]&&!An(h)?lEe({fieldDef:l,fieldDef2:f,channel:t,model:e}):(Be(l)&&An(h)||b)&&!f?uEe(l,t,e):TY(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function oEe(e,t,n,i,r,a,s){if(Ql(r))if(n){const l=n.get("type");if(l==="band"){let f=`bandwidth('${t}')`;r.band!==1&&(f=`${r.band} * ${f}`);const d=Wa("minBandSize",{type:s},i);return{signal:d?`max(${ea(d)}, ${f})`:f}}else r.band!==1&&(fe(obe(l)),r=void 0)}else return{mult:r.band,field:{group:e}};else{if(Ce(r))return r;if(r)return{value:r}}if(n){const l=n.get("range");if(gc(l)&&at(l.step))return{value:l.step-2}}if(!a){const{bandPaddingInner:l,barBandPaddingInner:f,rectBandPaddingInner:d,tickBandPaddingInner:h}=i.scale,p=Vt(l,s==="tick"?h:s==="bar"?f:d);if(Ce(p))return{signal:`(1 - (${p.signal})) * ${e}`};if(at(p))return{signal:`${1-p} * ${e}`}}return{value:RC(i.view,e)-2}}function uEe(e,t,n){const{markDef:i,encoding:r,config:a,stack:s}=n,o=i.orient,l=n.scaleName(t),f=n.getScaleComponent(t),d=Bi(t),h=us(t),p=SH(t),y=n.scaleName(p),v=n.getScaleComponent(uk(t)),b=i.type==="tick"||o==="horizontal"&&t==="y"||o==="vertical"&&t==="x";let S;(r.size||i.size)&&(b?S=Nn("size",n,{vgChannel:d,defaultRef:Tt(i.size)}):fe(fbe(i.type)));const _=!!S,w=bG({channel:t,fieldDef:e,markDef:i,config:a,scaleType:(f||v)?.get("type"),useVlSizeChannel:b});S=S||{[d]:oEe(d,y||l,v||f,a,w,!!e,i.type)};const A=(f||v)?.get("type")==="band"&&Ql(w)&&!_?"top":"middle",C=$Y(t,i,a,A),T=C==="xc"||C==="yc",{offset:k,offsetType:M}=gd({channel:t,markDef:i,encoding:r,model:n,bandPosition:T?.5:0}),R=zk({channel:t,channelDef:e,markDef:i,config:a,scaleName:l,scale:f,stack:s,offset:k,defaultRef:rO({model:n,defaultPos:"mid",channel:t,scaleName:l,scale:f}),bandPosition:T?M==="encoding"?0:.5:Ce(w)?{signal:`(1-${w})/2`}:Ql(w)?(1-w.band)/2:0});if(d)return{[C]:R,...S};{const z=bu(h),U=S[d],L=k?{...U,offset:k}:U;return{[C]:R,[z]:re(R)?[R[0],{...R[1],offset:L}]:{...R,offset:L}}}}function QF(e,t,n,i,r,a,s){if(pH(e))return 0;const o=e==="x"||e==="y2",l=o?-t/2:t/2;if(Ce(n)||Ce(r)||Ce(i)||a){const f=ea(n),d=ea(r),h=ea(i),p=ea(a),v=a?`(${s} < ${p} ? ${o?"":"-"}0.5 * (${p} - (${s})) : ${l})`:l,b=h?`${h} + `:"",S=f?`(${f} ? -1 : 1) * `:"",_=d?`(${d} + ${v})`:v;return{signal:b+S+_}}else return r=r||0,i+(n?-r-l:+r+l)}function lEe({fieldDef:e,fieldDef2:t,channel:n,model:i}){const{config:r,markDef:a,encoding:s}=i,o=i.getScaleComponent(n),l=i.scaleName(n),f=o?o.get("type"):void 0,d=o.get("reverse"),h=bG({channel:n,fieldDef:e,markDef:a,config:r,scaleType:f}),y=i.component.axes[n]?.[0]?.get("translate")??.5,v=Wt(n)?xt("binSpacing",a,r)??0:0,b=us(n),S=bu(n),_=bu(b),w=Wa("minBandSize",a,r),{offset:A}=gd({channel:n,markDef:a,encoding:s,model:i,bandPosition:0}),{offset:C}=gd({channel:b,markDef:a,encoding:s,model:i,bandPosition:0}),T=Dxe({fieldDef:e,scaleName:l}),k=QF(n,v,d,y,A,w,T),M=QF(b,v,d,y,C??A,w,T),R=Ce(h)?{signal:`(1-${h.signal})/2`}:Ql(h)?(1-h.band)/2:.5,z=xu({fieldDef:e,fieldDef2:t,markDef:a,config:r});if(Ct(e.bin)||e.timeUnit){const U=e.timeUnit&&z!==.5;return{[_]:ZF({fieldDef:e,scaleName:l,bandPosition:R,offset:M,useRectOffsetField:U}),[S]:ZF({fieldDef:e,scaleName:l,bandPosition:Ce(R)?{signal:`1-${R.signal}`}:1-R,offset:k,useRectOffsetField:U})}}else if(On(e.bin)){const U=Ml(e,l,{},{offset:M});if(de(t))return{[_]:U,[S]:Ml(t,l,{},{offset:k})};if(hc(e.bin)&&e.bin.step)return{[_]:U,[S]:{signal:`scale("${l}", ${pe(e,{expr:"datum"})} + ${e.bin.step})`,offset:k}}}fe(qH(b))}function ZF({fieldDef:e,scaleName:t,bandPosition:n,offset:i,useRectOffsetField:r}){return Sv({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:i,...r?{startSuffix:Tx,endSuffix:Mx}:{}})}const cEe=new Set(["aria","width","height"]);function Ur(e,t){const{fill:n=void 0,stroke:i=void 0}=t.color==="include"?CY(e):{};return{...fEe(e.markDef,t),...KF("fill",n),...KF("stroke",i),...Nn("opacity",e),...Nn("fillOpacity",e),...Nn("strokeOpacity",e),...Nn("strokeWidth",e),...Nn("strokeDash",e),...tEe(e),...wY(e),...iO(e,"href"),...KSe(e)}}function KF(e,t){return t?{[e]:t}:{}}function fEe(e,t){return xve.reduce((n,i)=>(!cEe.has(i)&&le(e,i)&&t[i]!=="ignore"&&(n[i]=Tt(e[i])),n),{})}function aO(e){const{config:t,markDef:n}=e,i=new Set;if(e.forEachFieldDef((r,a)=>{let s;if(!ls(a)||!(s=e.getScaleType(a)))return;const o=lx(r.aggregate),l=Nk({scaleChannel:a,markDef:n,config:t,scaleType:s,isCountAggregate:o});if(kxe(l)){const f=e.vgField(a,{expr:"datum",binSuffix:e.stack?.impute?"mid":void 0});f&&i.add(f)}}),i.size>0)return{defined:{signal:[...i].map(a=>hx(a,!0)).join(" && ")}}}function JF(e,t){if(t!==void 0)return{[e]:Tt(t)}}const bw="voronoi",MY={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(bw)},marks:(e,t,n)=>{const{x:i,y:r}=t.project.hasChannel,a=e.mark;if(Fu(a))return fe($ve(a)),n;const s={name:e.getName(bw),type:"path",interactive:!0,aria:!1,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...wY(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:i||!r?"datum.datum.x || 0":"0"},y:{expr:r||!i?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let o=0,l=!1;return n.forEach((f,d)=>{const h=f.name??"";h===e.component.mark[0].name?o=d:h.includes(bw)&&(l=!0)}),l||n.splice(o+1,0,s),n}},kY={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Wk(e.bind),parse:(e,t,n)=>BY(t,n),topLevelSignals:(e,t,n)=>{const i=t.name,r=t.project,a=t.bind,s=t.init?.[0],o=MY.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return r.items.forEach((l,f)=>{const d=Ot(`${i}_${l.field}`);n.filter(p=>p.name===d).length||n.unshift({name:d,...s?{init:Kl(s[f])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${o}[${he(l.field)}] : null`}]:[],bind:a[l.field]??a[l.channel]??a})}),n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(f=>f.name===i+eo),s=i+S0,o=r.items.map(f=>Ot(`${i}_${f.field}`)),l=o.map(f=>`${f} !== null`).join(" && ");return o.length&&(a.update=`${l} ? {fields: ${s}, values: [${o.join(", ")}]} : null`),delete a.value,delete a.on,n}},Mv="_toggle",OY={defined:e=>e.type==="point"&&!Pa(e)&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+Mv,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+eo,i=t.name+Mv;return`${i} ? null : ${n}, ${t.resolve==="global"?`${i} ? null : true, `:`${i} ? null : {unit: ${Ol(e)}}, `}${i} ? ${n} : null`}},dEe={defined:e=>e.clear!==void 0&&e.clear!==!1&&!Pa(e),parse:(e,t)=>{t.clear&&(t.clear=Ee(t.clear)?Tu(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(kY.defined(t))for(const i of t.project.items){const r=n.findIndex(a=>a.name===Ot(`${t.name}_${i.field}`));r!==-1&&n[r].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function i(r,a){r!==-1&&n[r].on&&n[r].on.push({events:t.clear,update:a})}if(t.type==="interval")for(const r of t.project.items){const a=n.findIndex(s=>s.name===r.signals.visual);if(i(a,"[0, 0]"),a===-1){const s=n.findIndex(o=>o.name===r.signals.data);i(s,"null")}}else{let r=n.findIndex(a=>a.name===t.name+eo);i(r,"null"),OY.defined(t)&&(r=n.findIndex(a=>a.name===t.name+Mv),i(r,"false"))}return n}},RY={defined:e=>{const t=e.resolve==="global"&&e.bind&&Wk(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ca;return t&&!n&&fe(Ove),t&&n},parse:(e,t,n)=>{const i=Fe(n);if(i.select=Ee(i.select)?{type:i.select,toggle:t.toggle}:{...i.select,toggle:t.toggle},BY(t,i),xe(n.select)&&(n.select.on||n.select.clear)){const s='event.item && indexof(event.item.mark.role, "legend") < 0';for(const o of t.events)o.filter=ve(o.filter??[]),o.filter.includes(s)||o.filter.push(s)}const r=hw(t.bind)?t.bind.legend:"click",a=Ee(r)?Tu(r,"view"):ve(r);t.bind={legend:{merge:a}}},topLevelSignals:(e,t,n)=>{const i=t.name,r=hw(t.bind)&&t.bind.legend,a=s=>o=>{const l=Fe(o);return l.markname=s,l};for(const s of t.project.items){if(!s.hasLegend)continue;const o=`${Ot(s.field)}_legend`,l=`${i}_${o}`;if(n.filter(d=>d.name===l).length===0){const d=r.merge.map(a(`${o}_symbols`)).concat(r.merge.map(a(`${o}_labels`))).concat(r.merge.map(a(`${o}_entries`)));n.unshift({name:l,...t.init?{}:{value:null},on:[{events:d,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:r.merge,update:`!event.item || !datum ? null : ${l}`,force:!0}]})}}return n},signals:(e,t,n)=>{const i=t.name,r=t.project,a=n.find(p=>p.name===i+eo),s=i+S0,o=r.items.filter(p=>p.hasLegend).map(p=>Ot(`${i}_${Ot(p.field)}_legend`)),f=`${o.map(p=>`${p} !== null`).join(" && ")} ? {fields: ${s}, values: [${o.join(", ")}]} : null`;t.events&&o.length>0?a.on.push({events:o.map(p=>({signal:p})),update:f}):o.length>0&&(a.update=f,delete a.value,delete a.on);const d=n.find(p=>p.name===i+Mv),h=hw(t.bind)&&t.bind.legend;return d&&(t.events?d.on.push({...d.on[0],events:h}):d.on[0].events=h),n}};function hEe(e,t,n){const i=e.fieldDef(t)?.field;for(const r of tn(e.component.selection??{})){const a=r.project.hasField[i]??r.project.hasChannel[t];if(a&&RY.defined(r)){const s=n.get("selections")??[];s.push(r.name),n.set("selections",s,!1),a.hasLegend=!0}}}const DY="_translate_anchor",NY="_translate_delta",gEe={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+DY,{x:s,y:o}=t.project.hasChannel;let l=Tu(t.translate,"scope");return r||(l=l.map(f=>(f.between[0].markname=i+Ff,f))),n.push({name:a,value:{},on:[{events:l.map(f=>f.between[0]),update:`{x: x(unit), y: y(unit)${s!==void 0?`, extent_x: ${r?LC(e,Rt):`slice(${s.signals.visual})`}`:""}${o!==void 0?`, extent_y: ${r?LC(e,$n):`slice(${o.signals.visual})`}`:""}}`}]},{name:i+NY,value:{},on:[{events:l,update:`{x: ${a}.x - x(unit), y: ${a}.y - y(unit)}`}]}),s!==void 0&&e9(e,t,s,"width",n),o!==void 0&&e9(e,t,o,"height",n),n}};function e9(e,t,n,i,r){const a=t.name,s=a+DY,o=a+NY,l=n.channel,f=Xs.defined(t),d=r.find(T=>T.name===n.signals[f?"data":"visual"]),h=e.getSizeSignalRef(i).signal,p=e.getScaleComponent(l),y=p?.get("type"),v=p?.get("reverse"),b=f?l===Rt?v?"":"-":v?"-":"":"",S=`${s}.extent_${l}`,_=`${b}${o}.${l} / ${f?`${h}`:`span(${S})`}`,w=!f||!p?"panLinear":y==="log"?"panLog":y==="symlog"?"panSymlog":y==="pow"?"panPow":"panLinear",A=f?y==="pow"?`, ${p.get("exponent")??1}`:y==="symlog"?`, ${p.get("constant")??1}`:"":"",C=`${w}(${S}, ${_}${A})`;d.on.push({events:{signal:o},update:f?C:`clampRange(${C}, 0, ${h})`})}const zY="_zoom_anchor",FY="_zoom_delta",pEe={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const i=t.name,r=Xs.defined(t),a=i+FY,{x:s,y:o}=t.project.hasChannel,l=he(e.scaleName(Rt)),f=he(e.scaleName($n));let d=Tu(t.zoom,"scope");return r||(d=d.map(h=>(h.markname=i+Ff,h))),n.push({name:i+zY,on:[{events:d,update:r?`{${[l?`x: invert(${l}, x(unit))`:"",f?`y: invert(${f}, y(unit))`:""].filter(h=>h).join(", ")}}`:"{x: x(unit), y: y(unit)}"}]},{name:a,on:[{events:d,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),s!==void 0&&t9(e,t,s,"width",n),o!==void 0&&t9(e,t,o,"height",n),n}};function t9(e,t,n,i,r){const a=t.name,s=n.channel,o=Xs.defined(t),l=r.find(w=>w.name===n.signals[o?"data":"visual"]),f=e.getSizeSignalRef(i).signal,d=e.getScaleComponent(s),h=d?.get("type"),p=o?LC(e,s):l.name,y=a+FY,v=`${a}${zY}.${s}`,b=!o||!d?"zoomLinear":h==="log"?"zoomLog":h==="symlog"?"zoomSymlog":h==="pow"?"zoomPow":"zoomLinear",S=o?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",_=`${b}(${p}, ${v}, ${y}${S})`;l.on.push({events:{signal:y},update:o?_:`clampRange(${_}, 0, ${f})`})}const Jl="_store",eo="_tuple",mEe="_modify",LY="vlSelectionResolve",Ox=[ISe,QSe,USe,OY,kY,Xs,RY,dEe,gEe,pEe,MY];function yEe(e){let t=e.parent;for(;t&&!sr(t);)t=t.parent;return t}function Ol(e,{escape:t}={escape:!0}){let n=t?he(e.name):e.name;const i=yEe(e);if(i){const{facet:r}=i;for(const a of $r)r[a]&&(n+=` + '__facet_${a}_' + (facet[${he(i.vgField(a))}])`)}return n}function sO(e){return tn(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function BY(e,t){(Ee(t.select)||!t.select.on)&&delete e.events,(Ee(t.select)||!t.select.clear)&&delete e.clear,(Ee(t.select)||!t.select.toggle)&&delete e.toggle}function Pa(e){return e.events?.find(t=>"type"in t&&t.type==="timer")}function UC(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...UC(e.object)),t.push(...UC(e.property))),t)}function UY(e){return e.object.type==="MemberExpression"?UY(e.object):e.object.name==="datum"}function qY(e){const t=AM(e),n=new Set;return t.visit(i=>{i.type==="MemberExpression"&&UY(i)&&n.add(UC(i).slice(1).join("."))}),n}class qd extends mt{model;filter;expr;_dependentFields;clone(){return new qd(null,this.model,Fe(this.filter))}constructor(t,n,i){super(t),this.model=n,this.filter=i,this.expr=kv(this.model,this.filter,this),this._dependentFields=qY(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function vEe(e,t){const n={},i=e.config.selection;if(!t||!t.length)return n;let r=0;for(const a of t){const s=Ot(a.name),o=a.select,l=Ee(o)?o:o.type,f=xe(o)?Fe(o):{type:l},d=i[l];for(const y in d)y==="fields"||y==="encodings"||(y==="mark"&&(f.mark={...d.mark,...f.mark}),(f[y]===void 0||f[y]===!0)&&(f[y]=Fe(d[y]??f[y])));const h=n[s]={...f,name:s,type:l,init:a.value,bind:a.bind,events:Ee(f.on)?Tu(f.on,"scope"):ve(Fe(f.on))};if(Pa(h)&&(r++,r>1)){delete n[s];continue}const p=Fe(a);for(const y of Ox)y.defined(h)&&y.parse&&y.parse(e,h,p)}return r>1&&fe(Lve),n}function PY(e,t,n,i="datum"){const r=Ee(t)?t:t.param,a=Ot(r),s=he(a+Jl);let o;try{o=e.getSelectionComponent(a,r)}catch{return`!!${a}`}if(o.project.timeUnit){const p=n??e.component.data.raw,y=o.project.timeUnit.clone();p.parent?y.insertAsParentOf(p):p.parent=y}const l=o.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",f=o.resolve==="global"?")":`, ${he(o.resolve)})`,d=`${l}${s}, ${i}${f}`,h=`length(data(${s}))`;return t.empty===!1?`${h} && ${d}`:`!${h} || ${d}`}function IY(e,t,n){const i=Ot(t),r=n.encoding;let a=n.field,s;try{s=e.getSelectionComponent(i,t)}catch{return i}if(!r&&!a)a=s.project.items[0].field,s.project.items.length>1&&fe(Bve(a));else if(r&&!a){const o=s.project.items.filter(l=>l.channel===r);!o.length||o.length>1?(a=s.project.items[0].field,fe(Uve(o,r,n,a))):a=o[0].field}return`${s.name}[${he(zr(a))}]`}function bEe(e,t){for(const[n,i]of vu(e.component.selection??{})){const r=e.getName(`lookup_${n}`);e.component.data.outputNodes[r]=i.materialized=new Ri(new qd(t,e,{param:n}),r,Ft.Lookup,e.component.data.outputNodeRefCounts)}}function kv(e,t,n){return Wg(t,i=>Ee(i)?i:Vbe(i)?PY(e,i,n):KH(i))}function xEe(e,t){if(e)return re(e)&&!jo(e)?e.map(n=>Pk(n,t)).join(", "):e}function xw(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function zg(e,t,n,i={header:!1}){const{disable:r,orient:a,scale:s,labelExpr:o,title:l,zindex:f,...d}=e.combine();if(!r){for(const h in d){const p=h,y=Kxe[p],v=d[p];if(y&&y!==t&&y!=="both")delete d[p];else if(x0(v)){const{condition:b,...S}=v,_=ve(b),w=MF[p];if(w){const{vgProp:A,part:C}=w,T=[..._.map(k=>{const{test:M,...R}=k;return{test:kv(null,M),...R}}),S];xw(d,C,A,T),delete d[p]}else if(w===null){const A={signal:_.map(C=>{const{test:T,...k}=C;return`${kv(null,T)} ? ${hF(k)} : `}).join("")+hF(S)};d[p]=A}}else if(Ce(v)){const b=MF[p];if(b){const{vgProp:S,part:_}=b;xw(d,_,S,v),delete d[p]}}Xe(["labelAlign","labelBaseline"],p)&&d[p]===null&&delete d[p]}if(t==="grid"){if(!d.grid)return;if(d.encode){const{grid:h}=d.encode;d.encode={...h?{grid:h}:{}},wt(d.encode)&&delete d.encode}return{scale:s,orient:a,...d,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:Vt(f,0)}}else{if(!i.header&&e.mainExtracted)return;if(o!==void 0){let p=o;d.encode?.labels?.update&&Ce(d.encode.labels.update.text)&&(p=Gl(o,"datum.label",d.encode.labels.update.text.signal)),xw(d,"labels","text",{signal:p})}if(d.labelAlign===null&&delete d.labelAlign,d.encode){for(const p of MG)e.hasAxisPart(p)||delete d.encode[p];wt(d.encode)&&delete d.encode}const h=xEe(l,n);return{scale:s,orient:a,grid:!1,...h?{title:h}:{},...d,...n.aria===!1?{aria:!1}:{},zindex:Vt(f,0)}}}}function jY(e){const{axes:t}=e.component,n=[];for(const i of oo)if(t[i]){for(const r of t[i])if(!r.get("disable")&&!r.get("gridScale")){const a=i==="x"?"height":"width",s=e.getSizeSignalRef(a).signal;a!==s&&n.push({name:a,update:s})}}return n}function SEe(e,t){const{x:n=[],y:i=[]}=e;return[...n.map(r=>zg(r,"grid",t)),...i.map(r=>zg(r,"grid",t)),...n.map(r=>zg(r,"main",t)),...i.map(r=>zg(r,"main",t))].filter(r=>r)}function n9(e,t,n,i){return Object.assign.apply(null,[{},...e.map(r=>{if(r==="axisOrient"){const a=n==="x"?"bottom":"left",s=t[n==="x"?"axisBottom":"axisLeft"]||{},o=t[n==="x"?"axisTop":"axisRight"]||{},l=new Set([...ue(s),...ue(o)]),f={};for(const d of l.values())f[d]={signal:`${i.signal} === "${a}" ? ${ea(s[d])} : ${ea(o[d])}`};return f}return t[r]})])}function EEe(e,t,n,i){const r=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:nG(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],a=e==="x"?"axisX":"axisY",s=Ce(n)?"axisOrient":`axis${l0(n)}`,o=[...r,...r.map(f=>a+f.substr(4))],l=["axis",s,a];return{vlOnlyAxisConfig:n9(o,i,e,n),vgAxisConfig:n9(l,i,e,n),axisConfigStyle:_Ee([...l,...o],i)}}function _Ee(e,t){const n=[{}];for(const i of e){let r=t[i]?.style;if(r){r=ve(r);for(const a of r)n.push(t.style[a])}}return Object.assign.apply(null,n)}function qC(e,t,n,i={}){const r=kH(e,n,t);if(r!==void 0)return{configFrom:"style",configValue:r};for(const a of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(i[a]?.[e]!==void 0)return{configFrom:a,configValue:i[a][e]};return{}}const i9={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??wEe(n,e),gridScale:({model:e,channel:t})=>AEe(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelAlign||GY(t,n,i),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:i})=>e.labelBaseline||HY(t,n,i),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??$Ee(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??TEe(t.type,n,de(t)&&!!t.timeUnit,de(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:i,scaleType:r})=>{const a=e==="x"?"width":e==="y"?"height":void 0,s=a?t.getSizeSignalRef(a):void 0;return n.tickCount??kEe({fieldOrDatumDef:i,scaleType:r,size:s,values:n.values})},tickMinStep:({axis:e,format:t,fieldOrDatumDef:n})=>e.tickMinStep??OEe({format:t,fieldOrDatumDef:n}),title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const i=YY(t,n);if(i!==void 0)return i;const r=t.typedFieldDef(n),a=n==="x"?"x2":"y2",s=t.fieldDef(a);return RH(r?[$F(r)]:[],de(s)?[$F(s)]:[])},values:({axis:e,fieldOrDatumDef:t})=>REe(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??DEe(n,t)};function wEe(e,t){return!An(e)&&de(t)&&!Ct(t?.bin)&&!On(t?.bin)}function AEe(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function CEe(e,t,n,i,r){const a=t?.labelAngle;if(a!==void 0)return Ce(a)?a:_p(a);{const{configValue:s}=qC("labelAngle",i,t?.style,r);return s!==void 0?_p(s):n===Rt&&Xe([Mk,Tk],e.type)&&!(de(e)&&e.timeUnit)?270:void 0}}function PC(e){return`(((${e.signal} % 360) + 360) % 360)`}function HY(e,t,n,i){if(e!==void 0)if(n==="x"){if(Ce(e)){const r=PC(e),a=Ce(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${r} && ${r} < 135) || (225 < ${r} && ${r} < 315) ? "middle" :(${r} <= 45 || 315 <= ${r}) === ${a} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Ce(t)){const r=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${r} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Ce(e)){const r=PC(e),a=Ce(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${r} <= 45 || 315 <= ${r} || (135 <= ${r} && ${r} <= 225) ? ${i?'"middle"':"null"} : (45 <= ${r} && ${r} <= 135) === ${a} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return i?"middle":null;if(Ce(t)){const r=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${r} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function GY(e,t,n){if(e===void 0)return;const i=n==="x",r=i?0:90,a=i?"bottom":"left";if(Ce(e)){const s=PC(e),o=Ce(t)?`(${t.signal} === "${a}")`:t===a;return{signal:`(${r?`(${s} + 90)`:s} % 180 === 0) ? ${i?null:'"center"'} :(${r} < ${s} && ${s} < ${180+r}) === ${o} ? "left" : "right"`}}if((e+r)%180===0)return i?null:"center";if(Ce(t)){const s=r<e&&e<180+r?"===":"!==";return{signal:`${`${t.signal} ${s} "${a}"`} ? "left" : "right"`}}return(r<e&&e<180+r)==(t===a)?"left":"right"}function $Ee(e,t){if(t==="x"&&Xe(["quantitative","temporal"],e))return!0}function TEe(e,t,n,i){if(n&&!xe(i)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function MEe(e){return e==="x"?"bottom":"left"}function kEe({fieldOrDatumDef:e,scaleType:t,size:n,values:i}){if(!i&&!An(t)&&t!=="log"){if(de(e)){if(Ct(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Xe(["month","hours","day","quarter"],wn(e.timeUnit)?.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function OEe({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(de(t)){const{timeUnit:n}=t;if(n){const i=WH(n);if(i)return{signal:i}}}}function YY(e,t){const n=t==="x"?"x2":"y2",i=e.fieldDef(t),r=e.fieldDef(n),a=i?i.title:void 0,s=r?r.title:void 0;if(a&&s)return DH(a,s);if(a)return a;if(s)return s;if(a!==void 0)return a;if(s!==void 0)return s}function REe(e,t){const n=e.values;if(re(n))return TG(t,n);if(Ce(n))return n}function DEe(e,t){return e==="rect"&&_v(t)?1:0}class pd extends mt{transform;_dependentFields;clone(){return new pd(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=qY(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((i,r)=>{if(yc(i)&&vG(i.sort)){const{field:a,timeUnit:s}=i,o=i.sort,l=o.map((f,d)=>`${KH({field:a,timeUnit:s,equal:f})} ? ${d} : `).join("")+o.length;t=new pd(t,{calculate:l,as:md(i,r,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Qe(this.transform)}`}}function md(e,t,n){return pe(e,{prefix:t,suffix:"sort_index",...n})}function Rx(e,t){return Xe(["top","bottom"],t)?"column":Xe(["left","right"],t)||e==="row"?"row":"column"}function yd(e,t,n,i){const r=i==="row"?n.headerRow:i==="column"?n.headerColumn:n.headerFacet;return Vt((t||{})[e],r[e],n.header[e])}function Dx(e,t,n,i){const r={};for(const a of e){const s=yd(a,t||{},n,i);s!==void 0&&(r[a]=s)}return r}const oO=["row","column"],uO=["header","footer"];function NEe(e,t){const n=e.component.layoutHeaders[t].title,i=e.config?e.config:void 0,r=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:a,titleAngle:s,titleOrient:o}=Dx(["titleAnchor","titleAngle","titleOrient"],r.header,i,t),l=Rx(t,o),f=_p(s);return{name:`${t}-title`,type:"group",role:`${l}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...VY(f,l),...XY(l,f,a),...WY(i,r,t,x2e,XG)}}}function XY(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const i=GY(t,e==="row"?"left":"top",e==="row"?"y":"x");return i?{align:i}:{}}function VY(e,t){const n=HY(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function zEe(e,t){const n=e.component.layoutHeaders[t],i=[];for(const r of uO)if(n[r])for(const a of n[r]){const s=LEe(e,t,r,n,a);s!=null&&i.push(s)}return i}function FEe(e,t){const{sort:n}=e;return Ys(n)?{field:pe(n,{expr:"datum"}),order:n.order??"ascending"}:re(n)?{field:md(e,t,{expr:"datum"}),order:"ascending"}:{field:pe(e,{expr:"datum"}),order:n??"ascending"}}function IC(e,t,n){const{format:i,formatType:r,labelAngle:a,labelAnchor:s,labelOrient:o,labelExpr:l}=Dx(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),f=Lk({fieldOrDatumDef:e,format:i,formatType:r,expr:"parent",config:n}).signal,d=Rx(t,o);return{text:{signal:l?Gl(Gl(l,"datum.label",f),"datum.value",pe(e,{expr:"parent"})):f},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...VY(a,d),...XY(d,a,s),...WY(n,e,t,S2e,VG)}}function LEe(e,t,n,i,r){if(r){let a=null;const{facetFieldDef:s}=i,o=e.config?e.config:void 0;if(s&&r.labels){const{labelOrient:h}=Dx(["labelOrient"],s.header,o,t);(t==="row"&&!Xe(["top","bottom"],h)||t==="column"&&!Xe(["left","right"],h))&&(a=IC(s,t,o))}const l=sr(e)&&!m0(e.facet),f=r.axes,d=f?.length>0;if(a||d){const h=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...i.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:FEe(s,t)}:{},...d&&l?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...a?{title:a}:{},...r.sizeSignal?{encode:{update:{[h]:r.sizeSignal}}}:{},...d?{axes:f}:{}}}}return null}const BEe={column:{start:0,end:1},row:{start:1,end:0}};function UEe(e,t){return BEe[t][e]}function qEe(e,t){const n={};for(const i of $r){const r=e[i];if(r?.facetFieldDef){const{titleAnchor:a,titleOrient:s}=Dx(["titleAnchor","titleOrient"],r.facetFieldDef.header,t,i),o=Rx(i,s),l=UEe(a,o);l!==void 0&&(n[o]=l)}}return wt(n)?void 0:n}function WY(e,t,n,i,r){const a={};for(const s of i){if(!r[s])continue;const o=yd(s,t?.header,e,n);o!==void 0&&(a[r[s]]=o)}return a}function lO(e){return[...y1(e,"width"),...y1(e,"height"),...y1(e,"childWidth"),...y1(e,"childHeight")]}function y1(e,t){const n=t==="width"?"x":"y",i=e.component.layoutSize.get(t);if(!i||i==="merged")return[];const r=e.getSizeSignalRef(t).signal;if(i==="step"){const a=e.getScaleComponent(n);if(a){const s=a.get("type"),o=a.get("range");if(An(s)&&gc(o)){const l=e.scaleName(n);return sr(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[r9(l,o)]:[r9(l,o),{name:r,update:QY(l,a,`domain('${l}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(i=="container"){const a=r.endsWith("width"),s=a?"containerSize()[0]":"containerSize()[1]",o=OC(e.config.view,a?"width":"height"),l=`isFinite(${s}) ? ${s} : ${o}`;return[{name:r,init:l,on:[{update:l,events:"window:resize"}]}]}else return[{name:r,value:i}]}function r9(e,t){const n=`${e}_step`;return Ce(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function QY(e,t,n){const i=t.get("type"),r=t.get("padding"),a=Vt(t.get("paddingOuter"),r);let s=t.get("paddingInner");return s=i==="band"?s!==void 0?s:r:1,`bandspace(${n}, ${ea(s)}, ${ea(a)}) * ${e}_step`}function ZY(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function KY(e,t){return ue(e).reduce((n,i)=>({...n,...Ud({model:t,channelDef:e[i],vgChannel:i,mainRefFn:r=>Tt(r.value),invalidValueRef:void 0})}),{})}function JY(e,t){if(sr(t))return e==="theta"?"independent":"shared";if(jd(t))return"shared";if(mO(t))return Wt(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function cO(e,t){const n=e.scale[t],i=Wt(t)?"axis":"legend";return n==="independent"?(e[i][t]==="shared"&&fe(mbe(t)),"independent"):e[i][t]||"shared"}const PEe={...w2e,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},eX=ue(PEe);class IEe extends lo{}const a9={symbols:jEe,gradient:HEe,labels:GEe,entries:YEe};function jEe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r,legendType:a}){if(a!=="symbol")return;const{markDef:s,encoding:o,config:l,mark:f}=n,d=s.filled&&f!=="trail";let h={...wve({},n,xxe),...CY(n,{filled:d})};const p=r.get("symbolOpacity")??l.legend.symbolOpacity,y=r.get("symbolFillColor")??l.legend.symbolFillColor,v=r.get("symbolStrokeColor")??l.legend.symbolStrokeColor,b=p===void 0?tX(o.opacity)??s.opacity:void 0;if(h.fill){if(i==="fill"||d&&i===Fi)delete h.fill;else if(le(h.fill,"field"))y?delete h.fill:(h.fill=Tt(l.legend.symbolBaseFillColor??"black"),h.fillOpacity=Tt(b??1));else if(re(h.fill)){const S=jC(o.fill??o.color)??s.fill??(d&&s.color);S&&(h.fill=Tt(S))}}if(h.stroke){if(i==="stroke"||!d&&i===Fi)delete h.stroke;else if(le(h.stroke,"field")||v)delete h.stroke;else if(re(h.stroke)){const S=Vt(jC(o.stroke||o.color),s.stroke,d?s.color:void 0);S&&(h.stroke={value:S})}}if(i!==so){const S=de(t)&&iX(n,r,t);S?h.opacity=[{test:S,...Tt(b??1)},Tt(l.legend.unselectedOpacity)]:b&&(h.opacity=Tt(b))}return h={...h,...e},wt(h)?void 0:h}function HEe(e,{model:t,legendType:n,legendCmpt:i}){if(n!=="gradient")return;const{config:r,markDef:a,encoding:s}=t;let o={};const f=(i.get("gradientOpacity")??r.legend.gradientOpacity)===void 0?tX(s.opacity)||a.opacity:void 0;return f&&(o.opacity=Tt(f)),o={...o,...e},wt(o)?void 0:o}function GEe(e,{fieldOrDatumDef:t,model:n,channel:i,legendCmpt:r}){const a=n.legend(i)||{},s=n.config,o=de(t)?iX(n,r,t):void 0,l=o?[{test:o,value:1},{value:s.legend.unselectedOpacity}]:void 0,{format:f,formatType:d}=a;let h;Zl(d)?h=ta({fieldOrDatumDef:t,field:"datum.value",format:f,formatType:d,config:s}):f===void 0&&d===void 0&&s.customFormatTypes&&(t.type==="quantitative"&&s.numberFormatType?h=ta({fieldOrDatumDef:t,field:"datum.value",format:s.numberFormat,formatType:s.numberFormatType,config:s}):t.type==="temporal"&&s.timeFormatType&&de(t)&&t.timeUnit===void 0&&(h=ta({fieldOrDatumDef:t,field:"datum.value",format:s.timeFormat,formatType:s.timeFormatType,config:s})));const p={...l?{opacity:l}:{},...h?{text:h}:{},...e};return wt(p)?void 0:p}function YEe(e,{legendCmpt:t}){return t.get("selections")?.length?{...e,fill:{value:"transparent"}}:e}function tX(e){return nX(e,(t,n)=>Math.max(t,n.value))}function jC(e){return nX(e,(t,n)=>Vt(t,n.value))}function nX(e,t){if(qxe(e))return ve(e.condition).reduce(t,e.value);if(ua(e))return e.value}function iX(e,t,n){const i=t.get("selections");if(!i?.length)return;const r=he(n.field);return i.map(a=>`(!length(data(${he(Ot(a)+Jl)})) || (${a}[${r}] && indexof(${a}[${r}], datum.value) >= 0))`).join(" || ")}const s9={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:i,formatType:r}=t;return pG(e,e.type,i,r,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:i}=e;return mG(i,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??JEe(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??e_e(n),symbolType:({legend:e,markDef:t,channel:n,encoding:i})=>e.symbolType??VEe(t.type,n,i.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>zf(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(Nf(n)&&Fa(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>XEe(t,e)};function XEe(e,t){const n=e.values;if(re(n))return TG(t,n);if(Ce(n))return n}function VEe(e,t,n,i){if(t!=="shape"){const r=jC(n)??i;if(r)return r}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function WEe(e){const{legend:t}=e;return Vt(t.type,QEe(e))}function QEe({channel:e,timeUnit:t,scaleType:n}){if(Nf(e)){if(Xe(["quarter","month","day"],t))return"symbol";if(Fa(n))return"gradient"}return"symbol"}function ZEe({legendConfig:e,legendType:t,orient:n,legend:i}){return i.direction??e[t?"gradientDirection":"symbolDirection"]??KEe(n,t)}function KEe(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function JEe({legendConfig:e,model:t,direction:n,orient:i,scaleType:r}){const{gradientHorizontalMaxLength:a,gradientHorizontalMinLength:s,gradientVerticalMaxLength:o,gradientVerticalMinLength:l}=e;if(Fa(r))return n==="horizontal"?i==="top"||i==="bottom"?o9(t,"width",s,a):s:o9(t,"height",l,o)}function o9(e,t,n,i){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${i})`}}function e_e(e){if(Xe(["quantile","threshold","log","symlog"],e))return"greedy"}function rX(e){const t=zt(e)?t_e(e):a_e(e);return e.component.legends=t,t}function t_e(e){const{encoding:t}=e,n={};for(const i of[Fi,...QG]){const r=ln(t[i]);!r||!e.getScaleComponent(i)||i===Li&&de(r)&&r.type===Bd||(n[i]=r_e(e,i))}return n}function n_e(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function i_e(e,t,n,i){switch(t){case"disable":return n!==void 0;case"values":return!!n?.values;case"title":if(t==="title"&&e===i?.title)return!0}return e===(n||{})[t]}function r_e(e,t){let n=e.legend(t);const{markDef:i,encoding:r,config:a}=e,s=a.legend,o=new IEe({},n_e(e,t));hEe(e,t,o);const l=n!==void 0?!n:s.disable;if(o.set("disable",l,n!==void 0),l)return o;n=n||{};const f=e.getScaleComponent(t).get("type"),d=ln(r[t]),h=de(d)?wn(d.timeUnit)?.unit:void 0,p=n.orient||a.legend.orient||"right",y=WEe({legend:n,channel:t,timeUnit:h,scaleType:f}),v=ZEe({legend:n,legendType:y,orient:p,legendConfig:s}),b={legend:n,channel:t,model:e,markDef:i,encoding:r,fieldOrDatumDef:d,legendConfig:s,config:a,scaleType:f,orient:p,legendType:y,direction:v};for(const C of eX){if(y==="gradient"&&C.startsWith("symbol")||y==="symbol"&&C.startsWith("gradient"))continue;const T=C in s9?s9[C](b):n[C];if(T!==void 0){const k=i_e(T,C,n,e.fieldDef(t));(k||a.legend[C]===void 0)&&o.set(C,T,k)}}const S=n?.encoding??{},_=o.get("selections"),w={},A={fieldOrDatumDef:d,model:e,channel:t,legendCmpt:o,legendType:y};for(const C of["labels","legend","title","symbols","gradient","entries"]){const T=KY(S[C]??{},e),k=C in a9?a9[C](T,A):T;k!==void 0&&!wt(k)&&(w[C]={..._?.length&&de(d)?{name:`${Ot(d.field)}_legend_${C}`}:{},..._?.length?{interactive:!!_}:{},update:k})}return wt(w)||o.set("encode",w,!!n?.encoding),o}function a_e(e){const{legends:t,resolve:n}=e.component;for(const i of e.children){rX(i);for(const r of ue(i.component.legends))n.legend[r]=cO(e.component.resolve,r),n.legend[r]==="shared"&&(t[r]=aX(t[r],i.component.legends[r]),t[r]||(n.legend[r]="independent",delete t[r]))}for(const i of ue(t))for(const r of e.children)r.component.legends[i]&&n.legend[i]==="shared"&&delete r.component.legends[i];return t}function aX(e,t){if(!e)return t.clone();const n=e.getWithExplicit("orient"),i=t.getWithExplicit("orient");if(n.explicit&&i.explicit&&n.value!==i.value)return;let r=!1;for(const a of eX){const s=Su(e.getWithExplicit(a),t.getWithExplicit(a),a,"legend",(o,l)=>{switch(a){case"symbolType":return s_e(o,l);case"title":return NH(o,l);case"type":return r=!0,Qi("symbol")}return $x(o,l,a,"legend")});e.setWithExplicit(a,s)}return r&&(e.implicit?.encode?.gradient&&vv(e.implicit,["encode","gradient"]),e.explicit?.encode?.gradient&&vv(e.explicit,["encode","gradient"])),e}function s_e(e,t){return t.value==="circle"?t:e}function o_e(e,t,n,i){e.encode??={},e.encode[t]??={},e.encode[t].update??={},e.encode[t].update[n]=i}function sX(e){const t=e.component.legends,n={};for(const r of ue(t)){const a=e.getScaleComponent(r),s=ft(a.get("domains"));if(n[s])for(const o of n[s])aX(o,t[r])||n[s].push(t[r]);else n[s]=[t[r].clone()]}return tn(n).flat().map(r=>u_e(r,e.config)).filter(r=>r!==void 0)}function u_e(e,t){const{disable:n,labelExpr:i,selections:r,...a}=e.combine();if(!n){if(t.aria===!1&&a.aria==null&&(a.aria=!1),a.encode?.symbols){const s=a.encode.symbols.update;s.fill&&s.fill.value!=="transparent"&&!s.stroke&&!a.stroke&&(s.stroke={value:"transparent"});for(const o of QG)a[o]&&delete s[o]}if(a.title||delete a.title,i!==void 0){let s=i;a.encode?.labels?.update&&Ce(a.encode.labels.update.text)&&(s=Gl(i,"datum.label",a.encode.labels.update.text.signal)),o_e(a,"labels","text",{signal:s})}return a}}function l_e(e){return jd(e)||mO(e)?c_e(e):oX(e)}function c_e(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),oX(e))}function oX(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:i}=n;if(t.data){const r={signal:`[${t.size.map(s=>s.signal).join(", ")}]`},a=t.data.reduce((s,o)=>{const l=Ce(o)?o.signal:`data('${e.lookupDataSource(o)}')`;return Xe(s,l)||s.push(l),s},[]);if(a.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:i,size:r,fit:{signal:a.length>1?`[${a.join(", ")}]`:a[0]},...n}]}else return[{name:i,translate:{signal:"[width / 2, height / 2]"},...n}]}const f_e=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class uX extends lo{specifiedProjection;size;data;merged=!1;constructor(t,n,i,r){super({...n},{name:t}),this.specifiedProjection=n,this.size=i,this.data=r}get isFit(){return!!this.data}}function lX(e){e.component.projection=zt(e)?d_e(e):p_e(e)}function d_e(e){if(e.hasProjection){const t=Rn(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),i=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,r=n?h_e(e):void 0,a=new uX(e.projectionName(!0),{...Rn(e.config.projection),...t},i,r);return a.get("type")||a.set("type","equalEarth",!1),a}}function h_e(e){const t=[],{encoding:n}=e;for(const i of[[ba,va],[Fr,xa]])(ln(n[i[0]])||ln(n[i[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(Li)&&e.typedFieldDef(Li).type===Bd&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Ft.Main)),t}function g_e(e,t){const n=tk(f_e,r=>!!(!Se(e.explicit,r)&&!Se(t.explicit,r)||Se(e.explicit,r)&&Se(t.explicit,r)&&nr(e.get(r),t.get(r))));if(nr(e.size,t.size)){if(n)return e;if(nr(e.explicit,{}))return t;if(nr(t.explicit,{}))return e}return null}function p_e(e){if(e.children.length===0)return;let t;for(const i of e.children)lX(i);const n=tk(e.children,i=>{const r=i.component.projection;if(r)if(t){const a=g_e(t,r);return a&&(t=a),!!a}else return t=r,!0;else return!0});if(t&&n){const i=e.projectionName(!0),r=new uX(i,t.specifiedProjection,t.size,Fe(t.data));for(const a of e.children){const s=a.component.projection;s&&(s.isFit&&r.data.push(...a.component.projection.data),a.renameProjection(s.get("name"),i),s.merged=!0)}return r}}function m_e(e,t,n,i){if(b0(t,n)){const r=zt(e)?e.axis(n)??e.legend(n)??{}:{},a=pe(t,{expr:"datum"}),s=pe(t,{expr:"datum",binSuffix:"end"});return{formulaAs:pe(t,{binSuffix:"range",forAs:!0}),formula:p0(a,s,r.format,r.formatType,i)}}return{}}function cX(e,t){return`${CH(e)}_${t}`}function y_e(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function fO(e,t,n){const i=Sx(n,void 0)??{},r=cX(i,t);return e.getName(`${r}_bins`)}function v_e(e){return"as"in e}function u9(e,t,n){let i,r;v_e(e)?i=Ee(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:i=[pe(e,{forAs:!0}),pe(e,{binSuffix:"end",forAs:!0})];const a={...Sx(t,void 0)},s=cX(a,e.field),{signal:o,extentSignal:l}=y_e(n,s);if(cx(a.extent)){const d=a.extent;r=IY(n,d.param,d),delete a.extent}const f={bin:a,field:e.field,as:[i],...o?{signal:o}:{},...l?{extentSignal:l}:{},...r?{span:r}:{}};return{key:s,binComponent:f}}class Ia extends mt{bins;clone(){return new Ia(null,Fe(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const i=n.reduceFieldDef((r,a,s)=>{if(vi(a)&&Ct(a.bin)){const{key:o,binComponent:l}=u9(a,a.bin,n);r[o]={...l,...r[o],...m_e(n,a,s,n.config)}}return r},{});return wt(i)?null:new Ia(t,i)}static makeFromTransform(t,n,i){const{key:r,binComponent:a}=u9(n,n.bin,i);return new Ia(t,{[r]:a})}merge(t,n){for(const i of ue(t.bins))i in this.bins?(n(t.bins[i].signal,this.bins[i].signal),this.bins[i].as=za([...this.bins[i].as,...t.bins[i].as],Qe)):this.bins[i]=t.bins[i];for(const i of t.children)t.removeChild(i),i.parent=this;t.remove()}producedFields(){return new Set(tn(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(tn(this.bins).map(t=>t.field))}hash(){return`Bin ${Qe(this.bins)}`}assemble(){return tn(this.bins).flatMap(t=>{const n=[],[i,...r]=t.as,{extent:a,...s}=t.bin,o={type:"bin",field:zr(t.field),as:i,signal:t.signal,...cx(a)?{extent:null}:{extent:a},...t.span?{span:{signal:`span(${t.span})`}}:{},...s};!a&&t.extentSignal&&(n.push({type:"extent",field:zr(t.field),signal:t.extentSignal}),o.extent={signal:t.extentSignal}),n.push(o);for(const l of r)for(let f=0;f<2;f++)n.push({type:"formula",expr:pe({field:i[f]},{expr:"datum"}),as:l[f]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function b_e(e,t,n,i){const r=zt(i)?i.encoding[us(t)]:void 0;if(vi(n)&&zt(i)&&xG(n,r,i.markDef,i.config)){e.add(pe(n,{})),e.add(pe(n,{suffix:"end"}));const{mark:a,markDef:s,config:o}=i,l=xu({fieldDef:n,markDef:s,config:o});wp(a)&&l!==.5&&Wt(t)&&(e.add(pe(n,{suffix:Tx})),e.add(pe(n,{suffix:Mx}))),n.bin&&b0(n,t)&&e.add(pe(n,{binSuffix:"range"}))}else if(yH(t)){const a=mH(t);e.add(i.getName(a))}else e.add(pe(n));return yc(n)&&oxe(n.scale?.range)&&e.add(n.scale.range.field),e}function x_e(e,t){for(const n of ue(t)){const i=t[n];for(const r of ue(i))n in e?e[n][r]=new Set([...e[n][r]??[],...i[r]]):e[n]={[r]:i[r]}}}class ia extends mt{dimensions;measures;clone(){return new ia(null,new Set(this.dimensions),Fe(this.measures))}constructor(t,n,i){super(t),this.dimensions=n,this.measures=i}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let i=!1;n.forEachFieldDef(s=>{s.aggregate&&(i=!0)});const r={},a=new Set;return!i||(n.forEachFieldDef((s,o)=>{const{aggregate:l,field:f}=s;if(l)if(l==="count")r["*"]??={},r["*"].count=new Set([pe(s,{forAs:!0})]);else{if(Ks(l)||zu(l)){const d=Ks(l)?"argmin":"argmax",h=l[d];r[h]??={},r[h][d]=new Set([pe({op:d,field:h},{forAs:!0})])}else r[f]??={},r[f][l]=new Set([pe(s,{forAs:!0})]);ls(o)&&n.scaleDomain(o)==="unaggregated"&&(r[f]??={},r[f].min=new Set([pe({field:f,aggregate:"min"},{forAs:!0})]),r[f].max=new Set([pe({field:f,aggregate:"max"},{forAs:!0})]))}else b_e(a,o,s,n)}),a.size+ue(r).length===0)?null:new ia(t,a,r)}static makeFromTransform(t,n){const i=new Set,r={};for(const a of n.aggregate){const{op:s,field:o,as:l}=a;s&&(s==="count"?(r["*"]??={},r["*"].count=new Set([l||pe(a,{forAs:!0})])):(r[o]??={},r[o][s]??=new Set,r[o][s].add(l||pe(a,{forAs:!0}))))}for(const a of n.groupby??[])i.add(a);return i.size+ue(r).length===0?null:new ia(t,i,r)}merge(t){return uH(this.dimensions,t.dimensions)?(x_e(this.measures,t.measures),!0):(Rbe("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...ue(this.measures)])}producedFields(){const t=new Set;for(const n of ue(this.measures))for(const i of ue(this.measures[n])){const r=this.measures[n][i];r.size===0?t.add(`${i}_${n}`):r.forEach(t.add,t)}return t}hash(){return`Aggregate ${Qe({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],i=[];for(const a of ue(this.measures))for(const s of ue(this.measures[a]))for(const o of this.measures[a][s])i.push(o),t.push(s),n.push(a==="*"?null:zr(a));return{type:"aggregate",groupby:[...this.dimensions].map(zr),ops:t,fields:n,as:i}}}class Pd extends mt{model;name;data;column;row;facet;childModel;constructor(t,n,i,r){super(t),this.model=n,this.name=i,this.data=r;for(const a of $r){const s=n.facet[a];if(s){const{bin:o,sort:l}=s;this[a]={name:n.getName(`${a}_domain`),fields:[pe(s),...Ct(o)?[pe(s,{binSuffix:"end"})]:[]],...Ys(l)?{sortField:l}:re(l)?{sortIndexField:md(s,a)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of $r)this[n]&&(t+=` ${n.charAt(0)}:${Qe(this[n])}`);return t}get fields(){const t=[];for(const n of $r)this[n]?.fields&&t.push(...this[n].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of $r)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of oo){const i=this.childModel.component.scales[n];if(i&&!i.merged){const r=i.get("type"),a=i.get("range");if(An(r)&&gc(a)){const s=Nx(this.childModel,n),o=pO(s);o?t[n]=o:fe(pk(n))}}}return t}assembleRowColumnHeaderData(t,n,i){const r={row:"y",column:"x",facet:void 0}[t],a=[],s=[],o=[];r&&i&&i[r]&&(n?(a.push(`distinct_${i[r]}`),s.push("max")):(a.push(i[r]),s.push("distinct")),o.push(`distinct_${i[r]}`));const{sortField:l,sortIndexField:f}=this[t];if(l){const{op:d=vx,field:h}=l;a.push(h),s.push(d),o.push(pe(l,{forAs:!0}))}else f&&(a.push(f),s.push("max"),o.push(f));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...a.length?{fields:a,ops:s,as:o}:{}}]}}assembleFacetHeaderData(t){const{columns:n}=this.model.layout,{layoutHeaders:i}=this.model.component,r=[],a={};for(const l of oO){for(const f of uO){const d=i[l]?.[f]??[];for(const h of d)if(h.axes?.length>0){a[l]=!0;break}}if(a[l]){const f=`length(data("${this.facet.name}"))`,d=l==="row"?n?{signal:`ceil(${f} / ${n})`}:1:n?{signal:`min(${f}, ${n})`}:{signal:f};r.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:d}]})}}const{row:s,column:o}=a;return(s||o)&&r.unshift(this.assembleRowColumnHeaderData("facet",null,t)),r}assemble(){const t=[];let n=null;const i=this.getChildIndependentFieldsWithStep(),{column:r,row:a,facet:s}=this;if(r&&a&&(i.x||i.y)){n=`cross_${this.column.name}_${this.row.name}`;const o=[].concat(i.x??[],i.y??[]),l=o.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:o,ops:l}]})}for(const o of[Gs,Hs])this[o]&&t.push(this.assembleRowColumnHeaderData(o,n,i));if(s){const o=this.assembleFacetHeaderData(i);o&&t.push(...o)}return t}}function l9(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function S_e(e,t){const n=rk(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const i=l9(t.slice(5,t.length));return`timeParse(${n},'${i}')`}else if(t.startsWith("utc:")){const i=l9(t.slice(4,t.length));return`utcParse(${n},'${i}')`}else return fe(Pve(t)),null}function E_e(e){const t={};return Z1(e.filter,n=>{if(ZH(n)){let i=null;Sk(n)?i=Ji(n.equal):_k(n)?i=Ji(n.lte):Ek(n)?i=Ji(n.lt):wk(n)?i=Ji(n.gt):Ak(n)?i=Ji(n.gte):Ck(n)?i=n.range[0]:$k(n)&&(i=(n.oneOf??n.in)[0]),i&&(pc(i)?t[n.field]="date":at(i)?t[n.field]="number":Ee(i)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function __e(e){const t={};function n(i){dd(i)?t[i.field]="date":i.type==="quantitative"&&gve(i.aggregate)?t[i.field]="number":sd(i.field)>1?i.field in t||(t[i.field]="flatten"):yc(i)&&Ys(i.sort)&&sd(i.sort.field)>1&&(i.sort.field in t||(t[i.sort.field]="flatten"))}if((zt(e)||sr(e))&&e.forEachFieldDef((i,r)=>{if(vi(i))n(i);else{const a=dc(r),s=e.fieldDef(a);n({...i,type:s.type})}}),zt(e)){const{mark:i,markDef:r,encoding:a}=e;if(Fu(i)&&!e.encoding.order){const s=r.orient==="horizontal"?"y":"x",o=a[s];de(o)&&o.type==="quantitative"&&!(o.field in t)&&(t[o.field]="number")}}return t}function w_e(e){const t={};if(zt(e)&&e.component.selection)for(const n of ue(e.component.selection)){const i=e.component.selection[n];for(const r of i.project.items)!r.channel&&sd(r.field)>1&&(t[r.field]="flatten")}return t}class Qn extends mt{_parse;clone(){return new Qn(null,Fe(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Qe(this._parse)}`}static makeExplicit(t,n,i){let r={};const a=n.data;return!ou(a)&&a?.format?.parse&&(r=a.format.parse),this.makeWithAncestors(t,r,{},i)}static makeWithAncestors(t,n,i,r){for(const o of ue(i)){const l=r.getWithExplicit(o);l.value!==void 0&&(l.explicit||l.value===i[o]||l.value==="derived"||i[o]==="flatten"?delete i[o]:fe(bF(o,i[o],l.value)))}for(const o of ue(n)){const l=r.get(o);l!==void 0&&(l===n[o]?delete n[o]:fe(bF(o,n[o],l)))}const a=new lo(n,i);r.copyAll(a);const s={};for(const o of ue(a.combine())){const l=a.get(o);l!==null&&(s[o]=l)}return ue(s).length===0||r.parseNothing?null:new Qn(t,s)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of ue(this._parse)){const i=this._parse[n];sd(n)===1&&(t[n]=i)}return t}producedFields(){return new Set(ue(this._parse))}dependentFields(){return new Set(ue(this._parse))}assembleTransforms(t=!1){return ue(this._parse).filter(n=>t?sd(n)>1:!0).map(n=>{const i=S_e(n,this._parse[n]);return i?{type:"formula",expr:i,as:Fd(n)}:null}).filter(n=>n!==null)}}class Eu extends mt{clone(){return new Eu(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ca])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ca}}}class E0 extends mt{params;clone(){return new E0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Qe(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class _0 extends mt{params;clone(){return new _0(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Qe(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class ec extends mt{_data;_name;_generator;constructor(t){super(null),t??={name:"source"};let n;if(ou(t)||(n=t.format?{...ar(t.format,["parse"])}:{}),Ap(t))this._data={values:t.values};else if(hd(t)){if(this._data={url:t.url},!n.type){let i=/(?:\.([^.]+))?$/.exec(t.url)[1];Xe(["json","csv","tsv","dsv","topojson"],i)||(i="json"),n.type=i}}else gY(t)?this._data={values:[{type:"Sphere"}]}:(dY(t)||ou(t))&&(this._data={});this._generator=ou(t),t.name&&(this._name=t.name),n&&!wt(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}function dO(e){return e instanceof ec||e instanceof E0||e instanceof _0}class hO{#e;constructor(){this.#e=!1}setModified(){this.#e=!0}get modifiedFlag(){return this.#e}}class vc extends hO{getNodeDepths(t,n,i){i.set(t,n);for(const r of t.children)this.getNodeDepths(r,n+1,i);return i}optimize(t){const i=[...this.getNodeDepths(t,0,new Map).entries()].sort((r,a)=>a[1]-r[1]);for(const r of i)this.run(r[0]);return this.modifiedFlag}}class gO extends hO{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class A_e extends gO{mergeNodes(t,n){const i=n.shift();for(const r of n)t.removeChild(r),r.parent=i,r.remove()}run(t){const n=t.children.map(r=>r.hash()),i={};for(let r=0;r<n.length;r++)i[n[r]]===void 0?i[n[r]]=[t.children[r]]:i[n[r]].push(t.children[r]);for(const r of ue(i))i[r].length>1&&(this.setModified(),this.mergeNodes(t,i[r]))}}class C_e extends gO{requiresSelectionId;constructor(t){super(),this.requiresSelectionId=t&&sO(t)}run(t){t instanceof Eu&&(this.requiresSelectionId&&(dO(t.parent)||t.parent instanceof ia||t.parent instanceof Qn)||(this.setModified(),t.remove()))}}class $_e extends hO{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let i=new Set;t instanceof qa&&(i=t.producedFields(),nk(i,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const r of t.children)this.run(r,new Set([...n,...i]))}}class T_e extends gO{constructor(){super()}run(t){t instanceof Ri&&!t.isRequired()&&(this.setModified(),t.remove())}}class M_e extends vc{run(t){if(!dO(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof Qn)if(t instanceof Qn)this.setModified(),t.merge(n);else{if(ik(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class k_e extends vc{run(t){const n=[...t.children],i=t.children.filter(r=>r instanceof Qn);if(t.numChildren()>1&&i.length>=1){const r={},a=new Set;for(const s of i){const o=s.parse;for(const l of ue(o))l in r?r[l]!==o[l]&&a.add(l):r[l]=o[l]}for(const s of a)delete r[s];if(!wt(r)){this.setModified();const s=new Qn(t,r);for(const o of n){if(o instanceof Qn)for(const l of ue(r))delete o.parse[l];t.removeChild(o),o.parent=s,o instanceof Qn&&ue(o.parse).length===0&&o.remove()}}}}}class O_e extends vc{run(t){t instanceof Ri||t.numChildren()>0||t instanceof Pd||t instanceof ec||(this.setModified(),t.remove())}}class R_e extends vc{run(t){const n=t.children.filter(r=>r instanceof qa),i=n.pop();for(const r of n)this.setModified(),i.merge(r)}}class D_e extends vc{run(t){const n=t.children.filter(r=>r instanceof ia),i={};for(const r of n){const a=Qe(r.groupBy);a in i||(i[a]=[]),i[a].push(r)}for(const r of ue(i)){const a=i[r];if(a.length>1){const s=a.pop();for(const o of a)s.merge(o)&&(t.removeChild(o),o.parent=s,o.remove(),this.setModified())}}}}class N_e extends vc{model;constructor(t){super(),this.model=t}run(t){const n=!(dO(t)||t instanceof qd||t instanceof Qn||t instanceof Eu),i=[],r=[];for(const a of t.children)a instanceof Ia&&(n&&!ik(t.producedFields(),a.dependentFields())?i.push(a):r.push(a));if(i.length>0){const a=i.pop();for(const s of i)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ia?t.merge(a,this.model.renameSignal.bind(this.model)):a.swapWithParent()}if(r.length>1){const a=r.pop();for(const s of r)a.merge(s,this.model.renameSignal.bind(this.model));this.setModified()}}}class z_e extends vc{run(t){const n=[...t.children];if(!ad(n,s=>s instanceof Ri)||t.numChildren()<=1)return;const r=[];let a;for(const s of n)if(s instanceof Ri){let o=s;for(;o.numChildren()===1;){const[l]=o.children;if(l instanceof Ri)o=l;else break}r.push(...o.children),a?(t.removeChild(s),s.parent=a.parent,a.parent.removeChild(a),a.parent=o,this.setModified()):a=o}else r.push(s);if(r.length){this.setModified();for(const s of r)s.parent.removeChild(s),s.parent=a}}}class bc extends mt{transform;clone(){return new bc(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??pe(t)}hash(){return`JoinAggregateTransform ${Qe(this.transform)}`}assemble(){const t=[],n=[],i=[];for(const a of this.transform.joinaggregate)n.push(a.op),i.push(this.getDefaultName(a)),t.push(a.field===void 0?null:a.field);const r=this.transform.groupby;return{type:"joinaggregate",as:i,ops:n,fields:t,...r!==void 0?{groupby:r}:{}}}}class vd extends mt{filter;clone(){return new vd(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n,i){const{config:r,markDef:a}=n,{marks:s,scales:o}=i;if(s==="include-invalid-values"&&o==="include-invalid-values")return null;const l=n.reduceFieldDef((f,d,h)=>{const p=ls(h)&&n.getScaleComponent(h);if(p){const y=p.get("type"),{aggregate:v}=d,b=Nk({scaleChannel:h,markDef:a,config:r,scaleType:y,isCountAggregate:lx(v)});b!=="show"&&b!=="always-valid"&&(f[d.field]=d)}return f},{});return ue(l).length?new vd(t,l):null}dependentFields(){return new Set(ue(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Qe(this.filter)}`}assemble(){const t=ue(this.filter).reduce((n,i)=>{const r=this.filter[i],a=pe(r,{expr:"datum"});return r!==null&&(r.type==="temporal"?n.push(`(isDate(${a}) || (${HC(a)}))`):r.type==="quantitative"&&n.push(HC(a))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}function HC(e){return`isValid(${e}) && isFinite(+${e})`}function F_e(e){return e.stack.stackBy.reduce((t,n)=>{const i=n.fieldDef,r=pe(i);return r&&t.push(r),t},[])}function L_e(e){return re(e)&&e.every(t=>Ee(t))&&e.length>1}class Vs extends mt{_stack;clone(){return new Vs(null,Fe(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:i,groupby:r,as:a,offset:s="zero"}=n,o=[],l=[];if(n.sort!==void 0)for(const h of n.sort)o.push(h.field),l.push(Vt(h.order,"ascending"));const f={field:o,order:l};let d;return L_e(a)?d=a:Ee(a)?d=[a,`${a}_end`]:d=[`${n.stack}_start`,`${n.stack}_end`],new Vs(t,{dimensionFieldDefs:[],stackField:i,groupby:r,offset:s,sort:f,facetby:[],as:d})}static makeFromEncoding(t,n){const i=n.stack,{encoding:r}=n;if(!i)return null;const{groupbyChannels:a,fieldChannel:s,offset:o,impute:l}=i,f=a.map(y=>{const v=r[y];return la(v)}).filter(y=>!!y),d=F_e(n),h=n.encoding.order;let p;if(re(h)||de(h))p=OH(h);else{const y=SG(h)?h.sort:s==="y"?"descending":"ascending";p=d.reduce((v,b)=>(v.field.includes(b)||(v.field.push(b),v.order.push(y)),v),{field:[],order:[]})}return new Vs(t,{dimensionFieldDefs:f,stackField:n.vgField(s),facetby:[],stackby:d,sort:p,offset:o,impute:l,as:[n.vgField(s,{suffix:"start",forAs:!0}),n.vgField(s,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Qe(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:i}=this._stack;return t.length>0?t.map(r=>r.bin?n?[pe(r,{binSuffix:"mid"})]:[pe(r,{}),pe(r,{binSuffix:"end"})]:[pe(r)]).flat():i??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:i,stackField:r,stackby:a,sort:s,offset:o,impute:l,as:f}=this._stack;if(l)for(const d of i){const{bandPosition:h=.5,bin:p}=d;if(p){const y=pe(d,{expr:"datum"}),v=pe(d,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${HC(y)} ? ${h}*${y}+${1-h}*${v} : ${y}`,as:pe(d,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:r,groupby:[...a,...n],key:pe(d,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:r,sort:s,as:f,offset:o}),t}}class Id extends mt{transform;clone(){return new Id(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??pe(t)}hash(){return`WindowTransform ${Qe(this.transform)}`}assemble(){const t=[],n=[],i=[],r=[];for(const h of this.transform.window)n.push(h.op),i.push(this.getDefaultName(h)),r.push(h.param===void 0?null:h.param),t.push(h.field===void 0?null:h.field);const a=this.transform.frame,s=this.transform.groupby;if(a&&a[0]===null&&a[1]===null&&n.every(h=>hk(h)))return{type:"joinaggregate",as:i,ops:n,fields:t,...s!==void 0?{groupby:s}:{}};const o=[],l=[];if(this.transform.sort!==void 0)for(const h of this.transform.sort)o.push(h.field),l.push(h.order??"ascending");const f={field:o,order:l},d=this.transform.ignorePeers;return{type:"window",params:r,as:i,ops:n,fields:t,sort:f,...d!==void 0?{ignorePeers:d}:{},...s!==void 0?{groupby:s}:{},...a!==void 0?{frame:a}:{}}}}function B_e(e){function t(n){if(!(n instanceof Pd)){const i=n.clone();if(i instanceof Ri){const r=YC+i.getSource();i.setSource(r),e.model.component.data.outputNodes[r]=i}else(i instanceof ia||i instanceof Vs||i instanceof Id||i instanceof bc)&&i.addDimensions(e.fields);for(const r of n.children.flatMap(t))r.parent=i;return[i]}return n.children.flatMap(t)}return t}function GC(e){if(e instanceof Pd)if(e.numChildren()===1&&!(e.children[0]instanceof Ri)){const t=e.children[0];(t instanceof ia||t instanceof Vs||t instanceof Id||t instanceof bc)&&t.addDimensions(e.fields),t.swapWithParent(),GC(e)}else{const t=e.model.component.data.main;fX(t);const n=B_e(e),i=e.children.map(n).flat();for(const r of i)r.parent=t}else e.children.map(GC)}function fX(e){if(e instanceof Ri&&e.type===Ft.Main&&e.numChildren()===1){const t=e.children[0];t instanceof Pd||(t.swapWithParent(),fX(e))}}const YC="scale_",v1=5;function XC(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!XC(t.children))return!1}return!0}function jr(e,t){let n=!1;for(const i of t)n=e.optimize(i)||n;return n}function c9(e,t,n){let i=e.sources,r=!1;return r=jr(new T_e,i)||r,r=jr(new C_e(t),i)||r,i=i.filter(a=>a.numChildren()>0),r=jr(new O_e,i)||r,i=i.filter(a=>a.numChildren()>0),n||(r=jr(new M_e,i)||r,r=jr(new N_e(t),i)||r,r=jr(new $_e,i)||r,r=jr(new k_e,i)||r,r=jr(new D_e,i)||r,r=jr(new R_e,i)||r,r=jr(new A_e,i)||r,r=jr(new z_e,i)||r),e.sources=i,r}function U_e(e,t){XC(e.sources);let n=0,i=0;for(let r=0;r<v1&&c9(e,t,!0);r++)n++;e.sources.map(GC);for(let r=0;r<v1&&c9(e,t,!1);r++)i++;XC(e.sources),Math.max(n,i)===v1&&fe(`Maximum optimization runs(${v1}) reached.`)}class vn{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}signal;static fromName(t,n){return new vn(()=>t(n))}}function dX(e){zt(e)?q_e(e):P_e(e)}function q_e(e){const t=e.component.scales;for(const n of ue(t)){const i=j_e(e,n);if(t[n].setWithExplicit("domains",i),G_e(e,n),e.component.data.isFaceted){let a=e;for(;!sr(a)&&a.parent;)a=a.parent;if(a.component.resolve.scale[n]==="shared")for(const o of i.value)qs(o)&&(o.data=YC+o.data.replace(YC,""))}}}function P_e(e){for(const n of e.children)dX(n);const t=e.component.scales;for(const n of ue(t)){let i,r=null;for(const a of e.children){const s=a.component.scales[n];if(s){i===void 0?i=s.getWithExplicit("domains"):i=Su(i,s.getWithExplicit("domains"),"domains","scale",VC);const o=s.get("selectionExtent");r&&o&&r.param!==o.param&&fe(Nve),r=o}}t[n].setWithExplicit("domains",i),r&&t[n].set("selectionExtent",r,!0)}}function I_e(e,t,n,i){if(e==="unaggregated"){const{valid:r,reason:a}=f9(t,n);if(!r){fe(a);return}}else if(e===void 0&&i.useUnaggregatedDomain){const{valid:r}=f9(t,n);if(r)return"unaggregated"}return e}function j_e(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:i}=e,r=I_e(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return r!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:r}),t==="x"&&ln(i.x2)?ln(i.x)?Su(Bo(n,r,e,"x"),Bo(n,r,e,"x2"),"domain","scale",VC):Bo(n,r,e,"x2"):t==="y"&&ln(i.y2)?ln(i.y)?Su(Bo(n,r,e,"y"),Bo(n,r,e,"y2"),"domain","scale",VC):Bo(n,r,e,"y2"):Bo(n,r,e,t)}function H_e(e,t,n){return e.map(i=>({signal:`{data: ${Ex(i,{timeUnit:n,type:t})}}`}))}function Sw(e,t,n){const i=wn(n)?.unit;return t==="temporal"||i?H_e(e,t,i):[e]}function Bo(e,t,n,i){const{encoding:r,markDef:a,mark:s,config:o,stack:l}=n,f=ln(r[i]),{type:d}=f,h=f.timeUnit,p=LSe({invalid:Wa("invalid",a,o),isPath:Fu(s)});if(sxe(t)){const b=Bo(e,void 0,n,i),S=Sw(t.unionWith,d,h);return ka([...S,...b.value])}else{if(Ce(t))return ka([t]);if(t&&t!=="unaggregated"&&!rG(t))return ka(Sw(t,d,h))}if(l&&i===l.fieldChannel){if(l.offset==="normalize")return Qi([[0,1]]);const b=n.requestDataName(p);return Qi([{data:b,field:n.vgField(i,{suffix:"start"})},{data:b,field:n.vgField(i,{suffix:"end"})}])}const y=ls(i)&&de(f)?Y_e(n,i,e):void 0;if(cs(f)){const b=Sw([f.datum],d,h);return Qi(b)}const v=f;if(t==="unaggregated"){const{field:b}=f;return Qi([{data:n.requestDataName(p),field:pe({field:b,aggregate:"min"})},{data:n.requestDataName(p),field:pe({field:b,aggregate:"max"})}])}else if(Ct(v.bin)){if(An(e))return Qi(e==="bin-ordinal"?[]:[{data:Ep(y)?n.requestDataName(p):n.requestDataName(Ft.Raw),field:n.vgField(i,b0(v,i)?{binSuffix:"range"}:{}),sort:y===!0||!xe(y)?{field:n.vgField(i,{}),op:"min"}:y}]);{const{bin:b}=v;if(Ct(b)){const S=fO(n,v.field,b);return Qi([new vn(()=>{const _=n.getSignalName(S);return`[${_}.start, ${_}.stop]`})])}else return Qi([{data:n.requestDataName(p),field:n.vgField(i,{})}])}}else if(v.timeUnit&&Xe(["time","utc"],e)){const b=r[us(i)];if(xG(v,b,a,o)){const S=n.requestDataName(p),_=xu({fieldDef:v,fieldDef2:b,markDef:a,config:o}),w=wp(s)&&_!==.5&&Wt(i);return Qi([{data:S,field:n.vgField(i,w?{suffix:Tx}:{})},{data:S,field:n.vgField(i,{suffix:w?Mx:"end"})}])}}return Qi(y?[{data:Ep(y)?n.requestDataName(p):n.requestDataName(Ft.Raw),field:n.vgField(i),sort:y}]:[{data:n.requestDataName(p),field:n.vgField(i)}])}function Ew(e,t){const{op:n,field:i,order:r}=e;return{op:n??(t?"sum":vx),...i?{field:zr(i)}:{},...r?{order:r}:{}}}function G_e(e,t){const n=e.component.scales[t],i=e.specifiedScales[t].domain,r=e.fieldDef(t)?.bin,a=rG(i)?i:void 0,s=hc(r)&&cx(r.extent)?r.extent:void 0;(a||s)&&n.set("selectionExtent",a??s,!0)}function Y_e(e,t,n){if(!An(n))return;const i=e.fieldDef(t),r=i.sort;if(vG(r))return{op:"min",field:md(i,t),order:"ascending"};const{stack:a}=e,s=a?new Set([...a.groupbyFields,...a.stackBy.map(o=>o.fieldDef.field)]):void 0;if(Ys(r)){const o=a&&!s.has(r.field);return Ew(r,o)}else if(Lxe(r)){const{encoding:o,order:l}=r,f=e.fieldDef(o),{aggregate:d,field:h}=f,p=a&&!s.has(h);if(Ks(d)||zu(d))return Ew({field:pe(f),order:l},p);if(hk(d)||!d)return Ew({op:d,field:h,order:l},p)}else{if(r==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Xe(["ascending",void 0],r))return!0}}function f9(e,t){const{aggregate:n,type:i}=e;return n?Ee(n)&&!mve.has(n)?{valid:!1,reason:lbe(n)}:i==="quantitative"&&t==="log"?{valid:!1,reason:cbe(e)}:{valid:!0}:{valid:!1,reason:ube(e)}}function VC(e,t,n,i){return e.explicit&&t.explicit&&fe(pbe(n,i,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function X_e(e){const t=za(e.map(s=>{if(qs(s)){const{sort:o,...l}=s;return l}return s}),Qe),n=za(e.map(s=>{if(qs(s)){const o=s.sort;return o!==void 0&&!Ep(o)&&("op"in o&&o.op==="count"&&delete o.field,o.order==="ascending"&&delete o.order),o}}).filter(s=>s!==void 0),Qe);if(t.length===0)return;if(t.length===1){const s=e[0];if(qs(s)&&n.length>0){let o=n[0];if(n.length>1){fe(SF);const l=n.filter(f=>xe(f)&&"op"in f&&f.op!=="min");n.every(f=>xe(f)&&"op"in f)&&l.length===1?o=l[0]:o=!0}else if(xe(o)&&"field"in o){const l=o.field;s.field===l&&(o=o.order?{order:o.order}:!0)}return{...s,sort:o}}return s}const i=za(n.map(s=>Ep(s)||!("op"in s)||Ee(s.op)&&Se(dve,s.op)?s:(fe(ybe(s)),!0)),Qe);let r;i.length===1?r=i[0]:i.length>1&&(fe(SF),r=!0);const a=za(e.map(s=>qs(s)?s.data:null),s=>s);return a.length===1&&a[0]!==null?{data:a[0],fields:t.map(o=>o.field),...r?{sort:r}:{}}:{fields:t,...r?{sort:r}:{}}}function pO(e){if(qs(e)&&Ee(e.field))return e.field;if(yve(e)){let t;for(const n of e.fields)if(qs(n)&&Ee(n.field)){if(!t)t=n.field;else if(t!==n.field)return fe(vbe),t}return fe(bbe),t}else if(vve(e)){fe(xbe);const t=e.fields[0];return Ee(t)?t:void 0}}function Nx(e,t){const i=e.component.scales[t].get("domains").map(r=>(qs(r)&&(r.data=e.lookupDataSource(r.data)),r));return X_e(i)}function hX(e){return jd(e)||mO(e)?e.children.reduce((t,n)=>t.concat(hX(n)),d9(e)):d9(e)}function d9(e){return ue(e.component.scales).reduce((t,n)=>{const i=e.component.scales[n];if(i.merged)return t;const r=i.combine(),{name:a,type:s,selectionExtent:o,domains:l,range:f,reverse:d,...h}=r,p=V_e(r.range,a,n,e),y=Nx(e,n),v=o?VSe(e,o,i,y):null;return t.push({name:a,type:s,...y?{domain:y}:{},...v?{domainRaw:v}:{},range:p,...d!==void 0?{reverse:d}:{},...h}),t},[])}function V_e(e,t,n,i){if(Wt(n)){if(gc(e))return{step:{signal:`${t}_step`}}}else if(xe(e)&&qs(e))return{...e,data:i.lookupDataSource(e.data)};return e}class gX extends lo{merged=!1;constructor(t,n){super({},{name:t}),this.setWithExplicit("type",n)}domainHasZero(){const t=this.get("type");if(Xe([Dn.LOG,Dn.TIME,Dn.UTC],t))return"definitely-not";const n=this.get("zero");if(n===!0||n===void 0&&Xe([Dn.LINEAR,Dn.SQRT,Dn.POW],t))return"definitely";const i=this.get("domains");if(i.length>0){let r=!1,a=!1,s=!1;for(const o of i){if(re(o)){const l=o[0],f=o[o.length-1];if(at(l)&&at(f))if(l<=0&&f>=0){r=!0;continue}else{a=!0;continue}}s=!0}if(r)return"definitely";if(a&&!s)return"definitely-not"}return"maybe"}}const W_e=["range","scheme"];function Q_e(e){const t=e.component.scales;for(const n of dk){const i=t[n];if(!i)continue;const r=Z_e(n,e);i.setWithExplicit("range",r)}}function h9(e,t){const n=e.fieldDef(t);if(n?.bin){const{bin:i,field:r}=n,a=Bi(t),s=e.getName(a);if(xe(i)&&i.binned&&i.step!==void 0)return new vn(()=>{const o=e.scaleName(t),l=`(domain("${o}")[1] - domain("${o}")[0]) / ${i.step}`;return`${e.getSignalName(s)} / (${l})`});if(Ct(i)){const o=fO(e,r,i);return new vn(()=>{const l=e.getSignalName(o),f=`(${l}.stop - ${l}.start) / ${l}.step`;return`${e.getSignalName(s)} / (${f})`})}}}function Z_e(e,t){const n=t.specifiedScales[e],{size:i}=t,a=t.getScaleComponent(e).get("type");for(const h of W_e)if(n[h]!==void 0){const p=TC(a,h),y=aG(e,h);if(!p)fe(BH(a,h,e));else if(y)fe(y);else switch(h){case"range":{const v=n.range;if(re(v)){if(Wt(e))return ka(v.map(b=>{if(b==="width"||b==="height"){const S=t.getName(b),_=t.getSignalName.bind(t);return vn.fromName(_,S)}return b}))}else if(xe(v))return ka({data:t.requestDataName(Ft.Main),field:v.field,sort:{op:"min",field:t.vgField(e)}});return ka(v)}case"scheme":return ka(K_e(n[h]))}}const s=e===Rt||e==="xOffset"?"width":"height",o=i[s];if(Za(o)){if(Wt(e))if(An(a)){const h=mX(o,t,e);if(h)return ka({step:h})}else fe(UH(s));else if(d0(e)){const h=e===Mu?"x":"y";if(t.getScaleComponent(h).get("type")==="band"){const v=yX(o,a);if(v)return ka(v)}}}const{rangeMin:l,rangeMax:f}=n,d=J_e(e,t);return(l!==void 0||f!==void 0)&&TC(a,"rangeMin")&&re(d)&&d.length===2?ka([l??d[0],f??d[1]]):Qi(d)}function K_e(e){return axe(e)?{scheme:e.name,...ar(e,["name"])}:{scheme:e}}function pX(e,t,n,{center:i}={}){const r=Bi(e),a=t.getName(r),s=t.getSignalName.bind(t);return e===$n&&oa(n)?i?[vn.fromName(o=>`${s(o)}/2`,a),vn.fromName(o=>`-${s(o)}/2`,a)]:[vn.fromName(s,a),0]:i?[vn.fromName(o=>`-${s(o)}/2`,a),vn.fromName(o=>`${s(o)}/2`,a)]:[0,vn.fromName(s,a)]}function J_e(e,t){const{size:n,config:i,mark:r,encoding:a}=t,{type:s}=ln(a[e]),l=t.getScaleComponent(e).get("type"),{domain:f,domainMid:d}=t.specifiedScales[e];switch(e){case Rt:case $n:{if(Xe(["point","band"],l)){const h=vX(e,n,i.view);if(Za(h))return{step:mX(h,t,e)}}return pX(e,t,l)}case Mu:case Ld:return ewe(e,t,l);case ao:{const h=iwe(r,i),p=rwe(r,n,t,i);return ld(l)?nwe(h,p,twe(l,i,f,e)):[h,p]}case Br:return[0,Math.PI*2];case fc:return[0,360];case ya:return[0,new vn(()=>{const h=t.getSignalName(sr(t.parent)?"child_width":"width"),p=t.getSignalName(sr(t.parent)?"child_height":"height");return`min(${h},${p})/2`})];case ku:return{step:1e3/i.scale.framesPerSecond};case Du:return[i.scale.minStrokeWidth,i.scale.maxStrokeWidth];case Nu:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case Li:return"symbol";case Fi:case ss:case os:return l==="ordinal"?s==="nominal"?"category":"ordinal":d!==void 0?"diverging":r==="rect"||r==="geoshape"?"heatmap":"ramp";case so:case Ou:case Ru:return[i.scale.minOpacity,i.scale.maxOpacity]}}function mX(e,t,n){const{encoding:i}=t,r=t.getScaleComponent(n),a=uk(n),s=i[a];if(KG({step:e,offsetIsDiscrete:Be(s)&&JH(s.type)})==="offset"&&RG(i,a)){const l=t.getScaleComponent(a);let d=`domain('${t.scaleName(a)}').length`;if(l.get("type")==="band"){const p=l.get("paddingInner")??l.get("padding")??0,y=l.get("paddingOuter")??l.get("padding")??0;d=`bandspace(${d}, ${p}, ${y})`}const h=r.get("paddingInner")??r.get("padding");return{signal:`${e.step} * ${d} / (1-${_ve(h)})`}}else return e.step}function yX(e,t){if(KG({step:e,offsetIsDiscrete:An(t)})==="offset")return{step:e.step}}function ewe(e,t,n){const i=e===Mu?"x":"y",r=t.getScaleComponent(i);if(!r)return pX(i,t,n,{center:!0});const a=r.get("type"),s=t.scaleName(i),{markDef:o,config:l}=t;if(a==="band"){const f=vX(i,t.size,t.config.view);if(Za(f)){const d=yX(f,n);if(d)return d}return[0,{signal:`bandwidth('${s}')`}]}else{const f=t.encoding[i];if(de(f)&&f.timeUnit){const d=WH(f.timeUnit,v=>`scale('${s}', ${v})`),h=t.config.scale.bandWithNestedOffsetPaddingInner,p=xu({fieldDef:f,markDef:o,config:l})-.5,y=p!==0?` + ${p}`:"";if(h){const v=Ce(h)?`${h.signal}/2${y}`:`${h/2+p}`,b=Ce(h)?`(1 - ${h.signal}/2)${y}`:`${1-h/2+p}`;return[{signal:`${v} * (${d})`},{signal:`${b} * (${d})`}]}return[0,{signal:d}]}return sH(`Cannot use ${e} scale if ${i} scale is not discrete.`)}}function vX(e,t,n){const i=e===Rt?"width":"height",r=t[i];return r||$v(n,i)}function twe(e,t,n,i){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&re(n)?n.length+1:(fe(Mbe(i)),3)}}function nwe(e,t,n){const i=()=>{const r=ea(t),a=ea(e),s=`(${r} - ${a}) / (${n} - 1)`;return`sequence(${a}, ${r} + ${s}, ${s})`};return Ce(t)?new vn(i):{signal:i()}}function iwe(e,t){switch(e){case"bar":case"tick":return t.scale.minBandSize;case"line":case"trail":case"rule":return t.scale.minStrokeWidth;case"text":return t.scale.minFontSize;case"point":case"square":case"circle":return t.scale.minSize}throw new Error(fx("size",e))}const g9=.95;function rwe(e,t,n,i){const r={x:h9(n,"x"),y:h9(n,"y")};switch(e){case"bar":case"tick":{if(i.scale.maxBandSize!==void 0)return i.scale.maxBandSize;const a=p9(t,r,i.view);return at(a)?a-1:new vn(()=>`${a.signal} - 1`)}case"line":case"trail":case"rule":return i.scale.maxStrokeWidth;case"text":return i.scale.maxFontSize;case"point":case"square":case"circle":{if(i.scale.maxSize)return i.scale.maxSize;const a=p9(t,r,i.view);return at(a)?Math.pow(g9*a,2):new vn(()=>`pow(${g9} * ${a.signal}, 2)`)}}throw new Error(fx("size",e))}function p9(e,t,n){const i=Za(e.width)?e.width.step:RC(n,"width"),r=Za(e.height)?e.height.step:RC(n,"height");return t.x||t.y?new vn(()=>`min(${[t.x?t.x.signal:i,t.y?t.y.signal:r].join(", ")})`):Math.min(i,r)}function bX(e,t){zt(e)?awe(e,t):SX(e,t)}function awe(e,t){const n=e.component.scales,{config:i,encoding:r,markDef:a,specifiedScales:s}=e;for(const o of ue(n)){const l=s[o],f=n[o],d=e.getScaleComponent(o),h=ln(r[o]),p=l[t],y=d.get("type"),v=d.get("padding"),b=d.get("paddingInner"),S=TC(y,t),_=aG(o,t);if(p!==void 0&&(S?_&&fe(_):fe(BH(y,t,o))),S&&_===void 0)if(p!==void 0){const w=h.timeUnit,A=h.type;switch(t){case"domainMax":case"domainMin":pc(l[t])||A==="temporal"||w?f.set(t,{signal:Ex(l[t],{type:A,timeUnit:w})},!0):f.set(t,l[t],!0);break;default:f.copyKeyFromObject(t,l)}}else{const w=le(m9,t)?m9[t]({model:e,channel:o,fieldOrDatumDef:h,scaleType:y,scalePadding:v,scalePaddingInner:b,domain:l.domain,domainMin:l.domainMin,domainMax:l.domainMax,markDef:a,config:i,hasNestedOffsetScale:DG(r,o),hasSecondaryRangeChannel:!!r[us(o)]}):i.scale[t];w!==void 0&&f.set(t,w,!1)}}}const m9={bins:({model:e,fieldOrDatumDef:t})=>de(t)?swe(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>owe(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:i,domainMax:r,fieldOrDatumDef:a})=>uwe(e,t,n,i,r,a),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:i,config:r})=>lwe(e,t,r.scale,n,i,r.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:i,config:r,hasNestedOffsetScale:a})=>cwe(e,t,n.type,i,r.scale,a),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:i,config:r,hasNestedOffsetScale:a})=>fwe(e,t,n,i,r.scale,a),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:i})=>{const r=de(e)?e.sort:void 0;return dwe(t,r,n,i.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:i,scaleType:r,config:a,hasSecondaryRangeChannel:s})=>hwe(e,t,n,i,r,a.scale,s)};function xX(e){zt(e)?Q_e(e):SX(e,"range")}function SX(e,t){const n=e.component.scales;for(const i of e.children)t==="range"?xX(i):bX(i,t);for(const i of ue(n)){let r;for(const a of e.children){const s=a.component.scales[i];if(s){const o=s.getWithExplicit(t);r=Su(r,o,t,"scale",fY((l,f)=>{switch(t){case"range":return l.step&&f.step?l.step-f.step:0}return 0}))}}n[i].setWithExplicit(t,r)}}function swe(e,t){const n=t.bin;if(Ct(n)){const i=fO(e,t.field,n);return new vn(()=>e.getSignalName(i))}else if(On(n)&&hc(n)&&n.step!==void 0)return{step:n.step}}function owe(e,t){if(Xe([Fi,ss,os],e)&&t!=="nominal")return"hcl"}function uwe(e,t,n,i,r,a){if(!(la(a)?.bin||re(n)||r!=null||i!=null||Xe([Dn.TIME,Dn.UTC],e)))return Wt(t)?!0:void 0}function lwe(e,t,n,i,r,a){if(Wt(e)){if(Fa(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:s,orient:o}=r;if(s==="bar"&&!(de(i)&&(i.bin||i.timeUnit))&&(o==="vertical"&&e==="x"||o==="horizontal"&&e==="y"))return a.continuousBandSize}if(t===Dn.POINT)return n.pointPadding}}function cwe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingInner:s,barBandPaddingInner:o,rectBandPaddingInner:l,tickBandPaddingInner:f,bandWithNestedOffsetPaddingInner:d}=r;return a?d:Vt(s,n==="bar"?o:n==="tick"?f:l)}else if(d0(t)&&i===Dn.BAND)return r.offsetBandPaddingInner}}function fwe(e,t,n,i,r,a=!1){if(e===void 0){if(Wt(t)){const{bandPaddingOuter:s,bandWithNestedOffsetPaddingOuter:o}=r;if(a)return o;if(n===Dn.BAND)return Vt(s,Ce(i)?{signal:`${i.signal}/2`}:i/2)}else if(d0(t)){if(n===Dn.POINT)return .5;if(n===Dn.BAND)return r.offsetBandPaddingOuter}}}function dwe(e,t,n,i){if(n==="x"&&i.xReverse!==void 0)return oa(e)&&t==="descending"?Ce(i.xReverse)?{signal:`!${i.xReverse.signal}`}:!i.xReverse:i.xReverse;if(oa(e)&&t==="descending")return!0}function hwe(e,t,n,i,r,a,s){if(!!n&&n!=="unaggregated"&&oa(r)){if(re(n)){const l=n[0],f=n[n.length-1];if(at(l)&&l<=0&&at(f)&&f>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!ld(r))return!0;if(!(de(t)&&t.bin)&&Xe([...oo,...ive],e)){const{orient:l,type:f}=i;return Xe(["bar","area","line","trail"],f)&&(l==="horizontal"&&e==="y"||l==="vertical"&&e==="x")?!1:Xe(["bar","area"],f)&&!s?!0:a?.zero}return!1}function gwe(e,t,n,i,r=!1){const a=pwe(t,n,i,r),{type:s}=e;return ls(t)?s!==void 0?dxe(t,s)?de(n)&&!fxe(s,n.type)?(fe(hbe(s,a)),a):s:(fe(dbe(t,s,a)),a):a:null}function pwe(e,t,n,i){switch(t.type){case"nominal":case"ordinal":{if(Nf(e)||cw(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&fe(fw(e,"ordinal")),"ordinal";if(lw(e))return"band";if(Wt(e)||d0(e)){if(Xe(["rect","bar","image","rule","tick"],n.type)||i)return"band"}else if(n.type==="arc"&&e in fk)return"band";const r=n[Bi(e)];return Ql(r)||fd(t)&&t.axis?.tickBand?"band":"point"}case"temporal":return Nf(e)?"time":cw(e)==="discrete"?(fe(fw(e,"temporal")),"ordinal"):de(t)&&t.timeUnit&&wn(t.timeUnit).utc?"utc":lw(e)?"band":"time";case"quantitative":return Nf(e)?de(t)&&Ct(t.bin)?"bin-ordinal":"linear":cw(e)==="discrete"?(fe(fw(e,"quantitative")),"ordinal"):lw(e)?"band":"linear";case"geojson":return}throw new Error(FH(t.type))}function mwe(e,{ignoreRange:t}={}){EX(e),dX(e);for(const n of cxe)bX(e,n);t||xX(e)}function EX(e){zt(e)?e.component.scales=ywe(e):e.component.scales=bwe(e)}function ywe(e){const{encoding:t,mark:n,markDef:i}=e,r={};for(const a of dk){const s=ln(t[a]);if(s&&n===uG&&a===Li&&s.type===Bd)continue;let o=s&&s.scale;if(s&&o!==null&&o!==!1){o??={};const l=DG(t,a),f=gwe(o,a,s,i,l);r[a]=new gX(e.scaleName(`${a}`,!0),{value:f,explicit:o.type===f})}}return r}const vwe=fY((e,t)=>_F(e)-_F(t));function bwe(e){const t=e.component.scales={},n={},i=e.component.resolve;for(const r of e.children){EX(r);for(const a of ue(r.component.scales))if(i.scale[a]??=JY(a,e),i.scale[a]==="shared"){const s=n[a],o=r.component.scales[a].getWithExplicit("type");s?exe(s.value,o.value)?n[a]=Su(s,o,"type","scale",vwe):(i.scale[a]="independent",delete n[a]):n[a]=o}}for(const r of ue(n)){const a=e.scaleName(r,!0),s=n[r];t[r]=new gX(a,s);for(const o of e.children){const l=o.component.scales[r];l&&(o.renameScale(l.get("name"),a),l.merged=!0)}}return t}class _w{nameMap;constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function zt(e){return e?.type==="unit"}function sr(e){return e?.type==="facet"}function mO(e){return e?.type==="concat"}function jd(e){return e?.type==="layer"}class yO{type;parent;config;name;size;title;description;data;transforms;layout;scaleNameMap;projectionNameMap;signalNameMap;component;view;constructor(t,n,i,r,a,s,o){this.type=n,this.parent=i,this.config=a,this.parent=i,this.config=a,this.view=Rn(o),this.name=t.name??r,this.title=jo(t.title)?{text:t.title}:t.title?Rn(t.title):void 0,this.scaleNameMap=i?i.scaleNameMap:new _w,this.projectionNameMap=i?i.projectionNameMap:new _w,this.signalNameMap=i?i.signalNameMap:new _w,this.data=t.data,this.description=t.description,this.transforms=ASe(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:M2e(t,n,a),this.component={data:{sources:i?i.component.data.sources:[],outputNodes:i?i.component.data.outputNodes:{},outputNodeRefCounts:i?i.component.data.outputNodeRefCounts:{},isFaceted:bx(t)||i?.component.data.isFaceted&&t.data===void 0},layoutSize:new lo,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...s?Fe(s):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){mwe(this)}parseProjection(){lX(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){rX(this)}assembleEncodeFromView(t){const{style:n,...i}=t,r={};for(const a of ue(i)){const s=i[a];s!==void 0&&(r[a]=Tt(s))}return r}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=Tt(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:wt(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:i,config:r}=this,a=qEe(i.layoutHeaders,r);return{padding:t,...this.assembleDefaultLayout(),...n,...a?{titleBand:a}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const i of $r)t[i].title&&n.push(NEe(this,i));for(const i of oO)n=n.concat(zEe(this,i));return n}assembleAxes(){return SEe(this.component.axes,this.config)}assembleLegends(){return sX(this)}assembleProjections(){return l_e(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},i={...$H(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(i.text)return Xe(["unit","layer"],this.type)?Xe(["middle",void 0],i.anchor)&&(i.frame??="group"):i.anchor??="start",wt(i)?void 0:i}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const i=this.assembleLayout();i&&(n.layout=i),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const r=!this.parent||sr(this.parent)?hX(this):[];r.length>0&&(n.scales=r);const a=this.assembleAxes();a.length>0&&(n.axes=a);const s=this.assembleLegends();return s.length>0&&(n.legends=s),n}getName(t){return Ot((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Ft[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),i=this.component.data.outputNodeRefCounts;return i[n]=(i[n]||0)+1,n}getSizeSignalRef(t){if(sr(this.parent)){const n=ZY(t),i=ux(n),r=this.component.scales[i];if(r&&!r.merged){const a=r.get("type"),s=r.get("range");if(An(a)&&gc(s)){const o=r.get("name"),l=Nx(this,i),f=pO(l);if(f){const d=pe({aggregate:"distinct",field:f},{expr:"datum"});return{signal:QY(o,r,d)}}else return fe(pk(i)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(bH(t)&&ls(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getScaleType(t){const n=this.getScaleComponent(t);return n?n.get("type"):void 0}getSelectionComponent(t,n){let i=this.component.selection[t];if(!i&&this.parent&&(i=this.parent.getSelectionComponent(t,n)),!i)throw new Error(Tve(n));return i}hasAxisOrientSignalRef(){return this.component.axes.x?.some(t=>t.hasOrientSignalRef())||this.component.axes.y?.some(t=>t.hasOrientSignalRef())}}class _X extends yO{vgField(t,n={}){const i=this.fieldDef(t);if(i)return pe(i,n)}reduceFieldDef(t,n){return r2e(this.getMapping(),(i,r,a)=>{const s=la(r);return s?t(i,s,a):i},n)}forEachFieldDef(t,n){jk(this.getMapping(),(i,r)=>{const a=la(i);a&&t(a,r)},n)}}class zx extends mt{transform;clone(){return new zx(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"value",i[1]??"density"];const r=this.transform.resolve??"shared";this.transform.resolve=r}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Qe(this.transform)}`}assemble(){const{density:t,...n}=this.transform,i={type:"kde",field:t,...n};return i.resolve=this.transform.resolve,i}}class Fx extends mt{transform;clone(){return new Fx(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Qe(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class Lx extends mt{transform;clone(){return new Lx(this.parent,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const{flatten:i,as:r=[]}=this.transform;this.transform.as=i.map((a,s)=>r[s]??a)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Qe(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class Bx extends mt{transform;clone(){return new Bx(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"key",i[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Qe(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class Lf extends mt{fields;geojson;signal;clone(){return new Lf(null,Fe(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let i=0;for(const r of[[ba,va],[Fr,xa]]){const a=r.map(s=>{const o=ln(n.encoding[s]);return de(o)?o.field:cs(o)?{expr:`${o.datum}`}:ua(o)?{expr:`${o.value}`}:void 0});(a[0]||a[1])&&(t=new Lf(t,a,null,n.getName(`geojson_${i++}`)))}if(n.channelHasField(Li)){const r=n.typedFieldDef(Li);r.type===Bd&&(t=new Lf(t,null,r.field,n.getName(`geojson_${i++}`)))}return t}constructor(t,n,i,r){super(t),this.fields=n,this.geojson=i,this.signal=r}dependentFields(){const t=(this.fields??[]).filter(Ee);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Qe(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class Cp extends mt{projection;fields;as;clone(){return new Cp(null,this.projection,Fe(this.fields),Fe(this.as))}constructor(t,n,i,r){super(t),this.projection=n,this.fields=i,this.as=r}static parseAll(t,n){if(!n.projectionName())return t;for(const i of[[ba,va],[Fr,xa]]){const r=i.map(s=>{const o=ln(n.encoding[s]);return de(o)?o.field:cs(o)?{expr:`${o.datum}`}:ua(o)?{expr:`${o.value}`}:void 0}),a=i[0]===Fr?"2":"";(r[0]||r[1])&&(t=new Cp(t,n.projectionName(),r,[n.getName(`x${a}`),n.getName(`y${a}`)]))}return t}dependentFields(){return new Set(this.fields.filter(Ee))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Qe(this.fields)} ${Qe(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Rl extends mt{transform;clone(){return new Rl(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:i,step:r}=t;return{signal:`sequence(${[n,i,...r?[r]:[]].join(",")})`}}static makeFromTransform(t,n){return new Rl(t,n)}static makeFromEncoding(t,n){const i=n.encoding,r=i.x,a=i.y;if(de(r)&&de(a)){const s=r.impute?r:a.impute?a:void 0;if(s===void 0)return;const o=r.impute?a:a.impute?r:void 0,{method:l,value:f,frame:d,keyvals:h}=s.impute,p=FG(n.mark,i);return new Rl(t,{impute:s.field,key:o.field,...l?{method:l}:{},...f!==void 0?{value:f}:{},...d?{frame:d}:{},...h!==void 0?{keyvals:h}:{},...p.length?{groupby:p}:{}})}return null}hash(){return`Impute ${Qe(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:i,method:r,groupby:a,value:s,frame:o=[null,null]}=this.transform,l={type:"impute",field:t,key:n,...i?{keyvals:sSe(i)?this.processSequence(i):i}:{},method:"value",...a?{groupby:a}:{},value:!r||r==="value"?s:null};if(r&&r!=="value"){const f={type:"window",as:[`imputed_${t}_value`],ops:[r],fields:[t],frame:o,ignorePeers:!1,...a?{groupby:a}:{}},d={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[l,f,d]}else return[l]}}class Ux extends mt{transform;clone(){return new Ux(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Qe(this.transform)}`}assemble(){const{loess:t,on:n,...i}=this.transform;return{type:"loess",x:n,y:t,...i}}}class $p extends mt{transform;secondary;clone(){return new $p(null,Fe(this.transform),this.secondary)}constructor(t,n,i){super(t),this.transform=n,this.secondary=i}static make(t,n,i,r){const a=n.component.data.sources,{from:s}=i;let o=null;if(oSe(s)){let l=CX(s.data,a);l||(l=new ec(s.data),a.push(l));const f=n.getName(`lookup_${r}`);o=new Ri(l,f,Ft.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[f]=o}else if(uSe(s)){const l=s.param;i={as:l,...i};let f;try{f=n.getSelectionComponent(Ot(l),l)}catch{throw new Error(Rve(l))}if(o=f.materialized,!o)throw new Error(Dve(l))}return new $p(t,i,o.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?ve(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Qe({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:ve(this.transform.as)}:{}};else{let n=this.transform.as;Ee(n)||(fe(Hve),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class qx extends mt{transform;clone(){return new qx(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??"prob",i[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Qe(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class Px extends mt{transform;clone(){return new Px(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=Fe(n);const i=this.transform.as??[void 0,void 0];this.transform.as=[i[0]??n.on,i[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Qe(this.transform)}`}assemble(){const{regression:t,on:n,...i}=this.transform;return{type:"regression",x:n,y:t,...i}}}class Ix extends mt{transform;clone(){return new Ix(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=za((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Qe(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:i,limit:r,op:a}=this.transform;return{type:"pivot",field:t,value:n,...r!==void 0?{limit:r}:{},...a!==void 0?{op:a}:{},...i!==void 0?{groupby:i}:{}}}}class jx extends mt{transform;clone(){return new jx(null,Fe(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Qe(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function wX(e){let t=0;function n(i,r){if(i instanceof ec&&!i.isGenerator&&!hd(i.data)&&(e.push(r),r={name:null,source:r.name,transform:[]}),i instanceof Qn&&(i.parent instanceof ec&&!r.source?(r.format={...r.format,parse:i.assembleFormatParse()},r.transform.push(...i.assembleTransforms(!0))):r.transform.push(...i.assembleTransforms())),i instanceof Pd){r.name||(r.name=`data_${t++}`),!r.source||r.transform.length>0?(e.push(r),i.data=r.name):i.data=r.source,e.push(...i.assemble());return}switch((i instanceof E0||i instanceof _0||i instanceof vd||i instanceof qd||i instanceof pd||i instanceof Cp||i instanceof ia||i instanceof $p||i instanceof Id||i instanceof bc||i instanceof Bx||i instanceof Lx||i instanceof zx||i instanceof Ux||i instanceof qx||i instanceof Px||i instanceof Eu||i instanceof jx||i instanceof Ix||i instanceof Fx)&&r.transform.push(i.assemble()),(i instanceof Ia||i instanceof qa||i instanceof Rl||i instanceof Vs||i instanceof Lf)&&r.transform.push(...i.assemble()),i instanceof Ri&&(r.source&&r.transform.length===0?i.setSource(r.source):i.parent instanceof Ri?i.setSource(r.name):(r.name||(r.name=`data_${t++}`),i.setSource(r.name),i.numChildren()===1&&(e.push(r),r={name:null,source:r.name,transform:[]}))),i.numChildren()){case 0:i instanceof Ri&&(!r.source||r.transform.length>0)&&e.push(r);break;case 1:n(i.children[0],r);break;default:{r.name||(r.name=`data_${t++}`);let a=r.name;!r.source||r.transform.length>0?e.push(r):a=r.source;for(const s of i.children)n(s,{name:null,source:a,transform:[]});break}}}return n}function xwe(e){const t=[],n=wX(t);for(const i of e.children)n(i,{source:e.name,name:null,transform:[]});return t}function Swe(e,t){const n=[],i=wX(n);let r=0;for(const s of e.sources){s.hasName()||(s.dataName=`source_${r++}`);const o=s.assemble();i(s,o)}for(const s of n)s.transform.length===0&&delete s.transform;let a=0;for(const[s,o]of n.entries())(o.transform??[]).length===0&&!o.source&&n.splice(a++,0,n.splice(s,1)[0]);for(const s of n)for(const o of s.transform??[])o.type==="lookup"&&(o.from=e.outputNodes[o.from].getSource());for(const s of n)s.name in t&&(s.values=t[s.name]);return n}function Ewe(e){return e==="top"||e==="left"||Ce(e)?"header":"footer"}function _we(e){for(const t of $r)wwe(e,t);y9(e,"x"),y9(e,"y")}function wwe(e,t){const{facet:n,config:i,child:r,component:a}=e;if(e.channelHasField(t)){const s=n[t],o=yd("title",null,i,t);let l=zf(s,i,{allowDisabling:!0,includeDefault:o===void 0||!!o});r.component.layoutHeaders[t].title&&(l=re(l)?l.join(", "):l,l+=` / ${r.component.layoutHeaders[t].title}`,r.component.layoutHeaders[t].title=null);const f=yd("labelOrient",s.header,i,t),d=s.header!==null?Vt(s.header?.labels,i.header.labels,!0):!1,h=Xe(["bottom","right"],f)?"footer":"header";a.layoutHeaders[t]={title:s.header!==null?l:null,facetFieldDef:s,[h]:t==="facet"?[]:[AX(e,t,d)]}}}function AX(e,t,n){const i=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(i)?e.child.getSizeSignalRef(i):void 0,axes:[]}}function y9(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:i,resolve:r}=e.component;if(r.axis[t]=cO(r,t),r.axis[t]==="shared"){const a=t==="x"?"column":"row",s=i[a];for(const o of n.component.axes[t]){const l=Ewe(o.get("orient"));s[l]??=[AX(e,a,!1)];const f=zg(o,"main",e.config,{header:!0});f&&s[l][0].axes.push(f),o.mainExtracted=!0}}}}function Awe(e){vO(e),Ov(e,"width"),Ov(e,"height")}function Cwe(e){vO(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";Ov(e,t),Ov(e,n)}function vO(e){for(const t of e.children)t.parseLayoutSize()}function Ov(e,t){const n=ZY(t),i=ux(n),r=e.component.resolve,a=e.component.layoutSize;let s;for(const o of e.children){const l=o.component.layoutSize.getWithExplicit(n),f=r.scale[i]??JY(i,e);if(f==="independent"&&l.value==="step"){s=void 0;break}if(s){if(f==="independent"&&s.value!==l.value){s=void 0;break}s=Su(s,l,n,"")}else s=l}if(s){for(const o of e.children)e.renameSignal(o.getName(n),e.getName(t)),o.component.layoutSize.set(n,"merged",!1);a.setWithExplicit(t,s)}else a.setWithExplicit(t,{explicit:!1,value:void 0})}function $we(e){const{size:t,component:n}=e;for(const i of oo){const r=Bi(i);if(t[r]){const a=t[r];n.layoutSize.set(r,Za(a)?"step":a,!0)}else{const a=Twe(e,r);n.layoutSize.set(r,a,!1)}}}function Twe(e,t){const n=t==="width"?"x":"y",i=e.config,r=e.getScaleComponent(n);if(r){const a=r.get("type"),s=r.get("range");if(An(a)){const o=$v(i.view,t);return gc(s)||Za(o)?"step":o}else return OC(i.view,t)}else{if(e.hasProjection||e.mark==="arc")return OC(i.view,t);{const a=$v(i.view,t);return Za(a)?a.step:a}}}function WC(e,t,n){return pe(t,{suffix:`by_${pe(e)}`,...n})}class Zg extends _X{facet;child;children;constructor(t,n,i,r){super(t,"facet",n,i,r,t.resolve),this.child=_O(t.spec,this,this.getName("child"),void 0,r),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!m0(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=ue(t),i={};for(const r of n){if(![Hs,Gs].includes(r)){fe(fx(r,"facet"));break}const a=t[r];if(a.field===void 0){fe(CC(a,r));break}i[r]=this.initFacetFieldDef(a,r)}return i}initFacetFieldDef(t,n){const i=Ik(t,n);return i.header?i.header=Rn(i.header):i.header===null&&(i.header=null),i}channelHasField(t){return le(this.facet,t)}fieldDef(t){return this.facet[t]}parseData(){this.component.data=Hx(this),this.child.parseData()}parseLayoutSize(){vO(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection,tn(this.component.selection).some(t=>Pa(t))&&yk(mk)}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),_we(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of $r)for(const i of uO){const r=this.component.layoutHeaders[n],a=r[i],{facetFieldDef:s}=r;if(s){const o=yd("titleOrient",s.header,this.config,n);if(["right","bottom"].includes(o)){const l=Rx(n,o);t.titleAnchor??={},t.titleAnchor[l]="end"}}if(a?.[0]){const o=n==="row"?"height":"width",l=i==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(o)&&(t[l]??={},t[l][n]=.5),r.title&&(t.offset??={},t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,i=t?this.columnDistinctSignal():n?1:void 0;let r="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(r="none"),{...this.getHeaderLayoutMixins(),...i?{columns:i}:{},bounds:"full",align:r}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Zg))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof Zg?{...this.channelHasField("column")?{encode:{update:{columns:{field:pe(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],i=[];if(this.child instanceof Zg){if(this.child.channelHasField("column")){const r=pe(this.child.facet.column);t.push(r),n.push("distinct"),i.push(`distinct_${r}`)}}else for(const r of oo){const a=this.child.component.scales[r];if(a&&!a.merged){const s=a.get("type"),o=a.get("range");if(An(s)&&gc(o)){const l=Nx(this.child,r),f=pO(l);f?(t.push(f),n.push("distinct"),i.push(`distinct_${f}`)):fe(pk(r))}}}return{fields:t,ops:n,as:i}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:i,column:r}=this.facet,{fields:a,ops:s,as:o}=this.getCardinalityAggregateForChild(),l=[];for(const d of $r){const h=this.facet[d];if(h){l.push(pe(h));const{bin:p,sort:y}=h;if(Ct(p)&&l.push(pe(h,{binSuffix:"end"})),Ys(y)){const{field:v,op:b=vx}=y,S=WC(h,y);i&&r?(a.push(S),s.push("max"),o.push(S)):(a.push(v),s.push(b),o.push(S))}else if(re(y)){const v=md(h,d);a.push(v),s.push("max"),o.push(v)}}}const f=!!i&&!!r;return{name:t,data:n,groupby:l,...f||a.length>0?{aggregate:{...f?{cross:f}:{},...a.length?{fields:a,ops:s,as:o}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,i=n[t];return i?Ys(i.sort)?[WC(i,i.sort,{expr:"datum"})]:re(i.sort)?[md(i,t,{expr:"datum"})]:[pe(i,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,i=n[t];if(i){const{sort:r}=i;return[(Ys(r)?r.order:!re(r)&&r)||"ascending"]}return[]}assembleLabelTitle(){const{facet:t,config:n}=this;if(t.facet)return IC(t.facet,"facet",n);const i={row:["top","bottom"],column:["left","right"]};for(const r of oO)if(t[r]){const a=yd("labelOrient",t[r]?.header,n,r);if(i[r].includes(a))return IC(t[r],r,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,i=xwe(n),r=t.assembleGroupEncodeEntry(!1),a=this.assembleLabelTitle()||t.assembleTitle(),s=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...a?{title:a}:{},...s?{style:s}:{},from:{facet:this.assembleFacet()},sort:{field:$r.map(l=>this.facetSortFields(l)).flat(),order:$r.map(l=>this.facetSortOrder(l)).flat()},...i.length>0?{data:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup(HSe(this,[]))}]}getMapping(){return this.facet}}function Mwe(e,t){const{row:n,column:i}=t;if(n&&i){let r=null;for(const a of[n,i])if(Ys(a.sort)){const{field:s,op:o=vx}=a.sort;e=r=new bc(e,{joinaggregate:[{op:o,field:s,as:WC(a,a.sort,{forAs:!0})}],groupby:[pe(a)]})}return r}return null}function CX(e,t){for(const n of t){const i=n.data;if(e.name&&n.hasName()&&e.name!==n.dataName)continue;const r=e.format?.mesh,a=i.format?.feature;if(r&&a)continue;const s=e.format?.feature;if((s||a)&&s!==a)continue;const o=i.format?.mesh;if(!((r||o)&&r!==o)){if(Ap(e)&&Ap(i)){if(nr(e.values,i.values))return n}else if(hd(e)&&hd(i)){if(e.url===i.url)return n}else if(dY(e)&&e.name===n.dataName)return n}}return null}function kwe(e,t){if(e.data||!e.parent){if(e.data===null){const i=new ec({values:[]});return t.push(i),i}const n=CX(e.data,t);if(n)return ou(e.data)||(n.data.format=oH({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const i=new ec(e.data);return t.push(i),i}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function Owe(e,t,n){let i=0;for(const r of t.transforms){let a,s;if(vSe(r))s=e=new pd(e,r),a="derived";else if(eO(r)){const o=E_e(r);s=e=Qn.makeWithAncestors(e,{},o,n)??e,e=new qd(e,t,r.filter)}else if(oY(r))s=e=Ia.makeFromTransform(e,r,t),a="number";else if(xSe(r))a="date",n.getWithExplicit(r.field).value===void 0&&(e=new Qn(e,{[r.field]:a}),n.set(r.field,a,!1)),s=e=qa.makeFromTransform(e,r);else if(SSe(r))s=e=ia.makeFromTransform(e,r),a="number",sO(t)&&(e=new Eu(e));else if(sY(r))s=e=$p.make(e,t,r,i++),a="derived";else if(pSe(r))s=e=new Id(e,r),a="number";else if(mSe(r))s=e=new bc(e,r),a="number";else if(ESe(r))s=e=Vs.makeFromTransform(e,r),a="derived";else if(_Se(r))s=e=new Bx(e,r),a="derived";else if(wSe(r))s=e=new Fx(e,r),a="derived";else if(ySe(r))s=e=new Lx(e,r),a="derived";else if(lSe(r))s=e=new Ix(e,r),a="derived";else if(gSe(r))e=new jx(e,r);else if(bSe(r))s=e=Rl.makeFromTransform(e,r),a="derived";else if(cSe(r))s=e=new zx(e,r),a="derived";else if(fSe(r))s=e=new qx(e,r),a="derived";else if(dSe(r))s=e=new Px(e,r),a="derived";else if(hSe(r))s=e=new Ux(e,r),a="derived";else{fe(jve(r));continue}if(s&&a!==void 0)for(const o of s.producedFields()??[])n.set(o,a,!1)}return e}function Hx(e){let t=kwe(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:i}=e.component.data,r=e.data,s=!(r&&(ou(r)||hd(r)||Ap(r)))&&e.parent?e.parent.component.data.ancestorParse.clone():new FSe;ou(r)?(hY(r)?t=new _0(t,r.sequence):tO(r)&&(t=new E0(t,r.graticule)),s.parseNothing=!0):r?.format?.parse===null&&(s.parseNothing=!0),t=Qn.makeExplicit(t,e,s)??t,t=new Eu(t);const o=e.parent&&jd(e.parent);(zt(e)||sr(e))&&o&&(t=Ia.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=Owe(t,e,s));const l=w_e(e),f=__e(e);t=Qn.makeWithAncestors(t,{},{...l,...f},s)??t,zt(e)&&(t=Lf.parseAll(t,e),t=Cp.parseAll(t,e)),(zt(e)||sr(e))&&(o||(t=Ia.makeFromEncoding(t,e)??t),t=qa.makeFromEncoding(t,e)??t,t=pd.parseAllForSortIndex(t,e));const d=t=b1(Ft.Raw,e,t);if(zt(e)){const S=ia.makeFromEncoding(t,e);S&&(t=S,sO(e)&&(t=new Eu(t))),t=Rl.makeFromEncoding(t,e)??t,t=Vs.makeFromEncoding(t,e)??t}let h,p;if(zt(e)){const{markDef:S,mark:_,config:w}=e,A=xt("invalid",S,w),{marks:C,scales:T}=p=pY({invalid:A,isPath:Fu(_)});C!==T&&T==="include-invalid-values"&&(h=t=b1(Ft.PreFilterInvalid,e,t)),C==="exclude-invalid-values"&&(t=vd.make(t,e,p)??t)}const y=t=b1(Ft.Main,e,t);let v;if(zt(e)&&p){const{marks:S,scales:_}=p;S==="include-invalid-values"&&_==="exclude-invalid-values"&&(t=vd.make(t,e,p)??t,v=t=b1(Ft.PostFilterInvalid,e,t))}zt(e)&&bEe(e,y);let b=null;if(sr(e)){const S=e.getName("facet");t=Mwe(t,e.facet)??t,b=new Pd(t,e,S,y.getSource()),n[S]=b}return{...e.component.data,outputNodes:n,outputNodeRefCounts:i,raw:d,main:y,facetRoot:b,ancestorParse:s,preFilterInvalid:h,postFilterInvalid:v}}function b1(e,t,n){const{outputNodes:i,outputNodeRefCounts:r}=t.component.data,a=t.getDataName(e),s=new Ri(n,a,e,r);return i[a]=s,s}class Rwe extends yO{children;constructor(t,n,i,r){super(t,"concat",n,i,r,t.resolve),(t.resolve?.axis?.x==="shared"||t.resolve?.axis?.y==="shared")&&fe(qve),this.children=this.getChildren(t).map((a,s)=>_O(a,this,this.getName(`concat_${s}`),void 0,r))}parseData(){this.component.data=Hx(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}tn(this.component.selection).some(t=>Pa(t))&&yk(mk)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return Ax(t)?t.vconcat:Kk(t)?t.hconcat:t.concat}parseLayoutSize(){Cwe(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=lO(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),i=t.assembleGroupStyle(),r=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...i?{style:i}:{},...r?{encode:{update:r}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function Dwe(e){return e===!1||e===null}const Nwe={disable:1,gridScale:1,scale:1,...kG,labelExpr:1,encode:1},$X=ue(Nwe);class bO extends lo{explicit;implicit;mainExtracted;constructor(t={},n={},i=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=i}clone(){return new bO(Fe(this.explicit),Fe(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!Dwe(this.get(t))}hasOrientSignalRef(){return Ce(this.explicit.orient)}}function zwe(e,t,n){const{encoding:i,config:r}=e,a=ln(i[t])??ln(i[us(t)]),s=e.axis(t)||{},{format:o,formatType:l}=s;if(Zl(l))return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:o,formatType:l,config:r}),...n};if(o===void 0&&l===void 0&&r.customFormatTypes){if(cd(a)==="quantitative"){if(fd(a)&&a.stack==="normalize"&&r.normalizedNumberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.normalizedNumberFormat,formatType:r.normalizedNumberFormatType,config:r}),...n};if(r.numberFormatType)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.numberFormat,formatType:r.numberFormatType,config:r}),...n}}if(cd(a)==="temporal"&&r.timeFormatType&&de(a)&&!a.timeUnit)return{text:ta({fieldOrDatumDef:a,field:"datum.value",format:r.timeFormat,formatType:r.timeFormatType,config:r}),...n}}return n}function Fwe(e){return oo.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[jwe(n,e)]),t),{})}const Lwe={bottom:"top",top:"bottom",left:"right",right:"left"};function Bwe(e){const{axes:t,resolve:n}=e.component,i={top:0,bottom:0,right:0,left:0};for(const r of e.children){r.parseAxesAndHeaders();for(const a of ue(r.component.axes))n.axis[a]=cO(e.component.resolve,a),n.axis[a]==="shared"&&(t[a]=Uwe(t[a],r.component.axes[a]),t[a]||(n.axis[a]="independent",delete t[a]))}for(const r of oo){for(const a of e.children)if(a.component.axes[r]){if(n.axis[r]==="independent"){t[r]=(t[r]??[]).concat(a.component.axes[r]);for(const s of a.component.axes[r]){const{value:o,explicit:l}=s.getWithExplicit("orient");if(!Ce(o)){if(i[o]>0&&!l){const f=Lwe[o];i[o]>i[f]&&s.set("orient",f,!1)}i[o]++}}}delete a.component.axes[r]}if(n.axis[r]==="independent"&&t[r]&&t[r].length>1)for(const[a,s]of(t[r]||[]).entries())a>0&&s.get("grid")&&!s.explicit.grid&&(s.implicit.grid=!1)}}function Uwe(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let i=0;i<n;i++){const r=e[i],a=t[i];if(!!r!=!!a)return;if(r&&a){const s=r.getWithExplicit("orient"),o=a.getWithExplicit("orient");if(s.explicit&&o.explicit&&s.value!==o.value)return;e[i]=qwe(r,a)}}}else return t.map(n=>n.clone());return e}function qwe(e,t){for(const n of $X){const i=Su(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(r,a)=>{switch(n){case"title":return NH(r,a);case"gridScale":return{explicit:r.explicit,value:Vt(r.value,a.value)}}return $x(r,a,n,"axis")});e.setWithExplicit(n,i)}return e}function Pwe(e,t,n,i,r){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Ce(n.labelAngle)?n.labelAngle:_p(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===YY(i,r))return!0}return e===n[t]}const Iwe=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function jwe(e,t){let n=t.axis(e);const i=new bO,r=ln(t.encoding[e]),{mark:a,config:s}=t,o=n?.orient||s[e==="x"?"axisX":"axisY"]?.orient||s.axis?.orient||MEe(e),l=t.getScaleComponent(e).get("type"),f=EEe(e,l,o,t.config),d=n!==void 0?!n:qC("disable",s.style,n?.style,f).configValue;if(i.set("disable",d,n!==void 0),d)return i;n=n||{};const h=CEe(r,n,e,s.style,f),p=mG(n.formatType,r,l),y=pG(r,r.type,n.format,n.formatType,s,!0),v={fieldOrDatumDef:r,axis:n,channel:e,model:t,scaleType:l,orient:o,labelAngle:h,format:y,formatType:p,mark:a,config:s};for(const _ of $X){const w=_ in i9?i9[_](v):kF(_)?n[_]:void 0,A=w!==void 0,C=Pwe(w,_,n,t,e);if(A&&C)i.set(_,w,C);else{const{configValue:T=void 0,configFrom:k=void 0}=kF(_)&&_!=="values"?qC(_,s.style,n.style,f):{},M=T!==void 0;A&&!M?i.set(_,w,C):(k!=="vgAxisConfig"||Iwe.has(_)&&M||x0(T)||Ce(T))&&i.set(_,T,!1)}}const b=n.encoding??{},S=MG.reduce((_,w)=>{if(!i.hasAxisPart(w))return _;const A=KY(b[w]??{},t),C=w==="labels"?zwe(t,e,A):A;return C!==void 0&&!wt(C)&&(_[w]={update:C}),_},{});return wt(S)||i.set("encode",S,!!n.encoding||n.labelAngle!==void 0),i}function Hwe({encoding:e,size:t}){for(const n of oo){const i=Bi(n);Za(t[i])&&eu(e[n])&&(delete t[i],fe(UH(i)))}return t}const Gwe={vgMark:"arc",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...hi("x",e,{defaultPos:"mid"}),...hi("y",e,{defaultPos:"mid"}),...Js(e,"radius"),...Js(e,"theta")})},Ywe={vgMark:"area",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...Tv("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...Tv("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...aO(e)})},Xwe={vgMark:"rect",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},Vwe={vgMark:"shape",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&de(n)&&n.type===Bd?{field:pe(n,{expr:"datum"})}:{}}]}},Wwe={vgMark:"image",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y"),...iO(e,"url")})},Qwe={vgMark:"line",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...hi("x",e,{defaultPos:"mid"}),...hi("y",e,{defaultPos:"mid"}),...Nn("size",e,{vgChannel:"strokeWidth"}),...aO(e)})},Zwe={vgMark:"trail",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...hi("x",e,{defaultPos:"mid"}),...hi("y",e,{defaultPos:"mid"}),...Nn("size",e),...aO(e)})};function xO(e,t){const{config:n}=e;return{...Ur(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...hi("x",e,{defaultPos:"mid"}),...hi("y",e,{defaultPos:"mid"}),...Nn("size",e),...Nn("angle",e),...Kwe(e,n,t)}}function Kwe(e,t,n){return n?{shape:{value:n}}:Nn("shape",e)}const Jwe={vgMark:"symbol",encodeEntry:e=>xO(e)},eAe={vgMark:"symbol",encodeEntry:e=>xO(e,"circle")},tAe={vgMark:"symbol",encodeEntry:e=>xO(e,"square")},nAe={vgMark:"rect",encodeEntry:e=>({...Ur(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,"x"),...Js(e,"y")})},iAe={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Ur(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Tv("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...Tv("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...Nn("size",e,{vgChannel:"strokeWidth"})}}},rAe={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Ur(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...hi("x",e,{defaultPos:"mid"}),...hi("y",e,{defaultPos:"mid"}),...iO(e),...Nn("size",e,{vgChannel:"fontSize"}),...Nn("angle",e),...JF("align",aAe(e.markDef,n,t)),...JF("baseline",sAe(e.markDef,n,t)),...hi("radius",e,{defaultPos:null}),...hi("theta",e,{defaultPos:null})}}};function aAe(e,t,n){if(xt("align",e,n)===void 0)return"center"}function sAe(e,t,n){if(xt("baseline",e,n)===void 0)return"middle"}const oAe={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,i=n.orient,r=i==="horizontal"?"x":"y",a=i==="horizontal"?"y":"x",s=i==="horizontal"?"height":"width";return{...Ur(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Js(e,r),...hi(a,e,{defaultPos:"mid",vgChannel:a==="y"?"yc":"xc"}),[s]:Tt(xt("thickness",n,t))}}},x1={arc:Gwe,area:Ywe,bar:Xwe,circle:eAe,geoshape:Vwe,image:Wwe,line:Qwe,point:Jwe,rect:nAe,rule:iAe,square:tAe,text:rAe,tick:oAe,trail:Zwe};function uAe(e){if(Xe([mx,gx,mxe],e.mark)){const t=FG(e.mark,e.encoding);if(t.length>0)return lAe(e,t)}else if(e.mark===px){const t=wC.some(n=>xt(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return cAe(e)}return SO(e)}const v9="faceted_path_";function lAe(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:v9+e.requestDataName(Ft.Main),data:e.requestDataName(Ft.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:SO(e,{fromPrefix:v9})}]}const b9="stack_group_";function cAe(e){const[t]=SO(e,{fromPrefix:b9}),n=e.scaleName(e.stack.fieldChannel),i=(f={})=>e.vgField(e.stack.fieldChannel,f),r=(f,d)=>{const h=[i({prefix:"min",suffix:"start",expr:d}),i({prefix:"max",suffix:"start",expr:d}),i({prefix:"min",suffix:"end",expr:d}),i({prefix:"max",suffix:"end",expr:d})];return`${f}(${h.map(p=>`scale('${n}',${p})`).join(",")})`};let a,s;e.stack.fieldChannel==="x"?(a={...rd(t.encode.update,["y","yc","y2","height",...wC]),x:{signal:r("min","datum")},x2:{signal:r("max","datum")},clip:{value:!0}},s={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...ar(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(a={...rd(t.encode.update,["x","xc","x2","width"]),y:{signal:r("min","datum")},y2:{signal:r("max","datum")},clip:{value:!0}},s={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...ar(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const f of wC){const d=Wa(f,e.markDef,e.config);t.encode.update[f]?(a[f]=t.encode.update[f],delete t.encode.update[f]):d&&(a[f]=Tt(d)),d&&(t.encode.update[f]={value:0})}const o=[];if(e.stack.groupbyChannels?.length>0)for(const f of e.stack.groupbyChannels){const d=e.fieldDef(f),h=pe(d);h&&o.push(h),(d?.bin||d?.timeUnit)&&o.push(pe(d,{binSuffix:"end"}))}return a=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((f,d)=>{if(t.encode.update[d])return{...f,[d]:t.encode.update[d]};{const h=Wa(d,e.markDef,e.config);return h!==void 0?{...f,[d]:Tt(h)}:f}},a),a.stroke&&(a.strokeForeground={value:!0},a.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Ft.Main),name:b9+e.requestDataName(Ft.Main),groupby:o,aggregate:{fields:[i({suffix:"start"}),i({suffix:"start"}),i({suffix:"end"}),i({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:a},marks:[{type:"group",encode:{update:s},marks:[t]}]}]}function fAe(e){const{encoding:t,stack:n,mark:i,markDef:r,config:a}=e,s=t.order;if(!(!re(s)&&ua(s)&&EC(s.value)||!s&&EC(xt("order",r,a)))){if((re(s)||de(s))&&!n)return OH(s,{expr:"datum"});if(Fu(i)){const o=r.orient==="horizontal"?"y":"x",l=t[o];if(de(l))return{field:o}}}}function SO(e,t={fromPrefix:""}){const{mark:n,markDef:i,encoding:r,config:a}=e,s=Vt(i.clip,dAe(e),hAe(e)),o=MH(i),l=r.key,f=fAe(e),d=gAe(e),h=xt("aria",i,a),p=x1[n].postEncodingTransform?x1[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:x1[n].vgMark,...s?{clip:s}:{},...o?{style:o}:{},...l?{key:l.field}:{},...f?{sort:f}:{},...d||{},...h===!1?{aria:h}:{},from:{data:t.fromPrefix+e.requestDataName(Ft.Main)},encode:{update:x1[n].encodeEntry(e)},...p?{transform:p}:{}}]}function dAe(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t?.get("selectionExtent")||n?.get("selectionExtent")?!0:void 0}function hAe(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function gAe(e){if(!e.component.selection)return null;const t=ue(e.component.selection).length;let n=t,i=e.parent;for(;i&&n===0;)n=ue(i.component.selection).length,i=i.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class TX extends _X{markDef;encoding;specifiedScales={};stack;specifiedAxes={};specifiedLegends={};specifiedProjection={};selection=[];children=[];constructor(t,n,i,r={},a){super(t,"unit",n,i,a,void 0,RF(t)?t.view:void 0);const s=Qa(t.mark)?{...t.mark}:{type:t.mark},o=s.type;s.filled===void 0&&(s.filled=K2e(s,a,{graticule:t.data&&tO(t.data)}));const l=this.encoding=n2e(t.encoding||{},o,s.filled,a);this.markDef=iY(s,l,a),this.size=Hwe({encoding:l,size:RF(t)?{...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:r}),this.stack=nY(this.markDef,l),this.specifiedScales=this.initScales(o,l),this.specifiedAxes=this.initAxes(l),this.specifiedLegends=this.initLegends(l),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(f=>Qk(f))}get hasProjection(){const{encoding:t}=this,n=this.mark===uG,i=t&&Vye.some(r=>Be(t[r]));return n||i}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return dk.reduce((i,r)=>{const a=ln(n[r]);return a&&(i[r]=this.initScale(a.scale??{})),i},{})}initScale(t){const{domain:n,range:i}=t,r=Rn(t);return re(n)&&(r.domain=n.map(Ji)),re(i)&&(r.range=i.map(Ji)),r}initAxes(t){return oo.reduce((n,i)=>{const r=t[i];if(Be(r)||i===Rt&&Be(t.x2)||i===$n&&Be(t.y2)){const a=Be(r)?r.axis:void 0;n[i]=a&&this.initAxis({...a})}return n},{})}initAxis(t){const n=ue(t),i={};for(const r of n){const a=t[r];i[r]=x0(a)?TH(a):Ji(a)}return i}initLegends(t){return ave.reduce((n,i)=>{const r=ln(t[i]);if(r&&ove(i)){const a=r.legend;n[i]=a&&Rn(a)}return n},{})}parseData(){this.component.data=Hx(this)}parseLayoutSize(){$we(this)}parseSelections(){this.component.selection=vEe(this,this.selection)}parseMarkGroup(){this.component.mark=uAe(this)}parseAxesAndHeaders(){this.component.axes=Fwe(this)}assembleSelectionTopLevelSignals(t){return GSe(this,t)}assembleSignals(){return[...jY(this),...jSe(this,[])]}assembleSelectionData(t){return YSe(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return lO(this)}correctDataNames=t=>(t.from?.data&&(t.from.data=this.lookupDataSource(t.from.data),"time"in this.encoding&&(t.from.data=t.from.data+yY)),t.from?.facet?.data&&(t.from.facet.data=this.lookupDataSource(t.from.facet.data)),t);assembleMarks(){let t=this.component.mark??[];return(!this.parent||!jd(this.parent))&&(t=SY(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return kl(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return la(n)}typedFieldDef(t){const n=this.fieldDef(t);return vi(n)?n:null}}class EO extends yO{children;constructor(t,n,i,r,a){super(t,"layer",n,i,a,t.resolve,t.view);const s={...r,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((o,l)=>{if(Cx(o))return new EO(o,this,this.getName(`layer_${l}`),s,a);if(uo(o))return new TX(o,this,this.getName(`layer_${l}`),s,a);throw new Error(gk(o))})}parseData(){this.component.data=Hx(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Awe(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of ue(t.component.selection))this.component.selection[n]=t.component.selection[n]}tn(this.component.selection).some(t=>Pa(t))&&yk(mk)}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){Bwe(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,i)=>i.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),jY(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),lO(this))}assembleSelectionData(t){return this.children.reduce((n,i)=>i.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const i of this.children)for(const r of ve(i.assembleGroupStyle()))t.add(r);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return XSe(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),sX(this))}}function _O(e,t,n,i,r){if(bx(e))return new Zg(e,t,n,r);if(Cx(e))return new EO(e,t,n,i,r);if(uo(e))return new TX(e,t,n,i,r);if(C2e(e))return new Rwe(e,t,n,r);throw new Error(gk(e))}function pAe(e,t={}){t.logger&&kbe(t.logger),t.fieldTitle&&CG(t.fieldTitle);try{const n=tY(Pv(t.config,e.config)),i=cY(e,n),r=_O(i,null,"",void 0,n);return r.parse(),U_e(r.component.data,r),{spec:yAe(r,mAe(e,i.autosize,n,r),e.datasets,e.usermeta),normalized:i}}finally{t.logger&&Obe(),t.fieldTitle&&Xxe()}}function mAe(e,t,n,i){const r=i.component.layoutSize.get("width"),a=i.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},i.hasAxisOrientSignalRef()&&(t.resize=!0)):Ee(t)&&(t={type:t}),r&&a&&DSe(t.type)){if(r==="step"&&a==="step")fe(mF()),t.type="pad";else if(r==="step"||a==="step"){const s=r==="step"?"width":"height";fe(mF(ux(s)));const o=s==="width"?"height":"width";t.type=NSe(o)}}return{...ue(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...HF(n,!1),...HF(e,!0)}}function yAe(e,t,n={},i){const r=e.config?q2e(e.config):void 0,a=Swe(e.component.data,n),s=e.assembleSelectionData(a),o=e.assembleProjections(),l=e.assembleTitle(),f=e.assembleGroupStyle(),d=e.assembleGroupEncodeEntry(!0);let h=e.assembleLayoutSignals();h=h.filter(v=>(v.name==="width"||v.name==="height")&&v.value!==void 0?(t[v.name]=+v.value,!1):!0);const{params:p,...y}=t;return{$schema:"https://vega.github.io/schema/vega/v6.json",...e.description?{description:e.description}:{},...y,...l?{title:l}:{},...f?{style:f}:{},...d?{encode:{update:d}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...h,...e.assembleSelectionTopLevelSignals([]),...ZG(p)]),...r?{config:r}:{},...i?{usermeta:i}:{}}}const vAe=Iye.version,bAe=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:sd,accessPathWithDatum:rk,accessWithDatumToUnescapedPath:gt,compile:pAe,contains:Xe,deepEqual:nr,deleteNestedProperty:vv,duplicate:Fe,entries:vu,every:tk,fieldIntersection:ik,flatAccessWithDatum:lH,getFirstDefined:Vt,hasIntersection:nk,hasProperty:le,hash:Qe,internalField:dH,isBoolean:Ep,isEmpty:wt,isEqual:Hye,isInternalField:hH,isNullOrFalse:EC,isNumeric:nx,keys:ue,logicalExpr:Wg,mergeDeep:oH,never:sH,normalize:cY,normalizeAngle:_p,omit:ar,pick:rd,prefixGenerator:_C,removePathFromField:Fd,replaceAll:Gl,replacePathInField:zr,resetIdCounter:Yye,setEqual:uH,some:ad,stringify:ft,titleCase:l0,unique:za,uniqueId:fH,vals:tn,varName:Ot,version:vAe},Symbol.toStringTag,{value:"Module"}));var S1={},x9;function xAe(){if(x9)return S1;x9=1,Object.defineProperty(S1,"__esModule",{value:!0});function e(t){var n=/\/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g,i=n.exec(t).slice(1,3),r=i[0],a=i[1];return{library:r,version:a}}return S1.default=e,S1}var SAe=xAe();const MX=Mp(SAe);var EAe="2.15.0",_Ae={version:EAe};const yf="#fff",S9="#888",wAe={background:"#333",view:{stroke:S9},title:{color:yf,subtitleColor:yf},style:{"guide-label":{fill:yf},"guide-title":{fill:yf}},axis:{domainColor:yf,gridColor:S9,tickColor:yf}},rl="#4572a7",AAe={background:"#fff",arc:{fill:rl},area:{fill:rl},line:{stroke:rl,strokeWidth:2},path:{stroke:rl},rect:{fill:rl},shape:{stroke:rl},symbol:{fill:rl,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},al="#30a2da",ww="#cbcbcb",CAe="#999",$Ae="#333",E9="#f0f0f0",_9="#333",TAe={arc:{fill:al},area:{fill:al},axis:{domainColor:ww,grid:!0,gridColor:ww,gridWidth:1,labelColor:CAe,labelFontSize:10,titleColor:$Ae,tickColor:ww,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:E9,group:{fill:E9},legend:{labelColor:_9,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:_9,titleFontSize:14,titlePadding:10},line:{stroke:al,strokeWidth:2},path:{stroke:al,strokeWidth:.5},rect:{fill:al},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:al},bar:{binSpacing:2,fill:al,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},sl="#000",MAe={group:{fill:"#e5e5e5"},arc:{fill:sl},area:{fill:sl},line:{stroke:sl},path:{stroke:sl},rect:{fill:sl},shape:{stroke:sl},symbol:{fill:sl,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},kAe=22,OAe="normal",w9="Benton Gothic, sans-serif",A9=11.5,RAe="normal",ol="#82c6df",Aw="Benton Gothic Bold, sans-serif",C9="normal",$9=13,cg={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"]},DAe={background:"#ffffff",title:{anchor:"start",color:"#000000",font:Aw,fontSize:kAe,fontWeight:OAe},arc:{fill:ol},area:{fill:ol},line:{stroke:ol,strokeWidth:2},path:{stroke:ol},rect:{fill:ol},shape:{stroke:ol},symbol:{fill:ol,size:30},axis:{labelFont:w9,labelFontSize:A9,labelFontWeight:RAe,titleFont:Aw,titleFontSize:$9,titleFontWeight:C9},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:w9,labelFontSize:A9,symbolType:"square",titleFont:Aw,titleFontSize:$9,titleFontWeight:C9},range:{category:cg["category-6"],diverging:cg["fireandice-6"],heatmap:cg["fire-7"],ordinal:cg["fire-7"],ramp:cg["fire-7"]}},ul="#ab5787",E1="#979797",NAe={background:"#f9f9f9",arc:{fill:ul},area:{fill:ul},line:{stroke:ul},path:{stroke:ul},rect:{fill:ul},shape:{stroke:ul},symbol:{fill:ul,size:30},axis:{domainColor:E1,domainWidth:.5,gridWidth:.2,labelColor:E1,tickColor:E1,tickWidth:.2,titleColor:E1},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},ll="#3e5c69",zAe={background:"#fff",arc:{fill:ll},area:{fill:ll},line:{stroke:ll},path:{stroke:ll},rect:{fill:ll},shape:{stroke:ll},symbol:{fill:ll},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},Sr="#1696d2",T9="#000000",FAe="#FFFFFF",_1="Lato",Cw="Lato",LAe="Lato",BAe="#DEDDDD",UAe=18,fg={"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},qAe={background:FAe,title:{anchor:"start",fontSize:UAe,font:_1},axisX:{domain:!0,domainColor:T9,domainWidth:1,grid:!1,labelFontSize:12,labelFont:Cw,labelAngle:0,tickColor:T9,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:_1},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:BAe,gridWidth:1,labelFontSize:12,labelFont:Cw,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:_1,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:Cw,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:_1,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:fg["six-groups-cat-1"],diverging:fg["diverging-colors"],heatmap:fg["diverging-colors"],ordinal:fg["six-groups-seq"],ramp:fg["shades-blue"]},area:{fill:Sr},rect:{fill:Sr},line:{color:Sr,stroke:Sr,strokeWidth:5},trail:{color:Sr,stroke:Sr,strokeWidth:0,size:1},path:{stroke:Sr,strokeWidth:.5},point:{filled:!0},text:{font:LAe,color:Sr,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:Sr,stroke:null}},arc:{fill:Sr},shape:{stroke:Sr},symbol:{fill:Sr,size:30}},cl="#3366CC",M9="#ccc",w1="Arial, sans-serif",PAe={arc:{fill:cl},area:{fill:cl},path:{stroke:cl},rect:{fill:cl},shape:{stroke:cl},symbol:{stroke:cl},circle:{fill:cl},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:w1,fontSize:12},"guide-title":{font:w1,fontSize:12},"group-title":{font:w1,fontSize:12}},title:{font:w1,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:M9,tickColor:M9,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},wO=e=>e*(1/3+1),k9=wO(9),O9=wO(10),R9=wO(12),dg="Segoe UI",D9="wf_standard-font, helvetica, arial, sans-serif",N9="#252423",hg="#605E5C",z9="transparent",IAe="#C8C6C4",Gr="#118DFF",jAe="#12239E",HAe="#E66C37",GAe="#6B007B",YAe="#E044A7",XAe="#744EC2",VAe="#D9B300",WAe="#D64550",kX=Gr,OX="#DEEFFF",F9=[OX,kX],QAe=[OX,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",kX],ZAe={view:{stroke:z9},background:z9,font:dg,header:{titleFont:D9,titleFontSize:R9,titleColor:N9,labelFont:dg,labelFontSize:O9,labelColor:hg},axis:{ticks:!1,grid:!1,domain:!1,labelColor:hg,labelFontSize:k9,titleFont:D9,titleColor:N9,titleFontSize:R9,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:IAe,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:Gr},line:{stroke:Gr,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:dg,fontSize:k9,fill:hg},arc:{fill:Gr},area:{fill:Gr,line:!0,opacity:.6},path:{stroke:Gr},rect:{fill:Gr},point:{fill:Gr,filled:!0,size:75},shape:{stroke:Gr},symbol:{fill:Gr,strokeWidth:1.5,size:50},legend:{titleFont:dg,titleFontWeight:"bold",titleColor:hg,labelFont:dg,labelFontSize:O9,labelColor:hg,symbolType:"circle",symbolSize:75},range:{category:[Gr,jAe,HAe,GAe,YAe,XAe,VAe,WAe],diverging:F9,heatmap:F9,ordinal:QAe}},$w='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',KAe='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',Tw=400,A1={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},JAe=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],eCe=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function Gx({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",i=A1.gridBg[e],r=A1.textPrimary[e],a=A1.textSecondary[e],s=n==="dark"?JAe:eCe,o=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:o},area:{fill:o},path:{stroke:o},rect:{fill:o},shape:{stroke:o},symbol:{stroke:o},circle:{fill:o},view:{fill:i,stroke:i},group:{fill:i},title:{color:r,anchor:"start",dy:-15,fontSize:16,font:$w,fontWeight:600},axis:{labelColor:a,labelFontSize:12,labelFont:KAe,labelFontWeight:Tw,titleColor:r,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:A1.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:$w,fill:a,fontWeight:Tw},"guide-title":{font:$w,fill:a,fontWeight:Tw}},range:{category:s,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const tCe=Gx({theme:"white",background:"#ffffff"}),nCe=Gx({theme:"g10",background:"#f4f4f4"}),iCe=Gx({theme:"g90",background:"#262626"}),rCe=Gx({theme:"g100",background:"#161616"}),aCe=_Ae.version,sCe=Object.freeze(Object.defineProperty({__proto__:null,carbong10:nCe,carbong100:rCe,carbong90:iCe,carbonwhite:tCe,dark:wAe,excel:AAe,fivethirtyeight:TAe,ggplot2:MAe,googlecharts:PAe,latimes:DAe,powerbi:ZAe,quartz:NAe,urbaninstitute:qAe,version:aCe,vox:zAe},Symbol.toStringTag,{value:"Module"})),oCe=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black; }
  #vg-tooltip-element.visible {
    visibility: visible; }
  #vg-tooltip-element h2 {
    margin-top: 0;
    margin-bottom: 10px;
    font-size: 13px; }
  #vg-tooltip-element table {
    border-spacing: 0; }
    #vg-tooltip-element table tr {
      border: none; }
      #vg-tooltip-element table tr td {
        overflow: hidden;
        text-overflow: ellipsis;
        padding-top: 2px;
        padding-bottom: 2px; }
        #vg-tooltip-element table tr td.key {
          color: #808080;
          max-width: 150px;
          text-align: right;
          padding-right: 4px; }
        #vg-tooltip-element table tr td.value {
          display: block;
          max-width: 300px;
          max-height: 7em;
          text-align: left; }
  #vg-tooltip-element.dark-theme {
    background-color: rgba(32, 32, 32, 0.9);
    border: 1px solid #f5f5f5;
    color: white; }
    #vg-tooltip-element.dark-theme td.key {
      color: #bfbfbf; }
`,RX="vg-tooltip-element",uCe={offsetX:10,offsetY:10,id:RX,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:lCe,maxDepth:2};function lCe(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function cCe(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return oCe.toString().replace(RX,e)}function Hd(e,t,n){return e.fields=t||[],e.fname=n,e}function fCe(e){return e.length===1?dCe(e[0]):hCe(e)}const dCe=e=>function(t){return t[e]},hCe=e=>{const t=e.length;return function(n){for(let i=0;i<t;++i)n=n[e[i]];return n}};function Mw(e){throw Error(e)}function gCe(e){const t=[],n=e.length;let i=null,r=0,a="",s,o,l;e=e+"";function f(){t.push(a+e.substring(s,o)),a="",s=o+1}for(s=o=0;o<n;++o)if(l=e[o],l==="\\")a+=e.substring(s,o++),s=o;else if(l===i)f(),i=null,r=-1;else{if(i)continue;s===r&&l==='"'||s===r&&l==="'"?(s=o+1,i=l):l==="."&&!r?o>s?f():s=o+1:l==="["?(o>s&&f(),r=s=o+1):l==="]"&&(r||Mw("Access path missing open bracket: "+e),r>0&&f(),r=0,s=o+1)}return r&&Mw("Access path missing closing bracket: "+e),i&&Mw("Access path missing closing quote: "+e),o>s&&(o++,f()),t}function pCe(e,t,n){const i=gCe(e);return e=i.length===1?i[0]:e,Hd(fCe(i),[e],e)}pCe("id");Hd(e=>e,[],"identity");Hd(()=>0,[],"zero");Hd(()=>1,[],"one");Hd(()=>!0,[],"true");Hd(()=>!1,[],"false");var DX=Array.isArray;function Rv(e){return e===Object(e)}const L9=e=>e!=="__proto__";function NX(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((i,r)=>{for(const a in r)if(a==="signals")i.signals=mCe(i.signals,r.signals);else{const s=a==="legend"?{layout:1}:a==="style"?!0:null;zX(i,a,r[a],s)}return i},{})}function zX(e,t,n,i){if(!L9(t))return;let r,a;if(Rv(n)&&!DX(n)){a=Rv(e[t])?e[t]:e[t]={};for(r in n)i&&(i===!0||i[r])?zX(a,r,n[r]):L9(r)&&(a[r]=n[r])}else e[t]=n}function mCe(e,t){if(e==null)return t;const n={},i=[];function r(a){n[a.name]||(n[a.name]=1,i.push(a))}return t.forEach(r),e.forEach(r),i}function yCe(e){return typeof e=="boolean"}function Dv(e){return typeof e=="string"}var vCe=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function bCe(e,t,n){if(DX(e))return`[${e.map(i=>t(Dv(i)?i:B9(i,n))).join(", ")}]`;if(Rv(e)){let i="";const r=e,{title:a}=r,s=vCe(r,["title"]);a&&(i+=`<h2>${t(a)}</h2>`);const o=Object.keys(s);if(o.length>0){i+="<table>";for(const l of o){let f=s[l];f!==void 0&&(Rv(f)&&(f=B9(f,n)),i+=`<tr><td class="key">${t(l)}:</td><td class="value">${t(f)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function xCe(e){const t=[];return function(n,i){if(typeof i!="object"||i===null)return i;const r=t.indexOf(this)+1;return t.length=r,t.length>e?"[Object]":t.indexOf(i)>=0?"[Circular]":(t.push(i),i)}}function B9(e,t){return JSON.stringify(e,xCe(t))}function SCe(e,t,n,i){let r=e.clientX+n;r+t.width>window.innerWidth&&(r=+e.clientX-n-t.width);let a=e.clientY+i;return a+t.height>window.innerHeight&&(a=+e.clientY-i-t.height),{x:r,y:a}}class ECe{constructor(t){this.options=Object.assign(Object.assign({},uCe),t);const n=this.options.id;if(this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const i=document.createElement("style");i.setAttribute("id",this.options.styleId),i.innerHTML=cCe(n);const r=document.head;r.childNodes.length>0?r.insertBefore(i,r.childNodes[0]):r.appendChild(i)}this.el=document.getElementById(n),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",n),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el))}tooltipHandler(t,n,i,r){if(r==null||r===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=bCe(r,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:a,y:s}=SCe(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.setAttribute("style",`top: ${s}px; left: ${a}px`)}}function _Ce(e,t,n){const i=e.open(t),r=250;let a=40;function s(l){l.source===i&&(a=0,e.removeEventListener("message",s,!1))}e.addEventListener("message",s,!1);function o(){a<=0||(i.postMessage(n,"*"),setTimeout(o,r),a-=1)}setTimeout(o,r)}const wCe=`.vega-embed {
  position: relative;
  display: inline-block; }
  .vega-embed.has-actions {
    padding-right: 38px; }
  .vega-embed details:not([open]) > :not(summary) {
    display: none !important; }
  .vega-embed summary {
    list-style: none;
    position: absolute;
    top: 0;
    right: 0;
    padding: 6px;
    z-index: 1000;
    background: white;
    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
    color: #1b1e23;
    border: 1px solid #aaa;
    border-radius: 999px;
    opacity: 0.2;
    transition: opacity 0.4s ease-in;
    outline: none;
    cursor: pointer;
    line-height: 0px; }
    .vega-embed summary::-webkit-details-marker {
      display: none; }
    .vega-embed summary:active {
      box-shadow: #aaa 0px 0px 0px 1px inset; }
    .vega-embed summary svg {
      width: 14px;
      height: 14px; }
  .vega-embed details[open] summary {
    opacity: 0.7; }
  .vega-embed:hover summary,
  .vega-embed:focus summary {
    opacity: 1 !important;
    transition: opacity 0.2s ease; }
  .vega-embed .vega-actions {
    position: absolute;
    z-index: 1001;
    top: 35px;
    right: -9px;
    display: flex;
    flex-direction: column;
    padding-bottom: 8px;
    padding-top: 8px;
    border-radius: 4px;
    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
    border: 1px solid #d9d9d9;
    background: white;
    animation-duration: 0.15s;
    animation-name: scale-in;
    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
    text-align: left; }
    .vega-embed .vega-actions a {
      padding: 8px 16px;
      font-family: sans-serif;
      font-size: 14px;
      font-weight: 600;
      white-space: nowrap;
      color: #434a56;
      text-decoration: none; }
      .vega-embed .vega-actions a:hover {
        background-color: #f7f7f9;
        color: black; }
    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
      content: "";
      display: inline-block;
      position: absolute; }
    .vega-embed .vega-actions::before {
      left: auto;
      right: 14px;
      top: -16px;
      border: 8px solid #0000;
      border-bottom-color: #d9d9d9; }
    .vega-embed .vega-actions::after {
      left: auto;
      right: 15px;
      top: -14px;
      border: 7px solid #0000;
      border-bottom-color: #fff; }

.vega-embed-wrapper {
  max-width: 100%;
  overflow: scroll;
  padding-right: 14px; }

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6); }
  to {
    opacity: 1;
    transform: scale(1); } }
`;String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substr(!t||t<0?0:+t,e.length)===e});function FX(e,...t){for(const n of t)ACe(e,n);return e}function ACe(e,t){for(const n of Object.keys(t))Sd(e,n,t[n],!0)}var kw;const Go=qye;let Tp=bAe;const C1=typeof window<"u"?window:void 0;Tp===void 0&&(!((kw=C1?.vl)===null||kw===void 0)&&kw.compile)&&(Tp=C1.vl);const CCe={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},$Ce={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Fg={vega:"Vega","vega-lite":"Vega-Lite"},Nv={vega:Go.version,"vega-lite":Tp?Tp.version:"not available"},TCe={vega:e=>e,"vega-lite":(e,t)=>Tp.compile(e,{config:t}).spec},MCe=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`;function kCe(e){return typeof e=="function"}function U9(e,t,n,i){const r=`<html><head>${t}</head><body><pre><code class="json">`,a=`</code></pre>${n}</body></html>`,s=window.open("");s.document.write(r+e+a),s.document.title=`${Fg[i]} JSON Source`}function OCe(e,t){var n;if(e.$schema){const i=MX(e.$schema);t&&t!==i.library&&console.warn(`The given visualization spec is written in ${Fg[i.library]}, but mode argument sets ${(n=Fg[t])!==null&&n!==void 0?n:t}.`);const r=i.library;return Z9.satisfies(Nv[r],`^${i.version.slice(1)}`)||console.warn(`The input spec uses ${Fg[r]} ${i.version}, but the current version of ${Fg[r]} is v${Nv[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function RCe(e){return!!(e&&"load"in e)}function DCe(e,t,n={}){var i,r,a;return J1(this,void 0,void 0,function*(){const s=RCe(n.loader)?n.loader:Go.loader(n.loader),o=Dv(t)?JSON.parse(yield s.load(t)):t,l=yield q9((i=o.usermeta&&o.usermeta.embedOptions)!==null&&i!==void 0?i:{},s),f=yield q9(n,s),d=Object.assign(Object.assign({},FX(f,l)),{config:NX((r=f.config)!==null&&r!==void 0?r:{},(a=l.config)!==null&&a!==void 0?a:{})});return yield NCe(e,o,d,s)})}function q9(e,t){var n;return J1(this,void 0,void 0,function*(){const i=Dv(e.config)?JSON.parse(yield t.load(e.config)):(n=e.config)!==null&&n!==void 0?n:{},r=Dv(e.patch)?JSON.parse(yield t.load(e.patch)):e.patch;return Object.assign(Object.assign(Object.assign({},e),r?{patch:r}:{}),i?{config:i}:{})})}function NCe(e,t,n={},i){var r,a,s,o,l,f;return J1(this,void 0,void 0,function*(){const d=n.theme?NX(sCe[n.theme],(r=n.config)!==null&&r!==void 0?r:{}):n.config,h=yCe(n.actions)?n.actions:FX({},CCe,(a=n.actions)!==null&&a!==void 0?a:{}),p=Object.assign(Object.assign({},$Ce),n.i18n),y=(s=n.renderer)!==null&&s!==void 0?s:"canvas",v=(o=n.logLevel)!==null&&o!==void 0?o:Go.Warn,b=(l=n.downloadFileName)!==null&&l!==void 0?l:"visualization";if(n.defaultStyle!==!1){const z="vega-embed-style";if(!document.getElementById(z)){const U=document.createElement("style");U.id=z,U.innerText=n.defaultStyle===void 0||n.defaultStyle===!0?wCe.toString():n.defaultStyle,document.head.appendChild(U)}}const S=OCe(t,n.mode);let _=TCe[S](t,d);if(S==="vega-lite"&&_.$schema){const z=MX(_.$schema);Z9.satisfies(Nv.vega,`^${z.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${z.version}, but current version is v${Nv.vega}.`)}const w=typeof e=="string"?document.querySelector(e):e;if(!w)throw Error(`${e} does not exist`);w.classList.add("vega-embed"),h&&w.classList.add("has-actions"),w.innerHTML="";const A=n.patch;A&&(A instanceof Function?_=A(_):_=zv(_,A,!0,!1).newDocument),n.formatLocale&&Go.formatLocale(n.formatLocale),n.timeFormatLocale&&Go.timeFormatLocale(n.timeFormatLocale);const C=Go.parse(_,S==="vega-lite"?{}:d),T=new Go.View(C,{loader:i,logLevel:v,renderer:y});if(n.tooltip!==!1){let z;kCe(n.tooltip)?z=n.tooltip:z=new ECe(n.tooltip===!0?{}:n.tooltip).call,T.tooltip(z)}let{hover:k}=n;if(k===void 0&&(k=S==="vega"),k){const{hoverSet:z,updateSet:U}=typeof k=="boolean"?{}:k;T.hover(z,U)}n&&(n.width!=null&&T.width(n.width),n.height!=null&&T.height(n.height),n.padding!=null&&T.padding(n.padding)),yield T.initialize(e).runAsync();let M;if(h!==!1){let z=w;if(n.defaultStyle!==!1){const L=document.createElement("details");L.title=p.CLICK_TO_VIEW_ACTIONS,w.append(L),z=L;const G=document.createElement("summary");G.innerHTML=MCe,L.append(G),M=j=>{L.contains(j.target)||L.removeAttribute("open")},document.addEventListener("click",M)}const U=document.createElement("div");if(z.append(U),U.classList.add("vega-actions"),h===!0||h.export!==!1){for(const L of["svg","png"])if(h===!0||h.export===!0||h.export[L]){const G=p[`${L.toUpperCase()}_ACTION`],j=document.createElement("a");j.text=G,j.href="#",j.target="_blank",j.download=`${b}.${L}`,j.addEventListener("mousedown",function(q){return J1(this,void 0,void 0,function*(){q.preventDefault();const F=yield T.toImageURL(L,n.scaleFactor);this.href=F})}),U.append(j)}}if(h===!0||h.source!==!1){const L=document.createElement("a");L.text=p.SOURCE_ACTION,L.href="#",L.addEventListener("mousedown",function(G){var j,q;U9(hE(t),(j=n.sourceHeader)!==null&&j!==void 0?j:"",(q=n.sourceFooter)!==null&&q!==void 0?q:"",S),G.preventDefault()}),U.append(L)}if(S==="vega-lite"&&(h===!0||h.compiled!==!1)){const L=document.createElement("a");L.text=p.COMPILED_ACTION,L.href="#",L.addEventListener("mousedown",function(G){var j,q;U9(hE(_),(j=n.sourceHeader)!==null&&j!==void 0?j:"",(q=n.sourceFooter)!==null&&q!==void 0?q:"","vega"),G.preventDefault()}),U.append(L)}if(h===!0||h.editor!==!1){const L=(f=n.editorUrl)!==null&&f!==void 0?f:"https://vega.github.io/editor/",G=document.createElement("a");G.text=p.EDITOR_ACTION,G.href="#",G.addEventListener("mousedown",function(j){_Ce(window,L,{config:d,mode:S,renderer:y,spec:hE(t)}),j.preventDefault()}),U.append(G)}}function R(){M&&document.removeEventListener("click",M),T.finalize()}return{view:T,spec:t,vgSpec:_,finalize:R}})}function zCe(e){return!!e&&{}.toString.call(e)==="[object Function]"}function FCe(e,t,n){n&&(zCe(n)?n(e.data(t)):e.change(t,Go.changeset().remove(()=>!0).insert(n)))}function LCe(e,t){Object.keys(t).forEach(n=>{FCe(e,n,t[n])})}function LX(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(i=>{t.add(i)})}),t}const BX=()=>{};function Ow(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.addSignalListener(i,t[i])}catch(r){console.warn("Cannot add invalid signal listener.",r)}}),n.length>0}var Rw,P9;function BCe(){return P9||(P9=1,Rw=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(t)){if(i=t.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var s=a[r];if(!e(t[s],n[s]))return!1}return!0}return t!==t&&n!==n}),Rw}var UCe=BCe();const qCe=Mp(UCe);function PCe(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},i=LX([e,t]);return i.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),i.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),i.delete("width"),i.delete("height"),[...i].some(r=>!(r in e)||!(r in t)||!qCe(e[r],t[r]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function I9(e,t){const n=Object.keys(t);return n.forEach(i=>{try{e.removeSignalListener(i,t[i])}catch(r){console.warn("Cannot remove invalid signal listener.",r)}}),n.length>0}function Dw(e){const{spec:t,width:n,height:i}=e;return typeof n<"u"&&typeof i<"u"?{...t,width:n,height:i}:typeof n<"u"?{...t,width:n}:typeof i<"u"?{...t,height:i}:t}function Lg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class UX extends tu.PureComponent{constructor(){super(...arguments),Lg(this,"containerRef",tu.createRef()),Lg(this,"resultPromise",void 0),Lg(this,"handleError",t=>{const{onError:n=BX}=this.props;n(t,this.containerRef.current),console.warn(t)}),Lg(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=LX([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(i=>this.props[i]!==t[i]))this.clearView(),this.createView();else{const i=PCe(Dw(this.props),Dw(t)),{signalListeners:r}=this.props,{signalListeners:a}=t;if(i)if(i.isExpensive)this.clearView(),this.createView();else{const s=!zw(r,a);this.modifyView(o=>{i.width!==!1&&o.width(i.width),i.height!==!1&&o.height(i.height),s&&(a&&I9(o,a),r&&Ow(o,r)),o.run()})}else zw(r,a)||this.modifyView(s=>{a&&I9(s,a),r&&Ow(s,r),s.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:i={},width:r,height:a,...s}=this.props;if(this.containerRef.current){const o=Dw(this.props);this.resultPromise=DCe(this.containerRef.current,o,s).then(l=>{if(l){const{view:f}=l;Ow(f,i)&&f.run()}return l}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return tu.createElement("div",{ref:this.containerRef,className:t,style:n})}}Lg(UX,"propTypes",{className:k5.string,onError:k5.func});function QC(){return QC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},QC.apply(this,arguments)}function ZC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ICe={};class qX extends tu.PureComponent{constructor(){super(...arguments),ZC(this,"vegaEmbed",tu.createRef()),ZC(this,"handleNewView",t=>{this.update();const{onNewView:n=BX}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){zw(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{LCe(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return tu.createElement(UX,QC({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}ZC(qX,"defaultProps",{data:ICe});function KC(){return KC=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},KC.apply(this,arguments)}function jCe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HCe(e){let{mode:t,spec:n}=e;class i extends tu.PureComponent{render(){return tu.createElement(qX,KC({mode:t,spec:n},this.props))}}return jCe(i,"getSpec",function(){return n}),i}function GCe(){const e=HCe({spec:{$schema:"https://vega.github.io/schema/vega-lite/v6.json",data:{values:[{"i-type":"A",count:3,color:"rgb(121, 199, 227)"},{"i-type":"B",count:20,color:"rgb(26, 49, 119)"},{"i-type":"C",count:24,color:"rgb(18, 147, 154)"}]},description:"A simple pie chart with labels.",encoding:{theta:{field:"count",type:"quantitative",stack:!0},color:{field:"color",type:"nominal",legend:null,scale:null}},layer:[{mark:{type:"arc",outerRadius:80}}]}});return Nw.jsx(e,{})}pQ.createRoot(document.getElementById("root")).render(Nw.jsx(j9.StrictMode,{children:Nw.jsx(GCe,{})}));
